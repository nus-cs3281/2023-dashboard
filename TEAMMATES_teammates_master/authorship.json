[{"path":"docs/development.md","fileType":"md","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003cfrontmatter\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  title: \"Development\""},{"lineNumber":3,"author":{"gitId":"-"},"content":"\u003c/frontmatter\u003e"},{"lineNumber":4,"author":{"gitId":"-"},"content":""},{"lineNumber":5,"author":{"gitId":"-"},"content":"# Development Guidelines"},{"lineNumber":6,"author":{"gitId":"-"},"content":""},{"lineNumber":7,"author":{"gitId":"-"},"content":"These are the common tasks involved when working on features, enhancements, bug fixes, etc. for TEAMMATES."},{"lineNumber":8,"author":{"gitId":"-"},"content":""},{"lineNumber":9,"author":{"gitId":"-"},"content":"The instructions in all parts of this document work for Linux, OS X, and Windows, with the following pointers:"},{"lineNumber":10,"author":{"gitId":"-"},"content":""},{"lineNumber":11,"author":{"gitId":"-"},"content":"- Replace `./gradlew` to `gradlew.bat` if you are using Windows."},{"lineNumber":12,"author":{"gitId":"-"},"content":"- All the commands are assumed to be run from the root project folder, unless otherwise specified."},{"lineNumber":13,"author":{"gitId":"-"},"content":"- It is assumed that the development environment has been correctly set up. If this step has not been completed, refer to [this document](setting-up.md)."},{"lineNumber":14,"author":{"gitId":"-"},"content":""},{"lineNumber":15,"author":{"gitId":"-"},"content":"\u003e If you encounter any problems during the any of the processes, please refer to our [troubleshooting guide](troubleshooting-guide.md) before posting a help request on our [issue tracker](https://github.com/TEAMMATES/teammates/issues)."},{"lineNumber":16,"author":{"gitId":"-"},"content":""},{"lineNumber":17,"author":{"gitId":"-"},"content":"## Managing the dev server: front-end"},{"lineNumber":18,"author":{"gitId":"-"},"content":""},{"lineNumber":19,"author":{"gitId":"-"},"content":"\u003cbox type\u003d\"definition\"\u003e"},{"lineNumber":20,"author":{"gitId":"-"},"content":""},{"lineNumber":21,"author":{"gitId":"-"},"content":"Dev server is the server run in your local machine."},{"lineNumber":22,"author":{"gitId":"-"},"content":"\u003c/box\u003e"},{"lineNumber":23,"author":{"gitId":"-"},"content":""},{"lineNumber":24,"author":{"gitId":"-"},"content":"\u003cbox type\u003d\"definition\"\u003e"},{"lineNumber":25,"author":{"gitId":"-"},"content":""},{"lineNumber":26,"author":{"gitId":"-"},"content":"Front-end dev server is the Angular-based server handling the user interface."},{"lineNumber":27,"author":{"gitId":"-"},"content":"\u003c/box\u003e"},{"lineNumber":28,"author":{"gitId":"-"},"content":""},{"lineNumber":29,"author":{"gitId":"-"},"content":"First, you need to compile some type definitions from the back-end to be used in this dev server. Run the following command:"},{"lineNumber":30,"author":{"gitId":"-"},"content":""},{"lineNumber":31,"author":{"gitId":"-"},"content":"```sh"},{"lineNumber":32,"author":{"gitId":"-"},"content":"./gradlew generateTypes"},{"lineNumber":33,"author":{"gitId":"-"},"content":"```"},{"lineNumber":34,"author":{"gitId":"-"},"content":""},{"lineNumber":35,"author":{"gitId":"-"},"content":"To start the dev server, run the following command until you see something like `Angular Live Development Server is listening on localhost`:"},{"lineNumber":36,"author":{"gitId":"-"},"content":""},{"lineNumber":37,"author":{"gitId":"-"},"content":"```sh"},{"lineNumber":38,"author":{"gitId":"-"},"content":"npm run start"},{"lineNumber":39,"author":{"gitId":"-"},"content":"```"},{"lineNumber":40,"author":{"gitId":"-"},"content":""},{"lineNumber":41,"author":{"gitId":"-"},"content":"The dev server URL will be given at the console output, e.g. `http://localhost:4200`."},{"lineNumber":42,"author":{"gitId":"-"},"content":""},{"lineNumber":43,"author":{"gitId":"-"},"content":"To stop the dev server, press `Ctrl + C`."},{"lineNumber":44,"author":{"gitId":"-"},"content":""},{"lineNumber":45,"author":{"gitId":"-"},"content":"- The dev server is run in _watch mode_ by default, i.e. any saved change to the front-end code will be propagated to the server immediately."},{"lineNumber":46,"author":{"gitId":"-"},"content":"- The dev server is also run in _live reload mode_ by default, i.e. any saved change to the front-end code will automatically load all dev server web pages currently being opened."},{"lineNumber":47,"author":{"gitId":"-"},"content":"  To disable this behaviour, run the dev server as follows instead:"},{"lineNumber":48,"author":{"gitId":"-"},"content":""},{"lineNumber":49,"author":{"gitId":"-"},"content":"  ```sh"},{"lineNumber":50,"author":{"gitId":"-"},"content":"  npm run start -- --live-reload\u003dfalse"},{"lineNumber":51,"author":{"gitId":"-"},"content":"  ```"},{"lineNumber":52,"author":{"gitId":"-"},"content":""},{"lineNumber":53,"author":{"gitId":"-"},"content":"## Managing the dev server: back-end"},{"lineNumber":54,"author":{"gitId":"-"},"content":""},{"lineNumber":55,"author":{"gitId":"-"},"content":"\u003cbox type\u003d\"definition\"\u003e"},{"lineNumber":56,"author":{"gitId":"-"},"content":""},{"lineNumber":57,"author":{"gitId":"-"},"content":"Back-end dev server is the Jetty-based server handling all the business logic, including data storage."},{"lineNumber":58,"author":{"gitId":"-"},"content":"\u003c/box\u003e"},{"lineNumber":59,"author":{"gitId":"-"},"content":""},{"lineNumber":60,"author":{"gitId":"-"},"content":"### Pre-requisites"},{"lineNumber":61,"author":{"gitId":"-"},"content":""},{"lineNumber":62,"author":{"gitId":"-"},"content":"In order for the back-end to properly work, you need to have a running database instance and a full-text search service instance (if you are supporting one). The instances can either be a local emulator or a running production instance."},{"lineNumber":63,"author":{"gitId":"-"},"content":""},{"lineNumber":64,"author":{"gitId":"-"},"content":"The details on how to run them locally can be found [here (for local Datastore emulator)](#running-the-datastore-emulator) and [here (for full-text search service)](search.md)."},{"lineNumber":65,"author":{"gitId":"-"},"content":""},{"lineNumber":66,"author":{"gitId":"-"},"content":"If you have access to Docker, we have a Docker compose definition to run those services:"},{"lineNumber":67,"author":{"gitId":"-"},"content":""},{"lineNumber":68,"author":{"gitId":"-"},"content":"```sh"},{"lineNumber":69,"author":{"gitId":"-"},"content":"docker compose up -d"},{"lineNumber":70,"author":{"gitId":"-"},"content":"```"},{"lineNumber":71,"author":{"gitId":"-"},"content":"If the above command does not work, you may not have the updated v2 version of Docker. You may want to try this instead:"},{"lineNumber":72,"author":{"gitId":"-"},"content":""},{"lineNumber":73,"author":{"gitId":"-"},"content":"```sh"},{"lineNumber":74,"author":{"gitId":"-"},"content":"docker-compose up -d"},{"lineNumber":75,"author":{"gitId":"-"},"content":"```"},{"lineNumber":76,"author":{"gitId":"-"},"content":"For more information on Docker, you may wish to refer to the [Docker Documentation](https://docs.docker.com/compose/reference/)."},{"lineNumber":77,"author":{"gitId":"-"},"content":""},{"lineNumber":78,"author":{"gitId":"-"},"content":"### Starting the dev server"},{"lineNumber":79,"author":{"gitId":"-"},"content":""},{"lineNumber":80,"author":{"gitId":"-"},"content":"\u003cbox type\u003d\"wrong\"\u003e"},{"lineNumber":81,"author":{"gitId":"-"},"content":""},{"lineNumber":82,"author":{"gitId":"-"},"content":"Some IDEs may offer a shortcut to run the Application main class directly. Do not run the server this way."},{"lineNumber":83,"author":{"gitId":"-"},"content":"\u003c/box\u003e"},{"lineNumber":84,"author":{"gitId":"-"},"content":""},{"lineNumber":85,"author":{"gitId":"-"},"content":"To start the server in the background, run the following command"},{"lineNumber":86,"author":{"gitId":"-"},"content":"and wait until the task exits with a `BUILD SUCCESSFUL`:"},{"lineNumber":87,"author":{"gitId":"-"},"content":""},{"lineNumber":88,"author":{"gitId":"-"},"content":"```sh"},{"lineNumber":89,"author":{"gitId":"-"},"content":"./gradlew serverRun \u0026"},{"lineNumber":90,"author":{"gitId":"-"},"content":"```"},{"lineNumber":91,"author":{"gitId":"-"},"content":""},{"lineNumber":92,"author":{"gitId":"-"},"content":"To start the server in the foreground (e.g. if you want the console output to be visible),"},{"lineNumber":93,"author":{"gitId":"-"},"content":"run the following command instead:"},{"lineNumber":94,"author":{"gitId":"-"},"content":""},{"lineNumber":95,"author":{"gitId":"-"},"content":"```sh"},{"lineNumber":96,"author":{"gitId":"-"},"content":"./gradlew serverRun"},{"lineNumber":97,"author":{"gitId":"-"},"content":"```"},{"lineNumber":98,"author":{"gitId":"-"},"content":""},{"lineNumber":99,"author":{"gitId":"-"},"content":"The dev server URL will be `http://localhost:8080`."},{"lineNumber":100,"author":{"gitId":"-"},"content":""},{"lineNumber":101,"author":{"gitId":"-"},"content":"### Stopping the dev server"},{"lineNumber":102,"author":{"gitId":"-"},"content":""},{"lineNumber":103,"author":{"gitId":"-"},"content":"If you started the server in the background, use any method available in your OS to stop the process at port `8080`."},{"lineNumber":104,"author":{"gitId":"-"},"content":""},{"lineNumber":105,"author":{"gitId":"-"},"content":"If the server is running in the foreground, press `Ctrl + C` (or equivalent in your OS) to stop it."},{"lineNumber":106,"author":{"gitId":"-"},"content":""},{"lineNumber":107,"author":{"gitId":"-"},"content":"## Building front-end files"},{"lineNumber":108,"author":{"gitId":"-"},"content":""},{"lineNumber":109,"author":{"gitId":"-"},"content":"In order for the dev server to be able to serve both the front-end and the back-end of the application, the front-end files need to be *bundled and transpiled* (afterwards `built`)."},{"lineNumber":110,"author":{"gitId":"-"},"content":""},{"lineNumber":111,"author":{"gitId":"-"},"content":"Run the following commands to build the front-end files for the application\u0027s use in production mode:"},{"lineNumber":112,"author":{"gitId":"-"},"content":""},{"lineNumber":113,"author":{"gitId":"-"},"content":"```sh"},{"lineNumber":114,"author":{"gitId":"-"},"content":"# Generate type definition file from back-end"},{"lineNumber":115,"author":{"gitId":"-"},"content":"./gradlew generateTypes"},{"lineNumber":116,"author":{"gitId":"-"},"content":""},{"lineNumber":117,"author":{"gitId":"-"},"content":"# Bundle, transpile, and minify front-end files"},{"lineNumber":118,"author":{"gitId":"-"},"content":"npm run build"},{"lineNumber":119,"author":{"gitId":"-"},"content":"```"},{"lineNumber":120,"author":{"gitId":"-"},"content":""},{"lineNumber":121,"author":{"gitId":"-"},"content":"After this, the back-end dev server will also be able to serve the front-end."},{"lineNumber":122,"author":{"gitId":"-"},"content":""},{"lineNumber":123,"author":{"gitId":"-"},"content":"## Logging in to a TEAMMATES instance"},{"lineNumber":124,"author":{"gitId":"-"},"content":""},{"lineNumber":125,"author":{"gitId":"-"},"content":"This instruction set applies for both dev server and production server, with slight differences explained where applicable."},{"lineNumber":126,"author":{"gitId":"-"},"content":""},{"lineNumber":127,"author":{"gitId":"-"},"content":"- The local dev server is assumed to be accessible at `http://localhost:8080`."},{"lineNumber":128,"author":{"gitId":"-"},"content":"  - This instruction also works when the local front-end dev server and back-end dev server are separate. In that case, the dev server address will be the front-end\u0027s, e.g. `http://localhost:4200`. However, a back-end server needs to be running in order for the authentication logic to work."},{"lineNumber":129,"author":{"gitId":"-"},"content":"- If a URL is given as relative, prepend the server URL to access the page, e.g `/web/page/somePage` is accessible in dev server at `http://localhost:8080/web/page/somePage`."},{"lineNumber":130,"author":{"gitId":"-"},"content":""},{"lineNumber":131,"author":{"gitId":"-"},"content":"\u003cpanel header\u003d\"**As administrator**\"\u003e"},{"lineNumber":132,"author":{"gitId":"-"},"content":""},{"lineNumber":133,"author":{"gitId":"-"},"content":"1. Go to any administrator page, e.g `/web/admin/home`. You may be prompted to log in."},{"lineNumber":134,"author":{"gitId":"-"},"content":"  You will be granted access only if your account has admin permission as defined in `build.properties`."},{"lineNumber":135,"author":{"gitId":"-"},"content":""},{"lineNumber":136,"author":{"gitId":"jasonqiu212"},"content":"1. When logged in as administrator, ***masquerade mode*** can be used to impersonate instructors and students. "},{"lineNumber":137,"author":{"gitId":"jasonqiu212"},"content":"   For more information, refer to [Masquerading as another user](#masquerading-as-another-user)."},{"lineNumber":138,"author":{"gitId":"-"},"content":""},{"lineNumber":139,"author":{"gitId":"-"},"content":"\u003c/panel\u003e"},{"lineNumber":140,"author":{"gitId":"-"},"content":""},{"lineNumber":141,"author":{"gitId":"-"},"content":"\u003cpanel header\u003d\"**As instructor**\"\u003e"},{"lineNumber":142,"author":{"gitId":"-"},"content":""},{"lineNumber":143,"author":{"gitId":"-"},"content":"You need an instructor account which can be created by administrators."},{"lineNumber":144,"author":{"gitId":"-"},"content":""},{"lineNumber":145,"author":{"gitId":"-"},"content":"1. Log in to `/web/admin/home` as an administrator."},{"lineNumber":146,"author":{"gitId":"-"},"content":"1. Enter credentials for an instructor, e.g\u003cbr\u003e"},{"lineNumber":147,"author":{"gitId":"-"},"content":"   Name: `John Dorian`\u003cbr\u003e"},{"lineNumber":148,"author":{"gitId":"-"},"content":"   Email: `teammates.instructor@university.edu`\u003cbr\u003e"},{"lineNumber":149,"author":{"gitId":"-"},"content":"   Institution: `National University of Singapore`\u003cbr\u003e"},{"lineNumber":150,"author":{"gitId":"-"},"content":"1. The system will send an email containing the join link to the added instructor.\u003cbr\u003e"},{"lineNumber":151,"author":{"gitId":"-"},"content":"   On the dev server, this email will not be sent. Instead, you can use the join link given after adding an instructor to complete the joining process."},{"lineNumber":152,"author":{"gitId":"-"},"content":""},{"lineNumber":153,"author":{"gitId":"-"},"content":"Alternatively, an instructor can create other instructors for a course if s/he has sufficient privileges. A course co-owner, for example, will have such a privilege."},{"lineNumber":154,"author":{"gitId":"-"},"content":""},{"lineNumber":155,"author":{"gitId":"-"},"content":"1. Ensure that there is a course to add instructors to and an instructor in that course with the privilege to add instructors."},{"lineNumber":156,"author":{"gitId":"-"},"content":"1. Log in as that instructor."},{"lineNumber":157,"author":{"gitId":"-"},"content":"1. Add the instructors for the course (`Instructors` → `View/Edit`)."},{"lineNumber":158,"author":{"gitId":"-"},"content":"1. The system will send an email containing the join link to each added instructor. Again, this will not happen on the dev server, so additional steps are required."},{"lineNumber":159,"author":{"gitId":"-"},"content":"1. Log out and log in to `http://localhost:8080/web/admin/search` as administrator."},{"lineNumber":160,"author":{"gitId":"-"},"content":"1. Search for the instructor you added in. From the search results, click anywhere on the desired row to get the course join link for that instructor."},{"lineNumber":161,"author":{"gitId":"-"},"content":"1. Log out and use that join link to log in as the new instructor."},{"lineNumber":162,"author":{"gitId":"-"},"content":""},{"lineNumber":163,"author":{"gitId":"-"},"content":"\u003c/panel\u003e"},{"lineNumber":164,"author":{"gitId":"-"},"content":""},{"lineNumber":165,"author":{"gitId":"-"},"content":"\u003cpanel header\u003d\"**As student**\"\u003e"},{"lineNumber":166,"author":{"gitId":"-"},"content":""},{"lineNumber":167,"author":{"gitId":"-"},"content":"You need a student account which can be created by instructors (with sufficient privileges)."},{"lineNumber":168,"author":{"gitId":"-"},"content":""},{"lineNumber":169,"author":{"gitId":"-"},"content":"The steps for adding a student is almost identical to the steps for adding instructors by another instructor:"},{"lineNumber":170,"author":{"gitId":"-"},"content":""},{"lineNumber":171,"author":{"gitId":"-"},"content":"- Where appropriate, change the reference to \"instructor\" to \"student\"."},{"lineNumber":172,"author":{"gitId":"-"},"content":"- `Students` → `Enroll` to add students for the course."},{"lineNumber":173,"author":{"gitId":"-"},"content":""},{"lineNumber":174,"author":{"gitId":"-"},"content":"\u003c/panel\u003e"},{"lineNumber":175,"author":{"gitId":"-"},"content":"\u003c/br\u003e"},{"lineNumber":176,"author":{"gitId":"-"},"content":""},{"lineNumber":177,"author":{"gitId":"-"},"content":"### Logging in without UI"},{"lineNumber":178,"author":{"gitId":"-"},"content":""},{"lineNumber":179,"author":{"gitId":"-"},"content":"In dev server, it is also possible to \"log in\" without UI (e.g. when only testing API endpoints). In order to do that, you need to submit the following API call:"},{"lineNumber":180,"author":{"gitId":"-"},"content":""},{"lineNumber":181,"author":{"gitId":"-"},"content":"```sh"},{"lineNumber":182,"author":{"gitId":"-"},"content":"POST http://localhost:8080/devServerLogin?email\u003dtest@example.com"},{"lineNumber":183,"author":{"gitId":"-"},"content":"```"},{"lineNumber":184,"author":{"gitId":"-"},"content":""},{"lineNumber":185,"author":{"gitId":"-"},"content":"where `email\u003dtest@example.com` can be replaced as appropriate."},{"lineNumber":186,"author":{"gitId":"-"},"content":""},{"lineNumber":187,"author":{"gitId":"-"},"content":"The back-end server will return cookies which will subsequently be used to authenticate your requests."},{"lineNumber":188,"author":{"gitId":"-"},"content":""},{"lineNumber":189,"author":{"gitId":"-"},"content":"To \"log out\", submit the following API call:"},{"lineNumber":190,"author":{"gitId":"-"},"content":""},{"lineNumber":191,"author":{"gitId":"-"},"content":"```sh"},{"lineNumber":192,"author":{"gitId":"-"},"content":"GET http://localhost:8080/logout"},{"lineNumber":193,"author":{"gitId":"-"},"content":"```"},{"lineNumber":194,"author":{"gitId":"-"},"content":""},{"lineNumber":195,"author":{"gitId":"-"},"content":"### Masquerading as another user"},{"lineNumber":196,"author":{"gitId":"-"},"content":""},{"lineNumber":197,"author":{"gitId":"-"},"content":"Masquerade mode is a feature that enables the admin to log in as mock instructors/students for testing and situations where masquerading as another user is applicable."},{"lineNumber":198,"author":{"gitId":"-"},"content":""},{"lineNumber":199,"author":{"gitId":"-"},"content":"Essentially, when you are logged into the administrator account, you will be able to conveniently and directly access the other instructor/student accounts. When in masquerade mode, you should see a `(M)` at the top right of the page you are on."},{"lineNumber":200,"author":{"gitId":"-"},"content":""},{"lineNumber":201,"author":{"gitId":"-"},"content":"**Note**:"},{"lineNumber":202,"author":{"gitId":"-"},"content":"If you decide to use port `8080` for the following steps below, make sure you have run `npm run build` in your project root. For more information, refer to [Building front-end files](#building-front-end-files). Else, you may use port `4200` which is TEAMMATES\u0027 frontend URL."},{"lineNumber":203,"author":{"gitId":"-"},"content":""},{"lineNumber":204,"author":{"gitId":"-"},"content":"To prepare for _masquerade mode_, do the following:"},{"lineNumber":205,"author":{"gitId":"-"},"content":""},{"lineNumber":206,"author":{"gitId":"-"},"content":"- Log in as an administrator via http://localhost:4200/web/admin/home."},{"lineNumber":207,"author":{"gitId":"-"},"content":"  - For more information, refer to the [Logging in to a TEAMMATES instance](#logging-in-to-a-teammates-instance) section above in this document."},{"lineNumber":208,"author":{"gitId":"-"},"content":"- Create a new instructor by filling in the Name, Email, and Institution fields in the form provided. Once done, click on _Add Instructor_, followed by _Add_ under the **Action** column."},{"lineNumber":209,"author":{"gitId":"-"},"content":"  - Copy the link address from the **_join link_**."},{"lineNumber":210,"author":{"gitId":"-"},"content":"- Log out from the administrator account. Use the link you copied in the previous step and paste it into your browser\u0027s search bar. Enter the new account\u0027s email and register for the course."},{"lineNumber":211,"author":{"gitId":"-"},"content":"  - Now, the registration is !!completed!! and we have a new account that we can masquerade as."},{"lineNumber":212,"author":{"gitId":"-"},"content":"- Lastly, log out from the current account and log back in as an administrator and follow the rest of the steps below."},{"lineNumber":213,"author":{"gitId":"-"},"content":""},{"lineNumber":214,"author":{"gitId":"-"},"content":"To masquerade as an **_instructor_**:"},{"lineNumber":215,"author":{"gitId":"-"},"content":""},{"lineNumber":216,"author":{"gitId":"-"},"content":"- Use the instructor\u0027s path `/web/instructor/home` with the instructor\u0027s email appended as a query parameter, e.g., `http://localhost:4200/web/instructor/home?user\u003dkelvin@gmail.com`."},{"lineNumber":217,"author":{"gitId":"-"},"content":"- For convenience, http://localhost:4200/web/instructor/home?user\u003dINSTRUCTOR_EMAIL. Double click on `INSTRUCTOR_EMAIL` to replace it with the instructor\u0027s email."},{"lineNumber":218,"author":{"gitId":"-"},"content":""},{"lineNumber":219,"author":{"gitId":"-"},"content":"To masquerade as a **_student_**:"},{"lineNumber":220,"author":{"gitId":"-"},"content":""},{"lineNumber":221,"author":{"gitId":"-"},"content":"- Use the student\u0027s path `/web/student/home` with the student\u0027s email appended as a query parameter, e.g., `http://localhost:4200/web/student/home?user\u003djanethestudent@gmail.com`."},{"lineNumber":222,"author":{"gitId":"-"},"content":"- For convenience, http://localhost:4200/web/student/home?user\u003dSTUDENT_EMAIL. Double click on `STUDENT_EMAIL` to replace it with the student\u0027s email."},{"lineNumber":223,"author":{"gitId":"-"},"content":""},{"lineNumber":224,"author":{"gitId":"-"},"content":"## Running the Datastore emulator"},{"lineNumber":225,"author":{"gitId":"-"},"content":""},{"lineNumber":226,"author":{"gitId":"-"},"content":"The Datastore emulator is an essential tool that we use to locally simulate production Datastore environment during development and testing of relevant features. For more information about the Datastore emulator, refer to [Google\u0027s official documentation](https://cloud.google.com/datastore/docs/tools/datastore-emulator)."},{"lineNumber":227,"author":{"gitId":"-"},"content":""},{"lineNumber":228,"author":{"gitId":"-"},"content":"\u003cpanel header\u003d\"**Using quickstart script**\"\u003e"},{"lineNumber":229,"author":{"gitId":"-"},"content":""},{"lineNumber":230,"author":{"gitId":"-"},"content":"You can use the pre-provided quickstart script which will run a local Datastore emulator instance sufficient for development use cases. The script is run via the following command:"},{"lineNumber":231,"author":{"gitId":"-"},"content":""},{"lineNumber":232,"author":{"gitId":"-"},"content":"```sh"},{"lineNumber":233,"author":{"gitId":"-"},"content":"./gradlew runDatastoreEmulator"},{"lineNumber":234,"author":{"gitId":"-"},"content":"```"},{"lineNumber":235,"author":{"gitId":"-"},"content":""},{"lineNumber":236,"author":{"gitId":"-"},"content":"The Datastore emulator will be running in the port specified in the `build.properties` file."},{"lineNumber":237,"author":{"gitId":"-"},"content":""},{"lineNumber":238,"author":{"gitId":"-"},"content":"\u003c/panel\u003e"},{"lineNumber":239,"author":{"gitId":"-"},"content":""},{"lineNumber":240,"author":{"gitId":"-"},"content":"\u003cpanel header\u003d\"**Using Docker-based tooling**\"\u003e"},{"lineNumber":241,"author":{"gitId":"-"},"content":""},{"lineNumber":242,"author":{"gitId":"-"},"content":"We have a Docker compose definition to run dependent services, including local Datastore emulator. Run it under the `datastore` service name and bind to the container port `8484`:"},{"lineNumber":243,"author":{"gitId":"-"},"content":""},{"lineNumber":244,"author":{"gitId":"-"},"content":"```sh"},{"lineNumber":245,"author":{"gitId":"-"},"content":"docker compose run -p 8484:8484 datastore"},{"lineNumber":246,"author":{"gitId":"-"},"content":"```"},{"lineNumber":247,"author":{"gitId":"-"},"content":"If the above command does not work, you may want to try this instead:"},{"lineNumber":248,"author":{"gitId":"-"},"content":""},{"lineNumber":249,"author":{"gitId":"-"},"content":"```sh"},{"lineNumber":250,"author":{"gitId":"-"},"content":"docker-compose run -p 8484:8484 datastore"},{"lineNumber":251,"author":{"gitId":"-"},"content":"```"},{"lineNumber":252,"author":{"gitId":"-"},"content":""},{"lineNumber":253,"author":{"gitId":"-"},"content":"**Verification:** Should receive an \"Ok\" response in the browser at `http://localhost:8484`."},{"lineNumber":254,"author":{"gitId":"-"},"content":"\u003c/panel\u003e"},{"lineNumber":255,"author":{"gitId":"-"},"content":""},{"lineNumber":256,"author":{"gitId":"-"},"content":"\u003cpanel header\u003d\"**Using Cloud SDK**\"\u003e"},{"lineNumber":257,"author":{"gitId":"-"},"content":""},{"lineNumber":258,"author":{"gitId":"-"},"content":"Alternatively, you can use `gcloud` command to manage the local Datastore emulator instance directly. For this, you need a working [Google Cloud SDK](https://cloud.google.com/sdk/docs) in your development environment."},{"lineNumber":259,"author":{"gitId":"-"},"content":""},{"lineNumber":260,"author":{"gitId":"-"},"content":"1. Install the Datastore emulator component if you have not done so:"},{"lineNumber":261,"author":{"gitId":"-"},"content":""},{"lineNumber":262,"author":{"gitId":"-"},"content":"   ```sh"},{"lineNumber":263,"author":{"gitId":"-"},"content":"   gcloud components install cloud-datastore-emulator"},{"lineNumber":264,"author":{"gitId":"-"},"content":"   ```"},{"lineNumber":265,"author":{"gitId":"-"},"content":""},{"lineNumber":266,"author":{"gitId":"-"},"content":"1. To run the emulator in port `8484`:"},{"lineNumber":267,"author":{"gitId":"-"},"content":""},{"lineNumber":268,"author":{"gitId":"-"},"content":"   ```sh"},{"lineNumber":269,"author":{"gitId":"-"},"content":"   gcloud beta emulators datastore start --host-port\u003dlocalhost:8484"},{"lineNumber":270,"author":{"gitId":"-"},"content":"   ```"},{"lineNumber":271,"author":{"gitId":"-"},"content":""},{"lineNumber":272,"author":{"gitId":"-"},"content":"   Wait until you see the following message:"},{"lineNumber":273,"author":{"gitId":"-"},"content":""},{"lineNumber":274,"author":{"gitId":"-"},"content":"   ```"},{"lineNumber":275,"author":{"gitId":"-"},"content":"   [datastore] Dev App Server is now running."},{"lineNumber":276,"author":{"gitId":"-"},"content":"   ```"},{"lineNumber":277,"author":{"gitId":"-"},"content":""},{"lineNumber":278,"author":{"gitId":"-"},"content":"\u003c/panel\u003e"},{"lineNumber":279,"author":{"gitId":"-"},"content":"\u003cbr\u003e"},{"lineNumber":280,"author":{"gitId":"-"},"content":""},{"lineNumber":281,"author":{"gitId":"-"},"content":"### Stopping the emulator"},{"lineNumber":282,"author":{"gitId":"-"},"content":""},{"lineNumber":283,"author":{"gitId":"-"},"content":"To stop the Datastore emulator, use any method available in your OS to locate and stop the process at the port used for the emulator."},{"lineNumber":284,"author":{"gitId":"-"},"content":""},{"lineNumber":285,"author":{"gitId":"-"},"content":"If you are using the Cloud SDK method, you can use `Ctrl + C` in the console to stop the process. If the emulator fails to stop gracefully, use the previously described method."},{"lineNumber":286,"author":{"gitId":"-"},"content":""},{"lineNumber":287,"author":{"gitId":"-"},"content":"## Testing"},{"lineNumber":288,"author":{"gitId":"-"},"content":""},{"lineNumber":289,"author":{"gitId":"-"},"content":"There are two big categories of testing in TEAMMATES:"},{"lineNumber":290,"author":{"gitId":"-"},"content":""},{"lineNumber":291,"author":{"gitId":"-"},"content":"- **Component tests**: white-box unit and integration tests, i.e. they test the application components with full knowledge of the components\u0027 internal workings. This is configured in `src/test/resources/testng-component.xml` (back-end) and `src/web/jest.config.js` (front-end)."},{"lineNumber":292,"author":{"gitId":"-"},"content":"- **E2E (end-to-end) tests**: black-box tests, i.e. they test the application as a whole without knowing any internal working. This is configured in `src/e2e/resources/testng-e2e.xml`. To learn more about E2E tests, refer to this [document](e2e-testing.md).  "},{"lineNumber":293,"author":{"gitId":"-"},"content":""},{"lineNumber":294,"author":{"gitId":"-"},"content":"#### Running the tests"},{"lineNumber":295,"author":{"gitId":"-"},"content":""},{"lineNumber":296,"author":{"gitId":"cedricongjh"},"content":"##### Frontend tests"},{"lineNumber":297,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":298,"author":{"gitId":"-"},"content":"To run all front-end component tests in watch mode (i.e. any change to source code will automatically reload the tests), run the following command:"},{"lineNumber":299,"author":{"gitId":"-"},"content":""},{"lineNumber":300,"author":{"gitId":"-"},"content":"```sh"},{"lineNumber":301,"author":{"gitId":"-"},"content":"npm run test"},{"lineNumber":302,"author":{"gitId":"-"},"content":"```"},{"lineNumber":303,"author":{"gitId":"-"},"content":""},{"lineNumber":304,"author":{"gitId":"cedricongjh"},"content":"To update snapshots, run the following command:"},{"lineNumber":305,"author":{"gitId":"cedricongjh"},"content":"```sh"},{"lineNumber":306,"author":{"gitId":"cedricongjh"},"content":"npm run test"},{"lineNumber":307,"author":{"gitId":"cedricongjh"},"content":"```"},{"lineNumber":308,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":309,"author":{"gitId":"cedricongjh"},"content":"Followed by `a` to run all the test cases. Check through the snapshots to make sure that the changes are as expected, and press `u` to update them."},{"lineNumber":310,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":311,"author":{"gitId":"-"},"content":"To run all front-end component tests once and generate coverage data afterwards, run the following command:"},{"lineNumber":312,"author":{"gitId":"-"},"content":""},{"lineNumber":313,"author":{"gitId":"-"},"content":"```sh"},{"lineNumber":314,"author":{"gitId":"-"},"content":"npm run coverage"},{"lineNumber":315,"author":{"gitId":"-"},"content":"```"},{"lineNumber":316,"author":{"gitId":"-"},"content":""},{"lineNumber":317,"author":{"gitId":"-"},"content":"To run an individual test in a test file, change `it` in the `*.spec.ts` file to `fit`."},{"lineNumber":318,"author":{"gitId":"-"},"content":""},{"lineNumber":319,"author":{"gitId":"-"},"content":"To run all tests in a test file (or all test files matching a pattern), you can use Jest\u0027s watch mode and filter by filename pattern."},{"lineNumber":320,"author":{"gitId":"-"},"content":""},{"lineNumber":321,"author":{"gitId":"cedricongjh"},"content":"##### Backend tests"},{"lineNumber":322,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":323,"author":{"gitId":"-"},"content":"Back-end component tests follow this configuration:"},{"lineNumber":324,"author":{"gitId":"-"},"content":""},{"lineNumber":325,"author":{"gitId":"-"},"content":"Test suite | Command | Results can be viewed in"},{"lineNumber":326,"author":{"gitId":"-"},"content":"---|---|---"},{"lineNumber":327,"author":{"gitId":"-"},"content":"`Component tests` | `./gradlew componentTests` | `{project folder}/build/reports/tests/componentTests/index.html`"},{"lineNumber":328,"author":{"gitId":"-"},"content":"Any individual component test | `./gradlew componentTests --tests TestClassName` | `{project folder}/build/reports/tests/componentTests/index.html`"},{"lineNumber":329,"author":{"gitId":"-"},"content":""},{"lineNumber":330,"author":{"gitId":"-"},"content":"You can generate the coverage data with `jacocoReport` task after running tests, e.g.:"},{"lineNumber":331,"author":{"gitId":"-"},"content":""},{"lineNumber":332,"author":{"gitId":"-"},"content":"```sh"},{"lineNumber":333,"author":{"gitId":"-"},"content":"./gradlew componentTests jacocoReport"},{"lineNumber":334,"author":{"gitId":"-"},"content":"```"},{"lineNumber":335,"author":{"gitId":"-"},"content":""},{"lineNumber":336,"author":{"gitId":"-"},"content":"The report can be found in the `build/reports/jacoco/jacocoReport/` directory."},{"lineNumber":337,"author":{"gitId":"-"},"content":""},{"lineNumber":338,"author":{"gitId":"-"},"content":"## Deploying to a staging server"},{"lineNumber":339,"author":{"gitId":"-"},"content":""},{"lineNumber":340,"author":{"gitId":"-"},"content":"\u003e `Staging server` is the server instance you set up on Google App Engine for hosting the app for testing purposes."},{"lineNumber":341,"author":{"gitId":"-"},"content":""},{"lineNumber":342,"author":{"gitId":"-"},"content":"For most cases, you do not need a staging server as the dev server has covered almost all of the application\u0027s functionality."},{"lineNumber":343,"author":{"gitId":"-"},"content":"If you need to deploy your application to a staging server, refer to [this guide](https://github.com/TEAMMATES/teammates-ops/blob/master/platform-guide.md#deploying-to-a-staging-server)."},{"lineNumber":344,"author":{"gitId":"-"},"content":""},{"lineNumber":345,"author":{"gitId":"-"},"content":"## Running client scripts"},{"lineNumber":346,"author":{"gitId":"-"},"content":""},{"lineNumber":347,"author":{"gitId":"-"},"content":"\u003e Client scripts are scripts that remotely manipulate data on a Google Cloud Datastore instance. They are run as standard Java applications."},{"lineNumber":348,"author":{"gitId":"-"},"content":""},{"lineNumber":349,"author":{"gitId":"-"},"content":"Most of developers may not need to write and/or run client scripts but if you are to do so, take note of the following:"},{"lineNumber":350,"author":{"gitId":"-"},"content":""},{"lineNumber":351,"author":{"gitId":"-"},"content":"* If you are to run a script in a production environment, there are additional steps to follow. Refer to [this guide](https://github.com/TEAMMATES/teammates-ops/blob/master/platform-guide.md#running-client-scripts)."},{"lineNumber":352,"author":{"gitId":"-"},"content":"* It is not encouraged to compile and run any script via command line; use any of the supported IDEs to significantly ease this task."},{"lineNumber":353,"author":{"gitId":"-"},"content":""},{"lineNumber":354,"author":{"gitId":"-"},"content":"## Config points"},{"lineNumber":355,"author":{"gitId":"-"},"content":""},{"lineNumber":356,"author":{"gitId":"-"},"content":"There are several files used to configure various aspects of the system."},{"lineNumber":357,"author":{"gitId":"-"},"content":""},{"lineNumber":358,"author":{"gitId":"-"},"content":"**Main**: These vary from developer to developer and are subjected to frequent changes."},{"lineNumber":359,"author":{"gitId":"-"},"content":""},{"lineNumber":360,"author":{"gitId":"-"},"content":"* `build.properties`: Contains the general purpose configuration values to be used by the web API."},{"lineNumber":361,"author":{"gitId":"-"},"content":"* `config.ts`: Contains the general purpose configuration values to be used by the web application."},{"lineNumber":362,"author":{"gitId":"-"},"content":"* `test.properties`: Contains the configuration values for the test driver."},{"lineNumber":363,"author":{"gitId":"-"},"content":"  * There are two separate `test.properties`; one for component tests and one for E2E tests."},{"lineNumber":364,"author":{"gitId":"-"},"content":"* `client.properties`: Contains some configuration values used in client scripts."},{"lineNumber":365,"author":{"gitId":"-"},"content":"* `app.yaml`: Contains the configuration for deploying the application on GAE."},{"lineNumber":366,"author":{"gitId":"-"},"content":""},{"lineNumber":367,"author":{"gitId":"-"},"content":"**Tasks**: These do not concern the application directly, but rather the development process."},{"lineNumber":368,"author":{"gitId":"-"},"content":""},{"lineNumber":369,"author":{"gitId":"-"},"content":"* `build.gradle`: Contains the back-end third-party dependencies specification, as well as configurations for automated tasks/routines to be run via Gradle."},{"lineNumber":370,"author":{"gitId":"-"},"content":"* `gradle.properties`, `gradle-wrapper.properties`: Contains the Gradle and Gradle wrapper configuration."},{"lineNumber":371,"author":{"gitId":"-"},"content":"* `package.json`: Contains the front-end third-party dependencies specification, as well as configurations for automated tasks/routines to be run via NPM."},{"lineNumber":372,"author":{"gitId":"-"},"content":"* `angular.json`: Contains the Angular application configuration."},{"lineNumber":373,"author":{"gitId":"-"},"content":""},{"lineNumber":374,"author":{"gitId":"-"},"content":"**GitHub Actions**: These are workflow files for GitHub Actions. They are placed under `.github/workflows` directory."},{"lineNumber":375,"author":{"gitId":"-"},"content":""},{"lineNumber":376,"author":{"gitId":"-"},"content":"* `component.yml`: Configuration for component tests."},{"lineNumber":377,"author":{"gitId":"-"},"content":"* `e2e.yml`: Configuration for E2E tests."},{"lineNumber":378,"author":{"gitId":"-"},"content":"* `e2e-cross.yml`: Configuration for cross-browser E2E tests."},{"lineNumber":379,"author":{"gitId":"-"},"content":"* `lnp.yml`: Configuration for load \u0026 performance tests."},{"lineNumber":380,"author":{"gitId":"-"},"content":"* `dev-docs.yml`: Configuration for developer documentation site."},{"lineNumber":381,"author":{"gitId":"-"},"content":""},{"lineNumber":382,"author":{"gitId":"-"},"content":"**Static Analysis**: These are used to maintain code quality and measure code coverage. See [Static Analysis](static-analysis.md)."},{"lineNumber":383,"author":{"gitId":"-"},"content":"* `static-analysis/*`: Contains most of the configuration files for all the different static analysis tools."},{"lineNumber":384,"author":{"gitId":"-"},"content":""},{"lineNumber":385,"author":{"gitId":"-"},"content":"**Other**: These are rarely, if ever will be, subjected to changes."},{"lineNumber":386,"author":{"gitId":"-"},"content":"* `logging.properties`: Contains the java.util.logging configuration."},{"lineNumber":387,"author":{"gitId":"-"},"content":"* `web.xml`: Contains the web server configuration, e.g servlets to run, mapping from URLs to servlets, security constraints, etc."},{"lineNumber":388,"author":{"gitId":"-"},"content":"* `cron.yaml`: Contains the cron jobs specification."},{"lineNumber":389,"author":{"gitId":"-"},"content":"* `queue.yaml`: Contains the task queues configuration."},{"lineNumber":390,"author":{"gitId":"-"},"content":"* `index.yaml`: Contains the Google Cloud Datastore indexes configuration."}],"authorContributionMap":{"jasonqiu212":2,"cedricongjh":11,"-":377}},{"path":"docs/process.md","fileType":"md","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003cfrontmatter\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  title: \"Process\""},{"lineNumber":3,"author":{"gitId":"-"},"content":"\u003c/frontmatter\u003e"},{"lineNumber":4,"author":{"gitId":"-"},"content":""},{"lineNumber":5,"author":{"gitId":"-"},"content":"# Development Workflow"},{"lineNumber":6,"author":{"gitId":"-"},"content":""},{"lineNumber":7,"author":{"gitId":"-"},"content":"This is the project-wide development workflow for TEAMMATES."},{"lineNumber":8,"author":{"gitId":"-"},"content":""},{"lineNumber":9,"author":{"gitId":"-"},"content":"## Overview"},{"lineNumber":10,"author":{"gitId":"-"},"content":""},{"lineNumber":11,"author":{"gitId":"-"},"content":"\u003cpuml src\u003d\"diagrams/workflow.puml\"\u003e\u003c/puml\u003e"},{"lineNumber":12,"author":{"gitId":"-"},"content":""},{"lineNumber":13,"author":{"gitId":"-"},"content":"* This workflow is an adaptation of the [GitHub flow](https://guides.github.com/introduction/flow/)."},{"lineNumber":14,"author":{"gitId":"-"},"content":"* If you need any help regarding the workflow, please [post a new issue in our issue tracker](https://github.com/TEAMMATES/teammates/issues/new)."},{"lineNumber":15,"author":{"gitId":"-"},"content":"* It is assumed that the development environment has been correctly set up. If this step has not been completed, refer to [this document](setting-up.md).\u003cbr\u003e"},{"lineNumber":16,"author":{"gitId":"-"},"content":"  You are also encouraged to be reasonably familiar with how to [work with your own local copy of TEAMMATES](development.md)."},{"lineNumber":17,"author":{"gitId":"-"},"content":""},{"lineNumber":18,"author":{"gitId":"-"},"content":"The following are the roles involved:"},{"lineNumber":19,"author":{"gitId":"-"},"content":""},{"lineNumber":20,"author":{"gitId":"-"},"content":"* **Dev**: fixing issues"},{"lineNumber":21,"author":{"gitId":"-"},"content":"* **Reviewer**: reviewing pull requests (PRs); usually a core team member"},{"lineNumber":22,"author":{"gitId":"-"},"content":""},{"lineNumber":23,"author":{"gitId":"-"},"content":"\u003e *Roles* are related to the development process and they are different from *Positions*, which relate to the organization structure of the TEAMMATES developer community."},{"lineNumber":24,"author":{"gitId":"-"},"content":""},{"lineNumber":25,"author":{"gitId":"-"},"content":"## Fixing issues"},{"lineNumber":26,"author":{"gitId":"-"},"content":""},{"lineNumber":27,"author":{"gitId":"-"},"content":"\u003cbox type\u003d\"info\" light\u003e"},{"lineNumber":28,"author":{"gitId":"-"},"content":"  \u003cthumbnail circle slot\u003d\"icon\" text\u003d\":fas-laptop:\" background\u003d\"#dff5ff\" size\u003d\"32\"/\u003e"},{"lineNumber":29,"author":{"gitId":"-"},"content":""},{"lineNumber":30,"author":{"gitId":"-"},"content":"**Role: Dev**"},{"lineNumber":31,"author":{"gitId":"-"},"content":"\u003c/box\u003e"},{"lineNumber":32,"author":{"gitId":"-"},"content":""},{"lineNumber":33,"author":{"gitId":"-"},"content":"This instruction set will use the issue `Remove unnecessary System.out.printlns from Java files #3942` as an example."},{"lineNumber":34,"author":{"gitId":"-"},"content":""},{"lineNumber":35,"author":{"gitId":"-"},"content":"### Step 1: Pick an issue to fix"},{"lineNumber":36,"author":{"gitId":"-"},"content":""},{"lineNumber":37,"author":{"gitId":"-"},"content":"Our issue tracker contains bug reports, feature requests, as well as suggestions for enhancements."},{"lineNumber":38,"author":{"gitId":"-"},"content":"You are free to work on any of the issues listed there."},{"lineNumber":39,"author":{"gitId":"-"},"content":""},{"lineNumber":40,"author":{"gitId":"-"},"content":"* If you are a contributor, there is no need to get the issue assigned to you."},{"lineNumber":41,"author":{"gitId":"-"},"content":"* If you are a core team member, assign the issue to yourself and assign it a milestone."},{"lineNumber":42,"author":{"gitId":"-"},"content":"  You are expected to open a PR for this issue within a week; inactivity for a longer time may result in the issue being un-assigned so that someone else can work on it."},{"lineNumber":43,"author":{"gitId":"-"},"content":"* While not required, the following gestures are appreciated:"},{"lineNumber":44,"author":{"gitId":"-"},"content":"  * Indicating your interest in working on any particular issue by commenting on the issue thread itself."},{"lineNumber":45,"author":{"gitId":"-"},"content":"  * Refraining from working on issues that are assigned to someone else or have open PRs."},{"lineNumber":46,"author":{"gitId":"-"},"content":"* (Optional) You can discuss, via the issue tracker, the alternative solutions before choosing one to implement."},{"lineNumber":47,"author":{"gitId":"-"},"content":"  Such a discussion reduces the chance of a rejected fix or a misunderstood issue."},{"lineNumber":48,"author":{"gitId":"-"},"content":""},{"lineNumber":49,"author":{"gitId":"-"},"content":"The [issue labels](issues.md#issue-labels) may help you in choosing which issue to fix."},{"lineNumber":50,"author":{"gitId":"-"},"content":""},{"lineNumber":51,"author":{"gitId":"-"},"content":"### Step 2: Start clean from a new branch"},{"lineNumber":52,"author":{"gitId":"-"},"content":""},{"lineNumber":53,"author":{"gitId":"-"},"content":"In most cases, you will start the PR from the `master` branch. There are scenarios where you are required to start from another branch instead:"},{"lineNumber":54,"author":{"gitId":"-"},"content":""},{"lineNumber":55,"author":{"gitId":"-"},"content":"* You are creating a hot patch: start from the `release` branch."},{"lineNumber":56,"author":{"gitId":"-"},"content":"* You are working on a *long-lived feature branch* (a branch which contains multiple commits from possibly multiple authors, used for major feature development/refactoring): start from that branch."},{"lineNumber":57,"author":{"gitId":"-"},"content":""},{"lineNumber":58,"author":{"gitId":"-"},"content":"For brevity, this instruction set will use `master` branch as the base branch. Any reference to the `master` branch should be replaced with the base branch that applies to your case."},{"lineNumber":59,"author":{"gitId":"-"},"content":""},{"lineNumber":60,"author":{"gitId":"-"},"content":"1. Start off from your `master` branch and make sure it is up-to-date with the latest version of the main repo\u0027s `master` branch."},{"lineNumber":61,"author":{"gitId":"-"},"content":"   ```sh"},{"lineNumber":62,"author":{"gitId":"-"},"content":"   git checkout master"},{"lineNumber":63,"author":{"gitId":"-"},"content":"   git pull"},{"lineNumber":64,"author":{"gitId":"-"},"content":"   ```"},{"lineNumber":65,"author":{"gitId":"-"},"content":""},{"lineNumber":66,"author":{"gitId":"-"},"content":"1. Create a new branch to push your commits into. If you have commit access and need to push into the main repo for some reason, name it `{IssueNumber}-{some-keywords}`,"},{"lineNumber":67,"author":{"gitId":"-"},"content":"   where `some-keywords` are representative keywords taken from the issue title."},{"lineNumber":68,"author":{"gitId":"-"},"content":"   ```sh"},{"lineNumber":69,"author":{"gitId":"-"},"content":"   git checkout -b 3942-remove-unnecessary-println"},{"lineNumber":70,"author":{"gitId":"-"},"content":"   ```"},{"lineNumber":71,"author":{"gitId":"-"},"content":""},{"lineNumber":72,"author":{"gitId":"-"},"content":"Notes:"},{"lineNumber":73,"author":{"gitId":"-"},"content":""},{"lineNumber":74,"author":{"gitId":"-"},"content":"1. **Do not** combine fixes for multiple issues in one branch, unless they are tightly related."},{"lineNumber":75,"author":{"gitId":"-"},"content":"1. Your `master` branch must never be ahead of the main repo\u0027s `master` branch at all times."},{"lineNumber":76,"author":{"gitId":"-"},"content":""},{"lineNumber":77,"author":{"gitId":"-"},"content":"### Step 3: Fix the issue"},{"lineNumber":78,"author":{"gitId":"-"},"content":""},{"lineNumber":79,"author":{"gitId":"-"},"content":"\u003e If this is your first issue, you may want to look at our coding and testing best practices as well as coding conventions (links given [here](index.md))."},{"lineNumber":80,"author":{"gitId":"-"},"content":""},{"lineNumber":81,"author":{"gitId":"-"},"content":"Make the changes to the code, tests, and documentations as needed by the issue."},{"lineNumber":82,"author":{"gitId":"-"},"content":""},{"lineNumber":83,"author":{"gitId":"-"},"content":"1. Commit the changes to your branch."},{"lineNumber":84,"author":{"gitId":"-"},"content":"   ```sh"},{"lineNumber":85,"author":{"gitId":"-"},"content":"   git add -A"},{"lineNumber":86,"author":{"gitId":"-"},"content":"   git commit"},{"lineNumber":87,"author":{"gitId":"-"},"content":"   ```"},{"lineNumber":88,"author":{"gitId":"-"},"content":"   * You may commit as many times as you wish while you are making the changes."},{"lineNumber":89,"author":{"gitId":"-"},"content":"     It is, however, a good idea to commit at meaningful points to keep your branch reasonably clean."},{"lineNumber":90,"author":{"gitId":"-"},"content":"   * Use meaningful commit messages (e.g. `Add tests for the truncate method`)."},{"lineNumber":91,"author":{"gitId":"-"},"content":"     [Here](http://chris.beams.io/posts/git-commit/) is a good reference."},{"lineNumber":92,"author":{"gitId":"-"},"content":"   * If you introduce changes that are incompatible with the prevailing data storage schema (afterwards \"breaking changes\"), a *data migration* is necessary to be done by the core team. If a data migration is necessary to take the issue forward:"},{"lineNumber":93,"author":{"gitId":"-"},"content":"     * Make sure that the core team (or at least your reviewer) is aware of this."},{"lineNumber":94,"author":{"gitId":"-"},"content":"     * Follow [data migration best practices](/best-practices/data-migration.md)."},{"lineNumber":95,"author":{"gitId":"-"},"content":"     * Your changes should initially work for both the old and new versions of the data schema. It is fine if an unclean hack is necessary for the new code to work under the *old* data schema."},{"lineNumber":96,"author":{"gitId":"-"},"content":"     * Mark clearly in the code which parts are tailored specifically for the old data schema, *especially if an unclean hack is used*."},{"lineNumber":97,"author":{"gitId":"-"},"content":"     * Concurrently or immediately after the breaking changes are merged, you need to create a [client script](development.md#running-client-scripts) to migrate all data following the old schema to the new schema."},{"lineNumber":98,"author":{"gitId":"-"},"content":""},{"lineNumber":99,"author":{"gitId":"-"},"content":"1. Sync with the main repo frequently. While you were fixing the issue, others might have pushed new code to the main repo."},{"lineNumber":100,"author":{"gitId":"-"},"content":"   * Update your repo\u0027s `master` branch with any new changes from main repo, then switch back to your work branch."},{"lineNumber":101,"author":{"gitId":"-"},"content":""},{"lineNumber":102,"author":{"gitId":"-"},"content":"     ```sh"},{"lineNumber":103,"author":{"gitId":"-"},"content":"     git checkout master"},{"lineNumber":104,"author":{"gitId":"-"},"content":"     git pull"},{"lineNumber":105,"author":{"gitId":"-"},"content":"     git checkout 3942-remove-unnecessary-println"},{"lineNumber":106,"author":{"gitId":"-"},"content":"     ```"},{"lineNumber":107,"author":{"gitId":"-"},"content":"   * Option 1: merge those updates to the branch you are working on."},{"lineNumber":108,"author":{"gitId":"-"},"content":""},{"lineNumber":109,"author":{"gitId":"-"},"content":"     ```sh"},{"lineNumber":110,"author":{"gitId":"-"},"content":"     git merge master"},{"lineNumber":111,"author":{"gitId":"-"},"content":"     ```"},{"lineNumber":112,"author":{"gitId":"-"},"content":"   * Option 2: if you are confident with rebasing, rebase your changes over the latest `master` branch."},{"lineNumber":113,"author":{"gitId":"-"},"content":""},{"lineNumber":114,"author":{"gitId":"-"},"content":"     ```sh"},{"lineNumber":115,"author":{"gitId":"-"},"content":"     git rebase master"},{"lineNumber":116,"author":{"gitId":"-"},"content":"     ```"},{"lineNumber":117,"author":{"gitId":"-"},"content":"   * If there are updates to the dependencies on the build configuration, you should update your local copies accordingly."},{"lineNumber":118,"author":{"gitId":"-"},"content":""},{"lineNumber":119,"author":{"gitId":"-"},"content":"1. \u003ca name\u003d\"things-to-check\"\u003e\u003c/a\u003eBefore submitting your work for review, here are some things to check (non-exhaustive):"},{"lineNumber":120,"author":{"gitId":"-"},"content":"   * The code is **properly formatted for readability**."},{"lineNumber":121,"author":{"gitId":"-"},"content":"   * The code base passes **static analysis** (i.e. code quality check):"},{"lineNumber":122,"author":{"gitId":"-"},"content":""},{"lineNumber":123,"author":{"gitId":"-"},"content":"     ```sh"},{"lineNumber":124,"author":{"gitId":"-"},"content":"     ./gradlew lint"},{"lineNumber":125,"author":{"gitId":"-"},"content":"     npm run lint"},{"lineNumber":126,"author":{"gitId":"-"},"content":"     ```"},{"lineNumber":127,"author":{"gitId":"-"},"content":""},{"lineNumber":128,"author":{"gitId":"-"},"content":"   * **All affected tests are passing** on your dev server.\u003cbr\u003e"},{"lineNumber":129,"author":{"gitId":"-"},"content":"     You are more than welcome to also ensure that all tests are passing on your dev server."},{"lineNumber":130,"author":{"gitId":"-"},"content":"   * **Staging-tested (if need be)**: If your new code might behave differently on a remote server than how it behaves on the dev server, ensure that the affected tests are passing against the updated app running on your own GAE staging server."},{"lineNumber":131,"author":{"gitId":"-"},"content":"   * **No unrelated changes** are introduced in the branch. This includes unnecessary formatting changes."},{"lineNumber":132,"author":{"gitId":"-"},"content":"   * All changes or additions to functional code are **accompanied by changes or additions in tests**, even if they are absent before."},{"lineNumber":133,"author":{"gitId":"-"},"content":"   * All new public APIs (methods, classes) are **documented with header comments**."},{"lineNumber":134,"author":{"gitId":"-"},"content":"   * **Documentations are updated** when necessary, particularly when there are changes or additions to software design as well as user-facing features."},{"lineNumber":135,"author":{"gitId":"-"},"content":""},{"lineNumber":136,"author":{"gitId":"-"},"content":"1. Push your branch to your fork, or to the main repo only if necessary."},{"lineNumber":137,"author":{"gitId":"-"},"content":"   ```sh"},{"lineNumber":138,"author":{"gitId":"-"},"content":"   git push {remote-name} 3942-remove-unnecessary-println"},{"lineNumber":139,"author":{"gitId":"-"},"content":"   ```"},{"lineNumber":140,"author":{"gitId":"-"},"content":"   If the above command does not work e.g. because of rebasing, do a forced-push:"},{"lineNumber":141,"author":{"gitId":"-"},"content":"   ```sh"},{"lineNumber":142,"author":{"gitId":"-"},"content":"   git push -f {remote-name} 3942-remove-unnecessary-println"},{"lineNumber":143,"author":{"gitId":"-"},"content":"   ```"},{"lineNumber":144,"author":{"gitId":"-"},"content":""},{"lineNumber":145,"author":{"gitId":"-"},"content":"   \u003e Anyone working on an issue, including core team members, should use branches in his/her own fork instead unless the branch needs to be in the main repo."},{"lineNumber":146,"author":{"gitId":"-"},"content":"   \u003e Such cases include:"},{"lineNumber":147,"author":{"gitId":"-"},"content":"   \u003e"},{"lineNumber":148,"author":{"gitId":"-"},"content":"   \u003e * The branch is being worked on by multiple people."},{"lineNumber":149,"author":{"gitId":"-"},"content":"   \u003e * The branch contains changes that need to be trialled by other core team member."},{"lineNumber":150,"author":{"gitId":"-"},"content":""},{"lineNumber":151,"author":{"gitId":"-"},"content":"### Step 4: Submit a PR"},{"lineNumber":152,"author":{"gitId":"-"},"content":""},{"lineNumber":153,"author":{"gitId":"-"},"content":"[Create a PR](https://help.github.com/articles/creating-a-pull-request/) with the following configuration:"},{"lineNumber":154,"author":{"gitId":"-"},"content":""},{"lineNumber":155,"author":{"gitId":"-"},"content":"* The base branch is the main repo\u0027s `master` branch."},{"lineNumber":156,"author":{"gitId":"-"},"content":"* PR name: copy-and-paste the relevant issue name and include the issue number in front in square brackets,"},{"lineNumber":157,"author":{"gitId":"-"},"content":"  e.g. `[#3942] Remove unnecessary System.out.printlns from Java files`."},{"lineNumber":158,"author":{"gitId":"-"},"content":"* PR description: mention the issue number in this format: `Fixes #3942`."},{"lineNumber":159,"author":{"gitId":"-"},"content":"  Doing so will [automatically close the related issue once the PR is merged](https://github.com/blog/1506-closing-issues-via-pull-requests)."},{"lineNumber":160,"author":{"gitId":"-"},"content":"* Ensure that \"Allow edits from maintainers\" is ticked."},{"lineNumber":161,"author":{"gitId":"-"},"content":"* You are encouraged to describe the changes you have made in your branch and how they resolve the issue."},{"lineNumber":162,"author":{"gitId":"-"},"content":""},{"lineNumber":163,"author":{"gitId":"-"},"content":"It is not required that you submit a PR only when your work is ready for review;"},{"lineNumber":164,"author":{"gitId":"-"},"content":"make it clear in the PR (e.g. in the description, in a comment, or as an `s.*` label) whether it is still a work-in-progress or is ready for review."},{"lineNumber":165,"author":{"gitId":"-"},"content":""},{"lineNumber":166,"author":{"gitId":"-"},"content":"**Note**: if the PR does not fix an issue completely, observe the following:"},{"lineNumber":167,"author":{"gitId":"-"},"content":""},{"lineNumber":168,"author":{"gitId":"-"},"content":"* Use an appropriate PR name (at your discretion) instead of copying-and-pasting the relevant issue name."},{"lineNumber":169,"author":{"gitId":"-"},"content":"* Use `Part of #3942` as the PR description. Do NOT use any of the special keywords."},{"lineNumber":170,"author":{"gitId":"-"},"content":""},{"lineNumber":171,"author":{"gitId":"-"},"content":"### Step 5: Following up"},{"lineNumber":172,"author":{"gitId":"-"},"content":""},{"lineNumber":173,"author":{"gitId":"-"},"content":"Once a PR is opened, try and complete it within 2 weeks, or at least stay actively working on it."},{"lineNumber":174,"author":{"gitId":"-"},"content":"Inactivity for a long period may necessitate a closure of the PR."},{"lineNumber":175,"author":{"gitId":"-"},"content":""},{"lineNumber":176,"author":{"gitId":"-"},"content":"Labels `s.*` (status labels) are used to indicate status of PRs."},{"lineNumber":177,"author":{"gitId":"-"},"content":"Their full descriptions can be viewed under the [labels page](https://github.com/TEAMMATES/teammates/labels)."},{"lineNumber":178,"author":{"gitId":"-"},"content":""},{"lineNumber":179,"author":{"gitId":"-"},"content":"#### Code review"},{"lineNumber":180,"author":{"gitId":"-"},"content":""},{"lineNumber":181,"author":{"gitId":"-"},"content":"Your code will be reviewed, in this sequence, by:"},{"lineNumber":182,"author":{"gitId":"-"},"content":"* GitHub Actions: by running static analysis.\u003cbr\u003e"},{"lineNumber":183,"author":{"gitId":"-"},"content":"  Most of the tools will display the cause of the failures in the console;"},{"lineNumber":184,"author":{"gitId":"-"},"content":"  if this is not the case, you can run any of the static analysis tools and obtain the reports locally.\u003cbr\u003e"},{"lineNumber":185,"author":{"gitId":"cedricongjh"},"content":"  You can check how to run the static analysis locally [here](static-analysis.md#running-static-analysis)\u003cbr\u003e"},{"lineNumber":186,"author":{"gitId":"-"},"content":"  Ensure that the static analysis passes before triggering another build."},{"lineNumber":187,"author":{"gitId":"-"},"content":"* GitHub Actions: by building and running tests.\u003cbr\u003e"},{"lineNumber":188,"author":{"gitId":"-"},"content":"  If there are failed tests, the build will be marked as a failure."},{"lineNumber":189,"author":{"gitId":"-"},"content":"  You can consult the CI log to find which tests.\u003cbr\u003e"},{"lineNumber":190,"author":{"gitId":"cedricongjh"},"content":"  Ensure that all tests pass before triggering another build.\u003cbr\u003e"},{"lineNumber":191,"author":{"gitId":"cedricongjh"},"content":"  A short summary on how to run the tests locally can be found [here](development.md#running-the-tests)"},{"lineNumber":192,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":193,"author":{"gitId":"-"},"content":"* Reviewer: a core team member will be assigned to the PR as its reviewer, who will approve your PR or suggest changes."},{"lineNumber":194,"author":{"gitId":"-"},"content":"  * Depending on the complexity of the issue, there may be multiple reviewers assigned to the PR."},{"lineNumber":195,"author":{"gitId":"-"},"content":"  * Sometimes, the additional reviewer(s) will focus on code style and maintainability."},{"lineNumber":196,"author":{"gitId":"-"},"content":""},{"lineNumber":197,"author":{"gitId":"-"},"content":"Feel free to add a comment if:"},{"lineNumber":198,"author":{"gitId":"-"},"content":"* a reviewer is not assigned within 24 hours."},{"lineNumber":199,"author":{"gitId":"-"},"content":"* the PR does not get any review within 48 hours of review request."},{"lineNumber":200,"author":{"gitId":"-"},"content":"* you want to clarify or discuss about the suggestions given by your reviewer."},{"lineNumber":201,"author":{"gitId":"-"},"content":""},{"lineNumber":202,"author":{"gitId":"-"},"content":"#### Updating the PR"},{"lineNumber":203,"author":{"gitId":"-"},"content":""},{"lineNumber":204,"author":{"gitId":"-"},"content":"If you are tasked to update your PR either by GitHub Actions or by your reviewer, **do not** close the PR and open a new one."},{"lineNumber":205,"author":{"gitId":"-"},"content":"You should make and push the updates to the same branch used in the PR, essentially repeating [step 3](#step-3-fix-the-issue)."},{"lineNumber":206,"author":{"gitId":"-"},"content":""},{"lineNumber":207,"author":{"gitId":"-"},"content":"Remember to add a comment to indicate the PR is ready for review again, e.g. `Ready for review` or `Changes made`."},{"lineNumber":208,"author":{"gitId":"-"},"content":"If you have permission to change labels, you may additionally change the `s.*` PR label as appropriate."},{"lineNumber":209,"author":{"gitId":"-"},"content":""},{"lineNumber":210,"author":{"gitId":"-"},"content":"The cycle of \"code review\" - \"updating the PR\" will be repeated until your PR is approved by all the parties involved (`s.ToMerge`)."},{"lineNumber":211,"author":{"gitId":"-"},"content":""},{"lineNumber":212,"author":{"gitId":"-"},"content":"### Step 6: Prepare for merging"},{"lineNumber":213,"author":{"gitId":"-"},"content":""},{"lineNumber":214,"author":{"gitId":"-"},"content":"The core team member responsible for merging your PR might contact you for reasons such as resolving merge conflicts."},{"lineNumber":215,"author":{"gitId":"-"},"content":"Depending on the situation, this may necessitate more changes to be made in your PR (e.g. if your PR is functionally conflicting with a recent change), however this rarely happens."},{"lineNumber":216,"author":{"gitId":"-"},"content":""},{"lineNumber":217,"author":{"gitId":"-"},"content":"Your work on the issue is done when your PR is successfully merged to the main repo\u0027s `master` branch."},{"lineNumber":218,"author":{"gitId":"-"},"content":""},{"lineNumber":219,"author":{"gitId":"-"},"content":"## Reviewing a PR"},{"lineNumber":220,"author":{"gitId":"-"},"content":""},{"lineNumber":221,"author":{"gitId":"-"},"content":"\u003cbox type\u003d\"info\" light\u003e"},{"lineNumber":222,"author":{"gitId":"-"},"content":"  \u003cthumbnail circle slot\u003d\"icon\" text\u003d\":fas-comments:\" background\u003d\"#fac090\" size\u003d\"32\"/\u003e"},{"lineNumber":223,"author":{"gitId":"-"},"content":""},{"lineNumber":224,"author":{"gitId":"-"},"content":"**Role: Reviewer**"},{"lineNumber":225,"author":{"gitId":"-"},"content":"\u003c/box\u003e"},{"lineNumber":226,"author":{"gitId":"-"},"content":""},{"lineNumber":227,"author":{"gitId":"-"},"content":"\u003e - The reviewer of a PR is the assignee of it."},{"lineNumber":228,"author":{"gitId":"-"},"content":""},{"lineNumber":229,"author":{"gitId":"-"},"content":"\u003cbox type\u003d\"tip\"\u003e"},{"lineNumber":230,"author":{"gitId":"-"},"content":""},{"lineNumber":231,"author":{"gitId":"-"},"content":"To remove whitespace-only changes from being shown, append `?w\u003d1` to url of the `/files` page of the PR (the \"Files changed\" tab)."},{"lineNumber":232,"author":{"gitId":"-"},"content":"\u003c/box\u003e"},{"lineNumber":233,"author":{"gitId":"-"},"content":""},{"lineNumber":234,"author":{"gitId":"-"},"content":"[GitHub\u0027s review feature](https://github.com/blog/2256-a-whole-new-github-universe-announcing-new-tools-forums-and-features#code-better-with-reviews) is to be used in this task."},{"lineNumber":235,"author":{"gitId":"-"},"content":""},{"lineNumber":236,"author":{"gitId":"-"},"content":"* Ensure that the GitHub Actions CI build is successful."},{"lineNumber":237,"author":{"gitId":"-"},"content":"* Ensure the following:"},{"lineNumber":238,"author":{"gitId":"-"},"content":"  * Naming conventions for PR and branch are followed, and `Fixes #....` or similar keyword is present in the PR description."},{"lineNumber":239,"author":{"gitId":"-"},"content":"  * The items in [this list](#things-to-check) are all satisfied."},{"lineNumber":240,"author":{"gitId":"-"},"content":"  * The solution is the best possible solution to the problem under the circumstances."},{"lineNumber":241,"author":{"gitId":"-"},"content":"  * The code is up-to-date with the latest `master` branch (or whichever base branch applies), or at least no conflict."},{"lineNumber":242,"author":{"gitId":"-"},"content":"    If this is not the case, ask the dev to sync it."},{"lineNumber":243,"author":{"gitId":"-"},"content":"* If any of the above are not OK:"},{"lineNumber":244,"author":{"gitId":"-"},"content":"  * Add comments in the diff to suggest changes."},{"lineNumber":245,"author":{"gitId":"-"},"content":"    Bundle the review comments with the \"Start a review\" and \"Add review comment\" features, and finish it with \"Request changes\", preferably with the review summary."},{"lineNumber":246,"author":{"gitId":"-"},"content":"  * Change the status of the PR to `s.Ongoing`."},{"lineNumber":247,"author":{"gitId":"-"},"content":"* If the code is OK in all aspects, change the PR status to `s.FinalReview` and \"Approve\" the PR."},{"lineNumber":248,"author":{"gitId":"-"},"content":""},{"lineNumber":249,"author":{"gitId":"-"},"content":"## Merging a PR"},{"lineNumber":250,"author":{"gitId":"-"},"content":""},{"lineNumber":251,"author":{"gitId":"-"},"content":"\u003cbox type\u003d\"info\" light\u003e"},{"lineNumber":252,"author":{"gitId":"-"},"content":"  \u003cthumbnail circle slot\u003d\"icon\" text\u003d\":fas-laptop:\" background\u003d\"#fac090\" size\u003d\"32\"/\u003e"},{"lineNumber":253,"author":{"gitId":"-"},"content":""},{"lineNumber":254,"author":{"gitId":"-"},"content":"**Role: dev (with push permission), or reviewer**"},{"lineNumber":255,"author":{"gitId":"-"},"content":"\u003c/box\u003e"},{"lineNumber":256,"author":{"gitId":"-"},"content":""},{"lineNumber":257,"author":{"gitId":"-"},"content":"This instruction set will use the issue `Remove unnecessary System.out.printlns from Java files #3942`, resolved by PR `#3944`, with `master` branch as the base branch, as an example."},{"lineNumber":258,"author":{"gitId":"-"},"content":""},{"lineNumber":259,"author":{"gitId":"-"},"content":"* Merging can be done anytime as long as the `s.ToMerge` label is present and GitHub gives a green light for merging."},{"lineNumber":260,"author":{"gitId":"-"},"content":"  There are a few scenarios where GitHub can prevent merging from proceeding:"},{"lineNumber":261,"author":{"gitId":"-"},"content":"  * **Merge conflict**: the PR is conflicting with the current `master` branch; the author will need to resolve the conflicts before proceeding."},{"lineNumber":262,"author":{"gitId":"-"},"content":"  * **Outdated branch**: the PR is not in sync with the current `master` branch. If the PR allows edits from maintainers, simply update the branch using the \"Update branch\" option; otherwise, the author will need to sync it themselves before proceeding."},{"lineNumber":263,"author":{"gitId":"-"},"content":""},{"lineNumber":264,"author":{"gitId":"-"},"content":"  It is up to the dev/reviewer\u0027s discretion on whether the merge conflict or outdated branch necessitates another review.\u003cbr\u003e"},{"lineNumber":265,"author":{"gitId":"-"},"content":"  In general, unless the changeset is functionally conflicting, there is no need for another review."},{"lineNumber":266,"author":{"gitId":"-"},"content":"* When ready for merging,"},{"lineNumber":267,"author":{"gitId":"-"},"content":"  * Merge with [\"Squash and merge\"](https://help.github.com/articles/about-pull-request-merges/#squash-and-merge-your-pull-request-commits) option. Format of the commit message:"},{"lineNumber":268,"author":{"gitId":"-"},"content":""},{"lineNumber":269,"author":{"gitId":"-"},"content":"    ```"},{"lineNumber":270,"author":{"gitId":"-"},"content":"    [#Issue number] Issue title as given in the original issue (#PR number)"},{"lineNumber":271,"author":{"gitId":"-"},"content":"    ```"},{"lineNumber":272,"author":{"gitId":"-"},"content":"    e.g. `[#3942] Remove unnecessary System.out.printlns from Java files (#3944)`."},{"lineNumber":273,"author":{"gitId":"-"},"content":"  * Where appropriate (e.g. merging a long-lived feature branch), the [\"Rebase and merge\"](https://help.github.com/articles/about-pull-request-merges/#rebase-and-merge-your-pull-request-commits) option can be used instead."},{"lineNumber":274,"author":{"gitId":"-"},"content":"  * Apply a `c.*` label to the PR to indicate the type of the PR, if it has not been done before."},{"lineNumber":275,"author":{"gitId":"-"},"content":"* If the PR necessitates a data migration, [create a data migration issue](https://github.com/TEAMMATES/teammates/issues/new?template\u003ddata-migration.md) after merging."}],"authorContributionMap":{"cedricongjh":4,"-":271}},{"path":"src/e2e/java/teammates/e2e/pageobjects/AppPage.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.e2e.pageobjects;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import static com.google.common.base.Preconditions.checkNotNull;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import static org.junit.Assert.assertEquals;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import static org.junit.Assert.assertNotEquals;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import static org.junit.Assert.assertNotNull;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import static org.junit.Assert.assertTrue;"},{"lineNumber":8,"author":{"gitId":"-"},"content":""},{"lineNumber":9,"author":{"gitId":"-"},"content":"import java.io.File;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import java.io.IOException;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import java.lang.reflect.Constructor;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import java.lang.reflect.InvocationTargetException;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import java.time.Duration;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import java.time.Instant;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import java.time.ZoneId;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"import java.time.ZonedDateTime;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"import java.time.format.DateTimeFormatter;"},{"lineNumber":18,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"import java.util.Map;"},{"lineNumber":20,"author":{"gitId":"-"},"content":""},{"lineNumber":21,"author":{"gitId":"-"},"content":"import org.openqa.selenium.By;"},{"lineNumber":22,"author":{"gitId":"-"},"content":"import org.openqa.selenium.InvalidElementStateException;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"import org.openqa.selenium.JavascriptExecutor;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"import org.openqa.selenium.Keys;"},{"lineNumber":25,"author":{"gitId":"-"},"content":"import org.openqa.selenium.NoSuchElementException;"},{"lineNumber":26,"author":{"gitId":"-"},"content":"import org.openqa.selenium.WebDriverException;"},{"lineNumber":27,"author":{"gitId":"-"},"content":"import org.openqa.selenium.WebElement;"},{"lineNumber":28,"author":{"gitId":"-"},"content":"import org.openqa.selenium.remote.RemoteWebElement;"},{"lineNumber":29,"author":{"gitId":"-"},"content":"import org.openqa.selenium.remote.UselessFileDetector;"},{"lineNumber":30,"author":{"gitId":"-"},"content":"import org.openqa.selenium.support.PageFactory;"},{"lineNumber":31,"author":{"gitId":"-"},"content":"import org.openqa.selenium.support.ui.ExpectedCondition;"},{"lineNumber":32,"author":{"gitId":"-"},"content":"import org.openqa.selenium.support.ui.ExpectedConditions;"},{"lineNumber":33,"author":{"gitId":"-"},"content":"import org.openqa.selenium.support.ui.Select;"},{"lineNumber":34,"author":{"gitId":"-"},"content":"import org.openqa.selenium.support.ui.WebDriverWait;"},{"lineNumber":35,"author":{"gitId":"-"},"content":""},{"lineNumber":36,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.FeedbackParticipantType;"},{"lineNumber":37,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.NotificationAttributes;"},{"lineNumber":38,"author":{"gitId":"-"},"content":"import teammates.common.util.TimeHelper;"},{"lineNumber":39,"author":{"gitId":"-"},"content":"import teammates.e2e.util.MaximumRetriesExceededException;"},{"lineNumber":40,"author":{"gitId":"-"},"content":"import teammates.e2e.util.RetryManager;"},{"lineNumber":41,"author":{"gitId":"-"},"content":"import teammates.e2e.util.Retryable;"},{"lineNumber":42,"author":{"gitId":"-"},"content":"import teammates.e2e.util.TestProperties;"},{"lineNumber":43,"author":{"gitId":"-"},"content":"import teammates.test.FileHelper;"},{"lineNumber":44,"author":{"gitId":"-"},"content":"import teammates.test.ThreadHelper;"},{"lineNumber":45,"author":{"gitId":"-"},"content":""},{"lineNumber":46,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":47,"author":{"gitId":"-"},"content":" * An abstract class that represents a browser-loaded page of the app and"},{"lineNumber":48,"author":{"gitId":"-"},"content":" * provides ways to interact with it. Also contains methods to validate some"},{"lineNumber":49,"author":{"gitId":"-"},"content":" * aspects of the page, e.g. HTML page source."},{"lineNumber":50,"author":{"gitId":"-"},"content":" *"},{"lineNumber":51,"author":{"gitId":"-"},"content":" * \u003cp\u003eNote: We are using the Page Object pattern here."},{"lineNumber":52,"author":{"gitId":"-"},"content":" *"},{"lineNumber":53,"author":{"gitId":"-"},"content":" * @see \u003ca href\u003d\"https://martinfowler.com/bliki/PageObject.html\"\u003ehttps://martinfowler.com/bliki/PageObject.html\u003c/a\u003e"},{"lineNumber":54,"author":{"gitId":"-"},"content":" */"},{"lineNumber":55,"author":{"gitId":"-"},"content":"public abstract class AppPage {"},{"lineNumber":56,"author":{"gitId":"-"},"content":""},{"lineNumber":57,"author":{"gitId":"-"},"content":"    private static final String CLEAR_ELEMENT_SCRIPT;"},{"lineNumber":58,"author":{"gitId":"-"},"content":"    private static final String SCROLL_ELEMENT_TO_CENTER_AND_CLICK_SCRIPT;"},{"lineNumber":59,"author":{"gitId":"-"},"content":"    private static final String READ_TINYMCE_CONTENT_SCRIPT;"},{"lineNumber":60,"author":{"gitId":"-"},"content":"    private static final String WRITE_TO_TINYMCE_SCRIPT;"},{"lineNumber":61,"author":{"gitId":"-"},"content":""},{"lineNumber":62,"author":{"gitId":"-"},"content":"    static {"},{"lineNumber":63,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":64,"author":{"gitId":"-"},"content":"            CLEAR_ELEMENT_SCRIPT \u003d FileHelper.readFile(\"src/e2e/resources/scripts/clearElementWithoutEvents.js\");"},{"lineNumber":65,"author":{"gitId":"-"},"content":"            SCROLL_ELEMENT_TO_CENTER_AND_CLICK_SCRIPT \u003d FileHelper"},{"lineNumber":66,"author":{"gitId":"-"},"content":"                    .readFile(\"src/e2e/resources/scripts/scrollElementToCenterAndClick.js\");"},{"lineNumber":67,"author":{"gitId":"-"},"content":"            READ_TINYMCE_CONTENT_SCRIPT \u003d FileHelper.readFile(\"src/e2e/resources/scripts/readTinyMCEContent.js\");"},{"lineNumber":68,"author":{"gitId":"-"},"content":"            WRITE_TO_TINYMCE_SCRIPT \u003d FileHelper.readFile(\"src/e2e/resources/scripts/writeToTinyMCE.js\");"},{"lineNumber":69,"author":{"gitId":"-"},"content":"        } catch (IOException e) {"},{"lineNumber":70,"author":{"gitId":"-"},"content":"            throw new RuntimeException(e);"},{"lineNumber":71,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":72,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":73,"author":{"gitId":"-"},"content":""},{"lineNumber":74,"author":{"gitId":"-"},"content":"    /** Browser instance the page is loaded into. */"},{"lineNumber":75,"author":{"gitId":"-"},"content":"    protected Browser browser;"},{"lineNumber":76,"author":{"gitId":"-"},"content":""},{"lineNumber":77,"author":{"gitId":"-"},"content":"    /** Use for retrying due to transient UI issues. */"},{"lineNumber":78,"author":{"gitId":"-"},"content":"    protected RetryManager uiRetryManager \u003d new RetryManager((TestProperties.TEST_TIMEOUT + 1) / 2);"},{"lineNumber":79,"author":{"gitId":"-"},"content":""},{"lineNumber":80,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":81,"author":{"gitId":"-"},"content":"     * Used by subclasses to create a {@code AppPage} object to wrap around the"},{"lineNumber":82,"author":{"gitId":"-"},"content":"     * given {@code browser} object. Fails if the page content does not match"},{"lineNumber":83,"author":{"gitId":"-"},"content":"     * the page type, as defined by the sub-class."},{"lineNumber":84,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":85,"author":{"gitId":"-"},"content":"    public AppPage(Browser browser) {"},{"lineNumber":86,"author":{"gitId":"-"},"content":"        this.browser \u003d browser;"},{"lineNumber":87,"author":{"gitId":"-"},"content":""},{"lineNumber":88,"author":{"gitId":"-"},"content":"        boolean isCorrectPageType;"},{"lineNumber":89,"author":{"gitId":"-"},"content":""},{"lineNumber":90,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":91,"author":{"gitId":"-"},"content":"            isCorrectPageType \u003d containsExpectedPageContents();"},{"lineNumber":92,"author":{"gitId":"-"},"content":""},{"lineNumber":93,"author":{"gitId":"-"},"content":"            if (isCorrectPageType) {"},{"lineNumber":94,"author":{"gitId":"-"},"content":"                return;"},{"lineNumber":95,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":96,"author":{"gitId":"-"},"content":"        } catch (Exception e) {"},{"lineNumber":97,"author":{"gitId":"-"},"content":"            // ignore and try again"},{"lineNumber":98,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":99,"author":{"gitId":"-"},"content":""},{"lineNumber":100,"author":{"gitId":"-"},"content":"        // To minimize test failures due to eventual consistency, we try to"},{"lineNumber":101,"author":{"gitId":"-"},"content":"        //  reload the page and compare once more."},{"lineNumber":102,"author":{"gitId":"-"},"content":"        System.out.println(\"#### Incorrect page type: going to try reloading the page.\");"},{"lineNumber":103,"author":{"gitId":"-"},"content":""},{"lineNumber":104,"author":{"gitId":"-"},"content":"        ThreadHelper.waitFor(2000);"},{"lineNumber":105,"author":{"gitId":"-"},"content":""},{"lineNumber":106,"author":{"gitId":"-"},"content":"        reloadPage();"},{"lineNumber":107,"author":{"gitId":"-"},"content":""},{"lineNumber":108,"author":{"gitId":"-"},"content":"        isCorrectPageType \u003d containsExpectedPageContents();"},{"lineNumber":109,"author":{"gitId":"-"},"content":""},{"lineNumber":110,"author":{"gitId":"-"},"content":"        if (isCorrectPageType) {"},{"lineNumber":111,"author":{"gitId":"-"},"content":"            return;"},{"lineNumber":112,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":113,"author":{"gitId":"-"},"content":""},{"lineNumber":114,"author":{"gitId":"-"},"content":"        System.out.println(\"######### Not in the correct page! ##########\");"},{"lineNumber":115,"author":{"gitId":"-"},"content":"        throw new IllegalStateException(\"Not in the correct page!\");"},{"lineNumber":116,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":117,"author":{"gitId":"-"},"content":""},{"lineNumber":118,"author":{"gitId":"-"},"content":"    public Browser getBrowser() {"},{"lineNumber":119,"author":{"gitId":"-"},"content":"        return browser;"},{"lineNumber":120,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":121,"author":{"gitId":"-"},"content":""},{"lineNumber":122,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":123,"author":{"gitId":"-"},"content":"     * Gets a new page object representation of the currently open web page in the browser."},{"lineNumber":124,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":125,"author":{"gitId":"-"},"content":"     * \u003cp\u003eFails if the new page content does not match content expected in a page of"},{"lineNumber":126,"author":{"gitId":"-"},"content":"     * the type indicated by the parameter {@code typeOfPage}."},{"lineNumber":127,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":128,"author":{"gitId":"-"},"content":"    public static \u003cT extends AppPage\u003e T getNewPageInstance(Browser currentBrowser, Class\u003cT\u003e typeOfPage) {"},{"lineNumber":129,"author":{"gitId":"-"},"content":"        waitUntilAnimationFinish(currentBrowser);"},{"lineNumber":130,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":131,"author":{"gitId":"-"},"content":"            Constructor\u003cT\u003e constructor \u003d typeOfPage.getConstructor(Browser.class);"},{"lineNumber":132,"author":{"gitId":"-"},"content":"            T page \u003d constructor.newInstance(currentBrowser);"},{"lineNumber":133,"author":{"gitId":"-"},"content":"            PageFactory.initElements(currentBrowser.driver, page);"},{"lineNumber":134,"author":{"gitId":"-"},"content":"            page.waitForPageToLoad();"},{"lineNumber":135,"author":{"gitId":"-"},"content":"            return page;"},{"lineNumber":136,"author":{"gitId":"-"},"content":"        } catch (InvocationTargetException e) {"},{"lineNumber":137,"author":{"gitId":"-"},"content":"            if (e.getCause() instanceof IllegalStateException) {"},{"lineNumber":138,"author":{"gitId":"-"},"content":"                throw (IllegalStateException) e.getCause();"},{"lineNumber":139,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":140,"author":{"gitId":"-"},"content":"            throw new RuntimeException(e);"},{"lineNumber":141,"author":{"gitId":"-"},"content":"        } catch (NoSuchMethodException | IllegalAccessException | InstantiationException e) {"},{"lineNumber":142,"author":{"gitId":"-"},"content":"            throw new RuntimeException(e);"},{"lineNumber":143,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":144,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":145,"author":{"gitId":"-"},"content":""},{"lineNumber":146,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":147,"author":{"gitId":"-"},"content":"     * Fails if the new page content does not match content expected in a page of"},{"lineNumber":148,"author":{"gitId":"-"},"content":"     * the type indicated by the parameter {@code newPageType}."},{"lineNumber":149,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":150,"author":{"gitId":"-"},"content":"    public \u003cT extends AppPage\u003e T changePageType(Class\u003cT\u003e newPageType) {"},{"lineNumber":151,"author":{"gitId":"-"},"content":"        return getNewPageInstance(browser, newPageType);"},{"lineNumber":152,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":153,"author":{"gitId":"-"},"content":""},{"lineNumber":154,"author":{"gitId":"-"},"content":"    public \u003cE\u003e E waitFor(ExpectedCondition\u003cE\u003e expectedCondition) {"},{"lineNumber":155,"author":{"gitId":"-"},"content":"        WebDriverWait wait \u003d new WebDriverWait(browser.driver, Duration.ofSeconds(TestProperties.TEST_TIMEOUT));"},{"lineNumber":156,"author":{"gitId":"-"},"content":"        return wait.until(expectedCondition);"},{"lineNumber":157,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":158,"author":{"gitId":"-"},"content":""},{"lineNumber":159,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":160,"author":{"gitId":"-"},"content":"     * Waits until the page is fully loaded."},{"lineNumber":161,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":162,"author":{"gitId":"-"},"content":"    public void waitForPageToLoad() {"},{"lineNumber":163,"author":{"gitId":"-"},"content":"        waitForPageToLoad(false);"},{"lineNumber":164,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":165,"author":{"gitId":"-"},"content":""},{"lineNumber":166,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":167,"author":{"gitId":"-"},"content":"     * Waits until the page is fully loaded."},{"lineNumber":168,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":169,"author":{"gitId":"-"},"content":"     * @param excludeToast Set this to true if toast message\u0027s disappearance should not be counted"},{"lineNumber":170,"author":{"gitId":"-"},"content":"     *         as criteria for page load\u0027s completion."},{"lineNumber":171,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":172,"author":{"gitId":"-"},"content":"    public void waitForPageToLoad(boolean excludeToast) {"},{"lineNumber":173,"author":{"gitId":"-"},"content":"        browser.waitForPageLoad(excludeToast);"},{"lineNumber":174,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":175,"author":{"gitId":"-"},"content":""},{"lineNumber":176,"author":{"gitId":"-"},"content":"    public void waitForElementVisibility(WebElement element) {"},{"lineNumber":177,"author":{"gitId":"-"},"content":"        waitFor(ExpectedConditions.visibilityOf(element));"},{"lineNumber":178,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":179,"author":{"gitId":"-"},"content":""},{"lineNumber":180,"author":{"gitId":"-"},"content":"    public void waitForElementVisibility(By by) {"},{"lineNumber":181,"author":{"gitId":"-"},"content":"        waitFor(ExpectedConditions.visibilityOfElementLocated(by));"},{"lineNumber":182,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":183,"author":{"gitId":"-"},"content":""},{"lineNumber":184,"author":{"gitId":"-"},"content":"    public void waitForElementToBeClickable(WebElement element) {"},{"lineNumber":185,"author":{"gitId":"-"},"content":"        waitFor(ExpectedConditions.elementToBeClickable(element));"},{"lineNumber":186,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":187,"author":{"gitId":"-"},"content":""},{"lineNumber":188,"author":{"gitId":"-"},"content":"    public static void waitUntilAnimationFinish(Browser browser) {"},{"lineNumber":189,"author":{"gitId":"-"},"content":"        WebDriverWait wait \u003d new WebDriverWait(browser.driver, Duration.ofSeconds(TestProperties.TEST_TIMEOUT));"},{"lineNumber":190,"author":{"gitId":"-"},"content":"        wait.until(ExpectedConditions.invisibilityOfElementLocated(By.className(\"ng-animating\")));"},{"lineNumber":191,"author":{"gitId":"-"},"content":"        ThreadHelper.waitFor(1000);"},{"lineNumber":192,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":193,"author":{"gitId":"-"},"content":""},{"lineNumber":194,"author":{"gitId":"-"},"content":"    public void waitUntilAnimationFinish() {"},{"lineNumber":195,"author":{"gitId":"-"},"content":"        waitUntilAnimationFinish(browser);"},{"lineNumber":196,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":197,"author":{"gitId":"-"},"content":""},{"lineNumber":198,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":199,"author":{"gitId":"-"},"content":"     * Waits until an element is no longer attached to the DOM or the timeout expires."},{"lineNumber":200,"author":{"gitId":"-"},"content":"     * @param element the WebElement that expires after {@link TestProperties#TEST_TIMEOUT}"},{"lineNumber":201,"author":{"gitId":"-"},"content":"     * @see org.openqa.selenium.support.ui.FluentWait#until(java.util.function.Function)"},{"lineNumber":202,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":203,"author":{"gitId":"-"},"content":"    public void waitForElementStaleness(WebElement element) {"},{"lineNumber":204,"author":{"gitId":"-"},"content":"        waitFor(ExpectedConditions.stalenessOf(element));"},{"lineNumber":205,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":206,"author":{"gitId":"-"},"content":""},{"lineNumber":207,"author":{"gitId":"-"},"content":"    public void verifyUnclickable(WebElement element) {"},{"lineNumber":208,"author":{"gitId":"-"},"content":"        if (\"a\".equals(element.getTagName())) {"},{"lineNumber":209,"author":{"gitId":"-"},"content":"            assertTrue(element.getAttribute(\"class\").contains(\"disabled\"));"},{"lineNumber":210,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":211,"author":{"gitId":"-"},"content":"            assertNotNull(element.getAttribute(\"disabled\"));"},{"lineNumber":212,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":213,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":214,"author":{"gitId":"-"},"content":""},{"lineNumber":215,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":216,"author":{"gitId":"-"},"content":"     * Waits for a confirmation modal to appear and click the confirm button."},{"lineNumber":217,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":218,"author":{"gitId":"-"},"content":"    public void waitForConfirmationModalAndClickOk() {"},{"lineNumber":219,"author":{"gitId":"-"},"content":"        waitForModalShown();"},{"lineNumber":220,"author":{"gitId":"-"},"content":"        waitForElementVisibility(By.className(\"modal-btn-ok\"));"},{"lineNumber":221,"author":{"gitId":"-"},"content":"        WebElement okayButton \u003d browser.driver.findElement(By.className(\"modal-btn-ok\"));"},{"lineNumber":222,"author":{"gitId":"-"},"content":"        waitForElementToBeClickable(okayButton);"},{"lineNumber":223,"author":{"gitId":"-"},"content":"        clickDismissModalButtonAndWaitForModalHidden(okayButton);"},{"lineNumber":224,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":225,"author":{"gitId":"-"},"content":""},{"lineNumber":226,"author":{"gitId":"-"},"content":"    private void waitForModalShown() {"},{"lineNumber":227,"author":{"gitId":"-"},"content":"        // Possible exploration: Change to listening to modal shown event as"},{"lineNumber":228,"author":{"gitId":"-"},"content":"        // this is based on the implementation detail assumption that once modal-backdrop is added the modal is shown"},{"lineNumber":229,"author":{"gitId":"-"},"content":"        waitForElementVisibility(By.className(\"modal-backdrop\"));"},{"lineNumber":230,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":231,"author":{"gitId":"-"},"content":""},{"lineNumber":232,"author":{"gitId":"-"},"content":"    void waitForModalHidden(WebElement modalBackdrop) {"},{"lineNumber":233,"author":{"gitId":"-"},"content":"        // Possible exploration: Change to listening to modal hidden event as"},{"lineNumber":234,"author":{"gitId":"-"},"content":"        // this is based on the implementation detail assumption that once modal-backdrop is removed the modal is hidden"},{"lineNumber":235,"author":{"gitId":"-"},"content":"        waitForElementStaleness(modalBackdrop);"},{"lineNumber":236,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":237,"author":{"gitId":"-"},"content":""},{"lineNumber":238,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":239,"author":{"gitId":"-"},"content":"     * Waits for the element to appear in the page, up to the timeout specified."},{"lineNumber":240,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":241,"author":{"gitId":"-"},"content":"    public WebElement waitForElementPresence(By by) {"},{"lineNumber":242,"author":{"gitId":"-"},"content":"        return waitFor(ExpectedConditions.presenceOfElementLocated(by));"},{"lineNumber":243,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":244,"author":{"gitId":"-"},"content":""},{"lineNumber":245,"author":{"gitId":"-"},"content":"    public void reloadPage() {"},{"lineNumber":246,"author":{"gitId":"-"},"content":"        browser.goToUrl(browser.driver.getCurrentUrl());"},{"lineNumber":247,"author":{"gitId":"-"},"content":"        waitForPageToLoad();"},{"lineNumber":248,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":249,"author":{"gitId":"-"},"content":""},{"lineNumber":250,"author":{"gitId":"-"},"content":"    protected Object executeScript(String script, Object... args) {"},{"lineNumber":251,"author":{"gitId":"-"},"content":"        JavascriptExecutor javascriptExecutor \u003d (JavascriptExecutor) browser.driver;"},{"lineNumber":252,"author":{"gitId":"-"},"content":"        return javascriptExecutor.executeScript(script, args);"},{"lineNumber":253,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":254,"author":{"gitId":"-"},"content":""},{"lineNumber":255,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":256,"author":{"gitId":"-"},"content":"     * Returns the HTML source of the currently loaded page."},{"lineNumber":257,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":258,"author":{"gitId":"-"},"content":"    public String getPageSource() {"},{"lineNumber":259,"author":{"gitId":"-"},"content":"        return browser.driver.getPageSource();"},{"lineNumber":260,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":261,"author":{"gitId":"-"},"content":""},{"lineNumber":262,"author":{"gitId":"-"},"content":"    public String getTitle() {"},{"lineNumber":263,"author":{"gitId":"-"},"content":"        return browser.driver.getTitle();"},{"lineNumber":264,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":265,"author":{"gitId":"-"},"content":""},{"lineNumber":266,"author":{"gitId":"-"},"content":"    public String getPageTitle() {"},{"lineNumber":267,"author":{"gitId":"-"},"content":"        return waitForElementPresence(By.tagName(\"h1\")).getText();"},{"lineNumber":268,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":269,"author":{"gitId":"-"},"content":""},{"lineNumber":270,"author":{"gitId":"-"},"content":"    public void click(By by) {"},{"lineNumber":271,"author":{"gitId":"-"},"content":"        WebElement element \u003d browser.driver.findElement(by);"},{"lineNumber":272,"author":{"gitId":"-"},"content":"        click(element);"},{"lineNumber":273,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":274,"author":{"gitId":"-"},"content":""},{"lineNumber":275,"author":{"gitId":"-"},"content":"    protected void click(WebElement element) {"},{"lineNumber":276,"author":{"gitId":"-"},"content":"        executeScript(\"arguments[0].click();\", element);"},{"lineNumber":277,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":278,"author":{"gitId":"-"},"content":""},{"lineNumber":279,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":280,"author":{"gitId":"-"},"content":"     * Simulates the clearing and sending of keys to an element."},{"lineNumber":281,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":282,"author":{"gitId":"-"},"content":"     * \u003cp\u003e\u003cb\u003eNote:\u003c/b\u003e This method is not the same as using {@link WebElement#clear} followed by {@link WebElement#sendKeys}."},{"lineNumber":283,"author":{"gitId":"-"},"content":"     * It avoids double firing of the {@code change} event which may occur when {@link WebElement#clear} is followed by"},{"lineNumber":284,"author":{"gitId":"-"},"content":"     * {@link WebElement#sendKeys}."},{"lineNumber":285,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":286,"author":{"gitId":"-"},"content":"     * @see AppPage#clearWithoutEvents(WebElement)"},{"lineNumber":287,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":288,"author":{"gitId":"-"},"content":"    private void clearAndSendKeys(WebElement element, CharSequence... keysToSend) {"},{"lineNumber":289,"author":{"gitId":"-"},"content":"        Map\u003cString, Object\u003e result \u003d clearWithoutEvents(element);"},{"lineNumber":290,"author":{"gitId":"-"},"content":"        @SuppressWarnings(\"unchecked\")"},{"lineNumber":291,"author":{"gitId":"-"},"content":"        Map\u003cString, String\u003e errors \u003d (Map\u003cString, String\u003e) result.get(\"errors\");"},{"lineNumber":292,"author":{"gitId":"-"},"content":"        if (errors !\u003d null) {"},{"lineNumber":293,"author":{"gitId":"-"},"content":"            throw new InvalidElementStateException(errors.get(\"detail\"));"},{"lineNumber":294,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":295,"author":{"gitId":"-"},"content":""},{"lineNumber":296,"author":{"gitId":"-"},"content":"        element.sendKeys(keysToSend);"},{"lineNumber":297,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":298,"author":{"gitId":"-"},"content":""},{"lineNumber":299,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":300,"author":{"gitId":"-"},"content":"     * Clears any kind of editable element, but without firing the {@code change} event (unlike {@link WebElement#clear()})."},{"lineNumber":301,"author":{"gitId":"-"},"content":"     * Avoid using this method if {@link WebElement#clear()} meets the requirements as this method depends on implementation"},{"lineNumber":302,"author":{"gitId":"-"},"content":"     * details."},{"lineNumber":303,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":304,"author":{"gitId":"-"},"content":"    private Map\u003cString, Object\u003e clearWithoutEvents(WebElement element) {"},{"lineNumber":305,"author":{"gitId":"-"},"content":"        // This method is a close mirror of HtmlUnitWebElement#clear(), except that events are not handled. Note that"},{"lineNumber":306,"author":{"gitId":"-"},"content":"        // HtmlUnitWebElement is mirrored as opposed to RemoteWebElement (which is used with actual browsers) for convenience"},{"lineNumber":307,"author":{"gitId":"-"},"content":"        // and the implementation can differ."},{"lineNumber":308,"author":{"gitId":"-"},"content":"        checkNotNull(element);"},{"lineNumber":309,"author":{"gitId":"-"},"content":""},{"lineNumber":310,"author":{"gitId":"-"},"content":"        // Adapted from ExpectedConditions#stalenessOf which forces a staleness check. This allows a meaningful"},{"lineNumber":311,"author":{"gitId":"-"},"content":"        // StaleElementReferenceException to be thrown rather than just getting a boolean from ExpectedConditions."},{"lineNumber":312,"author":{"gitId":"-"},"content":"        element.isEnabled();"},{"lineNumber":313,"author":{"gitId":"-"},"content":""},{"lineNumber":314,"author":{"gitId":"-"},"content":"        // Fail safe in case the implementation of staleness checks is changed"},{"lineNumber":315,"author":{"gitId":"-"},"content":"        if (isExpectedCondition(ExpectedConditions.stalenessOf(element))) {"},{"lineNumber":316,"author":{"gitId":"-"},"content":"            throw new AssertionError("},{"lineNumber":317,"author":{"gitId":"-"},"content":"                    \"Element is stale but should have been caught earlier by element.isEnabled().\");"},{"lineNumber":318,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":319,"author":{"gitId":"-"},"content":""},{"lineNumber":320,"author":{"gitId":"-"},"content":"        @SuppressWarnings(\"unchecked\")"},{"lineNumber":321,"author":{"gitId":"-"},"content":"        Map\u003cString, Object\u003e result \u003d (Map\u003cString, Object\u003e) executeScript(CLEAR_ELEMENT_SCRIPT, element);"},{"lineNumber":322,"author":{"gitId":"-"},"content":"        return result;"},{"lineNumber":323,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":324,"author":{"gitId":"-"},"content":""},{"lineNumber":325,"author":{"gitId":"-"},"content":"    protected void fillTextBox(WebElement textBoxElement, String value) {"},{"lineNumber":326,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":327,"author":{"gitId":"-"},"content":"            scrollElementToCenterAndClick(textBoxElement);"},{"lineNumber":328,"author":{"gitId":"-"},"content":"        } catch (WebDriverException e) {"},{"lineNumber":329,"author":{"gitId":"-"},"content":"            // It is important that a text box element is clickable before we fill it but due to legacy reasons we continue"},{"lineNumber":330,"author":{"gitId":"-"},"content":"            // attempting to fill the text box element even if it\u0027s not clickable (which may lead to an unexpected failure"},{"lineNumber":331,"author":{"gitId":"-"},"content":"            // later on)"},{"lineNumber":332,"author":{"gitId":"-"},"content":"            System.out.println(\"Unexpectedly not able to click on the text box element because of: \");"},{"lineNumber":333,"author":{"gitId":"-"},"content":"            System.out.println(e);"},{"lineNumber":334,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":335,"author":{"gitId":"-"},"content":""},{"lineNumber":336,"author":{"gitId":"-"},"content":"        // If the intended value is empty `clear` works well enough for us"},{"lineNumber":337,"author":{"gitId":"-"},"content":"        if (value.isEmpty()) {"},{"lineNumber":338,"author":{"gitId":"-"},"content":"            textBoxElement.clear();"},{"lineNumber":339,"author":{"gitId":"-"},"content":"            return;"},{"lineNumber":340,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":341,"author":{"gitId":"-"},"content":""},{"lineNumber":342,"author":{"gitId":"-"},"content":"        // Otherwise we need to do special handling of entering input because `clear` and `sendKeys` work differently."},{"lineNumber":343,"author":{"gitId":"-"},"content":"        // See documentation for `clearAndSendKeys` for more details."},{"lineNumber":344,"author":{"gitId":"-"},"content":"        clearAndSendKeys(textBoxElement, value);"},{"lineNumber":345,"author":{"gitId":"-"},"content":""},{"lineNumber":346,"author":{"gitId":"-"},"content":"        textBoxElement.sendKeys(Keys.TAB); // blur the element to receive events"},{"lineNumber":347,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":348,"author":{"gitId":"-"},"content":""},{"lineNumber":349,"author":{"gitId":"-"},"content":"    protected void fillDatePicker(WebElement dateBox, Instant startInstant, String timeZone) {"},{"lineNumber":350,"author":{"gitId":"-"},"content":"        WebElement buttonToOpenPicker \u003d dateBox.findElement(By.tagName(\"button\"));"},{"lineNumber":351,"author":{"gitId":"-"},"content":"        click(buttonToOpenPicker);"},{"lineNumber":352,"author":{"gitId":"-"},"content":""},{"lineNumber":353,"author":{"gitId":"-"},"content":"        WebElement datePicker \u003d dateBox.findElement(By.tagName(\"ngb-datepicker\"));"},{"lineNumber":354,"author":{"gitId":"-"},"content":"        WebElement monthAndYearPicker \u003d datePicker.findElement(By.tagName(\"ngb-datepicker-navigation-select\"));"},{"lineNumber":355,"author":{"gitId":"-"},"content":"        WebElement monthPicker \u003d monthAndYearPicker.findElement(By.cssSelector(\"[title\u003d\u0027Select month\u0027]\"));"},{"lineNumber":356,"author":{"gitId":"-"},"content":"        WebElement yearPicker \u003d monthAndYearPicker.findElement(By.cssSelector(\"[title\u003d\u0027Select year\u0027]\"));"},{"lineNumber":357,"author":{"gitId":"-"},"content":"        WebElement dayPicker \u003d datePicker.findElement(By.cssSelector(\"ngb-datepicker-month\"));"},{"lineNumber":358,"author":{"gitId":"-"},"content":""},{"lineNumber":359,"author":{"gitId":"-"},"content":"        String year \u003d getYearString(startInstant, timeZone);"},{"lineNumber":360,"author":{"gitId":"-"},"content":"        String month \u003d getMonthString(startInstant, timeZone);"},{"lineNumber":361,"author":{"gitId":"-"},"content":"        String date \u003d getFullDateString(startInstant, timeZone);"},{"lineNumber":362,"author":{"gitId":"-"},"content":""},{"lineNumber":363,"author":{"gitId":"-"},"content":"        selectDropdownOptionByText(yearPicker, year);"},{"lineNumber":364,"author":{"gitId":"-"},"content":"        selectDropdownOptionByText(monthPicker, month);"},{"lineNumber":365,"author":{"gitId":"-"},"content":"        click(dayPicker.findElement(By.cssSelector(String.format(\"[aria-label\u003d\u0027%s\u0027]\", date))));"},{"lineNumber":366,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":367,"author":{"gitId":"-"},"content":""},{"lineNumber":368,"author":{"gitId":"-"},"content":"    protected void fillFileBox(RemoteWebElement fileBoxElement, String fileName) {"},{"lineNumber":369,"author":{"gitId":"-"},"content":"        if (fileName.isEmpty()) {"},{"lineNumber":370,"author":{"gitId":"-"},"content":"            fileBoxElement.clear();"},{"lineNumber":371,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":372,"author":{"gitId":"-"},"content":"            fileBoxElement.setFileDetector(new UselessFileDetector());"},{"lineNumber":373,"author":{"gitId":"-"},"content":"            String filePath \u003d new File(fileName).getAbsolutePath();"},{"lineNumber":374,"author":{"gitId":"-"},"content":"            fileBoxElement.sendKeys(filePath);"},{"lineNumber":375,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":376,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":377,"author":{"gitId":"-"},"content":""},{"lineNumber":378,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":379,"author":{"gitId":"-"},"content":"     * Get rich text from editor."},{"lineNumber":380,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":381,"author":{"gitId":"-"},"content":"    protected String getEditorRichText(WebElement editor) {"},{"lineNumber":382,"author":{"gitId":"-"},"content":"        waitForElementPresence(By.tagName(\"iframe\"));"},{"lineNumber":383,"author":{"gitId":"-"},"content":"        String id \u003d editor.findElement(By.tagName(\"textarea\")).getAttribute(\"id\");"},{"lineNumber":384,"author":{"gitId":"-"},"content":"        return (String) ((JavascriptExecutor) browser.driver)"},{"lineNumber":385,"author":{"gitId":"-"},"content":"                .executeAsyncScript(READ_TINYMCE_CONTENT_SCRIPT, id);"},{"lineNumber":386,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":387,"author":{"gitId":"-"},"content":""},{"lineNumber":388,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":389,"author":{"gitId":"-"},"content":"     * Write rich text to editor."},{"lineNumber":390,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":391,"author":{"gitId":"-"},"content":"    protected void writeToRichTextEditor(WebElement editor, String text) {"},{"lineNumber":392,"author":{"gitId":"-"},"content":"        waitForElementPresence(By.tagName(\"iframe\"));"},{"lineNumber":393,"author":{"gitId":"-"},"content":"        String id \u003d editor.findElement(By.tagName(\"textarea\")).getAttribute(\"id\");"},{"lineNumber":394,"author":{"gitId":"-"},"content":"        ((JavascriptExecutor) browser.driver).executeAsyncScript(WRITE_TO_TINYMCE_SCRIPT, id, text);"},{"lineNumber":395,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":396,"author":{"gitId":"-"},"content":""},{"lineNumber":397,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":398,"author":{"gitId":"-"},"content":"     * Select the option, if it is not already selected."},{"lineNumber":399,"author":{"gitId":"-"},"content":"     * No action taken if it is already selected."},{"lineNumber":400,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":401,"author":{"gitId":"-"},"content":"    protected void markOptionAsSelected(WebElement option) {"},{"lineNumber":402,"author":{"gitId":"-"},"content":"        waitForElementVisibility(option);"},{"lineNumber":403,"author":{"gitId":"-"},"content":"        if (!option.isSelected()) {"},{"lineNumber":404,"author":{"gitId":"-"},"content":"            click(option);"},{"lineNumber":405,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":406,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":407,"author":{"gitId":"-"},"content":""},{"lineNumber":408,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":409,"author":{"gitId":"-"},"content":"     * Unselect the option, if it is not already unselected."},{"lineNumber":410,"author":{"gitId":"-"},"content":"     * No action taken if it is already unselected\u0027."},{"lineNumber":411,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":412,"author":{"gitId":"-"},"content":"    protected void markOptionAsUnselected(WebElement option) {"},{"lineNumber":413,"author":{"gitId":"-"},"content":"        waitForElementVisibility(option);"},{"lineNumber":414,"author":{"gitId":"-"},"content":"        if (option.isSelected()) {"},{"lineNumber":415,"author":{"gitId":"-"},"content":"            click(option);"},{"lineNumber":416,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":417,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":418,"author":{"gitId":"-"},"content":""},{"lineNumber":419,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":420,"author":{"gitId":"-"},"content":"     * Returns the text of the option selected in the dropdown."},{"lineNumber":421,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":422,"author":{"gitId":"-"},"content":"    protected String getSelectedDropdownOptionText(WebElement dropdown) {"},{"lineNumber":423,"author":{"gitId":"-"},"content":"        Select select \u003d new Select(dropdown);"},{"lineNumber":424,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":425,"author":{"gitId":"-"},"content":"            uiRetryManager.runUntilNoRecognizedException(new Retryable(\"Wait for dropdown text to load\") {"},{"lineNumber":426,"author":{"gitId":"-"},"content":"                @Override"},{"lineNumber":427,"author":{"gitId":"-"},"content":"                public void run() {"},{"lineNumber":428,"author":{"gitId":"-"},"content":"                    String txt \u003d select.getFirstSelectedOption().getText();"},{"lineNumber":429,"author":{"gitId":"-"},"content":"                    assertNotEquals(\"\", txt);"},{"lineNumber":430,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":431,"author":{"gitId":"-"},"content":"            }, WebDriverException.class, AssertionError.class);"},{"lineNumber":432,"author":{"gitId":"-"},"content":"            return select.getFirstSelectedOption().getText();"},{"lineNumber":433,"author":{"gitId":"-"},"content":"        } catch (MaximumRetriesExceededException e) {"},{"lineNumber":434,"author":{"gitId":"-"},"content":"            return select.getFirstSelectedOption().getText();"},{"lineNumber":435,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":436,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":437,"author":{"gitId":"-"},"content":""},{"lineNumber":438,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":439,"author":{"gitId":"-"},"content":"     * Selects option in dropdown based on visible text."},{"lineNumber":440,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":441,"author":{"gitId":"-"},"content":"    protected void selectDropdownOptionByText(WebElement dropdown, String text) {"},{"lineNumber":442,"author":{"gitId":"-"},"content":"        scrollElementToCenter(dropdown);"},{"lineNumber":443,"author":{"gitId":"-"},"content":"        Select select \u003d new Select(dropdown);"},{"lineNumber":444,"author":{"gitId":"-"},"content":"        select.selectByVisibleText(text);"},{"lineNumber":445,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":446,"author":{"gitId":"-"},"content":""},{"lineNumber":447,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":448,"author":{"gitId":"-"},"content":"     * Selects option in dropdown based on value."},{"lineNumber":449,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":450,"author":{"gitId":"-"},"content":"    protected void selectDropdownOptionByValue(WebElement dropdown, String value) {"},{"lineNumber":451,"author":{"gitId":"-"},"content":"        scrollElementToCenter(dropdown);"},{"lineNumber":452,"author":{"gitId":"-"},"content":"        Select select \u003d new Select(dropdown);"},{"lineNumber":453,"author":{"gitId":"-"},"content":"        select.selectByValue(value);"},{"lineNumber":454,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":455,"author":{"gitId":"-"},"content":""},{"lineNumber":456,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":457,"author":{"gitId":"-"},"content":"     * Asserts that all values in the body of the given table are equal to the expectedTableBodyValues."},{"lineNumber":458,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":459,"author":{"gitId":"-"},"content":"    protected void verifyTableBodyValues(WebElement table, String[][] expectedTableBodyValues) {"},{"lineNumber":460,"author":{"gitId":"-"},"content":"        List\u003cWebElement\u003e rows \u003d table.findElement(By.tagName(\"tbody\")).findElements(By.tagName(\"tr\"));"},{"lineNumber":461,"author":{"gitId":"-"},"content":"        assertTrue(expectedTableBodyValues.length \u003c\u003d rows.size());"},{"lineNumber":462,"author":{"gitId":"-"},"content":"        for (int rowIndex \u003d 0; rowIndex \u003c expectedTableBodyValues.length; rowIndex++) {"},{"lineNumber":463,"author":{"gitId":"-"},"content":"            verifyTableRowValues(rows.get(rowIndex), expectedTableBodyValues[rowIndex]);"},{"lineNumber":464,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":465,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":466,"author":{"gitId":"-"},"content":""},{"lineNumber":467,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":468,"author":{"gitId":"jasonqiu212"},"content":"     * Asserts that all values in the row header of the given table are equal to the expectedRowHeaderValues."},{"lineNumber":469,"author":{"gitId":"jasonqiu212"},"content":"     */"},{"lineNumber":470,"author":{"gitId":"jasonqiu212"},"content":"    protected void verifyTableRowHeaderValues(WebElement table, String[][] expectedTableRowHeaderValues) {"},{"lineNumber":471,"author":{"gitId":"jasonqiu212"},"content":"        List\u003cWebElement\u003e rows \u003d table.findElement(By.tagName(\"thead\")).findElements(By.tagName(\"tr\"));"},{"lineNumber":472,"author":{"gitId":"jasonqiu212"},"content":"        assertTrue(expectedTableRowHeaderValues.length \u003c\u003d rows.size());"},{"lineNumber":473,"author":{"gitId":"jasonqiu212"},"content":"        for (int rowIndex \u003d 0; rowIndex \u003c expectedTableRowHeaderValues.length; rowIndex++) {"},{"lineNumber":474,"author":{"gitId":"jasonqiu212"},"content":"            verifyTableHeaderValues(rows.get(rowIndex), expectedTableRowHeaderValues[rowIndex]);"},{"lineNumber":475,"author":{"gitId":"jasonqiu212"},"content":"        }"},{"lineNumber":476,"author":{"gitId":"jasonqiu212"},"content":"    }"},{"lineNumber":477,"author":{"gitId":"jasonqiu212"},"content":""},{"lineNumber":478,"author":{"gitId":"jasonqiu212"},"content":"    /**"},{"lineNumber":479,"author":{"gitId":"jasonqiu212"},"content":"     * Asserts that all values in the column header of the given table are equal to the expectedTablColumnHeaderValues."},{"lineNumber":480,"author":{"gitId":"jasonqiu212"},"content":"     */"},{"lineNumber":481,"author":{"gitId":"jasonqiu212"},"content":"    protected void verifyTableColumnHeaderValues(WebElement table, String[][] expectedTablColumnHeaderValues) {"},{"lineNumber":482,"author":{"gitId":"jasonqiu212"},"content":"        List\u003cWebElement\u003e rows \u003d table.findElement(By.tagName(\"tbody\")).findElements(By.tagName(\"tr\"));"},{"lineNumber":483,"author":{"gitId":"jasonqiu212"},"content":"        assertTrue(expectedTablColumnHeaderValues.length \u003c\u003d rows.size());"},{"lineNumber":484,"author":{"gitId":"jasonqiu212"},"content":"        for (int rowIndex \u003d 0; rowIndex \u003c expectedTablColumnHeaderValues.length; rowIndex++) {"},{"lineNumber":485,"author":{"gitId":"jasonqiu212"},"content":"            verifyTableHeaderValues(rows.get(rowIndex), expectedTablColumnHeaderValues[rowIndex]);"},{"lineNumber":486,"author":{"gitId":"jasonqiu212"},"content":"        }"},{"lineNumber":487,"author":{"gitId":"jasonqiu212"},"content":"    }"},{"lineNumber":488,"author":{"gitId":"jasonqiu212"},"content":""},{"lineNumber":489,"author":{"gitId":"jasonqiu212"},"content":"    /**"},{"lineNumber":490,"author":{"gitId":"jasonqiu212"},"content":"     * Asserts that all data values in the given table row are equal to the expectedRowValues."},{"lineNumber":491,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":492,"author":{"gitId":"-"},"content":"    protected void verifyTableRowValues(WebElement row, String[] expectedRowValues) {"},{"lineNumber":493,"author":{"gitId":"-"},"content":"        List\u003cWebElement\u003e cells \u003d row.findElements(By.tagName(\"td\"));"},{"lineNumber":494,"author":{"gitId":"-"},"content":"        assertTrue(expectedRowValues.length \u003c\u003d cells.size());"},{"lineNumber":495,"author":{"gitId":"-"},"content":"        for (int cellIndex \u003d 0; cellIndex \u003c expectedRowValues.length; cellIndex++) {"},{"lineNumber":496,"author":{"gitId":"-"},"content":"            assertEquals(expectedRowValues[cellIndex], cells.get(cellIndex).getText());"},{"lineNumber":497,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":498,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":499,"author":{"gitId":"-"},"content":""},{"lineNumber":500,"author":{"gitId":"jasonqiu212"},"content":"    /**"},{"lineNumber":501,"author":{"gitId":"jasonqiu212"},"content":"     * Asserts that all header values in the given table row are equal to the expectedRowHeaderValues."},{"lineNumber":502,"author":{"gitId":"jasonqiu212"},"content":"     */"},{"lineNumber":503,"author":{"gitId":"jasonqiu212"},"content":"    protected void verifyTableHeaderValues(WebElement row, String[] expectedRowHeaderValues) {"},{"lineNumber":504,"author":{"gitId":"jasonqiu212"},"content":"        List\u003cWebElement\u003e cells \u003d row.findElements(By.tagName(\"th\"));"},{"lineNumber":505,"author":{"gitId":"jasonqiu212"},"content":"        assertTrue(expectedRowHeaderValues.length \u003c\u003d cells.size());"},{"lineNumber":506,"author":{"gitId":"jasonqiu212"},"content":"        for (int cellIndex \u003d 0; cellIndex \u003c expectedRowHeaderValues.length; cellIndex++) {"},{"lineNumber":507,"author":{"gitId":"jasonqiu212"},"content":"            assertEquals(expectedRowHeaderValues[cellIndex], cells.get(cellIndex).getText());"},{"lineNumber":508,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":509,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":510,"author":{"gitId":"-"},"content":""},{"lineNumber":511,"author":{"gitId":"-"},"content":"    public void verifyBannerContent(NotificationAttributes expected) {"},{"lineNumber":512,"author":{"gitId":"-"},"content":"        WebElement banner \u003d browser.driver.findElement(By.className(\"banner\"));"},{"lineNumber":513,"author":{"gitId":"-"},"content":"        String title \u003d banner.findElement(By.tagName(\"h5\")).getText();"},{"lineNumber":514,"author":{"gitId":"-"},"content":"        String message \u003d banner.findElement(By.className(\"banner-text\")).getAttribute(\"innerHTML\");"},{"lineNumber":515,"author":{"gitId":"-"},"content":"        assertEquals(expected.getTitle(), title);"},{"lineNumber":516,"author":{"gitId":"-"},"content":"        assertEquals(expected.getMessage(), message);"},{"lineNumber":517,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":518,"author":{"gitId":"-"},"content":""},{"lineNumber":519,"author":{"gitId":"-"},"content":"    public boolean isBannerVisible() {"},{"lineNumber":520,"author":{"gitId":"-"},"content":"        return isElementVisible(By.className(\"banner\"));"},{"lineNumber":521,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":522,"author":{"gitId":"-"},"content":""},{"lineNumber":523,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":524,"author":{"gitId":"-"},"content":"     * Clicks the element and clicks \u0027Yes\u0027 in the follow up dialog box."},{"lineNumber":525,"author":{"gitId":"-"},"content":"     * Fails if there is no dialog box."},{"lineNumber":526,"author":{"gitId":"-"},"content":"     * @return the resulting page."},{"lineNumber":527,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":528,"author":{"gitId":"-"},"content":"    public AppPage clickAndConfirm(WebElement elementToClick) {"},{"lineNumber":529,"author":{"gitId":"-"},"content":"        click(elementToClick);"},{"lineNumber":530,"author":{"gitId":"-"},"content":"        waitForConfirmationModalAndClickOk();"},{"lineNumber":531,"author":{"gitId":"-"},"content":"        return this;"},{"lineNumber":532,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":533,"author":{"gitId":"-"},"content":""},{"lineNumber":534,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":535,"author":{"gitId":"-"},"content":"     * Returns True if the page contains some basic elements expected in a page of the"},{"lineNumber":536,"author":{"gitId":"-"},"content":"     *         specific type. e.g., the top heading."},{"lineNumber":537,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":538,"author":{"gitId":"-"},"content":"    protected abstract boolean containsExpectedPageContents();"},{"lineNumber":539,"author":{"gitId":"-"},"content":""},{"lineNumber":540,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":541,"author":{"gitId":"-"},"content":"     * Returns True if there is a corresponding element for the given locator."},{"lineNumber":542,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":543,"author":{"gitId":"-"},"content":"    public boolean isElementPresent(By by) {"},{"lineNumber":544,"author":{"gitId":"-"},"content":"        return browser.driver.findElements(by).size() !\u003d 0;"},{"lineNumber":545,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":546,"author":{"gitId":"-"},"content":""},{"lineNumber":547,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":548,"author":{"gitId":"-"},"content":"     * Returns True if there is a corresponding element for the given id or name."},{"lineNumber":549,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":550,"author":{"gitId":"-"},"content":"    public boolean isElementPresent(String elementId) {"},{"lineNumber":551,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":552,"author":{"gitId":"-"},"content":"            browser.driver.findElement(By.id(elementId));"},{"lineNumber":553,"author":{"gitId":"-"},"content":"            return true;"},{"lineNumber":554,"author":{"gitId":"-"},"content":"        } catch (NoSuchElementException e) {"},{"lineNumber":555,"author":{"gitId":"-"},"content":"            return false;"},{"lineNumber":556,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":557,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":558,"author":{"gitId":"-"},"content":""},{"lineNumber":559,"author":{"gitId":"-"},"content":"    public boolean isElementVisible(By by) {"},{"lineNumber":560,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":561,"author":{"gitId":"-"},"content":"            return browser.driver.findElement(by).isDisplayed();"},{"lineNumber":562,"author":{"gitId":"-"},"content":"        } catch (NoSuchElementException e) {"},{"lineNumber":563,"author":{"gitId":"-"},"content":"            return false;"},{"lineNumber":564,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":565,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":566,"author":{"gitId":"-"},"content":""},{"lineNumber":567,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":568,"author":{"gitId":"-"},"content":"     * Returns true if the expected condition is evaluated to true immediately."},{"lineNumber":569,"author":{"gitId":"-"},"content":"     * @see ExpectedConditions"},{"lineNumber":570,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":571,"author":{"gitId":"-"},"content":"    private boolean isExpectedCondition(ExpectedCondition\u003c?\u003e expectedCondition) {"},{"lineNumber":572,"author":{"gitId":"-"},"content":"        Object value \u003d expectedCondition.apply(browser.driver);"},{"lineNumber":573,"author":{"gitId":"-"},"content":"        if (value \u003d\u003d null) {"},{"lineNumber":574,"author":{"gitId":"-"},"content":"            return false;"},{"lineNumber":575,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":576,"author":{"gitId":"-"},"content":""},{"lineNumber":577,"author":{"gitId":"-"},"content":"        if (value.getClass() \u003d\u003d Boolean.class) {"},{"lineNumber":578,"author":{"gitId":"-"},"content":"            return (boolean) value;"},{"lineNumber":579,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":580,"author":{"gitId":"-"},"content":"            return true;"},{"lineNumber":581,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":582,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":583,"author":{"gitId":"-"},"content":""},{"lineNumber":584,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":585,"author":{"gitId":"-"},"content":"     * Clicks a button (can be inside or outside the modal) that dismisses the modal and waits for the modal to be hidden."},{"lineNumber":586,"author":{"gitId":"-"},"content":"     * The caller must ensure the button is in the modal or a timeout will occur while waiting for the modal to be hidden."},{"lineNumber":587,"author":{"gitId":"-"},"content":"     * @param dismissModalButton a button that dismisses the modal"},{"lineNumber":588,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":589,"author":{"gitId":"-"},"content":"    public void clickDismissModalButtonAndWaitForModalHidden(WebElement dismissModalButton) {"},{"lineNumber":590,"author":{"gitId":"-"},"content":"        // Note: Should first check if the button can actually dismiss the modal otherwise the state will be consistent."},{"lineNumber":591,"author":{"gitId":"-"},"content":"        // However, it is too difficult to check."},{"lineNumber":592,"author":{"gitId":"-"},"content":""},{"lineNumber":593,"author":{"gitId":"-"},"content":"        WebElement modalBackdrop \u003d browser.driver.findElement(By.className(\"modal-backdrop\"));"},{"lineNumber":594,"author":{"gitId":"-"},"content":""},{"lineNumber":595,"author":{"gitId":"-"},"content":"        click(dismissModalButton);"},{"lineNumber":596,"author":{"gitId":"-"},"content":"        waitForModalHidden(modalBackdrop);"},{"lineNumber":597,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":598,"author":{"gitId":"-"},"content":""},{"lineNumber":599,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":600,"author":{"gitId":"-"},"content":"     * Scrolls element to center and clicks on it."},{"lineNumber":601,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":602,"author":{"gitId":"-"},"content":"     * \u003cp\u003eAs compared to {@link org.openqa.selenium.interactions.Actions#moveToElement(WebElement)}, this method is"},{"lineNumber":603,"author":{"gitId":"-"},"content":"     * more reliable as the element will not get blocked by elements such as the header."},{"lineNumber":604,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":605,"author":{"gitId":"-"},"content":"     * \u003cp\u003eFurthermore, {@link org.openqa.selenium.interactions.Actions#moveToElement(WebElement)} is currently not"},{"lineNumber":606,"author":{"gitId":"-"},"content":"     * working in Geckodriver."},{"lineNumber":607,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":608,"author":{"gitId":"-"},"content":"     * \u003cp\u003e\u003cb\u003eNote:\u003c/b\u003e A \"scroll into view\" Actions primitive is in progress and may allow scrolling element to center."},{"lineNumber":609,"author":{"gitId":"-"},"content":"     * Tracking issue:"},{"lineNumber":610,"author":{"gitId":"-"},"content":"     * \u003ca href\u003d\"https://github.com/w3c/webdriver/issues/1005\"\u003eMissing \"scroll into view\" Actions primitive\u003c/a\u003e."},{"lineNumber":611,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":612,"author":{"gitId":"-"},"content":"     * \u003cp\u003eAlso note that there are some other caveats, for example"},{"lineNumber":613,"author":{"gitId":"-"},"content":"     * {@code new Actions(browser.driver).moveToElement(...).click(...).perform()} does not behave consistently across"},{"lineNumber":614,"author":{"gitId":"-"},"content":"     * browsers."},{"lineNumber":615,"author":{"gitId":"-"},"content":"     * \u003cul\u003e"},{"lineNumber":616,"author":{"gitId":"-"},"content":"     * \u003cli\u003eIn FirefoxDriver, the element is scrolled to and then a click is attempted on the element."},{"lineNumber":617,"author":{"gitId":"-"},"content":"     * \u003cli\u003eIn ChromeDriver, the mouse is scrolled to the element and then a click is attempted on the mouse coordinate,"},{"lineNumber":618,"author":{"gitId":"-"},"content":"     * which means another element can actually be clicked (such as the header or a blocking pop-up)."},{"lineNumber":619,"author":{"gitId":"-"},"content":"     * \u003c/ul\u003e"},{"lineNumber":620,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":621,"author":{"gitId":"-"},"content":"     * \u003cp\u003eChromeDriver also automatically scrolls to an element when clicking an element if it is not in the viewport."},{"lineNumber":622,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":623,"author":{"gitId":"-"},"content":"    void scrollElementToCenterAndClick(WebElement element) {"},{"lineNumber":624,"author":{"gitId":"-"},"content":"        // TODO: migrate to `scrollIntoView` when Geckodriver is adopted"},{"lineNumber":625,"author":{"gitId":"-"},"content":"        scrollElementToCenter(element);"},{"lineNumber":626,"author":{"gitId":"-"},"content":"        element.click();"},{"lineNumber":627,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":628,"author":{"gitId":"-"},"content":""},{"lineNumber":629,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":630,"author":{"gitId":"-"},"content":"     * Scrolls element to center."},{"lineNumber":631,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":632,"author":{"gitId":"-"},"content":"    void scrollElementToCenter(WebElement element) {"},{"lineNumber":633,"author":{"gitId":"-"},"content":"        executeScript(SCROLL_ELEMENT_TO_CENTER_AND_CLICK_SCRIPT, element);"},{"lineNumber":634,"author":{"gitId":"-"},"content":"        ThreadHelper.waitFor(1000);"},{"lineNumber":635,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":636,"author":{"gitId":"-"},"content":""},{"lineNumber":637,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":638,"author":{"gitId":"-"},"content":"     * Asserts message in toast is equal to the expected message."},{"lineNumber":639,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":640,"author":{"gitId":"-"},"content":"    public void verifyStatusMessage(String expectedMessage) {"},{"lineNumber":641,"author":{"gitId":"-"},"content":"        verifyStatusMessageWithLinks(expectedMessage, new String[] {});"},{"lineNumber":642,"author":{"gitId":"-"},"content":"        closeToast();"},{"lineNumber":643,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":644,"author":{"gitId":"-"},"content":""},{"lineNumber":645,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":646,"author":{"gitId":"-"},"content":"     * Asserts message in toast is equal to the expected message and contains the expected links."},{"lineNumber":647,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":648,"author":{"gitId":"-"},"content":"    public void verifyStatusMessageWithLinks(String expectedMessage, String[] expectedLinks) {"},{"lineNumber":649,"author":{"gitId":"-"},"content":"        WebElement[] statusMessage \u003d new WebElement[1];"},{"lineNumber":650,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":651,"author":{"gitId":"-"},"content":"            uiRetryManager.runUntilNoRecognizedException(new Retryable(\"Verify status to user\") {"},{"lineNumber":652,"author":{"gitId":"-"},"content":"                @Override"},{"lineNumber":653,"author":{"gitId":"-"},"content":"                public void run() {"},{"lineNumber":654,"author":{"gitId":"-"},"content":"                    statusMessage[0] \u003d waitForElementPresence(By.className(\"toast-body\"));"},{"lineNumber":655,"author":{"gitId":"-"},"content":"                    assertEquals(expectedMessage, statusMessage[0].getText());"},{"lineNumber":656,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":657,"author":{"gitId":"-"},"content":"            }, WebDriverException.class, AssertionError.class);"},{"lineNumber":658,"author":{"gitId":"-"},"content":"        } catch (MaximumRetriesExceededException e) {"},{"lineNumber":659,"author":{"gitId":"-"},"content":"            statusMessage[0] \u003d waitForElementPresence(By.className(\"toast-body\"));"},{"lineNumber":660,"author":{"gitId":"-"},"content":"            assertEquals(expectedMessage, statusMessage[0].getText());"},{"lineNumber":661,"author":{"gitId":"-"},"content":"        } finally {"},{"lineNumber":662,"author":{"gitId":"-"},"content":"            if (expectedLinks.length \u003e 0) {"},{"lineNumber":663,"author":{"gitId":"-"},"content":"                List\u003cWebElement\u003e actualLinks \u003d statusMessage[0].findElements(By.tagName(\"a\"));"},{"lineNumber":664,"author":{"gitId":"-"},"content":"                for (int i \u003d 0; i \u003c expectedLinks.length; i++) {"},{"lineNumber":665,"author":{"gitId":"-"},"content":"                    assertTrue(actualLinks.get(i).getAttribute(\"href\").contains(expectedLinks[i]));"},{"lineNumber":666,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":667,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":668,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":669,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":670,"author":{"gitId":"-"},"content":""},{"lineNumber":671,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":672,"author":{"gitId":"-"},"content":"     * Closes toast message."},{"lineNumber":673,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":674,"author":{"gitId":"-"},"content":"    public void closeToast() {"},{"lineNumber":675,"author":{"gitId":"-"},"content":"        WebElement toastCloseButton \u003d waitForElementPresence(By.className(\"btn-close\"));"},{"lineNumber":676,"author":{"gitId":"-"},"content":"        click(toastCloseButton);"},{"lineNumber":677,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":678,"author":{"gitId":"-"},"content":""},{"lineNumber":679,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":680,"author":{"gitId":"-"},"content":"     * Switches to the new browser window just opened."},{"lineNumber":681,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":682,"author":{"gitId":"-"},"content":"    protected void switchToNewWindow() {"},{"lineNumber":683,"author":{"gitId":"-"},"content":"        browser.switchToNewWindow();"},{"lineNumber":684,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":685,"author":{"gitId":"-"},"content":""},{"lineNumber":686,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":687,"author":{"gitId":"-"},"content":"     * Closes current window and switches back to parent window."},{"lineNumber":688,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":689,"author":{"gitId":"-"},"content":"    public void closeCurrentWindowAndSwitchToParentWindow() {"},{"lineNumber":690,"author":{"gitId":"-"},"content":"        browser.closeCurrentWindowAndSwitchToParentWindow();"},{"lineNumber":691,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":692,"author":{"gitId":"-"},"content":""},{"lineNumber":693,"author":{"gitId":"-"},"content":"    String getDisplayGiverName(FeedbackParticipantType type) {"},{"lineNumber":694,"author":{"gitId":"-"},"content":"        switch (type) {"},{"lineNumber":695,"author":{"gitId":"-"},"content":"        case SELF:"},{"lineNumber":696,"author":{"gitId":"-"},"content":"            return \"Feedback session creator (i.e., me)\";"},{"lineNumber":697,"author":{"gitId":"-"},"content":"        case STUDENTS:"},{"lineNumber":698,"author":{"gitId":"-"},"content":"            return \"Students in this course\";"},{"lineNumber":699,"author":{"gitId":"-"},"content":"        case INSTRUCTORS:"},{"lineNumber":700,"author":{"gitId":"-"},"content":"            return \"Instructors in this course\";"},{"lineNumber":701,"author":{"gitId":"-"},"content":"        case TEAMS:"},{"lineNumber":702,"author":{"gitId":"-"},"content":"            return \"Teams in this course\";"},{"lineNumber":703,"author":{"gitId":"-"},"content":"        default:"},{"lineNumber":704,"author":{"gitId":"-"},"content":"            throw new IllegalArgumentException(\"Unknown FeedbackParticipantType: \" + type);"},{"lineNumber":705,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":706,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":707,"author":{"gitId":"-"},"content":""},{"lineNumber":708,"author":{"gitId":"-"},"content":"    String getDisplayRecipientName(FeedbackParticipantType type) {"},{"lineNumber":709,"author":{"gitId":"-"},"content":"        switch (type) {"},{"lineNumber":710,"author":{"gitId":"-"},"content":"        case SELF:"},{"lineNumber":711,"author":{"gitId":"-"},"content":"            return \"Giver (Self feedback)\";"},{"lineNumber":712,"author":{"gitId":"-"},"content":"        case STUDENTS_IN_SAME_SECTION:"},{"lineNumber":713,"author":{"gitId":"-"},"content":"            return \"Other students in the same section\";"},{"lineNumber":714,"author":{"gitId":"-"},"content":"        case STUDENTS:"},{"lineNumber":715,"author":{"gitId":"-"},"content":"            return \"Students in the course\";"},{"lineNumber":716,"author":{"gitId":"-"},"content":"        case STUDENTS_EXCLUDING_SELF:"},{"lineNumber":717,"author":{"gitId":"-"},"content":"            return \"Other students in the course\";"},{"lineNumber":718,"author":{"gitId":"-"},"content":"        case INSTRUCTORS:"},{"lineNumber":719,"author":{"gitId":"-"},"content":"            return \"Instructors in the course\";"},{"lineNumber":720,"author":{"gitId":"-"},"content":"        case TEAMS_IN_SAME_SECTION:"},{"lineNumber":721,"author":{"gitId":"-"},"content":"            return \"Other teams in the same section\";"},{"lineNumber":722,"author":{"gitId":"-"},"content":"        case TEAMS:"},{"lineNumber":723,"author":{"gitId":"-"},"content":"            return \"Teams in the course\";"},{"lineNumber":724,"author":{"gitId":"-"},"content":"        case TEAMS_EXCLUDING_SELF:"},{"lineNumber":725,"author":{"gitId":"-"},"content":"            return \"Other teams in the course\";"},{"lineNumber":726,"author":{"gitId":"-"},"content":"        case OWN_TEAM:"},{"lineNumber":727,"author":{"gitId":"-"},"content":"            return \"Giver\u0027s team\";"},{"lineNumber":728,"author":{"gitId":"-"},"content":"        case OWN_TEAM_MEMBERS:"},{"lineNumber":729,"author":{"gitId":"-"},"content":"            return \"Giver\u0027s team members\";"},{"lineNumber":730,"author":{"gitId":"-"},"content":"        case OWN_TEAM_MEMBERS_INCLUDING_SELF:"},{"lineNumber":731,"author":{"gitId":"-"},"content":"            return \"Giver\u0027s team members and Giver\";"},{"lineNumber":732,"author":{"gitId":"-"},"content":"        case NONE:"},{"lineNumber":733,"author":{"gitId":"-"},"content":"            return \"Nobody specific (For general class feedback)\";"},{"lineNumber":734,"author":{"gitId":"-"},"content":"        default:"},{"lineNumber":735,"author":{"gitId":"-"},"content":"            throw new IllegalArgumentException(\"Unknown FeedbackParticipantType: \" + type);"},{"lineNumber":736,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":737,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":738,"author":{"gitId":"-"},"content":""},{"lineNumber":739,"author":{"gitId":"-"},"content":"    String getDisplayedDateTime(Instant instant, String timeZone, String pattern) {"},{"lineNumber":740,"author":{"gitId":"-"},"content":"        ZonedDateTime zonedDateTime \u003d TimeHelper.getMidnightAdjustedInstantBasedOnZone(instant, timeZone, false)"},{"lineNumber":741,"author":{"gitId":"-"},"content":"                .atZone(ZoneId.of(timeZone));"},{"lineNumber":742,"author":{"gitId":"-"},"content":"        return DateTimeFormatter.ofPattern(pattern).format(zonedDateTime);"},{"lineNumber":743,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":744,"author":{"gitId":"-"},"content":""},{"lineNumber":745,"author":{"gitId":"-"},"content":"    private String getFullDateString(Instant instant, String timeZone) {"},{"lineNumber":746,"author":{"gitId":"-"},"content":"        return getDisplayedDateTime(instant, timeZone, \"EEEE, MMMM d, yyyy\");"},{"lineNumber":747,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":748,"author":{"gitId":"-"},"content":""},{"lineNumber":749,"author":{"gitId":"-"},"content":"    private String getYearString(Instant instant, String timeZone) {"},{"lineNumber":750,"author":{"gitId":"-"},"content":"        return getDisplayedDateTime(instant, timeZone, \"yyyy\");"},{"lineNumber":751,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":752,"author":{"gitId":"-"},"content":""},{"lineNumber":753,"author":{"gitId":"-"},"content":"    private String getMonthString(Instant instant, String timeZone) {"},{"lineNumber":754,"author":{"gitId":"-"},"content":"        return getDisplayedDateTime(instant, timeZone, \"MMM\");"},{"lineNumber":755,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":756,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"jasonqiu212":31,"-":725}},{"path":"src/e2e/java/teammates/e2e/pageobjects/FeedbackResultsPage.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.e2e.pageobjects;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import static org.junit.Assert.assertEquals;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import static org.junit.Assert.assertTrue;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import static org.junit.Assert.fail;"},{"lineNumber":6,"author":{"gitId":"-"},"content":""},{"lineNumber":7,"author":{"gitId":"-"},"content":"import java.time.Instant;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import java.util.ArrayList;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import java.util.Comparator;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import java.util.Set;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import java.util.stream.Collectors;"},{"lineNumber":13,"author":{"gitId":"-"},"content":""},{"lineNumber":14,"author":{"gitId":"-"},"content":"import org.openqa.selenium.By;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import org.openqa.selenium.NoSuchElementException;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"import org.openqa.selenium.WebElement;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"import org.openqa.selenium.support.FindBy;"},{"lineNumber":18,"author":{"gitId":"-"},"content":""},{"lineNumber":19,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.FeedbackParticipantType;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.CourseAttributes;"},{"lineNumber":21,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;"},{"lineNumber":22,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackResponseAttributes;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackSessionAttributes;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackConstantSumQuestionDetails;"},{"lineNumber":25,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackConstantSumResponseDetails;"},{"lineNumber":26,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackMcqQuestionDetails;"},{"lineNumber":27,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackMsqQuestionDetails;"},{"lineNumber":28,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackNumericalScaleQuestionDetails;"},{"lineNumber":29,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackQuestionType;"},{"lineNumber":30,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackRankOptionsQuestionDetails;"},{"lineNumber":31,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackRankOptionsResponseDetails;"},{"lineNumber":32,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackResponseDetails;"},{"lineNumber":33,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackRubricQuestionDetails;"},{"lineNumber":34,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackRubricResponseDetails;"},{"lineNumber":35,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":36,"author":{"gitId":"-"},"content":"import teammates.e2e.util.TestProperties;"},{"lineNumber":37,"author":{"gitId":"-"},"content":""},{"lineNumber":38,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":39,"author":{"gitId":"-"},"content":" * Page Object Model for feedback results page."},{"lineNumber":40,"author":{"gitId":"-"},"content":" */"},{"lineNumber":41,"author":{"gitId":"-"},"content":"public class FeedbackResultsPage extends AppPage {"},{"lineNumber":42,"author":{"gitId":"-"},"content":"    private static final String CURRENT_STUDENT_IDENTIFIER \u003d \"You\";"},{"lineNumber":43,"author":{"gitId":"-"},"content":""},{"lineNumber":44,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"course-id\")"},{"lineNumber":45,"author":{"gitId":"-"},"content":"    private WebElement courseId;"},{"lineNumber":46,"author":{"gitId":"-"},"content":""},{"lineNumber":47,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"course-name\")"},{"lineNumber":48,"author":{"gitId":"-"},"content":"    private WebElement courseName;"},{"lineNumber":49,"author":{"gitId":"-"},"content":""},{"lineNumber":50,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"course-institute\")"},{"lineNumber":51,"author":{"gitId":"-"},"content":"    private WebElement courseInstitute;"},{"lineNumber":52,"author":{"gitId":"-"},"content":""},{"lineNumber":53,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"session-name\")"},{"lineNumber":54,"author":{"gitId":"-"},"content":"    private WebElement sessionName;"},{"lineNumber":55,"author":{"gitId":"-"},"content":""},{"lineNumber":56,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"opening-time\")"},{"lineNumber":57,"author":{"gitId":"-"},"content":"    private WebElement sessionOpeningTime;"},{"lineNumber":58,"author":{"gitId":"-"},"content":""},{"lineNumber":59,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"closing-time\")"},{"lineNumber":60,"author":{"gitId":"-"},"content":"    private WebElement sessionClosingTime;"},{"lineNumber":61,"author":{"gitId":"-"},"content":""},{"lineNumber":62,"author":{"gitId":"-"},"content":"    public FeedbackResultsPage(Browser browser) {"},{"lineNumber":63,"author":{"gitId":"-"},"content":"        super(browser);"},{"lineNumber":64,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":65,"author":{"gitId":"-"},"content":""},{"lineNumber":66,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":67,"author":{"gitId":"-"},"content":"    protected boolean containsExpectedPageContents() {"},{"lineNumber":68,"author":{"gitId":"-"},"content":"        return getPageTitle().contains(\"Feedback Session Results\");"},{"lineNumber":69,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":70,"author":{"gitId":"-"},"content":""},{"lineNumber":71,"author":{"gitId":"-"},"content":"    public void verifyFeedbackSessionDetails(FeedbackSessionAttributes feedbackSession, CourseAttributes course) {"},{"lineNumber":72,"author":{"gitId":"-"},"content":"        assertEquals(getCourseId(), feedbackSession.getCourseId());"},{"lineNumber":73,"author":{"gitId":"-"},"content":"        assertEquals(getCourseName(), course.getName());"},{"lineNumber":74,"author":{"gitId":"-"},"content":"        assertEquals(getCourseInstitute(), course.getInstitute());"},{"lineNumber":75,"author":{"gitId":"-"},"content":"        assertEquals(getFeedbackSessionName(), feedbackSession.getFeedbackSessionName());"},{"lineNumber":76,"author":{"gitId":"-"},"content":"        assertDateEquals(getOpeningTime(), feedbackSession.getStartTime(), feedbackSession.getTimeZone());"},{"lineNumber":77,"author":{"gitId":"-"},"content":"        assertDateEquals(getClosingTime(), feedbackSession.getEndTime(), feedbackSession.getTimeZone());"},{"lineNumber":78,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":79,"author":{"gitId":"-"},"content":""},{"lineNumber":80,"author":{"gitId":"-"},"content":"    public void verifyQuestionDetails(int questionNum, FeedbackQuestionAttributes question) {"},{"lineNumber":81,"author":{"gitId":"-"},"content":"        assertEquals(question.getQuestionDetailsCopy().getQuestionText(), getQuestionText(questionNum));"},{"lineNumber":82,"author":{"gitId":"-"},"content":"        if (!question.getQuestionType().equals(FeedbackQuestionType.TEXT)) {"},{"lineNumber":83,"author":{"gitId":"-"},"content":"            assertEquals(getAdditionalInfoString(question), getAdditionalInfo(questionNum));"},{"lineNumber":84,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":85,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":86,"author":{"gitId":"-"},"content":""},{"lineNumber":87,"author":{"gitId":"-"},"content":"    public void verifyResponseDetails(FeedbackQuestionAttributes question, List\u003cFeedbackResponseAttributes\u003e givenResponses,"},{"lineNumber":88,"author":{"gitId":"-"},"content":"                                      List\u003cFeedbackResponseAttributes\u003e otherResponses,"},{"lineNumber":89,"author":{"gitId":"-"},"content":"                                      Set\u003cString\u003e visibleGivers, Set\u003cString\u003e visibleRecipients) {"},{"lineNumber":90,"author":{"gitId":"-"},"content":"        if (!hasDisplayedResponses(question)) {"},{"lineNumber":91,"author":{"gitId":"-"},"content":"            return;"},{"lineNumber":92,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":93,"author":{"gitId":"-"},"content":"        verifyGivenResponses(question, givenResponses);"},{"lineNumber":94,"author":{"gitId":"-"},"content":"        verifyOtherResponses(question, otherResponses, visibleGivers, visibleRecipients);"},{"lineNumber":95,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":96,"author":{"gitId":"-"},"content":""},{"lineNumber":97,"author":{"gitId":"-"},"content":"    public void verifyQuestionNotPresent(int questionNum) {"},{"lineNumber":98,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":99,"author":{"gitId":"-"},"content":"            getQuestionResponsesSection(questionNum);"},{"lineNumber":100,"author":{"gitId":"-"},"content":"            fail(\"Question \" + questionNum + \" should not be present.\");"},{"lineNumber":101,"author":{"gitId":"-"},"content":"        } catch (NoSuchElementException e) {"},{"lineNumber":102,"author":{"gitId":"-"},"content":"            // success"},{"lineNumber":103,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":104,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":105,"author":{"gitId":"-"},"content":""},{"lineNumber":106,"author":{"gitId":"-"},"content":"    public void verifyQuestionHasResponsesNotVisibleForPreview(int questionNum) {"},{"lineNumber":107,"author":{"gitId":"-"},"content":"        verifyQuestionDoesNotShowResponses(questionNum);"},{"lineNumber":108,"author":{"gitId":"-"},"content":"        verifyNonVisibleResponseAlertPresent(questionNum);"},{"lineNumber":109,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":110,"author":{"gitId":"-"},"content":""},{"lineNumber":111,"author":{"gitId":"-"},"content":"    public void verifyQuestionHasCommentsNotVisibleForPreview(int questionNum, List\u003cString\u003e commentsNotVisible) {"},{"lineNumber":112,"author":{"gitId":"-"},"content":"        verifyQuestionDoesNotShowComments(questionNum, commentsNotVisible);"},{"lineNumber":113,"author":{"gitId":"-"},"content":"        verifyNonVisibleCommentAlertPresent(questionNum);"},{"lineNumber":114,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":115,"author":{"gitId":"-"},"content":""},{"lineNumber":116,"author":{"gitId":"-"},"content":"    public void verifyNumScaleStatistics(int questionNum, String[] expectedStats) {"},{"lineNumber":117,"author":{"gitId":"-"},"content":"        verifyTableRowValues(getNumScaleStatistics(questionNum), expectedStats);"},{"lineNumber":118,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":119,"author":{"gitId":"-"},"content":""},{"lineNumber":120,"author":{"gitId":"-"},"content":"    public void verifyRubricStatistics(int questionNum, String[][] expectedStats,"},{"lineNumber":121,"author":{"gitId":"-"},"content":"                                       String[][] expectedStatsExcludingSelf) {"},{"lineNumber":122,"author":{"gitId":"-"},"content":"        WebElement excludeSelfCheckbox \u003d getRubricExcludeSelfCheckbox(questionNum);"},{"lineNumber":123,"author":{"gitId":"-"},"content":"        markOptionAsUnselected(excludeSelfCheckbox);"},{"lineNumber":124,"author":{"gitId":"-"},"content":"        verifyTableBodyValues(getRubricStatistics(questionNum), expectedStats);"},{"lineNumber":125,"author":{"gitId":"-"},"content":""},{"lineNumber":126,"author":{"gitId":"-"},"content":"        markOptionAsSelected(excludeSelfCheckbox);"},{"lineNumber":127,"author":{"gitId":"-"},"content":"        verifyTableBodyValues(getRubricStatistics(questionNum), expectedStatsExcludingSelf);"},{"lineNumber":128,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":129,"author":{"gitId":"-"},"content":""},{"lineNumber":130,"author":{"gitId":"-"},"content":"    public void verifyContributionStatistics(int questionNum, String[] expectedStats) {"},{"lineNumber":131,"author":{"gitId":"-"},"content":"        WebElement questionSection \u003d getQuestionResponsesSection(questionNum);"},{"lineNumber":132,"author":{"gitId":"-"},"content":"        assertEquals(questionSection.findElement(By.id(\"own-view-me\")).getText(), expectedStats[0]);"},{"lineNumber":133,"author":{"gitId":"-"},"content":"        assertEquals(questionSection.findElement(By.id(\"own-view-others\")).getText().trim(), expectedStats[1]);"},{"lineNumber":134,"author":{"gitId":"-"},"content":"        assertEquals(questionSection.findElement(By.id(\"team-view-me\")).getText(), expectedStats[2]);"},{"lineNumber":135,"author":{"gitId":"-"},"content":"        assertEquals(questionSection.findElement(By.id(\"team-view-others\")).getText().trim(), expectedStats[3]);"},{"lineNumber":136,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":137,"author":{"gitId":"-"},"content":""},{"lineNumber":138,"author":{"gitId":"-"},"content":"    public void verifyCommentDetails(int questionNum, String commentGiver, String commentEditor, String commentString) {"},{"lineNumber":139,"author":{"gitId":"-"},"content":"        WebElement commentField \u003d getCommentField(questionNum, commentString);"},{"lineNumber":140,"author":{"gitId":"-"},"content":"        if (commentGiver.isEmpty()) {"},{"lineNumber":141,"author":{"gitId":"-"},"content":"            assertTrue(isCommentByResponseGiver(commentField));"},{"lineNumber":142,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":143,"author":{"gitId":"-"},"content":"            assertEquals(commentGiver, getCommentGiver(commentField));"},{"lineNumber":144,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":145,"author":{"gitId":"-"},"content":"        if (!commentEditor.isEmpty()) {"},{"lineNumber":146,"author":{"gitId":"-"},"content":"            assertEquals(commentEditor, getCommentEditor(commentField));"},{"lineNumber":147,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":148,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":149,"author":{"gitId":"-"},"content":""},{"lineNumber":150,"author":{"gitId":"-"},"content":"    private void verifyQuestionDoesNotShowResponses(int questionNum) {"},{"lineNumber":151,"author":{"gitId":"-"},"content":"        WebElement questionResponsesSection \u003d getQuestionResponsesSection(questionNum);"},{"lineNumber":152,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":153,"author":{"gitId":"-"},"content":"            questionResponsesSection.findElement(By.className(\"all-responses\"));"},{"lineNumber":154,"author":{"gitId":"-"},"content":"            fail(\"Question \" + questionNum + \" should not display any actual responses when previewing results.\");"},{"lineNumber":155,"author":{"gitId":"-"},"content":"        } catch (NoSuchElementException e) {"},{"lineNumber":156,"author":{"gitId":"-"},"content":"            // success"},{"lineNumber":157,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":158,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":159,"author":{"gitId":"-"},"content":""},{"lineNumber":160,"author":{"gitId":"-"},"content":"    private void verifyQuestionDoesNotShowComments(int questionNum, List\u003cString\u003e commentsNotVisible) {"},{"lineNumber":161,"author":{"gitId":"-"},"content":"        List\u003cWebElement\u003e commentsOfQuestion \u003d getCommentFields(questionNum);"},{"lineNumber":162,"author":{"gitId":"-"},"content":"        for (String commentString : commentsNotVisible) {"},{"lineNumber":163,"author":{"gitId":"-"},"content":"            for (WebElement comment : commentsOfQuestion) {"},{"lineNumber":164,"author":{"gitId":"-"},"content":"                if (comment.findElement(By.className(\"comment-text\")).getText().equals(commentString)) {"},{"lineNumber":165,"author":{"gitId":"-"},"content":"                    fail(\"Comment \\\"\" + commentString + \"\\\" should not be present in question \" + questionNum);"},{"lineNumber":166,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":167,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":168,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":169,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":170,"author":{"gitId":"-"},"content":""},{"lineNumber":171,"author":{"gitId":"-"},"content":"    private void verifyNonVisibleResponseAlertPresent(int questionNum) {"},{"lineNumber":172,"author":{"gitId":"-"},"content":"        WebElement questionResponsesSection \u003d getQuestionResponsesSection(questionNum);"},{"lineNumber":173,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":174,"author":{"gitId":"-"},"content":"            questionResponsesSection.findElement(By.className(\"non-visible-response-alert\"));"},{"lineNumber":175,"author":{"gitId":"-"},"content":"        } catch (NoSuchElementException e) {"},{"lineNumber":176,"author":{"gitId":"-"},"content":"            fail(\"Question \" + questionNum"},{"lineNumber":177,"author":{"gitId":"-"},"content":"                    + \" should display an alert message for hidden responses when previewing results.\");"},{"lineNumber":178,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":179,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":180,"author":{"gitId":"-"},"content":""},{"lineNumber":181,"author":{"gitId":"-"},"content":"    private void verifyNonVisibleCommentAlertPresent(int questionNum) {"},{"lineNumber":182,"author":{"gitId":"-"},"content":"        WebElement questionResponsesSection \u003d getQuestionResponsesSection(questionNum);"},{"lineNumber":183,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":184,"author":{"gitId":"-"},"content":"            questionResponsesSection.findElement(By.className(\"non-visible-comment-alert\"));"},{"lineNumber":185,"author":{"gitId":"-"},"content":"        } catch (NoSuchElementException e) {"},{"lineNumber":186,"author":{"gitId":"-"},"content":"            fail(\"Question \" + questionNum"},{"lineNumber":187,"author":{"gitId":"-"},"content":"                    + \" should display an alert message for hidden comments when previewing results.\");"},{"lineNumber":188,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":189,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":190,"author":{"gitId":"-"},"content":""},{"lineNumber":191,"author":{"gitId":"-"},"content":"    private boolean hasDisplayedResponses(FeedbackQuestionAttributes question) {"},{"lineNumber":192,"author":{"gitId":"-"},"content":"        return !question.getQuestionDetailsCopy().getQuestionType().equals(FeedbackQuestionType.CONTRIB);"},{"lineNumber":193,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":194,"author":{"gitId":"-"},"content":""},{"lineNumber":195,"author":{"gitId":"-"},"content":"    private void verifyGivenResponses(FeedbackQuestionAttributes question, List\u003cFeedbackResponseAttributes\u003e givenResponses) {"},{"lineNumber":196,"author":{"gitId":"-"},"content":"        for (FeedbackResponseAttributes response : givenResponses) {"},{"lineNumber":197,"author":{"gitId":"-"},"content":"            WebElement responseField \u003d getGivenResponseField(question.getQuestionNumber(), response.getRecipient());"},{"lineNumber":198,"author":{"gitId":"-"},"content":"            assertTrue(isResponseEqual(question, responseField, response));"},{"lineNumber":199,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":200,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":201,"author":{"gitId":"-"},"content":""},{"lineNumber":202,"author":{"gitId":"-"},"content":"    private void verifyOtherResponses(FeedbackQuestionAttributes question, List\u003cFeedbackResponseAttributes\u003e otherResponses,"},{"lineNumber":203,"author":{"gitId":"-"},"content":"                                      Set\u003cString\u003e visibleGivers, Set\u003cString\u003e visibleRecipients) {"},{"lineNumber":204,"author":{"gitId":"-"},"content":"        Set\u003cString\u003e recipients \u003d getRecipients(otherResponses);"},{"lineNumber":205,"author":{"gitId":"-"},"content":"        for (String recipient : recipients) {"},{"lineNumber":206,"author":{"gitId":"-"},"content":"            List\u003cFeedbackResponseAttributes\u003e expectedResponses \u003d otherResponses.stream()"},{"lineNumber":207,"author":{"gitId":"-"},"content":"                    .filter(r -\u003e r.getRecipient().equals(recipient)"},{"lineNumber":208,"author":{"gitId":"-"},"content":"                        \u0026\u0026 (question.isResponseVisibleTo(FeedbackParticipantType.RECEIVER)"},{"lineNumber":209,"author":{"gitId":"-"},"content":"                        || question.isResponseVisibleTo(FeedbackParticipantType.STUDENTS)"},{"lineNumber":210,"author":{"gitId":"-"},"content":"                        || question.isResponseVisibleTo(FeedbackParticipantType.OWN_TEAM_MEMBERS)"},{"lineNumber":211,"author":{"gitId":"-"},"content":"                        || question.isResponseVisibleTo(FeedbackParticipantType.RECEIVER_TEAM_MEMBERS)))"},{"lineNumber":212,"author":{"gitId":"-"},"content":"                    .collect(Collectors.toList());"},{"lineNumber":213,"author":{"gitId":"-"},"content":""},{"lineNumber":214,"author":{"gitId":"-"},"content":"            verifyResponseForRecipient(question, recipient, expectedResponses, visibleGivers, visibleRecipients);"},{"lineNumber":215,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":216,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":217,"author":{"gitId":"-"},"content":""},{"lineNumber":218,"author":{"gitId":"-"},"content":"    private Set\u003cString\u003e getRecipients(List\u003cFeedbackResponseAttributes\u003e responses) {"},{"lineNumber":219,"author":{"gitId":"-"},"content":"        return responses.stream().map(FeedbackResponseAttributes::getRecipient).collect(Collectors.toSet());"},{"lineNumber":220,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":221,"author":{"gitId":"-"},"content":""},{"lineNumber":222,"author":{"gitId":"-"},"content":"    private void verifyResponseForRecipient(FeedbackQuestionAttributes question, String recipient,"},{"lineNumber":223,"author":{"gitId":"-"},"content":"                                            List\u003cFeedbackResponseAttributes\u003e otherResponses,"},{"lineNumber":224,"author":{"gitId":"-"},"content":"                                            Set\u003cString\u003e visibleGivers, Set\u003cString\u003e visibleRecipients) {"},{"lineNumber":225,"author":{"gitId":"-"},"content":"        List\u003cWebElement\u003e responseViews \u003d getAllResponseViews(question.getQuestionNumber());"},{"lineNumber":226,"author":{"gitId":"-"},"content":"        for (FeedbackResponseAttributes response : otherResponses) {"},{"lineNumber":227,"author":{"gitId":"-"},"content":"            boolean isRecipientVisible \u003d visibleRecipients.contains(response.getGiver())"},{"lineNumber":228,"author":{"gitId":"-"},"content":"                    || CURRENT_STUDENT_IDENTIFIER.equals(recipient);"},{"lineNumber":229,"author":{"gitId":"-"},"content":"            boolean isGiverVisible \u003d visibleGivers.contains(response.getGiver())"},{"lineNumber":230,"author":{"gitId":"-"},"content":"                    || visibleGivers.contains(\"RECEIVER\") \u0026\u0026 CURRENT_STUDENT_IDENTIFIER.equals(response.getRecipient())"},{"lineNumber":231,"author":{"gitId":"-"},"content":"                    || CURRENT_STUDENT_IDENTIFIER.equals(response.getGiver());"},{"lineNumber":232,"author":{"gitId":"-"},"content":"            boolean isGiverVisibleToInstructor \u003d question.getRecipientType() \u003d\u003d FeedbackParticipantType.INSTRUCTORS"},{"lineNumber":233,"author":{"gitId":"-"},"content":"                    \u0026\u0026 visibleGivers.contains(\"INSTRUCTORS\");"},{"lineNumber":234,"author":{"gitId":"-"},"content":"            if (isRecipientVisible) {"},{"lineNumber":235,"author":{"gitId":"-"},"content":"                int recipientIndex \u003d getRecipientIndex(question.getQuestionNumber(), recipient);"},{"lineNumber":236,"author":{"gitId":"-"},"content":"                WebElement responseView \u003d responseViews.get(recipientIndex);"},{"lineNumber":237,"author":{"gitId":"-"},"content":"                List\u003cWebElement\u003e responsesFields \u003d getAllResponseFields(responseView);"},{"lineNumber":238,"author":{"gitId":"-"},"content":"                if (isGiverVisible || isGiverVisibleToInstructor) {"},{"lineNumber":239,"author":{"gitId":"-"},"content":"                    int giverIndex \u003d getGiverIndex(responseView, response.getGiver());"},{"lineNumber":240,"author":{"gitId":"-"},"content":"                    assertTrue(isResponseEqual(question, responsesFields.get(giverIndex), response));"},{"lineNumber":241,"author":{"gitId":"-"},"content":"                } else {"},{"lineNumber":242,"author":{"gitId":"-"},"content":"                    assertTrue(isAnyAnonymousResponseEqual(question, responseView, response));"},{"lineNumber":243,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":244,"author":{"gitId":"-"},"content":"            } else {"},{"lineNumber":245,"author":{"gitId":"-"},"content":"                verifyAnonymousResponseView(question, otherResponses, isGiverVisible);"},{"lineNumber":246,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":247,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":248,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":249,"author":{"gitId":"-"},"content":""},{"lineNumber":250,"author":{"gitId":"-"},"content":"    private void verifyAnonymousResponseView(FeedbackQuestionAttributes question,"},{"lineNumber":251,"author":{"gitId":"-"},"content":"                                             List\u003cFeedbackResponseAttributes\u003e expectedResponses,"},{"lineNumber":252,"author":{"gitId":"-"},"content":"                                             boolean isGiverVisible) {"},{"lineNumber":253,"author":{"gitId":"-"},"content":"        List\u003cWebElement\u003e anonymousViews \u003d getAllResponseViews(question.getQuestionNumber()).stream()"},{"lineNumber":254,"author":{"gitId":"weiquu"},"content":"                .filter(v -\u003e isAnonymous(v.findElement(By.className(\"response-recipient\")).getText()))"},{"lineNumber":255,"author":{"gitId":"-"},"content":"                .collect(Collectors.toList());"},{"lineNumber":256,"author":{"gitId":"-"},"content":"        if (anonymousViews.isEmpty()) {"},{"lineNumber":257,"author":{"gitId":"-"},"content":"            fail(\"No anonymous views found\");"},{"lineNumber":258,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":259,"author":{"gitId":"-"},"content":""},{"lineNumber":260,"author":{"gitId":"-"},"content":"        boolean hasCorrectResponses \u003d true;"},{"lineNumber":261,"author":{"gitId":"-"},"content":"        for (WebElement responseView : anonymousViews) {"},{"lineNumber":262,"author":{"gitId":"-"},"content":"            hasCorrectResponses \u003d true;"},{"lineNumber":263,"author":{"gitId":"-"},"content":"            List\u003cWebElement\u003e responseFields \u003d getAllResponseFields(responseView);"},{"lineNumber":264,"author":{"gitId":"-"},"content":"            for (FeedbackResponseAttributes response : expectedResponses) {"},{"lineNumber":265,"author":{"gitId":"-"},"content":"                if (isGiverVisible) {"},{"lineNumber":266,"author":{"gitId":"-"},"content":"                    int giverIndex \u003d getGiverIndex(responseView, response.getGiver());"},{"lineNumber":267,"author":{"gitId":"-"},"content":"                    if (!isResponseEqual(question, responseFields.get(giverIndex), response)) {"},{"lineNumber":268,"author":{"gitId":"-"},"content":"                        hasCorrectResponses \u003d false;"},{"lineNumber":269,"author":{"gitId":"-"},"content":"                        break;"},{"lineNumber":270,"author":{"gitId":"-"},"content":"                    }"},{"lineNumber":271,"author":{"gitId":"-"},"content":"                } else if (!isAnyAnonymousResponseEqual(question, responseView, response)) {"},{"lineNumber":272,"author":{"gitId":"-"},"content":"                    hasCorrectResponses \u003d false;"},{"lineNumber":273,"author":{"gitId":"-"},"content":"                    break;"},{"lineNumber":274,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":275,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":276,"author":{"gitId":"-"},"content":"            if (hasCorrectResponses) {"},{"lineNumber":277,"author":{"gitId":"-"},"content":"                break;"},{"lineNumber":278,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":279,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":280,"author":{"gitId":"-"},"content":"        assertTrue(hasCorrectResponses);"},{"lineNumber":281,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":282,"author":{"gitId":"-"},"content":""},{"lineNumber":283,"author":{"gitId":"-"},"content":"    private boolean isResponseEqual(FeedbackQuestionAttributes question, WebElement responseField,"},{"lineNumber":284,"author":{"gitId":"-"},"content":"                                    FeedbackResponseAttributes response) {"},{"lineNumber":285,"author":{"gitId":"-"},"content":"        if (question.getQuestionType().equals(FeedbackQuestionType.RUBRIC)) {"},{"lineNumber":286,"author":{"gitId":"-"},"content":"            return isRubricResponseEqual(responseField, response);"},{"lineNumber":287,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":288,"author":{"gitId":"-"},"content":"            return getAnswerString(question, response.getResponseDetailsCopy()).equals(responseField.getText());"},{"lineNumber":289,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":290,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":291,"author":{"gitId":"-"},"content":""},{"lineNumber":292,"author":{"gitId":"-"},"content":"    private boolean isRubricResponseEqual(WebElement responseField, FeedbackResponseAttributes response) {"},{"lineNumber":293,"author":{"gitId":"-"},"content":"        FeedbackRubricResponseDetails responseDetails \u003d (FeedbackRubricResponseDetails) response.getResponseDetailsCopy();"},{"lineNumber":294,"author":{"gitId":"-"},"content":"        List\u003cInteger\u003e answers \u003d responseDetails.getAnswer();"},{"lineNumber":295,"author":{"gitId":"-"},"content":"        for (int i \u003d 0; i \u003c answers.size(); i++) {"},{"lineNumber":296,"author":{"gitId":"weiquu"},"content":"            WebElement rubricTableBody \u003d responseField.findElement(By.className(\"rubric-answers\"));"},{"lineNumber":297,"author":{"gitId":"weiquu"},"content":"            WebElement rubricRow \u003d rubricTableBody.findElements(By.cssSelector(\"tr\")).get(i);"},{"lineNumber":298,"author":{"gitId":"-"},"content":"            WebElement rubricCell \u003d rubricRow.findElements(By.tagName(\"td\")).get(answers.get(i) + 1);"},{"lineNumber":299,"author":{"gitId":"-"},"content":"            if (rubricCell.findElements(By.className(\"fa-check\")).size() \u003d\u003d 0) {"},{"lineNumber":300,"author":{"gitId":"-"},"content":"                return false;"},{"lineNumber":301,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":302,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":303,"author":{"gitId":"-"},"content":"        return true;"},{"lineNumber":304,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":305,"author":{"gitId":"-"},"content":""},{"lineNumber":306,"author":{"gitId":"-"},"content":"    private boolean isAnonymous(String identifier) {"},{"lineNumber":307,"author":{"gitId":"-"},"content":"        return identifier.contains(Const.DISPLAYED_NAME_FOR_ANONYMOUS_PARTICIPANT);"},{"lineNumber":308,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":309,"author":{"gitId":"-"},"content":""},{"lineNumber":310,"author":{"gitId":"-"},"content":"    private boolean isAnyAnonymousResponseEqual(FeedbackQuestionAttributes question, WebElement responseView,"},{"lineNumber":311,"author":{"gitId":"-"},"content":"                                                FeedbackResponseAttributes response) {"},{"lineNumber":312,"author":{"gitId":"weiquu"},"content":"        List\u003cWebElement\u003e giverNames \u003d responseView.findElements(By.className(\"response-giver\"));"},{"lineNumber":313,"author":{"gitId":"-"},"content":"        List\u003cWebElement\u003e responseFields \u003d getAllResponseFields(responseView);"},{"lineNumber":314,"author":{"gitId":"-"},"content":"        for (int i \u003d 0; i \u003c giverNames.size(); i++) {"},{"lineNumber":315,"author":{"gitId":"-"},"content":"            if (isAnonymous(giverNames.get(i).getText()) \u0026\u0026 isResponseEqual(question, responseFields.get(i), response)) {"},{"lineNumber":316,"author":{"gitId":"-"},"content":"                return true;"},{"lineNumber":317,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":318,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":319,"author":{"gitId":"-"},"content":"        return false;"},{"lineNumber":320,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":321,"author":{"gitId":"-"},"content":""},{"lineNumber":322,"author":{"gitId":"-"},"content":"    private String getCourseId() {"},{"lineNumber":323,"author":{"gitId":"-"},"content":"        return courseId.getText();"},{"lineNumber":324,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":325,"author":{"gitId":"-"},"content":""},{"lineNumber":326,"author":{"gitId":"-"},"content":"    private String getCourseName() {"},{"lineNumber":327,"author":{"gitId":"-"},"content":"        return courseName.getText();"},{"lineNumber":328,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":329,"author":{"gitId":"-"},"content":""},{"lineNumber":330,"author":{"gitId":"-"},"content":"    private String getCourseInstitute() {"},{"lineNumber":331,"author":{"gitId":"-"},"content":"        return courseInstitute.getText();"},{"lineNumber":332,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":333,"author":{"gitId":"-"},"content":""},{"lineNumber":334,"author":{"gitId":"-"},"content":"    private String getFeedbackSessionName() {"},{"lineNumber":335,"author":{"gitId":"-"},"content":"        return sessionName.getText();"},{"lineNumber":336,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":337,"author":{"gitId":"-"},"content":""},{"lineNumber":338,"author":{"gitId":"-"},"content":"    private String getOpeningTime() {"},{"lineNumber":339,"author":{"gitId":"-"},"content":"        return sessionOpeningTime.getText();"},{"lineNumber":340,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":341,"author":{"gitId":"-"},"content":""},{"lineNumber":342,"author":{"gitId":"-"},"content":"    private String getClosingTime() {"},{"lineNumber":343,"author":{"gitId":"-"},"content":"        return sessionClosingTime.getText();"},{"lineNumber":344,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":345,"author":{"gitId":"-"},"content":""},{"lineNumber":346,"author":{"gitId":"-"},"content":"    private void assertDateEquals(String actual, Instant instant, String timeZone) {"},{"lineNumber":347,"author":{"gitId":"-"},"content":"        String dateStrWithAbbr \u003d getDateStringWithAbbr(instant, timeZone);"},{"lineNumber":348,"author":{"gitId":"-"},"content":"        String dateStrWithOffset \u003d getDateStringWithOffset(instant, timeZone);"},{"lineNumber":349,"author":{"gitId":"-"},"content":""},{"lineNumber":350,"author":{"gitId":"-"},"content":"        assertTrue(actual.equals(dateStrWithAbbr) || actual.equals(dateStrWithOffset));"},{"lineNumber":351,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":352,"author":{"gitId":"-"},"content":""},{"lineNumber":353,"author":{"gitId":"-"},"content":"    private String getDateStringWithAbbr(Instant instant, String timeZone) {"},{"lineNumber":354,"author":{"gitId":"-"},"content":"        return getDisplayedDateTime(instant, timeZone, \"EE, dd MMM, yyyy, hh:mm a z\");"},{"lineNumber":355,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":356,"author":{"gitId":"-"},"content":""},{"lineNumber":357,"author":{"gitId":"-"},"content":"    private String getDateStringWithOffset(Instant instant, String timeZone) {"},{"lineNumber":358,"author":{"gitId":"-"},"content":"        return getDisplayedDateTime(instant, timeZone, \"EE, dd MMM, yyyy, hh:mm a X\");"},{"lineNumber":359,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":360,"author":{"gitId":"-"},"content":""},{"lineNumber":361,"author":{"gitId":"-"},"content":"    private String getQuestionText(int questionNum) {"},{"lineNumber":362,"author":{"gitId":"-"},"content":"        return getQuestionResponsesSection(questionNum).findElement(By.className(\"question-text\")).getText().trim();"},{"lineNumber":363,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":364,"author":{"gitId":"-"},"content":""},{"lineNumber":365,"author":{"gitId":"-"},"content":"    private String getMcqAddInfo(FeedbackMcqQuestionDetails questionDetails) {"},{"lineNumber":366,"author":{"gitId":"-"},"content":"        String additionalInfo \u003d \"Multiple-choice (single answer) question options:\" + TestProperties.LINE_SEPARATOR;"},{"lineNumber":367,"author":{"gitId":"-"},"content":"        return appendMultiChoiceInfo(additionalInfo, questionDetails.getGenerateOptionsFor(),"},{"lineNumber":368,"author":{"gitId":"-"},"content":"                questionDetails.getMcqChoices(), questionDetails.isOtherEnabled());"},{"lineNumber":369,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":370,"author":{"gitId":"-"},"content":""},{"lineNumber":371,"author":{"gitId":"-"},"content":"    private String getMsqAddInfo(FeedbackMsqQuestionDetails questionDetails) {"},{"lineNumber":372,"author":{"gitId":"-"},"content":"        String additionalInfo \u003d \"Multiple-choice (multiple answers) question options:\" + TestProperties.LINE_SEPARATOR;"},{"lineNumber":373,"author":{"gitId":"-"},"content":"        return appendMultiChoiceInfo(additionalInfo, questionDetails.getGenerateOptionsFor(),"},{"lineNumber":374,"author":{"gitId":"-"},"content":"                questionDetails.getMsqChoices(), questionDetails.isOtherEnabled());"},{"lineNumber":375,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":376,"author":{"gitId":"-"},"content":""},{"lineNumber":377,"author":{"gitId":"-"},"content":"    private String appendMultiChoiceInfo(String info, FeedbackParticipantType generateOptionsFor, List\u003cString\u003e choices,"},{"lineNumber":378,"author":{"gitId":"-"},"content":"                                         boolean isOtherEnabled) {"},{"lineNumber":379,"author":{"gitId":"-"},"content":"        StringBuilder additionalInfo \u003d new StringBuilder(info);"},{"lineNumber":380,"author":{"gitId":"-"},"content":"        if (generateOptionsFor.equals(FeedbackParticipantType.NONE)) {"},{"lineNumber":381,"author":{"gitId":"-"},"content":"            additionalInfo \u003d appendOptions(additionalInfo, choices);"},{"lineNumber":382,"author":{"gitId":"-"},"content":"            if (isOtherEnabled) {"},{"lineNumber":383,"author":{"gitId":"-"},"content":"                additionalInfo.append(TestProperties.LINE_SEPARATOR).append(\"Other\");"},{"lineNumber":384,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":385,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":386,"author":{"gitId":"-"},"content":"            additionalInfo.append(\"The options for this question is automatically generated from the list of all \")"},{"lineNumber":387,"author":{"gitId":"-"},"content":"                    .append(getDisplayGiverName(generateOptionsFor).toLowerCase())"},{"lineNumber":388,"author":{"gitId":"-"},"content":"                    .append(\u0027.\u0027);"},{"lineNumber":389,"author":{"gitId":"-"},"content":""},{"lineNumber":390,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":391,"author":{"gitId":"-"},"content":"        return additionalInfo.toString();"},{"lineNumber":392,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":393,"author":{"gitId":"-"},"content":""},{"lineNumber":394,"author":{"gitId":"-"},"content":"    private String getRubricAddInfo(FeedbackRubricQuestionDetails questionDetails) {"},{"lineNumber":395,"author":{"gitId":"-"},"content":"        StringBuilder additionalInfo \u003d new StringBuilder(\"Rubric question sub-questions:\");"},{"lineNumber":396,"author":{"gitId":"-"},"content":"        additionalInfo.append(TestProperties.LINE_SEPARATOR);"},{"lineNumber":397,"author":{"gitId":"-"},"content":"        return appendOptions(additionalInfo, questionDetails.getRubricSubQuestions()).toString();"},{"lineNumber":398,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":399,"author":{"gitId":"-"},"content":""},{"lineNumber":400,"author":{"gitId":"-"},"content":"    private String getNumScaleAddInfo(FeedbackNumericalScaleQuestionDetails questionDetails) {"},{"lineNumber":401,"author":{"gitId":"-"},"content":"        return \"Numerical-scale question:\" + TestProperties.LINE_SEPARATOR"},{"lineNumber":402,"author":{"gitId":"-"},"content":"                + \"Minimum value: \" + questionDetails.getMinScale()"},{"lineNumber":403,"author":{"gitId":"-"},"content":"                + \". Increment: \" + questionDetails.getStep()"},{"lineNumber":404,"author":{"gitId":"-"},"content":"                + \". Maximum value: \" + questionDetails.getMaxScale() + \".\";"},{"lineNumber":405,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":406,"author":{"gitId":"-"},"content":""},{"lineNumber":407,"author":{"gitId":"-"},"content":"    private String getRankOptionsAddInfo(FeedbackRankOptionsQuestionDetails questionDetails) {"},{"lineNumber":408,"author":{"gitId":"-"},"content":"        StringBuilder additionalInfo \u003d new StringBuilder(\"Rank (options) question options:\");"},{"lineNumber":409,"author":{"gitId":"-"},"content":"        additionalInfo.append(TestProperties.LINE_SEPARATOR);"},{"lineNumber":410,"author":{"gitId":"-"},"content":"        return appendOptions(additionalInfo, questionDetails.getOptions()).toString();"},{"lineNumber":411,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":412,"author":{"gitId":"-"},"content":""},{"lineNumber":413,"author":{"gitId":"-"},"content":"    private String getConstSumOptionsAddInfo(FeedbackConstantSumQuestionDetails questionDetails) {"},{"lineNumber":414,"author":{"gitId":"-"},"content":"        StringBuilder additionalInfo \u003d new StringBuilder(\"Distribute points (among options) question options:\");"},{"lineNumber":415,"author":{"gitId":"-"},"content":"        additionalInfo.append(TestProperties.LINE_SEPARATOR);"},{"lineNumber":416,"author":{"gitId":"-"},"content":"        additionalInfo \u003d appendOptions(additionalInfo, questionDetails.getConstSumOptions());"},{"lineNumber":417,"author":{"gitId":"-"},"content":"        additionalInfo.append(TestProperties.LINE_SEPARATOR);"},{"lineNumber":418,"author":{"gitId":"-"},"content":"        if (questionDetails.isPointsPerOption()) {"},{"lineNumber":419,"author":{"gitId":"-"},"content":"            additionalInfo.append(\"Points per option: \");"},{"lineNumber":420,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":421,"author":{"gitId":"-"},"content":"            additionalInfo.append(\"Total points: \");"},{"lineNumber":422,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":423,"author":{"gitId":"-"},"content":"        additionalInfo.append(questionDetails.getPoints());"},{"lineNumber":424,"author":{"gitId":"-"},"content":"        return additionalInfo.toString();"},{"lineNumber":425,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":426,"author":{"gitId":"-"},"content":""},{"lineNumber":427,"author":{"gitId":"-"},"content":"    private String getConstSumRecipientsAddInfo(FeedbackConstantSumQuestionDetails questionDetails) {"},{"lineNumber":428,"author":{"gitId":"-"},"content":"        StringBuilder additionalInfo \u003d new StringBuilder(\"Distribute points (among recipients) question\");"},{"lineNumber":429,"author":{"gitId":"-"},"content":"        additionalInfo.append(TestProperties.LINE_SEPARATOR);"},{"lineNumber":430,"author":{"gitId":"-"},"content":"        if (questionDetails.isPointsPerOption()) {"},{"lineNumber":431,"author":{"gitId":"-"},"content":"            additionalInfo.append(\"Points per recipient: \");"},{"lineNumber":432,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":433,"author":{"gitId":"-"},"content":"            additionalInfo.append(\"Total points: \");"},{"lineNumber":434,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":435,"author":{"gitId":"-"},"content":"        additionalInfo.append(questionDetails.getPoints());"},{"lineNumber":436,"author":{"gitId":"-"},"content":"        return additionalInfo.toString();"},{"lineNumber":437,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":438,"author":{"gitId":"-"},"content":""},{"lineNumber":439,"author":{"gitId":"-"},"content":"    private StringBuilder appendOptions(StringBuilder info, List\u003cString\u003e options) {"},{"lineNumber":440,"author":{"gitId":"-"},"content":"        StringBuilder additionalInfo \u003d info;"},{"lineNumber":441,"author":{"gitId":"-"},"content":"        for (String option : options) {"},{"lineNumber":442,"author":{"gitId":"-"},"content":"            additionalInfo.append(option).append(TestProperties.LINE_SEPARATOR);"},{"lineNumber":443,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":444,"author":{"gitId":"-"},"content":"        return additionalInfo.deleteCharAt(additionalInfo.length() - 1);"},{"lineNumber":445,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":446,"author":{"gitId":"-"},"content":""},{"lineNumber":447,"author":{"gitId":"-"},"content":"    private WebElement getQuestionResponsesSection(int questionNum) {"},{"lineNumber":448,"author":{"gitId":"-"},"content":"        WebElement question \u003d browser.driver.findElement(By.id(\"question-\" + questionNum + \"-responses\"));"},{"lineNumber":449,"author":{"gitId":"-"},"content":"        scrollElementToCenter(question);"},{"lineNumber":450,"author":{"gitId":"-"},"content":"        waitUntilAnimationFinish();"},{"lineNumber":451,"author":{"gitId":"-"},"content":"        return browser.driver.findElement(By.id(\"question-\" + questionNum + \"-responses\"));"},{"lineNumber":452,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":453,"author":{"gitId":"-"},"content":""},{"lineNumber":454,"author":{"gitId":"-"},"content":"    private void showAdditionalInfo(int qnNumber) {"},{"lineNumber":455,"author":{"gitId":"-"},"content":"        WebElement additionalInfoLink \u003d"},{"lineNumber":456,"author":{"gitId":"-"},"content":"                getQuestionResponsesSection(qnNumber).findElement(By.className(\"additional-info-button\"));"},{"lineNumber":457,"author":{"gitId":"-"},"content":"        if (\"[more]\".equals(additionalInfoLink.getText())) {"},{"lineNumber":458,"author":{"gitId":"-"},"content":"            click(additionalInfoLink);"},{"lineNumber":459,"author":{"gitId":"-"},"content":"            waitUntilAnimationFinish();"},{"lineNumber":460,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":461,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":462,"author":{"gitId":"-"},"content":""},{"lineNumber":463,"author":{"gitId":"-"},"content":"    private String getAdditionalInfo(int questionNum) {"},{"lineNumber":464,"author":{"gitId":"-"},"content":"        showAdditionalInfo(questionNum);"},{"lineNumber":465,"author":{"gitId":"-"},"content":"        return getQuestionResponsesSection(questionNum).findElement(By.className(\"additional-info\")).getText();"},{"lineNumber":466,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":467,"author":{"gitId":"-"},"content":""},{"lineNumber":468,"author":{"gitId":"-"},"content":"    private WebElement getGivenResponseField(int questionNum, String receiver) {"},{"lineNumber":469,"author":{"gitId":"weiquu"},"content":"        WebElement questionResponsesSection \u003d getQuestionResponsesSection(questionNum);"},{"lineNumber":470,"author":{"gitId":"weiquu"},"content":"        WebElement givenResponses \u003d questionResponsesSection.findElement(By.className(\"given-responses\"));"},{"lineNumber":471,"author":{"gitId":"weiquu"},"content":"        List\u003cWebElement\u003e recipients \u003d givenResponses.findElements(By.className(\"response-recipient\"));"},{"lineNumber":472,"author":{"gitId":"-"},"content":"        for (int i \u003d 0; i \u003c recipients.size(); i++) {"},{"lineNumber":473,"author":{"gitId":"weiquu"},"content":"            if (recipients.get(i).getText().split(\"To: \")[1].equals(receiver)) {"},{"lineNumber":474,"author":{"gitId":"weiquu"},"content":"                return givenResponses.findElements(By.tagName(\"tm-single-response\")).get(i);"},{"lineNumber":475,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":476,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":477,"author":{"gitId":"weiquu"},"content":"        throw new AssertionError(\"Recipient not found: \" + receiver);"},{"lineNumber":478,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":479,"author":{"gitId":"-"},"content":""},{"lineNumber":480,"author":{"gitId":"-"},"content":"    private String getAdditionalInfoString(FeedbackQuestionAttributes question) {"},{"lineNumber":481,"author":{"gitId":"-"},"content":"        switch (question.getQuestionType()) {"},{"lineNumber":482,"author":{"gitId":"-"},"content":"        case TEXT:"},{"lineNumber":483,"author":{"gitId":"-"},"content":"            return \"\";"},{"lineNumber":484,"author":{"gitId":"-"},"content":"        case MCQ:"},{"lineNumber":485,"author":{"gitId":"-"},"content":"            return getMcqAddInfo((FeedbackMcqQuestionDetails) question.getQuestionDetailsCopy());"},{"lineNumber":486,"author":{"gitId":"-"},"content":"        case MSQ:"},{"lineNumber":487,"author":{"gitId":"-"},"content":"            return getMsqAddInfo((FeedbackMsqQuestionDetails) question.getQuestionDetailsCopy());"},{"lineNumber":488,"author":{"gitId":"-"},"content":"        case RUBRIC:"},{"lineNumber":489,"author":{"gitId":"-"},"content":"            return getRubricAddInfo((FeedbackRubricQuestionDetails) question.getQuestionDetailsCopy());"},{"lineNumber":490,"author":{"gitId":"-"},"content":"        case NUMSCALE:"},{"lineNumber":491,"author":{"gitId":"-"},"content":"            return getNumScaleAddInfo((FeedbackNumericalScaleQuestionDetails) question.getQuestionDetailsCopy());"},{"lineNumber":492,"author":{"gitId":"-"},"content":"        case CONTRIB:"},{"lineNumber":493,"author":{"gitId":"-"},"content":"            return \"Team contribution question\";"},{"lineNumber":494,"author":{"gitId":"-"},"content":"        case RANK_OPTIONS:"},{"lineNumber":495,"author":{"gitId":"-"},"content":"            return getRankOptionsAddInfo((FeedbackRankOptionsQuestionDetails) question.getQuestionDetailsCopy());"},{"lineNumber":496,"author":{"gitId":"-"},"content":"        case RANK_RECIPIENTS:"},{"lineNumber":497,"author":{"gitId":"-"},"content":"            return \"Rank (recipients) question\";"},{"lineNumber":498,"author":{"gitId":"-"},"content":"        case CONSTSUM_OPTIONS:"},{"lineNumber":499,"author":{"gitId":"-"},"content":"            return getConstSumOptionsAddInfo((FeedbackConstantSumQuestionDetails) question.getQuestionDetailsCopy());"},{"lineNumber":500,"author":{"gitId":"-"},"content":"        case CONSTSUM_RECIPIENTS:"},{"lineNumber":501,"author":{"gitId":"-"},"content":"            return getConstSumRecipientsAddInfo((FeedbackConstantSumQuestionDetails) question.getQuestionDetailsCopy());"},{"lineNumber":502,"author":{"gitId":"-"},"content":"        default:"},{"lineNumber":503,"author":{"gitId":"-"},"content":"            throw new AssertionError(\"Unknown question type: \" + question.getQuestionType());"},{"lineNumber":504,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":505,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":506,"author":{"gitId":"-"},"content":""},{"lineNumber":507,"author":{"gitId":"-"},"content":"    private String getAnswerString(FeedbackQuestionAttributes question, FeedbackResponseDetails response) {"},{"lineNumber":508,"author":{"gitId":"-"},"content":"        switch (response.getQuestionType()) {"},{"lineNumber":509,"author":{"gitId":"-"},"content":"        case TEXT:"},{"lineNumber":510,"author":{"gitId":"-"},"content":"        case NUMSCALE:"},{"lineNumber":511,"author":{"gitId":"-"},"content":"        case RANK_RECIPIENTS:"},{"lineNumber":512,"author":{"gitId":"-"},"content":"            return response.getAnswerString();"},{"lineNumber":513,"author":{"gitId":"-"},"content":"        case MCQ:"},{"lineNumber":514,"author":{"gitId":"-"},"content":"        case MSQ:"},{"lineNumber":515,"author":{"gitId":"-"},"content":"            return response.getAnswerString().replace(\", \", TestProperties.LINE_SEPARATOR);"},{"lineNumber":516,"author":{"gitId":"-"},"content":"        case RANK_OPTIONS:"},{"lineNumber":517,"author":{"gitId":"-"},"content":"            return getRankOptionsAnsString((FeedbackRankOptionsQuestionDetails) question.getQuestionDetailsCopy(),"},{"lineNumber":518,"author":{"gitId":"-"},"content":"                    (FeedbackRankOptionsResponseDetails) response);"},{"lineNumber":519,"author":{"gitId":"-"},"content":"        case CONSTSUM:"},{"lineNumber":520,"author":{"gitId":"-"},"content":"            return getConstSumOptionsAnsString((FeedbackConstantSumQuestionDetails) question.getQuestionDetailsCopy(),"},{"lineNumber":521,"author":{"gitId":"-"},"content":"                    (FeedbackConstantSumResponseDetails) response);"},{"lineNumber":522,"author":{"gitId":"-"},"content":"        case RUBRIC:"},{"lineNumber":523,"author":{"gitId":"-"},"content":"        case CONTRIB:"},{"lineNumber":524,"author":{"gitId":"-"},"content":"            return \"\";"},{"lineNumber":525,"author":{"gitId":"-"},"content":"        default:"},{"lineNumber":526,"author":{"gitId":"-"},"content":"            throw new AssertionError(\"Unknown question type: \" + response.getQuestionType());"},{"lineNumber":527,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":528,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":529,"author":{"gitId":"-"},"content":""},{"lineNumber":530,"author":{"gitId":"-"},"content":"    private String getRankOptionsAnsString(FeedbackRankOptionsQuestionDetails question,"},{"lineNumber":531,"author":{"gitId":"-"},"content":"                                           FeedbackRankOptionsResponseDetails responseDetails) {"},{"lineNumber":532,"author":{"gitId":"-"},"content":"        List\u003cString\u003e options \u003d question.getOptions();"},{"lineNumber":533,"author":{"gitId":"-"},"content":"        List\u003cInteger\u003e answers \u003d responseDetails.getAnswers();"},{"lineNumber":534,"author":{"gitId":"-"},"content":"        List\u003cString\u003e answerStrings \u003d new ArrayList\u003c\u003e();"},{"lineNumber":535,"author":{"gitId":"-"},"content":"        for (int i \u003d 1; i \u003c\u003d options.size(); i++) {"},{"lineNumber":536,"author":{"gitId":"-"},"content":"            answerStrings.add(i + \": \" + options.get(answers.indexOf(i)));"},{"lineNumber":537,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":538,"author":{"gitId":"-"},"content":"        return String.join(TestProperties.LINE_SEPARATOR, answerStrings);"},{"lineNumber":539,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":540,"author":{"gitId":"-"},"content":""},{"lineNumber":541,"author":{"gitId":"-"},"content":"    private String getConstSumOptionsAnsString(FeedbackConstantSumQuestionDetails question,"},{"lineNumber":542,"author":{"gitId":"-"},"content":"                                               FeedbackConstantSumResponseDetails responseDetails) {"},{"lineNumber":543,"author":{"gitId":"-"},"content":"        if (question.isDistributeToRecipients()) {"},{"lineNumber":544,"author":{"gitId":"-"},"content":"            return responseDetails.getAnswerString();"},{"lineNumber":545,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":546,"author":{"gitId":"-"},"content":"        List\u003cString\u003e options \u003d question.getConstSumOptions();"},{"lineNumber":547,"author":{"gitId":"-"},"content":"        List\u003cInteger\u003e answers \u003d responseDetails.getAnswers();"},{"lineNumber":548,"author":{"gitId":"-"},"content":"        List\u003cString\u003e answerStrings \u003d new ArrayList\u003c\u003e();"},{"lineNumber":549,"author":{"gitId":"-"},"content":"        for (int i \u003d 0; i \u003c options.size(); i++) {"},{"lineNumber":550,"author":{"gitId":"-"},"content":"            answerStrings.add(options.get(i) + \": \" + answers.get(i));"},{"lineNumber":551,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":552,"author":{"gitId":"-"},"content":"        answerStrings.sort(Comparator.naturalOrder());"},{"lineNumber":553,"author":{"gitId":"-"},"content":"        return String.join(TestProperties.LINE_SEPARATOR, answerStrings);"},{"lineNumber":554,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":555,"author":{"gitId":"-"},"content":""},{"lineNumber":556,"author":{"gitId":"-"},"content":"    private List\u003cWebElement\u003e getAllResponseViews(int questionNumber) {"},{"lineNumber":557,"author":{"gitId":"-"},"content":"        return getQuestionResponsesSection(questionNumber).findElements(By.tagName(\"tm-student-view-responses\"));"},{"lineNumber":558,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":559,"author":{"gitId":"-"},"content":""},{"lineNumber":560,"author":{"gitId":"-"},"content":"    private List\u003cWebElement\u003e getAllResponseFields(WebElement responseView) {"},{"lineNumber":561,"author":{"gitId":"-"},"content":"        return responseView.findElements(By.tagName(\"tm-single-response\"));"},{"lineNumber":562,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":563,"author":{"gitId":"-"},"content":""},{"lineNumber":564,"author":{"gitId":"-"},"content":"    private WebElement getNumScaleStatistics(int questionNum) {"},{"lineNumber":565,"author":{"gitId":"-"},"content":"        return getQuestionResponsesSection(questionNum).findElement(By.cssSelector(\"#numscale-statistics tbody tr\"));"},{"lineNumber":566,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":567,"author":{"gitId":"-"},"content":""},{"lineNumber":568,"author":{"gitId":"-"},"content":"    private WebElement getRubricExcludeSelfCheckbox(int questionNum) {"},{"lineNumber":569,"author":{"gitId":"-"},"content":"        return getQuestionResponsesSection(questionNum).findElement(By.id(\"exclude-self-checkbox\"));"},{"lineNumber":570,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":571,"author":{"gitId":"-"},"content":""},{"lineNumber":572,"author":{"gitId":"-"},"content":"    private WebElement getRubricStatistics(int questionNum) {"},{"lineNumber":573,"author":{"gitId":"-"},"content":"        return getQuestionResponsesSection(questionNum).findElement(By.id(\"rubric-statistics\"));"},{"lineNumber":574,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":575,"author":{"gitId":"-"},"content":""},{"lineNumber":576,"author":{"gitId":"-"},"content":"    private boolean isCommentByResponseGiver(WebElement commentField) {"},{"lineNumber":577,"author":{"gitId":"-"},"content":"        return commentField.findElements(By.className(\"by-response-giver\")).size() \u003e 0;"},{"lineNumber":578,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":579,"author":{"gitId":"-"},"content":""},{"lineNumber":580,"author":{"gitId":"-"},"content":"    private String getCommentGiver(WebElement commentField) {"},{"lineNumber":581,"author":{"gitId":"weiquu"},"content":"        String commentGiverDescription \u003d commentField.findElement(By.className(\"comment-giver-name\")).getText();"},{"lineNumber":582,"author":{"gitId":"-"},"content":"        return commentGiverDescription.split(\" commented\")[0];"},{"lineNumber":583,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":584,"author":{"gitId":"-"},"content":""},{"lineNumber":585,"author":{"gitId":"-"},"content":"    private String getCommentEditor(WebElement commentField) {"},{"lineNumber":586,"author":{"gitId":"-"},"content":"        String editDescription \u003d commentField.findElement(By.id(\"last-editor-name\")).getText();"},{"lineNumber":587,"author":{"gitId":"-"},"content":"        return editDescription.split(\"edited by \")[1];"},{"lineNumber":588,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":589,"author":{"gitId":"-"},"content":""},{"lineNumber":590,"author":{"gitId":"-"},"content":"    private List\u003cWebElement\u003e getCommentFields(int questionNum) {"},{"lineNumber":591,"author":{"gitId":"-"},"content":"        return getQuestionResponsesSection(questionNum).findElements(By.tagName(\"tm-comment-row\"));"},{"lineNumber":592,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":593,"author":{"gitId":"-"},"content":""},{"lineNumber":594,"author":{"gitId":"-"},"content":"    private WebElement getCommentField(int questionNum, String commentString) {"},{"lineNumber":595,"author":{"gitId":"-"},"content":"        List\u003cWebElement\u003e commentFields \u003d getCommentFields(questionNum);"},{"lineNumber":596,"author":{"gitId":"-"},"content":"        for (WebElement comment : commentFields) {"},{"lineNumber":597,"author":{"gitId":"-"},"content":"            if (comment.findElement(By.className(\"comment-text\")).getText().equals(commentString)) {"},{"lineNumber":598,"author":{"gitId":"-"},"content":"                return comment;"},{"lineNumber":599,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":600,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":601,"author":{"gitId":"-"},"content":"        throw new AssertionError(\"Comment field not found\");"},{"lineNumber":602,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":603,"author":{"gitId":"-"},"content":""},{"lineNumber":604,"author":{"gitId":"-"},"content":"    private int getGiverIndex(WebElement response, String giver) {"},{"lineNumber":605,"author":{"gitId":"weiquu"},"content":"        List\u003cWebElement\u003e givers \u003d response.findElements(By.className(\"response-giver\"));"},{"lineNumber":606,"author":{"gitId":"-"},"content":"        for (int i \u003d 0; i \u003c givers.size(); i++) {"},{"lineNumber":607,"author":{"gitId":"-"},"content":"            if (givers.get(i).getText().contains(giver)) {"},{"lineNumber":608,"author":{"gitId":"-"},"content":"                return i;"},{"lineNumber":609,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":610,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":611,"author":{"gitId":"-"},"content":"        throw new AssertionError(\"Giver not found: \" + giver);"},{"lineNumber":612,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":613,"author":{"gitId":"-"},"content":""},{"lineNumber":614,"author":{"gitId":"-"},"content":"    private int getRecipientIndex(int questionNum, String recipient) {"},{"lineNumber":615,"author":{"gitId":"weiquu"},"content":"        List\u003cWebElement\u003e recipients \u003d"},{"lineNumber":616,"author":{"gitId":"weiquu"},"content":"                getQuestionResponsesSection(questionNum).findElements(By.className(\"response-recipient\"));"},{"lineNumber":617,"author":{"gitId":"-"},"content":"        for (int i \u003d 0; i \u003c recipients.size(); i++) {"},{"lineNumber":618,"author":{"gitId":"-"},"content":"            if (recipients.get(i).getText().split(\"To: \")[1].equals(recipient)) {"},{"lineNumber":619,"author":{"gitId":"-"},"content":"                return i;"},{"lineNumber":620,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":621,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":622,"author":{"gitId":"-"},"content":"        throw new AssertionError(\"Recipient not found: \" + recipient);"},{"lineNumber":623,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":624,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"weiquu":14,"-":610}},{"path":"src/e2e/java/teammates/e2e/pageobjects/FeedbackSubmitPage.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.e2e.pageobjects;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import static org.junit.Assert.assertEquals;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import static org.junit.Assert.assertFalse;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import static org.junit.Assert.assertTrue;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import static org.junit.Assert.fail;"},{"lineNumber":7,"author":{"gitId":"-"},"content":""},{"lineNumber":8,"author":{"gitId":"-"},"content":"import java.time.Instant;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import java.util.Collections;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":11,"author":{"gitId":"-"},"content":""},{"lineNumber":12,"author":{"gitId":"-"},"content":"import org.openqa.selenium.By;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import org.openqa.selenium.NoSuchElementException;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import org.openqa.selenium.WebElement;"},{"lineNumber":15,"author":{"gitId":"-"},"content":""},{"lineNumber":16,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.FeedbackParticipantType;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.CourseAttributes;"},{"lineNumber":18,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackResponseAttributes;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackSessionAttributes;"},{"lineNumber":21,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackConstantSumQuestionDetails;"},{"lineNumber":22,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackConstantSumResponseDetails;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackContributionQuestionDetails;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackContributionResponseDetails;"},{"lineNumber":25,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackMcqQuestionDetails;"},{"lineNumber":26,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackMcqResponseDetails;"},{"lineNumber":27,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackMsqQuestionDetails;"},{"lineNumber":28,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackMsqResponseDetails;"},{"lineNumber":29,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackNumericalScaleQuestionDetails;"},{"lineNumber":30,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackNumericalScaleResponseDetails;"},{"lineNumber":31,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackRankOptionsQuestionDetails;"},{"lineNumber":32,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackRankOptionsResponseDetails;"},{"lineNumber":33,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackRankQuestionDetails;"},{"lineNumber":34,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackRankRecipientsResponseDetails;"},{"lineNumber":35,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackRubricQuestionDetails;"},{"lineNumber":36,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackRubricResponseDetails;"},{"lineNumber":37,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackTextQuestionDetails;"},{"lineNumber":38,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackTextResponseDetails;"},{"lineNumber":39,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":40,"author":{"gitId":"-"},"content":""},{"lineNumber":41,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":42,"author":{"gitId":"-"},"content":" * Represents the feedback submission page of the website."},{"lineNumber":43,"author":{"gitId":"-"},"content":" */"},{"lineNumber":44,"author":{"gitId":"-"},"content":"public class FeedbackSubmitPage extends AppPage {"},{"lineNumber":45,"author":{"gitId":"-"},"content":""},{"lineNumber":46,"author":{"gitId":"-"},"content":"    public FeedbackSubmitPage(Browser browser) {"},{"lineNumber":47,"author":{"gitId":"-"},"content":"        super(browser);"},{"lineNumber":48,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":49,"author":{"gitId":"-"},"content":""},{"lineNumber":50,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":51,"author":{"gitId":"-"},"content":"    protected boolean containsExpectedPageContents() {"},{"lineNumber":52,"author":{"gitId":"-"},"content":"        if (isElementPresent(By.className(\"modal-content\"))) {"},{"lineNumber":53,"author":{"gitId":"-"},"content":"            waitForConfirmationModalAndClickOk();"},{"lineNumber":54,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":55,"author":{"gitId":"-"},"content":"        return getPageTitle().contains(\"Submit Feedback\");"},{"lineNumber":56,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":57,"author":{"gitId":"-"},"content":""},{"lineNumber":58,"author":{"gitId":"-"},"content":"    public void verifyFeedbackSessionDetails(FeedbackSessionAttributes feedbackSession, CourseAttributes course) {"},{"lineNumber":59,"author":{"gitId":"-"},"content":"        assertEquals(getCourseId(), feedbackSession.getCourseId());"},{"lineNumber":60,"author":{"gitId":"-"},"content":"        assertEquals(getCourseName(), course.getName());"},{"lineNumber":61,"author":{"gitId":"-"},"content":"        assertEquals(getCourseInstitute(), course.getInstitute());"},{"lineNumber":62,"author":{"gitId":"-"},"content":"        assertEquals(getFeedbackSessionName(), feedbackSession.getFeedbackSessionName());"},{"lineNumber":63,"author":{"gitId":"-"},"content":"        assertDateEquals(getOpeningTime(), feedbackSession.getStartTime(), feedbackSession.getTimeZone());"},{"lineNumber":64,"author":{"gitId":"-"},"content":"        assertDateEquals(getClosingTime(), feedbackSession.getEndTime(), feedbackSession.getTimeZone());"},{"lineNumber":65,"author":{"gitId":"-"},"content":"        assertEquals(getInstructions(), feedbackSession.getInstructions());"},{"lineNumber":66,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":67,"author":{"gitId":"-"},"content":""},{"lineNumber":68,"author":{"gitId":"-"},"content":"    public void verifyNumQuestions(int expected) {"},{"lineNumber":69,"author":{"gitId":"-"},"content":"        assertEquals(browser.driver.findElements(By.cssSelector(\"[id^\u003d\u0027question-submission-form-qn-\u0027]\")).size(), expected);"},{"lineNumber":70,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":71,"author":{"gitId":"-"},"content":""},{"lineNumber":72,"author":{"gitId":"-"},"content":"    public void verifyQuestionDetails(int qnNumber, FeedbackQuestionAttributes questionAttributes) {"},{"lineNumber":73,"author":{"gitId":"-"},"content":"        assertEquals(getQuestionBrief(qnNumber), questionAttributes.getQuestionDetailsCopy().getQuestionText());"},{"lineNumber":74,"author":{"gitId":"-"},"content":"        verifyVisibilityList(qnNumber, questionAttributes);"},{"lineNumber":75,"author":{"gitId":"-"},"content":"        if (questionAttributes.getQuestionDescription() !\u003d null) {"},{"lineNumber":76,"author":{"gitId":"-"},"content":"            assertEquals(getQuestionDescription(qnNumber), questionAttributes.getQuestionDescription());"},{"lineNumber":77,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":78,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":79,"author":{"gitId":"-"},"content":""},{"lineNumber":80,"author":{"gitId":"-"},"content":"    public void verifyLimitedRecipients(int qnNumber, int numRecipients, List\u003cString\u003e recipientNames) {"},{"lineNumber":81,"author":{"gitId":"-"},"content":"        List\u003cWebElement\u003e recipientDropdowns \u003d getQuestionForm(qnNumber)"},{"lineNumber":82,"author":{"gitId":"-"},"content":"                .findElements(By.cssSelector(\"[id^\u003d\u0027recipient-dropdown-qn-\u0027]\"));"},{"lineNumber":83,"author":{"gitId":"-"},"content":"        assertEquals(numRecipients, recipientDropdowns.size());"},{"lineNumber":84,"author":{"gitId":"-"},"content":"        List\u003cWebElement\u003e recipients \u003d recipientDropdowns.get(0).findElements(By.tagName(\"option\"));"},{"lineNumber":85,"author":{"gitId":"-"},"content":"        assertEquals(recipientNames.size(), recipients.size() - 1);"},{"lineNumber":86,"author":{"gitId":"-"},"content":"        Collections.sort(recipientNames);"},{"lineNumber":87,"author":{"gitId":"-"},"content":"        for (int i \u003d 0; i \u003c recipientNames.size(); i++) {"},{"lineNumber":88,"author":{"gitId":"-"},"content":"            assertEquals(recipientNames.get(i), recipients.get(i + 1).getText());"},{"lineNumber":89,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":90,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":91,"author":{"gitId":"-"},"content":""},{"lineNumber":92,"author":{"gitId":"-"},"content":"    public void verifyRecipients(int qnNumber, List\u003cString\u003e recipientNames, String role) {"},{"lineNumber":93,"author":{"gitId":"-"},"content":"        WebElement questionForm \u003d getQuestionForm(qnNumber);"},{"lineNumber":94,"author":{"gitId":"-"},"content":"        Collections.sort(recipientNames);"},{"lineNumber":95,"author":{"gitId":"-"},"content":"        for (int i \u003d 0; i \u003c recipientNames.size(); i++) {"},{"lineNumber":96,"author":{"gitId":"-"},"content":"            assertEquals(recipientNames.get(i) + \" (\" + role + \")\","},{"lineNumber":97,"author":{"gitId":"-"},"content":"                    questionForm.findElement(By.id(\"recipient-name-qn-\" + qnNumber + \"-idx-\" + i)).getText());"},{"lineNumber":98,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":99,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":100,"author":{"gitId":"-"},"content":""},{"lineNumber":101,"author":{"gitId":"-"},"content":"    public void verifyWarningMessageForPartialResponse(int[] unansweredQuestions) {"},{"lineNumber":102,"author":{"gitId":"-"},"content":"        click(getSubmitAllQuestionsButton());"},{"lineNumber":103,"author":{"gitId":"-"},"content":"        StringBuilder expectedSb \u003d new StringBuilder();"},{"lineNumber":104,"author":{"gitId":"-"},"content":"        for (int unansweredQuestion : unansweredQuestions) {"},{"lineNumber":105,"author":{"gitId":"-"},"content":"            expectedSb.append(unansweredQuestion).append(\", \");"},{"lineNumber":106,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":107,"author":{"gitId":"-"},"content":"        String expectedString \u003d expectedSb.toString().substring(0, expectedSb.length() - 2) + \".\";"},{"lineNumber":108,"author":{"gitId":"-"},"content":"        String warningString \u003d waitForElementPresence(By.id(\"not-answered-questions\")).getText();"},{"lineNumber":109,"author":{"gitId":"-"},"content":"        assertEquals(warningString.split(\": \")[1], expectedString);"},{"lineNumber":110,"author":{"gitId":"-"},"content":"        waitForConfirmationModalAndClickOk();"},{"lineNumber":111,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":112,"author":{"gitId":"-"},"content":""},{"lineNumber":113,"author":{"gitId":"-"},"content":"    public void verifyCannotSubmit() {"},{"lineNumber":114,"author":{"gitId":"-"},"content":"        WebElement submitButton \u003d waitForElementPresence(By.cssSelector(\"[id^\u003d\u0027btn-submit-qn-\u0027]\"));"},{"lineNumber":115,"author":{"gitId":"-"},"content":"        if (submitButton !\u003d null) {"},{"lineNumber":116,"author":{"gitId":"-"},"content":"            assertFalse(submitButton.isEnabled());"},{"lineNumber":117,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":118,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":119,"author":{"gitId":"-"},"content":""},{"lineNumber":120,"author":{"gitId":"-"},"content":"    public void addComment(int qnNumber, String recipient, String newComment) {"},{"lineNumber":121,"author":{"gitId":"-"},"content":"        WebElement commentSection \u003d getCommentSection(qnNumber, recipient);"},{"lineNumber":122,"author":{"gitId":"-"},"content":"        click(commentSection.findElement(By.className(\"btn-add-comment\")));"},{"lineNumber":123,"author":{"gitId":"-"},"content":"        writeToCommentEditor(commentSection, newComment);"},{"lineNumber":124,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":125,"author":{"gitId":"-"},"content":""},{"lineNumber":126,"author":{"gitId":"-"},"content":"    public void editComment(int qnNumber, String recipient, String editedComment) {"},{"lineNumber":127,"author":{"gitId":"-"},"content":"        WebElement commentSection \u003d getCommentSection(qnNumber, recipient);"},{"lineNumber":128,"author":{"gitId":"-"},"content":"        click(commentSection.findElement(By.className(\"btn-edit-comment\")));"},{"lineNumber":129,"author":{"gitId":"-"},"content":"        writeToCommentEditor(commentSection, editedComment);"},{"lineNumber":130,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":131,"author":{"gitId":"-"},"content":""},{"lineNumber":132,"author":{"gitId":"-"},"content":"    public void deleteComment(int qnNumber, String recipient) {"},{"lineNumber":133,"author":{"gitId":"-"},"content":"        clickAndConfirm(getCommentSection(qnNumber, recipient).findElement(By.className(\"btn-delete-comment\")));"},{"lineNumber":134,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":135,"author":{"gitId":"-"},"content":""},{"lineNumber":136,"author":{"gitId":"-"},"content":"    public void verifyComment(int qnNumber, String recipient, String expectedComment) {"},{"lineNumber":137,"author":{"gitId":"-"},"content":"        WebElement commentSection \u003d getCommentSection(qnNumber, recipient);"},{"lineNumber":138,"author":{"gitId":"-"},"content":"        String actualComment \u003d commentSection.findElement(By.className(\"comment-text\")).getAttribute(\"innerHTML\");"},{"lineNumber":139,"author":{"gitId":"-"},"content":"        assertEquals(expectedComment, actualComment);"},{"lineNumber":140,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":141,"author":{"gitId":"-"},"content":""},{"lineNumber":142,"author":{"gitId":"-"},"content":"    public void verifyNoCommentPresent(int qnNumber, String recipient) {"},{"lineNumber":143,"author":{"gitId":"-"},"content":"        int numComments \u003d getCommentSection(qnNumber, recipient).findElements(By.className(\"comment-text\")).size();"},{"lineNumber":144,"author":{"gitId":"-"},"content":"        assertEquals(numComments, 0);"},{"lineNumber":145,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":146,"author":{"gitId":"-"},"content":""},{"lineNumber":147,"author":{"gitId":"-"},"content":"    public void verifyTextQuestion(int qnNumber, FeedbackTextQuestionDetails questionDetails) {"},{"lineNumber":148,"author":{"gitId":"-"},"content":"        String recommendedLengthText \u003d getQuestionForm(qnNumber).findElement(By.id(\"recommended-length\")).getText();"},{"lineNumber":149,"author":{"gitId":"-"},"content":"        assertEquals(recommendedLengthText, \"Recommended length for the answer: \""},{"lineNumber":150,"author":{"gitId":"-"},"content":"                + questionDetails.getRecommendedLength() + \" words\");"},{"lineNumber":151,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":152,"author":{"gitId":"-"},"content":""},{"lineNumber":153,"author":{"gitId":"-"},"content":"    public void fillTextResponse(int qnNumber, String recipient, FeedbackResponseAttributes response) {"},{"lineNumber":154,"author":{"gitId":"-"},"content":"        FeedbackTextResponseDetails responseDetails \u003d (FeedbackTextResponseDetails) response.getResponseDetailsCopy();"},{"lineNumber":155,"author":{"gitId":"-"},"content":"        writeToRichTextEditor(getTextResponseEditor(qnNumber, recipient), responseDetails.getAnswer());"},{"lineNumber":156,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":157,"author":{"gitId":"-"},"content":""},{"lineNumber":158,"author":{"gitId":"-"},"content":"    public void verifyTextResponse(int qnNumber, String recipient, FeedbackResponseAttributes response) {"},{"lineNumber":159,"author":{"gitId":"-"},"content":"        FeedbackTextResponseDetails responseDetails \u003d (FeedbackTextResponseDetails) response.getResponseDetailsCopy();"},{"lineNumber":160,"author":{"gitId":"-"},"content":"        int responseLength \u003d responseDetails.getAnswer().split(\" \").length;"},{"lineNumber":161,"author":{"gitId":"-"},"content":"        assertEquals(getEditorRichText(getTextResponseEditor(qnNumber, recipient)), responseDetails.getAnswer());"},{"lineNumber":162,"author":{"gitId":"-"},"content":"        assertEquals(getResponseLengthText(qnNumber, recipient), \"Response length: \" + responseLength"},{"lineNumber":163,"author":{"gitId":"-"},"content":"                + \" words\");"},{"lineNumber":164,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":165,"author":{"gitId":"-"},"content":""},{"lineNumber":166,"author":{"gitId":"-"},"content":"    public void verifyMcqQuestion(int qnNumber, String recipient, FeedbackMcqQuestionDetails questionDetails) {"},{"lineNumber":167,"author":{"gitId":"-"},"content":"        List\u003cString\u003e mcqChoices \u003d questionDetails.getMcqChoices();"},{"lineNumber":168,"author":{"gitId":"-"},"content":"        List\u003cWebElement\u003e optionTexts \u003d getMcqOptions(qnNumber, recipient);"},{"lineNumber":169,"author":{"gitId":"-"},"content":""},{"lineNumber":170,"author":{"gitId":"-"},"content":"        for (int i \u003d 0; i \u003c mcqChoices.size(); i++) {"},{"lineNumber":171,"author":{"gitId":"-"},"content":"            assertEquals(mcqChoices.get(i), optionTexts.get(i).getText());"},{"lineNumber":172,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":173,"author":{"gitId":"-"},"content":""},{"lineNumber":174,"author":{"gitId":"-"},"content":"        if (questionDetails.isOtherEnabled()) {"},{"lineNumber":175,"author":{"gitId":"-"},"content":"            assertEquals(\"Other\", getMcqSection(qnNumber, recipient).findElement(By.id(\"other-option\")).getText());"},{"lineNumber":176,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":177,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":178,"author":{"gitId":"-"},"content":""},{"lineNumber":179,"author":{"gitId":"-"},"content":"    public void verifyGeneratedMcqQuestion(int qnNumber, String recipient, List\u003cString\u003e options) {"},{"lineNumber":180,"author":{"gitId":"-"},"content":"        List\u003cWebElement\u003e optionTexts \u003d getMcqOptions(qnNumber, recipient);"},{"lineNumber":181,"author":{"gitId":"-"},"content":"        for (int i \u003d 0; i \u003c options.size(); i++) {"},{"lineNumber":182,"author":{"gitId":"-"},"content":"            assertEquals(options.get(i), optionTexts.get(i).getText());"},{"lineNumber":183,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":184,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":185,"author":{"gitId":"-"},"content":""},{"lineNumber":186,"author":{"gitId":"-"},"content":"    public void fillMcqResponse(int qnNumber, String recipient, FeedbackResponseAttributes response) {"},{"lineNumber":187,"author":{"gitId":"-"},"content":"        FeedbackMcqResponseDetails responseDetails \u003d (FeedbackMcqResponseDetails) response.getResponseDetailsCopy();"},{"lineNumber":188,"author":{"gitId":"-"},"content":"        if (responseDetails.isOther()) {"},{"lineNumber":189,"author":{"gitId":"-"},"content":"            markOptionAsSelected(getMcqOtherOptionRadioBtn(qnNumber, recipient));"},{"lineNumber":190,"author":{"gitId":"-"},"content":"            fillTextBox(getMcqOtherOptionTextbox(qnNumber, recipient), responseDetails.getOtherFieldContent());"},{"lineNumber":191,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":192,"author":{"gitId":"-"},"content":"            List\u003cWebElement\u003e optionTexts \u003d getMcqOptions(qnNumber, recipient);"},{"lineNumber":193,"author":{"gitId":"-"},"content":"            for (int i \u003d 0; i \u003c optionTexts.size(); i++) {"},{"lineNumber":194,"author":{"gitId":"-"},"content":"                if (optionTexts.get(i).getText().equals(responseDetails.getAnswer())) {"},{"lineNumber":195,"author":{"gitId":"-"},"content":"                    markOptionAsSelected(getMcqRadioBtns(qnNumber, recipient).get(i));"},{"lineNumber":196,"author":{"gitId":"-"},"content":"                    break;"},{"lineNumber":197,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":198,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":199,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":200,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":201,"author":{"gitId":"-"},"content":""},{"lineNumber":202,"author":{"gitId":"-"},"content":"    public void verifyMcqResponse(int qnNumber, String recipient, FeedbackResponseAttributes response) {"},{"lineNumber":203,"author":{"gitId":"-"},"content":"        FeedbackMcqResponseDetails responseDetails \u003d (FeedbackMcqResponseDetails) response.getResponseDetailsCopy();"},{"lineNumber":204,"author":{"gitId":"-"},"content":"        if (responseDetails.isOther()) {"},{"lineNumber":205,"author":{"gitId":"-"},"content":"            assertTrue(getMcqOtherOptionRadioBtn(qnNumber, recipient).isSelected());"},{"lineNumber":206,"author":{"gitId":"-"},"content":"            assertEquals(getMcqOtherOptionTextbox(qnNumber, recipient).getAttribute(\"value\"),"},{"lineNumber":207,"author":{"gitId":"-"},"content":"                    responseDetails.getOtherFieldContent());"},{"lineNumber":208,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":209,"author":{"gitId":"-"},"content":"            List\u003cWebElement\u003e optionTexts \u003d getMcqOptions(qnNumber, recipient);"},{"lineNumber":210,"author":{"gitId":"-"},"content":"            List\u003cWebElement\u003e radioBtns \u003d getMcqRadioBtns(qnNumber, recipient);"},{"lineNumber":211,"author":{"gitId":"-"},"content":"            for (int i \u003d 0; i \u003c optionTexts.size(); i++) {"},{"lineNumber":212,"author":{"gitId":"-"},"content":"                if (optionTexts.get(i).getText().equals(responseDetails.getAnswer())) {"},{"lineNumber":213,"author":{"gitId":"-"},"content":"                    assertTrue(radioBtns.get(i).isSelected());"},{"lineNumber":214,"author":{"gitId":"-"},"content":"                    break;"},{"lineNumber":215,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":216,"author":{"gitId":"-"},"content":"                assertFalse(radioBtns.get(i).isSelected());"},{"lineNumber":217,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":218,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":219,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":220,"author":{"gitId":"-"},"content":""},{"lineNumber":221,"author":{"gitId":"-"},"content":"    public void verifyMsqQuestion(int qnNumber, String recipient, FeedbackMsqQuestionDetails questionDetails) {"},{"lineNumber":222,"author":{"gitId":"-"},"content":"        List\u003cString\u003e msqChoices \u003d questionDetails.getMsqChoices();"},{"lineNumber":223,"author":{"gitId":"-"},"content":"        if (questionDetails.isOtherEnabled()) {"},{"lineNumber":224,"author":{"gitId":"-"},"content":"            msqChoices.add(\"Other\");"},{"lineNumber":225,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":226,"author":{"gitId":"-"},"content":"        if (questionDetails.getMinSelectableChoices() \u003d\u003d Const.POINTS_NO_VALUE) {"},{"lineNumber":227,"author":{"gitId":"-"},"content":"            msqChoices.add(\"None of the above\");"},{"lineNumber":228,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":229,"author":{"gitId":"-"},"content":"        List\u003cWebElement\u003e optionTexts \u003d getMsqOptions(qnNumber, recipient);"},{"lineNumber":230,"author":{"gitId":"-"},"content":"        for (int i \u003d 0; i \u003c msqChoices.size(); i++) {"},{"lineNumber":231,"author":{"gitId":"-"},"content":"            assertEquals(msqChoices.get(i), optionTexts.get(i).getText());"},{"lineNumber":232,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":233,"author":{"gitId":"-"},"content":"        verifyMsqSelectableOptionsMessage(qnNumber, questionDetails);"},{"lineNumber":234,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":235,"author":{"gitId":"-"},"content":""},{"lineNumber":236,"author":{"gitId":"-"},"content":"    private void verifyMsqSelectableOptionsMessage(int qnNumber, FeedbackMsqQuestionDetails questionDetails) {"},{"lineNumber":237,"author":{"gitId":"-"},"content":"        if (questionDetails.getMinSelectableChoices() !\u003d Const.POINTS_NO_VALUE) {"},{"lineNumber":238,"author":{"gitId":"-"},"content":"            assertEquals(getQuestionForm(qnNumber).findElement(By.id(\"min-options-message\")).getText(),"},{"lineNumber":239,"author":{"gitId":"-"},"content":"                    \"Choose at least \" + questionDetails.getMinSelectableChoices() + \" options.\");"},{"lineNumber":240,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":241,"author":{"gitId":"-"},"content":"        if (questionDetails.getMaxSelectableChoices() !\u003d Const.POINTS_NO_VALUE) {"},{"lineNumber":242,"author":{"gitId":"-"},"content":"            assertEquals(getQuestionForm(qnNumber).findElement(By.id(\"max-options-message\")).getText(),"},{"lineNumber":243,"author":{"gitId":"-"},"content":"                    \"Choose no more than \" + questionDetails.getMaxSelectableChoices() + \" options.\");"},{"lineNumber":244,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":245,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":246,"author":{"gitId":"-"},"content":""},{"lineNumber":247,"author":{"gitId":"-"},"content":"    public void verifyGeneratedMsqQuestion(int qnNumber, String recipient, FeedbackMsqQuestionDetails questionDetails,"},{"lineNumber":248,"author":{"gitId":"-"},"content":"                                           List\u003cString\u003e options) {"},{"lineNumber":249,"author":{"gitId":"-"},"content":"        List\u003cWebElement\u003e optionTexts \u003d getMsqOptions(qnNumber, recipient);"},{"lineNumber":250,"author":{"gitId":"-"},"content":"        for (int i \u003d 0; i \u003c options.size(); i++) {"},{"lineNumber":251,"author":{"gitId":"-"},"content":"            assertEquals(options.get(i), optionTexts.get(i).getText());"},{"lineNumber":252,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":253,"author":{"gitId":"-"},"content":"        verifyMsqSelectableOptionsMessage(qnNumber, questionDetails);"},{"lineNumber":254,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":255,"author":{"gitId":"-"},"content":""},{"lineNumber":256,"author":{"gitId":"-"},"content":"    public void fillMsqResponse(int qnNumber, String recipient, FeedbackResponseAttributes response) {"},{"lineNumber":257,"author":{"gitId":"-"},"content":"        FeedbackMsqResponseDetails responseDetails \u003d (FeedbackMsqResponseDetails) response.getResponseDetailsCopy();"},{"lineNumber":258,"author":{"gitId":"-"},"content":"        List\u003cString\u003e answers \u003d responseDetails.getAnswers();"},{"lineNumber":259,"author":{"gitId":"-"},"content":"        if (answers.get(0).isEmpty()) {"},{"lineNumber":260,"author":{"gitId":"-"},"content":"            answers.add(\"None of the above\");"},{"lineNumber":261,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":262,"author":{"gitId":"-"},"content":"        List\u003cWebElement\u003e optionTexts \u003d getMsqOptions(qnNumber, recipient);"},{"lineNumber":263,"author":{"gitId":"-"},"content":"        List\u003cWebElement\u003e checkboxes \u003d getMsqCheckboxes(qnNumber, recipient);"},{"lineNumber":264,"author":{"gitId":"-"},"content":"        for (int i \u003d 0; i \u003c optionTexts.size(); i++) {"},{"lineNumber":265,"author":{"gitId":"-"},"content":"            if (answers.contains(optionTexts.get(i).getText())) {"},{"lineNumber":266,"author":{"gitId":"-"},"content":"                markOptionAsSelected(checkboxes.get(i));"},{"lineNumber":267,"author":{"gitId":"-"},"content":"            } else {"},{"lineNumber":268,"author":{"gitId":"-"},"content":"                markOptionAsUnselected(checkboxes.get(i));"},{"lineNumber":269,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":270,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":271,"author":{"gitId":"-"},"content":"        if (responseDetails.isOther()) {"},{"lineNumber":272,"author":{"gitId":"-"},"content":"            markOptionAsSelected(getMsqOtherOptionCheckbox(qnNumber, recipient));"},{"lineNumber":273,"author":{"gitId":"-"},"content":"            fillTextBox(getMsqOtherOptionTextbox(qnNumber, recipient), responseDetails.getOtherFieldContent());"},{"lineNumber":274,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":275,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":276,"author":{"gitId":"-"},"content":""},{"lineNumber":277,"author":{"gitId":"-"},"content":"    public void verifyMsqResponse(int qnNumber, String recipient, FeedbackResponseAttributes response) {"},{"lineNumber":278,"author":{"gitId":"-"},"content":"        FeedbackMsqResponseDetails responseDetails \u003d (FeedbackMsqResponseDetails) response.getResponseDetailsCopy();"},{"lineNumber":279,"author":{"gitId":"-"},"content":"        List\u003cString\u003e answers \u003d responseDetails.getAnswers();"},{"lineNumber":280,"author":{"gitId":"-"},"content":"        if (answers.get(0).isEmpty()) {"},{"lineNumber":281,"author":{"gitId":"-"},"content":"            answers.add(\"None of the above\");"},{"lineNumber":282,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":283,"author":{"gitId":"-"},"content":"        List\u003cWebElement\u003e optionTexts \u003d getMsqOptions(qnNumber, recipient);"},{"lineNumber":284,"author":{"gitId":"-"},"content":"        List\u003cWebElement\u003e checkboxes \u003d getMsqCheckboxes(qnNumber, recipient);"},{"lineNumber":285,"author":{"gitId":"-"},"content":"        for (int i \u003d 0; i \u003c optionTexts.size(); i++) {"},{"lineNumber":286,"author":{"gitId":"-"},"content":"            if (answers.contains(optionTexts.get(i).getText())) {"},{"lineNumber":287,"author":{"gitId":"-"},"content":"                assertTrue(checkboxes.get(i).isSelected());"},{"lineNumber":288,"author":{"gitId":"-"},"content":"            } else if (\"Other\".equals(optionTexts.get(i).getText())) {"},{"lineNumber":289,"author":{"gitId":"-"},"content":"                assertEquals(checkboxes.get(i).isSelected(), responseDetails.isOther());"},{"lineNumber":290,"author":{"gitId":"-"},"content":"            } else {"},{"lineNumber":291,"author":{"gitId":"-"},"content":"                assertFalse(checkboxes.get(i).isSelected());"},{"lineNumber":292,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":293,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":294,"author":{"gitId":"-"},"content":"        if (responseDetails.isOther()) {"},{"lineNumber":295,"author":{"gitId":"-"},"content":"            assertEquals(getMsqOtherOptionTextbox(qnNumber, recipient).getAttribute(\"value\"),"},{"lineNumber":296,"author":{"gitId":"-"},"content":"                    responseDetails.getOtherFieldContent());"},{"lineNumber":297,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":298,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":299,"author":{"gitId":"-"},"content":""},{"lineNumber":300,"author":{"gitId":"-"},"content":"    public void verifyNumScaleQuestion(int qnNumber, String recipient,"},{"lineNumber":301,"author":{"gitId":"-"},"content":"                                       FeedbackNumericalScaleQuestionDetails questionDetails) {"},{"lineNumber":302,"author":{"gitId":"-"},"content":"        double step \u003d questionDetails.getStep();"},{"lineNumber":303,"author":{"gitId":"-"},"content":"        double twoSteps \u003d 2 * step;"},{"lineNumber":304,"author":{"gitId":"-"},"content":"        double min \u003d questionDetails.getMinScale();"},{"lineNumber":305,"author":{"gitId":"-"},"content":"        double max \u003d questionDetails.getMaxScale();"},{"lineNumber":306,"author":{"gitId":"-"},"content":"        String possibleValues \u003d String.format(\"Possible values: [%s, %s, %s, ..., %s, %s, %s]\","},{"lineNumber":307,"author":{"gitId":"-"},"content":"                getDoubleString(min), getDoubleString(min + step), getDoubleString(min + twoSteps),"},{"lineNumber":308,"author":{"gitId":"-"},"content":"                getDoubleString(max - twoSteps), getDoubleString(max - step), getDoubleString(max));"},{"lineNumber":309,"author":{"gitId":"-"},"content":"        String actualValues \u003d getNumScaleSection(qnNumber, recipient).findElement(By.id(\"possible-values\")).getText();"},{"lineNumber":310,"author":{"gitId":"-"},"content":"        assertEquals(actualValues, possibleValues);"},{"lineNumber":311,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":312,"author":{"gitId":"-"},"content":""},{"lineNumber":313,"author":{"gitId":"-"},"content":"    public void fillNumScaleResponse(int qnNumber, String recipient, FeedbackResponseAttributes response) {"},{"lineNumber":314,"author":{"gitId":"-"},"content":"        FeedbackNumericalScaleResponseDetails responseDetails \u003d"},{"lineNumber":315,"author":{"gitId":"-"},"content":"                (FeedbackNumericalScaleResponseDetails) response.getResponseDetailsCopy();"},{"lineNumber":316,"author":{"gitId":"-"},"content":"        fillTextBox(getNumScaleInput(qnNumber, recipient), Double.toString(responseDetails.getAnswer()));"},{"lineNumber":317,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":318,"author":{"gitId":"-"},"content":""},{"lineNumber":319,"author":{"gitId":"-"},"content":"    public void verifyNumScaleResponse(int qnNumber, String recipient, FeedbackResponseAttributes response) {"},{"lineNumber":320,"author":{"gitId":"-"},"content":"        FeedbackNumericalScaleResponseDetails responseDetails \u003d"},{"lineNumber":321,"author":{"gitId":"-"},"content":"                (FeedbackNumericalScaleResponseDetails) response.getResponseDetailsCopy();"},{"lineNumber":322,"author":{"gitId":"-"},"content":"        assertEquals(getNumScaleInput(qnNumber, recipient).getAttribute(\"value\"),"},{"lineNumber":323,"author":{"gitId":"-"},"content":"                getDoubleString(responseDetails.getAnswer()));"},{"lineNumber":324,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":325,"author":{"gitId":"-"},"content":""},{"lineNumber":326,"author":{"gitId":"-"},"content":"    public void verifyConstSumQuestion(int qnNumber, String recipient,"},{"lineNumber":327,"author":{"gitId":"-"},"content":"                                       FeedbackConstantSumQuestionDetails questionDetails) {"},{"lineNumber":328,"author":{"gitId":"-"},"content":"        if (!questionDetails.isDistributeToRecipients()) {"},{"lineNumber":329,"author":{"gitId":"-"},"content":"            List\u003cString\u003e constSumOptions \u003d questionDetails.getConstSumOptions();"},{"lineNumber":330,"author":{"gitId":"-"},"content":"            List\u003cWebElement\u003e optionTexts \u003d getConstSumOptions(qnNumber, recipient);"},{"lineNumber":331,"author":{"gitId":"-"},"content":"            for (int i \u003d 0; i \u003c constSumOptions.size(); i++) {"},{"lineNumber":332,"author":{"gitId":"-"},"content":"                assertEquals(constSumOptions.get(i), optionTexts.get(i).getText());"},{"lineNumber":333,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":334,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":335,"author":{"gitId":"-"},"content":""},{"lineNumber":336,"author":{"gitId":"-"},"content":"        int totalPoints \u003d questionDetails.getPoints();"},{"lineNumber":337,"author":{"gitId":"-"},"content":"        if (questionDetails.isPointsPerOption()) {"},{"lineNumber":338,"author":{"gitId":"-"},"content":"            totalPoints *\u003d questionDetails.getNumOfConstSumOptions();"},{"lineNumber":339,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":340,"author":{"gitId":"-"},"content":"        assertEquals(getQuestionForm(qnNumber).findElement(By.id(\"total-points-message\")).getText(),"},{"lineNumber":341,"author":{"gitId":"-"},"content":"                \"Total points distributed should add up to \" + totalPoints + \".\");"},{"lineNumber":342,"author":{"gitId":"-"},"content":""},{"lineNumber":343,"author":{"gitId":"-"},"content":"        if (questionDetails.isForceUnevenDistribution()) {"},{"lineNumber":344,"author":{"gitId":"-"},"content":"            String entityType \u003d questionDetails.isDistributeToRecipients() ? \"recipient\" : \"option\";"},{"lineNumber":345,"author":{"gitId":"-"},"content":"            if (\"All options\".equals(questionDetails.getDistributePointsFor())) {"},{"lineNumber":346,"author":{"gitId":"-"},"content":"                assertEquals(getQuestionForm(qnNumber).findElement(By.id(\"all-uneven-message\")).getText(),"},{"lineNumber":347,"author":{"gitId":"-"},"content":"                        \"Every \" + entityType + \" should be allocated different number of points.\");"},{"lineNumber":348,"author":{"gitId":"-"},"content":"            } else {"},{"lineNumber":349,"author":{"gitId":"-"},"content":"                assertEquals(getQuestionForm(qnNumber).findElement(By.id(\"one-uneven-message\")).getText(),"},{"lineNumber":350,"author":{"gitId":"-"},"content":"                        \"At least one \" + entityType + \" should be allocated different number of points.\");"},{"lineNumber":351,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":352,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":353,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":354,"author":{"gitId":"-"},"content":""},{"lineNumber":355,"author":{"gitId":"-"},"content":"    public void fillConstSumOptionResponse(int qnNumber, String recipient, FeedbackResponseAttributes response) {"},{"lineNumber":356,"author":{"gitId":"-"},"content":"        FeedbackConstantSumResponseDetails responseDetails \u003d"},{"lineNumber":357,"author":{"gitId":"-"},"content":"                (FeedbackConstantSumResponseDetails) response.getResponseDetailsCopy();"},{"lineNumber":358,"author":{"gitId":"-"},"content":"        List\u003cInteger\u003e answers \u003d responseDetails.getAnswers();"},{"lineNumber":359,"author":{"gitId":"-"},"content":"        List\u003cWebElement\u003e constSumInputs \u003d getConstSumInputs(qnNumber, recipient);"},{"lineNumber":360,"author":{"gitId":"-"},"content":"        for (int i \u003d 0; i \u003c answers.size(); i++) {"},{"lineNumber":361,"author":{"gitId":"-"},"content":"            fillTextBox(constSumInputs.get(i), Integer.toString(answers.get(i)));"},{"lineNumber":362,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":363,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":364,"author":{"gitId":"-"},"content":""},{"lineNumber":365,"author":{"gitId":"-"},"content":"    public void verifyConstSumOptionResponse(int qnNumber, String recipient, FeedbackResponseAttributes response) {"},{"lineNumber":366,"author":{"gitId":"-"},"content":"        FeedbackConstantSumResponseDetails responseDetails \u003d"},{"lineNumber":367,"author":{"gitId":"-"},"content":"                (FeedbackConstantSumResponseDetails) response.getResponseDetailsCopy();"},{"lineNumber":368,"author":{"gitId":"-"},"content":"        List\u003cInteger\u003e answers \u003d responseDetails.getAnswers();"},{"lineNumber":369,"author":{"gitId":"-"},"content":"        List\u003cWebElement\u003e constSumInputs \u003d getConstSumInputs(qnNumber, recipient);"},{"lineNumber":370,"author":{"gitId":"-"},"content":"        for (int i \u003d 0; i \u003c answers.size(); i++) {"},{"lineNumber":371,"author":{"gitId":"-"},"content":"            assertEquals(constSumInputs.get(i).getAttribute(\"value\"), Integer.toString(answers.get(i)));"},{"lineNumber":372,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":373,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":374,"author":{"gitId":"-"},"content":""},{"lineNumber":375,"author":{"gitId":"-"},"content":"    public void fillConstSumRecipientResponse(int qnNumber, List\u003cFeedbackResponseAttributes\u003e responses) {"},{"lineNumber":376,"author":{"gitId":"-"},"content":"        List\u003cWebElement\u003e recipientInputs \u003d getConstSumRecipientInputs(qnNumber);"},{"lineNumber":377,"author":{"gitId":"-"},"content":"        for (int i \u003d 0; i \u003c responses.size(); i++) {"},{"lineNumber":378,"author":{"gitId":"-"},"content":"            FeedbackConstantSumResponseDetails response \u003d"},{"lineNumber":379,"author":{"gitId":"-"},"content":"                    (FeedbackConstantSumResponseDetails) responses.get(i).getResponseDetailsCopy();"},{"lineNumber":380,"author":{"gitId":"-"},"content":"            fillTextBox(recipientInputs.get(i), Integer.toString(response.getAnswers().get(0)));"},{"lineNumber":381,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":382,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":383,"author":{"gitId":"-"},"content":""},{"lineNumber":384,"author":{"gitId":"-"},"content":"    public void verifyConstSumRecipientResponse(int qnNumber, List\u003cFeedbackResponseAttributes\u003e responses) {"},{"lineNumber":385,"author":{"gitId":"-"},"content":"        List\u003cWebElement\u003e recipientInputs \u003d getConstSumRecipientInputs(qnNumber);"},{"lineNumber":386,"author":{"gitId":"-"},"content":"        for (int i \u003d 0; i \u003c responses.size(); i++) {"},{"lineNumber":387,"author":{"gitId":"-"},"content":"            FeedbackConstantSumResponseDetails response \u003d"},{"lineNumber":388,"author":{"gitId":"-"},"content":"                    (FeedbackConstantSumResponseDetails) responses.get(i).getResponseDetailsCopy();"},{"lineNumber":389,"author":{"gitId":"-"},"content":"            assertEquals(recipientInputs.get(i).getAttribute(\"value\"),"},{"lineNumber":390,"author":{"gitId":"-"},"content":"                    Integer.toString(response.getAnswers().get(0)));"},{"lineNumber":391,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":392,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":393,"author":{"gitId":"-"},"content":""},{"lineNumber":394,"author":{"gitId":"-"},"content":"    public void verifyContributionQuestion(int qnNumber, FeedbackContributionQuestionDetails questionDetails) {"},{"lineNumber":395,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":396,"author":{"gitId":"-"},"content":"            selectDropdownOptionByText(getContributionDropdowns(qnNumber).get(0), \"Not Sure\");"},{"lineNumber":397,"author":{"gitId":"-"},"content":"            assertTrue(questionDetails.isNotSureAllowed());"},{"lineNumber":398,"author":{"gitId":"-"},"content":"            assertFalse(questionDetails.isZeroSum());"},{"lineNumber":399,"author":{"gitId":"-"},"content":"        } catch (NoSuchElementException e) {"},{"lineNumber":400,"author":{"gitId":"-"},"content":"            assertFalse(questionDetails.isNotSureAllowed());"},{"lineNumber":401,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":402,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":403,"author":{"gitId":"-"},"content":""},{"lineNumber":404,"author":{"gitId":"-"},"content":"    public void fillContributionResponse(int qnNumber, List\u003cFeedbackResponseAttributes\u003e responses) {"},{"lineNumber":405,"author":{"gitId":"-"},"content":"        List\u003cWebElement\u003e dropdowns \u003d getContributionDropdowns(qnNumber);"},{"lineNumber":406,"author":{"gitId":"-"},"content":"        for (int i \u003d 0; i \u003c responses.size(); i++) {"},{"lineNumber":407,"author":{"gitId":"-"},"content":"            FeedbackContributionResponseDetails response \u003d"},{"lineNumber":408,"author":{"gitId":"-"},"content":"                    (FeedbackContributionResponseDetails) responses.get(i).getResponseDetailsCopy();"},{"lineNumber":409,"author":{"gitId":"-"},"content":"            selectDropdownOptionByText(dropdowns.get(i), getContributionString(response.getAnswer()));"},{"lineNumber":410,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":411,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":412,"author":{"gitId":"-"},"content":""},{"lineNumber":413,"author":{"gitId":"-"},"content":"    public void verifyContributionResponse(int qnNumber, List\u003cFeedbackResponseAttributes\u003e responses) {"},{"lineNumber":414,"author":{"gitId":"-"},"content":"        List\u003cWebElement\u003e dropdowns \u003d getContributionDropdowns(qnNumber);"},{"lineNumber":415,"author":{"gitId":"-"},"content":"        for (int i \u003d 0; i \u003c responses.size(); i++) {"},{"lineNumber":416,"author":{"gitId":"-"},"content":"            FeedbackContributionResponseDetails response \u003d"},{"lineNumber":417,"author":{"gitId":"-"},"content":"                    (FeedbackContributionResponseDetails) responses.get(i).getResponseDetailsCopy();"},{"lineNumber":418,"author":{"gitId":"-"},"content":"            assertEquals(getSelectedDropdownOptionText(dropdowns.get(i)), getContributionString(response.getAnswer()));"},{"lineNumber":419,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":420,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":421,"author":{"gitId":"-"},"content":""},{"lineNumber":422,"author":{"gitId":"-"},"content":"    public void verifyRubricQuestion(int qnNumber, String recipient, FeedbackRubricQuestionDetails questionDetails) {"},{"lineNumber":423,"author":{"gitId":"-"},"content":"        List\u003cString\u003e choices \u003d questionDetails.getRubricChoices();"},{"lineNumber":424,"author":{"gitId":"-"},"content":"        List\u003cString\u003e subQuestions \u003d questionDetails.getRubricSubQuestions();"},{"lineNumber":425,"author":{"gitId":"-"},"content":"        List\u003cList\u003cString\u003e\u003e descriptions \u003d questionDetails.getRubricDescriptions();"},{"lineNumber":426,"author":{"gitId":"-"},"content":""},{"lineNumber":427,"author":{"gitId":"jasonqiu212"},"content":"        String[][] expectedTableData \u003d new String[subQuestions.size()][choices.size()];"},{"lineNumber":428,"author":{"gitId":"jasonqiu212"},"content":"        String[][] expectedTableRowHeader \u003d new String[1][choices.size()];"},{"lineNumber":429,"author":{"gitId":"jasonqiu212"},"content":"        String[][] expectedTableColumnHeader \u003d new String[subQuestions.size()][1];"},{"lineNumber":430,"author":{"gitId":"jasonqiu212"},"content":""},{"lineNumber":431,"author":{"gitId":"jasonqiu212"},"content":"        for (int i \u003d 0; i \u003c choices.size(); i++) {"},{"lineNumber":432,"author":{"gitId":"jasonqiu212"},"content":"            expectedTableRowHeader[0][i] \u003d choices.get(i);"},{"lineNumber":433,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":434,"author":{"gitId":"jasonqiu212"},"content":"        for (int i \u003d 0; i \u003c subQuestions.size(); i++) {"},{"lineNumber":435,"author":{"gitId":"jasonqiu212"},"content":"            expectedTableColumnHeader[i][0] \u003d subQuestions.get(i);"},{"lineNumber":436,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":437,"author":{"gitId":"jasonqiu212"},"content":"        for (int i \u003d 0; i \u003c descriptions.size(); i++) {"},{"lineNumber":438,"author":{"gitId":"jasonqiu212"},"content":"            List\u003cString\u003e description \u003d descriptions.get(i);"},{"lineNumber":439,"author":{"gitId":"jasonqiu212"},"content":"            for (int j \u003d 0; j \u003c description.size(); j++) {"},{"lineNumber":440,"author":{"gitId":"jasonqiu212"},"content":"                expectedTableData[i][j] \u003d description.get(j);"},{"lineNumber":441,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":442,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":443,"author":{"gitId":"jasonqiu212"},"content":"        WebElement rubricTable \u003d getRubricTable(qnNumber, recipient);"},{"lineNumber":444,"author":{"gitId":"jasonqiu212"},"content":"        verifyTableBodyValues(rubricTable, expectedTableData);"},{"lineNumber":445,"author":{"gitId":"jasonqiu212"},"content":"        verifyTableRowHeaderValues(rubricTable, expectedTableRowHeader);"},{"lineNumber":446,"author":{"gitId":"jasonqiu212"},"content":"        verifyTableColumnHeaderValues(rubricTable, expectedTableColumnHeader);"},{"lineNumber":447,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":448,"author":{"gitId":"-"},"content":""},{"lineNumber":449,"author":{"gitId":"-"},"content":"    public void fillRubricResponse(int qnNumber, String recipient, FeedbackResponseAttributes response) {"},{"lineNumber":450,"author":{"gitId":"-"},"content":"        FeedbackRubricResponseDetails responseDetails \u003d"},{"lineNumber":451,"author":{"gitId":"-"},"content":"                (FeedbackRubricResponseDetails) response.getResponseDetailsCopy();"},{"lineNumber":452,"author":{"gitId":"-"},"content":"        List\u003cInteger\u003e answers \u003d responseDetails.getAnswer();"},{"lineNumber":453,"author":{"gitId":"-"},"content":"        for (int i \u003d 0; i \u003c answers.size(); i++) {"},{"lineNumber":454,"author":{"gitId":"-"},"content":"            click(getRubricInputs(qnNumber, recipient, i + 2).get(answers.get(i)));"},{"lineNumber":455,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":456,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":457,"author":{"gitId":"-"},"content":""},{"lineNumber":458,"author":{"gitId":"-"},"content":"    public void verifyRubricResponse(int qnNumber, String recipient, FeedbackResponseAttributes response) {"},{"lineNumber":459,"author":{"gitId":"-"},"content":"        FeedbackRubricResponseDetails responseDetails \u003d"},{"lineNumber":460,"author":{"gitId":"-"},"content":"                (FeedbackRubricResponseDetails) response.getResponseDetailsCopy();"},{"lineNumber":461,"author":{"gitId":"-"},"content":"        List\u003cInteger\u003e answers \u003d responseDetails.getAnswer();"},{"lineNumber":462,"author":{"gitId":"-"},"content":"        for (int i \u003d 0; i \u003c answers.size(); i++) {"},{"lineNumber":463,"author":{"gitId":"-"},"content":"            assertTrue(getRubricInputs(qnNumber, recipient, i + 2).get(answers.get(i)).isSelected());"},{"lineNumber":464,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":465,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":466,"author":{"gitId":"-"},"content":""},{"lineNumber":467,"author":{"gitId":"-"},"content":"    public void verifyRankQuestion(int qnNumber, String recipient, FeedbackRankQuestionDetails questionDetails) {"},{"lineNumber":468,"author":{"gitId":"-"},"content":"        if (questionDetails.getMaxOptionsToBeRanked() !\u003d Const.POINTS_NO_VALUE) {"},{"lineNumber":469,"author":{"gitId":"-"},"content":"            assertEquals(getQuestionForm(qnNumber).findElement(By.id(\"max-options-message\")).getText(),"},{"lineNumber":470,"author":{"gitId":"-"},"content":"                    \"Rank no more than \" + questionDetails.getMaxOptionsToBeRanked() + \" options.\");"},{"lineNumber":471,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":472,"author":{"gitId":"-"},"content":"        if (questionDetails.getMinOptionsToBeRanked() !\u003d Const.POINTS_NO_VALUE) {"},{"lineNumber":473,"author":{"gitId":"-"},"content":"            assertEquals(getQuestionForm(qnNumber).findElement(By.id(\"min-options-message\")).getText(),"},{"lineNumber":474,"author":{"gitId":"-"},"content":"                    \"Rank at least \" + questionDetails.getMinOptionsToBeRanked() + \" options.\");"},{"lineNumber":475,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":476,"author":{"gitId":"-"},"content":"        if (questionDetails instanceof FeedbackRankOptionsQuestionDetails) {"},{"lineNumber":477,"author":{"gitId":"-"},"content":"            FeedbackRankOptionsQuestionDetails optionDetails \u003d (FeedbackRankOptionsQuestionDetails) questionDetails;"},{"lineNumber":478,"author":{"gitId":"-"},"content":"            List\u003cString\u003e options \u003d optionDetails.getOptions();"},{"lineNumber":479,"author":{"gitId":"-"},"content":"            List\u003cWebElement\u003e optionTexts \u003d getRankOptions(qnNumber, recipient);"},{"lineNumber":480,"author":{"gitId":"-"},"content":"            for (int i \u003d 0; i \u003c options.size(); i++) {"},{"lineNumber":481,"author":{"gitId":"-"},"content":"                assertEquals(options.get(i), optionTexts.get(i).getText());"},{"lineNumber":482,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":483,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":484,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":485,"author":{"gitId":"-"},"content":""},{"lineNumber":486,"author":{"gitId":"-"},"content":"    public void fillRankOptionResponse(int qnNumber, String recipient, FeedbackResponseAttributes response) {"},{"lineNumber":487,"author":{"gitId":"-"},"content":"        FeedbackRankOptionsResponseDetails responseDetails \u003d"},{"lineNumber":488,"author":{"gitId":"-"},"content":"                (FeedbackRankOptionsResponseDetails) response.getResponseDetailsCopy();"},{"lineNumber":489,"author":{"gitId":"-"},"content":"        List\u003cInteger\u003e answers \u003d responseDetails.getAnswers();"},{"lineNumber":490,"author":{"gitId":"-"},"content":"        for (int i \u003d 0; i \u003c answers.size(); i++) {"},{"lineNumber":491,"author":{"gitId":"-"},"content":"            if (answers.get(i) \u003d\u003d Const.POINTS_NOT_SUBMITTED) {"},{"lineNumber":492,"author":{"gitId":"-"},"content":"                selectDropdownOptionByText(getRankOptionsDropdowns(qnNumber, recipient).get(i), \"\");"},{"lineNumber":493,"author":{"gitId":"-"},"content":"            } else {"},{"lineNumber":494,"author":{"gitId":"-"},"content":"                selectDropdownOptionByText(getRankOptionsDropdowns(qnNumber, recipient).get(i),"},{"lineNumber":495,"author":{"gitId":"-"},"content":"                        Integer.toString(answers.get(i)));"},{"lineNumber":496,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":497,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":498,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":499,"author":{"gitId":"-"},"content":""},{"lineNumber":500,"author":{"gitId":"-"},"content":"    public void verifyRankOptionResponse(int qnNumber, String recipient, FeedbackResponseAttributes response) {"},{"lineNumber":501,"author":{"gitId":"-"},"content":"        FeedbackRankOptionsResponseDetails responseDetails \u003d"},{"lineNumber":502,"author":{"gitId":"-"},"content":"                (FeedbackRankOptionsResponseDetails) response.getResponseDetailsCopy();"},{"lineNumber":503,"author":{"gitId":"-"},"content":"        List\u003cInteger\u003e answers \u003d responseDetails.getAnswers();"},{"lineNumber":504,"author":{"gitId":"-"},"content":"        for (int i \u003d 0; i \u003c answers.size(); i++) {"},{"lineNumber":505,"author":{"gitId":"-"},"content":"            if (answers.get(i) \u003d\u003d Const.POINTS_NOT_SUBMITTED) {"},{"lineNumber":506,"author":{"gitId":"-"},"content":"                assertEquals(getSelectedDropdownOptionText(getRankOptionsDropdowns(qnNumber, recipient).get(i)),"},{"lineNumber":507,"author":{"gitId":"-"},"content":"                        \"\");"},{"lineNumber":508,"author":{"gitId":"-"},"content":"            } else {"},{"lineNumber":509,"author":{"gitId":"-"},"content":"                assertEquals(getSelectedDropdownOptionText(getRankOptionsDropdowns(qnNumber, recipient).get(i)),"},{"lineNumber":510,"author":{"gitId":"-"},"content":"                        Integer.toString(answers.get(i)));"},{"lineNumber":511,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":512,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":513,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":514,"author":{"gitId":"-"},"content":""},{"lineNumber":515,"author":{"gitId":"-"},"content":"    public void fillRankRecipientResponse(int qnNumber, List\u003cFeedbackResponseAttributes\u003e responses) {"},{"lineNumber":516,"author":{"gitId":"-"},"content":"        List\u003cWebElement\u003e recipientDropdowns \u003d getRankRecipientDropdowns(qnNumber);"},{"lineNumber":517,"author":{"gitId":"-"},"content":"        for (int i \u003d 0; i \u003c responses.size(); i++) {"},{"lineNumber":518,"author":{"gitId":"-"},"content":"            FeedbackRankRecipientsResponseDetails response \u003d"},{"lineNumber":519,"author":{"gitId":"-"},"content":"                    (FeedbackRankRecipientsResponseDetails) responses.get(i).getResponseDetailsCopy();"},{"lineNumber":520,"author":{"gitId":"-"},"content":"            if (response.getAnswer() \u003d\u003d Const.POINTS_NOT_SUBMITTED) {"},{"lineNumber":521,"author":{"gitId":"-"},"content":"                selectDropdownOptionByText(recipientDropdowns.get(i), \"\");"},{"lineNumber":522,"author":{"gitId":"-"},"content":"            } else {"},{"lineNumber":523,"author":{"gitId":"-"},"content":"                selectDropdownOptionByText(recipientDropdowns.get(i), Integer.toString(response.getAnswer()));"},{"lineNumber":524,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":525,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":526,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":527,"author":{"gitId":"-"},"content":""},{"lineNumber":528,"author":{"gitId":"-"},"content":"    public void verifyRankRecipientResponse(int qnNumber, List\u003cFeedbackResponseAttributes\u003e responses) {"},{"lineNumber":529,"author":{"gitId":"-"},"content":"        List\u003cWebElement\u003e recipientDropdowns \u003d getRankRecipientDropdowns(qnNumber);"},{"lineNumber":530,"author":{"gitId":"-"},"content":"        for (int i \u003d 0; i \u003c responses.size(); i++) {"},{"lineNumber":531,"author":{"gitId":"-"},"content":"            FeedbackRankRecipientsResponseDetails response \u003d"},{"lineNumber":532,"author":{"gitId":"-"},"content":"                    (FeedbackRankRecipientsResponseDetails) responses.get(i).getResponseDetailsCopy();"},{"lineNumber":533,"author":{"gitId":"-"},"content":"            if (response.getAnswer() \u003d\u003d Const.POINTS_NOT_SUBMITTED) {"},{"lineNumber":534,"author":{"gitId":"-"},"content":"                assertEquals(getSelectedDropdownOptionText(recipientDropdowns.get(i)), \"\");"},{"lineNumber":535,"author":{"gitId":"-"},"content":"            } else {"},{"lineNumber":536,"author":{"gitId":"-"},"content":"                assertEquals(getSelectedDropdownOptionText(recipientDropdowns.get(i)),"},{"lineNumber":537,"author":{"gitId":"-"},"content":"                        Integer.toString(response.getAnswer()));"},{"lineNumber":538,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":539,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":540,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":541,"author":{"gitId":"-"},"content":""},{"lineNumber":542,"author":{"gitId":"-"},"content":"    private String getCourseId() {"},{"lineNumber":543,"author":{"gitId":"-"},"content":"        return browser.driver.findElement(By.id(\"course-id\")).getText();"},{"lineNumber":544,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":545,"author":{"gitId":"-"},"content":""},{"lineNumber":546,"author":{"gitId":"-"},"content":"    private String getCourseName() {"},{"lineNumber":547,"author":{"gitId":"-"},"content":"        return browser.driver.findElement(By.id(\"course-name\")).getText();"},{"lineNumber":548,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":549,"author":{"gitId":"-"},"content":""},{"lineNumber":550,"author":{"gitId":"-"},"content":"    private String getCourseInstitute() {"},{"lineNumber":551,"author":{"gitId":"-"},"content":"        return browser.driver.findElement(By.id(\"course-institute\")).getText();"},{"lineNumber":552,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":553,"author":{"gitId":"-"},"content":""},{"lineNumber":554,"author":{"gitId":"-"},"content":"    private String getFeedbackSessionName() {"},{"lineNumber":555,"author":{"gitId":"-"},"content":"        return browser.driver.findElement(By.id(\"fs-name\")).getText();"},{"lineNumber":556,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":557,"author":{"gitId":"-"},"content":""},{"lineNumber":558,"author":{"gitId":"-"},"content":"    private String getOpeningTime() {"},{"lineNumber":559,"author":{"gitId":"-"},"content":"        return browser.driver.findElement(By.id(\"opening-time\")).getText();"},{"lineNumber":560,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":561,"author":{"gitId":"-"},"content":""},{"lineNumber":562,"author":{"gitId":"-"},"content":"    private String getClosingTime() {"},{"lineNumber":563,"author":{"gitId":"-"},"content":"        return browser.driver.findElement(By.id(\"closing-time\")).getText();"},{"lineNumber":564,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":565,"author":{"gitId":"-"},"content":""},{"lineNumber":566,"author":{"gitId":"-"},"content":"    private String getInstructions() {"},{"lineNumber":567,"author":{"gitId":"-"},"content":"        return browser.driver.findElement(By.id(\"instructions\")).getAttribute(\"innerHTML\");"},{"lineNumber":568,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":569,"author":{"gitId":"-"},"content":""},{"lineNumber":570,"author":{"gitId":"-"},"content":"    private void assertDateEquals(String actual, Instant instant, String timeZone) {"},{"lineNumber":571,"author":{"gitId":"-"},"content":"        String dateStrWithAbbr \u003d getDateStringWithAbbr(instant, timeZone);"},{"lineNumber":572,"author":{"gitId":"-"},"content":"        String dateStrWithOffset \u003d getDateStringWithOffset(instant, timeZone);"},{"lineNumber":573,"author":{"gitId":"-"},"content":""},{"lineNumber":574,"author":{"gitId":"-"},"content":"        boolean isExpected \u003d actual.equals(dateStrWithAbbr) || actual.equals(dateStrWithOffset);"},{"lineNumber":575,"author":{"gitId":"-"},"content":"        assertTrue(isExpected);"},{"lineNumber":576,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":577,"author":{"gitId":"-"},"content":""},{"lineNumber":578,"author":{"gitId":"-"},"content":"    private String getDateStringWithAbbr(Instant instant, String timeZone) {"},{"lineNumber":579,"author":{"gitId":"-"},"content":"        return getDisplayedDateTime(instant, timeZone, \"EE, dd MMM, yyyy, hh:mm a z\");"},{"lineNumber":580,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":581,"author":{"gitId":"-"},"content":""},{"lineNumber":582,"author":{"gitId":"-"},"content":"    private String getDateStringWithOffset(Instant instant, String timeZone) {"},{"lineNumber":583,"author":{"gitId":"-"},"content":"        return getDisplayedDateTime(instant, timeZone, \"EE, dd MMM, yyyy, hh:mm a X\");"},{"lineNumber":584,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":585,"author":{"gitId":"-"},"content":""},{"lineNumber":586,"author":{"gitId":"-"},"content":"    private WebElement getQuestionForm(int qnNumber) {"},{"lineNumber":587,"author":{"gitId":"-"},"content":"        By questionFormId \u003d By.id(\"question-submission-form-qn-\" + qnNumber);"},{"lineNumber":588,"author":{"gitId":"-"},"content":"        waitForElementPresence(questionFormId);"},{"lineNumber":589,"author":{"gitId":"-"},"content":"        WebElement questionForm \u003d browser.driver.findElement(questionFormId);"},{"lineNumber":590,"author":{"gitId":"-"},"content":"        // Scroll to the question to ensure that the details are fully loaded"},{"lineNumber":591,"author":{"gitId":"-"},"content":"        scrollElementToCenter(questionForm);"},{"lineNumber":592,"author":{"gitId":"-"},"content":"        waitUntilAnimationFinish();"},{"lineNumber":593,"author":{"gitId":"-"},"content":"        return questionForm;"},{"lineNumber":594,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":595,"author":{"gitId":"-"},"content":""},{"lineNumber":596,"author":{"gitId":"-"},"content":"    private String getQuestionBrief(int qnNumber) {"},{"lineNumber":597,"author":{"gitId":"-"},"content":"        String questionDetails \u003d getQuestionForm(qnNumber).findElement(By.className(\"question-details\")).getText();"},{"lineNumber":598,"author":{"gitId":"-"},"content":"        return questionDetails.split(\": \")[1];"},{"lineNumber":599,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":600,"author":{"gitId":"-"},"content":""},{"lineNumber":601,"author":{"gitId":"-"},"content":"    private void verifyVisibilityList(int qnNumber, FeedbackQuestionAttributes questionAttributes) {"},{"lineNumber":602,"author":{"gitId":"-"},"content":"        if (questionAttributes.getShowResponsesTo().isEmpty()) {"},{"lineNumber":603,"author":{"gitId":"-"},"content":"            verifyVisibilityStringPresent(qnNumber, \"No-one can see your responses\");"},{"lineNumber":604,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":605,"author":{"gitId":"-"},"content":"        if (questionAttributes.getRecipientType().equals(FeedbackParticipantType.SELF)) {"},{"lineNumber":606,"author":{"gitId":"-"},"content":"            verifyVisibilityStringPresent(qnNumber, \"You can see your own feedback in the results page later on.\");"},{"lineNumber":607,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":608,"author":{"gitId":"-"},"content":"        for (FeedbackParticipantType viewerType : questionAttributes.getShowResponsesTo()) {"},{"lineNumber":609,"author":{"gitId":"-"},"content":"            verifyVisibilityStringPresent(qnNumber, getVisibilityString(questionAttributes, viewerType));"},{"lineNumber":610,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":611,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":612,"author":{"gitId":"-"},"content":""},{"lineNumber":613,"author":{"gitId":"-"},"content":"    private void verifyVisibilityStringPresent(int qnNumber, String expectedString) {"},{"lineNumber":614,"author":{"gitId":"-"},"content":"        List\u003cWebElement\u003e visibilityStrings \u003d getQuestionForm(qnNumber).findElement(By.className(\"visibility-list\"))"},{"lineNumber":615,"author":{"gitId":"-"},"content":"                .findElements(By.tagName(\"li\"));"},{"lineNumber":616,"author":{"gitId":"-"},"content":"        for (WebElement visibilityString : visibilityStrings) {"},{"lineNumber":617,"author":{"gitId":"-"},"content":"            if (visibilityString.getText().equals(expectedString)) {"},{"lineNumber":618,"author":{"gitId":"-"},"content":"                return;"},{"lineNumber":619,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":620,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":621,"author":{"gitId":"-"},"content":"        fail(\"Expected visibility string not found: \" + qnNumber + \": \" + expectedString);"},{"lineNumber":622,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":623,"author":{"gitId":"-"},"content":""},{"lineNumber":624,"author":{"gitId":"-"},"content":"    private String getVisibilityString(FeedbackQuestionAttributes questionAttributes,"},{"lineNumber":625,"author":{"gitId":"-"},"content":"                                       FeedbackParticipantType viewerType) {"},{"lineNumber":626,"author":{"gitId":"-"},"content":"        if (!questionAttributes.getShowResponsesTo().contains(viewerType)) {"},{"lineNumber":627,"author":{"gitId":"-"},"content":"            return \"\";"},{"lineNumber":628,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":629,"author":{"gitId":"-"},"content":""},{"lineNumber":630,"author":{"gitId":"-"},"content":"        StringBuilder message \u003d new StringBuilder(getViewerString(viewerType, questionAttributes.getRecipientType()));"},{"lineNumber":631,"author":{"gitId":"-"},"content":"        message.append(\" can see your response\");"},{"lineNumber":632,"author":{"gitId":"-"},"content":"        if (questionAttributes.getShowRecipientNameTo().contains(viewerType)) {"},{"lineNumber":633,"author":{"gitId":"-"},"content":"            message.append(\", the name of the recipient\");"},{"lineNumber":634,"author":{"gitId":"-"},"content":"            if (questionAttributes.getShowGiverNameTo().contains(viewerType)) {"},{"lineNumber":635,"author":{"gitId":"-"},"content":"                message.append(\", and your name\");"},{"lineNumber":636,"author":{"gitId":"-"},"content":"            } else {"},{"lineNumber":637,"author":{"gitId":"-"},"content":"                message.append(\", but not your name\");"},{"lineNumber":638,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":639,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":640,"author":{"gitId":"-"},"content":"            if (questionAttributes.getShowGiverNameTo().contains(viewerType)) {"},{"lineNumber":641,"author":{"gitId":"-"},"content":"                message.append(\", and your name, but not the name of the recipient\");"},{"lineNumber":642,"author":{"gitId":"-"},"content":"            } else {"},{"lineNumber":643,"author":{"gitId":"-"},"content":"                message.append(\", but not the name of the recipient, or your name\");"},{"lineNumber":644,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":645,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":646,"author":{"gitId":"-"},"content":"        return message.toString();"},{"lineNumber":647,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":648,"author":{"gitId":"-"},"content":""},{"lineNumber":649,"author":{"gitId":"-"},"content":"    private String getViewerString(FeedbackParticipantType viewerType, FeedbackParticipantType recipientType) {"},{"lineNumber":650,"author":{"gitId":"-"},"content":"        switch (viewerType) {"},{"lineNumber":651,"author":{"gitId":"-"},"content":"        case RECEIVER:"},{"lineNumber":652,"author":{"gitId":"-"},"content":"            return \"The receiving \" + getRecipientString(recipientType);"},{"lineNumber":653,"author":{"gitId":"-"},"content":"        case OWN_TEAM_MEMBERS:"},{"lineNumber":654,"author":{"gitId":"-"},"content":"            return \"Your team members\";"},{"lineNumber":655,"author":{"gitId":"-"},"content":"        case STUDENTS:"},{"lineNumber":656,"author":{"gitId":"-"},"content":"            return \"Other students in the course\";"},{"lineNumber":657,"author":{"gitId":"-"},"content":"        case INSTRUCTORS:"},{"lineNumber":658,"author":{"gitId":"-"},"content":"            return \"Instructors in this course\";"},{"lineNumber":659,"author":{"gitId":"-"},"content":"        default:"},{"lineNumber":660,"author":{"gitId":"-"},"content":"            throw new RuntimeException(\"Unknown viewer type\");"},{"lineNumber":661,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":662,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":663,"author":{"gitId":"-"},"content":""},{"lineNumber":664,"author":{"gitId":"-"},"content":"    private String getRecipientString(FeedbackParticipantType recipientType) {"},{"lineNumber":665,"author":{"gitId":"-"},"content":"        switch (recipientType) {"},{"lineNumber":666,"author":{"gitId":"-"},"content":"        case TEAMS:"},{"lineNumber":667,"author":{"gitId":"-"},"content":"        case TEAMS_EXCLUDING_SELF:"},{"lineNumber":668,"author":{"gitId":"-"},"content":"        case TEAMS_IN_SAME_SECTION:"},{"lineNumber":669,"author":{"gitId":"-"},"content":"            return \"teams\";"},{"lineNumber":670,"author":{"gitId":"-"},"content":"        case OWN_TEAM_MEMBERS:"},{"lineNumber":671,"author":{"gitId":"-"},"content":"            return \"student\";"},{"lineNumber":672,"author":{"gitId":"-"},"content":"        case STUDENTS:"},{"lineNumber":673,"author":{"gitId":"-"},"content":"        case STUDENTS_EXCLUDING_SELF:"},{"lineNumber":674,"author":{"gitId":"-"},"content":"        case STUDENTS_IN_SAME_SECTION:"},{"lineNumber":675,"author":{"gitId":"-"},"content":"            return \"students\";"},{"lineNumber":676,"author":{"gitId":"-"},"content":"        case INSTRUCTORS:"},{"lineNumber":677,"author":{"gitId":"-"},"content":"            return \"instructors\";"},{"lineNumber":678,"author":{"gitId":"-"},"content":"        default:"},{"lineNumber":679,"author":{"gitId":"-"},"content":"            throw new RuntimeException(\"Unknown recipientType\");"},{"lineNumber":680,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":681,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":682,"author":{"gitId":"-"},"content":""},{"lineNumber":683,"author":{"gitId":"-"},"content":"    public void clickSubmitQuestionButton(int qnNumber) {"},{"lineNumber":684,"author":{"gitId":"-"},"content":"        WebElement submitQnButton \u003d waitForElementPresence(By.id(\"btn-submit-qn-\" + qnNumber));"},{"lineNumber":685,"author":{"gitId":"-"},"content":"        clickAndConfirm(submitQnButton);"},{"lineNumber":686,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":687,"author":{"gitId":"-"},"content":""},{"lineNumber":688,"author":{"gitId":"-"},"content":"    public void clickSubmitAllQuestionsButton() {"},{"lineNumber":689,"author":{"gitId":"-"},"content":"        clickAndConfirm(getSubmitAllQuestionsButton());"},{"lineNumber":690,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":691,"author":{"gitId":"-"},"content":""},{"lineNumber":692,"author":{"gitId":"-"},"content":"    private WebElement getSubmitAllQuestionsButton() {"},{"lineNumber":693,"author":{"gitId":"-"},"content":"        return waitForElementPresence(By.id(\"btn-submit\"));"},{"lineNumber":694,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":695,"author":{"gitId":"-"},"content":""},{"lineNumber":696,"author":{"gitId":"-"},"content":"    private String getQuestionDescription(int qnNumber) {"},{"lineNumber":697,"author":{"gitId":"-"},"content":"        return getQuestionForm(qnNumber).findElement(By.className(\"question-description\")).getAttribute(\"innerHTML\");"},{"lineNumber":698,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":699,"author":{"gitId":"-"},"content":""},{"lineNumber":700,"author":{"gitId":"-"},"content":"    private WebElement getCommentSection(int qnNumber, String recipient) {"},{"lineNumber":701,"author":{"gitId":"-"},"content":"        int recipientIndex \u003d getRecipientIndex(qnNumber, recipient);"},{"lineNumber":702,"author":{"gitId":"-"},"content":"        return getQuestionForm(qnNumber).findElement(By.id(\"comment-section-qn-\" + qnNumber + \"-idx-\" + recipientIndex));"},{"lineNumber":703,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":704,"author":{"gitId":"-"},"content":""},{"lineNumber":705,"author":{"gitId":"-"},"content":"    private void writeToCommentEditor(WebElement commentSection, String comment) {"},{"lineNumber":706,"author":{"gitId":"-"},"content":"        scrollElementToCenter(commentSection);"},{"lineNumber":707,"author":{"gitId":"-"},"content":"        waitForElementPresence(By.tagName(\"editor\"));"},{"lineNumber":708,"author":{"gitId":"-"},"content":"        writeToRichTextEditor(commentSection.findElement(By.tagName(\"editor\")), comment);"},{"lineNumber":709,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":710,"author":{"gitId":"-"},"content":""},{"lineNumber":711,"author":{"gitId":"-"},"content":"    private int getRecipientIndex(int qnNumber, String recipient) {"},{"lineNumber":712,"author":{"gitId":"-"},"content":"        // For questions with recipient none or self."},{"lineNumber":713,"author":{"gitId":"-"},"content":"        if (recipient.isEmpty()) {"},{"lineNumber":714,"author":{"gitId":"-"},"content":"            return 0;"},{"lineNumber":715,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":716,"author":{"gitId":"-"},"content":"        WebElement questionForm \u003d getQuestionForm(qnNumber);"},{"lineNumber":717,"author":{"gitId":"-"},"content":"        // For questions with flexible recipient."},{"lineNumber":718,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":719,"author":{"gitId":"-"},"content":"            List\u003cWebElement\u003e recipientDropdowns \u003d"},{"lineNumber":720,"author":{"gitId":"-"},"content":"                    questionForm.findElements(By.cssSelector(\"[id^\u003d\u0027recipient-dropdown-qn-\u0027]\"));"},{"lineNumber":721,"author":{"gitId":"-"},"content":"            for (int i \u003d 0; i \u003c recipientDropdowns.size(); i++) {"},{"lineNumber":722,"author":{"gitId":"-"},"content":"                String dropdownText \u003d getSelectedDropdownOptionText(recipientDropdowns.get(i));"},{"lineNumber":723,"author":{"gitId":"-"},"content":"                if (dropdownText.isEmpty()) {"},{"lineNumber":724,"author":{"gitId":"-"},"content":"                    selectDropdownOptionByText(recipientDropdowns.get(i), recipient);"},{"lineNumber":725,"author":{"gitId":"-"},"content":"                    return i;"},{"lineNumber":726,"author":{"gitId":"-"},"content":"                } else if (dropdownText.equals(recipient)) {"},{"lineNumber":727,"author":{"gitId":"-"},"content":"                    return i;"},{"lineNumber":728,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":729,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":730,"author":{"gitId":"-"},"content":"        } catch (NoSuchElementException e) {"},{"lineNumber":731,"author":{"gitId":"-"},"content":"            // continue"},{"lineNumber":732,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":733,"author":{"gitId":"-"},"content":"        int limit \u003d 20; // we are not likely to set test data exceeding this number"},{"lineNumber":734,"author":{"gitId":"-"},"content":"        for (int i \u003d 0; i \u003c limit; i++) {"},{"lineNumber":735,"author":{"gitId":"-"},"content":"            if (questionForm.findElement(By.id(\"recipient-name-qn-\" + qnNumber + \"-idx-\" + i))"},{"lineNumber":736,"author":{"gitId":"-"},"content":"                    .getText().contains(recipient)) {"},{"lineNumber":737,"author":{"gitId":"-"},"content":"                return i;"},{"lineNumber":738,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":739,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":740,"author":{"gitId":"-"},"content":"        return -1;"},{"lineNumber":741,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":742,"author":{"gitId":"-"},"content":""},{"lineNumber":743,"author":{"gitId":"-"},"content":"    private WebElement getTextResponseEditor(int qnNumber, String recipient) {"},{"lineNumber":744,"author":{"gitId":"-"},"content":"        int recipientIndex \u003d getRecipientIndex(qnNumber, recipient);"},{"lineNumber":745,"author":{"gitId":"-"},"content":"        WebElement questionForm \u003d getQuestionForm(qnNumber);"},{"lineNumber":746,"author":{"gitId":"-"},"content":"        WebElement editor \u003d questionForm.findElements(By.tagName(\"tm-rich-text-editor\")).get(recipientIndex);"},{"lineNumber":747,"author":{"gitId":"-"},"content":"        scrollElementToCenter(editor);"},{"lineNumber":748,"author":{"gitId":"-"},"content":"        return editor;"},{"lineNumber":749,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":750,"author":{"gitId":"-"},"content":""},{"lineNumber":751,"author":{"gitId":"-"},"content":"    private String getResponseLengthText(int qnNumber, String recipient) {"},{"lineNumber":752,"author":{"gitId":"-"},"content":"        int recipientIndex \u003d getRecipientIndex(qnNumber, recipient);"},{"lineNumber":753,"author":{"gitId":"-"},"content":"        return getQuestionForm(qnNumber).findElements(By.id(\"response-length\")).get(recipientIndex).getText();"},{"lineNumber":754,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":755,"author":{"gitId":"-"},"content":""},{"lineNumber":756,"author":{"gitId":"-"},"content":"    private String getDoubleString(Double value) {"},{"lineNumber":757,"author":{"gitId":"-"},"content":"        return value % 1 \u003d\u003d 0 ? Integer.toString(value.intValue()) : Double.toString(value);"},{"lineNumber":758,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":759,"author":{"gitId":"-"},"content":""},{"lineNumber":760,"author":{"gitId":"-"},"content":"    private WebElement getMcqSection(int qnNumber, String recipient) {"},{"lineNumber":761,"author":{"gitId":"-"},"content":"        int recipientIndex \u003d getRecipientIndex(qnNumber, recipient);"},{"lineNumber":762,"author":{"gitId":"-"},"content":"        WebElement questionForm \u003d getQuestionForm(qnNumber);"},{"lineNumber":763,"author":{"gitId":"-"},"content":"        return questionForm.findElements(By.tagName(\"tm-mcq-question-edit-answer-form\")).get(recipientIndex);"},{"lineNumber":764,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":765,"author":{"gitId":"-"},"content":""},{"lineNumber":766,"author":{"gitId":"-"},"content":"    private WebElement getMcqOtherOptionRadioBtn(int qnNumber, String recipient) {"},{"lineNumber":767,"author":{"gitId":"-"},"content":"        WebElement mcqSection \u003d getMcqSection(qnNumber, recipient);"},{"lineNumber":768,"author":{"gitId":"-"},"content":"        return mcqSection.findElement(By.cssSelector(\"#other-option input[type\u003dradio]\"));"},{"lineNumber":769,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":770,"author":{"gitId":"-"},"content":""},{"lineNumber":771,"author":{"gitId":"-"},"content":"    private WebElement getMcqOtherOptionTextbox(int qnNumber, String recipient) {"},{"lineNumber":772,"author":{"gitId":"-"},"content":"        WebElement mcqSection \u003d getMcqSection(qnNumber, recipient);"},{"lineNumber":773,"author":{"gitId":"-"},"content":"        return mcqSection.findElement(By.cssSelector(\"#other-option input[type\u003dtext]\"));"},{"lineNumber":774,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":775,"author":{"gitId":"-"},"content":""},{"lineNumber":776,"author":{"gitId":"-"},"content":"    private List\u003cWebElement\u003e getMcqOptions(int qnNumber, String recipient) {"},{"lineNumber":777,"author":{"gitId":"-"},"content":"        WebElement mcqSection \u003d getMcqSection(qnNumber, recipient);"},{"lineNumber":778,"author":{"gitId":"-"},"content":"        return mcqSection.findElements(By.className(\"option-text\"));"},{"lineNumber":779,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":780,"author":{"gitId":"-"},"content":""},{"lineNumber":781,"author":{"gitId":"-"},"content":"    private List\u003cWebElement\u003e getMcqRadioBtns(int qnNumber, String recipient) {"},{"lineNumber":782,"author":{"gitId":"-"},"content":"        WebElement mcqSection \u003d getMcqSection(qnNumber, recipient);"},{"lineNumber":783,"author":{"gitId":"-"},"content":"        return mcqSection.findElements(By.cssSelector(\"input[type\u003dradio]\"));"},{"lineNumber":784,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":785,"author":{"gitId":"-"},"content":""},{"lineNumber":786,"author":{"gitId":"-"},"content":"    private WebElement getMsqSection(int qnNumber, String recipient) {"},{"lineNumber":787,"author":{"gitId":"-"},"content":"        int recipientIndex \u003d getRecipientIndex(qnNumber, recipient);"},{"lineNumber":788,"author":{"gitId":"-"},"content":"        WebElement questionForm \u003d getQuestionForm(qnNumber);"},{"lineNumber":789,"author":{"gitId":"-"},"content":"        return questionForm.findElements(By.tagName(\"tm-msq-question-edit-answer-form\")).get(recipientIndex);"},{"lineNumber":790,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":791,"author":{"gitId":"-"},"content":""},{"lineNumber":792,"author":{"gitId":"-"},"content":"    private WebElement getMsqOtherOptionCheckbox(int qnNumber, String recipient) {"},{"lineNumber":793,"author":{"gitId":"-"},"content":"        WebElement msqSection \u003d getMsqSection(qnNumber, recipient);"},{"lineNumber":794,"author":{"gitId":"-"},"content":"        return msqSection.findElement(By.cssSelector(\"#other-option input[type\u003dcheckbox]\"));"},{"lineNumber":795,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":796,"author":{"gitId":"-"},"content":""},{"lineNumber":797,"author":{"gitId":"-"},"content":"    private WebElement getMsqOtherOptionTextbox(int qnNumber, String recipient) {"},{"lineNumber":798,"author":{"gitId":"-"},"content":"        WebElement msqSection \u003d getMsqSection(qnNumber, recipient);"},{"lineNumber":799,"author":{"gitId":"-"},"content":"        return msqSection.findElement(By.cssSelector(\"#other-option input[type\u003dtext]\"));"},{"lineNumber":800,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":801,"author":{"gitId":"-"},"content":""},{"lineNumber":802,"author":{"gitId":"-"},"content":"    private List\u003cWebElement\u003e getMsqOptions(int qnNumber, String recipient) {"},{"lineNumber":803,"author":{"gitId":"-"},"content":"        WebElement msqSection \u003d getMsqSection(qnNumber, recipient);"},{"lineNumber":804,"author":{"gitId":"-"},"content":"        return msqSection.findElements(By.tagName(\"strong\"));"},{"lineNumber":805,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":806,"author":{"gitId":"-"},"content":""},{"lineNumber":807,"author":{"gitId":"-"},"content":"    private List\u003cWebElement\u003e getMsqCheckboxes(int qnNumber, String recipient) {"},{"lineNumber":808,"author":{"gitId":"-"},"content":"        WebElement msqSection \u003d getMsqSection(qnNumber, recipient);"},{"lineNumber":809,"author":{"gitId":"-"},"content":"        return msqSection.findElements(By.cssSelector(\"input[type\u003dcheckbox]\"));"},{"lineNumber":810,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":811,"author":{"gitId":"-"},"content":""},{"lineNumber":812,"author":{"gitId":"-"},"content":"    private WebElement getNumScaleSection(int qnNumber, String recipient) {"},{"lineNumber":813,"author":{"gitId":"-"},"content":"        int recipientIndex \u003d getRecipientIndex(qnNumber, recipient);"},{"lineNumber":814,"author":{"gitId":"-"},"content":"        WebElement questionForm \u003d getQuestionForm(qnNumber);"},{"lineNumber":815,"author":{"gitId":"-"},"content":"        return questionForm.findElements(By.tagName(\"tm-num-scale-question-edit-answer-form\")).get(recipientIndex);"},{"lineNumber":816,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":817,"author":{"gitId":"-"},"content":""},{"lineNumber":818,"author":{"gitId":"-"},"content":"    private WebElement getNumScaleInput(int qnNumber, String recipient) {"},{"lineNumber":819,"author":{"gitId":"-"},"content":"        WebElement numScaleSection \u003d getNumScaleSection(qnNumber, recipient);"},{"lineNumber":820,"author":{"gitId":"-"},"content":"        return numScaleSection.findElement(By.tagName(\"input\"));"},{"lineNumber":821,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":822,"author":{"gitId":"-"},"content":""},{"lineNumber":823,"author":{"gitId":"-"},"content":"    private WebElement getConstSumOptionsSection(int qnNumber, String recipient) {"},{"lineNumber":824,"author":{"gitId":"-"},"content":"        int recipientIndex \u003d getRecipientIndex(qnNumber, recipient);"},{"lineNumber":825,"author":{"gitId":"-"},"content":"        WebElement questionForm \u003d getQuestionForm(qnNumber);"},{"lineNumber":826,"author":{"gitId":"-"},"content":"        return questionForm.findElements(By.tagName(\"tm-constsum-options-question-edit-answer-form\")).get(recipientIndex);"},{"lineNumber":827,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":828,"author":{"gitId":"-"},"content":""},{"lineNumber":829,"author":{"gitId":"-"},"content":"    private List\u003cWebElement\u003e getConstSumOptions(int qnNumber, String recipient) {"},{"lineNumber":830,"author":{"gitId":"-"},"content":"        WebElement constSumOptionSection \u003d getConstSumOptionsSection(qnNumber, recipient);"},{"lineNumber":831,"author":{"gitId":"-"},"content":"        return constSumOptionSection.findElements(By.tagName(\"strong\"));"},{"lineNumber":832,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":833,"author":{"gitId":"-"},"content":""},{"lineNumber":834,"author":{"gitId":"-"},"content":"    private List\u003cWebElement\u003e getConstSumInputs(int qnNumber, String recipient) {"},{"lineNumber":835,"author":{"gitId":"-"},"content":"        WebElement constSumOptionSection \u003d getConstSumOptionsSection(qnNumber, recipient);"},{"lineNumber":836,"author":{"gitId":"-"},"content":"        return constSumOptionSection.findElements(By.cssSelector(\"input[type\u003dnumber]\"));"},{"lineNumber":837,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":838,"author":{"gitId":"-"},"content":""},{"lineNumber":839,"author":{"gitId":"-"},"content":"    private List\u003cWebElement\u003e getConstSumRecipientInputs(int qnNumber) {"},{"lineNumber":840,"author":{"gitId":"-"},"content":"        return getQuestionForm(qnNumber).findElements(By.cssSelector(\"input[type\u003dnumber]\"));"},{"lineNumber":841,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":842,"author":{"gitId":"-"},"content":""},{"lineNumber":843,"author":{"gitId":"-"},"content":"    private List\u003cWebElement\u003e getContributionDropdowns(int questionNum) {"},{"lineNumber":844,"author":{"gitId":"-"},"content":"        return getQuestionForm(questionNum).findElements(By.tagName(\"select\"));"},{"lineNumber":845,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":846,"author":{"gitId":"-"},"content":""},{"lineNumber":847,"author":{"gitId":"-"},"content":"    private String getContributionString(int answer) {"},{"lineNumber":848,"author":{"gitId":"-"},"content":"        if (answer \u003d\u003d Const.POINTS_NOT_SURE) {"},{"lineNumber":849,"author":{"gitId":"-"},"content":"            return \"Not Sure\";"},{"lineNumber":850,"author":{"gitId":"-"},"content":"        } else if (answer \u003d\u003d Const.POINTS_EQUAL_SHARE) {"},{"lineNumber":851,"author":{"gitId":"-"},"content":"            return \"Equal share\";"},{"lineNumber":852,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":853,"author":{"gitId":"-"},"content":"            return \"Equal share\" + (answer \u003e 100 ? \" + \" : \" - \") + Math.abs(answer - 100) + \"%\";"},{"lineNumber":854,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":855,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":856,"author":{"gitId":"-"},"content":""},{"lineNumber":857,"author":{"gitId":"-"},"content":"    private WebElement getRubricSection(int qnNumber, String recipient) {"},{"lineNumber":858,"author":{"gitId":"-"},"content":"        int recipientIndex \u003d getRecipientIndex(qnNumber, recipient);"},{"lineNumber":859,"author":{"gitId":"-"},"content":"        WebElement questionForm \u003d getQuestionForm(qnNumber);"},{"lineNumber":860,"author":{"gitId":"-"},"content":"        return questionForm.findElements(By.tagName(\"tm-rubric-question-edit-answer-form\")).get(recipientIndex);"},{"lineNumber":861,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":862,"author":{"gitId":"-"},"content":""},{"lineNumber":863,"author":{"gitId":"-"},"content":"    private WebElement getRubricTable(int qnNumber, String recipient) {"},{"lineNumber":864,"author":{"gitId":"-"},"content":"        return getRubricSection(qnNumber, recipient).findElement(By.tagName(\"table\"));"},{"lineNumber":865,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":866,"author":{"gitId":"-"},"content":""},{"lineNumber":867,"author":{"gitId":"-"},"content":"    private List\u003cWebElement\u003e getRubricInputs(int qnNumber, String recipient, int rowNumber) {"},{"lineNumber":868,"author":{"gitId":"-"},"content":"        WebElement rubricRow \u003d getRubricSection(qnNumber, recipient).findElements(By.tagName(\"tr\")).get(rowNumber - 1);"},{"lineNumber":869,"author":{"gitId":"-"},"content":"        return rubricRow.findElements(By.tagName(\"input\"));"},{"lineNumber":870,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":871,"author":{"gitId":"-"},"content":""},{"lineNumber":872,"author":{"gitId":"-"},"content":"    private WebElement getRankOptionsSection(int qnNumber, String recipient) {"},{"lineNumber":873,"author":{"gitId":"-"},"content":"        int recipientIndex \u003d getRecipientIndex(qnNumber, recipient);"},{"lineNumber":874,"author":{"gitId":"-"},"content":"        WebElement questionForm \u003d getQuestionForm(qnNumber);"},{"lineNumber":875,"author":{"gitId":"-"},"content":"        return questionForm.findElements(By.tagName(\"tm-rank-options-question-edit-answer-form\")).get(recipientIndex);"},{"lineNumber":876,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":877,"author":{"gitId":"-"},"content":""},{"lineNumber":878,"author":{"gitId":"-"},"content":"    private List\u003cWebElement\u003e getRankOptions(int questionNum, String recipient) {"},{"lineNumber":879,"author":{"gitId":"-"},"content":"        WebElement rankSection \u003d getRankOptionsSection(questionNum, recipient);"},{"lineNumber":880,"author":{"gitId":"-"},"content":"        return rankSection.findElements(By.tagName(\"strong\"));"},{"lineNumber":881,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":882,"author":{"gitId":"-"},"content":""},{"lineNumber":883,"author":{"gitId":"-"},"content":"    private List\u003cWebElement\u003e getRankOptionsDropdowns(int questionNum, String recipient) {"},{"lineNumber":884,"author":{"gitId":"-"},"content":"        WebElement rankSection \u003d getRankOptionsSection(questionNum, recipient);"},{"lineNumber":885,"author":{"gitId":"-"},"content":"        return rankSection.findElements(By.tagName(\"select\"));"},{"lineNumber":886,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":887,"author":{"gitId":"-"},"content":""},{"lineNumber":888,"author":{"gitId":"-"},"content":"    private List\u003cWebElement\u003e getRankRecipientDropdowns(int questionNum) {"},{"lineNumber":889,"author":{"gitId":"-"},"content":"        return getQuestionForm(questionNum).findElements(By.tagName(\"select\"));"},{"lineNumber":890,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":891,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"jasonqiu212":16,"-":875}},{"path":"src/e2e/java/teammates/e2e/pageobjects/InstructorFeedbackEditPage.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.e2e.pageobjects;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import static org.junit.Assert.assertEquals;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import static org.junit.Assert.assertFalse;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import static org.junit.Assert.assertTrue;"},{"lineNumber":6,"author":{"gitId":"-"},"content":""},{"lineNumber":7,"author":{"gitId":"-"},"content":"import java.time.Instant;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import java.time.ZoneId;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import java.time.ZonedDateTime;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import java.util.ArrayList;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import java.util.Arrays;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":13,"author":{"gitId":"-"},"content":""},{"lineNumber":14,"author":{"gitId":"-"},"content":"import org.openqa.selenium.By;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import org.openqa.selenium.Keys;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"import org.openqa.selenium.WebElement;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"import org.openqa.selenium.support.FindBy;"},{"lineNumber":18,"author":{"gitId":"-"},"content":""},{"lineNumber":19,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.FeedbackParticipantType;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.CourseAttributes;"},{"lineNumber":21,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;"},{"lineNumber":22,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackSessionAttributes;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.InstructorAttributes;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.StudentAttributes;"},{"lineNumber":25,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackConstantSumQuestionDetails;"},{"lineNumber":26,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackContributionQuestionDetails;"},{"lineNumber":27,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackMcqQuestionDetails;"},{"lineNumber":28,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackMsqQuestionDetails;"},{"lineNumber":29,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackNumericalScaleQuestionDetails;"},{"lineNumber":30,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackQuestionType;"},{"lineNumber":31,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackRankOptionsQuestionDetails;"},{"lineNumber":32,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackRankQuestionDetails;"},{"lineNumber":33,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackRubricQuestionDetails;"},{"lineNumber":34,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackTextQuestionDetails;"},{"lineNumber":35,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":36,"author":{"gitId":"-"},"content":"import teammates.test.ThreadHelper;"},{"lineNumber":37,"author":{"gitId":"-"},"content":""},{"lineNumber":38,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":39,"author":{"gitId":"-"},"content":" * Represents the instructor feedback edit page of the website."},{"lineNumber":40,"author":{"gitId":"-"},"content":" */"},{"lineNumber":41,"author":{"gitId":"-"},"content":"public class InstructorFeedbackEditPage extends AppPage {"},{"lineNumber":42,"author":{"gitId":"-"},"content":"    private static final String CUSTOM_FEEDBACK_PATH_OPTION \u003d \"Custom feedback path\";"},{"lineNumber":43,"author":{"gitId":"-"},"content":"    private static final String FEEDBACK_PATH_SEPARATOR \u003d \" will give feedback on \";"},{"lineNumber":44,"author":{"gitId":"-"},"content":"    private static final String CUSTOM_VISIBILITY_OPTION \u003d \"Custom visibility options\";"},{"lineNumber":45,"author":{"gitId":"-"},"content":""},{"lineNumber":46,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"btn-fs-edit\")"},{"lineNumber":47,"author":{"gitId":"-"},"content":"    private WebElement fsEditButton;"},{"lineNumber":48,"author":{"gitId":"-"},"content":""},{"lineNumber":49,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"btn-fs-save\")"},{"lineNumber":50,"author":{"gitId":"-"},"content":"    private WebElement fsSaveButton;"},{"lineNumber":51,"author":{"gitId":"-"},"content":""},{"lineNumber":52,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"btn-fs-copy\")"},{"lineNumber":53,"author":{"gitId":"-"},"content":"    private WebElement fsCopyButton;"},{"lineNumber":54,"author":{"gitId":"-"},"content":""},{"lineNumber":55,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"edit-course-id\")"},{"lineNumber":56,"author":{"gitId":"-"},"content":"    private WebElement courseIdTextBox;"},{"lineNumber":57,"author":{"gitId":"-"},"content":""},{"lineNumber":58,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"time-zone\")"},{"lineNumber":59,"author":{"gitId":"-"},"content":"    private WebElement timezoneDropDown;"},{"lineNumber":60,"author":{"gitId":"-"},"content":""},{"lineNumber":61,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"course-name\")"},{"lineNumber":62,"author":{"gitId":"-"},"content":"    private WebElement courseNameTextBox;"},{"lineNumber":63,"author":{"gitId":"-"},"content":""},{"lineNumber":64,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"edit-session-name\")"},{"lineNumber":65,"author":{"gitId":"-"},"content":"    private WebElement sessionNameTextBox;"},{"lineNumber":66,"author":{"gitId":"-"},"content":""},{"lineNumber":67,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"instructions\")"},{"lineNumber":68,"author":{"gitId":"-"},"content":"    private WebElement instructionsEditor;"},{"lineNumber":69,"author":{"gitId":"-"},"content":""},{"lineNumber":70,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"submission-start-date\")"},{"lineNumber":71,"author":{"gitId":"-"},"content":"    private WebElement startDateBox;"},{"lineNumber":72,"author":{"gitId":"-"},"content":""},{"lineNumber":73,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"submission-start-time\")"},{"lineNumber":74,"author":{"gitId":"-"},"content":"    private WebElement startTimeDropdown;"},{"lineNumber":75,"author":{"gitId":"-"},"content":""},{"lineNumber":76,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"submission-end-date\")"},{"lineNumber":77,"author":{"gitId":"-"},"content":"    private WebElement endDateBox;"},{"lineNumber":78,"author":{"gitId":"-"},"content":""},{"lineNumber":79,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"submission-end-time\")"},{"lineNumber":80,"author":{"gitId":"-"},"content":"    private WebElement endTimeDropdown;"},{"lineNumber":81,"author":{"gitId":"-"},"content":""},{"lineNumber":82,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"grace-period\")"},{"lineNumber":83,"author":{"gitId":"-"},"content":"    private WebElement gracePeriodDropdown;"},{"lineNumber":84,"author":{"gitId":"-"},"content":""},{"lineNumber":85,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"submission-status\")"},{"lineNumber":86,"author":{"gitId":"-"},"content":"    private WebElement submissionStatusTextBox;"},{"lineNumber":87,"author":{"gitId":"-"},"content":""},{"lineNumber":88,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"published-status\")"},{"lineNumber":89,"author":{"gitId":"-"},"content":"    private WebElement publishStatusTextBox;"},{"lineNumber":90,"author":{"gitId":"-"},"content":""},{"lineNumber":91,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"btn-change-visibility\")"},{"lineNumber":92,"author":{"gitId":"-"},"content":"    private WebElement changeVisibilityButton;"},{"lineNumber":93,"author":{"gitId":"-"},"content":""},{"lineNumber":94,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"session-visibility-custom\")"},{"lineNumber":95,"author":{"gitId":"-"},"content":"    private WebElement customSessionVisibleTimeButton;"},{"lineNumber":96,"author":{"gitId":"-"},"content":""},{"lineNumber":97,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"session-visibility-date\")"},{"lineNumber":98,"author":{"gitId":"-"},"content":"    private WebElement sessionVisibilityDateBox;"},{"lineNumber":99,"author":{"gitId":"-"},"content":""},{"lineNumber":100,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"session-visibility-time\")"},{"lineNumber":101,"author":{"gitId":"-"},"content":"    private WebElement sessionVisibilityTimeDropdown;"},{"lineNumber":102,"author":{"gitId":"-"},"content":""},{"lineNumber":103,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"session-visibility-at-open\")"},{"lineNumber":104,"author":{"gitId":"-"},"content":"    private WebElement openSessionVisibleTimeButton;"},{"lineNumber":105,"author":{"gitId":"-"},"content":""},{"lineNumber":106,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"response-visibility-custom\")"},{"lineNumber":107,"author":{"gitId":"-"},"content":"    private WebElement customResponseVisibleTimeButton;"},{"lineNumber":108,"author":{"gitId":"-"},"content":""},{"lineNumber":109,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"response-visibility-date\")"},{"lineNumber":110,"author":{"gitId":"-"},"content":"    private WebElement responseVisibilityDateBox;"},{"lineNumber":111,"author":{"gitId":"-"},"content":""},{"lineNumber":112,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"response-visibility-time\")"},{"lineNumber":113,"author":{"gitId":"-"},"content":"    private WebElement responseVisibilityTimeDropdown;"},{"lineNumber":114,"author":{"gitId":"-"},"content":""},{"lineNumber":115,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"response-visibility-immediately\")"},{"lineNumber":116,"author":{"gitId":"-"},"content":"    private WebElement immediateResponseVisibleTimeButton;"},{"lineNumber":117,"author":{"gitId":"-"},"content":""},{"lineNumber":118,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"response-visibility-manually\")"},{"lineNumber":119,"author":{"gitId":"-"},"content":"    private WebElement manualResponseVisibleTimeButton;"},{"lineNumber":120,"author":{"gitId":"-"},"content":""},{"lineNumber":121,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"btn-change-email\")"},{"lineNumber":122,"author":{"gitId":"-"},"content":"    private WebElement changeEmailButton;"},{"lineNumber":123,"author":{"gitId":"-"},"content":""},{"lineNumber":124,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"email-opening\")"},{"lineNumber":125,"author":{"gitId":"-"},"content":"    private WebElement openingSessionEmailCheckbox;"},{"lineNumber":126,"author":{"gitId":"-"},"content":""},{"lineNumber":127,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"email-closing\")"},{"lineNumber":128,"author":{"gitId":"-"},"content":"    private WebElement closingSessionEmailCheckbox;"},{"lineNumber":129,"author":{"gitId":"-"},"content":""},{"lineNumber":130,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"email-published\")"},{"lineNumber":131,"author":{"gitId":"-"},"content":"    private WebElement publishedSessionEmailCheckbox;"},{"lineNumber":132,"author":{"gitId":"-"},"content":""},{"lineNumber":133,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"btn-new-question\")"},{"lineNumber":134,"author":{"gitId":"-"},"content":"    private WebElement addNewQuestionButton;"},{"lineNumber":135,"author":{"gitId":"-"},"content":""},{"lineNumber":136,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"btn-copy-question\")"},{"lineNumber":137,"author":{"gitId":"-"},"content":"    private WebElement copyQuestionButton;"},{"lineNumber":138,"author":{"gitId":"-"},"content":""},{"lineNumber":139,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"preview-student\")"},{"lineNumber":140,"author":{"gitId":"-"},"content":"    private WebElement previewAsStudentDropdown;"},{"lineNumber":141,"author":{"gitId":"-"},"content":""},{"lineNumber":142,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"btn-preview-student\")"},{"lineNumber":143,"author":{"gitId":"-"},"content":"    private WebElement previewAsStudentButton;"},{"lineNumber":144,"author":{"gitId":"-"},"content":""},{"lineNumber":145,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"preview-instructor\")"},{"lineNumber":146,"author":{"gitId":"-"},"content":"    private WebElement previewAsInstructorDropdown;"},{"lineNumber":147,"author":{"gitId":"-"},"content":""},{"lineNumber":148,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"btn-preview-instructor\")"},{"lineNumber":149,"author":{"gitId":"-"},"content":"    private WebElement previewAsInstructorButton;"},{"lineNumber":150,"author":{"gitId":"-"},"content":""},{"lineNumber":151,"author":{"gitId":"-"},"content":"    public InstructorFeedbackEditPage(Browser browser) {"},{"lineNumber":152,"author":{"gitId":"-"},"content":"        super(browser);"},{"lineNumber":153,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":154,"author":{"gitId":"-"},"content":""},{"lineNumber":155,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":156,"author":{"gitId":"-"},"content":"    protected boolean containsExpectedPageContents() {"},{"lineNumber":157,"author":{"gitId":"-"},"content":"        return getPageTitle().contains(\"Edit Feedback Session\");"},{"lineNumber":158,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":159,"author":{"gitId":"-"},"content":""},{"lineNumber":160,"author":{"gitId":"-"},"content":"    public void verifySessionDetails(CourseAttributes course, FeedbackSessionAttributes feedbackSession) {"},{"lineNumber":161,"author":{"gitId":"-"},"content":"        waitForElementPresence(By.id(\"instructions\"));"},{"lineNumber":162,"author":{"gitId":"-"},"content":"        assertEquals(getCourseId(), course.getId());"},{"lineNumber":163,"author":{"gitId":"-"},"content":"        assertEquals(getCourseName(), course.getName());"},{"lineNumber":164,"author":{"gitId":"-"},"content":"        assertEquals(getTimeZone(), feedbackSession.getTimeZone());"},{"lineNumber":165,"author":{"gitId":"-"},"content":"        assertEquals(getFeedbackSessionName(), feedbackSession.getFeedbackSessionName());"},{"lineNumber":166,"author":{"gitId":"-"},"content":"        assertEquals(getInstructions(), feedbackSession.getInstructions());"},{"lineNumber":167,"author":{"gitId":"-"},"content":"        assertEquals(getStartDate(), getDateString(feedbackSession.getStartTime(), feedbackSession.getTimeZone()));"},{"lineNumber":168,"author":{"gitId":"-"},"content":"        assertEquals(getStartTime(), getTimeString(feedbackSession.getStartTime(), feedbackSession.getTimeZone()));"},{"lineNumber":169,"author":{"gitId":"-"},"content":"        assertEquals(getEndDate(), getDateString(feedbackSession.getEndTime(), feedbackSession.getTimeZone()));"},{"lineNumber":170,"author":{"gitId":"-"},"content":"        assertEquals(getEndTime(), getTimeString(feedbackSession.getEndTime(), feedbackSession.getTimeZone()));"},{"lineNumber":171,"author":{"gitId":"-"},"content":"        assertEquals(getGracePeriod(), feedbackSession.getGracePeriodMinutes() + \" min\");"},{"lineNumber":172,"author":{"gitId":"-"},"content":"        verifySubmissionStatus(feedbackSession);"},{"lineNumber":173,"author":{"gitId":"-"},"content":"        verifyPublishedStatus(feedbackSession);"},{"lineNumber":174,"author":{"gitId":"-"},"content":"        verifyVisibilitySettings(feedbackSession);"},{"lineNumber":175,"author":{"gitId":"-"},"content":"        verifyEmailSettings(feedbackSession);"},{"lineNumber":176,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":177,"author":{"gitId":"-"},"content":""},{"lineNumber":178,"author":{"gitId":"-"},"content":"    private void verifySubmissionStatus(FeedbackSessionAttributes feedbackSession) {"},{"lineNumber":179,"author":{"gitId":"-"},"content":"        String submissionStatus \u003d getSubmissionStatus();"},{"lineNumber":180,"author":{"gitId":"-"},"content":"        if (feedbackSession.isClosed()) {"},{"lineNumber":181,"author":{"gitId":"-"},"content":"            assertEquals(submissionStatus, \"Closed\");"},{"lineNumber":182,"author":{"gitId":"-"},"content":"        } else if (feedbackSession.isVisible() \u0026\u0026 (feedbackSession.isOpened() || feedbackSession.isInGracePeriod())) {"},{"lineNumber":183,"author":{"gitId":"-"},"content":"            assertEquals(submissionStatus, \"Open\");"},{"lineNumber":184,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":185,"author":{"gitId":"-"},"content":"            assertEquals(submissionStatus, \"Awaiting\");"},{"lineNumber":186,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":187,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":188,"author":{"gitId":"-"},"content":""},{"lineNumber":189,"author":{"gitId":"-"},"content":"    private void verifyPublishedStatus(FeedbackSessionAttributes feedbackSession) {"},{"lineNumber":190,"author":{"gitId":"-"},"content":"        String publishedStatus \u003d getPublishedStatus();"},{"lineNumber":191,"author":{"gitId":"-"},"content":"        if (feedbackSession.isPublished()) {"},{"lineNumber":192,"author":{"gitId":"-"},"content":"            assertEquals(publishedStatus, \"Published\");"},{"lineNumber":193,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":194,"author":{"gitId":"-"},"content":"            assertEquals(publishedStatus, \"Not Published\");"},{"lineNumber":195,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":196,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":197,"author":{"gitId":"-"},"content":""},{"lineNumber":198,"author":{"gitId":"-"},"content":"    private void verifyVisibilitySettings(FeedbackSessionAttributes feedbackSession) {"},{"lineNumber":199,"author":{"gitId":"-"},"content":"        Instant sessionVisibleTime \u003d feedbackSession.getSessionVisibleFromTime();"},{"lineNumber":200,"author":{"gitId":"-"},"content":"        Instant responseVisibleTime \u003d feedbackSession.getResultsVisibleFromTime();"},{"lineNumber":201,"author":{"gitId":"-"},"content":""},{"lineNumber":202,"author":{"gitId":"-"},"content":"        // Default settings, assert setting section not expanded"},{"lineNumber":203,"author":{"gitId":"-"},"content":"        if (sessionVisibleTime.equals(Const.TIME_REPRESENTS_FOLLOW_OPENING)"},{"lineNumber":204,"author":{"gitId":"-"},"content":"                \u0026\u0026 responseVisibleTime.equals(Const.TIME_REPRESENTS_LATER)) {"},{"lineNumber":205,"author":{"gitId":"-"},"content":"            assertTrue(isElementPresent(\"btn-change-visibility\"));"},{"lineNumber":206,"author":{"gitId":"-"},"content":"            return;"},{"lineNumber":207,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":208,"author":{"gitId":"-"},"content":"        verifySessionVisibilitySettings(sessionVisibleTime, feedbackSession);"},{"lineNumber":209,"author":{"gitId":"-"},"content":"        verifyResponseVisibilitySettings(responseVisibleTime, feedbackSession);"},{"lineNumber":210,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":211,"author":{"gitId":"-"},"content":""},{"lineNumber":212,"author":{"gitId":"-"},"content":"    private void verifySessionVisibilitySettings(Instant sessionVisibleTime,"},{"lineNumber":213,"author":{"gitId":"-"},"content":"                                                 FeedbackSessionAttributes feedbackSession) {"},{"lineNumber":214,"author":{"gitId":"-"},"content":"        if (sessionVisibleTime.equals(Const.TIME_REPRESENTS_FOLLOW_OPENING)) {"},{"lineNumber":215,"author":{"gitId":"-"},"content":"            assertTrue(openSessionVisibleTimeButton.isSelected());"},{"lineNumber":216,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":217,"author":{"gitId":"-"},"content":"            assertTrue(customSessionVisibleTimeButton.isSelected());"},{"lineNumber":218,"author":{"gitId":"-"},"content":"            assertEquals(getSessionVisibilityDate(), getDateString(feedbackSession.getSessionVisibleFromTime(),"},{"lineNumber":219,"author":{"gitId":"-"},"content":"                    feedbackSession.getTimeZone()));"},{"lineNumber":220,"author":{"gitId":"-"},"content":"            assertEquals(getSessionVisibilityTime(), getTimeString(feedbackSession.getSessionVisibleFromTime(),"},{"lineNumber":221,"author":{"gitId":"-"},"content":"                    feedbackSession.getTimeZone()));"},{"lineNumber":222,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":223,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":224,"author":{"gitId":"-"},"content":""},{"lineNumber":225,"author":{"gitId":"-"},"content":"    private void verifyResponseVisibilitySettings(Instant responseVisibleTime,"},{"lineNumber":226,"author":{"gitId":"-"},"content":"                                                  FeedbackSessionAttributes feedbackSession) {"},{"lineNumber":227,"author":{"gitId":"-"},"content":"        if (responseVisibleTime.equals(Const.TIME_REPRESENTS_FOLLOW_VISIBLE)) {"},{"lineNumber":228,"author":{"gitId":"-"},"content":"            assertTrue(immediateResponseVisibleTimeButton.isSelected());"},{"lineNumber":229,"author":{"gitId":"-"},"content":"        } else if (responseVisibleTime.equals(Const.TIME_REPRESENTS_LATER)) {"},{"lineNumber":230,"author":{"gitId":"-"},"content":"            assertTrue(manualResponseVisibleTimeButton.isSelected());"},{"lineNumber":231,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":232,"author":{"gitId":"-"},"content":"            assertTrue(customSessionVisibleTimeButton.isSelected());"},{"lineNumber":233,"author":{"gitId":"-"},"content":"            assertEquals(getResponseVisibilityDate(), getDateString(feedbackSession.getResultsVisibleFromTime(),"},{"lineNumber":234,"author":{"gitId":"-"},"content":"                    feedbackSession.getTimeZone()));"},{"lineNumber":235,"author":{"gitId":"-"},"content":"            assertEquals(getResponseVisibilityTime(), getTimeString(feedbackSession.getResultsVisibleFromTime(),"},{"lineNumber":236,"author":{"gitId":"-"},"content":"                    feedbackSession.getTimeZone()));"},{"lineNumber":237,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":238,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":239,"author":{"gitId":"-"},"content":""},{"lineNumber":240,"author":{"gitId":"-"},"content":"    private void verifyEmailSettings(FeedbackSessionAttributes feedbackSession) {"},{"lineNumber":241,"author":{"gitId":"-"},"content":"        boolean isOpeningEmailEnabled \u003d feedbackSession.isOpeningEmailEnabled();"},{"lineNumber":242,"author":{"gitId":"-"},"content":"        boolean isClosingEmailEnabled \u003d feedbackSession.isClosingEmailEnabled();"},{"lineNumber":243,"author":{"gitId":"-"},"content":"        boolean isPublishedEmailEnabled \u003d feedbackSession.isPublishedEmailEnabled();"},{"lineNumber":244,"author":{"gitId":"-"},"content":""},{"lineNumber":245,"author":{"gitId":"-"},"content":"        // Default settings, assert setting section not expanded"},{"lineNumber":246,"author":{"gitId":"-"},"content":"        if (isOpeningEmailEnabled \u0026\u0026 isClosingEmailEnabled \u0026\u0026 isPublishedEmailEnabled) {"},{"lineNumber":247,"author":{"gitId":"-"},"content":"            assertTrue(isElementPresent(\"btn-change-email\"));"},{"lineNumber":248,"author":{"gitId":"-"},"content":"            return;"},{"lineNumber":249,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":250,"author":{"gitId":"-"},"content":"        if (isOpeningEmailEnabled) {"},{"lineNumber":251,"author":{"gitId":"-"},"content":"            assertTrue(openingSessionEmailCheckbox.isSelected());"},{"lineNumber":252,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":253,"author":{"gitId":"-"},"content":"        if (isClosingEmailEnabled) {"},{"lineNumber":254,"author":{"gitId":"-"},"content":"            assertTrue(closingSessionEmailCheckbox.isSelected());"},{"lineNumber":255,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":256,"author":{"gitId":"-"},"content":"        if (isPublishedEmailEnabled) {"},{"lineNumber":257,"author":{"gitId":"-"},"content":"            assertTrue(publishedSessionEmailCheckbox.isSelected());"},{"lineNumber":258,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":259,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":260,"author":{"gitId":"-"},"content":""},{"lineNumber":261,"author":{"gitId":"-"},"content":"    public void editSessionDetails(FeedbackSessionAttributes newFeedbackSessionDetails) {"},{"lineNumber":262,"author":{"gitId":"-"},"content":"        click(fsEditButton);"},{"lineNumber":263,"author":{"gitId":"-"},"content":"        setInstructions(newFeedbackSessionDetails.getInstructions());"},{"lineNumber":264,"author":{"gitId":"-"},"content":"        setSessionStartDateTime(newFeedbackSessionDetails.getStartTime(), newFeedbackSessionDetails.getTimeZone());"},{"lineNumber":265,"author":{"gitId":"-"},"content":"        setSessionEndDateTime(newFeedbackSessionDetails.getEndTime(), newFeedbackSessionDetails.getTimeZone());"},{"lineNumber":266,"author":{"gitId":"-"},"content":"        selectGracePeriod(newFeedbackSessionDetails.getGracePeriodMinutes());"},{"lineNumber":267,"author":{"gitId":"-"},"content":"        setVisibilitySettings(newFeedbackSessionDetails);"},{"lineNumber":268,"author":{"gitId":"-"},"content":"        setEmailSettings(newFeedbackSessionDetails);"},{"lineNumber":269,"author":{"gitId":"-"},"content":"        click(fsSaveButton);"},{"lineNumber":270,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":271,"author":{"gitId":"-"},"content":""},{"lineNumber":272,"author":{"gitId":"-"},"content":"    public void copySessionToOtherCourse(CourseAttributes otherCourse, String sessionName) {"},{"lineNumber":273,"author":{"gitId":"-"},"content":"        click(fsCopyButton);"},{"lineNumber":274,"author":{"gitId":"-"},"content":"        WebElement copyFsModal \u003d waitForElementPresence(By.id(\"copy-course-modal\"));"},{"lineNumber":275,"author":{"gitId":"-"},"content":""},{"lineNumber":276,"author":{"gitId":"-"},"content":"        fillTextBox(copyFsModal.findElement(By.id(\"copy-session-name\")), sessionName);"},{"lineNumber":277,"author":{"gitId":"-"},"content":"        List\u003cWebElement\u003e options \u003d copyFsModal.findElements(By.className(\"form-check\"));"},{"lineNumber":278,"author":{"gitId":"-"},"content":"        for (WebElement option : options) {"},{"lineNumber":279,"author":{"gitId":"-"},"content":"            String courseId \u003d option.findElement(By.cssSelector(\"label span\")).getText();"},{"lineNumber":280,"author":{"gitId":"-"},"content":"            if (courseId.equals(otherCourse.getId())) {"},{"lineNumber":281,"author":{"gitId":"-"},"content":"                click(option.findElement(By.tagName(\"input\")));"},{"lineNumber":282,"author":{"gitId":"-"},"content":"                break;"},{"lineNumber":283,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":284,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":285,"author":{"gitId":"-"},"content":"        click(browser.driver.findElement(By.id(\"btn-confirm-copy-course\")));"},{"lineNumber":286,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":287,"author":{"gitId":"-"},"content":""},{"lineNumber":288,"author":{"gitId":"-"},"content":"    public void deleteSession() {"},{"lineNumber":289,"author":{"gitId":"-"},"content":"        clickAndConfirm(waitForElementPresence(By.id(\"btn-fs-delete\")));"},{"lineNumber":290,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":291,"author":{"gitId":"-"},"content":""},{"lineNumber":292,"author":{"gitId":"-"},"content":"    public FeedbackSubmitPage previewAsStudent(StudentAttributes student) {"},{"lineNumber":293,"author":{"gitId":"-"},"content":"        selectDropdownOptionByText(previewAsStudentDropdown, String.format(\"[%s] %s\", student.getTeam(), student.getName()));"},{"lineNumber":294,"author":{"gitId":"-"},"content":"        click(previewAsStudentButton);"},{"lineNumber":295,"author":{"gitId":"-"},"content":"        ThreadHelper.waitFor(2000);"},{"lineNumber":296,"author":{"gitId":"-"},"content":"        switchToNewWindow();"},{"lineNumber":297,"author":{"gitId":"-"},"content":"        return changePageType(FeedbackSubmitPage.class);"},{"lineNumber":298,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":299,"author":{"gitId":"-"},"content":""},{"lineNumber":300,"author":{"gitId":"-"},"content":"    public FeedbackSubmitPage previewAsInstructor(InstructorAttributes instructor) {"},{"lineNumber":301,"author":{"gitId":"-"},"content":"        selectDropdownOptionByText(previewAsInstructorDropdown, instructor.getName());"},{"lineNumber":302,"author":{"gitId":"-"},"content":"        click(previewAsInstructorButton);"},{"lineNumber":303,"author":{"gitId":"-"},"content":"        ThreadHelper.waitFor(2000);"},{"lineNumber":304,"author":{"gitId":"-"},"content":"        switchToNewWindow();"},{"lineNumber":305,"author":{"gitId":"-"},"content":"        return changePageType(FeedbackSubmitPage.class);"},{"lineNumber":306,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":307,"author":{"gitId":"-"},"content":""},{"lineNumber":308,"author":{"gitId":"-"},"content":"    public void verifyNumQuestions(int expected) {"},{"lineNumber":309,"author":{"gitId":"-"},"content":"        assertEquals(getNumQuestions(), expected);"},{"lineNumber":310,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":311,"author":{"gitId":"-"},"content":""},{"lineNumber":312,"author":{"gitId":"-"},"content":"    public void verifyQuestionDetails(int questionNum, FeedbackQuestionAttributes feedbackQuestion) {"},{"lineNumber":313,"author":{"gitId":"-"},"content":"        scrollElementToCenter(getQuestionForm(questionNum));"},{"lineNumber":314,"author":{"gitId":"-"},"content":"        assertEquals(feedbackQuestion.getQuestionType(), getQuestionType(questionNum));"},{"lineNumber":315,"author":{"gitId":"-"},"content":"        assertEquals(feedbackQuestion.getQuestionNumber(), getQuestionNumber(questionNum));"},{"lineNumber":316,"author":{"gitId":"-"},"content":"        assertEquals(feedbackQuestion.getQuestionDetailsCopy().getQuestionText(), getQuestionBrief(questionNum));"},{"lineNumber":317,"author":{"gitId":"-"},"content":"        assertEquals(getQuestionDescription(questionNum), feedbackQuestion.getQuestionDescription());"},{"lineNumber":318,"author":{"gitId":"-"},"content":"        verifyFeedbackPathSettings(questionNum, feedbackQuestion);"},{"lineNumber":319,"author":{"gitId":"-"},"content":"        verifyQuestionVisibilitySettings(questionNum, feedbackQuestion);"},{"lineNumber":320,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":321,"author":{"gitId":"-"},"content":""},{"lineNumber":322,"author":{"gitId":"-"},"content":"    private void verifyFeedbackPathSettings(int questionNum, FeedbackQuestionAttributes feedbackQuestion) {"},{"lineNumber":323,"author":{"gitId":"-"},"content":"        assertEquals(getDisplayGiverName(feedbackQuestion.getGiverType()), getFeedbackGiver(questionNum));"},{"lineNumber":324,"author":{"gitId":"-"},"content":"        String feedbackReceiver \u003d getFeedbackReceiver(questionNum);"},{"lineNumber":325,"author":{"gitId":"-"},"content":"        assertEquals(getDisplayRecipientName(feedbackQuestion.getRecipientType()), feedbackReceiver);"},{"lineNumber":326,"author":{"gitId":"-"},"content":""},{"lineNumber":327,"author":{"gitId":"-"},"content":"        if (feedbackReceiver.equals(getDisplayRecipientName(FeedbackParticipantType.INSTRUCTORS))"},{"lineNumber":328,"author":{"gitId":"-"},"content":"                || feedbackReceiver.equals(getDisplayRecipientName(FeedbackParticipantType.STUDENTS_EXCLUDING_SELF))"},{"lineNumber":329,"author":{"gitId":"-"},"content":"                || feedbackReceiver.equals(getDisplayRecipientName(FeedbackParticipantType.TEAMS_EXCLUDING_SELF))) {"},{"lineNumber":330,"author":{"gitId":"-"},"content":"            verifyNumberOfEntitiesToGiveFeedbackTo(questionNum, feedbackQuestion.getNumberOfEntitiesToGiveFeedbackTo());"},{"lineNumber":331,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":332,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":333,"author":{"gitId":"-"},"content":""},{"lineNumber":334,"author":{"gitId":"-"},"content":"    private void verifyNumberOfEntitiesToGiveFeedbackTo(int questionNum, int numberOfEntitiesToGiveFeedbackTo) {"},{"lineNumber":335,"author":{"gitId":"-"},"content":"        WebElement questionForm \u003d getQuestionForm(questionNum);"},{"lineNumber":336,"author":{"gitId":"-"},"content":"        WebElement feedbackPathPanel \u003d questionForm.findElement(By.tagName(\"tm-feedback-path-panel\"));"},{"lineNumber":337,"author":{"gitId":"-"},"content":"        if (numberOfEntitiesToGiveFeedbackTo \u003d\u003d Const.MAX_POSSIBLE_RECIPIENTS) {"},{"lineNumber":338,"author":{"gitId":"-"},"content":"            assertTrue(feedbackPathPanel.findElement(By.id(\"unlimited-recipients\")).isSelected());"},{"lineNumber":339,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":340,"author":{"gitId":"-"},"content":"            assertTrue(feedbackPathPanel.findElement(By.id(\"custom-recipients\")).isSelected());"},{"lineNumber":341,"author":{"gitId":"-"},"content":"            assertEquals(feedbackPathPanel.findElement(By.id(\"custom-recipients-number\")).getAttribute(\"value\"),"},{"lineNumber":342,"author":{"gitId":"-"},"content":"                    Integer.toString(numberOfEntitiesToGiveFeedbackTo));"},{"lineNumber":343,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":344,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":345,"author":{"gitId":"-"},"content":""},{"lineNumber":346,"author":{"gitId":"-"},"content":"    private void verifyQuestionVisibilitySettings(int questionNum, FeedbackQuestionAttributes feedbackQuestion) {"},{"lineNumber":347,"author":{"gitId":"-"},"content":"        WebElement questionForm \u003d getQuestionForm(questionNum);"},{"lineNumber":348,"author":{"gitId":"-"},"content":"        WebElement visibilityPanel \u003d questionForm.findElement(By.tagName(\"tm-visibility-panel\"));"},{"lineNumber":349,"author":{"gitId":"-"},"content":"        String visibility \u003d visibilityPanel.findElement(By.cssSelector(\"#btn-question-visibility span\")).getText();"},{"lineNumber":350,"author":{"gitId":"-"},"content":"        List\u003cFeedbackParticipantType\u003e showResponsesTo \u003d feedbackQuestion.getShowResponsesTo();"},{"lineNumber":351,"author":{"gitId":"-"},"content":"        List\u003cFeedbackParticipantType\u003e showGiverNameTo \u003d feedbackQuestion.getShowGiverNameTo();"},{"lineNumber":352,"author":{"gitId":"-"},"content":"        List\u003cFeedbackParticipantType\u003e showRecipientNameTo \u003d feedbackQuestion.getShowRecipientNameTo();"},{"lineNumber":353,"author":{"gitId":"-"},"content":""},{"lineNumber":354,"author":{"gitId":"-"},"content":"        switch (visibility) {"},{"lineNumber":355,"author":{"gitId":"-"},"content":"        case \"Shown anonymously to recipient and giver\u0027s team members, visible to instructors\":"},{"lineNumber":356,"author":{"gitId":"-"},"content":"            assertTrue(showResponsesTo.contains(FeedbackParticipantType.INSTRUCTORS));"},{"lineNumber":357,"author":{"gitId":"-"},"content":"            assertTrue(showResponsesTo.contains(FeedbackParticipantType.RECEIVER));"},{"lineNumber":358,"author":{"gitId":"-"},"content":"            assertTrue(showResponsesTo.contains(FeedbackParticipantType.OWN_TEAM_MEMBERS));"},{"lineNumber":359,"author":{"gitId":"-"},"content":"            assertEquals(showResponsesTo.size(), 3);"},{"lineNumber":360,"author":{"gitId":"-"},"content":""},{"lineNumber":361,"author":{"gitId":"-"},"content":"            assertTrue(showGiverNameTo.contains(FeedbackParticipantType.INSTRUCTORS));"},{"lineNumber":362,"author":{"gitId":"-"},"content":"            assertEquals(showGiverNameTo.size(), 1);"},{"lineNumber":363,"author":{"gitId":"-"},"content":""},{"lineNumber":364,"author":{"gitId":"-"},"content":"            assertTrue(showRecipientNameTo.contains(FeedbackParticipantType.INSTRUCTORS));"},{"lineNumber":365,"author":{"gitId":"-"},"content":"            assertTrue(showRecipientNameTo.contains(FeedbackParticipantType.RECEIVER));"},{"lineNumber":366,"author":{"gitId":"-"},"content":"            assertEquals(showRecipientNameTo.size(), 2);"},{"lineNumber":367,"author":{"gitId":"-"},"content":"            break;"},{"lineNumber":368,"author":{"gitId":"-"},"content":""},{"lineNumber":369,"author":{"gitId":"-"},"content":"        case \"Visible to instructors only\":"},{"lineNumber":370,"author":{"gitId":"-"},"content":"            assertTrue(showResponsesTo.contains(FeedbackParticipantType.INSTRUCTORS));"},{"lineNumber":371,"author":{"gitId":"-"},"content":"            assertEquals(showResponsesTo.size(), 1);"},{"lineNumber":372,"author":{"gitId":"-"},"content":""},{"lineNumber":373,"author":{"gitId":"-"},"content":"            assertTrue(showGiverNameTo.contains(FeedbackParticipantType.INSTRUCTORS));"},{"lineNumber":374,"author":{"gitId":"-"},"content":"            assertEquals(showGiverNameTo.size(), 1);"},{"lineNumber":375,"author":{"gitId":"-"},"content":""},{"lineNumber":376,"author":{"gitId":"-"},"content":"            assertTrue(showRecipientNameTo.contains(FeedbackParticipantType.INSTRUCTORS));"},{"lineNumber":377,"author":{"gitId":"-"},"content":"            assertEquals(showRecipientNameTo.size(), 1);"},{"lineNumber":378,"author":{"gitId":"-"},"content":"            break;"},{"lineNumber":379,"author":{"gitId":"-"},"content":""},{"lineNumber":380,"author":{"gitId":"-"},"content":"        case \"Shown anonymously to recipient and instructors\":"},{"lineNumber":381,"author":{"gitId":"-"},"content":"            assertTrue(showResponsesTo.contains(FeedbackParticipantType.INSTRUCTORS));"},{"lineNumber":382,"author":{"gitId":"-"},"content":"            assertTrue(showResponsesTo.contains(FeedbackParticipantType.RECEIVER));"},{"lineNumber":383,"author":{"gitId":"-"},"content":"            assertEquals(showResponsesTo.size(), 2);"},{"lineNumber":384,"author":{"gitId":"-"},"content":""},{"lineNumber":385,"author":{"gitId":"-"},"content":"            assertEquals(showGiverNameTo.size(), 0);"},{"lineNumber":386,"author":{"gitId":"-"},"content":""},{"lineNumber":387,"author":{"gitId":"-"},"content":"            assertTrue(showRecipientNameTo.contains(FeedbackParticipantType.INSTRUCTORS));"},{"lineNumber":388,"author":{"gitId":"-"},"content":"            assertTrue(showRecipientNameTo.contains(FeedbackParticipantType.RECEIVER));"},{"lineNumber":389,"author":{"gitId":"-"},"content":"            assertEquals(showRecipientNameTo.size(), 2);"},{"lineNumber":390,"author":{"gitId":"-"},"content":"            break;"},{"lineNumber":391,"author":{"gitId":"-"},"content":""},{"lineNumber":392,"author":{"gitId":"-"},"content":"        case \"Shown anonymously to recipient, visible to instructors\":"},{"lineNumber":393,"author":{"gitId":"-"},"content":"            assertTrue(showResponsesTo.contains(FeedbackParticipantType.INSTRUCTORS));"},{"lineNumber":394,"author":{"gitId":"-"},"content":"            assertTrue(showResponsesTo.contains(FeedbackParticipantType.RECEIVER));"},{"lineNumber":395,"author":{"gitId":"-"},"content":"            assertEquals(showResponsesTo.size(), 2);"},{"lineNumber":396,"author":{"gitId":"-"},"content":""},{"lineNumber":397,"author":{"gitId":"-"},"content":"            assertTrue(showGiverNameTo.contains(FeedbackParticipantType.INSTRUCTORS));"},{"lineNumber":398,"author":{"gitId":"-"},"content":"            assertEquals(showGiverNameTo.size(), 1);"},{"lineNumber":399,"author":{"gitId":"-"},"content":""},{"lineNumber":400,"author":{"gitId":"-"},"content":"            assertTrue(showRecipientNameTo.contains(FeedbackParticipantType.INSTRUCTORS));"},{"lineNumber":401,"author":{"gitId":"-"},"content":"            assertTrue(showRecipientNameTo.contains(FeedbackParticipantType.RECEIVER));"},{"lineNumber":402,"author":{"gitId":"-"},"content":"            assertEquals(showRecipientNameTo.size(), 2);"},{"lineNumber":403,"author":{"gitId":"-"},"content":"            break;"},{"lineNumber":404,"author":{"gitId":"-"},"content":""},{"lineNumber":405,"author":{"gitId":"-"},"content":"        case \"Shown anonymously to recipient and giver/recipient\u0027s team members, visible to instructors\":"},{"lineNumber":406,"author":{"gitId":"-"},"content":"            assertTrue(showResponsesTo.contains(FeedbackParticipantType.INSTRUCTORS));"},{"lineNumber":407,"author":{"gitId":"-"},"content":"            assertTrue(showResponsesTo.contains(FeedbackParticipantType.RECEIVER));"},{"lineNumber":408,"author":{"gitId":"-"},"content":"            assertTrue(showResponsesTo.contains(FeedbackParticipantType.OWN_TEAM_MEMBERS));"},{"lineNumber":409,"author":{"gitId":"-"},"content":"            assertTrue(showResponsesTo.contains(FeedbackParticipantType.RECEIVER_TEAM_MEMBERS));"},{"lineNumber":410,"author":{"gitId":"-"},"content":"            assertEquals(showResponsesTo.size(), 4);"},{"lineNumber":411,"author":{"gitId":"-"},"content":""},{"lineNumber":412,"author":{"gitId":"-"},"content":"            assertTrue(showGiverNameTo.contains(FeedbackParticipantType.INSTRUCTORS));"},{"lineNumber":413,"author":{"gitId":"-"},"content":"            assertEquals(showGiverNameTo.size(), 1);"},{"lineNumber":414,"author":{"gitId":"-"},"content":""},{"lineNumber":415,"author":{"gitId":"-"},"content":"            assertTrue(showRecipientNameTo.contains(FeedbackParticipantType.INSTRUCTORS));"},{"lineNumber":416,"author":{"gitId":"-"},"content":"            assertTrue(showRecipientNameTo.contains(FeedbackParticipantType.RECEIVER));"},{"lineNumber":417,"author":{"gitId":"-"},"content":"            assertEquals(showRecipientNameTo.size(), 2);"},{"lineNumber":418,"author":{"gitId":"-"},"content":"            break;"},{"lineNumber":419,"author":{"gitId":"-"},"content":""},{"lineNumber":420,"author":{"gitId":"-"},"content":"        case \"Visible to recipient and instructors\":"},{"lineNumber":421,"author":{"gitId":"-"},"content":"            assertTrue(showResponsesTo.contains(FeedbackParticipantType.INSTRUCTORS));"},{"lineNumber":422,"author":{"gitId":"-"},"content":"            assertTrue(showResponsesTo.contains(FeedbackParticipantType.RECEIVER));"},{"lineNumber":423,"author":{"gitId":"-"},"content":"            assertEquals(showResponsesTo.size(), 2);"},{"lineNumber":424,"author":{"gitId":"-"},"content":""},{"lineNumber":425,"author":{"gitId":"-"},"content":"            assertTrue(showGiverNameTo.contains(FeedbackParticipantType.INSTRUCTORS));"},{"lineNumber":426,"author":{"gitId":"-"},"content":"            assertTrue(showGiverNameTo.contains(FeedbackParticipantType.RECEIVER));"},{"lineNumber":427,"author":{"gitId":"-"},"content":"            assertEquals(showGiverNameTo.size(), 2);"},{"lineNumber":428,"author":{"gitId":"-"},"content":""},{"lineNumber":429,"author":{"gitId":"-"},"content":"            assertTrue(showRecipientNameTo.contains(FeedbackParticipantType.INSTRUCTORS));"},{"lineNumber":430,"author":{"gitId":"-"},"content":"            assertTrue(showRecipientNameTo.contains(FeedbackParticipantType.RECEIVER));"},{"lineNumber":431,"author":{"gitId":"-"},"content":"            assertEquals(showRecipientNameTo.size(), 2);"},{"lineNumber":432,"author":{"gitId":"-"},"content":"            break;"},{"lineNumber":433,"author":{"gitId":"-"},"content":""},{"lineNumber":434,"author":{"gitId":"-"},"content":"        default:"},{"lineNumber":435,"author":{"gitId":"-"},"content":"            verifyCustomQuestionVisibility(questionNum, feedbackQuestion);"},{"lineNumber":436,"author":{"gitId":"-"},"content":"            break;"},{"lineNumber":437,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":438,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":439,"author":{"gitId":"-"},"content":""},{"lineNumber":440,"author":{"gitId":"-"},"content":"    private void verifyCustomQuestionVisibility(int questionNum, FeedbackQuestionAttributes feedbackQuestion) {"},{"lineNumber":441,"author":{"gitId":"-"},"content":"        WebElement questionForm \u003d getQuestionForm(questionNum);"},{"lineNumber":442,"author":{"gitId":"-"},"content":"        WebElement visibilityPanel \u003d questionForm.findElement(By.tagName(\"tm-visibility-panel\"));"},{"lineNumber":443,"author":{"gitId":"-"},"content":"        String visibility \u003d visibilityPanel.findElement(By.cssSelector(\"#btn-question-visibility span\")).getText();"},{"lineNumber":444,"author":{"gitId":"-"},"content":"        assertEquals(visibility, CUSTOM_VISIBILITY_OPTION);"},{"lineNumber":445,"author":{"gitId":"-"},"content":""},{"lineNumber":446,"author":{"gitId":"-"},"content":"        FeedbackParticipantType giver \u003d feedbackQuestion.getGiverType();"},{"lineNumber":447,"author":{"gitId":"-"},"content":"        FeedbackParticipantType receiver \u003d feedbackQuestion.getRecipientType();"},{"lineNumber":448,"author":{"gitId":"-"},"content":"        WebElement customVisibilityTable \u003d visibilityPanel.findElement(By.id(\"custom-visibility-table\"));"},{"lineNumber":449,"author":{"gitId":"-"},"content":"        assertVisibilityBoxesSelected(customVisibilityTable, giver, receiver, feedbackQuestion.getShowResponsesTo(), 1);"},{"lineNumber":450,"author":{"gitId":"-"},"content":"        assertVisibilityBoxesSelected(customVisibilityTable, giver, receiver, feedbackQuestion.getShowGiverNameTo(), 2);"},{"lineNumber":451,"author":{"gitId":"-"},"content":"        assertVisibilityBoxesSelected(customVisibilityTable, giver, receiver, feedbackQuestion.getShowRecipientNameTo(), 3);"},{"lineNumber":452,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":453,"author":{"gitId":"-"},"content":""},{"lineNumber":454,"author":{"gitId":"-"},"content":"    private void assertVisibilityBoxesSelected(WebElement table, FeedbackParticipantType giver,"},{"lineNumber":455,"author":{"gitId":"-"},"content":"                                               FeedbackParticipantType receiver, List\u003cFeedbackParticipantType\u003e participants,"},{"lineNumber":456,"author":{"gitId":"-"},"content":"                                               int colNum) {"},{"lineNumber":457,"author":{"gitId":"-"},"content":"        List\u003cFeedbackParticipantType\u003e possibleTypes \u003d new ArrayList\u003c\u003e(Arrays.asList(FeedbackParticipantType.RECEIVER,"},{"lineNumber":458,"author":{"gitId":"-"},"content":"                FeedbackParticipantType.OWN_TEAM_MEMBERS, FeedbackParticipantType.RECEIVER_TEAM_MEMBERS,"},{"lineNumber":459,"author":{"gitId":"-"},"content":"                FeedbackParticipantType.STUDENTS, FeedbackParticipantType.INSTRUCTORS));"},{"lineNumber":460,"author":{"gitId":"-"},"content":"        if (!giver.equals(FeedbackParticipantType.STUDENTS)) {"},{"lineNumber":461,"author":{"gitId":"-"},"content":"            possibleTypes.remove(FeedbackParticipantType.OWN_TEAM_MEMBERS);"},{"lineNumber":462,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":463,"author":{"gitId":"-"},"content":"        if (!receiver.equals(FeedbackParticipantType.STUDENTS)) {"},{"lineNumber":464,"author":{"gitId":"-"},"content":"            possibleTypes.remove(FeedbackParticipantType.RECEIVER_TEAM_MEMBERS);"},{"lineNumber":465,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":466,"author":{"gitId":"-"},"content":"        if (receiver.equals(FeedbackParticipantType.NONE)"},{"lineNumber":467,"author":{"gitId":"-"},"content":"                || receiver.equals(FeedbackParticipantType.SELF)"},{"lineNumber":468,"author":{"gitId":"-"},"content":"                || receiver.equals(FeedbackParticipantType.OWN_TEAM)) {"},{"lineNumber":469,"author":{"gitId":"-"},"content":"            possibleTypes.remove(FeedbackParticipantType.RECEIVER);"},{"lineNumber":470,"author":{"gitId":"-"},"content":"            possibleTypes.remove(FeedbackParticipantType.RECEIVER_TEAM_MEMBERS);"},{"lineNumber":471,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":472,"author":{"gitId":"-"},"content":""},{"lineNumber":473,"author":{"gitId":"-"},"content":"        List\u003cWebElement\u003e rows \u003d table.findElements(By.tagName(\"tr\"));"},{"lineNumber":474,"author":{"gitId":"-"},"content":"        int index \u003d colNum - 1;"},{"lineNumber":475,"author":{"gitId":"-"},"content":"        for (FeedbackParticipantType participant : participants) {"},{"lineNumber":476,"author":{"gitId":"-"},"content":"            assertTrue(rows.get(possibleTypes.indexOf(participant)).findElements(By.tagName(\"input\")).get(index)"},{"lineNumber":477,"author":{"gitId":"-"},"content":"                    .isSelected());"},{"lineNumber":478,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":479,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":480,"author":{"gitId":"-"},"content":""},{"lineNumber":481,"author":{"gitId":"-"},"content":"    public void addTemplateQuestion(int optionNum) {"},{"lineNumber":482,"author":{"gitId":"-"},"content":"        addNewQuestion(1);"},{"lineNumber":483,"author":{"gitId":"-"},"content":"        WebElement templateQuestionModal \u003d waitForElementPresence(By.id(\"template-question-modal\"));"},{"lineNumber":484,"author":{"gitId":"-"},"content":""},{"lineNumber":485,"author":{"gitId":"-"},"content":"        click(templateQuestionModal.findElements(By.tagName(\"input\")).get(optionNum - 1));"},{"lineNumber":486,"author":{"gitId":"-"},"content":"        clickAndWaitForNewQuestion(browser.driver.findElement(By.id(\"btn-confirm-template\")));"},{"lineNumber":487,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":488,"author":{"gitId":"-"},"content":""},{"lineNumber":489,"author":{"gitId":"-"},"content":"    public void copyQuestion(String courseId, String questionText) {"},{"lineNumber":490,"author":{"gitId":"-"},"content":"        click(copyQuestionButton);"},{"lineNumber":491,"author":{"gitId":"-"},"content":"        WebElement copyQuestionModal \u003d waitForElementPresence(By.id(\"copy-question-modal\"));"},{"lineNumber":492,"author":{"gitId":"-"},"content":""},{"lineNumber":493,"author":{"gitId":"-"},"content":"        List\u003cWebElement\u003e cards \u003d copyQuestionModal.findElements(By.className(\"card\"));"},{"lineNumber":494,"author":{"gitId":"-"},"content":"        for (WebElement card : cards) {"},{"lineNumber":495,"author":{"gitId":"-"},"content":"            WebElement cardHeader \u003d card.findElement(By.className(\"card-header\"));"},{"lineNumber":496,"author":{"gitId":"-"},"content":"            if (cardHeader.getText().startsWith(\"[\" + courseId + \"]\")) {"},{"lineNumber":497,"author":{"gitId":"-"},"content":"                click(cardHeader);"},{"lineNumber":498,"author":{"gitId":"-"},"content":"                WebElement cardBody \u003d waitForElementPresence(By.className(\"card-body\"));"},{"lineNumber":499,"author":{"gitId":"-"},"content":"                // Reload questions"},{"lineNumber":500,"author":{"gitId":"-"},"content":"                WebElement reloadBtn \u003d cardBody.findElement(By.tagName(\"button\"));"},{"lineNumber":501,"author":{"gitId":"-"},"content":"                click(reloadBtn);"},{"lineNumber":502,"author":{"gitId":"-"},"content":"                WebElement table \u003d waitForElementPresence(By.id(\"copy-question-table\"));"},{"lineNumber":503,"author":{"gitId":"-"},"content":"                List\u003cWebElement\u003e rows \u003d table.findElements(By.cssSelector(\"tbody tr\"));"},{"lineNumber":504,"author":{"gitId":"-"},"content":"                for (WebElement row : rows) {"},{"lineNumber":505,"author":{"gitId":"-"},"content":"                    List\u003cWebElement\u003e cells \u003d row.findElements(By.tagName(\"td\"));"},{"lineNumber":506,"author":{"gitId":"-"},"content":"                    if (cells.get(2).getText().equals(questionText)) {"},{"lineNumber":507,"author":{"gitId":"-"},"content":"                        markOptionAsSelected(cells.get(0).findElement(By.tagName(\"input\")));"},{"lineNumber":508,"author":{"gitId":"-"},"content":"                    }"},{"lineNumber":509,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":510,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":511,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":512,"author":{"gitId":"-"},"content":"        clickAndWaitForNewQuestion(browser.driver.findElement(By.id(\"btn-confirm-copy-question\")));"},{"lineNumber":513,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":514,"author":{"gitId":"-"},"content":""},{"lineNumber":515,"author":{"gitId":"-"},"content":"    public void editQuestionNumber(int questionNum, int newQuestionNumber) {"},{"lineNumber":516,"author":{"gitId":"-"},"content":"        clickEditQuestionButton(questionNum);"},{"lineNumber":517,"author":{"gitId":"-"},"content":"        selectDropdownOptionByText(getQuestionForm(questionNum).findElement(By.id(\"question-number-dropdown\")),"},{"lineNumber":518,"author":{"gitId":"-"},"content":"                Integer.toString(newQuestionNumber));"},{"lineNumber":519,"author":{"gitId":"-"},"content":"        clickSaveQuestionButton(questionNum);"},{"lineNumber":520,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":521,"author":{"gitId":"-"},"content":""},{"lineNumber":522,"author":{"gitId":"-"},"content":"    public void editQuestionDetails(int questionNum, FeedbackQuestionAttributes feedbackQuestion) {"},{"lineNumber":523,"author":{"gitId":"-"},"content":"        clickEditQuestionButton(questionNum);"},{"lineNumber":524,"author":{"gitId":"-"},"content":"        inputQuestionDetails(questionNum, feedbackQuestion);"},{"lineNumber":525,"author":{"gitId":"-"},"content":"        clickSaveQuestionButton(questionNum);"},{"lineNumber":526,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":527,"author":{"gitId":"-"},"content":""},{"lineNumber":528,"author":{"gitId":"-"},"content":"    private void inputQuestionDetails(int questionNum, FeedbackQuestionAttributes feedbackQuestion) {"},{"lineNumber":529,"author":{"gitId":"-"},"content":"        setQuestionBrief(questionNum, feedbackQuestion.getQuestionDetailsCopy().getQuestionText());"},{"lineNumber":530,"author":{"gitId":"-"},"content":"        setQuestionDescription(questionNum, feedbackQuestion.getQuestionDescription());"},{"lineNumber":531,"author":{"gitId":"-"},"content":"        FeedbackQuestionType questionType \u003d feedbackQuestion.getQuestionType();"},{"lineNumber":532,"author":{"gitId":"-"},"content":"        if (!questionType.equals(FeedbackQuestionType.CONTRIB)) {"},{"lineNumber":533,"author":{"gitId":"-"},"content":"            setFeedbackPath(questionNum, feedbackQuestion);"},{"lineNumber":534,"author":{"gitId":"-"},"content":"            setQuestionVisibility(questionNum, feedbackQuestion);"},{"lineNumber":535,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":536,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":537,"author":{"gitId":"-"},"content":""},{"lineNumber":538,"author":{"gitId":"-"},"content":"    public void duplicateQuestion(int questionNum) {"},{"lineNumber":539,"author":{"gitId":"-"},"content":"        clickAndWaitForNewQuestion(getQuestionForm(questionNum).findElement(By.id(\"btn-duplicate-question\")));"},{"lineNumber":540,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":541,"author":{"gitId":"-"},"content":""},{"lineNumber":542,"author":{"gitId":"-"},"content":"    public void deleteQuestion(int questionNum) {"},{"lineNumber":543,"author":{"gitId":"-"},"content":"        clickAndConfirm(getQuestionForm(questionNum).findElement(By.id(\"btn-delete-question\")));"},{"lineNumber":544,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":545,"author":{"gitId":"-"},"content":""},{"lineNumber":546,"author":{"gitId":"-"},"content":"    public void verifyTextQuestionDetails(int questionNum, FeedbackTextQuestionDetails questionDetails) {"},{"lineNumber":547,"author":{"gitId":"-"},"content":"        String recommendLength \u003d getRecommendedTextLengthField(questionNum).getAttribute(\"value\");"},{"lineNumber":548,"author":{"gitId":"-"},"content":"        assertEquals(recommendLength, questionDetails.getRecommendedLength().toString());"},{"lineNumber":549,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":550,"author":{"gitId":"-"},"content":""},{"lineNumber":551,"author":{"gitId":"-"},"content":"    public void addTextQuestion(FeedbackQuestionAttributes feedbackQuestion) {"},{"lineNumber":552,"author":{"gitId":"-"},"content":"        addNewQuestion(2);"},{"lineNumber":553,"author":{"gitId":"-"},"content":"        int questionNum \u003d getNumQuestions();"},{"lineNumber":554,"author":{"gitId":"-"},"content":"        inputQuestionDetails(questionNum, feedbackQuestion);"},{"lineNumber":555,"author":{"gitId":"-"},"content":"        FeedbackTextQuestionDetails questionDetails \u003d"},{"lineNumber":556,"author":{"gitId":"-"},"content":"                (FeedbackTextQuestionDetails) feedbackQuestion.getQuestionDetailsCopy();"},{"lineNumber":557,"author":{"gitId":"-"},"content":"        fillTextBox(getRecommendedTextLengthField(questionNum), questionDetails.getRecommendedLength().toString());"},{"lineNumber":558,"author":{"gitId":"-"},"content":"        clickSaveNewQuestionButton();"},{"lineNumber":559,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":560,"author":{"gitId":"-"},"content":""},{"lineNumber":561,"author":{"gitId":"-"},"content":"    public void editTextQuestion(int questionNum, FeedbackTextQuestionDetails textQuestionDetails) {"},{"lineNumber":562,"author":{"gitId":"-"},"content":"        clickEditQuestionButton(questionNum);"},{"lineNumber":563,"author":{"gitId":"-"},"content":"        WebElement recommendedTextLengthField \u003d getRecommendedTextLengthField(questionNum);"},{"lineNumber":564,"author":{"gitId":"-"},"content":"        waitForElementToBeClickable(recommendedTextLengthField);"},{"lineNumber":565,"author":{"gitId":"-"},"content":"        fillTextBox(recommendedTextLengthField, textQuestionDetails.getRecommendedLength().toString());"},{"lineNumber":566,"author":{"gitId":"-"},"content":"        clickSaveQuestionButton(questionNum);"},{"lineNumber":567,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":568,"author":{"gitId":"-"},"content":""},{"lineNumber":569,"author":{"gitId":"-"},"content":"    public void verifyMcqQuestionDetails(int questionNum, FeedbackMcqQuestionDetails questionDetails) {"},{"lineNumber":570,"author":{"gitId":"-"},"content":"        if (verifyGeneratedOptions(questionNum, questionDetails.getGenerateOptionsFor())) {"},{"lineNumber":571,"author":{"gitId":"-"},"content":"            return;"},{"lineNumber":572,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":573,"author":{"gitId":"-"},"content":"        verifyOptions(questionNum, questionDetails.getMcqChoices());"},{"lineNumber":574,"author":{"gitId":"-"},"content":"        verifyOptionWeights(questionNum, questionDetails.isHasAssignedWeights(), questionDetails.getMcqWeights());"},{"lineNumber":575,"author":{"gitId":"-"},"content":"        verifyOtherOption(questionNum, questionDetails.isOtherEnabled(), questionDetails.getMcqOtherWeight());"},{"lineNumber":576,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":577,"author":{"gitId":"-"},"content":""},{"lineNumber":578,"author":{"gitId":"-"},"content":"    public void addMcqQuestion(FeedbackQuestionAttributes feedbackQuestion) {"},{"lineNumber":579,"author":{"gitId":"-"},"content":"        addNewQuestion(3);"},{"lineNumber":580,"author":{"gitId":"-"},"content":"        int questionNum \u003d getNumQuestions();"},{"lineNumber":581,"author":{"gitId":"-"},"content":"        inputQuestionDetails(questionNum, feedbackQuestion);"},{"lineNumber":582,"author":{"gitId":"-"},"content":"        FeedbackMcqQuestionDetails questionDetails \u003d (FeedbackMcqQuestionDetails) feedbackQuestion.getQuestionDetailsCopy();"},{"lineNumber":583,"author":{"gitId":"-"},"content":"        inputMcqDetails(questionNum, questionDetails);"},{"lineNumber":584,"author":{"gitId":"-"},"content":"        clickSaveNewQuestionButton();"},{"lineNumber":585,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":586,"author":{"gitId":"-"},"content":""},{"lineNumber":587,"author":{"gitId":"-"},"content":"    public void editMcqQuestion(int questionNum, FeedbackMcqQuestionDetails questionDetails) {"},{"lineNumber":588,"author":{"gitId":"-"},"content":"        clickEditQuestionButton(questionNum);"},{"lineNumber":589,"author":{"gitId":"-"},"content":"        inputMcqDetails(questionNum, questionDetails);"},{"lineNumber":590,"author":{"gitId":"-"},"content":"        clickSaveQuestionButton(questionNum);"},{"lineNumber":591,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":592,"author":{"gitId":"-"},"content":""},{"lineNumber":593,"author":{"gitId":"-"},"content":"    public void verifyMsqQuestionDetails(int questionNum, FeedbackMsqQuestionDetails questionDetails) {"},{"lineNumber":594,"author":{"gitId":"-"},"content":"        verifyMaxOptions(questionNum, questionDetails.getMaxSelectableChoices());"},{"lineNumber":595,"author":{"gitId":"-"},"content":"        verifyMinOptions(questionNum, questionDetails.getMinSelectableChoices());"},{"lineNumber":596,"author":{"gitId":"-"},"content":"        if (verifyGeneratedOptions(questionNum, questionDetails.getGenerateOptionsFor())) {"},{"lineNumber":597,"author":{"gitId":"-"},"content":"            return;"},{"lineNumber":598,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":599,"author":{"gitId":"-"},"content":"        verifyOptions(questionNum, questionDetails.getMsqChoices());"},{"lineNumber":600,"author":{"gitId":"-"},"content":"        verifyOptionWeights(questionNum, questionDetails.isHasAssignedWeights(), questionDetails.getMsqWeights());"},{"lineNumber":601,"author":{"gitId":"-"},"content":"        verifyOtherOption(questionNum, questionDetails.isOtherEnabled(), questionDetails.getMsqOtherWeight());"},{"lineNumber":602,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":603,"author":{"gitId":"-"},"content":""},{"lineNumber":604,"author":{"gitId":"-"},"content":"    public void addMsqQuestion(FeedbackQuestionAttributes feedbackQuestion) {"},{"lineNumber":605,"author":{"gitId":"-"},"content":"        addNewQuestion(4);"},{"lineNumber":606,"author":{"gitId":"-"},"content":"        int questionNum \u003d getNumQuestions();"},{"lineNumber":607,"author":{"gitId":"-"},"content":"        inputQuestionDetails(questionNum, feedbackQuestion);"},{"lineNumber":608,"author":{"gitId":"-"},"content":"        FeedbackMsqQuestionDetails questionDetails \u003d (FeedbackMsqQuestionDetails) feedbackQuestion.getQuestionDetailsCopy();"},{"lineNumber":609,"author":{"gitId":"-"},"content":"        inputMsqDetails(questionNum, questionDetails);"},{"lineNumber":610,"author":{"gitId":"-"},"content":"        clickSaveNewQuestionButton();"},{"lineNumber":611,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":612,"author":{"gitId":"-"},"content":""},{"lineNumber":613,"author":{"gitId":"-"},"content":"    public void editMsqQuestion(int questionNum, FeedbackMsqQuestionDetails msqQuestionDetails) {"},{"lineNumber":614,"author":{"gitId":"-"},"content":"        clickEditQuestionButton(questionNum);"},{"lineNumber":615,"author":{"gitId":"-"},"content":"        inputMsqDetails(questionNum, msqQuestionDetails);"},{"lineNumber":616,"author":{"gitId":"-"},"content":"        clickSaveQuestionButton(questionNum);"},{"lineNumber":617,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":618,"author":{"gitId":"-"},"content":""},{"lineNumber":619,"author":{"gitId":"-"},"content":"    public void verifyNumScaleQuestionDetails(int questionNum, FeedbackNumericalScaleQuestionDetails questionDetails) {"},{"lineNumber":620,"author":{"gitId":"-"},"content":"        assertEquals(getMinNumscaleInput(questionNum).getAttribute(\"value\"),"},{"lineNumber":621,"author":{"gitId":"-"},"content":"                Integer.toString(questionDetails.getMinScale()));"},{"lineNumber":622,"author":{"gitId":"-"},"content":"        assertEquals(getNumScaleIncrementInput(questionNum).getAttribute(\"value\"),"},{"lineNumber":623,"author":{"gitId":"-"},"content":"                getDoubleString(questionDetails.getStep()));"},{"lineNumber":624,"author":{"gitId":"-"},"content":"        assertEquals(getMaxNumscaleInput(questionNum).getAttribute(\"value\"),"},{"lineNumber":625,"author":{"gitId":"-"},"content":"                Integer.toString(questionDetails.getMaxScale()));"},{"lineNumber":626,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":627,"author":{"gitId":"-"},"content":""},{"lineNumber":628,"author":{"gitId":"-"},"content":"    public void addNumScaleQuestion(FeedbackQuestionAttributes feedbackQuestion) {"},{"lineNumber":629,"author":{"gitId":"-"},"content":"        addNewQuestion(5);"},{"lineNumber":630,"author":{"gitId":"-"},"content":"        int questionNum \u003d getNumQuestions();"},{"lineNumber":631,"author":{"gitId":"-"},"content":"        inputQuestionDetails(questionNum, feedbackQuestion);"},{"lineNumber":632,"author":{"gitId":"-"},"content":"        FeedbackNumericalScaleQuestionDetails questionDetails \u003d"},{"lineNumber":633,"author":{"gitId":"-"},"content":"                (FeedbackNumericalScaleQuestionDetails) feedbackQuestion.getQuestionDetailsCopy();"},{"lineNumber":634,"author":{"gitId":"-"},"content":"        inputNumScaleDetails(questionNum, questionDetails);"},{"lineNumber":635,"author":{"gitId":"-"},"content":"        clickSaveNewQuestionButton();"},{"lineNumber":636,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":637,"author":{"gitId":"-"},"content":""},{"lineNumber":638,"author":{"gitId":"-"},"content":"    public void editNumScaleQuestion(int questionNum, FeedbackNumericalScaleQuestionDetails questionDetails) {"},{"lineNumber":639,"author":{"gitId":"-"},"content":"        clickEditQuestionButton(questionNum);"},{"lineNumber":640,"author":{"gitId":"-"},"content":"        inputNumScaleDetails(questionNum, questionDetails);"},{"lineNumber":641,"author":{"gitId":"-"},"content":"        clickSaveQuestionButton(questionNum);"},{"lineNumber":642,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":643,"author":{"gitId":"-"},"content":""},{"lineNumber":644,"author":{"gitId":"-"},"content":"    public void verifyConstSumQuestionDetails(int questionNum, FeedbackConstantSumQuestionDetails questionDetails) {"},{"lineNumber":645,"author":{"gitId":"-"},"content":"        if (!questionDetails.isDistributeToRecipients()) {"},{"lineNumber":646,"author":{"gitId":"-"},"content":"            verifyOptions(questionNum, questionDetails.getConstSumOptions());"},{"lineNumber":647,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":648,"author":{"gitId":"-"},"content":""},{"lineNumber":649,"author":{"gitId":"-"},"content":"        if (questionDetails.isPointsPerOption()) {"},{"lineNumber":650,"author":{"gitId":"-"},"content":"            assertTrue(getConstSumPerOptionPointsRadioBtn(questionNum).isSelected());"},{"lineNumber":651,"author":{"gitId":"-"},"content":"            assertEquals(getConstSumPerOptionPointsInput(questionNum).getAttribute(\"value\"),"},{"lineNumber":652,"author":{"gitId":"-"},"content":"                    Integer.toString(questionDetails.getPoints()));"},{"lineNumber":653,"author":{"gitId":"-"},"content":"            assertFalse(getConstSumTotalPointsRadioBtn(questionNum).isSelected());"},{"lineNumber":654,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":655,"author":{"gitId":"-"},"content":"            assertTrue(getConstSumTotalPointsRadioBtn(questionNum).isSelected());"},{"lineNumber":656,"author":{"gitId":"-"},"content":"            assertEquals(getConstSumTotalPointsInput(questionNum).getAttribute(\"value\"),"},{"lineNumber":657,"author":{"gitId":"-"},"content":"                    Integer.toString(questionDetails.getPoints()));"},{"lineNumber":658,"author":{"gitId":"-"},"content":"            assertFalse(getConstSumPerOptionPointsRadioBtn(questionNum).isSelected());"},{"lineNumber":659,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":660,"author":{"gitId":"-"},"content":""},{"lineNumber":661,"author":{"gitId":"-"},"content":"        if (questionDetails.isForceUnevenDistribution()) {"},{"lineNumber":662,"author":{"gitId":"-"},"content":"            String distributeFor \u003d questionDetails.getDistributePointsFor();"},{"lineNumber":663,"author":{"gitId":"-"},"content":"            assertTrue(getConstSumUnevenDistributionCheckbox(questionNum).isSelected());"},{"lineNumber":664,"author":{"gitId":"-"},"content":"            assertEquals(getSelectedDropdownOptionText(getConstSumUnevenDistributionDropdown(questionNum)).trim(),"},{"lineNumber":665,"author":{"gitId":"-"},"content":"                    \"All options\".equals(distributeFor) ? \"Every option\" : distributeFor);"},{"lineNumber":666,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":667,"author":{"gitId":"-"},"content":"            assertFalse(getConstSumUnevenDistributionCheckbox(questionNum).isSelected());"},{"lineNumber":668,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":669,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":670,"author":{"gitId":"-"},"content":""},{"lineNumber":671,"author":{"gitId":"-"},"content":"    public void addConstSumOptionQuestion(FeedbackQuestionAttributes feedbackQuestion) {"},{"lineNumber":672,"author":{"gitId":"-"},"content":"        addNewQuestion(6);"},{"lineNumber":673,"author":{"gitId":"-"},"content":"        addConstSumQuestion(feedbackQuestion);"},{"lineNumber":674,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":675,"author":{"gitId":"-"},"content":""},{"lineNumber":676,"author":{"gitId":"-"},"content":"    public void addConstSumRecipientQuestion(FeedbackQuestionAttributes feedbackQuestion) {"},{"lineNumber":677,"author":{"gitId":"-"},"content":"        addNewQuestion(7);"},{"lineNumber":678,"author":{"gitId":"-"},"content":"        addConstSumQuestion(feedbackQuestion);"},{"lineNumber":679,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":680,"author":{"gitId":"-"},"content":""},{"lineNumber":681,"author":{"gitId":"-"},"content":"    public void addConstSumQuestion(FeedbackQuestionAttributes feedbackQuestion) {"},{"lineNumber":682,"author":{"gitId":"-"},"content":"        int questionNum \u003d getNumQuestions();"},{"lineNumber":683,"author":{"gitId":"-"},"content":"        inputQuestionDetails(questionNum, feedbackQuestion);"},{"lineNumber":684,"author":{"gitId":"-"},"content":"        FeedbackConstantSumQuestionDetails questionDetails \u003d"},{"lineNumber":685,"author":{"gitId":"-"},"content":"                (FeedbackConstantSumQuestionDetails) feedbackQuestion.getQuestionDetailsCopy();"},{"lineNumber":686,"author":{"gitId":"-"},"content":"        inputConstSumDetails(questionNum, questionDetails);"},{"lineNumber":687,"author":{"gitId":"-"},"content":"        clickSaveNewQuestionButton();"},{"lineNumber":688,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":689,"author":{"gitId":"-"},"content":""},{"lineNumber":690,"author":{"gitId":"-"},"content":"    public void editConstSumQuestion(int questionNum, FeedbackConstantSumQuestionDetails csQuestionDetails) {"},{"lineNumber":691,"author":{"gitId":"-"},"content":"        clickEditQuestionButton(questionNum);"},{"lineNumber":692,"author":{"gitId":"-"},"content":"        inputConstSumDetails(questionNum, csQuestionDetails);"},{"lineNumber":693,"author":{"gitId":"-"},"content":"        clickSaveQuestionButton(questionNum);"},{"lineNumber":694,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":695,"author":{"gitId":"-"},"content":""},{"lineNumber":696,"author":{"gitId":"-"},"content":"    public void verifyContributionQuestionDetails(int questionNum, FeedbackContributionQuestionDetails questionDetails) {"},{"lineNumber":697,"author":{"gitId":"-"},"content":"        assertEquals(questionDetails.isZeroSum(), getZeroSumCheckbox(questionNum).isSelected());"},{"lineNumber":698,"author":{"gitId":"-"},"content":"        assertEquals(questionDetails.isNotSureAllowed(), getAllowNotSureContributionCheckbox(questionNum).isSelected());"},{"lineNumber":699,"author":{"gitId":"-"},"content":"        if (questionDetails.isZeroSum()) {"},{"lineNumber":700,"author":{"gitId":"-"},"content":"            assertFalse(questionDetails.isNotSureAllowed());"},{"lineNumber":701,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":702,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":703,"author":{"gitId":"-"},"content":""},{"lineNumber":704,"author":{"gitId":"-"},"content":"    public void addContributionQuestion(FeedbackQuestionAttributes feedbackQuestion) {"},{"lineNumber":705,"author":{"gitId":"-"},"content":"        addNewQuestion(8);"},{"lineNumber":706,"author":{"gitId":"-"},"content":"        int questionNum \u003d getNumQuestions();"},{"lineNumber":707,"author":{"gitId":"-"},"content":"        inputQuestionDetails(questionNum, feedbackQuestion);"},{"lineNumber":708,"author":{"gitId":"-"},"content":"        FeedbackContributionQuestionDetails questionDetails \u003d"},{"lineNumber":709,"author":{"gitId":"-"},"content":"                (FeedbackContributionQuestionDetails) feedbackQuestion.getQuestionDetailsCopy();"},{"lineNumber":710,"author":{"gitId":"-"},"content":"        inputContributionDetails(questionNum, questionDetails);"},{"lineNumber":711,"author":{"gitId":"-"},"content":"        clickSaveNewQuestionButton();"},{"lineNumber":712,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":713,"author":{"gitId":"-"},"content":""},{"lineNumber":714,"author":{"gitId":"-"},"content":"    public void editContributionQuestion(int questionNum, FeedbackContributionQuestionDetails questionDetails) {"},{"lineNumber":715,"author":{"gitId":"-"},"content":"        clickEditQuestionButton(questionNum);"},{"lineNumber":716,"author":{"gitId":"-"},"content":"        inputContributionDetails(questionNum, questionDetails);"},{"lineNumber":717,"author":{"gitId":"-"},"content":"        clickSaveQuestionButton(questionNum);"},{"lineNumber":718,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":719,"author":{"gitId":"-"},"content":""},{"lineNumber":720,"author":{"gitId":"-"},"content":"    public void verifyRubricQuestionDetails(int questionNum, FeedbackRubricQuestionDetails questionDetails) {"},{"lineNumber":721,"author":{"gitId":"-"},"content":"        int numChoices \u003d questionDetails.getNumOfRubricChoices();"},{"lineNumber":722,"author":{"gitId":"-"},"content":"        List\u003cString\u003e choices \u003d questionDetails.getRubricChoices();"},{"lineNumber":723,"author":{"gitId":"-"},"content":"        for (int i \u003d 0; i \u003c numChoices; i++) {"},{"lineNumber":724,"author":{"gitId":"-"},"content":"            assertEquals(choices.get(i), getRubricChoiceInputs(questionNum).get(i).getAttribute(\"value\"));"},{"lineNumber":725,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":726,"author":{"gitId":"-"},"content":""},{"lineNumber":727,"author":{"gitId":"-"},"content":"        int numSubQn \u003d questionDetails.getNumOfRubricSubQuestions();"},{"lineNumber":728,"author":{"gitId":"-"},"content":"        List\u003cString\u003e subQuestions \u003d questionDetails.getRubricSubQuestions();"},{"lineNumber":729,"author":{"gitId":"-"},"content":"        List\u003cList\u003cString\u003e\u003e descriptions \u003d questionDetails.getRubricDescriptions();"},{"lineNumber":730,"author":{"gitId":"-"},"content":"        for (int i \u003d 0; i \u003c numSubQn; i++) {"},{"lineNumber":731,"author":{"gitId":"-"},"content":"            List\u003cWebElement\u003e textAreas \u003d getRubricTextareas(questionNum, i + 2);"},{"lineNumber":732,"author":{"gitId":"-"},"content":"            assertEquals(subQuestions.get(i), textAreas.get(0).getAttribute(\"value\"));"},{"lineNumber":733,"author":{"gitId":"-"},"content":"            for (int j \u003d 0; j \u003c numChoices; j++) {"},{"lineNumber":734,"author":{"gitId":"-"},"content":"                assertEquals(descriptions.get(i).get(j), textAreas.get(j + 1).getAttribute(\"value\"));"},{"lineNumber":735,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":736,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":737,"author":{"gitId":"-"},"content":""},{"lineNumber":738,"author":{"gitId":"-"},"content":"        if (questionDetails.isHasAssignedWeights()) {"},{"lineNumber":739,"author":{"gitId":"-"},"content":"            assertTrue(getWeightCheckbox(questionNum).isSelected());"},{"lineNumber":740,"author":{"gitId":"-"},"content":"            List\u003cList\u003cDouble\u003e\u003e weights \u003d questionDetails.getRubricWeights();"},{"lineNumber":741,"author":{"gitId":"-"},"content":"            for (int i \u003d 0; i \u003c numSubQn; i++) {"},{"lineNumber":742,"author":{"gitId":"-"},"content":"                List\u003cWebElement\u003e rubricWeights \u003d getRubricWeights(questionNum, i + 2);"},{"lineNumber":743,"author":{"gitId":"-"},"content":"                for (int j \u003d 0; j \u003c numChoices; j++) {"},{"lineNumber":744,"author":{"gitId":"jasonqiu212"},"content":"                    assertEquals(getDoubleString(weights.get(i).get(j)),"},{"lineNumber":745,"author":{"gitId":"jasonqiu212"},"content":"                            rubricWeights.get(j).getAttribute(\"value\"));"},{"lineNumber":746,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":747,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":748,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":749,"author":{"gitId":"-"},"content":"            assertFalse(getWeightCheckbox(questionNum).isSelected());"},{"lineNumber":750,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":751,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":752,"author":{"gitId":"-"},"content":""},{"lineNumber":753,"author":{"gitId":"-"},"content":"    public void addRubricQuestion(FeedbackQuestionAttributes feedbackQuestion) {"},{"lineNumber":754,"author":{"gitId":"-"},"content":"        addNewQuestion(9);"},{"lineNumber":755,"author":{"gitId":"-"},"content":"        int questionNum \u003d getNumQuestions();"},{"lineNumber":756,"author":{"gitId":"-"},"content":"        inputQuestionDetails(questionNum, feedbackQuestion);"},{"lineNumber":757,"author":{"gitId":"-"},"content":"        FeedbackRubricQuestionDetails questionDetails \u003d"},{"lineNumber":758,"author":{"gitId":"-"},"content":"                (FeedbackRubricQuestionDetails) feedbackQuestion.getQuestionDetailsCopy();"},{"lineNumber":759,"author":{"gitId":"-"},"content":"        inputRubricDetails(questionNum, questionDetails);"},{"lineNumber":760,"author":{"gitId":"-"},"content":"        clickSaveNewQuestionButton();"},{"lineNumber":761,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":762,"author":{"gitId":"-"},"content":""},{"lineNumber":763,"author":{"gitId":"-"},"content":"    public void editRubricQuestion(int questionNum, FeedbackRubricQuestionDetails questionDetails) {"},{"lineNumber":764,"author":{"gitId":"-"},"content":"        clickEditQuestionButton(questionNum);"},{"lineNumber":765,"author":{"gitId":"-"},"content":"        inputRubricDetails(questionNum, questionDetails);"},{"lineNumber":766,"author":{"gitId":"-"},"content":"        clickSaveQuestionButton(questionNum);"},{"lineNumber":767,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":768,"author":{"gitId":"-"},"content":""},{"lineNumber":769,"author":{"gitId":"-"},"content":"    public void verifyRankQuestionDetails(int questionNum, FeedbackRankQuestionDetails questionDetails) {"},{"lineNumber":770,"author":{"gitId":"-"},"content":"        if (questionDetails instanceof FeedbackRankOptionsQuestionDetails) {"},{"lineNumber":771,"author":{"gitId":"-"},"content":"            FeedbackRankOptionsQuestionDetails optionDetails \u003d (FeedbackRankOptionsQuestionDetails) questionDetails;"},{"lineNumber":772,"author":{"gitId":"-"},"content":"            verifyOptions(questionNum, optionDetails.getOptions());"},{"lineNumber":773,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":774,"author":{"gitId":"-"},"content":"        assertEquals(getAllowDuplicateRankCheckbox(questionNum).isSelected(), questionDetails.isAreDuplicatesAllowed());"},{"lineNumber":775,"author":{"gitId":"-"},"content":"        verifyMaxOptions(questionNum, questionDetails.getMaxOptionsToBeRanked());"},{"lineNumber":776,"author":{"gitId":"-"},"content":"        verifyMinOptions(questionNum, questionDetails.getMinOptionsToBeRanked());"},{"lineNumber":777,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":778,"author":{"gitId":"-"},"content":""},{"lineNumber":779,"author":{"gitId":"-"},"content":"    public void addRankOptionsQuestion(FeedbackQuestionAttributes feedbackQuestion) {"},{"lineNumber":780,"author":{"gitId":"-"},"content":"        addNewQuestion(10);"},{"lineNumber":781,"author":{"gitId":"-"},"content":"        int questionNum \u003d getNumQuestions();"},{"lineNumber":782,"author":{"gitId":"-"},"content":"        inputQuestionDetails(questionNum, feedbackQuestion);"},{"lineNumber":783,"author":{"gitId":"-"},"content":"        FeedbackRankOptionsQuestionDetails questionDetails \u003d"},{"lineNumber":784,"author":{"gitId":"-"},"content":"                (FeedbackRankOptionsQuestionDetails) feedbackQuestion.getQuestionDetailsCopy();"},{"lineNumber":785,"author":{"gitId":"-"},"content":"        inputRankDetails(questionNum, questionDetails);"},{"lineNumber":786,"author":{"gitId":"-"},"content":"        clickSaveNewQuestionButton();"},{"lineNumber":787,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":788,"author":{"gitId":"-"},"content":""},{"lineNumber":789,"author":{"gitId":"-"},"content":"    public void addRankRecipientsQuestion(FeedbackQuestionAttributes feedbackQuestion) {"},{"lineNumber":790,"author":{"gitId":"-"},"content":"        addNewQuestion(11);"},{"lineNumber":791,"author":{"gitId":"-"},"content":"        int questionNum \u003d getNumQuestions();"},{"lineNumber":792,"author":{"gitId":"-"},"content":"        inputQuestionDetails(questionNum, feedbackQuestion);"},{"lineNumber":793,"author":{"gitId":"-"},"content":"        FeedbackRankQuestionDetails questionDetails \u003d"},{"lineNumber":794,"author":{"gitId":"-"},"content":"                (FeedbackRankQuestionDetails) feedbackQuestion.getQuestionDetailsCopy();"},{"lineNumber":795,"author":{"gitId":"-"},"content":"        inputRankDetails(questionNum, questionDetails);"},{"lineNumber":796,"author":{"gitId":"-"},"content":"        clickSaveNewQuestionButton();"},{"lineNumber":797,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":798,"author":{"gitId":"-"},"content":""},{"lineNumber":799,"author":{"gitId":"-"},"content":"    public void editRankQuestion(int questionNum, FeedbackRankQuestionDetails questionDetails) {"},{"lineNumber":800,"author":{"gitId":"-"},"content":"        clickEditQuestionButton(questionNum);"},{"lineNumber":801,"author":{"gitId":"-"},"content":"        inputRankDetails(questionNum, questionDetails);"},{"lineNumber":802,"author":{"gitId":"-"},"content":"        clickSaveQuestionButton(questionNum);"},{"lineNumber":803,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":804,"author":{"gitId":"-"},"content":""},{"lineNumber":805,"author":{"gitId":"-"},"content":"    private String getCourseId() {"},{"lineNumber":806,"author":{"gitId":"-"},"content":"        return courseIdTextBox.getText();"},{"lineNumber":807,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":808,"author":{"gitId":"-"},"content":""},{"lineNumber":809,"author":{"gitId":"-"},"content":"    private String getCourseName() {"},{"lineNumber":810,"author":{"gitId":"-"},"content":"        return courseNameTextBox.getText();"},{"lineNumber":811,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":812,"author":{"gitId":"-"},"content":""},{"lineNumber":813,"author":{"gitId":"-"},"content":"    private String getTimeZone() {"},{"lineNumber":814,"author":{"gitId":"-"},"content":"        return timezoneDropDown.getText();"},{"lineNumber":815,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":816,"author":{"gitId":"-"},"content":""},{"lineNumber":817,"author":{"gitId":"-"},"content":"    private String getFeedbackSessionName() {"},{"lineNumber":818,"author":{"gitId":"-"},"content":"        return sessionNameTextBox.getText();"},{"lineNumber":819,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":820,"author":{"gitId":"-"},"content":""},{"lineNumber":821,"author":{"gitId":"-"},"content":"    private String getInstructions() {"},{"lineNumber":822,"author":{"gitId":"-"},"content":"        return getEditorRichText(instructionsEditor.findElement(By.tagName(\"editor\")));"},{"lineNumber":823,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":824,"author":{"gitId":"-"},"content":""},{"lineNumber":825,"author":{"gitId":"-"},"content":"    private String getStartDate() {"},{"lineNumber":826,"author":{"gitId":"-"},"content":"        return startDateBox.findElement(By.tagName(\"input\")).getAttribute(\"value\");"},{"lineNumber":827,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":828,"author":{"gitId":"-"},"content":""},{"lineNumber":829,"author":{"gitId":"-"},"content":"    private String getStartTime() {"},{"lineNumber":830,"author":{"gitId":"-"},"content":"        return getSelectedDropdownOptionText(startTimeDropdown.findElement(By.tagName(\"select\")));"},{"lineNumber":831,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":832,"author":{"gitId":"-"},"content":""},{"lineNumber":833,"author":{"gitId":"-"},"content":"    private String getEndDate() {"},{"lineNumber":834,"author":{"gitId":"-"},"content":"        return endDateBox.findElement(By.tagName(\"input\")).getAttribute(\"value\");"},{"lineNumber":835,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":836,"author":{"gitId":"-"},"content":""},{"lineNumber":837,"author":{"gitId":"-"},"content":"    private String getEndTime() {"},{"lineNumber":838,"author":{"gitId":"-"},"content":"        return getSelectedDropdownOptionText(endTimeDropdown.findElement(By.tagName(\"select\")));"},{"lineNumber":839,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":840,"author":{"gitId":"-"},"content":""},{"lineNumber":841,"author":{"gitId":"-"},"content":"    private String getSessionVisibilityDate() {"},{"lineNumber":842,"author":{"gitId":"-"},"content":"        return sessionVisibilityDateBox.findElement(By.tagName(\"input\")).getAttribute(\"value\");"},{"lineNumber":843,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":844,"author":{"gitId":"-"},"content":""},{"lineNumber":845,"author":{"gitId":"-"},"content":"    private String getSessionVisibilityTime() {"},{"lineNumber":846,"author":{"gitId":"-"},"content":"        return getSelectedDropdownOptionText(sessionVisibilityTimeDropdown.findElement(By.tagName(\"select\")));"},{"lineNumber":847,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":848,"author":{"gitId":"-"},"content":""},{"lineNumber":849,"author":{"gitId":"-"},"content":"    private String getResponseVisibilityDate() {"},{"lineNumber":850,"author":{"gitId":"-"},"content":"        return responseVisibilityDateBox.findElement(By.tagName(\"input\"))"},{"lineNumber":851,"author":{"gitId":"-"},"content":"                .getAttribute(\"value\");"},{"lineNumber":852,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":853,"author":{"gitId":"-"},"content":""},{"lineNumber":854,"author":{"gitId":"-"},"content":"    private String getResponseVisibilityTime() {"},{"lineNumber":855,"author":{"gitId":"-"},"content":"        return getSelectedDropdownOptionText(responseVisibilityTimeDropdown.findElement(By.tagName(\"select\")));"},{"lineNumber":856,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":857,"author":{"gitId":"-"},"content":""},{"lineNumber":858,"author":{"gitId":"-"},"content":"    private String getGracePeriod() {"},{"lineNumber":859,"author":{"gitId":"-"},"content":"        return getSelectedDropdownOptionText(gracePeriodDropdown);"},{"lineNumber":860,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":861,"author":{"gitId":"-"},"content":""},{"lineNumber":862,"author":{"gitId":"-"},"content":"    private String getSubmissionStatus() {"},{"lineNumber":863,"author":{"gitId":"-"},"content":"        return submissionStatusTextBox.getText();"},{"lineNumber":864,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":865,"author":{"gitId":"-"},"content":""},{"lineNumber":866,"author":{"gitId":"-"},"content":"    private String getPublishedStatus() {"},{"lineNumber":867,"author":{"gitId":"-"},"content":"        return publishStatusTextBox.getText();"},{"lineNumber":868,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":869,"author":{"gitId":"-"},"content":""},{"lineNumber":870,"author":{"gitId":"-"},"content":"    private String getDateString(Instant instant, String timeZone) {"},{"lineNumber":871,"author":{"gitId":"-"},"content":"        return getDisplayedDateTime(instant, timeZone, \"EE, dd MMM, yyyy\");"},{"lineNumber":872,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":873,"author":{"gitId":"-"},"content":""},{"lineNumber":874,"author":{"gitId":"-"},"content":"    private String getTimeString(Instant instant, String timeZone) {"},{"lineNumber":875,"author":{"gitId":"-"},"content":"        ZonedDateTime dateTime \u003d instant.atZone(ZoneId.of(timeZone));"},{"lineNumber":876,"author":{"gitId":"-"},"content":"        if (dateTime.getHour() \u003d\u003d 0 \u0026\u0026 dateTime.getMinute() \u003d\u003d 0) {"},{"lineNumber":877,"author":{"gitId":"-"},"content":"            return \"23:59H\";"},{"lineNumber":878,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":879,"author":{"gitId":"-"},"content":"        return getDisplayedDateTime(instant, timeZone, \"HH:00\") + \"H\";"},{"lineNumber":880,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":881,"author":{"gitId":"-"},"content":""},{"lineNumber":882,"author":{"gitId":"-"},"content":"    private void setInstructions(String newInstructions) {"},{"lineNumber":883,"author":{"gitId":"-"},"content":"        writeToRichTextEditor(instructionsEditor.findElement(By.tagName(\"editor\")), newInstructions);"},{"lineNumber":884,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":885,"author":{"gitId":"-"},"content":""},{"lineNumber":886,"author":{"gitId":"-"},"content":"    private void setSessionStartDateTime(Instant startInstant, String timeZone) {"},{"lineNumber":887,"author":{"gitId":"-"},"content":"        setDateTime(startDateBox, startTimeDropdown, startInstant, timeZone);"},{"lineNumber":888,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":889,"author":{"gitId":"-"},"content":""},{"lineNumber":890,"author":{"gitId":"-"},"content":"    private void setSessionEndDateTime(Instant endInstant, String timeZone) {"},{"lineNumber":891,"author":{"gitId":"-"},"content":"        setDateTime(endDateBox, endTimeDropdown, endInstant, timeZone);"},{"lineNumber":892,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":893,"author":{"gitId":"-"},"content":""},{"lineNumber":894,"author":{"gitId":"-"},"content":"    private void setVisibilityDateTime(Instant startInstant, String timeZone) {"},{"lineNumber":895,"author":{"gitId":"-"},"content":"        setDateTime(sessionVisibilityDateBox, sessionVisibilityTimeDropdown, startInstant, timeZone);"},{"lineNumber":896,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":897,"author":{"gitId":"-"},"content":""},{"lineNumber":898,"author":{"gitId":"-"},"content":"    private void setResponseDateTime(Instant endInstant, String timeZone) {"},{"lineNumber":899,"author":{"gitId":"-"},"content":"        setDateTime(responseVisibilityDateBox, responseVisibilityTimeDropdown, endInstant, timeZone);"},{"lineNumber":900,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":901,"author":{"gitId":"-"},"content":""},{"lineNumber":902,"author":{"gitId":"-"},"content":"    private void setDateTime(WebElement dateBox, WebElement timeBox, Instant startInstant, String timeZone) {"},{"lineNumber":903,"author":{"gitId":"-"},"content":"        fillDatePicker(dateBox, startInstant, timeZone);"},{"lineNumber":904,"author":{"gitId":"-"},"content":""},{"lineNumber":905,"author":{"gitId":"-"},"content":"        selectDropdownOptionByText(timeBox.findElement(By.tagName(\"select\")), getTimeString(startInstant, timeZone));"},{"lineNumber":906,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":907,"author":{"gitId":"-"},"content":""},{"lineNumber":908,"author":{"gitId":"-"},"content":"    private void selectGracePeriod(long gracePeriodMinutes) {"},{"lineNumber":909,"author":{"gitId":"-"},"content":"        selectDropdownOptionByText(gracePeriodDropdown, gracePeriodMinutes + \" min\");"},{"lineNumber":910,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":911,"author":{"gitId":"-"},"content":""},{"lineNumber":912,"author":{"gitId":"-"},"content":"    private void setVisibilitySettings(FeedbackSessionAttributes newFeedbackSession) {"},{"lineNumber":913,"author":{"gitId":"-"},"content":"        showVisibilitySettings();"},{"lineNumber":914,"author":{"gitId":"-"},"content":""},{"lineNumber":915,"author":{"gitId":"-"},"content":"        setSessionVisibilitySettings(newFeedbackSession);"},{"lineNumber":916,"author":{"gitId":"-"},"content":"        setResponseVisibilitySettings(newFeedbackSession);"},{"lineNumber":917,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":918,"author":{"gitId":"-"},"content":""},{"lineNumber":919,"author":{"gitId":"-"},"content":"    private void setSessionVisibilitySettings(FeedbackSessionAttributes newFeedbackSession) {"},{"lineNumber":920,"author":{"gitId":"-"},"content":"        Instant sessionDateTime \u003d newFeedbackSession.getSessionVisibleFromTime();"},{"lineNumber":921,"author":{"gitId":"-"},"content":"        if (sessionDateTime.equals(Const.TIME_REPRESENTS_FOLLOW_OPENING)) {"},{"lineNumber":922,"author":{"gitId":"-"},"content":"            click(openSessionVisibleTimeButton);"},{"lineNumber":923,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":924,"author":{"gitId":"-"},"content":"            click(customSessionVisibleTimeButton);"},{"lineNumber":925,"author":{"gitId":"-"},"content":"            setVisibilityDateTime(sessionDateTime, newFeedbackSession.getTimeZone());"},{"lineNumber":926,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":927,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":928,"author":{"gitId":"-"},"content":""},{"lineNumber":929,"author":{"gitId":"-"},"content":"    private void setResponseVisibilitySettings(FeedbackSessionAttributes newFeedbackSession) {"},{"lineNumber":930,"author":{"gitId":"-"},"content":"        Instant responseDateTime \u003d newFeedbackSession.getResultsVisibleFromTime();"},{"lineNumber":931,"author":{"gitId":"-"},"content":"        if (responseDateTime.equals(Const.TIME_REPRESENTS_FOLLOW_VISIBLE)) {"},{"lineNumber":932,"author":{"gitId":"-"},"content":"            click(immediateResponseVisibleTimeButton);"},{"lineNumber":933,"author":{"gitId":"-"},"content":"        } else if (responseDateTime.equals(Const.TIME_REPRESENTS_LATER)) {"},{"lineNumber":934,"author":{"gitId":"-"},"content":"            click(manualResponseVisibleTimeButton);"},{"lineNumber":935,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":936,"author":{"gitId":"-"},"content":"            click(customResponseVisibleTimeButton);"},{"lineNumber":937,"author":{"gitId":"-"},"content":"            setResponseDateTime(responseDateTime, newFeedbackSession.getTimeZone());"},{"lineNumber":938,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":939,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":940,"author":{"gitId":"-"},"content":""},{"lineNumber":941,"author":{"gitId":"-"},"content":"    private void setEmailSettings(FeedbackSessionAttributes newFeedbackSessionDetails) {"},{"lineNumber":942,"author":{"gitId":"-"},"content":"        showEmailSettings();"},{"lineNumber":943,"author":{"gitId":"-"},"content":"        if (newFeedbackSessionDetails.isOpeningEmailEnabled() !\u003d openingSessionEmailCheckbox.isSelected()) {"},{"lineNumber":944,"author":{"gitId":"-"},"content":"            click(openingSessionEmailCheckbox);"},{"lineNumber":945,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":946,"author":{"gitId":"-"},"content":"        if (newFeedbackSessionDetails.isClosingEmailEnabled() !\u003d closingSessionEmailCheckbox.isSelected()) {"},{"lineNumber":947,"author":{"gitId":"-"},"content":"            click(closingSessionEmailCheckbox);"},{"lineNumber":948,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":949,"author":{"gitId":"-"},"content":"        if (newFeedbackSessionDetails.isPublishedEmailEnabled() !\u003d publishedSessionEmailCheckbox.isSelected()) {"},{"lineNumber":950,"author":{"gitId":"-"},"content":"            click(publishedSessionEmailCheckbox);"},{"lineNumber":951,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":952,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":953,"author":{"gitId":"-"},"content":""},{"lineNumber":954,"author":{"gitId":"-"},"content":"    private void showVisibilitySettings() {"},{"lineNumber":955,"author":{"gitId":"-"},"content":"        if (isElementPresent(By.id(\"btn-change-visibility\"))) {"},{"lineNumber":956,"author":{"gitId":"-"},"content":"            click(changeVisibilityButton);"},{"lineNumber":957,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":958,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":959,"author":{"gitId":"-"},"content":""},{"lineNumber":960,"author":{"gitId":"-"},"content":"    private void showEmailSettings() {"},{"lineNumber":961,"author":{"gitId":"-"},"content":"        if (isElementPresent(By.id(\"btn-change-email\"))) {"},{"lineNumber":962,"author":{"gitId":"-"},"content":"            click(changeEmailButton);"},{"lineNumber":963,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":964,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":965,"author":{"gitId":"-"},"content":""},{"lineNumber":966,"author":{"gitId":"-"},"content":"    private int getNumQuestions() {"},{"lineNumber":967,"author":{"gitId":"-"},"content":"        return browser.driver.findElements(By.tagName(\"tm-question-edit-form\")).size();"},{"lineNumber":968,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":969,"author":{"gitId":"-"},"content":""},{"lineNumber":970,"author":{"gitId":"-"},"content":"    private WebElement getQuestionForm(int questionNum) {"},{"lineNumber":971,"author":{"gitId":"-"},"content":"        return browser.driver.findElements(By.tagName(\"tm-question-edit-form\")).get(questionNum - 1);"},{"lineNumber":972,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":973,"author":{"gitId":"-"},"content":""},{"lineNumber":974,"author":{"gitId":"-"},"content":"    private FeedbackQuestionType getQuestionType(int questionNum) {"},{"lineNumber":975,"author":{"gitId":"jasonqiu212"},"content":"        String questionType \u003d getQuestionForm(questionNum).findElement(By.id(\"question-type\")).getText().trim();"},{"lineNumber":976,"author":{"gitId":"-"},"content":""},{"lineNumber":977,"author":{"gitId":"-"},"content":"        switch (questionType) {"},{"lineNumber":978,"author":{"gitId":"-"},"content":"        case \"Essay question\":"},{"lineNumber":979,"author":{"gitId":"-"},"content":"            return FeedbackQuestionType.TEXT;"},{"lineNumber":980,"author":{"gitId":"-"},"content":"        case \"Multiple-Choice (single answer) question\":"},{"lineNumber":981,"author":{"gitId":"-"},"content":"            return FeedbackQuestionType.MCQ;"},{"lineNumber":982,"author":{"gitId":"-"},"content":"        case \"Multiple-choice (multiple answers) question\":"},{"lineNumber":983,"author":{"gitId":"-"},"content":"            return FeedbackQuestionType.MSQ;"},{"lineNumber":984,"author":{"gitId":"-"},"content":"        case \"Numerical Scale Question\":"},{"lineNumber":985,"author":{"gitId":"-"},"content":"            return FeedbackQuestionType.NUMSCALE;"},{"lineNumber":986,"author":{"gitId":"-"},"content":"        case \"Distribute points (among options) question\":"},{"lineNumber":987,"author":{"gitId":"-"},"content":"            return FeedbackQuestionType.CONSTSUM_OPTIONS;"},{"lineNumber":988,"author":{"gitId":"-"},"content":"        case \"Distribute points (among recipients) question\":"},{"lineNumber":989,"author":{"gitId":"-"},"content":"            return FeedbackQuestionType.CONSTSUM_RECIPIENTS;"},{"lineNumber":990,"author":{"gitId":"-"},"content":"        case \"Team contribution question\":"},{"lineNumber":991,"author":{"gitId":"-"},"content":"            return FeedbackQuestionType.CONTRIB;"},{"lineNumber":992,"author":{"gitId":"-"},"content":"        case \"Rubric question\":"},{"lineNumber":993,"author":{"gitId":"-"},"content":"            return FeedbackQuestionType.RUBRIC;"},{"lineNumber":994,"author":{"gitId":"-"},"content":"        case \"Rank (options) question\":"},{"lineNumber":995,"author":{"gitId":"-"},"content":"            return FeedbackQuestionType.RANK_OPTIONS;"},{"lineNumber":996,"author":{"gitId":"-"},"content":"        case \"Rank (recipients) question\":"},{"lineNumber":997,"author":{"gitId":"-"},"content":"            return FeedbackQuestionType.RANK_RECIPIENTS;"},{"lineNumber":998,"author":{"gitId":"-"},"content":"        default:"},{"lineNumber":999,"author":{"gitId":"-"},"content":"            throw new IllegalArgumentException(\"Unknown FeedbackQuestionType\");"},{"lineNumber":1000,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1001,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1002,"author":{"gitId":"-"},"content":""},{"lineNumber":1003,"author":{"gitId":"-"},"content":"    private int getQuestionNumber(int questionNum) {"},{"lineNumber":1004,"author":{"gitId":"-"},"content":"        return Integer.parseInt(getQuestionForm(questionNum).findElement(By.id(\"question-number\")).getText());"},{"lineNumber":1005,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1006,"author":{"gitId":"-"},"content":""},{"lineNumber":1007,"author":{"gitId":"-"},"content":"    private String getQuestionBrief(int questionNum) {"},{"lineNumber":1008,"author":{"gitId":"-"},"content":"        return getQuestionForm(questionNum).findElement(By.id(\"question-brief\")).getAttribute(\"value\");"},{"lineNumber":1009,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1010,"author":{"gitId":"-"},"content":""},{"lineNumber":1011,"author":{"gitId":"-"},"content":"    private String getQuestionDescription(int questionNum) {"},{"lineNumber":1012,"author":{"gitId":"-"},"content":"        WebElement editor \u003d waitForElementPresence(By.cssSelector(\"#question-form-\" + questionNum + \" editor\"));"},{"lineNumber":1013,"author":{"gitId":"-"},"content":"        return getEditorRichText(editor);"},{"lineNumber":1014,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1015,"author":{"gitId":"-"},"content":""},{"lineNumber":1016,"author":{"gitId":"-"},"content":"    private String getFeedbackGiver(int questionNum) {"},{"lineNumber":1017,"author":{"gitId":"-"},"content":"        String feedbackPath \u003d getFeedbackPath(questionNum);"},{"lineNumber":1018,"author":{"gitId":"-"},"content":"        if (CUSTOM_FEEDBACK_PATH_OPTION.equals(feedbackPath)) {"},{"lineNumber":1019,"author":{"gitId":"-"},"content":"            return getSelectedDropdownOptionText(getQuestionForm(questionNum)"},{"lineNumber":1020,"author":{"gitId":"-"},"content":"                    .findElement(By.tagName(\"tm-feedback-path-panel\"))"},{"lineNumber":1021,"author":{"gitId":"-"},"content":"                    .findElement(By.id(\"giver-type\")));"},{"lineNumber":1022,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1023,"author":{"gitId":"-"},"content":"        return feedbackPath.split(FEEDBACK_PATH_SEPARATOR)[0];"},{"lineNumber":1024,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1025,"author":{"gitId":"-"},"content":""},{"lineNumber":1026,"author":{"gitId":"-"},"content":"    private String getFeedbackReceiver(int questionNum) {"},{"lineNumber":1027,"author":{"gitId":"-"},"content":"        String feedbackPath \u003d getFeedbackPath(questionNum);"},{"lineNumber":1028,"author":{"gitId":"-"},"content":"        if (CUSTOM_FEEDBACK_PATH_OPTION.equals(feedbackPath)) {"},{"lineNumber":1029,"author":{"gitId":"-"},"content":"            return getSelectedDropdownOptionText(getQuestionForm(questionNum)"},{"lineNumber":1030,"author":{"gitId":"-"},"content":"                    .findElement(By.tagName(\"tm-feedback-path-panel\"))"},{"lineNumber":1031,"author":{"gitId":"-"},"content":"                    .findElement(By.id(\"receiver-type\")));"},{"lineNumber":1032,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1033,"author":{"gitId":"-"},"content":"        return feedbackPath.split(FEEDBACK_PATH_SEPARATOR)[1];"},{"lineNumber":1034,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1035,"author":{"gitId":"-"},"content":""},{"lineNumber":1036,"author":{"gitId":"-"},"content":"    private String getFeedbackPath(int questionNum) {"},{"lineNumber":1037,"author":{"gitId":"-"},"content":"        WebElement feedbackPathPanel \u003d getQuestionForm(questionNum).findElement(By.tagName(\"tm-feedback-path-panel\"));"},{"lineNumber":1038,"author":{"gitId":"-"},"content":"        return feedbackPathPanel.findElement(By.cssSelector(\"#btn-feedback-path span\")).getText();"},{"lineNumber":1039,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1040,"author":{"gitId":"-"},"content":""},{"lineNumber":1041,"author":{"gitId":"-"},"content":"    private void setQuestionBrief(int questionNum, String newBrief) {"},{"lineNumber":1042,"author":{"gitId":"-"},"content":"        fillTextBox(getQuestionForm(questionNum).findElement(By.id(\"question-brief\")), newBrief);"},{"lineNumber":1043,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1044,"author":{"gitId":"-"},"content":""},{"lineNumber":1045,"author":{"gitId":"-"},"content":"    private void setQuestionDescription(int questionNum, String newDescription) {"},{"lineNumber":1046,"author":{"gitId":"-"},"content":"        WebElement editor \u003d waitForElementPresence(By.cssSelector(\"#question-form-\" + questionNum + \" editor\"));"},{"lineNumber":1047,"author":{"gitId":"-"},"content":"        writeToRichTextEditor(editor, newDescription);"},{"lineNumber":1048,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1049,"author":{"gitId":"-"},"content":""},{"lineNumber":1050,"author":{"gitId":"-"},"content":"    private void setFeedbackPath(int questionNum, FeedbackQuestionAttributes feedbackQuestion) {"},{"lineNumber":1051,"author":{"gitId":"-"},"content":"        FeedbackParticipantType newGiver \u003d feedbackQuestion.getGiverType();"},{"lineNumber":1052,"author":{"gitId":"-"},"content":"        FeedbackParticipantType newRecipient \u003d feedbackQuestion.getRecipientType();"},{"lineNumber":1053,"author":{"gitId":"-"},"content":"        String feedbackPath \u003d getFeedbackPath(questionNum);"},{"lineNumber":1054,"author":{"gitId":"-"},"content":"        WebElement questionForm \u003d getQuestionForm(questionNum).findElement(By.tagName(\"tm-feedback-path-panel\"));"},{"lineNumber":1055,"author":{"gitId":"-"},"content":"        if (!CUSTOM_FEEDBACK_PATH_OPTION.equals(feedbackPath)) {"},{"lineNumber":1056,"author":{"gitId":"-"},"content":"            selectFeedbackPathDropdownOption(questionNum, CUSTOM_FEEDBACK_PATH_OPTION + \"...\");"},{"lineNumber":1057,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1058,"author":{"gitId":"-"},"content":"        // Set to type STUDENT first to adjust NumberOfEntitiesToGiveFeedbackTo"},{"lineNumber":1059,"author":{"gitId":"-"},"content":"        selectDropdownOptionByText(questionForm.findElement(By.id(\"giver-type\")),"},{"lineNumber":1060,"author":{"gitId":"-"},"content":"                getDisplayGiverName(FeedbackParticipantType.STUDENTS));"},{"lineNumber":1061,"author":{"gitId":"-"},"content":"        selectDropdownOptionByText(questionForm.findElement(By.id(\"receiver-type\")),"},{"lineNumber":1062,"author":{"gitId":"-"},"content":"                getDisplayRecipientName(FeedbackParticipantType.STUDENTS_EXCLUDING_SELF));"},{"lineNumber":1063,"author":{"gitId":"-"},"content":"        if (feedbackQuestion.getNumberOfEntitiesToGiveFeedbackTo() \u003d\u003d Const.MAX_POSSIBLE_RECIPIENTS) {"},{"lineNumber":1064,"author":{"gitId":"-"},"content":"            click(questionForm.findElement(By.id(\"unlimited-recipients\")));"},{"lineNumber":1065,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":1066,"author":{"gitId":"-"},"content":"            click(questionForm.findElement(By.id(\"custom-recipients\")));"},{"lineNumber":1067,"author":{"gitId":"-"},"content":"            fillTextBox(questionForm.findElement(By.id(\"custom-recipients-number\")),"},{"lineNumber":1068,"author":{"gitId":"-"},"content":"                    Integer.toString(feedbackQuestion.getNumberOfEntitiesToGiveFeedbackTo()));"},{"lineNumber":1069,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1070,"author":{"gitId":"-"},"content":""},{"lineNumber":1071,"author":{"gitId":"-"},"content":"        selectDropdownOptionByText(questionForm.findElement(By.id(\"giver-type\")), getDisplayGiverName(newGiver));"},{"lineNumber":1072,"author":{"gitId":"-"},"content":"        selectDropdownOptionByText(questionForm.findElement(By.id(\"receiver-type\")),"},{"lineNumber":1073,"author":{"gitId":"-"},"content":"                getDisplayRecipientName(newRecipient));"},{"lineNumber":1074,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1075,"author":{"gitId":"-"},"content":""},{"lineNumber":1076,"author":{"gitId":"-"},"content":"    private void selectFeedbackPathDropdownOption(int questionNum, String text) {"},{"lineNumber":1077,"author":{"gitId":"-"},"content":"        WebElement questionForm \u003d getQuestionForm(questionNum);"},{"lineNumber":1078,"author":{"gitId":"-"},"content":"        WebElement feedbackPathPanel \u003d questionForm.findElement(By.tagName(\"tm-feedback-path-panel\"));"},{"lineNumber":1079,"author":{"gitId":"-"},"content":"        click(feedbackPathPanel.findElement(By.id(\"btn-feedback-path\")));"},{"lineNumber":1080,"author":{"gitId":"-"},"content":"        WebElement dropdown \u003d feedbackPathPanel.findElement(By.id(\"feedback-path-dropdown\"));"},{"lineNumber":1081,"author":{"gitId":"weiquu"},"content":"        List\u003cWebElement\u003e options \u003d dropdown.findElements(By.className(\"dropdown-button\"));"},{"lineNumber":1082,"author":{"gitId":"-"},"content":"        for (WebElement option : options) {"},{"lineNumber":1083,"author":{"gitId":"-"},"content":"            if (option.getText().equals(text)) {"},{"lineNumber":1084,"author":{"gitId":"-"},"content":"                click(option);"},{"lineNumber":1085,"author":{"gitId":"-"},"content":"                return;"},{"lineNumber":1086,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":1087,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1088,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1089,"author":{"gitId":"-"},"content":""},{"lineNumber":1090,"author":{"gitId":"-"},"content":"    private void clickEditQuestionButton(int questionNum) {"},{"lineNumber":1091,"author":{"gitId":"-"},"content":"        click(getQuestionForm(questionNum).findElement(By.id(\"btn-edit-question\")));"},{"lineNumber":1092,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1093,"author":{"gitId":"-"},"content":""},{"lineNumber":1094,"author":{"gitId":"-"},"content":"    private void clickSaveQuestionButton(int questionNum) {"},{"lineNumber":1095,"author":{"gitId":"-"},"content":"        WebElement saveButton \u003d getQuestionForm(questionNum).findElement(By.id(\"btn-save-question\"));"},{"lineNumber":1096,"author":{"gitId":"-"},"content":"        click(saveButton);"},{"lineNumber":1097,"author":{"gitId":"-"},"content":"        ThreadHelper.waitFor(1000);"},{"lineNumber":1098,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1099,"author":{"gitId":"-"},"content":""},{"lineNumber":1100,"author":{"gitId":"-"},"content":"    private void setQuestionVisibility(int questionNum, FeedbackQuestionAttributes feedbackQuestion) {"},{"lineNumber":1101,"author":{"gitId":"-"},"content":"        WebElement questionForm \u003d getQuestionForm(questionNum);"},{"lineNumber":1102,"author":{"gitId":"-"},"content":"        WebElement visibilityPanel \u003d questionForm.findElement(By.tagName(\"tm-visibility-panel\"));"},{"lineNumber":1103,"author":{"gitId":"-"},"content":"        String visibility \u003d visibilityPanel.findElement(By.cssSelector(\"#btn-question-visibility span\")).getText();"},{"lineNumber":1104,"author":{"gitId":"-"},"content":"        if (!CUSTOM_VISIBILITY_OPTION.equals(visibility)) {"},{"lineNumber":1105,"author":{"gitId":"-"},"content":"            selectVisibilityDropdownOption(questionNum, CUSTOM_VISIBILITY_OPTION + \"...\");"},{"lineNumber":1106,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1107,"author":{"gitId":"-"},"content":""},{"lineNumber":1108,"author":{"gitId":"-"},"content":"        FeedbackParticipantType giver \u003d feedbackQuestion.getGiverType();"},{"lineNumber":1109,"author":{"gitId":"-"},"content":"        FeedbackParticipantType receiver \u003d feedbackQuestion.getRecipientType();"},{"lineNumber":1110,"author":{"gitId":"-"},"content":"        WebElement customVisibilityTable \u003d visibilityPanel.findElement(By.id(\"custom-visibility-table\"));"},{"lineNumber":1111,"author":{"gitId":"-"},"content":"        selectVisibilityBoxes(customVisibilityTable, giver, receiver, feedbackQuestion.getShowResponsesTo(), 1);"},{"lineNumber":1112,"author":{"gitId":"-"},"content":"        selectVisibilityBoxes(customVisibilityTable, giver, receiver, feedbackQuestion.getShowGiverNameTo(), 2);"},{"lineNumber":1113,"author":{"gitId":"-"},"content":"        selectVisibilityBoxes(customVisibilityTable, giver, receiver, feedbackQuestion.getShowRecipientNameTo(), 3);"},{"lineNumber":1114,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1115,"author":{"gitId":"-"},"content":""},{"lineNumber":1116,"author":{"gitId":"-"},"content":"    private void selectVisibilityBoxes(WebElement table, FeedbackParticipantType giver,"},{"lineNumber":1117,"author":{"gitId":"-"},"content":"                                       FeedbackParticipantType receiver, List\u003cFeedbackParticipantType\u003e participants,"},{"lineNumber":1118,"author":{"gitId":"-"},"content":"                                       int colNum) {"},{"lineNumber":1119,"author":{"gitId":"-"},"content":"        List\u003cFeedbackParticipantType\u003e possibleTypes \u003d new ArrayList\u003c\u003e(Arrays.asList(FeedbackParticipantType.RECEIVER,"},{"lineNumber":1120,"author":{"gitId":"-"},"content":"                FeedbackParticipantType.OWN_TEAM_MEMBERS, FeedbackParticipantType.RECEIVER_TEAM_MEMBERS,"},{"lineNumber":1121,"author":{"gitId":"-"},"content":"                FeedbackParticipantType.STUDENTS, FeedbackParticipantType.INSTRUCTORS));"},{"lineNumber":1122,"author":{"gitId":"-"},"content":"        if (!giver.equals(FeedbackParticipantType.STUDENTS)) {"},{"lineNumber":1123,"author":{"gitId":"-"},"content":"            possibleTypes.remove(FeedbackParticipantType.OWN_TEAM_MEMBERS);"},{"lineNumber":1124,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1125,"author":{"gitId":"-"},"content":"        if (!receiver.equals(FeedbackParticipantType.STUDENTS_EXCLUDING_SELF)) {"},{"lineNumber":1126,"author":{"gitId":"-"},"content":"            possibleTypes.remove(FeedbackParticipantType.RECEIVER_TEAM_MEMBERS);"},{"lineNumber":1127,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1128,"author":{"gitId":"-"},"content":"        if (receiver.equals(FeedbackParticipantType.NONE)"},{"lineNumber":1129,"author":{"gitId":"-"},"content":"                || receiver.equals(FeedbackParticipantType.SELF)"},{"lineNumber":1130,"author":{"gitId":"-"},"content":"                || receiver.equals(FeedbackParticipantType.OWN_TEAM)) {"},{"lineNumber":1131,"author":{"gitId":"-"},"content":"            possibleTypes.remove(FeedbackParticipantType.RECEIVER);"},{"lineNumber":1132,"author":{"gitId":"-"},"content":"            possibleTypes.remove(FeedbackParticipantType.RECEIVER_TEAM_MEMBERS);"},{"lineNumber":1133,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1134,"author":{"gitId":"-"},"content":""},{"lineNumber":1135,"author":{"gitId":"-"},"content":"        List\u003cWebElement\u003e rows \u003d table.findElements(By.tagName(\"tr\"));"},{"lineNumber":1136,"author":{"gitId":"-"},"content":"        int index \u003d colNum - 1;"},{"lineNumber":1137,"author":{"gitId":"-"},"content":"        for (FeedbackParticipantType participant : participants) {"},{"lineNumber":1138,"author":{"gitId":"-"},"content":"            markOptionAsSelected(rows.get(possibleTypes.indexOf(participant)).findElements(By.tagName(\"input\")).get(index));"},{"lineNumber":1139,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1140,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1141,"author":{"gitId":"-"},"content":""},{"lineNumber":1142,"author":{"gitId":"-"},"content":"    private void selectVisibilityDropdownOption(int questionNum, String text) {"},{"lineNumber":1143,"author":{"gitId":"-"},"content":"        WebElement questionForm \u003d getQuestionForm(questionNum);"},{"lineNumber":1144,"author":{"gitId":"-"},"content":"        WebElement visibilityPanel \u003d questionForm.findElement(By.tagName(\"tm-visibility-panel\"));"},{"lineNumber":1145,"author":{"gitId":"-"},"content":"        click(visibilityPanel.findElement(By.id(\"btn-question-visibility\")));"},{"lineNumber":1146,"author":{"gitId":"-"},"content":"        WebElement dropdown \u003d visibilityPanel.findElement(By.id(\"question-visibility-dropdown\"));"},{"lineNumber":1147,"author":{"gitId":"weiquu"},"content":"        List\u003cWebElement\u003e options \u003d dropdown.findElements(By.className(\"dropdown-button\"));"},{"lineNumber":1148,"author":{"gitId":"-"},"content":"        for (WebElement option : options) {"},{"lineNumber":1149,"author":{"gitId":"-"},"content":"            if (option.getText().equals(text)) {"},{"lineNumber":1150,"author":{"gitId":"-"},"content":"                click(option);"},{"lineNumber":1151,"author":{"gitId":"-"},"content":"                return;"},{"lineNumber":1152,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":1153,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1154,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1155,"author":{"gitId":"-"},"content":""},{"lineNumber":1156,"author":{"gitId":"-"},"content":"    private void clickAndWaitForNewQuestion(WebElement button) {"},{"lineNumber":1157,"author":{"gitId":"-"},"content":"        int newQuestionNum \u003d getNumQuestions() + 1;"},{"lineNumber":1158,"author":{"gitId":"-"},"content":"        click(button);"},{"lineNumber":1159,"author":{"gitId":"-"},"content":"        waitForElementPresence(By.id(\"question-form-\" + newQuestionNum));"},{"lineNumber":1160,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1161,"author":{"gitId":"-"},"content":""},{"lineNumber":1162,"author":{"gitId":"-"},"content":"    private void addNewQuestion(int optionNumber) {"},{"lineNumber":1163,"author":{"gitId":"-"},"content":"        click(addNewQuestionButton);"},{"lineNumber":1164,"author":{"gitId":"-"},"content":"        WebElement newQuestionDropdown \u003d waitForElementPresence(By.id(\"new-question-dropdown\"));"},{"lineNumber":1165,"author":{"gitId":"-"},"content":"        WebElement optionButton \u003d newQuestionDropdown.findElements(By.tagName(\"button\")).get(optionNumber - 1);"},{"lineNumber":1166,"author":{"gitId":"-"},"content":"        if (optionNumber \u003d\u003d 1) {"},{"lineNumber":1167,"author":{"gitId":"-"},"content":"            click(optionButton);"},{"lineNumber":1168,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":1169,"author":{"gitId":"-"},"content":"            clickAndWaitForNewQuestion(optionButton);"},{"lineNumber":1170,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1171,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1172,"author":{"gitId":"-"},"content":""},{"lineNumber":1173,"author":{"gitId":"-"},"content":"    private void clickSaveNewQuestionButton() {"},{"lineNumber":1174,"author":{"gitId":"-"},"content":"        WebElement saveButton \u003d browser.driver.findElement(By.id(\"btn-save-new\"));"},{"lineNumber":1175,"author":{"gitId":"-"},"content":"        click(saveButton);"},{"lineNumber":1176,"author":{"gitId":"-"},"content":"        waitForElementStaleness(saveButton);"},{"lineNumber":1177,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1178,"author":{"gitId":"-"},"content":""},{"lineNumber":1179,"author":{"gitId":"-"},"content":"    private WebElement getRecommendedTextLengthField(int questionNum) {"},{"lineNumber":1180,"author":{"gitId":"-"},"content":"        return getQuestionForm(questionNum)"},{"lineNumber":1181,"author":{"gitId":"-"},"content":"                .findElement(By.tagName(\"tm-text-question-edit-details-form\"))"},{"lineNumber":1182,"author":{"gitId":"-"},"content":"                .findElement(By.id(\"recommended-length\"));"},{"lineNumber":1183,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1184,"author":{"gitId":"-"},"content":""},{"lineNumber":1185,"author":{"gitId":"-"},"content":"    private WebElement getGenerateOptionsCheckbox(int questionNum) {"},{"lineNumber":1186,"author":{"gitId":"-"},"content":"        return getQuestionForm(questionNum).findElement(By.id(\"generate-checkbox\"));"},{"lineNumber":1187,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1188,"author":{"gitId":"-"},"content":""},{"lineNumber":1189,"author":{"gitId":"-"},"content":"    private WebElement getGenerateOptionsDropdown(int questionNum) {"},{"lineNumber":1190,"author":{"gitId":"-"},"content":"        return getQuestionForm(questionNum).findElement(By.id(\"generate-dropdown\"));"},{"lineNumber":1191,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1192,"author":{"gitId":"-"},"content":""},{"lineNumber":1193,"author":{"gitId":"-"},"content":"    private WebElement getWeightCheckbox(int questionNum) {"},{"lineNumber":1194,"author":{"gitId":"-"},"content":"        return getQuestionForm(questionNum).findElement(By.id(\"weights-checkbox\"));"},{"lineNumber":1195,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1196,"author":{"gitId":"-"},"content":""},{"lineNumber":1197,"author":{"gitId":"-"},"content":"    private WebElement getOtherOptionCheckbox(int questionNum) {"},{"lineNumber":1198,"author":{"gitId":"-"},"content":"        return getQuestionForm(questionNum).findElement(By.id(\"other-checkbox\"));"},{"lineNumber":1199,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1200,"author":{"gitId":"-"},"content":""},{"lineNumber":1201,"author":{"gitId":"-"},"content":"    private WebElement getQuestionDropdownCheckbox(int questionNum) {"},{"lineNumber":1202,"author":{"gitId":"-"},"content":"        return getQuestionForm(questionNum).findElement(By.id(\"make-question-dropdown\"));"},{"lineNumber":1203,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1204,"author":{"gitId":"-"},"content":""},{"lineNumber":1205,"author":{"gitId":"-"},"content":"    private String getGeneratedOptionString(FeedbackParticipantType type) {"},{"lineNumber":1206,"author":{"gitId":"-"},"content":"        switch (type) {"},{"lineNumber":1207,"author":{"gitId":"-"},"content":"        case STUDENTS:"},{"lineNumber":1208,"author":{"gitId":"-"},"content":"        case STUDENTS_IN_SAME_SECTION:"},{"lineNumber":1209,"author":{"gitId":"-"},"content":"            return \"students\";"},{"lineNumber":1210,"author":{"gitId":"-"},"content":"        case STUDENTS_EXCLUDING_SELF:"},{"lineNumber":1211,"author":{"gitId":"-"},"content":"            return \"students (excluding self)\";"},{"lineNumber":1212,"author":{"gitId":"-"},"content":"        case TEAMS:"},{"lineNumber":1213,"author":{"gitId":"-"},"content":"        case TEAMS_IN_SAME_SECTION:"},{"lineNumber":1214,"author":{"gitId":"-"},"content":"            return \"teams\";"},{"lineNumber":1215,"author":{"gitId":"-"},"content":"        case TEAMS_EXCLUDING_SELF:"},{"lineNumber":1216,"author":{"gitId":"-"},"content":"            return \"teams (excluding own team)\";"},{"lineNumber":1217,"author":{"gitId":"-"},"content":"        case INSTRUCTORS:"},{"lineNumber":1218,"author":{"gitId":"-"},"content":"            return \"instructors\";"},{"lineNumber":1219,"author":{"gitId":"-"},"content":"        default:"},{"lineNumber":1220,"author":{"gitId":"-"},"content":"            return \"unknown\";"},{"lineNumber":1221,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1222,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1223,"author":{"gitId":"-"},"content":""},{"lineNumber":1224,"author":{"gitId":"-"},"content":"    private String getDoubleString(Double value) {"},{"lineNumber":1225,"author":{"gitId":"-"},"content":"        return value % 1 \u003d\u003d 0 ? Integer.toString(value.intValue()) : Double.toString(value);"},{"lineNumber":1226,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1227,"author":{"gitId":"-"},"content":""},{"lineNumber":1228,"author":{"gitId":"-"},"content":"    private WebElement getOptionsSection(int questionNum) {"},{"lineNumber":1229,"author":{"gitId":"-"},"content":"        return getQuestionForm(questionNum).findElement(By.id(\"options-section\"));"},{"lineNumber":1230,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1231,"author":{"gitId":"-"},"content":""},{"lineNumber":1232,"author":{"gitId":"-"},"content":"    private List\u003cWebElement\u003e getOptionInputs(int questionNum) {"},{"lineNumber":1233,"author":{"gitId":"-"},"content":"        WebElement optionsSection \u003d getOptionsSection(questionNum);"},{"lineNumber":1234,"author":{"gitId":"-"},"content":"        return optionsSection.findElements(By.cssSelector(\"input[type\u003d\u0027text\u0027]\"));"},{"lineNumber":1235,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1236,"author":{"gitId":"-"},"content":""},{"lineNumber":1237,"author":{"gitId":"-"},"content":"    private List\u003cWebElement\u003e getOptionWeightInputs(int questionNum) {"},{"lineNumber":1238,"author":{"gitId":"-"},"content":"        WebElement optionsSection \u003d getOptionsSection(questionNum);"},{"lineNumber":1239,"author":{"gitId":"-"},"content":"        return optionsSection.findElements(By.cssSelector(\"tm-weight-field input\"));"},{"lineNumber":1240,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1241,"author":{"gitId":"-"},"content":""},{"lineNumber":1242,"author":{"gitId":"-"},"content":"    private WebElement getOtherWeightInput(int questionNum) {"},{"lineNumber":1243,"author":{"gitId":"-"},"content":"        return getQuestionForm(questionNum).findElement(By.id(\"other-weight\"));"},{"lineNumber":1244,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1245,"author":{"gitId":"-"},"content":""},{"lineNumber":1246,"author":{"gitId":"-"},"content":"    private boolean verifyGeneratedOptions(int questionNum, FeedbackParticipantType participantType) {"},{"lineNumber":1247,"author":{"gitId":"-"},"content":"        if (!participantType.equals(FeedbackParticipantType.NONE)) {"},{"lineNumber":1248,"author":{"gitId":"-"},"content":"            assertTrue(getGenerateOptionsCheckbox(questionNum).isSelected());"},{"lineNumber":1249,"author":{"gitId":"-"},"content":"            assertEquals(getSelectedDropdownOptionText(getGenerateOptionsDropdown(questionNum)),"},{"lineNumber":1250,"author":{"gitId":"-"},"content":"                    getGeneratedOptionString(participantType));"},{"lineNumber":1251,"author":{"gitId":"-"},"content":"            return true;"},{"lineNumber":1252,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1253,"author":{"gitId":"-"},"content":"        assertFalse(getGenerateOptionsCheckbox(questionNum).isSelected());"},{"lineNumber":1254,"author":{"gitId":"-"},"content":"        return false;"},{"lineNumber":1255,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1256,"author":{"gitId":"-"},"content":""},{"lineNumber":1257,"author":{"gitId":"-"},"content":"    private void verifyOptions(int questionNum, List\u003cString\u003e options) {"},{"lineNumber":1258,"author":{"gitId":"-"},"content":"        List\u003cWebElement\u003e inputs \u003d getOptionInputs(questionNum);"},{"lineNumber":1259,"author":{"gitId":"-"},"content":"        for (int i \u003d 0; i \u003c options.size(); i++) {"},{"lineNumber":1260,"author":{"gitId":"-"},"content":"            assertEquals(options.get(i), inputs.get(i).getAttribute(\"value\"));"},{"lineNumber":1261,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1262,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1263,"author":{"gitId":"-"},"content":""},{"lineNumber":1264,"author":{"gitId":"-"},"content":"    private void verifyOptionWeights(int questionNum, boolean hasWeights, List\u003cDouble\u003e weights) {"},{"lineNumber":1265,"author":{"gitId":"-"},"content":"        if (hasWeights) {"},{"lineNumber":1266,"author":{"gitId":"-"},"content":"            assertTrue(getWeightCheckbox(questionNum).isSelected());"},{"lineNumber":1267,"author":{"gitId":"-"},"content":"            List\u003cWebElement\u003e weightInputs \u003d getOptionWeightInputs(questionNum);"},{"lineNumber":1268,"author":{"gitId":"-"},"content":"            for (int i \u003d 0; i \u003c weights.size(); i++) {"},{"lineNumber":1269,"author":{"gitId":"-"},"content":"                assertEquals(getDoubleString(weights.get(i)), weightInputs.get(i).getAttribute(\"value\"));"},{"lineNumber":1270,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":1271,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":1272,"author":{"gitId":"-"},"content":"            assertFalse(getWeightCheckbox(questionNum).isSelected());"},{"lineNumber":1273,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1274,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1275,"author":{"gitId":"-"},"content":""},{"lineNumber":1276,"author":{"gitId":"-"},"content":"    private void verifyOtherOption(int questionNum, boolean hasOther, Double weight) {"},{"lineNumber":1277,"author":{"gitId":"-"},"content":"        if (hasOther) {"},{"lineNumber":1278,"author":{"gitId":"-"},"content":"            assertTrue(getOtherOptionCheckbox(questionNum).isSelected());"},{"lineNumber":1279,"author":{"gitId":"-"},"content":"            if (weight \u003e 0) {"},{"lineNumber":1280,"author":{"gitId":"-"},"content":"                String otherWeight \u003d getOtherWeightInput(questionNum).getAttribute(\"value\");"},{"lineNumber":1281,"author":{"gitId":"-"},"content":"                assertEquals(getDoubleString(weight), otherWeight);"},{"lineNumber":1282,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":1283,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":1284,"author":{"gitId":"-"},"content":"            assertFalse(getOtherOptionCheckbox(questionNum).isSelected());"},{"lineNumber":1285,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1286,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1287,"author":{"gitId":"-"},"content":""},{"lineNumber":1288,"author":{"gitId":"-"},"content":"    private void inputMcqDetails(int questionNum, FeedbackMcqQuestionDetails questionDetails) {"},{"lineNumber":1289,"author":{"gitId":"-"},"content":"        if (inputGenerateOptions(questionNum, questionDetails.getGenerateOptionsFor())) {"},{"lineNumber":1290,"author":{"gitId":"-"},"content":"            return;"},{"lineNumber":1291,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1292,"author":{"gitId":"-"},"content":""},{"lineNumber":1293,"author":{"gitId":"-"},"content":"        inputOptions(questionNum, questionDetails.getMcqChoices());"},{"lineNumber":1294,"author":{"gitId":"-"},"content":"        inputOptionWeights(questionNum, questionDetails.isHasAssignedWeights(), questionDetails.getMcqWeights());"},{"lineNumber":1295,"author":{"gitId":"-"},"content":"        inputOtherChoice(questionNum, questionDetails.isOtherEnabled(), questionDetails.getMcqOtherWeight());"},{"lineNumber":1296,"author":{"gitId":"-"},"content":"        inputDropdownEnabledChoice(questionNum, questionDetails.isQuestionDropdownEnabled());"},{"lineNumber":1297,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1298,"author":{"gitId":"-"},"content":""},{"lineNumber":1299,"author":{"gitId":"-"},"content":"    private boolean inputGenerateOptions(int questionNum, FeedbackParticipantType participantType) {"},{"lineNumber":1300,"author":{"gitId":"-"},"content":"        if (!participantType.equals(FeedbackParticipantType.NONE)) {"},{"lineNumber":1301,"author":{"gitId":"-"},"content":"            markOptionAsSelected(getGenerateOptionsCheckbox(questionNum));"},{"lineNumber":1302,"author":{"gitId":"-"},"content":"            selectDropdownOptionByText(getGenerateOptionsDropdown(questionNum),"},{"lineNumber":1303,"author":{"gitId":"-"},"content":"                    getGeneratedOptionString(participantType));"},{"lineNumber":1304,"author":{"gitId":"-"},"content":"            clickSaveQuestionButton(questionNum);"},{"lineNumber":1305,"author":{"gitId":"-"},"content":"            return true;"},{"lineNumber":1306,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1307,"author":{"gitId":"-"},"content":"        markOptionAsUnselected(getGenerateOptionsCheckbox(questionNum));"},{"lineNumber":1308,"author":{"gitId":"-"},"content":"        return false;"},{"lineNumber":1309,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1310,"author":{"gitId":"-"},"content":""},{"lineNumber":1311,"author":{"gitId":"-"},"content":"    private void inputOptions(int questionNum, List\u003cString\u003e options) {"},{"lineNumber":1312,"author":{"gitId":"-"},"content":"        List\u003cWebElement\u003e inputs \u003d getOptionInputs(questionNum);"},{"lineNumber":1313,"author":{"gitId":"-"},"content":"        int numInputsNeeded \u003d options.size() - inputs.size();"},{"lineNumber":1314,"author":{"gitId":"-"},"content":"        if (numInputsNeeded \u003e 0) {"},{"lineNumber":1315,"author":{"gitId":"-"},"content":"            for (int i \u003d 0; i \u003c numInputsNeeded; i++) {"},{"lineNumber":1316,"author":{"gitId":"-"},"content":"                click(getQuestionForm(questionNum).findElement(By.id(\"btn-add-option\")));"},{"lineNumber":1317,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":1318,"author":{"gitId":"-"},"content":"            inputs \u003d getOptionInputs(questionNum);"},{"lineNumber":1319,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1320,"author":{"gitId":"-"},"content":"        if (numInputsNeeded \u003c 0) {"},{"lineNumber":1321,"author":{"gitId":"-"},"content":"            for (int i \u003d 0; i \u003c -numInputsNeeded; i++) {"},{"lineNumber":1322,"author":{"gitId":"-"},"content":"                click(getOptionsSection(questionNum).findElement(By.tagName(\"button\")));"},{"lineNumber":1323,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":1324,"author":{"gitId":"-"},"content":"            inputs \u003d getOptionInputs(questionNum);"},{"lineNumber":1325,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1326,"author":{"gitId":"-"},"content":""},{"lineNumber":1327,"author":{"gitId":"-"},"content":"        for (int i \u003d 0; i \u003c options.size(); i++) {"},{"lineNumber":1328,"author":{"gitId":"-"},"content":"            fillTextBox(inputs.get(i), options.get(i));"},{"lineNumber":1329,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1330,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1331,"author":{"gitId":"-"},"content":""},{"lineNumber":1332,"author":{"gitId":"-"},"content":"    private void inputOptionWeights(int questionNum, boolean hasWeights, List\u003cDouble\u003e weights) {"},{"lineNumber":1333,"author":{"gitId":"-"},"content":"        if (hasWeights) {"},{"lineNumber":1334,"author":{"gitId":"-"},"content":"            markOptionAsSelected(getWeightCheckbox(questionNum));"},{"lineNumber":1335,"author":{"gitId":"-"},"content":"            List\u003cWebElement\u003e weightInputs \u003d getOptionWeightInputs(questionNum);"},{"lineNumber":1336,"author":{"gitId":"-"},"content":"            for (int i \u003d 0; i \u003c weights.size(); i++) {"},{"lineNumber":1337,"author":{"gitId":"-"},"content":"                fillTextBox(weightInputs.get(i), getDoubleString(weights.get(i)));"},{"lineNumber":1338,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":1339,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":1340,"author":{"gitId":"-"},"content":"            markOptionAsUnselected(getWeightCheckbox(questionNum));"},{"lineNumber":1341,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1342,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1343,"author":{"gitId":"-"},"content":""},{"lineNumber":1344,"author":{"gitId":"-"},"content":"    private void inputOtherChoice(int questionNum, boolean hasOther, Double otherWeight) {"},{"lineNumber":1345,"author":{"gitId":"-"},"content":"        if (hasOther) {"},{"lineNumber":1346,"author":{"gitId":"-"},"content":"            markOptionAsSelected(getOtherOptionCheckbox(questionNum));"},{"lineNumber":1347,"author":{"gitId":"-"},"content":"            if (otherWeight \u003e 0) {"},{"lineNumber":1348,"author":{"gitId":"-"},"content":"                fillTextBox(getOtherWeightInput(questionNum), getDoubleString(otherWeight));"},{"lineNumber":1349,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":1350,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":1351,"author":{"gitId":"-"},"content":"            markOptionAsUnselected(getOtherOptionCheckbox(questionNum));"},{"lineNumber":1352,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1353,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1354,"author":{"gitId":"-"},"content":""},{"lineNumber":1355,"author":{"gitId":"-"},"content":"    private void inputDropdownEnabledChoice(int questionNum, boolean hasOther) {"},{"lineNumber":1356,"author":{"gitId":"-"},"content":"        if (hasOther) {"},{"lineNumber":1357,"author":{"gitId":"-"},"content":"            markOptionAsSelected(getQuestionDropdownCheckbox(questionNum));"},{"lineNumber":1358,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":1359,"author":{"gitId":"-"},"content":"            markOptionAsUnselected(getQuestionDropdownCheckbox(questionNum));"},{"lineNumber":1360,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1361,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1362,"author":{"gitId":"-"},"content":""},{"lineNumber":1363,"author":{"gitId":"-"},"content":"    private WebElement getMaxOptionsCheckbox(int questionNum) {"},{"lineNumber":1364,"author":{"gitId":"-"},"content":"        return getQuestionForm(questionNum).findElement(By.id(\"max-options-checkbox\"));"},{"lineNumber":1365,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1366,"author":{"gitId":"-"},"content":""},{"lineNumber":1367,"author":{"gitId":"-"},"content":"    private WebElement getMaxOptionsInput(int questionNum) {"},{"lineNumber":1368,"author":{"gitId":"-"},"content":"        return getQuestionForm(questionNum).findElement(By.id(\"max-options\"));"},{"lineNumber":1369,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1370,"author":{"gitId":"-"},"content":""},{"lineNumber":1371,"author":{"gitId":"-"},"content":"    private WebElement getMinOptionsCheckbox(int questionNum) {"},{"lineNumber":1372,"author":{"gitId":"-"},"content":"        return getQuestionForm(questionNum).findElement(By.id(\"min-options-checkbox\"));"},{"lineNumber":1373,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1374,"author":{"gitId":"-"},"content":""},{"lineNumber":1375,"author":{"gitId":"-"},"content":"    private WebElement getMinOptionsInput(int questionNum) {"},{"lineNumber":1376,"author":{"gitId":"-"},"content":"        return getQuestionForm(questionNum).findElement(By.id(\"min-options\"));"},{"lineNumber":1377,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1378,"author":{"gitId":"-"},"content":""},{"lineNumber":1379,"author":{"gitId":"-"},"content":"    private void verifyMaxOptions(int questionNum, int maxOptions) {"},{"lineNumber":1380,"author":{"gitId":"-"},"content":"        if (maxOptions \u003d\u003d Const.POINTS_NO_VALUE) {"},{"lineNumber":1381,"author":{"gitId":"-"},"content":"            assertFalse(getMaxOptionsCheckbox(questionNum).isSelected());"},{"lineNumber":1382,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":1383,"author":{"gitId":"-"},"content":"            assertTrue(getMaxOptionsCheckbox(questionNum).isSelected());"},{"lineNumber":1384,"author":{"gitId":"-"},"content":"            assertEquals(getMaxOptionsInput(questionNum).getAttribute(\"value\"),"},{"lineNumber":1385,"author":{"gitId":"-"},"content":"                    Integer.toString(maxOptions));"},{"lineNumber":1386,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1387,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1388,"author":{"gitId":"-"},"content":""},{"lineNumber":1389,"author":{"gitId":"-"},"content":"    private void verifyMinOptions(int questionNum, int minOptions) {"},{"lineNumber":1390,"author":{"gitId":"-"},"content":"        if (minOptions \u003d\u003d Const.POINTS_NO_VALUE) {"},{"lineNumber":1391,"author":{"gitId":"-"},"content":"            assertFalse(getMinOptionsCheckbox(questionNum).isSelected());"},{"lineNumber":1392,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":1393,"author":{"gitId":"-"},"content":"            assertTrue(getMinOptionsCheckbox(questionNum).isSelected());"},{"lineNumber":1394,"author":{"gitId":"-"},"content":"            assertEquals(getMinOptionsInput(questionNum).getAttribute(\"value\"),"},{"lineNumber":1395,"author":{"gitId":"-"},"content":"                    Integer.toString(minOptions));"},{"lineNumber":1396,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1397,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1398,"author":{"gitId":"-"},"content":""},{"lineNumber":1399,"author":{"gitId":"-"},"content":"    private void inputMsqDetails(int questionNum, FeedbackMsqQuestionDetails questionDetails) {"},{"lineNumber":1400,"author":{"gitId":"-"},"content":"        if (inputGenerateOptions(questionNum, questionDetails.getGenerateOptionsFor())) {"},{"lineNumber":1401,"author":{"gitId":"-"},"content":"            return;"},{"lineNumber":1402,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1403,"author":{"gitId":"-"},"content":""},{"lineNumber":1404,"author":{"gitId":"-"},"content":"        inputOptions(questionNum, questionDetails.getMsqChoices());"},{"lineNumber":1405,"author":{"gitId":"-"},"content":"        inputOptionWeights(questionNum, questionDetails.isHasAssignedWeights(), questionDetails.getMsqWeights());"},{"lineNumber":1406,"author":{"gitId":"-"},"content":"        inputOtherChoice(questionNum, questionDetails.isOtherEnabled(), questionDetails.getMsqOtherWeight());"},{"lineNumber":1407,"author":{"gitId":"-"},"content":"        inputMaxOptions(questionNum, questionDetails.getMaxSelectableChoices());"},{"lineNumber":1408,"author":{"gitId":"-"},"content":"        inputMinOptions(questionNum, questionDetails.getMinSelectableChoices());"},{"lineNumber":1409,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1410,"author":{"gitId":"-"},"content":""},{"lineNumber":1411,"author":{"gitId":"-"},"content":"    private void inputMaxOptions(int questionNum, int maxOptions) {"},{"lineNumber":1412,"author":{"gitId":"-"},"content":"        if (maxOptions \u003d\u003d Const.POINTS_NO_VALUE) {"},{"lineNumber":1413,"author":{"gitId":"-"},"content":"            markOptionAsUnselected(getMaxOptionsCheckbox(questionNum));"},{"lineNumber":1414,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":1415,"author":{"gitId":"-"},"content":"            markOptionAsSelected(getMaxOptionsCheckbox(questionNum));"},{"lineNumber":1416,"author":{"gitId":"-"},"content":"            fillTextBox(getMaxOptionsInput(questionNum), Integer.toString(maxOptions));"},{"lineNumber":1417,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1418,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1419,"author":{"gitId":"-"},"content":""},{"lineNumber":1420,"author":{"gitId":"-"},"content":"    private void inputMinOptions(int questionNum, int minOptions) {"},{"lineNumber":1421,"author":{"gitId":"-"},"content":"        if (minOptions \u003d\u003d Const.POINTS_NO_VALUE) {"},{"lineNumber":1422,"author":{"gitId":"-"},"content":"            markOptionAsUnselected(getMinOptionsCheckbox(questionNum));"},{"lineNumber":1423,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":1424,"author":{"gitId":"-"},"content":"            markOptionAsSelected(getMinOptionsCheckbox(questionNum));"},{"lineNumber":1425,"author":{"gitId":"-"},"content":"            fillTextBox(getMinOptionsInput(questionNum), Integer.toString(minOptions));"},{"lineNumber":1426,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1427,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1428,"author":{"gitId":"-"},"content":""},{"lineNumber":1429,"author":{"gitId":"-"},"content":"    private WebElement getMinNumscaleInput(int questionNum) {"},{"lineNumber":1430,"author":{"gitId":"-"},"content":"        return getQuestionForm(questionNum).findElement(By.id(\"min-value\"));"},{"lineNumber":1431,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1432,"author":{"gitId":"-"},"content":""},{"lineNumber":1433,"author":{"gitId":"-"},"content":"    private WebElement getMaxNumscaleInput(int questionNum) {"},{"lineNumber":1434,"author":{"gitId":"-"},"content":"        return getQuestionForm(questionNum).findElement(By.id(\"max-value\"));"},{"lineNumber":1435,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1436,"author":{"gitId":"-"},"content":""},{"lineNumber":1437,"author":{"gitId":"-"},"content":"    private WebElement getNumScaleIncrementInput(int questionNum) {"},{"lineNumber":1438,"author":{"gitId":"-"},"content":"        return getQuestionForm(questionNum).findElement(By.id(\"increment-value\"));"},{"lineNumber":1439,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1440,"author":{"gitId":"-"},"content":""},{"lineNumber":1441,"author":{"gitId":"-"},"content":"    private void inputNumScaleDetails(int questionNum, FeedbackNumericalScaleQuestionDetails questionDetails) {"},{"lineNumber":1442,"author":{"gitId":"-"},"content":"        inputNumScaleValue(getMinNumscaleInput(questionNum), Integer.toString(questionDetails.getMinScale()));"},{"lineNumber":1443,"author":{"gitId":"-"},"content":"        inputNumScaleValue(getNumScaleIncrementInput(questionNum), getDoubleString(questionDetails.getStep()));"},{"lineNumber":1444,"author":{"gitId":"-"},"content":"        inputNumScaleValue(getMaxNumscaleInput(questionNum), Integer.toString(questionDetails.getMaxScale()));"},{"lineNumber":1445,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1446,"author":{"gitId":"-"},"content":""},{"lineNumber":1447,"author":{"gitId":"-"},"content":"    private void inputNumScaleValue(WebElement input, String value) {"},{"lineNumber":1448,"author":{"gitId":"-"},"content":"        input.clear();"},{"lineNumber":1449,"author":{"gitId":"-"},"content":"        input.sendKeys(value);"},{"lineNumber":1450,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1451,"author":{"gitId":"-"},"content":""},{"lineNumber":1452,"author":{"gitId":"-"},"content":"    private WebElement getConstSumTotalPointsRadioBtn(int questionNum) {"},{"lineNumber":1453,"author":{"gitId":"-"},"content":"        return getQuestionForm(questionNum).findElement(By.id(\"total-points-radio\"));"},{"lineNumber":1454,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1455,"author":{"gitId":"-"},"content":""},{"lineNumber":1456,"author":{"gitId":"-"},"content":"    private WebElement getConstSumTotalPointsInput(int questionNum) {"},{"lineNumber":1457,"author":{"gitId":"-"},"content":"        return getQuestionForm(questionNum).findElement(By.id(\"total-points\"));"},{"lineNumber":1458,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1459,"author":{"gitId":"-"},"content":""},{"lineNumber":1460,"author":{"gitId":"-"},"content":"    private WebElement getConstSumPerOptionPointsRadioBtn(int questionNum) {"},{"lineNumber":1461,"author":{"gitId":"-"},"content":"        return getQuestionForm(questionNum).findElement(By.id(\"per-option-points-radio\"));"},{"lineNumber":1462,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1463,"author":{"gitId":"-"},"content":""},{"lineNumber":1464,"author":{"gitId":"-"},"content":"    private WebElement getConstSumPerOptionPointsInput(int questionNum) {"},{"lineNumber":1465,"author":{"gitId":"-"},"content":"        return getQuestionForm(questionNum).findElement(By.id(\"per-option-points\"));"},{"lineNumber":1466,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1467,"author":{"gitId":"-"},"content":""},{"lineNumber":1468,"author":{"gitId":"-"},"content":"    private WebElement getConstSumUnevenDistributionCheckbox(int questionNum) {"},{"lineNumber":1469,"author":{"gitId":"-"},"content":"        return getQuestionForm(questionNum).findElement(By.id(\"uneven-distribution-checkbox\"));"},{"lineNumber":1470,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1471,"author":{"gitId":"-"},"content":""},{"lineNumber":1472,"author":{"gitId":"-"},"content":"    private WebElement getConstSumUnevenDistributionDropdown(int questionNum) {"},{"lineNumber":1473,"author":{"gitId":"-"},"content":"        return getQuestionForm(questionNum).findElement(By.id(\"uneven-distribution-dropdown\"));"},{"lineNumber":1474,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1475,"author":{"gitId":"-"},"content":""},{"lineNumber":1476,"author":{"gitId":"-"},"content":"    private void inputConstSumDetails(int questionNum, FeedbackConstantSumQuestionDetails questionDetails) {"},{"lineNumber":1477,"author":{"gitId":"-"},"content":"        if (!questionDetails.isDistributeToRecipients()) {"},{"lineNumber":1478,"author":{"gitId":"-"},"content":"            inputOptions(questionNum, questionDetails.getConstSumOptions());"},{"lineNumber":1479,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1480,"author":{"gitId":"-"},"content":"        if (questionDetails.isPointsPerOption()) {"},{"lineNumber":1481,"author":{"gitId":"-"},"content":"            click(getConstSumPerOptionPointsRadioBtn(questionNum));"},{"lineNumber":1482,"author":{"gitId":"-"},"content":"            fillTextBox(getConstSumPerOptionPointsInput(questionNum), Integer.toString(questionDetails.getPoints()));"},{"lineNumber":1483,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":1484,"author":{"gitId":"-"},"content":"            click(getConstSumTotalPointsRadioBtn(questionNum));"},{"lineNumber":1485,"author":{"gitId":"-"},"content":"            fillTextBox(getConstSumTotalPointsInput(questionNum), Integer.toString(questionDetails.getPoints()));"},{"lineNumber":1486,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1487,"author":{"gitId":"-"},"content":"        String distributeFor \u003d questionDetails.getDistributePointsFor();"},{"lineNumber":1488,"author":{"gitId":"-"},"content":"        if (questionDetails.isForceUnevenDistribution()) {"},{"lineNumber":1489,"author":{"gitId":"-"},"content":"            markOptionAsSelected(getConstSumUnevenDistributionCheckbox(questionNum));"},{"lineNumber":1490,"author":{"gitId":"-"},"content":"            selectDropdownOptionByText(getConstSumUnevenDistributionDropdown(questionNum),"},{"lineNumber":1491,"author":{"gitId":"-"},"content":"                    \"All options\".equals(distributeFor) ? \"Every option\" : distributeFor);"},{"lineNumber":1492,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":1493,"author":{"gitId":"-"},"content":"            markOptionAsUnselected(getConstSumUnevenDistributionCheckbox(questionNum));"},{"lineNumber":1494,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1495,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1496,"author":{"gitId":"-"},"content":""},{"lineNumber":1497,"author":{"gitId":"-"},"content":"    private WebElement getZeroSumCheckbox(int questionNum) {"},{"lineNumber":1498,"author":{"gitId":"-"},"content":"        return getQuestionForm(questionNum).findElement(By.id(\"zero-sum-checkbox\"));"},{"lineNumber":1499,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1500,"author":{"gitId":"-"},"content":""},{"lineNumber":1501,"author":{"gitId":"-"},"content":"    private WebElement getAllowNotSureContributionCheckbox(int questionNum) {"},{"lineNumber":1502,"author":{"gitId":"-"},"content":"        return getQuestionForm(questionNum).findElement(By.id(\"not-sure-checkbox\"));"},{"lineNumber":1503,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1504,"author":{"gitId":"-"},"content":""},{"lineNumber":1505,"author":{"gitId":"-"},"content":"    private void inputContributionDetails(int questionNum, FeedbackContributionQuestionDetails questionDetails) {"},{"lineNumber":1506,"author":{"gitId":"-"},"content":"        if (questionDetails.isZeroSum()) {"},{"lineNumber":1507,"author":{"gitId":"-"},"content":"            markOptionAsSelected(getZeroSumCheckbox(questionNum));"},{"lineNumber":1508,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":1509,"author":{"gitId":"-"},"content":"            markOptionAsUnselected(getZeroSumCheckbox(questionNum));"},{"lineNumber":1510,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1511,"author":{"gitId":"-"},"content":"        if (questionDetails.isNotSureAllowed()) {"},{"lineNumber":1512,"author":{"gitId":"-"},"content":"            markOptionAsSelected(getAllowNotSureContributionCheckbox(questionNum));"},{"lineNumber":1513,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":1514,"author":{"gitId":"-"},"content":"            markOptionAsUnselected(getAllowNotSureContributionCheckbox(questionNum));"},{"lineNumber":1515,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1516,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1517,"author":{"gitId":"-"},"content":""},{"lineNumber":1518,"author":{"gitId":"-"},"content":"    private WebElement getRubricRow(int questionNum, int rowNumber) {"},{"lineNumber":1519,"author":{"gitId":"-"},"content":"        return getQuestionForm(questionNum).findElements(By.cssSelector(\"tm-rubric-question-edit-details-form tr\"))"},{"lineNumber":1520,"author":{"gitId":"-"},"content":"                .get(rowNumber - 1);"},{"lineNumber":1521,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1522,"author":{"gitId":"-"},"content":""},{"lineNumber":1523,"author":{"gitId":"-"},"content":"    private List\u003cWebElement\u003e getRubricChoiceInputs(int questionNum) {"},{"lineNumber":1524,"author":{"gitId":"-"},"content":"        return getRubricRow(questionNum, 1).findElements(By.tagName(\"input\"));"},{"lineNumber":1525,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1526,"author":{"gitId":"-"},"content":""},{"lineNumber":1527,"author":{"gitId":"-"},"content":"    private List\u003cWebElement\u003e getRubricTextareas(int questionNum, int rowNum) {"},{"lineNumber":1528,"author":{"gitId":"-"},"content":"        return getRubricRow(questionNum, rowNum).findElements(By.tagName(\"textarea\"));"},{"lineNumber":1529,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1530,"author":{"gitId":"-"},"content":""},{"lineNumber":1531,"author":{"gitId":"-"},"content":"    private List\u003cWebElement\u003e getRubricWeights(int questionNum, int rowNum) {"},{"lineNumber":1532,"author":{"gitId":"-"},"content":"        return getRubricRow(questionNum, rowNum).findElements(By.tagName(\"input\"));"},{"lineNumber":1533,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1534,"author":{"gitId":"-"},"content":""},{"lineNumber":1535,"author":{"gitId":"-"},"content":"    private WebElement getRubricDeleteSubQnBtn(int questionNum, int rowNum) {"},{"lineNumber":1536,"author":{"gitId":"-"},"content":"        return getRubricRow(questionNum, rowNum).findElement(By.id(\"btn-delete-subquestion\"));"},{"lineNumber":1537,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1538,"author":{"gitId":"-"},"content":""},{"lineNumber":1539,"author":{"gitId":"-"},"content":"    private WebElement getRubricDeleteChoiceBtn(int questionNum, int colNum) {"},{"lineNumber":1540,"author":{"gitId":"-"},"content":"        return getRubricRow(questionNum, getNumRubricRows(questionNum)).findElements(By.id(\"btn-delete-choice\")).get(colNum);"},{"lineNumber":1541,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1542,"author":{"gitId":"-"},"content":""},{"lineNumber":1543,"author":{"gitId":"-"},"content":"    private int getNumRubricRows(int questionNum) {"},{"lineNumber":1544,"author":{"gitId":"-"},"content":"        return getQuestionForm(questionNum).findElements(By.cssSelector(\"#rubric-table tr\")).size();"},{"lineNumber":1545,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1546,"author":{"gitId":"-"},"content":""},{"lineNumber":1547,"author":{"gitId":"-"},"content":"    private int getNumRubricCols(int questionNum) {"},{"lineNumber":1548,"author":{"gitId":"jasonqiu212"},"content":"        WebElement row \u003d getRubricRow(questionNum, 1);"},{"lineNumber":1549,"author":{"gitId":"jasonqiu212"},"content":"        return row.findElements(By.tagName(\"td\")).size() + row.findElements(By.tagName(\"th\")).size();"},{"lineNumber":1550,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1551,"author":{"gitId":"-"},"content":""},{"lineNumber":1552,"author":{"gitId":"-"},"content":"    private void inputRubricDetails(int questionNum, FeedbackRubricQuestionDetails questionDetails) {"},{"lineNumber":1553,"author":{"gitId":"-"},"content":"        int numSubQn \u003d questionDetails.getNumOfRubricSubQuestions();"},{"lineNumber":1554,"author":{"gitId":"-"},"content":"        int numChoices \u003d questionDetails.getNumOfRubricChoices();"},{"lineNumber":1555,"author":{"gitId":"-"},"content":"        adjustNumRubricFields(questionNum, numSubQn, numChoices);"},{"lineNumber":1556,"author":{"gitId":"-"},"content":""},{"lineNumber":1557,"author":{"gitId":"-"},"content":"        List\u003cString\u003e choices \u003d questionDetails.getRubricChoices();"},{"lineNumber":1558,"author":{"gitId":"-"},"content":"        for (int i \u003d 0; i \u003c numChoices; i++) {"},{"lineNumber":1559,"author":{"gitId":"-"},"content":"            fillTextBox(getRubricChoiceInputs(questionNum).get(i), choices.get(i));"},{"lineNumber":1560,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1561,"author":{"gitId":"-"},"content":""},{"lineNumber":1562,"author":{"gitId":"-"},"content":"        List\u003cString\u003e subQuestions \u003d questionDetails.getRubricSubQuestions();"},{"lineNumber":1563,"author":{"gitId":"-"},"content":"        List\u003cList\u003cString\u003e\u003e descriptions \u003d questionDetails.getRubricDescriptions();"},{"lineNumber":1564,"author":{"gitId":"-"},"content":"        for (int i \u003d 0; i \u003c numSubQn; i++) {"},{"lineNumber":1565,"author":{"gitId":"-"},"content":"            List\u003cWebElement\u003e textAreas \u003d getRubricTextareas(questionNum, i + 2);"},{"lineNumber":1566,"author":{"gitId":"-"},"content":"            fillTextBox(textAreas.get(0), subQuestions.get(i));"},{"lineNumber":1567,"author":{"gitId":"-"},"content":"            for (int j \u003d 0; j \u003c numChoices; j++) {"},{"lineNumber":1568,"author":{"gitId":"-"},"content":"                fillTextBox(textAreas.get(j + 1), descriptions.get(i).get(j));"},{"lineNumber":1569,"author":{"gitId":"-"},"content":"                if (descriptions.get(i).get(j).isEmpty()) {"},{"lineNumber":1570,"author":{"gitId":"-"},"content":"                    // using clear does not send the required event"},{"lineNumber":1571,"author":{"gitId":"-"},"content":"                    // as a workaround, after clearing without event, enter a random character and delete it"},{"lineNumber":1572,"author":{"gitId":"-"},"content":"                    textAreas.get(j + 1).sendKeys(\"a\");"},{"lineNumber":1573,"author":{"gitId":"-"},"content":"                    textAreas.get(j + 1).sendKeys(Keys.BACK_SPACE);"},{"lineNumber":1574,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":1575,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":1576,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1577,"author":{"gitId":"-"},"content":""},{"lineNumber":1578,"author":{"gitId":"-"},"content":"        if (questionDetails.isHasAssignedWeights()) {"},{"lineNumber":1579,"author":{"gitId":"-"},"content":"            markOptionAsSelected(getWeightCheckbox(questionNum));"},{"lineNumber":1580,"author":{"gitId":"-"},"content":"            List\u003cList\u003cDouble\u003e\u003e weights \u003d questionDetails.getRubricWeights();"},{"lineNumber":1581,"author":{"gitId":"-"},"content":"            for (int i \u003d 0; i \u003c numSubQn; i++) {"},{"lineNumber":1582,"author":{"gitId":"-"},"content":"                for (int j \u003d 0; j \u003c numChoices; j++) {"},{"lineNumber":1583,"author":{"gitId":"-"},"content":"                    fillTextBox(getRubricWeights(questionNum, i + 2).get(j), getDoubleString(weights.get(i).get(j)));"},{"lineNumber":1584,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":1585,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":1586,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":1587,"author":{"gitId":"-"},"content":"            markOptionAsUnselected(getWeightCheckbox(questionNum));"},{"lineNumber":1588,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1589,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1590,"author":{"gitId":"-"},"content":""},{"lineNumber":1591,"author":{"gitId":"-"},"content":"    private void adjustNumRubricFields(int questionNum, int numSubQn, int numChoices) {"},{"lineNumber":1592,"author":{"gitId":"-"},"content":"        int numSubQnsNeeded \u003d numSubQn - (getNumRubricRows(questionNum) - 2);"},{"lineNumber":1593,"author":{"gitId":"-"},"content":"        int numChoicesNeeded \u003d numChoices - (getNumRubricCols(questionNum) - 1);"},{"lineNumber":1594,"author":{"gitId":"-"},"content":"        if (numSubQnsNeeded \u003e 0) {"},{"lineNumber":1595,"author":{"gitId":"-"},"content":"            for (int i \u003d 0; i \u003c numSubQnsNeeded; i++) {"},{"lineNumber":1596,"author":{"gitId":"-"},"content":"                click(getQuestionForm(questionNum).findElement(By.id(\"btn-add-row\")));"},{"lineNumber":1597,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":1598,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1599,"author":{"gitId":"-"},"content":"        if (numChoicesNeeded \u003e 0) {"},{"lineNumber":1600,"author":{"gitId":"-"},"content":"            for (int i \u003d 0; i \u003c numChoicesNeeded; i++) {"},{"lineNumber":1601,"author":{"gitId":"-"},"content":"                click(getQuestionForm(questionNum).findElement(By.id(\"btn-add-col\")));"},{"lineNumber":1602,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":1603,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1604,"author":{"gitId":"-"},"content":"        if (numSubQnsNeeded \u003c 0) {"},{"lineNumber":1605,"author":{"gitId":"-"},"content":"            for (int i \u003d 0; i \u003c -numSubQnsNeeded; i++) {"},{"lineNumber":1606,"author":{"gitId":"-"},"content":"                click(getRubricDeleteSubQnBtn(questionNum, 2));"},{"lineNumber":1607,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":1608,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1609,"author":{"gitId":"-"},"content":"        if (numChoicesNeeded \u003c 0) {"},{"lineNumber":1610,"author":{"gitId":"-"},"content":"            for (int i \u003d 0; i \u003c -numChoicesNeeded; i++) {"},{"lineNumber":1611,"author":{"gitId":"-"},"content":"                clickAndConfirm(getRubricDeleteChoiceBtn(questionNum, 2));"},{"lineNumber":1612,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":1613,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1614,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1615,"author":{"gitId":"-"},"content":""},{"lineNumber":1616,"author":{"gitId":"-"},"content":"    private WebElement getAllowDuplicateRankCheckbox(int questionNum) {"},{"lineNumber":1617,"author":{"gitId":"-"},"content":"        return getQuestionForm(questionNum).findElement(By.id(\"duplicate-rank-checkbox\"));"},{"lineNumber":1618,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1619,"author":{"gitId":"-"},"content":""},{"lineNumber":1620,"author":{"gitId":"-"},"content":"    private void inputRankDetails(int questionNum, FeedbackRankQuestionDetails questionDetails) {"},{"lineNumber":1621,"author":{"gitId":"-"},"content":"        if (questionDetails instanceof FeedbackRankOptionsQuestionDetails) {"},{"lineNumber":1622,"author":{"gitId":"-"},"content":"            FeedbackRankOptionsQuestionDetails optionDetails \u003d (FeedbackRankOptionsQuestionDetails) questionDetails;"},{"lineNumber":1623,"author":{"gitId":"-"},"content":"            inputOptions(questionNum, optionDetails.getOptions());"},{"lineNumber":1624,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1625,"author":{"gitId":"-"},"content":"        if (questionDetails.isAreDuplicatesAllowed()) {"},{"lineNumber":1626,"author":{"gitId":"-"},"content":"            markOptionAsSelected(getAllowDuplicateRankCheckbox(questionNum));"},{"lineNumber":1627,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":1628,"author":{"gitId":"-"},"content":"            markOptionAsUnselected(getAllowDuplicateRankCheckbox(questionNum));"},{"lineNumber":1629,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1630,"author":{"gitId":"-"},"content":"        inputMaxOptions(questionNum, questionDetails.getMaxOptionsToBeRanked());"},{"lineNumber":1631,"author":{"gitId":"-"},"content":"        inputMinOptions(questionNum, questionDetails.getMinOptionsToBeRanked());"},{"lineNumber":1632,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1633,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"jasonqiu212":5,"weiquu":2,"-":1626}},{"path":"src/e2e/java/teammates/e2e/pageobjects/InstructorFeedbackResultsPage.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.e2e.pageobjects;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import static org.junit.Assert.assertEquals;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import static org.junit.Assert.assertTrue;"},{"lineNumber":5,"author":{"gitId":"-"},"content":""},{"lineNumber":6,"author":{"gitId":"-"},"content":"import java.time.Instant;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import java.util.ArrayList;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import java.util.Collection;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import java.util.Comparator;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import java.util.stream.Collectors;"},{"lineNumber":12,"author":{"gitId":"-"},"content":""},{"lineNumber":13,"author":{"gitId":"-"},"content":"import org.openqa.selenium.By;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import org.openqa.selenium.NoSuchElementException;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import org.openqa.selenium.WebElement;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"import org.openqa.selenium.support.FindBy;"},{"lineNumber":17,"author":{"gitId":"-"},"content":""},{"lineNumber":18,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.FeedbackParticipantType;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackResponseAttributes;"},{"lineNumber":21,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackResponseCommentAttributes;"},{"lineNumber":22,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackSessionAttributes;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.InstructorAttributes;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.StudentAttributes;"},{"lineNumber":25,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackConstantSumQuestionDetails;"},{"lineNumber":26,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackConstantSumResponseDetails;"},{"lineNumber":27,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackContributionResponseDetails;"},{"lineNumber":28,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackMcqQuestionDetails;"},{"lineNumber":29,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackRankOptionsQuestionDetails;"},{"lineNumber":30,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackRankOptionsResponseDetails;"},{"lineNumber":31,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackResponseDetails;"},{"lineNumber":32,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackRubricQuestionDetails;"},{"lineNumber":33,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackRubricResponseDetails;"},{"lineNumber":34,"author":{"gitId":"-"},"content":"import teammates.e2e.util.TestProperties;"},{"lineNumber":35,"author":{"gitId":"-"},"content":""},{"lineNumber":36,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":37,"author":{"gitId":"-"},"content":" * Represents the \"Results\" page for Instructors."},{"lineNumber":38,"author":{"gitId":"-"},"content":" */"},{"lineNumber":39,"author":{"gitId":"-"},"content":"public class InstructorFeedbackResultsPage extends AppPage {"},{"lineNumber":40,"author":{"gitId":"-"},"content":"    private static final String QUESTION_VIEW \u003d \"QUESTION\";"},{"lineNumber":41,"author":{"gitId":"-"},"content":"    private static final String GQR_VIEW \u003d \"GQR\";"},{"lineNumber":42,"author":{"gitId":"-"},"content":"    private static final String RQG_VIEW \u003d \"RQG\";"},{"lineNumber":43,"author":{"gitId":"-"},"content":"    private static final String GRQ_VIEW \u003d \"GRQ\";"},{"lineNumber":44,"author":{"gitId":"-"},"content":"    private static final String RGQ_VIEW \u003d \"RGQ\";"},{"lineNumber":45,"author":{"gitId":"-"},"content":""},{"lineNumber":46,"author":{"gitId":"-"},"content":"    private static final String NO_RESPONSE_LABEL \u003d \"No Response\";"},{"lineNumber":47,"author":{"gitId":"-"},"content":"    private static final String NO_TEAM_LABEL \u003d \"No Specific Team\";"},{"lineNumber":48,"author":{"gitId":"-"},"content":"    private static final String NO_SECTION_LABEL \u003d \"No specific section\";"},{"lineNumber":49,"author":{"gitId":"-"},"content":"    private static final String NO_USER_LABEL \u003d \"No Specific User\";"},{"lineNumber":50,"author":{"gitId":"-"},"content":""},{"lineNumber":51,"author":{"gitId":"-"},"content":"    private static final String MCQ_OTHER \u003d \"Other\";"},{"lineNumber":52,"author":{"gitId":"-"},"content":""},{"lineNumber":53,"author":{"gitId":"-"},"content":"    private String currentView \u003d \"\";"},{"lineNumber":54,"author":{"gitId":"-"},"content":""},{"lineNumber":55,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"course-id\")"},{"lineNumber":56,"author":{"gitId":"-"},"content":"    private WebElement courseId;"},{"lineNumber":57,"author":{"gitId":"-"},"content":""},{"lineNumber":58,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"session-name\")"},{"lineNumber":59,"author":{"gitId":"-"},"content":"    private WebElement sessionName;"},{"lineNumber":60,"author":{"gitId":"-"},"content":""},{"lineNumber":61,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"session-duration\")"},{"lineNumber":62,"author":{"gitId":"-"},"content":"    private WebElement sessionDuration;"},{"lineNumber":63,"author":{"gitId":"-"},"content":""},{"lineNumber":64,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"result-visible-date\")"},{"lineNumber":65,"author":{"gitId":"-"},"content":"    private WebElement resultVisibleDate;"},{"lineNumber":66,"author":{"gitId":"-"},"content":""},{"lineNumber":67,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"btn-publish\")"},{"lineNumber":68,"author":{"gitId":"-"},"content":"    private WebElement publishButton;"},{"lineNumber":69,"author":{"gitId":"-"},"content":""},{"lineNumber":70,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"btn-download\")"},{"lineNumber":71,"author":{"gitId":"-"},"content":"    private WebElement downloadButton;"},{"lineNumber":72,"author":{"gitId":"-"},"content":""},{"lineNumber":73,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"no-response-panel\")"},{"lineNumber":74,"author":{"gitId":"-"},"content":"    private WebElement noResponsePanel;"},{"lineNumber":75,"author":{"gitId":"-"},"content":""},{"lineNumber":76,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"btn-remind-all\")"},{"lineNumber":77,"author":{"gitId":"-"},"content":"    private WebElement remindAllButton;"},{"lineNumber":78,"author":{"gitId":"-"},"content":""},{"lineNumber":79,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"include-team-grouping\")"},{"lineNumber":80,"author":{"gitId":"-"},"content":"    private WebElement groupByTeamCheckbox;"},{"lineNumber":81,"author":{"gitId":"-"},"content":""},{"lineNumber":82,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"include-statistics\")"},{"lineNumber":83,"author":{"gitId":"-"},"content":"    private WebElement statisticsCheckbox;"},{"lineNumber":84,"author":{"gitId":"-"},"content":""},{"lineNumber":85,"author":{"gitId":"-"},"content":"    @FindBy(id \u003d \"include-missing-responses\")"},{"lineNumber":86,"author":{"gitId":"-"},"content":"    private WebElement missingResponsesCheckbox;"},{"lineNumber":87,"author":{"gitId":"-"},"content":""},{"lineNumber":88,"author":{"gitId":"-"},"content":"    public InstructorFeedbackResultsPage(Browser browser) {"},{"lineNumber":89,"author":{"gitId":"-"},"content":"        super(browser);"},{"lineNumber":90,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":91,"author":{"gitId":"-"},"content":""},{"lineNumber":92,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":93,"author":{"gitId":"-"},"content":"    protected boolean containsExpectedPageContents() {"},{"lineNumber":94,"author":{"gitId":"-"},"content":"        return getPageTitle().contains(\"Feedback Session Results\");"},{"lineNumber":95,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":96,"author":{"gitId":"-"},"content":""},{"lineNumber":97,"author":{"gitId":"-"},"content":"    public void verifySessionDetails(FeedbackSessionAttributes feedbackSession) {"},{"lineNumber":98,"author":{"gitId":"-"},"content":"        assertEquals(feedbackSession.getCourseId(), courseId.getText());"},{"lineNumber":99,"author":{"gitId":"-"},"content":"        assertEquals(feedbackSession.getFeedbackSessionName(), sessionName.getText());"},{"lineNumber":100,"author":{"gitId":"-"},"content":"        assertEquals(getSessionDurationString(feedbackSession), sessionDuration.getText());"},{"lineNumber":101,"author":{"gitId":"-"},"content":"        assertEquals(getDateString(feedbackSession.getResultsVisibleFromTime(), feedbackSession.getTimeZone()),"},{"lineNumber":102,"author":{"gitId":"-"},"content":"                resultVisibleDate.getText());"},{"lineNumber":103,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":104,"author":{"gitId":"-"},"content":""},{"lineNumber":105,"author":{"gitId":"-"},"content":"    public void unpublishSessionResults() {"},{"lineNumber":106,"author":{"gitId":"-"},"content":"        if (publishButton.getText().contains(\"Unpublish\")) {"},{"lineNumber":107,"author":{"gitId":"-"},"content":"            clickAndConfirm(publishButton);"},{"lineNumber":108,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":109,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":110,"author":{"gitId":"-"},"content":""},{"lineNumber":111,"author":{"gitId":"-"},"content":"    public void publishSessionResults() {"},{"lineNumber":112,"author":{"gitId":"-"},"content":"        if (publishButton.getText().contains(\"Publish\")) {"},{"lineNumber":113,"author":{"gitId":"-"},"content":"            clickAndConfirm(publishButton);"},{"lineNumber":114,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":115,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":116,"author":{"gitId":"-"},"content":""},{"lineNumber":117,"author":{"gitId":"-"},"content":"    public void downloadResults() {"},{"lineNumber":118,"author":{"gitId":"-"},"content":"        click(downloadButton);"},{"lineNumber":119,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":120,"author":{"gitId":"-"},"content":""},{"lineNumber":121,"author":{"gitId":"-"},"content":"    public void sortNoResponseByName() {"},{"lineNumber":122,"author":{"gitId":"-"},"content":"        click(getNoResponseTable().findElement(By.id(\"sort-by-name\")));"},{"lineNumber":123,"author":{"gitId":"-"},"content":"        waitUntilAnimationFinish();"},{"lineNumber":124,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":125,"author":{"gitId":"-"},"content":""},{"lineNumber":126,"author":{"gitId":"-"},"content":"    public void verifyNoResponsePanelDetails(List\u003cStudentAttributes\u003e noResponseStudents) {"},{"lineNumber":127,"author":{"gitId":"-"},"content":"        verifyTableBodyValues(getNoResponseTable(), getExpectedNoResponseDetails(noResponseStudents));"},{"lineNumber":128,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":129,"author":{"gitId":"-"},"content":""},{"lineNumber":130,"author":{"gitId":"-"},"content":"    public void remindAllNonResponders() {"},{"lineNumber":131,"author":{"gitId":"-"},"content":"        click(remindAllButton);"},{"lineNumber":132,"author":{"gitId":"-"},"content":"        click(waitForElementPresence(By.id(\"btn-confirm-send-reminder\")));"},{"lineNumber":133,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":134,"author":{"gitId":"-"},"content":""},{"lineNumber":135,"author":{"gitId":"-"},"content":"    public void includeGroupingByTeam(boolean isIncluded) {"},{"lineNumber":136,"author":{"gitId":"-"},"content":"        includeOption(isIncluded, groupByTeamCheckbox);"},{"lineNumber":137,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":138,"author":{"gitId":"-"},"content":""},{"lineNumber":139,"author":{"gitId":"-"},"content":"    public void includeMissingResponses(boolean isIncluded) {"},{"lineNumber":140,"author":{"gitId":"-"},"content":"        includeOption(isIncluded, missingResponsesCheckbox);"},{"lineNumber":141,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":142,"author":{"gitId":"-"},"content":""},{"lineNumber":143,"author":{"gitId":"-"},"content":"    public void includeStatistics(boolean isIncluded) {"},{"lineNumber":144,"author":{"gitId":"-"},"content":"        includeOption(isIncluded, statisticsCheckbox);"},{"lineNumber":145,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":146,"author":{"gitId":"-"},"content":""},{"lineNumber":147,"author":{"gitId":"-"},"content":"    public void expandAllPanels() {"},{"lineNumber":148,"author":{"gitId":"-"},"content":"        WebElement expandAllButton \u003d browser.driver.findElement(By.id(\"btn-expand-all\"));"},{"lineNumber":149,"author":{"gitId":"-"},"content":"        if (expandAllButton.getText().contains(\"Expand\")) {"},{"lineNumber":150,"author":{"gitId":"-"},"content":"            click(expandAllButton);"},{"lineNumber":151,"author":{"gitId":"-"},"content":"            waitUntilAnimationFinish();"},{"lineNumber":152,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":153,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":154,"author":{"gitId":"-"},"content":""},{"lineNumber":155,"author":{"gitId":"-"},"content":"    public void filterBySectionEither(String sectionName) {"},{"lineNumber":156,"author":{"gitId":"-"},"content":"        selectSectionDropdown(sectionName);"},{"lineNumber":157,"author":{"gitId":"-"},"content":"        selectSectionTypeDropdown(\"0: EITHER\");"},{"lineNumber":158,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":159,"author":{"gitId":"-"},"content":""},{"lineNumber":160,"author":{"gitId":"-"},"content":"    public void unfilterResponses() {"},{"lineNumber":161,"author":{"gitId":"-"},"content":"        selectSectionDropdown(\"All\");"},{"lineNumber":162,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":163,"author":{"gitId":"-"},"content":""},{"lineNumber":164,"author":{"gitId":"-"},"content":"    public void verifyQnViewResponses(FeedbackQuestionAttributes question, List\u003cFeedbackResponseAttributes\u003e responses,"},{"lineNumber":165,"author":{"gitId":"-"},"content":"                                      Collection\u003cInstructorAttributes\u003e instructors, Collection\u003cStudentAttributes\u003e students) {"},{"lineNumber":166,"author":{"gitId":"-"},"content":"        selectViewType(QUESTION_VIEW);"},{"lineNumber":167,"author":{"gitId":"-"},"content":""},{"lineNumber":168,"author":{"gitId":"-"},"content":"        WebElement questionPanel \u003d getQuestionPanel(question.getQuestionNumber());"},{"lineNumber":169,"author":{"gitId":"-"},"content":"        verifyQuestionText(questionPanel, question);"},{"lineNumber":170,"author":{"gitId":"-"},"content":""},{"lineNumber":171,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e responsesWithoutMissing \u003d filterMissingResponses(responses);"},{"lineNumber":172,"author":{"gitId":"-"},"content":"        if (responsesWithoutMissing.isEmpty()) {"},{"lineNumber":173,"author":{"gitId":"-"},"content":"            verifyNoResponsesMessage(questionPanel, true, true);"},{"lineNumber":174,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":175,"author":{"gitId":"-"},"content":"            String[][] expectedDetails \u003d getExpectedQnViewDetails(question, responses, instructors, students);"},{"lineNumber":176,"author":{"gitId":"-"},"content":"            verifyTableBodyValues(getResponseTable(questionPanel), expectedDetails);"},{"lineNumber":177,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":178,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":179,"author":{"gitId":"-"},"content":""},{"lineNumber":180,"author":{"gitId":"-"},"content":"    public void verifyGrqViewResponses(FeedbackQuestionAttributes question, List\u003cFeedbackResponseAttributes\u003e responses,"},{"lineNumber":181,"author":{"gitId":"-"},"content":"                                       boolean isGroupedByTeam, Collection\u003cInstructorAttributes\u003e instructors,"},{"lineNumber":182,"author":{"gitId":"-"},"content":"                                       Collection\u003cStudentAttributes\u003e students) {"},{"lineNumber":183,"author":{"gitId":"-"},"content":"        selectViewType(GRQ_VIEW);"},{"lineNumber":184,"author":{"gitId":"-"},"content":""},{"lineNumber":185,"author":{"gitId":"-"},"content":"        // all responses should be from the same giver"},{"lineNumber":186,"author":{"gitId":"-"},"content":"        String giver \u003d responses.get(0).getGiver();"},{"lineNumber":187,"author":{"gitId":"-"},"content":"        FeedbackParticipantType giverType \u003d question.getGiverType();"},{"lineNumber":188,"author":{"gitId":"-"},"content":"        WebElement giverPanel \u003d getUserPanel(giverType, giver, instructors, students, isGroupedByTeam, true);"},{"lineNumber":189,"author":{"gitId":"-"},"content":""},{"lineNumber":190,"author":{"gitId":"-"},"content":"        List\u003cString\u003e recipients \u003d getRecipients(responses);"},{"lineNumber":191,"author":{"gitId":"-"},"content":"        for (String recipient : recipients) {"},{"lineNumber":192,"author":{"gitId":"-"},"content":"            FeedbackResponseAttributes responseForRecipient \u003d getResponseForRecipient(responses, recipient);"},{"lineNumber":193,"author":{"gitId":"-"},"content":"            FeedbackParticipantType recipientType \u003d question.getRecipientType();"},{"lineNumber":194,"author":{"gitId":"-"},"content":"            String recipientTeam \u003d getTeam(recipientType, recipient, students);"},{"lineNumber":195,"author":{"gitId":"-"},"content":"            String recipientName \u003d getName(recipientType, recipient, instructors, students);"},{"lineNumber":196,"author":{"gitId":"-"},"content":""},{"lineNumber":197,"author":{"gitId":"-"},"content":"            verifyGroupedResponses(question, giverPanel, recipientName, recipientTeam, responseForRecipient, true);"},{"lineNumber":198,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":199,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":200,"author":{"gitId":"-"},"content":""},{"lineNumber":201,"author":{"gitId":"-"},"content":"    public void verifyRgqViewResponses(FeedbackQuestionAttributes question, List\u003cFeedbackResponseAttributes\u003e responses,"},{"lineNumber":202,"author":{"gitId":"-"},"content":"                                       boolean isGroupedByTeam, Collection\u003cInstructorAttributes\u003e instructors,"},{"lineNumber":203,"author":{"gitId":"-"},"content":"                                       Collection\u003cStudentAttributes\u003e students) {"},{"lineNumber":204,"author":{"gitId":"-"},"content":"        selectViewType(RGQ_VIEW);"},{"lineNumber":205,"author":{"gitId":"-"},"content":""},{"lineNumber":206,"author":{"gitId":"-"},"content":"        // all responses should have the same recipient"},{"lineNumber":207,"author":{"gitId":"-"},"content":"        String recipient \u003d responses.get(0).getRecipient();"},{"lineNumber":208,"author":{"gitId":"-"},"content":"        FeedbackParticipantType recipientType \u003d question.getRecipientType();"},{"lineNumber":209,"author":{"gitId":"-"},"content":"        WebElement recipientPanel \u003d getUserPanel(recipientType, recipient, instructors, students, isGroupedByTeam, false);"},{"lineNumber":210,"author":{"gitId":"-"},"content":""},{"lineNumber":211,"author":{"gitId":"-"},"content":"        List\u003cString\u003e givers \u003d getGivers(responses);"},{"lineNumber":212,"author":{"gitId":"-"},"content":"        for (String giver : givers) {"},{"lineNumber":213,"author":{"gitId":"-"},"content":"            FeedbackResponseAttributes responseFromGiver \u003d getResponseFromGiver(responses, giver);"},{"lineNumber":214,"author":{"gitId":"-"},"content":"            FeedbackParticipantType giverType \u003d question.getGiverType();"},{"lineNumber":215,"author":{"gitId":"-"},"content":"            String giverTeam \u003d getTeam(giverType, giver, students);"},{"lineNumber":216,"author":{"gitId":"-"},"content":"            String giverName \u003d getName(giverType, giver, instructors, students);"},{"lineNumber":217,"author":{"gitId":"-"},"content":""},{"lineNumber":218,"author":{"gitId":"-"},"content":"            verifyGroupedResponses(question, recipientPanel, giverName, giverTeam, responseFromGiver, false);"},{"lineNumber":219,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":220,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":221,"author":{"gitId":"-"},"content":""},{"lineNumber":222,"author":{"gitId":"-"},"content":"    public void verifyGqrViewResponses(FeedbackQuestionAttributes question, List\u003cFeedbackResponseAttributes\u003e responses,"},{"lineNumber":223,"author":{"gitId":"-"},"content":"                                       boolean isGroupedByTeam, Collection\u003cInstructorAttributes\u003e instructors,"},{"lineNumber":224,"author":{"gitId":"-"},"content":"                                       Collection\u003cStudentAttributes\u003e students) {"},{"lineNumber":225,"author":{"gitId":"-"},"content":"        selectViewType(GQR_VIEW);"},{"lineNumber":226,"author":{"gitId":"-"},"content":""},{"lineNumber":227,"author":{"gitId":"-"},"content":"        // all responses should be from the same giver"},{"lineNumber":228,"author":{"gitId":"-"},"content":"        String giver \u003d responses.get(0).getGiver();"},{"lineNumber":229,"author":{"gitId":"-"},"content":"        FeedbackParticipantType giverType \u003d question.getGiverType();"},{"lineNumber":230,"author":{"gitId":"-"},"content":"        WebElement giverPanel \u003d getUserPanel(giverType, giver, instructors, students, isGroupedByTeam, true);"},{"lineNumber":231,"author":{"gitId":"-"},"content":""},{"lineNumber":232,"author":{"gitId":"-"},"content":"        WebElement questionPanel \u003d getQuestionPanel(giverPanel, question.getQuestionNumber());"},{"lineNumber":233,"author":{"gitId":"-"},"content":"        verifyQuestionText(questionPanel, question);"},{"lineNumber":234,"author":{"gitId":"-"},"content":""},{"lineNumber":235,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e responsesWithoutMissing \u003d filterMissingResponses(responses);"},{"lineNumber":236,"author":{"gitId":"-"},"content":""},{"lineNumber":237,"author":{"gitId":"-"},"content":"        if (responsesWithoutMissing.isEmpty()) {"},{"lineNumber":238,"author":{"gitId":"-"},"content":"            verifyNoResponsesMessage(questionPanel, true, true);"},{"lineNumber":239,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":240,"author":{"gitId":"-"},"content":"            for (FeedbackResponseAttributes response : responses) {"},{"lineNumber":241,"author":{"gitId":"-"},"content":"                String[] expectedResponses \u003d getExpectedGqrDetails(question, response, instructors, students);"},{"lineNumber":242,"author":{"gitId":"-"},"content":"                String recipientTeam \u003d getTeam(question.getRecipientType(), response.getRecipient(), students);"},{"lineNumber":243,"author":{"gitId":"-"},"content":"                String recipientNameAndEmail \u003d getNameAndEmail(question.getRecipientType(), response.getRecipient(),"},{"lineNumber":244,"author":{"gitId":"-"},"content":"                        instructors, students);"},{"lineNumber":245,"author":{"gitId":"-"},"content":"                verifyTableRowValues(getResponseRow(questionPanel, recipientTeam, recipientNameAndEmail),"},{"lineNumber":246,"author":{"gitId":"-"},"content":"                        expectedResponses);"},{"lineNumber":247,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":248,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":249,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":250,"author":{"gitId":"-"},"content":""},{"lineNumber":251,"author":{"gitId":"-"},"content":"    public void verifyRqgViewResponses(FeedbackQuestionAttributes question, List\u003cFeedbackResponseAttributes\u003e responses,"},{"lineNumber":252,"author":{"gitId":"-"},"content":"                                       boolean isGroupedByTeam, Collection\u003cInstructorAttributes\u003e instructors,"},{"lineNumber":253,"author":{"gitId":"-"},"content":"                                       Collection\u003cStudentAttributes\u003e students) {"},{"lineNumber":254,"author":{"gitId":"-"},"content":"        selectViewType(RQG_VIEW);"},{"lineNumber":255,"author":{"gitId":"-"},"content":""},{"lineNumber":256,"author":{"gitId":"-"},"content":"        // all responses should be from the same recipient"},{"lineNumber":257,"author":{"gitId":"-"},"content":"        String recipient \u003d responses.get(0).getRecipient();"},{"lineNumber":258,"author":{"gitId":"-"},"content":"        FeedbackParticipantType recipientType \u003d question.getRecipientType();"},{"lineNumber":259,"author":{"gitId":"-"},"content":"        WebElement recipientPanel \u003d getUserPanel(recipientType, recipient, instructors, students, isGroupedByTeam, false);"},{"lineNumber":260,"author":{"gitId":"-"},"content":""},{"lineNumber":261,"author":{"gitId":"-"},"content":"        WebElement questionPanel \u003d getQuestionPanel(recipientPanel, question.getQuestionNumber());"},{"lineNumber":262,"author":{"gitId":"-"},"content":"        verifyQuestionText(questionPanel, question);"},{"lineNumber":263,"author":{"gitId":"-"},"content":""},{"lineNumber":264,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e responsesWithoutMissing \u003d filterMissingResponses(responses);"},{"lineNumber":265,"author":{"gitId":"-"},"content":""},{"lineNumber":266,"author":{"gitId":"-"},"content":"        if (responsesWithoutMissing.isEmpty()) {"},{"lineNumber":267,"author":{"gitId":"-"},"content":"            verifyNoResponsesMessage(questionPanel, true, true);"},{"lineNumber":268,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":269,"author":{"gitId":"-"},"content":"            for (FeedbackResponseAttributes response : responses) {"},{"lineNumber":270,"author":{"gitId":"-"},"content":"                String[] expectedResponses \u003d getExpectedRqgDetails(question, response, instructors, students);"},{"lineNumber":271,"author":{"gitId":"-"},"content":"                String giverTeam \u003d getTeam(question.getGiverType(), response.getGiver(), students);"},{"lineNumber":272,"author":{"gitId":"-"},"content":"                String giverNameAndEmail \u003d getNameAndEmail(question.getGiverType(), response.getGiver(), instructors,"},{"lineNumber":273,"author":{"gitId":"-"},"content":"                        students);"},{"lineNumber":274,"author":{"gitId":"-"},"content":"                verifyTableRowValues(getResponseRow(questionPanel, giverTeam, giverNameAndEmail), expectedResponses);"},{"lineNumber":275,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":276,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":277,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":278,"author":{"gitId":"-"},"content":""},{"lineNumber":279,"author":{"gitId":"-"},"content":"    private void verifyQuestionText(WebElement questionPanel, FeedbackQuestionAttributes question) {"},{"lineNumber":280,"author":{"gitId":"-"},"content":"        assertEquals(question.getQuestionDetailsCopy().getQuestionText(), getQuestionText(questionPanel));"},{"lineNumber":281,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":282,"author":{"gitId":"-"},"content":""},{"lineNumber":283,"author":{"gitId":"-"},"content":"    private void verifyGroupedResponses(FeedbackQuestionAttributes question, WebElement userPanel, String userName,"},{"lineNumber":284,"author":{"gitId":"-"},"content":"                                        String userTeam, FeedbackResponseAttributes response, boolean isGrq) {"},{"lineNumber":285,"author":{"gitId":"-"},"content":"        WebElement groupedResponses;"},{"lineNumber":286,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":287,"author":{"gitId":"-"},"content":"            groupedResponses \u003d getGroupedResponses(userPanel, userName, userTeam, isGrq);"},{"lineNumber":288,"author":{"gitId":"-"},"content":"        } catch (NoSuchElementException e) {"},{"lineNumber":289,"author":{"gitId":"-"},"content":"            // No response message shown instead of grouped responses"},{"lineNumber":290,"author":{"gitId":"-"},"content":"            // if all responses in panel are missing responses"},{"lineNumber":291,"author":{"gitId":"-"},"content":"            assertTrue(isMissingResponse(response));"},{"lineNumber":292,"author":{"gitId":"-"},"content":"            verifyNoResponsesMessage(userPanel, false, isGrq);"},{"lineNumber":293,"author":{"gitId":"-"},"content":"            return;"},{"lineNumber":294,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":295,"author":{"gitId":"-"},"content":""},{"lineNumber":296,"author":{"gitId":"-"},"content":"        if (groupedResponses \u003d\u003d null) {"},{"lineNumber":297,"author":{"gitId":"-"},"content":"            // Empty grouped response if this user only has missing responses"},{"lineNumber":298,"author":{"gitId":"-"},"content":"            assertTrue(isMissingResponse(response));"},{"lineNumber":299,"author":{"gitId":"-"},"content":"            return;"},{"lineNumber":300,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":301,"author":{"gitId":"-"},"content":""},{"lineNumber":302,"author":{"gitId":"-"},"content":"        WebElement questionPanel \u003d getQuestionPanel(groupedResponses, question.getQuestionNumber());"},{"lineNumber":303,"author":{"gitId":"-"},"content":"        verifyQuestionText(questionPanel, question);"},{"lineNumber":304,"author":{"gitId":"-"},"content":"        WebElement singleResponse \u003d questionPanel.findElement(By.id(\"response\"));"},{"lineNumber":305,"author":{"gitId":"-"},"content":"        if (isMissingResponse(response)) {"},{"lineNumber":306,"author":{"gitId":"-"},"content":"            // Missing response will only be shown if this user has some real responses"},{"lineNumber":307,"author":{"gitId":"-"},"content":"            assertEquals(NO_RESPONSE_LABEL, singleResponse.getText());"},{"lineNumber":308,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":309,"author":{"gitId":"-"},"content":"            assertEquals(getAnswerString(question, response.getResponseDetailsCopy()), singleResponse.getText());"},{"lineNumber":310,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":311,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":312,"author":{"gitId":"-"},"content":""},{"lineNumber":313,"author":{"gitId":"-"},"content":"    public void verifyQnViewStats(FeedbackQuestionAttributes question,"},{"lineNumber":314,"author":{"gitId":"-"},"content":"                                  List\u003cFeedbackResponseAttributes\u003e responses,"},{"lineNumber":315,"author":{"gitId":"-"},"content":"                                  Collection\u003cInstructorAttributes\u003e instructors,"},{"lineNumber":316,"author":{"gitId":"-"},"content":"                                  Collection\u003cStudentAttributes\u003e students) {"},{"lineNumber":317,"author":{"gitId":"-"},"content":"        selectViewType(QUESTION_VIEW);"},{"lineNumber":318,"author":{"gitId":"-"},"content":"        WebElement questionPanel \u003d getQuestionPanel(question.getQuestionNumber());"},{"lineNumber":319,"author":{"gitId":"-"},"content":"        // re-expand question panel to reset sorting order"},{"lineNumber":320,"author":{"gitId":"-"},"content":"        hideQuestionPanel(questionPanel);"},{"lineNumber":321,"author":{"gitId":"-"},"content":"        expandQuestionPanel(questionPanel);"},{"lineNumber":322,"author":{"gitId":"-"},"content":"        verifyStatistics(questionPanel, question, responses, instructors, students);"},{"lineNumber":323,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":324,"author":{"gitId":"-"},"content":""},{"lineNumber":325,"author":{"gitId":"-"},"content":"    public void verifyGqrViewStats(FeedbackQuestionAttributes question,"},{"lineNumber":326,"author":{"gitId":"-"},"content":"                                   List\u003cFeedbackResponseAttributes\u003e responses,"},{"lineNumber":327,"author":{"gitId":"-"},"content":"                                   boolean isGroupedByTeam,"},{"lineNumber":328,"author":{"gitId":"-"},"content":"                                   Collection\u003cInstructorAttributes\u003e instructors,"},{"lineNumber":329,"author":{"gitId":"-"},"content":"                                   Collection\u003cStudentAttributes\u003e students) {"},{"lineNumber":330,"author":{"gitId":"-"},"content":"        selectViewType(GQR_VIEW);"},{"lineNumber":331,"author":{"gitId":"-"},"content":""},{"lineNumber":332,"author":{"gitId":"-"},"content":"        String giver \u003d responses.get(0).getGiver();"},{"lineNumber":333,"author":{"gitId":"-"},"content":"        FeedbackParticipantType giverType \u003d question.getGiverType();"},{"lineNumber":334,"author":{"gitId":"-"},"content":"        verifyUserViewStats(giverType, giver, question, responses, instructors, students, isGroupedByTeam, true);"},{"lineNumber":335,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":336,"author":{"gitId":"-"},"content":""},{"lineNumber":337,"author":{"gitId":"-"},"content":"    public void verifyRqgViewStats(FeedbackQuestionAttributes question,"},{"lineNumber":338,"author":{"gitId":"-"},"content":"                                   List\u003cFeedbackResponseAttributes\u003e responses,"},{"lineNumber":339,"author":{"gitId":"-"},"content":"                                   boolean isGroupedByTeam,"},{"lineNumber":340,"author":{"gitId":"-"},"content":"                                   Collection\u003cInstructorAttributes\u003e instructors,"},{"lineNumber":341,"author":{"gitId":"-"},"content":"                                   Collection\u003cStudentAttributes\u003e students) {"},{"lineNumber":342,"author":{"gitId":"-"},"content":"        selectViewType(RQG_VIEW);"},{"lineNumber":343,"author":{"gitId":"-"},"content":""},{"lineNumber":344,"author":{"gitId":"-"},"content":"        String recipient \u003d responses.get(0).getRecipient();"},{"lineNumber":345,"author":{"gitId":"-"},"content":"        FeedbackParticipantType recipientType \u003d question.getRecipientType();"},{"lineNumber":346,"author":{"gitId":"-"},"content":"        verifyUserViewStats(recipientType, recipient, question, responses, instructors, students, isGroupedByTeam, false);"},{"lineNumber":347,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":348,"author":{"gitId":"-"},"content":""},{"lineNumber":349,"author":{"gitId":"-"},"content":"    private void verifyUserViewStats(FeedbackParticipantType type, String user,"},{"lineNumber":350,"author":{"gitId":"-"},"content":"                                     FeedbackQuestionAttributes question,"},{"lineNumber":351,"author":{"gitId":"-"},"content":"                                     List\u003cFeedbackResponseAttributes\u003e responses,"},{"lineNumber":352,"author":{"gitId":"-"},"content":"                                     Collection\u003cInstructorAttributes\u003e instructors,"},{"lineNumber":353,"author":{"gitId":"-"},"content":"                                     Collection\u003cStudentAttributes\u003e students,"},{"lineNumber":354,"author":{"gitId":"-"},"content":"                                     boolean isGroupedByTeam,"},{"lineNumber":355,"author":{"gitId":"-"},"content":"                                     boolean isGiver) {"},{"lineNumber":356,"author":{"gitId":"-"},"content":"        WebElement panelWithStats \u003d getPanelWithStats(type, user, question, instructors, students,"},{"lineNumber":357,"author":{"gitId":"-"},"content":"                isGroupedByTeam, isGiver);"},{"lineNumber":358,"author":{"gitId":"-"},"content":"        verifyStatistics(panelWithStats, question, responses, instructors, students);"},{"lineNumber":359,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":360,"author":{"gitId":"-"},"content":""},{"lineNumber":361,"author":{"gitId":"-"},"content":"    private void verifyStatistics(WebElement questionPanel, FeedbackQuestionAttributes question,"},{"lineNumber":362,"author":{"gitId":"-"},"content":"                                  List\u003cFeedbackResponseAttributes\u003e responses,"},{"lineNumber":363,"author":{"gitId":"-"},"content":"                                  Collection\u003cInstructorAttributes\u003e instructors,"},{"lineNumber":364,"author":{"gitId":"-"},"content":"                                  Collection\u003cStudentAttributes\u003e students) {"},{"lineNumber":365,"author":{"gitId":"-"},"content":"        switch (question.getQuestionType()) {"},{"lineNumber":366,"author":{"gitId":"-"},"content":"        case MCQ:"},{"lineNumber":367,"author":{"gitId":"-"},"content":"            verifyMcqStatistics(questionPanel, question, responses, instructors, students);"},{"lineNumber":368,"author":{"gitId":"-"},"content":"            break;"},{"lineNumber":369,"author":{"gitId":"-"},"content":"        case TEXT:"},{"lineNumber":370,"author":{"gitId":"-"},"content":"        case NUMSCALE:"},{"lineNumber":371,"author":{"gitId":"-"},"content":"        case RANK_RECIPIENTS:"},{"lineNumber":372,"author":{"gitId":"-"},"content":"        case MSQ:"},{"lineNumber":373,"author":{"gitId":"-"},"content":"        case RUBRIC:"},{"lineNumber":374,"author":{"gitId":"-"},"content":"        case RANK_OPTIONS:"},{"lineNumber":375,"author":{"gitId":"-"},"content":"        case CONSTSUM:"},{"lineNumber":376,"author":{"gitId":"-"},"content":"        case CONTRIB:"},{"lineNumber":377,"author":{"gitId":"-"},"content":"            return; // TODO: Find way to test different statistics efficiently."},{"lineNumber":378,"author":{"gitId":"-"},"content":"        default:"},{"lineNumber":379,"author":{"gitId":"-"},"content":"            throw new RuntimeException(\"Unknown question type: \" + question.getQuestionType());"},{"lineNumber":380,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":381,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":382,"author":{"gitId":"-"},"content":""},{"lineNumber":383,"author":{"gitId":"-"},"content":"    private void verifyMcqStatistics(WebElement questionPanel, FeedbackQuestionAttributes question,"},{"lineNumber":384,"author":{"gitId":"-"},"content":"                                     List\u003cFeedbackResponseAttributes\u003e responses,"},{"lineNumber":385,"author":{"gitId":"-"},"content":"                                     Collection\u003cInstructorAttributes\u003e instructors,"},{"lineNumber":386,"author":{"gitId":"-"},"content":"                                     Collection\u003cStudentAttributes\u003e students) {"},{"lineNumber":387,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e responsesToUse \u003d filterMissingResponses(responses);"},{"lineNumber":388,"author":{"gitId":"-"},"content":"        List\u003cWebElement\u003e statisticsTables \u003d questionPanel.findElements(By.cssSelector(\"#mcq-statistics table\"));"},{"lineNumber":389,"author":{"gitId":"-"},"content":"        verifyTableBodyValues(statisticsTables.get(0), getMcqResponseSummary(question));"},{"lineNumber":390,"author":{"gitId":"-"},"content":"        // sort per recipient statistics"},{"lineNumber":391,"author":{"gitId":"-"},"content":"        click(statisticsTables.get(1).findElements(By.tagName(\"th\")).get(1));"},{"lineNumber":392,"author":{"gitId":"-"},"content":"        verifyTableBodyValues(statisticsTables.get(1), getMcqPerRecipientStatistics(question, responsesToUse, students,"},{"lineNumber":393,"author":{"gitId":"-"},"content":"                instructors));"},{"lineNumber":394,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":395,"author":{"gitId":"-"},"content":""},{"lineNumber":396,"author":{"gitId":"-"},"content":"    public void verifyQnViewStatsHidden(FeedbackQuestionAttributes question) {"},{"lineNumber":397,"author":{"gitId":"-"},"content":"        selectViewType(QUESTION_VIEW);"},{"lineNumber":398,"author":{"gitId":"-"},"content":""},{"lineNumber":399,"author":{"gitId":"-"},"content":"        WebElement questionPanel \u003d getQuestionPanel(question.getQuestionNumber());"},{"lineNumber":400,"author":{"gitId":"-"},"content":"        verifyStatsHidden(questionPanel);"},{"lineNumber":401,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":402,"author":{"gitId":"-"},"content":""},{"lineNumber":403,"author":{"gitId":"-"},"content":"    public void verifyGqrViewStatsHidden(FeedbackQuestionAttributes question,"},{"lineNumber":404,"author":{"gitId":"-"},"content":"                                         String giver,"},{"lineNumber":405,"author":{"gitId":"-"},"content":"                                         Collection\u003cInstructorAttributes\u003e instructors,"},{"lineNumber":406,"author":{"gitId":"-"},"content":"                                         Collection\u003cStudentAttributes\u003e students,"},{"lineNumber":407,"author":{"gitId":"-"},"content":"                                         boolean isGroupedByTeam) {"},{"lineNumber":408,"author":{"gitId":"-"},"content":"        selectViewType(GQR_VIEW);"},{"lineNumber":409,"author":{"gitId":"-"},"content":""},{"lineNumber":410,"author":{"gitId":"-"},"content":"        FeedbackParticipantType giverType \u003d question.getGiverType();"},{"lineNumber":411,"author":{"gitId":"-"},"content":"        WebElement panelWithStats \u003d getPanelWithStats(giverType, giver, question, instructors, students,"},{"lineNumber":412,"author":{"gitId":"-"},"content":"                isGroupedByTeam, true);"},{"lineNumber":413,"author":{"gitId":"-"},"content":"        verifyStatsHidden(panelWithStats);"},{"lineNumber":414,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":415,"author":{"gitId":"-"},"content":""},{"lineNumber":416,"author":{"gitId":"-"},"content":"    public void verifyRqgViewStatsHidden(FeedbackQuestionAttributes question,"},{"lineNumber":417,"author":{"gitId":"-"},"content":"                                         String recipient,"},{"lineNumber":418,"author":{"gitId":"-"},"content":"                                         Collection\u003cInstructorAttributes\u003e instructors,"},{"lineNumber":419,"author":{"gitId":"-"},"content":"                                         Collection\u003cStudentAttributes\u003e students,"},{"lineNumber":420,"author":{"gitId":"-"},"content":"                                         boolean isGroupedByTeam) {"},{"lineNumber":421,"author":{"gitId":"-"},"content":"        selectViewType(RQG_VIEW);"},{"lineNumber":422,"author":{"gitId":"-"},"content":""},{"lineNumber":423,"author":{"gitId":"-"},"content":"        FeedbackParticipantType recipientType \u003d question.getRecipientType();"},{"lineNumber":424,"author":{"gitId":"-"},"content":"        WebElement panelWithStats \u003d getPanelWithStats(recipientType, recipient, question, instructors, students,"},{"lineNumber":425,"author":{"gitId":"-"},"content":"                isGroupedByTeam, false);"},{"lineNumber":426,"author":{"gitId":"-"},"content":"        verifyStatsHidden(panelWithStats);"},{"lineNumber":427,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":428,"author":{"gitId":"-"},"content":""},{"lineNumber":429,"author":{"gitId":"-"},"content":"    private WebElement getPanelWithStats(FeedbackParticipantType type, String user,"},{"lineNumber":430,"author":{"gitId":"-"},"content":"                                         FeedbackQuestionAttributes question,"},{"lineNumber":431,"author":{"gitId":"-"},"content":"                                         Collection\u003cInstructorAttributes\u003e instructors,"},{"lineNumber":432,"author":{"gitId":"-"},"content":"                                         Collection\u003cStudentAttributes\u003e students,"},{"lineNumber":433,"author":{"gitId":"-"},"content":"                                         boolean isGroupedByTeam,"},{"lineNumber":434,"author":{"gitId":"-"},"content":"                                         boolean isGiver) {"},{"lineNumber":435,"author":{"gitId":"-"},"content":"        String section \u003d getSection(type, user, students);"},{"lineNumber":436,"author":{"gitId":"-"},"content":"        String team \u003d getTeam(type, user, students);"},{"lineNumber":437,"author":{"gitId":"-"},"content":"        String name \u003d getName(type, user, instructors, students);"},{"lineNumber":438,"author":{"gitId":"-"},"content":"        String header \u003d getUserHeader(isGiver, name);"},{"lineNumber":439,"author":{"gitId":"-"},"content":"        int qnNum \u003d question.getQuestionNumber();"},{"lineNumber":440,"author":{"gitId":"-"},"content":"        if (isGroupedByTeam) {"},{"lineNumber":441,"author":{"gitId":"-"},"content":"            WebElement teamPanel \u003d getUserParentPanel(section, team, true);"},{"lineNumber":442,"author":{"gitId":"-"},"content":"            return getTeamStats(teamPanel, qnNum);"},{"lineNumber":443,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":444,"author":{"gitId":"-"},"content":"            WebElement userPanel \u003d getUserPanel(section, team, header, false);"},{"lineNumber":445,"author":{"gitId":"-"},"content":"            return getQuestionPanel(userPanel, qnNum);"},{"lineNumber":446,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":447,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":448,"author":{"gitId":"-"},"content":""},{"lineNumber":449,"author":{"gitId":"-"},"content":"    private void verifyStatsHidden(WebElement panelWithStats) {"},{"lineNumber":450,"author":{"gitId":"-"},"content":"        assertTrue(panelWithStats.findElements(By.tagName(\"tm-single-statistics\")).isEmpty());"},{"lineNumber":451,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":452,"author":{"gitId":"-"},"content":""},{"lineNumber":453,"author":{"gitId":"-"},"content":"    public void verifyQnViewComment(FeedbackQuestionAttributes question, FeedbackResponseCommentAttributes comment,"},{"lineNumber":454,"author":{"gitId":"-"},"content":"                                    FeedbackResponseAttributes response, Collection\u003cInstructorAttributes\u003e instructors,"},{"lineNumber":455,"author":{"gitId":"-"},"content":"                                    Collection\u003cStudentAttributes\u003e students) {"},{"lineNumber":456,"author":{"gitId":"-"},"content":"        selectViewType(QUESTION_VIEW);"},{"lineNumber":457,"author":{"gitId":"-"},"content":"        WebElement questionPanel \u003d getQuestionPanel(question.getQuestionNumber());"},{"lineNumber":458,"author":{"gitId":"-"},"content":""},{"lineNumber":459,"author":{"gitId":"-"},"content":"        String giverTeam \u003d getTeam(question.getGiverType(), response.getGiver(), students);"},{"lineNumber":460,"author":{"gitId":"-"},"content":"        String giverName \u003d getNameAndEmail(question.getGiverType(), response.getGiver(), instructors, students);"},{"lineNumber":461,"author":{"gitId":"-"},"content":"        String recipientTeam \u003d getTeam(question.getRecipientType(), response.getRecipient(), students);"},{"lineNumber":462,"author":{"gitId":"-"},"content":"        String recipientName \u003d getNameAndEmail(question.getRecipientType(), response.getRecipient(), instructors,"},{"lineNumber":463,"author":{"gitId":"-"},"content":"                students);"},{"lineNumber":464,"author":{"gitId":"-"},"content":"        WebElement responseRow \u003d getResponseRow(questionPanel, giverTeam, giverName, recipientTeam, recipientName);"},{"lineNumber":465,"author":{"gitId":"-"},"content":""},{"lineNumber":466,"author":{"gitId":"-"},"content":"        verifyResponseRowComment(responseRow, comment, instructors, students);"},{"lineNumber":467,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":468,"author":{"gitId":"-"},"content":""},{"lineNumber":469,"author":{"gitId":"-"},"content":"    public void verifyGqrViewComment(FeedbackQuestionAttributes question, FeedbackResponseCommentAttributes comment,"},{"lineNumber":470,"author":{"gitId":"-"},"content":"                                     FeedbackResponseAttributes response,"},{"lineNumber":471,"author":{"gitId":"-"},"content":"                                     Collection\u003cInstructorAttributes\u003e instructors,"},{"lineNumber":472,"author":{"gitId":"-"},"content":"                                     Collection\u003cStudentAttributes\u003e students, boolean isGroupedByTeam) {"},{"lineNumber":473,"author":{"gitId":"-"},"content":"        selectViewType(GQR_VIEW);"},{"lineNumber":474,"author":{"gitId":"-"},"content":""},{"lineNumber":475,"author":{"gitId":"-"},"content":"        FeedbackParticipantType giverType \u003d question.getGiverType();"},{"lineNumber":476,"author":{"gitId":"-"},"content":"        WebElement giverPanel \u003d getUserPanel(giverType, response.getGiver(), instructors, students, isGroupedByTeam, true);"},{"lineNumber":477,"author":{"gitId":"-"},"content":""},{"lineNumber":478,"author":{"gitId":"-"},"content":"        WebElement questionPanel \u003d getQuestionPanel(giverPanel, question.getQuestionNumber());"},{"lineNumber":479,"author":{"gitId":"-"},"content":"        String recipientTeam \u003d getTeam(question.getRecipientType(), response.getRecipient(), students);"},{"lineNumber":480,"author":{"gitId":"-"},"content":"        String recipientName \u003d getNameAndEmail(question.getRecipientType(), response.getRecipient(), instructors,"},{"lineNumber":481,"author":{"gitId":"-"},"content":"                students);"},{"lineNumber":482,"author":{"gitId":"-"},"content":"        WebElement responseRow \u003d getResponseRow(questionPanel, recipientTeam, recipientName);"},{"lineNumber":483,"author":{"gitId":"-"},"content":""},{"lineNumber":484,"author":{"gitId":"-"},"content":"        verifyResponseRowComment(responseRow, comment, instructors, students);"},{"lineNumber":485,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":486,"author":{"gitId":"-"},"content":""},{"lineNumber":487,"author":{"gitId":"-"},"content":"    public void verifyRqgViewComment(FeedbackQuestionAttributes question, FeedbackResponseCommentAttributes comment,"},{"lineNumber":488,"author":{"gitId":"-"},"content":"                                     FeedbackResponseAttributes response,"},{"lineNumber":489,"author":{"gitId":"-"},"content":"                                     Collection\u003cInstructorAttributes\u003e instructors,"},{"lineNumber":490,"author":{"gitId":"-"},"content":"                                     Collection\u003cStudentAttributes\u003e students, boolean isGroupedByTeam) {"},{"lineNumber":491,"author":{"gitId":"-"},"content":"        selectViewType(RQG_VIEW);"},{"lineNumber":492,"author":{"gitId":"-"},"content":""},{"lineNumber":493,"author":{"gitId":"-"},"content":"        FeedbackParticipantType recipientType \u003d question.getRecipientType();"},{"lineNumber":494,"author":{"gitId":"-"},"content":"        WebElement recipientPanel \u003d getUserPanel(recipientType, response.getRecipient(), instructors, students,"},{"lineNumber":495,"author":{"gitId":"-"},"content":"                isGroupedByTeam, false);"},{"lineNumber":496,"author":{"gitId":"-"},"content":""},{"lineNumber":497,"author":{"gitId":"-"},"content":"        WebElement questionPanel \u003d getQuestionPanel(recipientPanel, question.getQuestionNumber());"},{"lineNumber":498,"author":{"gitId":"-"},"content":"        String giverTeam \u003d getTeam(question.getGiverType(), response.getGiver(), students);"},{"lineNumber":499,"author":{"gitId":"-"},"content":"        String giverNameAndEmail \u003d getNameAndEmail(question.getGiverType(), response.getGiver(), instructors, students);"},{"lineNumber":500,"author":{"gitId":"-"},"content":"        WebElement responseRow \u003d getResponseRow(questionPanel, giverTeam, giverNameAndEmail);"},{"lineNumber":501,"author":{"gitId":"-"},"content":""},{"lineNumber":502,"author":{"gitId":"-"},"content":"        verifyResponseRowComment(responseRow, comment, instructors, students);"},{"lineNumber":503,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":504,"author":{"gitId":"-"},"content":""},{"lineNumber":505,"author":{"gitId":"-"},"content":"    public void verifyGrqViewComment(FeedbackQuestionAttributes question, FeedbackResponseCommentAttributes comment,"},{"lineNumber":506,"author":{"gitId":"-"},"content":"                                     FeedbackResponseAttributes response,"},{"lineNumber":507,"author":{"gitId":"-"},"content":"                                     Collection\u003cInstructorAttributes\u003e instructors,"},{"lineNumber":508,"author":{"gitId":"-"},"content":"                                     Collection\u003cStudentAttributes\u003e students, boolean isGroupedByTeam) {"},{"lineNumber":509,"author":{"gitId":"-"},"content":""},{"lineNumber":510,"author":{"gitId":"-"},"content":"        selectViewType(GRQ_VIEW);"},{"lineNumber":511,"author":{"gitId":"-"},"content":""},{"lineNumber":512,"author":{"gitId":"-"},"content":"        FeedbackParticipantType giverType \u003d question.getGiverType();"},{"lineNumber":513,"author":{"gitId":"-"},"content":"        WebElement userPanel \u003d getUserPanel(giverType, response.getGiver(), instructors, students, isGroupedByTeam, true);"},{"lineNumber":514,"author":{"gitId":"-"},"content":""},{"lineNumber":515,"author":{"gitId":"-"},"content":"        FeedbackParticipantType recipientType \u003d question.getRecipientType();"},{"lineNumber":516,"author":{"gitId":"-"},"content":"        String recipientTeam \u003d getTeam(recipientType, response.getRecipient(), students);"},{"lineNumber":517,"author":{"gitId":"-"},"content":"        String recipientName \u003d getName(recipientType, response.getRecipient(), instructors, students);"},{"lineNumber":518,"author":{"gitId":"-"},"content":""},{"lineNumber":519,"author":{"gitId":"-"},"content":"        WebElement groupedResponses \u003d getGroupedResponses(userPanel, recipientName, recipientTeam, true);"},{"lineNumber":520,"author":{"gitId":"-"},"content":"        verifyGroupedResponseComment(groupedResponses, question.getQuestionNumber(), comment, instructors, students);"},{"lineNumber":521,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":522,"author":{"gitId":"-"},"content":""},{"lineNumber":523,"author":{"gitId":"-"},"content":"    public void verifyRgqViewComment(FeedbackQuestionAttributes question, FeedbackResponseCommentAttributes comment,"},{"lineNumber":524,"author":{"gitId":"-"},"content":"                                     FeedbackResponseAttributes response,"},{"lineNumber":525,"author":{"gitId":"-"},"content":"                                     Collection\u003cInstructorAttributes\u003e instructors,"},{"lineNumber":526,"author":{"gitId":"-"},"content":"                                     Collection\u003cStudentAttributes\u003e students, boolean isGroupedByTeam) {"},{"lineNumber":527,"author":{"gitId":"-"},"content":"        selectViewType(RGQ_VIEW);"},{"lineNumber":528,"author":{"gitId":"-"},"content":""},{"lineNumber":529,"author":{"gitId":"-"},"content":"        FeedbackParticipantType recipientType \u003d question.getRecipientType();"},{"lineNumber":530,"author":{"gitId":"-"},"content":"        WebElement userPanel \u003d getUserPanel(recipientType, response.getRecipient(), instructors, students,"},{"lineNumber":531,"author":{"gitId":"-"},"content":"                isGroupedByTeam, false);"},{"lineNumber":532,"author":{"gitId":"-"},"content":""},{"lineNumber":533,"author":{"gitId":"-"},"content":"        FeedbackParticipantType giverType \u003d question.getGiverType();"},{"lineNumber":534,"author":{"gitId":"-"},"content":"        String giverTeam \u003d getTeam(giverType, response.getGiver(), students);"},{"lineNumber":535,"author":{"gitId":"-"},"content":"        String giverName \u003d getName(giverType, response.getGiver(), instructors, students);"},{"lineNumber":536,"author":{"gitId":"-"},"content":""},{"lineNumber":537,"author":{"gitId":"-"},"content":"        WebElement groupedResponses \u003d getGroupedResponses(userPanel, giverName, giverTeam, false);"},{"lineNumber":538,"author":{"gitId":"-"},"content":"        verifyGroupedResponseComment(groupedResponses, question.getQuestionNumber(), comment, instructors, students);"},{"lineNumber":539,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":540,"author":{"gitId":"-"},"content":""},{"lineNumber":541,"author":{"gitId":"-"},"content":"    private void verifyResponseRowComment(WebElement responseRow, FeedbackResponseCommentAttributes comment,"},{"lineNumber":542,"author":{"gitId":"-"},"content":"                                          Collection\u003cInstructorAttributes\u003e instructors,"},{"lineNumber":543,"author":{"gitId":"-"},"content":"                                          Collection\u003cStudentAttributes\u003e students) {"},{"lineNumber":544,"author":{"gitId":"-"},"content":"        click(responseRow.findElement(By.id(\"btn-add-comment\")));"},{"lineNumber":545,"author":{"gitId":"-"},"content":"        WebElement commentModal \u003d waitForElementPresence(By.className(\"modal-body\"));"},{"lineNumber":546,"author":{"gitId":"-"},"content":""},{"lineNumber":547,"author":{"gitId":"-"},"content":"        String editor \u003d getName(comment.getCommentGiverType(),"},{"lineNumber":548,"author":{"gitId":"-"},"content":"                comment.getLastEditorEmail(), instructors, students);"},{"lineNumber":549,"author":{"gitId":"-"},"content":"        String commentGiver \u003d getName(comment.getCommentGiverType(), comment.getCommentGiver(),"},{"lineNumber":550,"author":{"gitId":"-"},"content":"                instructors, students);"},{"lineNumber":551,"author":{"gitId":"-"},"content":"        verifyCommentDetails(commentModal, commentGiver, editor, comment.getCommentText(), true);"},{"lineNumber":552,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":553,"author":{"gitId":"-"},"content":""},{"lineNumber":554,"author":{"gitId":"-"},"content":"    private void verifyGroupedResponseComment(WebElement groupedResponses, int qnNum,"},{"lineNumber":555,"author":{"gitId":"-"},"content":"                                              FeedbackResponseCommentAttributes comment,"},{"lineNumber":556,"author":{"gitId":"-"},"content":"                                              Collection\u003cInstructorAttributes\u003e instructors,"},{"lineNumber":557,"author":{"gitId":"-"},"content":"                                              Collection\u003cStudentAttributes\u003e students) {"},{"lineNumber":558,"author":{"gitId":"-"},"content":"        WebElement questionPanel \u003d getQuestionPanel(groupedResponses, qnNum);"},{"lineNumber":559,"author":{"gitId":"-"},"content":""},{"lineNumber":560,"author":{"gitId":"-"},"content":"        String editor \u003d getName(comment.getCommentGiverType(), comment.getLastEditorEmail(),"},{"lineNumber":561,"author":{"gitId":"-"},"content":"                instructors, students);"},{"lineNumber":562,"author":{"gitId":"-"},"content":"        String commentGiver \u003d getName(comment.getCommentGiverType(), comment.getCommentGiver(),"},{"lineNumber":563,"author":{"gitId":"-"},"content":"                instructors, students);"},{"lineNumber":564,"author":{"gitId":"-"},"content":"        verifyCommentDetails(questionPanel, commentGiver, editor, comment.getCommentText(), false);"},{"lineNumber":565,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":566,"author":{"gitId":"-"},"content":""},{"lineNumber":567,"author":{"gitId":"-"},"content":"    public void verifyCommentDetails(WebElement commentSection, String commentGiver, String commentEditor,"},{"lineNumber":568,"author":{"gitId":"-"},"content":"                                     String commentString, boolean isClosable) {"},{"lineNumber":569,"author":{"gitId":"-"},"content":"        WebElement commentField \u003d getCommentField(commentSection, commentString);"},{"lineNumber":570,"author":{"gitId":"-"},"content":"        assertEquals(commentGiver, getCommentGiver(commentField));"},{"lineNumber":571,"author":{"gitId":"-"},"content":"        if (!commentEditor.isEmpty()) {"},{"lineNumber":572,"author":{"gitId":"-"},"content":"            assertEquals(commentEditor, getCommentEditor(commentField));"},{"lineNumber":573,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":574,"author":{"gitId":"-"},"content":"        if (isClosable) {"},{"lineNumber":575,"author":{"gitId":"-"},"content":"            click(waitForElementPresence(By.id(\"btn-close-comments\")));"},{"lineNumber":576,"author":{"gitId":"-"},"content":"            waitForPageToLoad();"},{"lineNumber":577,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":578,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":579,"author":{"gitId":"-"},"content":""},{"lineNumber":580,"author":{"gitId":"-"},"content":"    private void verifyNoResponsesMessage(WebElement panel, boolean isQuestion, boolean isGiver) {"},{"lineNumber":581,"author":{"gitId":"-"},"content":"        WebElement noResponsesMessage \u003d panel.findElement(By.id(\"no-responses\"));"},{"lineNumber":582,"author":{"gitId":"-"},"content":"        if (isQuestion) {"},{"lineNumber":583,"author":{"gitId":"-"},"content":"            assertEquals(\"There are no responses for this question or you may not have the permission to\""},{"lineNumber":584,"author":{"gitId":"-"},"content":"                    + \" see the response.\", noResponsesMessage.getText());"},{"lineNumber":585,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":586,"author":{"gitId":"-"},"content":"            assertEquals(\"There are no responses \" + (isGiver ? \"given\" : \"received\")"},{"lineNumber":587,"author":{"gitId":"-"},"content":"                    + \" by this user or you may not have the permission to see the responses.\","},{"lineNumber":588,"author":{"gitId":"-"},"content":"                    noResponsesMessage.getText());"},{"lineNumber":589,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":590,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":591,"author":{"gitId":"-"},"content":""},{"lineNumber":592,"author":{"gitId":"-"},"content":"    // Methods for formatting expected results"},{"lineNumber":593,"author":{"gitId":"-"},"content":"    private String[][] getExpectedNoResponseDetails(List\u003cStudentAttributes\u003e noResponseStudents) {"},{"lineNumber":594,"author":{"gitId":"-"},"content":"        String[][] expectedDetails \u003d new String[noResponseStudents.size()][2];"},{"lineNumber":595,"author":{"gitId":"-"},"content":"        for (int i \u003d 0; i \u003c noResponseStudents.size(); i++) {"},{"lineNumber":596,"author":{"gitId":"-"},"content":"            expectedDetails[i][0] \u003d noResponseStudents.get(i).getTeam();"},{"lineNumber":597,"author":{"gitId":"-"},"content":"            expectedDetails[i][1] \u003d String.format(\"%s (%s)\","},{"lineNumber":598,"author":{"gitId":"-"},"content":"                    noResponseStudents.get(i).getName(),"},{"lineNumber":599,"author":{"gitId":"-"},"content":"                    noResponseStudents.get(i).getEmail()"},{"lineNumber":600,"author":{"gitId":"-"},"content":"            );"},{"lineNumber":601,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":602,"author":{"gitId":"-"},"content":"        return expectedDetails;"},{"lineNumber":603,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":604,"author":{"gitId":"-"},"content":""},{"lineNumber":605,"author":{"gitId":"-"},"content":"    private String[][] getExpectedQnViewDetails(FeedbackQuestionAttributes question,"},{"lineNumber":606,"author":{"gitId":"-"},"content":"                                                List\u003cFeedbackResponseAttributes\u003e responses,"},{"lineNumber":607,"author":{"gitId":"-"},"content":"                                                Collection\u003cInstructorAttributes\u003e instructors,"},{"lineNumber":608,"author":{"gitId":"-"},"content":"                                                Collection\u003cStudentAttributes\u003e students) {"},{"lineNumber":609,"author":{"gitId":"-"},"content":"        String[][] expected \u003d new String[responses.size()][5];"},{"lineNumber":610,"author":{"gitId":"-"},"content":"        FeedbackParticipantType giverType \u003d question.getGiverType();"},{"lineNumber":611,"author":{"gitId":"-"},"content":"        FeedbackParticipantType recipientType \u003d question.getRecipientType();"},{"lineNumber":612,"author":{"gitId":"-"},"content":""},{"lineNumber":613,"author":{"gitId":"-"},"content":"        for (int i \u003d 0; i \u003c responses.size(); i++) {"},{"lineNumber":614,"author":{"gitId":"-"},"content":"            FeedbackResponseAttributes response \u003d responses.get(i);"},{"lineNumber":615,"author":{"gitId":"-"},"content":"            expected[i][0] \u003d getTeam(giverType, response.getGiver(), students);"},{"lineNumber":616,"author":{"gitId":"-"},"content":"            expected[i][1] \u003d getNameAndEmail(giverType, response.getGiver(), instructors, students);"},{"lineNumber":617,"author":{"gitId":"-"},"content":"            if (recipientType.equals(FeedbackParticipantType.NONE)) {"},{"lineNumber":618,"author":{"gitId":"-"},"content":"                expected[i][2] \u003d NO_TEAM_LABEL;"},{"lineNumber":619,"author":{"gitId":"-"},"content":"                expected[i][3] \u003d NO_USER_LABEL;"},{"lineNumber":620,"author":{"gitId":"-"},"content":"            } else {"},{"lineNumber":621,"author":{"gitId":"-"},"content":"                expected[i][2] \u003d getTeam(recipientType, response.getRecipient(), students);"},{"lineNumber":622,"author":{"gitId":"-"},"content":"                expected[i][3] \u003d getNameAndEmail(recipientType, response.getRecipient(), instructors, students);"},{"lineNumber":623,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":624,"author":{"gitId":"-"},"content":"            if (isMissingResponse(response)) {"},{"lineNumber":625,"author":{"gitId":"-"},"content":"                expected[i][4] \u003d NO_RESPONSE_LABEL;"},{"lineNumber":626,"author":{"gitId":"-"},"content":"            } else {"},{"lineNumber":627,"author":{"gitId":"-"},"content":"                expected[i][4] \u003d getAnswerString(question, response.getResponseDetailsCopy());"},{"lineNumber":628,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":629,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":630,"author":{"gitId":"-"},"content":"        return expected;"},{"lineNumber":631,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":632,"author":{"gitId":"-"},"content":""},{"lineNumber":633,"author":{"gitId":"-"},"content":"    private String[] getExpectedGqrDetails(FeedbackQuestionAttributes question,"},{"lineNumber":634,"author":{"gitId":"-"},"content":"                                           FeedbackResponseAttributes response,"},{"lineNumber":635,"author":{"gitId":"-"},"content":"                                           Collection\u003cInstructorAttributes\u003e instructors,"},{"lineNumber":636,"author":{"gitId":"-"},"content":"                                           Collection\u003cStudentAttributes\u003e students) {"},{"lineNumber":637,"author":{"gitId":"-"},"content":"        String[] expected \u003d new String[3];"},{"lineNumber":638,"author":{"gitId":"-"},"content":"        FeedbackParticipantType recipientType \u003d question.getRecipientType();"},{"lineNumber":639,"author":{"gitId":"-"},"content":"        if (recipientType.equals(FeedbackParticipantType.NONE)) {"},{"lineNumber":640,"author":{"gitId":"-"},"content":"            expected[0] \u003d NO_TEAM_LABEL;"},{"lineNumber":641,"author":{"gitId":"-"},"content":"            expected[1] \u003d NO_USER_LABEL;"},{"lineNumber":642,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":643,"author":{"gitId":"-"},"content":"            expected[0] \u003d getTeam(recipientType, response.getRecipient(), students);"},{"lineNumber":644,"author":{"gitId":"-"},"content":"            expected[1] \u003d getNameAndEmail(recipientType, response.getRecipient(), instructors, students);"},{"lineNumber":645,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":646,"author":{"gitId":"-"},"content":"        if (response.getFeedbackSessionName() \u003d\u003d null) {"},{"lineNumber":647,"author":{"gitId":"-"},"content":"            expected[2] \u003d NO_RESPONSE_LABEL;"},{"lineNumber":648,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":649,"author":{"gitId":"-"},"content":"            expected[2] \u003d getAnswerString(question, response.getResponseDetailsCopy());"},{"lineNumber":650,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":651,"author":{"gitId":"-"},"content":"        return expected;"},{"lineNumber":652,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":653,"author":{"gitId":"-"},"content":""},{"lineNumber":654,"author":{"gitId":"-"},"content":"    private String[] getExpectedRqgDetails(FeedbackQuestionAttributes question,"},{"lineNumber":655,"author":{"gitId":"-"},"content":"                                           FeedbackResponseAttributes response,"},{"lineNumber":656,"author":{"gitId":"-"},"content":"                                           Collection\u003cInstructorAttributes\u003e instructors,"},{"lineNumber":657,"author":{"gitId":"-"},"content":"                                           Collection\u003cStudentAttributes\u003e students) {"},{"lineNumber":658,"author":{"gitId":"-"},"content":"        String[] expected \u003d new String[3];"},{"lineNumber":659,"author":{"gitId":"-"},"content":"        FeedbackParticipantType giverType \u003d question.getGiverType();"},{"lineNumber":660,"author":{"gitId":"-"},"content":"        if (giverType.equals(FeedbackParticipantType.NONE)) {"},{"lineNumber":661,"author":{"gitId":"-"},"content":"            expected[0] \u003d NO_TEAM_LABEL;"},{"lineNumber":662,"author":{"gitId":"-"},"content":"            expected[1] \u003d NO_USER_LABEL;"},{"lineNumber":663,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":664,"author":{"gitId":"-"},"content":"            expected[0] \u003d getTeam(giverType, response.getGiver(), students);"},{"lineNumber":665,"author":{"gitId":"-"},"content":"            expected[1] \u003d getNameAndEmail(giverType, response.getGiver(), instructors, students);"},{"lineNumber":666,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":667,"author":{"gitId":"-"},"content":"        if (response.getFeedbackSessionName() \u003d\u003d null) {"},{"lineNumber":668,"author":{"gitId":"-"},"content":"            expected[2] \u003d NO_RESPONSE_LABEL;"},{"lineNumber":669,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":670,"author":{"gitId":"-"},"content":"            expected[2] \u003d getAnswerString(question, response.getResponseDetailsCopy());"},{"lineNumber":671,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":672,"author":{"gitId":"-"},"content":"        return expected;"},{"lineNumber":673,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":674,"author":{"gitId":"-"},"content":""},{"lineNumber":675,"author":{"gitId":"-"},"content":"    private String[][] getMcqResponseSummary(FeedbackQuestionAttributes question) {"},{"lineNumber":676,"author":{"gitId":"-"},"content":"        FeedbackMcqQuestionDetails questionDetails \u003d (FeedbackMcqQuestionDetails) question.getQuestionDetailsCopy();"},{"lineNumber":677,"author":{"gitId":"-"},"content":"        List\u003cString\u003e choices \u003d questionDetails.getMcqChoices();"},{"lineNumber":678,"author":{"gitId":"-"},"content":"        List\u003cDouble\u003e weights \u003d questionDetails.getMcqWeights();"},{"lineNumber":679,"author":{"gitId":"-"},"content":"        Double otherWeight \u003d questionDetails.getMcqOtherWeight();"},{"lineNumber":680,"author":{"gitId":"-"},"content":"        boolean isOtherEnabled \u003d questionDetails.isOtherEnabled();"},{"lineNumber":681,"author":{"gitId":"-"},"content":"        boolean hasAssignedWeights \u003d questionDetails.isHasAssignedWeights();"},{"lineNumber":682,"author":{"gitId":"-"},"content":""},{"lineNumber":683,"author":{"gitId":"-"},"content":"        int numRows \u003d isOtherEnabled ? choices.size() + 1 : choices.size();"},{"lineNumber":684,"author":{"gitId":"-"},"content":"        String[][] expectedStatistics \u003d new String[numRows][2];"},{"lineNumber":685,"author":{"gitId":"-"},"content":"        for (int i \u003d 0; i \u003c choices.size(); i++) {"},{"lineNumber":686,"author":{"gitId":"-"},"content":"            expectedStatistics[i][0] \u003d choices.get(i);"},{"lineNumber":687,"author":{"gitId":"-"},"content":"            expectedStatistics[i][1] \u003d hasAssignedWeights ? getDoubleString(weights.get(i)) : \"-\";"},{"lineNumber":688,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":689,"author":{"gitId":"-"},"content":"        if (isOtherEnabled) {"},{"lineNumber":690,"author":{"gitId":"-"},"content":"            int index \u003d choices.size();"},{"lineNumber":691,"author":{"gitId":"-"},"content":"            expectedStatistics[index][0] \u003d MCQ_OTHER;"},{"lineNumber":692,"author":{"gitId":"-"},"content":"            expectedStatistics[index][1] \u003d hasAssignedWeights ? getDoubleString(otherWeight) : \"-\";"},{"lineNumber":693,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":694,"author":{"gitId":"-"},"content":"        return expectedStatistics;"},{"lineNumber":695,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":696,"author":{"gitId":"-"},"content":""},{"lineNumber":697,"author":{"gitId":"-"},"content":"    private String[][] getMcqPerRecipientStatistics(FeedbackQuestionAttributes question,"},{"lineNumber":698,"author":{"gitId":"-"},"content":"                                                    List\u003cFeedbackResponseAttributes\u003e responses,"},{"lineNumber":699,"author":{"gitId":"-"},"content":"                                                    Collection\u003cStudentAttributes\u003e students,"},{"lineNumber":700,"author":{"gitId":"-"},"content":"                                                    Collection\u003cInstructorAttributes\u003e instructors) {"},{"lineNumber":701,"author":{"gitId":"-"},"content":"        List\u003cString\u003e recipients \u003d getRecipients(responses);"},{"lineNumber":702,"author":{"gitId":"-"},"content":"        recipients.sort(Comparator.naturalOrder());"},{"lineNumber":703,"author":{"gitId":"-"},"content":""},{"lineNumber":704,"author":{"gitId":"-"},"content":"        String[][] expectedStatistics \u003d new String[recipients.size()][2];"},{"lineNumber":705,"author":{"gitId":"-"},"content":""},{"lineNumber":706,"author":{"gitId":"-"},"content":"        for (int i \u003d 0; i \u003c recipients.size(); i++) {"},{"lineNumber":707,"author":{"gitId":"-"},"content":"            String recipient \u003d recipients.get(i);"},{"lineNumber":708,"author":{"gitId":"-"},"content":"            expectedStatistics[i][0] \u003d getTeam(question.getRecipientType(), recipient, students);"},{"lineNumber":709,"author":{"gitId":"-"},"content":"            expectedStatistics[i][1] \u003d getNameAndEmail(question.getRecipientType(), recipient, instructors, students);"},{"lineNumber":710,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":711,"author":{"gitId":"-"},"content":""},{"lineNumber":712,"author":{"gitId":"-"},"content":"        return expectedStatistics;"},{"lineNumber":713,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":714,"author":{"gitId":"-"},"content":""},{"lineNumber":715,"author":{"gitId":"-"},"content":"    private String getAnswerString(FeedbackQuestionAttributes question, FeedbackResponseDetails response) {"},{"lineNumber":716,"author":{"gitId":"-"},"content":"        switch (response.getQuestionType()) {"},{"lineNumber":717,"author":{"gitId":"-"},"content":"        case TEXT:"},{"lineNumber":718,"author":{"gitId":"-"},"content":"        case NUMSCALE:"},{"lineNumber":719,"author":{"gitId":"-"},"content":"        case RANK_RECIPIENTS:"},{"lineNumber":720,"author":{"gitId":"-"},"content":"            return response.getAnswerString();"},{"lineNumber":721,"author":{"gitId":"-"},"content":"        case MCQ:"},{"lineNumber":722,"author":{"gitId":"-"},"content":"        case MSQ:"},{"lineNumber":723,"author":{"gitId":"-"},"content":"            return response.getAnswerString().replace(\", \", TestProperties.LINE_SEPARATOR);"},{"lineNumber":724,"author":{"gitId":"-"},"content":"        case RUBRIC:"},{"lineNumber":725,"author":{"gitId":"-"},"content":"            return getRubricAnsString((FeedbackRubricQuestionDetails) question.getQuestionDetailsCopy(),"},{"lineNumber":726,"author":{"gitId":"-"},"content":"                    (FeedbackRubricResponseDetails) response);"},{"lineNumber":727,"author":{"gitId":"-"},"content":"        case RANK_OPTIONS:"},{"lineNumber":728,"author":{"gitId":"-"},"content":"            return getRankOptionsAnsString((FeedbackRankOptionsQuestionDetails) question.getQuestionDetailsCopy(),"},{"lineNumber":729,"author":{"gitId":"-"},"content":"                    (FeedbackRankOptionsResponseDetails) response);"},{"lineNumber":730,"author":{"gitId":"-"},"content":"        case CONSTSUM:"},{"lineNumber":731,"author":{"gitId":"-"},"content":"            return getConstSumOptionsAnsString((FeedbackConstantSumQuestionDetails) question.getQuestionDetailsCopy(),"},{"lineNumber":732,"author":{"gitId":"-"},"content":"                    (FeedbackConstantSumResponseDetails) response);"},{"lineNumber":733,"author":{"gitId":"-"},"content":"        case CONTRIB:"},{"lineNumber":734,"author":{"gitId":"-"},"content":"            return getContribAnsString((FeedbackContributionResponseDetails) response);"},{"lineNumber":735,"author":{"gitId":"-"},"content":"        default:"},{"lineNumber":736,"author":{"gitId":"-"},"content":"            throw new RuntimeException(\"Unknown question type: \" + response.getQuestionType());"},{"lineNumber":737,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":738,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":739,"author":{"gitId":"-"},"content":""},{"lineNumber":740,"author":{"gitId":"-"},"content":"    private String getRubricAnsString(FeedbackRubricQuestionDetails question,"},{"lineNumber":741,"author":{"gitId":"-"},"content":"                                      FeedbackRubricResponseDetails responseDetails) {"},{"lineNumber":742,"author":{"gitId":"-"},"content":"        List\u003cString\u003e choices \u003d question.getRubricChoices();"},{"lineNumber":743,"author":{"gitId":"-"},"content":"        List\u003cInteger\u003e answers \u003d responseDetails.getAnswer();"},{"lineNumber":744,"author":{"gitId":"-"},"content":"        List\u003cString\u003e answerStrings \u003d new ArrayList\u003c\u003e();"},{"lineNumber":745,"author":{"gitId":"-"},"content":"        for (int answer : answers) {"},{"lineNumber":746,"author":{"gitId":"-"},"content":"            answerStrings.add(choices.get(answer) + \" (Choice \" + (answer + 1) + \")\");"},{"lineNumber":747,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":748,"author":{"gitId":"-"},"content":"        return String.join(TestProperties.LINE_SEPARATOR, answerStrings);"},{"lineNumber":749,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":750,"author":{"gitId":"-"},"content":""},{"lineNumber":751,"author":{"gitId":"-"},"content":"    private String getRankOptionsAnsString(FeedbackRankOptionsQuestionDetails question,"},{"lineNumber":752,"author":{"gitId":"-"},"content":"                                           FeedbackRankOptionsResponseDetails responseDetails) {"},{"lineNumber":753,"author":{"gitId":"-"},"content":"        List\u003cString\u003e options \u003d question.getOptions();"},{"lineNumber":754,"author":{"gitId":"-"},"content":"        List\u003cInteger\u003e answers \u003d responseDetails.getAnswers();"},{"lineNumber":755,"author":{"gitId":"-"},"content":"        List\u003cString\u003e answerStrings \u003d new ArrayList\u003c\u003e();"},{"lineNumber":756,"author":{"gitId":"-"},"content":"        for (int i \u003d 1; i \u003c\u003d options.size(); i++) {"},{"lineNumber":757,"author":{"gitId":"-"},"content":"            answerStrings.add(i + \": \" + options.get(answers.indexOf(i)));"},{"lineNumber":758,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":759,"author":{"gitId":"-"},"content":"        return String.join(TestProperties.LINE_SEPARATOR, answerStrings);"},{"lineNumber":760,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":761,"author":{"gitId":"-"},"content":""},{"lineNumber":762,"author":{"gitId":"-"},"content":"    private String getConstSumOptionsAnsString(FeedbackConstantSumQuestionDetails question,"},{"lineNumber":763,"author":{"gitId":"-"},"content":"                                               FeedbackConstantSumResponseDetails responseDetails) {"},{"lineNumber":764,"author":{"gitId":"-"},"content":"        if (question.isDistributeToRecipients()) {"},{"lineNumber":765,"author":{"gitId":"-"},"content":"            return responseDetails.getAnswerString();"},{"lineNumber":766,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":767,"author":{"gitId":"-"},"content":"        List\u003cString\u003e options \u003d question.getConstSumOptions();"},{"lineNumber":768,"author":{"gitId":"-"},"content":"        List\u003cInteger\u003e answers \u003d responseDetails.getAnswers();"},{"lineNumber":769,"author":{"gitId":"-"},"content":"        List\u003cString\u003e answerStrings \u003d new ArrayList\u003c\u003e();"},{"lineNumber":770,"author":{"gitId":"-"},"content":"        for (int i \u003d 0; i \u003c options.size(); i++) {"},{"lineNumber":771,"author":{"gitId":"-"},"content":"            answerStrings.add(options.get(i) + \": \" + answers.get(i));"},{"lineNumber":772,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":773,"author":{"gitId":"-"},"content":"        answerStrings.sort(Comparator.naturalOrder());"},{"lineNumber":774,"author":{"gitId":"-"},"content":"        return String.join(TestProperties.LINE_SEPARATOR, answerStrings);"},{"lineNumber":775,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":776,"author":{"gitId":"-"},"content":""},{"lineNumber":777,"author":{"gitId":"-"},"content":"    private String getContribAnsString(FeedbackContributionResponseDetails responseDetails) {"},{"lineNumber":778,"author":{"gitId":"-"},"content":"        int answer \u003d responseDetails.getAnswer() - 100;"},{"lineNumber":779,"author":{"gitId":"-"},"content":"        StringBuilder answerSb \u003d new StringBuilder(\"Equal Share\");"},{"lineNumber":780,"author":{"gitId":"-"},"content":"        if (answer \u003c 0) {"},{"lineNumber":781,"author":{"gitId":"-"},"content":"            answerSb.append(\" -\").append(answer);"},{"lineNumber":782,"author":{"gitId":"-"},"content":"        } else if (answer \u003e 0) {"},{"lineNumber":783,"author":{"gitId":"-"},"content":"            answerSb.append(\u0027 \u0027).append(answer);"},{"lineNumber":784,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":785,"author":{"gitId":"-"},"content":"        return answerSb.toString();"},{"lineNumber":786,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":787,"author":{"gitId":"-"},"content":""},{"lineNumber":788,"author":{"gitId":"-"},"content":"    private String getUserHeader(boolean isGiver, String name) {"},{"lineNumber":789,"author":{"gitId":"-"},"content":"        return (isGiver ? \"From: \" : \"To: \") + name;"},{"lineNumber":790,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":791,"author":{"gitId":"-"},"content":""},{"lineNumber":792,"author":{"gitId":"-"},"content":"    private String getSessionDurationString(FeedbackSessionAttributes feedbackSession) {"},{"lineNumber":793,"author":{"gitId":"-"},"content":"        return getDateString(feedbackSession.getStartTime(), feedbackSession.getTimeZone()) + \"   to\\n\""},{"lineNumber":794,"author":{"gitId":"-"},"content":"                + getDateString(feedbackSession.getEndTime(), feedbackSession.getTimeZone());"},{"lineNumber":795,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":796,"author":{"gitId":"-"},"content":""},{"lineNumber":797,"author":{"gitId":"-"},"content":"    private String getDateString(Instant date, String timeZone) {"},{"lineNumber":798,"author":{"gitId":"-"},"content":"        return getDisplayedDateTime(date, timeZone, \"EEE, dd MMM, yyyy, hh:mm a X\");"},{"lineNumber":799,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":800,"author":{"gitId":"-"},"content":""},{"lineNumber":801,"author":{"gitId":"-"},"content":"    private String getDoubleString(double value) {"},{"lineNumber":802,"author":{"gitId":"-"},"content":"        int numDecimalPlaces \u003d 0;"},{"lineNumber":803,"author":{"gitId":"-"},"content":"        if (value % 1 !\u003d 0) {"},{"lineNumber":804,"author":{"gitId":"-"},"content":"            numDecimalPlaces \u003d Double.toString(value).split(\"\\\\.\")[1].length();"},{"lineNumber":805,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":806,"author":{"gitId":"-"},"content":"        if (numDecimalPlaces \u003e 2) {"},{"lineNumber":807,"author":{"gitId":"-"},"content":"            numDecimalPlaces \u003d 2;"},{"lineNumber":808,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":809,"author":{"gitId":"-"},"content":"        return String.format(\"%.\" + numDecimalPlaces + \"f\", value);"},{"lineNumber":810,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":811,"author":{"gitId":"-"},"content":""},{"lineNumber":812,"author":{"gitId":"-"},"content":"    // Methods for interacting with WebElements"},{"lineNumber":813,"author":{"gitId":"-"},"content":""},{"lineNumber":814,"author":{"gitId":"-"},"content":"    private WebElement getNoResponseTable() {"},{"lineNumber":815,"author":{"gitId":"-"},"content":"        WebElement noResponseHeader \u003d noResponsePanel.findElement(By.className(\"card-header\"));"},{"lineNumber":816,"author":{"gitId":"-"},"content":"        By tableId \u003d By.id(\"no-response-table\");"},{"lineNumber":817,"author":{"gitId":"-"},"content":"        if (!isElementPresent(tableId)) {"},{"lineNumber":818,"author":{"gitId":"-"},"content":"            click(noResponseHeader);"},{"lineNumber":819,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":820,"author":{"gitId":"-"},"content":"        return waitForElementPresence(tableId);"},{"lineNumber":821,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":822,"author":{"gitId":"-"},"content":""},{"lineNumber":823,"author":{"gitId":"-"},"content":"    private void includeOption(boolean isIncluded, WebElement option) {"},{"lineNumber":824,"author":{"gitId":"-"},"content":"        if (isIncluded) {"},{"lineNumber":825,"author":{"gitId":"-"},"content":"            markOptionAsSelected(option);"},{"lineNumber":826,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":827,"author":{"gitId":"-"},"content":"            markOptionAsUnselected(option);"},{"lineNumber":828,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":829,"author":{"gitId":"-"},"content":"        expandAllPanels();"},{"lineNumber":830,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":831,"author":{"gitId":"-"},"content":""},{"lineNumber":832,"author":{"gitId":"-"},"content":"    private void selectViewType(String viewValue) {"},{"lineNumber":833,"author":{"gitId":"-"},"content":"        if (currentView.equals(viewValue)) {"},{"lineNumber":834,"author":{"gitId":"-"},"content":"            return;"},{"lineNumber":835,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":836,"author":{"gitId":"-"},"content":""},{"lineNumber":837,"author":{"gitId":"-"},"content":"        selectDropdownOptionByValue(waitForElementPresence(By.id(\"view-type-dropdown\")), viewValue);"},{"lineNumber":838,"author":{"gitId":"-"},"content":"        currentView \u003d viewValue;"},{"lineNumber":839,"author":{"gitId":"-"},"content":"        expandAllPanels();"},{"lineNumber":840,"author":{"gitId":"-"},"content":"        waitUntilAnimationFinish();"},{"lineNumber":841,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":842,"author":{"gitId":"-"},"content":""},{"lineNumber":843,"author":{"gitId":"-"},"content":"    private void selectSectionDropdown(String sectionName) {"},{"lineNumber":844,"author":{"gitId":"-"},"content":"        WebElement sectionDropdown \u003d browser.driver.findElement(By.id(\"section-dropdown\"));"},{"lineNumber":845,"author":{"gitId":"-"},"content":"        selectDropdownOptionByText(sectionDropdown, sectionName);"},{"lineNumber":846,"author":{"gitId":"-"},"content":"        waitUntilAnimationFinish();"},{"lineNumber":847,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":848,"author":{"gitId":"-"},"content":""},{"lineNumber":849,"author":{"gitId":"-"},"content":"    private void selectSectionTypeDropdown(String sectionTypeValue) {"},{"lineNumber":850,"author":{"gitId":"-"},"content":"        WebElement sectionTypeDropdown \u003d browser.driver.findElement(By.id(\"section-type-dropdown\"));"},{"lineNumber":851,"author":{"gitId":"-"},"content":"        selectDropdownOptionByValue(sectionTypeDropdown, sectionTypeValue);"},{"lineNumber":852,"author":{"gitId":"-"},"content":"        waitUntilAnimationFinish();"},{"lineNumber":853,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":854,"author":{"gitId":"-"},"content":""},{"lineNumber":855,"author":{"gitId":"-"},"content":"    private WebElement getQuestionPanel(int qnNum) {"},{"lineNumber":856,"author":{"gitId":"-"},"content":"        return getQuestionPanel(null, qnNum);"},{"lineNumber":857,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":858,"author":{"gitId":"-"},"content":""},{"lineNumber":859,"author":{"gitId":"-"},"content":"    private WebElement getQuestionPanel(WebElement parentPanel, int qnNum) {"},{"lineNumber":860,"author":{"gitId":"-"},"content":"        List\u003cWebElement\u003e questionPanels;"},{"lineNumber":861,"author":{"gitId":"-"},"content":"        if (parentPanel \u003d\u003d null) {"},{"lineNumber":862,"author":{"gitId":"-"},"content":"            questionPanels \u003d browser.driver.findElements(By.cssSelector(\"[id^\u003d\u0027question-panel-\u0027]\"));"},{"lineNumber":863,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":864,"author":{"gitId":"-"},"content":"            questionPanels \u003d parentPanel.findElements(By.cssSelector(\"[id^\u003d\u0027question-panel-\u0027]\"));"},{"lineNumber":865,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":866,"author":{"gitId":"-"},"content":""},{"lineNumber":867,"author":{"gitId":"-"},"content":"        for (WebElement questionPanel : questionPanels) {"},{"lineNumber":868,"author":{"gitId":"-"},"content":"            if (questionPanel.getText().contains(\"Question \" + qnNum)) {"},{"lineNumber":869,"author":{"gitId":"-"},"content":"                return questionPanel;"},{"lineNumber":870,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":871,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":872,"author":{"gitId":"-"},"content":"        throw new RuntimeException(\"Question \" + qnNum + \" not found.\");"},{"lineNumber":873,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":874,"author":{"gitId":"-"},"content":""},{"lineNumber":875,"author":{"gitId":"-"},"content":"    private WebElement getSectionPanel(String sectionName) {"},{"lineNumber":876,"author":{"gitId":"-"},"content":"        List\u003cWebElement\u003e sectionPanels \u003d browser.driver.findElements(By.id(\"section-panel\"));"},{"lineNumber":877,"author":{"gitId":"-"},"content":"        for (WebElement sectionPanel : sectionPanels) {"},{"lineNumber":878,"author":{"gitId":"-"},"content":"            if (sectionPanel.getText().startsWith(sectionName)) {"},{"lineNumber":879,"author":{"gitId":"-"},"content":"                return sectionPanel;"},{"lineNumber":880,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":881,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":882,"author":{"gitId":"-"},"content":"        throw new RuntimeException(\"Section \\\"\" + sectionName + \"\\\" not found.\");"},{"lineNumber":883,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":884,"author":{"gitId":"-"},"content":""},{"lineNumber":885,"author":{"gitId":"-"},"content":"    private WebElement getTeamPanel(WebElement sectionPanel, String teamName) {"},{"lineNumber":886,"author":{"gitId":"-"},"content":"        List\u003cWebElement\u003e teamPanels \u003d sectionPanel.findElements(By.id(\"team-panel\"));"},{"lineNumber":887,"author":{"gitId":"-"},"content":"        for (WebElement teamPanel : teamPanels) {"},{"lineNumber":888,"author":{"gitId":"-"},"content":"            if (teamPanel.getText().startsWith(teamName)) {"},{"lineNumber":889,"author":{"gitId":"-"},"content":"                return teamPanel;"},{"lineNumber":890,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":891,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":892,"author":{"gitId":"-"},"content":"        throw new RuntimeException(\"Team \\\"\" + teamName + \"\\\" not found\");"},{"lineNumber":893,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":894,"author":{"gitId":"-"},"content":""},{"lineNumber":895,"author":{"gitId":"-"},"content":"    private WebElement getUserPanel(WebElement parentPanel, String header) {"},{"lineNumber":896,"author":{"gitId":"-"},"content":"        List\u003cWebElement\u003e userPanels \u003d parentPanel.findElements(By.id(\"user-panel\"));"},{"lineNumber":897,"author":{"gitId":"-"},"content":"        for (WebElement userPanel : userPanels) {"},{"lineNumber":898,"author":{"gitId":"-"},"content":"            if (userPanel.getText().startsWith(header)) {"},{"lineNumber":899,"author":{"gitId":"-"},"content":"                return userPanel;"},{"lineNumber":900,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":901,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":902,"author":{"gitId":"-"},"content":"        throw new RuntimeException(\"User \\\"\" + header + \"\\\" not found.\");"},{"lineNumber":903,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":904,"author":{"gitId":"-"},"content":""},{"lineNumber":905,"author":{"gitId":"-"},"content":"    private WebElement getUserPanel(FeedbackParticipantType type, String user,"},{"lineNumber":906,"author":{"gitId":"-"},"content":"                                    Collection\u003cInstructorAttributes\u003e instructors,"},{"lineNumber":907,"author":{"gitId":"-"},"content":"                                    Collection\u003cStudentAttributes\u003e students,"},{"lineNumber":908,"author":{"gitId":"-"},"content":"                                    boolean isGroupedByTeam,"},{"lineNumber":909,"author":{"gitId":"-"},"content":"                                    boolean isGiver) {"},{"lineNumber":910,"author":{"gitId":"-"},"content":"        String section \u003d getSection(type, user, students);"},{"lineNumber":911,"author":{"gitId":"-"},"content":"        String team \u003d getTeam(type, user, students);"},{"lineNumber":912,"author":{"gitId":"-"},"content":"        String name \u003d getName(type, user, instructors, students);"},{"lineNumber":913,"author":{"gitId":"-"},"content":"        String userPanelHeader \u003d getUserHeader(isGiver, name);"},{"lineNumber":914,"author":{"gitId":"-"},"content":""},{"lineNumber":915,"author":{"gitId":"-"},"content":"        return getUserPanel(section, team, userPanelHeader, isGroupedByTeam);"},{"lineNumber":916,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":917,"author":{"gitId":"-"},"content":""},{"lineNumber":918,"author":{"gitId":"-"},"content":"    private WebElement getUserPanel(String section, String team, String userPanelHeader, boolean isGroupedByTeam) {"},{"lineNumber":919,"author":{"gitId":"-"},"content":"        WebElement parentPanel \u003d getUserParentPanel(section, team, isGroupedByTeam);"},{"lineNumber":920,"author":{"gitId":"-"},"content":"        return getUserPanel(parentPanel, userPanelHeader);"},{"lineNumber":921,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":922,"author":{"gitId":"-"},"content":""},{"lineNumber":923,"author":{"gitId":"-"},"content":"    private WebElement getUserParentPanel(String section, String team, boolean isGroupedByTeam) {"},{"lineNumber":924,"author":{"gitId":"-"},"content":"        WebElement sectionPanel \u003d getSectionPanel(section);"},{"lineNumber":925,"author":{"gitId":"-"},"content":"        WebElement parentPanel \u003d sectionPanel;"},{"lineNumber":926,"author":{"gitId":"-"},"content":"        if (isGroupedByTeam) {"},{"lineNumber":927,"author":{"gitId":"-"},"content":"            parentPanel \u003d getTeamPanel(sectionPanel, team);"},{"lineNumber":928,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":929,"author":{"gitId":"-"},"content":"        return parentPanel;"},{"lineNumber":930,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":931,"author":{"gitId":"-"},"content":""},{"lineNumber":932,"author":{"gitId":"-"},"content":"    private void expandQuestionPanel(WebElement questionPanel) {"},{"lineNumber":933,"author":{"gitId":"-"},"content":"        if (!isQuestionPanelExpanded(questionPanel)) {"},{"lineNumber":934,"author":{"gitId":"-"},"content":"            click(questionPanel.findElement(By.className(\"card-header\")));"},{"lineNumber":935,"author":{"gitId":"-"},"content":"            waitUntilAnimationFinish();"},{"lineNumber":936,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":937,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":938,"author":{"gitId":"-"},"content":""},{"lineNumber":939,"author":{"gitId":"-"},"content":"    private void hideQuestionPanel(WebElement questionPanel) {"},{"lineNumber":940,"author":{"gitId":"-"},"content":"        if (isQuestionPanelExpanded(questionPanel)) {"},{"lineNumber":941,"author":{"gitId":"-"},"content":"            click(questionPanel.findElement(By.className(\"card-header\")));"},{"lineNumber":942,"author":{"gitId":"-"},"content":"            waitUntilAnimationFinish();"},{"lineNumber":943,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":944,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":945,"author":{"gitId":"-"},"content":""},{"lineNumber":946,"author":{"gitId":"-"},"content":"    private boolean isQuestionPanelExpanded(WebElement questionPanel) {"},{"lineNumber":947,"author":{"gitId":"-"},"content":"        return questionPanel.findElements(By.id(\"response-table\")).size()"},{"lineNumber":948,"author":{"gitId":"-"},"content":"                + questionPanel.findElements(By.id(\"no-responses\")).size() \u003e 0;"},{"lineNumber":949,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":950,"author":{"gitId":"-"},"content":""},{"lineNumber":951,"author":{"gitId":"-"},"content":"    private String getQuestionText(WebElement questionPanel) {"},{"lineNumber":952,"author":{"gitId":"-"},"content":"        return questionPanel.findElement(By.className(\"question-text\")).getText().trim();"},{"lineNumber":953,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":954,"author":{"gitId":"-"},"content":""},{"lineNumber":955,"author":{"gitId":"-"},"content":"    private WebElement getResponseTable(WebElement questionPanel) {"},{"lineNumber":956,"author":{"gitId":"-"},"content":"        return questionPanel.findElement(By.id(\"response-table\"));"},{"lineNumber":957,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":958,"author":{"gitId":"-"},"content":""},{"lineNumber":959,"author":{"gitId":"-"},"content":"    // For question view"},{"lineNumber":960,"author":{"gitId":"-"},"content":"    private WebElement getResponseRow(WebElement questionPanel, String giverTeam, String giverName, String recipientTeam,"},{"lineNumber":961,"author":{"gitId":"-"},"content":"                                      String recipientName) {"},{"lineNumber":962,"author":{"gitId":"-"},"content":"        List\u003cWebElement\u003e responseRows \u003d getResponseTable(questionPanel).findElements(By.cssSelector(\"tbody tr\"));"},{"lineNumber":963,"author":{"gitId":"-"},"content":"        for (WebElement responseRow : responseRows) {"},{"lineNumber":964,"author":{"gitId":"-"},"content":"            List\u003cWebElement\u003e cells \u003d responseRow.findElements(By.tagName(\"td\"));"},{"lineNumber":965,"author":{"gitId":"-"},"content":"            if (cells.get(0).getText().equals(giverTeam) \u0026\u0026 cells.get(1).getText().equals(giverName)"},{"lineNumber":966,"author":{"gitId":"-"},"content":"                    \u0026\u0026 cells.get(2).getText().equals(recipientTeam) \u0026\u0026 cells.get(3).getText().equals(recipientName)) {"},{"lineNumber":967,"author":{"gitId":"-"},"content":"                return responseRow;"},{"lineNumber":968,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":969,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":970,"author":{"gitId":"-"},"content":"        throw new RuntimeException(\"Response not found \" + giverName);"},{"lineNumber":971,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":972,"author":{"gitId":"-"},"content":""},{"lineNumber":973,"author":{"gitId":"-"},"content":"    // For other views"},{"lineNumber":974,"author":{"gitId":"-"},"content":"    private WebElement getResponseRow(WebElement questionPanel, String userTeam, String userNameAndEmail) {"},{"lineNumber":975,"author":{"gitId":"-"},"content":"        List\u003cWebElement\u003e responseRows \u003d getResponseTable(questionPanel).findElements(By.cssSelector(\"tbody tr\"));"},{"lineNumber":976,"author":{"gitId":"-"},"content":"        for (WebElement responseRow : responseRows) {"},{"lineNumber":977,"author":{"gitId":"-"},"content":"            List\u003cWebElement\u003e cells \u003d responseRow.findElements(By.tagName(\"td\"));"},{"lineNumber":978,"author":{"gitId":"-"},"content":"            if (cells.get(0).getText().equals(userTeam) \u0026\u0026 cells.get(1).getText().equals(userNameAndEmail)) {"},{"lineNumber":979,"author":{"gitId":"-"},"content":"                return responseRow;"},{"lineNumber":980,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":981,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":982,"author":{"gitId":"-"},"content":"        throw new RuntimeException(\"Response not found for \" + userNameAndEmail);"},{"lineNumber":983,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":984,"author":{"gitId":"-"},"content":""},{"lineNumber":985,"author":{"gitId":"-"},"content":"    private List\u003cWebElement\u003e getAllGroupedResponses(WebElement userPanel) {"},{"lineNumber":986,"author":{"gitId":"-"},"content":"        return userPanel.findElements(By.id(\"grouped-responses\"));"},{"lineNumber":987,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":988,"author":{"gitId":"-"},"content":""},{"lineNumber":989,"author":{"gitId":"-"},"content":"    private WebElement getGroupedResponses(WebElement userPanel, String userName, String userTeam, boolean isGrq) {"},{"lineNumber":990,"author":{"gitId":"-"},"content":"        List\u003cWebElement\u003e groupedResponses \u003d getAllGroupedResponses(userPanel);"},{"lineNumber":991,"author":{"gitId":"-"},"content":"        String expectedStarting \u003d getUserHeader(!isGrq, userName) + \" (\" + userTeam + \")\";"},{"lineNumber":992,"author":{"gitId":"-"},"content":""},{"lineNumber":993,"author":{"gitId":"-"},"content":"        boolean hasEmptyGroupedResponses \u003d false;"},{"lineNumber":994,"author":{"gitId":"-"},"content":"        for (WebElement groupedResponse : groupedResponses) {"},{"lineNumber":995,"author":{"gitId":"-"},"content":"            if (groupedResponse.getText().isEmpty()) {"},{"lineNumber":996,"author":{"gitId":"-"},"content":"                hasEmptyGroupedResponses \u003d true;"},{"lineNumber":997,"author":{"gitId":"-"},"content":"                continue;"},{"lineNumber":998,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":999,"author":{"gitId":"-"},"content":"            String usersDetails \u003d groupedResponse.findElement(By.id(\"users-details\")).getText();"},{"lineNumber":1000,"author":{"gitId":"-"},"content":"            if (usersDetails.startsWith(expectedStarting)) {"},{"lineNumber":1001,"author":{"gitId":"-"},"content":"                return groupedResponse;"},{"lineNumber":1002,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":1003,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1004,"author":{"gitId":"-"},"content":"        if (hasEmptyGroupedResponses) {"},{"lineNumber":1005,"author":{"gitId":"-"},"content":"            return null;"},{"lineNumber":1006,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1007,"author":{"gitId":"-"},"content":"        throw new NoSuchElementException(\"Grouped responses not found for \" + userName);"},{"lineNumber":1008,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1009,"author":{"gitId":"-"},"content":""},{"lineNumber":1010,"author":{"gitId":"-"},"content":"    private WebElement getTeamStats(WebElement parentPanel, int qnNum) {"},{"lineNumber":1011,"author":{"gitId":"-"},"content":"        List\u003cWebElement\u003e teamStats \u003d parentPanel.findElements(By.id(\"team-statistics\"));"},{"lineNumber":1012,"author":{"gitId":"-"},"content":""},{"lineNumber":1013,"author":{"gitId":"-"},"content":"        for (WebElement teamStat : teamStats) {"},{"lineNumber":1014,"author":{"gitId":"-"},"content":"            if (teamStat.getText().contains(\"Question \" + qnNum)) {"},{"lineNumber":1015,"author":{"gitId":"-"},"content":"                return teamStat;"},{"lineNumber":1016,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":1017,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1018,"author":{"gitId":"-"},"content":"        throw new RuntimeException(\"Team statistics not found for question \" + qnNum);"},{"lineNumber":1019,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1020,"author":{"gitId":"-"},"content":""},{"lineNumber":1021,"author":{"gitId":"-"},"content":"    private String getCommentGiver(WebElement commentField) {"},{"lineNumber":1022,"author":{"gitId":"weiquu"},"content":"        String commentGiverDescription \u003d commentField.findElement(By.className(\"comment-giver-name\")).getText();"},{"lineNumber":1023,"author":{"gitId":"-"},"content":"        return commentGiverDescription.split(\" commented\")[0];"},{"lineNumber":1024,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1025,"author":{"gitId":"-"},"content":""},{"lineNumber":1026,"author":{"gitId":"-"},"content":"    private String getCommentEditor(WebElement commentField) {"},{"lineNumber":1027,"author":{"gitId":"-"},"content":"        String editDescription \u003d commentField.findElement(By.id(\"last-editor-name\")).getText();"},{"lineNumber":1028,"author":{"gitId":"-"},"content":"        return editDescription.split(\"edited by \")[1];"},{"lineNumber":1029,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1030,"author":{"gitId":"-"},"content":""},{"lineNumber":1031,"author":{"gitId":"-"},"content":"    private WebElement getCommentField(WebElement commentSection, String commentString) {"},{"lineNumber":1032,"author":{"gitId":"-"},"content":"        List\u003cWebElement\u003e commentFields \u003d getCommentFields(commentSection);"},{"lineNumber":1033,"author":{"gitId":"-"},"content":"        for (WebElement comment : commentFields) {"},{"lineNumber":1034,"author":{"gitId":"-"},"content":"            if (comment.findElement(By.className(\"comment-text\")).getText().equals(commentString)) {"},{"lineNumber":1035,"author":{"gitId":"-"},"content":"                return comment;"},{"lineNumber":1036,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":1037,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1038,"author":{"gitId":"-"},"content":"        throw new RuntimeException(\"Comment field not found\");"},{"lineNumber":1039,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1040,"author":{"gitId":"-"},"content":""},{"lineNumber":1041,"author":{"gitId":"-"},"content":"    private List\u003cWebElement\u003e getCommentFields(WebElement commentSection) {"},{"lineNumber":1042,"author":{"gitId":"-"},"content":"        waitForElementPresence(By.tagName(\"tm-comment-row\"));"},{"lineNumber":1043,"author":{"gitId":"-"},"content":"        return commentSection.findElements(By.tagName(\"tm-comment-row\"));"},{"lineNumber":1044,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1045,"author":{"gitId":"-"},"content":""},{"lineNumber":1046,"author":{"gitId":"-"},"content":"    // Methods for manipulating responses information"},{"lineNumber":1047,"author":{"gitId":"-"},"content":""},{"lineNumber":1048,"author":{"gitId":"-"},"content":"    private boolean isMissingResponse(FeedbackResponseAttributes response) {"},{"lineNumber":1049,"author":{"gitId":"-"},"content":"        return response.getFeedbackSessionName() \u003d\u003d null;"},{"lineNumber":1050,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1051,"author":{"gitId":"-"},"content":""},{"lineNumber":1052,"author":{"gitId":"-"},"content":"    private List\u003cFeedbackResponseAttributes\u003e filterMissingResponses(List\u003cFeedbackResponseAttributes\u003e responses) {"},{"lineNumber":1053,"author":{"gitId":"-"},"content":"        return responses.stream()"},{"lineNumber":1054,"author":{"gitId":"-"},"content":"                .filter(r -\u003e !isMissingResponse(r))"},{"lineNumber":1055,"author":{"gitId":"-"},"content":"                .collect(Collectors.toList());"},{"lineNumber":1056,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1057,"author":{"gitId":"-"},"content":""},{"lineNumber":1058,"author":{"gitId":"-"},"content":"    private List\u003cString\u003e getGivers(List\u003cFeedbackResponseAttributes\u003e responses) {"},{"lineNumber":1059,"author":{"gitId":"-"},"content":"        return responses.stream().map(FeedbackResponseAttributes::getGiver).collect(Collectors.toList());"},{"lineNumber":1060,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1061,"author":{"gitId":"-"},"content":""},{"lineNumber":1062,"author":{"gitId":"-"},"content":"    private List\u003cString\u003e getRecipients(List\u003cFeedbackResponseAttributes\u003e responses) {"},{"lineNumber":1063,"author":{"gitId":"-"},"content":"        return responses.stream().map(FeedbackResponseAttributes::getRecipient).collect(Collectors.toList());"},{"lineNumber":1064,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1065,"author":{"gitId":"-"},"content":""},{"lineNumber":1066,"author":{"gitId":"-"},"content":"    private FeedbackResponseAttributes getResponseFromGiver(List\u003cFeedbackResponseAttributes\u003e responses, String giver) {"},{"lineNumber":1067,"author":{"gitId":"-"},"content":"        return responses.stream()"},{"lineNumber":1068,"author":{"gitId":"-"},"content":"                .filter(response -\u003e response.getGiver().equals(giver))"},{"lineNumber":1069,"author":{"gitId":"-"},"content":"                .findFirst()"},{"lineNumber":1070,"author":{"gitId":"-"},"content":"                .orElse(null);"},{"lineNumber":1071,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1072,"author":{"gitId":"-"},"content":""},{"lineNumber":1073,"author":{"gitId":"-"},"content":"    private FeedbackResponseAttributes getResponseForRecipient(List\u003cFeedbackResponseAttributes\u003e responses,"},{"lineNumber":1074,"author":{"gitId":"-"},"content":"                                                               String recipient) {"},{"lineNumber":1075,"author":{"gitId":"-"},"content":"        return responses.stream()"},{"lineNumber":1076,"author":{"gitId":"-"},"content":"                .filter(response -\u003e response.getRecipient().equals(recipient))"},{"lineNumber":1077,"author":{"gitId":"-"},"content":"                .findFirst()"},{"lineNumber":1078,"author":{"gitId":"-"},"content":"                .orElse(null);"},{"lineNumber":1079,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1080,"author":{"gitId":"-"},"content":""},{"lineNumber":1081,"author":{"gitId":"-"},"content":"    private String getSection(FeedbackParticipantType type, String participant, Collection\u003cStudentAttributes\u003e students) {"},{"lineNumber":1082,"author":{"gitId":"-"},"content":"        String sectionName;"},{"lineNumber":1083,"author":{"gitId":"-"},"content":"        if (type.equals(FeedbackParticipantType.TEAMS)) {"},{"lineNumber":1084,"author":{"gitId":"-"},"content":"            sectionName \u003d students.stream()"},{"lineNumber":1085,"author":{"gitId":"-"},"content":"                    .filter(student -\u003e student.getTeam().equals(participant))"},{"lineNumber":1086,"author":{"gitId":"-"},"content":"                    .findFirst()"},{"lineNumber":1087,"author":{"gitId":"-"},"content":"                    .map(StudentAttributes::getSection)"},{"lineNumber":1088,"author":{"gitId":"-"},"content":"                    .orElse(null);"},{"lineNumber":1089,"author":{"gitId":"-"},"content":"        } else if (type.equals(FeedbackParticipantType.INSTRUCTORS) || type.equals(FeedbackParticipantType.NONE)) {"},{"lineNumber":1090,"author":{"gitId":"-"},"content":"            sectionName \u003d \"None\";"},{"lineNumber":1091,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":1092,"author":{"gitId":"-"},"content":"            sectionName \u003d students.stream()"},{"lineNumber":1093,"author":{"gitId":"-"},"content":"                    .filter(student -\u003e student.getEmail().equals(participant))"},{"lineNumber":1094,"author":{"gitId":"-"},"content":"                    .findFirst()"},{"lineNumber":1095,"author":{"gitId":"-"},"content":"                    .map(StudentAttributes::getSection)"},{"lineNumber":1096,"author":{"gitId":"-"},"content":"                    .orElse(null);"},{"lineNumber":1097,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1098,"author":{"gitId":"-"},"content":"        if (sectionName \u003d\u003d null) {"},{"lineNumber":1099,"author":{"gitId":"-"},"content":"            throw new RuntimeException(\"cannot find section name for \" + participant);"},{"lineNumber":1100,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1101,"author":{"gitId":"-"},"content":"        if (\"None\".equals(sectionName)) {"},{"lineNumber":1102,"author":{"gitId":"-"},"content":"            sectionName \u003d NO_SECTION_LABEL;"},{"lineNumber":1103,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1104,"author":{"gitId":"-"},"content":"        return sectionName;"},{"lineNumber":1105,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1106,"author":{"gitId":"-"},"content":""},{"lineNumber":1107,"author":{"gitId":"-"},"content":"    private String getTeam(FeedbackParticipantType type, String participant, Collection\u003cStudentAttributes\u003e students) {"},{"lineNumber":1108,"author":{"gitId":"-"},"content":"        if (type.equals(FeedbackParticipantType.NONE)) {"},{"lineNumber":1109,"author":{"gitId":"-"},"content":"            return NO_TEAM_LABEL;"},{"lineNumber":1110,"author":{"gitId":"-"},"content":"        } else if (type.equals(FeedbackParticipantType.TEAMS)) {"},{"lineNumber":1111,"author":{"gitId":"-"},"content":"            return participant;"},{"lineNumber":1112,"author":{"gitId":"-"},"content":"        } else if (type.equals(FeedbackParticipantType.INSTRUCTORS)) {"},{"lineNumber":1113,"author":{"gitId":"-"},"content":"            return \"Instructors\";"},{"lineNumber":1114,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1115,"author":{"gitId":"-"},"content":"        String teamName \u003d students.stream()"},{"lineNumber":1116,"author":{"gitId":"-"},"content":"                .filter(student -\u003e student.getEmail().equals(participant))"},{"lineNumber":1117,"author":{"gitId":"-"},"content":"                .findFirst()"},{"lineNumber":1118,"author":{"gitId":"-"},"content":"                .map(StudentAttributes::getTeam)"},{"lineNumber":1119,"author":{"gitId":"-"},"content":"                .orElse(null);"},{"lineNumber":1120,"author":{"gitId":"-"},"content":""},{"lineNumber":1121,"author":{"gitId":"-"},"content":"        if (teamName \u003d\u003d null) {"},{"lineNumber":1122,"author":{"gitId":"-"},"content":"            throw new RuntimeException(\"cannot find section name for \" + participant);"},{"lineNumber":1123,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1124,"author":{"gitId":"-"},"content":""},{"lineNumber":1125,"author":{"gitId":"-"},"content":"        return teamName;"},{"lineNumber":1126,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1127,"author":{"gitId":"-"},"content":""},{"lineNumber":1128,"author":{"gitId":"-"},"content":"    private String getName(FeedbackParticipantType type, String participant,"},{"lineNumber":1129,"author":{"gitId":"-"},"content":"                                   Collection\u003cInstructorAttributes\u003e instructors,"},{"lineNumber":1130,"author":{"gitId":"-"},"content":"                                   Collection\u003cStudentAttributes\u003e students) {"},{"lineNumber":1131,"author":{"gitId":"-"},"content":"        String name;"},{"lineNumber":1132,"author":{"gitId":"-"},"content":"        if (type.equals(FeedbackParticipantType.NONE)) {"},{"lineNumber":1133,"author":{"gitId":"-"},"content":"            name \u003d NO_USER_LABEL;"},{"lineNumber":1134,"author":{"gitId":"-"},"content":"        } else if (type.equals(FeedbackParticipantType.TEAMS)) {"},{"lineNumber":1135,"author":{"gitId":"-"},"content":"            name \u003d participant;"},{"lineNumber":1136,"author":{"gitId":"-"},"content":"        } else if (type.equals(FeedbackParticipantType.INSTRUCTORS)) {"},{"lineNumber":1137,"author":{"gitId":"-"},"content":"            name \u003d instructors.stream()"},{"lineNumber":1138,"author":{"gitId":"-"},"content":"                    .filter(instructor -\u003e instructor.getEmail().equals(participant))"},{"lineNumber":1139,"author":{"gitId":"-"},"content":"                    .findFirst()"},{"lineNumber":1140,"author":{"gitId":"-"},"content":"                    .map(InstructorAttributes::getName)"},{"lineNumber":1141,"author":{"gitId":"-"},"content":"                    .orElse(null);"},{"lineNumber":1142,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":1143,"author":{"gitId":"-"},"content":"            name \u003d students.stream()"},{"lineNumber":1144,"author":{"gitId":"-"},"content":"                    .filter(student -\u003e student.getEmail().equals(participant))"},{"lineNumber":1145,"author":{"gitId":"-"},"content":"                    .findFirst()"},{"lineNumber":1146,"author":{"gitId":"-"},"content":"                    .map(StudentAttributes::getName)"},{"lineNumber":1147,"author":{"gitId":"-"},"content":"                    .orElse(null);"},{"lineNumber":1148,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1149,"author":{"gitId":"-"},"content":""},{"lineNumber":1150,"author":{"gitId":"-"},"content":"        if (name \u003d\u003d null) {"},{"lineNumber":1151,"author":{"gitId":"-"},"content":"            throw new RuntimeException(\"Could not find name for : \" + participant);"},{"lineNumber":1152,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1153,"author":{"gitId":"-"},"content":""},{"lineNumber":1154,"author":{"gitId":"-"},"content":"        return name;"},{"lineNumber":1155,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1156,"author":{"gitId":"-"},"content":""},{"lineNumber":1157,"author":{"gitId":"-"},"content":"    private String getNameAndEmail(FeedbackParticipantType type, String participant,"},{"lineNumber":1158,"author":{"gitId":"-"},"content":"                           Collection\u003cInstructorAttributes\u003e instructors,"},{"lineNumber":1159,"author":{"gitId":"-"},"content":"                           Collection\u003cStudentAttributes\u003e students) {"},{"lineNumber":1160,"author":{"gitId":"-"},"content":"        String name;"},{"lineNumber":1161,"author":{"gitId":"-"},"content":"        if (type.equals(FeedbackParticipantType.NONE)) {"},{"lineNumber":1162,"author":{"gitId":"-"},"content":"            name \u003d NO_USER_LABEL;"},{"lineNumber":1163,"author":{"gitId":"-"},"content":"        } else if (type.equals(FeedbackParticipantType.TEAMS)) {"},{"lineNumber":1164,"author":{"gitId":"-"},"content":"            name \u003d participant;"},{"lineNumber":1165,"author":{"gitId":"-"},"content":"        } else if (type.equals(FeedbackParticipantType.INSTRUCTORS)) {"},{"lineNumber":1166,"author":{"gitId":"-"},"content":"            name \u003d instructors.stream()"},{"lineNumber":1167,"author":{"gitId":"-"},"content":"                    .filter(instructor -\u003e instructor.getEmail().equals(participant))"},{"lineNumber":1168,"author":{"gitId":"-"},"content":"                    .findFirst()"},{"lineNumber":1169,"author":{"gitId":"-"},"content":"                    .map(instructor -\u003e String.format(\"%s (%s)\", instructor.getName(), instructor.getEmail()))"},{"lineNumber":1170,"author":{"gitId":"-"},"content":"                    .orElse(null);"},{"lineNumber":1171,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":1172,"author":{"gitId":"-"},"content":"            name \u003d students.stream()"},{"lineNumber":1173,"author":{"gitId":"-"},"content":"                    .filter(student -\u003e student.getEmail().equals(participant))"},{"lineNumber":1174,"author":{"gitId":"-"},"content":"                    .findFirst()"},{"lineNumber":1175,"author":{"gitId":"-"},"content":"                    .map(student -\u003e String.format(\"%s (%s)\", student.getName(), student.getEmail()))"},{"lineNumber":1176,"author":{"gitId":"-"},"content":"                    .orElse(null);"},{"lineNumber":1177,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1178,"author":{"gitId":"-"},"content":""},{"lineNumber":1179,"author":{"gitId":"-"},"content":"        if (name \u003d\u003d null) {"},{"lineNumber":1180,"author":{"gitId":"-"},"content":"            throw new RuntimeException(\"Could not find name for : \" + participant);"},{"lineNumber":1181,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1182,"author":{"gitId":"-"},"content":""},{"lineNumber":1183,"author":{"gitId":"-"},"content":"        return name;"},{"lineNumber":1184,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1185,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"weiquu":1,"-":1184}},{"path":"src/main/java/teammates/logic/core/FeedbackResponsesLogic.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.logic.core;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.time.Instant;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.util.ArrayList;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.util.Collection;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import java.util.Collections;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import java.util.HashMap;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import java.util.HashSet;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import java.util.Map;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import java.util.Set;"},{"lineNumber":12,"author":{"gitId":"-"},"content":""},{"lineNumber":13,"author":{"gitId":"-"},"content":"import javax.annotation.Nullable;"},{"lineNumber":14,"author":{"gitId":"-"},"content":""},{"lineNumber":15,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.AttributesDeletionQuery;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.CourseRoster;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.FeedbackParticipantType;"},{"lineNumber":18,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.FeedbackResultFetchType;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.SessionResultsBundle;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;"},{"lineNumber":21,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackResponseAttributes;"},{"lineNumber":22,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackResponseCommentAttributes;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.InstructorAttributes;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.StudentAttributes;"},{"lineNumber":25,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackQuestionType;"},{"lineNumber":26,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackRankRecipientsResponseDetails;"},{"lineNumber":27,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackTextResponseDetails;"},{"lineNumber":28,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":29,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":30,"author":{"gitId":"-"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":31,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":32,"author":{"gitId":"-"},"content":"import teammates.common.util.RequestTracer;"},{"lineNumber":33,"author":{"gitId":"-"},"content":"import teammates.storage.api.FeedbackResponsesDb;"},{"lineNumber":34,"author":{"gitId":"-"},"content":""},{"lineNumber":35,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":36,"author":{"gitId":"-"},"content":" * Handles operations related to feedback responses."},{"lineNumber":37,"author":{"gitId":"-"},"content":" *"},{"lineNumber":38,"author":{"gitId":"-"},"content":" * @see FeedbackResponseAttributes"},{"lineNumber":39,"author":{"gitId":"-"},"content":" * @see FeedbackResponsesDb"},{"lineNumber":40,"author":{"gitId":"-"},"content":" */"},{"lineNumber":41,"author":{"gitId":"-"},"content":"public final class FeedbackResponsesLogic {"},{"lineNumber":42,"author":{"gitId":"-"},"content":""},{"lineNumber":43,"author":{"gitId":"-"},"content":"    private static final FeedbackResponsesLogic instance \u003d new FeedbackResponsesLogic();"},{"lineNumber":44,"author":{"gitId":"-"},"content":""},{"lineNumber":45,"author":{"gitId":"-"},"content":"    private final FeedbackResponsesDb frDb \u003d FeedbackResponsesDb.inst();"},{"lineNumber":46,"author":{"gitId":"-"},"content":""},{"lineNumber":47,"author":{"gitId":"-"},"content":"    private FeedbackQuestionsLogic fqLogic;"},{"lineNumber":48,"author":{"gitId":"-"},"content":"    private FeedbackResponseCommentsLogic frcLogic;"},{"lineNumber":49,"author":{"gitId":"-"},"content":"    private InstructorsLogic instructorsLogic;"},{"lineNumber":50,"author":{"gitId":"-"},"content":"    private StudentsLogic studentsLogic;"},{"lineNumber":51,"author":{"gitId":"-"},"content":""},{"lineNumber":52,"author":{"gitId":"-"},"content":"    private FeedbackResponsesLogic() {"},{"lineNumber":53,"author":{"gitId":"-"},"content":"        // prevent initialization"},{"lineNumber":54,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":55,"author":{"gitId":"-"},"content":""},{"lineNumber":56,"author":{"gitId":"-"},"content":"    public static FeedbackResponsesLogic inst() {"},{"lineNumber":57,"author":{"gitId":"-"},"content":"        return instance;"},{"lineNumber":58,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":59,"author":{"gitId":"-"},"content":""},{"lineNumber":60,"author":{"gitId":"-"},"content":"    void initLogicDependencies() {"},{"lineNumber":61,"author":{"gitId":"-"},"content":"        fqLogic \u003d FeedbackQuestionsLogic.inst();"},{"lineNumber":62,"author":{"gitId":"-"},"content":"        frcLogic \u003d FeedbackResponseCommentsLogic.inst();"},{"lineNumber":63,"author":{"gitId":"-"},"content":"        instructorsLogic \u003d InstructorsLogic.inst();"},{"lineNumber":64,"author":{"gitId":"-"},"content":"        studentsLogic \u003d StudentsLogic.inst();"},{"lineNumber":65,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":66,"author":{"gitId":"-"},"content":""},{"lineNumber":67,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":68,"author":{"gitId":"-"},"content":"     * Gets a set of giver identifiers that has at least one response under a feedback session."},{"lineNumber":69,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":70,"author":{"gitId":"-"},"content":"    public Set\u003cString\u003e getGiverSetThatAnswerFeedbackSession(String courseId, String feedbackSessionName) {"},{"lineNumber":71,"author":{"gitId":"-"},"content":"        return frDb.getGiverSetThatAnswerFeedbackSession(courseId, feedbackSessionName);"},{"lineNumber":72,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":73,"author":{"gitId":"-"},"content":""},{"lineNumber":74,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":75,"author":{"gitId":"-"},"content":"     * Creates a feedback response."},{"lineNumber":76,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":77,"author":{"gitId":"-"},"content":"     * @return created feedback response"},{"lineNumber":78,"author":{"gitId":"-"},"content":"     * @throws InvalidParametersException if the response is not valid"},{"lineNumber":79,"author":{"gitId":"-"},"content":"     * @throws EntityAlreadyExistsException if the response already exist"},{"lineNumber":80,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":81,"author":{"gitId":"-"},"content":"    public FeedbackResponseAttributes createFeedbackResponse(FeedbackResponseAttributes fra)"},{"lineNumber":82,"author":{"gitId":"-"},"content":"            throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":83,"author":{"gitId":"-"},"content":"        return frDb.createEntity(fra);"},{"lineNumber":84,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":85,"author":{"gitId":"-"},"content":""},{"lineNumber":86,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":87,"author":{"gitId":"-"},"content":"     * Gets a feedback response by its ID."},{"lineNumber":88,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":89,"author":{"gitId":"-"},"content":"    public FeedbackResponseAttributes getFeedbackResponse("},{"lineNumber":90,"author":{"gitId":"-"},"content":"            String feedbackResponseId) {"},{"lineNumber":91,"author":{"gitId":"-"},"content":"        return frDb.getFeedbackResponse(feedbackResponseId);"},{"lineNumber":92,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":93,"author":{"gitId":"-"},"content":""},{"lineNumber":94,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":95,"author":{"gitId":"-"},"content":"     * Gets a feedback response by its unique key."},{"lineNumber":96,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":97,"author":{"gitId":"-"},"content":"    public FeedbackResponseAttributes getFeedbackResponse("},{"lineNumber":98,"author":{"gitId":"-"},"content":"            String feedbackQuestionId, String giverEmail, String recipient) {"},{"lineNumber":99,"author":{"gitId":"-"},"content":"        return frDb.getFeedbackResponse(feedbackQuestionId, giverEmail, recipient);"},{"lineNumber":100,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":101,"author":{"gitId":"-"},"content":""},{"lineNumber":102,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":103,"author":{"gitId":"-"},"content":"     * Gets all responses for a session."},{"lineNumber":104,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":105,"author":{"gitId":"-"},"content":"    List\u003cFeedbackResponseAttributes\u003e getFeedbackResponsesForSession("},{"lineNumber":106,"author":{"gitId":"-"},"content":"            String feedbackSessionName, String courseId) {"},{"lineNumber":107,"author":{"gitId":"-"},"content":"        return frDb.getFeedbackResponsesForSession(feedbackSessionName, courseId);"},{"lineNumber":108,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":109,"author":{"gitId":"-"},"content":""},{"lineNumber":110,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":111,"author":{"gitId":"-"},"content":"     * Gets all responses given to/from a section in a feedback session in a course."},{"lineNumber":112,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":113,"author":{"gitId":"-"},"content":"     * @param feedbackSessionName the name if the session"},{"lineNumber":114,"author":{"gitId":"-"},"content":"     * @param courseId the course ID of the session"},{"lineNumber":115,"author":{"gitId":"-"},"content":"     * @param section if null, will retrieve all responses in the session"},{"lineNumber":116,"author":{"gitId":"-"},"content":"     * @param fetchType if not null, will retrieve responses by giver, receiver sections, or both"},{"lineNumber":117,"author":{"gitId":"-"},"content":"     * @return a list of responses"},{"lineNumber":118,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":119,"author":{"gitId":"-"},"content":"    public List\u003cFeedbackResponseAttributes\u003e getFeedbackResponsesForSessionInSection("},{"lineNumber":120,"author":{"gitId":"-"},"content":"            String feedbackSessionName, String courseId, @Nullable String section,"},{"lineNumber":121,"author":{"gitId":"-"},"content":"            @Nullable FeedbackResultFetchType fetchType) {"},{"lineNumber":122,"author":{"gitId":"-"},"content":"        if (section \u003d\u003d null) {"},{"lineNumber":123,"author":{"gitId":"-"},"content":"            return getFeedbackResponsesForSession(feedbackSessionName, courseId);"},{"lineNumber":124,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":125,"author":{"gitId":"-"},"content":"        return frDb.getFeedbackResponsesForSessionInSection(feedbackSessionName, courseId, section, fetchType);"},{"lineNumber":126,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":127,"author":{"gitId":"-"},"content":""},{"lineNumber":128,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":129,"author":{"gitId":"-"},"content":"     * Gets all responses for a question."},{"lineNumber":130,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":131,"author":{"gitId":"-"},"content":"    public List\u003cFeedbackResponseAttributes\u003e getFeedbackResponsesForQuestion(String feedbackQuestionId) {"},{"lineNumber":132,"author":{"gitId":"-"},"content":"        return frDb.getFeedbackResponsesForQuestion(feedbackQuestionId);"},{"lineNumber":133,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":134,"author":{"gitId":"-"},"content":""},{"lineNumber":135,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":136,"author":{"gitId":"-"},"content":"     * Checks whether there are responses for a question."},{"lineNumber":137,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":138,"author":{"gitId":"-"},"content":"    public boolean areThereResponsesForQuestion(String feedbackQuestionId) {"},{"lineNumber":139,"author":{"gitId":"-"},"content":"        return frDb.areThereResponsesForQuestion(feedbackQuestionId);"},{"lineNumber":140,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":141,"author":{"gitId":"-"},"content":""},{"lineNumber":142,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":143,"author":{"gitId":"-"},"content":"     * Gets all responses given to/from a section for a question."},{"lineNumber":144,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":145,"author":{"gitId":"-"},"content":"     * @param feedbackQuestionId the ID of the question"},{"lineNumber":146,"author":{"gitId":"-"},"content":"     * @param section if null, will retrieve all responses for the question"},{"lineNumber":147,"author":{"gitId":"-"},"content":"     * @return a list of responses"},{"lineNumber":148,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":149,"author":{"gitId":"-"},"content":"    public List\u003cFeedbackResponseAttributes\u003e getFeedbackResponsesForQuestionInSection("},{"lineNumber":150,"author":{"gitId":"-"},"content":"            String feedbackQuestionId, @Nullable String section, FeedbackResultFetchType fetchType) {"},{"lineNumber":151,"author":{"gitId":"-"},"content":"        if (section \u003d\u003d null) {"},{"lineNumber":152,"author":{"gitId":"-"},"content":"            return getFeedbackResponsesForQuestion(feedbackQuestionId);"},{"lineNumber":153,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":154,"author":{"gitId":"-"},"content":"        return frDb.getFeedbackResponsesForQuestionInSection(feedbackQuestionId, section, fetchType);"},{"lineNumber":155,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":156,"author":{"gitId":"-"},"content":""},{"lineNumber":157,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":158,"author":{"gitId":"-"},"content":"     * Gets all responses given by a user for a question."},{"lineNumber":159,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":160,"author":{"gitId":"-"},"content":"    public List\u003cFeedbackResponseAttributes\u003e getFeedbackResponsesFromGiverForQuestion("},{"lineNumber":161,"author":{"gitId":"-"},"content":"            String feedbackQuestionId, String userEmail) {"},{"lineNumber":162,"author":{"gitId":"-"},"content":"        return frDb.getFeedbackResponsesFromGiverForQuestion(feedbackQuestionId, userEmail);"},{"lineNumber":163,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":164,"author":{"gitId":"-"},"content":""},{"lineNumber":165,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":166,"author":{"gitId":"-"},"content":"     * Gets all responses received by a user for a question."},{"lineNumber":167,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":168,"author":{"gitId":"-"},"content":"    private List\u003cFeedbackResponseAttributes\u003e getFeedbackResponsesForReceiverForQuestion("},{"lineNumber":169,"author":{"gitId":"-"},"content":"            String feedbackQuestionId, String userEmail) {"},{"lineNumber":170,"author":{"gitId":"-"},"content":"        return frDb.getFeedbackResponsesForReceiverForQuestion(feedbackQuestionId, userEmail);"},{"lineNumber":171,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":172,"author":{"gitId":"-"},"content":""},{"lineNumber":173,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":174,"author":{"gitId":"-"},"content":"     * Checks whether a giver has responded a session."},{"lineNumber":175,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":176,"author":{"gitId":"-"},"content":"    public boolean hasGiverRespondedForSession(String giverIdentifier, String feedbackSessionName, String courseId) {"},{"lineNumber":177,"author":{"gitId":"-"},"content":""},{"lineNumber":178,"author":{"gitId":"-"},"content":"        return frDb.hasResponsesFromGiverInSession(giverIdentifier, feedbackSessionName, courseId);"},{"lineNumber":179,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":180,"author":{"gitId":"-"},"content":""},{"lineNumber":181,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":182,"author":{"gitId":"-"},"content":"     * Gets all responses received by an user for a course."},{"lineNumber":183,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":184,"author":{"gitId":"-"},"content":"    public List\u003cFeedbackResponseAttributes\u003e getFeedbackResponsesForReceiverForCourse("},{"lineNumber":185,"author":{"gitId":"-"},"content":"            String courseId, String userEmail) {"},{"lineNumber":186,"author":{"gitId":"-"},"content":"        return frDb.getFeedbackResponsesForReceiverForCourse(courseId, userEmail);"},{"lineNumber":187,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":188,"author":{"gitId":"-"},"content":""},{"lineNumber":189,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":190,"author":{"gitId":"-"},"content":"     * Gets all responses given by an user for a course."},{"lineNumber":191,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":192,"author":{"gitId":"-"},"content":"    public List\u003cFeedbackResponseAttributes\u003e getFeedbackResponsesFromGiverForCourse("},{"lineNumber":193,"author":{"gitId":"-"},"content":"            String courseId, String userEmail) {"},{"lineNumber":194,"author":{"gitId":"-"},"content":"        return frDb.getFeedbackResponsesFromGiverForCourse(courseId, userEmail);"},{"lineNumber":195,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":196,"author":{"gitId":"-"},"content":""},{"lineNumber":197,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":198,"author":{"gitId":"-"},"content":"     * Get existing feedback responses from student or his team for the given"},{"lineNumber":199,"author":{"gitId":"-"},"content":"     * question."},{"lineNumber":200,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":201,"author":{"gitId":"-"},"content":"    public List\u003cFeedbackResponseAttributes\u003e getFeedbackResponsesFromStudentOrTeamForQuestion("},{"lineNumber":202,"author":{"gitId":"-"},"content":"            FeedbackQuestionAttributes question, StudentAttributes student) {"},{"lineNumber":203,"author":{"gitId":"-"},"content":"        if (question.getGiverType() \u003d\u003d FeedbackParticipantType.TEAMS) {"},{"lineNumber":204,"author":{"gitId":"-"},"content":"            return getFeedbackResponsesFromTeamForQuestion("},{"lineNumber":205,"author":{"gitId":"-"},"content":"                    question.getId(), question.getCourseId(), student.getTeam(), null);"},{"lineNumber":206,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":207,"author":{"gitId":"-"},"content":"        return frDb.getFeedbackResponsesFromGiverForQuestion(question.getId(), student.getEmail());"},{"lineNumber":208,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":209,"author":{"gitId":"-"},"content":""},{"lineNumber":210,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":211,"author":{"gitId":"-"},"content":"     * Checks whether the giver name of a response is visible to an user."},{"lineNumber":212,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":213,"author":{"gitId":"-"},"content":"    public boolean isNameVisibleToUser("},{"lineNumber":214,"author":{"gitId":"-"},"content":"            FeedbackQuestionAttributes question,"},{"lineNumber":215,"author":{"gitId":"-"},"content":"            FeedbackResponseAttributes response,"},{"lineNumber":216,"author":{"gitId":"-"},"content":"            String userEmail,"},{"lineNumber":217,"author":{"gitId":"-"},"content":"            boolean isInstructor, boolean isGiverName, CourseRoster roster) {"},{"lineNumber":218,"author":{"gitId":"-"},"content":""},{"lineNumber":219,"author":{"gitId":"-"},"content":"        if (question \u003d\u003d null) {"},{"lineNumber":220,"author":{"gitId":"-"},"content":"            return false;"},{"lineNumber":221,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":222,"author":{"gitId":"-"},"content":""},{"lineNumber":223,"author":{"gitId":"-"},"content":"        // Early return if user is giver"},{"lineNumber":224,"author":{"gitId":"-"},"content":"        if (question.getGiverType() \u003d\u003d FeedbackParticipantType.TEAMS) {"},{"lineNumber":225,"author":{"gitId":"-"},"content":"            // if response is given by team, then anyone in the team can see the response"},{"lineNumber":226,"author":{"gitId":"-"},"content":"            if (roster.isStudentInTeam(userEmail, response.getGiver())) {"},{"lineNumber":227,"author":{"gitId":"-"},"content":"                return true;"},{"lineNumber":228,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":229,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":230,"author":{"gitId":"-"},"content":"            if (response.getGiver().equals(userEmail)) {"},{"lineNumber":231,"author":{"gitId":"-"},"content":"                return true;"},{"lineNumber":232,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":233,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":234,"author":{"gitId":"-"},"content":""},{"lineNumber":235,"author":{"gitId":"-"},"content":"        return isFeedbackParticipantNameVisibleToUser(question, response,"},{"lineNumber":236,"author":{"gitId":"-"},"content":"                userEmail, isInstructor, isGiverName, roster);"},{"lineNumber":237,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":238,"author":{"gitId":"-"},"content":""},{"lineNumber":239,"author":{"gitId":"-"},"content":"    private boolean isFeedbackParticipantNameVisibleToUser("},{"lineNumber":240,"author":{"gitId":"-"},"content":"            FeedbackQuestionAttributes question, FeedbackResponseAttributes response,"},{"lineNumber":241,"author":{"gitId":"-"},"content":"            String userEmail, boolean isInstructor, boolean isGiverName, CourseRoster roster) {"},{"lineNumber":242,"author":{"gitId":"-"},"content":"        List\u003cFeedbackParticipantType\u003e showNameTo \u003d isGiverName"},{"lineNumber":243,"author":{"gitId":"-"},"content":"                                                 ? question.getShowGiverNameTo()"},{"lineNumber":244,"author":{"gitId":"-"},"content":"                                                 : question.getShowRecipientNameTo();"},{"lineNumber":245,"author":{"gitId":"-"},"content":"        for (FeedbackParticipantType type : showNameTo) {"},{"lineNumber":246,"author":{"gitId":"-"},"content":"            switch (type) {"},{"lineNumber":247,"author":{"gitId":"-"},"content":"            case INSTRUCTORS:"},{"lineNumber":248,"author":{"gitId":"-"},"content":"                if (roster.getInstructorForEmail(userEmail) !\u003d null \u0026\u0026 isInstructor) {"},{"lineNumber":249,"author":{"gitId":"-"},"content":"                    return true;"},{"lineNumber":250,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":251,"author":{"gitId":"-"},"content":"                break;"},{"lineNumber":252,"author":{"gitId":"-"},"content":"            case OWN_TEAM_MEMBERS:"},{"lineNumber":253,"author":{"gitId":"-"},"content":"            case OWN_TEAM_MEMBERS_INCLUDING_SELF:"},{"lineNumber":254,"author":{"gitId":"-"},"content":"                // Refers to Giver\u0027s Team Members"},{"lineNumber":255,"author":{"gitId":"-"},"content":"                if (roster.isStudentsInSameTeam(response.getGiver(), userEmail)) {"},{"lineNumber":256,"author":{"gitId":"-"},"content":"                    return true;"},{"lineNumber":257,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":258,"author":{"gitId":"-"},"content":"                break;"},{"lineNumber":259,"author":{"gitId":"-"},"content":"            case RECEIVER:"},{"lineNumber":260,"author":{"gitId":"-"},"content":"                // Response to team"},{"lineNumber":261,"author":{"gitId":"-"},"content":"                if (question.getRecipientType().isTeam()) {"},{"lineNumber":262,"author":{"gitId":"-"},"content":"                    if (roster.isStudentInTeam(userEmail, response.getRecipient())) {"},{"lineNumber":263,"author":{"gitId":"-"},"content":"                        // this is a team name"},{"lineNumber":264,"author":{"gitId":"-"},"content":"                        return true;"},{"lineNumber":265,"author":{"gitId":"-"},"content":"                    }"},{"lineNumber":266,"author":{"gitId":"-"},"content":"                    break;"},{"lineNumber":267,"author":{"gitId":"-"},"content":"                    // Response to individual"},{"lineNumber":268,"author":{"gitId":"-"},"content":"                } else if (response.getRecipient().equals(userEmail)) {"},{"lineNumber":269,"author":{"gitId":"-"},"content":"                    return true;"},{"lineNumber":270,"author":{"gitId":"-"},"content":"                } else {"},{"lineNumber":271,"author":{"gitId":"-"},"content":"                    break;"},{"lineNumber":272,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":273,"author":{"gitId":"-"},"content":"            case RECEIVER_TEAM_MEMBERS:"},{"lineNumber":274,"author":{"gitId":"-"},"content":"                // Response to team; recipient \u003d teamName"},{"lineNumber":275,"author":{"gitId":"-"},"content":"                if (question.getRecipientType().isTeam()) {"},{"lineNumber":276,"author":{"gitId":"-"},"content":"                    if (roster.isStudentInTeam(userEmail, response.getRecipient())) {"},{"lineNumber":277,"author":{"gitId":"-"},"content":"                        // this is a team name"},{"lineNumber":278,"author":{"gitId":"-"},"content":"                        return true;"},{"lineNumber":279,"author":{"gitId":"-"},"content":"                    }"},{"lineNumber":280,"author":{"gitId":"-"},"content":"                    break;"},{"lineNumber":281,"author":{"gitId":"-"},"content":"                } else if (roster.isStudentsInSameTeam(response.getRecipient(), userEmail)) {"},{"lineNumber":282,"author":{"gitId":"-"},"content":"                    // Response to individual"},{"lineNumber":283,"author":{"gitId":"-"},"content":"                    return true;"},{"lineNumber":284,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":285,"author":{"gitId":"-"},"content":"                break;"},{"lineNumber":286,"author":{"gitId":"-"},"content":"            case STUDENTS:"},{"lineNumber":287,"author":{"gitId":"-"},"content":"                if (roster.isStudentInCourse(userEmail)) {"},{"lineNumber":288,"author":{"gitId":"-"},"content":"                    return true;"},{"lineNumber":289,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":290,"author":{"gitId":"-"},"content":"                break;"},{"lineNumber":291,"author":{"gitId":"-"},"content":"            default:"},{"lineNumber":292,"author":{"gitId":"-"},"content":"                assert false : \"Invalid FeedbackParticipantType for showNameTo in \""},{"lineNumber":293,"author":{"gitId":"-"},"content":"                        + \"FeedbackResponseLogic.isFeedbackParticipantNameVisibleToUser()\";"},{"lineNumber":294,"author":{"gitId":"-"},"content":"                break;"},{"lineNumber":295,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":296,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":297,"author":{"gitId":"-"},"content":"        return false;"},{"lineNumber":298,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":299,"author":{"gitId":"-"},"content":""},{"lineNumber":300,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":301,"author":{"gitId":"-"},"content":"     * Returns true if the responses of the question are visible to students."},{"lineNumber":302,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":303,"author":{"gitId":"-"},"content":"    public boolean isResponseOfFeedbackQuestionVisibleToStudent(FeedbackQuestionAttributes question) {"},{"lineNumber":304,"author":{"gitId":"-"},"content":"        if (question.isResponseVisibleTo(FeedbackParticipantType.STUDENTS)) {"},{"lineNumber":305,"author":{"gitId":"-"},"content":"            return true;"},{"lineNumber":306,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":307,"author":{"gitId":"-"},"content":"        boolean isStudentRecipientType \u003d"},{"lineNumber":308,"author":{"gitId":"-"},"content":"                   question.getRecipientType().equals(FeedbackParticipantType.STUDENTS)"},{"lineNumber":309,"author":{"gitId":"-"},"content":"                || question.getRecipientType().equals(FeedbackParticipantType.STUDENTS_EXCLUDING_SELF)"},{"lineNumber":310,"author":{"gitId":"-"},"content":"                || question.getRecipientType().equals(FeedbackParticipantType.STUDENTS_IN_SAME_SECTION)"},{"lineNumber":311,"author":{"gitId":"-"},"content":"                || question.getRecipientType().equals(FeedbackParticipantType.OWN_TEAM_MEMBERS)"},{"lineNumber":312,"author":{"gitId":"-"},"content":"                || question.getRecipientType().equals(FeedbackParticipantType.OWN_TEAM_MEMBERS_INCLUDING_SELF)"},{"lineNumber":313,"author":{"gitId":"-"},"content":"                || question.getRecipientType().equals(FeedbackParticipantType.GIVER)"},{"lineNumber":314,"author":{"gitId":"-"},"content":"                   \u0026\u0026 question.getGiverType().equals(FeedbackParticipantType.STUDENTS);"},{"lineNumber":315,"author":{"gitId":"-"},"content":""},{"lineNumber":316,"author":{"gitId":"-"},"content":"        if ((isStudentRecipientType || question.getRecipientType().isTeam())"},{"lineNumber":317,"author":{"gitId":"-"},"content":"                \u0026\u0026 question.isResponseVisibleTo(FeedbackParticipantType.RECEIVER)) {"},{"lineNumber":318,"author":{"gitId":"-"},"content":"            return true;"},{"lineNumber":319,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":320,"author":{"gitId":"-"},"content":"        if (question.getGiverType() \u003d\u003d FeedbackParticipantType.TEAMS"},{"lineNumber":321,"author":{"gitId":"-"},"content":"                || question.isResponseVisibleTo(FeedbackParticipantType.OWN_TEAM_MEMBERS)) {"},{"lineNumber":322,"author":{"gitId":"-"},"content":"            return true;"},{"lineNumber":323,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":324,"author":{"gitId":"-"},"content":"        return question.isResponseVisibleTo(FeedbackParticipantType.RECEIVER_TEAM_MEMBERS);"},{"lineNumber":325,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":326,"author":{"gitId":"-"},"content":""},{"lineNumber":327,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":328,"author":{"gitId":"-"},"content":"     * Returns true if the responses of the question are visible to instructors."},{"lineNumber":329,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":330,"author":{"gitId":"-"},"content":"    public boolean isResponseOfFeedbackQuestionVisibleToInstructor(FeedbackQuestionAttributes question) {"},{"lineNumber":331,"author":{"gitId":"-"},"content":"        return question.isResponseVisibleTo(FeedbackParticipantType.INSTRUCTORS);"},{"lineNumber":332,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":333,"author":{"gitId":"-"},"content":""},{"lineNumber":334,"author":{"gitId":"-"},"content":"    private List\u003cFeedbackQuestionAttributes\u003e getQuestionsForSession("},{"lineNumber":335,"author":{"gitId":"-"},"content":"            String feedbackSessionName, String courseId, @Nullable String questionId) {"},{"lineNumber":336,"author":{"gitId":"-"},"content":"        if (questionId \u003d\u003d null) {"},{"lineNumber":337,"author":{"gitId":"-"},"content":"            return fqLogic.getFeedbackQuestionsForSession(feedbackSessionName, courseId);"},{"lineNumber":338,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":339,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fqa \u003d fqLogic.getFeedbackQuestion(questionId);"},{"lineNumber":340,"author":{"gitId":"-"},"content":"        return fqa \u003d\u003d null ? Collections.emptyList() : Collections.singletonList(fqa);"},{"lineNumber":341,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":342,"author":{"gitId":"-"},"content":""},{"lineNumber":343,"author":{"gitId":"-"},"content":"    private SessionResultsBundle buildResultsBundle("},{"lineNumber":344,"author":{"gitId":"-"},"content":"            boolean isCourseWide, String feedbackSessionName, String courseId, String section, String questionId,"},{"lineNumber":345,"author":{"gitId":"-"},"content":"            boolean isInstructor, String userEmail, InstructorAttributes instructor, StudentAttributes student,"},{"lineNumber":346,"author":{"gitId":"-"},"content":"            CourseRoster roster, List\u003cFeedbackQuestionAttributes\u003e allQuestions,"},{"lineNumber":347,"author":{"gitId":"-"},"content":"            List\u003cFeedbackResponseAttributes\u003e allResponses, boolean isPreviewResults) {"},{"lineNumber":348,"author":{"gitId":"-"},"content":"        Map\u003cString, FeedbackQuestionAttributes\u003e allQuestionsMap \u003d new HashMap\u003c\u003e();"},{"lineNumber":349,"author":{"gitId":"-"},"content":"        Set\u003cString\u003e questionsNotVisibleToInstructors \u003d new HashSet\u003c\u003e();"},{"lineNumber":350,"author":{"gitId":"-"},"content":"        for (FeedbackQuestionAttributes qn : allQuestions) {"},{"lineNumber":351,"author":{"gitId":"-"},"content":"            allQuestionsMap.put(qn.getId(), qn);"},{"lineNumber":352,"author":{"gitId":"-"},"content":""},{"lineNumber":353,"author":{"gitId":"-"},"content":"            // set questions that should not be visible to instructors if results are being previewed"},{"lineNumber":354,"author":{"gitId":"-"},"content":"            if (isPreviewResults \u0026\u0026 !canInstructorsSeeQuestion(qn)) {"},{"lineNumber":355,"author":{"gitId":"-"},"content":"                questionsNotVisibleToInstructors.add(qn.getId());"},{"lineNumber":356,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":357,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":358,"author":{"gitId":"-"},"content":""},{"lineNumber":359,"author":{"gitId":"-"},"content":"        // load comment(s)"},{"lineNumber":360,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseCommentAttributes\u003e allComments;"},{"lineNumber":361,"author":{"gitId":"-"},"content":"        if (questionId \u003d\u003d null) {"},{"lineNumber":362,"author":{"gitId":"-"},"content":"            allComments \u003d frcLogic.getFeedbackResponseCommentForSessionInSection(courseId, feedbackSessionName, section);"},{"lineNumber":363,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":364,"author":{"gitId":"-"},"content":"            allComments \u003d frcLogic.getFeedbackResponseCommentForQuestionInSection(questionId, section);"},{"lineNumber":365,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":366,"author":{"gitId":"-"},"content":"        RequestTracer.checkRemainingTime();"},{"lineNumber":367,"author":{"gitId":"-"},"content":""},{"lineNumber":368,"author":{"gitId":"-"},"content":"        // related questions, responses, and comment"},{"lineNumber":369,"author":{"gitId":"-"},"content":"        Map\u003cString, FeedbackQuestionAttributes\u003e relatedQuestionsMap \u003d new HashMap\u003c\u003e();"},{"lineNumber":370,"author":{"gitId":"-"},"content":"        Map\u003cString, FeedbackQuestionAttributes\u003e relatedQuestionsNotVisibleForPreviewMap \u003d new HashMap\u003c\u003e();"},{"lineNumber":371,"author":{"gitId":"-"},"content":"        Set\u003cString\u003e relatedQuestionsWithCommentNotVisibleForPreview \u003d new HashSet\u003c\u003e();"},{"lineNumber":372,"author":{"gitId":"-"},"content":"        Map\u003cString, FeedbackResponseAttributes\u003e relatedResponsesMap \u003d new HashMap\u003c\u003e();"},{"lineNumber":373,"author":{"gitId":"-"},"content":"        Map\u003cString, List\u003cFeedbackResponseCommentAttributes\u003e\u003e relatedCommentsMap \u003d new HashMap\u003c\u003e();"},{"lineNumber":374,"author":{"gitId":"-"},"content":"        if (isCourseWide) {"},{"lineNumber":375,"author":{"gitId":"-"},"content":"            // all questions are related questions when viewing course-wide result"},{"lineNumber":376,"author":{"gitId":"-"},"content":"            for (FeedbackQuestionAttributes qn : allQuestions) {"},{"lineNumber":377,"author":{"gitId":"-"},"content":"                relatedQuestionsMap.put(qn.getId(), qn);"},{"lineNumber":378,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":379,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":380,"author":{"gitId":"-"},"content":""},{"lineNumber":381,"author":{"gitId":"-"},"content":"        Set\u003cString\u003e studentsEmailInTeam \u003d new HashSet\u003c\u003e();"},{"lineNumber":382,"author":{"gitId":"-"},"content":"        if (student !\u003d null) {"},{"lineNumber":383,"author":{"gitId":"-"},"content":"            for (StudentAttributes studentInTeam"},{"lineNumber":384,"author":{"gitId":"-"},"content":"                    : roster.getTeamToMembersTable().getOrDefault(student.getTeam(), Collections.emptyList())) {"},{"lineNumber":385,"author":{"gitId":"-"},"content":"                studentsEmailInTeam.add(studentInTeam.getEmail());"},{"lineNumber":386,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":387,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":388,"author":{"gitId":"-"},"content":""},{"lineNumber":389,"author":{"gitId":"-"},"content":"        // visibility table for each response and comment"},{"lineNumber":390,"author":{"gitId":"-"},"content":"        Map\u003cString, Boolean\u003e responseGiverVisibilityTable \u003d new HashMap\u003c\u003e();"},{"lineNumber":391,"author":{"gitId":"-"},"content":"        Map\u003cString, Boolean\u003e responseRecipientVisibilityTable \u003d new HashMap\u003c\u003e();"},{"lineNumber":392,"author":{"gitId":"-"},"content":"        Map\u003cLong, Boolean\u003e commentVisibilityTable \u003d new HashMap\u003c\u003e();"},{"lineNumber":393,"author":{"gitId":"-"},"content":""},{"lineNumber":394,"author":{"gitId":"-"},"content":"        // build response"},{"lineNumber":395,"author":{"gitId":"-"},"content":"        for (FeedbackResponseAttributes response : allResponses) {"},{"lineNumber":396,"author":{"gitId":"-"},"content":"            if (isPreviewResults"},{"lineNumber":397,"author":{"gitId":"-"},"content":"                    \u0026\u0026 relatedQuestionsNotVisibleForPreviewMap.get(response.getFeedbackQuestionId()) !\u003d null) {"},{"lineNumber":398,"author":{"gitId":"-"},"content":"                // corresponding question\u0027s responses will not be shown to previewer, ignore the response"},{"lineNumber":399,"author":{"gitId":"-"},"content":"                continue;"},{"lineNumber":400,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":401,"author":{"gitId":"-"},"content":""},{"lineNumber":402,"author":{"gitId":"-"},"content":"            FeedbackQuestionAttributes correspondingQuestion \u003d allQuestionsMap.get(response.getFeedbackQuestionId());"},{"lineNumber":403,"author":{"gitId":"-"},"content":"            if (correspondingQuestion \u003d\u003d null) {"},{"lineNumber":404,"author":{"gitId":"-"},"content":"                // orphan response without corresponding question, ignore it"},{"lineNumber":405,"author":{"gitId":"-"},"content":"                continue;"},{"lineNumber":406,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":407,"author":{"gitId":"-"},"content":"            // check visibility of response"},{"lineNumber":408,"author":{"gitId":"-"},"content":"            boolean isVisibleResponse \u003d isResponseVisibleForUser("},{"lineNumber":409,"author":{"gitId":"-"},"content":"                    userEmail, isInstructor, student, studentsEmailInTeam, response, correspondingQuestion, instructor);"},{"lineNumber":410,"author":{"gitId":"-"},"content":"            if (!isVisibleResponse) {"},{"lineNumber":411,"author":{"gitId":"-"},"content":"                continue;"},{"lineNumber":412,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":413,"author":{"gitId":"-"},"content":""},{"lineNumber":414,"author":{"gitId":"-"},"content":"            // if previewing results and corresponding question should not be visible to instructors,"},{"lineNumber":415,"author":{"gitId":"-"},"content":"            // note down the question and do not add the response"},{"lineNumber":416,"author":{"gitId":"-"},"content":"            if (isPreviewResults \u0026\u0026 questionsNotVisibleToInstructors.contains(response.getFeedbackQuestionId())) {"},{"lineNumber":417,"author":{"gitId":"-"},"content":"                relatedQuestionsNotVisibleForPreviewMap.put(response.getFeedbackQuestionId(), correspondingQuestion);"},{"lineNumber":418,"author":{"gitId":"-"},"content":"                continue;"},{"lineNumber":419,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":420,"author":{"gitId":"-"},"content":""},{"lineNumber":421,"author":{"gitId":"-"},"content":"            // if there are viewable responses, the corresponding question becomes related"},{"lineNumber":422,"author":{"gitId":"-"},"content":"            relatedQuestionsMap.put(response.getFeedbackQuestionId(), correspondingQuestion);"},{"lineNumber":423,"author":{"gitId":"-"},"content":"            relatedResponsesMap.put(response.getId(), response);"},{"lineNumber":424,"author":{"gitId":"-"},"content":"            // generate giver/recipient name visibility table"},{"lineNumber":425,"author":{"gitId":"-"},"content":"            responseGiverVisibilityTable.put(response.getId(),"},{"lineNumber":426,"author":{"gitId":"-"},"content":"                    isNameVisibleToUser(correspondingQuestion, response, userEmail, isInstructor, true, roster));"},{"lineNumber":427,"author":{"gitId":"-"},"content":"            responseRecipientVisibilityTable.put(response.getId(),"},{"lineNumber":428,"author":{"gitId":"-"},"content":"                    isNameVisibleToUser(correspondingQuestion, response, userEmail, isInstructor, false, roster));"},{"lineNumber":429,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":430,"author":{"gitId":"-"},"content":"        RequestTracer.checkRemainingTime();"},{"lineNumber":431,"author":{"gitId":"-"},"content":""},{"lineNumber":432,"author":{"gitId":"-"},"content":"        // build comment"},{"lineNumber":433,"author":{"gitId":"-"},"content":"        for (FeedbackResponseCommentAttributes frc : allComments) {"},{"lineNumber":434,"author":{"gitId":"-"},"content":"            FeedbackResponseAttributes relatedResponse \u003d relatedResponsesMap.get(frc.getFeedbackResponseId());"},{"lineNumber":435,"author":{"gitId":"-"},"content":"            FeedbackQuestionAttributes relatedQuestion \u003d relatedQuestionsMap.get(frc.getFeedbackQuestionId());"},{"lineNumber":436,"author":{"gitId":"-"},"content":"            // the comment needs to be relevant to the question and response"},{"lineNumber":437,"author":{"gitId":"-"},"content":"            if (relatedQuestion \u003d\u003d null || relatedResponse \u003d\u003d null) {"},{"lineNumber":438,"author":{"gitId":"-"},"content":"                continue;"},{"lineNumber":439,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":440,"author":{"gitId":"-"},"content":"            // check visibility of comment"},{"lineNumber":441,"author":{"gitId":"-"},"content":"            boolean isVisibleResponseComment \u003d frcLogic.isResponseCommentVisibleForUser("},{"lineNumber":442,"author":{"gitId":"-"},"content":"                    userEmail, isInstructor, student, studentsEmailInTeam, relatedResponse, relatedQuestion, frc);"},{"lineNumber":443,"author":{"gitId":"-"},"content":"            if (!isVisibleResponseComment) {"},{"lineNumber":444,"author":{"gitId":"-"},"content":"                continue;"},{"lineNumber":445,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":446,"author":{"gitId":"-"},"content":""},{"lineNumber":447,"author":{"gitId":"-"},"content":"            // if previewing results and the comment should not be visible to instructors,"},{"lineNumber":448,"author":{"gitId":"-"},"content":"            // note down the corresponding question and do not add the comment"},{"lineNumber":449,"author":{"gitId":"-"},"content":"            if (isPreviewResults \u0026\u0026 !canInstructorsSeeComment(frc)) {"},{"lineNumber":450,"author":{"gitId":"-"},"content":"                relatedQuestionsWithCommentNotVisibleForPreview.add(frc.getFeedbackQuestionId());"},{"lineNumber":451,"author":{"gitId":"-"},"content":"                continue;"},{"lineNumber":452,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":453,"author":{"gitId":"-"},"content":""},{"lineNumber":454,"author":{"gitId":"-"},"content":"            relatedCommentsMap.computeIfAbsent(relatedResponse.getId(), key -\u003e new ArrayList\u003c\u003e()).add(frc);"},{"lineNumber":455,"author":{"gitId":"-"},"content":"            // generate comment giver name visibility table"},{"lineNumber":456,"author":{"gitId":"-"},"content":"            commentVisibilityTable.put(frc.getId(), frcLogic.isNameVisibleToUser(frc, relatedResponse, userEmail, roster));"},{"lineNumber":457,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":458,"author":{"gitId":"-"},"content":"        RequestTracer.checkRemainingTime();"},{"lineNumber":459,"author":{"gitId":"-"},"content":""},{"lineNumber":460,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e existingResponses \u003d new ArrayList\u003c\u003e(relatedResponsesMap.values());"},{"lineNumber":461,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e missingResponses \u003d Collections.emptyList();"},{"lineNumber":462,"author":{"gitId":"-"},"content":"        if (isCourseWide) {"},{"lineNumber":463,"author":{"gitId":"-"},"content":"            missingResponses \u003d buildMissingResponses("},{"lineNumber":464,"author":{"gitId":"-"},"content":"                    courseId, feedbackSessionName, instructor, responseGiverVisibilityTable,"},{"lineNumber":465,"author":{"gitId":"-"},"content":"                    responseRecipientVisibilityTable, relatedQuestionsMap, existingResponses, roster, section);"},{"lineNumber":466,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":467,"author":{"gitId":"-"},"content":"        RequestTracer.checkRemainingTime();"},{"lineNumber":468,"author":{"gitId":"-"},"content":""},{"lineNumber":469,"author":{"gitId":"-"},"content":"        return new SessionResultsBundle(relatedQuestionsMap, relatedQuestionsNotVisibleForPreviewMap,"},{"lineNumber":470,"author":{"gitId":"-"},"content":"                relatedQuestionsWithCommentNotVisibleForPreview,"},{"lineNumber":471,"author":{"gitId":"-"},"content":"                existingResponses, missingResponses, responseGiverVisibilityTable, responseRecipientVisibilityTable,"},{"lineNumber":472,"author":{"gitId":"-"},"content":"                relatedCommentsMap, commentVisibilityTable, roster);"},{"lineNumber":473,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":474,"author":{"gitId":"-"},"content":""},{"lineNumber":475,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":476,"author":{"gitId":"-"},"content":"     * Gets the session result for a feedback session."},{"lineNumber":477,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":478,"author":{"gitId":"-"},"content":"     * @param feedbackSessionName the feedback session name"},{"lineNumber":479,"author":{"gitId":"-"},"content":"     * @param courseId the ID of the course"},{"lineNumber":480,"author":{"gitId":"-"},"content":"     * @param instructorEmail the instructor viewing the feedback session"},{"lineNumber":481,"author":{"gitId":"-"},"content":"     * @param questionId if not null, will only return partial bundle for the question"},{"lineNumber":482,"author":{"gitId":"-"},"content":"     * @param section if not null, will only return partial bundle for the section"},{"lineNumber":483,"author":{"gitId":"-"},"content":"     * @param fetchType if not null, will fetch responses by giver, receiver sections, or both"},{"lineNumber":484,"author":{"gitId":"-"},"content":"     * @return the session result bundle"},{"lineNumber":485,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":486,"author":{"gitId":"-"},"content":"    public SessionResultsBundle getSessionResultsForCourse("},{"lineNumber":487,"author":{"gitId":"-"},"content":"            String feedbackSessionName, String courseId, String instructorEmail,"},{"lineNumber":488,"author":{"gitId":"-"},"content":"            @Nullable String questionId, @Nullable String section, @Nullable FeedbackResultFetchType fetchType) {"},{"lineNumber":489,"author":{"gitId":"-"},"content":"        CourseRoster roster \u003d new CourseRoster("},{"lineNumber":490,"author":{"gitId":"-"},"content":"                studentsLogic.getStudentsForCourse(courseId),"},{"lineNumber":491,"author":{"gitId":"-"},"content":"                instructorsLogic.getInstructorsForCourse(courseId));"},{"lineNumber":492,"author":{"gitId":"-"},"content":""},{"lineNumber":493,"author":{"gitId":"-"},"content":"        // load question(s)"},{"lineNumber":494,"author":{"gitId":"-"},"content":"        List\u003cFeedbackQuestionAttributes\u003e allQuestions \u003d getQuestionsForSession(feedbackSessionName, courseId, questionId);"},{"lineNumber":495,"author":{"gitId":"-"},"content":"        RequestTracer.checkRemainingTime();"},{"lineNumber":496,"author":{"gitId":"-"},"content":""},{"lineNumber":497,"author":{"gitId":"-"},"content":"        // load response(s)"},{"lineNumber":498,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e allResponses;"},{"lineNumber":499,"author":{"gitId":"-"},"content":"        // load all response for instructors and passively filter them later"},{"lineNumber":500,"author":{"gitId":"-"},"content":"        if (questionId \u003d\u003d null) {"},{"lineNumber":501,"author":{"gitId":"-"},"content":"            allResponses \u003d getFeedbackResponsesForSessionInSection(feedbackSessionName, courseId, section, fetchType);"},{"lineNumber":502,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":503,"author":{"gitId":"-"},"content":"            allResponses \u003d getFeedbackResponsesForQuestionInSection(questionId, section, fetchType);"},{"lineNumber":504,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":505,"author":{"gitId":"-"},"content":"        RequestTracer.checkRemainingTime();"},{"lineNumber":506,"author":{"gitId":"-"},"content":""},{"lineNumber":507,"author":{"gitId":"-"},"content":"        // consider the current viewing user"},{"lineNumber":508,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor \u003d instructorsLogic.getInstructorForEmail(courseId, instructorEmail);"},{"lineNumber":509,"author":{"gitId":"-"},"content":""},{"lineNumber":510,"author":{"gitId":"-"},"content":"        return buildResultsBundle(true, feedbackSessionName, courseId, section, questionId, true, instructorEmail,"},{"lineNumber":511,"author":{"gitId":"-"},"content":"                instructor, null, roster, allQuestions, allResponses, false);"},{"lineNumber":512,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":513,"author":{"gitId":"-"},"content":""},{"lineNumber":514,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":515,"author":{"gitId":"-"},"content":"     * Gets the session result for a feedback session for the given user."},{"lineNumber":516,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":517,"author":{"gitId":"-"},"content":"     * @param feedbackSessionName the feedback session name"},{"lineNumber":518,"author":{"gitId":"-"},"content":"     * @param courseId the ID of the course"},{"lineNumber":519,"author":{"gitId":"-"},"content":"     * @param userEmail the user viewing the feedback session"},{"lineNumber":520,"author":{"gitId":"-"},"content":"     * @param isInstructor true if the user is an instructor"},{"lineNumber":521,"author":{"gitId":"-"},"content":"     * @param questionId if not null, will only return partial bundle for the question"},{"lineNumber":522,"author":{"gitId":"-"},"content":"     * @param isPreviewResults true if getting session results for preview purpose"},{"lineNumber":523,"author":{"gitId":"-"},"content":"     * @return the session result bundle"},{"lineNumber":524,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":525,"author":{"gitId":"-"},"content":"    public SessionResultsBundle getSessionResultsForUser("},{"lineNumber":526,"author":{"gitId":"-"},"content":"            String feedbackSessionName, String courseId, String userEmail, boolean isInstructor,"},{"lineNumber":527,"author":{"gitId":"-"},"content":"            @Nullable String questionId, boolean isPreviewResults) {"},{"lineNumber":528,"author":{"gitId":"-"},"content":"        CourseRoster roster \u003d new CourseRoster("},{"lineNumber":529,"author":{"gitId":"-"},"content":"                studentsLogic.getStudentsForCourse(courseId),"},{"lineNumber":530,"author":{"gitId":"-"},"content":"                instructorsLogic.getInstructorsForCourse(courseId));"},{"lineNumber":531,"author":{"gitId":"-"},"content":""},{"lineNumber":532,"author":{"gitId":"-"},"content":"        // load question(s)"},{"lineNumber":533,"author":{"gitId":"-"},"content":"        List\u003cFeedbackQuestionAttributes\u003e allQuestions \u003d getQuestionsForSession(feedbackSessionName, courseId, questionId);"},{"lineNumber":534,"author":{"gitId":"-"},"content":"        RequestTracer.checkRemainingTime();"},{"lineNumber":535,"author":{"gitId":"-"},"content":""},{"lineNumber":536,"author":{"gitId":"-"},"content":"        // load response(s)"},{"lineNumber":537,"author":{"gitId":"-"},"content":"        StudentAttributes student \u003d isInstructor ? null : studentsLogic.getStudentForEmail(courseId, userEmail);"},{"lineNumber":538,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor \u003d isInstructor ? instructorsLogic.getInstructorForEmail(courseId, userEmail) : null;"},{"lineNumber":539,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e allResponses \u003d new ArrayList\u003c\u003e();"},{"lineNumber":540,"author":{"gitId":"-"},"content":"        for (FeedbackQuestionAttributes question : allQuestions) {"},{"lineNumber":541,"author":{"gitId":"-"},"content":"            // load viewable responses for students/instructors proactively"},{"lineNumber":542,"author":{"gitId":"-"},"content":"            // this is cost-effective as in most of time responses for the whole session will not be viewable to individuals"},{"lineNumber":543,"author":{"gitId":"-"},"content":"            List\u003cFeedbackResponseAttributes\u003e viewableResponses \u003d isInstructor"},{"lineNumber":544,"author":{"gitId":"-"},"content":"                    ? getFeedbackResponsesToOrFromInstructorForQuestion(question, instructor)"},{"lineNumber":545,"author":{"gitId":"-"},"content":"                    : getViewableFeedbackResponsesForStudentForQuestion(question, student, roster);"},{"lineNumber":546,"author":{"gitId":"-"},"content":"            allResponses.addAll(viewableResponses);"},{"lineNumber":547,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":548,"author":{"gitId":"-"},"content":"        RequestTracer.checkRemainingTime();"},{"lineNumber":549,"author":{"gitId":"-"},"content":""},{"lineNumber":550,"author":{"gitId":"-"},"content":"        return buildResultsBundle(false, feedbackSessionName, courseId, null, questionId, isInstructor, userEmail,"},{"lineNumber":551,"author":{"gitId":"-"},"content":"                instructor, student, roster, allQuestions, allResponses, isPreviewResults);"},{"lineNumber":552,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":553,"author":{"gitId":"-"},"content":""},{"lineNumber":554,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":555,"author":{"gitId":"-"},"content":"     * Builds viewable missing responses for the session for instructor."},{"lineNumber":556,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":557,"author":{"gitId":"-"},"content":"     * @param instructor the instructor"},{"lineNumber":558,"author":{"gitId":"-"},"content":"     * @param responseGiverVisibilityTable"},{"lineNumber":559,"author":{"gitId":"-"},"content":"     *         the giver visibility table which will be updated with the visibility of missing responses"},{"lineNumber":560,"author":{"gitId":"-"},"content":"     * @param responseRecipientVisibilityTable"},{"lineNumber":561,"author":{"gitId":"-"},"content":"     *         the recipient visibility table which will be updated with the visibility of missing responses"},{"lineNumber":562,"author":{"gitId":"-"},"content":"     * @param relatedQuestionsMap the relevant questions"},{"lineNumber":563,"author":{"gitId":"-"},"content":"     * @param existingResponses existing responses"},{"lineNumber":564,"author":{"gitId":"-"},"content":"     * @param courseRoster the course roster"},{"lineNumber":565,"author":{"gitId":"-"},"content":"     * @param section if not null, will only build missing responses for the section"},{"lineNumber":566,"author":{"gitId":"-"},"content":"     * @return a list of missing responses for the session."},{"lineNumber":567,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":568,"author":{"gitId":"-"},"content":"    private List\u003cFeedbackResponseAttributes\u003e buildMissingResponses("},{"lineNumber":569,"author":{"gitId":"-"},"content":"            String courseId, String feedbackSessionName, InstructorAttributes instructor,"},{"lineNumber":570,"author":{"gitId":"-"},"content":"            Map\u003cString, Boolean\u003e responseGiverVisibilityTable, Map\u003cString, Boolean\u003e responseRecipientVisibilityTable,"},{"lineNumber":571,"author":{"gitId":"-"},"content":"            Map\u003cString, FeedbackQuestionAttributes\u003e relatedQuestionsMap,"},{"lineNumber":572,"author":{"gitId":"-"},"content":"            List\u003cFeedbackResponseAttributes\u003e existingResponses, CourseRoster courseRoster, @Nullable String section) {"},{"lineNumber":573,"author":{"gitId":"-"},"content":""},{"lineNumber":574,"author":{"gitId":"-"},"content":"        // first get all possible giver recipient pairs"},{"lineNumber":575,"author":{"gitId":"-"},"content":"        Map\u003cString, Map\u003cString, Set\u003cString\u003e\u003e\u003e questionCompleteGiverRecipientMap \u003d new HashMap\u003c\u003e();"},{"lineNumber":576,"author":{"gitId":"-"},"content":"        for (FeedbackQuestionAttributes feedbackQuestion : relatedQuestionsMap.values()) {"},{"lineNumber":577,"author":{"gitId":"-"},"content":"            if (feedbackQuestion.getQuestionDetailsCopy().shouldGenerateMissingResponses(feedbackQuestion)) {"},{"lineNumber":578,"author":{"gitId":"-"},"content":"                questionCompleteGiverRecipientMap.put(feedbackQuestion.getId(),"},{"lineNumber":579,"author":{"gitId":"-"},"content":"                        fqLogic.buildCompleteGiverRecipientMap(feedbackQuestion, courseRoster));"},{"lineNumber":580,"author":{"gitId":"-"},"content":"            } else {"},{"lineNumber":581,"author":{"gitId":"-"},"content":"                questionCompleteGiverRecipientMap.put(feedbackQuestion.getId(), new HashMap\u003c\u003e());"},{"lineNumber":582,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":583,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":584,"author":{"gitId":"-"},"content":""},{"lineNumber":585,"author":{"gitId":"-"},"content":"        // remove the existing responses in those pairs"},{"lineNumber":586,"author":{"gitId":"-"},"content":"        for (FeedbackResponseAttributes existingResponse : existingResponses) {"},{"lineNumber":587,"author":{"gitId":"-"},"content":"            Map\u003cString, Set\u003cString\u003e\u003e currGiverRecipientMap \u003d"},{"lineNumber":588,"author":{"gitId":"-"},"content":"                    questionCompleteGiverRecipientMap.get(existingResponse.getFeedbackQuestionId());"},{"lineNumber":589,"author":{"gitId":"-"},"content":"            if (!currGiverRecipientMap.containsKey(existingResponse.getGiver())) {"},{"lineNumber":590,"author":{"gitId":"-"},"content":"                continue;"},{"lineNumber":591,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":592,"author":{"gitId":"-"},"content":"            currGiverRecipientMap.get(existingResponse.getGiver()).remove(existingResponse.getRecipient());"},{"lineNumber":593,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":594,"author":{"gitId":"-"},"content":""},{"lineNumber":595,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e missingResponses \u003d new ArrayList\u003c\u003e();"},{"lineNumber":596,"author":{"gitId":"-"},"content":"        // build dummy responses"},{"lineNumber":597,"author":{"gitId":"-"},"content":"        for (Map.Entry\u003cString, Map\u003cString, Set\u003cString\u003e\u003e\u003e currGiverRecipientMapEntry"},{"lineNumber":598,"author":{"gitId":"-"},"content":"                : questionCompleteGiverRecipientMap.entrySet()) {"},{"lineNumber":599,"author":{"gitId":"-"},"content":"            FeedbackQuestionAttributes correspondingQuestion \u003d"},{"lineNumber":600,"author":{"gitId":"-"},"content":"                    relatedQuestionsMap.get(currGiverRecipientMapEntry.getKey());"},{"lineNumber":601,"author":{"gitId":"-"},"content":"            String questionId \u003d correspondingQuestion.getId();"},{"lineNumber":602,"author":{"gitId":"-"},"content":""},{"lineNumber":603,"author":{"gitId":"-"},"content":"            for (Map.Entry\u003cString, Set\u003cString\u003e\u003e giverRecipientEntry"},{"lineNumber":604,"author":{"gitId":"-"},"content":"                    : currGiverRecipientMapEntry.getValue().entrySet()) {"},{"lineNumber":605,"author":{"gitId":"-"},"content":"                // giver"},{"lineNumber":606,"author":{"gitId":"-"},"content":"                String giverIdentifier \u003d giverRecipientEntry.getKey();"},{"lineNumber":607,"author":{"gitId":"-"},"content":"                CourseRoster.ParticipantInfo giverInfo \u003d courseRoster.getInfoForIdentifier(giverIdentifier);"},{"lineNumber":608,"author":{"gitId":"-"},"content":""},{"lineNumber":609,"author":{"gitId":"-"},"content":"                for (String recipientIdentifier : giverRecipientEntry.getValue()) {"},{"lineNumber":610,"author":{"gitId":"-"},"content":"                    // recipient"},{"lineNumber":611,"author":{"gitId":"-"},"content":"                    CourseRoster.ParticipantInfo recipientInfo \u003d courseRoster.getInfoForIdentifier(recipientIdentifier);"},{"lineNumber":612,"author":{"gitId":"-"},"content":""},{"lineNumber":613,"author":{"gitId":"-"},"content":"                    // skip responses not in current section"},{"lineNumber":614,"author":{"gitId":"-"},"content":"                    if (section !\u003d null"},{"lineNumber":615,"author":{"gitId":"-"},"content":"                            \u0026\u0026 !giverInfo.getSectionName().equals(section)"},{"lineNumber":616,"author":{"gitId":"-"},"content":"                            \u0026\u0026 !recipientInfo.getSectionName().equals(section)) {"},{"lineNumber":617,"author":{"gitId":"-"},"content":"                        continue;"},{"lineNumber":618,"author":{"gitId":"-"},"content":"                    }"},{"lineNumber":619,"author":{"gitId":"-"},"content":""},{"lineNumber":620,"author":{"gitId":"-"},"content":"                    FeedbackResponseAttributes missingResponse \u003d"},{"lineNumber":621,"author":{"gitId":"-"},"content":"                            FeedbackResponseAttributes.builder(questionId, giverIdentifier, recipientIdentifier)"},{"lineNumber":622,"author":{"gitId":"-"},"content":"                                    .withCourseId(courseId)"},{"lineNumber":623,"author":{"gitId":"-"},"content":"                                    .withFeedbackSessionName(feedbackSessionName)"},{"lineNumber":624,"author":{"gitId":"-"},"content":"                                    .withGiverSection(giverInfo.getSectionName())"},{"lineNumber":625,"author":{"gitId":"-"},"content":"                                    .withRecipientSection(recipientInfo.getSectionName())"},{"lineNumber":626,"author":{"gitId":"-"},"content":"                                    .withResponseDetails(new FeedbackTextResponseDetails(\"No Response\"))"},{"lineNumber":627,"author":{"gitId":"-"},"content":"                                    .build();"},{"lineNumber":628,"author":{"gitId":"-"},"content":""},{"lineNumber":629,"author":{"gitId":"-"},"content":"                    // check visibility of the missing response"},{"lineNumber":630,"author":{"gitId":"-"},"content":"                    boolean isVisibleResponse \u003d isResponseVisibleForUser("},{"lineNumber":631,"author":{"gitId":"-"},"content":"                            instructor.getEmail(), true, null, Collections.emptySet(),"},{"lineNumber":632,"author":{"gitId":"-"},"content":"                            missingResponse, correspondingQuestion, instructor);"},{"lineNumber":633,"author":{"gitId":"-"},"content":"                    if (!isVisibleResponse) {"},{"lineNumber":634,"author":{"gitId":"-"},"content":"                        continue;"},{"lineNumber":635,"author":{"gitId":"-"},"content":"                    }"},{"lineNumber":636,"author":{"gitId":"-"},"content":""},{"lineNumber":637,"author":{"gitId":"-"},"content":"                    // generate giver/recipient name visibility table"},{"lineNumber":638,"author":{"gitId":"-"},"content":"                    responseGiverVisibilityTable.put(missingResponse.getId(),"},{"lineNumber":639,"author":{"gitId":"-"},"content":"                            isNameVisibleToUser(correspondingQuestion, missingResponse,"},{"lineNumber":640,"author":{"gitId":"-"},"content":"                                    instructor.getEmail(), true, true, courseRoster));"},{"lineNumber":641,"author":{"gitId":"-"},"content":"                    responseRecipientVisibilityTable.put(missingResponse.getId(),"},{"lineNumber":642,"author":{"gitId":"-"},"content":"                            isNameVisibleToUser(correspondingQuestion, missingResponse,"},{"lineNumber":643,"author":{"gitId":"-"},"content":"                                    instructor.getEmail(), true, false, courseRoster));"},{"lineNumber":644,"author":{"gitId":"-"},"content":"                    missingResponses.add(missingResponse);"},{"lineNumber":645,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":646,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":647,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":648,"author":{"gitId":"-"},"content":""},{"lineNumber":649,"author":{"gitId":"-"},"content":"        return missingResponses;"},{"lineNumber":650,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":651,"author":{"gitId":"-"},"content":""},{"lineNumber":652,"author":{"gitId":"-"},"content":"    boolean isResponseVisibleForUser("},{"lineNumber":653,"author":{"gitId":"-"},"content":"            String userEmail, boolean isInstructor, StudentAttributes student,"},{"lineNumber":654,"author":{"gitId":"-"},"content":"            Set\u003cString\u003e studentsEmailInTeam, FeedbackResponseAttributes response,"},{"lineNumber":655,"author":{"gitId":"-"},"content":"            FeedbackQuestionAttributes relatedQuestion, InstructorAttributes instructor) {"},{"lineNumber":656,"author":{"gitId":"-"},"content":""},{"lineNumber":657,"author":{"gitId":"-"},"content":"        boolean isVisibleResponse \u003d false;"},{"lineNumber":658,"author":{"gitId":"-"},"content":"        if (isInstructor \u0026\u0026 relatedQuestion.isResponseVisibleTo(FeedbackParticipantType.INSTRUCTORS)"},{"lineNumber":659,"author":{"gitId":"-"},"content":"                || response.getRecipient().equals(userEmail)"},{"lineNumber":660,"author":{"gitId":"-"},"content":"                \u0026\u0026 relatedQuestion.isResponseVisibleTo(FeedbackParticipantType.RECEIVER)"},{"lineNumber":661,"author":{"gitId":"-"},"content":"                || response.getGiver().equals(userEmail)"},{"lineNumber":662,"author":{"gitId":"-"},"content":"                || !isInstructor \u0026\u0026 relatedQuestion.isResponseVisibleTo(FeedbackParticipantType.STUDENTS)) {"},{"lineNumber":663,"author":{"gitId":"-"},"content":"            isVisibleResponse \u003d true;"},{"lineNumber":664,"author":{"gitId":"-"},"content":"        } else if (studentsEmailInTeam !\u003d null \u0026\u0026 !isInstructor) {"},{"lineNumber":665,"author":{"gitId":"hhdqirui"},"content":"            if ((relatedQuestion.getRecipientType() \u003d\u003d FeedbackParticipantType.TEAMS"},{"lineNumber":666,"author":{"gitId":"hhdqirui"},"content":"                    || relatedQuestion.getRecipientType() \u003d\u003d FeedbackParticipantType.TEAMS_IN_SAME_SECTION"},{"lineNumber":667,"author":{"gitId":"hhdqirui"},"content":"                    || relatedQuestion.getRecipientType() \u003d\u003d FeedbackParticipantType.TEAMS_EXCLUDING_SELF)"},{"lineNumber":668,"author":{"gitId":"-"},"content":"                    \u0026\u0026 relatedQuestion.isResponseVisibleTo(FeedbackParticipantType.RECEIVER)"},{"lineNumber":669,"author":{"gitId":"-"},"content":"                    \u0026\u0026 response.getRecipient().equals(student.getTeam())) {"},{"lineNumber":670,"author":{"gitId":"-"},"content":"                isVisibleResponse \u003d true;"},{"lineNumber":671,"author":{"gitId":"-"},"content":"            } else if (relatedQuestion.getGiverType() \u003d\u003d FeedbackParticipantType.TEAMS"},{"lineNumber":672,"author":{"gitId":"-"},"content":"                    \u0026\u0026 response.getGiver().equals(student.getTeam())) {"},{"lineNumber":673,"author":{"gitId":"-"},"content":"                isVisibleResponse \u003d true;"},{"lineNumber":674,"author":{"gitId":"-"},"content":"            } else if (relatedQuestion.isResponseVisibleTo(FeedbackParticipantType.OWN_TEAM_MEMBERS)"},{"lineNumber":675,"author":{"gitId":"-"},"content":"                    \u0026\u0026 studentsEmailInTeam.contains(response.getGiver())) {"},{"lineNumber":676,"author":{"gitId":"-"},"content":"                isVisibleResponse \u003d true;"},{"lineNumber":677,"author":{"gitId":"-"},"content":"            } else if (relatedQuestion.isResponseVisibleTo(FeedbackParticipantType.RECEIVER_TEAM_MEMBERS)"},{"lineNumber":678,"author":{"gitId":"-"},"content":"                    \u0026\u0026 studentsEmailInTeam.contains(response.getRecipient())) {"},{"lineNumber":679,"author":{"gitId":"-"},"content":"                isVisibleResponse \u003d true;"},{"lineNumber":680,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":681,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":682,"author":{"gitId":"-"},"content":"        if (isVisibleResponse \u0026\u0026 instructor !\u003d null) {"},{"lineNumber":683,"author":{"gitId":"-"},"content":"            boolean isGiverSectionRestricted \u003d"},{"lineNumber":684,"author":{"gitId":"-"},"content":"                    !instructor.isAllowedForPrivilege(response.getGiverSection(),"},{"lineNumber":685,"author":{"gitId":"-"},"content":"                            response.getFeedbackSessionName(),"},{"lineNumber":686,"author":{"gitId":"-"},"content":"                            Const.InstructorPermissions.CAN_VIEW_SESSION_IN_SECTIONS);"},{"lineNumber":687,"author":{"gitId":"-"},"content":"            // If instructors are not restricted to view the giver\u0027s section,"},{"lineNumber":688,"author":{"gitId":"-"},"content":"            // they are allowed to view responses to GENERAL, subject to visibility options"},{"lineNumber":689,"author":{"gitId":"-"},"content":"            boolean isRecipientSectionRestricted \u003d"},{"lineNumber":690,"author":{"gitId":"-"},"content":"                    relatedQuestion.getRecipientType() !\u003d FeedbackParticipantType.NONE"},{"lineNumber":691,"author":{"gitId":"-"},"content":"                            \u0026\u0026 !instructor.isAllowedForPrivilege(response.getRecipientSection(),"},{"lineNumber":692,"author":{"gitId":"-"},"content":"                            response.getFeedbackSessionName(),"},{"lineNumber":693,"author":{"gitId":"-"},"content":"                            Const.InstructorPermissions.CAN_VIEW_SESSION_IN_SECTIONS);"},{"lineNumber":694,"author":{"gitId":"-"},"content":""},{"lineNumber":695,"author":{"gitId":"-"},"content":"            boolean isNotAllowedForInstructor \u003d isGiverSectionRestricted || isRecipientSectionRestricted;"},{"lineNumber":696,"author":{"gitId":"-"},"content":"            if (isNotAllowedForInstructor) {"},{"lineNumber":697,"author":{"gitId":"-"},"content":"                isVisibleResponse \u003d false;"},{"lineNumber":698,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":699,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":700,"author":{"gitId":"-"},"content":"        return isVisibleResponse;"},{"lineNumber":701,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":702,"author":{"gitId":"-"},"content":""},{"lineNumber":703,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":704,"author":{"gitId":"-"},"content":"     * Checks whether there are responses for a course."},{"lineNumber":705,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":706,"author":{"gitId":"-"},"content":"    public boolean hasResponsesForCourse(String courseId) {"},{"lineNumber":707,"author":{"gitId":"-"},"content":"        return frDb.hasFeedbackResponseEntitiesForCourse(courseId);"},{"lineNumber":708,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":709,"author":{"gitId":"-"},"content":""},{"lineNumber":710,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":711,"author":{"gitId":"-"},"content":"     * Updates a feedback response by {@link FeedbackResponseAttributes.UpdateOptions}."},{"lineNumber":712,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":713,"author":{"gitId":"-"},"content":"     * \u003cp\u003eCascade updates its associated feedback response comment"},{"lineNumber":714,"author":{"gitId":"-"},"content":"     * (e.g. associated response ID, giverSection and recipientSection)."},{"lineNumber":715,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":716,"author":{"gitId":"-"},"content":"     * \u003cp\u003eIf the giver/recipient field is changed, the response is updated by recreating the response"},{"lineNumber":717,"author":{"gitId":"-"},"content":"     * as question-giver-recipient is the primary key."},{"lineNumber":718,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":719,"author":{"gitId":"-"},"content":"     * @return updated feedback response"},{"lineNumber":720,"author":{"gitId":"-"},"content":"     * @throws InvalidParametersException if attributes to update are not valid"},{"lineNumber":721,"author":{"gitId":"-"},"content":"     * @throws EntityDoesNotExistException if the comment cannot be found"},{"lineNumber":722,"author":{"gitId":"-"},"content":"     * @throws EntityAlreadyExistsException if the response cannot be updated"},{"lineNumber":723,"author":{"gitId":"-"},"content":"     *         by recreation because of an existent response"},{"lineNumber":724,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":725,"author":{"gitId":"-"},"content":"    public FeedbackResponseAttributes updateFeedbackResponseCascade(FeedbackResponseAttributes.UpdateOptions updateOptions)"},{"lineNumber":726,"author":{"gitId":"-"},"content":"            throws InvalidParametersException, EntityDoesNotExistException, EntityAlreadyExistsException {"},{"lineNumber":727,"author":{"gitId":"-"},"content":""},{"lineNumber":728,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes oldResponse \u003d frDb.getFeedbackResponse(updateOptions.getFeedbackResponseId());"},{"lineNumber":729,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes newResponse \u003d frDb.updateFeedbackResponse(updateOptions);"},{"lineNumber":730,"author":{"gitId":"-"},"content":""},{"lineNumber":731,"author":{"gitId":"-"},"content":"        boolean isResponseIdChanged \u003d !oldResponse.getId().equals(newResponse.getId());"},{"lineNumber":732,"author":{"gitId":"-"},"content":"        boolean isGiverSectionChanged \u003d !oldResponse.getGiverSection().equals(newResponse.getGiverSection());"},{"lineNumber":733,"author":{"gitId":"-"},"content":"        boolean isRecipientSectionChanged \u003d !oldResponse.getRecipientSection().equals(newResponse.getRecipientSection());"},{"lineNumber":734,"author":{"gitId":"-"},"content":""},{"lineNumber":735,"author":{"gitId":"-"},"content":"        if (isResponseIdChanged || isGiverSectionChanged || isRecipientSectionChanged) {"},{"lineNumber":736,"author":{"gitId":"-"},"content":"            List\u003cFeedbackResponseCommentAttributes\u003e responseComments \u003d"},{"lineNumber":737,"author":{"gitId":"-"},"content":"                    frcLogic.getFeedbackResponseCommentForResponse(oldResponse.getId());"},{"lineNumber":738,"author":{"gitId":"-"},"content":"            for (FeedbackResponseCommentAttributes responseComment : responseComments) {"},{"lineNumber":739,"author":{"gitId":"-"},"content":"                FeedbackResponseCommentAttributes.UpdateOptions.Builder updateOptionsBuilder \u003d"},{"lineNumber":740,"author":{"gitId":"-"},"content":"                        FeedbackResponseCommentAttributes.updateOptionsBuilder(responseComment.getId());"},{"lineNumber":741,"author":{"gitId":"-"},"content":""},{"lineNumber":742,"author":{"gitId":"-"},"content":"                if (isResponseIdChanged) {"},{"lineNumber":743,"author":{"gitId":"-"},"content":"                    updateOptionsBuilder.withFeedbackResponseId(newResponse.getId());"},{"lineNumber":744,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":745,"author":{"gitId":"-"},"content":""},{"lineNumber":746,"author":{"gitId":"-"},"content":"                if (isGiverSectionChanged) {"},{"lineNumber":747,"author":{"gitId":"-"},"content":"                    updateOptionsBuilder.withGiverSection(newResponse.getGiverSection());"},{"lineNumber":748,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":749,"author":{"gitId":"-"},"content":""},{"lineNumber":750,"author":{"gitId":"-"},"content":"                if (isRecipientSectionChanged) {"},{"lineNumber":751,"author":{"gitId":"-"},"content":"                    updateOptionsBuilder.withReceiverSection(newResponse.getRecipientSection());"},{"lineNumber":752,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":753,"author":{"gitId":"-"},"content":""},{"lineNumber":754,"author":{"gitId":"-"},"content":"                frcLogic.updateFeedbackResponseComment(updateOptionsBuilder.build());"},{"lineNumber":755,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":756,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":757,"author":{"gitId":"-"},"content":""},{"lineNumber":758,"author":{"gitId":"-"},"content":"        return newResponse;"},{"lineNumber":759,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":760,"author":{"gitId":"-"},"content":""},{"lineNumber":761,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":762,"author":{"gitId":"-"},"content":"     * Updates responses for a student when his team changes."},{"lineNumber":763,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":764,"author":{"gitId":"-"},"content":"     * \u003cp\u003eThis is done by deleting responses that are no longer relevant to him in his new team."},{"lineNumber":765,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":766,"author":{"gitId":"-"},"content":"    public void updateFeedbackResponsesForChangingTeam("},{"lineNumber":767,"author":{"gitId":"-"},"content":"            String courseId, String userEmail, String oldTeam, String newTeam) {"},{"lineNumber":768,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes question;"},{"lineNumber":769,"author":{"gitId":"-"},"content":"        // deletes all responses given by the user to team members or given by the user as a representative of a team."},{"lineNumber":770,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e responsesFromUser \u003d"},{"lineNumber":771,"author":{"gitId":"-"},"content":"                getFeedbackResponsesFromGiverForCourse(courseId, userEmail);"},{"lineNumber":772,"author":{"gitId":"-"},"content":"        for (FeedbackResponseAttributes response : responsesFromUser) {"},{"lineNumber":773,"author":{"gitId":"-"},"content":"            question \u003d fqLogic.getFeedbackQuestion(response.getFeedbackQuestionId());"},{"lineNumber":774,"author":{"gitId":"-"},"content":"            if (question.getGiverType() \u003d\u003d FeedbackParticipantType.TEAMS"},{"lineNumber":775,"author":{"gitId":"-"},"content":"                    || isRecipientTypeTeamMembers(question)) {"},{"lineNumber":776,"author":{"gitId":"-"},"content":"                deleteFeedbackResponseCascade(response.getId());"},{"lineNumber":777,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":778,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":779,"author":{"gitId":"-"},"content":""},{"lineNumber":780,"author":{"gitId":"-"},"content":"        // Deletes all responses given by other team members to the user."},{"lineNumber":781,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e responsesToUser \u003d"},{"lineNumber":782,"author":{"gitId":"-"},"content":"                getFeedbackResponsesForReceiverForCourse(courseId, userEmail);"},{"lineNumber":783,"author":{"gitId":"-"},"content":"        for (FeedbackResponseAttributes response : responsesToUser) {"},{"lineNumber":784,"author":{"gitId":"-"},"content":"            question \u003d fqLogic.getFeedbackQuestion(response.getFeedbackQuestionId());"},{"lineNumber":785,"author":{"gitId":"-"},"content":"            if (isRecipientTypeTeamMembers(question)) {"},{"lineNumber":786,"author":{"gitId":"-"},"content":"                deleteFeedbackResponseCascade(response.getId());"},{"lineNumber":787,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":788,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":789,"author":{"gitId":"-"},"content":""},{"lineNumber":790,"author":{"gitId":"-"},"content":"        boolean isOldTeamEmpty \u003d studentsLogic.getStudentsForTeam(oldTeam, courseId).isEmpty();"},{"lineNumber":791,"author":{"gitId":"-"},"content":"        if (isOldTeamEmpty) {"},{"lineNumber":792,"author":{"gitId":"-"},"content":"            deleteFeedbackResponsesInvolvedEntityOfCourseCascade(courseId, oldTeam);"},{"lineNumber":793,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":794,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":795,"author":{"gitId":"-"},"content":""},{"lineNumber":796,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":797,"author":{"gitId":"-"},"content":"     * Updates responses for a student when his section changes."},{"lineNumber":798,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":799,"author":{"gitId":"-"},"content":"    public void updateFeedbackResponsesForChangingSection("},{"lineNumber":800,"author":{"gitId":"-"},"content":"            String courseId, String userEmail, String oldSection, String newSection)"},{"lineNumber":801,"author":{"gitId":"-"},"content":"            throws EntityDoesNotExistException, InvalidParametersException {"},{"lineNumber":802,"author":{"gitId":"-"},"content":"        updateSectionOfResponsesFromUser(courseId, userEmail, newSection);"},{"lineNumber":803,"author":{"gitId":"-"},"content":"        updateSectionOfResponsesToUser(courseId, userEmail, newSection);"},{"lineNumber":804,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":805,"author":{"gitId":"-"},"content":""},{"lineNumber":806,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":807,"author":{"gitId":"-"},"content":"     * Updates the relevant responses before the deletion of a student."},{"lineNumber":808,"author":{"gitId":"-"},"content":"     * This method takes care of the following:"},{"lineNumber":809,"author":{"gitId":"-"},"content":"     * \u003cul\u003e"},{"lineNumber":810,"author":{"gitId":"-"},"content":"     *     \u003cli\u003e"},{"lineNumber":811,"author":{"gitId":"-"},"content":"     *         Making existing responses of \u0027rank recipient question\u0027 consistent."},{"lineNumber":812,"author":{"gitId":"-"},"content":"     *     \u003c/li\u003e"},{"lineNumber":813,"author":{"gitId":"-"},"content":"     * \u003c/ul\u003e"},{"lineNumber":814,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":815,"author":{"gitId":"-"},"content":"    public void updateFeedbackResponsesForDeletingStudent(String courseId) {"},{"lineNumber":816,"author":{"gitId":"-"},"content":"        updateRankRecipientQuestionResponsesAfterDeletingStudent(courseId);"},{"lineNumber":817,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":818,"author":{"gitId":"-"},"content":""},{"lineNumber":819,"author":{"gitId":"-"},"content":"    private void updateRankRecipientQuestionResponsesAfterDeletingStudent(String courseId) {"},{"lineNumber":820,"author":{"gitId":"-"},"content":"        List\u003cFeedbackQuestionAttributes\u003e filteredQuestions \u003d"},{"lineNumber":821,"author":{"gitId":"-"},"content":"                fqLogic.getFeedbackQuestionForCourseWithType(courseId, FeedbackQuestionType.RANK_RECIPIENTS);"},{"lineNumber":822,"author":{"gitId":"-"},"content":"        CourseRoster roster \u003d new CourseRoster("},{"lineNumber":823,"author":{"gitId":"-"},"content":"                studentsLogic.getStudentsForCourse(courseId),"},{"lineNumber":824,"author":{"gitId":"-"},"content":"                instructorsLogic.getInstructorsForCourse(courseId));"},{"lineNumber":825,"author":{"gitId":"-"},"content":"        for (FeedbackQuestionAttributes question : filteredQuestions) {"},{"lineNumber":826,"author":{"gitId":"-"},"content":"            makeRankRecipientQuestionResponsesConsistent(question, roster);"},{"lineNumber":827,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":828,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":829,"author":{"gitId":"-"},"content":""},{"lineNumber":830,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":831,"author":{"gitId":"-"},"content":"     * Makes the rankings by one giver in the response to a \u0027rank recipient question\u0027 consistent, after deleting a"},{"lineNumber":832,"author":{"gitId":"-"},"content":"     * student."},{"lineNumber":833,"author":{"gitId":"-"},"content":"     * \u003cp\u003e"},{"lineNumber":834,"author":{"gitId":"-"},"content":"     *     Fails silently if the question type is not \u0027rank recipient question\u0027."},{"lineNumber":835,"author":{"gitId":"-"},"content":"     * \u003c/p\u003e"},{"lineNumber":836,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":837,"author":{"gitId":"-"},"content":"    private void makeRankRecipientQuestionResponsesConsistent("},{"lineNumber":838,"author":{"gitId":"-"},"content":"            FeedbackQuestionAttributes question, CourseRoster roster) {"},{"lineNumber":839,"author":{"gitId":"-"},"content":"        if (!question.getQuestionType().equals(FeedbackQuestionType.RANK_RECIPIENTS)) {"},{"lineNumber":840,"author":{"gitId":"-"},"content":"            return;"},{"lineNumber":841,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":842,"author":{"gitId":"-"},"content":""},{"lineNumber":843,"author":{"gitId":"-"},"content":"        FeedbackParticipantType giverType \u003d question.getGiverType();"},{"lineNumber":844,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e responses;"},{"lineNumber":845,"author":{"gitId":"-"},"content":""},{"lineNumber":846,"author":{"gitId":"-"},"content":"        int numberOfRecipients;"},{"lineNumber":847,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes.UpdateOptions\u003e updates \u003d new ArrayList\u003c\u003e();"},{"lineNumber":848,"author":{"gitId":"-"},"content":""},{"lineNumber":849,"author":{"gitId":"-"},"content":"        switch (giverType) {"},{"lineNumber":850,"author":{"gitId":"-"},"content":"        case INSTRUCTORS:"},{"lineNumber":851,"author":{"gitId":"-"},"content":"        case SELF:"},{"lineNumber":852,"author":{"gitId":"-"},"content":"            for (InstructorAttributes instructor : roster.getInstructors()) {"},{"lineNumber":853,"author":{"gitId":"-"},"content":"                numberOfRecipients \u003d"},{"lineNumber":854,"author":{"gitId":"-"},"content":"                        fqLogic.getRecipientsOfQuestion(question, instructor, null, roster).size();"},{"lineNumber":855,"author":{"gitId":"-"},"content":"                responses \u003d getFeedbackResponsesFromGiverForQuestion(question.getId(), instructor.getEmail());"},{"lineNumber":856,"author":{"gitId":"-"},"content":"                updates.addAll(FeedbackRankRecipientsResponseDetails"},{"lineNumber":857,"author":{"gitId":"-"},"content":"                        .getUpdateOptionsForRankRecipientQuestions(responses, numberOfRecipients));"},{"lineNumber":858,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":859,"author":{"gitId":"-"},"content":"            break;"},{"lineNumber":860,"author":{"gitId":"-"},"content":"        case TEAMS:"},{"lineNumber":861,"author":{"gitId":"-"},"content":"        case TEAMS_IN_SAME_SECTION:"},{"lineNumber":862,"author":{"gitId":"-"},"content":"            StudentAttributes firstMemberOfTeam;"},{"lineNumber":863,"author":{"gitId":"-"},"content":"            String team;"},{"lineNumber":864,"author":{"gitId":"-"},"content":"            Map\u003cString, List\u003cStudentAttributes\u003e\u003e teams \u003d roster.getTeamToMembersTable();"},{"lineNumber":865,"author":{"gitId":"-"},"content":"            for (Map.Entry\u003cString, List\u003cStudentAttributes\u003e\u003e entry : teams.entrySet()) {"},{"lineNumber":866,"author":{"gitId":"-"},"content":"                team \u003d entry.getKey();"},{"lineNumber":867,"author":{"gitId":"-"},"content":"                firstMemberOfTeam \u003d entry.getValue().get(0);"},{"lineNumber":868,"author":{"gitId":"-"},"content":"                numberOfRecipients \u003d"},{"lineNumber":869,"author":{"gitId":"-"},"content":"                        fqLogic.getRecipientsOfQuestion(question, null, firstMemberOfTeam, roster).size();"},{"lineNumber":870,"author":{"gitId":"-"},"content":"                responses \u003d"},{"lineNumber":871,"author":{"gitId":"-"},"content":"                        getFeedbackResponsesFromTeamForQuestion(question.getId(), question.getCourseId(), team, roster);"},{"lineNumber":872,"author":{"gitId":"-"},"content":"                updates.addAll(FeedbackRankRecipientsResponseDetails"},{"lineNumber":873,"author":{"gitId":"-"},"content":"                        .getUpdateOptionsForRankRecipientQuestions(responses, numberOfRecipients));"},{"lineNumber":874,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":875,"author":{"gitId":"-"},"content":"            break;"},{"lineNumber":876,"author":{"gitId":"-"},"content":"        default:"},{"lineNumber":877,"author":{"gitId":"-"},"content":"            for (StudentAttributes student : roster.getStudents()) {"},{"lineNumber":878,"author":{"gitId":"-"},"content":"                numberOfRecipients \u003d"},{"lineNumber":879,"author":{"gitId":"-"},"content":"                        fqLogic.getRecipientsOfQuestion(question, null, student, roster).size();"},{"lineNumber":880,"author":{"gitId":"-"},"content":"                responses \u003d getFeedbackResponsesFromGiverForQuestion(question.getId(), student.getEmail());"},{"lineNumber":881,"author":{"gitId":"-"},"content":"                updates.addAll(FeedbackRankRecipientsResponseDetails"},{"lineNumber":882,"author":{"gitId":"-"},"content":"                        .getUpdateOptionsForRankRecipientQuestions(responses, numberOfRecipients));"},{"lineNumber":883,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":884,"author":{"gitId":"-"},"content":"            break;"},{"lineNumber":885,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":886,"author":{"gitId":"-"},"content":""},{"lineNumber":887,"author":{"gitId":"-"},"content":"        for (FeedbackResponseAttributes.UpdateOptions update : updates) {"},{"lineNumber":888,"author":{"gitId":"-"},"content":"            try {"},{"lineNumber":889,"author":{"gitId":"-"},"content":"                frDb.updateFeedbackResponse(update);"},{"lineNumber":890,"author":{"gitId":"-"},"content":"            } catch (EntityAlreadyExistsException | EntityDoesNotExistException | InvalidParametersException e) {"},{"lineNumber":891,"author":{"gitId":"-"},"content":"                assert false : \"Exception occurred when updating responses after deleting students.\";"},{"lineNumber":892,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":893,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":894,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":895,"author":{"gitId":"-"},"content":""},{"lineNumber":896,"author":{"gitId":"-"},"content":"    private void updateSectionOfResponsesToUser(String courseId, String userEmail, String newSection)"},{"lineNumber":897,"author":{"gitId":"-"},"content":"            throws InvalidParametersException, EntityDoesNotExistException {"},{"lineNumber":898,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e responsesToUser \u003d"},{"lineNumber":899,"author":{"gitId":"-"},"content":"                getFeedbackResponsesForReceiverForCourse(courseId, userEmail);"},{"lineNumber":900,"author":{"gitId":"-"},"content":""},{"lineNumber":901,"author":{"gitId":"-"},"content":"        for (FeedbackResponseAttributes response : responsesToUser) {"},{"lineNumber":902,"author":{"gitId":"-"},"content":"            try {"},{"lineNumber":903,"author":{"gitId":"-"},"content":"                frDb.updateFeedbackResponse("},{"lineNumber":904,"author":{"gitId":"-"},"content":"                        FeedbackResponseAttributes.updateOptionsBuilder(response.getId())"},{"lineNumber":905,"author":{"gitId":"-"},"content":"                                .withRecipientSection(newSection)"},{"lineNumber":906,"author":{"gitId":"-"},"content":"                                .build());"},{"lineNumber":907,"author":{"gitId":"-"},"content":"            } catch (EntityAlreadyExistsException e) {"},{"lineNumber":908,"author":{"gitId":"-"},"content":"                assert false : \"Not possible to trigger recreating of response\";"},{"lineNumber":909,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":910,"author":{"gitId":"-"},"content":"            frcLogic.updateFeedbackResponseCommentsForResponse(response.getId());"},{"lineNumber":911,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":912,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":913,"author":{"gitId":"-"},"content":""},{"lineNumber":914,"author":{"gitId":"-"},"content":"    private void updateSectionOfResponsesFromUser(String courseId, String userEmail, String newSection)"},{"lineNumber":915,"author":{"gitId":"-"},"content":"            throws InvalidParametersException, EntityDoesNotExistException {"},{"lineNumber":916,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e responsesFromUser \u003d"},{"lineNumber":917,"author":{"gitId":"-"},"content":"                getFeedbackResponsesFromGiverForCourse(courseId, userEmail);"},{"lineNumber":918,"author":{"gitId":"-"},"content":""},{"lineNumber":919,"author":{"gitId":"-"},"content":"        for (FeedbackResponseAttributes response : responsesFromUser) {"},{"lineNumber":920,"author":{"gitId":"-"},"content":"            try {"},{"lineNumber":921,"author":{"gitId":"-"},"content":"                frDb.updateFeedbackResponse("},{"lineNumber":922,"author":{"gitId":"-"},"content":"                        FeedbackResponseAttributes.updateOptionsBuilder(response.getId())"},{"lineNumber":923,"author":{"gitId":"-"},"content":"                                .withGiverSection(newSection)"},{"lineNumber":924,"author":{"gitId":"-"},"content":"                                .build());"},{"lineNumber":925,"author":{"gitId":"-"},"content":"            } catch (EntityAlreadyExistsException e) {"},{"lineNumber":926,"author":{"gitId":"-"},"content":"                assert false : \"Not possible to trigger recreating of response\";"},{"lineNumber":927,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":928,"author":{"gitId":"-"},"content":"            frcLogic.updateFeedbackResponseCommentsForResponse(response.getId());"},{"lineNumber":929,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":930,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":931,"author":{"gitId":"-"},"content":""},{"lineNumber":932,"author":{"gitId":"-"},"content":"    private boolean isRecipientTypeTeamMembers(FeedbackQuestionAttributes question) {"},{"lineNumber":933,"author":{"gitId":"-"},"content":"        return question.getRecipientType() \u003d\u003d FeedbackParticipantType.OWN_TEAM_MEMBERS"},{"lineNumber":934,"author":{"gitId":"-"},"content":"               || question.getRecipientType() \u003d\u003d FeedbackParticipantType.OWN_TEAM_MEMBERS_INCLUDING_SELF;"},{"lineNumber":935,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":936,"author":{"gitId":"-"},"content":""},{"lineNumber":937,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":938,"author":{"gitId":"-"},"content":"     * Updates responses for a student when his email changes."},{"lineNumber":939,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":940,"author":{"gitId":"-"},"content":"    public void updateFeedbackResponsesForChangingEmail("},{"lineNumber":941,"author":{"gitId":"-"},"content":"            String courseId, String oldEmail, String newEmail)"},{"lineNumber":942,"author":{"gitId":"-"},"content":"            throws InvalidParametersException, EntityDoesNotExistException {"},{"lineNumber":943,"author":{"gitId":"-"},"content":""},{"lineNumber":944,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e responsesFromUser \u003d"},{"lineNumber":945,"author":{"gitId":"-"},"content":"                getFeedbackResponsesFromGiverForCourse(courseId, oldEmail);"},{"lineNumber":946,"author":{"gitId":"-"},"content":""},{"lineNumber":947,"author":{"gitId":"-"},"content":"        for (FeedbackResponseAttributes response : responsesFromUser) {"},{"lineNumber":948,"author":{"gitId":"-"},"content":"            try {"},{"lineNumber":949,"author":{"gitId":"-"},"content":"                updateFeedbackResponseCascade("},{"lineNumber":950,"author":{"gitId":"-"},"content":"                        FeedbackResponseAttributes.updateOptionsBuilder(response.getId())"},{"lineNumber":951,"author":{"gitId":"-"},"content":"                                .withGiver(newEmail)"},{"lineNumber":952,"author":{"gitId":"-"},"content":"                                .build());"},{"lineNumber":953,"author":{"gitId":"-"},"content":"                frcLogic.updateFeedbackResponseCommentsEmails(courseId, oldEmail, newEmail);"},{"lineNumber":954,"author":{"gitId":"-"},"content":"            } catch (EntityAlreadyExistsException e) {"},{"lineNumber":955,"author":{"gitId":"-"},"content":"                assert false : \"Feedback response failed to update successfully as email was already in use.\";"},{"lineNumber":956,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":957,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":958,"author":{"gitId":"-"},"content":""},{"lineNumber":959,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e responsesToUser \u003d"},{"lineNumber":960,"author":{"gitId":"-"},"content":"                getFeedbackResponsesForReceiverForCourse(courseId, oldEmail);"},{"lineNumber":961,"author":{"gitId":"-"},"content":""},{"lineNumber":962,"author":{"gitId":"-"},"content":"        for (FeedbackResponseAttributes response : responsesToUser) {"},{"lineNumber":963,"author":{"gitId":"-"},"content":"            try {"},{"lineNumber":964,"author":{"gitId":"-"},"content":"                updateFeedbackResponseCascade("},{"lineNumber":965,"author":{"gitId":"-"},"content":"                        FeedbackResponseAttributes.updateOptionsBuilder(response.getId())"},{"lineNumber":966,"author":{"gitId":"-"},"content":"                                .withRecipient(newEmail)"},{"lineNumber":967,"author":{"gitId":"-"},"content":"                                .build());"},{"lineNumber":968,"author":{"gitId":"-"},"content":"            } catch (EntityAlreadyExistsException e) {"},{"lineNumber":969,"author":{"gitId":"-"},"content":"                assert false : \"Feedback response failed to update successfully as email was already in use.\";"},{"lineNumber":970,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":971,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":972,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":973,"author":{"gitId":"-"},"content":""},{"lineNumber":974,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":975,"author":{"gitId":"-"},"content":"     * Deletes responses using {@link AttributesDeletionQuery}."},{"lineNumber":976,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":977,"author":{"gitId":"-"},"content":"    public void deleteFeedbackResponses(AttributesDeletionQuery query) {"},{"lineNumber":978,"author":{"gitId":"-"},"content":"        frDb.deleteFeedbackResponses(query);"},{"lineNumber":979,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":980,"author":{"gitId":"-"},"content":""},{"lineNumber":981,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":982,"author":{"gitId":"-"},"content":"     * Deletes a feedback response cascade its associated comments."},{"lineNumber":983,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":984,"author":{"gitId":"-"},"content":"    public void deleteFeedbackResponseCascade(String responseId) {"},{"lineNumber":985,"author":{"gitId":"-"},"content":"        frcLogic.deleteFeedbackResponseComments("},{"lineNumber":986,"author":{"gitId":"-"},"content":"                AttributesDeletionQuery.builder()"},{"lineNumber":987,"author":{"gitId":"-"},"content":"                        .withResponseId(responseId)"},{"lineNumber":988,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":989,"author":{"gitId":"-"},"content":"        frDb.deleteFeedbackResponse(responseId);"},{"lineNumber":990,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":991,"author":{"gitId":"-"},"content":""},{"lineNumber":992,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":993,"author":{"gitId":"-"},"content":"     * Deletes all feedback responses of a question cascade its associated comments."},{"lineNumber":994,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":995,"author":{"gitId":"-"},"content":"    public void deleteFeedbackResponsesForQuestionCascade(String feedbackQuestionId) {"},{"lineNumber":996,"author":{"gitId":"-"},"content":"        // delete all responses, comments of the question"},{"lineNumber":997,"author":{"gitId":"-"},"content":"        AttributesDeletionQuery query \u003d AttributesDeletionQuery.builder()"},{"lineNumber":998,"author":{"gitId":"-"},"content":"                .withQuestionId(feedbackQuestionId)"},{"lineNumber":999,"author":{"gitId":"-"},"content":"                .build();"},{"lineNumber":1000,"author":{"gitId":"-"},"content":"        deleteFeedbackResponses(query);"},{"lineNumber":1001,"author":{"gitId":"-"},"content":"        frcLogic.deleteFeedbackResponseComments(query);"},{"lineNumber":1002,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1003,"author":{"gitId":"-"},"content":""},{"lineNumber":1004,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":1005,"author":{"gitId":"-"},"content":"     * Deletes all feedback responses involved an entity cascade its associated comments."},{"lineNumber":1006,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":1007,"author":{"gitId":"-"},"content":"     * @param courseId the course id"},{"lineNumber":1008,"author":{"gitId":"-"},"content":"     * @param entityEmail the entity email"},{"lineNumber":1009,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":1010,"author":{"gitId":"-"},"content":"    public void deleteFeedbackResponsesInvolvedEntityOfCourseCascade(String courseId, String entityEmail) {"},{"lineNumber":1011,"author":{"gitId":"-"},"content":"        // delete responses from the entity"},{"lineNumber":1012,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e responsesFromStudent \u003d"},{"lineNumber":1013,"author":{"gitId":"-"},"content":"                getFeedbackResponsesFromGiverForCourse(courseId, entityEmail);"},{"lineNumber":1014,"author":{"gitId":"-"},"content":"        for (FeedbackResponseAttributes response : responsesFromStudent) {"},{"lineNumber":1015,"author":{"gitId":"-"},"content":"            deleteFeedbackResponseCascade(response.getId());"},{"lineNumber":1016,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1017,"author":{"gitId":"-"},"content":""},{"lineNumber":1018,"author":{"gitId":"-"},"content":"        // delete responses to the entity"},{"lineNumber":1019,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e responsesToStudent \u003d"},{"lineNumber":1020,"author":{"gitId":"-"},"content":"                getFeedbackResponsesForReceiverForCourse(courseId, entityEmail);"},{"lineNumber":1021,"author":{"gitId":"-"},"content":"        for (FeedbackResponseAttributes response : responsesToStudent) {"},{"lineNumber":1022,"author":{"gitId":"-"},"content":"            deleteFeedbackResponseCascade(response.getId());"},{"lineNumber":1023,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1024,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1025,"author":{"gitId":"-"},"content":""},{"lineNumber":1026,"author":{"gitId":"-"},"content":"    private List\u003cFeedbackResponseAttributes\u003e getFeedbackResponsesFromTeamForQuestion("},{"lineNumber":1027,"author":{"gitId":"-"},"content":"            String feedbackQuestionId, String courseId, String teamName, @Nullable CourseRoster courseRoster) {"},{"lineNumber":1028,"author":{"gitId":"-"},"content":""},{"lineNumber":1029,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e responses \u003d new ArrayList\u003c\u003e();"},{"lineNumber":1030,"author":{"gitId":"-"},"content":"        List\u003cStudentAttributes\u003e studentsInTeam \u003d courseRoster \u003d\u003d null"},{"lineNumber":1031,"author":{"gitId":"-"},"content":"                ? studentsLogic.getStudentsForTeam(teamName, courseId) : courseRoster.getTeamToMembersTable().get(teamName);"},{"lineNumber":1032,"author":{"gitId":"-"},"content":""},{"lineNumber":1033,"author":{"gitId":"-"},"content":"        for (StudentAttributes student : studentsInTeam) {"},{"lineNumber":1034,"author":{"gitId":"-"},"content":"            responses.addAll(frDb.getFeedbackResponsesFromGiverForQuestion("},{"lineNumber":1035,"author":{"gitId":"-"},"content":"                    feedbackQuestionId, student.getEmail()));"},{"lineNumber":1036,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1037,"author":{"gitId":"-"},"content":""},{"lineNumber":1038,"author":{"gitId":"-"},"content":"        responses.addAll(frDb.getFeedbackResponsesFromGiverForQuestion("},{"lineNumber":1039,"author":{"gitId":"-"},"content":"                                        feedbackQuestionId, teamName));"},{"lineNumber":1040,"author":{"gitId":"-"},"content":""},{"lineNumber":1041,"author":{"gitId":"-"},"content":"        return responses;"},{"lineNumber":1042,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1043,"author":{"gitId":"-"},"content":""},{"lineNumber":1044,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":1045,"author":{"gitId":"-"},"content":"     * Returns feedback responses given/received by an instructor."},{"lineNumber":1046,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":1047,"author":{"gitId":"-"},"content":"    private List\u003cFeedbackResponseAttributes\u003e getFeedbackResponsesToOrFromInstructorForQuestion("},{"lineNumber":1048,"author":{"gitId":"-"},"content":"            FeedbackQuestionAttributes question, InstructorAttributes instructor) {"},{"lineNumber":1049,"author":{"gitId":"-"},"content":"        UniqueResponsesSet viewableResponses \u003d new UniqueResponsesSet();"},{"lineNumber":1050,"author":{"gitId":"-"},"content":""},{"lineNumber":1051,"author":{"gitId":"-"},"content":"        // Add responses that the instructor submitted him/herself"},{"lineNumber":1052,"author":{"gitId":"-"},"content":"        if (question.getGiverType() \u003d\u003d FeedbackParticipantType.INSTRUCTORS) {"},{"lineNumber":1053,"author":{"gitId":"-"},"content":"            viewableResponses.addNewResponses("},{"lineNumber":1054,"author":{"gitId":"-"},"content":"                    getFeedbackResponsesFromGiverForQuestion(question.getFeedbackQuestionId(), instructor.getEmail())"},{"lineNumber":1055,"author":{"gitId":"-"},"content":"            );"},{"lineNumber":1056,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1057,"author":{"gitId":"-"},"content":""},{"lineNumber":1058,"author":{"gitId":"-"},"content":"        // Add responses that user is a receiver of when response is visible to receiver or instructors"},{"lineNumber":1059,"author":{"gitId":"-"},"content":"        if (question.getRecipientType() \u003d\u003d FeedbackParticipantType.INSTRUCTORS"},{"lineNumber":1060,"author":{"gitId":"-"},"content":"                \u0026\u0026 (question.isResponseVisibleTo(FeedbackParticipantType.RECEIVER)"},{"lineNumber":1061,"author":{"gitId":"-"},"content":"                || question.isResponseVisibleTo(FeedbackParticipantType.INSTRUCTORS))) {"},{"lineNumber":1062,"author":{"gitId":"-"},"content":"            viewableResponses.addNewResponses("},{"lineNumber":1063,"author":{"gitId":"-"},"content":"                    getFeedbackResponsesForReceiverForQuestion(question.getFeedbackQuestionId(), instructor.getEmail())"},{"lineNumber":1064,"author":{"gitId":"-"},"content":"            );"},{"lineNumber":1065,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1066,"author":{"gitId":"-"},"content":""},{"lineNumber":1067,"author":{"gitId":"-"},"content":"        return viewableResponses.getResponses();"},{"lineNumber":1068,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1069,"author":{"gitId":"-"},"content":""},{"lineNumber":1070,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":1071,"author":{"gitId":"-"},"content":"     * Returns viewable feedback responses for a student."},{"lineNumber":1072,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":1073,"author":{"gitId":"-"},"content":"    private List\u003cFeedbackResponseAttributes\u003e getViewableFeedbackResponsesForStudentForQuestion("},{"lineNumber":1074,"author":{"gitId":"-"},"content":"            FeedbackQuestionAttributes question, StudentAttributes student, CourseRoster courseRoster) {"},{"lineNumber":1075,"author":{"gitId":"-"},"content":"        UniqueResponsesSet viewableResponses \u003d new UniqueResponsesSet();"},{"lineNumber":1076,"author":{"gitId":"-"},"content":""},{"lineNumber":1077,"author":{"gitId":"-"},"content":"        // Add responses that the student submitted him/herself"},{"lineNumber":1078,"author":{"gitId":"-"},"content":"        if (question.getGiverType() !\u003d FeedbackParticipantType.INSTRUCTORS) {"},{"lineNumber":1079,"author":{"gitId":"-"},"content":"            viewableResponses.addNewResponses("},{"lineNumber":1080,"author":{"gitId":"-"},"content":"                    getFeedbackResponsesFromGiverForQuestion(question.getFeedbackQuestionId(), student.getEmail())"},{"lineNumber":1081,"author":{"gitId":"-"},"content":"            );"},{"lineNumber":1082,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1083,"author":{"gitId":"-"},"content":""},{"lineNumber":1084,"author":{"gitId":"-"},"content":"        // Add responses that user is a receiver of when response is visible to receiver"},{"lineNumber":1085,"author":{"gitId":"-"},"content":"        if (question.getRecipientType() !\u003d FeedbackParticipantType.INSTRUCTORS"},{"lineNumber":1086,"author":{"gitId":"-"},"content":"                \u0026\u0026 question.isResponseVisibleTo(FeedbackParticipantType.RECEIVER)) {"},{"lineNumber":1087,"author":{"gitId":"-"},"content":"            viewableResponses.addNewResponses("},{"lineNumber":1088,"author":{"gitId":"-"},"content":"                    getFeedbackResponsesForReceiverForQuestion(question.getFeedbackQuestionId(), student.getEmail())"},{"lineNumber":1089,"author":{"gitId":"-"},"content":"            );"},{"lineNumber":1090,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1091,"author":{"gitId":"-"},"content":""},{"lineNumber":1092,"author":{"gitId":"-"},"content":"        if (question.isResponseVisibleTo(FeedbackParticipantType.STUDENTS)) {"},{"lineNumber":1093,"author":{"gitId":"-"},"content":"            viewableResponses.addNewResponses(getFeedbackResponsesForQuestion(question.getId()));"},{"lineNumber":1094,"author":{"gitId":"-"},"content":""},{"lineNumber":1095,"author":{"gitId":"-"},"content":"            // Early return as STUDENTS covers all cases below."},{"lineNumber":1096,"author":{"gitId":"-"},"content":"            return viewableResponses.getResponses();"},{"lineNumber":1097,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1098,"author":{"gitId":"-"},"content":""},{"lineNumber":1099,"author":{"gitId":"-"},"content":"        if (question.getRecipientType().isTeam()"},{"lineNumber":1100,"author":{"gitId":"-"},"content":"                \u0026\u0026 question.isResponseVisibleTo(FeedbackParticipantType.RECEIVER)) {"},{"lineNumber":1101,"author":{"gitId":"-"},"content":"            viewableResponses.addNewResponses("},{"lineNumber":1102,"author":{"gitId":"-"},"content":"                    getFeedbackResponsesForReceiverForQuestion(question.getId(), student.getTeam())"},{"lineNumber":1103,"author":{"gitId":"-"},"content":"            );"},{"lineNumber":1104,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1105,"author":{"gitId":"-"},"content":""},{"lineNumber":1106,"author":{"gitId":"-"},"content":"        if (question.getGiverType() \u003d\u003d FeedbackParticipantType.TEAMS"},{"lineNumber":1107,"author":{"gitId":"-"},"content":"                || question.isResponseVisibleTo(FeedbackParticipantType.OWN_TEAM_MEMBERS)) {"},{"lineNumber":1108,"author":{"gitId":"-"},"content":"            viewableResponses.addNewResponses("},{"lineNumber":1109,"author":{"gitId":"-"},"content":"                    getFeedbackResponsesFromTeamForQuestion("},{"lineNumber":1110,"author":{"gitId":"-"},"content":"                            question.getId(), question.getCourseId(), student.getTeam(), courseRoster));"},{"lineNumber":1111,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1112,"author":{"gitId":"-"},"content":""},{"lineNumber":1113,"author":{"gitId":"-"},"content":"        if (question.isResponseVisibleTo(FeedbackParticipantType.RECEIVER_TEAM_MEMBERS)) {"},{"lineNumber":1114,"author":{"gitId":"-"},"content":"            for (StudentAttributes studentInTeam : courseRoster.getTeamToMembersTable().get(student.getTeam())) {"},{"lineNumber":1115,"author":{"gitId":"-"},"content":"                if (studentInTeam.getEmail().equals(student.getEmail())) {"},{"lineNumber":1116,"author":{"gitId":"-"},"content":"                    continue;"},{"lineNumber":1117,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":1118,"author":{"gitId":"-"},"content":"                List\u003cFeedbackResponseAttributes\u003e responses \u003d"},{"lineNumber":1119,"author":{"gitId":"-"},"content":"                        frDb.getFeedbackResponsesForReceiverForQuestion(question.getId(), studentInTeam.getEmail());"},{"lineNumber":1120,"author":{"gitId":"-"},"content":"                viewableResponses.addNewResponses(responses);"},{"lineNumber":1121,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":1122,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1123,"author":{"gitId":"-"},"content":""},{"lineNumber":1124,"author":{"gitId":"-"},"content":"        return viewableResponses.getResponses();"},{"lineNumber":1125,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1126,"author":{"gitId":"-"},"content":""},{"lineNumber":1127,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":1128,"author":{"gitId":"-"},"content":"     * Gets the number of feedback responses created within a specified time range."},{"lineNumber":1129,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":1130,"author":{"gitId":"-"},"content":"    int getNumFeedbackResponsesByTimeRange(Instant startTime, Instant endTime) {"},{"lineNumber":1131,"author":{"gitId":"-"},"content":"        return frDb.getNumFeedbackResponsesByTimeRange(startTime, endTime);"},{"lineNumber":1132,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1133,"author":{"gitId":"-"},"content":""},{"lineNumber":1134,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":1135,"author":{"gitId":"-"},"content":"     * Checks whether instructors can see the question."},{"lineNumber":1136,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":1137,"author":{"gitId":"-"},"content":"    boolean canInstructorsSeeQuestion(FeedbackQuestionAttributes feedbackQuestion) {"},{"lineNumber":1138,"author":{"gitId":"-"},"content":"        boolean isResponseVisibleToInstructor \u003d"},{"lineNumber":1139,"author":{"gitId":"-"},"content":"                feedbackQuestion.getShowResponsesTo().contains(FeedbackParticipantType.INSTRUCTORS);"},{"lineNumber":1140,"author":{"gitId":"-"},"content":"        boolean isGiverVisibleToInstructor \u003d"},{"lineNumber":1141,"author":{"gitId":"-"},"content":"                feedbackQuestion.getShowGiverNameTo().contains(FeedbackParticipantType.INSTRUCTORS);"},{"lineNumber":1142,"author":{"gitId":"-"},"content":"        boolean isRecipientVisibleToInstructor \u003d"},{"lineNumber":1143,"author":{"gitId":"-"},"content":"                feedbackQuestion.getShowRecipientNameTo().contains(FeedbackParticipantType.INSTRUCTORS);"},{"lineNumber":1144,"author":{"gitId":"-"},"content":"        return isResponseVisibleToInstructor \u0026\u0026 isGiverVisibleToInstructor \u0026\u0026 isRecipientVisibleToInstructor;"},{"lineNumber":1145,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1146,"author":{"gitId":"-"},"content":""},{"lineNumber":1147,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":1148,"author":{"gitId":"-"},"content":"     * Checks whether instructors can see the comment."},{"lineNumber":1149,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":1150,"author":{"gitId":"-"},"content":"    boolean canInstructorsSeeComment(FeedbackResponseCommentAttributes feedbackResponseComment) {"},{"lineNumber":1151,"author":{"gitId":"-"},"content":"        boolean isCommentVisibleToInstructor \u003d"},{"lineNumber":1152,"author":{"gitId":"-"},"content":"                feedbackResponseComment.getShowCommentTo().contains(FeedbackParticipantType.INSTRUCTORS);"},{"lineNumber":1153,"author":{"gitId":"-"},"content":"        boolean isGiverVisibleToInstructor \u003d"},{"lineNumber":1154,"author":{"gitId":"-"},"content":"                feedbackResponseComment.getShowGiverNameTo().contains(FeedbackParticipantType.INSTRUCTORS);"},{"lineNumber":1155,"author":{"gitId":"-"},"content":"        return isCommentVisibleToInstructor \u0026\u0026 isGiverVisibleToInstructor;"},{"lineNumber":1156,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1157,"author":{"gitId":"-"},"content":""},{"lineNumber":1158,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":1159,"author":{"gitId":"-"},"content":"     * Set contains only unique response."},{"lineNumber":1160,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":1161,"author":{"gitId":"-"},"content":"    private static class UniqueResponsesSet {"},{"lineNumber":1162,"author":{"gitId":"-"},"content":""},{"lineNumber":1163,"author":{"gitId":"-"},"content":"        private final Set\u003cString\u003e responseIds;"},{"lineNumber":1164,"author":{"gitId":"-"},"content":"        private final List\u003cFeedbackResponseAttributes\u003e responses;"},{"lineNumber":1165,"author":{"gitId":"-"},"content":""},{"lineNumber":1166,"author":{"gitId":"-"},"content":"        private UniqueResponsesSet() {"},{"lineNumber":1167,"author":{"gitId":"-"},"content":"            responseIds \u003d new HashSet\u003c\u003e();"},{"lineNumber":1168,"author":{"gitId":"-"},"content":"            responses \u003d new ArrayList\u003c\u003e();"},{"lineNumber":1169,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1170,"author":{"gitId":"-"},"content":""},{"lineNumber":1171,"author":{"gitId":"-"},"content":"        private void addNewResponses(Collection\u003cFeedbackResponseAttributes\u003e newResponses) {"},{"lineNumber":1172,"author":{"gitId":"-"},"content":"            newResponses.forEach(this::addNewResponse);"},{"lineNumber":1173,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1174,"author":{"gitId":"-"},"content":""},{"lineNumber":1175,"author":{"gitId":"-"},"content":"        private void addNewResponse(FeedbackResponseAttributes newResponse) {"},{"lineNumber":1176,"author":{"gitId":"-"},"content":"            if (responseIds.contains(newResponse.getId())) {"},{"lineNumber":1177,"author":{"gitId":"-"},"content":"                return;"},{"lineNumber":1178,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":1179,"author":{"gitId":"-"},"content":"            responseIds.add(newResponse.getId());"},{"lineNumber":1180,"author":{"gitId":"-"},"content":"            responses.add(newResponse);"},{"lineNumber":1181,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1182,"author":{"gitId":"-"},"content":""},{"lineNumber":1183,"author":{"gitId":"-"},"content":"        private List\u003cFeedbackResponseAttributes\u003e getResponses() {"},{"lineNumber":1184,"author":{"gitId":"-"},"content":"            return responses;"},{"lineNumber":1185,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1186,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1187,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"hhdqirui":3,"-":1184}},{"path":"src/main/java/teammates/logic/core/FeedbackSessionsLogic.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.logic.core;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.time.Instant;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.util.ArrayList;"},{"lineNumber":5,"author":{"gitId":"cedricongjh"},"content":"import java.util.HashMap;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import java.util.Map;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import java.util.function.Consumer;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import java.util.stream.Collectors;"},{"lineNumber":10,"author":{"gitId":"-"},"content":""},{"lineNumber":11,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.AttributesDeletionQuery;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.FeedbackParticipantType;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackSessionAttributes;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.InstructorAttributes;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":18,"author":{"gitId":"-"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"import teammates.common.util.Logger;"},{"lineNumber":21,"author":{"gitId":"-"},"content":"import teammates.common.util.TimeHelper;"},{"lineNumber":22,"author":{"gitId":"-"},"content":"import teammates.storage.api.FeedbackSessionsDb;"},{"lineNumber":23,"author":{"gitId":"-"},"content":""},{"lineNumber":24,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":25,"author":{"gitId":"-"},"content":" * Handles operations related to feedback sessions."},{"lineNumber":26,"author":{"gitId":"-"},"content":" *"},{"lineNumber":27,"author":{"gitId":"-"},"content":" * @see FeedbackSessionAttributes"},{"lineNumber":28,"author":{"gitId":"-"},"content":" * @see FeedbackSessionsDb"},{"lineNumber":29,"author":{"gitId":"-"},"content":" */"},{"lineNumber":30,"author":{"gitId":"-"},"content":"public final class FeedbackSessionsLogic {"},{"lineNumber":31,"author":{"gitId":"-"},"content":""},{"lineNumber":32,"author":{"gitId":"-"},"content":"    private static final Logger log \u003d Logger.getLogger();"},{"lineNumber":33,"author":{"gitId":"-"},"content":""},{"lineNumber":34,"author":{"gitId":"-"},"content":"    private static final String ERROR_NON_EXISTENT_FS_STRING_FORMAT \u003d \"Trying to %s a non-existent feedback session: \";"},{"lineNumber":35,"author":{"gitId":"-"},"content":"    private static final String ERROR_NON_EXISTENT_FS_UPDATE \u003d String.format(ERROR_NON_EXISTENT_FS_STRING_FORMAT, \"update\");"},{"lineNumber":36,"author":{"gitId":"-"},"content":"    private static final String ERROR_FS_ALREADY_PUBLISH \u003d \"Error publishing feedback session: \""},{"lineNumber":37,"author":{"gitId":"-"},"content":"                                                           + \"Session has already been published.\";"},{"lineNumber":38,"author":{"gitId":"-"},"content":"    private static final String ERROR_FS_ALREADY_UNPUBLISH \u003d \"Error unpublishing feedback session: \""},{"lineNumber":39,"author":{"gitId":"-"},"content":"                                                             + \"Session has already been unpublished.\";"},{"lineNumber":40,"author":{"gitId":"-"},"content":""},{"lineNumber":41,"author":{"gitId":"-"},"content":"    private static final int NUMBER_OF_HOURS_BEFORE_CLOSING_ALERT \u003d 24;"},{"lineNumber":42,"author":{"gitId":"-"},"content":"    private static final int NUMBER_OF_HOURS_BEFORE_OPENING_SOON_ALERT \u003d 24;"},{"lineNumber":43,"author":{"gitId":"-"},"content":""},{"lineNumber":44,"author":{"gitId":"-"},"content":"    private static final FeedbackSessionsLogic instance \u003d new FeedbackSessionsLogic();"},{"lineNumber":45,"author":{"gitId":"-"},"content":""},{"lineNumber":46,"author":{"gitId":"-"},"content":"    private final FeedbackSessionsDb fsDb \u003d FeedbackSessionsDb.inst();"},{"lineNumber":47,"author":{"gitId":"-"},"content":""},{"lineNumber":48,"author":{"gitId":"-"},"content":"    private CoursesLogic coursesLogic;"},{"lineNumber":49,"author":{"gitId":"-"},"content":"    private FeedbackQuestionsLogic fqLogic;"},{"lineNumber":50,"author":{"gitId":"-"},"content":"    private FeedbackResponsesLogic frLogic;"},{"lineNumber":51,"author":{"gitId":"-"},"content":"    private FeedbackResponseCommentsLogic frcLogic;"},{"lineNumber":52,"author":{"gitId":"-"},"content":"    private InstructorsLogic instructorsLogic;"},{"lineNumber":53,"author":{"gitId":"-"},"content":"    private StudentsLogic studentsLogic;"},{"lineNumber":54,"author":{"gitId":"-"},"content":"    private DeadlineExtensionsLogic deLogic;"},{"lineNumber":55,"author":{"gitId":"-"},"content":""},{"lineNumber":56,"author":{"gitId":"-"},"content":"    private FeedbackSessionsLogic() {"},{"lineNumber":57,"author":{"gitId":"-"},"content":"        // prevent initialization"},{"lineNumber":58,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":59,"author":{"gitId":"-"},"content":""},{"lineNumber":60,"author":{"gitId":"-"},"content":"    public static FeedbackSessionsLogic inst() {"},{"lineNumber":61,"author":{"gitId":"-"},"content":"        return instance;"},{"lineNumber":62,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":63,"author":{"gitId":"-"},"content":""},{"lineNumber":64,"author":{"gitId":"-"},"content":"    void initLogicDependencies() {"},{"lineNumber":65,"author":{"gitId":"-"},"content":"        coursesLogic \u003d CoursesLogic.inst();"},{"lineNumber":66,"author":{"gitId":"-"},"content":"        fqLogic \u003d FeedbackQuestionsLogic.inst();"},{"lineNumber":67,"author":{"gitId":"-"},"content":"        frLogic \u003d FeedbackResponsesLogic.inst();"},{"lineNumber":68,"author":{"gitId":"-"},"content":"        frcLogic \u003d FeedbackResponseCommentsLogic.inst();"},{"lineNumber":69,"author":{"gitId":"-"},"content":"        instructorsLogic \u003d InstructorsLogic.inst();"},{"lineNumber":70,"author":{"gitId":"-"},"content":"        studentsLogic \u003d StudentsLogic.inst();"},{"lineNumber":71,"author":{"gitId":"-"},"content":"        deLogic \u003d DeadlineExtensionsLogic.inst();"},{"lineNumber":72,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":73,"author":{"gitId":"-"},"content":""},{"lineNumber":74,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":75,"author":{"gitId":"-"},"content":"     * Creates a feedback session."},{"lineNumber":76,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":77,"author":{"gitId":"-"},"content":"     * @return created feedback session"},{"lineNumber":78,"author":{"gitId":"-"},"content":"     * @throws InvalidParametersException if the session is not valid"},{"lineNumber":79,"author":{"gitId":"-"},"content":"     * @throws EntityAlreadyExistsException if the session already exist"},{"lineNumber":80,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":81,"author":{"gitId":"-"},"content":"    public FeedbackSessionAttributes createFeedbackSession(FeedbackSessionAttributes fsa)"},{"lineNumber":82,"author":{"gitId":"-"},"content":"            throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":83,"author":{"gitId":"-"},"content":"        return fsDb.createEntity(fsa);"},{"lineNumber":84,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":85,"author":{"gitId":"-"},"content":""},{"lineNumber":86,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":87,"author":{"gitId":"-"},"content":"     * Gets all ongoing feedback sessions."},{"lineNumber":88,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":89,"author":{"gitId":"-"},"content":"    public List\u003cFeedbackSessionAttributes\u003e getAllOngoingSessions(Instant rangeStart, Instant rangeEnd) {"},{"lineNumber":90,"author":{"gitId":"-"},"content":"        return fsDb.getAllOngoingSessions(rangeStart, rangeEnd);"},{"lineNumber":91,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":92,"author":{"gitId":"-"},"content":""},{"lineNumber":93,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":94,"author":{"gitId":"-"},"content":"     * Gets a feedback session from the data storage."},{"lineNumber":95,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":96,"author":{"gitId":"-"},"content":"     * @return null if not found or in recycle bin."},{"lineNumber":97,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":98,"author":{"gitId":"-"},"content":"    public FeedbackSessionAttributes getFeedbackSession(String feedbackSessionName, String courseId) {"},{"lineNumber":99,"author":{"gitId":"-"},"content":"        return fsDb.getFeedbackSession(courseId, feedbackSessionName);"},{"lineNumber":100,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":101,"author":{"gitId":"-"},"content":""},{"lineNumber":102,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":103,"author":{"gitId":"-"},"content":"     * Gets a feedback session from the recycle bin."},{"lineNumber":104,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":105,"author":{"gitId":"-"},"content":"     * @return null if not found."},{"lineNumber":106,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":107,"author":{"gitId":"-"},"content":"    public FeedbackSessionAttributes getFeedbackSessionFromRecycleBin(String feedbackSessionName, String courseId) {"},{"lineNumber":108,"author":{"gitId":"-"},"content":"        return fsDb.getSoftDeletedFeedbackSession(courseId, feedbackSessionName);"},{"lineNumber":109,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":110,"author":{"gitId":"-"},"content":""},{"lineNumber":111,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":112,"author":{"gitId":"-"},"content":"     * Gets all feedback sessions of a course."},{"lineNumber":113,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":114,"author":{"gitId":"-"},"content":"    public List\u003cFeedbackSessionAttributes\u003e getFeedbackSessionsForCourse(String courseId) {"},{"lineNumber":115,"author":{"gitId":"-"},"content":"        return fsDb.getFeedbackSessionsForCourse(courseId);"},{"lineNumber":116,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":117,"author":{"gitId":"-"},"content":""},{"lineNumber":118,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":119,"author":{"gitId":"-"},"content":"     * Gets all feedback sessions of a course started after time."},{"lineNumber":120,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":121,"author":{"gitId":"-"},"content":"    public List\u003cFeedbackSessionAttributes\u003e getFeedbackSessionsForCourseStartingAfter(String courseId, Instant after) {"},{"lineNumber":122,"author":{"gitId":"-"},"content":"        return fsDb.getFeedbackSessionsForCourseStartingAfter(courseId, after);"},{"lineNumber":123,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":124,"author":{"gitId":"-"},"content":""},{"lineNumber":125,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":126,"author":{"gitId":"-"},"content":"     * Gets a list of feedback sessions for instructors."},{"lineNumber":127,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":128,"author":{"gitId":"-"},"content":"    public List\u003cFeedbackSessionAttributes\u003e getFeedbackSessionsListForInstructor("},{"lineNumber":129,"author":{"gitId":"-"},"content":"            List\u003cInstructorAttributes\u003e instructorList) {"},{"lineNumber":130,"author":{"gitId":"-"},"content":""},{"lineNumber":131,"author":{"gitId":"-"},"content":"        List\u003cInstructorAttributes\u003e courseNotDeletedInstructorList \u003d instructorList.stream()"},{"lineNumber":132,"author":{"gitId":"-"},"content":"                .filter(instructor -\u003e !coursesLogic.getCourse(instructor.getCourseId()).isCourseDeleted())"},{"lineNumber":133,"author":{"gitId":"-"},"content":"                .collect(Collectors.toList());"},{"lineNumber":134,"author":{"gitId":"-"},"content":""},{"lineNumber":135,"author":{"gitId":"-"},"content":"        List\u003cFeedbackSessionAttributes\u003e fsList \u003d new ArrayList\u003c\u003e();"},{"lineNumber":136,"author":{"gitId":"-"},"content":""},{"lineNumber":137,"author":{"gitId":"-"},"content":"        for (InstructorAttributes instructor : courseNotDeletedInstructorList) {"},{"lineNumber":138,"author":{"gitId":"-"},"content":"            fsList.addAll(getFeedbackSessionsListForCourse(instructor.getCourseId()));"},{"lineNumber":139,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":140,"author":{"gitId":"-"},"content":""},{"lineNumber":141,"author":{"gitId":"-"},"content":"        return fsList;"},{"lineNumber":142,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":143,"author":{"gitId":"-"},"content":""},{"lineNumber":144,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":145,"author":{"gitId":"-"},"content":"     * Returns a {@code List} of feedback sessions in the Recycle Bin for the instructors."},{"lineNumber":146,"author":{"gitId":"-"},"content":"     * \u003cbr\u003e"},{"lineNumber":147,"author":{"gitId":"-"},"content":"     * Omits sessions if the corresponding courses are archived or in Recycle Bin"},{"lineNumber":148,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":149,"author":{"gitId":"-"},"content":"    public List\u003cFeedbackSessionAttributes\u003e getSoftDeletedFeedbackSessionsListForInstructors("},{"lineNumber":150,"author":{"gitId":"-"},"content":"            List\u003cInstructorAttributes\u003e instructorList) {"},{"lineNumber":151,"author":{"gitId":"-"},"content":""},{"lineNumber":152,"author":{"gitId":"-"},"content":"        List\u003cInstructorAttributes\u003e courseNotDeletedInstructorList \u003d instructorList.stream()"},{"lineNumber":153,"author":{"gitId":"-"},"content":"                .filter(instructor -\u003e !coursesLogic.getCourse(instructor.getCourseId()).isCourseDeleted())"},{"lineNumber":154,"author":{"gitId":"-"},"content":"                .collect(Collectors.toList());"},{"lineNumber":155,"author":{"gitId":"-"},"content":""},{"lineNumber":156,"author":{"gitId":"-"},"content":"        List\u003cFeedbackSessionAttributes\u003e fsList \u003d new ArrayList\u003c\u003e();"},{"lineNumber":157,"author":{"gitId":"-"},"content":""},{"lineNumber":158,"author":{"gitId":"-"},"content":"        for (InstructorAttributes instructor : courseNotDeletedInstructorList) {"},{"lineNumber":159,"author":{"gitId":"-"},"content":"            fsList.addAll(getSoftDeletedFeedbackSessionsListForCourse(instructor.getCourseId()));"},{"lineNumber":160,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":161,"author":{"gitId":"-"},"content":""},{"lineNumber":162,"author":{"gitId":"-"},"content":"        return fsList;"},{"lineNumber":163,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":164,"author":{"gitId":"-"},"content":""},{"lineNumber":165,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":166,"author":{"gitId":"-"},"content":"     * Criteria: must be published, publishEmail must be enabled and"},{"lineNumber":167,"author":{"gitId":"-"},"content":"     * resultsVisibleTime must be custom."},{"lineNumber":168,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":169,"author":{"gitId":"-"},"content":"     * @return returns a list of sessions that require automated emails to be"},{"lineNumber":170,"author":{"gitId":"-"},"content":"     *         sent as they are published"},{"lineNumber":171,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":172,"author":{"gitId":"-"},"content":"    public List\u003cFeedbackSessionAttributes\u003e getFeedbackSessionsWhichNeedAutomatedPublishedEmailsToBeSent() {"},{"lineNumber":173,"author":{"gitId":"-"},"content":"        List\u003cFeedbackSessionAttributes\u003e sessions \u003d fsDb.getFeedbackSessionsPossiblyNeedingPublishedEmail();"},{"lineNumber":174,"author":{"gitId":"-"},"content":"        log.info(String.format(\"Number of sessions under consideration: %d\", sessions.size()));"},{"lineNumber":175,"author":{"gitId":"-"},"content":"        List\u003cFeedbackSessionAttributes\u003e sessionsToSendEmailsFor \u003d new ArrayList\u003c\u003e();"},{"lineNumber":176,"author":{"gitId":"-"},"content":""},{"lineNumber":177,"author":{"gitId":"-"},"content":"        for (FeedbackSessionAttributes session : sessions) {"},{"lineNumber":178,"author":{"gitId":"-"},"content":"            // automated emails are required only for custom publish times"},{"lineNumber":179,"author":{"gitId":"-"},"content":"            if (session.isPublished()"},{"lineNumber":180,"author":{"gitId":"-"},"content":"                    \u0026\u0026 !TimeHelper.isSpecialTime(session.getResultsVisibleFromTime())"},{"lineNumber":181,"author":{"gitId":"-"},"content":"                    \u0026\u0026 !coursesLogic.getCourse(session.getCourseId()).isCourseDeleted()) {"},{"lineNumber":182,"author":{"gitId":"-"},"content":"                sessionsToSendEmailsFor.add(session);"},{"lineNumber":183,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":184,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":185,"author":{"gitId":"-"},"content":"        log.info(String.format(\"Number of sessions under consideration after filtering: %d\","},{"lineNumber":186,"author":{"gitId":"-"},"content":"                sessionsToSendEmailsFor.size()));"},{"lineNumber":187,"author":{"gitId":"-"},"content":"        return sessionsToSendEmailsFor;"},{"lineNumber":188,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":189,"author":{"gitId":"-"},"content":""},{"lineNumber":190,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":191,"author":{"gitId":"-"},"content":"     * Gets a list of undeleted feedback sessions which start within the last 2 hours"},{"lineNumber":192,"author":{"gitId":"-"},"content":"     * and need an open email to be sent."},{"lineNumber":193,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":194,"author":{"gitId":"-"},"content":"    public List\u003cFeedbackSessionAttributes\u003e getFeedbackSessionsWhichNeedOpenEmailsToBeSent() {"},{"lineNumber":195,"author":{"gitId":"-"},"content":"        List\u003cFeedbackSessionAttributes\u003e sessions \u003d fsDb.getFeedbackSessionsPossiblyNeedingOpenEmail();"},{"lineNumber":196,"author":{"gitId":"-"},"content":"        List\u003cFeedbackSessionAttributes\u003e sessionsToSendEmailsFor \u003d new ArrayList\u003c\u003e();"},{"lineNumber":197,"author":{"gitId":"-"},"content":"        log.info(String.format(\"Number of sessions under consideration: %d\", sessions.size()));"},{"lineNumber":198,"author":{"gitId":"-"},"content":""},{"lineNumber":199,"author":{"gitId":"-"},"content":"        for (FeedbackSessionAttributes session : sessions) {"},{"lineNumber":200,"author":{"gitId":"-"},"content":"            if (session.isOpened() \u0026\u0026 !coursesLogic.getCourse(session.getCourseId()).isCourseDeleted()) {"},{"lineNumber":201,"author":{"gitId":"-"},"content":"                sessionsToSendEmailsFor.add(session);"},{"lineNumber":202,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":203,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":204,"author":{"gitId":"-"},"content":""},{"lineNumber":205,"author":{"gitId":"-"},"content":"        log.info(String.format(\"Number of sessions under consideration after filtering: %d\","},{"lineNumber":206,"author":{"gitId":"-"},"content":"                sessionsToSendEmailsFor.size()));"},{"lineNumber":207,"author":{"gitId":"-"},"content":"        return sessionsToSendEmailsFor;"},{"lineNumber":208,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":209,"author":{"gitId":"-"},"content":""},{"lineNumber":210,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":211,"author":{"gitId":"-"},"content":"     * Returns true if the given email is the creator of the given session."},{"lineNumber":212,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":213,"author":{"gitId":"-"},"content":"    public boolean isCreatorOfSession(String feedbackSessionName, String courseId, String userEmail) {"},{"lineNumber":214,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes fs \u003d getFeedbackSession(feedbackSessionName, courseId);"},{"lineNumber":215,"author":{"gitId":"-"},"content":"        if (fs \u003d\u003d null) {"},{"lineNumber":216,"author":{"gitId":"-"},"content":"            return false;"},{"lineNumber":217,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":218,"author":{"gitId":"-"},"content":"        return fs.getCreatorEmail().equals(userEmail);"},{"lineNumber":219,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":220,"author":{"gitId":"-"},"content":""},{"lineNumber":221,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":222,"author":{"gitId":"-"},"content":"     * Checks whether a student has attempted a feedback session."},{"lineNumber":223,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":224,"author":{"gitId":"-"},"content":"     * \u003cp\u003eIf feedback session consists of all team questions, session is attempted by student only"},{"lineNumber":225,"author":{"gitId":"-"},"content":"     * if someone from the team has responded. If feedback session has some individual questions,"},{"lineNumber":226,"author":{"gitId":"-"},"content":"     * session is attempted only if the student has responded to any of the individual questions"},{"lineNumber":227,"author":{"gitId":"-"},"content":"     * (regardless of the completion status of the team questions).\u003c/p\u003e"},{"lineNumber":228,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":229,"author":{"gitId":"-"},"content":"    public boolean isFeedbackSessionAttemptedByStudent(FeedbackSessionAttributes fsa, String userEmail, String userTeam) {"},{"lineNumber":230,"author":{"gitId":"-"},"content":"        String feedbackSessionName \u003d fsa.getFeedbackSessionName();"},{"lineNumber":231,"author":{"gitId":"-"},"content":"        String courseId \u003d fsa.getCourseId();"},{"lineNumber":232,"author":{"gitId":"-"},"content":""},{"lineNumber":233,"author":{"gitId":"-"},"content":"        if (!fqLogic.sessionHasQuestions(feedbackSessionName, courseId)) {"},{"lineNumber":234,"author":{"gitId":"-"},"content":"            // if there are no questions for student, session is attempted"},{"lineNumber":235,"author":{"gitId":"-"},"content":"            return true;"},{"lineNumber":236,"author":{"gitId":"-"},"content":"        } else if (fqLogic.sessionHasQuestionsForGiverType("},{"lineNumber":237,"author":{"gitId":"-"},"content":"                feedbackSessionName, courseId, FeedbackParticipantType.STUDENTS)) {"},{"lineNumber":238,"author":{"gitId":"-"},"content":"            // case where there are some individual questions"},{"lineNumber":239,"author":{"gitId":"-"},"content":"            return frLogic.hasGiverRespondedForSession(userEmail, feedbackSessionName, courseId);"},{"lineNumber":240,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":241,"author":{"gitId":"-"},"content":"            // case where all are team questions"},{"lineNumber":242,"author":{"gitId":"-"},"content":"            return frLogic.hasGiverRespondedForSession(userTeam, feedbackSessionName, courseId);"},{"lineNumber":243,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":244,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":245,"author":{"gitId":"-"},"content":""},{"lineNumber":246,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":247,"author":{"gitId":"-"},"content":"     * Checks whether an instructor has attempted a feedback session."},{"lineNumber":248,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":249,"author":{"gitId":"-"},"content":"     * \u003cp\u003eIf there is no question for instructors, the feedback session is considered as attempted.\u003c/p\u003e"},{"lineNumber":250,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":251,"author":{"gitId":"-"},"content":"    public boolean isFeedbackSessionAttemptedByInstructor(FeedbackSessionAttributes fsa, String userEmail) {"},{"lineNumber":252,"author":{"gitId":"-"},"content":"        if (frLogic.hasGiverRespondedForSession(userEmail, fsa.getFeedbackSessionName(), fsa.getCourseId())) {"},{"lineNumber":253,"author":{"gitId":"-"},"content":"            return true;"},{"lineNumber":254,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":255,"author":{"gitId":"-"},"content":""},{"lineNumber":256,"author":{"gitId":"-"},"content":"        // if there is no question for instructor, session is attempted"},{"lineNumber":257,"author":{"gitId":"-"},"content":"        return !fqLogic.hasFeedbackQuestionsForInstructors(fsa, fsa.isCreator(userEmail));"},{"lineNumber":258,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":259,"author":{"gitId":"-"},"content":""},{"lineNumber":260,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":261,"author":{"gitId":"-"},"content":"     * Updates the details of a feedback session by {@link FeedbackSessionAttributes.UpdateOptions}."},{"lineNumber":262,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":263,"author":{"gitId":"-"},"content":"     * \u003cp\u003eAdjust email sending status if necessary."},{"lineNumber":264,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":265,"author":{"gitId":"-"},"content":"     * @return updated feedback session"},{"lineNumber":266,"author":{"gitId":"-"},"content":"     * @throws InvalidParametersException if attributes to update are not valid"},{"lineNumber":267,"author":{"gitId":"-"},"content":"     * @throws EntityDoesNotExistException if the feedback session cannot be found"},{"lineNumber":268,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":269,"author":{"gitId":"-"},"content":"    public FeedbackSessionAttributes updateFeedbackSession(FeedbackSessionAttributes.UpdateOptions updateOptions)"},{"lineNumber":270,"author":{"gitId":"-"},"content":"            throws InvalidParametersException, EntityDoesNotExistException {"},{"lineNumber":271,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes oldSession \u003d"},{"lineNumber":272,"author":{"gitId":"-"},"content":"                fsDb.getFeedbackSession(updateOptions.getCourseId(), updateOptions.getFeedbackSessionName());"},{"lineNumber":273,"author":{"gitId":"-"},"content":""},{"lineNumber":274,"author":{"gitId":"-"},"content":"        if (oldSession \u003d\u003d null) {"},{"lineNumber":275,"author":{"gitId":"-"},"content":"            throw new EntityDoesNotExistException(ERROR_NON_EXISTENT_FS_UPDATE + updateOptions.getCourseId()"},{"lineNumber":276,"author":{"gitId":"-"},"content":"                    + \"/\" + updateOptions.getFeedbackSessionName());"},{"lineNumber":277,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":278,"author":{"gitId":"-"},"content":""},{"lineNumber":279,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes newSession \u003d oldSession.getCopy();"},{"lineNumber":280,"author":{"gitId":"-"},"content":"        newSession.update(updateOptions);"},{"lineNumber":281,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes.UpdateOptions.Builder newUpdateOptions \u003d"},{"lineNumber":282,"author":{"gitId":"-"},"content":"                FeedbackSessionAttributes.updateOptionsBuilder(updateOptions);"},{"lineNumber":283,"author":{"gitId":"-"},"content":""},{"lineNumber":284,"author":{"gitId":"-"},"content":"        // adjust email sending status"},{"lineNumber":285,"author":{"gitId":"-"},"content":""},{"lineNumber":286,"author":{"gitId":"-"},"content":"        // reset sentOpenEmail if the session has opened but is being un-opened"},{"lineNumber":287,"author":{"gitId":"-"},"content":"        // now, or else leave it as sent if so."},{"lineNumber":288,"author":{"gitId":"-"},"content":"        if (oldSession.isSentOpenEmail()) {"},{"lineNumber":289,"author":{"gitId":"-"},"content":"            newUpdateOptions.withSentOpenEmail(newSession.isOpened());"},{"lineNumber":290,"author":{"gitId":"-"},"content":""},{"lineNumber":291,"author":{"gitId":"-"},"content":"            // also reset sentOpeningSoonEmail"},{"lineNumber":292,"author":{"gitId":"-"},"content":"            newUpdateOptions.withSentOpeningSoonEmail("},{"lineNumber":293,"author":{"gitId":"-"},"content":"                    newSession.isOpened()"},{"lineNumber":294,"author":{"gitId":"-"},"content":"                            || newSession.isOpeningInHours(NUMBER_OF_HOURS_BEFORE_OPENING_SOON_ALERT));"},{"lineNumber":295,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":296,"author":{"gitId":"-"},"content":""},{"lineNumber":297,"author":{"gitId":"-"},"content":"        // reset sentClosedEmail if the session has closed but is being un-closed"},{"lineNumber":298,"author":{"gitId":"-"},"content":"        // now, or else leave it as sent if so."},{"lineNumber":299,"author":{"gitId":"-"},"content":"        if (oldSession.isSentClosedEmail()) {"},{"lineNumber":300,"author":{"gitId":"-"},"content":"            newUpdateOptions.withSentClosedEmail(newSession.isClosed());"},{"lineNumber":301,"author":{"gitId":"-"},"content":""},{"lineNumber":302,"author":{"gitId":"-"},"content":"            // also reset sentClosingEmail"},{"lineNumber":303,"author":{"gitId":"-"},"content":"            newUpdateOptions.withSentClosingEmail("},{"lineNumber":304,"author":{"gitId":"-"},"content":"                    newSession.isClosed()"},{"lineNumber":305,"author":{"gitId":"-"},"content":"                            || newSession.isClosedAfter(NUMBER_OF_HOURS_BEFORE_CLOSING_ALERT));"},{"lineNumber":306,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":307,"author":{"gitId":"-"},"content":""},{"lineNumber":308,"author":{"gitId":"-"},"content":"        // reset sentPublishedEmail if the session has been published but is"},{"lineNumber":309,"author":{"gitId":"-"},"content":"        // going to be unpublished now, or else leave it as sent if so."},{"lineNumber":310,"author":{"gitId":"-"},"content":"        if (oldSession.isSentPublishedEmail()) {"},{"lineNumber":311,"author":{"gitId":"-"},"content":"            newUpdateOptions.withSentPublishedEmail(newSession.isPublished());"},{"lineNumber":312,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":313,"author":{"gitId":"-"},"content":""},{"lineNumber":314,"author":{"gitId":"-"},"content":"        return fsDb.updateFeedbackSession(newUpdateOptions.build());"},{"lineNumber":315,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":316,"author":{"gitId":"-"},"content":""},{"lineNumber":317,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":318,"author":{"gitId":"-"},"content":"     * Updates the instructor email address for all their deadlines in the feedback sessions of the given course."},{"lineNumber":319,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":320,"author":{"gitId":"-"},"content":"    public void updateFeedbackSessionsInstructorDeadlinesWithNewEmail(String courseId, String oldEmailAddress,"},{"lineNumber":321,"author":{"gitId":"-"},"content":"            String newEmailAddress) {"},{"lineNumber":322,"author":{"gitId":"-"},"content":"        updateFeedbackSessionsDeadlinesWithNewEmail(courseId, oldEmailAddress, newEmailAddress, true);"},{"lineNumber":323,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":324,"author":{"gitId":"-"},"content":""},{"lineNumber":325,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":326,"author":{"gitId":"-"},"content":"     * Updates the student email address for all their deadlines in the feedback sessions of the given course."},{"lineNumber":327,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":328,"author":{"gitId":"-"},"content":"    public void updateFeedbackSessionsStudentDeadlinesWithNewEmail(String courseId, String oldEmailAddress,"},{"lineNumber":329,"author":{"gitId":"-"},"content":"            String newEmailAddress) {"},{"lineNumber":330,"author":{"gitId":"-"},"content":"        updateFeedbackSessionsDeadlinesWithNewEmail(courseId, oldEmailAddress, newEmailAddress, false);"},{"lineNumber":331,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":332,"author":{"gitId":"-"},"content":""},{"lineNumber":333,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":334,"author":{"gitId":"-"},"content":"     * Deletes the instructor email address for all their deadlines in the feedback sessions of the given course."},{"lineNumber":335,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":336,"author":{"gitId":"-"},"content":"    public void deleteFeedbackSessionsDeadlinesForInstructor(String courseId, String emailAddress) {"},{"lineNumber":337,"author":{"gitId":"-"},"content":"        deleteFeedbackSessionsDeadlinesForUser(courseId, emailAddress, true);"},{"lineNumber":338,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":339,"author":{"gitId":"-"},"content":""},{"lineNumber":340,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":341,"author":{"gitId":"-"},"content":"     * Deletes the student email address for all their deadlines in the feedback sessions of the given course."},{"lineNumber":342,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":343,"author":{"gitId":"-"},"content":"    public void deleteFeedbackSessionsDeadlinesForStudent(String courseId, String emailAddress) {"},{"lineNumber":344,"author":{"gitId":"-"},"content":"        deleteFeedbackSessionsDeadlinesForUser(courseId, emailAddress, false);"},{"lineNumber":345,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":346,"author":{"gitId":"-"},"content":""},{"lineNumber":347,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":348,"author":{"gitId":"-"},"content":"     * Updates all feedback sessions of {@code courseId} to have be in {@code courseTimeZone}."},{"lineNumber":349,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":350,"author":{"gitId":"-"},"content":"    public void updateFeedbackSessionsTimeZoneForCourse(String courseId, String courseTimeZone) {"},{"lineNumber":351,"author":{"gitId":"-"},"content":"        assert courseId !\u003d null;"},{"lineNumber":352,"author":{"gitId":"-"},"content":"        assert courseTimeZone !\u003d null;"},{"lineNumber":353,"author":{"gitId":"-"},"content":""},{"lineNumber":354,"author":{"gitId":"-"},"content":"        List\u003cFeedbackSessionAttributes\u003e fsForCourse \u003d fsDb.getFeedbackSessionsForCourse(courseId);"},{"lineNumber":355,"author":{"gitId":"-"},"content":"        fsForCourse.forEach(fs -\u003e {"},{"lineNumber":356,"author":{"gitId":"-"},"content":"            try {"},{"lineNumber":357,"author":{"gitId":"-"},"content":"                fsDb.updateFeedbackSession("},{"lineNumber":358,"author":{"gitId":"-"},"content":"                        FeedbackSessionAttributes.updateOptionsBuilder(fs.getFeedbackSessionName(), fs.getCourseId())"},{"lineNumber":359,"author":{"gitId":"-"},"content":"                                .withTimeZone(courseTimeZone)"},{"lineNumber":360,"author":{"gitId":"-"},"content":"                                .build());"},{"lineNumber":361,"author":{"gitId":"-"},"content":"            } catch (EntityDoesNotExistException | InvalidParametersException e) {"},{"lineNumber":362,"author":{"gitId":"-"},"content":"                log.severe(\"Cannot adjust timezone of courses: \" + e.getMessage());"},{"lineNumber":363,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":364,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":365,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":366,"author":{"gitId":"-"},"content":""},{"lineNumber":367,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":368,"author":{"gitId":"-"},"content":"     * Publishes a feedback session."},{"lineNumber":369,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":370,"author":{"gitId":"-"},"content":"     * @return the published feedback session"},{"lineNumber":371,"author":{"gitId":"-"},"content":"     * @throws InvalidParametersException if session is already published"},{"lineNumber":372,"author":{"gitId":"-"},"content":"     * @throws EntityDoesNotExistException if the feedback session cannot be found"},{"lineNumber":373,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":374,"author":{"gitId":"-"},"content":"    public FeedbackSessionAttributes publishFeedbackSession(String feedbackSessionName, String courseId)"},{"lineNumber":375,"author":{"gitId":"-"},"content":"            throws EntityDoesNotExistException, InvalidParametersException {"},{"lineNumber":376,"author":{"gitId":"-"},"content":""},{"lineNumber":377,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes sessionToPublish \u003d getFeedbackSession(feedbackSessionName, courseId);"},{"lineNumber":378,"author":{"gitId":"-"},"content":""},{"lineNumber":379,"author":{"gitId":"-"},"content":"        if (sessionToPublish \u003d\u003d null) {"},{"lineNumber":380,"author":{"gitId":"-"},"content":"            throw new EntityDoesNotExistException(ERROR_NON_EXISTENT_FS_UPDATE + courseId + \"/\" + feedbackSessionName);"},{"lineNumber":381,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":382,"author":{"gitId":"-"},"content":"        if (sessionToPublish.isPublished()) {"},{"lineNumber":383,"author":{"gitId":"-"},"content":"            throw new InvalidParametersException(ERROR_FS_ALREADY_PUBLISH);"},{"lineNumber":384,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":385,"author":{"gitId":"-"},"content":""},{"lineNumber":386,"author":{"gitId":"-"},"content":"        return updateFeedbackSession("},{"lineNumber":387,"author":{"gitId":"-"},"content":"                FeedbackSessionAttributes"},{"lineNumber":388,"author":{"gitId":"-"},"content":"                        .updateOptionsBuilder(sessionToPublish.getFeedbackSessionName(), sessionToPublish.getCourseId())"},{"lineNumber":389,"author":{"gitId":"-"},"content":"                        .withResultsVisibleFromTime(Instant.now())"},{"lineNumber":390,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":391,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":392,"author":{"gitId":"-"},"content":""},{"lineNumber":393,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":394,"author":{"gitId":"-"},"content":"     * Unpublishes a feedback session."},{"lineNumber":395,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":396,"author":{"gitId":"-"},"content":"     * @return the unpublished feedback session"},{"lineNumber":397,"author":{"gitId":"-"},"content":"     * @throws InvalidParametersException if session is already unpublished"},{"lineNumber":398,"author":{"gitId":"-"},"content":"     * @throws EntityDoesNotExistException if the feedback session cannot be found"},{"lineNumber":399,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":400,"author":{"gitId":"-"},"content":"    public FeedbackSessionAttributes unpublishFeedbackSession(String feedbackSessionName, String courseId)"},{"lineNumber":401,"author":{"gitId":"-"},"content":"            throws EntityDoesNotExistException, InvalidParametersException {"},{"lineNumber":402,"author":{"gitId":"-"},"content":""},{"lineNumber":403,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes sessionToUnpublish \u003d getFeedbackSession(feedbackSessionName, courseId);"},{"lineNumber":404,"author":{"gitId":"-"},"content":""},{"lineNumber":405,"author":{"gitId":"-"},"content":"        if (sessionToUnpublish \u003d\u003d null) {"},{"lineNumber":406,"author":{"gitId":"-"},"content":"            throw new EntityDoesNotExistException(ERROR_NON_EXISTENT_FS_UPDATE + courseId + \"/\" + feedbackSessionName);"},{"lineNumber":407,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":408,"author":{"gitId":"-"},"content":"        if (!sessionToUnpublish.isPublished()) {"},{"lineNumber":409,"author":{"gitId":"-"},"content":"            throw new InvalidParametersException(ERROR_FS_ALREADY_UNPUBLISH);"},{"lineNumber":410,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":411,"author":{"gitId":"-"},"content":""},{"lineNumber":412,"author":{"gitId":"-"},"content":"        return updateFeedbackSession("},{"lineNumber":413,"author":{"gitId":"-"},"content":"                FeedbackSessionAttributes"},{"lineNumber":414,"author":{"gitId":"-"},"content":"                        .updateOptionsBuilder(sessionToUnpublish.getFeedbackSessionName(), sessionToUnpublish.getCourseId())"},{"lineNumber":415,"author":{"gitId":"-"},"content":"                        .withResultsVisibleFromTime(Const.TIME_REPRESENTS_LATER)"},{"lineNumber":416,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":417,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":418,"author":{"gitId":"-"},"content":""},{"lineNumber":419,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":420,"author":{"gitId":"-"},"content":"     * Returns returns a list of sessions that are going to open in 24 hours."},{"lineNumber":421,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":422,"author":{"gitId":"-"},"content":"    public List\u003cFeedbackSessionAttributes\u003e getFeedbackSessionsOpeningWithinTimeLimit() {"},{"lineNumber":423,"author":{"gitId":"-"},"content":"        List\u003cFeedbackSessionAttributes\u003e requiredSessions \u003d new ArrayList\u003c\u003e();"},{"lineNumber":424,"author":{"gitId":"-"},"content":""},{"lineNumber":425,"author":{"gitId":"-"},"content":"        List\u003cFeedbackSessionAttributes\u003e sessions \u003d fsDb.getFeedbackSessionsPossiblyNeedingOpeningSoonEmail();"},{"lineNumber":426,"author":{"gitId":"-"},"content":"        log.info(String.format(\"Number of sessions under consideration: %d\", sessions.size()));"},{"lineNumber":427,"author":{"gitId":"-"},"content":""},{"lineNumber":428,"author":{"gitId":"-"},"content":"        for (FeedbackSessionAttributes session : sessions) {"},{"lineNumber":429,"author":{"gitId":"-"},"content":"            if (session.isOpeningWithinTimeLimit(NUMBER_OF_HOURS_BEFORE_OPENING_SOON_ALERT)"},{"lineNumber":430,"author":{"gitId":"-"},"content":"                    \u0026\u0026 !coursesLogic.getCourse(session.getCourseId()).isCourseDeleted()) {"},{"lineNumber":431,"author":{"gitId":"-"},"content":"                requiredSessions.add(session);"},{"lineNumber":432,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":433,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":434,"author":{"gitId":"-"},"content":""},{"lineNumber":435,"author":{"gitId":"-"},"content":"        log.info(String.format(\"Number of sessions under consideration after filtering: %d\","},{"lineNumber":436,"author":{"gitId":"-"},"content":"                requiredSessions.size()));"},{"lineNumber":437,"author":{"gitId":"-"},"content":"        return requiredSessions;"},{"lineNumber":438,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":439,"author":{"gitId":"-"},"content":""},{"lineNumber":440,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":441,"author":{"gitId":"-"},"content":"     * Returns returns a list of sessions that are going to close within the next 24 hours."},{"lineNumber":442,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":443,"author":{"gitId":"-"},"content":"    public List\u003cFeedbackSessionAttributes\u003e getFeedbackSessionsClosingWithinTimeLimit() {"},{"lineNumber":444,"author":{"gitId":"-"},"content":"        List\u003cFeedbackSessionAttributes\u003e requiredSessions \u003d new ArrayList\u003c\u003e();"},{"lineNumber":445,"author":{"gitId":"-"},"content":""},{"lineNumber":446,"author":{"gitId":"-"},"content":"        List\u003cFeedbackSessionAttributes\u003e sessions \u003d fsDb.getFeedbackSessionsPossiblyNeedingClosingEmail();"},{"lineNumber":447,"author":{"gitId":"-"},"content":"        log.info(String.format(\"Number of sessions under consideration: %d\", sessions.size()));"},{"lineNumber":448,"author":{"gitId":"-"},"content":""},{"lineNumber":449,"author":{"gitId":"-"},"content":"        for (FeedbackSessionAttributes session : sessions) {"},{"lineNumber":450,"author":{"gitId":"-"},"content":"            if (session.isClosingWithinTimeLimit(NUMBER_OF_HOURS_BEFORE_CLOSING_ALERT)"},{"lineNumber":451,"author":{"gitId":"-"},"content":"                    \u0026\u0026 !coursesLogic.getCourse(session.getCourseId()).isCourseDeleted()) {"},{"lineNumber":452,"author":{"gitId":"-"},"content":"                requiredSessions.add(session);"},{"lineNumber":453,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":454,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":455,"author":{"gitId":"-"},"content":""},{"lineNumber":456,"author":{"gitId":"-"},"content":"        log.info(String.format(\"Number of sessions under consideration after filtering: %d\","},{"lineNumber":457,"author":{"gitId":"-"},"content":"                requiredSessions.size()));"},{"lineNumber":458,"author":{"gitId":"-"},"content":"        return requiredSessions;"},{"lineNumber":459,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":460,"author":{"gitId":"-"},"content":""},{"lineNumber":461,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":462,"author":{"gitId":"-"},"content":"     * Returns returns a list of sessions that were closed within past hour."},{"lineNumber":463,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":464,"author":{"gitId":"-"},"content":"    public List\u003cFeedbackSessionAttributes\u003e getFeedbackSessionsClosedWithinThePastHour() {"},{"lineNumber":465,"author":{"gitId":"-"},"content":"        List\u003cFeedbackSessionAttributes\u003e requiredSessions \u003d new ArrayList\u003c\u003e();"},{"lineNumber":466,"author":{"gitId":"-"},"content":"        List\u003cFeedbackSessionAttributes\u003e sessions \u003d fsDb.getFeedbackSessionsPossiblyNeedingClosedEmail();"},{"lineNumber":467,"author":{"gitId":"-"},"content":"        log.info(String.format(\"Number of sessions under consideration: %d\", sessions.size()));"},{"lineNumber":468,"author":{"gitId":"-"},"content":""},{"lineNumber":469,"author":{"gitId":"-"},"content":"        for (FeedbackSessionAttributes session : sessions) {"},{"lineNumber":470,"author":{"gitId":"-"},"content":"            // is session closed in the past 1 hour"},{"lineNumber":471,"author":{"gitId":"-"},"content":"            if (session.isClosedWithinPastHour()"},{"lineNumber":472,"author":{"gitId":"-"},"content":"                    \u0026\u0026 !coursesLogic.getCourse(session.getCourseId()).isCourseDeleted()) {"},{"lineNumber":473,"author":{"gitId":"-"},"content":"                requiredSessions.add(session);"},{"lineNumber":474,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":475,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":476,"author":{"gitId":"-"},"content":"        log.info(String.format(\"Number of sessions under consideration after filtering: %d\","},{"lineNumber":477,"author":{"gitId":"-"},"content":"                requiredSessions.size()));"},{"lineNumber":478,"author":{"gitId":"-"},"content":"        return requiredSessions;"},{"lineNumber":479,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":480,"author":{"gitId":"-"},"content":""},{"lineNumber":481,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":482,"author":{"gitId":"-"},"content":"     * Deletes a feedback session cascade to its associated questions, responses, deadline extensions and comments."},{"lineNumber":483,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":484,"author":{"gitId":"-"},"content":"    public void deleteFeedbackSessionCascade(String feedbackSessionName, String courseId) {"},{"lineNumber":485,"author":{"gitId":"-"},"content":"        AttributesDeletionQuery query \u003d AttributesDeletionQuery.builder()"},{"lineNumber":486,"author":{"gitId":"-"},"content":"                .withCourseId(courseId)"},{"lineNumber":487,"author":{"gitId":"-"},"content":"                .withFeedbackSessionName(feedbackSessionName)"},{"lineNumber":488,"author":{"gitId":"-"},"content":"                .build();"},{"lineNumber":489,"author":{"gitId":"-"},"content":"        frcLogic.deleteFeedbackResponseComments(query);"},{"lineNumber":490,"author":{"gitId":"-"},"content":"        frLogic.deleteFeedbackResponses(query);"},{"lineNumber":491,"author":{"gitId":"-"},"content":"        fqLogic.deleteFeedbackQuestions(query);"},{"lineNumber":492,"author":{"gitId":"-"},"content":"        deLogic.deleteDeadlineExtensions(query);"},{"lineNumber":493,"author":{"gitId":"-"},"content":""},{"lineNumber":494,"author":{"gitId":"-"},"content":"        fsDb.deleteFeedbackSession(feedbackSessionName, courseId);"},{"lineNumber":495,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":496,"author":{"gitId":"-"},"content":""},{"lineNumber":497,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":498,"author":{"gitId":"-"},"content":"     * Deletes sessions using {@link AttributesDeletionQuery}."},{"lineNumber":499,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":500,"author":{"gitId":"-"},"content":"    public void deleteFeedbackSessions(AttributesDeletionQuery query) {"},{"lineNumber":501,"author":{"gitId":"-"},"content":"        fsDb.deleteFeedbackSessions(query);"},{"lineNumber":502,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":503,"author":{"gitId":"-"},"content":""},{"lineNumber":504,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":505,"author":{"gitId":"-"},"content":"     * Soft-deletes a specific feedback session to Recycle Bin."},{"lineNumber":506,"author":{"gitId":"-"},"content":"     * @return the time when the feedback session is moved to the recycle bin"},{"lineNumber":507,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":508,"author":{"gitId":"-"},"content":"    public Instant moveFeedbackSessionToRecycleBin(String feedbackSessionName, String courseId)"},{"lineNumber":509,"author":{"gitId":"-"},"content":"            throws EntityDoesNotExistException {"},{"lineNumber":510,"author":{"gitId":"-"},"content":""},{"lineNumber":511,"author":{"gitId":"-"},"content":"        return fsDb.softDeleteFeedbackSession(feedbackSessionName, courseId);"},{"lineNumber":512,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":513,"author":{"gitId":"-"},"content":""},{"lineNumber":514,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":515,"author":{"gitId":"-"},"content":"     * Restores a specific feedback session from Recycle Bin."},{"lineNumber":516,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":517,"author":{"gitId":"-"},"content":"    public void restoreFeedbackSessionFromRecycleBin(String feedbackSessionName, String courseId)"},{"lineNumber":518,"author":{"gitId":"-"},"content":"            throws EntityDoesNotExistException {"},{"lineNumber":519,"author":{"gitId":"-"},"content":"        fsDb.restoreDeletedFeedbackSession(feedbackSessionName, courseId);"},{"lineNumber":520,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":521,"author":{"gitId":"-"},"content":""},{"lineNumber":522,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":523,"author":{"gitId":"-"},"content":"     * Gets the expected number of submissions for a feedback session."},{"lineNumber":524,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":525,"author":{"gitId":"-"},"content":"    public int getExpectedTotalSubmission(FeedbackSessionAttributes fsa) {"},{"lineNumber":526,"author":{"gitId":"-"},"content":"        int expectedTotal \u003d 0;"},{"lineNumber":527,"author":{"gitId":"-"},"content":""},{"lineNumber":528,"author":{"gitId":"-"},"content":"        if (fqLogic.hasFeedbackQuestionsForStudents(fsa)) {"},{"lineNumber":529,"author":{"gitId":"-"},"content":"            expectedTotal +\u003d studentsLogic.getNumberOfStudentsForCourse(fsa.getCourseId());"},{"lineNumber":530,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":531,"author":{"gitId":"-"},"content":""},{"lineNumber":532,"author":{"gitId":"-"},"content":"        // Pre-flight check to ensure there are questions for instructors."},{"lineNumber":533,"author":{"gitId":"-"},"content":"        if (!fqLogic.hasFeedbackQuestionsForInstructors(fsa, true)) {"},{"lineNumber":534,"author":{"gitId":"-"},"content":"            return expectedTotal;"},{"lineNumber":535,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":536,"author":{"gitId":"-"},"content":""},{"lineNumber":537,"author":{"gitId":"-"},"content":"        List\u003cString\u003e instructorEmails \u003d instructorsLogic.getInstructorEmailsForCourse(fsa.getCourseId());"},{"lineNumber":538,"author":{"gitId":"-"},"content":"        if (instructorEmails.isEmpty()) {"},{"lineNumber":539,"author":{"gitId":"-"},"content":"            return expectedTotal;"},{"lineNumber":540,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":541,"author":{"gitId":"-"},"content":""},{"lineNumber":542,"author":{"gitId":"-"},"content":"        // Check presence of questions for instructors."},{"lineNumber":543,"author":{"gitId":"-"},"content":"        if (fqLogic.hasFeedbackQuestionsForInstructors(fsa, false)) {"},{"lineNumber":544,"author":{"gitId":"-"},"content":"            expectedTotal +\u003d instructorEmails.size();"},{"lineNumber":545,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":546,"author":{"gitId":"-"},"content":"            // No questions for instructors. There must be questions for creator."},{"lineNumber":547,"author":{"gitId":"-"},"content":"            List\u003cString\u003e creatorEmails \u003d instructorEmails.stream()"},{"lineNumber":548,"author":{"gitId":"-"},"content":"                    .filter(fsa::isCreator)"},{"lineNumber":549,"author":{"gitId":"-"},"content":"                    .collect(Collectors.toList());"},{"lineNumber":550,"author":{"gitId":"-"},"content":"            expectedTotal +\u003d creatorEmails.size();"},{"lineNumber":551,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":552,"author":{"gitId":"-"},"content":""},{"lineNumber":553,"author":{"gitId":"-"},"content":"        return expectedTotal;"},{"lineNumber":554,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":555,"author":{"gitId":"-"},"content":""},{"lineNumber":556,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":557,"author":{"gitId":"-"},"content":"     * Gets the actual number of submissions for a feedback session."},{"lineNumber":558,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":559,"author":{"gitId":"-"},"content":"    public int getActualTotalSubmission(FeedbackSessionAttributes fsa) {"},{"lineNumber":560,"author":{"gitId":"-"},"content":"        return frLogic.getGiverSetThatAnswerFeedbackSession(fsa.getCourseId(), fsa.getFeedbackSessionName()).size();"},{"lineNumber":561,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":562,"author":{"gitId":"-"},"content":""},{"lineNumber":563,"author":{"gitId":"-"},"content":"    private List\u003cFeedbackSessionAttributes\u003e getFeedbackSessionsListForCourse(String courseId) {"},{"lineNumber":564,"author":{"gitId":"-"},"content":""},{"lineNumber":565,"author":{"gitId":"-"},"content":"        return fsDb.getFeedbackSessionsForCourse(courseId);"},{"lineNumber":566,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":567,"author":{"gitId":"-"},"content":""},{"lineNumber":568,"author":{"gitId":"-"},"content":"    private List\u003cFeedbackSessionAttributes\u003e getSoftDeletedFeedbackSessionsListForCourse(String courseId) {"},{"lineNumber":569,"author":{"gitId":"-"},"content":""},{"lineNumber":570,"author":{"gitId":"-"},"content":"        return fsDb.getSoftDeletedFeedbackSessionsForCourse(courseId);"},{"lineNumber":571,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":572,"author":{"gitId":"-"},"content":""},{"lineNumber":573,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":574,"author":{"gitId":"-"},"content":"     * Returns true if the feedback session is viewable by the given user type (students/instructors)."},{"lineNumber":575,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":576,"author":{"gitId":"-"},"content":"    public boolean isFeedbackSessionViewableToUserType(FeedbackSessionAttributes session, boolean isInstructor) {"},{"lineNumber":577,"author":{"gitId":"-"},"content":"        // Allow user to view the feedback session if there are questions for them"},{"lineNumber":578,"author":{"gitId":"-"},"content":"        if (isFeedbackSessionForUserTypeToAnswer(session, isInstructor)) {"},{"lineNumber":579,"author":{"gitId":"-"},"content":"            return true;"},{"lineNumber":580,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":581,"author":{"gitId":"-"},"content":""},{"lineNumber":582,"author":{"gitId":"-"},"content":"        // Allow user to view the feedback session if there are any question whose responses are visible to the user"},{"lineNumber":583,"author":{"gitId":"-"},"content":"        List\u003cFeedbackQuestionAttributes\u003e questionsWithVisibleResponses \u003d new ArrayList\u003c\u003e();"},{"lineNumber":584,"author":{"gitId":"-"},"content":"        List\u003cFeedbackQuestionAttributes\u003e questionsForUser \u003d"},{"lineNumber":585,"author":{"gitId":"-"},"content":"                fqLogic.getFeedbackQuestionsForSession(session.getFeedbackSessionName(), session.getCourseId());"},{"lineNumber":586,"author":{"gitId":"-"},"content":"        for (FeedbackQuestionAttributes question : questionsForUser) {"},{"lineNumber":587,"author":{"gitId":"-"},"content":"            if (!isInstructor \u0026\u0026 frLogic.isResponseOfFeedbackQuestionVisibleToStudent(question)"},{"lineNumber":588,"author":{"gitId":"-"},"content":"                    || isInstructor \u0026\u0026 frLogic.isResponseOfFeedbackQuestionVisibleToInstructor(question)) {"},{"lineNumber":589,"author":{"gitId":"-"},"content":"                // We only need one question with visible responses for the entire session to be visible"},{"lineNumber":590,"author":{"gitId":"-"},"content":"                questionsWithVisibleResponses.add(question);"},{"lineNumber":591,"author":{"gitId":"-"},"content":"                break;"},{"lineNumber":592,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":593,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":594,"author":{"gitId":"-"},"content":""},{"lineNumber":595,"author":{"gitId":"-"},"content":"        return session.isVisible() \u0026\u0026 !questionsWithVisibleResponses.isEmpty();"},{"lineNumber":596,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":597,"author":{"gitId":"-"},"content":""},{"lineNumber":598,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":599,"author":{"gitId":"-"},"content":"     * Returns true if there are any questions for the specified user type (students/instructors) to answer."},{"lineNumber":600,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":601,"author":{"gitId":"-"},"content":"    public boolean isFeedbackSessionForUserTypeToAnswer(FeedbackSessionAttributes session, boolean isInstructor) {"},{"lineNumber":602,"author":{"gitId":"-"},"content":"        if (!session.isVisible()) {"},{"lineNumber":603,"author":{"gitId":"-"},"content":"            return false;"},{"lineNumber":604,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":605,"author":{"gitId":"-"},"content":""},{"lineNumber":606,"author":{"gitId":"-"},"content":"        return isInstructor"},{"lineNumber":607,"author":{"gitId":"-"},"content":"                ? fqLogic.hasFeedbackQuestionsForInstructors(session, false)"},{"lineNumber":608,"author":{"gitId":"-"},"content":"                : fqLogic.hasFeedbackQuestionsForStudents(session);"},{"lineNumber":609,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":610,"author":{"gitId":"-"},"content":""},{"lineNumber":611,"author":{"gitId":"-"},"content":"    private void updateFeedbackSessionsDeadlinesWithNewEmail(String courseId, String oldEmailAddress,"},{"lineNumber":612,"author":{"gitId":"-"},"content":"            String newEmailAddress, boolean isInstructor) {"},{"lineNumber":613,"author":{"gitId":"-"},"content":"        if (oldEmailAddress.equals(newEmailAddress)) {"},{"lineNumber":614,"author":{"gitId":"-"},"content":"            return;"},{"lineNumber":615,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":616,"author":{"gitId":"-"},"content":"        updateFeedbackSessionsDeadlinesForUser(courseId, oldEmailAddress, isInstructor,"},{"lineNumber":617,"author":{"gitId":"-"},"content":"                deadlines -\u003e deadlines.put(newEmailAddress, deadlines.remove(oldEmailAddress)));"},{"lineNumber":618,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":619,"author":{"gitId":"-"},"content":""},{"lineNumber":620,"author":{"gitId":"-"},"content":"    private void deleteFeedbackSessionsDeadlinesForUser(String courseId, String emailAddress, boolean isInstructor) {"},{"lineNumber":621,"author":{"gitId":"-"},"content":"        updateFeedbackSessionsDeadlinesForUser(courseId, emailAddress, isInstructor,"},{"lineNumber":622,"author":{"gitId":"-"},"content":"                deadlines -\u003e deadlines.remove(emailAddress));"},{"lineNumber":623,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":624,"author":{"gitId":"-"},"content":""},{"lineNumber":625,"author":{"gitId":"-"},"content":"    private void updateFeedbackSessionsDeadlinesForUser(String courseId, String emailAddress, boolean isInstructor,"},{"lineNumber":626,"author":{"gitId":"-"},"content":"            Consumer\u003cMap\u003cString, Instant\u003e\u003e deadlinesUpdater) {"},{"lineNumber":627,"author":{"gitId":"-"},"content":"        List\u003cFeedbackSessionAttributes\u003e feedbackSessions \u003d fsDb.getFeedbackSessionsForCourse(courseId);"},{"lineNumber":628,"author":{"gitId":"-"},"content":"        feedbackSessions.forEach(feedbackSession -\u003e {"},{"lineNumber":629,"author":{"gitId":"-"},"content":"            FeedbackSessionAttributes.UpdateOptions.Builder updateOptionsBuilder \u003d FeedbackSessionAttributes"},{"lineNumber":630,"author":{"gitId":"-"},"content":"                    .updateOptionsBuilder(feedbackSession.getFeedbackSessionName(), courseId);"},{"lineNumber":631,"author":{"gitId":"-"},"content":"            if (isInstructor) {"},{"lineNumber":632,"author":{"gitId":"-"},"content":"                Map\u003cString, Instant\u003e instructorDeadlines \u003d feedbackSession.getInstructorDeadlines();"},{"lineNumber":633,"author":{"gitId":"-"},"content":"                if (!instructorDeadlines.containsKey(emailAddress)) {"},{"lineNumber":634,"author":{"gitId":"-"},"content":"                    return;"},{"lineNumber":635,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":636,"author":{"gitId":"cedricongjh"},"content":"                Map\u003cString, Instant\u003e newInstructorDeadlines \u003d new HashMap\u003c\u003e(instructorDeadlines);"},{"lineNumber":637,"author":{"gitId":"cedricongjh"},"content":"                deadlinesUpdater.accept(newInstructorDeadlines);"},{"lineNumber":638,"author":{"gitId":"cedricongjh"},"content":"                updateOptionsBuilder.withInstructorDeadlines(newInstructorDeadlines);"},{"lineNumber":639,"author":{"gitId":"-"},"content":"            } else {"},{"lineNumber":640,"author":{"gitId":"-"},"content":"                Map\u003cString, Instant\u003e studentDeadlines \u003d feedbackSession.getStudentDeadlines();"},{"lineNumber":641,"author":{"gitId":"-"},"content":"                if (!studentDeadlines.containsKey(emailAddress)) {"},{"lineNumber":642,"author":{"gitId":"-"},"content":"                    return;"},{"lineNumber":643,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":644,"author":{"gitId":"cedricongjh"},"content":"                Map\u003cString, Instant\u003e newStudentDeadlines \u003d new HashMap\u003c\u003e(studentDeadlines);"},{"lineNumber":645,"author":{"gitId":"cedricongjh"},"content":"                deadlinesUpdater.accept(newStudentDeadlines);"},{"lineNumber":646,"author":{"gitId":"cedricongjh"},"content":"                updateOptionsBuilder.withStudentDeadlines(newStudentDeadlines);"},{"lineNumber":647,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":648,"author":{"gitId":"-"},"content":"            try {"},{"lineNumber":649,"author":{"gitId":"-"},"content":"                fsDb.updateFeedbackSession(updateOptionsBuilder.build());"},{"lineNumber":650,"author":{"gitId":"-"},"content":"            } catch (InvalidParametersException | EntityDoesNotExistException e) {"},{"lineNumber":651,"author":{"gitId":"-"},"content":"                // Both Exceptions should not be thrown."},{"lineNumber":652,"author":{"gitId":"-"},"content":"                log.severe(\"Unexpected error\", e);"},{"lineNumber":653,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":654,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":655,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":656,"author":{"gitId":"-"},"content":""},{"lineNumber":657,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"cedricongjh":7,"-":650}},{"path":"src/test/java/teammates/logic/core/FeedbackResponsesLogicTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.logic.core;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.util.ArrayList;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.util.Arrays;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.util.Collections;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import java.util.Comparator;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import java.util.HashMap;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import java.util.HashSet;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import java.util.Map;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import java.util.Set;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import java.util.stream.Collectors;"},{"lineNumber":13,"author":{"gitId":"-"},"content":""},{"lineNumber":14,"author":{"gitId":"-"},"content":"import org.testng.annotations.BeforeMethod;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import org.testng.annotations.Test;"},{"lineNumber":16,"author":{"gitId":"-"},"content":""},{"lineNumber":17,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.AttributesDeletionQuery;"},{"lineNumber":18,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.CourseRoster;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.DataBundle;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.FeedbackParticipantType;"},{"lineNumber":21,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.FeedbackResultFetchType;"},{"lineNumber":22,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.SessionResultsBundle;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackResponseAttributes;"},{"lineNumber":25,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackResponseCommentAttributes;"},{"lineNumber":26,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackSessionAttributes;"},{"lineNumber":27,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.InstructorAttributes;"},{"lineNumber":28,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.StudentAttributes;"},{"lineNumber":29,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackQuestionType;"},{"lineNumber":30,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackRankRecipientsResponseDetails;"},{"lineNumber":31,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackResponseDetails;"},{"lineNumber":32,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackTextResponseDetails;"},{"lineNumber":33,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":34,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":35,"author":{"gitId":"-"},"content":"import teammates.test.AssertHelper;"},{"lineNumber":36,"author":{"gitId":"-"},"content":""},{"lineNumber":37,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":38,"author":{"gitId":"-"},"content":" * SUT: {@link FeedbackResponsesLogic}."},{"lineNumber":39,"author":{"gitId":"-"},"content":" */"},{"lineNumber":40,"author":{"gitId":"-"},"content":"public class FeedbackResponsesLogicTest extends BaseLogicTest {"},{"lineNumber":41,"author":{"gitId":"-"},"content":""},{"lineNumber":42,"author":{"gitId":"-"},"content":"    private final FeedbackSessionsLogic fsLogic \u003d FeedbackSessionsLogic.inst();"},{"lineNumber":43,"author":{"gitId":"-"},"content":"    private final FeedbackQuestionsLogic fqLogic \u003d FeedbackQuestionsLogic.inst();"},{"lineNumber":44,"author":{"gitId":"-"},"content":"    private final FeedbackResponsesLogic frLogic \u003d FeedbackResponsesLogic.inst();"},{"lineNumber":45,"author":{"gitId":"-"},"content":"    private final FeedbackResponseCommentsLogic frcLogic \u003d FeedbackResponseCommentsLogic.inst();"},{"lineNumber":46,"author":{"gitId":"-"},"content":"    private final InstructorsLogic instructorsLogic \u003d InstructorsLogic.inst();"},{"lineNumber":47,"author":{"gitId":"-"},"content":"    private final StudentsLogic studentsLogic \u003d StudentsLogic.inst();"},{"lineNumber":48,"author":{"gitId":"-"},"content":""},{"lineNumber":49,"author":{"gitId":"-"},"content":"    private DataBundle questionTypeBundle;"},{"lineNumber":50,"author":{"gitId":"-"},"content":"    private DataBundle responseVisibilityBundle;"},{"lineNumber":51,"author":{"gitId":"-"},"content":""},{"lineNumber":52,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":53,"author":{"gitId":"-"},"content":"    protected void prepareTestData() {"},{"lineNumber":54,"author":{"gitId":"-"},"content":"        // test data is refreshed before each test case"},{"lineNumber":55,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":56,"author":{"gitId":"-"},"content":""},{"lineNumber":57,"author":{"gitId":"-"},"content":"    @BeforeMethod"},{"lineNumber":58,"author":{"gitId":"-"},"content":"    public void refreshTestData() {"},{"lineNumber":59,"author":{"gitId":"-"},"content":"        dataBundle \u003d getTypicalDataBundle();"},{"lineNumber":60,"author":{"gitId":"-"},"content":"        questionTypeBundle \u003d loadDataBundle(\"/FeedbackSessionQuestionTypeTest.json\");"},{"lineNumber":61,"author":{"gitId":"-"},"content":"        responseVisibilityBundle \u003d loadDataBundle(\"/FeedbackResponseVisibilityTest.json\");"},{"lineNumber":62,"author":{"gitId":"-"},"content":""},{"lineNumber":63,"author":{"gitId":"-"},"content":"        removeAndRestoreTypicalDataBundle();"},{"lineNumber":64,"author":{"gitId":"-"},"content":"        // extra test data used on top of typical data bundle"},{"lineNumber":65,"author":{"gitId":"-"},"content":"        removeAndRestoreDataBundle(loadDataBundle(\"/SpecialCharacterTest.json\"));"},{"lineNumber":66,"author":{"gitId":"-"},"content":"        removeAndRestoreDataBundle(questionTypeBundle);"},{"lineNumber":67,"author":{"gitId":"-"},"content":"        removeAndRestoreDataBundle(responseVisibilityBundle);"},{"lineNumber":68,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":69,"author":{"gitId":"-"},"content":""},{"lineNumber":70,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":71,"author":{"gitId":"-"},"content":"    public void testAreThereResponsesForQuestion() {"},{"lineNumber":72,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes questionWithResponse;"},{"lineNumber":73,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes questionWithoutResponse;"},{"lineNumber":74,"author":{"gitId":"-"},"content":""},{"lineNumber":75,"author":{"gitId":"-"},"content":"        ______TS(\"Check that a question has some responses\");"},{"lineNumber":76,"author":{"gitId":"-"},"content":""},{"lineNumber":77,"author":{"gitId":"-"},"content":"        questionWithResponse \u003d getQuestionFromDatabase(\"qn1InSession1InCourse2\");"},{"lineNumber":78,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.areThereResponsesForQuestion(questionWithResponse.getId()));"},{"lineNumber":79,"author":{"gitId":"-"},"content":""},{"lineNumber":80,"author":{"gitId":"-"},"content":"        ______TS(\"Check that a question has no responses\");"},{"lineNumber":81,"author":{"gitId":"-"},"content":""},{"lineNumber":82,"author":{"gitId":"-"},"content":"        questionWithoutResponse \u003d getQuestionFromDatabase(\"qn2InSession1InCourse2\");"},{"lineNumber":83,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.areThereResponsesForQuestion(questionWithoutResponse.getId()));"},{"lineNumber":84,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":85,"author":{"gitId":"-"},"content":""},{"lineNumber":86,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":87,"author":{"gitId":"-"},"content":"    public void testUpdateFeedbackResponseCascade() throws Exception {"},{"lineNumber":88,"author":{"gitId":"-"},"content":""},{"lineNumber":89,"author":{"gitId":"-"},"content":"        ______TS(\"success: standard update\");"},{"lineNumber":90,"author":{"gitId":"-"},"content":""},{"lineNumber":91,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes responseToUpdate \u003d getResponseFromDatabase(\"response1ForQ2S1C1\");"},{"lineNumber":92,"author":{"gitId":"-"},"content":""},{"lineNumber":93,"author":{"gitId":"-"},"content":"        FeedbackResponseDetails frd \u003d new FeedbackTextResponseDetails(\"Updated Response\");"},{"lineNumber":94,"author":{"gitId":"-"},"content":""},{"lineNumber":95,"author":{"gitId":"-"},"content":"        frLogic.updateFeedbackResponseCascade("},{"lineNumber":96,"author":{"gitId":"-"},"content":"                FeedbackResponseAttributes.updateOptionsBuilder(responseToUpdate.getId())"},{"lineNumber":97,"author":{"gitId":"-"},"content":"                        .withResponseDetails(frd)"},{"lineNumber":98,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":99,"author":{"gitId":"-"},"content":""},{"lineNumber":100,"author":{"gitId":"-"},"content":"        responseToUpdate \u003d getResponseFromDatabase(\"response1ForQ2S1C1\");"},{"lineNumber":101,"author":{"gitId":"-"},"content":""},{"lineNumber":102,"author":{"gitId":"-"},"content":"        assertEquals(responseToUpdate.toString(),"},{"lineNumber":103,"author":{"gitId":"-"},"content":"                frLogic.getFeedbackResponse(responseToUpdate.getId()).toString());"},{"lineNumber":104,"author":{"gitId":"-"},"content":""},{"lineNumber":105,"author":{"gitId":"-"},"content":"        ______TS(\"failure: recipient one that is already exists\");"},{"lineNumber":106,"author":{"gitId":"-"},"content":""},{"lineNumber":107,"author":{"gitId":"-"},"content":"        responseToUpdate \u003d getResponseFromDatabase(\"response1ForQ2S1C1\");"},{"lineNumber":108,"author":{"gitId":"-"},"content":""},{"lineNumber":109,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes existingResponse \u003d"},{"lineNumber":110,"author":{"gitId":"-"},"content":"                FeedbackResponseAttributes.builder("},{"lineNumber":111,"author":{"gitId":"-"},"content":"                        responseToUpdate.getFeedbackQuestionId(), responseToUpdate.getGiver(), \"student3InCourse1@gmail.tmt\")"},{"lineNumber":112,"author":{"gitId":"-"},"content":"                .withFeedbackSessionName(responseToUpdate.getFeedbackSessionName())"},{"lineNumber":113,"author":{"gitId":"-"},"content":"                .withCourseId(responseToUpdate.getCourseId())"},{"lineNumber":114,"author":{"gitId":"-"},"content":"                .withGiverSection(responseToUpdate.getGiverSection())"},{"lineNumber":115,"author":{"gitId":"-"},"content":"                .withRecipientSection(responseToUpdate.getRecipientSection())"},{"lineNumber":116,"author":{"gitId":"-"},"content":"                .withResponseDetails(responseToUpdate.getResponseDetails())"},{"lineNumber":117,"author":{"gitId":"-"},"content":"                .build();"},{"lineNumber":118,"author":{"gitId":"-"},"content":""},{"lineNumber":119,"author":{"gitId":"-"},"content":"        frLogic.createFeedbackResponse(existingResponse);"},{"lineNumber":120,"author":{"gitId":"-"},"content":""},{"lineNumber":121,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes[] finalResponse \u003d new FeedbackResponseAttributes[] { responseToUpdate };"},{"lineNumber":122,"author":{"gitId":"-"},"content":"        EntityAlreadyExistsException eaee \u003d assertThrows(EntityAlreadyExistsException.class,"},{"lineNumber":123,"author":{"gitId":"-"},"content":"                () -\u003e frLogic.updateFeedbackResponseCascade("},{"lineNumber":124,"author":{"gitId":"-"},"content":"                        FeedbackResponseAttributes.updateOptionsBuilder(finalResponse[0].getId())"},{"lineNumber":125,"author":{"gitId":"-"},"content":"                                .withRecipient(\"student3InCourse1@gmail.tmt\")"},{"lineNumber":126,"author":{"gitId":"-"},"content":"                                .build()));"},{"lineNumber":127,"author":{"gitId":"-"},"content":"        AssertHelper.assertContains(\"Trying to create an entity that exists\", eaee.getMessage());"},{"lineNumber":128,"author":{"gitId":"-"},"content":""},{"lineNumber":129,"author":{"gitId":"-"},"content":"        ______TS(\"success: recipient changed to something else\");"},{"lineNumber":130,"author":{"gitId":"-"},"content":""},{"lineNumber":131,"author":{"gitId":"-"},"content":"        responseToUpdate.setRecipient(\"student5InCourse1@gmail.tmt\");"},{"lineNumber":132,"author":{"gitId":"-"},"content":""},{"lineNumber":133,"author":{"gitId":"-"},"content":"        frLogic.updateFeedbackResponseCascade("},{"lineNumber":134,"author":{"gitId":"-"},"content":"                FeedbackResponseAttributes.updateOptionsBuilder(responseToUpdate.getId())"},{"lineNumber":135,"author":{"gitId":"-"},"content":"                        .withRecipient(responseToUpdate.getRecipient())"},{"lineNumber":136,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":137,"author":{"gitId":"-"},"content":""},{"lineNumber":138,"author":{"gitId":"-"},"content":"        assertEquals(responseToUpdate.toString(),"},{"lineNumber":139,"author":{"gitId":"-"},"content":"                frLogic.getFeedbackResponse(responseToUpdate.getFeedbackQuestionId(), responseToUpdate.getGiver(),"},{"lineNumber":140,"author":{"gitId":"-"},"content":"                        responseToUpdate.getRecipient()).toString());"},{"lineNumber":141,"author":{"gitId":"-"},"content":"        assertNull(frLogic.getFeedbackResponse("},{"lineNumber":142,"author":{"gitId":"-"},"content":"                responseToUpdate.getFeedbackQuestionId(), responseToUpdate.getGiver(), \"student2InCourse1@gmail.tmt\"));"},{"lineNumber":143,"author":{"gitId":"-"},"content":""},{"lineNumber":144,"author":{"gitId":"-"},"content":"        ______TS(\"success: update giver, recipient, giverSection and recipientSection, \""},{"lineNumber":145,"author":{"gitId":"-"},"content":"                + \"should do cascade update to comments\");"},{"lineNumber":146,"author":{"gitId":"-"},"content":""},{"lineNumber":147,"author":{"gitId":"-"},"content":"        responseToUpdate \u003d getResponseFromDatabase(\"response1ForQ1S1C1\");"},{"lineNumber":148,"author":{"gitId":"-"},"content":"        assertFalse(frcLogic.getFeedbackResponseCommentForResponse(responseToUpdate.getId()).isEmpty());"},{"lineNumber":149,"author":{"gitId":"-"},"content":""},{"lineNumber":150,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes updatedResponse \u003d frLogic.updateFeedbackResponseCascade("},{"lineNumber":151,"author":{"gitId":"-"},"content":"                FeedbackResponseAttributes.updateOptionsBuilder(responseToUpdate.getId())"},{"lineNumber":152,"author":{"gitId":"-"},"content":"                        .withGiver(\"test@example.com\")"},{"lineNumber":153,"author":{"gitId":"-"},"content":"                        .withGiverSection(\"giverSection\")"},{"lineNumber":154,"author":{"gitId":"-"},"content":"                        .withRecipient(\"test@example.com\")"},{"lineNumber":155,"author":{"gitId":"-"},"content":"                        .withRecipientSection(\"recipientSection\")"},{"lineNumber":156,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":157,"author":{"gitId":"-"},"content":"        assertEquals(\"test@example.com\", updatedResponse.getGiver());"},{"lineNumber":158,"author":{"gitId":"-"},"content":"        assertEquals(\"giverSection\", updatedResponse.getGiverSection());"},{"lineNumber":159,"author":{"gitId":"-"},"content":"        assertEquals(\"test@example.com\", updatedResponse.getRecipient());"},{"lineNumber":160,"author":{"gitId":"-"},"content":"        assertEquals(\"recipientSection\", updatedResponse.getRecipientSection());"},{"lineNumber":161,"author":{"gitId":"-"},"content":"        assertTrue(frcLogic.getFeedbackResponseCommentForResponse(responseToUpdate.getId()).isEmpty());"},{"lineNumber":162,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseCommentAttributes\u003e associatedComments \u003d"},{"lineNumber":163,"author":{"gitId":"-"},"content":"                frcLogic.getFeedbackResponseCommentForResponse(updatedResponse.getId());"},{"lineNumber":164,"author":{"gitId":"-"},"content":"        assertFalse(associatedComments.isEmpty());"},{"lineNumber":165,"author":{"gitId":"-"},"content":"        assertTrue(associatedComments.stream()"},{"lineNumber":166,"author":{"gitId":"-"},"content":"                .allMatch(c -\u003e \"giverSection\".equals(c.getGiverSection())"},{"lineNumber":167,"author":{"gitId":"-"},"content":"                        \u0026\u0026 \"recipientSection\".equals(c.getReceiverSection())));"},{"lineNumber":168,"author":{"gitId":"-"},"content":""},{"lineNumber":169,"author":{"gitId":"-"},"content":"        ______TS(\"failure: invalid params\");"},{"lineNumber":170,"author":{"gitId":"-"},"content":""},{"lineNumber":171,"author":{"gitId":"-"},"content":"        // Cannot have invalid params as all possible invalid params"},{"lineNumber":172,"author":{"gitId":"-"},"content":"        // are copied over from an existing response."},{"lineNumber":173,"author":{"gitId":"-"},"content":""},{"lineNumber":174,"author":{"gitId":"-"},"content":"        ______TS(\"failure: no such response\");"},{"lineNumber":175,"author":{"gitId":"-"},"content":""},{"lineNumber":176,"author":{"gitId":"-"},"content":"        assertThrows(EntityDoesNotExistException.class,"},{"lineNumber":177,"author":{"gitId":"-"},"content":"                () -\u003e frLogic.updateFeedbackResponseCascade("},{"lineNumber":178,"author":{"gitId":"-"},"content":"                        FeedbackResponseAttributes.updateOptionsBuilder(\"non-existent\")"},{"lineNumber":179,"author":{"gitId":"-"},"content":"                                .withGiver(\"random\")"},{"lineNumber":180,"author":{"gitId":"-"},"content":"                                .build()));"},{"lineNumber":181,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":182,"author":{"gitId":"-"},"content":""},{"lineNumber":183,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":184,"author":{"gitId":"-"},"content":"    public void testUpdateFeedbackResponsesForChangingTeam_typicalData_shouldDoCascadeDeletion() throws Exception {"},{"lineNumber":185,"author":{"gitId":"-"},"content":""},{"lineNumber":186,"author":{"gitId":"-"},"content":"        StudentAttributes studentToUpdate \u003d dataBundle.students.get(\"student4InCourse1\");"},{"lineNumber":187,"author":{"gitId":"-"},"content":""},{"lineNumber":188,"author":{"gitId":"-"},"content":"        // Student 4 has 1 responses to him from team members,"},{"lineNumber":189,"author":{"gitId":"-"},"content":"        // 1 response from him a team member, and"},{"lineNumber":190,"author":{"gitId":"-"},"content":"        // 1 team response from him to another team."},{"lineNumber":191,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes teamQuestion \u003d getQuestionFromDatabase(\"team.members.feedback\");"},{"lineNumber":192,"author":{"gitId":"-"},"content":"        assertEquals(1, getFeedbackResponsesForReceiverForQuestion("},{"lineNumber":193,"author":{"gitId":"-"},"content":"                teamQuestion.getId(), studentToUpdate.getEmail()).size());"},{"lineNumber":194,"author":{"gitId":"-"},"content":"        assertEquals(1,"},{"lineNumber":195,"author":{"gitId":"-"},"content":"                frLogic.getFeedbackResponsesFromGiverForQuestion("},{"lineNumber":196,"author":{"gitId":"-"},"content":"                teamQuestion.getId(), studentToUpdate.getEmail()).size());"},{"lineNumber":197,"author":{"gitId":"-"},"content":""},{"lineNumber":198,"author":{"gitId":"-"},"content":"        teamQuestion \u003d getQuestionFromDatabase(\"team.feedback\");"},{"lineNumber":199,"author":{"gitId":"-"},"content":"        assertEquals(1,"},{"lineNumber":200,"author":{"gitId":"-"},"content":"                frLogic.getFeedbackResponsesFromGiverForQuestion("},{"lineNumber":201,"author":{"gitId":"-"},"content":"                teamQuestion.getId(), studentToUpdate.getTeam()).size());"},{"lineNumber":202,"author":{"gitId":"-"},"content":""},{"lineNumber":203,"author":{"gitId":"-"},"content":"        // Add one more non-team response"},{"lineNumber":204,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes responseToAdd \u003d"},{"lineNumber":205,"author":{"gitId":"-"},"content":"                FeedbackResponseAttributes.builder("},{"lineNumber":206,"author":{"gitId":"-"},"content":"                        getQuestionFromDatabase(\"qn1InSession1InCourse1\").getId(),"},{"lineNumber":207,"author":{"gitId":"-"},"content":"                        studentToUpdate.getEmail(), studentToUpdate.getEmail())"},{"lineNumber":208,"author":{"gitId":"-"},"content":"                .withFeedbackSessionName(\"First feedback session\")"},{"lineNumber":209,"author":{"gitId":"-"},"content":"                .withCourseId(\"idOfTypicalCourse1\")"},{"lineNumber":210,"author":{"gitId":"-"},"content":"                .withGiverSection(\"Section 1\")"},{"lineNumber":211,"author":{"gitId":"-"},"content":"                .withRecipientSection(\"Section 1\")"},{"lineNumber":212,"author":{"gitId":"-"},"content":"                .withResponseDetails(new FeedbackTextResponseDetails(\"New Response to self\"))"},{"lineNumber":213,"author":{"gitId":"-"},"content":"                .build();"},{"lineNumber":214,"author":{"gitId":"-"},"content":""},{"lineNumber":215,"author":{"gitId":"-"},"content":"        frLogic.createFeedbackResponse(responseToAdd);"},{"lineNumber":216,"author":{"gitId":"-"},"content":""},{"lineNumber":217,"author":{"gitId":"-"},"content":"        // All these responses should be gone after he changes teams"},{"lineNumber":218,"author":{"gitId":"-"},"content":""},{"lineNumber":219,"author":{"gitId":"-"},"content":"        frLogic.updateFeedbackResponsesForChangingTeam("},{"lineNumber":220,"author":{"gitId":"-"},"content":"                studentToUpdate.getCourse(), studentToUpdate.getEmail(), studentToUpdate.getTeam(), \"Team 1.2\");"},{"lineNumber":221,"author":{"gitId":"-"},"content":""},{"lineNumber":222,"author":{"gitId":"-"},"content":"        teamQuestion \u003d getQuestionFromDatabase(\"team.members.feedback\");"},{"lineNumber":223,"author":{"gitId":"-"},"content":"        assertEquals(0, getFeedbackResponsesForReceiverForQuestion("},{"lineNumber":224,"author":{"gitId":"-"},"content":"                teamQuestion.getId(), studentToUpdate.getEmail()).size());"},{"lineNumber":225,"author":{"gitId":"-"},"content":"        assertEquals(0,"},{"lineNumber":226,"author":{"gitId":"-"},"content":"                frLogic.getFeedbackResponsesFromGiverForQuestion("},{"lineNumber":227,"author":{"gitId":"-"},"content":"                teamQuestion.getId(), studentToUpdate.getEmail()).size());"},{"lineNumber":228,"author":{"gitId":"-"},"content":""},{"lineNumber":229,"author":{"gitId":"-"},"content":"        teamQuestion \u003d getQuestionFromDatabase(\"team.feedback\");"},{"lineNumber":230,"author":{"gitId":"-"},"content":"        assertEquals(0, getFeedbackResponsesForReceiverForQuestion("},{"lineNumber":231,"author":{"gitId":"-"},"content":"                teamQuestion.getId(), studentToUpdate.getEmail()).size());"},{"lineNumber":232,"author":{"gitId":"-"},"content":""},{"lineNumber":233,"author":{"gitId":"-"},"content":"        // Non-team response should remain"},{"lineNumber":234,"author":{"gitId":"-"},"content":""},{"lineNumber":235,"author":{"gitId":"-"},"content":"        assertEquals(1,"},{"lineNumber":236,"author":{"gitId":"-"},"content":"                frLogic.getFeedbackResponsesFromGiverForQuestion("},{"lineNumber":237,"author":{"gitId":"-"},"content":"                        getQuestionFromDatabase(\"qn1InSession1InCourse1\").getId(),"},{"lineNumber":238,"author":{"gitId":"-"},"content":"                        studentToUpdate.getEmail()).size());"},{"lineNumber":239,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":240,"author":{"gitId":"-"},"content":""},{"lineNumber":241,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":242,"author":{"gitId":"-"},"content":"     * Gets all responses for a recipient of a question."},{"lineNumber":243,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":244,"author":{"gitId":"-"},"content":"    private List\u003cFeedbackResponseAttributes\u003e getFeedbackResponsesForReceiverForQuestion("},{"lineNumber":245,"author":{"gitId":"-"},"content":"            String questionId, String receiver) {"},{"lineNumber":246,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e allResponses \u003d frLogic.getFeedbackResponsesForQuestion(questionId);"},{"lineNumber":247,"author":{"gitId":"-"},"content":"        return allResponses.stream()"},{"lineNumber":248,"author":{"gitId":"-"},"content":"                .filter(response -\u003e response.getRecipient().equals(receiver))"},{"lineNumber":249,"author":{"gitId":"-"},"content":"                .collect(Collectors.toList());"},{"lineNumber":250,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":251,"author":{"gitId":"-"},"content":""},{"lineNumber":252,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":253,"author":{"gitId":"-"},"content":"    public void testUpdateFeedbackResponsesForChangingTeam_deleteLastResponse_decreaseResponseRate() {"},{"lineNumber":254,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes responseShouldBeDeleted \u003d"},{"lineNumber":255,"author":{"gitId":"-"},"content":"                getResponseFromDatabase(questionTypeBundle, \"response1ForQ1ContribSession2Course2\");"},{"lineNumber":256,"author":{"gitId":"-"},"content":"        // make sure it\u0027s the last response by the student"},{"lineNumber":257,"author":{"gitId":"-"},"content":"        assertEquals(1, numResponsesFromGiverInSession(responseShouldBeDeleted.getGiver(),"},{"lineNumber":258,"author":{"gitId":"-"},"content":"                responseShouldBeDeleted.getFeedbackSessionName(),"},{"lineNumber":259,"author":{"gitId":"-"},"content":"                responseShouldBeDeleted.getCourseId()));"},{"lineNumber":260,"author":{"gitId":"-"},"content":"        StudentAttributes student \u003d questionTypeBundle.students.get(\"student2InCourse2\");"},{"lineNumber":261,"author":{"gitId":"-"},"content":"        // the response is given by the student"},{"lineNumber":262,"author":{"gitId":"-"},"content":"        assertEquals(student.getEmail(), responseShouldBeDeleted.getGiver());"},{"lineNumber":263,"author":{"gitId":"-"},"content":""},{"lineNumber":264,"author":{"gitId":"-"},"content":"        int originalResponseRate \u003d getResponseRate(responseShouldBeDeleted.getFeedbackSessionName(),"},{"lineNumber":265,"author":{"gitId":"-"},"content":"                responseShouldBeDeleted.getCourseId());"},{"lineNumber":266,"author":{"gitId":"-"},"content":""},{"lineNumber":267,"author":{"gitId":"-"},"content":"        frLogic.updateFeedbackResponsesForChangingTeam(student.getCourse(), student.getEmail(), student.getTeam(),"},{"lineNumber":268,"author":{"gitId":"-"},"content":"                student.getTeam() + \"tmp\");"},{"lineNumber":269,"author":{"gitId":"-"},"content":""},{"lineNumber":270,"author":{"gitId":"-"},"content":"        int responseRateAfterDeletion \u003d getResponseRate(responseShouldBeDeleted.getFeedbackSessionName(),"},{"lineNumber":271,"author":{"gitId":"-"},"content":"                responseShouldBeDeleted.getCourseId());"},{"lineNumber":272,"author":{"gitId":"-"},"content":"        assertEquals(originalResponseRate - 1, responseRateAfterDeletion);"},{"lineNumber":273,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":274,"author":{"gitId":"-"},"content":""},{"lineNumber":275,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":276,"author":{"gitId":"-"},"content":"    public void testUpdateFeedbackResponsesForChangingTeam_noResponseShouldBeDeleted_shouldReaminSameResponseRate() {"},{"lineNumber":277,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes responseShouldBeDeleted \u003d"},{"lineNumber":278,"author":{"gitId":"-"},"content":"                getResponseFromDatabase(questionTypeBundle, \"response1ForQ1RankSession\");"},{"lineNumber":279,"author":{"gitId":"-"},"content":"        // make sure it\u0027s not the last response by the student"},{"lineNumber":280,"author":{"gitId":"-"},"content":"        assertTrue(1 \u003c numResponsesFromGiverInSession(responseShouldBeDeleted.getGiver(),"},{"lineNumber":281,"author":{"gitId":"-"},"content":"                responseShouldBeDeleted.getFeedbackSessionName(),"},{"lineNumber":282,"author":{"gitId":"-"},"content":"                responseShouldBeDeleted.getCourseId()));"},{"lineNumber":283,"author":{"gitId":"-"},"content":"        StudentAttributes student \u003d questionTypeBundle.students.get(\"student1InCourse1\");"},{"lineNumber":284,"author":{"gitId":"-"},"content":"        // the response is given by the student"},{"lineNumber":285,"author":{"gitId":"-"},"content":"        assertEquals(student.getEmail(), responseShouldBeDeleted.getGiver());"},{"lineNumber":286,"author":{"gitId":"-"},"content":""},{"lineNumber":287,"author":{"gitId":"-"},"content":"        int originalResponseRate \u003d getResponseRate(responseShouldBeDeleted.getFeedbackSessionName(),"},{"lineNumber":288,"author":{"gitId":"-"},"content":"                responseShouldBeDeleted.getCourseId());"},{"lineNumber":289,"author":{"gitId":"-"},"content":""},{"lineNumber":290,"author":{"gitId":"-"},"content":"        frLogic.updateFeedbackResponsesForChangingTeam(student.getCourse(), student.getEmail(), student.getTeam(),"},{"lineNumber":291,"author":{"gitId":"-"},"content":"                student.getTeam() + \"tmp\");"},{"lineNumber":292,"author":{"gitId":"-"},"content":""},{"lineNumber":293,"author":{"gitId":"-"},"content":"        int responseRateAfterDeletion \u003d getResponseRate(responseShouldBeDeleted.getFeedbackSessionName(),"},{"lineNumber":294,"author":{"gitId":"-"},"content":"                responseShouldBeDeleted.getCourseId());"},{"lineNumber":295,"author":{"gitId":"-"},"content":"        assertEquals(originalResponseRate, responseRateAfterDeletion);"},{"lineNumber":296,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":297,"author":{"gitId":"-"},"content":""},{"lineNumber":298,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":299,"author":{"gitId":"-"},"content":"    public void testUpdateResponsesForDeletingStudent_rankRecipientQuestionResponse_newResponsesShouldBeConsistent()"},{"lineNumber":300,"author":{"gitId":"-"},"content":"            throws Exception {"},{"lineNumber":301,"author":{"gitId":"-"},"content":""},{"lineNumber":302,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes distinctRankQuestion \u003d"},{"lineNumber":303,"author":{"gitId":"-"},"content":"                getQuestionFromDatabase(questionTypeBundle, \"qn1InRANKSession\");"},{"lineNumber":304,"author":{"gitId":"-"},"content":"        String courseId \u003d distinctRankQuestion.getCourseId();"},{"lineNumber":305,"author":{"gitId":"-"},"content":"        List\u003cStudentAttributes\u003e studentsInCourse \u003d studentsLogic.getStudentsForCourse(courseId);"},{"lineNumber":306,"author":{"gitId":"-"},"content":"        Map\u003cString, List\u003cFeedbackResponseAttributes\u003e\u003e giverResponseMap \u003d new HashMap\u003c\u003e();"},{"lineNumber":307,"author":{"gitId":"-"},"content":""},{"lineNumber":308,"author":{"gitId":"-"},"content":"        for (StudentAttributes student : studentsInCourse) {"},{"lineNumber":309,"author":{"gitId":"-"},"content":"            giverResponseMap.put(student.getEmail(), frLogic.getFeedbackResponsesFromGiverForQuestion("},{"lineNumber":310,"author":{"gitId":"-"},"content":"                    distinctRankQuestion.getFeedbackQuestionId(), student.getEmail()));"},{"lineNumber":311,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":312,"author":{"gitId":"-"},"content":""},{"lineNumber":313,"author":{"gitId":"-"},"content":"        int numStudents;"},{"lineNumber":314,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e responsesFromStudent;"},{"lineNumber":315,"author":{"gitId":"-"},"content":"        while (!studentsInCourse.isEmpty()) {"},{"lineNumber":316,"author":{"gitId":"-"},"content":"            studentsLogic.deleteStudentCascade(courseId, studentsInCourse.get(0).getEmail());"},{"lineNumber":317,"author":{"gitId":"-"},"content":"            numStudents \u003d studentsLogic.getNumberOfStudentsForCourse(courseId);"},{"lineNumber":318,"author":{"gitId":"-"},"content":"            studentsInCourse \u003d studentsLogic.getStudentsForCourse(courseId);"},{"lineNumber":319,"author":{"gitId":"-"},"content":"            for (StudentAttributes student : studentsInCourse) {"},{"lineNumber":320,"author":{"gitId":"-"},"content":"                responsesFromStudent \u003d frLogic.getFeedbackResponsesFromGiverForQuestion("},{"lineNumber":321,"author":{"gitId":"-"},"content":"                        distinctRankQuestion.getId(), student.getEmail());"},{"lineNumber":322,"author":{"gitId":"-"},"content":"                assertTrue(areRankResponsesConsistent(responsesFromStudent, numStudents));"},{"lineNumber":323,"author":{"gitId":"-"},"content":"                assertTrue(areRankResponsesInSameOrder(giverResponseMap.get(student.getEmail()), responsesFromStudent));"},{"lineNumber":324,"author":{"gitId":"-"},"content":"                giverResponseMap.put(student.getEmail(), responsesFromStudent);"},{"lineNumber":325,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":326,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":327,"author":{"gitId":"-"},"content":""},{"lineNumber":328,"author":{"gitId":"-"},"content":"        refreshTestData();"},{"lineNumber":329,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes nonDistinctRankQuestion \u003d"},{"lineNumber":330,"author":{"gitId":"-"},"content":"                getQuestionFromDatabase(questionTypeBundle, \"qn2InRANKSession\");"},{"lineNumber":331,"author":{"gitId":"-"},"content":""},{"lineNumber":332,"author":{"gitId":"-"},"content":"        for (StudentAttributes student : studentsInCourse) {"},{"lineNumber":333,"author":{"gitId":"-"},"content":"            giverResponseMap.put(student.getEmail(), frLogic.getFeedbackResponsesFromGiverForQuestion("},{"lineNumber":334,"author":{"gitId":"-"},"content":"                    nonDistinctRankQuestion.getFeedbackQuestionId(), student.getEmail()));"},{"lineNumber":335,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":336,"author":{"gitId":"-"},"content":""},{"lineNumber":337,"author":{"gitId":"-"},"content":"        int numTeamMembers;"},{"lineNumber":338,"author":{"gitId":"-"},"content":"        while (!studentsInCourse.isEmpty()) {"},{"lineNumber":339,"author":{"gitId":"-"},"content":"            studentsLogic.deleteStudentCascade(courseId, studentsInCourse.get(0).getEmail());"},{"lineNumber":340,"author":{"gitId":"-"},"content":"            studentsInCourse \u003d studentsLogic.getStudentsForCourse(courseId);"},{"lineNumber":341,"author":{"gitId":"-"},"content":"            for (StudentAttributes student : studentsInCourse) {"},{"lineNumber":342,"author":{"gitId":"-"},"content":"                numTeamMembers \u003d studentsLogic.getStudentsForTeam(student.getTeam(), courseId).size();"},{"lineNumber":343,"author":{"gitId":"-"},"content":"                responsesFromStudent \u003d frLogic.getFeedbackResponsesFromGiverForQuestion("},{"lineNumber":344,"author":{"gitId":"-"},"content":"                        nonDistinctRankQuestion.getId(), student.getEmail());"},{"lineNumber":345,"author":{"gitId":"-"},"content":"                assertTrue(areRankResponsesConsistent(responsesFromStudent, numTeamMembers));"},{"lineNumber":346,"author":{"gitId":"-"},"content":"                assertTrue(areRankResponsesInSameOrder(giverResponseMap.get(student.getEmail()), responsesFromStudent));"},{"lineNumber":347,"author":{"gitId":"-"},"content":"                giverResponseMap.put(student.getEmail(), responsesFromStudent);"},{"lineNumber":348,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":349,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":350,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":351,"author":{"gitId":"-"},"content":""},{"lineNumber":352,"author":{"gitId":"-"},"content":"    private boolean areRankResponsesConsistent(List\u003cFeedbackResponseAttributes\u003e responses, int maxRank) {"},{"lineNumber":353,"author":{"gitId":"-"},"content":"        for (FeedbackResponseAttributes response : responses) {"},{"lineNumber":354,"author":{"gitId":"-"},"content":"            if (!response.getFeedbackQuestionType().equals(FeedbackQuestionType.RANK_RECIPIENTS)) {"},{"lineNumber":355,"author":{"gitId":"-"},"content":"                return false;"},{"lineNumber":356,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":357,"author":{"gitId":"-"},"content":"            FeedbackRankRecipientsResponseDetails responseDetails \u003d"},{"lineNumber":358,"author":{"gitId":"-"},"content":"                    (FeedbackRankRecipientsResponseDetails) response.getResponseDetails();"},{"lineNumber":359,"author":{"gitId":"-"},"content":"            if (responseDetails.getAnswer() \u003e maxRank) {"},{"lineNumber":360,"author":{"gitId":"-"},"content":"                return false;"},{"lineNumber":361,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":362,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":363,"author":{"gitId":"-"},"content":"        return true;"},{"lineNumber":364,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":365,"author":{"gitId":"-"},"content":""},{"lineNumber":366,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":367,"author":{"gitId":"-"},"content":"     * Checks whether two list of responses for \u0027rank recipient question\u0027 have the same order for each recipient."},{"lineNumber":368,"author":{"gitId":"-"},"content":"     * The recipients of the updated responses should be a subset of that of the original responses."},{"lineNumber":369,"author":{"gitId":"-"},"content":"     * @param responses the original response list"},{"lineNumber":370,"author":{"gitId":"-"},"content":"     * @param modifiedResponses the updated response list"},{"lineNumber":371,"author":{"gitId":"-"},"content":"     * @return true if the modified response list maintain the original order of the responses"},{"lineNumber":372,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":373,"author":{"gitId":"-"},"content":"    private boolean areRankResponsesInSameOrder(List\u003cFeedbackResponseAttributes\u003e responses,"},{"lineNumber":374,"author":{"gitId":"-"},"content":"                                                List\u003cFeedbackResponseAttributes\u003e modifiedResponses) {"},{"lineNumber":375,"author":{"gitId":"-"},"content":"        if (responses.isEmpty()) {"},{"lineNumber":376,"author":{"gitId":"-"},"content":"            return modifiedResponses.isEmpty();"},{"lineNumber":377,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":378,"author":{"gitId":"-"},"content":"        if (modifiedResponses.isEmpty()) {"},{"lineNumber":379,"author":{"gitId":"-"},"content":"            return true;"},{"lineNumber":380,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":381,"author":{"gitId":"-"},"content":""},{"lineNumber":382,"author":{"gitId":"-"},"content":"        // Expects responses to rank recipient questions."},{"lineNumber":383,"author":{"gitId":"-"},"content":"        for (FeedbackResponseAttributes r : responses) {"},{"lineNumber":384,"author":{"gitId":"-"},"content":"            assert r.getFeedbackQuestionType().equals(FeedbackQuestionType.RANK_RECIPIENTS);"},{"lineNumber":385,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":386,"author":{"gitId":"-"},"content":"        for (FeedbackResponseAttributes r : modifiedResponses) {"},{"lineNumber":387,"author":{"gitId":"-"},"content":"            assert r.getFeedbackQuestionType().equals(FeedbackQuestionType.RANK_RECIPIENTS);"},{"lineNumber":388,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":389,"author":{"gitId":"-"},"content":""},{"lineNumber":390,"author":{"gitId":"-"},"content":"        responses.sort(Comparator.comparing("},{"lineNumber":391,"author":{"gitId":"-"},"content":"                response -\u003e ((FeedbackRankRecipientsResponseDetails) response.getResponseDetails()).getAnswer()));"},{"lineNumber":392,"author":{"gitId":"-"},"content":"        modifiedResponses.sort(Comparator.comparing("},{"lineNumber":393,"author":{"gitId":"-"},"content":"                response -\u003e ((FeedbackRankRecipientsResponseDetails) response.getResponseDetails()).getAnswer()));"},{"lineNumber":394,"author":{"gitId":"-"},"content":""},{"lineNumber":395,"author":{"gitId":"-"},"content":"        int pointer1 \u003d 0;"},{"lineNumber":396,"author":{"gitId":"-"},"content":"        int pointer2 \u003d 0;"},{"lineNumber":397,"author":{"gitId":"-"},"content":"        String recipient1Email;"},{"lineNumber":398,"author":{"gitId":"-"},"content":"        String recipient2Email;"},{"lineNumber":399,"author":{"gitId":"-"},"content":"        while (pointer1 \u003c responses.size() \u0026\u0026 pointer2 \u003c modifiedResponses.size()) {"},{"lineNumber":400,"author":{"gitId":"-"},"content":"            recipient1Email \u003d responses.get(pointer1).getRecipient();"},{"lineNumber":401,"author":{"gitId":"-"},"content":"            recipient2Email \u003d responses.get(pointer2).getRecipient();"},{"lineNumber":402,"author":{"gitId":"-"},"content":"            if (recipient1Email.equals(recipient2Email)) {"},{"lineNumber":403,"author":{"gitId":"-"},"content":"                pointer1++;"},{"lineNumber":404,"author":{"gitId":"-"},"content":"                pointer2++;"},{"lineNumber":405,"author":{"gitId":"-"},"content":"            } else {"},{"lineNumber":406,"author":{"gitId":"-"},"content":"                pointer1++; // Skips one response from first list."},{"lineNumber":407,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":408,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":409,"author":{"gitId":"-"},"content":""},{"lineNumber":410,"author":{"gitId":"-"},"content":"        return pointer2 \u003d\u003d modifiedResponses.size();"},{"lineNumber":411,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":412,"author":{"gitId":"-"},"content":""},{"lineNumber":413,"author":{"gitId":"-"},"content":"    private int numResponsesFromGiverInSession(String studentEmail, String sessionName, String courseId) {"},{"lineNumber":414,"author":{"gitId":"-"},"content":"        int numResponses \u003d 0;"},{"lineNumber":415,"author":{"gitId":"-"},"content":"        for (FeedbackResponseAttributes response : questionTypeBundle.feedbackResponses.values()) {"},{"lineNumber":416,"author":{"gitId":"-"},"content":"            if (response.getGiver().equals(studentEmail) \u0026\u0026 response.getFeedbackSessionName().equals(sessionName)"},{"lineNumber":417,"author":{"gitId":"-"},"content":"                    \u0026\u0026 response.getCourseId().equals(courseId)) {"},{"lineNumber":418,"author":{"gitId":"-"},"content":"                numResponses++;"},{"lineNumber":419,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":420,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":421,"author":{"gitId":"-"},"content":"        return numResponses;"},{"lineNumber":422,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":423,"author":{"gitId":"-"},"content":""},{"lineNumber":424,"author":{"gitId":"-"},"content":"    private int getResponseRate(String sessionName, String courseId) {"},{"lineNumber":425,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes sessionFromDatabase \u003d fsLogic.getFeedbackSession(sessionName, courseId);"},{"lineNumber":426,"author":{"gitId":"-"},"content":"        return fsLogic.getActualTotalSubmission(sessionFromDatabase);"},{"lineNumber":427,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":428,"author":{"gitId":"-"},"content":""},{"lineNumber":429,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":430,"author":{"gitId":"-"},"content":"    public void testUpdateFeedbackResponsesForChangingEmail() throws Exception {"},{"lineNumber":431,"author":{"gitId":"-"},"content":"        ______TS(\"standard update email case\");"},{"lineNumber":432,"author":{"gitId":"-"},"content":""},{"lineNumber":433,"author":{"gitId":"-"},"content":"        // Student 1 currently has 11 responses to him and 2 from himself."},{"lineNumber":434,"author":{"gitId":"-"},"content":"        // Student 1 currently has 1 response comment for responses from instructor to him"},{"lineNumber":435,"author":{"gitId":"-"},"content":"        // and 1 response comment from responses from himself."},{"lineNumber":436,"author":{"gitId":"-"},"content":"        StudentAttributes studentToUpdate \u003d questionTypeBundle.students.get(\"student2InCourse1\");"},{"lineNumber":437,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e responsesForReceiver \u003d"},{"lineNumber":438,"author":{"gitId":"-"},"content":"                frLogic.getFeedbackResponsesForReceiverForCourse("},{"lineNumber":439,"author":{"gitId":"-"},"content":"                        studentToUpdate.getCourse(), studentToUpdate.getEmail());"},{"lineNumber":440,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e responsesFromGiver \u003d"},{"lineNumber":441,"author":{"gitId":"-"},"content":"                frLogic.getFeedbackResponsesFromGiverForCourse("},{"lineNumber":442,"author":{"gitId":"-"},"content":"                        studentToUpdate.getCourse(), studentToUpdate.getEmail());"},{"lineNumber":443,"author":{"gitId":"-"},"content":"        Set\u003cString\u003e responseIdsToAndFromStudent \u003d new HashSet\u003c\u003e();"},{"lineNumber":444,"author":{"gitId":"-"},"content":"        responseIdsToAndFromStudent.addAll("},{"lineNumber":445,"author":{"gitId":"-"},"content":"                responsesForReceiver.stream().map(FeedbackResponseAttributes::getId).collect(Collectors.toList()));"},{"lineNumber":446,"author":{"gitId":"-"},"content":"        responseIdsToAndFromStudent.addAll("},{"lineNumber":447,"author":{"gitId":"-"},"content":"                responsesFromGiver.stream().map(FeedbackResponseAttributes::getId).collect(Collectors.toList()));"},{"lineNumber":448,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseCommentAttributes\u003e responseCommentsForStudent \u003d"},{"lineNumber":449,"author":{"gitId":"-"},"content":"                getFeedbackResponseCommentsForResponsesFromDatabase(responseIdsToAndFromStudent);"},{"lineNumber":450,"author":{"gitId":"-"},"content":""},{"lineNumber":451,"author":{"gitId":"-"},"content":"        assertEquals(11, responsesForReceiver.size());"},{"lineNumber":452,"author":{"gitId":"-"},"content":"        assertEquals(8, responsesFromGiver.size());"},{"lineNumber":453,"author":{"gitId":"-"},"content":"        assertEquals(2, responseCommentsForStudent.size());"},{"lineNumber":454,"author":{"gitId":"-"},"content":"        // student\u0027s comment"},{"lineNumber":455,"author":{"gitId":"-"},"content":"        assertTrue(responseCommentsForStudent.stream().anyMatch(r -\u003e r.isCommentFromFeedbackParticipant()));"},{"lineNumber":456,"author":{"gitId":"-"},"content":"        // instructor comment"},{"lineNumber":457,"author":{"gitId":"-"},"content":"        assertTrue(responseCommentsForStudent.stream().anyMatch(r -\u003e !r.isCommentFromFeedbackParticipant()));"},{"lineNumber":458,"author":{"gitId":"-"},"content":""},{"lineNumber":459,"author":{"gitId":"-"},"content":"        frLogic.updateFeedbackResponsesForChangingEmail("},{"lineNumber":460,"author":{"gitId":"-"},"content":"                studentToUpdate.getCourse(), studentToUpdate.getEmail(), \"new@email.tmt\");"},{"lineNumber":461,"author":{"gitId":"-"},"content":""},{"lineNumber":462,"author":{"gitId":"-"},"content":"        responsesForReceiver \u003d frLogic.getFeedbackResponsesForReceiverForCourse("},{"lineNumber":463,"author":{"gitId":"-"},"content":"                studentToUpdate.getCourse(), studentToUpdate.getEmail());"},{"lineNumber":464,"author":{"gitId":"-"},"content":"        responsesFromGiver \u003d frLogic.getFeedbackResponsesFromGiverForCourse("},{"lineNumber":465,"author":{"gitId":"-"},"content":"                studentToUpdate.getCourse(), studentToUpdate.getEmail());"},{"lineNumber":466,"author":{"gitId":"-"},"content":"        responseIdsToAndFromStudent \u003d new HashSet\u003c\u003e();"},{"lineNumber":467,"author":{"gitId":"-"},"content":"        responseIdsToAndFromStudent.addAll("},{"lineNumber":468,"author":{"gitId":"-"},"content":"                responsesForReceiver.stream().map(FeedbackResponseAttributes::getId).collect(Collectors.toList()));"},{"lineNumber":469,"author":{"gitId":"-"},"content":"        responseIdsToAndFromStudent.addAll("},{"lineNumber":470,"author":{"gitId":"-"},"content":"                responsesFromGiver.stream().map(FeedbackResponseAttributes::getId).collect(Collectors.toList()));"},{"lineNumber":471,"author":{"gitId":"-"},"content":"        responseCommentsForStudent \u003d"},{"lineNumber":472,"author":{"gitId":"-"},"content":"                getFeedbackResponseCommentsForResponsesFromDatabase(responseIdsToAndFromStudent);"},{"lineNumber":473,"author":{"gitId":"-"},"content":""},{"lineNumber":474,"author":{"gitId":"-"},"content":"        assertEquals(0, responsesForReceiver.size());"},{"lineNumber":475,"author":{"gitId":"-"},"content":"        assertEquals(0, responsesFromGiver.size());"},{"lineNumber":476,"author":{"gitId":"-"},"content":"        assertEquals(0, responseCommentsForStudent.size());"},{"lineNumber":477,"author":{"gitId":"-"},"content":""},{"lineNumber":478,"author":{"gitId":"-"},"content":"        responsesForReceiver \u003d frLogic.getFeedbackResponsesForReceiverForCourse("},{"lineNumber":479,"author":{"gitId":"-"},"content":"                studentToUpdate.getCourse(), \"new@email.tmt\");"},{"lineNumber":480,"author":{"gitId":"-"},"content":"        responsesFromGiver \u003d frLogic.getFeedbackResponsesFromGiverForCourse("},{"lineNumber":481,"author":{"gitId":"-"},"content":"                studentToUpdate.getCourse(), \"new@email.tmt\");"},{"lineNumber":482,"author":{"gitId":"-"},"content":"        responseIdsToAndFromStudent \u003d new HashSet\u003c\u003e();"},{"lineNumber":483,"author":{"gitId":"-"},"content":"        responseIdsToAndFromStudent.addAll("},{"lineNumber":484,"author":{"gitId":"-"},"content":"                responsesForReceiver.stream().map(FeedbackResponseAttributes::getId).collect(Collectors.toList()));"},{"lineNumber":485,"author":{"gitId":"-"},"content":"        responseIdsToAndFromStudent.addAll("},{"lineNumber":486,"author":{"gitId":"-"},"content":"                responsesFromGiver.stream().map(FeedbackResponseAttributes::getId).collect(Collectors.toList()));"},{"lineNumber":487,"author":{"gitId":"-"},"content":"        responseCommentsForStudent \u003d"},{"lineNumber":488,"author":{"gitId":"-"},"content":"                getFeedbackResponseCommentsForResponsesFromDatabase(responseIdsToAndFromStudent);"},{"lineNumber":489,"author":{"gitId":"-"},"content":""},{"lineNumber":490,"author":{"gitId":"-"},"content":"        assertEquals(11, responsesForReceiver.size());"},{"lineNumber":491,"author":{"gitId":"-"},"content":"        assertEquals(8, responsesFromGiver.size());"},{"lineNumber":492,"author":{"gitId":"-"},"content":"        assertEquals(2, responseCommentsForStudent.size());"},{"lineNumber":493,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":494,"author":{"gitId":"-"},"content":""},{"lineNumber":495,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":496,"author":{"gitId":"-"},"content":"    public void testIsNameVisibleTo() {"},{"lineNumber":497,"author":{"gitId":"-"},"content":""},{"lineNumber":498,"author":{"gitId":"-"},"content":"        ______TS(\"testIsNameVisibleTo\");"},{"lineNumber":499,"author":{"gitId":"-"},"content":""},{"lineNumber":500,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor \u003d dataBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":501,"author":{"gitId":"-"},"content":"        StudentAttributes student \u003d dataBundle.students.get(\"student1InCourse1\");"},{"lineNumber":502,"author":{"gitId":"-"},"content":"        StudentAttributes student2 \u003d dataBundle.students.get(\"student2InCourse1\");"},{"lineNumber":503,"author":{"gitId":"-"},"content":"        StudentAttributes student3 \u003d dataBundle.students.get(\"student3InCourse1\");"},{"lineNumber":504,"author":{"gitId":"-"},"content":"        StudentAttributes student5 \u003d dataBundle.students.get(\"student5InCourse1\");"},{"lineNumber":505,"author":{"gitId":"-"},"content":""},{"lineNumber":506,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fq \u003d getQuestionFromDatabase(\"qn3InSession1InCourse1\");"},{"lineNumber":507,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr \u003d getResponseFromDatabase(\"response1ForQ3S1C1\");"},{"lineNumber":508,"author":{"gitId":"-"},"content":""},{"lineNumber":509,"author":{"gitId":"-"},"content":"        CourseRoster roster \u003d new CourseRoster("},{"lineNumber":510,"author":{"gitId":"-"},"content":"                studentsLogic.getStudentsForCourse(fq.getCourseId()),"},{"lineNumber":511,"author":{"gitId":"-"},"content":"                instructorsLogic.getInstructorsForCourse(fq.getCourseId()));"},{"lineNumber":512,"author":{"gitId":"-"},"content":""},{"lineNumber":513,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isNameVisibleToUser(fq, fr, instructor.getEmail(), true, true, roster));"},{"lineNumber":514,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isNameVisibleToUser(fq, fr, instructor.getEmail(), true, false, roster));"},{"lineNumber":515,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isNameVisibleToUser(fq, fr, student.getEmail(), false, false, roster));"},{"lineNumber":516,"author":{"gitId":"-"},"content":""},{"lineNumber":517,"author":{"gitId":"-"},"content":"        ______TS(\"test if visible to own team members\");"},{"lineNumber":518,"author":{"gitId":"-"},"content":""},{"lineNumber":519,"author":{"gitId":"-"},"content":"        fr.setGiver(student.getEmail());"},{"lineNumber":520,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isNameVisibleToUser(fq, fr, student.getEmail(), false, false, roster));"},{"lineNumber":521,"author":{"gitId":"-"},"content":""},{"lineNumber":522,"author":{"gitId":"-"},"content":"        ______TS(\"test if visible to receiver/reciever team members\");"},{"lineNumber":523,"author":{"gitId":"-"},"content":""},{"lineNumber":524,"author":{"gitId":"-"},"content":"        fq.setRecipientType(FeedbackParticipantType.TEAMS);"},{"lineNumber":525,"author":{"gitId":"-"},"content":"        fq.getShowRecipientNameTo().clear();"},{"lineNumber":526,"author":{"gitId":"-"},"content":"        fq.getShowRecipientNameTo().add(FeedbackParticipantType.RECEIVER);"},{"lineNumber":527,"author":{"gitId":"-"},"content":"        fr.setRecipient(student.getTeam());"},{"lineNumber":528,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isNameVisibleToUser(fq, fr, student.getEmail(), false, false, roster));"},{"lineNumber":529,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isNameVisibleToUser(fq, fr, student3.getEmail(), false, false, roster));"},{"lineNumber":530,"author":{"gitId":"-"},"content":""},{"lineNumber":531,"author":{"gitId":"-"},"content":"        fq.setRecipientType(FeedbackParticipantType.STUDENTS);"},{"lineNumber":532,"author":{"gitId":"-"},"content":"        fr.setRecipient(student.getEmail());"},{"lineNumber":533,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isNameVisibleToUser(fq, fr, student.getEmail(), false, false, roster));"},{"lineNumber":534,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isNameVisibleToUser(fq, fr, student2.getEmail(), false, false, roster));"},{"lineNumber":535,"author":{"gitId":"-"},"content":""},{"lineNumber":536,"author":{"gitId":"-"},"content":"        fq.setRecipientType(FeedbackParticipantType.TEAMS);"},{"lineNumber":537,"author":{"gitId":"-"},"content":"        fq.getShowRecipientNameTo().clear();"},{"lineNumber":538,"author":{"gitId":"-"},"content":"        fq.getShowRecipientNameTo().add(FeedbackParticipantType.RECEIVER_TEAM_MEMBERS);"},{"lineNumber":539,"author":{"gitId":"-"},"content":"        fr.setRecipient(student.getTeam());"},{"lineNumber":540,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isNameVisibleToUser(fq, fr, student.getEmail(), false, false, roster));"},{"lineNumber":541,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isNameVisibleToUser(fq, fr, student3.getEmail(), false, false, roster));"},{"lineNumber":542,"author":{"gitId":"-"},"content":""},{"lineNumber":543,"author":{"gitId":"-"},"content":"        fq.setRecipientType(FeedbackParticipantType.STUDENTS);"},{"lineNumber":544,"author":{"gitId":"-"},"content":"        fr.setRecipient(student.getEmail());"},{"lineNumber":545,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isNameVisibleToUser(fq, fr, student.getEmail(), false, false, roster));"},{"lineNumber":546,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isNameVisibleToUser(fq, fr, student3.getEmail(), false, false, roster));"},{"lineNumber":547,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isNameVisibleToUser(fq, fr, student5.getEmail(), false, false, roster));"},{"lineNumber":548,"author":{"gitId":"-"},"content":""},{"lineNumber":549,"author":{"gitId":"-"},"content":"        ______TS(\"test if visible to receiver/giver team members for team questions\");"},{"lineNumber":550,"author":{"gitId":"-"},"content":""},{"lineNumber":551,"author":{"gitId":"-"},"content":"        fq.setRecipientType(FeedbackParticipantType.TEAMS);"},{"lineNumber":552,"author":{"gitId":"-"},"content":"        fq.getShowRecipientNameTo().clear();"},{"lineNumber":553,"author":{"gitId":"-"},"content":"        fq.getShowRecipientNameTo().add(FeedbackParticipantType.RECEIVER_TEAM_MEMBERS);"},{"lineNumber":554,"author":{"gitId":"-"},"content":"        fq.setGiverType(FeedbackParticipantType.TEAMS);"},{"lineNumber":555,"author":{"gitId":"-"},"content":"        fq.getShowGiverNameTo().clear();"},{"lineNumber":556,"author":{"gitId":"-"},"content":"        fq.getShowGiverNameTo().add(FeedbackParticipantType.OWN_TEAM_MEMBERS_INCLUDING_SELF);"},{"lineNumber":557,"author":{"gitId":"-"},"content":""},{"lineNumber":558,"author":{"gitId":"-"},"content":"        fr.setRecipient(student5.getTeam());"},{"lineNumber":559,"author":{"gitId":"-"},"content":"        fr.setGiver(student.getTeam());"},{"lineNumber":560,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isNameVisibleToUser(fq, fr, student.getEmail(), false, false, roster));"},{"lineNumber":561,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isNameVisibleToUser(fq, fr, student3.getEmail(), false, false, roster));"},{"lineNumber":562,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isNameVisibleToUser(fq, fr, student5.getEmail(), false, false, roster));"},{"lineNumber":563,"author":{"gitId":"-"},"content":""},{"lineNumber":564,"author":{"gitId":"-"},"content":"        ______TS(\"test anonymous team recipients\");"},{"lineNumber":565,"author":{"gitId":"-"},"content":"        // Only members of the recipient team should be able to see the recipient name"},{"lineNumber":566,"author":{"gitId":"-"},"content":"        fq.setRecipientType(FeedbackParticipantType.TEAMS);"},{"lineNumber":567,"author":{"gitId":"-"},"content":"        fq.getShowRecipientNameTo().clear();"},{"lineNumber":568,"author":{"gitId":"-"},"content":"        fq.getShowRecipientNameTo().add(FeedbackParticipantType.RECEIVER);"},{"lineNumber":569,"author":{"gitId":"-"},"content":"        fq.getShowResponsesTo().add(FeedbackParticipantType.STUDENTS);"},{"lineNumber":570,"author":{"gitId":"-"},"content":"        fr.setRecipient(\"Team 1.1\");"},{"lineNumber":571,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isNameVisibleToUser(fq, fr, student5.getEmail(), false, false, roster));"},{"lineNumber":572,"author":{"gitId":"-"},"content":""},{"lineNumber":573,"author":{"gitId":"-"},"content":"        ______TS(\"null question\");"},{"lineNumber":574,"author":{"gitId":"-"},"content":""},{"lineNumber":575,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isNameVisibleToUser(null, fr, student.getEmail(), false, false, roster));"},{"lineNumber":576,"author":{"gitId":"-"},"content":""},{"lineNumber":577,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":578,"author":{"gitId":"-"},"content":""},{"lineNumber":579,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":580,"author":{"gitId":"-"},"content":"    public void testIsResponseVisibleForUser() {"},{"lineNumber":581,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor1 \u003d responseVisibilityBundle.instructors.get(\"FRV.instructor1OfCourse1\");"},{"lineNumber":582,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor2 \u003d responseVisibilityBundle.instructors.get(\"FRV.instructor2OfCourse1\");"},{"lineNumber":583,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor3 \u003d responseVisibilityBundle.instructors.get(\"FRV.instructor3OfCourse1\");"},{"lineNumber":584,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor4 \u003d responseVisibilityBundle.instructors.get(\"FRV.instructor4OfCourse1\");"},{"lineNumber":585,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor5 \u003d responseVisibilityBundle.instructors.get(\"FRV.instructor5OfCourse1\");"},{"lineNumber":586,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor6 \u003d responseVisibilityBundle.instructors.get(\"FRV.instructor6OfCourse1\");"},{"lineNumber":587,"author":{"gitId":"-"},"content":""},{"lineNumber":588,"author":{"gitId":"-"},"content":"        StudentAttributes student1 \u003d responseVisibilityBundle.students.get(\"FRV.student1InCourse1\");"},{"lineNumber":589,"author":{"gitId":"-"},"content":"        StudentAttributes student2 \u003d responseVisibilityBundle.students.get(\"FRV.student2InCourse1\");"},{"lineNumber":590,"author":{"gitId":"-"},"content":"        StudentAttributes student3 \u003d responseVisibilityBundle.students.get(\"FRV.student3InCourse1\");"},{"lineNumber":591,"author":{"gitId":"-"},"content":"        StudentAttributes student4 \u003d responseVisibilityBundle.students.get(\"FRV.student4InCourse1\");"},{"lineNumber":592,"author":{"gitId":"-"},"content":"        StudentAttributes student5 \u003d responseVisibilityBundle.students.get(\"FRV.student5InCourse1\");"},{"lineNumber":593,"author":{"gitId":"-"},"content":"        StudentAttributes student6 \u003d responseVisibilityBundle.students.get(\"FRV.student6InCourse1\");"},{"lineNumber":594,"author":{"gitId":"-"},"content":"        StudentAttributes student7 \u003d responseVisibilityBundle.students.get(\"FRV.student7InCourse1\");"},{"lineNumber":595,"author":{"gitId":"-"},"content":"        StudentAttributes student8 \u003d responseVisibilityBundle.students.get(\"FRV.student8InCourse1\");"},{"lineNumber":596,"author":{"gitId":"-"},"content":""},{"lineNumber":597,"author":{"gitId":"-"},"content":"        // stu -\u003e self : instructors"},{"lineNumber":598,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fq11 \u003d responseVisibilityBundle.feedbackQuestions.get(\"FRV.qn1InSession1InCourse1\");"},{"lineNumber":599,"author":{"gitId":"-"},"content":"        // stu -\u003e stu : instructors, receiver"},{"lineNumber":600,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fq12 \u003d responseVisibilityBundle.feedbackQuestions.get(\"FRV.qn2InSession1InCourse1\");"},{"lineNumber":601,"author":{"gitId":"-"},"content":"        // self -\u003e none : other students, instructors"},{"lineNumber":602,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fq13 \u003d responseVisibilityBundle.feedbackQuestions.get(\"FRV.qn3InSession1InCourse1\");"},{"lineNumber":603,"author":{"gitId":"-"},"content":"        // team -\u003e ins : instructors, other students"},{"lineNumber":604,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fq16 \u003d responseVisibilityBundle.feedbackQuestions.get(\"FRV.qn6InSession1InCourse1\");"},{"lineNumber":605,"author":{"gitId":"-"},"content":"        // stu -\u003e stu in same section : own team members, receiver team members"},{"lineNumber":606,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fq17 \u003d responseVisibilityBundle.feedbackQuestions.get(\"FRV.qn7InSession1InCourse1\");"},{"lineNumber":607,"author":{"gitId":"-"},"content":"        // ins -\u003e ins : -"},{"lineNumber":608,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fq18 \u003d responseVisibilityBundle.feedbackQuestions.get(\"FRV.qn8InSession1InCourse1\");"},{"lineNumber":609,"author":{"gitId":"-"},"content":"        // ins -\u003e ins team : instructors"},{"lineNumber":610,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fq19 \u003d responseVisibilityBundle.feedbackQuestions.get(\"FRV.qn9InSession1InCourse1\");"},{"lineNumber":611,"author":{"gitId":"-"},"content":"        // team -\u003e team : receiver"},{"lineNumber":612,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fq21 \u003d responseVisibilityBundle.feedbackQuestions.get(\"FRV.qn1InSession2InCourse1\");"},{"lineNumber":613,"author":{"gitId":"-"},"content":"        // stu -\u003e own team mem : receiver, own team members"},{"lineNumber":614,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fq22 \u003d responseVisibilityBundle.feedbackQuestions.get(\"FRV.qn2InSession2InCourse1\");"},{"lineNumber":615,"author":{"gitId":"-"},"content":"        // ins -\u003e stu : receiver, instructors, other students, receiver\u0027s team members"},{"lineNumber":616,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fq23 \u003d responseVisibilityBundle.feedbackQuestions.get(\"FRV.qn3InSession2InCourse1\");"},{"lineNumber":617,"author":{"gitId":"-"},"content":"        // stu -\u003e ins : receiver"},{"lineNumber":618,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fq24 \u003d responseVisibilityBundle.feedbackQuestions.get(\"FRV.qn4InSession2InCourse1\");"},{"lineNumber":619,"author":{"gitId":"-"},"content":"        // stu -\u003e own team : own team members, instructors"},{"lineNumber":620,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fq25 \u003d responseVisibilityBundle.feedbackQuestions.get(\"FRV.qn5InSession2InCourse1\");"},{"lineNumber":621,"author":{"gitId":"-"},"content":"        // stu -\u003e team : other students"},{"lineNumber":622,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fq26 \u003d responseVisibilityBundle.feedbackQuestions.get(\"FRV.qn6InSession2InCourse1\");"},{"lineNumber":623,"author":{"gitId":"-"},"content":"        // team -\u003e stu in same section : instructors"},{"lineNumber":624,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fq27 \u003d responseVisibilityBundle.feedbackQuestions.get(\"FRV.qn7InSession2InCourse1\");"},{"lineNumber":625,"author":{"gitId":"-"},"content":"        // team -\u003e team in same section : receiver"},{"lineNumber":626,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fq28 \u003d responseVisibilityBundle.feedbackQuestions.get(\"FRV.qn8InSession2InCourse1\");"},{"lineNumber":627,"author":{"gitId":"-"},"content":"        // stu -\u003e team in same section : instructors"},{"lineNumber":628,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fq29 \u003d responseVisibilityBundle.feedbackQuestions.get(\"FRV.qn9InSession2InCourse1\");"},{"lineNumber":629,"author":{"gitId":"hhdqirui"},"content":"        // stu -\u003e team excluding self : instructors, receiver"},{"lineNumber":630,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestionAttributes fq30 \u003d responseVisibilityBundle.feedbackQuestions.get(\"FRV.qn11InSession2InCourse1\");"},{"lineNumber":631,"author":{"gitId":"-"},"content":"        // ins -\u003e team : instructors"},{"lineNumber":632,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fq20 \u003d responseVisibilityBundle.feedbackQuestions.get(\"FRV.qn10InSession2InCourse1\");"},{"lineNumber":633,"author":{"gitId":"-"},"content":""},{"lineNumber":634,"author":{"gitId":"-"},"content":"        // stu1 -\u003e stu1 (self feedback)"},{"lineNumber":635,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr111 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response1ForQ1S1C1\");"},{"lineNumber":636,"author":{"gitId":"-"},"content":"        // stu5 -\u003e stu5 (self feedback)"},{"lineNumber":637,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr112 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response2ForQ1S1C1\");"},{"lineNumber":638,"author":{"gitId":"-"},"content":"        // stu2 -\u003e stu5"},{"lineNumber":639,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr121 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response1ForQ2S1C1\");"},{"lineNumber":640,"author":{"gitId":"-"},"content":"        // stu5 -\u003e stu2"},{"lineNumber":641,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr122 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response2ForQ2S1C1\");"},{"lineNumber":642,"author":{"gitId":"-"},"content":"        // stu3 -\u003e stu2"},{"lineNumber":643,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr123 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response3ForQ2S1C1\");"},{"lineNumber":644,"author":{"gitId":"-"},"content":"        // ins1 -\u003e General"},{"lineNumber":645,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr131 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response1ForQ3S1C1\");"},{"lineNumber":646,"author":{"gitId":"-"},"content":"        // team2 -\u003e ins2"},{"lineNumber":647,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr161 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response1ForQ6S1C1\");"},{"lineNumber":648,"author":{"gitId":"-"},"content":"        // team3 -\u003e ins2"},{"lineNumber":649,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr162 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response2ForQ6S1C1\");"},{"lineNumber":650,"author":{"gitId":"-"},"content":"        // stu1 -\u003e stu6"},{"lineNumber":651,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr171 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response1ForQ7S1C1\");"},{"lineNumber":652,"author":{"gitId":"-"},"content":"        // ins1 -\u003e ins2"},{"lineNumber":653,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr181 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response1ForQ8S1C1\");"},{"lineNumber":654,"author":{"gitId":"-"},"content":"        // ins2 -\u003e ins team"},{"lineNumber":655,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr191 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response1ForQ9S1C1\");"},{"lineNumber":656,"author":{"gitId":"-"},"content":"        // team1 -\u003e team2"},{"lineNumber":657,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr211 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response1ForQ1S2C1\");"},{"lineNumber":658,"author":{"gitId":"-"},"content":"        // stu4 -\u003e stu3"},{"lineNumber":659,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr221 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response1ForQ2S2C1\");"},{"lineNumber":660,"author":{"gitId":"-"},"content":"        // ins1 -\u003e stu3"},{"lineNumber":661,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr231 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response1ForQ3S2C1\");"},{"lineNumber":662,"author":{"gitId":"-"},"content":"        // ins6 -\u003e stu5"},{"lineNumber":663,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr232 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response2ForQ3S2C1\");"},{"lineNumber":664,"author":{"gitId":"-"},"content":"        // stu1 -\u003e ins1"},{"lineNumber":665,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr241 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response1ForQ4S2C1\");"},{"lineNumber":666,"author":{"gitId":"-"},"content":"        // stu1 -\u003e ins4"},{"lineNumber":667,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr242 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response2ForQ4S2C1\");"},{"lineNumber":668,"author":{"gitId":"-"},"content":"        // stu6 -\u003e team3 (own team)"},{"lineNumber":669,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr251 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response1ForQ5S2C1\");"},{"lineNumber":670,"author":{"gitId":"-"},"content":"        // stu5 -\u003e team2 (own team)"},{"lineNumber":671,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr252 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response2ForQ5S2C1\");"},{"lineNumber":672,"author":{"gitId":"-"},"content":"        // stu1 -\u003e team3"},{"lineNumber":673,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr261 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response1ForQ6S2C1\");"},{"lineNumber":674,"author":{"gitId":"-"},"content":"        // team1 -\u003e stu7"},{"lineNumber":675,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr271 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response1ForQ7S2C1\");"},{"lineNumber":676,"author":{"gitId":"-"},"content":"        // team3 -\u003e team1"},{"lineNumber":677,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr281 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response1ForQ8S2C1\");"},{"lineNumber":678,"author":{"gitId":"-"},"content":"        // stu8 -\u003e team1"},{"lineNumber":679,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr291 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response1ForQ9S2C1\");"},{"lineNumber":680,"author":{"gitId":"hhdqirui"},"content":"        // stu1 -\u003e team2"},{"lineNumber":681,"author":{"gitId":"hhdqirui"},"content":"        FeedbackResponseAttributes fr2111 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response1ForQ11S2C1\");"},{"lineNumber":682,"author":{"gitId":"hhdqirui"},"content":"        // stu6 -\u003e team1"},{"lineNumber":683,"author":{"gitId":"hhdqirui"},"content":"        FeedbackResponseAttributes fr2112 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response2ForQ11S2C1\");"},{"lineNumber":684,"author":{"gitId":"hhdqirui"},"content":"        // stu7 -\u003e team2"},{"lineNumber":685,"author":{"gitId":"hhdqirui"},"content":"        FeedbackResponseAttributes fr2113 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response3ForQ11S2C1\");"},{"lineNumber":686,"author":{"gitId":"-"},"content":"        // ins2 -\u003e team2"},{"lineNumber":687,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr201 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response1ForQ10S2C1\");"},{"lineNumber":688,"author":{"gitId":"-"},"content":""},{"lineNumber":689,"author":{"gitId":"-"},"content":"        Set\u003cString\u003e studentsEmailInTeam1 \u003d new HashSet\u003c\u003e("},{"lineNumber":690,"author":{"gitId":"-"},"content":"                Arrays.asList(student1.getEmail(), student2.getEmail(), student3.getEmail(), student4.getEmail()));"},{"lineNumber":691,"author":{"gitId":"-"},"content":"        Set\u003cString\u003e studentsEmailInTeam2 \u003d new HashSet\u003c\u003e(Arrays.asList(student5.getEmail()));"},{"lineNumber":692,"author":{"gitId":"-"},"content":"        Set\u003cString\u003e studentsEmailInTeam3 \u003d new HashSet\u003c\u003e(Arrays.asList(student6.getEmail(), student7.getEmail()));"},{"lineNumber":693,"author":{"gitId":"-"},"content":"        Set\u003cString\u003e studentsEmailInTeam4 \u003d new HashSet\u003c\u003e(Arrays.asList(student8.getEmail()));"},{"lineNumber":694,"author":{"gitId":"-"},"content":"        Set\u003cString\u003e studentsEmailEmpty \u003d Collections.emptySet();"},{"lineNumber":695,"author":{"gitId":"-"},"content":""},{"lineNumber":696,"author":{"gitId":"-"},"content":"        ______TS(\"test if visible to giver\");"},{"lineNumber":697,"author":{"gitId":"-"},"content":""},{"lineNumber":698,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student1.getEmail(), false, student1, studentsEmailInTeam1,"},{"lineNumber":699,"author":{"gitId":"-"},"content":"                fr111, fq11, null));"},{"lineNumber":700,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor1.getEmail(), true, null, null,"},{"lineNumber":701,"author":{"gitId":"-"},"content":"                fr131, fq13, instructor1));"},{"lineNumber":702,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor1.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":703,"author":{"gitId":"-"},"content":"                fr181, fq18, instructor1));"},{"lineNumber":704,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor2.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":705,"author":{"gitId":"-"},"content":"                fr191, fq19, instructor2));"},{"lineNumber":706,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student2.getEmail(), false, student2, studentsEmailInTeam1,"},{"lineNumber":707,"author":{"gitId":"-"},"content":"                fr211, fq21, null));"},{"lineNumber":708,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student4.getEmail(), false, student4, studentsEmailInTeam1,"},{"lineNumber":709,"author":{"gitId":"-"},"content":"                fr221, fq22, null));"},{"lineNumber":710,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor1.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":711,"author":{"gitId":"-"},"content":"                fr231, fq23, instructor1));"},{"lineNumber":712,"author":{"gitId":"hhdqirui"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student1.getEmail(), false, student1, studentsEmailInTeam1,"},{"lineNumber":713,"author":{"gitId":"hhdqirui"},"content":"                fr2111, fq30, null));"},{"lineNumber":714,"author":{"gitId":"hhdqirui"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student6.getEmail(), false, student6, studentsEmailInTeam3,"},{"lineNumber":715,"author":{"gitId":"hhdqirui"},"content":"                fr2112, fq30, null));"},{"lineNumber":716,"author":{"gitId":"hhdqirui"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student7.getEmail(), false, student7, studentsEmailInTeam3,"},{"lineNumber":717,"author":{"gitId":"hhdqirui"},"content":"                fr2113, fq30, null));"},{"lineNumber":718,"author":{"gitId":"-"},"content":""},{"lineNumber":719,"author":{"gitId":"-"},"content":"        ______TS(\"test if visible to other students\");"},{"lineNumber":720,"author":{"gitId":"-"},"content":""},{"lineNumber":721,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student3.getEmail(), false, student3, studentsEmailInTeam1,"},{"lineNumber":722,"author":{"gitId":"-"},"content":"                fr131, fq13, null));"},{"lineNumber":723,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student5.getEmail(), false, student5, studentsEmailInTeam2,"},{"lineNumber":724,"author":{"gitId":"-"},"content":"                fr161, fq16, null));"},{"lineNumber":725,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student5.getEmail(), false, student5, studentsEmailInTeam2,"},{"lineNumber":726,"author":{"gitId":"-"},"content":"                fr211, fq21, null));"},{"lineNumber":727,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student7.getEmail(), false, student7, studentsEmailInTeam3,"},{"lineNumber":728,"author":{"gitId":"-"},"content":"                fr231, fq23, null));"},{"lineNumber":729,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student5.getEmail(), false, student5, studentsEmailInTeam2,"},{"lineNumber":730,"author":{"gitId":"-"},"content":"                fr261, fq26, null));"},{"lineNumber":731,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(student1.getEmail(), false, student1, studentsEmailInTeam1,"},{"lineNumber":732,"author":{"gitId":"-"},"content":"                fr112, fq11, null));"},{"lineNumber":733,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(student1.getEmail(), false, student1, studentsEmailInTeam1,"},{"lineNumber":734,"author":{"gitId":"-"},"content":"                fr121, fq12, null));"},{"lineNumber":735,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(student5.getEmail(), false, student5, studentsEmailInTeam2,"},{"lineNumber":736,"author":{"gitId":"-"},"content":"                fr171, fq17, null));"},{"lineNumber":737,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(student7.getEmail(), false, student7, studentsEmailInTeam3,"},{"lineNumber":738,"author":{"gitId":"-"},"content":"                fr291, fq29, null));"},{"lineNumber":739,"author":{"gitId":"-"},"content":""},{"lineNumber":740,"author":{"gitId":"-"},"content":"        ______TS(\"test if visible to receiver\");"},{"lineNumber":741,"author":{"gitId":"-"},"content":""},{"lineNumber":742,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student2.getEmail(), false, student2, studentsEmailInTeam1,"},{"lineNumber":743,"author":{"gitId":"-"},"content":"                fr122, fq12, null));"},{"lineNumber":744,"author":{"gitId":"-"},"content":"        // receiver\u0027s team members include receiver"},{"lineNumber":745,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student6.getEmail(), false, student6, studentsEmailInTeam3,"},{"lineNumber":746,"author":{"gitId":"-"},"content":"                fr171, fq17, null));"},{"lineNumber":747,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student5.getEmail(), false, student5, studentsEmailInTeam2,"},{"lineNumber":748,"author":{"gitId":"-"},"content":"                fr211, fq21, null));"},{"lineNumber":749,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student3.getEmail(), false, student3, studentsEmailInTeam1,"},{"lineNumber":750,"author":{"gitId":"-"},"content":"                fr221, fq22, null));"},{"lineNumber":751,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor1.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":752,"author":{"gitId":"-"},"content":"                fr241, fq24, instructor1));"},{"lineNumber":753,"author":{"gitId":"-"},"content":"        // other students include receiver"},{"lineNumber":754,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student6.getEmail(), false, student6, studentsEmailInTeam3,"},{"lineNumber":755,"author":{"gitId":"-"},"content":"                fr261, fq26, null));"},{"lineNumber":756,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student1.getEmail(), false, student1, studentsEmailInTeam1,"},{"lineNumber":757,"author":{"gitId":"-"},"content":"                fr281, fq28, null));"},{"lineNumber":758,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor2.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":759,"author":{"gitId":"-"},"content":"                fr181, fq18, instructor2));"},{"lineNumber":760,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(student7.getEmail(), false, student7, studentsEmailInTeam3,"},{"lineNumber":761,"author":{"gitId":"-"},"content":"                fr271, fq27, null));"},{"lineNumber":762,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(student8.getEmail(), false, student8, studentsEmailInTeam4,"},{"lineNumber":763,"author":{"gitId":"-"},"content":"                fr281, fq28, null));"},{"lineNumber":764,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(student5.getEmail(), false, student5, studentsEmailInTeam2,"},{"lineNumber":765,"author":{"gitId":"-"},"content":"                fr201, fq20, null));"},{"lineNumber":766,"author":{"gitId":"hhdqirui"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student6.getEmail(), false, student6, studentsEmailInTeam3,"},{"lineNumber":767,"author":{"gitId":"hhdqirui"},"content":"                fr2111, fq30, null));"},{"lineNumber":768,"author":{"gitId":"hhdqirui"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student7.getEmail(), false, student7, studentsEmailInTeam3,"},{"lineNumber":769,"author":{"gitId":"hhdqirui"},"content":"                fr2111, fq30, null));"},{"lineNumber":770,"author":{"gitId":"hhdqirui"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student1.getEmail(), false, student1, studentsEmailInTeam1,"},{"lineNumber":771,"author":{"gitId":"hhdqirui"},"content":"                fr2112, fq30, null));"},{"lineNumber":772,"author":{"gitId":"hhdqirui"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student2.getEmail(), false, student2, studentsEmailInTeam1,"},{"lineNumber":773,"author":{"gitId":"hhdqirui"},"content":"                fr2112, fq30, null));"},{"lineNumber":774,"author":{"gitId":"hhdqirui"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student3.getEmail(), false, student3, studentsEmailInTeam1,"},{"lineNumber":775,"author":{"gitId":"hhdqirui"},"content":"                fr2112, fq30, null));"},{"lineNumber":776,"author":{"gitId":"hhdqirui"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student4.getEmail(), false, student4, studentsEmailInTeam1,"},{"lineNumber":777,"author":{"gitId":"hhdqirui"},"content":"                fr2112, fq30, null));"},{"lineNumber":778,"author":{"gitId":"hhdqirui"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student4.getEmail(), false, student5, studentsEmailInTeam2,"},{"lineNumber":779,"author":{"gitId":"hhdqirui"},"content":"                fr2113, fq30, null));"},{"lineNumber":780,"author":{"gitId":"-"},"content":""},{"lineNumber":781,"author":{"gitId":"-"},"content":"        ______TS(\"test if visible to giver\u0027s team members\");"},{"lineNumber":782,"author":{"gitId":"-"},"content":""},{"lineNumber":783,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student2.getEmail(), false, student2, studentsEmailInTeam1,"},{"lineNumber":784,"author":{"gitId":"-"},"content":"                fr171, fq17, null));"},{"lineNumber":785,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student1.getEmail(), false, student1, studentsEmailInTeam1,"},{"lineNumber":786,"author":{"gitId":"-"},"content":"                fr221, fq22, null));"},{"lineNumber":787,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student7.getEmail(), false, student7, studentsEmailInTeam3,"},{"lineNumber":788,"author":{"gitId":"-"},"content":"                fr251, fq25, null));"},{"lineNumber":789,"author":{"gitId":"-"},"content":"        // other students include giver\u0027s team members"},{"lineNumber":790,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student3.getEmail(), false, student3, studentsEmailInTeam1,"},{"lineNumber":791,"author":{"gitId":"-"},"content":"                fr261, fq26, null));"},{"lineNumber":792,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(student3.getEmail(), false, student3, studentsEmailInTeam1,"},{"lineNumber":793,"author":{"gitId":"-"},"content":"                fr111, fq11, null));"},{"lineNumber":794,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(student4.getEmail(), false, student4, studentsEmailInTeam1,"},{"lineNumber":795,"author":{"gitId":"-"},"content":"                fr123, fq12, null));"},{"lineNumber":796,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(student2.getEmail(), false, student2, studentsEmailInTeam1,"},{"lineNumber":797,"author":{"gitId":"-"},"content":"                fr241, fq24, null));"},{"lineNumber":798,"author":{"gitId":"-"},"content":"        // invalid usage"},{"lineNumber":799,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(student8.getEmail(), false, student8, null,"},{"lineNumber":800,"author":{"gitId":"-"},"content":"                fr281, fq28, null));"},{"lineNumber":801,"author":{"gitId":"-"},"content":""},{"lineNumber":802,"author":{"gitId":"-"},"content":"        ______TS(\"test if visible to receiver\u0027s team members\");"},{"lineNumber":803,"author":{"gitId":"-"},"content":""},{"lineNumber":804,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student7.getEmail(), false, student7, studentsEmailInTeam3,"},{"lineNumber":805,"author":{"gitId":"-"},"content":"                fr171, fq17, null));"},{"lineNumber":806,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student1.getEmail(), false, student1, studentsEmailInTeam1,"},{"lineNumber":807,"author":{"gitId":"-"},"content":"                fr231, fq23, null));"},{"lineNumber":808,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(student2.getEmail(), false, student2, studentsEmailInTeam1,"},{"lineNumber":809,"author":{"gitId":"-"},"content":"                fr111, fq11, null));"},{"lineNumber":810,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(student4.getEmail(), false, student4, studentsEmailInTeam1,"},{"lineNumber":811,"author":{"gitId":"-"},"content":"                fr122, fq12, null));"},{"lineNumber":812,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(student6.getEmail(), false, student6, studentsEmailInTeam3,"},{"lineNumber":813,"author":{"gitId":"-"},"content":"                fr271, fq27, null));"},{"lineNumber":814,"author":{"gitId":"-"},"content":""},{"lineNumber":815,"author":{"gitId":"-"},"content":"        ______TS(\"test if visible to instructors\");"},{"lineNumber":816,"author":{"gitId":"-"},"content":""},{"lineNumber":817,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor1.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":818,"author":{"gitId":"-"},"content":"                fr111, fq11, instructor1));"},{"lineNumber":819,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor2.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":820,"author":{"gitId":"-"},"content":"                fr123, fq12, instructor2));"},{"lineNumber":821,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor1.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":822,"author":{"gitId":"-"},"content":"                fr131, fq13, instructor1));"},{"lineNumber":823,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor2.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":824,"author":{"gitId":"-"},"content":"                fr161, fq16, instructor2));"},{"lineNumber":825,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor1.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":826,"author":{"gitId":"-"},"content":"                fr191, fq19, instructor1));"},{"lineNumber":827,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor2.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":828,"author":{"gitId":"-"},"content":"                fr231, fq23, instructor2));"},{"lineNumber":829,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor1.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":830,"author":{"gitId":"-"},"content":"                fr271, fq27, instructor1));"},{"lineNumber":831,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor1.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":832,"author":{"gitId":"-"},"content":"                fr171, fq17, instructor1));"},{"lineNumber":833,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor2.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":834,"author":{"gitId":"-"},"content":"                fr181, fq18, instructor2));"},{"lineNumber":835,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor2.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":836,"author":{"gitId":"-"},"content":"                fr211, fq21, instructor2));"},{"lineNumber":837,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor1.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":838,"author":{"gitId":"-"},"content":"                fr221, fq22, instructor1));"},{"lineNumber":839,"author":{"gitId":"-"},"content":""},{"lineNumber":840,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor3.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":841,"author":{"gitId":"-"},"content":"                fr123, fq12, instructor3));"},{"lineNumber":842,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor3.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":843,"author":{"gitId":"-"},"content":"                fr161, fq16, instructor3));"},{"lineNumber":844,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor3.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":845,"author":{"gitId":"-"},"content":"                fr191, fq19, instructor3));"},{"lineNumber":846,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor3.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":847,"author":{"gitId":"-"},"content":"                fr251, fq25, instructor3));"},{"lineNumber":848,"author":{"gitId":"-"},"content":""},{"lineNumber":849,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor4.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":850,"author":{"gitId":"-"},"content":"                fr112, fq11, instructor4));"},{"lineNumber":851,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor4.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":852,"author":{"gitId":"-"},"content":"                fr252, fq25, instructor4));"},{"lineNumber":853,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor4.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":854,"author":{"gitId":"-"},"content":"                fr121, fq12, instructor4));"},{"lineNumber":855,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor4.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":856,"author":{"gitId":"-"},"content":"                fr122, fq12, instructor4));"},{"lineNumber":857,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor4.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":858,"author":{"gitId":"-"},"content":"                fr211, fq21, instructor4));"},{"lineNumber":859,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor4.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":860,"author":{"gitId":"-"},"content":"                fr242, fq24, instructor4));"},{"lineNumber":861,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor4.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":862,"author":{"gitId":"-"},"content":"                fr271, fq27, instructor4));"},{"lineNumber":863,"author":{"gitId":"-"},"content":""},{"lineNumber":864,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor5.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":865,"author":{"gitId":"-"},"content":"                fr162, fq16, instructor5));"},{"lineNumber":866,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor5.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":867,"author":{"gitId":"-"},"content":"                fr191, fq19, instructor5));"},{"lineNumber":868,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor5.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":869,"author":{"gitId":"-"},"content":"                fr271, fq27, instructor5));"},{"lineNumber":870,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor5.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":871,"author":{"gitId":"-"},"content":"                fr121, fq12, instructor5));"},{"lineNumber":872,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor5.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":873,"author":{"gitId":"-"},"content":"                fr122, fq12, instructor5));"},{"lineNumber":874,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor5.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":875,"author":{"gitId":"-"},"content":"                fr161, fq16, instructor5));"},{"lineNumber":876,"author":{"gitId":"-"},"content":""},{"lineNumber":877,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor6.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":878,"author":{"gitId":"-"},"content":"                fr111, fq11, instructor6));"},{"lineNumber":879,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor6.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":880,"author":{"gitId":"-"},"content":"                fr123, fq12, instructor6));"},{"lineNumber":881,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor6.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":882,"author":{"gitId":"-"},"content":"                fr252, fq25, instructor6));"},{"lineNumber":883,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor6.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":884,"author":{"gitId":"-"},"content":"                fr112, fq11, instructor6));"},{"lineNumber":885,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor6.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":886,"author":{"gitId":"-"},"content":"                fr121, fq12, instructor6));"},{"lineNumber":887,"author":{"gitId":"-"},"content":"        // \"general\" involved is checked as a section"},{"lineNumber":888,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor6.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":889,"author":{"gitId":"-"},"content":"                fr131, fq13, instructor6));"},{"lineNumber":890,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor6.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":891,"author":{"gitId":"-"},"content":"                fr161, fq16, instructor6));"},{"lineNumber":892,"author":{"gitId":"-"},"content":"        // \"instructors\" involved is checked as a section"},{"lineNumber":893,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor6.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":894,"author":{"gitId":"-"},"content":"                fr162, fq16, instructor6));"},{"lineNumber":895,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor6.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":896,"author":{"gitId":"-"},"content":"                fr191, fq19, instructor6));"},{"lineNumber":897,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor6.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":898,"author":{"gitId":"-"},"content":"                fr232, fq23, instructor6));"},{"lineNumber":899,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":900,"author":{"gitId":"hhdqirui"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor1.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":901,"author":{"gitId":"hhdqirui"},"content":"                fr2111, fq30, instructor1));"},{"lineNumber":902,"author":{"gitId":"hhdqirui"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor2.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":903,"author":{"gitId":"hhdqirui"},"content":"                fr2111, fq30, instructor2));"},{"lineNumber":904,"author":{"gitId":"hhdqirui"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor3.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":905,"author":{"gitId":"hhdqirui"},"content":"                fr2111, fq30, instructor3));"},{"lineNumber":906,"author":{"gitId":"hhdqirui"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor4.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":907,"author":{"gitId":"hhdqirui"},"content":"                fr2111, fq30, instructor4));"},{"lineNumber":908,"author":{"gitId":"hhdqirui"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor5.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":909,"author":{"gitId":"hhdqirui"},"content":"                fr2111, fq30, instructor5));"},{"lineNumber":910,"author":{"gitId":"hhdqirui"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor6.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":911,"author":{"gitId":"hhdqirui"},"content":"                fr2111, fq30, instructor6));"},{"lineNumber":912,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":913,"author":{"gitId":"hhdqirui"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor1.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":914,"author":{"gitId":"hhdqirui"},"content":"                fr2112, fq30, instructor1));"},{"lineNumber":915,"author":{"gitId":"hhdqirui"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor2.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":916,"author":{"gitId":"hhdqirui"},"content":"                fr2112, fq30, instructor2));"},{"lineNumber":917,"author":{"gitId":"hhdqirui"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor3.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":918,"author":{"gitId":"hhdqirui"},"content":"                fr2112, fq30, instructor3));"},{"lineNumber":919,"author":{"gitId":"hhdqirui"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor4.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":920,"author":{"gitId":"hhdqirui"},"content":"                fr2112, fq30, instructor4));"},{"lineNumber":921,"author":{"gitId":"hhdqirui"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor5.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":922,"author":{"gitId":"hhdqirui"},"content":"                fr2112, fq30, instructor5));"},{"lineNumber":923,"author":{"gitId":"hhdqirui"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor6.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":924,"author":{"gitId":"hhdqirui"},"content":"                fr2112, fq30, instructor6));"},{"lineNumber":925,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":926,"author":{"gitId":"hhdqirui"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor1.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":927,"author":{"gitId":"hhdqirui"},"content":"                fr2113, fq30, instructor1));"},{"lineNumber":928,"author":{"gitId":"hhdqirui"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor2.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":929,"author":{"gitId":"hhdqirui"},"content":"                fr2113, fq30, instructor2));"},{"lineNumber":930,"author":{"gitId":"hhdqirui"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor3.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":931,"author":{"gitId":"hhdqirui"},"content":"                fr2113, fq30, instructor3));"},{"lineNumber":932,"author":{"gitId":"hhdqirui"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor4.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":933,"author":{"gitId":"hhdqirui"},"content":"                fr2113, fq30, instructor4));"},{"lineNumber":934,"author":{"gitId":"hhdqirui"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor5.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":935,"author":{"gitId":"hhdqirui"},"content":"                fr2113, fq30, instructor5));"},{"lineNumber":936,"author":{"gitId":"hhdqirui"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor6.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":937,"author":{"gitId":"hhdqirui"},"content":"                fr2113, fq30, instructor6));"},{"lineNumber":938,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":939,"author":{"gitId":"-"},"content":""},{"lineNumber":940,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":941,"author":{"gitId":"-"},"content":"    public void testDeleteFeedbackResponsesInvolvedEntityOfCourseCascade_shouldDeleteRelatedResponses() {"},{"lineNumber":942,"author":{"gitId":"-"},"content":"        StudentAttributes studentToDelete \u003d dataBundle.students.get(\"student1InCourse1\");"},{"lineNumber":943,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes session1InCourse1 \u003d dataBundle.feedbackSessions.get(\"session1InCourse1\");"},{"lineNumber":944,"author":{"gitId":"-"},"content":""},{"lineNumber":945,"author":{"gitId":"-"},"content":"        // the responses also have some associated comments"},{"lineNumber":946,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e remainingResponses \u003d new ArrayList\u003c\u003e();"},{"lineNumber":947,"author":{"gitId":"-"},"content":"        remainingResponses.addAll("},{"lineNumber":948,"author":{"gitId":"-"},"content":"                frLogic.getFeedbackResponsesFromGiverForCourse(studentToDelete.getCourse(), studentToDelete.getEmail()));"},{"lineNumber":949,"author":{"gitId":"-"},"content":"        remainingResponses.addAll("},{"lineNumber":950,"author":{"gitId":"-"},"content":"                frLogic.getFeedbackResponsesForReceiverForCourse(studentToDelete.getCourse(), studentToDelete.getEmail()));"},{"lineNumber":951,"author":{"gitId":"-"},"content":"        assertFalse(remainingResponses.isEmpty());"},{"lineNumber":952,"author":{"gitId":"-"},"content":""},{"lineNumber":953,"author":{"gitId":"-"},"content":"        // the student has some responses"},{"lineNumber":954,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e responsesForStudent1 \u003d"},{"lineNumber":955,"author":{"gitId":"-"},"content":"                frLogic.getFeedbackResponsesFromGiverForCourse(studentToDelete.getCourse(), studentToDelete.getEmail());"},{"lineNumber":956,"author":{"gitId":"-"},"content":"        responsesForStudent1.addAll("},{"lineNumber":957,"author":{"gitId":"-"},"content":"                frLogic.getFeedbackResponsesForReceiverForCourse(studentToDelete.getCourse(), studentToDelete.getEmail()));"},{"lineNumber":958,"author":{"gitId":"-"},"content":"        assertFalse(responsesForStudent1.isEmpty());"},{"lineNumber":959,"author":{"gitId":"-"},"content":"        assertTrue("},{"lineNumber":960,"author":{"gitId":"-"},"content":"                frLogic.getGiverSetThatAnswerFeedbackSession(session1InCourse1.getCourseId(),"},{"lineNumber":961,"author":{"gitId":"-"},"content":"                        session1InCourse1.getFeedbackSessionName()).contains(studentToDelete.getEmail()));"},{"lineNumber":962,"author":{"gitId":"-"},"content":""},{"lineNumber":963,"author":{"gitId":"-"},"content":"        frLogic.deleteFeedbackResponsesInvolvedEntityOfCourseCascade("},{"lineNumber":964,"author":{"gitId":"-"},"content":"                studentToDelete.getCourse(), studentToDelete.getEmail());"},{"lineNumber":965,"author":{"gitId":"-"},"content":""},{"lineNumber":966,"author":{"gitId":"-"},"content":"        // responses should be deleted"},{"lineNumber":967,"author":{"gitId":"-"},"content":"        remainingResponses \u003d new ArrayList\u003c\u003e();"},{"lineNumber":968,"author":{"gitId":"-"},"content":"        remainingResponses.addAll("},{"lineNumber":969,"author":{"gitId":"-"},"content":"                frLogic.getFeedbackResponsesFromGiverForCourse(studentToDelete.getCourse(), studentToDelete.getEmail()));"},{"lineNumber":970,"author":{"gitId":"-"},"content":"        remainingResponses.addAll("},{"lineNumber":971,"author":{"gitId":"-"},"content":"                frLogic.getFeedbackResponsesForReceiverForCourse(studentToDelete.getCourse(), studentToDelete.getEmail()));"},{"lineNumber":972,"author":{"gitId":"-"},"content":"        assertEquals(0, remainingResponses.size());"},{"lineNumber":973,"author":{"gitId":"-"},"content":""},{"lineNumber":974,"author":{"gitId":"-"},"content":"        // comments should also be deleted"},{"lineNumber":975,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseCommentAttributes\u003e remainingComments \u003d new ArrayList\u003c\u003e();"},{"lineNumber":976,"author":{"gitId":"-"},"content":"        for (FeedbackResponseAttributes response : responsesForStudent1) {"},{"lineNumber":977,"author":{"gitId":"-"},"content":"            remainingComments.addAll(frcLogic.getFeedbackResponseCommentForResponse(response.getId()));"},{"lineNumber":978,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":979,"author":{"gitId":"-"},"content":"        assertEquals(0, remainingComments.size());"},{"lineNumber":980,"author":{"gitId":"-"},"content":""},{"lineNumber":981,"author":{"gitId":"-"},"content":"        // the student no longer has responses for the session"},{"lineNumber":982,"author":{"gitId":"-"},"content":"        assertFalse("},{"lineNumber":983,"author":{"gitId":"-"},"content":"                frLogic.getGiverSetThatAnswerFeedbackSession(session1InCourse1.getCourseId(),"},{"lineNumber":984,"author":{"gitId":"-"},"content":"                        session1InCourse1.getFeedbackSessionName()).contains(studentToDelete.getEmail()));"},{"lineNumber":985,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":986,"author":{"gitId":"-"},"content":""},{"lineNumber":987,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":988,"author":{"gitId":"-"},"content":"    public void testDeleteFeedbackResponseCascade() {"},{"lineNumber":989,"author":{"gitId":"-"},"content":"        ______TS(\"non-existent response\");"},{"lineNumber":990,"author":{"gitId":"-"},"content":""},{"lineNumber":991,"author":{"gitId":"-"},"content":"        // should pass silently"},{"lineNumber":992,"author":{"gitId":"-"},"content":"        frLogic.deleteFeedbackResponseCascade(\"not-exist\");"},{"lineNumber":993,"author":{"gitId":"-"},"content":""},{"lineNumber":994,"author":{"gitId":"-"},"content":"        ______TS(\"standard delete\");"},{"lineNumber":995,"author":{"gitId":"-"},"content":""},{"lineNumber":996,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fra \u003d getResponseFromDatabase(\"response1ForQ1S1C1\");"},{"lineNumber":997,"author":{"gitId":"-"},"content":"        assertNotNull(fra);"},{"lineNumber":998,"author":{"gitId":"-"},"content":"        // the response has comments"},{"lineNumber":999,"author":{"gitId":"-"},"content":"        assertFalse(frcLogic.getFeedbackResponseCommentForResponse(fra.getId()).isEmpty());"},{"lineNumber":1000,"author":{"gitId":"-"},"content":""},{"lineNumber":1001,"author":{"gitId":"-"},"content":"        frLogic.deleteFeedbackResponseCascade(fra.getId());"},{"lineNumber":1002,"author":{"gitId":"-"},"content":""},{"lineNumber":1003,"author":{"gitId":"-"},"content":"        assertNull(frLogic.getFeedbackResponse(fra.getId()));"},{"lineNumber":1004,"author":{"gitId":"-"},"content":"        // associated comments are deleted"},{"lineNumber":1005,"author":{"gitId":"-"},"content":"        assertTrue(frcLogic.getFeedbackResponseCommentForResponse(fra.getId()).isEmpty());"},{"lineNumber":1006,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1007,"author":{"gitId":"-"},"content":""},{"lineNumber":1008,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":1009,"author":{"gitId":"-"},"content":"    public void testDeleteFeedbackResponses_byCourseId() {"},{"lineNumber":1010,"author":{"gitId":"-"},"content":"        ______TS(\"standard delete\");"},{"lineNumber":1011,"author":{"gitId":"-"},"content":""},{"lineNumber":1012,"author":{"gitId":"-"},"content":"        // test that responses are deleted"},{"lineNumber":1013,"author":{"gitId":"-"},"content":"        String courseId \u003d \"idOfTypicalCourse1\";"},{"lineNumber":1014,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.getFeedbackResponsesForSession(\"First feedback session\", courseId).isEmpty());"},{"lineNumber":1015,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.getFeedbackResponsesForSession(\"Grace Period Session\", courseId).isEmpty());"},{"lineNumber":1016,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.getFeedbackResponsesForSession(\"Closed Session\", courseId).isEmpty());"},{"lineNumber":1017,"author":{"gitId":"-"},"content":""},{"lineNumber":1018,"author":{"gitId":"-"},"content":"        frLogic.deleteFeedbackResponses("},{"lineNumber":1019,"author":{"gitId":"-"},"content":"                AttributesDeletionQuery.builder()"},{"lineNumber":1020,"author":{"gitId":"-"},"content":"                        .withCourseId(courseId)"},{"lineNumber":1021,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":1022,"author":{"gitId":"-"},"content":""},{"lineNumber":1023,"author":{"gitId":"-"},"content":"        assertEquals(0, frLogic.getFeedbackResponsesForSession(\"First feedback session\", courseId).size());"},{"lineNumber":1024,"author":{"gitId":"-"},"content":"        assertEquals(0, frLogic.getFeedbackResponsesForSession(\"Grace Period Session\", courseId).size());"},{"lineNumber":1025,"author":{"gitId":"-"},"content":"        assertEquals(0, frLogic.getFeedbackResponsesForSession(\"Closed Session\", courseId).size());"},{"lineNumber":1026,"author":{"gitId":"-"},"content":""},{"lineNumber":1027,"author":{"gitId":"-"},"content":"        // test that responses from other courses are unaffected"},{"lineNumber":1028,"author":{"gitId":"-"},"content":"        String otherCourse \u003d \"idOfTypicalCourse2\";"},{"lineNumber":1029,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.getFeedbackResponsesForSession(\"Instructor feedback session\", otherCourse).isEmpty());"},{"lineNumber":1030,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1031,"author":{"gitId":"-"},"content":""},{"lineNumber":1032,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":1033,"author":{"gitId":"-"},"content":"    public void testDeleteFeedbackResponsesForQuestionCascade_studentsQuestion_shouldUpdateRespondents() {"},{"lineNumber":1034,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fra \u003d getResponseFromDatabase(\"response1ForQ1S1C1\");"},{"lineNumber":1035,"author":{"gitId":"-"},"content":""},{"lineNumber":1036,"author":{"gitId":"-"},"content":"        // this is the only response the student has given for the session"},{"lineNumber":1037,"author":{"gitId":"-"},"content":"        assertEquals(1, frLogic.getFeedbackResponsesFromGiverForCourse(fra.getCourseId(), fra.getGiver()).stream()"},{"lineNumber":1038,"author":{"gitId":"-"},"content":"                .filter(response -\u003e response.getFeedbackSessionName().equals(fra.getFeedbackSessionName()))"},{"lineNumber":1039,"author":{"gitId":"-"},"content":"                .count());"},{"lineNumber":1040,"author":{"gitId":"-"},"content":"        // the student has answers for the session"},{"lineNumber":1041,"author":{"gitId":"-"},"content":"        assertTrue("},{"lineNumber":1042,"author":{"gitId":"-"},"content":"                frLogic.getGiverSetThatAnswerFeedbackSession(fra.getCourseId(),"},{"lineNumber":1043,"author":{"gitId":"-"},"content":"                        fra.getFeedbackSessionName()).contains(fra.getGiver()));"},{"lineNumber":1044,"author":{"gitId":"-"},"content":""},{"lineNumber":1045,"author":{"gitId":"-"},"content":"        frLogic.deleteFeedbackResponsesForQuestionCascade(fra.getFeedbackQuestionId());"},{"lineNumber":1046,"author":{"gitId":"-"},"content":""},{"lineNumber":1047,"author":{"gitId":"-"},"content":"        // there is no student X as respondents"},{"lineNumber":1048,"author":{"gitId":"-"},"content":"        assertFalse("},{"lineNumber":1049,"author":{"gitId":"-"},"content":"                frLogic.getGiverSetThatAnswerFeedbackSession(fra.getCourseId(),"},{"lineNumber":1050,"author":{"gitId":"-"},"content":"                        fra.getFeedbackSessionName()).contains(fra.getGiver()));"},{"lineNumber":1051,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1052,"author":{"gitId":"-"},"content":""},{"lineNumber":1053,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":1054,"author":{"gitId":"-"},"content":"    public void testDeleteFeedbackResponsesForQuestionCascade_instructorsQuestion_shouldUpdateRespondents() {"},{"lineNumber":1055,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fra \u003d getResponseFromDatabase(\"response1ForQ3S1C1\");"},{"lineNumber":1056,"author":{"gitId":"-"},"content":""},{"lineNumber":1057,"author":{"gitId":"-"},"content":"        // this is the only response the instructor has given for the session"},{"lineNumber":1058,"author":{"gitId":"-"},"content":"        assertEquals(1, frLogic.getFeedbackResponsesFromGiverForCourse(fra.getCourseId(), fra.getGiver()).stream()"},{"lineNumber":1059,"author":{"gitId":"-"},"content":"                .filter(response -\u003e response.getFeedbackSessionName().equals(fra.getFeedbackSessionName()))"},{"lineNumber":1060,"author":{"gitId":"-"},"content":"                .count());"},{"lineNumber":1061,"author":{"gitId":"-"},"content":"        // the instructor has answers for the session"},{"lineNumber":1062,"author":{"gitId":"-"},"content":"        assertTrue("},{"lineNumber":1063,"author":{"gitId":"-"},"content":"                frLogic.getGiverSetThatAnswerFeedbackSession(fra.getCourseId(),"},{"lineNumber":1064,"author":{"gitId":"-"},"content":"                        fra.getFeedbackSessionName()).contains(fra.getGiver()));"},{"lineNumber":1065,"author":{"gitId":"-"},"content":""},{"lineNumber":1066,"author":{"gitId":"-"},"content":"        frLogic.deleteFeedbackResponsesForQuestionCascade(fra.getFeedbackQuestionId());"},{"lineNumber":1067,"author":{"gitId":"-"},"content":""},{"lineNumber":1068,"author":{"gitId":"-"},"content":"        // there is not instructor X in instructor respondents"},{"lineNumber":1069,"author":{"gitId":"-"},"content":"        assertFalse("},{"lineNumber":1070,"author":{"gitId":"-"},"content":"                frLogic.getGiverSetThatAnswerFeedbackSession(fra.getCourseId(),"},{"lineNumber":1071,"author":{"gitId":"-"},"content":"                        fra.getFeedbackSessionName()).contains(fra.getGiver()));"},{"lineNumber":1072,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1073,"author":{"gitId":"-"},"content":""},{"lineNumber":1074,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":1075,"author":{"gitId":"-"},"content":"    public void testDeleteFeedbackResponsesInvolvedEntityOfCourseCascade_giverIsStudent_shouldUpdateRespondents() {"},{"lineNumber":1076,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fra \u003d getResponseFromDatabase(\"response3ForQ2S1C1\");"},{"lineNumber":1077,"author":{"gitId":"-"},"content":"        StudentAttributes student2InCourse1 \u003d dataBundle.students.get(\"student2InCourse1\");"},{"lineNumber":1078,"author":{"gitId":"-"},"content":"        // giver is student"},{"lineNumber":1079,"author":{"gitId":"-"},"content":"        assertEquals(FeedbackParticipantType.STUDENTS,"},{"lineNumber":1080,"author":{"gitId":"-"},"content":"                fqLogic.getFeedbackQuestion(fra.getFeedbackQuestionId()).getGiverType());"},{"lineNumber":1081,"author":{"gitId":"-"},"content":"        // student is the recipient"},{"lineNumber":1082,"author":{"gitId":"-"},"content":"        assertEquals(fra.getRecipient(), student2InCourse1.getEmail());"},{"lineNumber":1083,"author":{"gitId":"-"},"content":""},{"lineNumber":1084,"author":{"gitId":"-"},"content":"        // this is the only response the giver has given for the session"},{"lineNumber":1085,"author":{"gitId":"-"},"content":"        assertEquals(1, frLogic.getFeedbackResponsesFromGiverForCourse(fra.getCourseId(), fra.getGiver()).stream()"},{"lineNumber":1086,"author":{"gitId":"-"},"content":"                .filter(response -\u003e response.getFeedbackSessionName().equals(fra.getFeedbackSessionName()))"},{"lineNumber":1087,"author":{"gitId":"-"},"content":"                .count());"},{"lineNumber":1088,"author":{"gitId":"-"},"content":"        // the student has answers for the session"},{"lineNumber":1089,"author":{"gitId":"-"},"content":"        assertTrue("},{"lineNumber":1090,"author":{"gitId":"-"},"content":"                frLogic.getGiverSetThatAnswerFeedbackSession(fra.getCourseId(),"},{"lineNumber":1091,"author":{"gitId":"-"},"content":"                        fra.getFeedbackSessionName()).contains(fra.getGiver()));"},{"lineNumber":1092,"author":{"gitId":"-"},"content":""},{"lineNumber":1093,"author":{"gitId":"-"},"content":"        // after the giver is removed from the course"},{"lineNumber":1094,"author":{"gitId":"-"},"content":"        frLogic.deleteFeedbackResponsesInvolvedEntityOfCourseCascade("},{"lineNumber":1095,"author":{"gitId":"-"},"content":"                student2InCourse1.getCourse(), student2InCourse1.getEmail());"},{"lineNumber":1096,"author":{"gitId":"-"},"content":""},{"lineNumber":1097,"author":{"gitId":"-"},"content":"        // there is no student X as respondents"},{"lineNumber":1098,"author":{"gitId":"-"},"content":"        assertFalse("},{"lineNumber":1099,"author":{"gitId":"-"},"content":"                frLogic.getGiverSetThatAnswerFeedbackSession(fra.getCourseId(),"},{"lineNumber":1100,"author":{"gitId":"-"},"content":"                        fra.getFeedbackSessionName()).contains(fra.getGiver()));"},{"lineNumber":1101,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1102,"author":{"gitId":"-"},"content":""},{"lineNumber":1103,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":1104,"author":{"gitId":"-"},"content":"    public void testDeleteFeedbackResponsesInvolvedEntityOfCourseCascade_giverIsInstructor_shouldUpdateRespondents() {"},{"lineNumber":1105,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fra \u003d getResponseFromDatabase(\"response1ForQ1S2C2\");"},{"lineNumber":1106,"author":{"gitId":"-"},"content":"        StudentAttributes student1InCourse2 \u003d dataBundle.students.get(\"student1InCourse2\");"},{"lineNumber":1107,"author":{"gitId":"-"},"content":"        // giver is instructor"},{"lineNumber":1108,"author":{"gitId":"-"},"content":"        assertEquals(FeedbackParticipantType.SELF,"},{"lineNumber":1109,"author":{"gitId":"-"},"content":"                fqLogic.getFeedbackQuestion(fra.getFeedbackQuestionId()).getGiverType());"},{"lineNumber":1110,"author":{"gitId":"-"},"content":"        // student is the recipient"},{"lineNumber":1111,"author":{"gitId":"-"},"content":"        assertEquals(fra.getRecipient(), student1InCourse2.getEmail());"},{"lineNumber":1112,"author":{"gitId":"-"},"content":""},{"lineNumber":1113,"author":{"gitId":"-"},"content":"        // this is the only response the instructor has given for the session"},{"lineNumber":1114,"author":{"gitId":"-"},"content":"        assertEquals(1, frLogic.getFeedbackResponsesFromGiverForCourse(fra.getCourseId(), fra.getGiver()).stream()"},{"lineNumber":1115,"author":{"gitId":"-"},"content":"                .filter(response -\u003e response.getFeedbackSessionName().equals(fra.getFeedbackSessionName()))"},{"lineNumber":1116,"author":{"gitId":"-"},"content":"                .count());"},{"lineNumber":1117,"author":{"gitId":"-"},"content":"        // the instructor has answers for the session"},{"lineNumber":1118,"author":{"gitId":"-"},"content":"        assertTrue("},{"lineNumber":1119,"author":{"gitId":"-"},"content":"                frLogic.getGiverSetThatAnswerFeedbackSession(fra.getCourseId(),"},{"lineNumber":1120,"author":{"gitId":"-"},"content":"                        fra.getFeedbackSessionName()).contains(fra.getGiver()));"},{"lineNumber":1121,"author":{"gitId":"-"},"content":""},{"lineNumber":1122,"author":{"gitId":"-"},"content":"        // after the giver is removed from the course"},{"lineNumber":1123,"author":{"gitId":"-"},"content":"        frLogic.deleteFeedbackResponsesInvolvedEntityOfCourseCascade("},{"lineNumber":1124,"author":{"gitId":"-"},"content":"                student1InCourse2.getCourse(), student1InCourse2.getEmail());"},{"lineNumber":1125,"author":{"gitId":"-"},"content":""},{"lineNumber":1126,"author":{"gitId":"-"},"content":"        // there is no instructor X as respondents"},{"lineNumber":1127,"author":{"gitId":"-"},"content":"        assertFalse("},{"lineNumber":1128,"author":{"gitId":"-"},"content":"                frLogic.getGiverSetThatAnswerFeedbackSession(fra.getCourseId(),"},{"lineNumber":1129,"author":{"gitId":"-"},"content":"                        fra.getFeedbackSessionName()).contains(fra.getGiver()));"},{"lineNumber":1130,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1131,"author":{"gitId":"-"},"content":""},{"lineNumber":1132,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":1133,"author":{"gitId":"-"},"content":"    public void testDeleteFeedbackResponsesInvolvedEntityOfCourseCascade_shouldDeleteRelevantResponsesAsRecipient()"},{"lineNumber":1134,"author":{"gitId":"-"},"content":"            throws Exception {"},{"lineNumber":1135,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor1OfCourse1 \u003d dataBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":1136,"author":{"gitId":"-"},"content":""},{"lineNumber":1137,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fra1ReceivedByTeam \u003d getResponseFromDatabase(\"response1ForQ1S2C1\");"},{"lineNumber":1138,"author":{"gitId":"-"},"content":"        frcLogic.createFeedbackResponseComment("},{"lineNumber":1139,"author":{"gitId":"-"},"content":"                FeedbackResponseCommentAttributes"},{"lineNumber":1140,"author":{"gitId":"-"},"content":"                        .builder()"},{"lineNumber":1141,"author":{"gitId":"-"},"content":"                        .withCourseId(fra1ReceivedByTeam.getCourseId())"},{"lineNumber":1142,"author":{"gitId":"-"},"content":"                        .withFeedbackSessionName(fra1ReceivedByTeam.getFeedbackSessionName())"},{"lineNumber":1143,"author":{"gitId":"-"},"content":"                        .withCommentGiver(instructor1OfCourse1.getEmail())"},{"lineNumber":1144,"author":{"gitId":"-"},"content":"                        .withCommentText(\"Comment 1\")"},{"lineNumber":1145,"author":{"gitId":"-"},"content":"                        .withFeedbackQuestionId(fra1ReceivedByTeam.getFeedbackQuestionId())"},{"lineNumber":1146,"author":{"gitId":"-"},"content":"                        .withFeedbackResponseId(fra1ReceivedByTeam.getId())"},{"lineNumber":1147,"author":{"gitId":"-"},"content":"                        .withGiverSection(fra1ReceivedByTeam.getGiverSection())"},{"lineNumber":1148,"author":{"gitId":"-"},"content":"                        .withReceiverSection(fra1ReceivedByTeam.getRecipientSection())"},{"lineNumber":1149,"author":{"gitId":"-"},"content":"                        .withCommentFromFeedbackParticipant(false)"},{"lineNumber":1150,"author":{"gitId":"-"},"content":"                        .withCommentGiverType(FeedbackParticipantType.INSTRUCTORS)"},{"lineNumber":1151,"author":{"gitId":"-"},"content":"                        .withVisibilityFollowingFeedbackQuestion(false)"},{"lineNumber":1152,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":1153,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fra2ReceivedByTeam \u003d getResponseFromDatabase(\"response1GracePeriodFeedback\");"},{"lineNumber":1154,"author":{"gitId":"-"},"content":"        frcLogic.createFeedbackResponseComment("},{"lineNumber":1155,"author":{"gitId":"-"},"content":"                FeedbackResponseCommentAttributes"},{"lineNumber":1156,"author":{"gitId":"-"},"content":"                        .builder()"},{"lineNumber":1157,"author":{"gitId":"-"},"content":"                        .withCourseId(fra2ReceivedByTeam.getCourseId())"},{"lineNumber":1158,"author":{"gitId":"-"},"content":"                        .withFeedbackSessionName(fra2ReceivedByTeam.getFeedbackSessionName())"},{"lineNumber":1159,"author":{"gitId":"-"},"content":"                        .withCommentGiver(instructor1OfCourse1.getEmail())"},{"lineNumber":1160,"author":{"gitId":"-"},"content":"                        .withCommentText(\"Comment 2\")"},{"lineNumber":1161,"author":{"gitId":"-"},"content":"                        .withFeedbackQuestionId(fra2ReceivedByTeam.getFeedbackQuestionId())"},{"lineNumber":1162,"author":{"gitId":"-"},"content":"                        .withFeedbackResponseId(fra2ReceivedByTeam.getId())"},{"lineNumber":1163,"author":{"gitId":"-"},"content":"                        .withGiverSection(fra2ReceivedByTeam.getGiverSection())"},{"lineNumber":1164,"author":{"gitId":"-"},"content":"                        .withReceiverSection(fra2ReceivedByTeam.getRecipientSection())"},{"lineNumber":1165,"author":{"gitId":"-"},"content":"                        .withCommentFromFeedbackParticipant(false)"},{"lineNumber":1166,"author":{"gitId":"-"},"content":"                        .withCommentGiverType(FeedbackParticipantType.INSTRUCTORS)"},{"lineNumber":1167,"author":{"gitId":"-"},"content":"                        .withVisibilityFollowingFeedbackQuestion(false)"},{"lineNumber":1168,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":1169,"author":{"gitId":"-"},"content":""},{"lineNumber":1170,"author":{"gitId":"-"},"content":"        String teamName \u003d \"Team 1.2\";"},{"lineNumber":1171,"author":{"gitId":"-"},"content":"        assertEquals(teamName, fra1ReceivedByTeam.getRecipient());"},{"lineNumber":1172,"author":{"gitId":"-"},"content":"        assertEquals(teamName, fra2ReceivedByTeam.getRecipient());"},{"lineNumber":1173,"author":{"gitId":"-"},"content":""},{"lineNumber":1174,"author":{"gitId":"-"},"content":"        // both responses got some comments"},{"lineNumber":1175,"author":{"gitId":"-"},"content":"        assertFalse(frcLogic.getFeedbackResponseCommentForResponse(fra1ReceivedByTeam.getId()).isEmpty());"},{"lineNumber":1176,"author":{"gitId":"-"},"content":"        assertFalse(frcLogic.getFeedbackResponseCommentForResponse(fra2ReceivedByTeam.getId()).isEmpty());"},{"lineNumber":1177,"author":{"gitId":"-"},"content":""},{"lineNumber":1178,"author":{"gitId":"-"},"content":"        frLogic.deleteFeedbackResponsesInvolvedEntityOfCourseCascade(fra1ReceivedByTeam.getCourseId(), teamName);"},{"lineNumber":1179,"author":{"gitId":"-"},"content":""},{"lineNumber":1180,"author":{"gitId":"-"},"content":"        // responses received by the team should be deleted"},{"lineNumber":1181,"author":{"gitId":"-"},"content":"        assertNull(frLogic.getFeedbackResponse(fra1ReceivedByTeam.getId()));"},{"lineNumber":1182,"author":{"gitId":"-"},"content":"        assertNull(frLogic.getFeedbackResponse(fra2ReceivedByTeam.getId()));"},{"lineNumber":1183,"author":{"gitId":"-"},"content":""},{"lineNumber":1184,"author":{"gitId":"-"},"content":"        // their associated comments should be deleted"},{"lineNumber":1185,"author":{"gitId":"-"},"content":"        assertTrue(frcLogic.getFeedbackResponseCommentForResponse(fra1ReceivedByTeam.getId()).isEmpty());"},{"lineNumber":1186,"author":{"gitId":"-"},"content":"        assertTrue(frcLogic.getFeedbackResponseCommentForResponse(fra2ReceivedByTeam.getId()).isEmpty());"},{"lineNumber":1187,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1188,"author":{"gitId":"-"},"content":""},{"lineNumber":1189,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":1190,"author":{"gitId":"-"},"content":"    public void testDeleteFeedbackResponsesInvolvedEntityOfCourseCascade_shouldDeleteRelevantResponsesAsGiver()"},{"lineNumber":1191,"author":{"gitId":"-"},"content":"            throws Exception {"},{"lineNumber":1192,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor1OfCourse1 \u003d dataBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":1193,"author":{"gitId":"-"},"content":"        StudentAttributes student4InCourse1 \u003d dataBundle.students.get(\"student4InCourse1\");"},{"lineNumber":1194,"author":{"gitId":"-"},"content":""},{"lineNumber":1195,"author":{"gitId":"-"},"content":"        // the following two responses are given by student4InCourse1 as a representative of his team"},{"lineNumber":1196,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fra1GivenByTeam \u003d getResponseFromDatabase(\"response1ForQ1S2C1\");"},{"lineNumber":1197,"author":{"gitId":"-"},"content":"        // update the response\u0027s giver to the team name"},{"lineNumber":1198,"author":{"gitId":"-"},"content":"        fra1GivenByTeam \u003d frLogic.updateFeedbackResponseCascade("},{"lineNumber":1199,"author":{"gitId":"-"},"content":"                FeedbackResponseAttributes.updateOptionsBuilder(fra1GivenByTeam.getId())"},{"lineNumber":1200,"author":{"gitId":"-"},"content":"                        .withGiver(student4InCourse1.getTeam())"},{"lineNumber":1201,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":1202,"author":{"gitId":"-"},"content":"        frcLogic.createFeedbackResponseComment("},{"lineNumber":1203,"author":{"gitId":"-"},"content":"                FeedbackResponseCommentAttributes"},{"lineNumber":1204,"author":{"gitId":"-"},"content":"                        .builder()"},{"lineNumber":1205,"author":{"gitId":"-"},"content":"                        .withCourseId(fra1GivenByTeam.getCourseId())"},{"lineNumber":1206,"author":{"gitId":"-"},"content":"                        .withFeedbackSessionName(fra1GivenByTeam.getFeedbackSessionName())"},{"lineNumber":1207,"author":{"gitId":"-"},"content":"                        .withCommentGiver(instructor1OfCourse1.getEmail())"},{"lineNumber":1208,"author":{"gitId":"-"},"content":"                        .withCommentText(\"Comment 1\")"},{"lineNumber":1209,"author":{"gitId":"-"},"content":"                        .withFeedbackQuestionId(fra1GivenByTeam.getFeedbackQuestionId())"},{"lineNumber":1210,"author":{"gitId":"-"},"content":"                        .withFeedbackResponseId(fra1GivenByTeam.getId())"},{"lineNumber":1211,"author":{"gitId":"-"},"content":"                        .withGiverSection(fra1GivenByTeam.getGiverSection())"},{"lineNumber":1212,"author":{"gitId":"-"},"content":"                        .withReceiverSection(fra1GivenByTeam.getRecipientSection())"},{"lineNumber":1213,"author":{"gitId":"-"},"content":"                        .withCommentFromFeedbackParticipant(false)"},{"lineNumber":1214,"author":{"gitId":"-"},"content":"                        .withCommentGiverType(FeedbackParticipantType.INSTRUCTORS)"},{"lineNumber":1215,"author":{"gitId":"-"},"content":"                        .withVisibilityFollowingFeedbackQuestion(false)"},{"lineNumber":1216,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":1217,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fra2GivenByTeam \u003d getResponseFromDatabase(\"response1GracePeriodFeedback\");"},{"lineNumber":1218,"author":{"gitId":"-"},"content":"        // update the response\u0027s giver to the team name"},{"lineNumber":1219,"author":{"gitId":"-"},"content":"        fra2GivenByTeam \u003d frLogic.updateFeedbackResponseCascade("},{"lineNumber":1220,"author":{"gitId":"-"},"content":"                FeedbackResponseAttributes.updateOptionsBuilder(fra2GivenByTeam.getId())"},{"lineNumber":1221,"author":{"gitId":"-"},"content":"                        .withGiver(student4InCourse1.getTeam())"},{"lineNumber":1222,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":1223,"author":{"gitId":"-"},"content":"        frcLogic.createFeedbackResponseComment("},{"lineNumber":1224,"author":{"gitId":"-"},"content":"                FeedbackResponseCommentAttributes"},{"lineNumber":1225,"author":{"gitId":"-"},"content":"                        .builder()"},{"lineNumber":1226,"author":{"gitId":"-"},"content":"                        .withCourseId(fra2GivenByTeam.getCourseId())"},{"lineNumber":1227,"author":{"gitId":"-"},"content":"                        .withFeedbackSessionName(fra2GivenByTeam.getFeedbackSessionName())"},{"lineNumber":1228,"author":{"gitId":"-"},"content":"                        .withCommentGiver(instructor1OfCourse1.getEmail())"},{"lineNumber":1229,"author":{"gitId":"-"},"content":"                        .withCommentText(\"Comment 2\")"},{"lineNumber":1230,"author":{"gitId":"-"},"content":"                        .withFeedbackQuestionId(fra2GivenByTeam.getFeedbackQuestionId())"},{"lineNumber":1231,"author":{"gitId":"-"},"content":"                        .withFeedbackResponseId(fra2GivenByTeam.getId())"},{"lineNumber":1232,"author":{"gitId":"-"},"content":"                        .withGiverSection(fra2GivenByTeam.getGiverSection())"},{"lineNumber":1233,"author":{"gitId":"-"},"content":"                        .withReceiverSection(fra2GivenByTeam.getRecipientSection())"},{"lineNumber":1234,"author":{"gitId":"-"},"content":"                        .withCommentFromFeedbackParticipant(false)"},{"lineNumber":1235,"author":{"gitId":"-"},"content":"                        .withCommentGiverType(FeedbackParticipantType.INSTRUCTORS)"},{"lineNumber":1236,"author":{"gitId":"-"},"content":"                        .withVisibilityFollowingFeedbackQuestion(false)"},{"lineNumber":1237,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":1238,"author":{"gitId":"-"},"content":""},{"lineNumber":1239,"author":{"gitId":"-"},"content":"        String teamName \u003d student4InCourse1.getTeam();"},{"lineNumber":1240,"author":{"gitId":"-"},"content":"        assertEquals(teamName, fra1GivenByTeam.getGiver());"},{"lineNumber":1241,"author":{"gitId":"-"},"content":"        assertEquals(teamName, fra2GivenByTeam.getGiver());"},{"lineNumber":1242,"author":{"gitId":"-"},"content":""},{"lineNumber":1243,"author":{"gitId":"-"},"content":"        // both responses got some comments"},{"lineNumber":1244,"author":{"gitId":"-"},"content":"        assertFalse(frcLogic.getFeedbackResponseCommentForResponse(fra1GivenByTeam.getId()).isEmpty());"},{"lineNumber":1245,"author":{"gitId":"-"},"content":"        assertFalse(frcLogic.getFeedbackResponseCommentForResponse(fra2GivenByTeam.getId()).isEmpty());"},{"lineNumber":1246,"author":{"gitId":"-"},"content":""},{"lineNumber":1247,"author":{"gitId":"-"},"content":"        frLogic.deleteFeedbackResponsesInvolvedEntityOfCourseCascade(fra1GivenByTeam.getCourseId(), teamName);"},{"lineNumber":1248,"author":{"gitId":"-"},"content":""},{"lineNumber":1249,"author":{"gitId":"-"},"content":"        // responses received by the team should be deleted"},{"lineNumber":1250,"author":{"gitId":"-"},"content":"        assertNull(frLogic.getFeedbackResponse(fra1GivenByTeam.getId()));"},{"lineNumber":1251,"author":{"gitId":"-"},"content":"        assertNull(frLogic.getFeedbackResponse(fra2GivenByTeam.getId()));"},{"lineNumber":1252,"author":{"gitId":"-"},"content":""},{"lineNumber":1253,"author":{"gitId":"-"},"content":"        // their associated comments should be deleted"},{"lineNumber":1254,"author":{"gitId":"-"},"content":"        assertTrue(frcLogic.getFeedbackResponseCommentForResponse(fra1GivenByTeam.getId()).isEmpty());"},{"lineNumber":1255,"author":{"gitId":"-"},"content":"        assertTrue(frcLogic.getFeedbackResponseCommentForResponse(fra2GivenByTeam.getId()).isEmpty());"},{"lineNumber":1256,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1257,"author":{"gitId":"-"},"content":""},{"lineNumber":1258,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":1259,"author":{"gitId":"-"},"content":"    public void testGetSessionResultsForUser_studentSpecificQuestion_shouldHaveCorrectResponsesFiltered() {"},{"lineNumber":1260,"author":{"gitId":"-"},"content":"        // extra test data used on top of typical data bundle"},{"lineNumber":1261,"author":{"gitId":"-"},"content":"        removeAndRestoreDataBundle(loadDataBundle(\"/SpecialCharacterTest.json\"));"},{"lineNumber":1262,"author":{"gitId":"-"},"content":""},{"lineNumber":1263,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes question \u003d fqLogic.getFeedbackQuestion("},{"lineNumber":1264,"author":{"gitId":"-"},"content":"                \"First Session\", \"FQLogicPCT.CS2104\", 1);"},{"lineNumber":1265,"author":{"gitId":"-"},"content":""},{"lineNumber":1266,"author":{"gitId":"-"},"content":"        // Alice will see 3 responses"},{"lineNumber":1267,"author":{"gitId":"-"},"content":"        SessionResultsBundle bundle \u003d frLogic.getSessionResultsForUser("},{"lineNumber":1268,"author":{"gitId":"-"},"content":"                \"First Session\", \"FQLogicPCT.CS2104\", \"FQLogicPCT.alice.b@gmail.tmt\","},{"lineNumber":1269,"author":{"gitId":"-"},"content":"                false, question.getId(), false);"},{"lineNumber":1270,"author":{"gitId":"-"},"content":"        assertEquals(1, bundle.getQuestionResponseMap().size());"},{"lineNumber":1271,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e responseForQuestion \u003d"},{"lineNumber":1272,"author":{"gitId":"-"},"content":"                bundle.getQuestionResponseMap().entrySet().iterator().next().getValue();"},{"lineNumber":1273,"author":{"gitId":"-"},"content":"        assertEquals(3, responseForQuestion.size());"},{"lineNumber":1274,"author":{"gitId":"-"},"content":""},{"lineNumber":1275,"author":{"gitId":"-"},"content":"        // Benny will see 3 responses"},{"lineNumber":1276,"author":{"gitId":"-"},"content":"        bundle \u003d frLogic.getSessionResultsForUser("},{"lineNumber":1277,"author":{"gitId":"-"},"content":"                \"First Session\", \"FQLogicPCT.CS2104\", \"FQLogicPCT.benny.c@gmail.tmt\","},{"lineNumber":1278,"author":{"gitId":"-"},"content":"                false, question.getId(), false);"},{"lineNumber":1279,"author":{"gitId":"-"},"content":"        assertEquals(1, bundle.getQuestionResponseMap().size());"},{"lineNumber":1280,"author":{"gitId":"-"},"content":"        responseForQuestion \u003d bundle.getQuestionResponseMap().entrySet().iterator().next().getValue();"},{"lineNumber":1281,"author":{"gitId":"-"},"content":"        assertEquals(3, responseForQuestion.size());"},{"lineNumber":1282,"author":{"gitId":"-"},"content":""},{"lineNumber":1283,"author":{"gitId":"-"},"content":"        // Charlie will see 2 responses"},{"lineNumber":1284,"author":{"gitId":"-"},"content":"        bundle \u003d frLogic.getSessionResultsForUser("},{"lineNumber":1285,"author":{"gitId":"-"},"content":"                \"First Session\", \"FQLogicPCT.CS2104\", \"FQLogicPCT.charlie.d@gmail.tmt\","},{"lineNumber":1286,"author":{"gitId":"-"},"content":"                false, question.getId(), false);"},{"lineNumber":1287,"author":{"gitId":"-"},"content":"        assertEquals(1, bundle.getQuestionResponseMap().size());"},{"lineNumber":1288,"author":{"gitId":"-"},"content":"        responseForQuestion \u003d bundle.getQuestionResponseMap().entrySet().iterator().next().getValue();"},{"lineNumber":1289,"author":{"gitId":"-"},"content":"        assertEquals(2, responseForQuestion.size());"},{"lineNumber":1290,"author":{"gitId":"-"},"content":""},{"lineNumber":1291,"author":{"gitId":"-"},"content":"        // Danny will see 2 responses"},{"lineNumber":1292,"author":{"gitId":"-"},"content":"        bundle \u003d frLogic.getSessionResultsForUser("},{"lineNumber":1293,"author":{"gitId":"-"},"content":"                \"First Session\", \"FQLogicPCT.CS2104\", \"FQLogicPCT.danny.e@gmail.tmt\","},{"lineNumber":1294,"author":{"gitId":"-"},"content":"                false, question.getId(), false);"},{"lineNumber":1295,"author":{"gitId":"-"},"content":"        assertEquals(1, bundle.getQuestionResponseMap().size());"},{"lineNumber":1296,"author":{"gitId":"-"},"content":"        responseForQuestion \u003d bundle.getQuestionResponseMap().entrySet().iterator().next().getValue();"},{"lineNumber":1297,"author":{"gitId":"-"},"content":"        assertEquals(2, responseForQuestion.size());"},{"lineNumber":1298,"author":{"gitId":"-"},"content":""},{"lineNumber":1299,"author":{"gitId":"-"},"content":"        // Emily will see 1 response"},{"lineNumber":1300,"author":{"gitId":"-"},"content":"        bundle \u003d frLogic.getSessionResultsForUser("},{"lineNumber":1301,"author":{"gitId":"-"},"content":"                \"First Session\", \"FQLogicPCT.CS2104\", \"FQLogicPCT.emily.f@gmail.tmt\","},{"lineNumber":1302,"author":{"gitId":"-"},"content":"                false, question.getId(), false);"},{"lineNumber":1303,"author":{"gitId":"-"},"content":"        assertEquals(1, bundle.getQuestionResponseMap().size());"},{"lineNumber":1304,"author":{"gitId":"-"},"content":"        responseForQuestion \u003d bundle.getQuestionResponseMap().entrySet().iterator().next().getValue();"},{"lineNumber":1305,"author":{"gitId":"-"},"content":"        assertEquals(1, responseForQuestion.size());"},{"lineNumber":1306,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1307,"author":{"gitId":"-"},"content":""},{"lineNumber":1308,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":1309,"author":{"gitId":"-"},"content":"    public void testGetSessionResultsForUser_studentAllQuestions_shouldGenerateCorrectBundle() {"},{"lineNumber":1310,"author":{"gitId":"-"},"content":"        DataBundle responseBundle \u003d loadDataBundle(\"/FeedbackSessionResultsTest.json\");"},{"lineNumber":1311,"author":{"gitId":"-"},"content":"        removeAndRestoreDataBundle(responseBundle);"},{"lineNumber":1312,"author":{"gitId":"-"},"content":""},{"lineNumber":1313,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes session \u003d responseBundle.feedbackSessions.get(\"standard.session\");"},{"lineNumber":1314,"author":{"gitId":"-"},"content":""},{"lineNumber":1315,"author":{"gitId":"-"},"content":"        // Test result bundle for student1"},{"lineNumber":1316,"author":{"gitId":"-"},"content":"        StudentAttributes student \u003d responseBundle.students.get(\"student1InCourse1\");"},{"lineNumber":1317,"author":{"gitId":"-"},"content":""},{"lineNumber":1318,"author":{"gitId":"-"},"content":"        ______TS(\"student himself/herself is viewing results\");"},{"lineNumber":1319,"author":{"gitId":"-"},"content":""},{"lineNumber":1320,"author":{"gitId":"-"},"content":"        SessionResultsBundle bundle \u003d frLogic.getSessionResultsForUser("},{"lineNumber":1321,"author":{"gitId":"-"},"content":"                session.getFeedbackSessionName(), session.getCourseId(), student.getEmail(),"},{"lineNumber":1322,"author":{"gitId":"-"},"content":"                false, null, false);"},{"lineNumber":1323,"author":{"gitId":"-"},"content":""},{"lineNumber":1324,"author":{"gitId":"-"},"content":"        // Student can see responses: q1r1, q2r1,3, q3r1, qr4r2-3, q5r1, q7r1-2, q8r1-2"},{"lineNumber":1325,"author":{"gitId":"-"},"content":"        // We don\u0027t check the actual IDs as this is also implicitly tested"},{"lineNumber":1326,"author":{"gitId":"-"},"content":"        // later when checking the visibility table."},{"lineNumber":1327,"author":{"gitId":"-"},"content":"        int totalResponse \u003d 0;"},{"lineNumber":1328,"author":{"gitId":"-"},"content":"        for (Map.Entry\u003cString, List\u003cFeedbackResponseAttributes\u003e\u003e entry"},{"lineNumber":1329,"author":{"gitId":"-"},"content":"                : bundle.getQuestionResponseMap().entrySet()) {"},{"lineNumber":1330,"author":{"gitId":"-"},"content":"            totalResponse +\u003d entry.getValue().size();"},{"lineNumber":1331,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1332,"author":{"gitId":"-"},"content":"        int totalMissingResponse \u003d 0;"},{"lineNumber":1333,"author":{"gitId":"-"},"content":"        for (Map.Entry\u003cString, List\u003cFeedbackResponseAttributes\u003e\u003e entry"},{"lineNumber":1334,"author":{"gitId":"-"},"content":"                : bundle.getQuestionMissingResponseMap().entrySet()) {"},{"lineNumber":1335,"author":{"gitId":"-"},"content":"            totalMissingResponse +\u003d entry.getValue().size();"},{"lineNumber":1336,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1337,"author":{"gitId":"-"},"content":"        assertEquals(11, totalResponse);"},{"lineNumber":1338,"author":{"gitId":"-"},"content":"        // student should not see missing responses"},{"lineNumber":1339,"author":{"gitId":"-"},"content":"        assertEquals(0, totalMissingResponse);"},{"lineNumber":1340,"author":{"gitId":"-"},"content":"        // student cannot see q6 because there is no viewable response"},{"lineNumber":1341,"author":{"gitId":"-"},"content":"        assertEquals(7, bundle.getQuestionsMap().size());"},{"lineNumber":1342,"author":{"gitId":"-"},"content":"        assertEquals(7, bundle.getQuestionResponseMap().size());"},{"lineNumber":1343,"author":{"gitId":"-"},"content":"        assertEquals(7, bundle.getQuestionMissingResponseMap().size());"},{"lineNumber":1344,"author":{"gitId":"-"},"content":""},{"lineNumber":1345,"author":{"gitId":"-"},"content":"        // Test the generated response visibilityTable for userNames."},{"lineNumber":1346,"author":{"gitId":"-"},"content":"        Map\u003cString, Boolean\u003e responseGiverVisibilityTable \u003d bundle.getResponseGiverVisibilityTable();"},{"lineNumber":1347,"author":{"gitId":"-"},"content":"        assertTrue(responseGiverVisibilityTable.get(getResponseId(\"qn1.resp1\", responseBundle)));"},{"lineNumber":1348,"author":{"gitId":"-"},"content":"        assertTrue(responseGiverVisibilityTable.get(getResponseId(\"qn2.resp1\", responseBundle)));"},{"lineNumber":1349,"author":{"gitId":"-"},"content":"        assertTrue(responseGiverVisibilityTable.get(getResponseId(\"qn2.resp3\", responseBundle)));"},{"lineNumber":1350,"author":{"gitId":"-"},"content":"        assertTrue(responseGiverVisibilityTable.get(getResponseId(\"qn3.resp1\", responseBundle)));"},{"lineNumber":1351,"author":{"gitId":"-"},"content":"        assertTrue(responseGiverVisibilityTable.get(getResponseId(\"qn4.resp2\", responseBundle)));"},{"lineNumber":1352,"author":{"gitId":"-"},"content":"        assertFalse(responseGiverVisibilityTable.get(getResponseId(\"qn4.resp3\", responseBundle)));"},{"lineNumber":1353,"author":{"gitId":"-"},"content":"        assertTrue(responseGiverVisibilityTable.get(getResponseId(\"qn5.resp1\", responseBundle)));"},{"lineNumber":1354,"author":{"gitId":"-"},"content":"        assertTrue(responseGiverVisibilityTable.get(getResponseId(\"qn7.resp1\", responseBundle)));"},{"lineNumber":1355,"author":{"gitId":"-"},"content":"        assertTrue(responseGiverVisibilityTable.get(getResponseId(\"qn7.resp2\", responseBundle)));"},{"lineNumber":1356,"author":{"gitId":"-"},"content":"        assertTrue(responseGiverVisibilityTable.get(getResponseId(\"qn8.resp1\", responseBundle)));"},{"lineNumber":1357,"author":{"gitId":"-"},"content":"        assertTrue(responseGiverVisibilityTable.get(getResponseId(\"qn8.resp2\", responseBundle)));"},{"lineNumber":1358,"author":{"gitId":"-"},"content":"        assertEquals(totalResponse, responseGiverVisibilityTable.size());"},{"lineNumber":1359,"author":{"gitId":"-"},"content":""},{"lineNumber":1360,"author":{"gitId":"-"},"content":"        Map\u003cString, Boolean\u003e responseRecipientVisibilityTable \u003d bundle.getResponseRecipientVisibilityTable();"},{"lineNumber":1361,"author":{"gitId":"-"},"content":"        assertTrue(responseRecipientVisibilityTable.get(getResponseId(\"qn1.resp1\", responseBundle)));"},{"lineNumber":1362,"author":{"gitId":"-"},"content":"        assertTrue(responseRecipientVisibilityTable.get(getResponseId(\"qn2.resp1\", responseBundle)));"},{"lineNumber":1363,"author":{"gitId":"-"},"content":"        assertTrue(responseRecipientVisibilityTable.get(getResponseId(\"qn2.resp3\", responseBundle)));"},{"lineNumber":1364,"author":{"gitId":"-"},"content":"        assertTrue(responseRecipientVisibilityTable.get(getResponseId(\"qn3.resp1\", responseBundle)));"},{"lineNumber":1365,"author":{"gitId":"-"},"content":"        assertTrue(responseRecipientVisibilityTable.get(getResponseId(\"qn4.resp2\", responseBundle)));"},{"lineNumber":1366,"author":{"gitId":"-"},"content":"        assertTrue(responseRecipientVisibilityTable.get(getResponseId(\"qn4.resp3\", responseBundle)));"},{"lineNumber":1367,"author":{"gitId":"-"},"content":"        assertFalse(responseRecipientVisibilityTable.get(getResponseId(\"qn5.resp1\", responseBundle)));"},{"lineNumber":1368,"author":{"gitId":"-"},"content":"        assertTrue(responseRecipientVisibilityTable.get(getResponseId(\"qn7.resp1\", responseBundle)));"},{"lineNumber":1369,"author":{"gitId":"-"},"content":"        assertTrue(responseRecipientVisibilityTable.get(getResponseId(\"qn7.resp2\", responseBundle)));"},{"lineNumber":1370,"author":{"gitId":"-"},"content":"        assertTrue(responseRecipientVisibilityTable.get(getResponseId(\"qn8.resp1\", responseBundle)));"},{"lineNumber":1371,"author":{"gitId":"-"},"content":"        assertTrue(responseRecipientVisibilityTable.get(getResponseId(\"qn8.resp2\", responseBundle)));"},{"lineNumber":1372,"author":{"gitId":"-"},"content":"        assertEquals(totalResponse, responseRecipientVisibilityTable.size());"},{"lineNumber":1373,"author":{"gitId":"-"},"content":""},{"lineNumber":1374,"author":{"gitId":"-"},"content":"        // no entry in comment visibility table"},{"lineNumber":1375,"author":{"gitId":"-"},"content":"        Map\u003cLong, Boolean\u003e commentGiverVisibilityTable \u003d bundle.getCommentGiverVisibilityTable();"},{"lineNumber":1376,"author":{"gitId":"-"},"content":"        assertEquals(0, commentGiverVisibilityTable.size());"},{"lineNumber":1377,"author":{"gitId":"-"},"content":""},{"lineNumber":1378,"author":{"gitId":"-"},"content":"        // preview invisibility info should be empty because this is NOT previewing results"},{"lineNumber":1379,"author":{"gitId":"-"},"content":"        assertEquals(0, bundle.getQuestionsNotVisibleForPreviewMap().size());"},{"lineNumber":1380,"author":{"gitId":"-"},"content":"        assertEquals(0, bundle.getQuestionsWithCommentNotVisibleForPreview().size());"},{"lineNumber":1381,"author":{"gitId":"-"},"content":""},{"lineNumber":1382,"author":{"gitId":"-"},"content":"        ______TS(\"instructor is previewing results as student\");"},{"lineNumber":1383,"author":{"gitId":"-"},"content":""},{"lineNumber":1384,"author":{"gitId":"-"},"content":"        bundle \u003d frLogic.getSessionResultsForUser("},{"lineNumber":1385,"author":{"gitId":"-"},"content":"                session.getFeedbackSessionName(), session.getCourseId(), student.getEmail(),"},{"lineNumber":1386,"author":{"gitId":"-"},"content":"                false, null, true);"},{"lineNumber":1387,"author":{"gitId":"-"},"content":""},{"lineNumber":1388,"author":{"gitId":"-"},"content":"        // instructors can see responses (when previewing results as the student): qr4r2-3"},{"lineNumber":1389,"author":{"gitId":"-"},"content":"        totalResponse \u003d 0;"},{"lineNumber":1390,"author":{"gitId":"-"},"content":"        for (Map.Entry\u003cString, List\u003cFeedbackResponseAttributes\u003e\u003e entry"},{"lineNumber":1391,"author":{"gitId":"-"},"content":"                : bundle.getQuestionResponseMap().entrySet()) {"},{"lineNumber":1392,"author":{"gitId":"-"},"content":"            totalResponse +\u003d entry.getValue().size();"},{"lineNumber":1393,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1394,"author":{"gitId":"-"},"content":"        totalMissingResponse \u003d 0;"},{"lineNumber":1395,"author":{"gitId":"-"},"content":"        for (Map.Entry\u003cString, List\u003cFeedbackResponseAttributes\u003e\u003e entry"},{"lineNumber":1396,"author":{"gitId":"-"},"content":"                : bundle.getQuestionMissingResponseMap().entrySet()) {"},{"lineNumber":1397,"author":{"gitId":"-"},"content":"            totalMissingResponse +\u003d entry.getValue().size();"},{"lineNumber":1398,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1399,"author":{"gitId":"-"},"content":"        assertEquals(2, totalResponse);"},{"lineNumber":1400,"author":{"gitId":"-"},"content":"        // student should not see missing responses"},{"lineNumber":1401,"author":{"gitId":"-"},"content":"        assertEquals(0, totalMissingResponse);"},{"lineNumber":1402,"author":{"gitId":"-"},"content":"        // only q4 and q6 are visible to instructors previewing the results"},{"lineNumber":1403,"author":{"gitId":"-"},"content":"        // but q6 has no viewable response for the student himself/herself"},{"lineNumber":1404,"author":{"gitId":"-"},"content":"        assertEquals(1, bundle.getQuestionsMap().size());"},{"lineNumber":1405,"author":{"gitId":"-"},"content":"        assertEquals(1, bundle.getQuestionResponseMap().size());"},{"lineNumber":1406,"author":{"gitId":"-"},"content":"        assertEquals(1, bundle.getQuestionMissingResponseMap().size());"},{"lineNumber":1407,"author":{"gitId":"-"},"content":""},{"lineNumber":1408,"author":{"gitId":"-"},"content":"        // Test the generated response visibilityTable for userNames."},{"lineNumber":1409,"author":{"gitId":"-"},"content":"        responseGiverVisibilityTable \u003d bundle.getResponseGiverVisibilityTable();"},{"lineNumber":1410,"author":{"gitId":"-"},"content":"        assertTrue(responseGiverVisibilityTable.get(getResponseId(\"qn4.resp2\", responseBundle)));"},{"lineNumber":1411,"author":{"gitId":"-"},"content":"        assertFalse(responseGiverVisibilityTable.get(getResponseId(\"qn4.resp3\", responseBundle)));"},{"lineNumber":1412,"author":{"gitId":"-"},"content":"        assertEquals(totalResponse, responseGiverVisibilityTable.size());"},{"lineNumber":1413,"author":{"gitId":"-"},"content":""},{"lineNumber":1414,"author":{"gitId":"-"},"content":"        responseRecipientVisibilityTable \u003d bundle.getResponseRecipientVisibilityTable();"},{"lineNumber":1415,"author":{"gitId":"-"},"content":"        assertTrue(responseRecipientVisibilityTable.get(getResponseId(\"qn4.resp2\", responseBundle)));"},{"lineNumber":1416,"author":{"gitId":"-"},"content":"        assertTrue(responseRecipientVisibilityTable.get(getResponseId(\"qn4.resp3\", responseBundle)));"},{"lineNumber":1417,"author":{"gitId":"-"},"content":"        assertEquals(totalResponse, responseRecipientVisibilityTable.size());"},{"lineNumber":1418,"author":{"gitId":"-"},"content":""},{"lineNumber":1419,"author":{"gitId":"-"},"content":"        // no entry in comment visibility table"},{"lineNumber":1420,"author":{"gitId":"-"},"content":"        assertEquals(0, bundle.getCommentGiverVisibilityTable().size());"},{"lineNumber":1421,"author":{"gitId":"-"},"content":""},{"lineNumber":1422,"author":{"gitId":"-"},"content":"        // q1-3, q5, q7-8 have responses viewable for the student but not instructors"},{"lineNumber":1423,"author":{"gitId":"-"},"content":"        assertEquals(6, bundle.getQuestionsNotVisibleForPreviewMap().size());"},{"lineNumber":1424,"author":{"gitId":"-"},"content":"        assertEquals(0, bundle.getQuestionsWithCommentNotVisibleForPreview().size());"},{"lineNumber":1425,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1426,"author":{"gitId":"-"},"content":""},{"lineNumber":1427,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":1428,"author":{"gitId":"-"},"content":"    public void testGetSessionResultsForUser_instructor_shouldGenerateCorrectBundle() {"},{"lineNumber":1429,"author":{"gitId":"-"},"content":"        DataBundle responseBundle \u003d loadDataBundle(\"/FeedbackSessionResultsTest.json\");"},{"lineNumber":1430,"author":{"gitId":"-"},"content":"        removeAndRestoreDataBundle(responseBundle);"},{"lineNumber":1431,"author":{"gitId":"-"},"content":""},{"lineNumber":1432,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes session \u003d responseBundle.feedbackSessions.get(\"standard.session\");"},{"lineNumber":1433,"author":{"gitId":"-"},"content":""},{"lineNumber":1434,"author":{"gitId":"-"},"content":"        // Test result bundle for instructor1"},{"lineNumber":1435,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor \u003d responseBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":1436,"author":{"gitId":"-"},"content":"        SessionResultsBundle bundle \u003d frLogic.getSessionResultsForUser("},{"lineNumber":1437,"author":{"gitId":"-"},"content":"                session.getFeedbackSessionName(), session.getCourseId(), instructor.getEmail(),"},{"lineNumber":1438,"author":{"gitId":"-"},"content":"                true, null, false);"},{"lineNumber":1439,"author":{"gitId":"-"},"content":""},{"lineNumber":1440,"author":{"gitId":"-"},"content":"        // Instructor can see responses: q3r1, q6r1"},{"lineNumber":1441,"author":{"gitId":"-"},"content":"        // We don\u0027t check the actual IDs as this is also implicitly tested"},{"lineNumber":1442,"author":{"gitId":"-"},"content":"        // later when checking the visibility table."},{"lineNumber":1443,"author":{"gitId":"-"},"content":"        int totalResponse \u003d 0;"},{"lineNumber":1444,"author":{"gitId":"-"},"content":"        for (Map.Entry\u003cString, List\u003cFeedbackResponseAttributes\u003e\u003e entry"},{"lineNumber":1445,"author":{"gitId":"-"},"content":"                : bundle.getQuestionResponseMap().entrySet()) {"},{"lineNumber":1446,"author":{"gitId":"-"},"content":"            totalResponse +\u003d entry.getValue().size();"},{"lineNumber":1447,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1448,"author":{"gitId":"-"},"content":"        int totalMissingResponse \u003d 0;"},{"lineNumber":1449,"author":{"gitId":"-"},"content":"        for (Map.Entry\u003cString, List\u003cFeedbackResponseAttributes\u003e\u003e entry"},{"lineNumber":1450,"author":{"gitId":"-"},"content":"                : bundle.getQuestionMissingResponseMap().entrySet()) {"},{"lineNumber":1451,"author":{"gitId":"-"},"content":"            totalMissingResponse +\u003d entry.getValue().size();"},{"lineNumber":1452,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1453,"author":{"gitId":"-"},"content":"        assertEquals(2, totalResponse);"},{"lineNumber":1454,"author":{"gitId":"-"},"content":"        // instructor should not see missing responses"},{"lineNumber":1455,"author":{"gitId":"-"},"content":"        assertEquals(0, totalMissingResponse);"},{"lineNumber":1456,"author":{"gitId":"-"},"content":""},{"lineNumber":1457,"author":{"gitId":"-"},"content":"        assertEquals(2, bundle.getQuestionsMap().size());"},{"lineNumber":1458,"author":{"gitId":"-"},"content":"        assertEquals(2, bundle.getQuestionResponseMap().size());"},{"lineNumber":1459,"author":{"gitId":"-"},"content":"        assertEquals(2, bundle.getQuestionMissingResponseMap().size());"},{"lineNumber":1460,"author":{"gitId":"-"},"content":""},{"lineNumber":1461,"author":{"gitId":"-"},"content":"        // Test the generated response visibilityTable for userNames."},{"lineNumber":1462,"author":{"gitId":"-"},"content":"        Map\u003cString, Boolean\u003e responseGiverVisibilityTable \u003d bundle.getResponseGiverVisibilityTable();"},{"lineNumber":1463,"author":{"gitId":"-"},"content":"        assertTrue(responseGiverVisibilityTable.get(getResponseId(\"qn3.resp1\", responseBundle)));"},{"lineNumber":1464,"author":{"gitId":"-"},"content":"        assertTrue(responseGiverVisibilityTable.get(getResponseId(\"qn6.resp1\", responseBundle)));"},{"lineNumber":1465,"author":{"gitId":"-"},"content":"        assertEquals(totalResponse, responseGiverVisibilityTable.size());"},{"lineNumber":1466,"author":{"gitId":"-"},"content":""},{"lineNumber":1467,"author":{"gitId":"-"},"content":"        Map\u003cString, Boolean\u003e responseRecipientVisibilityTable \u003d bundle.getResponseRecipientVisibilityTable();"},{"lineNumber":1468,"author":{"gitId":"-"},"content":"        assertFalse(responseRecipientVisibilityTable.get(getResponseId(\"qn3.resp1\", responseBundle)));"},{"lineNumber":1469,"author":{"gitId":"-"},"content":"        assertTrue(responseRecipientVisibilityTable.get(getResponseId(\"qn6.resp1\", responseBundle)));"},{"lineNumber":1470,"author":{"gitId":"-"},"content":"        assertEquals(totalResponse, responseRecipientVisibilityTable.size());"},{"lineNumber":1471,"author":{"gitId":"-"},"content":""},{"lineNumber":1472,"author":{"gitId":"-"},"content":"        // no entry in comment visibility table"},{"lineNumber":1473,"author":{"gitId":"-"},"content":"        Map\u003cLong, Boolean\u003e commentGiverVisibilityTable \u003d bundle.getCommentGiverVisibilityTable();"},{"lineNumber":1474,"author":{"gitId":"-"},"content":"        assertEquals(0, commentGiverVisibilityTable.size());"},{"lineNumber":1475,"author":{"gitId":"-"},"content":""},{"lineNumber":1476,"author":{"gitId":"-"},"content":"        // preview invisibility info should be empty because this is NOT previewing results"},{"lineNumber":1477,"author":{"gitId":"-"},"content":"        assertEquals(0, bundle.getQuestionsNotVisibleForPreviewMap().size());"},{"lineNumber":1478,"author":{"gitId":"-"},"content":"        assertEquals(0, bundle.getQuestionsWithCommentNotVisibleForPreview().size());"},{"lineNumber":1479,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1480,"author":{"gitId":"-"},"content":""},{"lineNumber":1481,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":1482,"author":{"gitId":"-"},"content":"    public void testGetSessionResultsForCourse_specificQuestion_shouldHaveCorrectResponsesFiltered() {"},{"lineNumber":1483,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fq \u003d getQuestionFromDatabase(\"qn3InSession1InCourse1\");"},{"lineNumber":1484,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor \u003d dataBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":1485,"author":{"gitId":"-"},"content":""},{"lineNumber":1486,"author":{"gitId":"-"},"content":"        // no section specified"},{"lineNumber":1487,"author":{"gitId":"-"},"content":"        SessionResultsBundle bundle \u003d frLogic.getSessionResultsForCourse("},{"lineNumber":1488,"author":{"gitId":"-"},"content":"                fq.getFeedbackSessionName(), fq.getCourseId(), instructor.getEmail(),"},{"lineNumber":1489,"author":{"gitId":"-"},"content":"                fq.getId(), null, FeedbackResultFetchType.BOTH);"},{"lineNumber":1490,"author":{"gitId":"-"},"content":"        assertEquals(1, bundle.getQuestionResponseMap().size());"},{"lineNumber":1491,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e responseForQuestion \u003d"},{"lineNumber":1492,"author":{"gitId":"-"},"content":"                bundle.getQuestionResponseMap().entrySet().iterator().next().getValue();"},{"lineNumber":1493,"author":{"gitId":"-"},"content":"        assertEquals(1, responseForQuestion.size());"},{"lineNumber":1494,"author":{"gitId":"-"},"content":""},{"lineNumber":1495,"author":{"gitId":"-"},"content":"        // section specified"},{"lineNumber":1496,"author":{"gitId":"-"},"content":"        fq \u003d getQuestionFromDatabase(\"qn2InSession1InCourse1\");"},{"lineNumber":1497,"author":{"gitId":"-"},"content":"        bundle \u003d frLogic.getSessionResultsForCourse("},{"lineNumber":1498,"author":{"gitId":"-"},"content":"                fq.getFeedbackSessionName(), fq.getCourseId(), instructor.getEmail(),"},{"lineNumber":1499,"author":{"gitId":"-"},"content":"                fq.getId(), \"Section 1\", FeedbackResultFetchType.BOTH);"},{"lineNumber":1500,"author":{"gitId":"-"},"content":"        assertEquals(1, bundle.getQuestionResponseMap().size());"},{"lineNumber":1501,"author":{"gitId":"-"},"content":"        responseForQuestion \u003d bundle.getQuestionResponseMap().entrySet().iterator().next().getValue();"},{"lineNumber":1502,"author":{"gitId":"-"},"content":"        assertEquals(3, responseForQuestion.size());"},{"lineNumber":1503,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1504,"author":{"gitId":"-"},"content":""},{"lineNumber":1505,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":1506,"author":{"gitId":"-"},"content":"    public void testGetSessionResultsForCourse_allQuestions_shouldGenerateCorrectBundle() {"},{"lineNumber":1507,"author":{"gitId":"-"},"content":"        DataBundle responseBundle \u003d loadDataBundle(\"/FeedbackSessionResultsTest.json\");"},{"lineNumber":1508,"author":{"gitId":"-"},"content":"        removeAndRestoreDataBundle(responseBundle);"},{"lineNumber":1509,"author":{"gitId":"-"},"content":""},{"lineNumber":1510,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes session \u003d responseBundle.feedbackSessions.get(\"standard.session\");"},{"lineNumber":1511,"author":{"gitId":"-"},"content":""},{"lineNumber":1512,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor \u003d responseBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":1513,"author":{"gitId":"-"},"content":"        SessionResultsBundle bundle \u003d frLogic.getSessionResultsForCourse("},{"lineNumber":1514,"author":{"gitId":"-"},"content":"                session.getFeedbackSessionName(), session.getCourseId(), instructor.getEmail(),"},{"lineNumber":1515,"author":{"gitId":"-"},"content":"                null, null, FeedbackResultFetchType.BOTH);"},{"lineNumber":1516,"author":{"gitId":"-"},"content":""},{"lineNumber":1517,"author":{"gitId":"-"},"content":"        // Instructor can see responses: q2r1-3, q3r1-2, q4r1-3, q5r1, q6r1"},{"lineNumber":1518,"author":{"gitId":"-"},"content":"        int totalResponse \u003d 0;"},{"lineNumber":1519,"author":{"gitId":"-"},"content":"        for (Map.Entry\u003cString, List\u003cFeedbackResponseAttributes\u003e\u003e entry"},{"lineNumber":1520,"author":{"gitId":"-"},"content":"                : bundle.getQuestionResponseMap().entrySet()) {"},{"lineNumber":1521,"author":{"gitId":"-"},"content":"            totalResponse +\u003d entry.getValue().size();"},{"lineNumber":1522,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1523,"author":{"gitId":"-"},"content":"        int totalMissingResponse \u003d 0;"},{"lineNumber":1524,"author":{"gitId":"-"},"content":"        for (Map.Entry\u003cString, List\u003cFeedbackResponseAttributes\u003e\u003e entry"},{"lineNumber":1525,"author":{"gitId":"-"},"content":"                : bundle.getQuestionMissingResponseMap().entrySet()) {"},{"lineNumber":1526,"author":{"gitId":"-"},"content":"            totalMissingResponse +\u003d entry.getValue().size();"},{"lineNumber":1527,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1528,"author":{"gitId":"-"},"content":"        assertEquals(10, totalResponse);"},{"lineNumber":1529,"author":{"gitId":"-"},"content":"        assertEquals(4, totalMissingResponse);"},{"lineNumber":1530,"author":{"gitId":"-"},"content":"        // Instructor should still see all questions"},{"lineNumber":1531,"author":{"gitId":"-"},"content":"        assertEquals(8, bundle.getQuestionsMap().size());"},{"lineNumber":1532,"author":{"gitId":"-"},"content":"        assertEquals(8, bundle.getQuestionResponseMap().size());"},{"lineNumber":1533,"author":{"gitId":"-"},"content":"        assertEquals(8, bundle.getQuestionMissingResponseMap().size());"},{"lineNumber":1534,"author":{"gitId":"-"},"content":""},{"lineNumber":1535,"author":{"gitId":"-"},"content":"        // Test the generated response visibilityTable for userNames."},{"lineNumber":1536,"author":{"gitId":"-"},"content":"        Map\u003cString, Boolean\u003e responseGiverVisibilityTable \u003d bundle.getResponseGiverVisibilityTable();"},{"lineNumber":1537,"author":{"gitId":"-"},"content":"        assertFalse(responseGiverVisibilityTable.get(getResponseId(\"qn2.resp1\", responseBundle)));"},{"lineNumber":1538,"author":{"gitId":"-"},"content":"        assertFalse(responseGiverVisibilityTable.get(getResponseId(\"qn2.resp2\", responseBundle)));"},{"lineNumber":1539,"author":{"gitId":"-"},"content":"        assertFalse(responseGiverVisibilityTable.get(getResponseId(\"qn2.resp3\", responseBundle)));"},{"lineNumber":1540,"author":{"gitId":"-"},"content":"        assertTrue(responseGiverVisibilityTable.get(getResponseId(\"qn3.resp1\", responseBundle)));"},{"lineNumber":1541,"author":{"gitId":"-"},"content":"        assertFalse(responseGiverVisibilityTable.get(getResponseId(\"qn3.resp2\", responseBundle)));"},{"lineNumber":1542,"author":{"gitId":"-"},"content":"        assertTrue(responseGiverVisibilityTable.get(getResponseId(\"qn4.resp1\", responseBundle)));"},{"lineNumber":1543,"author":{"gitId":"-"},"content":"        assertTrue(responseGiverVisibilityTable.get(getResponseId(\"qn4.resp2\", responseBundle)));"},{"lineNumber":1544,"author":{"gitId":"-"},"content":"        assertTrue(responseGiverVisibilityTable.get(getResponseId(\"qn4.resp3\", responseBundle)));"},{"lineNumber":1545,"author":{"gitId":"-"},"content":"        assertFalse(responseGiverVisibilityTable.get(getResponseId(\"qn5.resp1\", responseBundle)));"},{"lineNumber":1546,"author":{"gitId":"-"},"content":"        assertTrue(responseGiverVisibilityTable.get(getResponseId(\"qn6.resp1\", responseBundle)));"},{"lineNumber":1547,"author":{"gitId":"-"},"content":"        assertEquals(totalResponse + totalMissingResponse, responseGiverVisibilityTable.size());"},{"lineNumber":1548,"author":{"gitId":"-"},"content":""},{"lineNumber":1549,"author":{"gitId":"-"},"content":"        Map\u003cString, Boolean\u003e responseRecipientVisibilityTable \u003d bundle.getResponseRecipientVisibilityTable();"},{"lineNumber":1550,"author":{"gitId":"-"},"content":"        assertFalse(responseRecipientVisibilityTable.get(getResponseId(\"qn2.resp1\", responseBundle)));"},{"lineNumber":1551,"author":{"gitId":"-"},"content":"        assertFalse(responseRecipientVisibilityTable.get(getResponseId(\"qn2.resp2\", responseBundle)));"},{"lineNumber":1552,"author":{"gitId":"-"},"content":"        assertFalse(responseRecipientVisibilityTable.get(getResponseId(\"qn2.resp3\", responseBundle)));"},{"lineNumber":1553,"author":{"gitId":"-"},"content":"        assertFalse(responseRecipientVisibilityTable.get(getResponseId(\"qn3.resp1\", responseBundle)));"},{"lineNumber":1554,"author":{"gitId":"-"},"content":"        assertFalse(responseRecipientVisibilityTable.get(getResponseId(\"qn3.resp2\", responseBundle)));"},{"lineNumber":1555,"author":{"gitId":"-"},"content":"        assertTrue(responseRecipientVisibilityTable.get(getResponseId(\"qn4.resp1\", responseBundle)));"},{"lineNumber":1556,"author":{"gitId":"-"},"content":"        assertTrue(responseRecipientVisibilityTable.get(getResponseId(\"qn4.resp2\", responseBundle)));"},{"lineNumber":1557,"author":{"gitId":"-"},"content":"        assertTrue(responseRecipientVisibilityTable.get(getResponseId(\"qn4.resp3\", responseBundle)));"},{"lineNumber":1558,"author":{"gitId":"-"},"content":"        assertTrue(responseRecipientVisibilityTable.get(getResponseId(\"qn5.resp1\", responseBundle)));"},{"lineNumber":1559,"author":{"gitId":"-"},"content":"        assertTrue(responseRecipientVisibilityTable.get(getResponseId(\"qn6.resp1\", responseBundle)));"},{"lineNumber":1560,"author":{"gitId":"-"},"content":"        assertEquals(totalResponse + totalMissingResponse, responseRecipientVisibilityTable.size());"},{"lineNumber":1561,"author":{"gitId":"-"},"content":""},{"lineNumber":1562,"author":{"gitId":"-"},"content":"        // no entry in comment visibility table"},{"lineNumber":1563,"author":{"gitId":"-"},"content":"        Map\u003cLong, Boolean\u003e commentGiverVisibilityTable \u003d bundle.getCommentGiverVisibilityTable();"},{"lineNumber":1564,"author":{"gitId":"-"},"content":"        assertEquals(0, commentGiverVisibilityTable.size());"},{"lineNumber":1565,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1566,"author":{"gitId":"-"},"content":""},{"lineNumber":1567,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":1568,"author":{"gitId":"-"},"content":"    public void testGetSessionResultsForCourse_allQuestionsSpecificSection_shouldGenerateCorrectBundle() {"},{"lineNumber":1569,"author":{"gitId":"-"},"content":"        DataBundle responseBundle \u003d loadDataBundle(\"/FeedbackSessionResultsTest.json\");"},{"lineNumber":1570,"author":{"gitId":"-"},"content":"        removeAndRestoreDataBundle(responseBundle);"},{"lineNumber":1571,"author":{"gitId":"-"},"content":""},{"lineNumber":1572,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes session \u003d responseBundle.feedbackSessions.get(\"standard.session\");"},{"lineNumber":1573,"author":{"gitId":"-"},"content":""},{"lineNumber":1574,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor \u003d responseBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":1575,"author":{"gitId":"-"},"content":"        SessionResultsBundle bundle \u003d frLogic.getSessionResultsForCourse("},{"lineNumber":1576,"author":{"gitId":"-"},"content":"                session.getFeedbackSessionName(), session.getCourseId(), instructor.getEmail(),"},{"lineNumber":1577,"author":{"gitId":"-"},"content":"                null, \"Section A\", FeedbackResultFetchType.BOTH);"},{"lineNumber":1578,"author":{"gitId":"-"},"content":""},{"lineNumber":1579,"author":{"gitId":"-"},"content":"        // Instructor can see responses: q2r1-3, q3r1-2, q4r1-3, q5r1, q6r1"},{"lineNumber":1580,"author":{"gitId":"-"},"content":"        // after filtering by section, the number of responses seen by instructor will differ."},{"lineNumber":1581,"author":{"gitId":"-"},"content":"        // Responses viewed by instructor after filtering: q2r1-3, q3r1, q4r2-3, q5r1"},{"lineNumber":1582,"author":{"gitId":"-"},"content":"        int totalResponse \u003d 0;"},{"lineNumber":1583,"author":{"gitId":"-"},"content":"        for (Map.Entry\u003cString, List\u003cFeedbackResponseAttributes\u003e\u003e entry"},{"lineNumber":1584,"author":{"gitId":"-"},"content":"                : bundle.getQuestionResponseMap().entrySet()) {"},{"lineNumber":1585,"author":{"gitId":"-"},"content":"            totalResponse +\u003d entry.getValue().size();"},{"lineNumber":1586,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1587,"author":{"gitId":"-"},"content":"        int totalMissingResponse \u003d 0;"},{"lineNumber":1588,"author":{"gitId":"-"},"content":"        for (Map.Entry\u003cString, List\u003cFeedbackResponseAttributes\u003e\u003e entry"},{"lineNumber":1589,"author":{"gitId":"-"},"content":"                : bundle.getQuestionMissingResponseMap().entrySet()) {"},{"lineNumber":1590,"author":{"gitId":"-"},"content":"            totalMissingResponse +\u003d entry.getValue().size();"},{"lineNumber":1591,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1592,"author":{"gitId":"-"},"content":"        assertEquals(7, totalResponse);"},{"lineNumber":1593,"author":{"gitId":"-"},"content":"        assertEquals(0, totalMissingResponse);"},{"lineNumber":1594,"author":{"gitId":"-"},"content":"        // Instructor should still see all questions"},{"lineNumber":1595,"author":{"gitId":"-"},"content":"        assertEquals(8, bundle.getQuestionsMap().size());"},{"lineNumber":1596,"author":{"gitId":"-"},"content":"        assertEquals(8, bundle.getQuestionResponseMap().size());"},{"lineNumber":1597,"author":{"gitId":"-"},"content":"        assertEquals(8, bundle.getQuestionMissingResponseMap().size());"},{"lineNumber":1598,"author":{"gitId":"-"},"content":""},{"lineNumber":1599,"author":{"gitId":"-"},"content":"        // Test the generated response visibilityTable for userNames."},{"lineNumber":1600,"author":{"gitId":"-"},"content":"        Map\u003cString, Boolean\u003e responseGiverVisibilityTable \u003d bundle.getResponseGiverVisibilityTable();"},{"lineNumber":1601,"author":{"gitId":"-"},"content":"        assertTrue(responseGiverVisibilityTable.get(getResponseId(\"qn3.resp1\", responseBundle)));"},{"lineNumber":1602,"author":{"gitId":"-"},"content":"        assertTrue(responseGiverVisibilityTable.get(getResponseId(\"qn4.resp3\", responseBundle)));"},{"lineNumber":1603,"author":{"gitId":"-"},"content":"        assertFalse(responseGiverVisibilityTable.get(getResponseId(\"qn2.resp3\", responseBundle)));"},{"lineNumber":1604,"author":{"gitId":"-"},"content":"        assertFalse(responseGiverVisibilityTable.get(getResponseId(\"qn2.resp1\", responseBundle)));"},{"lineNumber":1605,"author":{"gitId":"-"},"content":"        assertEquals(totalResponse + totalMissingResponse, responseGiverVisibilityTable.size());"},{"lineNumber":1606,"author":{"gitId":"-"},"content":""},{"lineNumber":1607,"author":{"gitId":"-"},"content":"        Map\u003cString, Boolean\u003e responseRecipientVisibilityTable \u003d bundle.getResponseRecipientVisibilityTable();"},{"lineNumber":1608,"author":{"gitId":"-"},"content":"        assertFalse(responseRecipientVisibilityTable.get(getResponseId(\"qn3.resp1\", responseBundle)));"},{"lineNumber":1609,"author":{"gitId":"-"},"content":"        assertTrue(responseRecipientVisibilityTable.get(getResponseId(\"qn4.resp3\", responseBundle)));"},{"lineNumber":1610,"author":{"gitId":"-"},"content":"        assertFalse(responseRecipientVisibilityTable.get(getResponseId(\"qn2.resp3\", responseBundle)));"},{"lineNumber":1611,"author":{"gitId":"-"},"content":"        assertFalse(responseRecipientVisibilityTable.get(getResponseId(\"qn2.resp1\", responseBundle)));"},{"lineNumber":1612,"author":{"gitId":"-"},"content":"        assertEquals(totalResponse + totalMissingResponse, responseGiverVisibilityTable.size());"},{"lineNumber":1613,"author":{"gitId":"-"},"content":"        assertEquals(totalResponse + totalMissingResponse, responseRecipientVisibilityTable.size());"},{"lineNumber":1614,"author":{"gitId":"-"},"content":""},{"lineNumber":1615,"author":{"gitId":"-"},"content":"        // no entry in comment visibility table"},{"lineNumber":1616,"author":{"gitId":"-"},"content":"        Map\u003cLong, Boolean\u003e commentGiverVisibilityTable \u003d bundle.getCommentGiverVisibilityTable();"},{"lineNumber":1617,"author":{"gitId":"-"},"content":"        assertEquals(0, commentGiverVisibilityTable.size());"},{"lineNumber":1618,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1619,"author":{"gitId":"-"},"content":""},{"lineNumber":1620,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":1621,"author":{"gitId":"-"},"content":"    public void testGetSessionResultsForCourse_responseFetchByGiverOrReceiverOnly_shouldGenerateCorrectBundle() {"},{"lineNumber":1622,"author":{"gitId":"-"},"content":"        var responseBundle \u003d loadDataBundle(\"/FeedbackSessionResultsTest.json\");"},{"lineNumber":1623,"author":{"gitId":"-"},"content":"        removeAndRestoreDataBundle(responseBundle);"},{"lineNumber":1624,"author":{"gitId":"-"},"content":""},{"lineNumber":1625,"author":{"gitId":"-"},"content":"        var session \u003d responseBundle.feedbackSessions.get(\"standard.session\");"},{"lineNumber":1626,"author":{"gitId":"-"},"content":""},{"lineNumber":1627,"author":{"gitId":"-"},"content":"        var instructor \u003d responseBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":1628,"author":{"gitId":"-"},"content":"        var sectionToTest \u003d \"Section A\";"},{"lineNumber":1629,"author":{"gitId":"-"},"content":"        Map\u003cString, List\u003cFeedbackResponseAttributes\u003e\u003e questionResponseMapByGiver \u003d frLogic.getSessionResultsForCourse("},{"lineNumber":1630,"author":{"gitId":"-"},"content":"                session.getFeedbackSessionName(), session.getCourseId(), instructor.getEmail(),"},{"lineNumber":1631,"author":{"gitId":"-"},"content":"                null, sectionToTest, FeedbackResultFetchType.GIVER)"},{"lineNumber":1632,"author":{"gitId":"-"},"content":"                .getQuestionResponseMap();"},{"lineNumber":1633,"author":{"gitId":"-"},"content":"        questionResponseMapByGiver.forEach((key, responses) -\u003e {"},{"lineNumber":1634,"author":{"gitId":"-"},"content":"            responses.forEach(resp -\u003e {"},{"lineNumber":1635,"author":{"gitId":"-"},"content":"                assertEquals(sectionToTest, resp.getGiverSection());"},{"lineNumber":1636,"author":{"gitId":"-"},"content":"            });"},{"lineNumber":1637,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":1638,"author":{"gitId":"-"},"content":""},{"lineNumber":1639,"author":{"gitId":"-"},"content":"        Map\u003cString, List\u003cFeedbackResponseAttributes\u003e\u003e questionResponseMapByReceiver \u003d"},{"lineNumber":1640,"author":{"gitId":"-"},"content":"                frLogic.getSessionResultsForCourse("},{"lineNumber":1641,"author":{"gitId":"-"},"content":"                session.getFeedbackSessionName(), session.getCourseId(), instructor.getEmail(),"},{"lineNumber":1642,"author":{"gitId":"-"},"content":"                null, sectionToTest, FeedbackResultFetchType.RECEIVER)"},{"lineNumber":1643,"author":{"gitId":"-"},"content":"                .getQuestionResponseMap();"},{"lineNumber":1644,"author":{"gitId":"-"},"content":"        questionResponseMapByReceiver.forEach((key, responses) -\u003e {"},{"lineNumber":1645,"author":{"gitId":"-"},"content":"            responses.forEach(resp -\u003e {"},{"lineNumber":1646,"author":{"gitId":"-"},"content":"                assertEquals(sectionToTest, resp.getRecipientSection());"},{"lineNumber":1647,"author":{"gitId":"-"},"content":"            });"},{"lineNumber":1648,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":1649,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1650,"author":{"gitId":"-"},"content":""},{"lineNumber":1651,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":1652,"author":{"gitId":"-"},"content":"    public void testGetSessionResultsForCourse_splitResponseFetchByGiverAndReceiver_shouldGenerateCorrectBundle() {"},{"lineNumber":1653,"author":{"gitId":"-"},"content":"        var responseBundle \u003d loadDataBundle(\"/FeedbackSessionResultsTest.json\");"},{"lineNumber":1654,"author":{"gitId":"-"},"content":"        removeAndRestoreDataBundle(responseBundle);"},{"lineNumber":1655,"author":{"gitId":"-"},"content":""},{"lineNumber":1656,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes session \u003d responseBundle.feedbackSessions.get(\"standard.session\");"},{"lineNumber":1657,"author":{"gitId":"-"},"content":""},{"lineNumber":1658,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor \u003d responseBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":1659,"author":{"gitId":"-"},"content":"        Map\u003cString, List\u003cFeedbackResponseAttributes\u003e\u003e questionResponseMapFromMultiFetch \u003d"},{"lineNumber":1660,"author":{"gitId":"-"},"content":"                frLogic.getSessionResultsForCourse("},{"lineNumber":1661,"author":{"gitId":"-"},"content":"                        session.getFeedbackSessionName(), session.getCourseId(), instructor.getEmail(),"},{"lineNumber":1662,"author":{"gitId":"-"},"content":"                        null, \"Section A\", FeedbackResultFetchType.GIVER).getQuestionResponseMap();"},{"lineNumber":1663,"author":{"gitId":"-"},"content":"        frLogic.getSessionResultsForCourse("},{"lineNumber":1664,"author":{"gitId":"-"},"content":"                session.getFeedbackSessionName(), session.getCourseId(), instructor.getEmail(),"},{"lineNumber":1665,"author":{"gitId":"-"},"content":"                null, \"Section A\", FeedbackResultFetchType.RECEIVER)"},{"lineNumber":1666,"author":{"gitId":"-"},"content":"                .getQuestionResponseMap()"},{"lineNumber":1667,"author":{"gitId":"-"},"content":"                .forEach(questionResponseMapFromMultiFetch::putIfAbsent);"},{"lineNumber":1668,"author":{"gitId":"-"},"content":""},{"lineNumber":1669,"author":{"gitId":"-"},"content":"        // Equal to session result fetch by both type"},{"lineNumber":1670,"author":{"gitId":"-"},"content":"        Map\u003cString, List\u003cFeedbackResponseAttributes\u003e\u003e questionResponseMapFromFetchBoth \u003d"},{"lineNumber":1671,"author":{"gitId":"-"},"content":"                frLogic.getSessionResultsForCourse("},{"lineNumber":1672,"author":{"gitId":"-"},"content":"                        session.getFeedbackSessionName(), session.getCourseId(), instructor.getEmail(),"},{"lineNumber":1673,"author":{"gitId":"-"},"content":"                        null, \"Section A\", FeedbackResultFetchType.BOTH).getQuestionResponseMap();"},{"lineNumber":1674,"author":{"gitId":"-"},"content":""},{"lineNumber":1675,"author":{"gitId":"-"},"content":"        for (var entry : questionResponseMapFromFetchBoth.entrySet()) {"},{"lineNumber":1676,"author":{"gitId":"-"},"content":"            List\u003cFeedbackResponseAttributes\u003e respFromFetchBoth \u003d entry.getValue();"},{"lineNumber":1677,"author":{"gitId":"-"},"content":"            List\u003cFeedbackResponseAttributes\u003e respFromMultiFetch \u003d questionResponseMapFromMultiFetch.get(entry.getKey());"},{"lineNumber":1678,"author":{"gitId":"-"},"content":"            assertEquals(respFromFetchBoth.size(), respFromMultiFetch.size());"},{"lineNumber":1679,"author":{"gitId":"-"},"content":"            assertTrue(new HashSet\u003c\u003e(respFromMultiFetch).equals(new HashSet\u003c\u003e(respFromFetchBoth)));"},{"lineNumber":1680,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1681,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1682,"author":{"gitId":"-"},"content":""},{"lineNumber":1683,"author":{"gitId":"-"},"content":""},{"lineNumber":1684,"author":{"gitId":"-"},"content":"    // TODO: check for cases where a person is both a student and an instructor"},{"lineNumber":1685,"author":{"gitId":"-"},"content":""},{"lineNumber":1686,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":1687,"author":{"gitId":"-"},"content":"    public void testGetSessionResultsForUser_orphanResponseInDB_shouldStillHandleCorrectly() throws Exception {"},{"lineNumber":1688,"author":{"gitId":"-"},"content":"        dataBundle \u003d getTypicalDataBundle();"},{"lineNumber":1689,"author":{"gitId":"-"},"content":"        removeAndRestoreDataBundle(dataBundle);"},{"lineNumber":1690,"author":{"gitId":"-"},"content":""},{"lineNumber":1691,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fq \u003d getQuestionFromDatabase(\"qn2InSession1InCourse1\");"},{"lineNumber":1692,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes existingResponse \u003d getResponseFromDatabase(dataBundle, \"response1ForQ2S1C1\");"},{"lineNumber":1693,"author":{"gitId":"-"},"content":"        // create a \"null\" response to simulate trying to get a null student\u0027s response"},{"lineNumber":1694,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes newResponse \u003d"},{"lineNumber":1695,"author":{"gitId":"-"},"content":"                FeedbackResponseAttributes.builder("},{"lineNumber":1696,"author":{"gitId":"-"},"content":"                        existingResponse.getFeedbackQuestionId(), existingResponse.getGiver(), \"nullRecipient@gmail.tmt\")"},{"lineNumber":1697,"author":{"gitId":"-"},"content":"                        .withFeedbackSessionName(existingResponse.getFeedbackSessionName())"},{"lineNumber":1698,"author":{"gitId":"-"},"content":"                        .withCourseId(\"nullCourse\")"},{"lineNumber":1699,"author":{"gitId":"-"},"content":"                        .withGiverSection(\"Section 1\")"},{"lineNumber":1700,"author":{"gitId":"-"},"content":"                        .withRecipientSection(\"Section 1\")"},{"lineNumber":1701,"author":{"gitId":"-"},"content":"                        .withResponseDetails(existingResponse.getResponseDetailsCopy())"},{"lineNumber":1702,"author":{"gitId":"-"},"content":"                        .build();"},{"lineNumber":1703,"author":{"gitId":"-"},"content":"        frLogic.createFeedbackResponse(newResponse);"},{"lineNumber":1704,"author":{"gitId":"-"},"content":"        StudentAttributes student \u003d dataBundle.students.get(\"student2InCourse1\");"},{"lineNumber":1705,"author":{"gitId":"-"},"content":""},{"lineNumber":1706,"author":{"gitId":"-"},"content":"        SessionResultsBundle bundle \u003d frLogic.getSessionResultsForUser("},{"lineNumber":1707,"author":{"gitId":"-"},"content":"                fq.getFeedbackSessionName(), fq.getCourseId(), student.getEmail(),"},{"lineNumber":1708,"author":{"gitId":"-"},"content":"                false, fq.getId(), false);"},{"lineNumber":1709,"author":{"gitId":"-"},"content":"        assertEquals(1, bundle.getQuestionResponseMap().size());"},{"lineNumber":1710,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e responseForQuestion \u003d"},{"lineNumber":1711,"author":{"gitId":"-"},"content":"                bundle.getQuestionResponseMap().entrySet().iterator().next().getValue();"},{"lineNumber":1712,"author":{"gitId":"-"},"content":"        assertEquals(4, responseForQuestion.size());"},{"lineNumber":1713,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1714,"author":{"gitId":"-"},"content":""},{"lineNumber":1715,"author":{"gitId":"-"},"content":"    private FeedbackQuestionAttributes getQuestionFromDatabase(DataBundle dataBundle, String jsonId) {"},{"lineNumber":1716,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes questionToGet \u003d dataBundle.feedbackQuestions.get(jsonId);"},{"lineNumber":1717,"author":{"gitId":"-"},"content":"        questionToGet \u003d fqLogic.getFeedbackQuestion(questionToGet.getFeedbackSessionName(),"},{"lineNumber":1718,"author":{"gitId":"-"},"content":"                questionToGet.getCourseId(),"},{"lineNumber":1719,"author":{"gitId":"-"},"content":"                questionToGet.getQuestionNumber());"},{"lineNumber":1720,"author":{"gitId":"-"},"content":""},{"lineNumber":1721,"author":{"gitId":"-"},"content":"        return questionToGet;"},{"lineNumber":1722,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1723,"author":{"gitId":"-"},"content":""},{"lineNumber":1724,"author":{"gitId":"-"},"content":"    private FeedbackQuestionAttributes getQuestionFromDatabase(String jsonId) {"},{"lineNumber":1725,"author":{"gitId":"-"},"content":"        return getQuestionFromDatabase(dataBundle, jsonId);"},{"lineNumber":1726,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1727,"author":{"gitId":"-"},"content":""},{"lineNumber":1728,"author":{"gitId":"-"},"content":"    private FeedbackResponseAttributes getResponseFromDatabase(DataBundle dataBundle, String jsonId) {"},{"lineNumber":1729,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes response \u003d dataBundle.feedbackResponses.get(jsonId);"},{"lineNumber":1730,"author":{"gitId":"-"},"content":""},{"lineNumber":1731,"author":{"gitId":"-"},"content":"        String qnId;"},{"lineNumber":1732,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":1733,"author":{"gitId":"-"},"content":"            int qnNumber \u003d Integer.parseInt(response.getFeedbackQuestionId());"},{"lineNumber":1734,"author":{"gitId":"-"},"content":"            qnId \u003d fqLogic.getFeedbackQuestion(response.getFeedbackSessionName(), response.getCourseId(), qnNumber).getId();"},{"lineNumber":1735,"author":{"gitId":"-"},"content":"        } catch (NumberFormatException e) {"},{"lineNumber":1736,"author":{"gitId":"-"},"content":"            qnId \u003d response.getFeedbackQuestionId();"},{"lineNumber":1737,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1738,"author":{"gitId":"-"},"content":""},{"lineNumber":1739,"author":{"gitId":"-"},"content":"        return frLogic.getFeedbackResponse("},{"lineNumber":1740,"author":{"gitId":"-"},"content":"                qnId, response.getGiver(), response.getRecipient());"},{"lineNumber":1741,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1742,"author":{"gitId":"-"},"content":""},{"lineNumber":1743,"author":{"gitId":"-"},"content":"    private FeedbackResponseAttributes getResponseFromDatabase(String jsonId) {"},{"lineNumber":1744,"author":{"gitId":"-"},"content":"        return getResponseFromDatabase(dataBundle, jsonId);"},{"lineNumber":1745,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1746,"author":{"gitId":"-"},"content":""},{"lineNumber":1747,"author":{"gitId":"-"},"content":"    private String getResponseId(String jsonId, DataBundle bundle) {"},{"lineNumber":1748,"author":{"gitId":"-"},"content":"        return getResponseFromDatabase(bundle, jsonId).getId();"},{"lineNumber":1749,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1750,"author":{"gitId":"-"},"content":""},{"lineNumber":1751,"author":{"gitId":"-"},"content":"    private List\u003cFeedbackResponseCommentAttributes\u003e getFeedbackResponseCommentsForResponsesFromDatabase("},{"lineNumber":1752,"author":{"gitId":"-"},"content":"            Set\u003cString\u003e responseIds) {"},{"lineNumber":1753,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseCommentAttributes\u003e responseComments \u003d new ArrayList\u003c\u003e();"},{"lineNumber":1754,"author":{"gitId":"-"},"content":"        for (String id : responseIds) {"},{"lineNumber":1755,"author":{"gitId":"-"},"content":"            List\u003cFeedbackResponseCommentAttributes\u003e responseCommentsForResponse \u003d"},{"lineNumber":1756,"author":{"gitId":"-"},"content":"                    frcLogic.getFeedbackResponseCommentForResponse(id);"},{"lineNumber":1757,"author":{"gitId":"-"},"content":"            responseComments.addAll(responseCommentsForResponse);"},{"lineNumber":1758,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1759,"author":{"gitId":"-"},"content":"        return responseComments;"},{"lineNumber":1760,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1761,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"hhdqirui":67,"-":1694}},{"path":"src/test/java/teammates/logic/core/FeedbackSessionsLogicTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.logic.core;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.time.Duration;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.time.Instant;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.util.ArrayList;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import java.util.Collection;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import java.util.Map;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import java.util.Set;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import java.util.function.Function;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import java.util.stream.Collectors;"},{"lineNumber":12,"author":{"gitId":"-"},"content":""},{"lineNumber":13,"author":{"gitId":"-"},"content":"import org.testng.annotations.BeforeMethod;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import org.testng.annotations.Test;"},{"lineNumber":15,"author":{"gitId":"-"},"content":""},{"lineNumber":16,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.AttributesDeletionQuery;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.FeedbackParticipantType;"},{"lineNumber":18,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.CourseAttributes;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackSessionAttributes;"},{"lineNumber":21,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.InstructorAttributes;"},{"lineNumber":22,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.StudentAttributes;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackTextQuestionDetails;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":25,"author":{"gitId":"-"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":26,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":27,"author":{"gitId":"-"},"content":"import teammates.common.util.JsonUtils;"},{"lineNumber":28,"author":{"gitId":"-"},"content":"import teammates.common.util.TimeHelper;"},{"lineNumber":29,"author":{"gitId":"-"},"content":"import teammates.common.util.TimeHelperExtension;"},{"lineNumber":30,"author":{"gitId":"-"},"content":"import teammates.storage.api.FeedbackSessionsDb;"},{"lineNumber":31,"author":{"gitId":"-"},"content":"import teammates.test.AssertHelper;"},{"lineNumber":32,"author":{"gitId":"-"},"content":"import teammates.test.ThreadHelper;"},{"lineNumber":33,"author":{"gitId":"-"},"content":""},{"lineNumber":34,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":35,"author":{"gitId":"-"},"content":" * SUT: {@link FeedbackSessionsLogic}."},{"lineNumber":36,"author":{"gitId":"-"},"content":" */"},{"lineNumber":37,"author":{"gitId":"-"},"content":"public class FeedbackSessionsLogicTest extends BaseLogicTest {"},{"lineNumber":38,"author":{"gitId":"-"},"content":"    private final CoursesLogic coursesLogic \u003d CoursesLogic.inst();"},{"lineNumber":39,"author":{"gitId":"-"},"content":"    private final FeedbackSessionsLogic fsLogic \u003d FeedbackSessionsLogic.inst();"},{"lineNumber":40,"author":{"gitId":"-"},"content":"    private final FeedbackSessionsDb fsDb \u003d FeedbackSessionsDb.inst();"},{"lineNumber":41,"author":{"gitId":"-"},"content":"    private final FeedbackQuestionsLogic fqLogic \u003d FeedbackQuestionsLogic.inst();"},{"lineNumber":42,"author":{"gitId":"-"},"content":"    private final FeedbackResponsesLogic frLogic \u003d FeedbackResponsesLogic.inst();"},{"lineNumber":43,"author":{"gitId":"-"},"content":"    private final FeedbackResponseCommentsLogic frcLogic \u003d FeedbackResponseCommentsLogic.inst();"},{"lineNumber":44,"author":{"gitId":"-"},"content":""},{"lineNumber":45,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":46,"author":{"gitId":"-"},"content":"    protected void prepareTestData() {"},{"lineNumber":47,"author":{"gitId":"-"},"content":"        // see beforeMethod()"},{"lineNumber":48,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":49,"author":{"gitId":"-"},"content":""},{"lineNumber":50,"author":{"gitId":"-"},"content":"    @BeforeMethod"},{"lineNumber":51,"author":{"gitId":"-"},"content":"    public void beforeMethod() {"},{"lineNumber":52,"author":{"gitId":"-"},"content":"        dataBundle \u003d loadDataBundle(\"/FeedbackSessionsLogicTest.json\");"},{"lineNumber":53,"author":{"gitId":"-"},"content":"        removeAndRestoreDataBundle(dataBundle);"},{"lineNumber":54,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":55,"author":{"gitId":"-"},"content":""},{"lineNumber":56,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":57,"author":{"gitId":"-"},"content":"    public void testDeleteFeedbackSessionCascade_deleteSessionNotInRecycleBin_shouldDoCascadeDeletion() {"},{"lineNumber":58,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes fsa \u003d dataBundle.feedbackSessions.get(\"session1InCourse1\");"},{"lineNumber":59,"author":{"gitId":"-"},"content":"        assertNotNull(fsLogic.getFeedbackSession(fsa.getFeedbackSessionName(), fsa.getCourseId()));"},{"lineNumber":60,"author":{"gitId":"-"},"content":"        assertNull(fsLogic.getFeedbackSessionFromRecycleBin(fsa.getFeedbackSessionName(), fsa.getCourseId()));"},{"lineNumber":61,"author":{"gitId":"-"},"content":"        assertFalse("},{"lineNumber":62,"author":{"gitId":"-"},"content":"                fqLogic.getFeedbackQuestionsForSession(fsa.getFeedbackSessionName(), fsa.getCourseId()).isEmpty());"},{"lineNumber":63,"author":{"gitId":"-"},"content":"        assertFalse("},{"lineNumber":64,"author":{"gitId":"-"},"content":"                frLogic.getFeedbackResponsesForSession(fsa.getFeedbackSessionName(), fsa.getCourseId()).isEmpty());"},{"lineNumber":65,"author":{"gitId":"-"},"content":"        assertFalse("},{"lineNumber":66,"author":{"gitId":"-"},"content":"                frcLogic.getFeedbackResponseCommentForSessionInSection(fsa.getCourseId(), fsa.getFeedbackSessionName(), null)"},{"lineNumber":67,"author":{"gitId":"-"},"content":"                        .isEmpty());"},{"lineNumber":68,"author":{"gitId":"-"},"content":""},{"lineNumber":69,"author":{"gitId":"-"},"content":"        // delete existing feedback session directly"},{"lineNumber":70,"author":{"gitId":"-"},"content":"        fsLogic.deleteFeedbackSessionCascade(fsa.getFeedbackSessionName(), fsa.getCourseId());"},{"lineNumber":71,"author":{"gitId":"-"},"content":""},{"lineNumber":72,"author":{"gitId":"-"},"content":"        assertNull(fsLogic.getFeedbackSession(fsa.getFeedbackSessionName(), fsa.getCourseId()));"},{"lineNumber":73,"author":{"gitId":"-"},"content":"        assertNull(fsLogic.getFeedbackSessionFromRecycleBin(fsa.getFeedbackSessionName(), fsa.getCourseId()));"},{"lineNumber":74,"author":{"gitId":"-"},"content":"        assertTrue("},{"lineNumber":75,"author":{"gitId":"-"},"content":"                fqLogic.getFeedbackQuestionsForSession(fsa.getFeedbackSessionName(), fsa.getCourseId()).isEmpty());"},{"lineNumber":76,"author":{"gitId":"-"},"content":"        assertTrue("},{"lineNumber":77,"author":{"gitId":"-"},"content":"                frLogic.getFeedbackResponsesForSession(fsa.getFeedbackSessionName(), fsa.getCourseId()).isEmpty());"},{"lineNumber":78,"author":{"gitId":"-"},"content":"        assertTrue("},{"lineNumber":79,"author":{"gitId":"-"},"content":"                frcLogic.getFeedbackResponseCommentForSessionInSection(fsa.getCourseId(), fsa.getFeedbackSessionName(), null)"},{"lineNumber":80,"author":{"gitId":"-"},"content":"                        .isEmpty());"},{"lineNumber":81,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":82,"author":{"gitId":"-"},"content":""},{"lineNumber":83,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":84,"author":{"gitId":"-"},"content":"    public void testDeleteFeedbackSessionCascade_deleteSessionInRecycleBin_shouldDoCascadeDeletion() throws Exception {"},{"lineNumber":85,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes fsa \u003d dataBundle.feedbackSessions.get(\"session1InCourse1\");"},{"lineNumber":86,"author":{"gitId":"-"},"content":"        assertFalse("},{"lineNumber":87,"author":{"gitId":"-"},"content":"                fqLogic.getFeedbackQuestionsForSession(fsa.getFeedbackSessionName(), fsa.getCourseId()).isEmpty());"},{"lineNumber":88,"author":{"gitId":"-"},"content":"        assertFalse("},{"lineNumber":89,"author":{"gitId":"-"},"content":"                frLogic.getFeedbackResponsesForSession(fsa.getFeedbackSessionName(), fsa.getCourseId()).isEmpty());"},{"lineNumber":90,"author":{"gitId":"-"},"content":"        assertFalse("},{"lineNumber":91,"author":{"gitId":"-"},"content":"                frcLogic.getFeedbackResponseCommentForSessionInSection(fsa.getCourseId(), fsa.getFeedbackSessionName(), null)"},{"lineNumber":92,"author":{"gitId":"-"},"content":"                        .isEmpty());"},{"lineNumber":93,"author":{"gitId":"-"},"content":"        fsLogic.moveFeedbackSessionToRecycleBin(fsa.getFeedbackSessionName(), fsa.getCourseId());"},{"lineNumber":94,"author":{"gitId":"-"},"content":"        assertNull(fsLogic.getFeedbackSession(fsa.getFeedbackSessionName(), fsa.getCourseId()));"},{"lineNumber":95,"author":{"gitId":"-"},"content":"        assertNotNull(fsLogic.getFeedbackSessionFromRecycleBin(fsa.getFeedbackSessionName(), fsa.getCourseId()));"},{"lineNumber":96,"author":{"gitId":"-"},"content":""},{"lineNumber":97,"author":{"gitId":"-"},"content":"        // delete feedback session in recycle bin"},{"lineNumber":98,"author":{"gitId":"-"},"content":"        fsLogic.deleteFeedbackSessionCascade(fsa.getFeedbackSessionName(), fsa.getCourseId());"},{"lineNumber":99,"author":{"gitId":"-"},"content":""},{"lineNumber":100,"author":{"gitId":"-"},"content":"        assertNull(fsLogic.getFeedbackSession(fsa.getFeedbackSessionName(), fsa.getCourseId()));"},{"lineNumber":101,"author":{"gitId":"-"},"content":"        assertNull(fsLogic.getFeedbackSessionFromRecycleBin(fsa.getFeedbackSessionName(), fsa.getCourseId()));"},{"lineNumber":102,"author":{"gitId":"-"},"content":"        assertTrue("},{"lineNumber":103,"author":{"gitId":"-"},"content":"                fqLogic.getFeedbackQuestionsForSession(fsa.getFeedbackSessionName(), fsa.getCourseId()).isEmpty());"},{"lineNumber":104,"author":{"gitId":"-"},"content":"        assertTrue("},{"lineNumber":105,"author":{"gitId":"-"},"content":"                frLogic.getFeedbackResponsesForSession(fsa.getFeedbackSessionName(), fsa.getCourseId()).isEmpty());"},{"lineNumber":106,"author":{"gitId":"-"},"content":"        assertTrue("},{"lineNumber":107,"author":{"gitId":"-"},"content":"                frcLogic.getFeedbackResponseCommentForSessionInSection(fsa.getCourseId(), fsa.getFeedbackSessionName(), null)"},{"lineNumber":108,"author":{"gitId":"-"},"content":"                        .isEmpty());"},{"lineNumber":109,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":110,"author":{"gitId":"-"},"content":""},{"lineNumber":111,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":112,"author":{"gitId":"-"},"content":"    public void testDeleteFeedbackSessions_byCourseId_shouldDeleteAllSessionsUnderCourse() {"},{"lineNumber":113,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes session1InCourse1 \u003d dataBundle.feedbackSessions.get(\"session1InCourse1\");"},{"lineNumber":114,"author":{"gitId":"-"},"content":"        assertNotNull("},{"lineNumber":115,"author":{"gitId":"-"},"content":"                fsLogic.getFeedbackSession(session1InCourse1.getFeedbackSessionName(), session1InCourse1.getCourseId()));"},{"lineNumber":116,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes session2InCourse1 \u003d dataBundle.feedbackSessions.get(\"session2InCourse1\");"},{"lineNumber":117,"author":{"gitId":"-"},"content":"        assertNotNull("},{"lineNumber":118,"author":{"gitId":"-"},"content":"                fsLogic.getFeedbackSession(session2InCourse1.getFeedbackSessionName(), session2InCourse1.getCourseId()));"},{"lineNumber":119,"author":{"gitId":"-"},"content":"        // they are in the same course"},{"lineNumber":120,"author":{"gitId":"-"},"content":"        assertEquals(session1InCourse1.getCourseId(), session2InCourse1.getCourseId());"},{"lineNumber":121,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes session1InCourse2 \u003d dataBundle.feedbackSessions.get(\"session1InCourse2\");"},{"lineNumber":122,"author":{"gitId":"-"},"content":"        assertNotNull("},{"lineNumber":123,"author":{"gitId":"-"},"content":"                fsLogic.getFeedbackSession(session1InCourse2.getFeedbackSessionName(), session1InCourse2.getCourseId()));"},{"lineNumber":124,"author":{"gitId":"-"},"content":""},{"lineNumber":125,"author":{"gitId":"-"},"content":"        // delete all session under the course"},{"lineNumber":126,"author":{"gitId":"-"},"content":"        fsLogic.deleteFeedbackSessions("},{"lineNumber":127,"author":{"gitId":"-"},"content":"                AttributesDeletionQuery.builder()"},{"lineNumber":128,"author":{"gitId":"-"},"content":"                        .withCourseId(session1InCourse1.getCourseId())"},{"lineNumber":129,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":130,"author":{"gitId":"-"},"content":""},{"lineNumber":131,"author":{"gitId":"-"},"content":"        // they should gone"},{"lineNumber":132,"author":{"gitId":"-"},"content":"        assertNull("},{"lineNumber":133,"author":{"gitId":"-"},"content":"                fsLogic.getFeedbackSession(session1InCourse1.getFeedbackSessionName(), session1InCourse1.getCourseId()));"},{"lineNumber":134,"author":{"gitId":"-"},"content":"        assertNull("},{"lineNumber":135,"author":{"gitId":"-"},"content":"                fsLogic.getFeedbackSession(session2InCourse1.getFeedbackSessionName(), session2InCourse1.getCourseId()));"},{"lineNumber":136,"author":{"gitId":"-"},"content":"        // sessions in different courses should not be affected"},{"lineNumber":137,"author":{"gitId":"-"},"content":"        assertNotNull("},{"lineNumber":138,"author":{"gitId":"-"},"content":"                fsLogic.getFeedbackSession(session1InCourse2.getFeedbackSessionName(), session1InCourse2.getCourseId()));"},{"lineNumber":139,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":140,"author":{"gitId":"-"},"content":""},{"lineNumber":141,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":142,"author":{"gitId":"-"},"content":"    public void testFeedbackSessionNotification() throws Exception {"},{"lineNumber":143,"author":{"gitId":"-"},"content":"        testGetFeedbackSessionsClosingWithinTimeLimit();"},{"lineNumber":144,"author":{"gitId":"-"},"content":"        testGetFeedbackSessionsClosedWithinThePastHour();"},{"lineNumber":145,"author":{"gitId":"-"},"content":"        testGetFeedbackSessionsWhichNeedOpenMailsToBeSent();"},{"lineNumber":146,"author":{"gitId":"-"},"content":"        testGetFeedbackSessionWhichNeedPublishedEmailsToBeSent();"},{"lineNumber":147,"author":{"gitId":"-"},"content":"        testGetFeedbackSessionsOpeningWithinTimeLimit();"},{"lineNumber":148,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":149,"author":{"gitId":"-"},"content":""},{"lineNumber":150,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":151,"author":{"gitId":"-"},"content":"    public void testAll() throws Exception {"},{"lineNumber":152,"author":{"gitId":"-"},"content":""},{"lineNumber":153,"author":{"gitId":"-"},"content":"        testGetSoftDeletedFeedbackSessionsListForInstructors();"},{"lineNumber":154,"author":{"gitId":"-"},"content":"        testIsFeedbackSessionViewableToUserType();"},{"lineNumber":155,"author":{"gitId":"-"},"content":""},{"lineNumber":156,"author":{"gitId":"-"},"content":"        testCreateAndDeleteFeedbackSession();"},{"lineNumber":157,"author":{"gitId":"-"},"content":""},{"lineNumber":158,"author":{"gitId":"-"},"content":"        testIsFeedbackSessionForUserTypeToAnswer();"},{"lineNumber":159,"author":{"gitId":"-"},"content":""},{"lineNumber":160,"author":{"gitId":"-"},"content":"        testUpdateFeedbackSession();"},{"lineNumber":161,"author":{"gitId":"-"},"content":"        testPublishUnpublishFeedbackSession();"},{"lineNumber":162,"author":{"gitId":"-"},"content":""},{"lineNumber":163,"author":{"gitId":"-"},"content":"        testIsFeedbackSessionAttemptedByStudent();"},{"lineNumber":164,"author":{"gitId":"-"},"content":"        testIsFeedbackSessionAttemptedByInstructor();"},{"lineNumber":165,"author":{"gitId":"-"},"content":""},{"lineNumber":166,"author":{"gitId":"-"},"content":"        testMoveFeedbackSessionToRecycleBin();"},{"lineNumber":167,"author":{"gitId":"-"},"content":"        testRestoreFeedbackSessionFromRecycleBin();"},{"lineNumber":168,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":169,"author":{"gitId":"-"},"content":""},{"lineNumber":170,"author":{"gitId":"-"},"content":"    private void testGetSoftDeletedFeedbackSessionsListForInstructors() {"},{"lineNumber":171,"author":{"gitId":"-"},"content":"        List\u003cFeedbackSessionAttributes\u003e softDeletedFsa \u003d new ArrayList\u003c\u003e();"},{"lineNumber":172,"author":{"gitId":"-"},"content":"        Collection\u003cFeedbackSessionAttributes\u003e allFsa \u003d dataBundle.feedbackSessions.values();"},{"lineNumber":173,"author":{"gitId":"-"},"content":""},{"lineNumber":174,"author":{"gitId":"-"},"content":"        String courseId \u003d dataBundle.courses.get(\"typicalCourse3\").getId();"},{"lineNumber":175,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor \u003d dataBundle.instructors.get(\"instructor1OfCourse3\");"},{"lineNumber":176,"author":{"gitId":"-"},"content":""},{"lineNumber":177,"author":{"gitId":"-"},"content":"        List\u003cInstructorAttributes\u003e instructors \u003d new ArrayList\u003c\u003e();"},{"lineNumber":178,"author":{"gitId":"-"},"content":"        instructors.add(instructor);"},{"lineNumber":179,"author":{"gitId":"-"},"content":""},{"lineNumber":180,"author":{"gitId":"-"},"content":"        for (FeedbackSessionAttributes fsa : allFsa) {"},{"lineNumber":181,"author":{"gitId":"-"},"content":"            if (fsa.getCourseId().equals(courseId) \u0026\u0026 fsa.isSessionDeleted()) {"},{"lineNumber":182,"author":{"gitId":"-"},"content":"                softDeletedFsa.add(fsa);"},{"lineNumber":183,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":184,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":185,"author":{"gitId":"-"},"content":"        AssertHelper.assertSameContentIgnoreOrder("},{"lineNumber":186,"author":{"gitId":"-"},"content":"                softDeletedFsa, fsLogic.getSoftDeletedFeedbackSessionsListForInstructors(instructors));"},{"lineNumber":187,"author":{"gitId":"-"},"content":""},{"lineNumber":188,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":189,"author":{"gitId":"-"},"content":""},{"lineNumber":190,"author":{"gitId":"-"},"content":"    private void testGetFeedbackSessionsClosingWithinTimeLimit() throws Exception {"},{"lineNumber":191,"author":{"gitId":"-"},"content":""},{"lineNumber":192,"author":{"gitId":"-"},"content":"        ______TS(\"init : 0 standard sessions closing within time-limit\");"},{"lineNumber":193,"author":{"gitId":"-"},"content":"        List\u003cFeedbackSessionAttributes\u003e sessionList \u003d fsLogic.getFeedbackSessionsClosingWithinTimeLimit();"},{"lineNumber":194,"author":{"gitId":"-"},"content":""},{"lineNumber":195,"author":{"gitId":"-"},"content":"        assertEquals(0, sessionList.size());"},{"lineNumber":196,"author":{"gitId":"-"},"content":""},{"lineNumber":197,"author":{"gitId":"-"},"content":"        ______TS(\"case : 1 open session in undeleted course closing within time-limit\");"},{"lineNumber":198,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes session \u003d getNewFeedbackSession();"},{"lineNumber":199,"author":{"gitId":"-"},"content":"        session.setTimeZone(\"UTC\");"},{"lineNumber":200,"author":{"gitId":"-"},"content":"        session.setSessionVisibleFromTime(TimeHelper.getInstantDaysOffsetFromNow(-1));"},{"lineNumber":201,"author":{"gitId":"-"},"content":"        session.setStartTime(TimeHelper.getInstantDaysOffsetFromNow(-1));"},{"lineNumber":202,"author":{"gitId":"-"},"content":"        session.setEndTime(TimeHelper.getInstantDaysOffsetFromNow(1));"},{"lineNumber":203,"author":{"gitId":"-"},"content":"        fsLogic.createFeedbackSession(session);"},{"lineNumber":204,"author":{"gitId":"-"},"content":"        coursesLogic.createCourse("},{"lineNumber":205,"author":{"gitId":"-"},"content":"                CourseAttributes.builder(session.getCourseId())"},{"lineNumber":206,"author":{"gitId":"-"},"content":"                        .withName(\"Test Course\")"},{"lineNumber":207,"author":{"gitId":"-"},"content":"                        .withTimezone(\"UTC\")"},{"lineNumber":208,"author":{"gitId":"-"},"content":"                        .withInstitute(\"Test institute\")"},{"lineNumber":209,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":210,"author":{"gitId":"-"},"content":""},{"lineNumber":211,"author":{"gitId":"-"},"content":"        // wait for very briefly so that the above session will be within the time limit"},{"lineNumber":212,"author":{"gitId":"-"},"content":"        ThreadHelper.waitFor(5);"},{"lineNumber":213,"author":{"gitId":"-"},"content":""},{"lineNumber":214,"author":{"gitId":"-"},"content":"        sessionList \u003d fsLogic.getFeedbackSessionsClosingWithinTimeLimit();"},{"lineNumber":215,"author":{"gitId":"-"},"content":""},{"lineNumber":216,"author":{"gitId":"-"},"content":"        assertEquals(1, sessionList.size());"},{"lineNumber":217,"author":{"gitId":"-"},"content":"        assertEquals(session.getFeedbackSessionName(), sessionList.get(0).getFeedbackSessionName());"},{"lineNumber":218,"author":{"gitId":"-"},"content":""},{"lineNumber":219,"author":{"gitId":"-"},"content":"        ______TS(\"case : 1 open session in deleted course closing within time-limit\");"},{"lineNumber":220,"author":{"gitId":"-"},"content":"        coursesLogic.moveCourseToRecycleBin(session.getCourseId());"},{"lineNumber":221,"author":{"gitId":"-"},"content":"        sessionList \u003d fsLogic.getFeedbackSessionsClosingWithinTimeLimit();"},{"lineNumber":222,"author":{"gitId":"-"},"content":""},{"lineNumber":223,"author":{"gitId":"-"},"content":"        assertEquals(0, sessionList.size());"},{"lineNumber":224,"author":{"gitId":"-"},"content":""},{"lineNumber":225,"author":{"gitId":"-"},"content":"        // restore the new course from Recycle Bin, and delete the newly added session as"},{"lineNumber":226,"author":{"gitId":"-"},"content":"        // removeAndRestoreTypicalDataInDatabase() wont do it"},{"lineNumber":227,"author":{"gitId":"-"},"content":"        coursesLogic.restoreCourseFromRecycleBin(session.getCourseId());"},{"lineNumber":228,"author":{"gitId":"-"},"content":"        fsLogic.deleteFeedbackSessionCascade(session.getFeedbackSessionName(), session.getCourseId());"},{"lineNumber":229,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":230,"author":{"gitId":"-"},"content":""},{"lineNumber":231,"author":{"gitId":"-"},"content":"    private void testGetFeedbackSessionsClosedWithinThePastHour() throws Exception {"},{"lineNumber":232,"author":{"gitId":"-"},"content":""},{"lineNumber":233,"author":{"gitId":"-"},"content":"        ______TS(\"init : 0 standard sessions closed within the past hour\");"},{"lineNumber":234,"author":{"gitId":"-"},"content":"        List\u003cFeedbackSessionAttributes\u003e sessionList \u003d fsLogic.getFeedbackSessionsClosedWithinThePastHour();"},{"lineNumber":235,"author":{"gitId":"-"},"content":""},{"lineNumber":236,"author":{"gitId":"-"},"content":"        assertEquals(0, sessionList.size());"},{"lineNumber":237,"author":{"gitId":"-"},"content":""},{"lineNumber":238,"author":{"gitId":"-"},"content":"        ______TS(\"case : 1 closed session in undeleted course within the past hour\");"},{"lineNumber":239,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes session \u003d getNewFeedbackSession();"},{"lineNumber":240,"author":{"gitId":"-"},"content":"        session.setTimeZone(\"UTC\");"},{"lineNumber":241,"author":{"gitId":"-"},"content":"        session.setSessionVisibleFromTime(TimeHelper.getInstantDaysOffsetFromNow(-1));"},{"lineNumber":242,"author":{"gitId":"-"},"content":"        session.setStartTime(TimeHelper.getInstantDaysOffsetFromNow(-1));"},{"lineNumber":243,"author":{"gitId":"-"},"content":"        session.setEndTime(TimeHelperExtension.getInstantMinutesOffsetFromNow(-59));"},{"lineNumber":244,"author":{"gitId":"-"},"content":"        fsLogic.createFeedbackSession(session);"},{"lineNumber":245,"author":{"gitId":"-"},"content":""},{"lineNumber":246,"author":{"gitId":"-"},"content":"        sessionList \u003d fsLogic.getFeedbackSessionsClosedWithinThePastHour();"},{"lineNumber":247,"author":{"gitId":"-"},"content":""},{"lineNumber":248,"author":{"gitId":"-"},"content":"        assertEquals(1, sessionList.size());"},{"lineNumber":249,"author":{"gitId":"-"},"content":"        assertEquals(session.getFeedbackSessionName(), sessionList.get(0).getFeedbackSessionName());"},{"lineNumber":250,"author":{"gitId":"-"},"content":""},{"lineNumber":251,"author":{"gitId":"-"},"content":"        ______TS(\"case : 1 closed session in deleted course within the past hour\");"},{"lineNumber":252,"author":{"gitId":"-"},"content":"        coursesLogic.moveCourseToRecycleBin(session.getCourseId());"},{"lineNumber":253,"author":{"gitId":"-"},"content":"        sessionList \u003d fsLogic.getFeedbackSessionsClosedWithinThePastHour();"},{"lineNumber":254,"author":{"gitId":"-"},"content":""},{"lineNumber":255,"author":{"gitId":"-"},"content":"        assertEquals(0, sessionList.size());"},{"lineNumber":256,"author":{"gitId":"-"},"content":""},{"lineNumber":257,"author":{"gitId":"-"},"content":"        // restore the new course from Recycle Bin, and delete the newly added session as"},{"lineNumber":258,"author":{"gitId":"-"},"content":"        // removeAndRestoreTypicalDataInDatabase() wont do it"},{"lineNumber":259,"author":{"gitId":"-"},"content":"        coursesLogic.restoreCourseFromRecycleBin(session.getCourseId());"},{"lineNumber":260,"author":{"gitId":"-"},"content":"        fsLogic.deleteFeedbackSessionCascade(session.getFeedbackSessionName(), session.getCourseId());"},{"lineNumber":261,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":262,"author":{"gitId":"-"},"content":""},{"lineNumber":263,"author":{"gitId":"-"},"content":"    private void testGetFeedbackSessionsOpeningWithinTimeLimit() throws Exception {"},{"lineNumber":264,"author":{"gitId":"-"},"content":"        ______TS(\"init : 0 standard sessions opening within time-limit\");"},{"lineNumber":265,"author":{"gitId":"-"},"content":"        List\u003cFeedbackSessionAttributes\u003e sessionList \u003d fsLogic.getFeedbackSessionsOpeningWithinTimeLimit();"},{"lineNumber":266,"author":{"gitId":"-"},"content":""},{"lineNumber":267,"author":{"gitId":"-"},"content":"        assertEquals(0, sessionList.size());"},{"lineNumber":268,"author":{"gitId":"-"},"content":""},{"lineNumber":269,"author":{"gitId":"-"},"content":"        ______TS(\"case : 1 closed session in undeleted course opening within time-limit\");"},{"lineNumber":270,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes session \u003d getNewFeedbackSession();"},{"lineNumber":271,"author":{"gitId":"-"},"content":"        session.setTimeZone(\"UTC\");"},{"lineNumber":272,"author":{"gitId":"-"},"content":"        session.setSessionVisibleFromTime(TimeHelper.getInstantDaysOffsetFromNow(1));"},{"lineNumber":273,"author":{"gitId":"-"},"content":"        session.setStartTime(TimeHelper.getInstantDaysOffsetFromNow(1));"},{"lineNumber":274,"author":{"gitId":"-"},"content":"        session.setEndTime(TimeHelper.getInstantDaysOffsetFromNow(5));"},{"lineNumber":275,"author":{"gitId":"-"},"content":"        session.setResultsVisibleFromTime(TimeHelper.getInstantDaysOffsetFromNow(5));"},{"lineNumber":276,"author":{"gitId":"-"},"content":"        fsLogic.createFeedbackSession(session);"},{"lineNumber":277,"author":{"gitId":"-"},"content":""},{"lineNumber":278,"author":{"gitId":"-"},"content":"        // wait for very briefly so that the above session will be within the time limit"},{"lineNumber":279,"author":{"gitId":"-"},"content":"        ThreadHelper.waitFor(5);"},{"lineNumber":280,"author":{"gitId":"-"},"content":""},{"lineNumber":281,"author":{"gitId":"-"},"content":"        sessionList \u003d fsLogic.getFeedbackSessionsOpeningWithinTimeLimit();"},{"lineNumber":282,"author":{"gitId":"-"},"content":""},{"lineNumber":283,"author":{"gitId":"-"},"content":"        assertEquals(1, sessionList.size());"},{"lineNumber":284,"author":{"gitId":"-"},"content":"        assertEquals(session.getFeedbackSessionName(), sessionList.get(0).getFeedbackSessionName());"},{"lineNumber":285,"author":{"gitId":"-"},"content":""},{"lineNumber":286,"author":{"gitId":"-"},"content":"        ______TS(\"case : 1 closed session in deleted course opening within time-limit\");"},{"lineNumber":287,"author":{"gitId":"-"},"content":"        session.setStartTime(TimeHelper.getInstantDaysOffsetFromNow(1));"},{"lineNumber":288,"author":{"gitId":"-"},"content":"        coursesLogic.moveCourseToRecycleBin(session.getCourseId());"},{"lineNumber":289,"author":{"gitId":"-"},"content":""},{"lineNumber":290,"author":{"gitId":"-"},"content":"        // wait for very briefly so that the above session will be within the time limit"},{"lineNumber":291,"author":{"gitId":"-"},"content":"        ThreadHelper.waitFor(5);"},{"lineNumber":292,"author":{"gitId":"-"},"content":""},{"lineNumber":293,"author":{"gitId":"-"},"content":"        sessionList \u003d fsLogic.getFeedbackSessionsOpeningWithinTimeLimit();"},{"lineNumber":294,"author":{"gitId":"-"},"content":""},{"lineNumber":295,"author":{"gitId":"-"},"content":"        assertEquals(0, sessionList.size());"},{"lineNumber":296,"author":{"gitId":"-"},"content":""},{"lineNumber":297,"author":{"gitId":"-"},"content":"        // restore the new course from Recycle Bin, and delete the newly added session as"},{"lineNumber":298,"author":{"gitId":"-"},"content":"        // removeAndRestoreTypicalDataInDatabase() wont do it"},{"lineNumber":299,"author":{"gitId":"-"},"content":"        coursesLogic.restoreCourseFromRecycleBin(session.getCourseId());"},{"lineNumber":300,"author":{"gitId":"-"},"content":"        fsLogic.deleteFeedbackSessionCascade(session.getFeedbackSessionName(), session.getCourseId());"},{"lineNumber":301,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":302,"author":{"gitId":"-"},"content":""},{"lineNumber":303,"author":{"gitId":"-"},"content":"    private void testGetFeedbackSessionsWhichNeedOpenMailsToBeSent() throws Exception {"},{"lineNumber":304,"author":{"gitId":"-"},"content":""},{"lineNumber":305,"author":{"gitId":"-"},"content":"        ______TS(\"init : 0 open sessions\");"},{"lineNumber":306,"author":{"gitId":"-"},"content":"        List\u003cFeedbackSessionAttributes\u003e sessionList \u003d fsLogic.getFeedbackSessionsWhichNeedOpenEmailsToBeSent();"},{"lineNumber":307,"author":{"gitId":"-"},"content":""},{"lineNumber":308,"author":{"gitId":"-"},"content":"        assertEquals(0, sessionList.size());"},{"lineNumber":309,"author":{"gitId":"-"},"content":""},{"lineNumber":310,"author":{"gitId":"-"},"content":"        ______TS(\"case : 1 open session in undeleted course with mail unsent\");"},{"lineNumber":311,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes session \u003d getNewFeedbackSession();"},{"lineNumber":312,"author":{"gitId":"-"},"content":"        session.setTimeZone(\"UTC\");"},{"lineNumber":313,"author":{"gitId":"-"},"content":"        session.setSessionVisibleFromTime(TimeHelper.getInstantDaysOffsetFromNow(-2));"},{"lineNumber":314,"author":{"gitId":"-"},"content":"        session.setStartTime(TimeHelperExtension.getInstantHoursOffsetFromNow(-23));"},{"lineNumber":315,"author":{"gitId":"-"},"content":"        session.setEndTime(TimeHelper.getInstantDaysOffsetFromNow(1));"},{"lineNumber":316,"author":{"gitId":"-"},"content":"        session.setSentOpenEmail(false);"},{"lineNumber":317,"author":{"gitId":"-"},"content":"        fsLogic.createFeedbackSession(session);"},{"lineNumber":318,"author":{"gitId":"-"},"content":""},{"lineNumber":319,"author":{"gitId":"-"},"content":"        sessionList \u003d fsLogic.getFeedbackSessionsWhichNeedOpenEmailsToBeSent();"},{"lineNumber":320,"author":{"gitId":"-"},"content":""},{"lineNumber":321,"author":{"gitId":"-"},"content":"        assertEquals(1, sessionList.size());"},{"lineNumber":322,"author":{"gitId":"-"},"content":"        assertEquals(sessionList.get(0).getFeedbackSessionName(), session.getFeedbackSessionName());"},{"lineNumber":323,"author":{"gitId":"-"},"content":""},{"lineNumber":324,"author":{"gitId":"-"},"content":"        ______TS(\"case : 1 open session in undeleted course with mail sent\");"},{"lineNumber":325,"author":{"gitId":"-"},"content":"        session.setSentOpenEmail(true);"},{"lineNumber":326,"author":{"gitId":"-"},"content":"        fsLogic.updateFeedbackSession("},{"lineNumber":327,"author":{"gitId":"-"},"content":"                FeedbackSessionAttributes.updateOptionsBuilder(session.getFeedbackSessionName(), session.getCourseId())"},{"lineNumber":328,"author":{"gitId":"-"},"content":"                        .withSentOpenEmail(session.isSentOpenEmail())"},{"lineNumber":329,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":330,"author":{"gitId":"-"},"content":""},{"lineNumber":331,"author":{"gitId":"-"},"content":"        sessionList \u003d fsLogic.getFeedbackSessionsWhichNeedOpenEmailsToBeSent();"},{"lineNumber":332,"author":{"gitId":"-"},"content":""},{"lineNumber":333,"author":{"gitId":"-"},"content":"        assertEquals(0, sessionList.size());"},{"lineNumber":334,"author":{"gitId":"-"},"content":""},{"lineNumber":335,"author":{"gitId":"-"},"content":"        ______TS(\"case : 1 closed session in undeleted course with mail unsent\");"},{"lineNumber":336,"author":{"gitId":"-"},"content":"        session.setSentOpenEmail(false);"},{"lineNumber":337,"author":{"gitId":"-"},"content":"        session.setEndTime(TimeHelperExtension.getInstantHoursOffsetFromNow(-1));"},{"lineNumber":338,"author":{"gitId":"-"},"content":"        fsLogic.updateFeedbackSession("},{"lineNumber":339,"author":{"gitId":"-"},"content":"                FeedbackSessionAttributes.updateOptionsBuilder(session.getFeedbackSessionName(), session.getCourseId())"},{"lineNumber":340,"author":{"gitId":"-"},"content":"                        .withSentOpenEmail(session.isSentOpenEmail())"},{"lineNumber":341,"author":{"gitId":"-"},"content":"                        .withEndTime(session.getEndTime())"},{"lineNumber":342,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":343,"author":{"gitId":"-"},"content":""},{"lineNumber":344,"author":{"gitId":"-"},"content":"        sessionList \u003d fsLogic.getFeedbackSessionsWhichNeedOpenEmailsToBeSent();"},{"lineNumber":345,"author":{"gitId":"-"},"content":""},{"lineNumber":346,"author":{"gitId":"-"},"content":"        assertEquals(0, sessionList.size());"},{"lineNumber":347,"author":{"gitId":"-"},"content":""},{"lineNumber":348,"author":{"gitId":"-"},"content":"        ______TS(\"case : 1 open session in deleted course with mail unsent\");"},{"lineNumber":349,"author":{"gitId":"-"},"content":"        coursesLogic.moveCourseToRecycleBin(session.getCourseId());"},{"lineNumber":350,"author":{"gitId":"-"},"content":"        session.setEndTime(TimeHelperExtension.getInstantHoursOffsetFromNow(1));"},{"lineNumber":351,"author":{"gitId":"-"},"content":"        fsLogic.updateFeedbackSession("},{"lineNumber":352,"author":{"gitId":"-"},"content":"                FeedbackSessionAttributes.updateOptionsBuilder(session.getFeedbackSessionName(), session.getCourseId())"},{"lineNumber":353,"author":{"gitId":"-"},"content":"                        .withEndTime(session.getEndTime())"},{"lineNumber":354,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":355,"author":{"gitId":"-"},"content":""},{"lineNumber":356,"author":{"gitId":"-"},"content":"        sessionList \u003d fsLogic.getFeedbackSessionsWhichNeedOpenEmailsToBeSent();"},{"lineNumber":357,"author":{"gitId":"-"},"content":""},{"lineNumber":358,"author":{"gitId":"-"},"content":"        assertEquals(0, sessionList.size());"},{"lineNumber":359,"author":{"gitId":"-"},"content":""},{"lineNumber":360,"author":{"gitId":"-"},"content":"        ______TS(\"case : 1 open session in deleted course with mail sent\");"},{"lineNumber":361,"author":{"gitId":"-"},"content":"        session.setSentOpenEmail(true);"},{"lineNumber":362,"author":{"gitId":"-"},"content":"        fsLogic.updateFeedbackSession("},{"lineNumber":363,"author":{"gitId":"-"},"content":"                FeedbackSessionAttributes.updateOptionsBuilder(session.getFeedbackSessionName(), session.getCourseId())"},{"lineNumber":364,"author":{"gitId":"-"},"content":"                        .withSentOpenEmail(session.isSentOpenEmail())"},{"lineNumber":365,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":366,"author":{"gitId":"-"},"content":""},{"lineNumber":367,"author":{"gitId":"-"},"content":"        sessionList \u003d fsLogic.getFeedbackSessionsWhichNeedOpenEmailsToBeSent();"},{"lineNumber":368,"author":{"gitId":"-"},"content":""},{"lineNumber":369,"author":{"gitId":"-"},"content":"        assertEquals(0, sessionList.size());"},{"lineNumber":370,"author":{"gitId":"-"},"content":""},{"lineNumber":371,"author":{"gitId":"-"},"content":"        ______TS(\"case : 1 closed session in deleted course with mail unsent\");"},{"lineNumber":372,"author":{"gitId":"-"},"content":"        session.setSentOpenEmail(false);"},{"lineNumber":373,"author":{"gitId":"-"},"content":"        session.setEndTime(TimeHelperExtension.getInstantHoursOffsetFromNow(-1));"},{"lineNumber":374,"author":{"gitId":"-"},"content":"        fsLogic.updateFeedbackSession("},{"lineNumber":375,"author":{"gitId":"-"},"content":"                FeedbackSessionAttributes.updateOptionsBuilder(session.getFeedbackSessionName(), session.getCourseId())"},{"lineNumber":376,"author":{"gitId":"-"},"content":"                        .withSentOpenEmail(session.isSentOpenEmail())"},{"lineNumber":377,"author":{"gitId":"-"},"content":"                        .withEndTime(session.getEndTime())"},{"lineNumber":378,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":379,"author":{"gitId":"-"},"content":""},{"lineNumber":380,"author":{"gitId":"-"},"content":"        sessionList \u003d fsLogic.getFeedbackSessionsWhichNeedOpenEmailsToBeSent();"},{"lineNumber":381,"author":{"gitId":"-"},"content":""},{"lineNumber":382,"author":{"gitId":"-"},"content":"        assertEquals(0, sessionList.size());"},{"lineNumber":383,"author":{"gitId":"-"},"content":""},{"lineNumber":384,"author":{"gitId":"-"},"content":"        // restore the new course from Recycle Bin, and delete the newly added session as"},{"lineNumber":385,"author":{"gitId":"-"},"content":"        // removeAndRestoreTypicalDataInDatabase() wont do it"},{"lineNumber":386,"author":{"gitId":"-"},"content":"        coursesLogic.restoreCourseFromRecycleBin(session.getCourseId());"},{"lineNumber":387,"author":{"gitId":"-"},"content":"        fsLogic.deleteFeedbackSessionCascade(session.getFeedbackSessionName(), session.getCourseId());"},{"lineNumber":388,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":389,"author":{"gitId":"-"},"content":""},{"lineNumber":390,"author":{"gitId":"-"},"content":"    private void testGetFeedbackSessionWhichNeedPublishedEmailsToBeSent() throws Exception {"},{"lineNumber":391,"author":{"gitId":"-"},"content":""},{"lineNumber":392,"author":{"gitId":"-"},"content":"        ______TS(\"init : no published sessions\");"},{"lineNumber":393,"author":{"gitId":"-"},"content":"        unpublishAllSessions();"},{"lineNumber":394,"author":{"gitId":"-"},"content":"        List\u003cFeedbackSessionAttributes\u003e sessionList \u003d fsLogic"},{"lineNumber":395,"author":{"gitId":"-"},"content":"                .getFeedbackSessionsWhichNeedAutomatedPublishedEmailsToBeSent();"},{"lineNumber":396,"author":{"gitId":"-"},"content":""},{"lineNumber":397,"author":{"gitId":"-"},"content":"        assertEquals(0, sessionList.size());"},{"lineNumber":398,"author":{"gitId":"-"},"content":""},{"lineNumber":399,"author":{"gitId":"-"},"content":"        ______TS(\"case : 1 published session in undeleted course with mail unsent\");"},{"lineNumber":400,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes session \u003d dataBundle.feedbackSessions.get(\"session1InCourse1\");"},{"lineNumber":401,"author":{"gitId":"-"},"content":"        session.setTimeZone(\"UTC\");"},{"lineNumber":402,"author":{"gitId":"-"},"content":"        session.setStartTime(TimeHelper.getInstantDaysOffsetFromNow(-2));"},{"lineNumber":403,"author":{"gitId":"-"},"content":"        session.setEndTime(TimeHelper.getInstantDaysOffsetFromNow(-1));"},{"lineNumber":404,"author":{"gitId":"-"},"content":"        session.setResultsVisibleFromTime(TimeHelper.getInstantDaysOffsetFromNow(-1));"},{"lineNumber":405,"author":{"gitId":"-"},"content":"        session.setSentPublishedEmail(false);"},{"lineNumber":406,"author":{"gitId":"-"},"content":"        fsLogic.updateFeedbackSession("},{"lineNumber":407,"author":{"gitId":"-"},"content":"                FeedbackSessionAttributes.updateOptionsBuilder(session.getFeedbackSessionName(), session.getCourseId())"},{"lineNumber":408,"author":{"gitId":"-"},"content":"                        .withTimeZone(session.getTimeZone())"},{"lineNumber":409,"author":{"gitId":"-"},"content":"                        .withStartTime(session.getStartTime())"},{"lineNumber":410,"author":{"gitId":"-"},"content":"                        .withEndTime(session.getEndTime())"},{"lineNumber":411,"author":{"gitId":"-"},"content":"                        .withResultsVisibleFromTime(session.getResultsVisibleFromTime())"},{"lineNumber":412,"author":{"gitId":"-"},"content":"                        .withSentPublishedEmail(session.isSentPublishedEmail())"},{"lineNumber":413,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":414,"author":{"gitId":"-"},"content":""},{"lineNumber":415,"author":{"gitId":"-"},"content":"        sessionList \u003d fsLogic.getFeedbackSessionsWhichNeedAutomatedPublishedEmailsToBeSent();"},{"lineNumber":416,"author":{"gitId":"-"},"content":""},{"lineNumber":417,"author":{"gitId":"-"},"content":"        assertEquals(1, sessionList.size());"},{"lineNumber":418,"author":{"gitId":"-"},"content":"        assertEquals(sessionList.get(0).getFeedbackSessionName(), session.getFeedbackSessionName());"},{"lineNumber":419,"author":{"gitId":"-"},"content":""},{"lineNumber":420,"author":{"gitId":"-"},"content":"        ______TS(\"case : 1 published session in undeleted course with mail sent\");"},{"lineNumber":421,"author":{"gitId":"-"},"content":"        session.setSentPublishedEmail(true);"},{"lineNumber":422,"author":{"gitId":"-"},"content":"        fsLogic.updateFeedbackSession("},{"lineNumber":423,"author":{"gitId":"-"},"content":"                FeedbackSessionAttributes.updateOptionsBuilder(session.getFeedbackSessionName(), session.getCourseId())"},{"lineNumber":424,"author":{"gitId":"-"},"content":"                        .withSentPublishedEmail(session.isSentPublishedEmail())"},{"lineNumber":425,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":426,"author":{"gitId":"-"},"content":""},{"lineNumber":427,"author":{"gitId":"-"},"content":"        sessionList \u003d fsLogic.getFeedbackSessionsWhichNeedAutomatedPublishedEmailsToBeSent();"},{"lineNumber":428,"author":{"gitId":"-"},"content":""},{"lineNumber":429,"author":{"gitId":"-"},"content":"        assertEquals(0, sessionList.size());"},{"lineNumber":430,"author":{"gitId":"-"},"content":""},{"lineNumber":431,"author":{"gitId":"-"},"content":"        ______TS(\"case : 1 published session in deleted course with mail unsent\");"},{"lineNumber":432,"author":{"gitId":"-"},"content":"        coursesLogic.moveCourseToRecycleBin(session.getCourseId());"},{"lineNumber":433,"author":{"gitId":"-"},"content":"        session.setSentPublishedEmail(false);"},{"lineNumber":434,"author":{"gitId":"-"},"content":"        fsLogic.updateFeedbackSession("},{"lineNumber":435,"author":{"gitId":"-"},"content":"                FeedbackSessionAttributes.updateOptionsBuilder(session.getFeedbackSessionName(), session.getCourseId())"},{"lineNumber":436,"author":{"gitId":"-"},"content":"                        .withSentPublishedEmail(session.isSentPublishedEmail())"},{"lineNumber":437,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":438,"author":{"gitId":"-"},"content":""},{"lineNumber":439,"author":{"gitId":"-"},"content":"        sessionList \u003d fsLogic.getFeedbackSessionsWhichNeedAutomatedPublishedEmailsToBeSent();"},{"lineNumber":440,"author":{"gitId":"-"},"content":""},{"lineNumber":441,"author":{"gitId":"-"},"content":"        assertEquals(0, sessionList.size());"},{"lineNumber":442,"author":{"gitId":"-"},"content":""},{"lineNumber":443,"author":{"gitId":"-"},"content":"        ______TS(\"case : 1 published session in deleted course with mail sent\");"},{"lineNumber":444,"author":{"gitId":"-"},"content":"        session.setSentPublishedEmail(true);"},{"lineNumber":445,"author":{"gitId":"-"},"content":"        fsLogic.updateFeedbackSession("},{"lineNumber":446,"author":{"gitId":"-"},"content":"                FeedbackSessionAttributes.updateOptionsBuilder(session.getFeedbackSessionName(), session.getCourseId())"},{"lineNumber":447,"author":{"gitId":"-"},"content":"                        .withSentPublishedEmail(session.isSentPublishedEmail())"},{"lineNumber":448,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":449,"author":{"gitId":"-"},"content":""},{"lineNumber":450,"author":{"gitId":"-"},"content":"        sessionList \u003d fsLogic.getFeedbackSessionsWhichNeedAutomatedPublishedEmailsToBeSent();"},{"lineNumber":451,"author":{"gitId":"-"},"content":""},{"lineNumber":452,"author":{"gitId":"-"},"content":"        assertEquals(0, sessionList.size());"},{"lineNumber":453,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":454,"author":{"gitId":"-"},"content":""},{"lineNumber":455,"author":{"gitId":"-"},"content":"    private void testCreateAndDeleteFeedbackSession() throws Exception {"},{"lineNumber":456,"author":{"gitId":"-"},"content":"        ______TS(\"test create\");"},{"lineNumber":457,"author":{"gitId":"-"},"content":""},{"lineNumber":458,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes fs \u003d getNewFeedbackSession();"},{"lineNumber":459,"author":{"gitId":"-"},"content":"        fsLogic.createFeedbackSession(fs);"},{"lineNumber":460,"author":{"gitId":"-"},"content":"        verifyPresentInDatabase(fs);"},{"lineNumber":461,"author":{"gitId":"-"},"content":""},{"lineNumber":462,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes finalFs \u003d fs;"},{"lineNumber":463,"author":{"gitId":"-"},"content":"        ______TS(\"test create with invalid session name\");"},{"lineNumber":464,"author":{"gitId":"-"},"content":"        fs.setFeedbackSessionName(\"test \u0026 test\");"},{"lineNumber":465,"author":{"gitId":"-"},"content":"        Exception e \u003d assertThrows(Exception.class, () -\u003e fsLogic.createFeedbackSession(finalFs));"},{"lineNumber":466,"author":{"gitId":"-"},"content":"        assertEquals("},{"lineNumber":467,"author":{"gitId":"-"},"content":"                \"The provided feedback session name is not acceptable to TEAMMATES \""},{"lineNumber":468,"author":{"gitId":"-"},"content":"                        + \"as it cannot contain the following special html characters in brackets: \""},{"lineNumber":469,"author":{"gitId":"-"},"content":"                        + \"(\u003c \u003e \\\" / \u0027 \u0026)\","},{"lineNumber":470,"author":{"gitId":"-"},"content":"                e.getMessage());"},{"lineNumber":471,"author":{"gitId":"-"},"content":""},{"lineNumber":472,"author":{"gitId":"-"},"content":"        fs.setFeedbackSessionName(\"test %| test\");"},{"lineNumber":473,"author":{"gitId":"-"},"content":"        e \u003d assertThrows(Exception.class, () -\u003e fsLogic.createFeedbackSession(finalFs));"},{"lineNumber":474,"author":{"gitId":"-"},"content":"        assertEquals("},{"lineNumber":475,"author":{"gitId":"-"},"content":"                \"\\\"test %| test\\\" is not acceptable to TEAMMATES as a/an feedback session name \""},{"lineNumber":476,"author":{"gitId":"-"},"content":"                        + \"because it contains invalid characters. A/An feedback session name \""},{"lineNumber":477,"author":{"gitId":"-"},"content":"                        + \"must start with an alphanumeric character, and cannot contain \""},{"lineNumber":478,"author":{"gitId":"-"},"content":"                        + \"any vertical bar (|) or percent sign (%).\","},{"lineNumber":479,"author":{"gitId":"-"},"content":"                e.getMessage());"},{"lineNumber":480,"author":{"gitId":"-"},"content":""},{"lineNumber":481,"author":{"gitId":"-"},"content":"        ______TS(\"test delete\");"},{"lineNumber":482,"author":{"gitId":"-"},"content":"        fs \u003d getNewFeedbackSession();"},{"lineNumber":483,"author":{"gitId":"-"},"content":"        // Create a question under the session to test for cascading during delete."},{"lineNumber":484,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fq \u003d FeedbackQuestionAttributes.builder()"},{"lineNumber":485,"author":{"gitId":"-"},"content":"                .withFeedbackSessionName(fs.getFeedbackSessionName())"},{"lineNumber":486,"author":{"gitId":"-"},"content":"                .withCourseId(fs.getCourseId())"},{"lineNumber":487,"author":{"gitId":"-"},"content":"                .withQuestionNumber(1)"},{"lineNumber":488,"author":{"gitId":"-"},"content":"                .withNumberOfEntitiesToGiveFeedbackTo(Const.MAX_POSSIBLE_RECIPIENTS)"},{"lineNumber":489,"author":{"gitId":"-"},"content":"                .withGiverType(FeedbackParticipantType.STUDENTS)"},{"lineNumber":490,"author":{"gitId":"-"},"content":"                .withRecipientType(FeedbackParticipantType.TEAMS)"},{"lineNumber":491,"author":{"gitId":"-"},"content":"                .withQuestionDetails(new FeedbackTextQuestionDetails(\"question to be deleted through cascade\"))"},{"lineNumber":492,"author":{"gitId":"-"},"content":"                .withShowResponsesTo(new ArrayList\u003c\u003e())"},{"lineNumber":493,"author":{"gitId":"-"},"content":"                .withShowRecipientNameTo(new ArrayList\u003c\u003e())"},{"lineNumber":494,"author":{"gitId":"-"},"content":"                .withShowGiverNameTo(new ArrayList\u003c\u003e())"},{"lineNumber":495,"author":{"gitId":"-"},"content":"                .build();"},{"lineNumber":496,"author":{"gitId":"-"},"content":""},{"lineNumber":497,"author":{"gitId":"-"},"content":"        fqLogic.createFeedbackQuestion(fq);"},{"lineNumber":498,"author":{"gitId":"-"},"content":""},{"lineNumber":499,"author":{"gitId":"-"},"content":"        fsLogic.deleteFeedbackSessionCascade(fs.getFeedbackSessionName(), fs.getCourseId());"},{"lineNumber":500,"author":{"gitId":"-"},"content":"        verifyAbsentInDatabase(fs);"},{"lineNumber":501,"author":{"gitId":"-"},"content":"        verifyAbsentInDatabase(fq);"},{"lineNumber":502,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":503,"author":{"gitId":"-"},"content":""},{"lineNumber":504,"author":{"gitId":"-"},"content":"    private void testIsFeedbackSessionViewableToUserType() {"},{"lineNumber":505,"author":{"gitId":"-"},"content":"        ______TS(\"Session with questions for students/instructors to answer\");"},{"lineNumber":506,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes session \u003d dataBundle.feedbackSessions.get(\"session1InCourse1\");"},{"lineNumber":507,"author":{"gitId":"-"},"content":"        assertTrue(fsLogic.isFeedbackSessionViewableToUserType(session, false));"},{"lineNumber":508,"author":{"gitId":"-"},"content":"        assertTrue(fsLogic.isFeedbackSessionViewableToUserType(session, true));"},{"lineNumber":509,"author":{"gitId":"-"},"content":""},{"lineNumber":510,"author":{"gitId":"-"},"content":"        ______TS(\"Session without questions for students, but with visible responses\");"},{"lineNumber":511,"author":{"gitId":"-"},"content":"        session \u003d dataBundle.feedbackSessions.get(\"archiveCourse.session1\");"},{"lineNumber":512,"author":{"gitId":"-"},"content":"        assertTrue(fsLogic.isFeedbackSessionViewableToUserType(session, false));"},{"lineNumber":513,"author":{"gitId":"-"},"content":""},{"lineNumber":514,"author":{"gitId":"-"},"content":"        session \u003d dataBundle.feedbackSessions.get(\"session1InCourse2\");"},{"lineNumber":515,"author":{"gitId":"-"},"content":"        assertTrue(fsLogic.isFeedbackSessionViewableToUserType(session, false));"},{"lineNumber":516,"author":{"gitId":"-"},"content":""},{"lineNumber":517,"author":{"gitId":"-"},"content":"        ______TS(\"Session without questions for instructors, but with visible responses\");"},{"lineNumber":518,"author":{"gitId":"-"},"content":"        session \u003d dataBundle.feedbackSessions.get(\"session2InCourse1\");"},{"lineNumber":519,"author":{"gitId":"-"},"content":"        assertTrue(fsLogic.isFeedbackSessionViewableToUserType(session, true));"},{"lineNumber":520,"author":{"gitId":"-"},"content":""},{"lineNumber":521,"author":{"gitId":"-"},"content":"        ______TS(\"empty session\");"},{"lineNumber":522,"author":{"gitId":"-"},"content":"        session \u003d dataBundle.feedbackSessions.get(\"empty.session\");"},{"lineNumber":523,"author":{"gitId":"-"},"content":"        assertFalse(fsLogic.isFeedbackSessionViewableToUserType(session, false));"},{"lineNumber":524,"author":{"gitId":"-"},"content":"        assertFalse(fsLogic.isFeedbackSessionViewableToUserType(session, true));"},{"lineNumber":525,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":526,"author":{"gitId":"-"},"content":""},{"lineNumber":527,"author":{"gitId":"-"},"content":"    private void testIsFeedbackSessionForUserTypeToAnswer() {"},{"lineNumber":528,"author":{"gitId":"-"},"content":"        ______TS(\"Non-visible session should not be for any types of user to answer\");"},{"lineNumber":529,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes session \u003d dataBundle.feedbackSessions.get(\"awaiting.session\");"},{"lineNumber":530,"author":{"gitId":"-"},"content":"        assertFalse(fsLogic.isFeedbackSessionForUserTypeToAnswer(session, false));"},{"lineNumber":531,"author":{"gitId":"-"},"content":"        assertFalse(fsLogic.isFeedbackSessionForUserTypeToAnswer(session, true));"},{"lineNumber":532,"author":{"gitId":"-"},"content":""},{"lineNumber":533,"author":{"gitId":"-"},"content":"        ______TS(\"Empty session should not be for any types of user to answer\");"},{"lineNumber":534,"author":{"gitId":"-"},"content":"        session \u003d dataBundle.feedbackSessions.get(\"empty.session\");"},{"lineNumber":535,"author":{"gitId":"-"},"content":"        assertFalse(fsLogic.isFeedbackSessionForUserTypeToAnswer(session, false));"},{"lineNumber":536,"author":{"gitId":"-"},"content":"        assertFalse(fsLogic.isFeedbackSessionForUserTypeToAnswer(session, true));"},{"lineNumber":537,"author":{"gitId":"-"},"content":""},{"lineNumber":538,"author":{"gitId":"-"},"content":"        ______TS(\"Session without student question should not be for students to answer\");"},{"lineNumber":539,"author":{"gitId":"-"},"content":"        session \u003d dataBundle.feedbackSessions.get(\"archiveCourse.session1\");"},{"lineNumber":540,"author":{"gitId":"-"},"content":"        assertFalse(fsLogic.isFeedbackSessionForUserTypeToAnswer(session, false));"},{"lineNumber":541,"author":{"gitId":"-"},"content":"        assertTrue(fsLogic.isFeedbackSessionForUserTypeToAnswer(session, true));"},{"lineNumber":542,"author":{"gitId":"-"},"content":""},{"lineNumber":543,"author":{"gitId":"-"},"content":"        ______TS(\"Session without instructor question should not be for instructors to answer\");"},{"lineNumber":544,"author":{"gitId":"-"},"content":"        session \u003d dataBundle.feedbackSessions.get(\"session2InCourse1\");"},{"lineNumber":545,"author":{"gitId":"-"},"content":"        assertFalse(fsLogic.isFeedbackSessionForUserTypeToAnswer(session, true));"},{"lineNumber":546,"author":{"gitId":"-"},"content":"        assertTrue(fsLogic.isFeedbackSessionForUserTypeToAnswer(session, false));"},{"lineNumber":547,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":548,"author":{"gitId":"-"},"content":""},{"lineNumber":549,"author":{"gitId":"-"},"content":"    private void testUpdateFeedbackSession() throws Exception {"},{"lineNumber":550,"author":{"gitId":"-"},"content":""},{"lineNumber":551,"author":{"gitId":"-"},"content":"        ______TS(\"failure: non-existent session name\");"},{"lineNumber":552,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes.UpdateOptions updateOptions \u003d"},{"lineNumber":553,"author":{"gitId":"-"},"content":"                FeedbackSessionAttributes.updateOptionsBuilder(\"asdf_randomName1423\", \"idOfTypicalCourse1\")"},{"lineNumber":554,"author":{"gitId":"-"},"content":"                        .withInstructions(\"test\")"},{"lineNumber":555,"author":{"gitId":"-"},"content":"                        .build();"},{"lineNumber":556,"author":{"gitId":"-"},"content":"        EntityDoesNotExistException ednee \u003d assertThrows(EntityDoesNotExistException.class,"},{"lineNumber":557,"author":{"gitId":"-"},"content":"                () -\u003e fsLogic.updateFeedbackSession(updateOptions));"},{"lineNumber":558,"author":{"gitId":"-"},"content":"        assertEquals("},{"lineNumber":559,"author":{"gitId":"-"},"content":"                \"Trying to update a non-existent feedback session: \""},{"lineNumber":560,"author":{"gitId":"-"},"content":"                        + updateOptions.getCourseId() + \"/\" + updateOptions.getFeedbackSessionName(),"},{"lineNumber":561,"author":{"gitId":"-"},"content":"                ednee.getMessage());"},{"lineNumber":562,"author":{"gitId":"-"},"content":""},{"lineNumber":563,"author":{"gitId":"-"},"content":"        ______TS(\"success 1: typical case\");"},{"lineNumber":564,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes fsa \u003d dataBundle.feedbackSessions.get(\"session1InCourse1\");"},{"lineNumber":565,"author":{"gitId":"-"},"content":"        fsa.setInstructions(\"test\");"},{"lineNumber":566,"author":{"gitId":"-"},"content":""},{"lineNumber":567,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes updatedFeedbackSession \u003d fsLogic.updateFeedbackSession("},{"lineNumber":568,"author":{"gitId":"-"},"content":"                FeedbackSessionAttributes.updateOptionsBuilder(fsa.getFeedbackSessionName(), fsa.getCourseId())"},{"lineNumber":569,"author":{"gitId":"-"},"content":"                        .withInstructions(fsa.getInstructions())"},{"lineNumber":570,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":571,"author":{"gitId":"-"},"content":""},{"lineNumber":572,"author":{"gitId":"-"},"content":"        assertEquals(fsa.toString(), fsLogic.getFeedbackSession(fsa.getFeedbackSessionName(), fsa.getCourseId()).toString());"},{"lineNumber":573,"author":{"gitId":"-"},"content":"        assertEquals(fsa.toString(), updatedFeedbackSession.toString());"},{"lineNumber":574,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":575,"author":{"gitId":"-"},"content":""},{"lineNumber":576,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":577,"author":{"gitId":"-"},"content":"    public void testUpdateFeedbackSession_shouldAdjustEmailSendingStatusAccordingly() throws Exception {"},{"lineNumber":578,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes typicalSession \u003d dataBundle.feedbackSessions.get(\"session1InCourse1\");"},{"lineNumber":579,"author":{"gitId":"-"},"content":""},{"lineNumber":580,"author":{"gitId":"-"},"content":"        ______TS(\"open email sent, whether the updated session is open determines the \""},{"lineNumber":581,"author":{"gitId":"-"},"content":"                + \"open/opening soon email sending status\");"},{"lineNumber":582,"author":{"gitId":"-"},"content":""},{"lineNumber":583,"author":{"gitId":"-"},"content":"        fsDb.updateFeedbackSession("},{"lineNumber":584,"author":{"gitId":"-"},"content":"                FeedbackSessionAttributes.updateOptionsBuilder("},{"lineNumber":585,"author":{"gitId":"-"},"content":"                        typicalSession.getFeedbackSessionName(), typicalSession.getCourseId())"},{"lineNumber":586,"author":{"gitId":"-"},"content":"                        .withSentOpenEmail(true)"},{"lineNumber":587,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":588,"author":{"gitId":"-"},"content":""},{"lineNumber":589,"author":{"gitId":"-"},"content":"        fsLogic.updateFeedbackSession("},{"lineNumber":590,"author":{"gitId":"-"},"content":"                FeedbackSessionAttributes.updateOptionsBuilder("},{"lineNumber":591,"author":{"gitId":"-"},"content":"                        typicalSession.getFeedbackSessionName(), typicalSession.getCourseId())"},{"lineNumber":592,"author":{"gitId":"-"},"content":"                        .withStartTime(TimeHelper.getInstantDaysOffsetFromNow(-2))"},{"lineNumber":593,"author":{"gitId":"-"},"content":"                        .withEndTime(TimeHelper.getInstantDaysOffsetFromNow(-1))"},{"lineNumber":594,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":595,"author":{"gitId":"-"},"content":"        // updated session not open, status set to false"},{"lineNumber":596,"author":{"gitId":"-"},"content":"        assertFalse(fsLogic.getFeedbackSession("},{"lineNumber":597,"author":{"gitId":"-"},"content":"                typicalSession.getFeedbackSessionName(), typicalSession.getCourseId()).isSentOpenEmail());"},{"lineNumber":598,"author":{"gitId":"-"},"content":"        assertFalse(fsLogic.getFeedbackSession("},{"lineNumber":599,"author":{"gitId":"-"},"content":"                typicalSession.getFeedbackSessionName(), typicalSession.getCourseId()).isSentOpeningSoonEmail());"},{"lineNumber":600,"author":{"gitId":"-"},"content":""},{"lineNumber":601,"author":{"gitId":"-"},"content":"        fsDb.updateFeedbackSession("},{"lineNumber":602,"author":{"gitId":"-"},"content":"                FeedbackSessionAttributes.updateOptionsBuilder("},{"lineNumber":603,"author":{"gitId":"-"},"content":"                        typicalSession.getFeedbackSessionName(), typicalSession.getCourseId())"},{"lineNumber":604,"author":{"gitId":"-"},"content":"                        .withSentOpenEmail(true)"},{"lineNumber":605,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":606,"author":{"gitId":"-"},"content":""},{"lineNumber":607,"author":{"gitId":"-"},"content":"        fsLogic.updateFeedbackSession("},{"lineNumber":608,"author":{"gitId":"-"},"content":"                FeedbackSessionAttributes.updateOptionsBuilder("},{"lineNumber":609,"author":{"gitId":"-"},"content":"                        typicalSession.getFeedbackSessionName(), typicalSession.getCourseId())"},{"lineNumber":610,"author":{"gitId":"-"},"content":"                        .withStartTime(TimeHelperExtension.getInstantHoursOffsetFromNow(20))"},{"lineNumber":611,"author":{"gitId":"-"},"content":"                        .withEndTime(TimeHelper.getInstantDaysOffsetFromNow(2))"},{"lineNumber":612,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":613,"author":{"gitId":"-"},"content":"        // updated session not open, status set to false"},{"lineNumber":614,"author":{"gitId":"-"},"content":"        assertFalse(fsLogic.getFeedbackSession("},{"lineNumber":615,"author":{"gitId":"-"},"content":"                typicalSession.getFeedbackSessionName(), typicalSession.getCourseId()).isSentOpenEmail());"},{"lineNumber":616,"author":{"gitId":"-"},"content":"        // updated session opening soon, opening soon email shouldn\u0027t be sent anymore"},{"lineNumber":617,"author":{"gitId":"-"},"content":"        assertTrue(fsLogic.getFeedbackSession("},{"lineNumber":618,"author":{"gitId":"-"},"content":"                typicalSession.getFeedbackSessionName(), typicalSession.getCourseId()).isSentOpeningSoonEmail());"},{"lineNumber":619,"author":{"gitId":"-"},"content":""},{"lineNumber":620,"author":{"gitId":"-"},"content":"        fsDb.updateFeedbackSession("},{"lineNumber":621,"author":{"gitId":"-"},"content":"                FeedbackSessionAttributes.updateOptionsBuilder("},{"lineNumber":622,"author":{"gitId":"-"},"content":"                        typicalSession.getFeedbackSessionName(), typicalSession.getCourseId())"},{"lineNumber":623,"author":{"gitId":"-"},"content":"                        .withSentOpenEmail(true)"},{"lineNumber":624,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":625,"author":{"gitId":"-"},"content":""},{"lineNumber":626,"author":{"gitId":"-"},"content":"        fsLogic.updateFeedbackSession("},{"lineNumber":627,"author":{"gitId":"-"},"content":"                FeedbackSessionAttributes.updateOptionsBuilder("},{"lineNumber":628,"author":{"gitId":"-"},"content":"                        typicalSession.getFeedbackSessionName(), typicalSession.getCourseId())"},{"lineNumber":629,"author":{"gitId":"-"},"content":"                        .withStartTime(TimeHelper.getInstantDaysOffsetFromNow(-1))"},{"lineNumber":630,"author":{"gitId":"-"},"content":"                        .withEndTime(TimeHelper.getInstantDaysOffsetFromNow(1))"},{"lineNumber":631,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":632,"author":{"gitId":"-"},"content":"        // updated session open, status set to true"},{"lineNumber":633,"author":{"gitId":"-"},"content":"        assertTrue(fsLogic.getFeedbackSession("},{"lineNumber":634,"author":{"gitId":"-"},"content":"                typicalSession.getFeedbackSessionName(), typicalSession.getCourseId()).isSentOpenEmail());"},{"lineNumber":635,"author":{"gitId":"-"},"content":"        // opening soon email shouldn\u0027t be sent anymore"},{"lineNumber":636,"author":{"gitId":"-"},"content":"        assertTrue(fsLogic.getFeedbackSession("},{"lineNumber":637,"author":{"gitId":"-"},"content":"                typicalSession.getFeedbackSessionName(), typicalSession.getCourseId()).isSentOpeningSoonEmail());"},{"lineNumber":638,"author":{"gitId":"-"},"content":""},{"lineNumber":639,"author":{"gitId":"-"},"content":"        ______TS(\"closed email sent, whether the updated session is closed determines the \""},{"lineNumber":640,"author":{"gitId":"-"},"content":"                + \"closed/closing email sending status\");"},{"lineNumber":641,"author":{"gitId":"-"},"content":""},{"lineNumber":642,"author":{"gitId":"-"},"content":"        fsDb.updateFeedbackSession("},{"lineNumber":643,"author":{"gitId":"-"},"content":"                FeedbackSessionAttributes.updateOptionsBuilder("},{"lineNumber":644,"author":{"gitId":"-"},"content":"                        typicalSession.getFeedbackSessionName(), typicalSession.getCourseId())"},{"lineNumber":645,"author":{"gitId":"-"},"content":"                        .withSentClosedEmail(true)"},{"lineNumber":646,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":647,"author":{"gitId":"-"},"content":""},{"lineNumber":648,"author":{"gitId":"-"},"content":"        fsLogic.updateFeedbackSession("},{"lineNumber":649,"author":{"gitId":"-"},"content":"                FeedbackSessionAttributes.updateOptionsBuilder("},{"lineNumber":650,"author":{"gitId":"-"},"content":"                        typicalSession.getFeedbackSessionName(), typicalSession.getCourseId())"},{"lineNumber":651,"author":{"gitId":"-"},"content":"                        .withStartTime(TimeHelper.getInstantDaysOffsetFromNow(-2))"},{"lineNumber":652,"author":{"gitId":"-"},"content":"                        .withEndTime(TimeHelper.getInstantDaysOffsetFromNow(-1))"},{"lineNumber":653,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":654,"author":{"gitId":"-"},"content":"        // updated session closed, status set to true"},{"lineNumber":655,"author":{"gitId":"-"},"content":"        assertTrue(fsLogic.getFeedbackSession("},{"lineNumber":656,"author":{"gitId":"-"},"content":"                typicalSession.getFeedbackSessionName(), typicalSession.getCourseId()).isSentClosedEmail());"},{"lineNumber":657,"author":{"gitId":"-"},"content":"        assertTrue(fsLogic.getFeedbackSession("},{"lineNumber":658,"author":{"gitId":"-"},"content":"                typicalSession.getFeedbackSessionName(), typicalSession.getCourseId()).isSentClosingEmail());"},{"lineNumber":659,"author":{"gitId":"-"},"content":""},{"lineNumber":660,"author":{"gitId":"-"},"content":"        fsDb.updateFeedbackSession("},{"lineNumber":661,"author":{"gitId":"-"},"content":"                FeedbackSessionAttributes.updateOptionsBuilder("},{"lineNumber":662,"author":{"gitId":"-"},"content":"                        typicalSession.getFeedbackSessionName(), typicalSession.getCourseId())"},{"lineNumber":663,"author":{"gitId":"-"},"content":"                        .withSentClosedEmail(true)"},{"lineNumber":664,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":665,"author":{"gitId":"-"},"content":""},{"lineNumber":666,"author":{"gitId":"-"},"content":"        fsLogic.updateFeedbackSession("},{"lineNumber":667,"author":{"gitId":"-"},"content":"                FeedbackSessionAttributes.updateOptionsBuilder("},{"lineNumber":668,"author":{"gitId":"-"},"content":"                        typicalSession.getFeedbackSessionName(), typicalSession.getCourseId())"},{"lineNumber":669,"author":{"gitId":"-"},"content":"                        .withStartTime(TimeHelper.getInstantDaysOffsetFromNow(-1))"},{"lineNumber":670,"author":{"gitId":"-"},"content":"                        .withEndTime(TimeHelper.getInstantDaysOffsetFromNow(2))"},{"lineNumber":671,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":672,"author":{"gitId":"-"},"content":"        //  updated session not closed, status set to false"},{"lineNumber":673,"author":{"gitId":"-"},"content":"        assertFalse(fsLogic.getFeedbackSession("},{"lineNumber":674,"author":{"gitId":"-"},"content":"                typicalSession.getFeedbackSessionName(), typicalSession.getCourseId()).isSentClosedEmail());"},{"lineNumber":675,"author":{"gitId":"-"},"content":"        assertFalse(fsLogic.getFeedbackSession("},{"lineNumber":676,"author":{"gitId":"-"},"content":"                typicalSession.getFeedbackSessionName(), typicalSession.getCourseId()).isSentClosingEmail());"},{"lineNumber":677,"author":{"gitId":"-"},"content":""},{"lineNumber":678,"author":{"gitId":"-"},"content":"        fsDb.updateFeedbackSession("},{"lineNumber":679,"author":{"gitId":"-"},"content":"                FeedbackSessionAttributes.updateOptionsBuilder("},{"lineNumber":680,"author":{"gitId":"-"},"content":"                        typicalSession.getFeedbackSessionName(), typicalSession.getCourseId())"},{"lineNumber":681,"author":{"gitId":"-"},"content":"                        .withSentClosedEmail(true)"},{"lineNumber":682,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":683,"author":{"gitId":"-"},"content":""},{"lineNumber":684,"author":{"gitId":"-"},"content":"        fsLogic.updateFeedbackSession("},{"lineNumber":685,"author":{"gitId":"-"},"content":"                FeedbackSessionAttributes.updateOptionsBuilder("},{"lineNumber":686,"author":{"gitId":"-"},"content":"                        typicalSession.getFeedbackSessionName(), typicalSession.getCourseId())"},{"lineNumber":687,"author":{"gitId":"-"},"content":"                        .withStartTime(TimeHelperExtension.getInstantMinutesOffsetFromNow(-10))"},{"lineNumber":688,"author":{"gitId":"-"},"content":"                        .withEndTime(TimeHelperExtension.getInstantMinutesOffsetFromNow(10))"},{"lineNumber":689,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":690,"author":{"gitId":"-"},"content":"        // updated session not closed, status set to false"},{"lineNumber":691,"author":{"gitId":"-"},"content":"        assertFalse(fsLogic.getFeedbackSession("},{"lineNumber":692,"author":{"gitId":"-"},"content":"                typicalSession.getFeedbackSessionName(), typicalSession.getCourseId()).isSentClosedEmail());"},{"lineNumber":693,"author":{"gitId":"-"},"content":"        // closed in 10 minutes, should not send closing email anymore"},{"lineNumber":694,"author":{"gitId":"-"},"content":"        assertTrue(fsLogic.getFeedbackSession("},{"lineNumber":695,"author":{"gitId":"-"},"content":"                typicalSession.getFeedbackSessionName(), typicalSession.getCourseId()).isSentClosingEmail());"},{"lineNumber":696,"author":{"gitId":"-"},"content":""},{"lineNumber":697,"author":{"gitId":"-"},"content":"        ______TS(\"published email sent, whether the updated session is published determines the \""},{"lineNumber":698,"author":{"gitId":"-"},"content":"                + \"publish email sending status\");"},{"lineNumber":699,"author":{"gitId":"-"},"content":""},{"lineNumber":700,"author":{"gitId":"-"},"content":"        fsDb.updateFeedbackSession("},{"lineNumber":701,"author":{"gitId":"-"},"content":"                FeedbackSessionAttributes.updateOptionsBuilder("},{"lineNumber":702,"author":{"gitId":"-"},"content":"                        typicalSession.getFeedbackSessionName(), typicalSession.getCourseId())"},{"lineNumber":703,"author":{"gitId":"-"},"content":"                        .withSentPublishedEmail(true)"},{"lineNumber":704,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":705,"author":{"gitId":"-"},"content":""},{"lineNumber":706,"author":{"gitId":"-"},"content":"        fsLogic.updateFeedbackSession("},{"lineNumber":707,"author":{"gitId":"-"},"content":"                FeedbackSessionAttributes.updateOptionsBuilder("},{"lineNumber":708,"author":{"gitId":"-"},"content":"                        typicalSession.getFeedbackSessionName(), typicalSession.getCourseId())"},{"lineNumber":709,"author":{"gitId":"-"},"content":"                        .withResultsVisibleFromTime(Const.TIME_REPRESENTS_NOW)"},{"lineNumber":710,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":711,"author":{"gitId":"-"},"content":"        // updated session published, status set to true"},{"lineNumber":712,"author":{"gitId":"-"},"content":"        assertTrue(fsLogic.getFeedbackSession("},{"lineNumber":713,"author":{"gitId":"-"},"content":"                typicalSession.getFeedbackSessionName(), typicalSession.getCourseId()).isSentPublishedEmail());"},{"lineNumber":714,"author":{"gitId":"-"},"content":""},{"lineNumber":715,"author":{"gitId":"-"},"content":"        fsDb.updateFeedbackSession("},{"lineNumber":716,"author":{"gitId":"-"},"content":"                FeedbackSessionAttributes.updateOptionsBuilder("},{"lineNumber":717,"author":{"gitId":"-"},"content":"                        typicalSession.getFeedbackSessionName(), typicalSession.getCourseId())"},{"lineNumber":718,"author":{"gitId":"-"},"content":"                        .withSentPublishedEmail(true)"},{"lineNumber":719,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":720,"author":{"gitId":"-"},"content":""},{"lineNumber":721,"author":{"gitId":"-"},"content":"        fsLogic.updateFeedbackSession("},{"lineNumber":722,"author":{"gitId":"-"},"content":"                FeedbackSessionAttributes.updateOptionsBuilder("},{"lineNumber":723,"author":{"gitId":"-"},"content":"                        typicalSession.getFeedbackSessionName(), typicalSession.getCourseId())"},{"lineNumber":724,"author":{"gitId":"-"},"content":"                        .withResultsVisibleFromTime(Const.TIME_REPRESENTS_LATER)"},{"lineNumber":725,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":726,"author":{"gitId":"-"},"content":"        // updated session not published, status set to false"},{"lineNumber":727,"author":{"gitId":"-"},"content":"        assertFalse(fsLogic.getFeedbackSession("},{"lineNumber":728,"author":{"gitId":"-"},"content":"                typicalSession.getFeedbackSessionName(), typicalSession.getCourseId()).isSentPublishedEmail());"},{"lineNumber":729,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":730,"author":{"gitId":"-"},"content":""},{"lineNumber":731,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":732,"author":{"gitId":"-"},"content":"    public void testUpdateFeedbackSessionsInstructorDeadlinesWithNewEmail() {"},{"lineNumber":733,"author":{"gitId":"-"},"content":"        InstructorAttributes instructorToBeUpdated \u003d dataBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":734,"author":{"gitId":"-"},"content":"        String courseId \u003d instructorToBeUpdated.getCourseId();"},{"lineNumber":735,"author":{"gitId":"-"},"content":"        String oldEmailAddress \u003d instructorToBeUpdated.getEmail();"},{"lineNumber":736,"author":{"gitId":"-"},"content":"        String newEmailAddress \u003d \"new@email.tmt\";"},{"lineNumber":737,"author":{"gitId":"-"},"content":""},{"lineNumber":738,"author":{"gitId":"-"},"content":"        ______TS(\"Update email; transfers deadlines to new email.\");"},{"lineNumber":739,"author":{"gitId":"-"},"content":""},{"lineNumber":740,"author":{"gitId":"-"},"content":"        Map\u003cInstant, Integer\u003e oldDeadlineCounts \u003d fsLogic.getFeedbackSessionsForCourse(courseId)"},{"lineNumber":741,"author":{"gitId":"-"},"content":"                .stream()"},{"lineNumber":742,"author":{"gitId":"-"},"content":"                .map(FeedbackSessionAttributes::getInstructorDeadlines)"},{"lineNumber":743,"author":{"gitId":"-"},"content":"                .filter(instructorDeadlines -\u003e instructorDeadlines.containsKey(oldEmailAddress))"},{"lineNumber":744,"author":{"gitId":"-"},"content":"                .map(instructorDeadlines -\u003e instructorDeadlines.get(oldEmailAddress))"},{"lineNumber":745,"author":{"gitId":"-"},"content":"                .collect(Collectors.groupingBy(Function.identity(), Collectors.summingInt(deadline -\u003e 1)));"},{"lineNumber":746,"author":{"gitId":"-"},"content":"        assertEquals(2, oldDeadlineCounts.values()"},{"lineNumber":747,"author":{"gitId":"-"},"content":"                .stream()"},{"lineNumber":748,"author":{"gitId":"-"},"content":"                .reduce(0, Integer::sum)"},{"lineNumber":749,"author":{"gitId":"-"},"content":"                .intValue());"},{"lineNumber":750,"author":{"gitId":"-"},"content":""},{"lineNumber":751,"author":{"gitId":"-"},"content":"        fsLogic.updateFeedbackSessionsInstructorDeadlinesWithNewEmail(courseId, oldEmailAddress, newEmailAddress);"},{"lineNumber":752,"author":{"gitId":"-"},"content":""},{"lineNumber":753,"author":{"gitId":"-"},"content":"        assertTrue(fsLogic.getFeedbackSessionsForCourse(courseId)"},{"lineNumber":754,"author":{"gitId":"-"},"content":"                .stream()"},{"lineNumber":755,"author":{"gitId":"-"},"content":"                .noneMatch(feedbackSessionAttributes -\u003e feedbackSessionAttributes.getInstructorDeadlines()"},{"lineNumber":756,"author":{"gitId":"-"},"content":"                        .containsKey(oldEmailAddress)));"},{"lineNumber":757,"author":{"gitId":"-"},"content":"        Map\u003cInstant, Integer\u003e newDeadlineCounts \u003d fsLogic.getFeedbackSessionsForCourse(courseId)"},{"lineNumber":758,"author":{"gitId":"-"},"content":"                .stream()"},{"lineNumber":759,"author":{"gitId":"-"},"content":"                .map(FeedbackSessionAttributes::getInstructorDeadlines)"},{"lineNumber":760,"author":{"gitId":"-"},"content":"                .filter(instructorDeadlines -\u003e instructorDeadlines.containsKey(newEmailAddress))"},{"lineNumber":761,"author":{"gitId":"-"},"content":"                .map(instructorDeadlines -\u003e instructorDeadlines.get(newEmailAddress))"},{"lineNumber":762,"author":{"gitId":"-"},"content":"                .collect(Collectors.groupingBy(Function.identity(), Collectors.summingInt(deadline -\u003e 1)));"},{"lineNumber":763,"author":{"gitId":"-"},"content":"        assertEquals(oldDeadlineCounts, newDeadlineCounts);"},{"lineNumber":764,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":765,"author":{"gitId":"-"},"content":""},{"lineNumber":766,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":767,"author":{"gitId":"-"},"content":"    public void testUpdateFeedbackSessionsStudentDeadlinesWithNewEmail() {"},{"lineNumber":768,"author":{"gitId":"-"},"content":"        StudentAttributes student4InCourse1 \u003d dataBundle.students.get(\"student4InCourse1\");"},{"lineNumber":769,"author":{"gitId":"-"},"content":"        String courseId \u003d student4InCourse1.getCourse();"},{"lineNumber":770,"author":{"gitId":"-"},"content":"        String oldEmailAddress \u003d student4InCourse1.getEmail();"},{"lineNumber":771,"author":{"gitId":"-"},"content":"        String newEmailAddress \u003d \"new@email.tmt\";"},{"lineNumber":772,"author":{"gitId":"-"},"content":""},{"lineNumber":773,"author":{"gitId":"-"},"content":"        ______TS(\"Update email; transfers deadlines to new email.\");"},{"lineNumber":774,"author":{"gitId":"-"},"content":""},{"lineNumber":775,"author":{"gitId":"-"},"content":"        Map\u003cInstant, Integer\u003e oldDeadlineCounts \u003d fsLogic.getFeedbackSessionsForCourse(courseId)"},{"lineNumber":776,"author":{"gitId":"-"},"content":"                .stream()"},{"lineNumber":777,"author":{"gitId":"-"},"content":"                .map(FeedbackSessionAttributes::getStudentDeadlines)"},{"lineNumber":778,"author":{"gitId":"-"},"content":"                .filter(studentDeadlines -\u003e studentDeadlines.containsKey(oldEmailAddress))"},{"lineNumber":779,"author":{"gitId":"-"},"content":"                .map(studentDeadlines -\u003e studentDeadlines.get(oldEmailAddress))"},{"lineNumber":780,"author":{"gitId":"-"},"content":"                .collect(Collectors.groupingBy(Function.identity(), Collectors.summingInt(deadline -\u003e 1)));"},{"lineNumber":781,"author":{"gitId":"-"},"content":"        assertEquals(2, oldDeadlineCounts.values()"},{"lineNumber":782,"author":{"gitId":"-"},"content":"                .stream()"},{"lineNumber":783,"author":{"gitId":"-"},"content":"                .reduce(0, Integer::sum)"},{"lineNumber":784,"author":{"gitId":"-"},"content":"                .intValue());"},{"lineNumber":785,"author":{"gitId":"-"},"content":""},{"lineNumber":786,"author":{"gitId":"-"},"content":"        fsLogic.updateFeedbackSessionsStudentDeadlinesWithNewEmail(courseId, oldEmailAddress, newEmailAddress);"},{"lineNumber":787,"author":{"gitId":"-"},"content":""},{"lineNumber":788,"author":{"gitId":"cedricongjh"},"content":"        // Clear the Objectify cache to fetch the latest FeedbackSessions from the db"},{"lineNumber":789,"author":{"gitId":"cedricongjh"},"content":"        clearObjectifyCache();"},{"lineNumber":790,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":791,"author":{"gitId":"-"},"content":"        assertTrue(fsLogic.getFeedbackSessionsForCourse(courseId)"},{"lineNumber":792,"author":{"gitId":"-"},"content":"                .stream()"},{"lineNumber":793,"author":{"gitId":"-"},"content":"                .noneMatch(feedbackSessionAttributes -\u003e feedbackSessionAttributes.getStudentDeadlines()"},{"lineNumber":794,"author":{"gitId":"-"},"content":"                        .containsKey(oldEmailAddress)));"},{"lineNumber":795,"author":{"gitId":"-"},"content":"        Map\u003cInstant, Integer\u003e newDeadlineCounts \u003d fsLogic.getFeedbackSessionsForCourse(courseId)"},{"lineNumber":796,"author":{"gitId":"-"},"content":"                .stream()"},{"lineNumber":797,"author":{"gitId":"-"},"content":"                .map(FeedbackSessionAttributes::getStudentDeadlines)"},{"lineNumber":798,"author":{"gitId":"-"},"content":"                .filter(studentDeadlines -\u003e studentDeadlines.containsKey(newEmailAddress))"},{"lineNumber":799,"author":{"gitId":"-"},"content":"                .map(studentDeadlines -\u003e studentDeadlines.get(newEmailAddress))"},{"lineNumber":800,"author":{"gitId":"-"},"content":"                .collect(Collectors.groupingBy(Function.identity(), Collectors.summingInt(deadline -\u003e 1)));"},{"lineNumber":801,"author":{"gitId":"-"},"content":"        assertEquals(oldDeadlineCounts, newDeadlineCounts);"},{"lineNumber":802,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":803,"author":{"gitId":"-"},"content":""},{"lineNumber":804,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":805,"author":{"gitId":"-"},"content":"    public void testDeleteFeedbackSessionsDeadlinesForInstructor() {"},{"lineNumber":806,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor1OfCourse1 \u003d dataBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":807,"author":{"gitId":"-"},"content":"        verifyPresentInDatabase(instructor1OfCourse1);"},{"lineNumber":808,"author":{"gitId":"-"},"content":""},{"lineNumber":809,"author":{"gitId":"-"},"content":"        String courseId \u003d instructor1OfCourse1.getCourseId();"},{"lineNumber":810,"author":{"gitId":"-"},"content":"        String emailAddress \u003d instructor1OfCourse1.getEmail();"},{"lineNumber":811,"author":{"gitId":"-"},"content":""},{"lineNumber":812,"author":{"gitId":"-"},"content":"        ______TS(\"Delete user; deadlines associated with the email are removed.\");"},{"lineNumber":813,"author":{"gitId":"-"},"content":""},{"lineNumber":814,"author":{"gitId":"-"},"content":"        // The instructor should have selective deadlines."},{"lineNumber":815,"author":{"gitId":"-"},"content":"        Set\u003cFeedbackSessionAttributes\u003e oldSessionsWithInstructor1Deadlines \u003d fsLogic"},{"lineNumber":816,"author":{"gitId":"-"},"content":"                .getFeedbackSessionsForCourse(courseId)"},{"lineNumber":817,"author":{"gitId":"-"},"content":"                .stream()"},{"lineNumber":818,"author":{"gitId":"-"},"content":"                .filter(feedbackSessionAttributes -\u003e feedbackSessionAttributes.getInstructorDeadlines()"},{"lineNumber":819,"author":{"gitId":"-"},"content":"                        .containsKey(emailAddress))"},{"lineNumber":820,"author":{"gitId":"-"},"content":"                .collect(Collectors.toSet());"},{"lineNumber":821,"author":{"gitId":"-"},"content":"        Map\u003cFeedbackSessionAttributes, Integer\u003e oldSessionsDeadlineCounts \u003d oldSessionsWithInstructor1Deadlines"},{"lineNumber":822,"author":{"gitId":"-"},"content":"                .stream()"},{"lineNumber":823,"author":{"gitId":"-"},"content":"                .collect(Collectors.toMap(fsa -\u003e fsa, fsa -\u003e fsa.getInstructorDeadlines().size()));"},{"lineNumber":824,"author":{"gitId":"-"},"content":"        assertEquals(2, oldSessionsWithInstructor1Deadlines.size());"},{"lineNumber":825,"author":{"gitId":"-"},"content":""},{"lineNumber":826,"author":{"gitId":"-"},"content":"        fsLogic.deleteFeedbackSessionsDeadlinesForInstructor(courseId, emailAddress);"},{"lineNumber":827,"author":{"gitId":"-"},"content":""},{"lineNumber":828,"author":{"gitId":"-"},"content":"        // The instructor should have no more selective deadlines."},{"lineNumber":829,"author":{"gitId":"-"},"content":"        Set\u003cFeedbackSessionAttributes\u003e newSessionsWithInstructor1Deadlines \u003d fsLogic"},{"lineNumber":830,"author":{"gitId":"-"},"content":"                .getFeedbackSessionsForCourse(courseId)"},{"lineNumber":831,"author":{"gitId":"-"},"content":"                .stream()"},{"lineNumber":832,"author":{"gitId":"-"},"content":"                .filter(feedbackSessionAttributes -\u003e feedbackSessionAttributes.getInstructorDeadlines()"},{"lineNumber":833,"author":{"gitId":"-"},"content":"                        .containsKey(emailAddress))"},{"lineNumber":834,"author":{"gitId":"-"},"content":"                .collect(Collectors.toSet());"},{"lineNumber":835,"author":{"gitId":"-"},"content":"        assertTrue(newSessionsWithInstructor1Deadlines.isEmpty());"},{"lineNumber":836,"author":{"gitId":"-"},"content":"        Map\u003cFeedbackSessionAttributes, Integer\u003e expectedSessionsDeadlineCounts \u003d oldSessionsDeadlineCounts.entrySet()"},{"lineNumber":837,"author":{"gitId":"-"},"content":"                .stream()"},{"lineNumber":838,"author":{"gitId":"-"},"content":"                .collect(Collectors.toMap(Map.Entry::getKey, entry -\u003e entry.getValue() - 1));"},{"lineNumber":839,"author":{"gitId":"-"},"content":"        Map\u003cFeedbackSessionAttributes, Integer\u003e newSessionsDeadlineCounts \u003d fsLogic"},{"lineNumber":840,"author":{"gitId":"-"},"content":"                .getFeedbackSessionsForCourse(courseId)"},{"lineNumber":841,"author":{"gitId":"-"},"content":"                .stream()"},{"lineNumber":842,"author":{"gitId":"-"},"content":"                .filter(oldSessionsWithInstructor1Deadlines::contains)"},{"lineNumber":843,"author":{"gitId":"-"},"content":"                .collect(Collectors.toMap(fsa -\u003e fsa, fsa -\u003e fsa.getInstructorDeadlines().size()));"},{"lineNumber":844,"author":{"gitId":"-"},"content":"        assertEquals(expectedSessionsDeadlineCounts, newSessionsDeadlineCounts);"},{"lineNumber":845,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":846,"author":{"gitId":"-"},"content":""},{"lineNumber":847,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":848,"author":{"gitId":"-"},"content":"    public void testDeleteFeedbackSessionsDeadlinesForStudent() {"},{"lineNumber":849,"author":{"gitId":"-"},"content":"        StudentAttributes student4InCourse1 \u003d dataBundle.students.get(\"student4InCourse1\");"},{"lineNumber":850,"author":{"gitId":"-"},"content":"        verifyPresentInDatabase(student4InCourse1);"},{"lineNumber":851,"author":{"gitId":"-"},"content":""},{"lineNumber":852,"author":{"gitId":"-"},"content":"        String courseId \u003d student4InCourse1.getCourse();"},{"lineNumber":853,"author":{"gitId":"-"},"content":"        String emailAddress \u003d student4InCourse1.getEmail();"},{"lineNumber":854,"author":{"gitId":"-"},"content":""},{"lineNumber":855,"author":{"gitId":"-"},"content":"        ______TS(\"Delete user; deadlines associated with the email are removed.\");"},{"lineNumber":856,"author":{"gitId":"-"},"content":""},{"lineNumber":857,"author":{"gitId":"-"},"content":"        // The student should have selective deadlines."},{"lineNumber":858,"author":{"gitId":"-"},"content":"        Set\u003cFeedbackSessionAttributes\u003e oldSessionsWithStudent4Deadlines \u003d fsLogic"},{"lineNumber":859,"author":{"gitId":"-"},"content":"                .getFeedbackSessionsForCourse(courseId)"},{"lineNumber":860,"author":{"gitId":"-"},"content":"                .stream()"},{"lineNumber":861,"author":{"gitId":"-"},"content":"                .filter(feedbackSessionAttributes -\u003e feedbackSessionAttributes.getStudentDeadlines()"},{"lineNumber":862,"author":{"gitId":"-"},"content":"                        .containsKey(emailAddress))"},{"lineNumber":863,"author":{"gitId":"-"},"content":"                .collect(Collectors.toSet());"},{"lineNumber":864,"author":{"gitId":"-"},"content":"        Map\u003cFeedbackSessionAttributes, Integer\u003e oldSessionsDeadlineCounts \u003d oldSessionsWithStudent4Deadlines"},{"lineNumber":865,"author":{"gitId":"-"},"content":"                .stream()"},{"lineNumber":866,"author":{"gitId":"-"},"content":"                .collect(Collectors.toMap(fsa -\u003e fsa, fsa -\u003e fsa.getStudentDeadlines().size()));"},{"lineNumber":867,"author":{"gitId":"-"},"content":"        assertEquals(2, oldSessionsWithStudent4Deadlines.size());"},{"lineNumber":868,"author":{"gitId":"-"},"content":""},{"lineNumber":869,"author":{"gitId":"-"},"content":"        fsLogic.deleteFeedbackSessionsDeadlinesForStudent(courseId, emailAddress);"},{"lineNumber":870,"author":{"gitId":"-"},"content":""},{"lineNumber":871,"author":{"gitId":"-"},"content":"        // The student should have no more selective deadlines."},{"lineNumber":872,"author":{"gitId":"-"},"content":"        Set\u003cFeedbackSessionAttributes\u003e newSessionsWithStudent4Deadlines \u003d fsLogic"},{"lineNumber":873,"author":{"gitId":"-"},"content":"                .getFeedbackSessionsForCourse(courseId)"},{"lineNumber":874,"author":{"gitId":"-"},"content":"                .stream()"},{"lineNumber":875,"author":{"gitId":"-"},"content":"                .filter(feedbackSessionAttributes -\u003e feedbackSessionAttributes.getStudentDeadlines()"},{"lineNumber":876,"author":{"gitId":"-"},"content":"                        .containsKey(emailAddress))"},{"lineNumber":877,"author":{"gitId":"-"},"content":"                .collect(Collectors.toSet());"},{"lineNumber":878,"author":{"gitId":"-"},"content":"        assertTrue(newSessionsWithStudent4Deadlines.isEmpty());"},{"lineNumber":879,"author":{"gitId":"-"},"content":"        Map\u003cFeedbackSessionAttributes, Integer\u003e expectedSessionsDeadlineCounts \u003d oldSessionsDeadlineCounts.entrySet()"},{"lineNumber":880,"author":{"gitId":"-"},"content":"                .stream()"},{"lineNumber":881,"author":{"gitId":"-"},"content":"                .collect(Collectors.toMap(Map.Entry::getKey, entry -\u003e entry.getValue() - 1));"},{"lineNumber":882,"author":{"gitId":"-"},"content":"        Map\u003cFeedbackSessionAttributes, Integer\u003e newSessionsDeadlineCounts \u003d fsLogic"},{"lineNumber":883,"author":{"gitId":"-"},"content":"                .getFeedbackSessionsForCourse(courseId)"},{"lineNumber":884,"author":{"gitId":"-"},"content":"                .stream()"},{"lineNumber":885,"author":{"gitId":"-"},"content":"                .filter(oldSessionsWithStudent4Deadlines::contains)"},{"lineNumber":886,"author":{"gitId":"-"},"content":"                .collect(Collectors.toMap(fsa -\u003e fsa, fsa -\u003e fsa.getStudentDeadlines().size()));"},{"lineNumber":887,"author":{"gitId":"-"},"content":"        assertEquals(expectedSessionsDeadlineCounts, newSessionsDeadlineCounts);"},{"lineNumber":888,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":889,"author":{"gitId":"-"},"content":""},{"lineNumber":890,"author":{"gitId":"-"},"content":"    private void testPublishUnpublishFeedbackSession() throws Exception {"},{"lineNumber":891,"author":{"gitId":"-"},"content":""},{"lineNumber":892,"author":{"gitId":"-"},"content":"        ______TS(\"success: publish\");"},{"lineNumber":893,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes sessionUnderTest \u003d dataBundle.feedbackSessions.get(\"session1InCourse1\");"},{"lineNumber":894,"author":{"gitId":"-"},"content":""},{"lineNumber":895,"author":{"gitId":"-"},"content":"        // set as manual publish"},{"lineNumber":896,"author":{"gitId":"-"},"content":""},{"lineNumber":897,"author":{"gitId":"-"},"content":"        sessionUnderTest.setResultsVisibleFromTime(Const.TIME_REPRESENTS_LATER);"},{"lineNumber":898,"author":{"gitId":"-"},"content":"        fsLogic.updateFeedbackSession("},{"lineNumber":899,"author":{"gitId":"-"},"content":"                FeedbackSessionAttributes"},{"lineNumber":900,"author":{"gitId":"-"},"content":"                        .updateOptionsBuilder(sessionUnderTest.getFeedbackSessionName(), sessionUnderTest.getCourseId())"},{"lineNumber":901,"author":{"gitId":"-"},"content":"                        .withResultsVisibleFromTime(sessionUnderTest.getResultsVisibleFromTime())"},{"lineNumber":902,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":903,"author":{"gitId":"-"},"content":""},{"lineNumber":904,"author":{"gitId":"-"},"content":"        fsLogic.publishFeedbackSession(sessionUnderTest.getFeedbackSessionName(), sessionUnderTest.getCourseId());"},{"lineNumber":905,"author":{"gitId":"-"},"content":""},{"lineNumber":906,"author":{"gitId":"-"},"content":"        // Set real time of publishing"},{"lineNumber":907,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes sessionPublished \u003d"},{"lineNumber":908,"author":{"gitId":"-"},"content":"                fsLogic.getFeedbackSession(sessionUnderTest.getFeedbackSessionName(), sessionUnderTest.getCourseId());"},{"lineNumber":909,"author":{"gitId":"-"},"content":"        sessionUnderTest.setResultsVisibleFromTime(sessionPublished.getResultsVisibleFromTime());"},{"lineNumber":910,"author":{"gitId":"-"},"content":""},{"lineNumber":911,"author":{"gitId":"-"},"content":"        assertEquals(sessionUnderTest.toString(), sessionPublished.toString());"},{"lineNumber":912,"author":{"gitId":"-"},"content":""},{"lineNumber":913,"author":{"gitId":"-"},"content":"        ______TS(\"failure: already published\");"},{"lineNumber":914,"author":{"gitId":"-"},"content":""},{"lineNumber":915,"author":{"gitId":"-"},"content":"        InvalidParametersException ipe \u003d assertThrows(InvalidParametersException.class,"},{"lineNumber":916,"author":{"gitId":"-"},"content":"                () -\u003e fsLogic.publishFeedbackSession("},{"lineNumber":917,"author":{"gitId":"-"},"content":"                        sessionUnderTest.getFeedbackSessionName(), sessionUnderTest.getCourseId()));"},{"lineNumber":918,"author":{"gitId":"-"},"content":"        assertEquals(\"Error publishing feedback session: Session has already been published.\", ipe.getMessage());"},{"lineNumber":919,"author":{"gitId":"-"},"content":""},{"lineNumber":920,"author":{"gitId":"-"},"content":"        ______TS(\"success: unpublish\");"},{"lineNumber":921,"author":{"gitId":"-"},"content":""},{"lineNumber":922,"author":{"gitId":"-"},"content":"        fsLogic.unpublishFeedbackSession(sessionUnderTest.getFeedbackSessionName(), sessionUnderTest.getCourseId());"},{"lineNumber":923,"author":{"gitId":"-"},"content":""},{"lineNumber":924,"author":{"gitId":"-"},"content":"        sessionUnderTest.setResultsVisibleFromTime(Const.TIME_REPRESENTS_LATER);"},{"lineNumber":925,"author":{"gitId":"-"},"content":""},{"lineNumber":926,"author":{"gitId":"-"},"content":"        assertEquals("},{"lineNumber":927,"author":{"gitId":"-"},"content":"                sessionUnderTest.toString(),"},{"lineNumber":928,"author":{"gitId":"-"},"content":"                fsLogic.getFeedbackSession("},{"lineNumber":929,"author":{"gitId":"-"},"content":"                        sessionUnderTest.getFeedbackSessionName(), sessionUnderTest.getCourseId()).toString());"},{"lineNumber":930,"author":{"gitId":"-"},"content":""},{"lineNumber":931,"author":{"gitId":"-"},"content":"        ______TS(\"failure: not published\");"},{"lineNumber":932,"author":{"gitId":"-"},"content":""},{"lineNumber":933,"author":{"gitId":"-"},"content":"        ipe \u003d assertThrows(InvalidParametersException.class,"},{"lineNumber":934,"author":{"gitId":"-"},"content":"                () -\u003e fsLogic.unpublishFeedbackSession("},{"lineNumber":935,"author":{"gitId":"-"},"content":"                        sessionUnderTest.getFeedbackSessionName(), sessionUnderTest.getCourseId()));"},{"lineNumber":936,"author":{"gitId":"-"},"content":"        assertEquals(\"Error unpublishing feedback session: Session has already been unpublished.\", ipe.getMessage());"},{"lineNumber":937,"author":{"gitId":"-"},"content":""},{"lineNumber":938,"author":{"gitId":"-"},"content":"        ______TS(\"failure: publish/unpublish non-existent session\");"},{"lineNumber":939,"author":{"gitId":"-"},"content":""},{"lineNumber":940,"author":{"gitId":"-"},"content":"        assertNull(fsLogic.getFeedbackSession(\"randomName\", \"randomId\"));"},{"lineNumber":941,"author":{"gitId":"-"},"content":"        EntityDoesNotExistException ednee \u003d assertThrows(EntityDoesNotExistException.class,"},{"lineNumber":942,"author":{"gitId":"-"},"content":"                () -\u003e fsLogic.publishFeedbackSession(\"randomName\", \"randomId\"));"},{"lineNumber":943,"author":{"gitId":"-"},"content":"        assertEquals(\"Trying to update a non-existent feedback session: randomId/randomName\", ednee.getMessage());"},{"lineNumber":944,"author":{"gitId":"-"},"content":""},{"lineNumber":945,"author":{"gitId":"-"},"content":"        ednee \u003d assertThrows(EntityDoesNotExistException.class,"},{"lineNumber":946,"author":{"gitId":"-"},"content":"                () -\u003e fsLogic.unpublishFeedbackSession(\"randomName\", \"randomId\"));"},{"lineNumber":947,"author":{"gitId":"-"},"content":"        assertEquals(\"Trying to update a non-existent feedback session: randomId/randomName\", ednee.getMessage());"},{"lineNumber":948,"author":{"gitId":"-"},"content":""},{"lineNumber":949,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":950,"author":{"gitId":"-"},"content":""},{"lineNumber":951,"author":{"gitId":"-"},"content":"    private void testIsFeedbackSessionAttemptedByInstructor() {"},{"lineNumber":952,"author":{"gitId":"-"},"content":""},{"lineNumber":953,"author":{"gitId":"-"},"content":"        ______TS(\"success: empty session\");"},{"lineNumber":954,"author":{"gitId":"-"},"content":""},{"lineNumber":955,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes fs \u003d dataBundle.feedbackSessions.get(\"empty.session\");"},{"lineNumber":956,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor \u003d dataBundle.instructors.get(\"instructor2OfCourse1\");"},{"lineNumber":957,"author":{"gitId":"-"},"content":""},{"lineNumber":958,"author":{"gitId":"-"},"content":"        assertTrue(fsLogic.isFeedbackSessionAttemptedByInstructor(fs, instructor.getEmail()));"},{"lineNumber":959,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":960,"author":{"gitId":"-"},"content":""},{"lineNumber":961,"author":{"gitId":"-"},"content":"    private void testIsFeedbackSessionAttemptedByStudent() {"},{"lineNumber":962,"author":{"gitId":"-"},"content":""},{"lineNumber":963,"author":{"gitId":"-"},"content":"        ______TS(\"success: empty session\");"},{"lineNumber":964,"author":{"gitId":"-"},"content":""},{"lineNumber":965,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes fs \u003d dataBundle.feedbackSessions.get(\"empty.session\");"},{"lineNumber":966,"author":{"gitId":"-"},"content":"        StudentAttributes student \u003d dataBundle.students.get(\"student2InCourse1\");"},{"lineNumber":967,"author":{"gitId":"-"},"content":""},{"lineNumber":968,"author":{"gitId":"-"},"content":"        assertTrue(fsLogic.isFeedbackSessionAttemptedByStudent(fs, student.getEmail(), student.getTeam()));"},{"lineNumber":969,"author":{"gitId":"-"},"content":""},{"lineNumber":970,"author":{"gitId":"-"},"content":"        ______TS(\"success: grace period session (all team questions)\");"},{"lineNumber":971,"author":{"gitId":"-"},"content":""},{"lineNumber":972,"author":{"gitId":"-"},"content":"        fs \u003d dataBundle.feedbackSessions.get(\"gracePeriodSession\");"},{"lineNumber":973,"author":{"gitId":"-"},"content":"        // student who answered team question"},{"lineNumber":974,"author":{"gitId":"-"},"content":"        student \u003d dataBundle.students.get(\"student4InCourse1\");"},{"lineNumber":975,"author":{"gitId":"-"},"content":"        assertTrue(fsLogic.isFeedbackSessionAttemptedByStudent(fs, student.getEmail(), student.getTeam()));"},{"lineNumber":976,"author":{"gitId":"-"},"content":""},{"lineNumber":977,"author":{"gitId":"-"},"content":"        // student whose teammate answered team question"},{"lineNumber":978,"author":{"gitId":"-"},"content":"        student \u003d dataBundle.students.get(\"student1InCourse1\");"},{"lineNumber":979,"author":{"gitId":"-"},"content":"        assertTrue(fsLogic.isFeedbackSessionAttemptedByStudent(fs, student.getEmail(), student.getTeam()));"},{"lineNumber":980,"author":{"gitId":"-"},"content":""},{"lineNumber":981,"author":{"gitId":"-"},"content":"        // student whose team has not answered team question"},{"lineNumber":982,"author":{"gitId":"-"},"content":"        student \u003d dataBundle.students.get(\"student5InCourse1\");"},{"lineNumber":983,"author":{"gitId":"-"},"content":"        assertFalse(fsLogic.isFeedbackSessionAttemptedByStudent(fs, student.getEmail(), student.getTeam()));"},{"lineNumber":984,"author":{"gitId":"-"},"content":""},{"lineNumber":985,"author":{"gitId":"-"},"content":"        ______TS(\"success: second feedback session (both team and individual questions)\");"},{"lineNumber":986,"author":{"gitId":"-"},"content":""},{"lineNumber":987,"author":{"gitId":"-"},"content":"        fs \u003d dataBundle.feedbackSessions.get(\"session2InCourse1\");"},{"lineNumber":988,"author":{"gitId":"-"},"content":"        // student who did not answer any question"},{"lineNumber":989,"author":{"gitId":"-"},"content":"        student \u003d dataBundle.students.get(\"student5InCourse1\");"},{"lineNumber":990,"author":{"gitId":"-"},"content":"        assertFalse(fsLogic.isFeedbackSessionAttemptedByStudent(fs, student.getEmail(), student.getTeam()));"},{"lineNumber":991,"author":{"gitId":"-"},"content":""},{"lineNumber":992,"author":{"gitId":"-"},"content":"        // student who answered only team question"},{"lineNumber":993,"author":{"gitId":"-"},"content":"        student \u003d dataBundle.students.get(\"student2InCourse1\");"},{"lineNumber":994,"author":{"gitId":"-"},"content":"        assertFalse(fsLogic.isFeedbackSessionAttemptedByStudent(fs, student.getEmail(), student.getTeam()));"},{"lineNumber":995,"author":{"gitId":"-"},"content":""},{"lineNumber":996,"author":{"gitId":"-"},"content":"        // student who answered only individual question"},{"lineNumber":997,"author":{"gitId":"-"},"content":"        student \u003d dataBundle.students.get(\"student6InCourse1\");"},{"lineNumber":998,"author":{"gitId":"-"},"content":"        assertTrue(fsLogic.isFeedbackSessionAttemptedByStudent(fs, student.getEmail(), student.getTeam()));"},{"lineNumber":999,"author":{"gitId":"-"},"content":""},{"lineNumber":1000,"author":{"gitId":"-"},"content":"        // student who answered both team and individual question"},{"lineNumber":1001,"author":{"gitId":"-"},"content":"        student \u003d dataBundle.students.get(\"student4InCourse1\");"},{"lineNumber":1002,"author":{"gitId":"-"},"content":"        assertTrue(fsLogic.isFeedbackSessionAttemptedByStudent(fs, student.getEmail(), student.getTeam()));"},{"lineNumber":1003,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1004,"author":{"gitId":"-"},"content":""},{"lineNumber":1005,"author":{"gitId":"-"},"content":"    private FeedbackSessionAttributes getNewFeedbackSession() {"},{"lineNumber":1006,"author":{"gitId":"-"},"content":"        return FeedbackSessionAttributes.builder(\"fsTest1\", \"testCourse\")"},{"lineNumber":1007,"author":{"gitId":"-"},"content":"                .withCreatorEmail(\"valid@email.tmt\")"},{"lineNumber":1008,"author":{"gitId":"-"},"content":"                .withSessionVisibleFromTime(TimeHelperExtension.getInstantTruncatedDaysOffsetFromNow(2))"},{"lineNumber":1009,"author":{"gitId":"-"},"content":"                .withStartTime(TimeHelperExtension.getInstantTruncatedDaysOffsetFromNow(2))"},{"lineNumber":1010,"author":{"gitId":"-"},"content":"                .withEndTime(TimeHelperExtension.getInstantTruncatedDaysOffsetFromNow(7))"},{"lineNumber":1011,"author":{"gitId":"-"},"content":"                .withResultsVisibleFromTime(TimeHelperExtension.getInstantTruncatedDaysOffsetFromNow(7))"},{"lineNumber":1012,"author":{"gitId":"-"},"content":"                .withGracePeriod(Duration.ofMinutes(5))"},{"lineNumber":1013,"author":{"gitId":"-"},"content":"                .withInstructions(\"Give feedback.\")"},{"lineNumber":1014,"author":{"gitId":"-"},"content":"                .build();"},{"lineNumber":1015,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1016,"author":{"gitId":"-"},"content":""},{"lineNumber":1017,"author":{"gitId":"-"},"content":"    private void unpublishAllSessions() throws Exception {"},{"lineNumber":1018,"author":{"gitId":"-"},"content":"        for (FeedbackSessionAttributes fs : dataBundle.feedbackSessions.values()) {"},{"lineNumber":1019,"author":{"gitId":"-"},"content":"            if (fs.isPublished()) {"},{"lineNumber":1020,"author":{"gitId":"-"},"content":"                fsLogic.unpublishFeedbackSession(fs.getFeedbackSessionName(), fs.getCourseId());"},{"lineNumber":1021,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":1022,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1023,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1024,"author":{"gitId":"-"},"content":""},{"lineNumber":1025,"author":{"gitId":"-"},"content":"    private void testMoveFeedbackSessionToRecycleBin() throws Exception {"},{"lineNumber":1026,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes feedbackSession \u003d dataBundle.feedbackSessions.get(\"session2InCourse3\");"},{"lineNumber":1027,"author":{"gitId":"-"},"content":"        String feedbackSessionName \u003d dataBundle.feedbackSessions.get(\"session2InCourse3\").getFeedbackSessionName();"},{"lineNumber":1028,"author":{"gitId":"-"},"content":"        String courseId \u003d dataBundle.courses.get(\"typicalCourse3\").getId();"},{"lineNumber":1029,"author":{"gitId":"-"},"content":""},{"lineNumber":1030,"author":{"gitId":"-"},"content":"        assertFalse(feedbackSession.isSessionDeleted());"},{"lineNumber":1031,"author":{"gitId":"-"},"content":""},{"lineNumber":1032,"author":{"gitId":"-"},"content":"        Instant deletedTime \u003d fsLogic.moveFeedbackSessionToRecycleBin(feedbackSessionName, courseId);"},{"lineNumber":1033,"author":{"gitId":"-"},"content":"        feedbackSession.setDeletedTime(deletedTime);"},{"lineNumber":1034,"author":{"gitId":"-"},"content":""},{"lineNumber":1035,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes actualFs \u003d fsLogic.getFeedbackSessionFromRecycleBin(feedbackSessionName, courseId);"},{"lineNumber":1036,"author":{"gitId":"-"},"content":"        assertEquals(JsonUtils.toJson(feedbackSession), JsonUtils.toJson(actualFs));"},{"lineNumber":1037,"author":{"gitId":"-"},"content":"        assertTrue(feedbackSession.isSessionDeleted());"},{"lineNumber":1038,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1039,"author":{"gitId":"-"},"content":""},{"lineNumber":1040,"author":{"gitId":"-"},"content":"    private void testRestoreFeedbackSessionFromRecycleBin() throws Exception {"},{"lineNumber":1041,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes feedbackSession \u003d dataBundle.feedbackSessions.get(\"session2InCourse3\");"},{"lineNumber":1042,"author":{"gitId":"-"},"content":"        String feedbackSessionName \u003d dataBundle.feedbackSessions.get(\"session2InCourse3\").getFeedbackSessionName();"},{"lineNumber":1043,"author":{"gitId":"-"},"content":"        String courseId \u003d dataBundle.courses.get(\"typicalCourse3\").getId();"},{"lineNumber":1044,"author":{"gitId":"-"},"content":""},{"lineNumber":1045,"author":{"gitId":"-"},"content":"        assertTrue(feedbackSession.isSessionDeleted());"},{"lineNumber":1046,"author":{"gitId":"-"},"content":""},{"lineNumber":1047,"author":{"gitId":"-"},"content":"        fsLogic.restoreFeedbackSessionFromRecycleBin(feedbackSessionName, courseId);"},{"lineNumber":1048,"author":{"gitId":"-"},"content":"        feedbackSession.setDeletedTime(null);"},{"lineNumber":1049,"author":{"gitId":"-"},"content":""},{"lineNumber":1050,"author":{"gitId":"-"},"content":"        verifyPresentInDatabase(feedbackSession);"},{"lineNumber":1051,"author":{"gitId":"-"},"content":"        assertFalse(feedbackSession.isSessionDeleted());"},{"lineNumber":1052,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1053,"author":{"gitId":"-"},"content":""},{"lineNumber":1054,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"cedricongjh":3,"-":1051}},{"path":"src/test/java/teammates/test/BaseTestCaseWithLocalDatabaseAccess.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.test;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import org.testng.annotations.AfterClass;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import org.testng.annotations.AfterSuite;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import org.testng.annotations.BeforeClass;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import org.testng.annotations.BeforeSuite;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import org.testng.annotations.Test;"},{"lineNumber":8,"author":{"gitId":"-"},"content":""},{"lineNumber":9,"author":{"gitId":"-"},"content":"import com.google.cloud.datastore.DatastoreOptions;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import com.google.cloud.datastore.testing.LocalDatastoreHelper;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import com.googlecode.objectify.ObjectifyFactory;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import com.googlecode.objectify.ObjectifyService;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import com.googlecode.objectify.util.Closeable;"},{"lineNumber":14,"author":{"gitId":"-"},"content":""},{"lineNumber":15,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.DataBundle;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.AccountAttributes;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.AccountRequestAttributes;"},{"lineNumber":18,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.CourseAttributes;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.DeadlineExtensionAttributes;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;"},{"lineNumber":21,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackResponseAttributes;"},{"lineNumber":22,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackResponseCommentAttributes;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackSessionAttributes;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.InstructorAttributes;"},{"lineNumber":25,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.NotificationAttributes;"},{"lineNumber":26,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.StudentAttributes;"},{"lineNumber":27,"author":{"gitId":"-"},"content":"import teammates.logic.api.LogicExtension;"},{"lineNumber":28,"author":{"gitId":"-"},"content":"import teammates.logic.core.LogicStarter;"},{"lineNumber":29,"author":{"gitId":"-"},"content":"import teammates.storage.api.OfyHelper;"},{"lineNumber":30,"author":{"gitId":"-"},"content":"import teammates.storage.search.AccountRequestSearchManager;"},{"lineNumber":31,"author":{"gitId":"-"},"content":"import teammates.storage.search.InstructorSearchManager;"},{"lineNumber":32,"author":{"gitId":"-"},"content":"import teammates.storage.search.SearchManagerFactory;"},{"lineNumber":33,"author":{"gitId":"-"},"content":"import teammates.storage.search.StudentSearchManager;"},{"lineNumber":34,"author":{"gitId":"-"},"content":""},{"lineNumber":35,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":36,"author":{"gitId":"-"},"content":" * Base class for all tests which require access to a locally run database."},{"lineNumber":37,"author":{"gitId":"-"},"content":" *"},{"lineNumber":38,"author":{"gitId":"-"},"content":" * \u003cp\u003eAs all tests are run against a single DB instance and we use shared test data for most tests,"},{"lineNumber":39,"author":{"gitId":"-"},"content":" * the tests need to be run in a single thread to prevent test data contamination across different tests."},{"lineNumber":40,"author":{"gitId":"-"},"content":" */"},{"lineNumber":41,"author":{"gitId":"-"},"content":"@Test(singleThreaded \u003d true)"},{"lineNumber":42,"author":{"gitId":"-"},"content":"public abstract class BaseTestCaseWithLocalDatabaseAccess extends BaseTestCaseWithDatabaseAccess {"},{"lineNumber":43,"author":{"gitId":"-"},"content":"    private static final LocalDatastoreHelper LOCAL_DATASTORE_HELPER \u003d LocalDatastoreHelper.newBuilder()"},{"lineNumber":44,"author":{"gitId":"-"},"content":"            .setConsistency(1.0)"},{"lineNumber":45,"author":{"gitId":"-"},"content":"            .setPort(TestProperties.TEST_LOCALDATASTORE_PORT)"},{"lineNumber":46,"author":{"gitId":"-"},"content":"            .setStoreOnDisk(false)"},{"lineNumber":47,"author":{"gitId":"-"},"content":"            .build();"},{"lineNumber":48,"author":{"gitId":"-"},"content":"    private final LogicExtension logic \u003d new LogicExtension();"},{"lineNumber":49,"author":{"gitId":"-"},"content":"    private Closeable closeable;"},{"lineNumber":50,"author":{"gitId":"-"},"content":""},{"lineNumber":51,"author":{"gitId":"-"},"content":"    @BeforeSuite"},{"lineNumber":52,"author":{"gitId":"-"},"content":"    public void setupDbLayer() throws Exception {"},{"lineNumber":53,"author":{"gitId":"-"},"content":"        LOCAL_DATASTORE_HELPER.start();"},{"lineNumber":54,"author":{"gitId":"-"},"content":"        DatastoreOptions options \u003d LOCAL_DATASTORE_HELPER.getOptions();"},{"lineNumber":55,"author":{"gitId":"-"},"content":"        ObjectifyService.init(new ObjectifyFactory("},{"lineNumber":56,"author":{"gitId":"-"},"content":"                options.getService()"},{"lineNumber":57,"author":{"gitId":"-"},"content":"        ));"},{"lineNumber":58,"author":{"gitId":"-"},"content":"        OfyHelper.registerEntityClasses();"},{"lineNumber":59,"author":{"gitId":"-"},"content":""},{"lineNumber":60,"author":{"gitId":"-"},"content":"        SearchManagerFactory.registerAccountRequestSearchManager("},{"lineNumber":61,"author":{"gitId":"-"},"content":"                new AccountRequestSearchManager(TestProperties.SEARCH_SERVICE_HOST, true));"},{"lineNumber":62,"author":{"gitId":"-"},"content":"        SearchManagerFactory.registerInstructorSearchManager("},{"lineNumber":63,"author":{"gitId":"-"},"content":"                new InstructorSearchManager(TestProperties.SEARCH_SERVICE_HOST, true));"},{"lineNumber":64,"author":{"gitId":"-"},"content":"        SearchManagerFactory.registerStudentSearchManager("},{"lineNumber":65,"author":{"gitId":"-"},"content":"                new StudentSearchManager(TestProperties.SEARCH_SERVICE_HOST, true));"},{"lineNumber":66,"author":{"gitId":"-"},"content":""},{"lineNumber":67,"author":{"gitId":"-"},"content":"        LogicStarter.initializeDependencies();"},{"lineNumber":68,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":69,"author":{"gitId":"-"},"content":""},{"lineNumber":70,"author":{"gitId":"-"},"content":"    @BeforeClass"},{"lineNumber":71,"author":{"gitId":"-"},"content":"    public void setupObjectify() {"},{"lineNumber":72,"author":{"gitId":"-"},"content":"        closeable \u003d ObjectifyService.begin();"},{"lineNumber":73,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":74,"author":{"gitId":"-"},"content":""},{"lineNumber":75,"author":{"gitId":"-"},"content":"    @AfterClass"},{"lineNumber":76,"author":{"gitId":"-"},"content":"    public void tearDownObjectify() {"},{"lineNumber":77,"author":{"gitId":"-"},"content":"        closeable.close();"},{"lineNumber":78,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":79,"author":{"gitId":"-"},"content":""},{"lineNumber":80,"author":{"gitId":"-"},"content":"    @AfterClass"},{"lineNumber":81,"author":{"gitId":"-"},"content":"    public void resetDbLayer() throws Exception {"},{"lineNumber":82,"author":{"gitId":"-"},"content":"        SearchManagerFactory.getAccountRequestSearchManager().resetCollections();"},{"lineNumber":83,"author":{"gitId":"-"},"content":"        SearchManagerFactory.getInstructorSearchManager().resetCollections();"},{"lineNumber":84,"author":{"gitId":"-"},"content":"        SearchManagerFactory.getStudentSearchManager().resetCollections();"},{"lineNumber":85,"author":{"gitId":"-"},"content":""},{"lineNumber":86,"author":{"gitId":"-"},"content":"        LOCAL_DATASTORE_HELPER.reset();"},{"lineNumber":87,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":88,"author":{"gitId":"-"},"content":""},{"lineNumber":89,"author":{"gitId":"-"},"content":"    @AfterSuite"},{"lineNumber":90,"author":{"gitId":"-"},"content":"    public void tearDownLocalDatastoreHelper() throws Exception {"},{"lineNumber":91,"author":{"gitId":"-"},"content":"        LOCAL_DATASTORE_HELPER.stop();"},{"lineNumber":92,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":93,"author":{"gitId":"-"},"content":""},{"lineNumber":94,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":95,"author":{"gitId":"-"},"content":"    protected AccountAttributes getAccount(AccountAttributes account) {"},{"lineNumber":96,"author":{"gitId":"-"},"content":"        return logic.getAccount(account.getGoogleId());"},{"lineNumber":97,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":98,"author":{"gitId":"-"},"content":""},{"lineNumber":99,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":100,"author":{"gitId":"-"},"content":"    protected CourseAttributes getCourse(CourseAttributes course) {"},{"lineNumber":101,"author":{"gitId":"-"},"content":"        return logic.getCourse(course.getId());"},{"lineNumber":102,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":103,"author":{"gitId":"-"},"content":""},{"lineNumber":104,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":105,"author":{"gitId":"-"},"content":"    protected FeedbackQuestionAttributes getFeedbackQuestion(FeedbackQuestionAttributes fq) {"},{"lineNumber":106,"author":{"gitId":"-"},"content":"        return logic.getFeedbackQuestion(fq.getFeedbackSessionName(), fq.getCourseId(), fq.getQuestionNumber());"},{"lineNumber":107,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":108,"author":{"gitId":"-"},"content":""},{"lineNumber":109,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":110,"author":{"gitId":"-"},"content":"    protected FeedbackResponseCommentAttributes getFeedbackResponseComment(FeedbackResponseCommentAttributes frc) {"},{"lineNumber":111,"author":{"gitId":"-"},"content":"        return logic.getFeedbackResponseComment(frc.getFeedbackResponseId(), frc.getCommentGiver(), frc.getCreatedAt());"},{"lineNumber":112,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":113,"author":{"gitId":"-"},"content":""},{"lineNumber":114,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":115,"author":{"gitId":"-"},"content":"    protected FeedbackResponseAttributes getFeedbackResponse(FeedbackResponseAttributes fr) {"},{"lineNumber":116,"author":{"gitId":"-"},"content":"        return logic.getFeedbackResponse(fr.getFeedbackQuestionId(), fr.getGiver(), fr.getRecipient());"},{"lineNumber":117,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":118,"author":{"gitId":"-"},"content":""},{"lineNumber":119,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":120,"author":{"gitId":"-"},"content":"    protected FeedbackSessionAttributes getFeedbackSession(FeedbackSessionAttributes fs) {"},{"lineNumber":121,"author":{"gitId":"-"},"content":"        return logic.getFeedbackSession(fs.getFeedbackSessionName(), fs.getCourseId());"},{"lineNumber":122,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":123,"author":{"gitId":"-"},"content":""},{"lineNumber":124,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":125,"author":{"gitId":"-"},"content":"    protected InstructorAttributes getInstructor(InstructorAttributes instructor) {"},{"lineNumber":126,"author":{"gitId":"-"},"content":"        return instructor.getGoogleId() \u003d\u003d null"},{"lineNumber":127,"author":{"gitId":"-"},"content":"                ? logic.getInstructorForEmail(instructor.getCourseId(), instructor.getEmail())"},{"lineNumber":128,"author":{"gitId":"-"},"content":"                : logic.getInstructorForGoogleId(instructor.getCourseId(), instructor.getGoogleId());"},{"lineNumber":129,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":130,"author":{"gitId":"-"},"content":""},{"lineNumber":131,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":132,"author":{"gitId":"-"},"content":"    protected StudentAttributes getStudent(StudentAttributes student) {"},{"lineNumber":133,"author":{"gitId":"-"},"content":"        return logic.getStudentForEmail(student.getCourse(), student.getEmail());"},{"lineNumber":134,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":135,"author":{"gitId":"-"},"content":""},{"lineNumber":136,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":137,"author":{"gitId":"-"},"content":"    protected AccountRequestAttributes getAccountRequest(AccountRequestAttributes accountRequest) {"},{"lineNumber":138,"author":{"gitId":"-"},"content":"        return logic.getAccountRequest(accountRequest.getEmail(), accountRequest.getInstitute());"},{"lineNumber":139,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":140,"author":{"gitId":"-"},"content":""},{"lineNumber":141,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":142,"author":{"gitId":"-"},"content":"    protected DeadlineExtensionAttributes getDeadlineExtension(DeadlineExtensionAttributes deadlineExtension) {"},{"lineNumber":143,"author":{"gitId":"-"},"content":"        return logic.getDeadlineExtension("},{"lineNumber":144,"author":{"gitId":"-"},"content":"                deadlineExtension.getCourseId(), deadlineExtension.getFeedbackSessionName(),"},{"lineNumber":145,"author":{"gitId":"-"},"content":"                deadlineExtension.getUserEmail(), deadlineExtension.getIsInstructor());"},{"lineNumber":146,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":147,"author":{"gitId":"-"},"content":""},{"lineNumber":148,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":149,"author":{"gitId":"-"},"content":"    protected NotificationAttributes getNotification(NotificationAttributes notification) {"},{"lineNumber":150,"author":{"gitId":"-"},"content":"        return logic.getNotification(notification.getNotificationId());"},{"lineNumber":151,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":152,"author":{"gitId":"-"},"content":""},{"lineNumber":153,"author":{"gitId":"-"},"content":"    protected void removeAndRestoreTypicalDataBundle() {"},{"lineNumber":154,"author":{"gitId":"-"},"content":"        DataBundle dataBundle \u003d getTypicalDataBundle();"},{"lineNumber":155,"author":{"gitId":"-"},"content":"        removeAndRestoreDataBundle(dataBundle);"},{"lineNumber":156,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":157,"author":{"gitId":"-"},"content":""},{"lineNumber":158,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":159,"author":{"gitId":"-"},"content":"    protected boolean doRemoveAndRestoreDataBundle(DataBundle dataBundle) {"},{"lineNumber":160,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":161,"author":{"gitId":"-"},"content":"            logic.removeDataBundle(dataBundle);"},{"lineNumber":162,"author":{"gitId":"-"},"content":"            logic.persistDataBundle(dataBundle);"},{"lineNumber":163,"author":{"gitId":"-"},"content":"            return true;"},{"lineNumber":164,"author":{"gitId":"-"},"content":"        } catch (Exception e) {"},{"lineNumber":165,"author":{"gitId":"-"},"content":"            e.printStackTrace();"},{"lineNumber":166,"author":{"gitId":"-"},"content":"            return false;"},{"lineNumber":167,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":168,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":169,"author":{"gitId":"-"},"content":""},{"lineNumber":170,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":171,"author":{"gitId":"-"},"content":"    protected boolean doPutDocuments(DataBundle dataBundle) {"},{"lineNumber":172,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":173,"author":{"gitId":"-"},"content":"            logic.putDocuments(dataBundle);"},{"lineNumber":174,"author":{"gitId":"-"},"content":"            return true;"},{"lineNumber":175,"author":{"gitId":"-"},"content":"        } catch (Exception e) {"},{"lineNumber":176,"author":{"gitId":"-"},"content":"            e.printStackTrace();"},{"lineNumber":177,"author":{"gitId":"-"},"content":"            return false;"},{"lineNumber":178,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":179,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":180,"author":{"gitId":"-"},"content":""},{"lineNumber":181,"author":{"gitId":"cedricongjh"},"content":"    protected void clearObjectifyCache() {"},{"lineNumber":182,"author":{"gitId":"cedricongjh"},"content":"        ObjectifyService.ofy().clear();"},{"lineNumber":183,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":184,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":185,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"cedricongjh":4,"-":181}},{"path":"src/web/app/components/comment-box/comment-row/comment-row.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003ctm-comment-edit-form *ngIf\u003d\"model.isEditing || mode \u003d\u003d\u003d CommentRowMode.ADD\""},{"lineNumber":2,"author":{"gitId":"-"},"content":"                      [mode]\u003d\"mode\""},{"lineNumber":3,"author":{"gitId":"-"},"content":"                      [model]\u003d\"model.commentEditFormModel\""},{"lineNumber":4,"author":{"gitId":"-"},"content":"                      (modelChange)\u003d\"triggerModelChange(\u0027commentEditFormModel\u0027, $event)\""},{"lineNumber":5,"author":{"gitId":"-"},"content":"                      [isVisibilityOptionEnabled]\u003d\"isVisibilityOptionEnabled\""},{"lineNumber":6,"author":{"gitId":"-"},"content":"                      [isDisabled]\u003d\"isDisabled\""},{"lineNumber":7,"author":{"gitId":"-"},"content":"                      [shouldHideSavingButton]\u003d\"shouldHideSavingButton\""},{"lineNumber":8,"author":{"gitId":"-"},"content":"                      [questionShowResponsesTo]\u003d\"questionShowResponsesTo\""},{"lineNumber":9,"author":{"gitId":"-"},"content":"                      [response]\u003d\"response\""},{"lineNumber":10,"author":{"gitId":"-"},"content":"                      [isFeedbackParticipantComment]\u003d\"isFeedbackParticipantComment\""},{"lineNumber":11,"author":{"gitId":"-"},"content":"                      [shouldHideClosingButton]\u003d\"shouldHideClosingButton\""},{"lineNumber":12,"author":{"gitId":"-"},"content":"                      (closeCommentBoxEvent)\u003d\"triggerCloseEditing()\""},{"lineNumber":13,"author":{"gitId":"-"},"content":"                      (saveCommentEvent)\u003d\"triggerSaveCommentEvent()\"\u003e\u003c/tm-comment-edit-form\u003e"},{"lineNumber":14,"author":{"gitId":"-"},"content":""},{"lineNumber":15,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"card\" *ngIf\u003d\"!model.isEditing \u0026\u0026 mode \u003d\u003d\u003d CommentRowMode.EDIT \u0026\u0026 model.originalComment\"\u003e"},{"lineNumber":16,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"card-body\"\u003e"},{"lineNumber":17,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"row comment-row\"\u003e"},{"lineNumber":18,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"col-12\"\u003e"},{"lineNumber":19,"author":{"gitId":"-"},"content":"        \u003cspan class\u003d\"by-response-giver text-secondary\" *ngIf\u003d\"isFeedbackParticipantComment\"\u003e"},{"lineNumber":20,"author":{"gitId":"-"},"content":"          Comment by response giver."},{"lineNumber":21,"author":{"gitId":"-"},"content":"        \u003c/span\u003e"},{"lineNumber":22,"author":{"gitId":"-"},"content":"        \u003cng-container class\u003d\"text-secondary\" *ngIf\u003d\"!isFeedbackParticipantComment\"\u003e"},{"lineNumber":23,"author":{"gitId":"weiquu"},"content":"          \u003cspan class\u003d\"comment-giver-name\"\u003e{{ model.commentGiverName ? model.commentGiverName : model.originalComment.commentGiver }} commented at \u003c/span\u003e"},{"lineNumber":24,"author":{"gitId":"-"},"content":"          \u003cspan class\u003d\"ngb-tooltip-class\" style\u003d\"margin-right: .25rem;\" [ngbTooltip]\u003d\"model.originalComment.createdAt | formatDateDetail: model.timezone!\"\u003e"},{"lineNumber":25,"author":{"gitId":"-"},"content":"            {{ model.originalComment.createdAt | formatDateBrief: model.timezone! }}\u003c/span\u003e"},{"lineNumber":26,"author":{"gitId":"-"},"content":"          \u003cng-container *ngIf\u003d\"model.originalComment.lastEditedAt \u0026\u0026 model.originalComment.lastEditedAt !\u003d\u003d model.originalComment.createdAt\"\u003e"},{"lineNumber":27,"author":{"gitId":"-"},"content":"            \u003ci class\u003d\"fas fa-circle dot-xs align-middle\" style\u003d\"margin-right: .25rem;\"\u003e\u003c/i\u003e"},{"lineNumber":28,"author":{"gitId":"-"},"content":"            \u003cspan id\u003d\"last-editor-name\" style\u003d\"margin-right: .25rem;\" class\u003d\"ngb-tooltip-class\""},{"lineNumber":29,"author":{"gitId":"-"},"content":"                  [ngbTooltip]\u003d\"model.originalComment.lastEditedAt | formatDateDetail: model.timezone!\"\u003eedited by {{ model.lastEditorName ? model.lastEditorName : model.originalComment.lastEditorEmail }}\u003c/span\u003e"},{"lineNumber":30,"author":{"gitId":"-"},"content":"          \u003c/ng-container\u003e"},{"lineNumber":31,"author":{"gitId":"-"},"content":"        \u003c/ng-container\u003e"},{"lineNumber":32,"author":{"gitId":"-"},"content":""},{"lineNumber":33,"author":{"gitId":"-"},"content":"        \u003ci class\u003d\"fa fa-eye\" aria-hidden\u003d\"true\" ngbTooltip\u003d\"This response comment is visible to {{ visibilityStateMachine.getVisibilityTypesUnderVisibilityControl(CommentVisibilityControl.SHOW_COMMENT) | commentVisibilityTypesJointName }}\"\u003e\u003c/i\u003e"},{"lineNumber":34,"author":{"gitId":"-"},"content":""},{"lineNumber":35,"author":{"gitId":"-"},"content":"        \u003cdiv class\u003d\"float-end\"\u003e"},{"lineNumber":36,"author":{"gitId":"-"},"content":"          \u003cbutton type\u003d\"button\" class\u003d\"btn-edit-comment btn btn-outline-primary btn-sm\" *ngIf\u003d\"!shouldHideEditButton\" ngbTooltip\u003d\u0027Edit this comment\u0027"},{"lineNumber":37,"author":{"gitId":"-"},"content":"                  (click)\u003d\"triggerModelChange(\u0027isEditing\u0027, true)\" [disabled]\u003d\"isDisabled\"\u003e\u003ci class\u003d\"fas fa-pencil-alt\"\u003e\u003c/i\u003e\u003c/button\u003e"},{"lineNumber":38,"author":{"gitId":"-"},"content":"          \u003cbutton type\u003d\"button\" class\u003d\"btn-delete-comment btn btn-outline-primary btn-sm btn-margin-left\" *ngIf\u003d\"!shouldHideDeleteButton\" ngbTooltip\u003d\u0027Delete this comment\u0027"},{"lineNumber":39,"author":{"gitId":"-"},"content":"                  (click)\u003d\"triggerDeleteCommentEvent()\" [disabled]\u003d\"isDisabled\"\u003e\u003ci class\u003d\"fas fa-trash\"\u003e\u003c/i\u003e\u003c/button\u003e"},{"lineNumber":40,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":41,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":42,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"comment-text col-12\" [innerHTML]\u003d\"model.originalComment.commentText | safeHtml\"\u003e\u003c/div\u003e"},{"lineNumber":43,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":44,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":45,"author":{"gitId":"-"},"content":"\u003c/div\u003e"}],"authorContributionMap":{"weiquu":1,"-":44}},{"path":"src/web/app/components/comment-box/comment-visibility-setting.pipe.spec.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"cedricongjh"},"content":"import { CommentVisibilityType } from \u0027../../../types/api-output\u0027;"},{"lineNumber":2,"author":{"gitId":"cedricongjh"},"content":"import { CommentVisibilityControl } from \u0027../../../types/comment-visibility-control\u0027;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":4,"author":{"gitId":"-"},"content":"  CommentVisibilityControlNamePipe,"},{"lineNumber":5,"author":{"gitId":"-"},"content":"  CommentVisibilityTypeDescriptionPipe, CommentVisibilityTypeNamePipe, CommentVisibilityTypesJointNamePipe,"},{"lineNumber":6,"author":{"gitId":"-"},"content":"} from \u0027./comment-visibility-setting.pipe\u0027;"},{"lineNumber":7,"author":{"gitId":"-"},"content":""},{"lineNumber":8,"author":{"gitId":"-"},"content":"describe(\u0027CommentVisibilityControlNamePipe\u0027, () \u003d\u003e {"},{"lineNumber":9,"author":{"gitId":"-"},"content":"  it(\u0027create an instance\u0027, () \u003d\u003e {"},{"lineNumber":10,"author":{"gitId":"-"},"content":"    const pipe: CommentVisibilityControlNamePipe \u003d new CommentVisibilityControlNamePipe();"},{"lineNumber":11,"author":{"gitId":"-"},"content":"    expect(pipe).toBeTruthy();"},{"lineNumber":12,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":13,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":14,"author":{"gitId":"cedricongjh"},"content":"  it(\u0027should return appropriate display strings given a CommentVisibilityControl\u0027, () \u003d\u003e {"},{"lineNumber":15,"author":{"gitId":"cedricongjh"},"content":"    const pipe: CommentVisibilityControlNamePipe \u003d new CommentVisibilityControlNamePipe();"},{"lineNumber":16,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":17,"author":{"gitId":"cedricongjh"},"content":"    expect(pipe.transform(CommentVisibilityControl.SHOW_COMMENT)).toBe(\u0027Can see this comment\u0027);"},{"lineNumber":18,"author":{"gitId":"cedricongjh"},"content":"    expect(pipe.transform(CommentVisibilityControl.SHOW_GIVER_NAME)).toBe(\"Can see comment giver\u0027s name\");"},{"lineNumber":19,"author":{"gitId":"cedricongjh"},"content":"    expect(pipe.transform(\u0027INVALID_VALUE\u0027 as CommentVisibilityControl)).toBe(\u0027Unknown\u0027);"},{"lineNumber":20,"author":{"gitId":"cedricongjh"},"content":"  });"},{"lineNumber":21,"author":{"gitId":"-"},"content":"});"},{"lineNumber":22,"author":{"gitId":"-"},"content":""},{"lineNumber":23,"author":{"gitId":"-"},"content":"describe(\u0027CommentVisibilityTypeDescriptionPipe\u0027, () \u003d\u003e {"},{"lineNumber":24,"author":{"gitId":"-"},"content":"  it(\u0027create an instance\u0027, () \u003d\u003e {"},{"lineNumber":25,"author":{"gitId":"-"},"content":"    const pipe: CommentVisibilityTypeDescriptionPipe \u003d new CommentVisibilityTypeDescriptionPipe();"},{"lineNumber":26,"author":{"gitId":"-"},"content":"    expect(pipe).toBeTruthy();"},{"lineNumber":27,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":28,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":29,"author":{"gitId":"cedricongjh"},"content":"  it(\u0027should return appropriate display strings given a CommentVisibilityType\u0027, () \u003d\u003e {"},{"lineNumber":30,"author":{"gitId":"cedricongjh"},"content":"    const pipe: CommentVisibilityTypeDescriptionPipe \u003d new CommentVisibilityTypeDescriptionPipe();"},{"lineNumber":31,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":32,"author":{"gitId":"cedricongjh"},"content":"    expect(pipe.transform(CommentVisibilityType.GIVER)).toBe(\u0027Control what response giver(s) can view\u0027);"},{"lineNumber":33,"author":{"gitId":"cedricongjh"},"content":"    expect(pipe.transform(CommentVisibilityType.RECIPIENT)).toBe(\u0027Control what response recipient(s) can view\u0027);"},{"lineNumber":34,"author":{"gitId":"cedricongjh"},"content":"    expect(pipe.transform(CommentVisibilityType.INSTRUCTORS)).toBe(\u0027Control what instructors can view\u0027);"},{"lineNumber":35,"author":{"gitId":"cedricongjh"},"content":"    expect(pipe.transform(CommentVisibilityType.GIVER_TEAM_MEMBERS))"},{"lineNumber":36,"author":{"gitId":"cedricongjh"},"content":"      .toBe(\u0027Control what team members of response giver can view\u0027);"},{"lineNumber":37,"author":{"gitId":"cedricongjh"},"content":"    expect(pipe.transform(CommentVisibilityType.RECIPIENT_TEAM_MEMBERS))"},{"lineNumber":38,"author":{"gitId":"cedricongjh"},"content":"      .toBe(\u0027Control what team members of response recipient(s) can view\u0027);"},{"lineNumber":39,"author":{"gitId":"cedricongjh"},"content":"    expect(pipe.transform(CommentVisibilityType.STUDENTS))"},{"lineNumber":40,"author":{"gitId":"cedricongjh"},"content":"      .toBe(\u0027Control what other students in this course can view\u0027);"},{"lineNumber":41,"author":{"gitId":"cedricongjh"},"content":"    expect(pipe.transform(\u0027INVALID_VALUE\u0027 as CommentVisibilityType)).toBe(\u0027Unknown\u0027);"},{"lineNumber":42,"author":{"gitId":"cedricongjh"},"content":"  });"},{"lineNumber":43,"author":{"gitId":"-"},"content":"});"},{"lineNumber":44,"author":{"gitId":"-"},"content":""},{"lineNumber":45,"author":{"gitId":"-"},"content":"describe(\u0027CommentVisibilityTypeNamePipe\u0027, () \u003d\u003e {"},{"lineNumber":46,"author":{"gitId":"-"},"content":"  it(\u0027create an instance\u0027, () \u003d\u003e {"},{"lineNumber":47,"author":{"gitId":"-"},"content":"    const pipe: CommentVisibilityTypeNamePipe \u003d new CommentVisibilityTypeNamePipe();"},{"lineNumber":48,"author":{"gitId":"-"},"content":"    expect(pipe).toBeTruthy();"},{"lineNumber":49,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":50,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":51,"author":{"gitId":"cedricongjh"},"content":"  it(\u0027should return appropriate display strings given a CommentVisibilityType\u0027, () \u003d\u003e {"},{"lineNumber":52,"author":{"gitId":"cedricongjh"},"content":"    const pipe: CommentVisibilityTypeNamePipe \u003d new CommentVisibilityTypeNamePipe();"},{"lineNumber":53,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":54,"author":{"gitId":"cedricongjh"},"content":"    expect(pipe.transform(CommentVisibilityType.GIVER)).toBe(\u0027Response Giver(s)\u0027);"},{"lineNumber":55,"author":{"gitId":"cedricongjh"},"content":"    expect(pipe.transform(CommentVisibilityType.RECIPIENT)).toBe(\u0027Response Recipient(s)\u0027);"},{"lineNumber":56,"author":{"gitId":"cedricongjh"},"content":"    expect(pipe.transform(CommentVisibilityType.INSTRUCTORS)).toBe(\u0027Instructors\u0027);"},{"lineNumber":57,"author":{"gitId":"cedricongjh"},"content":"    expect(pipe.transform(CommentVisibilityType.GIVER_TEAM_MEMBERS)).toBe(\"Response Giver\u0027s Team Members\");"},{"lineNumber":58,"author":{"gitId":"cedricongjh"},"content":"    expect(pipe.transform(CommentVisibilityType.RECIPIENT_TEAM_MEMBERS)).toBe(\"Response Recipient\u0027s Team Members\");"},{"lineNumber":59,"author":{"gitId":"cedricongjh"},"content":"    expect(pipe.transform(CommentVisibilityType.STUDENTS)).toBe(\u0027Other students in this course\u0027);"},{"lineNumber":60,"author":{"gitId":"cedricongjh"},"content":"    expect(pipe.transform(\u0027INVALID_VALUE\u0027 as CommentVisibilityType)).toBe(\u0027Unknown\u0027);"},{"lineNumber":61,"author":{"gitId":"cedricongjh"},"content":"  });"},{"lineNumber":62,"author":{"gitId":"-"},"content":"});"},{"lineNumber":63,"author":{"gitId":"-"},"content":""},{"lineNumber":64,"author":{"gitId":"-"},"content":"describe(\u0027CommentVisibilityTypesJointNamePipe\u0027, () \u003d\u003e {"},{"lineNumber":65,"author":{"gitId":"-"},"content":"  it(\u0027create an instance\u0027, () \u003d\u003e {"},{"lineNumber":66,"author":{"gitId":"-"},"content":"    const pipe: CommentVisibilityTypesJointNamePipe \u003d new CommentVisibilityTypesJointNamePipe();"},{"lineNumber":67,"author":{"gitId":"-"},"content":"    expect(pipe).toBeTruthy();"},{"lineNumber":68,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":69,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":70,"author":{"gitId":"cedricongjh"},"content":"  it(\u0027should handle an empty array\u0027, () \u003d\u003e {"},{"lineNumber":71,"author":{"gitId":"cedricongjh"},"content":"    const pipe: CommentVisibilityTypesJointNamePipe \u003d new CommentVisibilityTypesJointNamePipe();"},{"lineNumber":72,"author":{"gitId":"cedricongjh"},"content":"    expect(pipe.transform([])).toBe(\u0027nobody\u0027);"},{"lineNumber":73,"author":{"gitId":"cedricongjh"},"content":"  });"},{"lineNumber":74,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":75,"author":{"gitId":"cedricongjh"},"content":"  it(\u0027should output the correct string when given an array of 1 CommentVisibilityTypes\u0027, () \u003d\u003e {"},{"lineNumber":76,"author":{"gitId":"cedricongjh"},"content":"    const pipe: CommentVisibilityTypesJointNamePipe \u003d new CommentVisibilityTypesJointNamePipe();"},{"lineNumber":77,"author":{"gitId":"cedricongjh"},"content":"    expect(pipe.transform([CommentVisibilityType.GIVER])).toBe(\u0027response giver(s)\u0027);"},{"lineNumber":78,"author":{"gitId":"cedricongjh"},"content":"  });"},{"lineNumber":79,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":80,"author":{"gitId":"cedricongjh"},"content":"  it(\u0027should output the correct string when given an array of CommentVisibilityTypes\u0027, () \u003d\u003e {"},{"lineNumber":81,"author":{"gitId":"cedricongjh"},"content":"    const pipe: CommentVisibilityTypesJointNamePipe \u003d new CommentVisibilityTypesJointNamePipe();"},{"lineNumber":82,"author":{"gitId":"cedricongjh"},"content":"    expect(pipe"},{"lineNumber":83,"author":{"gitId":"cedricongjh"},"content":"      .transform([CommentVisibilityType.GIVER,"},{"lineNumber":84,"author":{"gitId":"cedricongjh"},"content":"        CommentVisibilityType.INSTRUCTORS, CommentVisibilityType.STUDENTS]))"},{"lineNumber":85,"author":{"gitId":"cedricongjh"},"content":"      .toBe(\u0027response giver(s), and instructors, and other students in this course\u0027);"},{"lineNumber":86,"author":{"gitId":"cedricongjh"},"content":"  });"},{"lineNumber":87,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":88,"author":{"gitId":"cedricongjh"},"content":"  it(\u0027should output a string when given an array of CommentVisibilityTypes and an invalid value\u0027, () \u003d\u003e {"},{"lineNumber":89,"author":{"gitId":"cedricongjh"},"content":"    const pipe: CommentVisibilityTypesJointNamePipe \u003d new CommentVisibilityTypesJointNamePipe();"},{"lineNumber":90,"author":{"gitId":"cedricongjh"},"content":"    expect(pipe"},{"lineNumber":91,"author":{"gitId":"cedricongjh"},"content":"      .transform([\u0027INVALID_VALUE\u0027 as CommentVisibilityType,"},{"lineNumber":92,"author":{"gitId":"cedricongjh"},"content":"        CommentVisibilityType.INSTRUCTORS, CommentVisibilityType.STUDENTS]))"},{"lineNumber":93,"author":{"gitId":"cedricongjh"},"content":"      .toBe(\u0027unknown, and instructors, and other students in this course\u0027);"},{"lineNumber":94,"author":{"gitId":"cedricongjh"},"content":"  });"},{"lineNumber":95,"author":{"gitId":"-"},"content":"});"}],"authorContributionMap":{"cedricongjh":63,"-":32}},{"path":"src/web/app/components/copy-course-modal/copy-course-modal.component.spec.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { HttpClientTestingModule } from \u0027@angular/common/http/testing\u0027;"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import { ComponentFixture, TestBed, waitForAsync } from \u0027@angular/core/testing\u0027;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"import { FormsModule } from \u0027@angular/forms\u0027;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import { By } from \u0027@angular/platform-browser\u0027;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import { NgbActiveModal } from \u0027@ng-bootstrap/ng-bootstrap\u0027;"},{"lineNumber":6,"author":{"gitId":"cedricongjh"},"content":"import SpyInstance \u003d jest.SpyInstance;"},{"lineNumber":7,"author":{"gitId":"cedricongjh"},"content":"import { StatusMessageService } from \u0027../../../services/status-message.service\u0027;"},{"lineNumber":8,"author":{"gitId":"cedricongjh"},"content":"import { TimezoneService } from \u0027../../../services/timezone.service\u0027;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":10,"author":{"gitId":"cedricongjh"},"content":"  Course,"},{"lineNumber":11,"author":{"gitId":"-"},"content":"  FeedbackSession,"},{"lineNumber":12,"author":{"gitId":"-"},"content":"  FeedbackSessionPublishStatus,"},{"lineNumber":13,"author":{"gitId":"-"},"content":"  FeedbackSessionSubmissionStatus,"},{"lineNumber":14,"author":{"gitId":"-"},"content":"  ResponseVisibleSetting,"},{"lineNumber":15,"author":{"gitId":"-"},"content":"  SessionVisibleSetting,"},{"lineNumber":16,"author":{"gitId":"-"},"content":"} from \u0027../../../types/api-output\u0027;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"import { CopyCourseModalComponent } from \u0027./copy-course-modal.component\u0027;"},{"lineNumber":18,"author":{"gitId":"-"},"content":""},{"lineNumber":19,"author":{"gitId":"-"},"content":"describe(\u0027CopyCourseModalComponent\u0027, () \u003d\u003e {"},{"lineNumber":20,"author":{"gitId":"-"},"content":"  let component: CopyCourseModalComponent;"},{"lineNumber":21,"author":{"gitId":"cedricongjh"},"content":"  let ngbActiveModal: NgbActiveModal;"},{"lineNumber":22,"author":{"gitId":"cedricongjh"},"content":"  let timezoneService: TimezoneService;"},{"lineNumber":23,"author":{"gitId":"cedricongjh"},"content":"  let statusMessageService: StatusMessageService;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"  let fixture: ComponentFixture\u003cCopyCourseModalComponent\u003e;"},{"lineNumber":25,"author":{"gitId":"-"},"content":""},{"lineNumber":26,"author":{"gitId":"-"},"content":"  beforeEach(waitForAsync(() \u003d\u003e {"},{"lineNumber":27,"author":{"gitId":"-"},"content":"    TestBed.configureTestingModule({"},{"lineNumber":28,"author":{"gitId":"-"},"content":"      declarations: [CopyCourseModalComponent],"},{"lineNumber":29,"author":{"gitId":"-"},"content":"      imports: ["},{"lineNumber":30,"author":{"gitId":"-"},"content":"        HttpClientTestingModule,"},{"lineNumber":31,"author":{"gitId":"-"},"content":"        FormsModule,"},{"lineNumber":32,"author":{"gitId":"-"},"content":"      ],"},{"lineNumber":33,"author":{"gitId":"cedricongjh"},"content":"      providers: [NgbActiveModal, TimezoneService, StatusMessageService],"},{"lineNumber":34,"author":{"gitId":"-"},"content":"    })"},{"lineNumber":35,"author":{"gitId":"-"},"content":"    .compileComponents();"},{"lineNumber":36,"author":{"gitId":"-"},"content":"  }));"},{"lineNumber":37,"author":{"gitId":"-"},"content":""},{"lineNumber":38,"author":{"gitId":"-"},"content":"  beforeEach(() \u003d\u003e {"},{"lineNumber":39,"author":{"gitId":"-"},"content":"    fixture \u003d TestBed.createComponent(CopyCourseModalComponent);"},{"lineNumber":40,"author":{"gitId":"cedricongjh"},"content":"    timezoneService \u003d TestBed.inject(TimezoneService);"},{"lineNumber":41,"author":{"gitId":"cedricongjh"},"content":"    statusMessageService \u003d TestBed.inject(StatusMessageService);"},{"lineNumber":42,"author":{"gitId":"cedricongjh"},"content":"    ngbActiveModal \u003d TestBed.inject(NgbActiveModal);"},{"lineNumber":43,"author":{"gitId":"-"},"content":"    component \u003d fixture.componentInstance;"},{"lineNumber":44,"author":{"gitId":"-"},"content":"    fixture.detectChanges();"},{"lineNumber":45,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":46,"author":{"gitId":"-"},"content":""},{"lineNumber":47,"author":{"gitId":"-"},"content":"  it(\u0027should create\u0027, () \u003d\u003e {"},{"lineNumber":48,"author":{"gitId":"-"},"content":"    expect(component).toBeTruthy();"},{"lineNumber":49,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":50,"author":{"gitId":"-"},"content":""},{"lineNumber":51,"author":{"gitId":"-"},"content":"  it(\u0027should snap with default fields\u0027, () \u003d\u003e {"},{"lineNumber":52,"author":{"gitId":"-"},"content":"    component.timezones \u003d [{"},{"lineNumber":53,"author":{"gitId":"-"},"content":"      id: \u0027Asia/Singapore\u0027,"},{"lineNumber":54,"author":{"gitId":"-"},"content":"      offset: \u0027UTC +08:00\u0027,"},{"lineNumber":55,"author":{"gitId":"-"},"content":"    }, {"},{"lineNumber":56,"author":{"gitId":"-"},"content":"      id: \u0027UTC\u0027,"},{"lineNumber":57,"author":{"gitId":"-"},"content":"      offset: \u0027UTC\u0027,"},{"lineNumber":58,"author":{"gitId":"-"},"content":"    }];"},{"lineNumber":59,"author":{"gitId":"-"},"content":"    fixture.detectChanges();"},{"lineNumber":60,"author":{"gitId":"-"},"content":"    expect(fixture).toMatchSnapshot();"},{"lineNumber":61,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":62,"author":{"gitId":"-"},"content":""},{"lineNumber":63,"author":{"gitId":"-"},"content":"  it(\u0027should snap with some course id\u0027, () \u003d\u003e {"},{"lineNumber":64,"author":{"gitId":"-"},"content":"    component.timezones \u003d [{"},{"lineNumber":65,"author":{"gitId":"-"},"content":"      id: \u0027Asia/Singapore\u0027,"},{"lineNumber":66,"author":{"gitId":"-"},"content":"      offset: \u0027UTC +08:00\u0027,"},{"lineNumber":67,"author":{"gitId":"-"},"content":"    }, {"},{"lineNumber":68,"author":{"gitId":"-"},"content":"      id: \u0027UTC\u0027,"},{"lineNumber":69,"author":{"gitId":"-"},"content":"      offset: \u0027UTC\u0027,"},{"lineNumber":70,"author":{"gitId":"-"},"content":"    }];"},{"lineNumber":71,"author":{"gitId":"-"},"content":"    component.newCourseId \u003d \u0027Test02\u0027;"},{"lineNumber":72,"author":{"gitId":"-"},"content":"    fixture.detectChanges();"},{"lineNumber":73,"author":{"gitId":"-"},"content":"    expect(fixture).toMatchSnapshot();"},{"lineNumber":74,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":75,"author":{"gitId":"-"},"content":""},{"lineNumber":76,"author":{"gitId":"-"},"content":"  it(\u0027should snap when copying from other sessions\u0027, () \u003d\u003e {"},{"lineNumber":77,"author":{"gitId":"-"},"content":"    component.timezones \u003d [{"},{"lineNumber":78,"author":{"gitId":"-"},"content":"      id: \u0027Asia/Singapore\u0027,"},{"lineNumber":79,"author":{"gitId":"-"},"content":"      offset: \u0027UTC +08:00\u0027,"},{"lineNumber":80,"author":{"gitId":"-"},"content":"    }, {"},{"lineNumber":81,"author":{"gitId":"-"},"content":"      id: \u0027UTC\u0027,"},{"lineNumber":82,"author":{"gitId":"-"},"content":"      offset: \u0027UTC\u0027,"},{"lineNumber":83,"author":{"gitId":"-"},"content":"    }];"},{"lineNumber":84,"author":{"gitId":"-"},"content":"    component.isCopyFromOtherSession \u003d true;"},{"lineNumber":85,"author":{"gitId":"-"},"content":"    fixture.detectChanges();"},{"lineNumber":86,"author":{"gitId":"-"},"content":"    expect(fixture).toMatchSnapshot();"},{"lineNumber":87,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":88,"author":{"gitId":"-"},"content":""},{"lineNumber":89,"author":{"gitId":"-"},"content":"  it(\u0027should enable copy button after new courseId is provided\u0027, () \u003d\u003e {"},{"lineNumber":90,"author":{"gitId":"-"},"content":"    component.newCourseId \u003d \u0027Test02\u0027;"},{"lineNumber":91,"author":{"gitId":"-"},"content":"    component.newCourseName \u003d \u0027TestName02\u0027;"},{"lineNumber":92,"author":{"gitId":"-"},"content":"    component.newCourseInstitute \u003d \u0027Test institute\u0027;"},{"lineNumber":93,"author":{"gitId":"-"},"content":"    fixture.detectChanges();"},{"lineNumber":94,"author":{"gitId":"-"},"content":"    const copyButton: any \u003d fixture.debugElement.query(By.css(\u0027#btn-confirm-copy-course\u0027));"},{"lineNumber":95,"author":{"gitId":"-"},"content":"    expect(copyButton.nativeElement.disabled).toBeFalsy();"},{"lineNumber":96,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":97,"author":{"gitId":"-"},"content":""},{"lineNumber":98,"author":{"gitId":"-"},"content":"  it(\u0027should disable copy if courseId is empty\u0027, () \u003d\u003e {"},{"lineNumber":99,"author":{"gitId":"-"},"content":"    component.newCourseId \u003d \u0027\u0027;"},{"lineNumber":100,"author":{"gitId":"-"},"content":"    component.newCourseName \u003d \u0027TestName02\u0027;"},{"lineNumber":101,"author":{"gitId":"-"},"content":"    fixture.detectChanges();"},{"lineNumber":102,"author":{"gitId":"-"},"content":"    const copyButton: any \u003d fixture.debugElement.query(By.css(\u0027#btn-confirm-copy-course\u0027));"},{"lineNumber":103,"author":{"gitId":"-"},"content":"    expect(copyButton.nativeElement.disabled).toBeTruthy();"},{"lineNumber":104,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":105,"author":{"gitId":"-"},"content":""},{"lineNumber":106,"author":{"gitId":"-"},"content":"  it(\u0027should toggle selection\u0027, () \u003d\u003e {"},{"lineNumber":107,"author":{"gitId":"-"},"content":"    const testFeedbackSession: FeedbackSession \u003d {"},{"lineNumber":108,"author":{"gitId":"-"},"content":"      courseId: \u0027testId\u0027,"},{"lineNumber":109,"author":{"gitId":"-"},"content":"      timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":110,"author":{"gitId":"-"},"content":"      feedbackSessionName: \u0027Test Session\u0027,"},{"lineNumber":111,"author":{"gitId":"-"},"content":"      instructions: \u0027Instructions\u0027,"},{"lineNumber":112,"author":{"gitId":"-"},"content":"      submissionStartTimestamp: 1000000000000,"},{"lineNumber":113,"author":{"gitId":"-"},"content":"      submissionEndTimestamp: 1500000000000,"},{"lineNumber":114,"author":{"gitId":"-"},"content":"      gracePeriod: 0,"},{"lineNumber":115,"author":{"gitId":"-"},"content":"      sessionVisibleSetting: SessionVisibleSetting.AT_OPEN,"},{"lineNumber":116,"author":{"gitId":"-"},"content":"      responseVisibleSetting: ResponseVisibleSetting.AT_VISIBLE,"},{"lineNumber":117,"author":{"gitId":"-"},"content":"      submissionStatus: FeedbackSessionSubmissionStatus.OPEN,"},{"lineNumber":118,"author":{"gitId":"-"},"content":"      publishStatus: FeedbackSessionPublishStatus.PUBLISHED,"},{"lineNumber":119,"author":{"gitId":"-"},"content":"      isClosingEmailEnabled: true,"},{"lineNumber":120,"author":{"gitId":"-"},"content":"      isPublishedEmailEnabled: true,"},{"lineNumber":121,"author":{"gitId":"-"},"content":"      createdAtTimestamp: 0,"},{"lineNumber":122,"author":{"gitId":"-"},"content":"      studentDeadlines: {},"},{"lineNumber":123,"author":{"gitId":"-"},"content":"      instructorDeadlines: {},"},{"lineNumber":124,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":125,"author":{"gitId":"-"},"content":"    component.selectedFeedbackSessions.add(testFeedbackSession);"},{"lineNumber":126,"author":{"gitId":"-"},"content":"    fixture.detectChanges();"},{"lineNumber":127,"author":{"gitId":"-"},"content":"    component.toggleSelection(testFeedbackSession);"},{"lineNumber":128,"author":{"gitId":"-"},"content":"    expect(component.selectedFeedbackSessions.has(testFeedbackSession)).toEqual(false);"},{"lineNumber":129,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":130,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":131,"author":{"gitId":"cedricongjh"},"content":"  it(\u0027should set newCourseInstitute if institutes array is not empty\u0027, () \u003d\u003e {"},{"lineNumber":132,"author":{"gitId":"cedricongjh"},"content":"    const testCourses: Course[] \u003d ["},{"lineNumber":133,"author":{"gitId":"cedricongjh"},"content":"      {"},{"lineNumber":134,"author":{"gitId":"cedricongjh"},"content":"        courseId: \u0027testId1\u0027,"},{"lineNumber":135,"author":{"gitId":"cedricongjh"},"content":"        courseName: \u0027testCourse1\u0027,"},{"lineNumber":136,"author":{"gitId":"cedricongjh"},"content":"        timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":137,"author":{"gitId":"cedricongjh"},"content":"        institute: \u0027Institute 1\u0027,"},{"lineNumber":138,"author":{"gitId":"cedricongjh"},"content":"        creationTimestamp: 1000000000000,"},{"lineNumber":139,"author":{"gitId":"cedricongjh"},"content":"        deletionTimestamp: 1500000000000,"},{"lineNumber":140,"author":{"gitId":"cedricongjh"},"content":"      },"},{"lineNumber":141,"author":{"gitId":"cedricongjh"},"content":"      {"},{"lineNumber":142,"author":{"gitId":"cedricongjh"},"content":"        courseId: \u0027testId2\u0027,"},{"lineNumber":143,"author":{"gitId":"cedricongjh"},"content":"        courseName: \u0027testCourse2\u0027,"},{"lineNumber":144,"author":{"gitId":"cedricongjh"},"content":"        timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":145,"author":{"gitId":"cedricongjh"},"content":"        institute: \u0027Institute 2\u0027,"},{"lineNumber":146,"author":{"gitId":"cedricongjh"},"content":"        creationTimestamp: 1000000000000,"},{"lineNumber":147,"author":{"gitId":"cedricongjh"},"content":"        deletionTimestamp: 1500000000000,"},{"lineNumber":148,"author":{"gitId":"cedricongjh"},"content":"      },"},{"lineNumber":149,"author":{"gitId":"cedricongjh"},"content":"    ];"},{"lineNumber":150,"author":{"gitId":"cedricongjh"},"content":"    component.allCourses \u003d testCourses;"},{"lineNumber":151,"author":{"gitId":"cedricongjh"},"content":"    component.ngOnInit();"},{"lineNumber":152,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":153,"author":{"gitId":"cedricongjh"},"content":"    expect(component.newCourseInstitute).toBe(\u0027Institute 1\u0027);"},{"lineNumber":154,"author":{"gitId":"cedricongjh"},"content":"  });"},{"lineNumber":155,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":156,"author":{"gitId":"cedricongjh"},"content":"  it(\u0027should set the timezones property correctly\u0027, () \u003d\u003e {"},{"lineNumber":157,"author":{"gitId":"cedricongjh"},"content":"    const mockTzOffsets \u003d {"},{"lineNumber":158,"author":{"gitId":"cedricongjh"},"content":"      Tz1: 120, // UTC+02:00"},{"lineNumber":159,"author":{"gitId":"cedricongjh"},"content":"      Tz2: -180, // UTC-03:00"},{"lineNumber":160,"author":{"gitId":"cedricongjh"},"content":"      Tz3: 0,"},{"lineNumber":161,"author":{"gitId":"cedricongjh"},"content":"    };"},{"lineNumber":162,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":163,"author":{"gitId":"cedricongjh"},"content":"    jest.spyOn(timezoneService, \u0027getTzOffsets\u0027).mockReturnValue(mockTzOffsets);"},{"lineNumber":164,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":165,"author":{"gitId":"cedricongjh"},"content":"    component.ngOnInit();"},{"lineNumber":166,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":167,"author":{"gitId":"cedricongjh"},"content":"    expect(component.timezones).toEqual(["},{"lineNumber":168,"author":{"gitId":"cedricongjh"},"content":"      { id: \u0027Tz1\u0027, offset: \u0027UTC +02:00\u0027 },"},{"lineNumber":169,"author":{"gitId":"cedricongjh"},"content":"      { id: \u0027Tz2\u0027, offset: \u0027UTC -03:00\u0027 },"},{"lineNumber":170,"author":{"gitId":"cedricongjh"},"content":"      { id: \u0027Tz3\u0027, offset: \u0027UTC\u0027 },"},{"lineNumber":171,"author":{"gitId":"cedricongjh"},"content":"    ]);"},{"lineNumber":172,"author":{"gitId":"cedricongjh"},"content":"  });"},{"lineNumber":173,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":174,"author":{"gitId":"cedricongjh"},"content":"  it(\u0027should call showErrorToast when copying with no new courseId and name\u0027, () \u003d\u003e {"},{"lineNumber":175,"author":{"gitId":"cedricongjh"},"content":"    const spyStatusMessageService: SpyInstance \u003d jest.spyOn(statusMessageService, \u0027showErrorToast\u0027);"},{"lineNumber":176,"author":{"gitId":"cedricongjh"},"content":"    component.copy();"},{"lineNumber":177,"author":{"gitId":"cedricongjh"},"content":"    expect(spyStatusMessageService)"},{"lineNumber":178,"author":{"gitId":"cedricongjh"},"content":"      .toHaveBeenCalledWith(\u0027Please make sure you have filled in both Course ID and Name before adding the course!\u0027);"},{"lineNumber":179,"author":{"gitId":"cedricongjh"},"content":"  });"},{"lineNumber":180,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":181,"author":{"gitId":"cedricongjh"},"content":"  it(\u0027should call showErrorToast when newCourseId is a duplicate\u0027, () \u003d\u003e {"},{"lineNumber":182,"author":{"gitId":"cedricongjh"},"content":"    const testCourses: Course[] \u003d ["},{"lineNumber":183,"author":{"gitId":"cedricongjh"},"content":"      {"},{"lineNumber":184,"author":{"gitId":"cedricongjh"},"content":"        courseId: \u0027testId1\u0027,"},{"lineNumber":185,"author":{"gitId":"cedricongjh"},"content":"        courseName: \u0027testCourse1\u0027,"},{"lineNumber":186,"author":{"gitId":"cedricongjh"},"content":"        timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":187,"author":{"gitId":"cedricongjh"},"content":"        institute: \u0027Institute 1\u0027,"},{"lineNumber":188,"author":{"gitId":"cedricongjh"},"content":"        creationTimestamp: 1000000000000,"},{"lineNumber":189,"author":{"gitId":"cedricongjh"},"content":"        deletionTimestamp: 1500000000000,"},{"lineNumber":190,"author":{"gitId":"cedricongjh"},"content":"      },"},{"lineNumber":191,"author":{"gitId":"cedricongjh"},"content":"      {"},{"lineNumber":192,"author":{"gitId":"cedricongjh"},"content":"        courseId: \u0027testId2\u0027,"},{"lineNumber":193,"author":{"gitId":"cedricongjh"},"content":"        courseName: \u0027testCourse2\u0027,"},{"lineNumber":194,"author":{"gitId":"cedricongjh"},"content":"        timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":195,"author":{"gitId":"cedricongjh"},"content":"        institute: \u0027Institute 2\u0027,"},{"lineNumber":196,"author":{"gitId":"cedricongjh"},"content":"        creationTimestamp: 1000000000000,"},{"lineNumber":197,"author":{"gitId":"cedricongjh"},"content":"        deletionTimestamp: 1500000000000,"},{"lineNumber":198,"author":{"gitId":"cedricongjh"},"content":"      },"},{"lineNumber":199,"author":{"gitId":"cedricongjh"},"content":"    ];"},{"lineNumber":200,"author":{"gitId":"cedricongjh"},"content":"    const spyStatusMessageService: SpyInstance \u003d jest.spyOn(statusMessageService, \u0027showErrorToast\u0027);"},{"lineNumber":201,"author":{"gitId":"cedricongjh"},"content":"    component.allCourses \u003d testCourses;"},{"lineNumber":202,"author":{"gitId":"cedricongjh"},"content":"    component.newCourseId \u003d \u0027testId1\u0027;"},{"lineNumber":203,"author":{"gitId":"cedricongjh"},"content":"    component.newCourseName \u003d \u0027testName\u0027;"},{"lineNumber":204,"author":{"gitId":"cedricongjh"},"content":"    component.copy();"},{"lineNumber":205,"author":{"gitId":"cedricongjh"},"content":"    expect(spyStatusMessageService).toHaveBeenCalledWith(\u0027The course ID testId1 already exists.\u0027);"},{"lineNumber":206,"author":{"gitId":"cedricongjh"},"content":"  });"},{"lineNumber":207,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":208,"author":{"gitId":"cedricongjh"},"content":"  it(\u0027should call close with the result when succesfully copying a course\u0027, () \u003d\u003e {"},{"lineNumber":209,"author":{"gitId":"cedricongjh"},"content":"    const activeModalSpy: SpyInstance \u003d jest.spyOn(ngbActiveModal, \u0027close\u0027);"},{"lineNumber":210,"author":{"gitId":"cedricongjh"},"content":"    component.newCourseId \u003d \u0027testId2\u0027;"},{"lineNumber":211,"author":{"gitId":"cedricongjh"},"content":"    component.newCourseName \u003d \u0027testName\u0027;"},{"lineNumber":212,"author":{"gitId":"cedricongjh"},"content":"    component.newTimezone \u003d \u0027Asia/Singapore\u0027;"},{"lineNumber":213,"author":{"gitId":"cedricongjh"},"content":"    component.copy();"},{"lineNumber":214,"author":{"gitId":"cedricongjh"},"content":"    expect(activeModalSpy).toHaveBeenCalledWith({"},{"lineNumber":215,"author":{"gitId":"cedricongjh"},"content":"      newCourseId: \u0027testId2\u0027,"},{"lineNumber":216,"author":{"gitId":"cedricongjh"},"content":"      newCourseName: \u0027testName\u0027,"},{"lineNumber":217,"author":{"gitId":"cedricongjh"},"content":"      newCourseInstitute: \u0027\u0027,"},{"lineNumber":218,"author":{"gitId":"cedricongjh"},"content":"      newTimeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":219,"author":{"gitId":"cedricongjh"},"content":"      oldCourseId: \u0027\u0027,"},{"lineNumber":220,"author":{"gitId":"cedricongjh"},"content":"      selectedFeedbackSessionList: new Set(),"},{"lineNumber":221,"author":{"gitId":"cedricongjh"},"content":"      totalNumberOfSessions: 0,"},{"lineNumber":222,"author":{"gitId":"cedricongjh"},"content":"    });"},{"lineNumber":223,"author":{"gitId":"cedricongjh"},"content":"  });"},{"lineNumber":224,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":225,"author":{"gitId":"cedricongjh"},"content":"  it(\u0027should toggle selection of all feedbacksessions correctly\u0027, () \u003d\u003e {"},{"lineNumber":226,"author":{"gitId":"cedricongjh"},"content":"    const testFeedbackSession1: FeedbackSession \u003d {"},{"lineNumber":227,"author":{"gitId":"cedricongjh"},"content":"      courseId: \u0027testId\u0027,"},{"lineNumber":228,"author":{"gitId":"cedricongjh"},"content":"      timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":229,"author":{"gitId":"cedricongjh"},"content":"      feedbackSessionName: \u0027Test Session 1\u0027,"},{"lineNumber":230,"author":{"gitId":"cedricongjh"},"content":"      instructions: \u0027Instructions\u0027,"},{"lineNumber":231,"author":{"gitId":"cedricongjh"},"content":"      submissionStartTimestamp: 1000000000000,"},{"lineNumber":232,"author":{"gitId":"cedricongjh"},"content":"      submissionEndTimestamp: 1500000000000,"},{"lineNumber":233,"author":{"gitId":"cedricongjh"},"content":"      gracePeriod: 0,"},{"lineNumber":234,"author":{"gitId":"cedricongjh"},"content":"      sessionVisibleSetting: SessionVisibleSetting.AT_OPEN,"},{"lineNumber":235,"author":{"gitId":"cedricongjh"},"content":"      responseVisibleSetting: ResponseVisibleSetting.AT_VISIBLE,"},{"lineNumber":236,"author":{"gitId":"cedricongjh"},"content":"      submissionStatus: FeedbackSessionSubmissionStatus.OPEN,"},{"lineNumber":237,"author":{"gitId":"cedricongjh"},"content":"      publishStatus: FeedbackSessionPublishStatus.PUBLISHED,"},{"lineNumber":238,"author":{"gitId":"cedricongjh"},"content":"      isClosingEmailEnabled: true,"},{"lineNumber":239,"author":{"gitId":"cedricongjh"},"content":"      isPublishedEmailEnabled: true,"},{"lineNumber":240,"author":{"gitId":"cedricongjh"},"content":"      createdAtTimestamp: 0,"},{"lineNumber":241,"author":{"gitId":"cedricongjh"},"content":"      studentDeadlines: {},"},{"lineNumber":242,"author":{"gitId":"cedricongjh"},"content":"      instructorDeadlines: {},"},{"lineNumber":243,"author":{"gitId":"cedricongjh"},"content":"    };"},{"lineNumber":244,"author":{"gitId":"cedricongjh"},"content":"    const testFeedbackSession2: FeedbackSession \u003d {"},{"lineNumber":245,"author":{"gitId":"cedricongjh"},"content":"      courseId: \u0027testId\u0027,"},{"lineNumber":246,"author":{"gitId":"cedricongjh"},"content":"      timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":247,"author":{"gitId":"cedricongjh"},"content":"      feedbackSessionName: \u0027Test Session 2\u0027,"},{"lineNumber":248,"author":{"gitId":"cedricongjh"},"content":"      instructions: \u0027Instructions\u0027,"},{"lineNumber":249,"author":{"gitId":"cedricongjh"},"content":"      submissionStartTimestamp: 1000000000000,"},{"lineNumber":250,"author":{"gitId":"cedricongjh"},"content":"      submissionEndTimestamp: 1500000000000,"},{"lineNumber":251,"author":{"gitId":"cedricongjh"},"content":"      gracePeriod: 0,"},{"lineNumber":252,"author":{"gitId":"cedricongjh"},"content":"      sessionVisibleSetting: SessionVisibleSetting.AT_OPEN,"},{"lineNumber":253,"author":{"gitId":"cedricongjh"},"content":"      responseVisibleSetting: ResponseVisibleSetting.AT_VISIBLE,"},{"lineNumber":254,"author":{"gitId":"cedricongjh"},"content":"      submissionStatus: FeedbackSessionSubmissionStatus.OPEN,"},{"lineNumber":255,"author":{"gitId":"cedricongjh"},"content":"      publishStatus: FeedbackSessionPublishStatus.PUBLISHED,"},{"lineNumber":256,"author":{"gitId":"cedricongjh"},"content":"      isClosingEmailEnabled: true,"},{"lineNumber":257,"author":{"gitId":"cedricongjh"},"content":"      isPublishedEmailEnabled: true,"},{"lineNumber":258,"author":{"gitId":"cedricongjh"},"content":"      createdAtTimestamp: 0,"},{"lineNumber":259,"author":{"gitId":"cedricongjh"},"content":"      studentDeadlines: {},"},{"lineNumber":260,"author":{"gitId":"cedricongjh"},"content":"      instructorDeadlines: {},"},{"lineNumber":261,"author":{"gitId":"cedricongjh"},"content":"    };"},{"lineNumber":262,"author":{"gitId":"cedricongjh"},"content":"    const testFeedbackSessions \u003d [testFeedbackSession1, testFeedbackSession2];"},{"lineNumber":263,"author":{"gitId":"cedricongjh"},"content":"    component.courseToFeedbackSession \u003d {"},{"lineNumber":264,"author":{"gitId":"cedricongjh"},"content":"      testCourseId: testFeedbackSessions,"},{"lineNumber":265,"author":{"gitId":"cedricongjh"},"content":"    };"},{"lineNumber":266,"author":{"gitId":"cedricongjh"},"content":"    component.oldCourseId \u003d \u0027testCourseId\u0027;"},{"lineNumber":267,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":268,"author":{"gitId":"cedricongjh"},"content":"    // selectedFeedbackSessions is empty"},{"lineNumber":269,"author":{"gitId":"cedricongjh"},"content":"    component.toggleSelectionForAll();"},{"lineNumber":270,"author":{"gitId":"cedricongjh"},"content":"    expect(component.selectedFeedbackSessions).toEqual(new Set(testFeedbackSessions));"},{"lineNumber":271,"author":{"gitId":"cedricongjh"},"content":"    // selectedFeedbackSessions has all the feedback sessions of the old course"},{"lineNumber":272,"author":{"gitId":"cedricongjh"},"content":"    component.toggleSelectionForAll();"},{"lineNumber":273,"author":{"gitId":"cedricongjh"},"content":"    expect(component.selectedFeedbackSessions.size).toBe(0);"},{"lineNumber":274,"author":{"gitId":"cedricongjh"},"content":"    // selectedFeedbackSessions is partially filled"},{"lineNumber":275,"author":{"gitId":"cedricongjh"},"content":"    component.selectedFeedbackSessions \u003d new Set([testFeedbackSession1]);"},{"lineNumber":276,"author":{"gitId":"cedricongjh"},"content":"    component.toggleSelectionForAll();"},{"lineNumber":277,"author":{"gitId":"cedricongjh"},"content":"    expect(component.selectedFeedbackSessions).toEqual(new Set(testFeedbackSessions));"},{"lineNumber":278,"author":{"gitId":"cedricongjh"},"content":"  });"},{"lineNumber":279,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":280,"author":{"gitId":"cedricongjh"},"content":"  it(\u0027should set newTimezone correctly when onAutoDetectTimezone is called\u0027, () \u003d\u003e {"},{"lineNumber":281,"author":{"gitId":"cedricongjh"},"content":"    const mockTimezone \u003d \u0027timezone\u0027;"},{"lineNumber":282,"author":{"gitId":"cedricongjh"},"content":"    jest.spyOn(timezoneService, \u0027guessTimezone\u0027).mockReturnValue(mockTimezone);"},{"lineNumber":283,"author":{"gitId":"cedricongjh"},"content":"    component.onAutoDetectTimezone();"},{"lineNumber":284,"author":{"gitId":"cedricongjh"},"content":"    expect(component.newTimezone).toBe(mockTimezone);"},{"lineNumber":285,"author":{"gitId":"cedricongjh"},"content":"  });"},{"lineNumber":286,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":287,"author":{"gitId":"cedricongjh"},"content":"  it(\u0027should clear selectedFeedbackSessions when onSelectCourseChange is called\u0027, () \u003d\u003e {"},{"lineNumber":288,"author":{"gitId":"cedricongjh"},"content":"    const testFeedbackSession: FeedbackSession \u003d {"},{"lineNumber":289,"author":{"gitId":"cedricongjh"},"content":"      courseId: \u0027testId2\u0027,"},{"lineNumber":290,"author":{"gitId":"cedricongjh"},"content":"      timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":291,"author":{"gitId":"cedricongjh"},"content":"      feedbackSessionName: \u0027Test Session 2\u0027,"},{"lineNumber":292,"author":{"gitId":"cedricongjh"},"content":"      instructions: \u0027Instructions\u0027,"},{"lineNumber":293,"author":{"gitId":"cedricongjh"},"content":"      submissionStartTimestamp: 1000000000000,"},{"lineNumber":294,"author":{"gitId":"cedricongjh"},"content":"      submissionEndTimestamp: 1500000000000,"},{"lineNumber":295,"author":{"gitId":"cedricongjh"},"content":"      gracePeriod: 0,"},{"lineNumber":296,"author":{"gitId":"cedricongjh"},"content":"      sessionVisibleSetting: SessionVisibleSetting.AT_OPEN,"},{"lineNumber":297,"author":{"gitId":"cedricongjh"},"content":"      responseVisibleSetting: ResponseVisibleSetting.AT_VISIBLE,"},{"lineNumber":298,"author":{"gitId":"cedricongjh"},"content":"      submissionStatus: FeedbackSessionSubmissionStatus.OPEN,"},{"lineNumber":299,"author":{"gitId":"cedricongjh"},"content":"      publishStatus: FeedbackSessionPublishStatus.PUBLISHED,"},{"lineNumber":300,"author":{"gitId":"cedricongjh"},"content":"      isClosingEmailEnabled: true,"},{"lineNumber":301,"author":{"gitId":"cedricongjh"},"content":"      isPublishedEmailEnabled: true,"},{"lineNumber":302,"author":{"gitId":"cedricongjh"},"content":"      createdAtTimestamp: 0,"},{"lineNumber":303,"author":{"gitId":"cedricongjh"},"content":"      studentDeadlines: {},"},{"lineNumber":304,"author":{"gitId":"cedricongjh"},"content":"      instructorDeadlines: {},"},{"lineNumber":305,"author":{"gitId":"cedricongjh"},"content":"    };"},{"lineNumber":306,"author":{"gitId":"cedricongjh"},"content":"    component.oldCourseId \u003d \u0027testId1\u0027;"},{"lineNumber":307,"author":{"gitId":"cedricongjh"},"content":"    component.courseToFeedbackSession \u003d {"},{"lineNumber":308,"author":{"gitId":"cedricongjh"},"content":"      testId2: [testFeedbackSession],"},{"lineNumber":309,"author":{"gitId":"cedricongjh"},"content":"    };"},{"lineNumber":310,"author":{"gitId":"cedricongjh"},"content":"    component.selectedFeedbackSessions \u003d new Set([testFeedbackSession]);"},{"lineNumber":311,"author":{"gitId":"cedricongjh"},"content":"    let emittedCourseId;"},{"lineNumber":312,"author":{"gitId":"cedricongjh"},"content":"    component.fetchFeedbackSessionsEvent.subscribe((emittedValue) \u003d\u003e { emittedCourseId \u003d emittedValue; });"},{"lineNumber":313,"author":{"gitId":"cedricongjh"},"content":"    component.onSelectCourseChange();"},{"lineNumber":314,"author":{"gitId":"cedricongjh"},"content":"    expect(component.selectedFeedbackSessions.size).toBe(0);"},{"lineNumber":315,"author":{"gitId":"cedricongjh"},"content":"    expect(emittedCourseId).toEqual(\u0027testId1\u0027);"},{"lineNumber":316,"author":{"gitId":"cedricongjh"},"content":"  });"},{"lineNumber":317,"author":{"gitId":"-"},"content":"});"}],"authorContributionMap":{"cedricongjh":198,"-":119}},{"path":"src/web/app/components/extension-confirm-modal/extension-confirm-modal.component.scss","fileType":"scss","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":".form-check {"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  float: right;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"}"},{"lineNumber":4,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":5,"author":{"gitId":"weiquu"},"content":".sortable-header {"},{"lineNumber":6,"author":{"gitId":"weiquu"},"content":"  cursor: pointer;"},{"lineNumber":7,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":8,"author":{"gitId":"weiquu"},"content":"  i {"},{"lineNumber":9,"author":{"gitId":"weiquu"},"content":"    margin-left: .3em;"},{"lineNumber":10,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":11,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":12,"author":{"gitId":"weiquu"},"content":"  .fa-stack {"},{"lineNumber":13,"author":{"gitId":"weiquu"},"content":"    width: 20%;"},{"lineNumber":14,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":15,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":16,"author":{"gitId":"weiquu"},"content":"  button {"},{"lineNumber":17,"author":{"gitId":"weiquu"},"content":"    background: none;"},{"lineNumber":18,"author":{"gitId":"weiquu"},"content":"    color: inherit;"},{"lineNumber":19,"author":{"gitId":"weiquu"},"content":"    border: none;"},{"lineNumber":20,"author":{"gitId":"weiquu"},"content":"    padding: 0;"},{"lineNumber":21,"author":{"gitId":"weiquu"},"content":"    text-align: left;"},{"lineNumber":22,"author":{"gitId":"weiquu"},"content":"    width: 100%;"},{"lineNumber":23,"author":{"gitId":"weiquu"},"content":"    font: inherit;"},{"lineNumber":24,"author":{"gitId":"weiquu"},"content":"    cursor: inherit;"},{"lineNumber":25,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":26,"author":{"gitId":"weiquu"},"content":"}"}],"authorContributionMap":{"weiquu":23,"-":3}},{"path":"src/web/app/components/extension-confirm-modal/extension-confirm-modal.component.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { Component, EventEmitter, Input, Output, OnInit } from \u0027@angular/core\u0027;"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import { NgbActiveModal } from \u0027@ng-bootstrap/ng-bootstrap\u0027;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"import { TableComparatorService } from \u0027../../../services/table-comparator.service\u0027;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import { TimezoneService } from \u0027../../../services/timezone.service\u0027;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import { SortBy, SortOrder } from \u0027../../../types/sort-properties\u0027;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":7,"author":{"gitId":"-"},"content":"  StudentExtensionTableColumnModel,"},{"lineNumber":8,"author":{"gitId":"-"},"content":"  InstructorExtensionTableColumnModel,"},{"lineNumber":9,"author":{"gitId":"-"},"content":"} from \u0027../../pages-instructor/instructor-session-individual-extension-page/extension-table-column-model\u0027;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":11,"author":{"gitId":"-"},"content":"     ColumnData,"},{"lineNumber":12,"author":{"gitId":"-"},"content":"     SortableEvent,"},{"lineNumber":13,"author":{"gitId":"-"},"content":"     SortableTableCellData,"},{"lineNumber":14,"author":{"gitId":"-"},"content":"     SortableTableHeaderColorScheme,"},{"lineNumber":15,"author":{"gitId":"-"},"content":" } from \u0027../sortable-table/sortable-table.component\u0027;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"import { FormatDateDetailPipe } from \u0027../teammates-common/format-date-detail.pipe\u0027;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"import { InstructorRoleNamePipe } from \u0027../teammates-common/instructor-role-name.pipe\u0027;"},{"lineNumber":18,"author":{"gitId":"-"},"content":""},{"lineNumber":19,"author":{"gitId":"-"},"content":"export enum ExtensionModalType {"},{"lineNumber":20,"author":{"gitId":"-"},"content":"  EXTEND,"},{"lineNumber":21,"author":{"gitId":"-"},"content":"  DELETE,"},{"lineNumber":22,"author":{"gitId":"-"},"content":"  SESSION_DELETE,"},{"lineNumber":23,"author":{"gitId":"-"},"content":"}"},{"lineNumber":24,"author":{"gitId":"-"},"content":""},{"lineNumber":25,"author":{"gitId":"-"},"content":"@Component({"},{"lineNumber":26,"author":{"gitId":"-"},"content":"  selector: \u0027tm-extension-confirm-modal\u0027,"},{"lineNumber":27,"author":{"gitId":"-"},"content":"  templateUrl: \u0027./extension-confirm-modal.component.html\u0027,"},{"lineNumber":28,"author":{"gitId":"-"},"content":"  styleUrls: [\u0027./extension-confirm-modal.component.scss\u0027],"},{"lineNumber":29,"author":{"gitId":"-"},"content":"})"},{"lineNumber":30,"author":{"gitId":"-"},"content":"export class ExtensionConfirmModalComponent implements OnInit {"},{"lineNumber":31,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":32,"author":{"gitId":"-"},"content":"  modalType: ExtensionModalType \u003d ExtensionModalType.EXTEND;"},{"lineNumber":33,"author":{"gitId":"-"},"content":""},{"lineNumber":34,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":35,"author":{"gitId":"-"},"content":"  selectedStudents: StudentExtensionTableColumnModel[] \u003d [];"},{"lineNumber":36,"author":{"gitId":"-"},"content":""},{"lineNumber":37,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":38,"author":{"gitId":"-"},"content":"  selectedInstructors: InstructorExtensionTableColumnModel[] \u003d [];"},{"lineNumber":39,"author":{"gitId":"-"},"content":""},{"lineNumber":40,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":41,"author":{"gitId":"-"},"content":"  extensionTimestamp: number \u003d 0;"},{"lineNumber":42,"author":{"gitId":"-"},"content":""},{"lineNumber":43,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":44,"author":{"gitId":"-"},"content":"  feedbackSessionTimeZone: string \u003d \u0027\u0027;"},{"lineNumber":45,"author":{"gitId":"-"},"content":""},{"lineNumber":46,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":47,"author":{"gitId":"-"},"content":"  headerColorScheme: SortableTableHeaderColorScheme \u003d SortableTableHeaderColorScheme.WHITE;"},{"lineNumber":48,"author":{"gitId":"-"},"content":""},{"lineNumber":49,"author":{"gitId":"-"},"content":"  @Input() set studentData(studentData: StudentExtensionTableColumnModel[]) {"},{"lineNumber":50,"author":{"gitId":"-"},"content":"    this.selectedStudents \u003d studentData;"},{"lineNumber":51,"author":{"gitId":"-"},"content":"    if (this.selectedStudents.length \u003e 0) {"},{"lineNumber":52,"author":{"gitId":"-"},"content":"      this.setStudentTableData();"},{"lineNumber":53,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":54,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":55,"author":{"gitId":"-"},"content":""},{"lineNumber":56,"author":{"gitId":"-"},"content":"  @Input() set instructorData(instructorData: InstructorExtensionTableColumnModel[]) {"},{"lineNumber":57,"author":{"gitId":"-"},"content":"      this.selectedInstructors \u003d instructorData;"},{"lineNumber":58,"author":{"gitId":"-"},"content":"      if (this.selectedInstructors.length \u003e 0) {"},{"lineNumber":59,"author":{"gitId":"-"},"content":"        this.setInstructorTableData();"},{"lineNumber":60,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":61,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":62,"author":{"gitId":"-"},"content":""},{"lineNumber":63,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":64,"author":{"gitId":"-"},"content":"  confirmExtensionCallbackEvent: EventEmitter\u003cboolean\u003e \u003d new EventEmitter();"},{"lineNumber":65,"author":{"gitId":"-"},"content":""},{"lineNumber":66,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":67,"author":{"gitId":"-"},"content":"  sortStudentListEvent: EventEmitter\u003cSortableEvent\u003e \u003d new EventEmitter();"},{"lineNumber":68,"author":{"gitId":"-"},"content":""},{"lineNumber":69,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":70,"author":{"gitId":"-"},"content":"  sortInstructorListEvent: EventEmitter\u003cSortableEvent\u003e \u003d new EventEmitter();"},{"lineNumber":71,"author":{"gitId":"-"},"content":""},{"lineNumber":72,"author":{"gitId":"-"},"content":"  studentColumnsData : ColumnData[] \u003d [];"},{"lineNumber":73,"author":{"gitId":"-"},"content":"  studentRowsData : SortableTableCellData[][] \u003d [];"},{"lineNumber":74,"author":{"gitId":"-"},"content":"  instructorColumnsData : ColumnData[] \u003d [];"},{"lineNumber":75,"author":{"gitId":"-"},"content":"  instructorRowsData : SortableTableCellData[][] \u003d [];"},{"lineNumber":76,"author":{"gitId":"-"},"content":"  dateDetailPipe \u003d new FormatDateDetailPipe(this.timeZoneService);"},{"lineNumber":77,"author":{"gitId":"-"},"content":"  instructorRoleNamePipe \u003d new InstructorRoleNamePipe();"},{"lineNumber":78,"author":{"gitId":"-"},"content":""},{"lineNumber":79,"author":{"gitId":"-"},"content":"  constructor(public activeModal: NgbActiveModal, private tableComparatorService: TableComparatorService,"},{"lineNumber":80,"author":{"gitId":"-"},"content":"  private timeZoneService: TimezoneService) {}"},{"lineNumber":81,"author":{"gitId":"-"},"content":""},{"lineNumber":82,"author":{"gitId":"-"},"content":"  SortBy: typeof SortBy \u003d SortBy;"},{"lineNumber":83,"author":{"gitId":"-"},"content":"  SortOrder: typeof SortOrder \u003d SortOrder;"},{"lineNumber":84,"author":{"gitId":"-"},"content":"  sortStudentsBy: SortBy \u003d SortBy.SESSION_END_DATE;"},{"lineNumber":85,"author":{"gitId":"-"},"content":"  sortStudentOrder: SortOrder \u003d SortOrder.DESC;"},{"lineNumber":86,"author":{"gitId":"-"},"content":"  sortInstructorsBy: SortBy \u003d SortBy.SESSION_END_DATE;"},{"lineNumber":87,"author":{"gitId":"-"},"content":"  sortInstructorOrder: SortOrder \u003d SortOrder.DESC;"},{"lineNumber":88,"author":{"gitId":"-"},"content":""},{"lineNumber":89,"author":{"gitId":"-"},"content":"  isSubmitting: boolean \u003d false;"},{"lineNumber":90,"author":{"gitId":"-"},"content":"  isNotifyDeadlines: boolean \u003d false;"},{"lineNumber":91,"author":{"gitId":"-"},"content":""},{"lineNumber":92,"author":{"gitId":"-"},"content":"  ngOnInit(): void {"},{"lineNumber":93,"author":{"gitId":"-"},"content":"    if (this.selectedStudents.length \u003e 0) {"},{"lineNumber":94,"author":{"gitId":"-"},"content":"      this.setStudentTableData();"},{"lineNumber":95,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":96,"author":{"gitId":"-"},"content":""},{"lineNumber":97,"author":{"gitId":"-"},"content":"    if (this.selectedInstructors.length \u003e 0) {"},{"lineNumber":98,"author":{"gitId":"-"},"content":"      this.setInstructorTableData();"},{"lineNumber":99,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":100,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":101,"author":{"gitId":"-"},"content":""},{"lineNumber":102,"author":{"gitId":"-"},"content":"  setStudentTableData(): void {"},{"lineNumber":103,"author":{"gitId":"-"},"content":"    this.setStudentColumnData();"},{"lineNumber":104,"author":{"gitId":"-"},"content":"    this.setStudentRowData();"},{"lineNumber":105,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":106,"author":{"gitId":"-"},"content":""},{"lineNumber":107,"author":{"gitId":"-"},"content":"  setInstructorTableData(): void {"},{"lineNumber":108,"author":{"gitId":"-"},"content":"    this.setInstructorColumnData();"},{"lineNumber":109,"author":{"gitId":"-"},"content":"    this.setInstructorRowData();"},{"lineNumber":110,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":111,"author":{"gitId":"-"},"content":""},{"lineNumber":112,"author":{"gitId":"-"},"content":"  setStudentColumnData(): void {"},{"lineNumber":113,"author":{"gitId":"-"},"content":"     this.studentColumnsData \u003d ["},{"lineNumber":114,"author":{"gitId":"-"},"content":"        {"},{"lineNumber":115,"author":{"gitId":"-"},"content":"            header: \u0027Section\u0027,"},{"lineNumber":116,"author":{"gitId":"-"},"content":"            sortBy: SortBy.SECTION_NAME,"},{"lineNumber":117,"author":{"gitId":"-"},"content":"            headerClass: \u0027student-sort-by-section\u0027,"},{"lineNumber":118,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":119,"author":{"gitId":"-"},"content":"        {"},{"lineNumber":120,"author":{"gitId":"-"},"content":"            header: \u0027Team\u0027,"},{"lineNumber":121,"author":{"gitId":"-"},"content":"            sortBy: SortBy.TEAM_NAME,"},{"lineNumber":122,"author":{"gitId":"-"},"content":"            headerClass: \u0027student-sort-by-team\u0027,"},{"lineNumber":123,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":124,"author":{"gitId":"-"},"content":"        {"},{"lineNumber":125,"author":{"gitId":"-"},"content":"            header: \u0027Name\u0027,"},{"lineNumber":126,"author":{"gitId":"-"},"content":"            sortBy: SortBy.RESPONDENT_NAME,"},{"lineNumber":127,"author":{"gitId":"-"},"content":"            headerClass: \u0027student-sort-by-name\u0027,"},{"lineNumber":128,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":129,"author":{"gitId":"-"},"content":"        {"},{"lineNumber":130,"author":{"gitId":"-"},"content":"            header: \u0027Email\u0027,"},{"lineNumber":131,"author":{"gitId":"-"},"content":"            sortBy: SortBy.RESPONDENT_EMAIL,"},{"lineNumber":132,"author":{"gitId":"-"},"content":"            headerClass: \u0027student-sort-by-email\u0027,"},{"lineNumber":133,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":134,"author":{"gitId":"-"},"content":"        {"},{"lineNumber":135,"author":{"gitId":"-"},"content":"            header: this.isDeleteModal() || this.isSessionDeleteModal() ? \u0027Current Deadline\u0027 : \u0027Original Deadline\u0027,"},{"lineNumber":136,"author":{"gitId":"-"},"content":"            sortBy: SortBy.SESSION_END_DATE,"},{"lineNumber":137,"author":{"gitId":"-"},"content":"            headerClass: \u0027student-sort-by-deadline\u0027,"},{"lineNumber":138,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":139,"author":{"gitId":"-"},"content":"       ];"},{"lineNumber":140,"author":{"gitId":"-"},"content":"     }"},{"lineNumber":141,"author":{"gitId":"-"},"content":""},{"lineNumber":142,"author":{"gitId":"-"},"content":"  setStudentRowData(): void {"},{"lineNumber":143,"author":{"gitId":"-"},"content":"    this.studentRowsData \u003d this.selectedStudents"},{"lineNumber":144,"author":{"gitId":"-"},"content":"        .map((studentData: StudentExtensionTableColumnModel) \u003d\u003e {"},{"lineNumber":145,"author":{"gitId":"-"},"content":"            const rowData: SortableTableCellData[] \u003d ["},{"lineNumber":146,"author":{"gitId":"-"},"content":"              {"},{"lineNumber":147,"author":{"gitId":"-"},"content":"                value: studentData.sectionName,"},{"lineNumber":148,"author":{"gitId":"-"},"content":"              },"},{"lineNumber":149,"author":{"gitId":"-"},"content":"              {"},{"lineNumber":150,"author":{"gitId":"-"},"content":"                value: studentData.teamName,"},{"lineNumber":151,"author":{"gitId":"-"},"content":"              },"},{"lineNumber":152,"author":{"gitId":"-"},"content":"              {"},{"lineNumber":153,"author":{"gitId":"-"},"content":"                value: studentData.name,"},{"lineNumber":154,"author":{"gitId":"-"},"content":"              },"},{"lineNumber":155,"author":{"gitId":"-"},"content":"              {"},{"lineNumber":156,"author":{"gitId":"-"},"content":"                value: studentData.email,"},{"lineNumber":157,"author":{"gitId":"-"},"content":"              },"},{"lineNumber":158,"author":{"gitId":"-"},"content":"              {"},{"lineNumber":159,"author":{"gitId":"-"},"content":"                value: studentData.extensionDeadline,"},{"lineNumber":160,"author":{"gitId":"-"},"content":"                displayValue: this.dateDetailPipe.transform("},{"lineNumber":161,"author":{"gitId":"-"},"content":"                studentData.extensionDeadline,"},{"lineNumber":162,"author":{"gitId":"-"},"content":"                this.feedbackSessionTimeZone),"},{"lineNumber":163,"author":{"gitId":"-"},"content":"              },"},{"lineNumber":164,"author":{"gitId":"-"},"content":"            ];"},{"lineNumber":165,"author":{"gitId":"-"},"content":"            return rowData;"},{"lineNumber":166,"author":{"gitId":"-"},"content":"          });"},{"lineNumber":167,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":168,"author":{"gitId":"-"},"content":""},{"lineNumber":169,"author":{"gitId":"-"},"content":"  setInstructorColumnData(): void {"},{"lineNumber":170,"author":{"gitId":"-"},"content":"    this.instructorColumnsData \u003d ["},{"lineNumber":171,"author":{"gitId":"-"},"content":"        {"},{"lineNumber":172,"author":{"gitId":"-"},"content":"            header: \u0027Name\u0027,"},{"lineNumber":173,"author":{"gitId":"-"},"content":"            sortBy: SortBy.RESPONDENT_NAME,"},{"lineNumber":174,"author":{"gitId":"-"},"content":"            headerClass: \u0027instructor-sort-by-name\u0027,"},{"lineNumber":175,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":176,"author":{"gitId":"-"},"content":"        {"},{"lineNumber":177,"author":{"gitId":"-"},"content":"            header: \u0027Email\u0027,"},{"lineNumber":178,"author":{"gitId":"-"},"content":"            sortBy: SortBy.RESPONDENT_EMAIL,"},{"lineNumber":179,"author":{"gitId":"-"},"content":"            headerClass: \u0027instructor-sort-by-email\u0027,"},{"lineNumber":180,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":181,"author":{"gitId":"-"},"content":"        {"},{"lineNumber":182,"author":{"gitId":"-"},"content":"            header: \u0027Role\u0027,"},{"lineNumber":183,"author":{"gitId":"-"},"content":"            sortBy: SortBy.INSTRUCTOR_PERMISSION_ROLE,"},{"lineNumber":184,"author":{"gitId":"-"},"content":"            headerClass: \u0027instructor-sort-by-role\u0027,"},{"lineNumber":185,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":186,"author":{"gitId":"-"},"content":"        {"},{"lineNumber":187,"author":{"gitId":"-"},"content":"            header: this.isDeleteModal() || this.isSessionDeleteModal() ? \u0027Current Deadline\u0027 : \u0027Original Deadline\u0027,"},{"lineNumber":188,"author":{"gitId":"-"},"content":"            sortBy: SortBy.SESSION_END_DATE,"},{"lineNumber":189,"author":{"gitId":"-"},"content":"            headerClass: \u0027instructor-sort-by-deadline\u0027,"},{"lineNumber":190,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":191,"author":{"gitId":"-"},"content":"        ];"},{"lineNumber":192,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":193,"author":{"gitId":"-"},"content":""},{"lineNumber":194,"author":{"gitId":"-"},"content":"  setInstructorRowData(): void {"},{"lineNumber":195,"author":{"gitId":"-"},"content":"    this.instructorRowsData \u003d this.selectedInstructors"},{"lineNumber":196,"author":{"gitId":"-"},"content":"        .map((instructorData: InstructorExtensionTableColumnModel) \u003d\u003e {"},{"lineNumber":197,"author":{"gitId":"-"},"content":"            const rowData: SortableTableCellData[] \u003d ["},{"lineNumber":198,"author":{"gitId":"-"},"content":"                {"},{"lineNumber":199,"author":{"gitId":"-"},"content":"                    value: instructorData.name,"},{"lineNumber":200,"author":{"gitId":"-"},"content":"                },"},{"lineNumber":201,"author":{"gitId":"-"},"content":"                {"},{"lineNumber":202,"author":{"gitId":"-"},"content":"                    value: instructorData.email,"},{"lineNumber":203,"author":{"gitId":"-"},"content":"                },"},{"lineNumber":204,"author":{"gitId":"-"},"content":"                {"},{"lineNumber":205,"author":{"gitId":"-"},"content":"                    value: instructorData.role,"},{"lineNumber":206,"author":{"gitId":"-"},"content":"                    displayValue: instructorData.role"},{"lineNumber":207,"author":{"gitId":"-"},"content":"                    ? this.instructorRoleNamePipe.transform(instructorData.role)"},{"lineNumber":208,"author":{"gitId":"-"},"content":"                    : instructorData.role,"},{"lineNumber":209,"author":{"gitId":"-"},"content":"                },"},{"lineNumber":210,"author":{"gitId":"-"},"content":"                {"},{"lineNumber":211,"author":{"gitId":"-"},"content":"                    value: instructorData.extensionDeadline,"},{"lineNumber":212,"author":{"gitId":"-"},"content":"                    displayValue: this.dateDetailPipe.transform("},{"lineNumber":213,"author":{"gitId":"-"},"content":"                    instructorData.extensionDeadline,"},{"lineNumber":214,"author":{"gitId":"-"},"content":"                    this.feedbackSessionTimeZone),"},{"lineNumber":215,"author":{"gitId":"-"},"content":"                },"},{"lineNumber":216,"author":{"gitId":"-"},"content":"            ];"},{"lineNumber":217,"author":{"gitId":"-"},"content":"            return rowData;"},{"lineNumber":218,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":219,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":220,"author":{"gitId":"-"},"content":""},{"lineNumber":221,"author":{"gitId":"-"},"content":"  onConfirm(): void {"},{"lineNumber":222,"author":{"gitId":"-"},"content":"    this.isSubmitting \u003d true;"},{"lineNumber":223,"author":{"gitId":"-"},"content":"    this.confirmExtensionCallbackEvent.emit(this.isNotifyDeadlines);"},{"lineNumber":224,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":225,"author":{"gitId":"-"},"content":""},{"lineNumber":226,"author":{"gitId":"-"},"content":"  isDeleteModal(): boolean {"},{"lineNumber":227,"author":{"gitId":"-"},"content":"    return this.modalType \u003d\u003d\u003d ExtensionModalType.DELETE;"},{"lineNumber":228,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":229,"author":{"gitId":"-"},"content":""},{"lineNumber":230,"author":{"gitId":"-"},"content":"  isExtendModal(): boolean {"},{"lineNumber":231,"author":{"gitId":"-"},"content":"    return this.modalType \u003d\u003d\u003d ExtensionModalType.EXTEND;"},{"lineNumber":232,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":233,"author":{"gitId":"-"},"content":""},{"lineNumber":234,"author":{"gitId":"-"},"content":"  isSessionDeleteModal(): boolean {"},{"lineNumber":235,"author":{"gitId":"-"},"content":"    return this.modalType \u003d\u003d\u003d ExtensionModalType.SESSION_DELETE;"},{"lineNumber":236,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":237,"author":{"gitId":"-"},"content":""},{"lineNumber":238,"author":{"gitId":"-"},"content":"  sortStudentColumnsByEventHandler(event: { sortBy: SortBy, sortOrder: SortOrder }): void {"},{"lineNumber":239,"author":{"gitId":"-"},"content":"    this.sortStudentListEvent.emit(event);"},{"lineNumber":240,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":241,"author":{"gitId":"-"},"content":""},{"lineNumber":242,"author":{"gitId":"weiquu"},"content":"  getAriaSortStudent(by: SortBy): String {"},{"lineNumber":243,"author":{"gitId":"weiquu"},"content":"    if (by !\u003d\u003d this.sortStudentsBy) {"},{"lineNumber":244,"author":{"gitId":"weiquu"},"content":"      return \u0027none\u0027;"},{"lineNumber":245,"author":{"gitId":"weiquu"},"content":"    }"},{"lineNumber":246,"author":{"gitId":"weiquu"},"content":"    return this.sortStudentOrder \u003d\u003d\u003d SortOrder.ASC ? \u0027ascending\u0027 : \u0027descending\u0027;"},{"lineNumber":247,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":248,"author":{"gitId":"-"},"content":""},{"lineNumber":249,"author":{"gitId":"-"},"content":"  sortStudentPanelsBy("},{"lineNumber":250,"author":{"gitId":"-"},"content":"    by: SortBy,"},{"lineNumber":251,"author":{"gitId":"-"},"content":"  ): (a: StudentExtensionTableColumnModel, b: StudentExtensionTableColumnModel) \u003d\u003e number {"},{"lineNumber":252,"author":{"gitId":"-"},"content":"    return (a: StudentExtensionTableColumnModel, b: StudentExtensionTableColumnModel): number \u003d\u003e {"},{"lineNumber":253,"author":{"gitId":"-"},"content":"      let strA: string;"},{"lineNumber":254,"author":{"gitId":"-"},"content":"      let strB: string;"},{"lineNumber":255,"author":{"gitId":"-"},"content":"      switch (by) {"},{"lineNumber":256,"author":{"gitId":"-"},"content":"        case SortBy.SECTION_NAME:"},{"lineNumber":257,"author":{"gitId":"-"},"content":"          strA \u003d a.sectionName;"},{"lineNumber":258,"author":{"gitId":"-"},"content":"          strB \u003d b.sectionName;"},{"lineNumber":259,"author":{"gitId":"-"},"content":"          break;"},{"lineNumber":260,"author":{"gitId":"-"},"content":"        case SortBy.TEAM_NAME:"},{"lineNumber":261,"author":{"gitId":"-"},"content":"          strA \u003d a.sectionName;"},{"lineNumber":262,"author":{"gitId":"-"},"content":"          strB \u003d b.sectionName;"},{"lineNumber":263,"author":{"gitId":"-"},"content":"          break;"},{"lineNumber":264,"author":{"gitId":"-"},"content":"        case SortBy.RESPONDENT_NAME:"},{"lineNumber":265,"author":{"gitId":"-"},"content":"          strA \u003d a.name;"},{"lineNumber":266,"author":{"gitId":"-"},"content":"          strB \u003d b.name;"},{"lineNumber":267,"author":{"gitId":"-"},"content":"          break;"},{"lineNumber":268,"author":{"gitId":"-"},"content":"        case SortBy.RESPONDENT_EMAIL:"},{"lineNumber":269,"author":{"gitId":"-"},"content":"          strA \u003d a.email;"},{"lineNumber":270,"author":{"gitId":"-"},"content":"          strB \u003d b.email;"},{"lineNumber":271,"author":{"gitId":"-"},"content":"          break;"},{"lineNumber":272,"author":{"gitId":"-"},"content":"        case SortBy.SESSION_END_DATE:"},{"lineNumber":273,"author":{"gitId":"-"},"content":"          strA \u003d a.extensionDeadline.toString();"},{"lineNumber":274,"author":{"gitId":"-"},"content":"          strB \u003d b.extensionDeadline.toString();"},{"lineNumber":275,"author":{"gitId":"-"},"content":"          break;"},{"lineNumber":276,"author":{"gitId":"-"},"content":"        default:"},{"lineNumber":277,"author":{"gitId":"-"},"content":"          strA \u003d \u0027\u0027;"},{"lineNumber":278,"author":{"gitId":"-"},"content":"          strB \u003d \u0027\u0027;"},{"lineNumber":279,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":280,"author":{"gitId":"-"},"content":"      return this.tableComparatorService.compare(by, this.sortStudentOrder, strA, strB);"},{"lineNumber":281,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":282,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":283,"author":{"gitId":"-"},"content":""},{"lineNumber":284,"author":{"gitId":"-"},"content":"  sortInstructorsColumnsByEventHandler(event: { sortBy: SortBy, sortOrder: SortOrder }): void {"},{"lineNumber":285,"author":{"gitId":"-"},"content":"    this.sortInstructorListEvent.emit(event);"},{"lineNumber":286,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":287,"author":{"gitId":"-"},"content":""},{"lineNumber":288,"author":{"gitId":"weiquu"},"content":"  getAriaSortInstructor(by: SortBy): String {"},{"lineNumber":289,"author":{"gitId":"weiquu"},"content":"    if (by !\u003d\u003d this.sortInstructorsBy) {"},{"lineNumber":290,"author":{"gitId":"weiquu"},"content":"      return \u0027none\u0027;"},{"lineNumber":291,"author":{"gitId":"weiquu"},"content":"    }"},{"lineNumber":292,"author":{"gitId":"weiquu"},"content":"    return this.sortInstructorOrder \u003d\u003d\u003d SortOrder.ASC ? \u0027ascending\u0027 : \u0027descending\u0027;"},{"lineNumber":293,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":294,"author":{"gitId":"-"},"content":""},{"lineNumber":295,"author":{"gitId":"-"},"content":"  sortInstructorPanelsBy("},{"lineNumber":296,"author":{"gitId":"-"},"content":"    by: SortBy,"},{"lineNumber":297,"author":{"gitId":"-"},"content":"  ): (a: InstructorExtensionTableColumnModel, b: InstructorExtensionTableColumnModel) \u003d\u003e number {"},{"lineNumber":298,"author":{"gitId":"-"},"content":"    return (a: InstructorExtensionTableColumnModel, b: InstructorExtensionTableColumnModel): number \u003d\u003e {"},{"lineNumber":299,"author":{"gitId":"-"},"content":"      let strA: string;"},{"lineNumber":300,"author":{"gitId":"-"},"content":"      let strB: string;"},{"lineNumber":301,"author":{"gitId":"-"},"content":"      switch (by) {"},{"lineNumber":302,"author":{"gitId":"-"},"content":"        case SortBy.RESPONDENT_NAME:"},{"lineNumber":303,"author":{"gitId":"-"},"content":"          strA \u003d a.name;"},{"lineNumber":304,"author":{"gitId":"-"},"content":"          strB \u003d b.name;"},{"lineNumber":305,"author":{"gitId":"-"},"content":"          break;"},{"lineNumber":306,"author":{"gitId":"-"},"content":"        case SortBy.RESPONDENT_EMAIL:"},{"lineNumber":307,"author":{"gitId":"-"},"content":"          strA \u003d a.email;"},{"lineNumber":308,"author":{"gitId":"-"},"content":"          strB \u003d b.email;"},{"lineNumber":309,"author":{"gitId":"-"},"content":"          break;"},{"lineNumber":310,"author":{"gitId":"-"},"content":"        case SortBy.INSTRUCTOR_PERMISSION_ROLE:"},{"lineNumber":311,"author":{"gitId":"-"},"content":"          strA \u003d a.role || \u0027\u0027;"},{"lineNumber":312,"author":{"gitId":"-"},"content":"          strB \u003d b.role || \u0027\u0027;"},{"lineNumber":313,"author":{"gitId":"-"},"content":"          break;"},{"lineNumber":314,"author":{"gitId":"-"},"content":"        case SortBy.SESSION_END_DATE:"},{"lineNumber":315,"author":{"gitId":"-"},"content":"          strA \u003d a.extensionDeadline.toString();"},{"lineNumber":316,"author":{"gitId":"-"},"content":"          strB \u003d b.extensionDeadline.toString();"},{"lineNumber":317,"author":{"gitId":"-"},"content":"          break;"},{"lineNumber":318,"author":{"gitId":"-"},"content":"        default:"},{"lineNumber":319,"author":{"gitId":"-"},"content":"          strA \u003d \u0027\u0027;"},{"lineNumber":320,"author":{"gitId":"-"},"content":"          strB \u003d \u0027\u0027;"},{"lineNumber":321,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":322,"author":{"gitId":"-"},"content":"      return this.tableComparatorService.compare(by, this.sortInstructorOrder, strA, strB);"},{"lineNumber":323,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":324,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":325,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"weiquu":10,"-":315}},{"path":"src/web/app/components/feedback-path-panel/feedback-path-panel.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"background-color-light-green margin-top-15px padding-15px\"\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  \u003cdiv\u003e"},{"lineNumber":3,"author":{"gitId":"-"},"content":"    \u003cb class\u003d\"feedback-path-title\"\u003eFeedback Path\u003c/b\u003e (Who is giving feedback about whom?)"},{"lineNumber":4,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":5,"author":{"gitId":"weiquu"},"content":"  \u003cdiv ngbDropdown #mainMenu\u003d\"ngbDropdown\" class\u003d\"margin-top-15px w-100\" autoClose\u003d\"outside\"\u003e"},{"lineNumber":6,"author":{"gitId":"-"},"content":"    \u003cbutton id\u003d\"btn-feedback-path\" class\u003d\"btn btn-light white-space-normal mw-100  d-inline-block\" ngbDropdownToggle"},{"lineNumber":7,"author":{"gitId":"weiquu"},"content":"            [disabled]\u003d\"!model.isEditable || commonFeedbackPaths.size \u003d\u003d\u003d 1\" (click)\u003d\"resetMenu()\"\u003e"},{"lineNumber":8,"author":{"gitId":"weiquu"},"content":"      \u003cspan *ngIf\u003d\"!model.isUsingOtherFeedbackPath\" class\u003d\"text-wrap\"\u003e"},{"lineNumber":9,"author":{"gitId":"-"},"content":"        {{ model.giverType | giverTypeDescription }} will give feedback on \u003ci class\u003d\"fas fa-arrow-right\"\u003e\u003c/i\u003e {{ model.recipientType | recipientTypeDescription }}"},{"lineNumber":10,"author":{"gitId":"-"},"content":"      \u003c/span\u003e"},{"lineNumber":11,"author":{"gitId":"-"},"content":"      \u003cspan *ngIf\u003d\"model.isUsingOtherFeedbackPath\"\u003eCustom feedback path\u003c/span\u003e"},{"lineNumber":12,"author":{"gitId":"-"},"content":"    \u003c/button\u003e"},{"lineNumber":13,"author":{"gitId":"-"},"content":"    \u003cul id\u003d\"feedback-path-dropdown\" ngbDropdownMenu\u003e"},{"lineNumber":14,"author":{"gitId":"-"},"content":"      \u003cli class\u003d\"dropdown-header\"\u003eCommon feedback path combinations\u003c/li\u003e"},{"lineNumber":15,"author":{"gitId":"weiquu"},"content":"      \u003cli *ngFor\u003d\"let path of commonFeedbackPaths | keyvalue\" ngbDropdown #subMenu\u003d\"ngbDropdown\"\u003e"},{"lineNumber":16,"author":{"gitId":"weiquu"},"content":"        \u003cdiv class\u003d\"text-wrap dropdown-item\"\u003e"},{"lineNumber":17,"author":{"gitId":"weiquu"},"content":"          \u003cbutton class\u003d\"dropdown-button\" (click)\u003d\"toggleSubMenu(path.key)\"\u003e"},{"lineNumber":18,"author":{"gitId":"weiquu"},"content":"            {{ path.key | giverTypeDescription }} will give feedback on ... \u003ci class\u003d\"fas fa-caret-{{ isSubMenuOpen(path.key) ? \u0027down\u0027 : \u0027right\u0027 }}\"\u003e\u003c/i\u003e"},{"lineNumber":19,"author":{"gitId":"weiquu"},"content":"          \u003c/button\u003e"},{"lineNumber":20,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":21,"author":{"gitId":"weiquu"},"content":"        \u003cul *ngIf\u003d\"isSubMenuOpen(path.key)\"\u003e"},{"lineNumber":22,"author":{"gitId":"weiquu"},"content":"          \u003cli class\u003d\"text-wrap dropdown-item\" *ngFor\u003d\"let recipient of path.value\"\u003e"},{"lineNumber":23,"author":{"gitId":"weiquu"},"content":"            \u003cbutton class\u003d\"dropdown-button\" (click)\u003d\"changeGiverRecipientType(path.key, recipient); mainMenu.close()\"\u003e"},{"lineNumber":24,"author":{"gitId":"weiquu"},"content":"              {{ recipient | recipientTypeDescription }}"},{"lineNumber":25,"author":{"gitId":"weiquu"},"content":"            \u003c/button\u003e"},{"lineNumber":26,"author":{"gitId":"weiquu"},"content":"          \u003c/li\u003e"},{"lineNumber":27,"author":{"gitId":"weiquu"},"content":"        \u003c/ul\u003e"},{"lineNumber":28,"author":{"gitId":"-"},"content":"      \u003c/li\u003e"},{"lineNumber":29,"author":{"gitId":"-"},"content":"      \u003cli class\u003d\"dropdown-divider\"\u003e\u003c/li\u003e"},{"lineNumber":30,"author":{"gitId":"weiquu"},"content":"      \u003cli class\u003d\"text-wrap dropdown-item\"\u003e"},{"lineNumber":31,"author":{"gitId":"weiquu"},"content":"        \u003cbutton class\u003d\"dropdown-button\" (click)\u003d\"triggerCustomFeedbackPath(); mainMenu.close()\"\u003eCustom feedback path...\u003c/button\u003e"},{"lineNumber":32,"author":{"gitId":"weiquu"},"content":"      \u003c/li\u003e"},{"lineNumber":33,"author":{"gitId":"-"},"content":"    \u003c/ul\u003e"},{"lineNumber":34,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":35,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"row margin-top-15px\" *ngIf\u003d\"model.isUsingOtherFeedbackPath\"\u003e"},{"lineNumber":36,"author":{"gitId":"weiquu"},"content":"    \u003cdiv class\u003d\"col-sm-6 mb-2 mb-sm-0\"\u003e"},{"lineNumber":37,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"row\"\u003e"},{"lineNumber":38,"author":{"gitId":"-"},"content":"        \u003cdiv class\u003d\"col-12\"\u003e"},{"lineNumber":39,"author":{"gitId":"-"},"content":"          \u003cstrong\u003eWho will give the feedback:\u003c/strong\u003e"},{"lineNumber":40,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":41,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":42,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"row\"\u003e"},{"lineNumber":43,"author":{"gitId":"-"},"content":"        \u003cdiv class\u003d\"col-12\"\u003e"},{"lineNumber":44,"author":{"gitId":"-"},"content":"          \u003cselect id\u003d\"giver-type\" class\u003d\"form-control form-select\" [ngModel]\u003d\"model.giverType\"  (ngModelChange)\u003d\"changeGiverRecipientType($event, model.recipientType)\" [disabled]\u003d\"!model.isEditable\"\u003e"},{"lineNumber":45,"author":{"gitId":"-"},"content":"            \u003coption *ngFor\u003d\"let path of allowedFeedbackPaths | keyvalue\" [ngValue]\u003d\"path.key\"\u003e{{ path.key | giverTypeDescription }}\u003c/option\u003e"},{"lineNumber":46,"author":{"gitId":"-"},"content":"          \u003c/select\u003e"},{"lineNumber":47,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":48,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":49,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":50,"author":{"gitId":"weiquu"},"content":"    \u003cdiv class\u003d\"col-sm-6\"\u003e"},{"lineNumber":51,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"row\"\u003e"},{"lineNumber":52,"author":{"gitId":"-"},"content":"        \u003cdiv class\u003d\"col-12\"\u003e"},{"lineNumber":53,"author":{"gitId":"-"},"content":"          \u003cstrong\u003eWho the feedback is about:\u003c/strong\u003e"},{"lineNumber":54,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":55,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":56,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"row\"\u003e"},{"lineNumber":57,"author":{"gitId":"-"},"content":"        \u003cdiv class\u003d\"col-12\"\u003e"},{"lineNumber":58,"author":{"gitId":"-"},"content":"          \u003cselect id\u003d\"receiver-type\" class\u003d\"form-control form-select\" [ngModel]\u003d\"model.recipientType\" (ngModelChange)\u003d\"changeGiverRecipientType(model.giverType, $event)\" [disabled]\u003d\"!model.isEditable\"\u003e"},{"lineNumber":59,"author":{"gitId":"-"},"content":"            \u003coption *ngFor\u003d\"let recipientType of allowedFeedbackPaths.get(model.giverType)\" [ngValue]\u003d\"recipientType\"\u003e{{ recipientType | recipientTypeDescription }}\u003c/option\u003e"},{"lineNumber":60,"author":{"gitId":"-"},"content":"          \u003c/select\u003e"},{"lineNumber":61,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":62,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":63,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":64,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":65,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"row margin-top-15px align-items-center\""},{"lineNumber":66,"author":{"gitId":"-"},"content":"       *ngIf\u003d\"model.recipientType \u003d\u003d\u003d FeedbackParticipantType.STUDENTS || model.recipientType \u003d\u003d\u003d FeedbackParticipantType.STUDENTS_EXCLUDING_SELF"},{"lineNumber":67,"author":{"gitId":"-"},"content":"       || model.recipientType \u003d\u003d\u003d FeedbackParticipantType.STUDENTS_IN_SAME_SECTION || model.recipientType \u003d\u003d\u003d FeedbackParticipantType.TEAMS"},{"lineNumber":68,"author":{"gitId":"-"},"content":"       || model.recipientType \u003d\u003d\u003d FeedbackParticipantType.TEAMS_EXCLUDING_SELF || model.recipientType \u003d\u003d\u003d FeedbackParticipantType.TEAMS_IN_SAME_SECTION"},{"lineNumber":69,"author":{"gitId":"-"},"content":"       || model.recipientType \u003d\u003d\u003d FeedbackParticipantType.INSTRUCTORS\"\u003e"},{"lineNumber":70,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"offset-1 col-md-4 text-md-end\"\u003e"},{"lineNumber":71,"author":{"gitId":"-"},"content":"      The maximum number of {{ model.recipientType | recipientTypeSimplifiedDescription }} each respondent should give feedback to:"},{"lineNumber":72,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":73,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"col-md-2\"\u003e"},{"lineNumber":74,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"input-group\"\u003e"},{"lineNumber":75,"author":{"gitId":"-"},"content":"        \u003cdiv class\u003d\"input-group-text\"\u003e"},{"lineNumber":76,"author":{"gitId":"-"},"content":"          \u003cinput id\u003d\"custom-recipients\" type\u003d\"radio\" [name]\u003d\"model.feedbackQuestionId + \u0027numOfRecipients\u0027\" [ngModel]\u003d\"model.numberOfEntitiesToGiveFeedbackToSetting\""},{"lineNumber":77,"author":{"gitId":"-"},"content":"                 (ngModelChange)\u003d\"triggerNumberOfEntitiesSetting($event)\""},{"lineNumber":78,"author":{"gitId":"-"},"content":"                 [value]\u003d\"NumberOfEntitiesToGiveFeedbackToSetting.CUSTOM\""},{"lineNumber":79,"author":{"gitId":"-"},"content":"                 [disabled]\u003d\"!model.isEditable\"\u003e"},{"lineNumber":80,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":81,"author":{"gitId":"-"},"content":"        \u003cinput id\u003d\"custom-recipients-number\" type\u003d\"number\" min\u003d\"1\" class\u003d\"form-control\" [ngModel]\u003d\"model.customNumberOfEntitiesToGiveFeedbackTo\" (ngModelChange)\u003d\"triggerCustomNumberOfEntities($event)\" [disabled]\u003d\"model.numberOfEntitiesToGiveFeedbackToSetting !\u003d\u003d NumberOfEntitiesToGiveFeedbackToSetting.CUSTOM || !model.isEditable\"\u003e"},{"lineNumber":82,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":83,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":84,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"col-md-2\"\u003e"},{"lineNumber":85,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"form-check\"\u003e"},{"lineNumber":86,"author":{"gitId":"-"},"content":"        \u003clabel class\u003d\"form-check-label\"\u003e"},{"lineNumber":87,"author":{"gitId":"-"},"content":"          \u003cinput id\u003d\"unlimited-recipients\" class\u003d\"form-check-input\" type\u003d\"radio\" [name]\u003d\"model.feedbackQuestionId + \u0027numOfRecipients\u0027\""},{"lineNumber":88,"author":{"gitId":"-"},"content":"                 [ngModel]\u003d\"model.numberOfEntitiesToGiveFeedbackToSetting\" (ngModelChange)\u003d\"triggerNumberOfEntitiesSetting($event)\""},{"lineNumber":89,"author":{"gitId":"-"},"content":"                 [value]\u003d\"NumberOfEntitiesToGiveFeedbackToSetting.UNLIMITED\""},{"lineNumber":90,"author":{"gitId":"-"},"content":"                 [disabled]\u003d\"!model.isEditable\"\u003e"},{"lineNumber":91,"author":{"gitId":"-"},"content":"          Unlimited"},{"lineNumber":92,"author":{"gitId":"-"},"content":"        \u003c/label\u003e"},{"lineNumber":93,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":94,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":95,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":96,"author":{"gitId":"-"},"content":"\u003c/div\u003e"}],"authorContributionMap":{"weiquu":20,"-":76}},{"path":"src/web/app/components/feedback-path-panel/feedback-path-panel.component.scss","fileType":"scss","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":".background-color-light-green {"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  background-color: #E0EEEE;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"}"},{"lineNumber":4,"author":{"gitId":"-"},"content":""},{"lineNumber":5,"author":{"gitId":"-"},"content":".margin-top-15px {"},{"lineNumber":6,"author":{"gitId":"-"},"content":"  margin-top: 15px;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"}"},{"lineNumber":8,"author":{"gitId":"-"},"content":""},{"lineNumber":9,"author":{"gitId":"-"},"content":".padding-15px {"},{"lineNumber":10,"author":{"gitId":"-"},"content":"  padding: 15px;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"}"},{"lineNumber":12,"author":{"gitId":"-"},"content":""},{"lineNumber":13,"author":{"gitId":"-"},"content":".feedback-path-title {"},{"lineNumber":14,"author":{"gitId":"-"},"content":"  color: #2AABD2;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"}"},{"lineNumber":16,"author":{"gitId":"-"},"content":""},{"lineNumber":17,"author":{"gitId":"-"},"content":".dropdown-item {"},{"lineNumber":18,"author":{"gitId":"-"},"content":"  cursor: pointer;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"}"},{"lineNumber":20,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":21,"author":{"gitId":"weiquu"},"content":".dropdown-button {"},{"lineNumber":22,"author":{"gitId":"weiquu"},"content":"  border: none;"},{"lineNumber":23,"author":{"gitId":"weiquu"},"content":"  background: none;"},{"lineNumber":24,"author":{"gitId":"weiquu"},"content":"  width: 100%;"},{"lineNumber":25,"author":{"gitId":"weiquu"},"content":"  text-align: left;"},{"lineNumber":26,"author":{"gitId":"weiquu"},"content":"}"}],"authorContributionMap":{"weiquu":7,"-":19}},{"path":"src/web/app/components/feedback-path-panel/feedback-path-panel.component.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { Component, EventEmitter, Input, Output } from \u0027@angular/core\u0027;"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":3,"author":{"gitId":"-"},"content":"  FeedbackParticipantType,"},{"lineNumber":4,"author":{"gitId":"-"},"content":"  FeedbackQuestionType,"},{"lineNumber":5,"author":{"gitId":"-"},"content":"  FeedbackTextQuestionDetails,"},{"lineNumber":6,"author":{"gitId":"-"},"content":"  NumberOfEntitiesToGiveFeedbackToSetting,"},{"lineNumber":7,"author":{"gitId":"-"},"content":"} from \u0027../../../types/api-output\u0027;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import { QuestionEditFormModel } from \u0027../question-edit-form/question-edit-form-model\u0027;"},{"lineNumber":9,"author":{"gitId":"-"},"content":""},{"lineNumber":10,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":11,"author":{"gitId":"-"},"content":" * Displaying the feedback path panel."},{"lineNumber":12,"author":{"gitId":"-"},"content":" */"},{"lineNumber":13,"author":{"gitId":"-"},"content":"@Component({"},{"lineNumber":14,"author":{"gitId":"-"},"content":"  selector: \u0027tm-feedback-path-panel\u0027,"},{"lineNumber":15,"author":{"gitId":"-"},"content":"  templateUrl: \u0027./feedback-path-panel.component.html\u0027,"},{"lineNumber":16,"author":{"gitId":"-"},"content":"  styleUrls: [\u0027./feedback-path-panel.component.scss\u0027],"},{"lineNumber":17,"author":{"gitId":"-"},"content":"})"},{"lineNumber":18,"author":{"gitId":"-"},"content":"export class FeedbackPathPanelComponent {"},{"lineNumber":19,"author":{"gitId":"-"},"content":""},{"lineNumber":20,"author":{"gitId":"-"},"content":"  // enum"},{"lineNumber":21,"author":{"gitId":"-"},"content":"  FeedbackParticipantType: typeof FeedbackParticipantType \u003d FeedbackParticipantType;"},{"lineNumber":22,"author":{"gitId":"-"},"content":"  FeedbackQuestionType: typeof FeedbackQuestionType \u003d FeedbackQuestionType;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"  NumberOfEntitiesToGiveFeedbackToSetting: typeof NumberOfEntitiesToGiveFeedbackToSetting \u003d"},{"lineNumber":24,"author":{"gitId":"-"},"content":"      NumberOfEntitiesToGiveFeedbackToSetting;"},{"lineNumber":25,"author":{"gitId":"-"},"content":""},{"lineNumber":26,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":27,"author":{"gitId":"-"},"content":"  model: QuestionEditFormModel \u003d {"},{"lineNumber":28,"author":{"gitId":"-"},"content":"    feedbackQuestionId: \u0027\u0027,"},{"lineNumber":29,"author":{"gitId":"-"},"content":""},{"lineNumber":30,"author":{"gitId":"-"},"content":"    questionNumber: 0,"},{"lineNumber":31,"author":{"gitId":"-"},"content":"    questionBrief: \u0027\u0027,"},{"lineNumber":32,"author":{"gitId":"-"},"content":"    questionDescription: \u0027\u0027,"},{"lineNumber":33,"author":{"gitId":"-"},"content":""},{"lineNumber":34,"author":{"gitId":"-"},"content":"    isQuestionHasResponses: false,"},{"lineNumber":35,"author":{"gitId":"-"},"content":""},{"lineNumber":36,"author":{"gitId":"-"},"content":"    questionType: FeedbackQuestionType.TEXT,"},{"lineNumber":37,"author":{"gitId":"-"},"content":"    questionDetails: {"},{"lineNumber":38,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.TEXT,"},{"lineNumber":39,"author":{"gitId":"-"},"content":"      questionText: \u0027\u0027,"},{"lineNumber":40,"author":{"gitId":"-"},"content":"    } as FeedbackTextQuestionDetails,"},{"lineNumber":41,"author":{"gitId":"-"},"content":""},{"lineNumber":42,"author":{"gitId":"-"},"content":"    giverType: FeedbackParticipantType.STUDENTS,"},{"lineNumber":43,"author":{"gitId":"-"},"content":"    recipientType: FeedbackParticipantType.OWN_TEAM_MEMBERS,"},{"lineNumber":44,"author":{"gitId":"-"},"content":""},{"lineNumber":45,"author":{"gitId":"-"},"content":"    numberOfEntitiesToGiveFeedbackToSetting: NumberOfEntitiesToGiveFeedbackToSetting.UNLIMITED,"},{"lineNumber":46,"author":{"gitId":"-"},"content":"    customNumberOfEntitiesToGiveFeedbackTo: 1,"},{"lineNumber":47,"author":{"gitId":"-"},"content":""},{"lineNumber":48,"author":{"gitId":"-"},"content":"    showResponsesTo: [],"},{"lineNumber":49,"author":{"gitId":"-"},"content":"    showGiverNameTo: [],"},{"lineNumber":50,"author":{"gitId":"-"},"content":"    showRecipientNameTo: [],"},{"lineNumber":51,"author":{"gitId":"-"},"content":""},{"lineNumber":52,"author":{"gitId":"-"},"content":"    commonVisibilitySettingName: \u0027\u0027,"},{"lineNumber":53,"author":{"gitId":"-"},"content":""},{"lineNumber":54,"author":{"gitId":"-"},"content":"    isUsingOtherFeedbackPath: false,"},{"lineNumber":55,"author":{"gitId":"-"},"content":"    isUsingOtherVisibilitySetting: false,"},{"lineNumber":56,"author":{"gitId":"-"},"content":"    isDeleting: false,"},{"lineNumber":57,"author":{"gitId":"-"},"content":"    isDuplicating: false,"},{"lineNumber":58,"author":{"gitId":"-"},"content":"    isEditable: false,"},{"lineNumber":59,"author":{"gitId":"-"},"content":"    isSaving: false,"},{"lineNumber":60,"author":{"gitId":"-"},"content":"    isCollapsed: false,"},{"lineNumber":61,"author":{"gitId":"-"},"content":"    isVisibilityChanged: false,"},{"lineNumber":62,"author":{"gitId":"-"},"content":"    isFeedbackPathChanged: false,"},{"lineNumber":63,"author":{"gitId":"-"},"content":"    isQuestionDetailsChanged: false,"},{"lineNumber":64,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":65,"author":{"gitId":"-"},"content":""},{"lineNumber":66,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":67,"author":{"gitId":"-"},"content":"  commonFeedbackPaths: Map\u003cFeedbackParticipantType, FeedbackParticipantType[]\u003e \u003d new Map();"},{"lineNumber":68,"author":{"gitId":"-"},"content":""},{"lineNumber":69,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":70,"author":{"gitId":"-"},"content":"  allowedFeedbackPaths: Map\u003cFeedbackParticipantType, FeedbackParticipantType[]\u003e \u003d new Map();"},{"lineNumber":71,"author":{"gitId":"-"},"content":""},{"lineNumber":72,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":73,"author":{"gitId":"-"},"content":"  customFeedbackPath: EventEmitter\u003cboolean\u003e \u003d new EventEmitter\u003cboolean\u003e();"},{"lineNumber":74,"author":{"gitId":"-"},"content":""},{"lineNumber":75,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":76,"author":{"gitId":"-"},"content":"  customNumberOfEntitiesToGiveFeedbackTo: EventEmitter\u003cnumber\u003e \u003d new EventEmitter\u003cnumber\u003e();"},{"lineNumber":77,"author":{"gitId":"-"},"content":""},{"lineNumber":78,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":79,"author":{"gitId":"-"},"content":"  numberOfEntitiesToGiveFeedbackToSetting: EventEmitter\u003cNumberOfEntitiesToGiveFeedbackToSetting\u003e \u003d"},{"lineNumber":80,"author":{"gitId":"-"},"content":"    new EventEmitter\u003cNumberOfEntitiesToGiveFeedbackToSetting\u003e();"},{"lineNumber":81,"author":{"gitId":"-"},"content":""},{"lineNumber":82,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":83,"author":{"gitId":"-"},"content":"  triggerModelChangeBatch: EventEmitter\u003cPartial\u003cQuestionEditFormModel\u003e\u003e \u003d"},{"lineNumber":84,"author":{"gitId":"-"},"content":"    new EventEmitter\u003cPartial\u003cQuestionEditFormModel\u003e\u003e();"},{"lineNumber":85,"author":{"gitId":"-"},"content":""},{"lineNumber":86,"author":{"gitId":"weiquu"},"content":"  subMenuStatuses: Map\u003cFeedbackParticipantType, boolean\u003e \u003d new Map();"},{"lineNumber":87,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":88,"author":{"gitId":"-"},"content":"  triggerCustomNumberOfEntities(data: number): void {"},{"lineNumber":89,"author":{"gitId":"-"},"content":"    this.customNumberOfEntitiesToGiveFeedbackTo.emit(data);"},{"lineNumber":90,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":91,"author":{"gitId":"-"},"content":""},{"lineNumber":92,"author":{"gitId":"-"},"content":"  triggerNumberOfEntitiesSetting(data: NumberOfEntitiesToGiveFeedbackToSetting): void {"},{"lineNumber":93,"author":{"gitId":"-"},"content":"    this.numberOfEntitiesToGiveFeedbackToSetting.emit(data);"},{"lineNumber":94,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":95,"author":{"gitId":"-"},"content":""},{"lineNumber":96,"author":{"gitId":"-"},"content":"  triggerCustomFeedbackPath(): void {"},{"lineNumber":97,"author":{"gitId":"-"},"content":"    this.customFeedbackPath.emit(true);"},{"lineNumber":98,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":99,"author":{"gitId":"-"},"content":""},{"lineNumber":100,"author":{"gitId":"weiquu"},"content":"  toggleSubMenu(menu: FeedbackParticipantType): void {"},{"lineNumber":101,"author":{"gitId":"weiquu"},"content":"    this.subMenuStatuses.set(menu, !this.subMenuStatuses.get(menu));"},{"lineNumber":102,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":103,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":104,"author":{"gitId":"weiquu"},"content":"  resetMenu(): void {"},{"lineNumber":105,"author":{"gitId":"weiquu"},"content":"    this.subMenuStatuses.forEach((_, key) \u003d\u003e this.subMenuStatuses.set(key, false));"},{"lineNumber":106,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":107,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":108,"author":{"gitId":"weiquu"},"content":"  isSubMenuOpen(menu: FeedbackParticipantType): boolean {"},{"lineNumber":109,"author":{"gitId":"weiquu"},"content":"    let subMenuState: boolean | undefined \u003d this.subMenuStatuses.get(menu);"},{"lineNumber":110,"author":{"gitId":"weiquu"},"content":"    if (subMenuState \u003d\u003d\u003d undefined) {"},{"lineNumber":111,"author":{"gitId":"weiquu"},"content":"      subMenuState \u003d false;"},{"lineNumber":112,"author":{"gitId":"weiquu"},"content":"    }"},{"lineNumber":113,"author":{"gitId":"weiquu"},"content":"    return subMenuState;"},{"lineNumber":114,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":115,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":116,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":117,"author":{"gitId":"-"},"content":"   * Change the {@code giverType} and {@code recipientType} and reset the visibility settings."},{"lineNumber":118,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":119,"author":{"gitId":"-"},"content":"  changeGiverRecipientType(giverType: FeedbackParticipantType, recipientType: FeedbackParticipantType): void {"},{"lineNumber":120,"author":{"gitId":"-"},"content":"    // check if current recipientType is allowed for giverType,"},{"lineNumber":121,"author":{"gitId":"-"},"content":"    // if not, set default recipientType to the first allowed type as default."},{"lineNumber":122,"author":{"gitId":"-"},"content":"    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion"},{"lineNumber":123,"author":{"gitId":"-"},"content":"    const allowedRecipientTypes: FeedbackParticipantType[] \u003d this.allowedFeedbackPaths.get(giverType)!;"},{"lineNumber":124,"author":{"gitId":"-"},"content":"    let newRecipientType: FeedbackParticipantType \u003d recipientType;"},{"lineNumber":125,"author":{"gitId":"-"},"content":"    if (allowedRecipientTypes.indexOf(recipientType) \u003d\u003d\u003d -1) {"},{"lineNumber":126,"author":{"gitId":"-"},"content":"      newRecipientType \u003d allowedRecipientTypes[0];"},{"lineNumber":127,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":128,"author":{"gitId":"-"},"content":"    if (this.model.giverType \u003d\u003d\u003d giverType \u0026\u0026 this.model.recipientType \u003d\u003d\u003d newRecipientType) {"},{"lineNumber":129,"author":{"gitId":"-"},"content":"      // do not reset the visibility settings if reverting feedback path to preset template provided"},{"lineNumber":130,"author":{"gitId":"-"},"content":"      if (this.model.isUsingOtherFeedbackPath) {"},{"lineNumber":131,"author":{"gitId":"-"},"content":"        // remove the custom feedback if selecting a common feedback path"},{"lineNumber":132,"author":{"gitId":"-"},"content":"        this.triggerModelChangeBatch.emit({"},{"lineNumber":133,"author":{"gitId":"-"},"content":"          isUsingOtherFeedbackPath: false,"},{"lineNumber":134,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":135,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":136,"author":{"gitId":"-"},"content":"    } else {"},{"lineNumber":137,"author":{"gitId":"-"},"content":"      this.triggerModelChangeBatch.emit({"},{"lineNumber":138,"author":{"gitId":"-"},"content":"        giverType,"},{"lineNumber":139,"author":{"gitId":"-"},"content":"        recipientType: newRecipientType,"},{"lineNumber":140,"author":{"gitId":"-"},"content":"        commonVisibilitySettingName: \u0027Please select a visibility option\u0027,"},{"lineNumber":141,"author":{"gitId":"-"},"content":"        isUsingOtherFeedbackPath: false,"},{"lineNumber":142,"author":{"gitId":"-"},"content":"        isUsingOtherVisibilitySetting: false,"},{"lineNumber":143,"author":{"gitId":"-"},"content":"        showResponsesTo: [],"},{"lineNumber":144,"author":{"gitId":"-"},"content":"        showGiverNameTo: [],"},{"lineNumber":145,"author":{"gitId":"-"},"content":"        showRecipientNameTo: [],"},{"lineNumber":146,"author":{"gitId":"-"},"content":"      });"},{"lineNumber":147,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":148,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":149,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"weiquu":18,"-":131}},{"path":"src/web/app/components/progress-bar/progress-bar.component.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { Component, OnInit } from \u0027@angular/core\u0027;"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import { ProgressBarService } from \u0027../../../services/progress-bar.service\u0027;"},{"lineNumber":3,"author":{"gitId":"-"},"content":""},{"lineNumber":4,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":5,"author":{"gitId":"-"},"content":" * Progress bar used to show download progress."},{"lineNumber":6,"author":{"gitId":"-"},"content":" */"},{"lineNumber":7,"author":{"gitId":"-"},"content":"@Component({"},{"lineNumber":8,"author":{"gitId":"-"},"content":"  selector: \u0027tm-progress-bar\u0027,"},{"lineNumber":9,"author":{"gitId":"-"},"content":"  templateUrl: \u0027./progress-bar.component.html\u0027,"},{"lineNumber":10,"author":{"gitId":"-"},"content":"})"},{"lineNumber":11,"author":{"gitId":"-"},"content":"export class ProgressBarComponent implements OnInit {"},{"lineNumber":12,"author":{"gitId":"-"},"content":""},{"lineNumber":13,"author":{"gitId":"domlimm"},"content":"  progressPercentage: number \u003d 10;"},{"lineNumber":14,"author":{"gitId":"-"},"content":""},{"lineNumber":15,"author":{"gitId":"-"},"content":"  constructor(private progressBarService: ProgressBarService) { }"},{"lineNumber":16,"author":{"gitId":"-"},"content":""},{"lineNumber":17,"author":{"gitId":"-"},"content":"  ngOnInit(): void {"},{"lineNumber":18,"author":{"gitId":"-"},"content":"    this.getProgress();"},{"lineNumber":19,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":20,"author":{"gitId":"-"},"content":""},{"lineNumber":21,"author":{"gitId":"-"},"content":"  getProgress(): void {"},{"lineNumber":22,"author":{"gitId":"-"},"content":"    this.progressBarService.progressPercentage.subscribe((progressPercentage: number) \u003d\u003e {"},{"lineNumber":23,"author":{"gitId":"-"},"content":"      this.progressPercentage \u003d progressPercentage;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":25,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":26,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"domlimm":1,"-":25}},{"path":"src/web/app/components/question-edit-brief-description-form/question-edit-brief-description-form.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"background-color-light-blue\"\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"row padding-15px text-start\"\u003e"},{"lineNumber":3,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"col-md-2\"\u003e"},{"lineNumber":4,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"question-basic-info\"\u003eQuestion\u003c/div\u003e"},{"lineNumber":5,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":6,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"col-md-10\"\u003e"},{"lineNumber":7,"author":{"gitId":"-"},"content":"    \u003ctextarea id\u003d\"question-brief\" class\u003d\"form-control\" [ngModel]\u003d\"brief\" (ngModelChange)\u003d\"triggerBriefChange($event)\" [disabled]\u003d\"isBriefDisabled\" [placeholder]\u003d\"\u0027A concise version of the question e.g. \u0026quot;How well did the team member communicate?\u0026quot;\u0027\"\u003e\u003c/textarea\u003e"},{"lineNumber":8,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":9,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":10,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"row padding-15px text-start\"\u003e"},{"lineNumber":11,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"col-md-2\"\u003e"},{"lineNumber":12,"author":{"gitId":"weiquu"},"content":"      \u003cpre role\u003d\"text\" class\u003d\"question-basic-info\"\u003e"},{"lineNumber":13,"author":{"gitId":"weiquu"},"content":"        [Optional]"},{"lineNumber":14,"author":{"gitId":"weiquu"},"content":"        Description"},{"lineNumber":15,"author":{"gitId":"weiquu"},"content":"      \u003c/pre\u003e"},{"lineNumber":16,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":17,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"col-md-10\"\u003e"},{"lineNumber":18,"author":{"gitId":"-"},"content":"      \u003ctm-rich-text-editor [richText]\u003d\"description\" (richTextChange)\u003d\"triggerDescriptionChange($event)\" [hasCharacterLimit]\u003d\"true\" [isDisabled]\u003d\"isDescriptionDisabled\" minHeightInPx\u003d\"100\"  [placeholderText]\u003d\"\u0027More details about the question e.g. \u0026quot;In answering the question, do consider communications made informally within the team, and formal communications with the instructors and tutors.\u0026quot;\u0027\"\u003e\u003c/tm-rich-text-editor\u003e"},{"lineNumber":19,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":20,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":21,"author":{"gitId":"-"},"content":"\u003c/div\u003e"}],"authorContributionMap":{"weiquu":4,"-":17}},{"path":"src/web/app/components/question-edit-brief-description-form/question-edit-brief-description-form.component.scss","fileType":"scss","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":".background-color-light-blue {"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  background-color: #EAEFF5;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"}"},{"lineNumber":4,"author":{"gitId":"-"},"content":""},{"lineNumber":5,"author":{"gitId":"-"},"content":".padding-15px {"},{"lineNumber":6,"author":{"gitId":"-"},"content":"  padding: 15px;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"}"},{"lineNumber":8,"author":{"gitId":"-"},"content":""},{"lineNumber":9,"author":{"gitId":"-"},"content":".question-basic-info {"},{"lineNumber":10,"author":{"gitId":"-"},"content":"  padding-left: 15px;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"  font-weight: bold;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"}"},{"lineNumber":13,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":14,"author":{"gitId":"weiquu"},"content":"pre {"},{"lineNumber":15,"author":{"gitId":"weiquu"},"content":"  white-space: pre-line;"},{"lineNumber":16,"author":{"gitId":"weiquu"},"content":"  font-size: inherit;"},{"lineNumber":17,"author":{"gitId":"weiquu"},"content":"  font-family: inherit;"},{"lineNumber":18,"author":{"gitId":"weiquu"},"content":"  margin-bottom: 0;"},{"lineNumber":19,"author":{"gitId":"weiquu"},"content":"}"}],"authorContributionMap":{"weiquu":7,"-":12}},{"path":"src/web/app/components/question-edit-form/question-edit-form.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003cdiv id\u003d\"question-form-{{ model.questionNumber }}\" class\u003d\"card\"\u003e"},{"lineNumber":2,"author":{"gitId":"jasonqiu212"},"content":"  \u003cbutton class\u003d\"card-header bg-primary text-white cursor-pointer border-0\" (click)\u003d\"triggerModelChange(\u0027isCollapsed\u0027, !model.isCollapsed)\"\u003e"},{"lineNumber":3,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"collapse-caret\"\u003e"},{"lineNumber":4,"author":{"gitId":"-"},"content":"      \u003ctm-panel-chevron [isExpanded]\u003d\"!model.isCollapsed\"\u003e\u003c/tm-panel-chevron\u003e"},{"lineNumber":5,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":6,"author":{"gitId":"jasonqiu212"},"content":"    \u003cdiv class\u003d\"d-flex flex-fill flex-sm-row flex-column align-items-sm-center align-items-start\"\u003e"},{"lineNumber":7,"author":{"gitId":"jasonqiu212"},"content":"      \u003cdiv id\u003d\"question-header\" class\u003d\"d-flex flex-column text-start\"\u003e"},{"lineNumber":8,"author":{"gitId":"jasonqiu212"},"content":"        \u003cdiv class\u003d\"d-flex flex-sm-row flex-column align-items-sm-center align-items-start\"\u003e"},{"lineNumber":9,"author":{"gitId":"jasonqiu212"},"content":"          \u003ch2 class\u003d\"question-number fw-bold me-1\"\u003eQuestion \u003cspan id\u003d\"question-number\" *ngIf\u003d\"!model.isEditable\"\u003e{{ model.questionNumber }}\u003c/span\u003e"},{"lineNumber":10,"author":{"gitId":"-"},"content":"            \u003cselect id\u003d\"question-number-dropdown\" class\u003d\"form-control form-select question-number-select\" [ngModel]\u003d\"model.questionNumber\" (ngModelChange)\u003d\"triggerModelChange(\u0027questionNumber\u0027, $event)\" *ngIf\u003d\"model.isEditable\" (click)\u003d\"$event.stopPropagation()\"\u003e"},{"lineNumber":11,"author":{"gitId":"-"},"content":"              \u003coption *ngFor\u003d\"let i of range(numOfQuestions)\" [ngValue]\u003d\"i + 1\"\u003e{{ i + 1 }}\u003c/option\u003e"},{"lineNumber":12,"author":{"gitId":"-"},"content":"            \u003c/select\u003e"},{"lineNumber":13,"author":{"gitId":"jasonqiu212"},"content":"          \u003c/h2\u003e"},{"lineNumber":14,"author":{"gitId":"jasonqiu212"},"content":"        \u003cspan id\u003d\"question-type\"\u003e{{ model.questionType | questionTypeName }}\u003c/span\u003e"},{"lineNumber":15,"author":{"gitId":"jasonqiu212"},"content":"        \u003c/div\u003e"},{"lineNumber":16,"author":{"gitId":"-"},"content":"        \u003cng-container *ngIf\u003d\"model.isCollapsed\"\u003e"},{"lineNumber":17,"author":{"gitId":"-"},"content":"          \u003cdiv class\u003d\"collapse-qn-description\"\u003e{{ model.questionBrief }}\u003c/div\u003e"},{"lineNumber":18,"author":{"gitId":"-"},"content":"        \u003c/ng-container\u003e"},{"lineNumber":19,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":20,"author":{"gitId":"jasonqiu212"},"content":"      \u003cdiv class\u003d\"card-header-btn-toolbar ms-0 ms-sm-auto text-start\"\u003e"},{"lineNumber":21,"author":{"gitId":"-"},"content":"        \u003cdiv *ngIf\u003d\"formMode \u003d\u003d\u003d QuestionEditFormMode.EDIT\"\u003e"},{"lineNumber":22,"author":{"gitId":"-"},"content":"          \u003cbutton id\u003d\"btn-edit-question\" type\u003d\"button\" class\u003d\"btn btn-primary btn-sm\" *ngIf\u003d\"!model.isEditable\""},{"lineNumber":23,"author":{"gitId":"-"},"content":"                  (click)\u003d\"triggerModelChangeBatch({\u0027isEditable\u0027: true, \u0027isCollapsed\u0027: false}); $event.stopPropagation();\""},{"lineNumber":24,"author":{"gitId":"-"},"content":"                  [disabled]\u003d\"model.isSaving || model.isDeleting || model.isDuplicating\"\u003e"},{"lineNumber":25,"author":{"gitId":"-"},"content":"            \u003ci class\u003d\"fas fa-pencil-alt\"\u003e\u003c/i\u003e Edit"},{"lineNumber":26,"author":{"gitId":"-"},"content":"          \u003c/button\u003e"},{"lineNumber":27,"author":{"gitId":"-"},"content":"          \u003cbutton id\u003d\"btn-save-question\" type\u003d\"button\" class\u003d\"btn btn-primary btn-sm\" *ngIf\u003d\"model.isEditable\""},{"lineNumber":28,"author":{"gitId":"-"},"content":"                  (click)\u003d\"saveQuestionHandler(); $event.stopPropagation();\""},{"lineNumber":29,"author":{"gitId":"-"},"content":"                  [disabled]\u003d\"model.isSaving || model.isDeleting || model.isDuplicating\"\u003e"},{"lineNumber":30,"author":{"gitId":"-"},"content":"            \u003ctm-ajax-loading *ngIf\u003d\"model.isSaving\"\u003e\u003c/tm-ajax-loading\u003e\u003ci class\u003d\"fas fa-check\"\u003e\u003c/i\u003e Save"},{"lineNumber":31,"author":{"gitId":"-"},"content":"          \u003c/button\u003e"},{"lineNumber":32,"author":{"gitId":"-"},"content":"          \u003cbutton type\u003d\"button\" class\u003d\"btn btn-primary btn-sm\" *ngIf\u003d\"model.isEditable\""},{"lineNumber":33,"author":{"gitId":"-"},"content":"                  (click)\u003d\"discardChangesHandler(false); $event.stopPropagation();\""},{"lineNumber":34,"author":{"gitId":"-"},"content":"                  [disabled]\u003d\"model.isSaving || model.isDeleting || model.isDuplicating\"\u003e"},{"lineNumber":35,"author":{"gitId":"-"},"content":"            \u003ci class\u003d\"fas fa-ban\"\u003e\u003c/i\u003e Cancel"},{"lineNumber":36,"author":{"gitId":"-"},"content":"          \u003c/button\u003e"},{"lineNumber":37,"author":{"gitId":"-"},"content":"          \u003cbutton id\u003d\"btn-delete-question\" type\u003d\"button\" class\u003d\"btn btn-primary btn-sm\""},{"lineNumber":38,"author":{"gitId":"-"},"content":"                  (click)\u003d\"deleteCurrentQuestionHandler(); $event.stopPropagation();\""},{"lineNumber":39,"author":{"gitId":"-"},"content":"                  [disabled]\u003d\"model.isSaving || model.isDeleting || model.isDuplicating\"\u003e"},{"lineNumber":40,"author":{"gitId":"-"},"content":"            \u003ctm-ajax-loading *ngIf\u003d\"model.isDeleting\"\u003e\u003c/tm-ajax-loading\u003e\u003ci class\u003d\"fas fa-trash\"\u003e\u003c/i\u003e Delete"},{"lineNumber":41,"author":{"gitId":"-"},"content":"          \u003c/button\u003e"},{"lineNumber":42,"author":{"gitId":"-"},"content":"          \u003cbutton id\u003d\"btn-duplicate-question\" type\u003d\"button\" class\u003d\"btn btn-primary btn-sm\" container\u003d\"body\""},{"lineNumber":43,"author":{"gitId":"-"},"content":"                  (click)\u003d\"duplicateCurrentQuestionHandler(); $event.stopPropagation();\""},{"lineNumber":44,"author":{"gitId":"-"},"content":"                  [disabled]\u003d\"model.isSaving || model.isDeleting || model.isDuplicating\""},{"lineNumber":45,"author":{"gitId":"-"},"content":"                  ngbTooltip\u003d\"Make a copy of the existing question and add to the current feedback session.\""},{"lineNumber":46,"author":{"gitId":"-"},"content":"                  container\u003d\"body\"\u003e"},{"lineNumber":47,"author":{"gitId":"-"},"content":"            \u003ctm-ajax-loading *ngIf\u003d\"model.isDuplicating\"\u003e\u003c/tm-ajax-loading\u003e\u003ci class\u003d\"far fa-copy\"\u003e\u003c/i\u003e Duplicate"},{"lineNumber":48,"author":{"gitId":"-"},"content":"          \u003c/button\u003e"},{"lineNumber":49,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":50,"author":{"gitId":"-"},"content":"        \u003cdiv *ngIf\u003d\"formMode \u003d\u003d\u003d QuestionEditFormMode.ADD\"\u003e"},{"lineNumber":51,"author":{"gitId":"-"},"content":"          \u003cbutton type\u003d\"button\" class\u003d\"btn btn-primary btn-sm\""},{"lineNumber":52,"author":{"gitId":"-"},"content":"                  (click)\u003d\"discardChangesHandler(true); $event.stopPropagation();\""},{"lineNumber":53,"author":{"gitId":"-"},"content":"                  [disabled]\u003d\"model.isSaving || model.isDeleting || model.isDuplicating\"\u003e"},{"lineNumber":54,"author":{"gitId":"-"},"content":"            \u003ci class\u003d\"fas fa-ban\"\u003e\u003c/i\u003e"},{"lineNumber":55,"author":{"gitId":"-"},"content":"            Cancel"},{"lineNumber":56,"author":{"gitId":"-"},"content":"          \u003c/button\u003e"},{"lineNumber":57,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":58,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":59,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":60,"author":{"gitId":"jasonqiu212"},"content":"  \u003c/button\u003e"},{"lineNumber":61,"author":{"gitId":"-"},"content":"  \u003cdiv *ngIf\u003d\"!model.isCollapsed\" @collapseAnim\u003e"},{"lineNumber":62,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"card-body\"\u003e"},{"lineNumber":63,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"background-color-light-blue\"\u003e"},{"lineNumber":64,"author":{"gitId":"-"},"content":"        \u003cdiv class\u003d\"row\"\u003e"},{"lineNumber":65,"author":{"gitId":"-"},"content":"          \u003cdiv class\u003d\"col-12\"\u003e"},{"lineNumber":66,"author":{"gitId":"-"},"content":"            \u003ctm-question-edit-brief-description-form [brief]\u003d\"model.questionBrief\" (briefChange)\u003d\"triggerModelChange(\u0027questionBrief\u0027, $event)\" [isBriefDisabled]\u003d\"!model.isEditable\""},{"lineNumber":67,"author":{"gitId":"-"},"content":"                                                     [description]\u003d\"model.questionDescription\" (descriptionChange)\u003d\"triggerModelChange(\u0027questionDescription\u0027, $event)\" [isDescriptionDisabled]\u003d\"!model.isEditable\""},{"lineNumber":68,"author":{"gitId":"-"},"content":"            \u003e\u003c/tm-question-edit-brief-description-form\u003e"},{"lineNumber":69,"author":{"gitId":"-"},"content":"            \u003cdiv class\u003d\"padding-15px\"\u003e"},{"lineNumber":70,"author":{"gitId":"-"},"content":"              \u003ctm-text-question-edit-details-form *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.TEXT\" [details]\u003d\"model.questionDetails\" (detailsChange)\u003d\"triggerModelChange(\u0027questionDetails\u0027, $event)\" [isEditable]\u003d\"model.isEditable\"\u003e\u003c/tm-text-question-edit-details-form\u003e"},{"lineNumber":71,"author":{"gitId":"-"},"content":"              \u003ctm-contribution-question-edit-details-form *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.CONTRIB\" [details]\u003d\"model.questionDetails\" (detailsChange)\u003d\"triggerModelChange(\u0027questionDetails\u0027, $event)\" [isEditable]\u003d\"model.isEditable\"\u003e\u003c/tm-contribution-question-edit-details-form\u003e"},{"lineNumber":72,"author":{"gitId":"-"},"content":"              \u003ctm-mcq-question-edit-details-form *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.MCQ\" [details]\u003d\"model.questionDetails\" (detailsChange)\u003d\"triggerModelChange(\u0027questionDetails\u0027, $event)\" [isEditable]\u003d\"model.isEditable\"\u003e\u003c/tm-mcq-question-edit-details-form\u003e"},{"lineNumber":73,"author":{"gitId":"-"},"content":"              \u003ctm-msq-question-edit-details-form *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.MSQ\" [details]\u003d\"model.questionDetails\" (detailsChange)\u003d\"triggerModelChange(\u0027questionDetails\u0027, $event)\" [isEditable]\u003d\"model.isEditable\"\u003e\u003c/tm-msq-question-edit-details-form\u003e"},{"lineNumber":74,"author":{"gitId":"-"},"content":"              \u003ctm-num-scale-question-edit-details-form *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.NUMSCALE\" [details]\u003d\"model.questionDetails\" (detailsChange)\u003d\"triggerModelChange(\u0027questionDetails\u0027, $event)\" [isEditable]\u003d\"model.isEditable\"\u003e\u003c/tm-num-scale-question-edit-details-form\u003e"},{"lineNumber":75,"author":{"gitId":"-"},"content":"              \u003ctm-rank-options-question-edit-details-form *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.RANK_OPTIONS\" [details]\u003d\"model.questionDetails\" (detailsChange)\u003d\"triggerModelChange(\u0027questionDetails\u0027, $event)\" [isEditable]\u003d\"model.isEditable\"\u003e\u003c/tm-rank-options-question-edit-details-form\u003e"},{"lineNumber":76,"author":{"gitId":"-"},"content":"              \u003ctm-rank-recipients-question-edit-details-form *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.RANK_RECIPIENTS\" [details]\u003d\"model.questionDetails\" (detailsChange)\u003d\"triggerModelChange(\u0027questionDetails\u0027, $event)\" [isEditable]\u003d\"model.isEditable\"\u003e\u003c/tm-rank-recipients-question-edit-details-form\u003e"},{"lineNumber":77,"author":{"gitId":"-"},"content":"              \u003ctm-rubric-question-edit-details-form *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.RUBRIC\" [details]\u003d\"model.questionDetails\" (detailsChange)\u003d\"triggerModelChange(\u0027questionDetails\u0027, $event)\" [isEditable]\u003d\"model.isEditable\"\u003e\u003c/tm-rubric-question-edit-details-form\u003e"},{"lineNumber":78,"author":{"gitId":"-"},"content":"              \u003ctm-constsum-options-question-edit-details-form *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.CONSTSUM_OPTIONS\" [details]\u003d\"model.questionDetails\" (detailsChange)\u003d\"triggerModelChange(\u0027questionDetails\u0027, $event)\" [isEditable]\u003d\"model.isEditable\"\u003e\u003c/tm-constsum-options-question-edit-details-form\u003e"},{"lineNumber":79,"author":{"gitId":"-"},"content":"              \u003ctm-constsum-recipients-question-edit-details-form *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.CONSTSUM_RECIPIENTS\" [details]\u003d\"model.questionDetails\" (detailsChange)\u003d\"triggerModelChange(\u0027questionDetails\u0027, $event)\" [isEditable]\u003d\"model.isEditable\"\u003e\u003c/tm-constsum-recipients-question-edit-details-form\u003e"},{"lineNumber":80,"author":{"gitId":"-"},"content":"            \u003c/div\u003e"},{"lineNumber":81,"author":{"gitId":"-"},"content":"          \u003c/div\u003e"},{"lineNumber":82,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":83,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":84,"author":{"gitId":"-"},"content":"      \u003ctm-feedback-path-panel [model]\u003d\"model\" [commonFeedbackPaths]\u003d\"commonFeedbackPaths\""},{"lineNumber":85,"author":{"gitId":"-"},"content":"                              [allowedFeedbackPaths]\u003d\"allowedFeedbackPaths\""},{"lineNumber":86,"author":{"gitId":"-"},"content":"                              (customFeedbackPath)\u003d\"triggerModelChange(\u0027isUsingOtherFeedbackPath\u0027, $event)\""},{"lineNumber":87,"author":{"gitId":"-"},"content":"                              (customNumberOfEntitiesToGiveFeedbackTo)\u003d\"triggerModelChange(\u0027customNumberOfEntitiesToGiveFeedbackTo\u0027, $event)\""},{"lineNumber":88,"author":{"gitId":"-"},"content":"                              (numberOfEntitiesToGiveFeedbackToSetting)\u003d\"triggerModelChange(\u0027numberOfEntitiesToGiveFeedbackToSetting\u0027, $event)\""},{"lineNumber":89,"author":{"gitId":"-"},"content":"                              (triggerModelChangeBatch)\u003d\"triggerModelChangeBatch($event)\"\u003e\u003c/tm-feedback-path-panel\u003e"},{"lineNumber":90,"author":{"gitId":"-"},"content":"      \u003ctm-visibility-panel [model]\u003d\"model\" [isCustomFeedbackVisibilitySettingAllowed]\u003d\"isCustomFeedbackVisibilitySettingAllowed\""},{"lineNumber":91,"author":{"gitId":"-"},"content":"                           [commonFeedbackVisibilitySettings]\u003d\"commonFeedbackVisibilitySettings\""},{"lineNumber":92,"author":{"gitId":"-"},"content":"                           (customVisibilitySetting)\u003d\"triggerModelChange(\u0027isUsingOtherVisibilitySetting\u0027, $event)\""},{"lineNumber":93,"author":{"gitId":"-"},"content":"                           (triggerModelChangeBatch)\u003d\"triggerModelChangeBatch($event)\""},{"lineNumber":94,"author":{"gitId":"-"},"content":"                           [visibilityStateMachine]\u003d\"visibilityStateMachine\"\u003e\u003c/tm-visibility-panel\u003e"},{"lineNumber":95,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"row margin-top-15px\" *ngIf\u003d\"!isDisplayOnly\"\u003e"},{"lineNumber":96,"author":{"gitId":"-"},"content":"        \u003cdiv class\u003d\"col-12 text-end\"\u003e"},{"lineNumber":97,"author":{"gitId":"-"},"content":"          \u003cbutton type\u003d\"button\" class\u003d\"btn btn-light btn-margin-right\" *ngIf\u003d\"model.isEditable\""},{"lineNumber":98,"author":{"gitId":"-"},"content":"                  (click)\u003d\"discardChangesHandler(false)\""},{"lineNumber":99,"author":{"gitId":"-"},"content":"                  [disabled]\u003d\"model.isSaving || model.isDeleting || model.isDuplicating\"\u003e"},{"lineNumber":100,"author":{"gitId":"-"},"content":"            \u003ci class\u003d\"fas fa-ban\"\u003e\u003c/i\u003e Cancel"},{"lineNumber":101,"author":{"gitId":"-"},"content":"          \u003c/button\u003e"},{"lineNumber":102,"author":{"gitId":"-"},"content":"          \u003cbutton class\u003d\"btn btn-success\""},{"lineNumber":103,"author":{"gitId":"-"},"content":"              [disabled]\u003d\"!model.isEditable || model.isSaving || model.isDeleting || model.isDuplicating\""},{"lineNumber":104,"author":{"gitId":"-"},"content":"              (click)\u003d\"saveQuestionHandler()\"\u003e"},{"lineNumber":105,"author":{"gitId":"-"},"content":"            \u003ctm-ajax-loading *ngIf\u003d\"model.isSaving\"\u003e\u003c/tm-ajax-loading\u003e"},{"lineNumber":106,"author":{"gitId":"-"},"content":"            \u003cspan *ngIf\u003d\"formMode \u003d\u003d\u003d QuestionEditFormMode.EDIT\" \u003e\u003ci class\u003d\"fas fa-check\"\u003e\u003c/i\u003e Save Changes\u003c/span\u003e"},{"lineNumber":107,"author":{"gitId":"-"},"content":"            \u003cspan id\u003d\"btn-save-new\" *ngIf\u003d\"formMode \u003d\u003d\u003d QuestionEditFormMode.ADD\"\u003e\u003ci class\u003d\"fas fa-check\"\u003e\u003c/i\u003e Save Question\u003c/span\u003e"},{"lineNumber":108,"author":{"gitId":"-"},"content":"          \u003c/button\u003e"},{"lineNumber":109,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":110,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":111,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":112,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":113,"author":{"gitId":"-"},"content":"\u003c/div\u003e"}],"authorContributionMap":{"jasonqiu212":10,"-":103}},{"path":"src/web/app/components/question-edit-form/question-edit-form.component.scss","fileType":"scss","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":".question-number-select {"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  height: 32px;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"  width: auto;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"  display: inline;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"  margin-left: 6px;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"  margin-right: 5px;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"}"},{"lineNumber":8,"author":{"gitId":"-"},"content":""},{"lineNumber":9,"author":{"gitId":"jasonqiu212"},"content":".question-number {"},{"lineNumber":10,"author":{"gitId":"jasonqiu212"},"content":"  font-size: .875rem;"},{"lineNumber":11,"author":{"gitId":"jasonqiu212"},"content":"  margin-bottom: 0;"},{"lineNumber":12,"author":{"gitId":"jasonqiu212"},"content":"}"},{"lineNumber":13,"author":{"gitId":"jasonqiu212"},"content":""},{"lineNumber":14,"author":{"gitId":"-"},"content":".background-color-light-blue {"},{"lineNumber":15,"author":{"gitId":"-"},"content":"  background-color: #EAEFF5;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"}"},{"lineNumber":17,"author":{"gitId":"-"},"content":""},{"lineNumber":18,"author":{"gitId":"-"},"content":".padding-15px {"},{"lineNumber":19,"author":{"gitId":"-"},"content":"  padding: 15px;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"}"},{"lineNumber":21,"author":{"gitId":"-"},"content":""},{"lineNumber":22,"author":{"gitId":"-"},"content":".padding-left-15px {"},{"lineNumber":23,"author":{"gitId":"-"},"content":"  padding-left: 15px;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"}"},{"lineNumber":25,"author":{"gitId":"-"},"content":""},{"lineNumber":26,"author":{"gitId":"-"},"content":".margin-top-15px {"},{"lineNumber":27,"author":{"gitId":"-"},"content":"  margin-top: 15px;"},{"lineNumber":28,"author":{"gitId":"-"},"content":"}"},{"lineNumber":29,"author":{"gitId":"-"},"content":""},{"lineNumber":30,"author":{"gitId":"-"},"content":".collapse-caret {"},{"lineNumber":31,"author":{"gitId":"-"},"content":"  margin-right: 10px;"},{"lineNumber":32,"author":{"gitId":"-"},"content":"}"},{"lineNumber":33,"author":{"gitId":"-"},"content":""},{"lineNumber":34,"author":{"gitId":"-"},"content":".collapse-qn-description {"},{"lineNumber":35,"author":{"gitId":"-"},"content":"  font-weight: 300;"},{"lineNumber":36,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"jasonqiu212":5,"-":31}},{"path":"src/web/app/components/question-edit-form/question-edit-form.component.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { Component, EventEmitter, Input, Output } from \u0027@angular/core\u0027;"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import { NgbModalRef } from \u0027@ng-bootstrap/ng-bootstrap\u0027;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"import { CommonVisibilitySetting, FeedbackQuestionsService } from \u0027../../../services/feedback-questions.service\u0027;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import { SimpleModalService } from \u0027../../../services/simple-modal.service\u0027;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import { VisibilityStateMachine } from \u0027../../../services/visibility-state-machine\u0027;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":7,"author":{"gitId":"-"},"content":"  FeedbackParticipantType,"},{"lineNumber":8,"author":{"gitId":"-"},"content":"  FeedbackQuestionType,"},{"lineNumber":9,"author":{"gitId":"-"},"content":"  FeedbackTextQuestionDetails,"},{"lineNumber":10,"author":{"gitId":"-"},"content":"  FeedbackVisibilityType,"},{"lineNumber":11,"author":{"gitId":"-"},"content":"  NumberOfEntitiesToGiveFeedbackToSetting,"},{"lineNumber":12,"author":{"gitId":"-"},"content":"} from \u0027../../../types/api-output\u0027;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import { VisibilityControl } from \u0027../../../types/visibility-control\u0027;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import { SimpleModalType } from \u0027../simple-modal/simple-modal-type\u0027;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import { collapseAnim } from \u0027../teammates-common/collapse-anim\u0027;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"import { QuestionEditFormMode, QuestionEditFormModel } from \u0027./question-edit-form-model\u0027;"},{"lineNumber":17,"author":{"gitId":"-"},"content":""},{"lineNumber":18,"author":{"gitId":"-"},"content":"const FEEDBACK_PATH_PROPERTIES: Set\u003cstring\u003e \u003d new Set\u003cstring\u003e(["},{"lineNumber":19,"author":{"gitId":"-"},"content":"  \u0027giverType\u0027,"},{"lineNumber":20,"author":{"gitId":"-"},"content":"  \u0027recipientType\u0027,"},{"lineNumber":21,"author":{"gitId":"-"},"content":"  \u0027isUsingOtherFeedbackPath\u0027,"},{"lineNumber":22,"author":{"gitId":"-"},"content":"  \u0027numberOfEntitiesToGiveFeedbackToSetting\u0027,"},{"lineNumber":23,"author":{"gitId":"-"},"content":"  \u0027customNumberOfEntitiesToGiveFeedbackTo\u0027,"},{"lineNumber":24,"author":{"gitId":"-"},"content":"]);"},{"lineNumber":25,"author":{"gitId":"-"},"content":"const VISIBILITY_PROPERTIES: Set\u003cstring\u003e \u003d new Set\u003cstring\u003e(["},{"lineNumber":26,"author":{"gitId":"-"},"content":"  \u0027isUsingOtherVisibilitySetting\u0027,"},{"lineNumber":27,"author":{"gitId":"-"},"content":"  \u0027showResponsesTo\u0027,"},{"lineNumber":28,"author":{"gitId":"-"},"content":"  \u0027showGiverNameTo\u0027,"},{"lineNumber":29,"author":{"gitId":"-"},"content":"  \u0027showRecipientNameTo\u0027,"},{"lineNumber":30,"author":{"gitId":"-"},"content":"  \u0027commonVisibilitySettingName\u0027,"},{"lineNumber":31,"author":{"gitId":"-"},"content":"]);"},{"lineNumber":32,"author":{"gitId":"-"},"content":"const QUESTION_DETAIL_PROPERTIES: Set\u003cstring\u003e \u003d new Set\u003cstring\u003e(["},{"lineNumber":33,"author":{"gitId":"-"},"content":"  \u0027questionBrief\u0027,"},{"lineNumber":34,"author":{"gitId":"-"},"content":"  \u0027questionDescription\u0027,"},{"lineNumber":35,"author":{"gitId":"-"},"content":"  \u0027questionDetails\u0027,"},{"lineNumber":36,"author":{"gitId":"-"},"content":"  \u0027questionNumber\u0027,"},{"lineNumber":37,"author":{"gitId":"-"},"content":"]);"},{"lineNumber":38,"author":{"gitId":"-"},"content":""},{"lineNumber":39,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":40,"author":{"gitId":"-"},"content":" * The question edit form component."},{"lineNumber":41,"author":{"gitId":"-"},"content":" */"},{"lineNumber":42,"author":{"gitId":"-"},"content":"@Component({"},{"lineNumber":43,"author":{"gitId":"-"},"content":"  selector: \u0027tm-question-edit-form\u0027,"},{"lineNumber":44,"author":{"gitId":"-"},"content":"  templateUrl: \u0027./question-edit-form.component.html\u0027,"},{"lineNumber":45,"author":{"gitId":"-"},"content":"  styleUrls: [\u0027./question-edit-form.component.scss\u0027],"},{"lineNumber":46,"author":{"gitId":"-"},"content":"  animations: [collapseAnim],"},{"lineNumber":47,"author":{"gitId":"-"},"content":"})"},{"lineNumber":48,"author":{"gitId":"-"},"content":"export class QuestionEditFormComponent {"},{"lineNumber":49,"author":{"gitId":"-"},"content":""},{"lineNumber":50,"author":{"gitId":"-"},"content":"  // enum"},{"lineNumber":51,"author":{"gitId":"-"},"content":"  FeedbackQuestionType: typeof FeedbackQuestionType \u003d FeedbackQuestionType;"},{"lineNumber":52,"author":{"gitId":"-"},"content":"  QuestionEditFormMode: typeof QuestionEditFormMode \u003d QuestionEditFormMode;"},{"lineNumber":53,"author":{"gitId":"-"},"content":"  FeedbackParticipantType: typeof FeedbackParticipantType \u003d FeedbackParticipantType;"},{"lineNumber":54,"author":{"gitId":"-"},"content":"  NumberOfEntitiesToGiveFeedbackToSetting: typeof NumberOfEntitiesToGiveFeedbackToSetting \u003d"},{"lineNumber":55,"author":{"gitId":"-"},"content":"      NumberOfEntitiesToGiveFeedbackToSetting;"},{"lineNumber":56,"author":{"gitId":"-"},"content":"  VisibilityControl: typeof VisibilityControl \u003d VisibilityControl;"},{"lineNumber":57,"author":{"gitId":"-"},"content":"  FeedbackVisibilityType: typeof FeedbackVisibilityType \u003d FeedbackVisibilityType;"},{"lineNumber":58,"author":{"gitId":"-"},"content":""},{"lineNumber":59,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":60,"author":{"gitId":"-"},"content":"  set formModel(model: QuestionEditFormModel) {"},{"lineNumber":61,"author":{"gitId":"-"},"content":"    this.model \u003d model;"},{"lineNumber":62,"author":{"gitId":"-"},"content":""},{"lineNumber":63,"author":{"gitId":"-"},"content":"    this.commonFeedbackPaths \u003d this.feedbackQuestionsService.getCommonFeedbackPaths(model.questionType);"},{"lineNumber":64,"author":{"gitId":"-"},"content":"    this.allowedFeedbackPaths \u003d this.feedbackQuestionsService.getAllowedFeedbackPaths(model.questionType);"},{"lineNumber":65,"author":{"gitId":"-"},"content":"    this.visibilityStateMachine \u003d"},{"lineNumber":66,"author":{"gitId":"-"},"content":"        this.feedbackQuestionsService.getNewVisibilityStateMachine(model.giverType, model.recipientType);"},{"lineNumber":67,"author":{"gitId":"-"},"content":"    this.commonFeedbackVisibilitySettings \u003d"},{"lineNumber":68,"author":{"gitId":"-"},"content":"        this.feedbackQuestionsService.getCommonFeedbackVisibilitySettings("},{"lineNumber":69,"author":{"gitId":"-"},"content":"            this.visibilityStateMachine, model.questionType);"},{"lineNumber":70,"author":{"gitId":"-"},"content":""},{"lineNumber":71,"author":{"gitId":"-"},"content":"    const visibilitySetting: { [TKey in VisibilityControl]: FeedbackVisibilityType[] } \u003d {"},{"lineNumber":72,"author":{"gitId":"-"},"content":"      SHOW_RESPONSE: model.showResponsesTo,"},{"lineNumber":73,"author":{"gitId":"-"},"content":"      SHOW_GIVER_NAME: model.showGiverNameTo,"},{"lineNumber":74,"author":{"gitId":"-"},"content":"      SHOW_RECIPIENT_NAME: model.showRecipientNameTo,"},{"lineNumber":75,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":76,"author":{"gitId":"-"},"content":"    this.visibilityStateMachine.applyVisibilitySettings(visibilitySetting);"},{"lineNumber":77,"author":{"gitId":"-"},"content":""},{"lineNumber":78,"author":{"gitId":"-"},"content":"    if (!model.isUsingOtherFeedbackPath) {"},{"lineNumber":79,"author":{"gitId":"-"},"content":"      // find if the feedback path is in the common feedback paths"},{"lineNumber":80,"author":{"gitId":"-"},"content":"      this.model.isUsingOtherFeedbackPath \u003d true;"},{"lineNumber":81,"author":{"gitId":"-"},"content":"      if (this.commonFeedbackPaths.has(model.giverType)"},{"lineNumber":82,"author":{"gitId":"-"},"content":"          // eslint-disable-next-line @typescript-eslint/no-non-null-assertion"},{"lineNumber":83,"author":{"gitId":"-"},"content":"          \u0026\u0026 this.commonFeedbackPaths.get(model.giverType)!.includes(model.recipientType)) {"},{"lineNumber":84,"author":{"gitId":"-"},"content":"        this.model.isUsingOtherFeedbackPath \u003d false;"},{"lineNumber":85,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":86,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":87,"author":{"gitId":"-"},"content":"    if (!model.commonVisibilitySettingName \u0026\u0026 !model.isUsingOtherVisibilitySetting) {"},{"lineNumber":88,"author":{"gitId":"-"},"content":"      // find if the visibility settings is in the common visibility settings"},{"lineNumber":89,"author":{"gitId":"-"},"content":"      this.model.isUsingOtherVisibilitySetting \u003d true;"},{"lineNumber":90,"author":{"gitId":"-"},"content":"      for (const commonVisibilityOption of this.commonFeedbackVisibilitySettings) {"},{"lineNumber":91,"author":{"gitId":"-"},"content":"        if (this.isSameSet(visibilitySetting.SHOW_RESPONSE, commonVisibilityOption.visibilitySettings.SHOW_RESPONSE)"},{"lineNumber":92,"author":{"gitId":"-"},"content":"            \u0026\u0026 this.isSameSet(visibilitySetting.SHOW_GIVER_NAME,"},{"lineNumber":93,"author":{"gitId":"-"},"content":"                commonVisibilityOption.visibilitySettings.SHOW_GIVER_NAME)"},{"lineNumber":94,"author":{"gitId":"-"},"content":"            \u0026\u0026 this.isSameSet(visibilitySetting.SHOW_RECIPIENT_NAME,"},{"lineNumber":95,"author":{"gitId":"-"},"content":"                commonVisibilityOption.visibilitySettings.SHOW_RECIPIENT_NAME)) {"},{"lineNumber":96,"author":{"gitId":"-"},"content":"          this.model.commonVisibilitySettingName \u003d commonVisibilityOption.name;"},{"lineNumber":97,"author":{"gitId":"-"},"content":"          this.model.isUsingOtherVisibilitySetting \u003d false;"},{"lineNumber":98,"author":{"gitId":"-"},"content":"          break;"},{"lineNumber":99,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":100,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":101,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":102,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":103,"author":{"gitId":"-"},"content":""},{"lineNumber":104,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":105,"author":{"gitId":"-"},"content":"   * Returns whether setting the custom feedback visibility is allowed."},{"lineNumber":106,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":107,"author":{"gitId":"-"},"content":"  get isCustomFeedbackVisibilitySettingAllowed(): boolean {"},{"lineNumber":108,"author":{"gitId":"-"},"content":"    return this.feedbackQuestionsService.isCustomFeedbackVisibilitySettingAllowed(this.model.questionType);"},{"lineNumber":109,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":110,"author":{"gitId":"-"},"content":""},{"lineNumber":111,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":112,"author":{"gitId":"-"},"content":"  numOfQuestions: number \u003d 0;"},{"lineNumber":113,"author":{"gitId":"-"},"content":""},{"lineNumber":114,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":115,"author":{"gitId":"-"},"content":"  formMode: QuestionEditFormMode \u003d QuestionEditFormMode.EDIT;"},{"lineNumber":116,"author":{"gitId":"-"},"content":""},{"lineNumber":117,"author":{"gitId":"-"},"content":"  // if true, the question edit form is used for displaying of the question edit form only"},{"lineNumber":118,"author":{"gitId":"-"},"content":"  // no editing function will be available; the edit button will be hidden"},{"lineNumber":119,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":120,"author":{"gitId":"-"},"content":"  isDisplayOnly: boolean \u003d false;"},{"lineNumber":121,"author":{"gitId":"-"},"content":""},{"lineNumber":122,"author":{"gitId":"cedricongjh"},"content":"  @Input()"},{"lineNumber":123,"author":{"gitId":"cedricongjh"},"content":"  isQuestionPublished: boolean \u003d false;"},{"lineNumber":124,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":125,"author":{"gitId":"-"},"content":"  model: QuestionEditFormModel \u003d {"},{"lineNumber":126,"author":{"gitId":"-"},"content":"    feedbackQuestionId: \u0027\u0027,"},{"lineNumber":127,"author":{"gitId":"-"},"content":""},{"lineNumber":128,"author":{"gitId":"-"},"content":"    questionNumber: 0,"},{"lineNumber":129,"author":{"gitId":"-"},"content":"    questionBrief: \u0027\u0027,"},{"lineNumber":130,"author":{"gitId":"-"},"content":"    questionDescription: \u0027\u0027,"},{"lineNumber":131,"author":{"gitId":"-"},"content":""},{"lineNumber":132,"author":{"gitId":"-"},"content":"    isQuestionHasResponses: false,"},{"lineNumber":133,"author":{"gitId":"-"},"content":""},{"lineNumber":134,"author":{"gitId":"-"},"content":"    questionType: FeedbackQuestionType.TEXT,"},{"lineNumber":135,"author":{"gitId":"-"},"content":"    questionDetails: {"},{"lineNumber":136,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.TEXT,"},{"lineNumber":137,"author":{"gitId":"-"},"content":"      questionText: \u0027\u0027,"},{"lineNumber":138,"author":{"gitId":"-"},"content":"    } as FeedbackTextQuestionDetails,"},{"lineNumber":139,"author":{"gitId":"-"},"content":""},{"lineNumber":140,"author":{"gitId":"-"},"content":"    giverType: FeedbackParticipantType.STUDENTS,"},{"lineNumber":141,"author":{"gitId":"-"},"content":"    recipientType: FeedbackParticipantType.STUDENTS_EXCLUDING_SELF,"},{"lineNumber":142,"author":{"gitId":"-"},"content":""},{"lineNumber":143,"author":{"gitId":"-"},"content":"    numberOfEntitiesToGiveFeedbackToSetting: NumberOfEntitiesToGiveFeedbackToSetting.UNLIMITED,"},{"lineNumber":144,"author":{"gitId":"-"},"content":"    customNumberOfEntitiesToGiveFeedbackTo: 1,"},{"lineNumber":145,"author":{"gitId":"-"},"content":""},{"lineNumber":146,"author":{"gitId":"-"},"content":"    showResponsesTo: [],"},{"lineNumber":147,"author":{"gitId":"-"},"content":"    showGiverNameTo: [],"},{"lineNumber":148,"author":{"gitId":"-"},"content":"    showRecipientNameTo: [],"},{"lineNumber":149,"author":{"gitId":"-"},"content":""},{"lineNumber":150,"author":{"gitId":"-"},"content":"    commonVisibilitySettingName: \u0027\u0027,"},{"lineNumber":151,"author":{"gitId":"-"},"content":""},{"lineNumber":152,"author":{"gitId":"-"},"content":"    isUsingOtherFeedbackPath: false,"},{"lineNumber":153,"author":{"gitId":"-"},"content":"    isUsingOtherVisibilitySetting: false,"},{"lineNumber":154,"author":{"gitId":"-"},"content":"    isDeleting: false,"},{"lineNumber":155,"author":{"gitId":"-"},"content":"    isDuplicating: false,"},{"lineNumber":156,"author":{"gitId":"-"},"content":"    isEditable: false,"},{"lineNumber":157,"author":{"gitId":"-"},"content":"    isSaving: false,"},{"lineNumber":158,"author":{"gitId":"-"},"content":"    isCollapsed: false,"},{"lineNumber":159,"author":{"gitId":"-"},"content":"    isVisibilityChanged: false,"},{"lineNumber":160,"author":{"gitId":"-"},"content":"    isFeedbackPathChanged: false,"},{"lineNumber":161,"author":{"gitId":"-"},"content":"    isQuestionDetailsChanged: false,"},{"lineNumber":162,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":163,"author":{"gitId":"-"},"content":""},{"lineNumber":164,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":165,"author":{"gitId":"-"},"content":"  formModelChange: EventEmitter\u003cQuestionEditFormModel\u003e \u003d new EventEmitter();"},{"lineNumber":166,"author":{"gitId":"-"},"content":""},{"lineNumber":167,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":168,"author":{"gitId":"-"},"content":"  saveExistingQuestionEvent: EventEmitter\u003cvoid\u003e \u003d new EventEmitter();"},{"lineNumber":169,"author":{"gitId":"-"},"content":""},{"lineNumber":170,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":171,"author":{"gitId":"-"},"content":"  deleteCurrentQuestionEvent: EventEmitter\u003cvoid\u003e \u003d new EventEmitter();"},{"lineNumber":172,"author":{"gitId":"-"},"content":""},{"lineNumber":173,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":174,"author":{"gitId":"-"},"content":"  duplicateCurrentQuestionEvent: EventEmitter\u003cvoid\u003e \u003d new EventEmitter();"},{"lineNumber":175,"author":{"gitId":"-"},"content":""},{"lineNumber":176,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":177,"author":{"gitId":"-"},"content":"  discardExistingQuestionChangesEvent: EventEmitter\u003cvoid\u003e \u003d new EventEmitter();"},{"lineNumber":178,"author":{"gitId":"-"},"content":""},{"lineNumber":179,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":180,"author":{"gitId":"-"},"content":"  discardNewQuestionEvent: EventEmitter\u003cvoid\u003e \u003d new EventEmitter();"},{"lineNumber":181,"author":{"gitId":"-"},"content":""},{"lineNumber":182,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":183,"author":{"gitId":"-"},"content":"  createNewQuestionEvent: EventEmitter\u003cvoid\u003e \u003d new EventEmitter();"},{"lineNumber":184,"author":{"gitId":"-"},"content":""},{"lineNumber":185,"author":{"gitId":"-"},"content":"  commonFeedbackPaths: Map\u003cFeedbackParticipantType, FeedbackParticipantType[]\u003e \u003d new Map();"},{"lineNumber":186,"author":{"gitId":"-"},"content":""},{"lineNumber":187,"author":{"gitId":"-"},"content":"  allowedFeedbackPaths: Map\u003cFeedbackParticipantType, FeedbackParticipantType[]\u003e \u003d new Map();"},{"lineNumber":188,"author":{"gitId":"-"},"content":""},{"lineNumber":189,"author":{"gitId":"-"},"content":"  commonFeedbackVisibilitySettings: CommonVisibilitySetting[] \u003d [];"},{"lineNumber":190,"author":{"gitId":"-"},"content":""},{"lineNumber":191,"author":{"gitId":"-"},"content":"  visibilityStateMachine: VisibilityStateMachine;"},{"lineNumber":192,"author":{"gitId":"-"},"content":""},{"lineNumber":193,"author":{"gitId":"-"},"content":"  constructor(private feedbackQuestionsService: FeedbackQuestionsService,"},{"lineNumber":194,"author":{"gitId":"-"},"content":"              private simpleModalService: SimpleModalService) {"},{"lineNumber":195,"author":{"gitId":"-"},"content":"    this.visibilityStateMachine \u003d"},{"lineNumber":196,"author":{"gitId":"-"},"content":"        this.feedbackQuestionsService.getNewVisibilityStateMachine("},{"lineNumber":197,"author":{"gitId":"-"},"content":"            this.model.giverType, this.model.recipientType);"},{"lineNumber":198,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":199,"author":{"gitId":"-"},"content":""},{"lineNumber":200,"author":{"gitId":"-"},"content":"  private isSameSet(setA: FeedbackVisibilityType[], setB: FeedbackVisibilityType[]): boolean {"},{"lineNumber":201,"author":{"gitId":"-"},"content":"    return setA.length \u003d\u003d\u003d setB.length \u0026\u0026 setA.every((ele: FeedbackVisibilityType) \u003d\u003e setB.includes(ele));"},{"lineNumber":202,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":203,"author":{"gitId":"-"},"content":""},{"lineNumber":204,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":205,"author":{"gitId":"-"},"content":"   * Triggers the change of the model for the form."},{"lineNumber":206,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":207,"author":{"gitId":"-"},"content":"  triggerModelChange(field: keyof QuestionEditFormModel,"},{"lineNumber":208,"author":{"gitId":"-"},"content":"                     data: QuestionEditFormModel[keyof QuestionEditFormModel]): void {"},{"lineNumber":209,"author":{"gitId":"-"},"content":"    this.formModelChange.emit({"},{"lineNumber":210,"author":{"gitId":"-"},"content":"      ...this.model,"},{"lineNumber":211,"author":{"gitId":"-"},"content":"      [field]: data,"},{"lineNumber":212,"author":{"gitId":"-"},"content":"      ...(!this.model.isVisibilityChanged \u0026\u0026 VISIBILITY_PROPERTIES.has(field)"},{"lineNumber":213,"author":{"gitId":"-"},"content":"        \u0026\u0026 { isVisibilityChanged: true }),"},{"lineNumber":214,"author":{"gitId":"-"},"content":"      ...(!this.model.isFeedbackPathChanged \u0026\u0026 FEEDBACK_PATH_PROPERTIES.has(field)"},{"lineNumber":215,"author":{"gitId":"-"},"content":"        \u0026\u0026 { isFeedbackPathChanged: true }),"},{"lineNumber":216,"author":{"gitId":"-"},"content":"      ...(!this.model.isQuestionDetailsChanged \u0026\u0026 QUESTION_DETAIL_PROPERTIES.has(field)"},{"lineNumber":217,"author":{"gitId":"-"},"content":"        \u0026\u0026 { isQuestionDetailsChanged: true }),"},{"lineNumber":218,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":219,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":220,"author":{"gitId":"-"},"content":""},{"lineNumber":221,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":222,"author":{"gitId":"-"},"content":"   * Triggers the change of the model for the form."},{"lineNumber":223,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":224,"author":{"gitId":"-"},"content":"  triggerModelChangeBatch(obj: Partial\u003cQuestionEditFormModel\u003e): void {"},{"lineNumber":225,"author":{"gitId":"-"},"content":"    this.formModelChange.emit({"},{"lineNumber":226,"author":{"gitId":"-"},"content":"      ...this.model,"},{"lineNumber":227,"author":{"gitId":"-"},"content":"      ...obj,"},{"lineNumber":228,"author":{"gitId":"-"},"content":"      ...(!this.model.isVisibilityChanged"},{"lineNumber":229,"author":{"gitId":"-"},"content":"          \u0026\u0026 Object.keys(obj).some((key: string) \u003d\u003e VISIBILITY_PROPERTIES.has(key))"},{"lineNumber":230,"author":{"gitId":"-"},"content":"          \u0026\u0026 { isVisibilityChanged: true }),"},{"lineNumber":231,"author":{"gitId":"-"},"content":"      ...(!this.model.isFeedbackPathChanged"},{"lineNumber":232,"author":{"gitId":"-"},"content":"          \u0026\u0026 Object.keys(obj).some((key: string) \u003d\u003e FEEDBACK_PATH_PROPERTIES.has(key))"},{"lineNumber":233,"author":{"gitId":"-"},"content":"          \u0026\u0026 { isFeedbackPathChanged: true }),"},{"lineNumber":234,"author":{"gitId":"-"},"content":"      ...(!this.model.isQuestionDetailsChanged"},{"lineNumber":235,"author":{"gitId":"-"},"content":"          \u0026\u0026 Object.keys(obj).some((key: string) \u003d\u003e QUESTION_DETAIL_PROPERTIES.has(key))"},{"lineNumber":236,"author":{"gitId":"-"},"content":"          \u0026\u0026 { isQuestionDetailsChanged: true }),"},{"lineNumber":237,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":238,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":239,"author":{"gitId":"-"},"content":""},{"lineNumber":240,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":241,"author":{"gitId":"-"},"content":"   * Helper methods to create a range."},{"lineNumber":242,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":243,"author":{"gitId":"-"},"content":"  range(num: number): number[] {"},{"lineNumber":244,"author":{"gitId":"-"},"content":"    const ranges: number[] \u003d [];"},{"lineNumber":245,"author":{"gitId":"-"},"content":"    for (let i: number \u003d 0; i \u003c num; i +\u003d 1) {"},{"lineNumber":246,"author":{"gitId":"-"},"content":"      ranges.push(i);"},{"lineNumber":247,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":248,"author":{"gitId":"-"},"content":"    return ranges;"},{"lineNumber":249,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":250,"author":{"gitId":"-"},"content":""},{"lineNumber":251,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":252,"author":{"gitId":"-"},"content":"   * Handle event to discard changes users made."},{"lineNumber":253,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":254,"author":{"gitId":"-"},"content":"  discardChangesHandler(isNewQuestion: boolean): void {"},{"lineNumber":255,"author":{"gitId":"-"},"content":"    if (!this.model.isVisibilityChanged"},{"lineNumber":256,"author":{"gitId":"-"},"content":"      \u0026\u0026 !this.model.isFeedbackPathChanged"},{"lineNumber":257,"author":{"gitId":"-"},"content":"      \u0026\u0026 !this.model.isQuestionDetailsChanged) {"},{"lineNumber":258,"author":{"gitId":"-"},"content":"      this.discardChanges();"},{"lineNumber":259,"author":{"gitId":"-"},"content":"      return;"},{"lineNumber":260,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":261,"author":{"gitId":"-"},"content":"    const modalRef: NgbModalRef \u003d this.simpleModalService.openConfirmationModal("},{"lineNumber":262,"author":{"gitId":"-"},"content":"        `Discard unsaved ${isNewQuestion ? \u0027question\u0027 : \u0027edits\u0027}?`, SimpleModalType.WARNING,"},{"lineNumber":263,"author":{"gitId":"-"},"content":"        \u0027Warning: Any unsaved changes will be lost\u0027,"},{"lineNumber":264,"author":{"gitId":"-"},"content":"        { cancelMessage: \u0027No, go back to editing\u0027 });"},{"lineNumber":265,"author":{"gitId":"-"},"content":"    modalRef.result.then(() \u003d\u003e {"},{"lineNumber":266,"author":{"gitId":"-"},"content":"      this.discardChanges();"},{"lineNumber":267,"author":{"gitId":"-"},"content":"    }, () \u003d\u003e {});"},{"lineNumber":268,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":269,"author":{"gitId":"-"},"content":""},{"lineNumber":270,"author":{"gitId":"-"},"content":"  private discardChanges(): void {"},{"lineNumber":271,"author":{"gitId":"-"},"content":"    if (this.formMode \u003d\u003d\u003d QuestionEditFormMode.EDIT) {"},{"lineNumber":272,"author":{"gitId":"-"},"content":"      this.discardExistingQuestionChangesEvent.emit();"},{"lineNumber":273,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":274,"author":{"gitId":"-"},"content":"    if (this.formMode \u003d\u003d\u003d QuestionEditFormMode.ADD) {"},{"lineNumber":275,"author":{"gitId":"-"},"content":"      this.discardNewQuestionEvent.emit();"},{"lineNumber":276,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":277,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":278,"author":{"gitId":"-"},"content":""},{"lineNumber":279,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":280,"author":{"gitId":"-"},"content":"   * Saves the question."},{"lineNumber":281,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":282,"author":{"gitId":"-"},"content":"  saveQuestionHandler(): void {"},{"lineNumber":283,"author":{"gitId":"-"},"content":"    if (this.formMode \u003d\u003d\u003d QuestionEditFormMode.EDIT) {"},{"lineNumber":284,"author":{"gitId":"-"},"content":"      const doChangesNeedWarning: boolean \u003d this.model.isQuestionDetailsChanged"},{"lineNumber":285,"author":{"gitId":"-"},"content":"        || this.model.isVisibilityChanged"},{"lineNumber":286,"author":{"gitId":"-"},"content":"        || this.model.isFeedbackPathChanged;"},{"lineNumber":287,"author":{"gitId":"cedricongjh"},"content":"      if (!this.isQuestionPublished \u0026\u0026 (!this.model.isQuestionHasResponses || !doChangesNeedWarning)) {"},{"lineNumber":288,"author":{"gitId":"-"},"content":"        this.saveExistingQuestionEvent.emit();"},{"lineNumber":289,"author":{"gitId":"-"},"content":"      } else if (this.model.isFeedbackPathChanged) {"},{"lineNumber":290,"author":{"gitId":"-"},"content":"        // warn user that editing feedback path will delete all messages"},{"lineNumber":291,"author":{"gitId":"-"},"content":"        const modalContent: string \u003d `"},{"lineNumber":292,"author":{"gitId":"-"},"content":"            \u003cp\u003eYou seem to have changed the feedback path settings of this question. Please note that changing the"},{"lineNumber":293,"author":{"gitId":"-"},"content":"            feedback path will cause \u003cb\u003eall existing responses to be deleted.\u003c/b\u003e Proceed?\u003c/p\u003e"},{"lineNumber":294,"author":{"gitId":"-"},"content":"        `;"},{"lineNumber":295,"author":{"gitId":"-"},"content":"        const modalRef: NgbModalRef \u003d this.simpleModalService.openConfirmationModal("},{"lineNumber":296,"author":{"gitId":"-"},"content":"            \u0027Save the question?\u0027, SimpleModalType.DANGER, modalContent);"},{"lineNumber":297,"author":{"gitId":"-"},"content":"        modalRef.result.then(() \u003d\u003e {"},{"lineNumber":298,"author":{"gitId":"-"},"content":"          this.saveExistingQuestionEvent.emit();"},{"lineNumber":299,"author":{"gitId":"-"},"content":"        }, () \u003d\u003e {});"},{"lineNumber":300,"author":{"gitId":"-"},"content":"      } else if (this.model.isQuestionDetailsChanged) {"},{"lineNumber":301,"author":{"gitId":"-"},"content":"        // alert user that editing question may result in deletion of responses"},{"lineNumber":302,"author":{"gitId":"-"},"content":"        const modalContent: string \u003d `"},{"lineNumber":303,"author":{"gitId":"-"},"content":"            \u003cp\u003eEditing question settings in a way that potentially affects the validity of existing responses \u003cb\u003e may"},{"lineNumber":304,"author":{"gitId":"-"},"content":"            cause all the existing responses for this question to be deleted.\u003c/b\u003e Proceed?\u003c/p\u003e"},{"lineNumber":305,"author":{"gitId":"-"},"content":"        `;"},{"lineNumber":306,"author":{"gitId":"-"},"content":"        const modalRef: NgbModalRef \u003d this.simpleModalService.openConfirmationModal("},{"lineNumber":307,"author":{"gitId":"-"},"content":"            \u0027Save the question?\u0027, SimpleModalType.DANGER, modalContent);"},{"lineNumber":308,"author":{"gitId":"-"},"content":"        modalRef.result.then(() \u003d\u003e {"},{"lineNumber":309,"author":{"gitId":"-"},"content":"          this.saveExistingQuestionEvent.emit();"},{"lineNumber":310,"author":{"gitId":"-"},"content":"        }, () \u003d\u003e {});"},{"lineNumber":311,"author":{"gitId":"-"},"content":"      } else if (this.model.isVisibilityChanged) {"},{"lineNumber":312,"author":{"gitId":"-"},"content":"        // alert user that editing visibility options will not delete responses"},{"lineNumber":313,"author":{"gitId":"-"},"content":"        const modalContent: string \u003d `"},{"lineNumber":314,"author":{"gitId":"-"},"content":"            \u003cp\u003eYou seem to have changed the visibility settings of this question. Please note that \u003cb\u003ethe existing"},{"lineNumber":315,"author":{"gitId":"-"},"content":"            responses will remain but their visibility will be changed as per the new visibility settings.\u003c/b\u003e"},{"lineNumber":316,"author":{"gitId":"-"},"content":"            Proceed?\u003c/p\u003e"},{"lineNumber":317,"author":{"gitId":"-"},"content":"        `;"},{"lineNumber":318,"author":{"gitId":"-"},"content":"        const modalRef: NgbModalRef \u003d this.simpleModalService.openConfirmationModal("},{"lineNumber":319,"author":{"gitId":"-"},"content":"            \u0027Save the question?\u0027, SimpleModalType.WARNING, modalContent);"},{"lineNumber":320,"author":{"gitId":"-"},"content":"        modalRef.result.then(() \u003d\u003e {"},{"lineNumber":321,"author":{"gitId":"-"},"content":"          this.saveExistingQuestionEvent.emit();"},{"lineNumber":322,"author":{"gitId":"-"},"content":"        }, () \u003d\u003e {});"},{"lineNumber":323,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":324,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":325,"author":{"gitId":"-"},"content":"    if (this.formMode \u003d\u003d\u003d QuestionEditFormMode.ADD) {"},{"lineNumber":326,"author":{"gitId":"-"},"content":"      this.createNewQuestionEvent.emit();"},{"lineNumber":327,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":328,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":329,"author":{"gitId":"-"},"content":""},{"lineNumber":330,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":331,"author":{"gitId":"-"},"content":"   * Handles event for duplicating the current question."},{"lineNumber":332,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":333,"author":{"gitId":"-"},"content":"  duplicateCurrentQuestionHandler(): void {"},{"lineNumber":334,"author":{"gitId":"-"},"content":"    this.duplicateCurrentQuestionEvent.emit();"},{"lineNumber":335,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":336,"author":{"gitId":"-"},"content":""},{"lineNumber":337,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":338,"author":{"gitId":"-"},"content":"   * Handles event for deleting the current question."},{"lineNumber":339,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":340,"author":{"gitId":"-"},"content":"  deleteCurrentQuestionHandler(): void {"},{"lineNumber":341,"author":{"gitId":"-"},"content":"    this.deleteCurrentQuestionEvent.emit();"},{"lineNumber":342,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":343,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"cedricongjh":4,"-":339}},{"path":"src/web/app/components/question-response-panel/question-response-panel.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003cdiv *ngFor\u003d\"let question of questions\" inViewport (inViewportAction)\u003d\"loadQuestion($event, question)\"\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  \u003cdiv *tmIsLoading\u003d\"question.isLoading \u0026\u0026 !question.errorMessage\"\u003e\u003c/div\u003e"},{"lineNumber":3,"author":{"gitId":"-"},"content":"  \u003ctm-loading-retry"},{"lineNumber":4,"author":{"gitId":"-"},"content":"            [shouldShowRetry]\u003d\"!!question.errorMessage\""},{"lineNumber":5,"author":{"gitId":"-"},"content":"            [message]\u003d\"question.errorMessage\""},{"lineNumber":6,"author":{"gitId":"-"},"content":"            (retryEvent)\u003d\"loadQuestionResults(question)\""},{"lineNumber":7,"author":{"gitId":"-"},"content":"  \u003e"},{"lineNumber":8,"author":{"gitId":"-"},"content":"    \u003cdiv id\u003d\"question-{{ question.feedbackQuestion.questionNumber }}-responses\" class\u003d\"card bg-light mt-4\" *ngIf\u003d\"question.hasResponse\"\u003e"},{"lineNumber":9,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"card-body\"\u003e"},{"lineNumber":10,"author":{"gitId":"-"},"content":"        \u003ctm-question-text-with-info [questionNumber]\u003d\"question.feedbackQuestion.questionNumber\" [questionDetails]\u003d\"question.feedbackQuestion.questionDetails\" class\u003d\"question-text-with-info\"\u003e\u003c/tm-question-text-with-info\u003e"},{"lineNumber":11,"author":{"gitId":"-"},"content":"        \u003cdiv class\u003d\"all-responses\" *ngIf\u003d\"!question.hasResponseButNotVisibleForPreview, else nonViewableForPreview\"\u003e"},{"lineNumber":12,"author":{"gitId":"-"},"content":"          \u003cdiv *ngIf\u003d\"question.hasCommentNotVisibleForPreview\" class\u003d\"alert alert-warning my-3 non-visible-comment-alert\" role\u003d\"alert\"\u003e"},{"lineNumber":13,"author":{"gitId":"-"},"content":"            \u003ci class\u003d\"fas fa-eye-slash\"\u003e\u003c/i\u003e Some comments (on responses) received for this question are omitted from this preview because they are not visible to instructors, as per their visibility settings."},{"lineNumber":14,"author":{"gitId":"-"},"content":"          \u003c/div\u003e"},{"lineNumber":15,"author":{"gitId":"-"},"content":"          \u003cdiv class\u003d\"other-responses\" *ngIf\u003d\"canUserSeeResponses(question), else nonViewableResponse\"\u003e"},{"lineNumber":16,"author":{"gitId":"-"},"content":"            \u003ctm-single-statistics [question]\u003d\"question.feedbackQuestion.questionDetails\""},{"lineNumber":17,"author":{"gitId":"-"},"content":"                                  [responses]\u003d\"question.allResponses\""},{"lineNumber":18,"author":{"gitId":"-"},"content":"                                  [statistics]\u003d\"question.questionStatistics\""},{"lineNumber":19,"author":{"gitId":"-"},"content":"                                  [isStudent]\u003d\"true\"\u003e\u003c/tm-single-statistics\u003e"},{"lineNumber":20,"author":{"gitId":"-"},"content":"            \u003cdiv *ngIf\u003d\"RESPONSE_HIDDEN_QUESTIONS.includes(question.feedbackQuestion.questionType), else dontShowAdditionalMsg\"\u003e"},{"lineNumber":21,"author":{"gitId":"-"},"content":"              \u003cp style\u003d\"color: gray; font-size: small;\"\u003e\u003ci class\u003d\"fas fa-info-circle\" style\u003d\"color: #087CFC;\"\u003e\u003c/i\u003e Individual Responses are not configured to be shown for this question type.\u003c/p\u003e"},{"lineNumber":22,"author":{"gitId":"-"},"content":"            \u003c/div\u003e"},{"lineNumber":23,"author":{"gitId":"-"},"content":"            \u003cng-template #dontShowAdditionalMsg\u003e"},{"lineNumber":24,"author":{"gitId":"-"},"content":"              \u003ctm-student-view-responses *ngIf\u003d\"question.responsesToSelf.length\" [responses]\u003d\"question.responsesToSelf\" [feedbackQuestion]\u003d\"question.feedbackQuestion\" [timezone]\u003d\"session.timeZone\" [statistics]\u003d\"question.questionStatistics\"\u003e\u003c/tm-student-view-responses\u003e"},{"lineNumber":25,"author":{"gitId":"-"},"content":"              \u003cdiv *ngFor\u003d\"let responsesForOtherRecipient of question.otherResponses\"\u003e"},{"lineNumber":26,"author":{"gitId":"-"},"content":"                \u003ctm-student-view-responses *ngIf\u003d\"responsesForOtherRecipient.length\" [responses]\u003d\"responsesForOtherRecipient\" [feedbackQuestion]\u003d\"question.feedbackQuestion\" [timezone]\u003d\"session.timeZone\" [statistics]\u003d\"question.questionStatistics\"\u003e\u003c/tm-student-view-responses\u003e"},{"lineNumber":27,"author":{"gitId":"-"},"content":"              \u003c/div\u003e"},{"lineNumber":28,"author":{"gitId":"-"},"content":"              \u003cdiv class\u003d\"other-response\" *ngIf\u003d\"!question.otherResponses.length \u0026\u0026 !question.responsesToSelf.length\"\u003e"},{"lineNumber":29,"author":{"gitId":"-"},"content":"                \u003cstrong\u003eOther responses (to you): \u003c/strong\u003eNo responses received yet."},{"lineNumber":30,"author":{"gitId":"-"},"content":"              \u003c/div\u003e"},{"lineNumber":31,"author":{"gitId":"-"},"content":"            \u003c/ng-template\u003e"},{"lineNumber":32,"author":{"gitId":"-"},"content":"          \u003c/div\u003e"},{"lineNumber":33,"author":{"gitId":"-"},"content":"          \u003cng-template #nonViewableResponse\u003e"},{"lineNumber":34,"author":{"gitId":"-"},"content":"            \u003cdiv class\u003d\"other-response\"\u003e"},{"lineNumber":35,"author":{"gitId":"-"},"content":"              \u003cstrong\u003eOther responses (to you): \u003c/strong\u003eResponses are not visible to you."},{"lineNumber":36,"author":{"gitId":"-"},"content":"            \u003c/div\u003e"},{"lineNumber":37,"author":{"gitId":"-"},"content":"          \u003c/ng-template\u003e"},{"lineNumber":38,"author":{"gitId":"weiquu"},"content":"          \u003cdiv class\u003d\"given-responses mt-4\" *ngIf\u003d\"question.responsesFromSelf.length\"\u003e"},{"lineNumber":39,"author":{"gitId":"-"},"content":"            \u003cstrong\u003eYour own responses (to others):\u003c/strong\u003e"},{"lineNumber":40,"author":{"gitId":"-"},"content":"            \u003cdiv *ngFor\u003d\"let responseFromSelf of question.responsesFromSelf\"\u003e"},{"lineNumber":41,"author":{"gitId":"-"},"content":"              \u003ctm-student-view-responses [responses]\u003d\"[responseFromSelf]\" [isSelfResponses]\u003d\"true\" [feedbackQuestion]\u003d\"question.feedbackQuestion\" [timezone]\u003d\"session.timeZone\" [statistics]\u003d\"question.questionStatistics\"\u003e\u003c/tm-student-view-responses\u003e"},{"lineNumber":42,"author":{"gitId":"-"},"content":"            \u003c/div\u003e"},{"lineNumber":43,"author":{"gitId":"-"},"content":"          \u003c/div\u003e"},{"lineNumber":44,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":45,"author":{"gitId":"-"},"content":"        \u003cng-template #nonViewableForPreview\u003e"},{"lineNumber":46,"author":{"gitId":"-"},"content":"          \u003cdiv class\u003d\"alert alert-warning other-response non-visible-response-alert\" role\u003d\"alert\"\u003e"},{"lineNumber":47,"author":{"gitId":"-"},"content":"            \u003ci class\u003d\"fas fa-eye-slash\"\u003e\u003c/i\u003e Responses received for this question are omitted from this preview because some or all parts of them are not visible to instructors, as per their visibility settings."},{"lineNumber":48,"author":{"gitId":"-"},"content":"          \u003c/div\u003e"},{"lineNumber":49,"author":{"gitId":"-"},"content":"        \u003c/ng-template\u003e"},{"lineNumber":50,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":51,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":52,"author":{"gitId":"-"},"content":"  \u003c/tm-loading-retry\u003e"},{"lineNumber":53,"author":{"gitId":"-"},"content":"\u003c/div\u003e"}],"authorContributionMap":{"weiquu":1,"-":52}},{"path":"src/web/app/components/question-responses/per-question-view-responses/per-question-view-responses.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003cdiv *ngIf\u003d\"responsesToShow.length\"\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  \u003ctable id\u003d\"response-table\" class\u003d\"table table-bordered\"\u003e"},{"lineNumber":3,"author":{"gitId":"-"},"content":"    \u003cthead\u003e"},{"lineNumber":4,"author":{"gitId":"-"},"content":"      \u003ctr class\u003d\"header\"\u003e"},{"lineNumber":5,"author":{"gitId":"weiquu"},"content":"        \u003cth class\u003d\"sortable-header\" (click)\u003d\"sortResponses(SortBy.GIVER_TEAM)\" *ngIf\u003d\"showGiver\" [attr.aria-sort]\u003d\"getAriaSort(SortBy.GIVER_TEAM)\"\u003e"},{"lineNumber":6,"author":{"gitId":"weiquu"},"content":"          \u003cbutton\u003e"},{"lineNumber":7,"author":{"gitId":"-"},"content":"            Team"},{"lineNumber":8,"author":{"gitId":"weiquu"},"content":"            \u003cspan class\u003d\"fa-stack\" aria-hidden\u003d\"true\"\u003e"},{"lineNumber":9,"author":{"gitId":"-"},"content":"              \u003ci class\u003d\"fas fa-sort\"\u003e\u003c/i\u003e"},{"lineNumber":10,"author":{"gitId":"-"},"content":"              \u003ci *ngIf\u003d\"sortBy \u003d\u003d\u003d SortBy.GIVER_TEAM \u0026\u0026 sortOrder \u003d\u003d\u003d SortOrder.DESC\" class\u003d\"fas fa-sort-down\"\u003e\u003c/i\u003e"},{"lineNumber":11,"author":{"gitId":"-"},"content":"              \u003ci *ngIf\u003d\"sortBy \u003d\u003d\u003d SortBy.GIVER_TEAM \u0026\u0026 sortOrder \u003d\u003d\u003d SortOrder.ASC\" class\u003d\"fas fa-sort-up\"\u003e\u003c/i\u003e"},{"lineNumber":12,"author":{"gitId":"-"},"content":"            \u003c/span\u003e"},{"lineNumber":13,"author":{"gitId":"weiquu"},"content":"          \u003c/button\u003e"},{"lineNumber":14,"author":{"gitId":"-"},"content":"        \u003c/th\u003e"},{"lineNumber":15,"author":{"gitId":"weiquu"},"content":"        \u003cth class\u003d\"sortable-header\" (click)\u003d\"sortResponses(SortBy.GIVER_NAME)\" *ngIf\u003d\"showGiver\" [attr.aria-sort]\u003d\"getAriaSort(SortBy.GIVER_NAME)\"\u003e"},{"lineNumber":16,"author":{"gitId":"weiquu"},"content":"          \u003cbutton\u003e"},{"lineNumber":17,"author":{"gitId":"-"},"content":"            Giver"},{"lineNumber":18,"author":{"gitId":"weiquu"},"content":"            \u003cspan class\u003d\"fa-stack\" aria-hidden\u003d\"true\"\u003e"},{"lineNumber":19,"author":{"gitId":"-"},"content":"              \u003ci class\u003d\"fas fa-sort\"\u003e\u003c/i\u003e"},{"lineNumber":20,"author":{"gitId":"-"},"content":"              \u003ci *ngIf\u003d\"sortBy \u003d\u003d\u003d SortBy.GIVER_NAME \u0026\u0026 sortOrder \u003d\u003d\u003d SortOrder.DESC\" class\u003d\"fas fa-sort-down\"\u003e\u003c/i\u003e"},{"lineNumber":21,"author":{"gitId":"-"},"content":"              \u003ci *ngIf\u003d\"sortBy \u003d\u003d\u003d SortBy.GIVER_NAME \u0026\u0026 sortOrder \u003d\u003d\u003d SortOrder.ASC\" class\u003d\"fas fa-sort-up\"\u003e\u003c/i\u003e"},{"lineNumber":22,"author":{"gitId":"-"},"content":"            \u003c/span\u003e"},{"lineNumber":23,"author":{"gitId":"weiquu"},"content":"          \u003c/button\u003e"},{"lineNumber":24,"author":{"gitId":"-"},"content":"        \u003c/th\u003e"},{"lineNumber":25,"author":{"gitId":"weiquu"},"content":"        \u003cth class\u003d\"sortable-header\" (click)\u003d\"sortResponses(SortBy.RECIPIENT_TEAM)\" *ngIf\u003d\"showRecipient\" [attr.aria-sort]\u003d\"getAriaSort(SortBy.RECIPIENT_TEAM)\"\u003e"},{"lineNumber":26,"author":{"gitId":"weiquu"},"content":"          \u003cbutton\u003e"},{"lineNumber":27,"author":{"gitId":"-"},"content":"            Team"},{"lineNumber":28,"author":{"gitId":"weiquu"},"content":"            \u003cspan class\u003d\"fa-stack\" aria-hidden\u003d\"true\"\u003e"},{"lineNumber":29,"author":{"gitId":"-"},"content":"              \u003ci class\u003d\"fas fa-sort\"\u003e\u003c/i\u003e"},{"lineNumber":30,"author":{"gitId":"-"},"content":"              \u003ci *ngIf\u003d\"sortBy \u003d\u003d\u003d SortBy.RECIPIENT_TEAM \u0026\u0026 sortOrder \u003d\u003d\u003d SortOrder.DESC\" class\u003d\"fas fa-sort-down\"\u003e\u003c/i\u003e"},{"lineNumber":31,"author":{"gitId":"-"},"content":"              \u003ci *ngIf\u003d\"sortBy \u003d\u003d\u003d SortBy.RECIPIENT_TEAM \u0026\u0026 sortOrder \u003d\u003d\u003d SortOrder.ASC\" class\u003d\"fas fa-sort-up\"\u003e\u003c/i\u003e"},{"lineNumber":32,"author":{"gitId":"-"},"content":"            \u003c/span\u003e"},{"lineNumber":33,"author":{"gitId":"weiquu"},"content":"          \u003c/button\u003e"},{"lineNumber":34,"author":{"gitId":"-"},"content":"        \u003c/th\u003e"},{"lineNumber":35,"author":{"gitId":"weiquu"},"content":"        \u003cth class\u003d\"sortable-header\" (click)\u003d\"sortResponses(SortBy.RECIPIENT_NAME)\" *ngIf\u003d\"showRecipient\" [attr.aria-sort]\u003d\"getAriaSort(SortBy.RECIPIENT_NAME)\"\u003e"},{"lineNumber":36,"author":{"gitId":"weiquu"},"content":"          \u003cbutton\u003e"},{"lineNumber":37,"author":{"gitId":"-"},"content":"            Recipient"},{"lineNumber":38,"author":{"gitId":"weiquu"},"content":"            \u003cspan class\u003d\"fa-stack\" aria-hidden\u003d\"true\"\u003e"},{"lineNumber":39,"author":{"gitId":"-"},"content":"              \u003ci class\u003d\"fas fa-sort\"\u003e\u003c/i\u003e"},{"lineNumber":40,"author":{"gitId":"-"},"content":"              \u003ci *ngIf\u003d\"sortBy \u003d\u003d\u003d SortBy.RECIPIENT_NAME \u0026\u0026 sortOrder \u003d\u003d\u003d SortOrder.DESC\" class\u003d\"fas fa-sort-down\"\u003e\u003c/i\u003e"},{"lineNumber":41,"author":{"gitId":"-"},"content":"              \u003ci *ngIf\u003d\"sortBy \u003d\u003d\u003d SortBy.RECIPIENT_NAME \u0026\u0026 sortOrder \u003d\u003d\u003d SortOrder.ASC\" class\u003d\"fas fa-sort-up\"\u003e\u003c/i\u003e"},{"lineNumber":42,"author":{"gitId":"-"},"content":"            \u003c/span\u003e"},{"lineNumber":43,"author":{"gitId":"weiquu"},"content":"          \u003c/button\u003e"},{"lineNumber":44,"author":{"gitId":"-"},"content":"        \u003c/th\u003e"},{"lineNumber":45,"author":{"gitId":"-"},"content":"        \u003cth\u003eResponse\u003c/th\u003e"},{"lineNumber":46,"author":{"gitId":"-"},"content":"        \u003cth\u003eComment for Response\u003c/th\u003e"},{"lineNumber":47,"author":{"gitId":"-"},"content":"        \u003cth class\u003d\"text-center no-print actions-cell\" [ngClass]\u003d\"{ \u0027actions-cell-narrow\u0027: question.questionType \u003d\u003d\u003d \u0027CONTRIB\u0027 }\"\u003eActions\u003c/th\u003e"},{"lineNumber":48,"author":{"gitId":"-"},"content":"      \u003c/tr\u003e"},{"lineNumber":49,"author":{"gitId":"-"},"content":"    \u003c/thead\u003e"},{"lineNumber":50,"author":{"gitId":"-"},"content":"    \u003ctbody\u003e"},{"lineNumber":51,"author":{"gitId":"-"},"content":"      \u003ctr *ngFor\u003d\"let response of responsesToShow\" [class.color-neutral]\u003d\"response.isMissingResponse\"\u003e"},{"lineNumber":52,"author":{"gitId":"-"},"content":"        \u003ctd *ngIf\u003d\"showGiver\"\u003e{{ response.giverTeam }}\u003c/td\u003e"},{"lineNumber":53,"author":{"gitId":"-"},"content":"        \u003ctd *ngIf\u003d\"showGiver\"\u003e"},{"lineNumber":54,"author":{"gitId":"-"},"content":"          {{ response.giver \u003d\u003d\u003d \u0027-\u0027 ? \u0027No Specific User\u0027 : response.giver}}"},{"lineNumber":55,"author":{"gitId":"-"},"content":"          {{response.giverEmail? \" (\" + response.giverEmail + \")\" : \"\"}}"},{"lineNumber":56,"author":{"gitId":"-"},"content":"        \u003c/td\u003e"},{"lineNumber":57,"author":{"gitId":"-"},"content":"        \u003ctd *ngIf\u003d\"showRecipient\"\u003e"},{"lineNumber":58,"author":{"gitId":"-"},"content":"          {{ response.recipientTeam \u003d\u003d\u003d \u0027-\u0027 ? \u0027No Specific Team\u0027 : response.recipientTeam}}"},{"lineNumber":59,"author":{"gitId":"-"},"content":"        \u003c/td\u003e"},{"lineNumber":60,"author":{"gitId":"-"},"content":"        \u003ctd *ngIf\u003d\"showRecipient\"\u003e"},{"lineNumber":61,"author":{"gitId":"-"},"content":"          {{ response.recipient \u003d\u003d\u003d \u0027-\u0027 ? \u0027No Specific User\u0027 : response.recipient}}"},{"lineNumber":62,"author":{"gitId":"-"},"content":"          {{response.recipientEmail? \" (\" + response.recipientEmail + \")\" : \"\"}}"},{"lineNumber":63,"author":{"gitId":"-"},"content":"        \u003c/td\u003e"},{"lineNumber":64,"author":{"gitId":"-"},"content":"        \u003ctd\u003e"},{"lineNumber":65,"author":{"gitId":"-"},"content":"          \u003ctm-single-response [responseDetails]\u003d\"response.responseDetails\" [questionDetails]\u003d\"question.questionDetails\""},{"lineNumber":66,"author":{"gitId":"-"},"content":"                              [giverEmail]\u003d\"response.giverEmail\" [recipientEmail]\u003d\"response.recipientEmail\" [statistics]\u003d\"statistics\"\u003e\u003c/tm-single-response\u003e"},{"lineNumber":67,"author":{"gitId":"-"},"content":"        \u003c/td\u003e"},{"lineNumber":68,"author":{"gitId":"-"},"content":"        \u003ctd\u003e"},{"lineNumber":69,"author":{"gitId":"-"},"content":"          \u003cdiv *ngIf\u003d\"response.participantComment\" [innerHTML]\u003d\"response.participantComment.commentText | safeHtml\"\u003e\u003c/div\u003e"},{"lineNumber":70,"author":{"gitId":"-"},"content":"        \u003c/td\u003e"},{"lineNumber":71,"author":{"gitId":"-"},"content":"        \u003ctd class\u003d\"text-center no-print\"\u003e"},{"lineNumber":72,"author":{"gitId":"-"},"content":"          \u003ctm-response-moderation-button *ngIf\u003d\"response.relatedGiverEmail\" [session]\u003d\"session\" [relatedGiverEmail]\u003d\"response.relatedGiverEmail\""},{"lineNumber":73,"author":{"gitId":"-"},"content":"                                         [moderatedQuestionId]\u003d\"question.feedbackQuestionId\" [isGiverInstructor]\u003d\"question.giverType \u003d\u003d\u003d \u0027INSTRUCTORS\u0027\" btnStyle\u003d\"LIGHT\"\u003e\u003c/tm-response-moderation-button\u003e"},{"lineNumber":74,"author":{"gitId":"-"},"content":"          \u003cbutton id\u003d\"btn-add-comment\" class\u003d\"btn btn-light btn-sm btn-margin-left\" [disabled]\u003d\"isDisplayOnly\""},{"lineNumber":75,"author":{"gitId":"-"},"content":"                  *ngIf\u003d\"!response.isMissingResponse \u0026\u0026 question.questionType !\u003d\u003d \u0027CONTRIB\u0027\""},{"lineNumber":76,"author":{"gitId":"-"},"content":"                  (click)\u003d\"showCommentTableModel(response, commentTableModal)\"\u003eAdd Comment"},{"lineNumber":77,"author":{"gitId":"-"},"content":"            \u003cspan *ngIf\u003d\"instructorCommentTableModel[response.responseId].commentRows.length\" class\u003d\"badge bg-secondary\"\u003e{{this.instructorCommentTableModel[response.responseId].commentRows.length}}\u003c/span\u003e"},{"lineNumber":78,"author":{"gitId":"-"},"content":"          \u003c/button\u003e"},{"lineNumber":79,"author":{"gitId":"-"},"content":"        \u003c/td\u003e"},{"lineNumber":80,"author":{"gitId":"-"},"content":"      \u003c/tr\u003e"},{"lineNumber":81,"author":{"gitId":"-"},"content":"    \u003c/tbody\u003e"},{"lineNumber":82,"author":{"gitId":"-"},"content":"  \u003c/table\u003e"},{"lineNumber":83,"author":{"gitId":"-"},"content":"\u003c/div\u003e"},{"lineNumber":84,"author":{"gitId":"-"},"content":"\u003cdiv id\u003d\"no-responses\" *ngIf\u003d\"!responsesToShow.length\"\u003e"},{"lineNumber":85,"author":{"gitId":"-"},"content":"  \u003ci\u003eThere are no responses for this question or you may not have the permission to see the response.\u003c/i\u003e"},{"lineNumber":86,"author":{"gitId":"-"},"content":"\u003c/div\u003e"},{"lineNumber":87,"author":{"gitId":"-"},"content":""},{"lineNumber":88,"author":{"gitId":"-"},"content":"\u003cng-template #commentTableModal let-modal\u003e"},{"lineNumber":89,"author":{"gitId":"-"},"content":"  \u003ctm-comment-table-modal *ngIf\u003d\"currResponseToAdd\" [questionShowResponsesTo]\u003d\"question.showResponsesTo\""},{"lineNumber":90,"author":{"gitId":"-"},"content":"                          [activeModal]\u003d\"modal\""},{"lineNumber":91,"author":{"gitId":"-"},"content":"                          [model]\u003d\"instructorCommentTableModel[currResponseToAdd.responseId]\""},{"lineNumber":92,"author":{"gitId":"-"},"content":"                          [response]\u003d\"currResponseToAdd\""},{"lineNumber":93,"author":{"gitId":"-"},"content":"                          (modelChange)\u003d\"triggerModelChangeForSingleResponse(currResponseToAdd.responseId, $event)\""},{"lineNumber":94,"author":{"gitId":"-"},"content":"                          (saveNewCommentEvent)\u003d\"triggerSaveNewCommentEvent(currResponseToAdd.responseId)\""},{"lineNumber":95,"author":{"gitId":"-"},"content":"                          (updateCommentEvent)\u003d\"triggerUpdateCommentEvent(currResponseToAdd.responseId, $event)\""},{"lineNumber":96,"author":{"gitId":"-"},"content":"                          (deleteCommentEvent)\u003d\"triggerDeleteCommentEvent(currResponseToAdd.responseId, $event)\""},{"lineNumber":97,"author":{"gitId":"-"},"content":"  \u003e\u003c/tm-comment-table-modal\u003e"},{"lineNumber":98,"author":{"gitId":"-"},"content":"\u003c/ng-template\u003e"}],"authorContributionMap":{"weiquu":16,"-":82}},{"path":"src/web/app/components/question-responses/per-question-view-responses/per-question-view-responses.component.scss","fileType":"scss","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":".sortable-header {"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  cursor: pointer;"},{"lineNumber":3,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":4,"author":{"gitId":"weiquu"},"content":"  i {"},{"lineNumber":5,"author":{"gitId":"weiquu"},"content":"    margin-left: .3em;"},{"lineNumber":6,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":7,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":8,"author":{"gitId":"weiquu"},"content":"  .fa-stack {"},{"lineNumber":9,"author":{"gitId":"weiquu"},"content":"    width: 20%;"},{"lineNumber":10,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":11,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":12,"author":{"gitId":"weiquu"},"content":"  button {"},{"lineNumber":13,"author":{"gitId":"weiquu"},"content":"    background: none;"},{"lineNumber":14,"author":{"gitId":"weiquu"},"content":"    color: inherit;"},{"lineNumber":15,"author":{"gitId":"weiquu"},"content":"    border: none;"},{"lineNumber":16,"author":{"gitId":"weiquu"},"content":"    padding: 0;"},{"lineNumber":17,"author":{"gitId":"weiquu"},"content":"    text-align: left;"},{"lineNumber":18,"author":{"gitId":"weiquu"},"content":"    width: 100%;"},{"lineNumber":19,"author":{"gitId":"weiquu"},"content":"    font: inherit;"},{"lineNumber":20,"author":{"gitId":"weiquu"},"content":"    cursor: inherit;"},{"lineNumber":21,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":22,"author":{"gitId":"-"},"content":"}"},{"lineNumber":23,"author":{"gitId":"-"},"content":""},{"lineNumber":24,"author":{"gitId":"-"},"content":".color-neutral {"},{"lineNumber":25,"author":{"gitId":"-"},"content":"  color: gray;"},{"lineNumber":26,"author":{"gitId":"-"},"content":"}"},{"lineNumber":27,"author":{"gitId":"-"},"content":""},{"lineNumber":28,"author":{"gitId":"-"},"content":".actions-cell,"},{"lineNumber":29,"author":{"gitId":"-"},"content":".actions-cell-narrow {"},{"lineNumber":30,"author":{"gitId":"-"},"content":"  min-width: 160px;"},{"lineNumber":31,"author":{"gitId":"-"},"content":"}"},{"lineNumber":32,"author":{"gitId":"-"},"content":""},{"lineNumber":33,"author":{"gitId":"-"},"content":"@media (min-width: 1000px) {"},{"lineNumber":34,"author":{"gitId":"-"},"content":"  .actions-cell {"},{"lineNumber":35,"author":{"gitId":"-"},"content":"    min-width: 300px;"},{"lineNumber":36,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":37,"author":{"gitId":"-"},"content":""},{"lineNumber":38,"author":{"gitId":"-"},"content":"  .actions-cell-narrow {"},{"lineNumber":39,"author":{"gitId":"-"},"content":"    min-width: 160px;"},{"lineNumber":40,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":41,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"weiquu":19,"-":22}},{"path":"src/web/app/components/question-responses/per-question-view-responses/per-question-view-responses.component.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { Component, Input, OnChanges, OnInit } from \u0027@angular/core\u0027;"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import { NgbModal, NgbModalRef } from \u0027@ng-bootstrap/ng-bootstrap\u0027;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"import { FeedbackResponsesService } from \u0027../../../../services/feedback-responses.service\u0027;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import { TableComparatorService } from \u0027../../../../services/table-comparator.service\u0027;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":6,"author":{"gitId":"-"},"content":"  FeedbackSession, FeedbackSessionPublishStatus, FeedbackSessionSubmissionStatus,"},{"lineNumber":7,"author":{"gitId":"-"},"content":"  ResponseOutput, ResponseVisibleSetting, SessionVisibleSetting,"},{"lineNumber":8,"author":{"gitId":"-"},"content":"} from \u0027../../../../types/api-output\u0027;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import { SortBy, SortOrder } from \u0027../../../../types/sort-properties\u0027;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":11,"author":{"gitId":"-"},"content":"  InstructorSessionResultSectionType,"},{"lineNumber":12,"author":{"gitId":"-"},"content":"} from \u0027../../../pages-instructor/instructor-session-result-page/instructor-session-result-section-type.enum\u0027;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import { InstructorResponsesViewBase } from \u0027../instructor-responses-view-base\u0027;"},{"lineNumber":14,"author":{"gitId":"-"},"content":""},{"lineNumber":15,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":16,"author":{"gitId":"-"},"content":" * Component to display list of responses for one question."},{"lineNumber":17,"author":{"gitId":"-"},"content":" */"},{"lineNumber":18,"author":{"gitId":"-"},"content":"@Component({"},{"lineNumber":19,"author":{"gitId":"-"},"content":"  selector: \u0027tm-per-question-view-responses\u0027,"},{"lineNumber":20,"author":{"gitId":"-"},"content":"  templateUrl: \u0027./per-question-view-responses.component.html\u0027,"},{"lineNumber":21,"author":{"gitId":"-"},"content":"  styleUrls: [\u0027./per-question-view-responses.component.scss\u0027],"},{"lineNumber":22,"author":{"gitId":"-"},"content":"})"},{"lineNumber":23,"author":{"gitId":"-"},"content":"export class PerQuestionViewResponsesComponent extends InstructorResponsesViewBase implements OnInit, OnChanges {"},{"lineNumber":24,"author":{"gitId":"-"},"content":""},{"lineNumber":25,"author":{"gitId":"-"},"content":"  SortBy: typeof SortBy \u003d SortBy;"},{"lineNumber":26,"author":{"gitId":"-"},"content":"  SortOrder: typeof SortOrder \u003d SortOrder;"},{"lineNumber":27,"author":{"gitId":"-"},"content":""},{"lineNumber":28,"author":{"gitId":"-"},"content":"  @Input() responses: ResponseOutput[] \u003d [];"},{"lineNumber":29,"author":{"gitId":"-"},"content":"  @Input() section: string \u003d \u0027\u0027;"},{"lineNumber":30,"author":{"gitId":"-"},"content":"  @Input() sectionType: InstructorSessionResultSectionType \u003d InstructorSessionResultSectionType.EITHER;"},{"lineNumber":31,"author":{"gitId":"-"},"content":"  @Input() groupByTeam: boolean \u003d true;"},{"lineNumber":32,"author":{"gitId":"-"},"content":"  @Input() indicateMissingResponses: boolean \u003d true;"},{"lineNumber":33,"author":{"gitId":"-"},"content":"  @Input() showGiver: boolean \u003d true;"},{"lineNumber":34,"author":{"gitId":"-"},"content":"  @Input() showRecipient: boolean \u003d true;"},{"lineNumber":35,"author":{"gitId":"-"},"content":"  @Input() session: FeedbackSession \u003d {"},{"lineNumber":36,"author":{"gitId":"-"},"content":"    courseId: \u0027\u0027,"},{"lineNumber":37,"author":{"gitId":"-"},"content":"    timeZone: \u0027\u0027,"},{"lineNumber":38,"author":{"gitId":"-"},"content":"    feedbackSessionName: \u0027\u0027,"},{"lineNumber":39,"author":{"gitId":"-"},"content":"    instructions: \u0027\u0027,"},{"lineNumber":40,"author":{"gitId":"-"},"content":"    submissionStartTimestamp: 0,"},{"lineNumber":41,"author":{"gitId":"-"},"content":"    submissionEndTimestamp: 0,"},{"lineNumber":42,"author":{"gitId":"-"},"content":"    gracePeriod: 0,"},{"lineNumber":43,"author":{"gitId":"-"},"content":"    sessionVisibleSetting: SessionVisibleSetting.AT_OPEN,"},{"lineNumber":44,"author":{"gitId":"-"},"content":"    responseVisibleSetting: ResponseVisibleSetting.AT_VISIBLE,"},{"lineNumber":45,"author":{"gitId":"-"},"content":"    submissionStatus: FeedbackSessionSubmissionStatus.OPEN,"},{"lineNumber":46,"author":{"gitId":"-"},"content":"    publishStatus: FeedbackSessionPublishStatus.NOT_PUBLISHED,"},{"lineNumber":47,"author":{"gitId":"-"},"content":"    isClosingEmailEnabled: true,"},{"lineNumber":48,"author":{"gitId":"-"},"content":"    isPublishedEmailEnabled: true,"},{"lineNumber":49,"author":{"gitId":"-"},"content":"    createdAtTimestamp: 0,"},{"lineNumber":50,"author":{"gitId":"-"},"content":"    studentDeadlines: {},"},{"lineNumber":51,"author":{"gitId":"-"},"content":"    instructorDeadlines: {},"},{"lineNumber":52,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":53,"author":{"gitId":"-"},"content":"  @Input() isDisplayOnly: boolean \u003d false;"},{"lineNumber":54,"author":{"gitId":"-"},"content":"  @Input() statistics: string \u003d \u0027\u0027;"},{"lineNumber":55,"author":{"gitId":"-"},"content":""},{"lineNumber":56,"author":{"gitId":"-"},"content":"  responsesToShow: ResponseOutput[] \u003d [];"},{"lineNumber":57,"author":{"gitId":"-"},"content":"  sortBy: SortBy \u003d SortBy.NONE;"},{"lineNumber":58,"author":{"gitId":"-"},"content":"  sortOrder: SortOrder \u003d SortOrder.ASC;"},{"lineNumber":59,"author":{"gitId":"-"},"content":""},{"lineNumber":60,"author":{"gitId":"-"},"content":"  currResponseToAdd?: ResponseOutput;"},{"lineNumber":61,"author":{"gitId":"-"},"content":""},{"lineNumber":62,"author":{"gitId":"-"},"content":"  constructor(private tableComparatorService: TableComparatorService,"},{"lineNumber":63,"author":{"gitId":"-"},"content":"    private feedbackResponsesService: FeedbackResponsesService,"},{"lineNumber":64,"author":{"gitId":"-"},"content":"    private ngbModal: NgbModal) {"},{"lineNumber":65,"author":{"gitId":"-"},"content":"    super();"},{"lineNumber":66,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":67,"author":{"gitId":"-"},"content":""},{"lineNumber":68,"author":{"gitId":"-"},"content":"  ngOnInit(): void {"},{"lineNumber":69,"author":{"gitId":"-"},"content":"    this.filterResponses();"},{"lineNumber":70,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":71,"author":{"gitId":"-"},"content":""},{"lineNumber":72,"author":{"gitId":"-"},"content":"  ngOnChanges(): void {"},{"lineNumber":73,"author":{"gitId":"-"},"content":"    this.filterResponses();"},{"lineNumber":74,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":75,"author":{"gitId":"-"},"content":""},{"lineNumber":76,"author":{"gitId":"-"},"content":"  private filterResponses(): void {"},{"lineNumber":77,"author":{"gitId":"-"},"content":"    const responsesToShow: ResponseOutput[] \u003d [];"},{"lineNumber":78,"author":{"gitId":"-"},"content":"    for (const response of this.responses) {"},{"lineNumber":79,"author":{"gitId":"-"},"content":"      if (!this.indicateMissingResponses \u0026\u0026 response.isMissingResponse) {"},{"lineNumber":80,"author":{"gitId":"-"},"content":"        // filter out missing responses"},{"lineNumber":81,"author":{"gitId":"-"},"content":"        continue;"},{"lineNumber":82,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":83,"author":{"gitId":"-"},"content":""},{"lineNumber":84,"author":{"gitId":"-"},"content":"      const shouldDisplayBasedOnSection: boolean \u003d this.feedbackResponsesService"},{"lineNumber":85,"author":{"gitId":"-"},"content":"        .isFeedbackResponsesDisplayedOnSection(response, this.section, this.sectionType);"},{"lineNumber":86,"author":{"gitId":"-"},"content":""},{"lineNumber":87,"author":{"gitId":"-"},"content":"      if (!shouldDisplayBasedOnSection) {"},{"lineNumber":88,"author":{"gitId":"-"},"content":"        continue;"},{"lineNumber":89,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":90,"author":{"gitId":"-"},"content":""},{"lineNumber":91,"author":{"gitId":"-"},"content":"      responsesToShow.push(response);"},{"lineNumber":92,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":93,"author":{"gitId":"-"},"content":""},{"lineNumber":94,"author":{"gitId":"-"},"content":"    const hasRealResponse: boolean \u003d"},{"lineNumber":95,"author":{"gitId":"-"},"content":"      responsesToShow.some((response: ResponseOutput) \u003d\u003e !response.isMissingResponse);"},{"lineNumber":96,"author":{"gitId":"-"},"content":"    if (hasRealResponse) {"},{"lineNumber":97,"author":{"gitId":"-"},"content":"      this.responsesToShow \u003d responsesToShow;"},{"lineNumber":98,"author":{"gitId":"-"},"content":"      this.sortResponses(this.sortBy);"},{"lineNumber":99,"author":{"gitId":"-"},"content":"    } else {"},{"lineNumber":100,"author":{"gitId":"-"},"content":"      // If there is no real response, it is not necessary to show any of the missing responses"},{"lineNumber":101,"author":{"gitId":"-"},"content":"      this.responsesToShow \u003d [];"},{"lineNumber":102,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":103,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":104,"author":{"gitId":"-"},"content":""},{"lineNumber":105,"author":{"gitId":"-"},"content":"  sortResponses(by: SortBy): void {"},{"lineNumber":106,"author":{"gitId":"-"},"content":"    if (by !\u003d\u003d SortBy.NONE \u0026\u0026 this.sortBy \u003d\u003d\u003d by) {"},{"lineNumber":107,"author":{"gitId":"-"},"content":"      this.sortOrder \u003d this.sortOrder \u003d\u003d\u003d SortOrder.ASC ? SortOrder.DESC : SortOrder.ASC;"},{"lineNumber":108,"author":{"gitId":"-"},"content":"    } else {"},{"lineNumber":109,"author":{"gitId":"-"},"content":"      this.sortBy \u003d by;"},{"lineNumber":110,"author":{"gitId":"-"},"content":"      this.sortOrder \u003d SortOrder.ASC;"},{"lineNumber":111,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":112,"author":{"gitId":"-"},"content":"    this.responsesToShow.sort(this.sortResponsesBy(by, this.sortOrder));"},{"lineNumber":113,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":114,"author":{"gitId":"-"},"content":""},{"lineNumber":115,"author":{"gitId":"weiquu"},"content":"  getAriaSort(by: SortBy): String {"},{"lineNumber":116,"author":{"gitId":"weiquu"},"content":"    if (by !\u003d\u003d this.sortBy) {"},{"lineNumber":117,"author":{"gitId":"weiquu"},"content":"      return \u0027none\u0027;"},{"lineNumber":118,"author":{"gitId":"weiquu"},"content":"    }"},{"lineNumber":119,"author":{"gitId":"weiquu"},"content":"    return this.sortOrder \u003d\u003d\u003d SortOrder.ASC ? \u0027ascending\u0027 : \u0027descending\u0027;"},{"lineNumber":120,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":121,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":122,"author":{"gitId":"-"},"content":"  sortResponsesBy(by: SortBy, order: SortOrder):"},{"lineNumber":123,"author":{"gitId":"-"},"content":"    ((a: ResponseOutput, b: ResponseOutput) \u003d\u003e number) {"},{"lineNumber":124,"author":{"gitId":"-"},"content":"    if (by \u003d\u003d\u003d SortBy.NONE) {"},{"lineNumber":125,"author":{"gitId":"-"},"content":"      // Default order: giver team \u003e giver name \u003e recipient team \u003e recipient name"},{"lineNumber":126,"author":{"gitId":"-"},"content":"      return ((a: ResponseOutput, b: ResponseOutput): number \u003d\u003e {"},{"lineNumber":127,"author":{"gitId":"-"},"content":"        return this.tableComparatorService.compare(SortBy.GIVER_TEAM, order, a.giverTeam, b.giverTeam)"},{"lineNumber":128,"author":{"gitId":"-"},"content":"          || this.tableComparatorService.compare(SortBy.GIVER_NAME, order, a.giver, b.giver)"},{"lineNumber":129,"author":{"gitId":"-"},"content":"          || this.tableComparatorService.compare(SortBy.RECIPIENT_TEAM, order, a.recipientTeam, b.recipientTeam)"},{"lineNumber":130,"author":{"gitId":"-"},"content":"          || this.tableComparatorService.compare(SortBy.RECIPIENT_NAME, order, a.recipient, b.recipient);"},{"lineNumber":131,"author":{"gitId":"-"},"content":"      });"},{"lineNumber":132,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":133,"author":{"gitId":"-"},"content":"    return ((a: ResponseOutput, b: ResponseOutput): number \u003d\u003e {"},{"lineNumber":134,"author":{"gitId":"-"},"content":"      let strA: string;"},{"lineNumber":135,"author":{"gitId":"-"},"content":"      let strB: string;"},{"lineNumber":136,"author":{"gitId":"-"},"content":"      switch (by) {"},{"lineNumber":137,"author":{"gitId":"-"},"content":"        case SortBy.GIVER_TEAM:"},{"lineNumber":138,"author":{"gitId":"-"},"content":"          strA \u003d a.giverTeam;"},{"lineNumber":139,"author":{"gitId":"-"},"content":"          strB \u003d b.giverTeam;"},{"lineNumber":140,"author":{"gitId":"-"},"content":"          break;"},{"lineNumber":141,"author":{"gitId":"-"},"content":"        case SortBy.GIVER_NAME:"},{"lineNumber":142,"author":{"gitId":"-"},"content":"          strA \u003d a.giver;"},{"lineNumber":143,"author":{"gitId":"-"},"content":"          strB \u003d b.giver;"},{"lineNumber":144,"author":{"gitId":"-"},"content":"          break;"},{"lineNumber":145,"author":{"gitId":"-"},"content":"        case SortBy.RECIPIENT_TEAM:"},{"lineNumber":146,"author":{"gitId":"-"},"content":"          strA \u003d a.recipientTeam;"},{"lineNumber":147,"author":{"gitId":"-"},"content":"          strB \u003d b.recipientTeam;"},{"lineNumber":148,"author":{"gitId":"-"},"content":"          break;"},{"lineNumber":149,"author":{"gitId":"-"},"content":"        case SortBy.RECIPIENT_NAME:"},{"lineNumber":150,"author":{"gitId":"-"},"content":"          strA \u003d a.recipient;"},{"lineNumber":151,"author":{"gitId":"-"},"content":"          strB \u003d b.recipient;"},{"lineNumber":152,"author":{"gitId":"-"},"content":"          break;"},{"lineNumber":153,"author":{"gitId":"-"},"content":"        default:"},{"lineNumber":154,"author":{"gitId":"-"},"content":"          strA \u003d \u0027\u0027;"},{"lineNumber":155,"author":{"gitId":"-"},"content":"          strB \u003d \u0027\u0027;"},{"lineNumber":156,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":157,"author":{"gitId":"-"},"content":"      return this.tableComparatorService.compare(by, order, strA, strB);"},{"lineNumber":158,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":159,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":160,"author":{"gitId":"-"},"content":""},{"lineNumber":161,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":162,"author":{"gitId":"-"},"content":"   * Opens the comments table modal."},{"lineNumber":163,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":164,"author":{"gitId":"-"},"content":"  showCommentTableModel(selectedResponse: ResponseOutput, modal: any): void {"},{"lineNumber":165,"author":{"gitId":"-"},"content":"    // open as ng-template rather than concrete class due to the"},{"lineNumber":166,"author":{"gitId":"-"},"content":"    // lack of ability to bind @Input to the modal"},{"lineNumber":167,"author":{"gitId":"-"},"content":"    // https://github.com/ng-bootstrap/ng-bootstrap/issues/2645"},{"lineNumber":168,"author":{"gitId":"-"},"content":""},{"lineNumber":169,"author":{"gitId":"-"},"content":"    const commentModalRef: NgbModalRef \u003d this.ngbModal.open(modal);"},{"lineNumber":170,"author":{"gitId":"-"},"content":"    this.currResponseToAdd \u003d selectedResponse;"},{"lineNumber":171,"author":{"gitId":"-"},"content":"    commentModalRef.result.then(() \u003d\u003e { }, () \u003d\u003e {"},{"lineNumber":172,"author":{"gitId":"-"},"content":"      this.currResponseToAdd \u003d undefined;"},{"lineNumber":173,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":174,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":175,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"weiquu":7,"-":168}},{"path":"src/web/app/components/question-responses/student-view-responses/student-view-responses.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"card border-{{ isSelfResponses ? \u0027info\u0027 : \u0027primary\u0027 }} mt-4\"\u003e"},{"lineNumber":2,"author":{"gitId":"weiquu"},"content":"  \u003cdiv class\u003d\"card-header bg-{{ isSelfResponses ? \u0027info\u0027 : \u0027primary\u0027 }}\" [ngClass]\u003d\"{ \u0027text-white\u0027: !isSelfResponses }\"\u003e"},{"lineNumber":3,"author":{"gitId":"weiquu"},"content":"    \u003cspan class\u003d\"response-recipient\"\u003e\u003cb\u003eTo:\u003c/b\u003e {{ recipient }}\u003c/span\u003e"},{"lineNumber":4,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":5,"author":{"gitId":"jasonqiu212"},"content":"  \u003cdiv class\u003d\"card-body table-responsive\" style\u003d\"padding: 0;\"\u003e"},{"lineNumber":6,"author":{"gitId":"-"},"content":"    \u003ctable class\u003d\"table\"\u003e"},{"lineNumber":7,"author":{"gitId":"-"},"content":"      \u003ctbody\u003e"},{"lineNumber":8,"author":{"gitId":"-"},"content":"        \u003cng-container *ngFor\u003d\"let response of responses\"\u003e"},{"lineNumber":9,"author":{"gitId":"-"},"content":"          \u003ctr\u003e"},{"lineNumber":10,"author":{"gitId":"weiquu"},"content":"            \u003ctd class\u003d\"response-giver\"\u003e"},{"lineNumber":11,"author":{"gitId":"-"},"content":"              \u003cstrong\u003eFrom:\u003c/strong\u003e {{ response.giver }}"},{"lineNumber":12,"author":{"gitId":"-"},"content":"            \u003c/td\u003e"},{"lineNumber":13,"author":{"gitId":"-"},"content":"          \u003c/tr\u003e"},{"lineNumber":14,"author":{"gitId":"-"},"content":"          \u003ctr\u003e"},{"lineNumber":15,"author":{"gitId":"-"},"content":"            \u003ctd\u003e"},{"lineNumber":16,"author":{"gitId":"-"},"content":"              \u003ctm-single-response [responseDetails]\u003d\"response.responseDetails\" [questionDetails]\u003d\"feedbackQuestion.questionDetails\""},{"lineNumber":17,"author":{"gitId":"-"},"content":"                                  [isStudentPage]\u003d\"true\" [giverEmail]\u003d\"response.giverEmail\" [recipientEmail]\u003d\"response.recipientEmail\" [statistics]\u003d\"statistics\"\u003e\u003c/tm-single-response\u003e"},{"lineNumber":18,"author":{"gitId":"-"},"content":"            \u003c/td\u003e"},{"lineNumber":19,"author":{"gitId":"-"},"content":"          \u003c/tr\u003e"},{"lineNumber":20,"author":{"gitId":"-"},"content":"          \u003ctr *ngIf\u003d\"response.participantComment\"\u003e"},{"lineNumber":21,"author":{"gitId":"-"},"content":"            \u003ctd\u003e"},{"lineNumber":22,"author":{"gitId":"-"},"content":"              \u003ctm-comment-row"},{"lineNumber":23,"author":{"gitId":"-"},"content":"                              [mode]\u003d\"CommentRowMode.EDIT\""},{"lineNumber":24,"author":{"gitId":"-"},"content":"                              [isVisibilityOptionEnabled]\u003d\"false\""},{"lineNumber":25,"author":{"gitId":"-"},"content":"                              [isDisabled]\u003d\"true\""},{"lineNumber":26,"author":{"gitId":"-"},"content":"                              [shouldHideSavingButton]\u003d\"true\""},{"lineNumber":27,"author":{"gitId":"-"},"content":"                              [shouldHideClosingButton]\u003d\"true\""},{"lineNumber":28,"author":{"gitId":"-"},"content":"                              [shouldHideEditButton]\u003d\"true\""},{"lineNumber":29,"author":{"gitId":"-"},"content":"                              [shouldHideDeleteButton]\u003d\"true\""},{"lineNumber":30,"author":{"gitId":"-"},"content":"                              [isFeedbackParticipantComment]\u003d\"true\""},{"lineNumber":31,"author":{"gitId":"-"},"content":"                              [response]\u003d\"response\""},{"lineNumber":32,"author":{"gitId":"-"},"content":"                              [questionShowResponsesTo]\u003d\"feedbackQuestion.showResponsesTo\""},{"lineNumber":33,"author":{"gitId":"-"},"content":"                              [model]\u003d\"response.participantComment | commentToCommentRowModel\""},{"lineNumber":34,"author":{"gitId":"-"},"content":"            \u003e\u003c/tm-comment-row\u003e"},{"lineNumber":35,"author":{"gitId":"-"},"content":"            \u003c/td\u003e"},{"lineNumber":36,"author":{"gitId":"-"},"content":"          \u003c/tr\u003e"},{"lineNumber":37,"author":{"gitId":"-"},"content":"          \u003ctr *ngIf\u003d\"response.instructorComments.length \u003e 0\"\u003e"},{"lineNumber":38,"author":{"gitId":"-"},"content":"            \u003ctd\u003e"},{"lineNumber":39,"author":{"gitId":"-"},"content":"              \u003ctm-comment-table"},{"lineNumber":40,"author":{"gitId":"-"},"content":"                  [response]\u003d\"response\""},{"lineNumber":41,"author":{"gitId":"-"},"content":"                  [questionShowResponsesTo]\u003d\"feedbackQuestion.showResponsesTo\""},{"lineNumber":42,"author":{"gitId":"-"},"content":"                  [model]\u003d\"response.instructorComments | commentsToCommentTableModel: true : timezone\""},{"lineNumber":43,"author":{"gitId":"-"},"content":"                  [shouldHideClosingButtonForNewComment]\u003d\"true\""},{"lineNumber":44,"author":{"gitId":"-"},"content":"              \u003e\u003c/tm-comment-table\u003e"},{"lineNumber":45,"author":{"gitId":"-"},"content":"            \u003c/td\u003e"},{"lineNumber":46,"author":{"gitId":"-"},"content":"          \u003c/tr\u003e"},{"lineNumber":47,"author":{"gitId":"-"},"content":"        \u003c/ng-container\u003e"},{"lineNumber":48,"author":{"gitId":"-"},"content":"      \u003c/tbody\u003e"},{"lineNumber":49,"author":{"gitId":"-"},"content":"    \u003c/table\u003e"},{"lineNumber":50,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":51,"author":{"gitId":"-"},"content":"\u003c/div\u003e"}],"authorContributionMap":{"jasonqiu212":1,"weiquu":3,"-":47}},{"path":"src/web/app/components/question-submission-form/question-submission-form-model.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  FeedbackParticipantType,"},{"lineNumber":3,"author":{"gitId":"-"},"content":"  FeedbackQuestionDetails,"},{"lineNumber":4,"author":{"gitId":"-"},"content":"  FeedbackQuestionType,"},{"lineNumber":5,"author":{"gitId":"-"},"content":"  FeedbackResponseDetails,"},{"lineNumber":6,"author":{"gitId":"-"},"content":"  FeedbackVisibilityType,"},{"lineNumber":7,"author":{"gitId":"-"},"content":"  NumberOfEntitiesToGiveFeedbackToSetting,"},{"lineNumber":8,"author":{"gitId":"-"},"content":"} from \u0027../../../types/api-output\u0027;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import { CommentRowModel } from \u0027../comment-box/comment-row/comment-row.component\u0027;"},{"lineNumber":10,"author":{"gitId":"-"},"content":""},{"lineNumber":11,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":12,"author":{"gitId":"-"},"content":" * The mode of operation for question submission form."},{"lineNumber":13,"author":{"gitId":"-"},"content":" */"},{"lineNumber":14,"author":{"gitId":"-"},"content":"export enum QuestionSubmissionFormMode {"},{"lineNumber":15,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":16,"author":{"gitId":"-"},"content":"   * User cannot select recipient to give feedback to."},{"lineNumber":17,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":18,"author":{"gitId":"-"},"content":"  FIXED_RECIPIENT,"},{"lineNumber":19,"author":{"gitId":"-"},"content":""},{"lineNumber":20,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":21,"author":{"gitId":"-"},"content":"   * User can select recipient to give feedback to."},{"lineNumber":22,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":23,"author":{"gitId":"-"},"content":"  FLEXIBLE_RECIPIENT,"},{"lineNumber":24,"author":{"gitId":"-"},"content":"}"},{"lineNumber":25,"author":{"gitId":"-"},"content":""},{"lineNumber":26,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":27,"author":{"gitId":"-"},"content":" * The form model of question submission form."},{"lineNumber":28,"author":{"gitId":"-"},"content":" */"},{"lineNumber":29,"author":{"gitId":"-"},"content":"export interface QuestionSubmissionFormModel {"},{"lineNumber":30,"author":{"gitId":"-"},"content":"  feedbackQuestionId: string;"},{"lineNumber":31,"author":{"gitId":"-"},"content":""},{"lineNumber":32,"author":{"gitId":"-"},"content":"  questionNumber: number;"},{"lineNumber":33,"author":{"gitId":"-"},"content":"  questionBrief: string;"},{"lineNumber":34,"author":{"gitId":"-"},"content":"  questionDescription: string;"},{"lineNumber":35,"author":{"gitId":"-"},"content":""},{"lineNumber":36,"author":{"gitId":"-"},"content":"  questionType: FeedbackQuestionType;"},{"lineNumber":37,"author":{"gitId":"-"},"content":"  questionDetails: FeedbackQuestionDetails;"},{"lineNumber":38,"author":{"gitId":"-"},"content":""},{"lineNumber":39,"author":{"gitId":"-"},"content":"  giverType: FeedbackParticipantType;"},{"lineNumber":40,"author":{"gitId":"-"},"content":"  recipientType: FeedbackParticipantType;"},{"lineNumber":41,"author":{"gitId":"-"},"content":"  recipientList: FeedbackResponseRecipient[];"},{"lineNumber":42,"author":{"gitId":"-"},"content":"  recipientSubmissionForms: FeedbackResponseRecipientSubmissionFormModel[];"},{"lineNumber":43,"author":{"gitId":"-"},"content":""},{"lineNumber":44,"author":{"gitId":"-"},"content":"  numberOfEntitiesToGiveFeedbackToSetting: NumberOfEntitiesToGiveFeedbackToSetting;"},{"lineNumber":45,"author":{"gitId":"-"},"content":"  customNumberOfEntitiesToGiveFeedbackTo: number;"},{"lineNumber":46,"author":{"gitId":"-"},"content":""},{"lineNumber":47,"author":{"gitId":"-"},"content":"  showResponsesTo: FeedbackVisibilityType[];"},{"lineNumber":48,"author":{"gitId":"-"},"content":"  showGiverNameTo: FeedbackVisibilityType[];"},{"lineNumber":49,"author":{"gitId":"-"},"content":"  showRecipientNameTo: FeedbackVisibilityType[];"},{"lineNumber":50,"author":{"gitId":"-"},"content":""},{"lineNumber":51,"author":{"gitId":"-"},"content":"  isLoading: boolean;"},{"lineNumber":52,"author":{"gitId":"-"},"content":"  isLoaded: boolean;"},{"lineNumber":53,"author":{"gitId":"weiquu"},"content":"  isTabExpanded: boolean;"},{"lineNumber":54,"author":{"gitId":"-"},"content":"}"},{"lineNumber":55,"author":{"gitId":"-"},"content":""},{"lineNumber":56,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":57,"author":{"gitId":"-"},"content":" * A recipient of a feedback question."},{"lineNumber":58,"author":{"gitId":"-"},"content":" */"},{"lineNumber":59,"author":{"gitId":"-"},"content":"export interface FeedbackResponseRecipient {"},{"lineNumber":60,"author":{"gitId":"-"},"content":"  recipientIdentifier: string;"},{"lineNumber":61,"author":{"gitId":"-"},"content":"  recipientName: string;"},{"lineNumber":62,"author":{"gitId":"-"},"content":"  recipientSection?: string;"},{"lineNumber":63,"author":{"gitId":"-"},"content":"  recipientTeam?: string;"},{"lineNumber":64,"author":{"gitId":"-"},"content":"}"},{"lineNumber":65,"author":{"gitId":"-"},"content":""},{"lineNumber":66,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":67,"author":{"gitId":"-"},"content":" * The form modal of recipient submission form."},{"lineNumber":68,"author":{"gitId":"-"},"content":" */"},{"lineNumber":69,"author":{"gitId":"-"},"content":"export interface FeedbackResponseRecipientSubmissionFormModel {"},{"lineNumber":70,"author":{"gitId":"-"},"content":"  responseId: string;"},{"lineNumber":71,"author":{"gitId":"-"},"content":"  recipientIdentifier: string;"},{"lineNumber":72,"author":{"gitId":"-"},"content":"  responseDetails: FeedbackResponseDetails;"},{"lineNumber":73,"author":{"gitId":"-"},"content":""},{"lineNumber":74,"author":{"gitId":"-"},"content":"  isValid: boolean;"},{"lineNumber":75,"author":{"gitId":"-"},"content":""},{"lineNumber":76,"author":{"gitId":"-"},"content":"  // comment by giver"},{"lineNumber":77,"author":{"gitId":"-"},"content":"  commentByGiver?: CommentRowModel;"},{"lineNumber":78,"author":{"gitId":"-"},"content":"}"},{"lineNumber":79,"author":{"gitId":"-"},"content":""},{"lineNumber":80,"author":{"gitId":"-"},"content":"export enum FeedbackRecipientLabelType {"},{"lineNumber":81,"author":{"gitId":"-"},"content":"  // show section, team and name"},{"lineNumber":82,"author":{"gitId":"-"},"content":"  INCLUDE_SECTION,"},{"lineNumber":83,"author":{"gitId":"-"},"content":"  // show team and name"},{"lineNumber":84,"author":{"gitId":"-"},"content":"  INCLUDE_TEAM,"},{"lineNumber":85,"author":{"gitId":"-"},"content":"  // show name"},{"lineNumber":86,"author":{"gitId":"-"},"content":"  INCLUDE_NAME,"},{"lineNumber":87,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"weiquu":1,"-":86}},{"path":"src/web/app/components/question-submission-form/question-submission-form.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003cdiv id\u003d\"question-submission-form-qn-{{ model.questionNumber }}\" class\u003d\"card\"\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"card-header bg-primary text-white question-header cursor-pointer border-0\" (click)\u003d\"toggleQuestionTab();\""},{"lineNumber":3,"author":{"gitId":"-"},"content":"    [ngClass]\u003d\"isSaved ? \u0027bg-success\u0027 : \u0027bg-primary\u0027\"\u003e"},{"lineNumber":4,"author":{"gitId":"weiquu"},"content":"    \u003cdiv class\u003d\"collapse-caret\"\u003e"},{"lineNumber":5,"author":{"gitId":"-"},"content":"      \u003ctm-panel-chevron [isExpanded]\u003d\"model.isTabExpanded\"\u003e\u003c/tm-panel-chevron\u003e"},{"lineNumber":6,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":7,"author":{"gitId":"weiquu"},"content":"    \u003ci class\u003d\"fas fa-check me-2\" *ngIf\u003d\"isSaved\" aria-hidden\u003d\"true\"\u003e\u003c/i\u003e"},{"lineNumber":8,"author":{"gitId":"-"},"content":"    \u003ch2 class\u003d\"question-details\"\u003e\u003cb\u003eQuestion {{ model.questionNumber }}: \u003c/b\u003e{{ model.questionBrief }}\u003c/h2\u003e"},{"lineNumber":9,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":10,"author":{"gitId":"-"},"content":""},{"lineNumber":11,"author":{"gitId":"weiquu"},"content":"  \u003cdiv *ngIf\u003d\"model.isTabExpanded\" @collapseAnim\u003e"},{"lineNumber":12,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"card-body\" *tmIsLoading\u003d\"model.isLoading\"\u003e"},{"lineNumber":13,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"card mb-3\" *ngIf\u003d\"model.questionDescription\"\u003e"},{"lineNumber":14,"author":{"gitId":"-"},"content":"        \u003cdiv class\u003d\"card-header\"\u003e"},{"lineNumber":15,"author":{"gitId":"-"},"content":"          \u003cb\u003eMore details\u003c/b\u003e"},{"lineNumber":16,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":17,"author":{"gitId":"-"},"content":"        \u003cdiv class\u003d\"question-description card-body\" [innerHTML]\u003d\"model.questionDescription | safeHtml\"\u003e\u003c/div\u003e"},{"lineNumber":18,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":19,"author":{"gitId":"-"},"content":""},{"lineNumber":20,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"card-body visibility-card\"\u003e"},{"lineNumber":21,"author":{"gitId":"-"},"content":"        \u003cp class\u003d\"text-secondary\"\u003eOnly the following persons can see your responses: \u003c/p\u003e"},{"lineNumber":22,"author":{"gitId":"-"},"content":"        \u003cul class\u003d\"visibility-list text-secondary\"\u003e"},{"lineNumber":23,"author":{"gitId":"-"},"content":"          \u003cli *ngIf\u003d\"model.recipientType \u003d\u003d\u003d FeedbackParticipantType.SELF\"\u003eYou can see your own feedback in the results page later on.\u003c/li\u003e"},{"lineNumber":24,"author":{"gitId":"-"},"content":"          \u003cng-container *ngFor\u003d\"let visibilityType of FeedbackVisibilityType | enumToArray\"\u003e"},{"lineNumber":25,"author":{"gitId":"-"},"content":"            \u003cli *ngIf\u003d\"visibilityStateMachine.isVisibilityTypeApplicable(visibilityType) \u0026\u0026 visibilityStateMachine.hasAnyVisibilityControl(visibilityType)\"\u003e"},{"lineNumber":26,"author":{"gitId":"-"},"content":"              {{ visibilityType | visibilityEntityName:model.recipientType:model.numberOfEntitiesToGiveFeedbackToSetting:model.customNumberOfEntitiesToGiveFeedbackTo }} {{ visibilityStateMachine.getVisibilityControlUnderVisibilityType(visibilityType) | visibilityCapability }}"},{"lineNumber":27,"author":{"gitId":"-"},"content":"            \u003c/li\u003e"},{"lineNumber":28,"author":{"gitId":"-"},"content":"          \u003c/ng-container\u003e"},{"lineNumber":29,"author":{"gitId":"-"},"content":"          \u003cli *ngIf\u003d\"!visibilityStateMachine.hasAnyVisibilityControlForAll()\"\u003eNo-one can see your responses\u003c/li\u003e"},{"lineNumber":30,"author":{"gitId":"-"},"content":"        \u003c/ul\u003e"},{"lineNumber":31,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":32,"author":{"gitId":"-"},"content":""},{"lineNumber":33,"author":{"gitId":"-"},"content":"      \u003ctm-contribution-question-instruction *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.CONTRIB\""},{"lineNumber":34,"author":{"gitId":"-"},"content":"                                            [questionDetails]\u003d\"model.questionDetails\" [numOfRecipients]\u003d\"model.recipientSubmissionForms.length\"\u003e\u003c/tm-contribution-question-instruction\u003e"},{"lineNumber":35,"author":{"gitId":"-"},"content":"      \u003ctm-text-question-instruction *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.TEXT\"\u003e\u003c/tm-text-question-instruction\u003e"},{"lineNumber":36,"author":{"gitId":"-"},"content":"      \u003ctm-num-scale-question-instruction *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.NUMSCALE\"\u003e\u003c/tm-num-scale-question-instruction\u003e"},{"lineNumber":37,"author":{"gitId":"-"},"content":"      \u003ctm-text-question-constraint *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.TEXT\"\u003e\u003c/tm-text-question-constraint\u003e"},{"lineNumber":38,"author":{"gitId":"-"},"content":"      \u003ctm-num-scale-question-constraint *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.NUMSCALE\"\u003e\u003c/tm-num-scale-question-constraint\u003e"},{"lineNumber":39,"author":{"gitId":"-"},"content":"      \u003ctm-rank-options-question-instruction *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.RANK_OPTIONS\" [questionDetails]\u003d\"model.questionDetails\"\u003e\u003c/tm-rank-options-question-instruction\u003e"},{"lineNumber":40,"author":{"gitId":"-"},"content":"      \u003ctm-msq-question-constraint *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.MSQ\" [questionDetails]\u003d\"model.questionDetails\"\u003e\u003c/tm-msq-question-constraint\u003e"},{"lineNumber":41,"author":{"gitId":"-"},"content":"      \u003ctm-rank-recipients-question-instruction *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.RANK_RECIPIENTS\" [questionDetails]\u003d\"model.questionDetails\"\u003e\u003c/tm-rank-recipients-question-instruction\u003e"},{"lineNumber":42,"author":{"gitId":"-"},"content":"      \u003ctm-constsum-options-question-instruction *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.CONSTSUM_OPTIONS\" [questionDetails]\u003d\"model.questionDetails\"\u003e\u003c/tm-constsum-options-question-instruction\u003e"},{"lineNumber":43,"author":{"gitId":"-"},"content":"      \u003ctm-constsum-recipients-question-instruction *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.CONSTSUM_RECIPIENTS\""},{"lineNumber":44,"author":{"gitId":"-"},"content":"                                                  [questionDetails]\u003d\"model.questionDetails\" [numOfRecipients]\u003d\"model.recipientSubmissionForms.length\"\u003e\u003c/tm-constsum-recipients-question-instruction\u003e"},{"lineNumber":45,"author":{"gitId":"-"},"content":""},{"lineNumber":46,"author":{"gitId":"jasonqiu212"},"content":"      \u003cdiv class\u003d\"row margin-top-30px margin-bottom-0px\"\u003e"},{"lineNumber":47,"author":{"gitId":"jasonqiu212"},"content":"        \u003cdiv class\u003d\"col\"\u003e"},{"lineNumber":48,"author":{"gitId":"-"},"content":"          \u003cp *ngIf\u003d\"model.recipientType !\u003d\u003d FeedbackParticipantType.NONE \u0026\u0026 model.recipientType !\u003d\u003d FeedbackParticipantType.SELF\" \u003e"},{"lineNumber":49,"author":{"gitId":"-"},"content":"            \u003cspan class\u003d\"ngb-tooltip-class font-bold\" ngbTooltip\u003d\"The party being evaluated or given feedback to\"\u003eEvaluee/Recipient\u003c/span\u003e"},{"lineNumber":50,"author":{"gitId":"-"},"content":"          \u003c/p\u003e"},{"lineNumber":51,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":52,"author":{"gitId":"-"},"content":"        \u003cdiv class\u003d\"form-check\" *ngIf\u003d\"hasSectionTeam\"\u003e"},{"lineNumber":53,"author":{"gitId":"-"},"content":"            \u003cinput type\u003d\"checkbox\" id\u003d\"show-section-team-{{ model.questionNumber }}\" name\u003d\"show-section-team\" value\u003d\"sectionTeam\" (change)\u003d\"toggleSectionTeam($event)\"\u003e"},{"lineNumber":54,"author":{"gitId":"-"},"content":"            \u003clabel class\u003d\"form-check-label ms-1\" for\u003d\"show-section-team-{{ model.questionNumber }}\"\u003eShow Section/Team\u003c/label\u003e"},{"lineNumber":55,"author":{"gitId":"-"},"content":"          \u003c/div\u003e"},{"lineNumber":56,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":57,"author":{"gitId":"-"},"content":""},{"lineNumber":58,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"alert alert-primary\" role\u003d\"alert\" *ngIf\u003d\"model.giverType \u003d\u003d\u003d FeedbackParticipantType.TEAMS\"\u003e"},{"lineNumber":59,"author":{"gitId":"-"},"content":"        Please note that you are submitting this response on behalf of your team."},{"lineNumber":60,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":61,"author":{"gitId":"-"},"content":""},{"lineNumber":62,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"container\"\u003e"},{"lineNumber":63,"author":{"gitId":"-"},"content":"        \u003cdiv class\u003d\"row\" *ngFor\u003d\"let recipientSubmissionFormModel of model.recipientSubmissionForms; let i \u003d index; trackBy: trackRecipientSubmissionFormByFn\"\u003e"},{"lineNumber":64,"author":{"gitId":"-"},"content":"          \u003cdiv class\u003d\"col-md-5 col-xs-12 margin-top-20px\" *ngIf\u003d\"model.recipientType !\u003d\u003d FeedbackParticipantType.SELF \u0026\u0026 model.recipientType !\u003d\u003d FeedbackParticipantType.NONE\"\u003e"},{"lineNumber":65,"author":{"gitId":"-"},"content":"            \u003cdiv id\u003d\"recipient-name-qn-{{ model.questionNumber }}-idx-{{ i }}\" *ngIf\u003d\"formMode \u003d\u003d\u003d QuestionSubmissionFormMode.FIXED_RECIPIENT\"\u003e"},{"lineNumber":66,"author":{"gitId":"-"},"content":"              \u003cb\u003e{{ getRecipientName(recipientSubmissionFormModel.recipientIdentifier) }} \u003c/b\u003e \u003cspan\u003e({{ model.recipientType | recipientTypeName:model.giverType }})\u003c/span\u003e"},{"lineNumber":67,"author":{"gitId":"-"},"content":"            \u003c/div\u003e"},{"lineNumber":68,"author":{"gitId":"-"},"content":"            \u003cdiv class\u003d\"row evaluee-select align-items-center\" *ngIf\u003d\"formMode \u003d\u003d\u003d QuestionSubmissionFormMode.FLEXIBLE_RECIPIENT\"\u003e"},{"lineNumber":69,"author":{"gitId":"-"},"content":"              \u003cselect id\u003d\"recipient-dropdown-qn-{{ model.questionNumber }}-idx-{{ i }}\" class\u003d\"form-control form-select fw-bold col\" [ngModel]\u003d\"recipientSubmissionFormModel.recipientIdentifier\""},{"lineNumber":70,"author":{"gitId":"-"},"content":"                      (ngModelChange)\u003d\"triggerRecipientSubmissionFormChange(i, \u0027recipientIdentifier\u0027, $event)\""},{"lineNumber":71,"author":{"gitId":"-"},"content":"                      [disabled]\u003d\"isFormsDisabled\"\u003e"},{"lineNumber":72,"author":{"gitId":"-"},"content":"                \u003coption value\u003d\"\"\u003e\u003c/option\u003e"},{"lineNumber":73,"author":{"gitId":"-"},"content":"                \u003cng-container *ngFor\u003d\"let recipient of model.recipientList\"\u003e"},{"lineNumber":74,"author":{"gitId":"-"},"content":"                  \u003coption *ngIf\u003d\"!isRecipientSelected(recipient) || recipientSubmissionFormModel.recipientIdentifier \u003d\u003d\u003d recipient.recipientIdentifier\" [ngValue]\u003d\"recipient.recipientIdentifier\"\u003e{{ getSelectionOptionLabel(recipient) }}\u003c/option\u003e"},{"lineNumber":75,"author":{"gitId":"-"},"content":"                \u003c/ng-container\u003e"},{"lineNumber":76,"author":{"gitId":"-"},"content":"              \u003c/select\u003e"},{"lineNumber":77,"author":{"gitId":"-"},"content":"              \u003cdiv class\u003d\"col-auto text-start\"\u003e"},{"lineNumber":78,"author":{"gitId":"-"},"content":"                ({{ model.recipientType | recipientTypeName: model.giverType }})"},{"lineNumber":79,"author":{"gitId":"-"},"content":"              \u003c/div\u003e"},{"lineNumber":80,"author":{"gitId":"-"},"content":"            \u003c/div\u003e"},{"lineNumber":81,"author":{"gitId":"-"},"content":"          \u003c/div\u003e"},{"lineNumber":82,"author":{"gitId":"-"},"content":"          \u003cdiv class\u003d\"margin-top-20px\" [ngClass]\u003d\"isMCQDropDownEnabled ? \u0027col-12\u0027 : \u0027col\u0027\"\u003e"},{"lineNumber":83,"author":{"gitId":"-"},"content":"            \u003ctm-contribution-question-edit-answer-form *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.CONTRIB\" [questionDetails]\u003d\"model.questionDetails\""},{"lineNumber":84,"author":{"gitId":"-"},"content":"                                                      [responseDetails]\u003d\"recipientSubmissionFormModel.responseDetails\""},{"lineNumber":85,"author":{"gitId":"-"},"content":"                                                      (responseDetailsChange)\u003d\"triggerRecipientSubmissionFormChange(i, \u0027responseDetails\u0027, $event)\""},{"lineNumber":86,"author":{"gitId":"-"},"content":"                                                      [isDisabled]\u003d\"isFormsDisabled\""},{"lineNumber":87,"author":{"gitId":"weiquu"},"content":"                                                      [recipient]\u003d\"getRecipientName(recipientSubmissionFormModel.recipientIdentifier)\""},{"lineNumber":88,"author":{"gitId":"-"},"content":"            \u003e\u003c/tm-contribution-question-edit-answer-form\u003e"},{"lineNumber":89,"author":{"gitId":"-"},"content":"            \u003ctm-text-question-edit-answer-form *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.TEXT\" [questionDetails]\u003d\"model.questionDetails\""},{"lineNumber":90,"author":{"gitId":"-"},"content":"                                              [responseDetails]\u003d\"recipientSubmissionFormModel.responseDetails\""},{"lineNumber":91,"author":{"gitId":"-"},"content":"                                              (responseDetailsChange)\u003d\"triggerRecipientSubmissionFormChange(i, \u0027responseDetails\u0027, $event)\""},{"lineNumber":92,"author":{"gitId":"-"},"content":"                                              [isDisabled]\u003d\"isFormsDisabled\""},{"lineNumber":93,"author":{"gitId":"weiquu"},"content":"                                              [recipient]\u003d\"getRecipientName(recipientSubmissionFormModel.recipientIdentifier)\""},{"lineNumber":94,"author":{"gitId":"-"},"content":"            \u003e\u003c/tm-text-question-edit-answer-form\u003e"},{"lineNumber":95,"author":{"gitId":"-"},"content":"            \u003ctm-rank-options-question-edit-answer-form *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.RANK_OPTIONS\" [questionDetails]\u003d\"model.questionDetails\""},{"lineNumber":96,"author":{"gitId":"-"},"content":"                                                      [responseDetails]\u003d\"recipientSubmissionFormModel.responseDetails\""},{"lineNumber":97,"author":{"gitId":"-"},"content":"                                                      (responseDetailsChange)\u003d\"triggerRecipientSubmissionFormChange(i, \u0027responseDetails\u0027, $event)\""},{"lineNumber":98,"author":{"gitId":"jasonqiu212"},"content":"                                                      [isDisabled]\u003d\"isFormsDisabled\""},{"lineNumber":99,"author":{"gitId":"jasonqiu212"},"content":"                                                      [recipient]\u003d\"getRecipientName(recipientSubmissionFormModel.recipientIdentifier)\""},{"lineNumber":100,"author":{"gitId":"jasonqiu212"},"content":"            \u003e\u003c/tm-rank-options-question-edit-answer-form\u003e"},{"lineNumber":101,"author":{"gitId":"-"},"content":"            \u003ctm-rank-recipients-question-edit-answer-form *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.RANK_RECIPIENTS\" [questionDetails]\u003d\"model.questionDetails\""},{"lineNumber":102,"author":{"gitId":"-"},"content":"                                                          [responseDetails]\u003d\"recipientSubmissionFormModel.responseDetails\""},{"lineNumber":103,"author":{"gitId":"-"},"content":"                                                          (responseDetailsChange)\u003d\"triggerRecipientSubmissionFormChange(i, \u0027responseDetails\u0027, $event)\""},{"lineNumber":104,"author":{"gitId":"weiquu"},"content":"                                                          [isDisabled]\u003d\"isFormsDisabled\" [numOfRecipients]\u003d\"model.recipientSubmissionForms.length\""},{"lineNumber":105,"author":{"gitId":"weiquu"},"content":"                                                          [recipient]\u003d\"getRecipientName(recipientSubmissionFormModel.recipientIdentifier)\""},{"lineNumber":106,"author":{"gitId":"weiquu"},"content":"            \u003e\u003c/tm-rank-recipients-question-edit-answer-form\u003e"},{"lineNumber":107,"author":{"gitId":"-"},"content":"            \u003ctm-num-scale-question-edit-answer-form *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.NUMSCALE\" [questionDetails]\u003d\"model.questionDetails\""},{"lineNumber":108,"author":{"gitId":"-"},"content":"                                                    [responseDetails]\u003d\"recipientSubmissionFormModel.responseDetails\""},{"lineNumber":109,"author":{"gitId":"-"},"content":"                                                    (responseDetailsChange)\u003d\"triggerRecipientSubmissionFormChange(i, \u0027responseDetails\u0027, $event)\""},{"lineNumber":110,"author":{"gitId":"-"},"content":"                                                    [isDisabled]\u003d\"isFormsDisabled\""},{"lineNumber":111,"author":{"gitId":"jasonqiu212"},"content":"                                                    [recipient]\u003d\"getRecipientName(recipientSubmissionFormModel.recipientIdentifier)\""},{"lineNumber":112,"author":{"gitId":"-"},"content":"            \u003e\u003c/tm-num-scale-question-edit-answer-form\u003e"},{"lineNumber":113,"author":{"gitId":"-"},"content":"            \u003ctm-mcq-question-edit-answer-form *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.MCQ\" [questionDetails]\u003d\"model.questionDetails\""},{"lineNumber":114,"author":{"gitId":"-"},"content":"                                                    [responseDetails]\u003d\"recipientSubmissionFormModel.responseDetails\""},{"lineNumber":115,"author":{"gitId":"-"},"content":"                                                    (responseDetailsChange)\u003d\"triggerRecipientSubmissionFormChange(i, \u0027responseDetails\u0027, $event)\""},{"lineNumber":116,"author":{"gitId":"-"},"content":"                                                    [isDisabled]\u003d\"isFormsDisabled\""},{"lineNumber":117,"author":{"gitId":"-"},"content":"                                                    [id]\u003d\"model.feedbackQuestionId + recipientSubmissionFormModel.recipientIdentifier\""},{"lineNumber":118,"author":{"gitId":"-"},"content":"                                                    (cssRefresh)\u003drefreshCssForDropdownMCQ($event)"},{"lineNumber":119,"author":{"gitId":"jasonqiu212"},"content":"                                                    [recipient]\u003d\"getRecipientName(recipientSubmissionFormModel.recipientIdentifier)\""},{"lineNumber":120,"author":{"gitId":"-"},"content":"            \u003e\u003c/tm-mcq-question-edit-answer-form\u003e"},{"lineNumber":121,"author":{"gitId":"-"},"content":"            \u003ctm-msq-question-edit-answer-form *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.MSQ\" [questionDetails]\u003d\"model.questionDetails\""},{"lineNumber":122,"author":{"gitId":"-"},"content":"                                              [responseDetails]\u003d\"recipientSubmissionFormModel.responseDetails\""},{"lineNumber":123,"author":{"gitId":"-"},"content":"                                              (responseDetailsChange)\u003d\"triggerRecipientSubmissionFormChange(i, \u0027responseDetails\u0027, $event)\""},{"lineNumber":124,"author":{"gitId":"-"},"content":"                                              [isDisabled]\u003d\"isFormsDisabled\""},{"lineNumber":125,"author":{"gitId":"weiquu"},"content":"                                              [recipient]\u003d\"getRecipientName(recipientSubmissionFormModel.recipientIdentifier)\""},{"lineNumber":126,"author":{"gitId":"-"},"content":"            \u003e\u003c/tm-msq-question-edit-answer-form\u003e"},{"lineNumber":127,"author":{"gitId":"-"},"content":"            \u003ctm-rubric-question-edit-answer-form *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.RUBRIC\" [questionDetails]\u003d\"model.questionDetails\""},{"lineNumber":128,"author":{"gitId":"-"},"content":"                                                [responseDetails]\u003d\"recipientSubmissionFormModel.responseDetails\""},{"lineNumber":129,"author":{"gitId":"-"},"content":"                                                (responseDetailsChange)\u003d\"triggerRecipientSubmissionFormChange(i, \u0027responseDetails\u0027, $event)\""},{"lineNumber":130,"author":{"gitId":"-"},"content":"                                                [isDisabled]\u003d\"isFormsDisabled\""},{"lineNumber":131,"author":{"gitId":"jasonqiu212"},"content":"                                                [id]\u003d\"model.feedbackQuestionId + recipientSubmissionFormModel.recipientIdentifier\""},{"lineNumber":132,"author":{"gitId":"jasonqiu212"},"content":"                                                [recipient]\u003d\"getRecipientName(recipientSubmissionFormModel.recipientIdentifier)\"\u003e"},{"lineNumber":133,"author":{"gitId":"jasonqiu212"},"content":"            \u003c/tm-rubric-question-edit-answer-form\u003e"},{"lineNumber":134,"author":{"gitId":"-"},"content":"            \u003ctm-constsum-options-question-edit-answer-form *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.CONSTSUM_OPTIONS\" [questionDetails]\u003d\"model.questionDetails\""},{"lineNumber":135,"author":{"gitId":"-"},"content":"                                                          [responseDetails]\u003d\"recipientSubmissionFormModel.responseDetails\""},{"lineNumber":136,"author":{"gitId":"-"},"content":"                                                          (responseDetailsChange)\u003d\"triggerRecipientSubmissionFormChange(i, \u0027responseDetails\u0027, $event)\""},{"lineNumber":137,"author":{"gitId":"weiquu"},"content":"                                                          [isDisabled]\u003d\"isFormsDisabled\""},{"lineNumber":138,"author":{"gitId":"weiquu"},"content":"                                                          [recipient]\u003d\"getRecipientName(recipientSubmissionFormModel.recipientIdentifier)\"\u003e"},{"lineNumber":139,"author":{"gitId":"-"},"content":"            \u003c/tm-constsum-options-question-edit-answer-form\u003e"},{"lineNumber":140,"author":{"gitId":"-"},"content":"            \u003ctm-constsum-recipients-question-edit-answer-form *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.CONSTSUM_RECIPIENTS\" [questionDetails]\u003d\"model.questionDetails\""},{"lineNumber":141,"author":{"gitId":"-"},"content":"                                                          [responseDetails]\u003d\"recipientSubmissionFormModel.responseDetails\""},{"lineNumber":142,"author":{"gitId":"-"},"content":"                                                          (responseDetailsChange)\u003d\"triggerRecipientSubmissionFormChange(i, \u0027responseDetails\u0027, $event)\""},{"lineNumber":143,"author":{"gitId":"jasonqiu212"},"content":"                                                          [isDisabled]\u003d\"isFormsDisabled\""},{"lineNumber":144,"author":{"gitId":"jasonqiu212"},"content":"                                                          [recipient]\u003d\"getRecipientName(recipientSubmissionFormModel.recipientIdentifier)\"\u003e"},{"lineNumber":145,"author":{"gitId":"jasonqiu212"},"content":"            \u003c/tm-constsum-recipients-question-edit-answer-form\u003e"},{"lineNumber":146,"author":{"gitId":"-"},"content":"          \u003c/div\u003e"},{"lineNumber":147,"author":{"gitId":"-"},"content":""},{"lineNumber":148,"author":{"gitId":"-"},"content":"          \u003cdiv id\u003d\"comment-section-qn-{{ model.questionNumber }}-idx-{{ i }}\" class\u003d\"col-12 margin-bottom-20px margin-top-10px indent\"\u003e"},{"lineNumber":149,"author":{"gitId":"-"},"content":"            \u003cdiv *ngIf\u003d\"recipientSubmissionFormModel.commentByGiver\"\u003e"},{"lineNumber":150,"author":{"gitId":"-"},"content":"              \u003cdiv class\u003d\"card-body visibility-card\"\u003e"},{"lineNumber":151,"author":{"gitId":"-"},"content":"                \u003cp class\u003d\"text-secondary\"\u003eOnly the following persons can see your comments: \u003c/p\u003e"},{"lineNumber":152,"author":{"gitId":"-"},"content":"                \u003cul class\u003d\"visibility-list text-secondary\"\u003e"},{"lineNumber":153,"author":{"gitId":"-"},"content":"                  \u003cli *ngIf\u003d\"model.recipientType \u003d\u003d\u003d FeedbackParticipantType.SELF\"\u003eYou can see your own feedback in the results page later on.\u003c/li\u003e"},{"lineNumber":154,"author":{"gitId":"-"},"content":"                  \u003cng-container *ngFor\u003d\"let visibilityType of FeedbackVisibilityType | enumToArray\"\u003e"},{"lineNumber":155,"author":{"gitId":"-"},"content":"                    \u003cli *ngIf\u003d\"visibilityStateMachine.isVisibilityTypeApplicable(visibilityType) \u0026\u0026 visibilityStateMachine.hasAnyVisibilityControl(visibilityType)\"\u003e"},{"lineNumber":156,"author":{"gitId":"-"},"content":"                      {{ visibilityType | visibilityEntityName:model.recipientType:model.numberOfEntitiesToGiveFeedbackToSetting:model.customNumberOfEntitiesToGiveFeedbackTo }} {{ visibilityStateMachine.getVisibilityControlUnderVisibilityType(visibilityType) | visibilityCapability }}"},{"lineNumber":157,"author":{"gitId":"-"},"content":"                    \u003c/li\u003e"},{"lineNumber":158,"author":{"gitId":"-"},"content":"                  \u003c/ng-container\u003e"},{"lineNumber":159,"author":{"gitId":"-"},"content":"                  \u003cli *ngIf\u003d\"!visibilityStateMachine.hasAnyVisibilityControlForAll()\"\u003eNo-one can see your responses\u003c/li\u003e"},{"lineNumber":160,"author":{"gitId":"-"},"content":"                \u003c/ul\u003e"},{"lineNumber":161,"author":{"gitId":"-"},"content":"              \u003c/div\u003e"},{"lineNumber":162,"author":{"gitId":"-"},"content":"            \u003c/div\u003e"},{"lineNumber":163,"author":{"gitId":"-"},"content":"            \u003cdiv *ngIf\u003d\"recipientSubmissionFormModel.commentByGiver \u0026\u0026 recipientSubmissionFormModel.commentByGiver.originalComment else newComment\"\u003e"},{"lineNumber":164,"author":{"gitId":"-"},"content":"              \u003ctm-comment-row [mode]\u003d\"CommentRowMode.EDIT\" [isVisibilityOptionEnabled]\u003d\"false\""},{"lineNumber":165,"author":{"gitId":"-"},"content":"                              [model]\u003d\"recipientSubmissionFormModel.commentByGiver\""},{"lineNumber":166,"author":{"gitId":"-"},"content":"                              (modelChange)\u003d\"triggerRecipientSubmissionFormChange(i, \u0027commentByGiver\u0027, $event)\""},{"lineNumber":167,"author":{"gitId":"-"},"content":"                              [isFeedbackParticipantComment]\u003d\"true\""},{"lineNumber":168,"author":{"gitId":"-"},"content":"                              [questionShowResponsesTo]\u003d\"model.showResponsesTo\""},{"lineNumber":169,"author":{"gitId":"-"},"content":"                              [shouldHideSavingButton]\u003d\"true\""},{"lineNumber":170,"author":{"gitId":"-"},"content":"                              (deleteCommentEvent)\u003d\"triggerDeleteCommentEvent(i)\""},{"lineNumber":171,"author":{"gitId":"-"},"content":"                              (closeEditingEvent)\u003d\"discardEditedParticipantComment(i)\""},{"lineNumber":172,"author":{"gitId":"-"},"content":"                              [isDisabled]\u003d\"isFormsDisabled || isFeedbackResponseDetailsEmpty(recipientSubmissionFormModel.responseDetails)\"\u003e\u003c/tm-comment-row\u003e"},{"lineNumber":173,"author":{"gitId":"-"},"content":"              \u003cdiv class\u003d\"alert alert-warning margin-top-10px\" role\u003d\"alert\" *ngIf\u003d\"isFeedbackResponseDetailsEmpty(recipientSubmissionFormModel.responseDetails)\"\u003e"},{"lineNumber":174,"author":{"gitId":"-"},"content":"                You must provide a valid response in order to give a comment or your comment will not be saved!"},{"lineNumber":175,"author":{"gitId":"-"},"content":"              \u003c/div\u003e"},{"lineNumber":176,"author":{"gitId":"-"},"content":"            \u003c/div\u003e"},{"lineNumber":177,"author":{"gitId":"-"},"content":"            \u003cng-template #newComment\u003e"},{"lineNumber":178,"author":{"gitId":"-"},"content":"              \u003cdiv style\u003d\"display: inline-block;\" [ngbTooltip]\u003d\"isFeedbackResponseDetailsEmpty(recipientSubmissionFormModel.responseDetails) ? \u0027Give a valid response in order to comment\u0027 : \u0027\u0027\"\u003e"},{"lineNumber":179,"author":{"gitId":"-"},"content":"                \u003cbutton *ngIf\u003d\"!recipientSubmissionFormModel.commentByGiver\" class\u003d\"btn-add-comment btn btn-light btn-sm\""},{"lineNumber":180,"author":{"gitId":"-"},"content":"                        (click)\u003d\"addNewParticipantCommentToResponse(i)\""},{"lineNumber":181,"author":{"gitId":"-"},"content":"                        [disabled]\u003d\"isFormsDisabled || isFeedbackResponseDetailsEmpty(recipientSubmissionFormModel.responseDetails)\"\u003e"},{"lineNumber":182,"author":{"gitId":"-"},"content":"                  \u003ci class\u003d\"fas fa-comment\"\u003e\u003c/i\u003e [Optional] Comment on your response"},{"lineNumber":183,"author":{"gitId":"-"},"content":"                \u003c/button\u003e"},{"lineNumber":184,"author":{"gitId":"-"},"content":"              \u003c/div\u003e"},{"lineNumber":185,"author":{"gitId":"-"},"content":"              \u003cdiv *ngIf\u003d\"recipientSubmissionFormModel.commentByGiver\"\u003e"},{"lineNumber":186,"author":{"gitId":"-"},"content":"                \u003ctm-comment-row [mode]\u003d\"CommentRowMode.ADD\" [isVisibilityOptionEnabled]\u003d\"false\""},{"lineNumber":187,"author":{"gitId":"-"},"content":"                                [isFeedbackParticipantComment]\u003d\"true\""},{"lineNumber":188,"author":{"gitId":"-"},"content":"                                [questionShowResponsesTo]\u003d\"model.showResponsesTo\""},{"lineNumber":189,"author":{"gitId":"-"},"content":"                                [shouldHideSavingButton]\u003d\"true\""},{"lineNumber":190,"author":{"gitId":"-"},"content":"                                [model]\u003d\"recipientSubmissionFormModel.commentByGiver\""},{"lineNumber":191,"author":{"gitId":"-"},"content":"                                (modelChange)\u003d\"triggerRecipientSubmissionFormChange(i, \u0027commentByGiver\u0027, $event)\""},{"lineNumber":192,"author":{"gitId":"-"},"content":"                                (closeEditingEvent)\u003d\"cancelAddingNewParticipantComment(i)\""},{"lineNumber":193,"author":{"gitId":"-"},"content":"                                [isDisabled]\u003d\"isFormsDisabled || isFeedbackResponseDetailsEmpty(recipientSubmissionFormModel.responseDetails)\"\u003e\u003c/tm-comment-row\u003e"},{"lineNumber":194,"author":{"gitId":"-"},"content":"                \u003cdiv class\u003d\"alert alert-warning margin-top-10px\" role\u003d\"alert\" *ngIf\u003d\"isFeedbackResponseDetailsEmpty(recipientSubmissionFormModel.responseDetails)\"\u003e"},{"lineNumber":195,"author":{"gitId":"-"},"content":"                  You must provide a valid response in order to give a comment or your comment will not be saved!"},{"lineNumber":196,"author":{"gitId":"-"},"content":"                \u003c/div\u003e"},{"lineNumber":197,"author":{"gitId":"-"},"content":"              \u003c/div\u003e"},{"lineNumber":198,"author":{"gitId":"-"},"content":"            \u003c/ng-template\u003e"},{"lineNumber":199,"author":{"gitId":"-"},"content":"          \u003c/div\u003e"},{"lineNumber":200,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":201,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":202,"author":{"gitId":"-"},"content":""},{"lineNumber":203,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"col-12 constraint-margins\"\u003e"},{"lineNumber":204,"author":{"gitId":"-"},"content":"        \u003ctm-contribution-question-constraint *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.CONTRIB\""},{"lineNumber":205,"author":{"gitId":"-"},"content":"                                            [recipientSubmissionForms]\u003d\"model.recipientSubmissionForms\""},{"lineNumber":206,"author":{"gitId":"-"},"content":"                                            [questionDetails]\u003d\"model.questionDetails\""},{"lineNumber":207,"author":{"gitId":"-"},"content":"                                            (isValidEvent)\u003d\"updateValidity($event)\""},{"lineNumber":208,"author":{"gitId":"-"},"content":"        \u003e\u003c/tm-contribution-question-constraint\u003e"},{"lineNumber":209,"author":{"gitId":"-"},"content":"        \u003ctm-rank-recipients-question-constraint *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.RANK_RECIPIENTS\""},{"lineNumber":210,"author":{"gitId":"-"},"content":"                                                [recipientSubmissionForms]\u003d\"model.recipientSubmissionForms\""},{"lineNumber":211,"author":{"gitId":"-"},"content":"                                                [questionDetails]\u003d\"model.questionDetails\""},{"lineNumber":212,"author":{"gitId":"-"},"content":"                                                (isValidEvent)\u003d\"updateValidity($event)\""},{"lineNumber":213,"author":{"gitId":"-"},"content":"        \u003e\u003c/tm-rank-recipients-question-constraint\u003e"},{"lineNumber":214,"author":{"gitId":"-"},"content":"        \u003ctm-constsum-recipients-question-constraint *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.CONSTSUM_RECIPIENTS\""},{"lineNumber":215,"author":{"gitId":"-"},"content":"                                                    [recipientSubmissionForms]\u003d\"model.recipientSubmissionForms\""},{"lineNumber":216,"author":{"gitId":"-"},"content":"                                                    [questionDetails]\u003d\"model.questionDetails\""},{"lineNumber":217,"author":{"gitId":"-"},"content":"                                                    (isValidEvent)\u003d\"updateValidity($event)\""},{"lineNumber":218,"author":{"gitId":"-"},"content":"        \u003e\u003c/tm-constsum-recipients-question-constraint\u003e"},{"lineNumber":219,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":220,"author":{"gitId":"-"},"content":""},{"lineNumber":221,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"alert alert-warning\" role\u003d\"alert\" *ngIf\u003d\"!model.recipientList.length \u0026\u0026 model.isLoaded\"\u003e"},{"lineNumber":222,"author":{"gitId":"-"},"content":"        \u003cspan *ngIf\u003d\"model.recipientType \u003d\u003d\u003d FeedbackParticipantType.OWN_TEAM_MEMBERS\"\u003eThis question is for team members and you don\u0027t have any team members. Therefore, you will not be able to answer this question.\u003c/span\u003e"},{"lineNumber":223,"author":{"gitId":"-"},"content":"        \u003cspan *ngIf\u003d\"model.recipientType \u003d\u003d\u003d FeedbackParticipantType.TEAMS_EXCLUDING_SELF\"\u003eThis question is for other teams in this course and this course doesn\u0027t have any other team. Therefore, you will not be able to answer this question.\u003c/span\u003e"},{"lineNumber":224,"author":{"gitId":"-"},"content":"        \u003cspan *ngIf\u003d\"model.recipientType \u003d\u003d\u003d FeedbackParticipantType.STUDENTS_EXCLUDING_SELF\"\u003eThis question is for other students in this course and this course doesn\u0027t have any other student. Therefore, you will not be able to answer this question.\u003c/span\u003e"},{"lineNumber":225,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":226,"author":{"gitId":"-"},"content":""},{"lineNumber":227,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"row\" *ngIf\u003d\"model.recipientList.length \u003e 0\"\u003e"},{"lineNumber":228,"author":{"gitId":"-"},"content":"        \u003cdiv class\u003d\"col-12 text-center\"\u003e"},{"lineNumber":229,"author":{"gitId":"-"},"content":"          \u003cbutton id\u003d\"btn-submit-qn-{{ model.questionNumber }}\" type\u003d\"submit\" class\u003d\"btn btn-success\""},{"lineNumber":230,"author":{"gitId":"-"},"content":"                  ngbTooltip\u003d\"You can save your responses for this question at any time and come back later to continue.\""},{"lineNumber":231,"author":{"gitId":"-"},"content":"                  #tooltip\u003d\"ngbTooltip\" (mouseenter)\u003d\"tooltip.open()\""},{"lineNumber":232,"author":{"gitId":"-"},"content":"                  (click)\u003d\"saveFeedbackResponses(); tooltip.close();\"[disabled]\u003d\"isSavingResponses || isSubmissionDisabled\"\u003e"},{"lineNumber":233,"author":{"gitId":"-"},"content":"            \u003ctm-ajax-loading *ngIf\u003d\"isSavingResponses\"\u003e\u003c/tm-ajax-loading\u003e"},{"lineNumber":234,"author":{"gitId":"-"},"content":"            \u003cspan\u003e{{ isQuestionCountOne ? \"Submit Response\" : \"Submit Response for Question \" + model.questionNumber }}\u003c/span\u003e"},{"lineNumber":235,"author":{"gitId":"-"},"content":"          \u003c/button\u003e"},{"lineNumber":236,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":237,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":238,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":239,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":240,"author":{"gitId":"-"},"content":"\u003c/div\u003e"}],"authorContributionMap":{"jasonqiu212":13,"weiquu":11,"-":216}},{"path":"src/web/app/components/question-submission-form/question-submission-form.component.scss","fileType":"scss","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":".margin-top-30px {"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  margin-top: 30px;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"}"},{"lineNumber":4,"author":{"gitId":"-"},"content":""},{"lineNumber":5,"author":{"gitId":"-"},"content":".margin-top-10px {"},{"lineNumber":6,"author":{"gitId":"-"},"content":"  margin-top: 10px;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"}"},{"lineNumber":8,"author":{"gitId":"-"},"content":""},{"lineNumber":9,"author":{"gitId":"-"},"content":".margin-top-15px {"},{"lineNumber":10,"author":{"gitId":"-"},"content":"  margin-top: 15px;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"}"},{"lineNumber":12,"author":{"gitId":"-"},"content":""},{"lineNumber":13,"author":{"gitId":"-"},"content":".margin-top-20px {"},{"lineNumber":14,"author":{"gitId":"-"},"content":"  margin-top: 20px;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"}"},{"lineNumber":16,"author":{"gitId":"-"},"content":""},{"lineNumber":17,"author":{"gitId":"-"},"content":".margin-bottom-20px {"},{"lineNumber":18,"author":{"gitId":"-"},"content":"  margin-bottom: 20px;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"}"},{"lineNumber":20,"author":{"gitId":"-"},"content":""},{"lineNumber":21,"author":{"gitId":"-"},"content":".margin-bottom-0px {"},{"lineNumber":22,"author":{"gitId":"-"},"content":"  margin-bottom: 0;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"}"},{"lineNumber":24,"author":{"gitId":"-"},"content":""},{"lineNumber":25,"author":{"gitId":"-"},"content":".constraint-margins {"},{"lineNumber":26,"author":{"gitId":"-"},"content":"  margin-top: 10px;"},{"lineNumber":27,"author":{"gitId":"-"},"content":"  margin-left: 20px;"},{"lineNumber":28,"author":{"gitId":"-"},"content":"}"},{"lineNumber":29,"author":{"gitId":"-"},"content":""},{"lineNumber":30,"author":{"gitId":"-"},"content":".evaluee-select {"},{"lineNumber":31,"author":{"gitId":"-"},"content":"  padding-left: 15px;"},{"lineNumber":32,"author":{"gitId":"-"},"content":"  padding-right: 15px;"},{"lineNumber":33,"author":{"gitId":"-"},"content":"}"},{"lineNumber":34,"author":{"gitId":"-"},"content":""},{"lineNumber":35,"author":{"gitId":"-"},"content":".visibility-card {"},{"lineNumber":36,"author":{"gitId":"-"},"content":"  background-color: rgba(0, 0, 0, .03);"},{"lineNumber":37,"author":{"gitId":"-"},"content":"}"},{"lineNumber":38,"author":{"gitId":"-"},"content":""},{"lineNumber":39,"author":{"gitId":"-"},"content":".indent {"},{"lineNumber":40,"author":{"gitId":"-"},"content":"  margin-left: 1%;"},{"lineNumber":41,"author":{"gitId":"-"},"content":"}"},{"lineNumber":42,"author":{"gitId":"-"},"content":""},{"lineNumber":43,"author":{"gitId":"-"},"content":".font-bold {"},{"lineNumber":44,"author":{"gitId":"-"},"content":"  font-weight: bold;"},{"lineNumber":45,"author":{"gitId":"-"},"content":"}"},{"lineNumber":46,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":47,"author":{"gitId":"-"},"content":".question-details {"},{"lineNumber":48,"author":{"gitId":"weiquu"},"content":"  font-size: .875rem;"},{"lineNumber":49,"author":{"gitId":"weiquu"},"content":"  margin-bottom: 0;"},{"lineNumber":50,"author":{"gitId":"weiquu"},"content":"  line-height: inherit;"},{"lineNumber":51,"author":{"gitId":"weiquu"},"content":"  font-weight: inherit;"},{"lineNumber":52,"author":{"gitId":"weiquu"},"content":"}"},{"lineNumber":53,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":54,"author":{"gitId":"weiquu"},"content":".collapse-caret {"},{"lineNumber":55,"author":{"gitId":"weiquu"},"content":"  margin-right: 10px;"},{"lineNumber":56,"author":{"gitId":"weiquu"},"content":"}"}],"authorContributionMap":{"weiquu":10,"-":46}},{"path":"src/web/app/components/question-submission-form/question-submission-form.component.spec.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { HttpClientTestingModule } from \u0027@angular/common/http/testing\u0027;"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import { ComponentFixture, TestBed, waitForAsync } from \u0027@angular/core/testing\u0027;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"import { FormsModule } from \u0027@angular/forms\u0027;"},{"lineNumber":4,"author":{"gitId":"weiquu"},"content":"import { BrowserAnimationsModule } from \u0027@angular/platform-browser/animations\u0027;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import { NgbModule } from \u0027@ng-bootstrap/ng-bootstrap\u0027;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":7,"author":{"gitId":"-"},"content":"  FeedbackNumericalScaleQuestionDetails,"},{"lineNumber":8,"author":{"gitId":"-"},"content":"  FeedbackNumericalScaleResponseDetails,"},{"lineNumber":9,"author":{"gitId":"-"},"content":"  FeedbackParticipantType,"},{"lineNumber":10,"author":{"gitId":"-"},"content":"  FeedbackQuestionType,"},{"lineNumber":11,"author":{"gitId":"-"},"content":"  FeedbackVisibilityType,"},{"lineNumber":12,"author":{"gitId":"-"},"content":"  NumberOfEntitiesToGiveFeedbackToSetting,"},{"lineNumber":13,"author":{"gitId":"-"},"content":"} from \u0027../../../types/api-output\u0027;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import { AjaxLoadingModule } from \u0027../ajax-loading/ajax-loading.module\u0027;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import { CommentBoxModule } from \u0027../comment-box/comment-box.module\u0027;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"import { LoadingSpinnerModule } from \u0027../loading-spinner/loading-spinner.module\u0027;"},{"lineNumber":17,"author":{"gitId":"weiquu"},"content":"import { PanelChevronModule } from \u0027../panel-chevron/panel-chevron.module\u0027;"},{"lineNumber":18,"author":{"gitId":"-"},"content":"import { QuestionConstraintModule } from \u0027../question-types/question-constraint/question-constraint.module\u0027;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":20,"author":{"gitId":"-"},"content":"  QuestionEditAnswerFormModule,"},{"lineNumber":21,"author":{"gitId":"-"},"content":"} from \u0027../question-types/question-edit-answer-form/question-edit-answer-form.module\u0027;"},{"lineNumber":22,"author":{"gitId":"-"},"content":"import { QuestionInstructionModule } from \u0027../question-types/question-instruction/question-instruction.module\u0027;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"import { RichTextEditorModule } from \u0027../rich-text-editor/rich-text-editor.module\u0027;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"import { TeammatesCommonModule } from \u0027../teammates-common/teammates-common.module\u0027;"},{"lineNumber":25,"author":{"gitId":"-"},"content":"import { VisibilityMessagesModule } from \u0027../visibility-messages/visibility-messages.module\u0027;"},{"lineNumber":26,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":27,"author":{"gitId":"-"},"content":"  FeedbackResponseRecipientSubmissionFormModel,"},{"lineNumber":28,"author":{"gitId":"-"},"content":"  QuestionSubmissionFormModel,"},{"lineNumber":29,"author":{"gitId":"-"},"content":"} from \u0027./question-submission-form-model\u0027;"},{"lineNumber":30,"author":{"gitId":"-"},"content":"import { QuestionSubmissionFormComponent } from \u0027./question-submission-form.component\u0027;"},{"lineNumber":31,"author":{"gitId":"-"},"content":"import { RecipientTypeNamePipe } from \u0027./recipient-type-name.pipe\u0027;"},{"lineNumber":32,"author":{"gitId":"-"},"content":""},{"lineNumber":33,"author":{"gitId":"-"},"content":"const formResponse1: FeedbackResponseRecipientSubmissionFormModel \u003d {"},{"lineNumber":34,"author":{"gitId":"-"},"content":"  responseId: \u0027response-id-1\u0027,"},{"lineNumber":35,"author":{"gitId":"-"},"content":"  recipientIdentifier: \u0027hans-charlie-id\u0027,"},{"lineNumber":36,"author":{"gitId":"-"},"content":"  responseDetails: {"},{"lineNumber":37,"author":{"gitId":"-"},"content":"    answer: 5,"},{"lineNumber":38,"author":{"gitId":"-"},"content":"  } as FeedbackNumericalScaleResponseDetails,"},{"lineNumber":39,"author":{"gitId":"-"},"content":"  isValid: true,"},{"lineNumber":40,"author":{"gitId":"-"},"content":"};"},{"lineNumber":41,"author":{"gitId":"-"},"content":""},{"lineNumber":42,"author":{"gitId":"-"},"content":"const formResponse2: FeedbackResponseRecipientSubmissionFormModel \u003d {"},{"lineNumber":43,"author":{"gitId":"-"},"content":"  responseId: \u0027response-id-2\u0027,"},{"lineNumber":44,"author":{"gitId":"-"},"content":"  recipientIdentifier: \u0027harris-barry-id\u0027,"},{"lineNumber":45,"author":{"gitId":"-"},"content":"  responseDetails: {"},{"lineNumber":46,"author":{"gitId":"-"},"content":"    answer: 4,"},{"lineNumber":47,"author":{"gitId":"-"},"content":"  } as FeedbackNumericalScaleResponseDetails,"},{"lineNumber":48,"author":{"gitId":"-"},"content":"  isValid: true,"},{"lineNumber":49,"author":{"gitId":"-"},"content":"};"},{"lineNumber":50,"author":{"gitId":"-"},"content":""},{"lineNumber":51,"author":{"gitId":"-"},"content":"const formResponse3: FeedbackResponseRecipientSubmissionFormModel \u003d {"},{"lineNumber":52,"author":{"gitId":"-"},"content":"  responseId: \u0027response-id-3\u0027,"},{"lineNumber":53,"author":{"gitId":"-"},"content":"  recipientIdentifier: \u0027rogers-alan-id\u0027,"},{"lineNumber":54,"author":{"gitId":"-"},"content":"  responseDetails: {"},{"lineNumber":55,"author":{"gitId":"-"},"content":"    answer: 3,"},{"lineNumber":56,"author":{"gitId":"-"},"content":"  } as FeedbackNumericalScaleResponseDetails,"},{"lineNumber":57,"author":{"gitId":"-"},"content":"  isValid: true,"},{"lineNumber":58,"author":{"gitId":"-"},"content":"};"},{"lineNumber":59,"author":{"gitId":"-"},"content":""},{"lineNumber":60,"author":{"gitId":"-"},"content":"const formResponse4: FeedbackResponseRecipientSubmissionFormModel \u003d {"},{"lineNumber":61,"author":{"gitId":"-"},"content":"  responseId: \u0027response-id-4\u0027,"},{"lineNumber":62,"author":{"gitId":"-"},"content":"  recipientIdentifier: \u0027buck-arthur-id\u0027,"},{"lineNumber":63,"author":{"gitId":"-"},"content":"  responseDetails: {"},{"lineNumber":64,"author":{"gitId":"-"},"content":"    answer: 2,"},{"lineNumber":65,"author":{"gitId":"-"},"content":"  } as FeedbackNumericalScaleResponseDetails,"},{"lineNumber":66,"author":{"gitId":"-"},"content":"  isValid: true,"},{"lineNumber":67,"author":{"gitId":"-"},"content":"};"},{"lineNumber":68,"author":{"gitId":"-"},"content":""},{"lineNumber":69,"author":{"gitId":"-"},"content":"const testNumscaleQuestionSubmissionForm: QuestionSubmissionFormModel \u003d {"},{"lineNumber":70,"author":{"gitId":"-"},"content":"  feedbackQuestionId: \u0027feedback-question-id-numscale\u0027,"},{"lineNumber":71,"author":{"gitId":"-"},"content":"  questionNumber: 1,"},{"lineNumber":72,"author":{"gitId":"-"},"content":"  questionBrief: \u0027numerical scale question\u0027,"},{"lineNumber":73,"author":{"gitId":"-"},"content":"  questionDescription: \u0027question description\u0027,"},{"lineNumber":74,"author":{"gitId":"-"},"content":"  questionType: FeedbackQuestionType.NUMSCALE,"},{"lineNumber":75,"author":{"gitId":"-"},"content":"  questionDetails: {"},{"lineNumber":76,"author":{"gitId":"-"},"content":"    minScale: 1,"},{"lineNumber":77,"author":{"gitId":"-"},"content":"    maxScale: 10,"},{"lineNumber":78,"author":{"gitId":"-"},"content":"    step: 1,"},{"lineNumber":79,"author":{"gitId":"-"},"content":"  } as FeedbackNumericalScaleQuestionDetails,"},{"lineNumber":80,"author":{"gitId":"-"},"content":"  giverType: FeedbackParticipantType.STUDENTS,"},{"lineNumber":81,"author":{"gitId":"-"},"content":"  recipientType: FeedbackParticipantType.STUDENTS,"},{"lineNumber":82,"author":{"gitId":"-"},"content":""},{"lineNumber":83,"author":{"gitId":"-"},"content":"  recipientList: [{ recipientName: \u0027Alan Rogers\u0027, recipientIdentifier: \u0027rogers-alan-id\u0027 },"},{"lineNumber":84,"author":{"gitId":"-"},"content":"    { recipientName: \u0027Arthur Buck\u0027, recipientIdentifier: \u0027buck-arthur-id\u0027 },"},{"lineNumber":85,"author":{"gitId":"-"},"content":"    { recipientName: \u0027Barry Harris\u0027, recipientIdentifier: \u0027harris-barry-id\u0027 },"},{"lineNumber":86,"author":{"gitId":"-"},"content":"    { recipientName: \u0027Charlie Hans\u0027, recipientIdentifier: \u0027hans-charlie-id\u0027 }],"},{"lineNumber":87,"author":{"gitId":"-"},"content":""},{"lineNumber":88,"author":{"gitId":"-"},"content":"  recipientSubmissionForms: [formResponse1, formResponse2, formResponse3, formResponse4],"},{"lineNumber":89,"author":{"gitId":"-"},"content":"  numberOfEntitiesToGiveFeedbackToSetting: NumberOfEntitiesToGiveFeedbackToSetting.CUSTOM,"},{"lineNumber":90,"author":{"gitId":"-"},"content":"  customNumberOfEntitiesToGiveFeedbackTo: 4,"},{"lineNumber":91,"author":{"gitId":"-"},"content":"  showResponsesTo: [FeedbackVisibilityType.RECIPIENT, FeedbackVisibilityType.INSTRUCTORS],"},{"lineNumber":92,"author":{"gitId":"-"},"content":"  showGiverNameTo: [FeedbackVisibilityType.RECIPIENT, FeedbackVisibilityType.INSTRUCTORS],"},{"lineNumber":93,"author":{"gitId":"-"},"content":"  showRecipientNameTo: [FeedbackVisibilityType.RECIPIENT, FeedbackVisibilityType.INSTRUCTORS],"},{"lineNumber":94,"author":{"gitId":"-"},"content":"  isLoading: false,"},{"lineNumber":95,"author":{"gitId":"-"},"content":"  isLoaded: true,"},{"lineNumber":96,"author":{"gitId":"weiquu"},"content":"  isTabExpanded: true,"},{"lineNumber":97,"author":{"gitId":"-"},"content":"};"},{"lineNumber":98,"author":{"gitId":"-"},"content":""},{"lineNumber":99,"author":{"gitId":"-"},"content":"describe(\u0027QuestionSubmissionFormComponent\u0027, () \u003d\u003e {"},{"lineNumber":100,"author":{"gitId":"-"},"content":"  let component: QuestionSubmissionFormComponent;"},{"lineNumber":101,"author":{"gitId":"-"},"content":"  let fixture: ComponentFixture\u003cQuestionSubmissionFormComponent\u003e;"},{"lineNumber":102,"author":{"gitId":"-"},"content":""},{"lineNumber":103,"author":{"gitId":"-"},"content":"  beforeEach(waitForAsync(() \u003d\u003e {"},{"lineNumber":104,"author":{"gitId":"-"},"content":"    TestBed.configureTestingModule({"},{"lineNumber":105,"author":{"gitId":"-"},"content":"      declarations: ["},{"lineNumber":106,"author":{"gitId":"-"},"content":"        QuestionSubmissionFormComponent,"},{"lineNumber":107,"author":{"gitId":"-"},"content":"        RecipientTypeNamePipe,"},{"lineNumber":108,"author":{"gitId":"-"},"content":"      ],"},{"lineNumber":109,"author":{"gitId":"-"},"content":"      imports: ["},{"lineNumber":110,"author":{"gitId":"-"},"content":"        HttpClientTestingModule,"},{"lineNumber":111,"author":{"gitId":"-"},"content":"        TeammatesCommonModule,"},{"lineNumber":112,"author":{"gitId":"-"},"content":"        VisibilityMessagesModule,"},{"lineNumber":113,"author":{"gitId":"-"},"content":"        QuestionInstructionModule,"},{"lineNumber":114,"author":{"gitId":"-"},"content":"        QuestionConstraintModule,"},{"lineNumber":115,"author":{"gitId":"-"},"content":"        QuestionEditAnswerFormModule,"},{"lineNumber":116,"author":{"gitId":"-"},"content":"        RichTextEditorModule,"},{"lineNumber":117,"author":{"gitId":"-"},"content":"        FormsModule,"},{"lineNumber":118,"author":{"gitId":"-"},"content":"        CommentBoxModule,"},{"lineNumber":119,"author":{"gitId":"-"},"content":"        NgbModule,"},{"lineNumber":120,"author":{"gitId":"-"},"content":"        LoadingSpinnerModule,"},{"lineNumber":121,"author":{"gitId":"-"},"content":"        AjaxLoadingModule,"},{"lineNumber":122,"author":{"gitId":"weiquu"},"content":"        BrowserAnimationsModule,"},{"lineNumber":123,"author":{"gitId":"weiquu"},"content":"        PanelChevronModule,"},{"lineNumber":124,"author":{"gitId":"-"},"content":"      ],"},{"lineNumber":125,"author":{"gitId":"-"},"content":"    })"},{"lineNumber":126,"author":{"gitId":"-"},"content":"    .compileComponents();"},{"lineNumber":127,"author":{"gitId":"-"},"content":"  }));"},{"lineNumber":128,"author":{"gitId":"-"},"content":""},{"lineNumber":129,"author":{"gitId":"-"},"content":"  beforeEach(() \u003d\u003e {"},{"lineNumber":130,"author":{"gitId":"-"},"content":"    fixture \u003d TestBed.createComponent(QuestionSubmissionFormComponent);"},{"lineNumber":131,"author":{"gitId":"-"},"content":"    component \u003d fixture.componentInstance;"},{"lineNumber":132,"author":{"gitId":"-"},"content":"    fixture.detectChanges();"},{"lineNumber":133,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":134,"author":{"gitId":"-"},"content":""},{"lineNumber":135,"author":{"gitId":"-"},"content":"  it(\u0027should create\u0027, () \u003d\u003e {"},{"lineNumber":136,"author":{"gitId":"-"},"content":"    expect(component).toBeTruthy();"},{"lineNumber":137,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":138,"author":{"gitId":"-"},"content":""},{"lineNumber":139,"author":{"gitId":"-"},"content":"  it(\u0027should set model\u0027, () \u003d\u003e {"},{"lineNumber":140,"author":{"gitId":"-"},"content":"    const model: QuestionSubmissionFormModel \u003d testNumscaleQuestionSubmissionForm;"},{"lineNumber":141,"author":{"gitId":"-"},"content":"    component.formModel \u003d model;"},{"lineNumber":142,"author":{"gitId":"-"},"content":""},{"lineNumber":143,"author":{"gitId":"-"},"content":"    expect(component.model).toBe(model);"},{"lineNumber":144,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":145,"author":{"gitId":"-"},"content":""},{"lineNumber":146,"author":{"gitId":"-"},"content":"  it(\u0027should arrange recipients according to alphabetical order of name after ngDoCheck (Sorted recipient list)\u0027,"},{"lineNumber":147,"author":{"gitId":"-"},"content":"   () \u003d\u003e {"},{"lineNumber":148,"author":{"gitId":"-"},"content":"    const model: QuestionSubmissionFormModel \u003d JSON.parse(JSON.stringify(testNumscaleQuestionSubmissionForm));"},{"lineNumber":149,"author":{"gitId":"-"},"content":""},{"lineNumber":150,"author":{"gitId":"-"},"content":"    component.formModel \u003d model;"},{"lineNumber":151,"author":{"gitId":"-"},"content":"    component.ngDoCheck();"},{"lineNumber":152,"author":{"gitId":"-"},"content":""},{"lineNumber":153,"author":{"gitId":"-"},"content":"    expect(model.recipientSubmissionForms).toEqual([formResponse3, formResponse4, formResponse2, formResponse1]);"},{"lineNumber":154,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":155,"author":{"gitId":"-"},"content":""},{"lineNumber":156,"author":{"gitId":"-"},"content":"  it(\u0027should arrange recipients according to alphabetical order of name after ngDoCheck (Unsorted recipient list)\u0027,"},{"lineNumber":157,"author":{"gitId":"-"},"content":"    () \u003d\u003e {"},{"lineNumber":158,"author":{"gitId":"-"},"content":"      const model: QuestionSubmissionFormModel \u003d JSON.parse(JSON.stringify(testNumscaleQuestionSubmissionForm));"},{"lineNumber":159,"author":{"gitId":"-"},"content":""},{"lineNumber":160,"author":{"gitId":"-"},"content":"      // Change recipient list to unsorted"},{"lineNumber":161,"author":{"gitId":"-"},"content":"      model.recipientList \u003d [{ recipientName: \u0027Charlie Hans\u0027, recipientIdentifier: \u0027hans-charlie-id\u0027 },"},{"lineNumber":162,"author":{"gitId":"-"},"content":"      { recipientName: \u0027Alan Rogers\u0027, recipientIdentifier: \u0027rogers-alan-id\u0027 },"},{"lineNumber":163,"author":{"gitId":"-"},"content":"      { recipientName: \u0027Barry Harris\u0027, recipientIdentifier: \u0027harris-barry-id\u0027 },"},{"lineNumber":164,"author":{"gitId":"-"},"content":"      { recipientName: \u0027Arthur Buck\u0027, recipientIdentifier: \u0027buck-arthur-id\u0027 },"},{"lineNumber":165,"author":{"gitId":"-"},"content":"      ];"},{"lineNumber":166,"author":{"gitId":"-"},"content":""},{"lineNumber":167,"author":{"gitId":"-"},"content":"      component.formModel \u003d model;"},{"lineNumber":168,"author":{"gitId":"-"},"content":"      component.ngDoCheck();"},{"lineNumber":169,"author":{"gitId":"-"},"content":""},{"lineNumber":170,"author":{"gitId":"-"},"content":"      expect(model.recipientSubmissionForms).toEqual([formResponse3, formResponse4, formResponse2, formResponse1]);"},{"lineNumber":171,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":172,"author":{"gitId":"-"},"content":"});"}],"authorContributionMap":{"weiquu":5,"-":167}},{"path":"src/web/app/components/question-submission-form/question-submission-form.component.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { Component, DoCheck, EventEmitter, Input, Output, ViewChild } from \u0027@angular/core\u0027;"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import { FeedbackQuestionsService } from \u0027../../../services/feedback-questions.service\u0027;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"import { FeedbackResponsesService } from \u0027../../../services/feedback-responses.service\u0027;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import { VisibilityStateMachine } from \u0027../../../services/visibility-state-machine\u0027;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":6,"author":{"gitId":"-"},"content":"  FeedbackParticipantType,"},{"lineNumber":7,"author":{"gitId":"-"},"content":"  FeedbackQuestionType, FeedbackResponseDetails, FeedbackTextQuestionDetails,"},{"lineNumber":8,"author":{"gitId":"-"},"content":"  FeedbackVisibilityType,"},{"lineNumber":9,"author":{"gitId":"-"},"content":"  NumberOfEntitiesToGiveFeedbackToSetting,"},{"lineNumber":10,"author":{"gitId":"-"},"content":"} from \u0027../../../types/api-output\u0027;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import { VisibilityControl } from \u0027../../../types/visibility-control\u0027;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import { CommentRowModel } from \u0027../comment-box/comment-row/comment-row.component\u0027;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import { CommentRowMode } from \u0027../comment-box/comment-row/comment-row.mode\u0027;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import { ConstsumRecipientsQuestionConstraintComponent }"},{"lineNumber":15,"author":{"gitId":"-"},"content":"  from \u0027../question-types/question-constraint/constsum-recipients-question-constraint.component\u0027;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"import { ContributionQuestionConstraintComponent }"},{"lineNumber":17,"author":{"gitId":"-"},"content":"  from \u0027../question-types/question-constraint/contribution-question-constraint.component\u0027;"},{"lineNumber":18,"author":{"gitId":"-"},"content":"import { RankRecipientsQuestionConstraintComponent }"},{"lineNumber":19,"author":{"gitId":"-"},"content":"  from \u0027../question-types/question-constraint/rank-recipients-question-constraint.component\u0027;"},{"lineNumber":20,"author":{"gitId":"weiquu"},"content":"import { collapseAnim } from \u0027../teammates-common/collapse-anim\u0027;"},{"lineNumber":21,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":22,"author":{"gitId":"-"},"content":"  FeedbackRecipientLabelType,"},{"lineNumber":23,"author":{"gitId":"-"},"content":"  FeedbackResponseRecipient,"},{"lineNumber":24,"author":{"gitId":"-"},"content":"  FeedbackResponseRecipientSubmissionFormModel,"},{"lineNumber":25,"author":{"gitId":"-"},"content":"  QuestionSubmissionFormMode,"},{"lineNumber":26,"author":{"gitId":"-"},"content":"  QuestionSubmissionFormModel,"},{"lineNumber":27,"author":{"gitId":"-"},"content":"} from \u0027./question-submission-form-model\u0027;"},{"lineNumber":28,"author":{"gitId":"-"},"content":""},{"lineNumber":29,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":30,"author":{"gitId":"-"},"content":" * The question submission form for a question."},{"lineNumber":31,"author":{"gitId":"-"},"content":" */"},{"lineNumber":32,"author":{"gitId":"-"},"content":"@Component({"},{"lineNumber":33,"author":{"gitId":"-"},"content":"  selector: \u0027tm-question-submission-form\u0027,"},{"lineNumber":34,"author":{"gitId":"-"},"content":"  templateUrl: \u0027./question-submission-form.component.html\u0027,"},{"lineNumber":35,"author":{"gitId":"-"},"content":"  styleUrls: [\u0027./question-submission-form.component.scss\u0027],"},{"lineNumber":36,"author":{"gitId":"weiquu"},"content":"  animations: [collapseAnim],"},{"lineNumber":37,"author":{"gitId":"-"},"content":"})"},{"lineNumber":38,"author":{"gitId":"-"},"content":"export class QuestionSubmissionFormComponent implements DoCheck {"},{"lineNumber":39,"author":{"gitId":"-"},"content":""},{"lineNumber":40,"author":{"gitId":"-"},"content":"  // enum"},{"lineNumber":41,"author":{"gitId":"-"},"content":"  QuestionSubmissionFormMode: typeof QuestionSubmissionFormMode \u003d QuestionSubmissionFormMode;"},{"lineNumber":42,"author":{"gitId":"-"},"content":"  FeedbackQuestionType: typeof FeedbackQuestionType \u003d FeedbackQuestionType;"},{"lineNumber":43,"author":{"gitId":"-"},"content":"  FeedbackParticipantType: typeof FeedbackParticipantType \u003d FeedbackParticipantType;"},{"lineNumber":44,"author":{"gitId":"-"},"content":"  FeedbackVisibilityType: typeof FeedbackVisibilityType \u003d FeedbackVisibilityType;"},{"lineNumber":45,"author":{"gitId":"-"},"content":"  CommentRowMode: typeof CommentRowMode \u003d CommentRowMode;"},{"lineNumber":46,"author":{"gitId":"-"},"content":""},{"lineNumber":47,"author":{"gitId":"-"},"content":"  isMCQDropDownEnabled: boolean \u003d false;"},{"lineNumber":48,"author":{"gitId":"domlimm"},"content":"  isSaved: boolean \u003d false;"},{"lineNumber":49,"author":{"gitId":"domlimm"},"content":"  hasResponseChanged: boolean \u003d false;"},{"lineNumber":50,"author":{"gitId":"-"},"content":""},{"lineNumber":51,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":52,"author":{"gitId":"-"},"content":"  formMode: QuestionSubmissionFormMode \u003d QuestionSubmissionFormMode.FIXED_RECIPIENT;"},{"lineNumber":53,"author":{"gitId":"-"},"content":""},{"lineNumber":54,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":55,"author":{"gitId":"-"},"content":"  isFormsDisabled: boolean \u003d false;"},{"lineNumber":56,"author":{"gitId":"-"},"content":""},{"lineNumber":57,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":58,"author":{"gitId":"-"},"content":"  isSubmissionDisabled: boolean \u003d false;"},{"lineNumber":59,"author":{"gitId":"-"},"content":""},{"lineNumber":60,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":61,"author":{"gitId":"-"},"content":"  isSavingResponses: boolean \u003d false;"},{"lineNumber":62,"author":{"gitId":"-"},"content":""},{"lineNumber":63,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":64,"author":{"gitId":"-"},"content":"  set formModel(model: QuestionSubmissionFormModel) {"},{"lineNumber":65,"author":{"gitId":"-"},"content":"    this.model \u003d model;"},{"lineNumber":66,"author":{"gitId":"-"},"content":"    this.visibilityStateMachine \u003d"},{"lineNumber":67,"author":{"gitId":"-"},"content":"      this.feedbackQuestionsService.getNewVisibilityStateMachine(model.giverType, model.recipientType);"},{"lineNumber":68,"author":{"gitId":"-"},"content":"    const visibilitySetting: { [TKey in VisibilityControl]: FeedbackVisibilityType[] } \u003d {"},{"lineNumber":69,"author":{"gitId":"-"},"content":"      SHOW_RESPONSE: model.showResponsesTo,"},{"lineNumber":70,"author":{"gitId":"-"},"content":"      SHOW_GIVER_NAME: model.showGiverNameTo,"},{"lineNumber":71,"author":{"gitId":"-"},"content":"      SHOW_RECIPIENT_NAME: model.showRecipientNameTo,"},{"lineNumber":72,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":73,"author":{"gitId":"-"},"content":"    this.visibilityStateMachine.applyVisibilitySettings(visibilitySetting);"},{"lineNumber":74,"author":{"gitId":"-"},"content":"    this.recipientLabelType \u003d this.getSelectionLabelType(model.recipientType);"},{"lineNumber":75,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":76,"author":{"gitId":"-"},"content":""},{"lineNumber":77,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":78,"author":{"gitId":"-"},"content":"  isQuestionCountOne: boolean \u003d false;"},{"lineNumber":79,"author":{"gitId":"-"},"content":""},{"lineNumber":80,"author":{"gitId":"domlimm"},"content":"  @Input()"},{"lineNumber":81,"author":{"gitId":"domlimm"},"content":"  isSubmitAllClicked: boolean \u003d false;"},{"lineNumber":82,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":83,"author":{"gitId":"domlimm"},"content":"  @Output()"},{"lineNumber":84,"author":{"gitId":"domlimm"},"content":"  isSubmitAllClickedChange: EventEmitter\u003cboolean\u003e \u003d new EventEmitter\u003cboolean\u003e();"},{"lineNumber":85,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":86,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":87,"author":{"gitId":"-"},"content":"  formModelChange: EventEmitter\u003cQuestionSubmissionFormModel\u003e \u003d new EventEmitter();"},{"lineNumber":88,"author":{"gitId":"-"},"content":""},{"lineNumber":89,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":90,"author":{"gitId":"-"},"content":"  responsesSave: EventEmitter\u003cQuestionSubmissionFormModel\u003e \u003d new EventEmitter();"},{"lineNumber":91,"author":{"gitId":"-"},"content":""},{"lineNumber":92,"author":{"gitId":"-"},"content":"  @ViewChild(ContributionQuestionConstraintComponent)"},{"lineNumber":93,"author":{"gitId":"-"},"content":"  private contributionQuestionConstraint!: ContributionQuestionConstraintComponent;"},{"lineNumber":94,"author":{"gitId":"-"},"content":""},{"lineNumber":95,"author":{"gitId":"-"},"content":"  @ViewChild(RankRecipientsQuestionConstraintComponent)"},{"lineNumber":96,"author":{"gitId":"-"},"content":"  private rankRecipientsQuestionConstraint!: RankRecipientsQuestionConstraintComponent;"},{"lineNumber":97,"author":{"gitId":"-"},"content":""},{"lineNumber":98,"author":{"gitId":"-"},"content":"  @ViewChild(ConstsumRecipientsQuestionConstraintComponent)"},{"lineNumber":99,"author":{"gitId":"-"},"content":"  private constsumRecipientQuesitonConstraint!: ConstsumRecipientsQuestionConstraintComponent;"},{"lineNumber":100,"author":{"gitId":"-"},"content":""},{"lineNumber":101,"author":{"gitId":"-"},"content":"  model: QuestionSubmissionFormModel \u003d {"},{"lineNumber":102,"author":{"gitId":"-"},"content":"    isLoading: false,"},{"lineNumber":103,"author":{"gitId":"-"},"content":"    isLoaded: false,"},{"lineNumber":104,"author":{"gitId":"weiquu"},"content":"    isTabExpanded: true,"},{"lineNumber":105,"author":{"gitId":"-"},"content":"    feedbackQuestionId: \u0027\u0027,"},{"lineNumber":106,"author":{"gitId":"-"},"content":""},{"lineNumber":107,"author":{"gitId":"-"},"content":"    questionNumber: 0,"},{"lineNumber":108,"author":{"gitId":"-"},"content":"    questionBrief: \u0027\u0027,"},{"lineNumber":109,"author":{"gitId":"-"},"content":"    questionDescription: \u0027\u0027,"},{"lineNumber":110,"author":{"gitId":"-"},"content":""},{"lineNumber":111,"author":{"gitId":"-"},"content":"    giverType: FeedbackParticipantType.STUDENTS,"},{"lineNumber":112,"author":{"gitId":"-"},"content":"    recipientType: FeedbackParticipantType.STUDENTS,"},{"lineNumber":113,"author":{"gitId":"-"},"content":"    recipientList: [],"},{"lineNumber":114,"author":{"gitId":"-"},"content":"    recipientSubmissionForms: [],"},{"lineNumber":115,"author":{"gitId":"-"},"content":""},{"lineNumber":116,"author":{"gitId":"-"},"content":"    questionType: FeedbackQuestionType.TEXT,"},{"lineNumber":117,"author":{"gitId":"-"},"content":"    questionDetails: {"},{"lineNumber":118,"author":{"gitId":"-"},"content":"      questionText: \u0027\u0027,"},{"lineNumber":119,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.TEXT,"},{"lineNumber":120,"author":{"gitId":"-"},"content":"    } as FeedbackTextQuestionDetails,"},{"lineNumber":121,"author":{"gitId":"-"},"content":""},{"lineNumber":122,"author":{"gitId":"-"},"content":"    numberOfEntitiesToGiveFeedbackToSetting: NumberOfEntitiesToGiveFeedbackToSetting.UNLIMITED,"},{"lineNumber":123,"author":{"gitId":"-"},"content":"    customNumberOfEntitiesToGiveFeedbackTo: 0,"},{"lineNumber":124,"author":{"gitId":"-"},"content":""},{"lineNumber":125,"author":{"gitId":"-"},"content":"    showGiverNameTo: [],"},{"lineNumber":126,"author":{"gitId":"-"},"content":"    showRecipientNameTo: [],"},{"lineNumber":127,"author":{"gitId":"-"},"content":"    showResponsesTo: [],"},{"lineNumber":128,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":129,"author":{"gitId":"-"},"content":""},{"lineNumber":130,"author":{"gitId":"-"},"content":"  recipientLabelType: FeedbackRecipientLabelType \u003d FeedbackRecipientLabelType.INCLUDE_NAME;"},{"lineNumber":131,"author":{"gitId":"-"},"content":"  isSectionTeamShown: boolean \u003d false;"},{"lineNumber":132,"author":{"gitId":"-"},"content":""},{"lineNumber":133,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":134,"author":{"gitId":"-"},"content":"  deleteCommentEvent: EventEmitter\u003cnumber\u003e \u003d new EventEmitter();"},{"lineNumber":135,"author":{"gitId":"-"},"content":""},{"lineNumber":136,"author":{"gitId":"-"},"content":"  visibilityStateMachine: VisibilityStateMachine;"},{"lineNumber":137,"author":{"gitId":"-"},"content":"  isEveryRecipientSorted: boolean \u003d false;"},{"lineNumber":138,"author":{"gitId":"-"},"content":""},{"lineNumber":139,"author":{"gitId":"-"},"content":"  constructor(private feedbackQuestionsService: FeedbackQuestionsService,"},{"lineNumber":140,"author":{"gitId":"-"},"content":"    private feedbackResponseService: FeedbackResponsesService) {"},{"lineNumber":141,"author":{"gitId":"-"},"content":"    this.visibilityStateMachine \u003d"},{"lineNumber":142,"author":{"gitId":"-"},"content":"      this.feedbackQuestionsService.getNewVisibilityStateMachine("},{"lineNumber":143,"author":{"gitId":"-"},"content":"        this.model.giverType, this.model.recipientType);"},{"lineNumber":144,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":145,"author":{"gitId":"-"},"content":""},{"lineNumber":146,"author":{"gitId":"-"},"content":"  get hasSectionTeam(): boolean {"},{"lineNumber":147,"author":{"gitId":"-"},"content":"    if (this.formMode \u003d\u003d\u003d QuestionSubmissionFormMode.FLEXIBLE_RECIPIENT) {"},{"lineNumber":148,"author":{"gitId":"-"},"content":"      switch (this.recipientLabelType) {"},{"lineNumber":149,"author":{"gitId":"-"},"content":"        case FeedbackRecipientLabelType.INCLUDE_SECTION:"},{"lineNumber":150,"author":{"gitId":"-"},"content":"        case FeedbackRecipientLabelType.INCLUDE_TEAM:"},{"lineNumber":151,"author":{"gitId":"-"},"content":"          return true;"},{"lineNumber":152,"author":{"gitId":"-"},"content":"        default:"},{"lineNumber":153,"author":{"gitId":"-"},"content":"          return false;"},{"lineNumber":154,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":155,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":156,"author":{"gitId":"-"},"content":"    return false;"},{"lineNumber":157,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":158,"author":{"gitId":"-"},"content":""},{"lineNumber":159,"author":{"gitId":"-"},"content":"  ngDoCheck(): void {"},{"lineNumber":160,"author":{"gitId":"-"},"content":"    if (this.model.isLoaded \u0026\u0026 !this.isEveryRecipientSorted) {"},{"lineNumber":161,"author":{"gitId":"-"},"content":"      this.sortRecipientsByName();"},{"lineNumber":162,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":163,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":164,"author":{"gitId":"domlimm"},"content":"    if (this.model.recipientSubmissionForms.some("},{"lineNumber":165,"author":{"gitId":"domlimm"},"content":"      (response) \u003d\u003e response.responseId.length \u003e 0) \u0026\u0026 !this.isSaved) {"},{"lineNumber":166,"author":{"gitId":"domlimm"},"content":"      this.isSaved \u003d true;"},{"lineNumber":167,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":168,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":169,"author":{"gitId":"domlimm"},"content":"    if (this.hasResponseChanged) {"},{"lineNumber":170,"author":{"gitId":"domlimm"},"content":"      this.isSaved \u003d false;"},{"lineNumber":171,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":172,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":173,"author":{"gitId":"domlimm"},"content":"    if (this.isSubmitAllClicked) {"},{"lineNumber":174,"author":{"gitId":"domlimm"},"content":"      if (this.model.recipientSubmissionForms.some((response) \u003d\u003e response.responseId.length \u003e 0)) {"},{"lineNumber":175,"author":{"gitId":"domlimm"},"content":"        this.isSaved \u003d true;"},{"lineNumber":176,"author":{"gitId":"domlimm"},"content":"      } else if (this.model.recipientSubmissionForms.every((form) \u003d\u003e form.responseId.length \u003d\u003d\u003d 0)) {"},{"lineNumber":177,"author":{"gitId":"domlimm"},"content":"        this.isSaved \u003d false;"},{"lineNumber":178,"author":{"gitId":"domlimm"},"content":"      }"},{"lineNumber":179,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":180,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":181,"author":{"gitId":"-"},"content":""},{"lineNumber":182,"author":{"gitId":"jasonqiu212"},"content":"  toggleQuestionTab(): void {"},{"lineNumber":183,"author":{"gitId":"weiquu"},"content":"    this.model.isTabExpanded \u003d !this.model.isTabExpanded;"},{"lineNumber":184,"author":{"gitId":"jasonqiu212"},"content":"    this.formModelChange.emit(this.model);"},{"lineNumber":185,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":186,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":187,"author":{"gitId":"-"},"content":"  private compareByName(firstRecipient: FeedbackResponseRecipient,"},{"lineNumber":188,"author":{"gitId":"-"},"content":"    secondRecipient: FeedbackResponseRecipient): number {"},{"lineNumber":189,"author":{"gitId":"-"},"content":"    return firstRecipient.recipientName.localeCompare(secondRecipient.recipientName);"},{"lineNumber":190,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":191,"author":{"gitId":"-"},"content":""},{"lineNumber":192,"author":{"gitId":"-"},"content":"  private compareBySection(firstRecipient: FeedbackResponseRecipient,"},{"lineNumber":193,"author":{"gitId":"-"},"content":"    secondRecipient: FeedbackResponseRecipient): number {"},{"lineNumber":194,"author":{"gitId":"-"},"content":""},{"lineNumber":195,"author":{"gitId":"-"},"content":"    if (firstRecipient.recipientSection \u0026\u0026 secondRecipient.recipientSection) {"},{"lineNumber":196,"author":{"gitId":"-"},"content":"      return firstRecipient.recipientSection.localeCompare(secondRecipient.recipientSection);"},{"lineNumber":197,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":198,"author":{"gitId":"-"},"content":""},{"lineNumber":199,"author":{"gitId":"-"},"content":"    if (firstRecipient.recipientSection) {"},{"lineNumber":200,"author":{"gitId":"-"},"content":"      return -1;"},{"lineNumber":201,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":202,"author":{"gitId":"-"},"content":""},{"lineNumber":203,"author":{"gitId":"-"},"content":"    if (secondRecipient.recipientSection) {"},{"lineNumber":204,"author":{"gitId":"-"},"content":"      return 1;"},{"lineNumber":205,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":206,"author":{"gitId":"-"},"content":""},{"lineNumber":207,"author":{"gitId":"-"},"content":"    return 0;"},{"lineNumber":208,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":209,"author":{"gitId":"-"},"content":""},{"lineNumber":210,"author":{"gitId":"-"},"content":"  private compareByTeam(firstRecipient: FeedbackResponseRecipient,"},{"lineNumber":211,"author":{"gitId":"-"},"content":"    secondRecipient: FeedbackResponseRecipient): number {"},{"lineNumber":212,"author":{"gitId":"-"},"content":""},{"lineNumber":213,"author":{"gitId":"-"},"content":"    if (firstRecipient.recipientTeam \u0026\u0026 secondRecipient.recipientTeam) {"},{"lineNumber":214,"author":{"gitId":"-"},"content":"      return firstRecipient.recipientTeam.localeCompare(secondRecipient.recipientTeam);"},{"lineNumber":215,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":216,"author":{"gitId":"-"},"content":""},{"lineNumber":217,"author":{"gitId":"-"},"content":"    if (firstRecipient.recipientTeam) {"},{"lineNumber":218,"author":{"gitId":"-"},"content":"      return -1;"},{"lineNumber":219,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":220,"author":{"gitId":"-"},"content":""},{"lineNumber":221,"author":{"gitId":"-"},"content":"    if (secondRecipient.recipientTeam) {"},{"lineNumber":222,"author":{"gitId":"-"},"content":"      return 1;"},{"lineNumber":223,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":224,"author":{"gitId":"-"},"content":""},{"lineNumber":225,"author":{"gitId":"-"},"content":"    return 0;"},{"lineNumber":226,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":227,"author":{"gitId":"-"},"content":""},{"lineNumber":228,"author":{"gitId":"-"},"content":"  private updateSubmissionFormIndexes(): void {"},{"lineNumber":229,"author":{"gitId":"-"},"content":"    const indexes: Map\u003cString, number\u003e \u003d new Map();"},{"lineNumber":230,"author":{"gitId":"-"},"content":"    this.model.recipientList.forEach((recipient: FeedbackResponseRecipient, index: number) \u003d\u003e {"},{"lineNumber":231,"author":{"gitId":"-"},"content":"      indexes.set(recipient.recipientIdentifier, index + 1);"},{"lineNumber":232,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":233,"author":{"gitId":"-"},"content":""},{"lineNumber":234,"author":{"gitId":"-"},"content":"    this.model.recipientSubmissionForms.sort((firstRecipient: FeedbackResponseRecipientSubmissionFormModel,"},{"lineNumber":235,"author":{"gitId":"-"},"content":"      secondRecipient: FeedbackResponseRecipientSubmissionFormModel) \u003d\u003e {"},{"lineNumber":236,"author":{"gitId":"-"},"content":"      const firstRecipientIndex: number \u003d indexes.get(firstRecipient.recipientIdentifier) || Number.MAX_SAFE_INTEGER;"},{"lineNumber":237,"author":{"gitId":"-"},"content":"      const secondRecipientIndex: number \u003d indexes.get(secondRecipient.recipientIdentifier) || Number.MAX_SAFE_INTEGER;"},{"lineNumber":238,"author":{"gitId":"-"},"content":""},{"lineNumber":239,"author":{"gitId":"-"},"content":"      return firstRecipientIndex - secondRecipientIndex;"},{"lineNumber":240,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":241,"author":{"gitId":"-"},"content":"    this.isEveryRecipientSorted \u003d true;"},{"lineNumber":242,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":243,"author":{"gitId":"-"},"content":""},{"lineNumber":244,"author":{"gitId":"-"},"content":"  sortRecipientsByName(): void {"},{"lineNumber":245,"author":{"gitId":"-"},"content":"    this.model.recipientList.sort(this.compareByName);"},{"lineNumber":246,"author":{"gitId":"-"},"content":"    this.updateSubmissionFormIndexes();"},{"lineNumber":247,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":248,"author":{"gitId":"-"},"content":""},{"lineNumber":249,"author":{"gitId":"-"},"content":"  private sortRecipientsBySectionTeam(): void {"},{"lineNumber":250,"author":{"gitId":"-"},"content":"    if (this.recipientLabelType \u003d\u003d\u003d FeedbackRecipientLabelType.INCLUDE_SECTION) {"},{"lineNumber":251,"author":{"gitId":"-"},"content":"      this.model.recipientList.sort((firstRecipient, secondRecipient) \u003d\u003e {"},{"lineNumber":252,"author":{"gitId":"-"},"content":"        return this.compareBySection(firstRecipient, secondRecipient)"},{"lineNumber":253,"author":{"gitId":"-"},"content":"          || this.compareByTeam(firstRecipient, secondRecipient);"},{"lineNumber":254,"author":{"gitId":"-"},"content":"      });"},{"lineNumber":255,"author":{"gitId":"-"},"content":""},{"lineNumber":256,"author":{"gitId":"-"},"content":"    } else if (this.recipientLabelType \u003d\u003d\u003d FeedbackRecipientLabelType.INCLUDE_TEAM) {"},{"lineNumber":257,"author":{"gitId":"-"},"content":"      this.model.recipientList.sort(this.compareByTeam);"},{"lineNumber":258,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":259,"author":{"gitId":"-"},"content":"    this.updateSubmissionFormIndexes();"},{"lineNumber":260,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":261,"author":{"gitId":"-"},"content":""},{"lineNumber":262,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":263,"author":{"gitId":"-"},"content":"   * Tracks submission form for each recipient by the index in the array."},{"lineNumber":264,"author":{"gitId":"-"},"content":"   *"},{"lineNumber":265,"author":{"gitId":"-"},"content":"   * @see https://angular.io/api/common/NgForOf#properties"},{"lineNumber":266,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":267,"author":{"gitId":"-"},"content":"  trackRecipientSubmissionFormByFn(index: number): any {"},{"lineNumber":268,"author":{"gitId":"-"},"content":"    return index;"},{"lineNumber":269,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":270,"author":{"gitId":"-"},"content":""},{"lineNumber":271,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":272,"author":{"gitId":"-"},"content":"   * Gets recipient name in {@code FIXED_RECIPIENT} mode."},{"lineNumber":273,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":274,"author":{"gitId":"-"},"content":"  getRecipientName(recipientIdentifier: string): string {"},{"lineNumber":275,"author":{"gitId":"-"},"content":"    const recipient: FeedbackResponseRecipient | undefined \u003d"},{"lineNumber":276,"author":{"gitId":"-"},"content":"      this.model.recipientList.find("},{"lineNumber":277,"author":{"gitId":"-"},"content":"        (r: FeedbackResponseRecipient) \u003d\u003e r.recipientIdentifier \u003d\u003d\u003d recipientIdentifier);"},{"lineNumber":278,"author":{"gitId":"-"},"content":"    return recipient ? recipient.recipientName : \u0027Unknown\u0027;"},{"lineNumber":279,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":280,"author":{"gitId":"-"},"content":""},{"lineNumber":281,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":282,"author":{"gitId":"-"},"content":"   * Checks whether the recipient is already selected in {@code FLEXIBLE_RECIPIENT} mode."},{"lineNumber":283,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":284,"author":{"gitId":"-"},"content":"  isRecipientSelected(recipient: FeedbackResponseRecipient): boolean {"},{"lineNumber":285,"author":{"gitId":"-"},"content":"    return this.model.recipientSubmissionForms.some("},{"lineNumber":286,"author":{"gitId":"-"},"content":"      (recipientSubmissionFormModel: FeedbackResponseRecipientSubmissionFormModel) \u003d\u003e"},{"lineNumber":287,"author":{"gitId":"-"},"content":"        recipientSubmissionFormModel.recipientIdentifier \u003d\u003d\u003d recipient.recipientIdentifier);"},{"lineNumber":288,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":289,"author":{"gitId":"-"},"content":""},{"lineNumber":290,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":291,"author":{"gitId":"-"},"content":"   * Triggers the change of the recipient submission form."},{"lineNumber":292,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":293,"author":{"gitId":"-"},"content":"  triggerRecipientSubmissionFormChange(index: number, field: string, data: any): void {"},{"lineNumber":294,"author":{"gitId":"-"},"content":"    if (!this.isFormsDisabled) {"},{"lineNumber":295,"author":{"gitId":"domlimm"},"content":"      this.hasResponseChanged \u003d true;"},{"lineNumber":296,"author":{"gitId":"domlimm"},"content":"      this.isSubmitAllClickedChange.emit(false);"},{"lineNumber":297,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":298,"author":{"gitId":"-"},"content":"      this.model.recipientSubmissionForms[index] \u003d"},{"lineNumber":299,"author":{"gitId":"-"},"content":"      {"},{"lineNumber":300,"author":{"gitId":"-"},"content":"        ...this.model.recipientSubmissionForms[index],"},{"lineNumber":301,"author":{"gitId":"-"},"content":"        [field]: data,"},{"lineNumber":302,"author":{"gitId":"-"},"content":"      };"},{"lineNumber":303,"author":{"gitId":"-"},"content":""},{"lineNumber":304,"author":{"gitId":"-"},"content":"      this.updateIsValidByQuestionConstraint();"},{"lineNumber":305,"author":{"gitId":"-"},"content":"      this.formModelChange.emit(this.model);"},{"lineNumber":306,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":307,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":308,"author":{"gitId":"-"},"content":""},{"lineNumber":309,"author":{"gitId":"-"},"content":"  updateIsValidByQuestionConstraint(): void {"},{"lineNumber":310,"author":{"gitId":"-"},"content":"    let isValid: boolean \u003d false;"},{"lineNumber":311,"author":{"gitId":"-"},"content":"    const questionType: string \u003d this.model.questionType;"},{"lineNumber":312,"author":{"gitId":"-"},"content":"    if (questionType \u003d\u003d\u003d FeedbackQuestionType.CONTRIB) {"},{"lineNumber":313,"author":{"gitId":"-"},"content":"      isValid \u003d this.contributionQuestionConstraint.isValid;"},{"lineNumber":314,"author":{"gitId":"-"},"content":"    } else if (questionType \u003d\u003d\u003d FeedbackQuestionType.RANK_RECIPIENTS) {"},{"lineNumber":315,"author":{"gitId":"-"},"content":"      isValid \u003d this.rankRecipientsQuestionConstraint.isValid;"},{"lineNumber":316,"author":{"gitId":"-"},"content":"    } else if (questionType \u003d\u003d\u003d FeedbackQuestionType.CONSTSUM_RECIPIENTS) {"},{"lineNumber":317,"author":{"gitId":"-"},"content":"      isValid \u003d this.constsumRecipientQuesitonConstraint.isValid;"},{"lineNumber":318,"author":{"gitId":"-"},"content":"    } else {"},{"lineNumber":319,"author":{"gitId":"-"},"content":"      return;"},{"lineNumber":320,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":321,"author":{"gitId":"-"},"content":""},{"lineNumber":322,"author":{"gitId":"-"},"content":"    this.updateValidity(isValid);"},{"lineNumber":323,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":324,"author":{"gitId":"-"},"content":""},{"lineNumber":325,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":326,"author":{"gitId":"-"},"content":"   * Triggers deletion of a participant comment associated with the response."},{"lineNumber":327,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":328,"author":{"gitId":"-"},"content":"  triggerDeleteCommentEvent(index: number): void {"},{"lineNumber":329,"author":{"gitId":"-"},"content":"    this.deleteCommentEvent.emit(index);"},{"lineNumber":330,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":331,"author":{"gitId":"-"},"content":""},{"lineNumber":332,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":333,"author":{"gitId":"-"},"content":"   * Add new participant comment to response with index."},{"lineNumber":334,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":335,"author":{"gitId":"-"},"content":"  addNewParticipantCommentToResponse(index: number): void {"},{"lineNumber":336,"author":{"gitId":"-"},"content":"    this.triggerRecipientSubmissionFormChange(index, \u0027commentByGiver\u0027, {"},{"lineNumber":337,"author":{"gitId":"-"},"content":"      commentEditFormModel: {"},{"lineNumber":338,"author":{"gitId":"-"},"content":"        commentText: \u0027\u0027,"},{"lineNumber":339,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":340,"author":{"gitId":"-"},"content":""},{"lineNumber":341,"author":{"gitId":"-"},"content":"      isEditing: true,"},{"lineNumber":342,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":343,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":344,"author":{"gitId":"-"},"content":""},{"lineNumber":345,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":346,"author":{"gitId":"-"},"content":"   * Cancel adding new participant comment."},{"lineNumber":347,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":348,"author":{"gitId":"-"},"content":"  cancelAddingNewParticipantComment(index: number): void {"},{"lineNumber":349,"author":{"gitId":"-"},"content":"    this.triggerRecipientSubmissionFormChange(index, \u0027commentByGiver\u0027, null);"},{"lineNumber":350,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":351,"author":{"gitId":"-"},"content":""},{"lineNumber":352,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":353,"author":{"gitId":"-"},"content":"   * Discards the current editing and restore the original comment."},{"lineNumber":354,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":355,"author":{"gitId":"-"},"content":"  discardEditedParticipantComment(index: number): void {"},{"lineNumber":356,"author":{"gitId":"-"},"content":"    const commentModel: CommentRowModel | undefined \u003d this.model.recipientSubmissionForms[index].commentByGiver;"},{"lineNumber":357,"author":{"gitId":"-"},"content":"    if (!commentModel || !commentModel.originalComment) {"},{"lineNumber":358,"author":{"gitId":"-"},"content":"      return;"},{"lineNumber":359,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":360,"author":{"gitId":"-"},"content":"    this.triggerRecipientSubmissionFormChange(index, \u0027commentByGiver\u0027,"},{"lineNumber":361,"author":{"gitId":"-"},"content":"      {"},{"lineNumber":362,"author":{"gitId":"-"},"content":"        ...commentModel,"},{"lineNumber":363,"author":{"gitId":"-"},"content":"        commentEditFormModel: {"},{"lineNumber":364,"author":{"gitId":"-"},"content":"          commentText: commentModel.originalComment.commentText,"},{"lineNumber":365,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":366,"author":{"gitId":"-"},"content":"        isEditing: false,"},{"lineNumber":367,"author":{"gitId":"-"},"content":"      });"},{"lineNumber":368,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":369,"author":{"gitId":"-"},"content":""},{"lineNumber":370,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":371,"author":{"gitId":"-"},"content":"   * Checks whether the response is empty or not."},{"lineNumber":372,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":373,"author":{"gitId":"-"},"content":"  isFeedbackResponseDetailsEmpty(responseDetails: FeedbackResponseDetails): boolean {"},{"lineNumber":374,"author":{"gitId":"-"},"content":"    return this.feedbackResponseService.isFeedbackResponseDetailsEmpty("},{"lineNumber":375,"author":{"gitId":"-"},"content":"      this.model.questionType, responseDetails);"},{"lineNumber":376,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":377,"author":{"gitId":"-"},"content":""},{"lineNumber":378,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":379,"author":{"gitId":"-"},"content":"   * Updates validity of all responses in a question."},{"lineNumber":380,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":381,"author":{"gitId":"-"},"content":"  updateValidity(isValid: boolean): void {"},{"lineNumber":382,"author":{"gitId":"-"},"content":"    if (this.model.recipientSubmissionForms.length \u003d\u003d\u003d 0) { return; }"},{"lineNumber":383,"author":{"gitId":"-"},"content":""},{"lineNumber":384,"author":{"gitId":"-"},"content":"    for (const recipientSubmissionForm of this.model.recipientSubmissionForms) {"},{"lineNumber":385,"author":{"gitId":"-"},"content":"      recipientSubmissionForm.isValid \u003d isValid;"},{"lineNumber":386,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":387,"author":{"gitId":"-"},"content":""},{"lineNumber":388,"author":{"gitId":"-"},"content":"    this.formModelChange.emit(this.model);"},{"lineNumber":389,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":390,"author":{"gitId":"-"},"content":""},{"lineNumber":391,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":392,"author":{"gitId":"-"},"content":"   * Triggers saving of responses for the specific question."},{"lineNumber":393,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":394,"author":{"gitId":"-"},"content":"  saveFeedbackResponses(): void {"},{"lineNumber":395,"author":{"gitId":"domlimm"},"content":"    this.isSaved \u003d true;"},{"lineNumber":396,"author":{"gitId":"domlimm"},"content":"    this.hasResponseChanged \u003d false;"},{"lineNumber":397,"author":{"gitId":"-"},"content":"    this.responsesSave.emit(this.model);"},{"lineNumber":398,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":399,"author":{"gitId":"-"},"content":""},{"lineNumber":400,"author":{"gitId":"-"},"content":"  getSelectionLabelType(recipientType: FeedbackParticipantType): FeedbackRecipientLabelType {"},{"lineNumber":401,"author":{"gitId":"-"},"content":"    switch (recipientType) {"},{"lineNumber":402,"author":{"gitId":"-"},"content":"      case FeedbackParticipantType.STUDENTS:"},{"lineNumber":403,"author":{"gitId":"-"},"content":"      case FeedbackParticipantType.STUDENTS_EXCLUDING_SELF:"},{"lineNumber":404,"author":{"gitId":"-"},"content":"        return FeedbackRecipientLabelType.INCLUDE_SECTION;"},{"lineNumber":405,"author":{"gitId":"-"},"content":"      case FeedbackParticipantType.STUDENTS_IN_SAME_SECTION:"},{"lineNumber":406,"author":{"gitId":"-"},"content":"        return FeedbackRecipientLabelType.INCLUDE_TEAM;"},{"lineNumber":407,"author":{"gitId":"-"},"content":"      default:"},{"lineNumber":408,"author":{"gitId":"-"},"content":"        return FeedbackRecipientLabelType.INCLUDE_NAME;"},{"lineNumber":409,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":410,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":411,"author":{"gitId":"-"},"content":""},{"lineNumber":412,"author":{"gitId":"-"},"content":"  getSelectionOptionLabel(recipient: FeedbackResponseRecipient): string {"},{"lineNumber":413,"author":{"gitId":"-"},"content":"    if (!this.isSectionTeamShown) {"},{"lineNumber":414,"author":{"gitId":"-"},"content":"      return recipient.recipientName;"},{"lineNumber":415,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":416,"author":{"gitId":"-"},"content":""},{"lineNumber":417,"author":{"gitId":"-"},"content":"    if (recipient.recipientSection \u0026\u0026 recipient.recipientTeam) {"},{"lineNumber":418,"author":{"gitId":"-"},"content":"      return `${recipient.recipientSection} / ${recipient.recipientTeam} | ${recipient.recipientName}`;"},{"lineNumber":419,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":420,"author":{"gitId":"-"},"content":""},{"lineNumber":421,"author":{"gitId":"-"},"content":"    if (recipient.recipientSection) {"},{"lineNumber":422,"author":{"gitId":"-"},"content":"      return `${recipient.recipientSection} | ${recipient.recipientName}`;"},{"lineNumber":423,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":424,"author":{"gitId":"-"},"content":""},{"lineNumber":425,"author":{"gitId":"-"},"content":"    if (recipient.recipientTeam) {"},{"lineNumber":426,"author":{"gitId":"-"},"content":"      return `${recipient.recipientTeam} | ${recipient.recipientName}`;"},{"lineNumber":427,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":428,"author":{"gitId":"-"},"content":""},{"lineNumber":429,"author":{"gitId":"-"},"content":"    return recipient.recipientName;"},{"lineNumber":430,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":431,"author":{"gitId":"-"},"content":""},{"lineNumber":432,"author":{"gitId":"-"},"content":"  toggleSectionTeam(event: Event): void {"},{"lineNumber":433,"author":{"gitId":"-"},"content":"    const checkbox: HTMLInputElement \u003d event.target as HTMLInputElement;"},{"lineNumber":434,"author":{"gitId":"-"},"content":"    if (checkbox.checked) {"},{"lineNumber":435,"author":{"gitId":"-"},"content":"      this.isSectionTeamShown \u003d true;"},{"lineNumber":436,"author":{"gitId":"-"},"content":"      this.sortRecipientsBySectionTeam();"},{"lineNumber":437,"author":{"gitId":"-"},"content":"    } else {"},{"lineNumber":438,"author":{"gitId":"-"},"content":"      this.isSectionTeamShown \u003d false;"},{"lineNumber":439,"author":{"gitId":"-"},"content":"      this.sortRecipientsByName();"},{"lineNumber":440,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":441,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":442,"author":{"gitId":"-"},"content":""},{"lineNumber":443,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":444,"author":{"gitId":"-"},"content":"   * Triggers adding a col-12 if MCQ Dropdown is enabled."},{"lineNumber":445,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":446,"author":{"gitId":"-"},"content":"  refreshCssForDropdownMCQ(add: boolean): void {"},{"lineNumber":447,"author":{"gitId":"-"},"content":"    this.isMCQDropDownEnabled \u003d add;"},{"lineNumber":448,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":449,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"domlimm":30,"jasonqiu212":2,"weiquu":6,"-":411}},{"path":"src/web/app/components/question-submission-form/question-submission-form.module.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { CommonModule } from \u0027@angular/common\u0027;"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import { NgModule } from \u0027@angular/core\u0027;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"import { FormsModule } from \u0027@angular/forms\u0027;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import { NgbTooltipModule } from \u0027@ng-bootstrap/ng-bootstrap\u0027;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import { AjaxLoadingModule } from \u0027../ajax-loading/ajax-loading.module\u0027;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import { CommentBoxModule } from \u0027../comment-box/comment-box.module\u0027;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import { LoadingSpinnerModule } from \u0027../loading-spinner/loading-spinner.module\u0027;"},{"lineNumber":8,"author":{"gitId":"weiquu"},"content":"import { PanelChevronModule } from \u0027../panel-chevron/panel-chevron.module\u0027;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import { QuestionConstraintModule } from \u0027../question-types/question-constraint/question-constraint.module\u0027;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":11,"author":{"gitId":"-"},"content":"  QuestionEditAnswerFormModule,"},{"lineNumber":12,"author":{"gitId":"-"},"content":"} from \u0027../question-types/question-edit-answer-form/question-edit-answer-form.module\u0027;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import { QuestionInstructionModule } from \u0027../question-types/question-instruction/question-instruction.module\u0027;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import { RichTextEditorModule } from \u0027../rich-text-editor/rich-text-editor.module\u0027;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import { TeammatesCommonModule } from \u0027../teammates-common/teammates-common.module\u0027;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"import { VisibilityMessagesModule } from \u0027../visibility-messages/visibility-messages.module\u0027;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"import { QuestionSubmissionFormComponent } from \u0027./question-submission-form.component\u0027;"},{"lineNumber":18,"author":{"gitId":"-"},"content":"import { RecipientTypeNamePipe } from \u0027./recipient-type-name.pipe\u0027;"},{"lineNumber":19,"author":{"gitId":"-"},"content":""},{"lineNumber":20,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":21,"author":{"gitId":"-"},"content":" * Module for all question submissions UI in session submissions page."},{"lineNumber":22,"author":{"gitId":"-"},"content":" */"},{"lineNumber":23,"author":{"gitId":"-"},"content":"@NgModule({"},{"lineNumber":24,"author":{"gitId":"-"},"content":"  imports: ["},{"lineNumber":25,"author":{"gitId":"-"},"content":"    CommonModule,"},{"lineNumber":26,"author":{"gitId":"-"},"content":"    TeammatesCommonModule,"},{"lineNumber":27,"author":{"gitId":"-"},"content":"    VisibilityMessagesModule,"},{"lineNumber":28,"author":{"gitId":"-"},"content":"    NgbTooltipModule,"},{"lineNumber":29,"author":{"gitId":"-"},"content":"    FormsModule,"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    RichTextEditorModule,"},{"lineNumber":31,"author":{"gitId":"-"},"content":"    QuestionConstraintModule,"},{"lineNumber":32,"author":{"gitId":"-"},"content":"    QuestionInstructionModule,"},{"lineNumber":33,"author":{"gitId":"-"},"content":"    QuestionEditAnswerFormModule,"},{"lineNumber":34,"author":{"gitId":"-"},"content":"    CommentBoxModule,"},{"lineNumber":35,"author":{"gitId":"-"},"content":"    LoadingSpinnerModule,"},{"lineNumber":36,"author":{"gitId":"-"},"content":"    AjaxLoadingModule,"},{"lineNumber":37,"author":{"gitId":"weiquu"},"content":"    PanelChevronModule,"},{"lineNumber":38,"author":{"gitId":"-"},"content":"  ],"},{"lineNumber":39,"author":{"gitId":"-"},"content":"  declarations: ["},{"lineNumber":40,"author":{"gitId":"-"},"content":"    QuestionSubmissionFormComponent,"},{"lineNumber":41,"author":{"gitId":"-"},"content":"    RecipientTypeNamePipe,"},{"lineNumber":42,"author":{"gitId":"-"},"content":"  ],"},{"lineNumber":43,"author":{"gitId":"-"},"content":"  exports: ["},{"lineNumber":44,"author":{"gitId":"-"},"content":"    QuestionSubmissionFormComponent,"},{"lineNumber":45,"author":{"gitId":"-"},"content":"  ],"},{"lineNumber":46,"author":{"gitId":"-"},"content":"})"},{"lineNumber":47,"author":{"gitId":"-"},"content":"export class QuestionSubmissionFormModule { }"}],"authorContributionMap":{"weiquu":2,"-":45}},{"path":"src/web/app/components/question-text-with-info/question-text-with-info.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"jasonqiu212"},"content":"\u003cspan class\u003d\"d-flex flex-column flex-sm-row align-items-sm-center\"\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  \u003ch2 class\u003d\"question-number\"\u003e"},{"lineNumber":3,"author":{"gitId":"jasonqiu212"},"content":"    Question {{ questionNumber }}:"},{"lineNumber":4,"author":{"gitId":"jasonqiu212"},"content":"  \u003c/h2\u003e"},{"lineNumber":5,"author":{"gitId":"-"},"content":"  \u003cspan class\u003d\"question-text mx-sm-2\"\u003e{{ questionDetails.questionText }}\u003c/span\u003e"},{"lineNumber":6,"author":{"gitId":"-"},"content":"  \u003cbutton class\u003d\"additional-info-button info-font-size me-auto border-0 p-0 bg-transparent text-primary\" (click)\u003d\"additionalInfoIsExpanded \u003d !additionalInfoIsExpanded;$event.stopPropagation()\" *ngIf\u003d\"hasAdditionalInfo(questionDetails)\"\u003e"},{"lineNumber":7,"author":{"gitId":"-"},"content":"    [{{ additionalInfoIsExpanded ? \u0027less\u0027 : \u0027more\u0027 }}]"},{"lineNumber":8,"author":{"gitId":"jasonqiu212"},"content":"  \u003c/button\u003e"},{"lineNumber":9,"author":{"gitId":"-"},"content":"\u003c/span\u003e"},{"lineNumber":10,"author":{"gitId":"-"},"content":""},{"lineNumber":11,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"additional-info info-font-size\" *ngIf\u003d\"hasAdditionalInfo(questionDetails) \u0026\u0026 additionalInfoIsExpanded\"\u003e"},{"lineNumber":12,"author":{"gitId":"-"},"content":"  \u003ctm-contribution-question-additional-info *ngIf\u003d\"questionDetails.questionType \u003d\u003d\u003d FeedbackQuestionType.CONTRIB\" [questionDetails]\u003d\"questionDetails\"\u003e\u003c/tm-contribution-question-additional-info\u003e"},{"lineNumber":13,"author":{"gitId":"-"},"content":"  \u003ctm-text-question-additional-info *ngIf\u003d\"questionDetails.questionType \u003d\u003d\u003d FeedbackQuestionType.TEXT\" [questionDetails]\u003d\"questionDetails\"\u003e\u003c/tm-text-question-additional-info\u003e"},{"lineNumber":14,"author":{"gitId":"-"},"content":"  \u003ctm-mcq-question-additional-info *ngIf\u003d\"questionDetails.questionType \u003d\u003d\u003d FeedbackQuestionType.MCQ\" [questionDetails]\u003d\"questionDetails\"\u003e\u003c/tm-mcq-question-additional-info\u003e"},{"lineNumber":15,"author":{"gitId":"-"},"content":"  \u003ctm-msq-question-additional-info *ngIf\u003d\"questionDetails.questionType \u003d\u003d\u003d FeedbackQuestionType.MSQ\" [questionDetails]\u003d\"questionDetails\"\u003e\u003c/tm-msq-question-additional-info\u003e"},{"lineNumber":16,"author":{"gitId":"-"},"content":"  \u003ctm-rank-options-question-additional-info *ngIf\u003d\"questionDetails.questionType \u003d\u003d\u003d FeedbackQuestionType.RANK_OPTIONS\" [questionDetails]\u003d\"questionDetails\"\u003e\u003c/tm-rank-options-question-additional-info\u003e"},{"lineNumber":17,"author":{"gitId":"-"},"content":"  \u003ctm-rank-recipients-question-additional-info *ngIf\u003d\"questionDetails.questionType \u003d\u003d\u003d FeedbackQuestionType.RANK_RECIPIENTS\" [questionDetails]\u003d\"questionDetails\"\u003e\u003c/tm-rank-recipients-question-additional-info\u003e"},{"lineNumber":18,"author":{"gitId":"-"},"content":"  \u003ctm-rubric-question-additional-info *ngIf\u003d\"questionDetails.questionType \u003d\u003d\u003d FeedbackQuestionType.RUBRIC\" [questionDetails]\u003d\"questionDetails\"\u003e\u003c/tm-rubric-question-additional-info\u003e"},{"lineNumber":19,"author":{"gitId":"-"},"content":"  \u003ctm-constsum-options-question-additional-info *ngIf\u003d\"questionDetails.questionType \u003d\u003d\u003d FeedbackQuestionType.CONSTSUM_OPTIONS\" [questionDetails]\u003d\"questionDetails\"\u003e\u003c/tm-constsum-options-question-additional-info\u003e"},{"lineNumber":20,"author":{"gitId":"-"},"content":"  \u003ctm-constsum-recipients-question-additional-info *ngIf\u003d\"questionDetails.questionType \u003d\u003d\u003d FeedbackQuestionType.CONSTSUM_RECIPIENTS\" [questionDetails]\u003d\"questionDetails\"\u003e\u003c/tm-constsum-recipients-question-additional-info\u003e"},{"lineNumber":21,"author":{"gitId":"-"},"content":"  \u003ctm-num-scale-question-additional-info *ngIf\u003d\"questionDetails.questionType \u003d\u003d\u003d FeedbackQuestionType.NUMSCALE\" [questionDetails]\u003d\"questionDetails\"\u003e\u003c/tm-num-scale-question-additional-info\u003e"},{"lineNumber":22,"author":{"gitId":"-"},"content":"\u003c/div\u003e"}],"authorContributionMap":{"jasonqiu212":4,"-":18}},{"path":"src/web/app/components/question-text-with-info/question-text-with-info.component.scss","fileType":"scss","lines":[{"lineNumber":1,"author":{"gitId":"jasonqiu212"},"content":".question-number {"},{"lineNumber":2,"author":{"gitId":"jasonqiu212"},"content":"  font-size: inherit;"},{"lineNumber":3,"author":{"gitId":"jasonqiu212"},"content":"  margin: 0;"},{"lineNumber":4,"author":{"gitId":"jasonqiu212"},"content":"  font-weight: bold;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"jasonqiu212":4,"-":1}},{"path":"src/web/app/components/question-text-with-info/question-text-with-info.component.spec.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { ComponentFixture, TestBed, waitForAsync } from \u0027@angular/core/testing\u0027;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import { By } from \u0027@angular/platform-browser\u0027;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import { RouterTestingModule } from \u0027@angular/router/testing\u0027;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":6,"author":{"gitId":"-"},"content":"  FeedbackMcqQuestionDetails,"},{"lineNumber":7,"author":{"gitId":"-"},"content":"  FeedbackParticipantType,"},{"lineNumber":8,"author":{"gitId":"-"},"content":"  FeedbackQuestionType,"},{"lineNumber":9,"author":{"gitId":"-"},"content":"  FeedbackTextQuestionDetails,"},{"lineNumber":10,"author":{"gitId":"-"},"content":"} from \u0027../../../types/api-output\u0027;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":12,"author":{"gitId":"-"},"content":"  QuestionAdditionalInfoModule,"},{"lineNumber":13,"author":{"gitId":"-"},"content":"} from \u0027../question-types/question-additional-info/question-additional-info.module\u0027;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import { TeammatesRouterModule } from \u0027../teammates-router/teammates-router.module\u0027;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import { QuestionTextWithInfoComponent } from \u0027./question-text-with-info.component\u0027;"},{"lineNumber":16,"author":{"gitId":"-"},"content":""},{"lineNumber":17,"author":{"gitId":"-"},"content":"describe(\u0027QuestionTextWithInfoComponent\u0027, () \u003d\u003e {"},{"lineNumber":18,"author":{"gitId":"-"},"content":"  let component: QuestionTextWithInfoComponent;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"  let fixture: ComponentFixture\u003cQuestionTextWithInfoComponent\u003e;"},{"lineNumber":20,"author":{"gitId":"-"},"content":""},{"lineNumber":21,"author":{"gitId":"-"},"content":"  beforeEach(waitForAsync(() \u003d\u003e {"},{"lineNumber":22,"author":{"gitId":"-"},"content":"    TestBed.configureTestingModule({"},{"lineNumber":23,"author":{"gitId":"-"},"content":"      declarations: [QuestionTextWithInfoComponent],"},{"lineNumber":24,"author":{"gitId":"-"},"content":"      imports: ["},{"lineNumber":25,"author":{"gitId":"-"},"content":"        RouterTestingModule,"},{"lineNumber":26,"author":{"gitId":"-"},"content":"        QuestionAdditionalInfoModule,"},{"lineNumber":27,"author":{"gitId":"-"},"content":"        TeammatesRouterModule,"},{"lineNumber":28,"author":{"gitId":"-"},"content":"      ],"},{"lineNumber":29,"author":{"gitId":"-"},"content":"    })"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    .compileComponents();"},{"lineNumber":31,"author":{"gitId":"-"},"content":"  }));"},{"lineNumber":32,"author":{"gitId":"-"},"content":""},{"lineNumber":33,"author":{"gitId":"-"},"content":"  beforeEach(() \u003d\u003e {"},{"lineNumber":34,"author":{"gitId":"-"},"content":"    fixture \u003d TestBed.createComponent(QuestionTextWithInfoComponent);"},{"lineNumber":35,"author":{"gitId":"-"},"content":"    component \u003d fixture.componentInstance;"},{"lineNumber":36,"author":{"gitId":"-"},"content":"    fixture.detectChanges();"},{"lineNumber":37,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":38,"author":{"gitId":"-"},"content":""},{"lineNumber":39,"author":{"gitId":"-"},"content":"  const textQuestionDetails: FeedbackTextQuestionDetails \u003d {"},{"lineNumber":40,"author":{"gitId":"-"},"content":"    shouldAllowRichText: true,"},{"lineNumber":41,"author":{"gitId":"-"},"content":"    questionType: FeedbackQuestionType.TEXT,"},{"lineNumber":42,"author":{"gitId":"-"},"content":"    questionText: \u0027Text question details\u0027,"},{"lineNumber":43,"author":{"gitId":"-"},"content":"    recommendedLength: 100,"},{"lineNumber":44,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":45,"author":{"gitId":"-"},"content":""},{"lineNumber":46,"author":{"gitId":"-"},"content":"  const mcqQuestionDetails: FeedbackMcqQuestionDetails \u003d {"},{"lineNumber":47,"author":{"gitId":"-"},"content":"    questionType: FeedbackQuestionType.MCQ,"},{"lineNumber":48,"author":{"gitId":"-"},"content":"    questionText: \u0027MCQ question details\u0027,"},{"lineNumber":49,"author":{"gitId":"-"},"content":"    hasAssignedWeights: false,"},{"lineNumber":50,"author":{"gitId":"-"},"content":"    mcqWeights: [],"},{"lineNumber":51,"author":{"gitId":"-"},"content":"    mcqOtherWeight: 0,"},{"lineNumber":52,"author":{"gitId":"-"},"content":"    mcqChoices: [\u0027a\u0027, \u0027b\u0027],"},{"lineNumber":53,"author":{"gitId":"-"},"content":"    otherEnabled: false,"},{"lineNumber":54,"author":{"gitId":"-"},"content":"    questionDropdownEnabled: false,"},{"lineNumber":55,"author":{"gitId":"-"},"content":"    generateOptionsFor: FeedbackParticipantType.NONE,"},{"lineNumber":56,"author":{"gitId":"-"},"content":""},{"lineNumber":57,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":58,"author":{"gitId":"-"},"content":""},{"lineNumber":59,"author":{"gitId":"-"},"content":"  it(\u0027should create\u0027, () \u003d\u003e {"},{"lineNumber":60,"author":{"gitId":"-"},"content":"    expect(component).toBeTruthy();"},{"lineNumber":61,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":62,"author":{"gitId":"-"},"content":""},{"lineNumber":63,"author":{"gitId":"-"},"content":"  it(\u0027should not show control link and question details for TEXT questions\u0027, () \u003d\u003e {"},{"lineNumber":64,"author":{"gitId":"-"},"content":"    component.questionDetails \u003d textQuestionDetails;"},{"lineNumber":65,"author":{"gitId":"-"},"content":"    fixture.detectChanges();"},{"lineNumber":66,"author":{"gitId":"-"},"content":""},{"lineNumber":67,"author":{"gitId":"-"},"content":"    const questionDetailControlLink: any \u003d fixture.debugElement.query(By.css(\u0027a\u0027));"},{"lineNumber":68,"author":{"gitId":"-"},"content":"    const infoWrapper: any \u003d fixture.debugElement.query(By.css(\u0027div\u0027));"},{"lineNumber":69,"author":{"gitId":"-"},"content":""},{"lineNumber":70,"author":{"gitId":"-"},"content":"    expect(questionDetailControlLink).toBeNull();"},{"lineNumber":71,"author":{"gitId":"-"},"content":"    expect(infoWrapper).toBeNull();"},{"lineNumber":72,"author":{"gitId":"-"},"content":"    expect(fixture).toMatchSnapshot();"},{"lineNumber":73,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":74,"author":{"gitId":"-"},"content":""},{"lineNumber":75,"author":{"gitId":"-"},"content":"  it(\u0027should show control link when question type is not TEXT\u0027, () \u003d\u003e {"},{"lineNumber":76,"author":{"gitId":"-"},"content":"    component.questionDetails \u003d mcqQuestionDetails;"},{"lineNumber":77,"author":{"gitId":"-"},"content":"    fixture.detectChanges();"},{"lineNumber":78,"author":{"gitId":"-"},"content":""},{"lineNumber":79,"author":{"gitId":"-"},"content":"    expect(fixture).toMatchSnapshot();"},{"lineNumber":80,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":81,"author":{"gitId":"-"},"content":""},{"lineNumber":82,"author":{"gitId":"-"},"content":"  it(\u0027should show question detail when click control link\u0027, () \u003d\u003e {"},{"lineNumber":83,"author":{"gitId":"-"},"content":"    component.questionDetails \u003d mcqQuestionDetails;"},{"lineNumber":84,"author":{"gitId":"-"},"content":"    fixture.detectChanges();"},{"lineNumber":85,"author":{"gitId":"-"},"content":""},{"lineNumber":86,"author":{"gitId":"jasonqiu212"},"content":"    const questionDetailControlLink: any \u003d fixture.debugElement.query(By.css(\u0027button\u0027));"},{"lineNumber":87,"author":{"gitId":"-"},"content":""},{"lineNumber":88,"author":{"gitId":"-"},"content":"    questionDetailControlLink.nativeElement.click();"},{"lineNumber":89,"author":{"gitId":"-"},"content":"    fixture.detectChanges();"},{"lineNumber":90,"author":{"gitId":"-"},"content":""},{"lineNumber":91,"author":{"gitId":"-"},"content":"    expect(fixture).toMatchSnapshot();"},{"lineNumber":92,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":93,"author":{"gitId":"-"},"content":"});"}],"authorContributionMap":{"jasonqiu212":1,"-":92}},{"path":"src/web/app/components/question-types/question-edit-answer-form/constsum-options-question-edit-answer-form.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"weiquu"},"content":"\u003cdiv [attr.aria-label]\u003d\"getAriaLabel()\"\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"form-group row text-start\" *ngFor\u003d\"let option of questionDetails.constSumOptions; let i \u003d index;\"\u003e"},{"lineNumber":3,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"col-md-5 col-xs-12 text-md-end col-form-label\"\u003e"},{"lineNumber":4,"author":{"gitId":"-"},"content":"      \u003cstrong\u003e{{ option }}\u003c/strong\u003e"},{"lineNumber":5,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":6,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"col-md-7 col-xs-12 text-md-start\"\u003e"},{"lineNumber":7,"author":{"gitId":"-"},"content":"      \u003cinput type\u003d\"number\" class\u003d\"form-control\""},{"lineNumber":8,"author":{"gitId":"-"},"content":"            [ngModel]\u003d\"i \u003c responseDetails.answers.length ? responseDetails.answers[i] : \u0027\u0027\""},{"lineNumber":9,"author":{"gitId":"-"},"content":"            (ngModelChange)\u003d\"triggerResponse(i, $event)\""},{"lineNumber":10,"author":{"gitId":"-"},"content":"            [disabled]\u003d\"isDisabled\""},{"lineNumber":11,"author":{"gitId":"weiquu"},"content":"            [attr.aria-label]\u003d\"getAriaLabelForOption(option)\""},{"lineNumber":12,"author":{"gitId":"-"},"content":"            min\u003d\"0\" step\u003d\"1\""},{"lineNumber":13,"author":{"gitId":"-"},"content":"            tmDisableWheel\u003e"},{"lineNumber":14,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":15,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":16,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"form-group row\" *ngIf\u003d\"responseDetails.answers.length !\u003d\u003d 0\"\u003e"},{"lineNumber":17,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"col-12 col-sm-5 offset-sm-2\"\u003e"},{"lineNumber":18,"author":{"gitId":"-"},"content":"      \u003cbutton type\u003d\"button\" class\u003d\"btn btn-light btn-sm\" (click)\u003d\"triggerResponseDetailsChange(\u0027answers\u0027, [])\" [disabled]\u003d\"isDisabled\"\u003eClear Points\u003c/button\u003e"},{"lineNumber":19,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":20,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":21,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"row\" *ngIf\u003d\"responseDetails.answers.length !\u003d\u003d 0\"\u003e"},{"lineNumber":22,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"col-12\"\u003e"},{"lineNumber":23,"author":{"gitId":"-"},"content":"      \u003cp *ngIf\u003d\"totalAnsweredPoints \u003c totalRequiredPoints\" class\u003d\"text-danger\"\u003e\u003cspan class\u003d\"fa fa-times\"\u003e\u003c/span\u003e"},{"lineNumber":24,"author":{"gitId":"-"},"content":"        Actual total is {{ totalAnsweredPoints }}! Distribute the remaining {{ totalRequiredPoints - totalAnsweredPoints }} points.\u003c/p\u003e"},{"lineNumber":25,"author":{"gitId":"-"},"content":""},{"lineNumber":26,"author":{"gitId":"-"},"content":"      \u003cp *ngIf\u003d\"totalAnsweredPoints \u003e totalRequiredPoints\" class\u003d\"text-danger\"\u003e\u003cspan class\u003d\"fa fa-times\"\u003e\u003c/span\u003e"},{"lineNumber":27,"author":{"gitId":"-"},"content":"        Actual total is {{ totalAnsweredPoints }}! Remove the extra  {{ totalAnsweredPoints - totalRequiredPoints }} points allocated.\u003c/p\u003e"},{"lineNumber":28,"author":{"gitId":"-"},"content":""},{"lineNumber":29,"author":{"gitId":"-"},"content":"      \u003cp *ngIf\u003d\"totalAnsweredPoints \u003d\u003d\u003d totalRequiredPoints\" class\u003d\"text-success\"\u003e\u003cspan class\u003d\"fa fa-check\"\u003e\u003c/span\u003e"},{"lineNumber":30,"author":{"gitId":"-"},"content":"        All points distributed!\u003c/p\u003e"},{"lineNumber":31,"author":{"gitId":"-"},"content":""},{"lineNumber":32,"author":{"gitId":"-"},"content":"      \u003cp *ngIf\u003d\"isAnyPointsNegative\" class\u003d\"text-danger\"\u003e\u003cspan class\u003d\"fa fa-times\"\u003e\u003c/span\u003e"},{"lineNumber":33,"author":{"gitId":"-"},"content":"        Points cannot be negative!\u003c/p\u003e"},{"lineNumber":34,"author":{"gitId":"-"},"content":""},{"lineNumber":35,"author":{"gitId":"-"},"content":"      \u003cp *ngIf\u003d\"isAnyPointAboveMaximum\" class\u003d\"text-danger\"\u003e\u003cspan class\u003d\"fa fa-times\"\u003e\u003c/span\u003e"},{"lineNumber":36,"author":{"gitId":"-"},"content":"        Points cannot be above: {{ questionDetails.maxPoint }}\u003c/p\u003e"},{"lineNumber":37,"author":{"gitId":"-"},"content":""},{"lineNumber":38,"author":{"gitId":"-"},"content":"      \u003cp *ngIf\u003d\"isAnyPointBelowMinimum\" class\u003d\"text-danger\"\u003e\u003cspan class\u003d\"fa fa-times\"\u003e\u003c/span\u003e"},{"lineNumber":39,"author":{"gitId":"-"},"content":"        Points cannot be below: {{ questionDetails.minPoint }}\u003c/p\u003e"},{"lineNumber":40,"author":{"gitId":"-"},"content":""},{"lineNumber":41,"author":{"gitId":"-"},"content":"      \u003cp *ngIf\u003d\"questionDetails.distributePointsFor \u003d\u003d\u003d FeedbackConstantSumDistributePointsType.DISTRIBUTE_ALL_UNEVENLY \u0026\u0026 !isAllPointsUneven\" class\u003d\"text-danger\"\u003e\u003cspan class\u003d\"fa fa-times\"\u003e\u003c/span\u003e"},{"lineNumber":42,"author":{"gitId":"-"},"content":"        Multiple options are given same points!\u003c/p\u003e"},{"lineNumber":43,"author":{"gitId":"-"},"content":""},{"lineNumber":44,"author":{"gitId":"-"},"content":"      \u003cp *ngIf\u003d\"questionDetails.distributePointsFor \u003d\u003d\u003d FeedbackConstantSumDistributePointsType.DISTRIBUTE_ALL_UNEVENLY \u0026\u0026 isAllPointsUneven\" class\u003d\"text-success\"\u003e\u003cspan class\u003d\"fa fa-check\"\u003e\u003c/span\u003e"},{"lineNumber":45,"author":{"gitId":"-"},"content":"        All allocated points are different!\u003c/p\u003e"},{"lineNumber":46,"author":{"gitId":"-"},"content":""},{"lineNumber":47,"author":{"gitId":"-"},"content":"      \u003cp *ngIf\u003d\"questionDetails.distributePointsFor \u003d\u003d\u003d FeedbackConstantSumDistributePointsType.DISTRIBUTE_SOME_UNEVENLY \u0026\u0026 !isSomePointsUneven\" class\u003d\"text-danger\"\u003e\u003cspan class\u003d\"fa fa-times\"\u003e\u003c/span\u003e"},{"lineNumber":48,"author":{"gitId":"-"},"content":"        All options are given {{ responseDetails.answers[0] }} points. Please allocate different points to at least one option.\u003c/p\u003e"},{"lineNumber":49,"author":{"gitId":"-"},"content":""},{"lineNumber":50,"author":{"gitId":"-"},"content":"      \u003cp *ngIf\u003d\"questionDetails.distributePointsFor \u003d\u003d\u003d FeedbackConstantSumDistributePointsType.DISTRIBUTE_SOME_UNEVENLY \u0026\u0026 isSomePointsUneven\" class\u003d\"text-success\"\u003e\u003cspan class\u003d\"fa fa-check\"\u003e\u003c/span\u003e"},{"lineNumber":51,"author":{"gitId":"-"},"content":"        At least one option has been allocated different number of points.\u003c/p\u003e"},{"lineNumber":52,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":53,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":54,"author":{"gitId":"-"},"content":"\u003c/div\u003e"}],"authorContributionMap":{"weiquu":2,"-":52}},{"path":"src/web/app/components/question-types/question-edit-answer-form/constsum-options-question-edit-answer-form.component.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { Component } from \u0027@angular/core\u0027;"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":3,"author":{"gitId":"-"},"content":"  FeedbackConstantSumDistributePointsType,"},{"lineNumber":4,"author":{"gitId":"-"},"content":"  FeedbackConstantSumQuestionDetails,"},{"lineNumber":5,"author":{"gitId":"-"},"content":"  FeedbackConstantSumResponseDetails,"},{"lineNumber":6,"author":{"gitId":"-"},"content":"} from \u0027../../../../types/api-output\u0027;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":8,"author":{"gitId":"-"},"content":"  DEFAULT_CONSTSUM_OPTIONS_QUESTION_DETAILS,"},{"lineNumber":9,"author":{"gitId":"-"},"content":"  DEFAULT_CONSTSUM_RESPONSE_DETAILS,"},{"lineNumber":10,"author":{"gitId":"-"},"content":"} from \u0027../../../../types/default-question-structs\u0027;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import { QuestionEditAnswerFormComponent } from \u0027./question-edit-answer-form\u0027;"},{"lineNumber":12,"author":{"gitId":"-"},"content":""},{"lineNumber":13,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":14,"author":{"gitId":"-"},"content":" * The constsum question options submission form for a recipient."},{"lineNumber":15,"author":{"gitId":"-"},"content":" */"},{"lineNumber":16,"author":{"gitId":"-"},"content":"@Component({"},{"lineNumber":17,"author":{"gitId":"-"},"content":"  selector: \u0027tm-constsum-options-question-edit-answer-form\u0027,"},{"lineNumber":18,"author":{"gitId":"-"},"content":"  templateUrl: \u0027./constsum-options-question-edit-answer-form.component.html\u0027,"},{"lineNumber":19,"author":{"gitId":"-"},"content":"  styleUrls: [\u0027./constsum-options-question-edit-answer-form.component.scss\u0027],"},{"lineNumber":20,"author":{"gitId":"-"},"content":"})"},{"lineNumber":21,"author":{"gitId":"-"},"content":"export class ConstsumOptionsQuestionEditAnswerFormComponent"},{"lineNumber":22,"author":{"gitId":"-"},"content":"    extends QuestionEditAnswerFormComponent\u003cFeedbackConstantSumQuestionDetails, FeedbackConstantSumResponseDetails\u003e {"},{"lineNumber":23,"author":{"gitId":"-"},"content":""},{"lineNumber":24,"author":{"gitId":"-"},"content":"  // enum"},{"lineNumber":25,"author":{"gitId":"-"},"content":"  FeedbackConstantSumDistributePointsType: typeof FeedbackConstantSumDistributePointsType \u003d"},{"lineNumber":26,"author":{"gitId":"-"},"content":"      FeedbackConstantSumDistributePointsType;"},{"lineNumber":27,"author":{"gitId":"-"},"content":""},{"lineNumber":28,"author":{"gitId":"-"},"content":"  constructor() {"},{"lineNumber":29,"author":{"gitId":"-"},"content":"    super(DEFAULT_CONSTSUM_OPTIONS_QUESTION_DETAILS(), DEFAULT_CONSTSUM_RESPONSE_DETAILS());"},{"lineNumber":30,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":31,"author":{"gitId":"-"},"content":""},{"lineNumber":32,"author":{"gitId":"weiquu"},"content":"  getAriaLabelForOption(option: String): String {"},{"lineNumber":33,"author":{"gitId":"weiquu"},"content":"    const baseAriaLabel: String \u003d this.getAriaLabel();"},{"lineNumber":34,"author":{"gitId":"weiquu"},"content":"    return `${baseAriaLabel} for ${option} Option`;"},{"lineNumber":35,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":36,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":37,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":38,"author":{"gitId":"-"},"content":"   * Assigns a point to the option specified by index."},{"lineNumber":39,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":40,"author":{"gitId":"-"},"content":"  triggerResponse(index: number, event: number): void {"},{"lineNumber":41,"author":{"gitId":"-"},"content":"    let newAnswers: number[] \u003d this.responseDetails.answers.slice();"},{"lineNumber":42,"author":{"gitId":"-"},"content":""},{"lineNumber":43,"author":{"gitId":"-"},"content":"    if (newAnswers.length !\u003d\u003d this.questionDetails.constSumOptions.length) {"},{"lineNumber":44,"author":{"gitId":"-"},"content":"      // initialize answers array on the fly"},{"lineNumber":45,"author":{"gitId":"-"},"content":"      newAnswers \u003d Array(this.questionDetails.constSumOptions.length).fill(0);"},{"lineNumber":46,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":47,"author":{"gitId":"-"},"content":""},{"lineNumber":48,"author":{"gitId":"-"},"content":"    newAnswers[index] \u003d event ? Math.ceil(event) : 0;"},{"lineNumber":49,"author":{"gitId":"-"},"content":"    this.triggerResponseDetailsChange(\u0027answers\u0027, newAnswers);"},{"lineNumber":50,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":51,"author":{"gitId":"-"},"content":""},{"lineNumber":52,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":53,"author":{"gitId":"-"},"content":"   * Gets total required points."},{"lineNumber":54,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":55,"author":{"gitId":"-"},"content":"  get totalRequiredPoints(): number {"},{"lineNumber":56,"author":{"gitId":"-"},"content":"    if (this.questionDetails.pointsPerOption) {"},{"lineNumber":57,"author":{"gitId":"-"},"content":"      return this.questionDetails.points * this.questionDetails.constSumOptions.length;"},{"lineNumber":58,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":59,"author":{"gitId":"-"},"content":"    return this.questionDetails.points;"},{"lineNumber":60,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":61,"author":{"gitId":"-"},"content":""},{"lineNumber":62,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":63,"author":{"gitId":"-"},"content":"   * Gets total answer points."},{"lineNumber":64,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":65,"author":{"gitId":"-"},"content":"  get totalAnsweredPoints(): number {"},{"lineNumber":66,"author":{"gitId":"-"},"content":"    return this.responseDetails.answers.reduce((total: number, curr: number) \u003d\u003e total + curr, 0);"},{"lineNumber":67,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":68,"author":{"gitId":"-"},"content":""},{"lineNumber":69,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":70,"author":{"gitId":"-"},"content":"   * Checks if all points are distributed unevenly."},{"lineNumber":71,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":72,"author":{"gitId":"-"},"content":"  get isAllPointsUneven(): boolean {"},{"lineNumber":73,"author":{"gitId":"-"},"content":"    const set: Set\u003cnumber\u003e \u003d new Set();"},{"lineNumber":74,"author":{"gitId":"-"},"content":"    this.responseDetails.answers.forEach((ans: number) \u003d\u003e set.add(ans));"},{"lineNumber":75,"author":{"gitId":"-"},"content":""},{"lineNumber":76,"author":{"gitId":"-"},"content":"    return set.size \u003d\u003d\u003d this.responseDetails.answers.length;"},{"lineNumber":77,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":78,"author":{"gitId":"-"},"content":""},{"lineNumber":79,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":80,"author":{"gitId":"-"},"content":"   * Checks if some points are distributed unevenly."},{"lineNumber":81,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":82,"author":{"gitId":"-"},"content":"  get isSomePointsUneven(): boolean {"},{"lineNumber":83,"author":{"gitId":"-"},"content":"    if (this.responseDetails.answers.length \u003d\u003d\u003d 1) {"},{"lineNumber":84,"author":{"gitId":"-"},"content":"      return true;"},{"lineNumber":85,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":86,"author":{"gitId":"-"},"content":""},{"lineNumber":87,"author":{"gitId":"-"},"content":"    const set: Set\u003cnumber\u003e \u003d new Set();"},{"lineNumber":88,"author":{"gitId":"-"},"content":"    this.responseDetails.answers.forEach((ans: number) \u003d\u003e set.add(ans));"},{"lineNumber":89,"author":{"gitId":"-"},"content":""},{"lineNumber":90,"author":{"gitId":"-"},"content":"    return set.size !\u003d\u003d 1;"},{"lineNumber":91,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":92,"author":{"gitId":"-"},"content":""},{"lineNumber":93,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":94,"author":{"gitId":"-"},"content":"   * Checks if any of the points are negative."},{"lineNumber":95,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":96,"author":{"gitId":"-"},"content":"  get isAnyPointsNegative(): boolean {"},{"lineNumber":97,"author":{"gitId":"-"},"content":"    return this.responseDetails.answers.reduce((isNegative: boolean, curr: number) \u003d\u003e isNegative || (curr \u003c 0), false);"},{"lineNumber":98,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":99,"author":{"gitId":"-"},"content":""},{"lineNumber":100,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":101,"author":{"gitId":"-"},"content":"   * Checks if any of the points are below the minPoint."},{"lineNumber":102,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":103,"author":{"gitId":"-"},"content":"  get isAnyPointBelowMinimum(): boolean {"},{"lineNumber":104,"author":{"gitId":"-"},"content":"    const comparator : number \u003d this.questionDetails.minPoint ? this.questionDetails.minPoint : 0;"},{"lineNumber":105,"author":{"gitId":"-"},"content":"    return this.responseDetails.answers.reduce((isBelowMinimum: boolean, curr: number) \u003d\u003e"},{"lineNumber":106,"author":{"gitId":"-"},"content":"      isBelowMinimum || (curr \u003c comparator), false);"},{"lineNumber":107,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":108,"author":{"gitId":"-"},"content":""},{"lineNumber":109,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":110,"author":{"gitId":"-"},"content":"   * Checks if any of the points are above the maxPoint."},{"lineNumber":111,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":112,"author":{"gitId":"-"},"content":"  get isAnyPointAboveMaximum(): boolean {"},{"lineNumber":113,"author":{"gitId":"-"},"content":"    const comparator : number \u003d this.questionDetails.maxPoint"},{"lineNumber":114,"author":{"gitId":"-"},"content":"      ? this.questionDetails.maxPoint"},{"lineNumber":115,"author":{"gitId":"-"},"content":"      : this.totalRequiredPoints;"},{"lineNumber":116,"author":{"gitId":"-"},"content":"    return this.responseDetails.answers.reduce((isAboveMaximum: boolean, curr: number) \u003d\u003e"},{"lineNumber":117,"author":{"gitId":"-"},"content":"      isAboveMaximum || (curr \u003e comparator), false);"},{"lineNumber":118,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":119,"author":{"gitId":"-"},"content":""},{"lineNumber":120,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"weiquu":5,"-":115}},{"path":"src/web/app/components/question-types/question-edit-answer-form/constsum-recipients-question-edit-answer-form.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003cdiv\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"form-group\"\u003e"},{"lineNumber":3,"author":{"gitId":"-"},"content":"      \u003cinput type\u003d\"number\" class\u003d\"form-control\""},{"lineNumber":4,"author":{"gitId":"-"},"content":"             [ngModel]\u003d\"responseDetails.answers.length \u003d\u003d\u003d 1 ? responseDetails.answers[0] : \u0027\u0027\""},{"lineNumber":5,"author":{"gitId":"-"},"content":"             (ngModelChange)\u003d\"triggerResponse($event)\""},{"lineNumber":6,"author":{"gitId":"-"},"content":"             [disabled]\u003d\"isDisabled\""},{"lineNumber":7,"author":{"gitId":"-"},"content":"             min\u003d\"0\" step\u003d\"1\""},{"lineNumber":8,"author":{"gitId":"jasonqiu212"},"content":"             tmDisableWheel"},{"lineNumber":9,"author":{"gitId":"jasonqiu212"},"content":"             [attr.aria-label]\u003d\"getAriaLabel()\"\u003e"},{"lineNumber":10,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":11,"author":{"gitId":"-"},"content":"\u003c/div\u003e"}],"authorContributionMap":{"jasonqiu212":2,"-":9}},{"path":"src/web/app/components/question-types/question-edit-answer-form/contribution-question-edit-answer-form.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"row\"\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"col-lg-5 col-md-12 col-sm-6 col-xs-12\"\u003e"},{"lineNumber":3,"author":{"gitId":"-"},"content":"    \u003cselect class\u003d\"form-control form-select\""},{"lineNumber":4,"author":{"gitId":"-"},"content":"            [ngClass]\u003d\"{\u0027color-positive\u0027: responseDetails.answer \u003e\u003d 100,"},{"lineNumber":5,"author":{"gitId":"-"},"content":"              \u0027color-negative\u0027: responseDetails.answer \u003c 100 \u0026\u0026 responseDetails.answer !\u003d\u003d CONTRIBUTION_POINT_NOT_SURE \u0026\u0026 responseDetails.answer !\u003d\u003d CONTRIBUTION_POINT_NOT_SUBMITTED,"},{"lineNumber":6,"author":{"gitId":"-"},"content":"              \u0027fw-bold\u0027: responseDetails.answer \u003d\u003d\u003d 100,"},{"lineNumber":7,"author":{"gitId":"-"},"content":"              \u0027color-black\u0027: responseDetails.answer \u003d\u003d\u003d CONTRIBUTION_POINT_NOT_SURE}\""},{"lineNumber":8,"author":{"gitId":"weiquu"},"content":"            [ngModel]\u003d\"responseDetails.answer\" (ngModelChange)\u003d\"triggerResponseDetailsChange(\u0027answer\u0027, $event)\" [disabled]\u003d\"isDisabled\" [attr.aria-label]\u003d\"getAriaLabel()\"\u003e"},{"lineNumber":9,"author":{"gitId":"-"},"content":"      \u003coption [ngValue]\u003d\"CONTRIBUTION_POINT_NOT_SUBMITTED\"\u003e\u003c/option\u003e"},{"lineNumber":10,"author":{"gitId":"-"},"content":"      \u003coption *ngFor\u003d\"let point of contributionQuestionPoints\" [ngValue]\u003d\"point\""},{"lineNumber":11,"author":{"gitId":"-"},"content":"              [ngClass]\u003d\"{\u0027color-positive\u0027: point \u003e\u003d 100,"},{"lineNumber":12,"author":{"gitId":"-"},"content":"                \u0027color-negative\u0027: point \u003c 100,"},{"lineNumber":13,"author":{"gitId":"-"},"content":"                \u0027fw-bold\u0027: point \u003d\u003d\u003d 100}\"\u003e{{ point | contributionPointDescription }}\u003c/option\u003e"},{"lineNumber":14,"author":{"gitId":"-"},"content":"      \u003coption *ngIf\u003d\"questionDetails.isNotSureAllowed\" [ngValue]\u003d\"CONTRIBUTION_POINT_NOT_SURE\" class\u003d\"color-black\"\u003eNot Sure\u003c/option\u003e"},{"lineNumber":15,"author":{"gitId":"-"},"content":"    \u003c/select\u003e"},{"lineNumber":16,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":17,"author":{"gitId":"-"},"content":"\u003c/div\u003e"}],"authorContributionMap":{"weiquu":1,"-":16}},{"path":"src/web/app/components/question-types/question-edit-answer-form/contribution-question-edit-answer-form.component.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"weiquu"},"content":"import { Component } from \u0027@angular/core\u0027;"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":3,"author":{"gitId":"-"},"content":"  FeedbackContributionQuestionDetails,"},{"lineNumber":4,"author":{"gitId":"-"},"content":"  FeedbackContributionResponseDetails,"},{"lineNumber":5,"author":{"gitId":"-"},"content":"} from \u0027../../../../types/api-output\u0027;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":7,"author":{"gitId":"-"},"content":"  DEFAULT_CONTRIBUTION_QUESTION_DETAILS,"},{"lineNumber":8,"author":{"gitId":"-"},"content":"  DEFAULT_CONTRIBUTION_RESPONSE_DETAILS,"},{"lineNumber":9,"author":{"gitId":"-"},"content":"} from \u0027../../../../types/default-question-structs\u0027;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":11,"author":{"gitId":"-"},"content":"  CONTRIBUTION_POINT_NOT_SUBMITTED,"},{"lineNumber":12,"author":{"gitId":"-"},"content":"  CONTRIBUTION_POINT_NOT_SURE,"},{"lineNumber":13,"author":{"gitId":"-"},"content":"} from \u0027../../../../types/feedback-response-details\u0027;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import { QuestionEditAnswerFormComponent } from \u0027./question-edit-answer-form\u0027;"},{"lineNumber":15,"author":{"gitId":"-"},"content":""},{"lineNumber":16,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":17,"author":{"gitId":"-"},"content":" * The contribution question submission form for a recipient."},{"lineNumber":18,"author":{"gitId":"-"},"content":" */"},{"lineNumber":19,"author":{"gitId":"-"},"content":"@Component({"},{"lineNumber":20,"author":{"gitId":"-"},"content":"  selector: \u0027tm-contribution-question-edit-answer-form\u0027,"},{"lineNumber":21,"author":{"gitId":"-"},"content":"  templateUrl: \u0027./contribution-question-edit-answer-form.component.html\u0027,"},{"lineNumber":22,"author":{"gitId":"-"},"content":"  styleUrls: [\u0027./contribution-question-edit-answer-form.component.scss\u0027],"},{"lineNumber":23,"author":{"gitId":"-"},"content":"})"},{"lineNumber":24,"author":{"gitId":"-"},"content":"export class ContributionQuestionEditAnswerFormComponent"},{"lineNumber":25,"author":{"gitId":"-"},"content":"    extends QuestionEditAnswerFormComponent"},{"lineNumber":26,"author":{"gitId":"-"},"content":"        \u003cFeedbackContributionQuestionDetails, FeedbackContributionResponseDetails\u003e {"},{"lineNumber":27,"author":{"gitId":"-"},"content":""},{"lineNumber":28,"author":{"gitId":"-"},"content":"  CONTRIBUTION_POINT_NOT_SUBMITTED: number \u003d CONTRIBUTION_POINT_NOT_SUBMITTED;"},{"lineNumber":29,"author":{"gitId":"-"},"content":"  CONTRIBUTION_POINT_NOT_SURE: number \u003d CONTRIBUTION_POINT_NOT_SURE;"},{"lineNumber":30,"author":{"gitId":"-"},"content":""},{"lineNumber":31,"author":{"gitId":"weiquu"},"content":"  constructor() {"},{"lineNumber":32,"author":{"gitId":"-"},"content":"    super(DEFAULT_CONTRIBUTION_QUESTION_DETAILS(), DEFAULT_CONTRIBUTION_RESPONSE_DETAILS());"},{"lineNumber":33,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":34,"author":{"gitId":"-"},"content":""},{"lineNumber":35,"author":{"gitId":"-"},"content":"  get contributionQuestionPoints(): number[] {"},{"lineNumber":36,"author":{"gitId":"-"},"content":"    const points: number[] \u003d [];"},{"lineNumber":37,"author":{"gitId":"-"},"content":""},{"lineNumber":38,"author":{"gitId":"-"},"content":"    points.push(100);"},{"lineNumber":39,"author":{"gitId":"-"},"content":""},{"lineNumber":40,"author":{"gitId":"-"},"content":"    for (let i: number \u003d 200; i \u003e\u003d 0; i -\u003d 5) {"},{"lineNumber":41,"author":{"gitId":"-"},"content":"      // Do not add \u0027Equal Share\u0027 as we added it at the top"},{"lineNumber":42,"author":{"gitId":"-"},"content":"      if (i \u003d\u003d\u003d 100) {"},{"lineNumber":43,"author":{"gitId":"-"},"content":"        continue;"},{"lineNumber":44,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":45,"author":{"gitId":"-"},"content":""},{"lineNumber":46,"author":{"gitId":"-"},"content":"      points.push(i);"},{"lineNumber":47,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":48,"author":{"gitId":"-"},"content":""},{"lineNumber":49,"author":{"gitId":"-"},"content":"    return points;"},{"lineNumber":50,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":51,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"weiquu":2,"-":49}},{"path":"src/web/app/components/question-types/question-edit-answer-form/mcq-question-edit-answer-form.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"jasonqiu212"},"content":"\u003ctr [attr.aria-label]\u003d\"getAriaLabel()\"\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  \u003ctd\u003e"},{"lineNumber":3,"author":{"gitId":"-"},"content":"    \u003cdiv *ngIf\u003d\"!questionDetails.questionDropdownEnabled\"\u003e"},{"lineNumber":4,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"radio\" *ngFor\u003d\"let num of questionDetails.mcqChoices; let i \u003d index;\"\u003e"},{"lineNumber":5,"author":{"gitId":"-"},"content":"        \u003clabel class\u003d\"margin-right-15px\"\u003e"},{"lineNumber":6,"author":{"gitId":"-"},"content":"          \u003cinput type\u003d\"radio\" class\u003d\"margin-right-15px\" name\u003d\"mcq-{{ id }}\" [checked]\u003d\"isMcqOptionSelected[i]\""},{"lineNumber":7,"author":{"gitId":"-"},"content":"                 (click)\u003d\"updateSelectedMcqOption(i)\" [disabled]\u003d\"isDisabled\"\u003e"},{"lineNumber":8,"author":{"gitId":"-"},"content":"          \u003cspan class\u003d\"option-text\" id\u003d\"radioOptionSpan\" [innerHTML]\u003d\"questionDetails.mcqChoices[i] | safeHtml\"\u003e\u003c/span\u003e"},{"lineNumber":9,"author":{"gitId":"-"},"content":"        \u003c/label\u003e"},{"lineNumber":10,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":11,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":12,"author":{"gitId":"-"},"content":"    \u003cdiv *ngIf\u003d\"questionDetails.questionDropdownEnabled\" \u003e"},{"lineNumber":13,"author":{"gitId":"-"},"content":"      {{updateParentCss(true)}}"},{"lineNumber":14,"author":{"gitId":"-"},"content":"      \u003cselect id\u003d\"dropdown-option-select\" class\u003d\"form-control form-select margin-bottom-8px\" [(ngModel)]\u003d\"valueSelected\" (change)\u003d\"updateSelectedMcqDropdownOption()\"\u003e"},{"lineNumber":15,"author":{"gitId":"-"},"content":"        \u003coption value\u003d\"\"\u003e\u003c/option\u003e"},{"lineNumber":16,"author":{"gitId":"-"},"content":"        \u003coption *ngFor\u003d\"let num of questionDetails.mcqChoices; let i \u003d index;\""},{"lineNumber":17,"author":{"gitId":"-"},"content":"                [ngValue]\u003d\"questionDetails.mcqChoices[i]\""},{"lineNumber":18,"author":{"gitId":"-"},"content":"                [selected]\u003d\"isMcqOptionSelected[i]\" [disabled]\u003d\"isDisabled\"\u003e{{ questionDetails.mcqChoices[i] }}\u003c/option\u003e"},{"lineNumber":19,"author":{"gitId":"-"},"content":"      \u003c/select\u003e"},{"lineNumber":20,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":21,"author":{"gitId":"-"},"content":"    \u003cdiv id\u003d\"other-option\" class\u003d\"radio\" *ngIf\u003d\"questionDetails.otherEnabled\"\u003e"},{"lineNumber":22,"author":{"gitId":"-"},"content":"      \u003clabel class\u003d\"margin-right-15px\"\u003e"},{"lineNumber":23,"author":{"gitId":"-"},"content":"        \u003cinput type\u003d\"radio\" class\u003d\"margin-right-15px\" name\u003d\"mcq-{{ id }}\" [checked]\u003d\"responseDetails.isOther\""},{"lineNumber":24,"author":{"gitId":"-"},"content":"               (click)\u003d\"updateIsOtherOption()\" [disabled]\u003d\"isDisabled\"\u003e"},{"lineNumber":25,"author":{"gitId":"-"},"content":"        \u003cstrong\u003eOther\u003c/strong\u003e"},{"lineNumber":26,"author":{"gitId":"-"},"content":"      \u003c/label\u003e"},{"lineNumber":27,"author":{"gitId":"-"},"content":"      \u003cinput  #inputTextBoxOther class\u003d\"form-control\" style\u003d\"display: inline; width: 60%;\" type\u003d\"text\" [disabled]\u003d\"!responseDetails.isOther || isDisabled\""},{"lineNumber":28,"author":{"gitId":"-"},"content":"             [ngModel]\u003d\"responseDetails.otherFieldContent\""},{"lineNumber":29,"author":{"gitId":"-"},"content":"             (ngModelChange)\u003d\"triggerResponseDetailsChange(\u0027otherFieldContent\u0027, $event)\"\u003e"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":31,"author":{"gitId":"-"},"content":"  \u003c/td\u003e"},{"lineNumber":32,"author":{"gitId":"-"},"content":"\u003c/tr\u003e"}],"authorContributionMap":{"jasonqiu212":1,"-":31}},{"path":"src/web/app/components/question-types/question-edit-answer-form/msq-question-edit-answer-form.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"weiquu"},"content":"\u003ctr [attr.aria-label]\u003d\"getAriaLabel()\"\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  \u003ctd\u003e"},{"lineNumber":3,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"check-box\" *ngFor\u003d\"let num of questionDetails.msqChoices; let i \u003d index;\"\u003e"},{"lineNumber":4,"author":{"gitId":"-"},"content":"      \u003clabel class\u003d\"margin-right-15px\"\u003e"},{"lineNumber":5,"author":{"gitId":"-"},"content":"        \u003cinput type\u003d\"checkbox\" class\u003d\"margin-right-15px\" [checked]\u003d\"isMsqOptionSelected[i]\""},{"lineNumber":6,"author":{"gitId":"-"},"content":"               (click)\u003d\"updateSelectedAnswers(i)\" [disabled]\u003d\"isDisabled\"\u003e"},{"lineNumber":7,"author":{"gitId":"-"},"content":"        \u003cstrong\u003e{{ questionDetails.msqChoices[i] }}\u003c/strong\u003e"},{"lineNumber":8,"author":{"gitId":"-"},"content":"      \u003c/label\u003e"},{"lineNumber":9,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":10,"author":{"gitId":"-"},"content":"    \u003cdiv id\u003d\"other-option\" class\u003d\"check-box\" *ngIf\u003d\"questionDetails.otherEnabled\"\u003e"},{"lineNumber":11,"author":{"gitId":"-"},"content":"      \u003clabel class\u003d\"margin-right-15px\"\u003e"},{"lineNumber":12,"author":{"gitId":"-"},"content":"        \u003cinput type\u003d\"checkbox\" class\u003d\"margin-right-15px\" [checked]\u003d\"responseDetails.isOther\""},{"lineNumber":13,"author":{"gitId":"-"},"content":"               (click)\u003d\"updateIsOtherOption()\" [disabled]\u003d\"isDisabled\"\u003e"},{"lineNumber":14,"author":{"gitId":"-"},"content":"        \u003cstrong\u003eOther\u003c/strong\u003e"},{"lineNumber":15,"author":{"gitId":"-"},"content":"      \u003c/label\u003e"},{"lineNumber":16,"author":{"gitId":"-"},"content":"      \u003cinput #inputTextBoxOther class\u003d\"form-control\" style\u003d\"display: inline; width: 60%;\" type\u003d\"text\" [disabled]\u003d\"!responseDetails.isOther || isDisabled\""},{"lineNumber":17,"author":{"gitId":"-"},"content":"             [ngModel]\u003d\"responseDetails.otherFieldContent\""},{"lineNumber":18,"author":{"gitId":"-"},"content":"             (ngModelChange)\u003d\"updateOtherAnswerField($event)\"\u003e"},{"lineNumber":19,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":20,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"check-box\" *ngIf\u003d\"questionDetails.minSelectableChoices \u003d\u003d\u003d NO_VALUE\"\u003e"},{"lineNumber":21,"author":{"gitId":"-"},"content":"      \u003clabel class\u003d\"margin-right-15px\"\u003e"},{"lineNumber":22,"author":{"gitId":"-"},"content":"        \u003cinput type\u003d\"checkbox\" class\u003d\"margin-right-15px\" [checked]\u003d\"isNoneOfTheAboveEnabled\""},{"lineNumber":23,"author":{"gitId":"-"},"content":"               (click)\u003d\"updateNoneOfTheAbove()\" [disabled]\u003d\"isDisabled\"\u003e"},{"lineNumber":24,"author":{"gitId":"-"},"content":"        \u003cstrong\u003eNone of the above\u003c/strong\u003e"},{"lineNumber":25,"author":{"gitId":"-"},"content":"      \u003c/label\u003e"},{"lineNumber":26,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":27,"author":{"gitId":"-"},"content":"  \u003c/td\u003e"},{"lineNumber":28,"author":{"gitId":"-"},"content":"\u003c/tr\u003e"}],"authorContributionMap":{"weiquu":1,"-":27}},{"path":"src/web/app/components/question-types/question-edit-answer-form/num-scale-question-edit-answer-form.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"row text-start\"\u003e"},{"lineNumber":2,"author":{"gitId":"weiquu"},"content":"  \u003cdiv class\u003d\"col-md-3 col-xs-5\"\u003e"},{"lineNumber":3,"author":{"gitId":"-"},"content":"    \u003cinput type\u003d\"number\" class\u003d\"form-control\" min\u003d\"{{ questionDetails.minScale }}\" max\u003d\"{{ questionDetails.maxScale }}\" step\u003d\"{{ questionDetails.step }}\" tmDisableWheel"},{"lineNumber":4,"author":{"gitId":"jasonqiu212"},"content":"           [ngModel]\u003d\"responseDetails.answer \u003d\u003d\u003d NUMERICAL_SCALE_ANSWER_NOT_SUBMITTED ? \u0027\u0027 : responseDetails.answer\" (ngModelChange)\u003d\"triggerResponseDetailsChange(\u0027answer\u0027, $event)\" [disabled]\u003d\"isDisabled\" [attr.aria-label]\u003d\"getAriaLabel()\"\u003e"},{"lineNumber":5,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":6,"author":{"gitId":"-"},"content":"  \u003cdiv id\u003d\"possible-values\" class\u003d\"col-md-9 col-xs-6 text-secondary\"\u003e"},{"lineNumber":7,"author":{"gitId":"-"},"content":"    Possible values: {{ possibleValues }}"},{"lineNumber":8,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":9,"author":{"gitId":"-"},"content":"\u003c/div\u003e"},{"lineNumber":10,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"row mt-1\"\u003e"},{"lineNumber":11,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"col-12\"\u003e"},{"lineNumber":12,"author":{"gitId":"-"},"content":"    \u003cp *ngIf\u003d\"!isValidPossibleValue(responseDetails.answer) \u0026\u0026 responseDetails.answer !\u003d\u003d NUMERICAL_SCALE_ANSWER_NOT_SUBMITTED\" class\u003d\"text-danger\"\u003eThe scale entered is not a possible value.\u003c/p\u003e"},{"lineNumber":13,"author":{"gitId":"-"},"content":"    \u003cp *ngIf\u003d\"responseDetails.answer \u003d\u003d\u003d NUMERICAL_SCALE_ANSWER_NOT_SUBMITTED\" class\u003d\"text-info\"\u003ePlease enter a scale number.\u003c/p\u003e"},{"lineNumber":14,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":15,"author":{"gitId":"-"},"content":"\u003c/div\u003e"},{"lineNumber":16,"author":{"gitId":"-"},"content":"\u003cbr\u003e"}],"authorContributionMap":{"jasonqiu212":1,"weiquu":1,"-":14}},{"path":"src/web/app/components/question-types/question-edit-answer-form/question-edit-answer-form.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { Directive, EventEmitter, Input, Output } from \u0027@angular/core\u0027;"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import { FeedbackQuestionDetails, FeedbackResponseDetails } from \u0027../../../../types/api-output\u0027;"},{"lineNumber":3,"author":{"gitId":"-"},"content":""},{"lineNumber":4,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":5,"author":{"gitId":"-"},"content":" * The abstract recipient submission form."},{"lineNumber":6,"author":{"gitId":"-"},"content":" */"},{"lineNumber":7,"author":{"gitId":"-"},"content":"@Directive()"},{"lineNumber":8,"author":{"gitId":"-"},"content":"// eslint-disable-next-line @angular-eslint/directive-class-suffix"},{"lineNumber":9,"author":{"gitId":"-"},"content":"export abstract class QuestionEditAnswerFormComponent\u003c"},{"lineNumber":10,"author":{"gitId":"-"},"content":"    Q extends FeedbackQuestionDetails, R extends FeedbackResponseDetails\u003e {"},{"lineNumber":11,"author":{"gitId":"-"},"content":""},{"lineNumber":12,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":13,"author":{"gitId":"-"},"content":"  isDisabled: boolean \u003d false;"},{"lineNumber":14,"author":{"gitId":"-"},"content":""},{"lineNumber":15,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":16,"author":{"gitId":"-"},"content":"  questionDetails: Q;"},{"lineNumber":17,"author":{"gitId":"-"},"content":""},{"lineNumber":18,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":19,"author":{"gitId":"-"},"content":"  responseDetails: R;"},{"lineNumber":20,"author":{"gitId":"-"},"content":""},{"lineNumber":21,"author":{"gitId":"weiquu"},"content":"  @Input()"},{"lineNumber":22,"author":{"gitId":"weiquu"},"content":"  recipient: String \u003d \u0027\u0027;"},{"lineNumber":23,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":24,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":25,"author":{"gitId":"-"},"content":"  responseDetailsChange: EventEmitter\u003cFeedbackResponseDetails\u003e \u003d new EventEmitter();"},{"lineNumber":26,"author":{"gitId":"-"},"content":""},{"lineNumber":27,"author":{"gitId":"-"},"content":"  protected constructor(questionDetails: Q, responseDetails: R) {"},{"lineNumber":28,"author":{"gitId":"-"},"content":"    this.questionDetails \u003d questionDetails;"},{"lineNumber":29,"author":{"gitId":"-"},"content":"    this.responseDetails \u003d responseDetails;"},{"lineNumber":30,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":31,"author":{"gitId":"-"},"content":""},{"lineNumber":32,"author":{"gitId":"weiquu"},"content":"  getAriaLabel(): String {"},{"lineNumber":33,"author":{"gitId":"weiquu"},"content":"    if (this.recipient \u003d\u003d\u003d \u0027\u0027 || this.recipient \u003d\u003d\u003d \u0027%GENERAL%\u0027 || this.recipient \u003d\u003d\u003d \u0027Myself\u0027) {"},{"lineNumber":34,"author":{"gitId":"weiquu"},"content":"      return \u0027Response\u0027;"},{"lineNumber":35,"author":{"gitId":"weiquu"},"content":"    }"},{"lineNumber":36,"author":{"gitId":"weiquu"},"content":"    if (this.recipient \u003d\u003d\u003d \u0027Unknown\u0027) {"},{"lineNumber":37,"author":{"gitId":"weiquu"},"content":"      return \u0027Response for To-Be-Selected\u0027;"},{"lineNumber":38,"author":{"gitId":"weiquu"},"content":"    }"},{"lineNumber":39,"author":{"gitId":"weiquu"},"content":"    return `Response for ${this.recipient}`;"},{"lineNumber":40,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":41,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":42,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":43,"author":{"gitId":"-"},"content":"   * Triggers the change of the response details for the form."},{"lineNumber":44,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":45,"author":{"gitId":"-"},"content":"  triggerResponseDetailsChange(field: string, data: any): void {"},{"lineNumber":46,"author":{"gitId":"-"},"content":"    this.responseDetailsChange.emit({ ...this.responseDetails, [field]: data });"},{"lineNumber":47,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":48,"author":{"gitId":"-"},"content":""},{"lineNumber":49,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":50,"author":{"gitId":"-"},"content":"   * Triggers changes of the response details for the form."},{"lineNumber":51,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":52,"author":{"gitId":"-"},"content":"  triggerResponseDetailsChangeBatch(obj: { [key: string]: any }): void {"},{"lineNumber":53,"author":{"gitId":"-"},"content":"    this.responseDetailsChange.emit({ ...this.responseDetails, ...obj });"},{"lineNumber":54,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":55,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"weiquu":13,"-":42}},{"path":"src/web/app/components/question-types/question-edit-answer-form/rank-options-question-edit-answer-form.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"jasonqiu212"},"content":"\u003cdiv [attr.aria-label]\u003d\"getAriaLabel()\"\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"form-group row text-start\" *ngFor\u003d\"let num of questionDetails.options; let i \u003d index;\"\u003e"},{"lineNumber":3,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"col-md-5 col-xs-12 text-md-end col-form-label\"\u003e"},{"lineNumber":4,"author":{"gitId":"-"},"content":"      \u003cstrong\u003e{{ questionDetails.options[i] }}\u003c/strong\u003e"},{"lineNumber":5,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":6,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"col-md-7 col-xs-12 text-md-start\"\u003e"},{"lineNumber":7,"author":{"gitId":"-"},"content":"      \u003cselect class\u003d\"form-control form-select\" [ngModel]\u003d\"responseDetails.answers[i]\""},{"lineNumber":8,"author":{"gitId":"jasonqiu212"},"content":"              (ngModelChange)\u003d\"triggerResponse(i, $event)\" [disabled]\u003d\"isDisabled\" [attr.aria-label]\u003d\"getAriaLabelForOption(questionDetails.options[i])\"\u003e"},{"lineNumber":9,"author":{"gitId":"-"},"content":"        \u003coption [ngValue]\u003d\"RANK_OPTIONS_ANSWER_NOT_SUBMITTED\"\u003e\u003c/option\u003e"},{"lineNumber":10,"author":{"gitId":"-"},"content":"        \u003coption *ngFor\u003d\"let rank of ranksToBeAssigned\" [ngValue]\u003d\"rank\"\u003e{{ rank }}\u003c/option\u003e"},{"lineNumber":11,"author":{"gitId":"-"},"content":"      \u003c/select\u003e"},{"lineNumber":12,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":13,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":14,"author":{"gitId":"-"},"content":""},{"lineNumber":15,"author":{"gitId":"-"},"content":"  \u003cdiv\u003e"},{"lineNumber":16,"author":{"gitId":"-"},"content":"    \u003cp *ngIf\u003d\"!questionDetails.areDuplicatesAllowed \u0026\u0026 isSameRanksAssigned\" class\u003d\"text-danger\"\u003e\u003cspan class\u003d\"fa fa-times\"\u003e\u003c/span\u003e"},{"lineNumber":17,"author":{"gitId":"-"},"content":"      The same rank should not be given multiple times.\u003c/p\u003e"},{"lineNumber":18,"author":{"gitId":"-"},"content":"    \u003cp *ngIf\u003d\"isNoOptionRanked\" class\u003d\"text-info\"\u003e\u003cspan class\u003d\"fa fa-info-circle\"\u003e\u003c/span\u003e"},{"lineNumber":19,"author":{"gitId":"-"},"content":"      Please rank the above options.\u003c/p\u003e"},{"lineNumber":20,"author":{"gitId":"-"},"content":"    \u003cp *ngIf\u003d\"isMinOptionsEnabled \u0026\u0026 isOptionsRankedLessThanMin\" class\u003d\"text-danger\"\u003e\u003cspan class\u003d\"fa fa-times\"\u003e\u003c/span\u003e"},{"lineNumber":21,"author":{"gitId":"-"},"content":"      You need to rank at least {{ questionDetails.minOptionsToBeRanked }} options.\u003c/p\u003e"},{"lineNumber":22,"author":{"gitId":"-"},"content":"    \u003cp *ngIf\u003d\"isMaxOptionsEnabled \u0026\u0026 isOptionsRankedMoreThanMax\" class\u003d\"text-danger\"\u003e\u003cspan class\u003d\"fa fa-times\"\u003e\u003c/span\u003e"},{"lineNumber":23,"author":{"gitId":"-"},"content":"      Rank no more than {{questionDetails.maxOptionsToBeRanked}} options.\u003c/p\u003e"},{"lineNumber":24,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":25,"author":{"gitId":"-"},"content":"\u003c/div\u003e"}],"authorContributionMap":{"jasonqiu212":2,"-":23}},{"path":"src/web/app/components/question-types/question-edit-answer-form/rank-options-question-edit-answer-form.component.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { Component } from \u0027@angular/core\u0027;"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import { FeedbackRankOptionsQuestionDetails, FeedbackRankOptionsResponseDetails } from \u0027../../../../types/api-output\u0027;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":4,"author":{"gitId":"-"},"content":"  DEFAULT_RANK_OPTIONS_QUESTION_DETAILS,"},{"lineNumber":5,"author":{"gitId":"-"},"content":"  DEFAULT_RANK_OPTIONS_RESPONSE_DETAILS,"},{"lineNumber":6,"author":{"gitId":"-"},"content":"} from \u0027../../../../types/default-question-structs\u0027;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import { NO_VALUE, RANK_OPTIONS_ANSWER_NOT_SUBMITTED } from \u0027../../../../types/feedback-response-details\u0027;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import { QuestionEditAnswerFormComponent } from \u0027./question-edit-answer-form\u0027;"},{"lineNumber":9,"author":{"gitId":"-"},"content":""},{"lineNumber":10,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":11,"author":{"gitId":"-"},"content":" * The Rank options question submission form for a recipient."},{"lineNumber":12,"author":{"gitId":"-"},"content":" */"},{"lineNumber":13,"author":{"gitId":"-"},"content":"@Component({"},{"lineNumber":14,"author":{"gitId":"-"},"content":"  selector: \u0027tm-rank-options-question-edit-answer-form\u0027,"},{"lineNumber":15,"author":{"gitId":"-"},"content":"  templateUrl: \u0027./rank-options-question-edit-answer-form.component.html\u0027,"},{"lineNumber":16,"author":{"gitId":"-"},"content":"  styleUrls: [\u0027./rank-options-question-edit-answer-form.component.scss\u0027],"},{"lineNumber":17,"author":{"gitId":"-"},"content":"})"},{"lineNumber":18,"author":{"gitId":"-"},"content":"export class RankOptionsQuestionEditAnswerFormComponent"},{"lineNumber":19,"author":{"gitId":"-"},"content":"    extends QuestionEditAnswerFormComponent\u003cFeedbackRankOptionsQuestionDetails, FeedbackRankOptionsResponseDetails\u003e {"},{"lineNumber":20,"author":{"gitId":"-"},"content":""},{"lineNumber":21,"author":{"gitId":"-"},"content":"  readonly RANK_OPTIONS_ANSWER_NOT_SUBMITTED: number \u003d RANK_OPTIONS_ANSWER_NOT_SUBMITTED;"},{"lineNumber":22,"author":{"gitId":"-"},"content":""},{"lineNumber":23,"author":{"gitId":"-"},"content":"  constructor() {"},{"lineNumber":24,"author":{"gitId":"-"},"content":"    super(DEFAULT_RANK_OPTIONS_QUESTION_DETAILS(), DEFAULT_RANK_OPTIONS_RESPONSE_DETAILS());"},{"lineNumber":25,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":26,"author":{"gitId":"-"},"content":""},{"lineNumber":27,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":28,"author":{"gitId":"-"},"content":"   * Populates the possible Ranks that can be assigned."},{"lineNumber":29,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":30,"author":{"gitId":"-"},"content":"  get ranksToBeAssigned(): number[] {"},{"lineNumber":31,"author":{"gitId":"-"},"content":"    const ranks: number[] \u003d [];"},{"lineNumber":32,"author":{"gitId":"-"},"content":"    for (let i: number \u003d 1; i \u003c\u003d this.questionDetails.options.length; i +\u003d 1) {"},{"lineNumber":33,"author":{"gitId":"-"},"content":"      ranks.push(i);"},{"lineNumber":34,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":35,"author":{"gitId":"-"},"content":"    return ranks;"},{"lineNumber":36,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":37,"author":{"gitId":"-"},"content":""},{"lineNumber":38,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":39,"author":{"gitId":"-"},"content":"   * Checks if any one option has been Ranked."},{"lineNumber":40,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":41,"author":{"gitId":"-"},"content":"  get isNoOptionRanked(): boolean {"},{"lineNumber":42,"author":{"gitId":"-"},"content":"    const isAtLeastOneOptionRanked: boolean \u003d this.responseDetails.answers"},{"lineNumber":43,"author":{"gitId":"-"},"content":"        .some((rank: number) \u003d\u003e rank !\u003d\u003d RANK_OPTIONS_ANSWER_NOT_SUBMITTED);"},{"lineNumber":44,"author":{"gitId":"-"},"content":"    return !isAtLeastOneOptionRanked;"},{"lineNumber":45,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":46,"author":{"gitId":"-"},"content":""},{"lineNumber":47,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":48,"author":{"gitId":"-"},"content":"   * Assigns a Rank to the option specified by index."},{"lineNumber":49,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":50,"author":{"gitId":"-"},"content":"  triggerResponse(index: number, event: any): void {"},{"lineNumber":51,"author":{"gitId":"-"},"content":"    let newAnswers: number[] \u003d this.responseDetails.answers.slice();"},{"lineNumber":52,"author":{"gitId":"-"},"content":"    if (newAnswers.length !\u003d\u003d this.questionDetails.options.length) {"},{"lineNumber":53,"author":{"gitId":"-"},"content":"      // initialize answers array on the fly"},{"lineNumber":54,"author":{"gitId":"-"},"content":"      newAnswers \u003d Array(this.questionDetails.options.length).fill(RANK_OPTIONS_ANSWER_NOT_SUBMITTED);"},{"lineNumber":55,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":56,"author":{"gitId":"-"},"content":""},{"lineNumber":57,"author":{"gitId":"-"},"content":"    newAnswers[index] \u003d event;"},{"lineNumber":58,"author":{"gitId":"-"},"content":"    this.triggerResponseDetailsChange(\u0027answers\u0027, newAnswers);"},{"lineNumber":59,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":60,"author":{"gitId":"-"},"content":""},{"lineNumber":61,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":62,"author":{"gitId":"-"},"content":"   * Checks if the answer has same Ranks for different options."},{"lineNumber":63,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":64,"author":{"gitId":"-"},"content":"  get isSameRanksAssigned(): boolean {"},{"lineNumber":65,"author":{"gitId":"-"},"content":"    const responseCopy: number[] \u003d [];"},{"lineNumber":66,"author":{"gitId":"-"},"content":"    for (const response of this.responseDetails.answers) {"},{"lineNumber":67,"author":{"gitId":"-"},"content":"      if (response !\u003d\u003d RANK_OPTIONS_ANSWER_NOT_SUBMITTED) {"},{"lineNumber":68,"author":{"gitId":"-"},"content":"        responseCopy.push(response);"},{"lineNumber":69,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":70,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":71,"author":{"gitId":"-"},"content":"    return (new Set(responseCopy)).size !\u003d\u003d responseCopy.length \u0026\u0026 responseCopy.length !\u003d\u003d 0;"},{"lineNumber":72,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":73,"author":{"gitId":"-"},"content":""},{"lineNumber":74,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":75,"author":{"gitId":"-"},"content":"   * Checks if a minimum number of options needs to be Ranked."},{"lineNumber":76,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":77,"author":{"gitId":"-"},"content":"  get isMinOptionsEnabled(): boolean {"},{"lineNumber":78,"author":{"gitId":"-"},"content":"    return this.questionDetails.minOptionsToBeRanked !\u003d\u003d NO_VALUE;"},{"lineNumber":79,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":80,"author":{"gitId":"-"},"content":""},{"lineNumber":81,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":82,"author":{"gitId":"-"},"content":"   * Checks if a maximum number of options can be Ranked."},{"lineNumber":83,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":84,"author":{"gitId":"-"},"content":"  get isMaxOptionsEnabled(): boolean {"},{"lineNumber":85,"author":{"gitId":"-"},"content":"    return this.questionDetails.maxOptionsToBeRanked !\u003d\u003d NO_VALUE;"},{"lineNumber":86,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":87,"author":{"gitId":"-"},"content":""},{"lineNumber":88,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":89,"author":{"gitId":"-"},"content":"   * Checks if the options Ranked is less than the minimum required."},{"lineNumber":90,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":91,"author":{"gitId":"-"},"content":"  get isOptionsRankedLessThanMin(): boolean {"},{"lineNumber":92,"author":{"gitId":"-"},"content":"    const numberOfOptionsRanked: number \u003d this.responseDetails.answers"},{"lineNumber":93,"author":{"gitId":"-"},"content":"        .filter((rank: number) \u003d\u003e rank !\u003d\u003d RANK_OPTIONS_ANSWER_NOT_SUBMITTED).length;"},{"lineNumber":94,"author":{"gitId":"-"},"content":"    return (numberOfOptionsRanked \u003c this.questionDetails.minOptionsToBeRanked \u0026\u0026 numberOfOptionsRanked \u003e 0);"},{"lineNumber":95,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":96,"author":{"gitId":"-"},"content":""},{"lineNumber":97,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":98,"author":{"gitId":"-"},"content":"   * Checks if the options Ranked is more than the maximum required."},{"lineNumber":99,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":100,"author":{"gitId":"-"},"content":"  get isOptionsRankedMoreThanMax(): boolean {"},{"lineNumber":101,"author":{"gitId":"-"},"content":"    const numberOfOptionsRanked: number \u003d this.responseDetails.answers"},{"lineNumber":102,"author":{"gitId":"-"},"content":"        .filter((rank: number) \u003d\u003e rank !\u003d\u003d RANK_OPTIONS_ANSWER_NOT_SUBMITTED).length;"},{"lineNumber":103,"author":{"gitId":"-"},"content":"    return numberOfOptionsRanked \u003e this.questionDetails.maxOptionsToBeRanked;"},{"lineNumber":104,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":105,"author":{"gitId":"jasonqiu212"},"content":""},{"lineNumber":106,"author":{"gitId":"jasonqiu212"},"content":"  getAriaLabelForOption(option: String): String {"},{"lineNumber":107,"author":{"gitId":"jasonqiu212"},"content":"    const baseAriaLabel: String \u003d this.getAriaLabel();"},{"lineNumber":108,"author":{"gitId":"jasonqiu212"},"content":"    return `${baseAriaLabel} for ${option} Option`;"},{"lineNumber":109,"author":{"gitId":"jasonqiu212"},"content":"  }"},{"lineNumber":110,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"jasonqiu212":5,"-":105}},{"path":"src/web/app/components/question-types/question-edit-answer-form/rank-recipients-question-edit-answer-form.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"margin-bottom-15px\"\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  \u003cselect class\u003d\"form-control form-select\" [ngModel]\u003d\"responseDetails.answer\""},{"lineNumber":3,"author":{"gitId":"weiquu"},"content":"          (ngModelChange)\u003d\"triggerResponseDetailsChange(\u0027answer\u0027, $event)\" [disabled]\u003d\"isDisabled\" [attr.aria-label]\u003d\"getAriaLabel()\"\u003e"},{"lineNumber":4,"author":{"gitId":"-"},"content":"    \u003coption [ngValue]\u003d\"RANK_RECIPIENTS_ANSWER_NOT_SUBMITTED\"\u003e\u003c/option\u003e"},{"lineNumber":5,"author":{"gitId":"-"},"content":"    \u003coption *ngFor\u003d\"let rank of ranksToBeAssigned\" [ngValue]\u003d\"rank\"\u003e{{ rank }}\u003c/option\u003e"},{"lineNumber":6,"author":{"gitId":"-"},"content":"  \u003c/select\u003e"},{"lineNumber":7,"author":{"gitId":"-"},"content":"\u003c/div\u003e"}],"authorContributionMap":{"weiquu":1,"-":6}},{"path":"src/web/app/components/question-types/question-edit-answer-form/rubric-question-edit-answer-form.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"jasonqiu212"},"content":"\u003ctable class\u003d\"table table-bordered desktop-view\" [attr.aria-label]\u003d\"getAriaLabel()\"\u003e"},{"lineNumber":2,"author":{"gitId":"jasonqiu212"},"content":"  \u003cthead\u003e"},{"lineNumber":3,"author":{"gitId":"-"},"content":"    \u003ctr\u003e"},{"lineNumber":4,"author":{"gitId":"-"},"content":"      \u003ctd\u003e\u003c/td\u003e"},{"lineNumber":5,"author":{"gitId":"jasonqiu212"},"content":"      \u003cth *ngFor\u003d\"let choice of questionDetails.rubricChoices\" scope\u003d\"col\"\u003e{{ choice }}\u003c/th\u003e"},{"lineNumber":6,"author":{"gitId":"-"},"content":"    \u003c/tr\u003e"},{"lineNumber":7,"author":{"gitId":"jasonqiu212"},"content":"  \u003c/thead\u003e"},{"lineNumber":8,"author":{"gitId":"jasonqiu212"},"content":"  \u003ctbody\u003e"},{"lineNumber":9,"author":{"gitId":"-"},"content":"    \u003ctr *ngFor\u003d\"let rubricDescriptionRow of questionDetails.rubricDescriptions; let i \u003d index;\""},{"lineNumber":10,"author":{"gitId":"-"},"content":"        [ngClass]\u003d\"{ \u0027row-answered\u0027: i \u003c responseDetails.answer.length \u0026\u0026 responseDetails.answer[i] !\u003d\u003d RUBRIC_ANSWER_NOT_CHOSEN }\"\u003e"},{"lineNumber":11,"author":{"gitId":"jasonqiu212"},"content":"      \u003cth class\u003d\"fw-normal\" scope\u003d\"row\"\u003e{{ questionDetails.rubricSubQuestions[i] }}\u003c/th\u003e"},{"lineNumber":12,"author":{"gitId":"-"},"content":"      \u003ctd *ngFor\u003d\"let rubricDescriptionCell of rubricDescriptionRow; let j \u003d index;\" class\u003d\"text-secondary answer-cell\" (click)\u003d\"selectAnswer(i, j)\"\u003e"},{"lineNumber":13,"author":{"gitId":"jasonqiu212"},"content":"        \u003cinput"},{"lineNumber":14,"author":{"gitId":"jasonqiu212"},"content":"          type\u003d\"radio\""},{"lineNumber":15,"author":{"gitId":"jasonqiu212"},"content":"          [disabled]\u003d\"isDisabled\""},{"lineNumber":16,"author":{"gitId":"jasonqiu212"},"content":"          [name]\u003d\"getInputId(id, i, j, \u0027desktop\u0027)\""},{"lineNumber":17,"author":{"gitId":"jasonqiu212"},"content":"          [id]\u003d\"getInputId(id, i, j, \u0027desktop\u0027)\""},{"lineNumber":18,"author":{"gitId":"jasonqiu212"},"content":"          [checked]\u003d\"i \u003c responseDetails.answer.length \u0026\u0026 responseDetails.answer[i] \u003d\u003d\u003d j\""},{"lineNumber":19,"author":{"gitId":"jasonqiu212"},"content":"        /\u003e"},{"lineNumber":20,"author":{"gitId":"jasonqiu212"},"content":"        \u003clabel [for]\u003d\"getInputId(id, i, j, \u0027desktop\u0027)\" (click)\u003d\"$event.stopPropagation()\"\u003e"},{"lineNumber":21,"author":{"gitId":"jasonqiu212"},"content":"          {{ rubricDescriptionCell }}"},{"lineNumber":22,"author":{"gitId":"-"},"content":"        \u003c/label\u003e"},{"lineNumber":23,"author":{"gitId":"-"},"content":"      \u003c/td\u003e"},{"lineNumber":24,"author":{"gitId":"-"},"content":"    \u003c/tr\u003e"},{"lineNumber":25,"author":{"gitId":"-"},"content":"  \u003c/tbody\u003e"},{"lineNumber":26,"author":{"gitId":"-"},"content":"\u003c/table\u003e"},{"lineNumber":27,"author":{"gitId":"jasonqiu212"},"content":"\u003cdiv class\u003d\"mobile-view\" [attr.aria-label]\u003d\"getAriaLabel()\"\u003e"},{"lineNumber":28,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"card\" *ngFor\u003d\"let rubricDescriptionRow of questionDetails.rubricDescriptions; let i \u003d index;\"\u003e"},{"lineNumber":29,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"card-header bg-light\"\u003e"},{"lineNumber":30,"author":{"gitId":"-"},"content":"      {{ questionDetails.rubricSubQuestions[i] }}"},{"lineNumber":31,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":32,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"card-body\""},{"lineNumber":33,"author":{"gitId":"-"},"content":"         [ngClass]\u003d\"{ \u0027row-answered\u0027: i \u003c responseDetails.answer.length \u0026\u0026 responseDetails.answer[i] !\u003d\u003d RUBRIC_ANSWER_NOT_CHOSEN }\"\u003e"},{"lineNumber":34,"author":{"gitId":"-"},"content":"      \u003cdiv *ngFor\u003d\"let rubricDescriptionCell of rubricDescriptionRow; let j \u003d index;\"\u003e"},{"lineNumber":35,"author":{"gitId":"-"},"content":"        \u003clabel\u003e"},{"lineNumber":36,"author":{"gitId":"jasonqiu212"},"content":"          \u003cinput"},{"lineNumber":37,"author":{"gitId":"jasonqiu212"},"content":"            type\u003d\"radio\""},{"lineNumber":38,"author":{"gitId":"jasonqiu212"},"content":"            [disabled]\u003d\"isDisabled\""},{"lineNumber":39,"author":{"gitId":"jasonqiu212"},"content":"            (click)\u003d\"selectAnswer(i, j)\""},{"lineNumber":40,"author":{"gitId":"jasonqiu212"},"content":"            [name]\u003d\"getInputId(id, i, j, \u0027mobile\u0027)\""},{"lineNumber":41,"author":{"gitId":"jasonqiu212"},"content":"            [checked]\u003d\"i \u003c responseDetails.answer.length \u0026\u0026 responseDetails.answer[i] \u003d\u003d\u003d j\""},{"lineNumber":42,"author":{"gitId":"jasonqiu212"},"content":"            [attr.aria-label]\u003d\"getAriaLabelForChoice(questionDetails.rubricChoices[j], rubricDescriptionCell, questionDetails.rubricSubQuestions[i])\""},{"lineNumber":43,"author":{"gitId":"jasonqiu212"},"content":"          \u003e"},{"lineNumber":44,"author":{"gitId":"jasonqiu212"},"content":"          {{ getChoiceWithDescription(questionDetails.rubricChoices[j], rubricDescriptionCell) }}"},{"lineNumber":45,"author":{"gitId":"-"},"content":"        \u003c/label\u003e"},{"lineNumber":46,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":47,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":48,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":49,"author":{"gitId":"-"},"content":"\u003c/div\u003e"}],"authorContributionMap":{"jasonqiu212":25,"-":24}},{"path":"src/web/app/components/question-types/question-edit-answer-form/rubric-question-edit-answer-form.component.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { Component, Input } from \u0027@angular/core\u0027;"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":3,"author":{"gitId":"-"},"content":"  FeedbackRubricQuestionDetails, FeedbackRubricResponseDetails,"},{"lineNumber":4,"author":{"gitId":"-"},"content":"} from \u0027../../../../types/api-output\u0027;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":6,"author":{"gitId":"-"},"content":"  DEFAULT_RUBRIC_QUESTION_DETAILS, DEFAULT_RUBRIC_RESPONSE_DETAILS,"},{"lineNumber":7,"author":{"gitId":"-"},"content":"} from \u0027../../../../types/default-question-structs\u0027;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import { RUBRIC_ANSWER_NOT_CHOSEN } from \u0027../../../../types/feedback-response-details\u0027;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import { QuestionEditAnswerFormComponent } from \u0027./question-edit-answer-form\u0027;"},{"lineNumber":10,"author":{"gitId":"-"},"content":""},{"lineNumber":11,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":12,"author":{"gitId":"-"},"content":" * The rubric question submission form for a recipient."},{"lineNumber":13,"author":{"gitId":"-"},"content":" */"},{"lineNumber":14,"author":{"gitId":"-"},"content":"@Component({"},{"lineNumber":15,"author":{"gitId":"-"},"content":"  selector: \u0027tm-rubric-question-edit-answer-form\u0027,"},{"lineNumber":16,"author":{"gitId":"-"},"content":"  templateUrl: \u0027./rubric-question-edit-answer-form.component.html\u0027,"},{"lineNumber":17,"author":{"gitId":"-"},"content":"  styleUrls: [\u0027./rubric-question-edit-answer-form.component.scss\u0027],"},{"lineNumber":18,"author":{"gitId":"-"},"content":"})"},{"lineNumber":19,"author":{"gitId":"-"},"content":"export class RubricQuestionEditAnswerFormComponent extends QuestionEditAnswerFormComponent"},{"lineNumber":20,"author":{"gitId":"-"},"content":"    \u003cFeedbackRubricQuestionDetails, FeedbackRubricResponseDetails\u003e {"},{"lineNumber":21,"author":{"gitId":"-"},"content":""},{"lineNumber":22,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":23,"author":{"gitId":"-"},"content":"   * The unique ID in the page where the component is used."},{"lineNumber":24,"author":{"gitId":"-"},"content":"   *"},{"lineNumber":25,"author":{"gitId":"-"},"content":"   * \u003cp\u003eThis is to ensure that only one rubric answer per sub question can be selected."},{"lineNumber":26,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":27,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":28,"author":{"gitId":"-"},"content":"  id: string \u003d \u0027\u0027;"},{"lineNumber":29,"author":{"gitId":"-"},"content":""},{"lineNumber":30,"author":{"gitId":"-"},"content":"  // constant"},{"lineNumber":31,"author":{"gitId":"-"},"content":"  readonly RUBRIC_ANSWER_NOT_CHOSEN: number \u003d RUBRIC_ANSWER_NOT_CHOSEN;"},{"lineNumber":32,"author":{"gitId":"-"},"content":""},{"lineNumber":33,"author":{"gitId":"-"},"content":"  constructor() {"},{"lineNumber":34,"author":{"gitId":"-"},"content":"    super(DEFAULT_RUBRIC_QUESTION_DETAILS(), DEFAULT_RUBRIC_RESPONSE_DETAILS());"},{"lineNumber":35,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":36,"author":{"gitId":"-"},"content":""},{"lineNumber":37,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":38,"author":{"gitId":"-"},"content":"   * Selects an answer."},{"lineNumber":39,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":40,"author":{"gitId":"-"},"content":"  selectAnswer(subQuestionIndex: number, answerIndex: number): void {"},{"lineNumber":41,"author":{"gitId":"-"},"content":"    if (this.isDisabled) {"},{"lineNumber":42,"author":{"gitId":"-"},"content":"      return;"},{"lineNumber":43,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":44,"author":{"gitId":"-"},"content":""},{"lineNumber":45,"author":{"gitId":"-"},"content":"    let newAnswer: number[] \u003d this.responseDetails.answer.slice();"},{"lineNumber":46,"author":{"gitId":"-"},"content":"    if (newAnswer.length !\u003d\u003d this.questionDetails.rubricSubQuestions.length) {"},{"lineNumber":47,"author":{"gitId":"-"},"content":"      // initialize new answer on the fly"},{"lineNumber":48,"author":{"gitId":"-"},"content":"      newAnswer \u003d Array(this.questionDetails.rubricSubQuestions.length).fill(RUBRIC_ANSWER_NOT_CHOSEN);"},{"lineNumber":49,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":50,"author":{"gitId":"-"},"content":""},{"lineNumber":51,"author":{"gitId":"-"},"content":"    if (newAnswer[subQuestionIndex] \u003d\u003d\u003d answerIndex) {"},{"lineNumber":52,"author":{"gitId":"-"},"content":"      // same answer is selected: toggle as unselected"},{"lineNumber":53,"author":{"gitId":"-"},"content":"      newAnswer[subQuestionIndex] \u003d RUBRIC_ANSWER_NOT_CHOSEN;"},{"lineNumber":54,"author":{"gitId":"-"},"content":"    } else {"},{"lineNumber":55,"author":{"gitId":"-"},"content":"      newAnswer[subQuestionIndex] \u003d answerIndex;"},{"lineNumber":56,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":57,"author":{"gitId":"-"},"content":""},{"lineNumber":58,"author":{"gitId":"-"},"content":"    this.triggerResponseDetailsChange(\u0027answer\u0027, newAnswer);"},{"lineNumber":59,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":60,"author":{"gitId":"jasonqiu212"},"content":""},{"lineNumber":61,"author":{"gitId":"jasonqiu212"},"content":"  getAriaLabelForChoice(choice: String, choiceDescription: String, criteria: String): String {"},{"lineNumber":62,"author":{"gitId":"jasonqiu212"},"content":"    const baseAriaLabel: String \u003d this.getAriaLabel();"},{"lineNumber":63,"author":{"gitId":"jasonqiu212"},"content":"    const choiceWithDescription: String \u003d this.getChoiceWithDescription(choice, choiceDescription);"},{"lineNumber":64,"author":{"gitId":"jasonqiu212"},"content":"    return `${choiceWithDescription} ${baseAriaLabel} under Criteria of ${criteria}`;"},{"lineNumber":65,"author":{"gitId":"jasonqiu212"},"content":"  }"},{"lineNumber":66,"author":{"gitId":"jasonqiu212"},"content":""},{"lineNumber":67,"author":{"gitId":"jasonqiu212"},"content":"  getChoiceWithDescription(choice: String, choiceDescription: String): String {"},{"lineNumber":68,"author":{"gitId":"jasonqiu212"},"content":"    return choiceDescription ? `${choice} - ${choiceDescription}` : choice;"},{"lineNumber":69,"author":{"gitId":"jasonqiu212"},"content":"  }"},{"lineNumber":70,"author":{"gitId":"jasonqiu212"},"content":""},{"lineNumber":71,"author":{"gitId":"jasonqiu212"},"content":"  getInputId(id: String, row: Number, col: Number, platform: String): String {"},{"lineNumber":72,"author":{"gitId":"jasonqiu212"},"content":"    return `${id}-row${row}-col${col}-${platform}`;"},{"lineNumber":73,"author":{"gitId":"jasonqiu212"},"content":"  }"},{"lineNumber":74,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"jasonqiu212":14,"-":60}},{"path":"src/web/app/components/question-types/question-edit-answer-form/text-question-edit-answer-form.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"plain-text-area\" *ngIf\u003d\"!questionDetails.shouldAllowRichText\"\u003e"},{"lineNumber":2,"author":{"gitId":"weiquu"},"content":"  \u003ctextarea [ngModel]\u003d\"responseDetails.answer\" (ngModelChange)\u003d\"triggerResponseDetailsChange(\u0027answer\u0027, $event)\" [attr.aria-label]\u003d\"getAriaLabel()\" [disabled]\u003d\"isDisabled\"\u003e\u003c/textarea\u003e"},{"lineNumber":3,"author":{"gitId":"-"},"content":"\u003c/div\u003e"},{"lineNumber":4,"author":{"gitId":"-"},"content":"\u003ctm-rich-text-editor *ngIf\u003d\"questionDetails.shouldAllowRichText\" role\u003d\"textbox\" [attr.aria-label]\u003d\"getAriaLabel()\" [richText]\u003d\"responseDetails.answer\" (richTextChange)\u003d\"triggerResponseDetailsChange(\u0027answer\u0027, $event)\" [isDisabled]\u003d\"isDisabled\"\u003e\u003c/tm-rich-text-editor\u003e"},{"lineNumber":5,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"margin-top-7px text-secondary text-end\"\u003e"},{"lineNumber":6,"author":{"gitId":"-"},"content":"  \u003cdiv id\u003d\"recommended-length\" *ngIf\u003d\"questionDetails.recommendedLength\"\u003e"},{"lineNumber":7,"author":{"gitId":"-"},"content":"    Recommended length for the answer: {{ questionDetails.recommendedLength }} words"},{"lineNumber":8,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":9,"author":{"gitId":"-"},"content":"  \u003cdiv id\u003d\"response-length\" *ngIf\u003d\"questionDetails.recommendedLength\" [ngClass]\u003d\"{\u0027text-success\u0027: isWordCountWithinRecommendedBound }\"\u003e"},{"lineNumber":10,"author":{"gitId":"-"},"content":"    Response length: {{ wordCount }} words"},{"lineNumber":11,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":12,"author":{"gitId":"-"},"content":"\u003c/div\u003e"}],"authorContributionMap":{"weiquu":1,"-":11}},{"path":"src/web/app/components/question-types/question-edit-details-form/constsum-options-field/constsum-options-field.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"input-group\"\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  \u003cinput type\u003d\"text\" class\u003d\"form-control\" [disabled]\u003d\"!isEditable\" [ngModel]\u003d\"text\""},{"lineNumber":3,"author":{"gitId":"weiquu"},"content":"         (ngModelChange)\u003d\"onConstsumOptionEntered($event.trim())\" aria-label\u003d\"Option\"\u003e"},{"lineNumber":4,"author":{"gitId":"-"},"content":"  \u003cspan class\u003d\"input-group-btn\"\u003e"},{"lineNumber":5,"author":{"gitId":"weiquu"},"content":"    \u003cbutton type\u003d\"button\" class\u003d\"btn btn-danger input-group-addon\" style\u003d\"cursor: initial;\""},{"lineNumber":6,"author":{"gitId":"weiquu"},"content":"            [disabled]\u003d\"!isEditable\" (click)\u003d\"deleteConstsumOption()\" aria-label\u003d\"Delete Option\"\u003e"},{"lineNumber":7,"author":{"gitId":"-"},"content":"      \u003cspan aria-hidden\u003d\"true\"\u003e\u0026times;\u003c/span\u003e"},{"lineNumber":8,"author":{"gitId":"-"},"content":"    \u003c/button\u003e"},{"lineNumber":9,"author":{"gitId":"-"},"content":"  \u003c/span\u003e"},{"lineNumber":10,"author":{"gitId":"-"},"content":"\u003c/div\u003e"}],"authorContributionMap":{"weiquu":3,"-":7}},{"path":"src/web/app/components/question-types/question-edit-details-form/constsum-options-question-edit-details-form.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"row\"\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"col-sm-6\"\u003e"},{"lineNumber":3,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"row\"\u003e"},{"lineNumber":4,"author":{"gitId":"weiquu"},"content":"      \u003cdiv id\u003d\"options-section\" cdkDropList (cdkDropListDropped)\u003d\"onConstsumOptionDropped($event)\" [cdkDropListDisabled]\u003d\"!isEditable\"\u003e"},{"lineNumber":5,"author":{"gitId":"weiquu"},"content":"        \u003cdiv class\u003d\"mb-3 d-flex\" *ngFor\u003d\"let option of model.constSumOptions; let i \u003d index;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"        trackBy: trackConstsumOption\" cdkDrag cdkDragLockAxis\u003d\"y\"\u003e"},{"lineNumber":7,"author":{"gitId":"weiquu"},"content":"          \u003cdiv cdkDragHandle aria-hidden\u003d\"true\"\u003e"},{"lineNumber":8,"author":{"gitId":"weiquu"},"content":"            \u003cspan class\u003d\"btn input-group-addon\"\u003e\u0026#8597; \u003c/span\u003e"},{"lineNumber":9,"author":{"gitId":"-"},"content":"          \u003c/div\u003e"},{"lineNumber":10,"author":{"gitId":"-"},"content":"          \u003cdiv class\u003d\"flex-grow-1\"\u003e"},{"lineNumber":11,"author":{"gitId":"-"},"content":"            \u003ctm-constsum-options-field (elementDeleted)\u003d\"onConstsumOptionDeleted(i)\""},{"lineNumber":12,"author":{"gitId":"-"},"content":"                                  [isEditable]\u003d\"isEditable\""},{"lineNumber":13,"author":{"gitId":"-"},"content":"                                  (textChange)\u003d\"onConstsumOptionEntered($event, i)\""},{"lineNumber":14,"author":{"gitId":"-"},"content":"                                  [text]\u003d\"option\"\u003e\u003c/tm-constsum-options-field\u003e"},{"lineNumber":15,"author":{"gitId":"-"},"content":"          \u003c/div\u003e"},{"lineNumber":16,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":17,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":18,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":19,"author":{"gitId":"weiquu"},"content":"    \u003cdiv class\u003d\"mb-3\"\u003e"},{"lineNumber":20,"author":{"gitId":"-"},"content":"      \u003cbutton id\u003d\"btn-add-option\" class\u003d\"btn btn-primary\" name\u003d\"button\" ngDefaultControl"},{"lineNumber":21,"author":{"gitId":"-"},"content":"              [disabled]\u003d\"!isEditable\" (click)\u003d\"increaseNumberOfConstsumOptions()\"\u003e"},{"lineNumber":22,"author":{"gitId":"weiquu"},"content":"        \u003ci class\u003d\"fas fa-plus\"\u003e\u003c/i\u003e Add More Options"},{"lineNumber":23,"author":{"gitId":"-"},"content":"      \u003c/button\u003e"},{"lineNumber":24,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":25,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":26,"author":{"gitId":"weiquu"},"content":"  \u003cdiv class\u003d\"col-sm-6 form\"\u003e"},{"lineNumber":27,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"row\"\u003e"},{"lineNumber":28,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"col-12\"\u003e"},{"lineNumber":29,"author":{"gitId":"-"},"content":"        \u003cb\u003eTotal Points to distribute:\u003c/b\u003e"},{"lineNumber":30,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":31,"author":{"gitId":"weiquu"},"content":"      \u003cdiv class\u003d\"col-11 offset-1 mt-2\"\u003e"},{"lineNumber":32,"author":{"gitId":"weiquu"},"content":"        \u003cdiv class\u003d\"row form-check\"\u003e"},{"lineNumber":33,"author":{"gitId":"weiquu"},"content":"          \u003clabel class\u003d\"row form-check-label\"\u003e"},{"lineNumber":34,"author":{"gitId":"weiquu"},"content":"            \u003cdiv class\u003d\"col-sm-6\"\u003e"},{"lineNumber":35,"author":{"gitId":"-"},"content":"              \u003cinput id\u003d\"total-points-radio\" class\u003d\"form-check-input\" type\u003d\"radio\" [ngModel]\u003d\"model.pointsPerOption\" [value]\u003d\"false\""},{"lineNumber":36,"author":{"gitId":"weiquu"},"content":"                     (ngModelChange)\u003d\"triggerModelChange(\u0027pointsPerOption\u0027, $event)\" [disabled]\u003d\"!isEditable\" aria-label\u003d\"Use Total Points Checkbox\"\u003e"},{"lineNumber":37,"author":{"gitId":"-"},"content":"              \u003cinput id\u003d\"total-points\" type\u003d\"number\" class\u003d\"form-control\" (keypress)\u003d\"onIntegerInput($event)\" (paste)\u003d\"onPaste($event)\" min\u003d\"1\" max\u003d\"999999999\" (input)\u003d\"restrictIntegerInputLength($event, \u0027points\u0027)\""},{"lineNumber":38,"author":{"gitId":"weiquu"},"content":"                     [ngModel]\u003d\"!model.pointsPerOption ? model.points : \u0027\u0027\" (ngModelChange)\u003d\"triggerModelChange(\u0027points\u0027, $event)\" [disabled]\u003d\"!isEditable || model.pointsPerOption\" aria-label\u003d\"Total Points Input\"\u003e"},{"lineNumber":39,"author":{"gitId":"weiquu"},"content":"            \u003c/div\u003e"},{"lineNumber":40,"author":{"gitId":"weiquu"},"content":"            \u003cdiv class\u003d\"col-sm-6 text-start\"\u003e"},{"lineNumber":41,"author":{"gitId":"-"},"content":"              \u003cb class\u003d\"ngb-tooltip-class\" ngbTooltip\u003d\"Respondents will have to distribute the total points specified here among the options, e.g. if you specify 100 points here and there are 3 options, respondents will have to distribute 100 points among 3 options.\"\u003ein total\u003c/b\u003e"},{"lineNumber":42,"author":{"gitId":"weiquu"},"content":"            \u003c/div\u003e"},{"lineNumber":43,"author":{"gitId":"-"},"content":"          \u003c/label\u003e"},{"lineNumber":44,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":45,"author":{"gitId":"weiquu"},"content":"        \u003cdiv class\u003d\"row form-check\"\u003e"},{"lineNumber":46,"author":{"gitId":"weiquu"},"content":"          \u003clabel class\u003d\"row form-check-label\"\u003e"},{"lineNumber":47,"author":{"gitId":"weiquu"},"content":"            \u003cdiv class\u003d\"col-sm-6\"\u003e"},{"lineNumber":48,"author":{"gitId":"-"},"content":"              \u003cinput id\u003d\"per-option-points-radio\" class\u003d\"form-check-input\" type\u003d\"radio\" [ngModel]\u003d\"model.pointsPerOption\" [value]\u003d\"true\""},{"lineNumber":49,"author":{"gitId":"weiquu"},"content":"                     (ngModelChange)\u003d\"triggerModelChange(\u0027pointsPerOption\u0027, $event)\" [disabled]\u003d\"!isEditable\" aria-label\u003d\"Use Total Points Times Number of Options Checkbox\"\u003e"},{"lineNumber":50,"author":{"gitId":"-"},"content":"              \u003cinput id\u003d\"per-option-points\" type\u003d\"number\" class\u003d\"form-control\" (keypress)\u003d\"onIntegerInput($event)\" (paste)\u003d\"onPaste($event)\" min\u003d\"1\" max\u003d\"999999999\" (input)\u003d\"restrictIntegerInputLength($event, \u0027points\u0027)\""},{"lineNumber":51,"author":{"gitId":"weiquu"},"content":"                     [ngModel]\u003d\"model.pointsPerOption ? model.points : \u0027\u0027\" (ngModelChange)\u003d\"triggerModelChange(\u0027points\u0027, $event)\" [disabled]\u003d\"!isEditable || !model.pointsPerOption\" aria-label\u003d\"Points Input\"\u003e"},{"lineNumber":52,"author":{"gitId":"weiquu"},"content":"            \u003c/div\u003e"},{"lineNumber":53,"author":{"gitId":"weiquu"},"content":"            \u003cdiv class\u003d\"col-sm-6 text-start\"\u003e"},{"lineNumber":54,"author":{"gitId":"weiquu"},"content":"              \u003cb class\u003d\"ngb-tooltip-class\" ngbTooltip\u003d\"The number of points to distribute will vary based on the number of options, e.g. if you specify 100 points here and there are 3 options, the total number of points to distribute among 3 options will be 300 (i.e. 100 x 3).\"\u003etimes (number of options)\u003c/b\u003e"},{"lineNumber":55,"author":{"gitId":"weiquu"},"content":"            \u003c/div\u003e"},{"lineNumber":56,"author":{"gitId":"-"},"content":"          \u003c/label\u003e"},{"lineNumber":57,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":58,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":59,"author":{"gitId":"weiquu"},"content":"      \u003cdiv class\u003d\"col-12 mt-2\"\u003e"},{"lineNumber":60,"author":{"gitId":"weiquu"},"content":"        \u003cdiv class\u003d\"row\"\u003e"},{"lineNumber":61,"author":{"gitId":"weiquu"},"content":"          \u003cdiv class\u003d\"col-auto\"\u003e"},{"lineNumber":62,"author":{"gitId":"weiquu"},"content":"            \u003cdiv class\u003d\"form-check\"\u003e"},{"lineNumber":63,"author":{"gitId":"-"},"content":"              \u003clabel class\u003d\"form-check-label\"\u003e"},{"lineNumber":64,"author":{"gitId":"-"},"content":"                \u003cinput id\u003d\"min-point-checkbox\" class\u003d\"form-check-input\" type\u003d\"checkbox\""},{"lineNumber":65,"author":{"gitId":"-"},"content":"                       [ngModel]\u003d\"hasMinPoint\""},{"lineNumber":66,"author":{"gitId":"weiquu"},"content":"                       (ngModelChange)\u003d\"resetMinPoint($event)\" [disabled]\u003d\"!isEditable\" aria-label\u003d\"Minimum Value Checkbox\"\u003e"},{"lineNumber":67,"author":{"gitId":"-"},"content":"                \u003cinput id\u003d\"min-point\" type\u003d\"number\" class\u003d\"form-control\" (keypress)\u003d\"onIntegerInput($event)\" (paste)\u003d\"onPaste($event)\" min\u003d\"1\" max\u003d\"999999999\" (input)\u003d\"restrictIntegerInputLength($event, \u0027minPoint\u0027)\""},{"lineNumber":68,"author":{"gitId":"weiquu"},"content":"                       [ngModel]\u003d\"hasMinPoint ? model.minPoint : \u0027\u0027\" (ngModelChange)\u003d\"triggerModelChange(\u0027minPoint\u0027, $event)\" [disabled]\u003d\"!isEditable || !hasMinPoint\" aria-label\u003d\"Minimum Value Input\"\u003e"},{"lineNumber":69,"author":{"gitId":"weiquu"},"content":"                \u003cb class\u003d\"ngb-tooltip-class\" ngbTooltip\u003d\"The minimum allocation of the points to an option, e.g if you specify 5 points here, the user must input a value larger than or equal to 5 for each option.\"\u003eminimum per option\u003c/b\u003e"},{"lineNumber":70,"author":{"gitId":"-"},"content":"              \u003c/label\u003e"},{"lineNumber":71,"author":{"gitId":"-"},"content":"            \u003c/div\u003e"},{"lineNumber":72,"author":{"gitId":"weiquu"},"content":"          \u003c/div\u003e"},{"lineNumber":73,"author":{"gitId":"weiquu"},"content":"          \u003cdiv class\u003d\"col-auto\"\u003e"},{"lineNumber":74,"author":{"gitId":"weiquu"},"content":"            \u003cdiv class\u003d\"form-check\"\u003e"},{"lineNumber":75,"author":{"gitId":"-"},"content":"              \u003clabel class\u003d\"form-check-label\"\u003e"},{"lineNumber":76,"author":{"gitId":"-"},"content":"                \u003cinput id\u003d\"max-point-checkbox\" class\u003d\"form-check-input\" type\u003d\"checkbox\""},{"lineNumber":77,"author":{"gitId":"-"},"content":"                       [ngModel]\u003d\"hasMaxPoint\""},{"lineNumber":78,"author":{"gitId":"weiquu"},"content":"                       (ngModelChange)\u003d\"resetMaxPoint($event)\"  [disabled]\u003d\"!isEditable\" aria-label\u003d\"Maximum Value Checkbox\"\u003e"},{"lineNumber":79,"author":{"gitId":"-"},"content":"                \u003cinput id\u003d\"max-point\" type\u003d\"number\" class\u003d\"form-control\" (keypress)\u003d\"onIntegerInput($event)\" (paste)\u003d\"onPaste($event)\" min\u003d\"1\" max\u003d\"999999999\" (input)\u003d\"restrictIntegerInputLength($event, \u0027maxPoint\u0027)\""},{"lineNumber":80,"author":{"gitId":"weiquu"},"content":"                       [ngModel]\u003d\"hasMaxPoint ? model.maxPoint : \u0027\u0027\" (ngModelChange)\u003d\"triggerModelChange(\u0027maxPoint\u0027, $event)\" [disabled]\u003d\"!isEditable || !hasMaxPoint\" aria-label\u003d\"Maximum Value Input\"\u003e"},{"lineNumber":81,"author":{"gitId":"weiquu"},"content":"                \u003cb class\u003d\"ngb-tooltip-class\" ngbTooltip\u003d\"The maximum allocation of the points to an option, e.g if you specify 30 points here, the user must input a value smaller than or equal to 30 for each option.\"\u003emaximum per option\u003c/b\u003e"},{"lineNumber":82,"author":{"gitId":"-"},"content":"              \u003c/label\u003e"},{"lineNumber":83,"author":{"gitId":"-"},"content":"            \u003c/div\u003e"},{"lineNumber":84,"author":{"gitId":"-"},"content":"          \u003c/div\u003e"},{"lineNumber":85,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":86,"author":{"gitId":"weiquu"},"content":"      \u003c/div\u003e"},{"lineNumber":87,"author":{"gitId":"weiquu"},"content":"      \u003cdiv class\u003d\"col-12 mt-2\"\u003e"},{"lineNumber":88,"author":{"gitId":"weiquu"},"content":"        \u003cdiv class\u003d\"form-check\"\u003e"},{"lineNumber":89,"author":{"gitId":"-"},"content":"          \u003clabel class\u003d\"form-check-label\"\u003e"},{"lineNumber":90,"author":{"gitId":"-"},"content":"            \u003cinput id\u003d\"uneven-distribution-checkbox\" class\u003d\"form-check-input\" type\u003d\"checkbox\""},{"lineNumber":91,"author":{"gitId":"-"},"content":"                  [ngModel]\u003d\"model.forceUnevenDistribution\""},{"lineNumber":92,"author":{"gitId":"weiquu"},"content":"                  (ngModelChange)\u003d\"onForceUnevenDistribution($event)\" [disabled]\u003d\"!isEditable\" aria-label\u003d\"Uneven Distribution Checkbox\"\u003e"},{"lineNumber":93,"author":{"gitId":"-"},"content":"            \u003cselect id\u003d\"uneven-distribution-dropdown\" class\u003d\"form-control form-select\" [ngModel]\u003d\"model.distributePointsFor\""},{"lineNumber":94,"author":{"gitId":"-"},"content":"                    [disabled]\u003d\"!isEditable || model.distributePointsFor \u003d\u003d\u003d FeedbackConstantSumDistributePointsType.NONE\""},{"lineNumber":95,"author":{"gitId":"weiquu"},"content":"                    (ngModelChange)\u003d\"triggerModelChange(\u0027distributePointsFor\u0027, $event)\" aria-label\u003d\"Uneven Distribution Options\"\u003e"},{"lineNumber":96,"author":{"gitId":"weiquu"},"content":"              \u003coption [value]\u003d\"FeedbackConstantSumDistributePointsType.DISTRIBUTE_ALL_UNEVENLY\" aria-label\u003d\"Every Option to Receive a Different Number of Points\"\u003e"},{"lineNumber":97,"author":{"gitId":"-"},"content":"                Every option"},{"lineNumber":98,"author":{"gitId":"-"},"content":"              \u003c/option\u003e"},{"lineNumber":99,"author":{"gitId":"weiquu"},"content":"              \u003coption [value]\u003d\"FeedbackConstantSumDistributePointsType.DISTRIBUTE_SOME_UNEVENLY\" aria-label\u003d\"At Least Some Options to Receive a Different Number of Points\"\u003e"},{"lineNumber":100,"author":{"gitId":"-"},"content":"                At least some options"},{"lineNumber":101,"author":{"gitId":"-"},"content":"              \u003c/option\u003e"},{"lineNumber":102,"author":{"gitId":"-"},"content":"            \u003c/select\u003e"},{"lineNumber":103,"author":{"gitId":"-"},"content":"            \u003cb class\u003d\"ngb-tooltip-class\" ngbTooltip\u003d\"This determines whether a giver can distribute the same number of points to multiple recipients\"\u003eto receive a different number of points\u003c/b\u003e"},{"lineNumber":104,"author":{"gitId":"-"},"content":"          \u003c/label\u003e"},{"lineNumber":105,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":106,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":107,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":108,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":109,"author":{"gitId":"-"},"content":"\u003c/div\u003e"}],"authorContributionMap":{"weiquu":45,"-":64}},{"path":"src/web/app/components/question-types/question-edit-details-form/constsum-recipients-question-edit-details-form.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"row\"\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  \u003cbr\u003e"},{"lineNumber":3,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"col-12\"\u003e"},{"lineNumber":4,"author":{"gitId":"-"},"content":"    \u003cb\u003eTotal Points to distribute:\u003c/b\u003e"},{"lineNumber":5,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":6,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"col-11 offset-half margin-top-10px\"\u003e"},{"lineNumber":7,"author":{"gitId":"weiquu"},"content":"    \u003cdiv class\u003d\"row form-check\"\u003e"},{"lineNumber":8,"author":{"gitId":"-"},"content":"      \u003clabel class\u003d\"row form-check-label\"\u003e"},{"lineNumber":9,"author":{"gitId":"-"},"content":"        \u003cdiv class\u003d\"col-sm-3\"\u003e"},{"lineNumber":10,"author":{"gitId":"-"},"content":"          \u003cinput id\u003d\"total-points-radio\" class\u003d\"form-check-input\" type\u003d\"radio\" [ngModel]\u003d\"model.pointsPerOption\" [value]\u003d\"false\""},{"lineNumber":11,"author":{"gitId":"weiquu"},"content":"                 (ngModelChange)\u003d\"triggerModelChange(\u0027pointsPerOption\u0027, $event)\" [disabled]\u003d\"!isEditable\" aria-label\u003d\"Use Total Points Checkbox\"\u003e"},{"lineNumber":12,"author":{"gitId":"-"},"content":"          \u003cinput id\u003d\"total-points\" type\u003d\"number\" class\u003d\"form-control\" (keypress)\u003d\"onIntegerInput($event)\" (paste)\u003d\"onPaste($event)\" min\u003d\"1\" max\u003d\"999999999\" (input)\u003d\"restrictIntegerInputLength($event, \u0027points\u0027)\""},{"lineNumber":13,"author":{"gitId":"weiquu"},"content":"                 [ngModel]\u003d\"!model.pointsPerOption ? model.points : \u0027\u0027\" (ngModelChange)\u003d\"triggerModelChange(\u0027points\u0027, $event)\" [disabled]\u003d\"!isEditable || model.pointsPerOption\" aria-label\u003d\"Total Points Input\"\u003e"},{"lineNumber":14,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":15,"author":{"gitId":"-"},"content":"        \u003cdiv class\u003d\"col-sm-9 text-start\"\u003e"},{"lineNumber":16,"author":{"gitId":"-"},"content":"          \u003cb class\u003d\"ngb-tooltip-class\" ngbTooltip\u003d\"Respondents will have to distribute the total points specified here among the recipients, e.g. if you specify 100 points here and there are 3 recipients, respondents will have to distribute 100 points among 3 recipients.\"\u003ein total\u003c/b\u003e"},{"lineNumber":17,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":18,"author":{"gitId":"-"},"content":"      \u003c/label\u003e"},{"lineNumber":19,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":20,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"form-check\"\u003e"},{"lineNumber":21,"author":{"gitId":"-"},"content":"      \u003clabel class\u003d\"form-check-label row\"\u003e"},{"lineNumber":22,"author":{"gitId":"-"},"content":"        \u003cdiv class\u003d\"col-sm-3\"\u003e"},{"lineNumber":23,"author":{"gitId":"-"},"content":"          \u003cinput id\u003d\"per-option-points-radio\" class\u003d\"form-check-input\" type\u003d\"radio\" [ngModel]\u003d\"model.pointsPerOption\" [value]\u003d\"true\""},{"lineNumber":24,"author":{"gitId":"weiquu"},"content":"                 (ngModelChange)\u003d\"triggerModelChange(\u0027pointsPerOption\u0027, $event)\" [disabled]\u003d\"!isEditable\" aria-label\u003d\"Use Total Points Times Number of Recipients Checkbox\"\u003e"},{"lineNumber":25,"author":{"gitId":"-"},"content":"          \u003cinput id\u003d\"per-option-points\" type\u003d\"number\" class\u003d\"form-control\" (keypress)\u003d\"onIntegerInput($event)\" (paste)\u003d\"onPaste($event)\" min\u003d\"1\" max\u003d\"999999999\" (input)\u003d\"restrictIntegerInputLength($event, \u0027points\u0027)\""},{"lineNumber":26,"author":{"gitId":"weiquu"},"content":"                 [ngModel]\u003d\"model.pointsPerOption ? model.points : \u0027\u0027\" (ngModelChange)\u003d\"triggerModelChange(\u0027points\u0027, $event)\" [disabled]\u003d\"!isEditable || !model.pointsPerOption\" aria-label\u003d\"Points Input\"\u003e"},{"lineNumber":27,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":28,"author":{"gitId":"weiquu"},"content":"        \u003cdiv class\u003d\"col-sm-9 text-start\"\u003e"},{"lineNumber":29,"author":{"gitId":"weiquu"},"content":"          \u003cb class\u003d\"ngb-tooltip-class\" ngbTooltip\u003d\"The number of points to distribute will vary based on the number of recipients, e.g. if you specify 100 points here and there are 3 recipients, the total number of points to distribute among 3 recipients will be 300 (i.e. 100 x 3).\"\u003etimes (number of recipients)\u003c/b\u003e"},{"lineNumber":30,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":31,"author":{"gitId":"-"},"content":"      \u003c/label\u003e"},{"lineNumber":32,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":33,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":34,"author":{"gitId":"-"},"content":"  \u003clabel class\u003d\"row form-check col-sm-12 padding-left-33px margin-top-10px\"\u003e"},{"lineNumber":35,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"col-sm-3\"\u003e"},{"lineNumber":36,"author":{"gitId":"-"},"content":"      \u003cinput id\u003d\"uneven-distribution-checkbox\" class\u003d\"form-check-input\" type\u003d\"checkbox\""},{"lineNumber":37,"author":{"gitId":"-"},"content":"             [ngModel]\u003d\"model.forceUnevenDistribution\""},{"lineNumber":38,"author":{"gitId":"weiquu"},"content":"             (ngModelChange)\u003d\"onForceUnevenDistribution($event)\" [disabled]\u003d\"!isEditable\" aria-label\u003d\"Uneven Distribution Checkbox\"\u003e"},{"lineNumber":39,"author":{"gitId":"-"},"content":"      \u003cselect id\u003d\"uneven-distribution-dropdown\" class\u003d\"form-control form-select\" [ngModel]\u003d\"model.distributePointsFor\""},{"lineNumber":40,"author":{"gitId":"-"},"content":"              [disabled]\u003d\"!isEditable || model.distributePointsFor \u003d\u003d\u003d FeedbackConstantSumDistributePointsType.NONE\""},{"lineNumber":41,"author":{"gitId":"weiquu"},"content":"              (ngModelChange)\u003d\"triggerModelChange(\u0027distributePointsFor\u0027, $event)\" aria-label\u003d\"Uneven Distribution Options\"\u003e"},{"lineNumber":42,"author":{"gitId":"weiquu"},"content":"        \u003coption [value]\u003d\"FeedbackConstantSumDistributePointsType.DISTRIBUTE_ALL_UNEVENLY\" aria-label\u003d\"Every Option to Receive a Different Number of Points\"\u003e"},{"lineNumber":43,"author":{"gitId":"-"},"content":"          Every option"},{"lineNumber":44,"author":{"gitId":"-"},"content":"        \u003c/option\u003e"},{"lineNumber":45,"author":{"gitId":"weiquu"},"content":"        \u003coption [value]\u003d\"FeedbackConstantSumDistributePointsType.DISTRIBUTE_SOME_UNEVENLY\" aria-label\u003d\"At Least Some Options to Receive a Different Number of Points\"\u003e"},{"lineNumber":46,"author":{"gitId":"-"},"content":"          At least some options"},{"lineNumber":47,"author":{"gitId":"-"},"content":"        \u003c/option\u003e"},{"lineNumber":48,"author":{"gitId":"-"},"content":"      \u003c/select\u003e"},{"lineNumber":49,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":50,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"col-sm-9\"\u003e"},{"lineNumber":51,"author":{"gitId":"-"},"content":"      \u003cb class\u003d\"ngb-tooltip-class\" ngbTooltip\u003d\"This determines whether a giver can distribute the same number of points to multiple recipients\"\u003eto receive a different number of points\u003c/b\u003e"},{"lineNumber":52,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":53,"author":{"gitId":"-"},"content":"  \u003c/label\u003e"},{"lineNumber":54,"author":{"gitId":"-"},"content":"\u003c/div\u003e"}],"authorContributionMap":{"weiquu":11,"-":43}},{"path":"src/web/app/components/question-types/question-edit-details-form/contribution-question-edit-details-form.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"row\"\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  \u003cbr\u003e"},{"lineNumber":3,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"col-12\"\u003e"},{"lineNumber":4,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"form-check form-check-inline\"\u003e"},{"lineNumber":5,"author":{"gitId":"weiquu"},"content":"      \u003cdiv class\u003d\"form-check-label\"\u003e"},{"lineNumber":6,"author":{"gitId":"-"},"content":"        \u003cinput id\u003d\"zero-sum-checkbox\" class\u003d\"form-check-input\" type\u003d\"checkbox\" [ngModel]\u003d\"model.isZeroSum\" (ngModelChange)\u003d\"triggerModelChangeForIsZeroSum($event)\" [disabled]\u003d\"!isEditable\"\u003e"},{"lineNumber":7,"author":{"gitId":"weiquu"},"content":"        \u003clabel for\u003d\"zero-sum-checkbox\" class\u003d\"fw-bold\"\u003eZero-sum i.e., ratings must add up to (Team Size) times (Equal Share)\u003c/label\u003e\u0026nbsp;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"        \u003ca class\u003d\"small\" tmRouterLink\u003d\"/web/instructor/help\" [queryParams]\u003d\"{questionId: QuestionsSectionQuestions.CONTRIBUTION, section: Sections.questions}\" rel\u003d\"noopener noreferrer\" target\u003d\"_blank\"\u003e"},{"lineNumber":9,"author":{"gitId":"-"},"content":"          \u003ci class\u003d\"fa fa-info-circle\" aria-hidden\u003d\"true\"\u003e\u003c/i\u003e"},{"lineNumber":10,"author":{"gitId":"-"},"content":"          more info"},{"lineNumber":11,"author":{"gitId":"-"},"content":"        \u003c/a\u003e"},{"lineNumber":12,"author":{"gitId":"weiquu"},"content":"      \u003c/div\u003e"},{"lineNumber":13,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":14,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":15,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"col-12\"\u003e"},{"lineNumber":16,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"form-check form-check-inline\"\u003e"},{"lineNumber":17,"author":{"gitId":"weiquu"},"content":"      \u003cdiv class\u003d\"form-check-label\"\u003e"},{"lineNumber":18,"author":{"gitId":"-"},"content":"        \u003cinput id\u003d\"not-sure-checkbox\" class\u003d\"form-check-input\" type\u003d\"checkbox\" [ngModel]\u003d\"model.isNotSureAllowed\" (ngModelChange)\u003d\"triggerModelChange(\u0027isNotSureAllowed\u0027, $event)\" [disabled]\u003d\"model.isZeroSum || !isEditable\"\u003e"},{"lineNumber":19,"author":{"gitId":"weiquu"},"content":"        \u003clabel for\u003d\"not-sure-checkbox\" class\u003d\"ngb-tooltip-class fw-bold\" ngbTooltip\u003d\"Not applicable if the zero-sum option is enabled\""},{"lineNumber":20,"author":{"gitId":"weiquu"},"content":"           [ngClass]\u003d\"{\u0027text-muted\u0027: model.isZeroSum || !isEditable}\"\u003eAllow response giver to select \u0027Not Sure\u0027 as the answer\u003c/label\u003e"},{"lineNumber":21,"author":{"gitId":"weiquu"},"content":"      \u003c/div\u003e"},{"lineNumber":22,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":23,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":24,"author":{"gitId":"-"},"content":"\u003c/div\u003e"}],"authorContributionMap":{"weiquu":7,"-":17}},{"path":"src/web/app/components/question-types/question-edit-details-form/mcq-field/mcq-field.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"input-group\"\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  \u003cspan class\u003d\"input-group-addon\" *ngIf\u003d\"!isQuestionDropdownEnabled\"\u003e"},{"lineNumber":3,"author":{"gitId":"-"},"content":"    \u003cinput type\u003d\"radio\" disabled\u003e"},{"lineNumber":4,"author":{"gitId":"-"},"content":"  \u003c/span\u003e"},{"lineNumber":5,"author":{"gitId":"-"},"content":"  \u003cinput type\u003d\"text\" class\u003d\"form-control\" [disabled]\u003d\"!isEditable\" [ngModel]\u003d\"text\" #mcq"},{"lineNumber":6,"author":{"gitId":"weiquu"},"content":"         (ngModelChange)\u003d\"onMcqOptionEntered($event.trim())\" aria-label\u003d\"Option\"\u003e"},{"lineNumber":7,"author":{"gitId":"-"},"content":"  \u003cspan class\u003d\"input-group-btn\"\u003e"},{"lineNumber":8,"author":{"gitId":"-"},"content":"    \u003cbutton type\u003d\"button\" class\u003d\"btn btn-danger input-group-addon\" style\u003d\"cursor: initial;\""},{"lineNumber":9,"author":{"gitId":"weiquu"},"content":"            [disabled]\u003d\"!isEditable\" (click)\u003d\"deleteMcqOption()\" aria-label\u003d\"Delete Option\"\u003e"},{"lineNumber":10,"author":{"gitId":"-"},"content":"      \u003cspan aria-hidden\u003d\"true\"\u003e\u0026times;\u003c/span\u003e"},{"lineNumber":11,"author":{"gitId":"-"},"content":"    \u003c/button\u003e"},{"lineNumber":12,"author":{"gitId":"-"},"content":"  \u003c/span\u003e"},{"lineNumber":13,"author":{"gitId":"-"},"content":"\u003c/div\u003e"}],"authorContributionMap":{"weiquu":2,"-":11}},{"path":"src/web/app/components/question-types/question-edit-details-form/mcq-question-edit-details-form.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"row\"\u003e"},{"lineNumber":2,"author":{"gitId":"weiquu"},"content":"  \u003cdiv class\u003d\"col-md-12\"\u003e"},{"lineNumber":3,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"form-check\"\u003e"},{"lineNumber":4,"author":{"gitId":"weiquu"},"content":"      \u003clabel class\u003d\"fw-bold\"\u003e"},{"lineNumber":5,"author":{"gitId":"-"},"content":"        \u003cinput id\u003d\"make-question-dropdown\" class\u003d\"form-check-input\" type\u003d\"checkbox\" [ngModel]\u003d\"model.questionDropdownEnabled\" checked\u003d\"model.questionDropdownEnabled\""},{"lineNumber":6,"author":{"gitId":"-"},"content":"               (ngModelChange)\u003d\"triggerQuestionDropdownEnabled($event)\" [disabled]\u003d\"!isEditable\"\u003e"},{"lineNumber":7,"author":{"gitId":"weiquu"},"content":"        Show options as a drop-down"},{"lineNumber":8,"author":{"gitId":"-"},"content":"      \u003c/label\u003e"},{"lineNumber":9,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":10,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":11,"author":{"gitId":"weiquu"},"content":"  \u003cdiv class\u003d\"col-md-6\"\u003e"},{"lineNumber":12,"author":{"gitId":"weiquu"},"content":"    \u003cdiv class\u003d\"col-md-12\"\u003e"},{"lineNumber":13,"author":{"gitId":"weiquu"},"content":"      \u003cdiv class\u003d\"form-check form-check-inline\" *ngIf\u003d\"!isGeneratedOptionsEnabled\"\u003e"},{"lineNumber":14,"author":{"gitId":"-"},"content":"        \u003clabel class\u003d\"form-check-label ngb-tooltip-class fw-bold\" ngbTooltip\u003d\"Assign weights to the choices for calculating statistics.\""},{"lineNumber":15,"author":{"gitId":"-"},"content":"               container\u003d\"body\"\u003e"},{"lineNumber":16,"author":{"gitId":"-"},"content":"          \u003cinput id\u003d\"weights-checkbox\" class\u003d\"form-check-input\" type\u003d\"checkbox\" [ngModel]\u003d\"model.hasAssignedWeights\""},{"lineNumber":17,"author":{"gitId":"-"},"content":"                 [disabled]\u003d\"!isEditable\""},{"lineNumber":18,"author":{"gitId":"-"},"content":"                 (ngModelChange)\u003d\"triggerWeightsColumn($event)\""},{"lineNumber":19,"author":{"gitId":"-"},"content":"                 \u003e"},{"lineNumber":20,"author":{"gitId":"weiquu"},"content":"          Options are weighted"},{"lineNumber":21,"author":{"gitId":"-"},"content":"        \u003c/label\u003e"},{"lineNumber":22,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":23,"author":{"gitId":"weiquu"},"content":"      \u003cdiv class\u003d\"form-check float-end\" *ngIf\u003d\"model.hasAssignedWeights \u0026\u0026 !isGeneratedOptionsEnabled\" aria-hidden\u003d\"true\"\u003e"},{"lineNumber":24,"author":{"gitId":"-"},"content":"        Weights \u0026#8595;"},{"lineNumber":25,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":26,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":27,"author":{"gitId":"weiquu"},"content":"    \u003cdiv *ngIf\u003d\"!isGeneratedOptionsEnabled\" class\u003d\"row\"\u003e"},{"lineNumber":28,"author":{"gitId":"-"},"content":"      \u003cdiv id\u003d\"options-section\" cdkDropList (cdkDropListDropped)\u003d\"onMcqOptionDropped($event)\" [cdkDropListDisabled]\u003d\"!isEditable\"\u003e"},{"lineNumber":29,"author":{"gitId":"weiquu"},"content":"        \u003cdiv class\u003d\"margin-top-22px d-flex\" *ngFor\u003d\"let num of model.mcqChoices; let i \u003d index;"},{"lineNumber":30,"author":{"gitId":"weiquu"},"content":"        trackBy: trackMcqOption\" cdkDrag cdkDragLockAxis\u003d\"y\"\u003e"},{"lineNumber":31,"author":{"gitId":"weiquu"},"content":"          \u003cdiv cdkDragHandle aria-hidden\u003d\"true\"\u003e"},{"lineNumber":32,"author":{"gitId":"-"},"content":"            \u003cspan class\u003d\"btn input-group-addon\"\u003e\u0026#8597;\u003c/span\u003e"},{"lineNumber":33,"author":{"gitId":"-"},"content":"          \u003c/div\u003e"},{"lineNumber":34,"author":{"gitId":"weiquu"},"content":"          \u003cdiv class\u003d\"flex-grow-1\"\u003e"},{"lineNumber":35,"author":{"gitId":"-"},"content":"            \u003ctm-mcq-field (elementDeleted)\u003d\"onMcqOptionDeleted($event)\""},{"lineNumber":36,"author":{"gitId":"-"},"content":"                          (mcqText)\u003d\"onMcqOptionEntered($event, i)\""},{"lineNumber":37,"author":{"gitId":"-"},"content":"                          [index]\u003d\"i\""},{"lineNumber":38,"author":{"gitId":"-"},"content":"                          [isEditable]\u003d\"isEditable\""},{"lineNumber":39,"author":{"gitId":"-"},"content":"                          [numberOfMcqChoices]\u003d\"model.mcqChoices.length\""},{"lineNumber":40,"author":{"gitId":"-"},"content":"                          [text]\u003d\"model.mcqChoices[i]\""},{"lineNumber":41,"author":{"gitId":"-"},"content":"                          [isQuestionDropdownEnabled]\u003d\"this.model.questionDropdownEnabled\"\u003e\u003c/tm-mcq-field\u003e"},{"lineNumber":42,"author":{"gitId":"-"},"content":"          \u003c/div\u003e"},{"lineNumber":43,"author":{"gitId":"weiquu"},"content":"          \u003cdiv class\u003d\"col-2\" *ngIf\u003d\"model.hasAssignedWeights\"\u003e"},{"lineNumber":44,"author":{"gitId":"-"},"content":"            \u003ctm-weight-field [isEditable]\u003d\"isEditable\""},{"lineNumber":45,"author":{"gitId":"-"},"content":"                            [weight]\u003d\"model.mcqWeights[i]\""},{"lineNumber":46,"author":{"gitId":"-"},"content":"                            (weightEntered)\u003d\"onMcqWeightEntered($event, i)\"\u003e\u003c/tm-weight-field\u003e"},{"lineNumber":47,"author":{"gitId":"-"},"content":"          \u003c/div\u003e"},{"lineNumber":48,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":49,"author":{"gitId":"-"},"content":"        \u003cbr\u003e"},{"lineNumber":50,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":51,"author":{"gitId":"weiquu"},"content":"      \u003cdiv class\u003d\"mb-2\"\u003e"},{"lineNumber":52,"author":{"gitId":"-"},"content":"        \u003cbutton id\u003d\"btn-add-option\" class\u003d\"btn btn-primary\" name\u003d\"button\" ngDefaultControl"},{"lineNumber":53,"author":{"gitId":"-"},"content":"                [disabled]\u003d\"!isEditable\" (click)\u003d\"increaseNumberOfOptions()\"\u003e"},{"lineNumber":54,"author":{"gitId":"weiquu"},"content":"          \u003ci class\u003d\"fas fa-plus\"\u003e\u003c/i\u003e Add More Options"},{"lineNumber":55,"author":{"gitId":"-"},"content":"        \u003c/button\u003e"},{"lineNumber":56,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":57,"author":{"gitId":"weiquu"},"content":"      \u003cdiv class\u003d\"mb-2 ps-5\"\u003e"},{"lineNumber":58,"author":{"gitId":"weiquu"},"content":"        \u003cdiv class\u003d\"checkbox\"\u003e"},{"lineNumber":59,"author":{"gitId":"-"},"content":"          \u003clabel class\u003d\"bold-label\"\u003e"},{"lineNumber":60,"author":{"gitId":"-"},"content":"            \u003cinput id\u003d\"other-checkbox\" class\u003d\"form-check-input\" type\u003d\"checkbox\" [ngModel]\u003d\"model.otherEnabled\""},{"lineNumber":61,"author":{"gitId":"-"},"content":"                  (ngModelChange)\u003d\"triggerOtherEnabled($event)\" [disabled]\u003d\"!isEditable\"\u003e"},{"lineNumber":62,"author":{"gitId":"-"},"content":"            Add \u0027Other\u0027 option (Allows respondents to type in their own answer)"},{"lineNumber":63,"author":{"gitId":"-"},"content":"          \u003c/label\u003e"},{"lineNumber":64,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":65,"author":{"gitId":"weiquu"},"content":"        \u003cdiv class\u003d\"col-md-3\" *ngIf\u003d\"model.hasAssignedWeights \u0026\u0026 model.otherEnabled\"\u003e"},{"lineNumber":66,"author":{"gitId":"-"},"content":"          \u003cinput id\u003d\"other-weight\" type\u003d\"number\" class\u003d\"form-control\" step\u003d\"0.01\" min\u003d\"0\" [ngModel]\u003d\"model.mcqOtherWeight\""},{"lineNumber":67,"author":{"gitId":"weiquu"},"content":"                (ngModelChange)\u003d\"triggerModelChange(\u0027mcqOtherWeight\u0027, $event)\" [disabled]\u003d\"!isEditable\" aria-label\u003d\"Weight of Other Option\"\u003e"},{"lineNumber":68,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":69,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":70,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":71,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":72,"author":{"gitId":"weiquu"},"content":"  \u003cdiv class\u003d\"col-md-6 col-lg-5 col-lg-offset-1 form\"\u003e"},{"lineNumber":73,"author":{"gitId":"weiquu"},"content":"    \u003cdiv class\u003d\"form-check\"\u003e"},{"lineNumber":74,"author":{"gitId":"weiquu"},"content":"      \u003clabel class\u003d\"form-check-label fw-bold\"\u003e"},{"lineNumber":75,"author":{"gitId":"-"},"content":"        \u003cinput id\u003d\"generate-checkbox\" class\u003d\"form-check-input\" type\u003d\"checkbox\"  [disabled]\u003d\"!isEditable\""},{"lineNumber":76,"author":{"gitId":"-"},"content":"            [ngModel]\u003d\"isGeneratedOptionsEnabled\""},{"lineNumber":77,"author":{"gitId":"-"},"content":"            (ngModelChange)\u003d\"triggerGeneratedOptionsChange($event)\"\u003e"},{"lineNumber":78,"author":{"gitId":"weiquu"},"content":"        Or, generate options from the list of all"},{"lineNumber":79,"author":{"gitId":"-"},"content":"      \u003c/label\u003e"},{"lineNumber":80,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":81,"author":{"gitId":"-"},"content":"    \u003cselect id\u003d\"generate-dropdown\" class\u003d\"form-control form-select\" [disabled]\u003d\"!isGeneratedOptionsEnabled || !isEditable\""},{"lineNumber":82,"author":{"gitId":"weiquu"},"content":"          [ngModel]\u003d\"model.generateOptionsFor\" (ngModelChange)\u003d\"triggerModelChange(\u0027generateOptionsFor\u0027, $event)\" aria-label\u003d\"Generate Option List Dropdown\"\u003e"},{"lineNumber":83,"author":{"gitId":"-"},"content":"      \u003coption *ngFor\u003d\"let option of PARTICIPANT_TYPES\" [value]\u003d\"option\"\u003e{{ option | generatedChoice }}\u003c/option\u003e"},{"lineNumber":84,"author":{"gitId":"-"},"content":"    \u003c/select\u003e"},{"lineNumber":85,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":86,"author":{"gitId":"-"},"content":"\u003c/div\u003e"}],"authorContributionMap":{"weiquu":25,"-":61}},{"path":"src/web/app/components/question-types/question-edit-details-form/msq-field/msq-field.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"input-group\"\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  \u003cspan class\u003d\"input-group-addon\"\u003e"},{"lineNumber":3,"author":{"gitId":"-"},"content":"    \u003cinput type\u003d\"checkbox\" disabled\u003e"},{"lineNumber":4,"author":{"gitId":"-"},"content":"  \u003c/span\u003e"},{"lineNumber":5,"author":{"gitId":"-"},"content":"  \u003cinput type\u003d\"text\" class\u003d\"form-control\" [disabled]\u003d\"!isEditable\" [ngModel]\u003d\"text\" #msq"},{"lineNumber":6,"author":{"gitId":"weiquu"},"content":"         (ngModelChange)\u003d\"onMsqOptionEntered($event.trim())\" aria-label\u003d\"Option\"\u003e"},{"lineNumber":7,"author":{"gitId":"-"},"content":"  \u003cspan class\u003d\"input-group-btn\"\u003e"},{"lineNumber":8,"author":{"gitId":"weiquu"},"content":"    \u003cbutton type\u003d\"button\" class\u003d\"btn btn-danger input-group-addon\" style\u003d\"cursor: initial;\""},{"lineNumber":9,"author":{"gitId":"weiquu"},"content":"            [disabled]\u003d\"!isEditable\" (click)\u003d\"deleteMsqOption()\" aria-label\u003d\"Delete Option\"\u003e"},{"lineNumber":10,"author":{"gitId":"-"},"content":"      \u003cspan aria-hidden\u003d\"true\"\u003e\u0026times;\u003c/span\u003e"},{"lineNumber":11,"author":{"gitId":"-"},"content":"    \u003c/button\u003e"},{"lineNumber":12,"author":{"gitId":"-"},"content":"  \u003c/span\u003e"},{"lineNumber":13,"author":{"gitId":"-"},"content":"\u003c/div\u003e"}],"authorContributionMap":{"weiquu":3,"-":10}},{"path":"src/web/app/components/question-types/question-edit-details-form/msq-question-edit-details-form.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"row\"\u003e"},{"lineNumber":2,"author":{"gitId":"weiquu"},"content":"  \u003cdiv class\u003d\"col-md-6\"\u003e"},{"lineNumber":3,"author":{"gitId":"weiquu"},"content":"    \u003cdiv class\u003d\"col-md-12\"\u003e"},{"lineNumber":4,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"form-check form-check-inline\" *ngIf\u003d\"!isGeneratedOptionsEnabled\"\u003e"},{"lineNumber":5,"author":{"gitId":"-"},"content":"        \u003clabel class\u003d\"form-check-label ngb-tooltip-class fw-bold\" ngbTooltip\u003d\"Assign weights to the choices for calculating statistics.\""},{"lineNumber":6,"author":{"gitId":"-"},"content":"              container\u003d\"body\"\u003e"},{"lineNumber":7,"author":{"gitId":"-"},"content":"          \u003cinput id\u003d\"weights-checkbox\" class\u003d\"form-check-input\" type\u003d\"checkbox\" [ngModel]\u003d\"model.hasAssignedWeights\""},{"lineNumber":8,"author":{"gitId":"-"},"content":"                [disabled]\u003d\"!isEditable\" (ngModelChange)\u003d\"triggerWeightsColumn($event)\"\u003e"},{"lineNumber":9,"author":{"gitId":"weiquu"},"content":"          Options are weighted"},{"lineNumber":10,"author":{"gitId":"-"},"content":"        \u003c/label\u003e"},{"lineNumber":11,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":12,"author":{"gitId":"-"},"content":"      \u003cdiv *ngIf\u003d\"model.hasAssignedWeights \u0026\u0026 !isGeneratedOptionsEnabled\""},{"lineNumber":13,"author":{"gitId":"weiquu"},"content":"          class\u003d\"form-check float-end\" aria-hidden\u003d\"true\"\u003eWeights\u0026#8595;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":15,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":16,"author":{"gitId":"weiquu"},"content":"    \u003cdiv *ngIf\u003d\"!isGeneratedOptionsEnabled\" class\u003d\"row\"\u003e"},{"lineNumber":17,"author":{"gitId":"-"},"content":"      \u003cdiv id\u003d\"options-section\" cdkDropList (cdkDropListDropped)\u003d\"onMsqOptionDropped($event)\" [cdkDropListDisabled]\u003d\"!isEditable\"\u003e"},{"lineNumber":18,"author":{"gitId":"weiquu"},"content":"        \u003cdiv class\u003d\"margin-top-22px d-flex\" *ngFor\u003d\"let num of model.msqChoices; let i \u003d index; trackBy: trackMsqOption\" cdkDrag cdkDragLockAxis\u003d\"y\"\u003e"},{"lineNumber":19,"author":{"gitId":"weiquu"},"content":"          \u003cdiv cdkDragHandle aria-hidden\u003d\"true\"\u003e"},{"lineNumber":20,"author":{"gitId":"-"},"content":"            \u003cspan class\u003d\"btn input-group-addon\"\u003e\u0026#8597; \u003c/span\u003e"},{"lineNumber":21,"author":{"gitId":"-"},"content":"          \u003c/div\u003e"},{"lineNumber":22,"author":{"gitId":"weiquu"},"content":"          \u003cdiv class\u003d\"flex-grow-1\"\u003e"},{"lineNumber":23,"author":{"gitId":"-"},"content":"            \u003ctm-msq-field (elementDeleted)\u003d\"onMsqOptionDeleted($event)\""},{"lineNumber":24,"author":{"gitId":"-"},"content":"                          (msqText)\u003d\"onMsqOptionEntered($event, i)\""},{"lineNumber":25,"author":{"gitId":"-"},"content":"                          [index]\u003d\"i\""},{"lineNumber":26,"author":{"gitId":"-"},"content":"                          [isEditable]\u003d\"isEditable\""},{"lineNumber":27,"author":{"gitId":"-"},"content":"                          [numberOfMsqChoices]\u003d\"model.msqChoices.length\""},{"lineNumber":28,"author":{"gitId":"-"},"content":"                          [text]\u003d\"model.msqChoices[i]\"\u003e\u003c/tm-msq-field\u003e"},{"lineNumber":29,"author":{"gitId":"-"},"content":"          \u003c/div\u003e"},{"lineNumber":30,"author":{"gitId":"weiquu"},"content":"          \u003cdiv class\u003d\"col-2\" *ngIf\u003d\"model.hasAssignedWeights\"\u003e"},{"lineNumber":31,"author":{"gitId":"-"},"content":"            \u003ctm-weight-field [isEditable]\u003d\"isEditable\""},{"lineNumber":32,"author":{"gitId":"-"},"content":"                             [weight]\u003d\"model.msqWeights[i]\""},{"lineNumber":33,"author":{"gitId":"-"},"content":"                             (weightEntered)\u003d\"onMsqWeightEntered($event, i)\"\u003e\u003c/tm-weight-field\u003e"},{"lineNumber":34,"author":{"gitId":"-"},"content":"          \u003c/div\u003e"},{"lineNumber":35,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":36,"author":{"gitId":"-"},"content":"        \u003cbr\u003e"},{"lineNumber":37,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":38,"author":{"gitId":"weiquu"},"content":"      \u003cdiv class\u003d\"mb-2\"\u003e"},{"lineNumber":39,"author":{"gitId":"-"},"content":"        \u003cbutton id\u003d\"btn-add-option\" class\u003d\"btn btn-primary\" name\u003d\"button\" ngDefaultControl"},{"lineNumber":40,"author":{"gitId":"-"},"content":"                [disabled]\u003d\"!isEditable\" (click)\u003d\"increaseNumberOfMsqOptions()\"\u003e"},{"lineNumber":41,"author":{"gitId":"weiquu"},"content":"          \u003ci class\u003d\"fas fa-plus\"\u003e\u003c/i\u003e Add More Options"},{"lineNumber":42,"author":{"gitId":"-"},"content":"        \u003c/button\u003e"},{"lineNumber":43,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":44,"author":{"gitId":"weiquu"},"content":"      \u003cdiv class\u003d\"mb-2 ps-5\"\u003e"},{"lineNumber":45,"author":{"gitId":"weiquu"},"content":"        \u003cdiv class\u003d\"checkbox\"\u003e"},{"lineNumber":46,"author":{"gitId":"-"},"content":"          \u003clabel class\u003d\"bold-label\"\u003e"},{"lineNumber":47,"author":{"gitId":"-"},"content":"            \u003cinput id\u003d\"other-checkbox\" class\u003d\"form-check-input\" type\u003d\"checkbox\" [ngModel]\u003d\"model.otherEnabled\""},{"lineNumber":48,"author":{"gitId":"-"},"content":"                   (ngModelChange)\u003d\"triggerOtherEnabled($event)\" [disabled]\u003d\"!isEditable\"\u003e"},{"lineNumber":49,"author":{"gitId":"-"},"content":"            Add \u0027Other\u0027 option (Allows respondents to type in their own answer)"},{"lineNumber":50,"author":{"gitId":"-"},"content":"          \u003c/label\u003e"},{"lineNumber":51,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":52,"author":{"gitId":"weiquu"},"content":"        \u003cdiv class\u003d\"col-md-3\" *ngIf\u003d\"model.hasAssignedWeights \u0026\u0026 model.otherEnabled\"\u003e"},{"lineNumber":53,"author":{"gitId":"-"},"content":"          \u003cinput id\u003d\"other-weight\" type\u003d\"number\" class\u003d\"form-control\" step\u003d\"0.01\" min\u003d\"0\" [ngModel]\u003d\"model.msqOtherWeight\""},{"lineNumber":54,"author":{"gitId":"weiquu"},"content":"                 (ngModelChange)\u003d\"triggerModelChange(\u0027msqOtherWeight\u0027, $event)\" [disabled]\u003d\"!isEditable\" aria-label\u003d\"Weight of Other Option\"\u003e"},{"lineNumber":55,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":56,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":57,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":58,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":59,"author":{"gitId":"weiquu"},"content":"  \u003cdiv class\u003d\"col-md-6 col-lg-5 col-lg-offset-1 form\"\u003e"},{"lineNumber":60,"author":{"gitId":"weiquu"},"content":"    \u003cdiv class\u003d\"form-check\"\u003e"},{"lineNumber":61,"author":{"gitId":"weiquu"},"content":"      \u003clabel class\u003d\"form-check-label fw-bold\"\u003e"},{"lineNumber":62,"author":{"gitId":"-"},"content":"        \u003cinput id\u003d\"generate-checkbox\" class\u003d\"form-check-input\" type\u003d\"checkbox\" [disabled]\u003d\"!isEditable\""},{"lineNumber":63,"author":{"gitId":"-"},"content":"              [ngModel]\u003d\"isGeneratedOptionsEnabled\""},{"lineNumber":64,"author":{"gitId":"-"},"content":"              (ngModelChange)\u003d\"triggerGeneratedOptionsChange($event)\"\u003e"},{"lineNumber":65,"author":{"gitId":"weiquu"},"content":"        Or, generate options from the list of all"},{"lineNumber":66,"author":{"gitId":"-"},"content":"      \u003c/label\u003e"},{"lineNumber":67,"author":{"gitId":"weiquu"},"content":"    \u003c/div\u003e"},{"lineNumber":68,"author":{"gitId":"-"},"content":"    \u003cselect id\u003d\"generate-dropdown\" class\u003d\"form-control form-select\" [disabled]\u003d\"!isGeneratedOptionsEnabled || !isEditable\""},{"lineNumber":69,"author":{"gitId":"weiquu"},"content":"            [ngModel]\u003d\"model.generateOptionsFor\" (ngModelChange)\u003d\"triggerModelChange(\u0027generateOptionsFor\u0027, $event)\" aria-label\u003d\"Generate Option List Dropdown\"\u003e"},{"lineNumber":70,"author":{"gitId":"-"},"content":"      \u003coption *ngFor\u003d\"let option of PARTICIPANT_TYPES\" [value]\u003d\"option\"\u003e{{ option | generatedChoice }}\u003c/option\u003e"},{"lineNumber":71,"author":{"gitId":"-"},"content":"    \u003c/select\u003e"},{"lineNumber":72,"author":{"gitId":"-"},"content":"    \u003cbr\u003e"},{"lineNumber":73,"author":{"gitId":"weiquu"},"content":"    \u003cdiv class\u003d\"form-check\"\u003e"},{"lineNumber":74,"author":{"gitId":"weiquu"},"content":"      \u003clabel class\u003d\"form-check-label fw-bold\"\u003e"},{"lineNumber":75,"author":{"gitId":"-"},"content":"        \u003cinput id\u003d\"max-options-checkbox\" class\u003d\"form-check-input\" type\u003d\"checkbox\" [disabled]\u003d\"!isEditable\""},{"lineNumber":76,"author":{"gitId":"-"},"content":"              [ngModel]\u003d\"isMaxSelectableChoicesEnabled\""},{"lineNumber":77,"author":{"gitId":"-"},"content":"              (ngModelChange)\u003d\"triggerMaxSelectableOptionsChange($event)\"\u003e"},{"lineNumber":78,"author":{"gitId":"weiquu"},"content":"        Maximum number of options a respondent is allowed to select"},{"lineNumber":79,"author":{"gitId":"-"},"content":"      \u003c/label\u003e"},{"lineNumber":80,"author":{"gitId":"weiquu"},"content":"    \u003c/div\u003e"},{"lineNumber":81,"author":{"gitId":"-"},"content":"    \u003cinput id\u003d\"max-options\" type\u003d\"number\" class\u003d\"form-control\" [disabled]\u003d\"!isMaxSelectableChoicesEnabled || !isEditable\""},{"lineNumber":82,"author":{"gitId":"-"},"content":"           [ngModel]\u003d\"displayValueForMaxSelectableOption\""},{"lineNumber":83,"author":{"gitId":"-"},"content":"           (ngModelChange)\u003d\"triggerModelChange(\u0027maxSelectableChoices\u0027, $event)\""},{"lineNumber":84,"author":{"gitId":"-"},"content":"           [min]\u003d\"isMinSelectableChoicesEnabled ? model.minSelectableChoices : 2\""},{"lineNumber":85,"author":{"gitId":"weiquu"},"content":"           [max]\u003d\"totalSelectableChoices\""},{"lineNumber":86,"author":{"gitId":"weiquu"},"content":"           aria-label\u003d\"Max Number of Options\"\u003e"},{"lineNumber":87,"author":{"gitId":"-"},"content":"    \u003cbr\u003e"},{"lineNumber":88,"author":{"gitId":"weiquu"},"content":"    \u003cdiv class\u003d\"form-check\"\u003e"},{"lineNumber":89,"author":{"gitId":"weiquu"},"content":"      \u003clabel class\u003d\"form-check-label fw-bold\"\u003e"},{"lineNumber":90,"author":{"gitId":"-"},"content":"        \u003cinput id\u003d\"min-options-checkbox\" class\u003d\"form-check-input\" type\u003d\"checkbox\" [disabled]\u003d\"!isEditable\""},{"lineNumber":91,"author":{"gitId":"-"},"content":"              [ngModel]\u003d\"isMinSelectableChoicesEnabled\""},{"lineNumber":92,"author":{"gitId":"-"},"content":"              (ngModelChange)\u003d\"triggerMinSelectableOptionsChange($event)\"\u003e"},{"lineNumber":93,"author":{"gitId":"weiquu"},"content":"        Minimum number of options a respondent is allowed to select"},{"lineNumber":94,"author":{"gitId":"-"},"content":"      \u003c/label\u003e"},{"lineNumber":95,"author":{"gitId":"weiquu"},"content":"    \u003c/div\u003e"},{"lineNumber":96,"author":{"gitId":"-"},"content":"    \u003cinput id\u003d\"min-options\" type\u003d\"number\" class\u003d\"form-control\" [disabled]\u003d\"!isMinSelectableChoicesEnabled || !isEditable\""},{"lineNumber":97,"author":{"gitId":"-"},"content":"           [ngModel]\u003d\"displayValueForMinSelectableOption\""},{"lineNumber":98,"author":{"gitId":"weiquu"},"content":"           (ngModelChange)\u003d\"triggerModelChange(\u0027minSelectableChoices\u0027, $event)\""},{"lineNumber":99,"author":{"gitId":"weiquu"},"content":"           min\u003d\"1\""},{"lineNumber":100,"author":{"gitId":"weiquu"},"content":"           [max]\u003d\"maxMinSelectableValue\""},{"lineNumber":101,"author":{"gitId":"weiquu"},"content":"           aria-label\u003d\"Max Number of Options\"\u003e"},{"lineNumber":102,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":103,"author":{"gitId":"-"},"content":"\u003c/div\u003e"}],"authorContributionMap":{"weiquu":35,"-":68}},{"path":"src/web/app/components/question-types/question-edit-details-form/rank-options-field/rank-options-field.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"input-group\"\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  \u003cinput type\u003d\"text\" class\u003d\"form-control\" [disabled]\u003d\"!isEditable\" [ngModel]\u003d\"text\""},{"lineNumber":3,"author":{"gitId":"jasonqiu212"},"content":"         (ngModelChange)\u003d\"onRankOptionEntered($event.trim())\" aria-label\u003d\"Option\"\u003e"},{"lineNumber":4,"author":{"gitId":"-"},"content":"  \u003cspan class\u003d\"input-group-btn\"\u003e"},{"lineNumber":5,"author":{"gitId":"jasonqiu212"},"content":"    \u003cbutton type\u003d\"button\" class\u003d\"btn btn-danger input-group-addon\" style\u003d\"cursor: initial;\""},{"lineNumber":6,"author":{"gitId":"jasonqiu212"},"content":"            [disabled]\u003d\"!isEditable\" (click)\u003d\"deleteRankOption()\" aria-label\u003d\"Delete Option\"\u003e"},{"lineNumber":7,"author":{"gitId":"-"},"content":"      \u003cspan aria-hidden\u003d\"true\"\u003e\u0026times;\u003c/span\u003e"},{"lineNumber":8,"author":{"gitId":"-"},"content":"    \u003c/button\u003e"},{"lineNumber":9,"author":{"gitId":"-"},"content":"  \u003c/span\u003e"},{"lineNumber":10,"author":{"gitId":"-"},"content":"\u003c/div\u003e"}],"authorContributionMap":{"jasonqiu212":3,"-":7}},{"path":"src/web/app/components/question-types/question-edit-details-form/rank-options-question-edit-details-form.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"row\"\u003e"},{"lineNumber":2,"author":{"gitId":"jasonqiu212"},"content":"  \u003cdiv class\u003d\"col-md-6\"\u003e"},{"lineNumber":3,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"row\"\u003e"},{"lineNumber":4,"author":{"gitId":"jasonqiu212"},"content":"      \u003cdiv id\u003d\"options-section\" cdkDropList (cdkDropListDropped)\u003d\"onRankOptionDropped($event)\" [cdkDropListDisabled]\u003d\"!isEditable\"\u003e"},{"lineNumber":5,"author":{"gitId":"jasonqiu212"},"content":"        \u003cdiv class\u003d\"mb-3 d-flex\" *ngFor\u003d\"let num of model.options; let i \u003d index;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"        trackBy: trackRankOption\" cdkDrag cdkDragLockAxis\u003d\"y\"\u003e"},{"lineNumber":7,"author":{"gitId":"jasonqiu212"},"content":"          \u003cdiv cdkDragHandle aria-hidden\u003d\"true\"\u003e"},{"lineNumber":8,"author":{"gitId":"jasonqiu212"},"content":"            \u003cspan class\u003d\"btn input-group-addon\"\u003e\u0026#8597; \u003c/span\u003e"},{"lineNumber":9,"author":{"gitId":"-"},"content":"          \u003c/div\u003e"},{"lineNumber":10,"author":{"gitId":"-"},"content":"          \u003cdiv class\u003d\"flex-grow-1\"\u003e"},{"lineNumber":11,"author":{"gitId":"-"},"content":"            \u003ctm-rank-options-field (elementDeleted)\u003d\"onRankOptionDeleted($event)\""},{"lineNumber":12,"author":{"gitId":"-"},"content":"                                  [isEditable]\u003d\"isEditable\""},{"lineNumber":13,"author":{"gitId":"-"},"content":"                                  [index]\u003d\"i\""},{"lineNumber":14,"author":{"gitId":"-"},"content":"                                  [numberOfRankChoices]\u003d\"model.options.length\""},{"lineNumber":15,"author":{"gitId":"-"},"content":"                                  (rankOptionText)\u003d\"onRankOptionEntered($event, i)\""},{"lineNumber":16,"author":{"gitId":"-"},"content":"                                  [text]\u003d\"model.options[i]\"\u003e\u003c/tm-rank-options-field\u003e"},{"lineNumber":17,"author":{"gitId":"-"},"content":"          \u003c/div\u003e"},{"lineNumber":18,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":19,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":20,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":21,"author":{"gitId":"jasonqiu212"},"content":"    \u003cdiv class\u003d\"mb-2\"\u003e"},{"lineNumber":22,"author":{"gitId":"-"},"content":"      \u003cbutton id\u003d\"btn-add-option\" class\u003d\"btn btn-primary\" name\u003d\"button\" ngDefaultControl"},{"lineNumber":23,"author":{"gitId":"-"},"content":"              [disabled]\u003d\"!isEditable\" (click)\u003d\"increaseNumberOfRankOptions()\"\u003e"},{"lineNumber":24,"author":{"gitId":"jasonqiu212"},"content":"        \u003ci class\u003d\"fas fa-plus\"\u003e\u003c/i\u003e Add More Options"},{"lineNumber":25,"author":{"gitId":"-"},"content":"      \u003c/button\u003e"},{"lineNumber":26,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":27,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":28,"author":{"gitId":"jasonqiu212"},"content":"  \u003cdiv class\u003d\"col-md-6 col-lg-5 col-lg-offset-1 form\"\u003e"},{"lineNumber":29,"author":{"gitId":"jasonqiu212"},"content":"    \u003cdiv class\u003d\"form-check\"\u003e"},{"lineNumber":30,"author":{"gitId":"jasonqiu212"},"content":"      \u003clabel class\u003d\"form-check-label fw-bold\"\u003e"},{"lineNumber":31,"author":{"gitId":"-"},"content":"        \u003cinput id\u003d\"duplicate-rank-checkbox\" class\u003d\"form-check-input\" type\u003d\"checkbox\"  [ngModel]\u003d\"model.areDuplicatesAllowed\""},{"lineNumber":32,"author":{"gitId":"-"},"content":"           (ngModelChange)\u003d\"triggerModelChange(\u0027areDuplicatesAllowed\u0027, $event)\" [disabled]\u003d\"!isEditable\"\u003e"},{"lineNumber":33,"author":{"gitId":"jasonqiu212"},"content":"        Allow response giver to give the same rank to multiple options"},{"lineNumber":34,"author":{"gitId":"-"},"content":"      \u003c/label\u003e"},{"lineNumber":35,"author":{"gitId":"jasonqiu212"},"content":"    \u003c/div\u003e"},{"lineNumber":36,"author":{"gitId":"jasonqiu212"},"content":"    \u003cdiv class\u003d\"form-check\"\u003e"},{"lineNumber":37,"author":{"gitId":"jasonqiu212"},"content":"      \u003clabel id\u003d\"rank-options-question-min-options-label\" class\u003d\"form-check-label fw-bold\"\u003e"},{"lineNumber":38,"author":{"gitId":"-"},"content":"        \u003cinput id\u003d\"min-options-checkbox\" class\u003d\"form-check-input\" type\u003d\"checkbox\" [disabled]\u003d\"!isEditable\""},{"lineNumber":39,"author":{"gitId":"-"},"content":"                [ngModel]\u003d\"isMinOptionsToBeRankedEnabled\""},{"lineNumber":40,"author":{"gitId":"-"},"content":"                (ngModelChange)\u003d\"triggerMinOptionsToBeRankedChange($event)\"\u003e"},{"lineNumber":41,"author":{"gitId":"jasonqiu212"},"content":"        Minimum number of options a respondent must rank"},{"lineNumber":42,"author":{"gitId":"-"},"content":"      \u003c/label\u003e"},{"lineNumber":43,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":44,"author":{"gitId":"jasonqiu212"},"content":"    \u003cinput id\u003d\"min-options\" type\u003d\"number\" class\u003d\"form-control\" [disabled]\u003d\"!isMinOptionsToBeRankedEnabled || !isEditable\""},{"lineNumber":45,"author":{"gitId":"jasonqiu212"},"content":"            [ngModel]\u003d\"displayValueForMinOptionsToBeRanked\" aria-labelledby\u003d\"rank-options-question-min-options-label\""},{"lineNumber":46,"author":{"gitId":"jasonqiu212"},"content":"            (ngModelChange)\u003d\"triggerModelChange(\u0027minOptionsToBeRanked\u0027, $event)\" min\u003d\"1\" max\u003d\"{{ maxMinOptionsValue }}\"\u003e"},{"lineNumber":47,"author":{"gitId":"jasonqiu212"},"content":"    \u003cbr\u003e"},{"lineNumber":48,"author":{"gitId":"jasonqiu212"},"content":"    \u003cdiv class\u003d\"form-check\"\u003e"},{"lineNumber":49,"author":{"gitId":"jasonqiu212"},"content":"      \u003clabel id\u003d\"rank-options-question-max-options-label\" class\u003d\"form-check-label fw-bold\"\u003e"},{"lineNumber":50,"author":{"gitId":"-"},"content":"        \u003cinput id\u003d\"max-options-checkbox\" class\u003d\"form-check-input\" type\u003d\"checkbox\" [disabled]\u003d\"!isEditable\""},{"lineNumber":51,"author":{"gitId":"-"},"content":"               [ngModel]\u003d\"isMaxOptionsToBeRankedEnabled\""},{"lineNumber":52,"author":{"gitId":"-"},"content":"               (ngModelChange)\u003d\"triggerMaxOptionsToBeRankedChange($event)\"\u003e"},{"lineNumber":53,"author":{"gitId":"jasonqiu212"},"content":"        Maximum number of options a respondent can rank"},{"lineNumber":54,"author":{"gitId":"-"},"content":"      \u003c/label\u003e"},{"lineNumber":55,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":56,"author":{"gitId":"jasonqiu212"},"content":"    \u003cinput id\u003d\"max-options\" type\u003d\"number\" class\u003d\"form-control\" [disabled]\u003d\"!isMaxOptionsToBeRankedEnabled || !isEditable\""},{"lineNumber":57,"author":{"gitId":"jasonqiu212"},"content":"           [ngModel]\u003d\"displayValueForMaxOptionsToBeRanked\" aria-labelledby\u003d\"rank-options-question-max-options-label\""},{"lineNumber":58,"author":{"gitId":"jasonqiu212"},"content":"           (ngModelChange)\u003d\"triggerModelChange(\u0027maxOptionsToBeRanked\u0027, $event)\" [min]\u003d\"isMinOptionsToBeRankedEnabled ? model.minOptionsToBeRanked : 1\" max\u003d\"{{model.options.length}}\"\u003e"},{"lineNumber":59,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":60,"author":{"gitId":"-"},"content":"\u003c/div\u003e"}],"authorContributionMap":{"jasonqiu212":25,"-":35}},{"path":"src/web/app/components/question-types/question-edit-details-form/rank-recipients-question-edit-details-form.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"row\"\u003e"},{"lineNumber":2,"author":{"gitId":"jasonqiu212"},"content":"  \u003cdiv class\u003d\"col-sm-8 col-12 form-check ps-5\"\u003e"},{"lineNumber":3,"author":{"gitId":"jasonqiu212"},"content":"    \u003clabel class\u003d\"form-check-label fw-bold\"\u003e"},{"lineNumber":4,"author":{"gitId":"-"},"content":"      \u003cinput id\u003d\"duplicate-rank-checkbox\" class\u003d\"form-check-input\" type\u003d\"checkbox\"  [ngModel]\u003d\"model.areDuplicatesAllowed\""},{"lineNumber":5,"author":{"gitId":"-"},"content":"             (ngModelChange)\u003d\"triggerModelChange(\u0027areDuplicatesAllowed\u0027, $event)\" [disabled]\u003d\"!isEditable\"\u003e"},{"lineNumber":6,"author":{"gitId":"jasonqiu212"},"content":"      Allow response giver to give the same rank to multiple options"},{"lineNumber":7,"author":{"gitId":"-"},"content":"    \u003c/label\u003e"},{"lineNumber":8,"author":{"gitId":"-"},"content":"    \u003cbr\u003e"},{"lineNumber":9,"author":{"gitId":"-"},"content":"    \u003cbr\u003e"},{"lineNumber":10,"author":{"gitId":"jasonqiu212"},"content":"    \u003clabel id\u003d\"rank-recipients-question-min-options-label\" class\u003d\"form-check-label fw-bold\"\u003e"},{"lineNumber":11,"author":{"gitId":"-"},"content":"      \u003cinput id\u003d\"min-options-checkbox\" class\u003d\"form-check-input\" type\u003d\"checkbox\" [disabled]\u003d\"!isEditable\""},{"lineNumber":12,"author":{"gitId":"-"},"content":"             [ngModel]\u003d\"isMinOptionsToBeRankedEnabled\""},{"lineNumber":13,"author":{"gitId":"-"},"content":"             (ngModelChange)\u003d\"triggerMinOptionsToBeRankedChange($event)\"\u003e"},{"lineNumber":14,"author":{"gitId":"jasonqiu212"},"content":"      Minimum number of options a respondent must rank"},{"lineNumber":15,"author":{"gitId":"-"},"content":"    \u003c/label\u003e"},{"lineNumber":16,"author":{"gitId":"jasonqiu212"},"content":"    \u003cinput id\u003d\"min-options\" type\u003d\"number\" class\u003d\"form-control\" aria-labelledby\u003d\"rank-recipients-question-min-options-label\" [disabled]\u003d\"!isMinOptionsToBeRankedEnabled || !isEditable\""},{"lineNumber":17,"author":{"gitId":"-"},"content":"           [ngModel]\u003d\"displayValueForMinOptionsToBeRanked\""},{"lineNumber":18,"author":{"gitId":"-"},"content":"           (ngModelChange)\u003d\"triggerModelChange(\u0027minOptionsToBeRanked\u0027, $event)\" min\u003d\"1\" max\u003d\"{{ maxMinOptionsValue }}\"\u003e"},{"lineNumber":19,"author":{"gitId":"-"},"content":"    \u003cbr\u003e"},{"lineNumber":20,"author":{"gitId":"jasonqiu212"},"content":"    \u003clabel id\u003d\"rank-recipients-question-max-options-label\" class\u003d\"form-check-label fw-bold\"\u003e"},{"lineNumber":21,"author":{"gitId":"-"},"content":"      \u003cinput id\u003d\"max-options-checkbox\" class\u003d\"form-check-input\" type\u003d\"checkbox\" [disabled]\u003d\"!isEditable\""},{"lineNumber":22,"author":{"gitId":"-"},"content":"             [ngModel]\u003d\"isMaxOptionsToBeRankedEnabled\""},{"lineNumber":23,"author":{"gitId":"-"},"content":"             (ngModelChange)\u003d\"triggerMaxOptionsToBeRankedChange($event)\"\u003e"},{"lineNumber":24,"author":{"gitId":"jasonqiu212"},"content":"      Maximum number of options a respondent can rank"},{"lineNumber":25,"author":{"gitId":"-"},"content":"    \u003c/label\u003e"},{"lineNumber":26,"author":{"gitId":"jasonqiu212"},"content":"    \u003cinput id\u003d\"max-options\" type\u003d\"number\" class\u003d\"form-control\" aria-labelledby\u003d\"rank-recipients-question-max-options-label\" [disabled]\u003d\"!isMaxOptionsToBeRankedEnabled || !isEditable\""},{"lineNumber":27,"author":{"gitId":"-"},"content":"           [ngModel]\u003d\"displayValueForMaxOptionsToBeRanked\""},{"lineNumber":28,"author":{"gitId":"-"},"content":"           (ngModelChange)\u003d\"triggerModelChange(\u0027maxOptionsToBeRanked\u0027, $event)\" [min]\u003d\"isMinOptionsToBeRankedEnabled ? model.minOptionsToBeRanked : 1\"\u003e"},{"lineNumber":29,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":30,"author":{"gitId":"-"},"content":"\u003c/div\u003e"}],"authorContributionMap":{"jasonqiu212":9,"-":21}},{"path":"src/web/app/components/question-types/question-edit-details-form/rubric-question-edit-details-form.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"row\"\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"col-12 text-start\"\u003e"},{"lineNumber":3,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"form-group form-check\"\u003e"},{"lineNumber":4,"author":{"gitId":"-"},"content":"      \u003clabel class\u003d\"form-check-label tool-tip-decorate ngb-tooltip-class\""},{"lineNumber":5,"author":{"gitId":"jasonqiu212"},"content":"             ngbTooltip\u003d\"Assign weights to the columns for calculating statistics. An empty weight (i.e. Not enough information to evaluate) can be assigned by leaving the input box empty.\"\u003e"},{"lineNumber":6,"author":{"gitId":"-"},"content":"        \u003cinput id\u003d\"weights-checkbox\" type\u003d\"checkbox\" class\u003d\"form-check-input\" [disabled]\u003d\"!isEditable\""},{"lineNumber":7,"author":{"gitId":"-"},"content":"               [ngModel]\u003d\"model.hasAssignedWeights\" (ngModelChange)\u003d\"triggerChoicesWeight($event)\"\u003eChoices are weighted\u003c/label\u003e"},{"lineNumber":8,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":9,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":10,"author":{"gitId":"-"},"content":"\u003c/div\u003e"},{"lineNumber":11,"author":{"gitId":"jasonqiu212"},"content":"\u003cdiv class\u003d\"table-responsive\"\u003e"},{"lineNumber":12,"author":{"gitId":"-"},"content":"  \u003ctable id\u003d\"rubric-table\" class\u003d\"table table-bordered\"\u003e"},{"lineNumber":13,"author":{"gitId":"jasonqiu212"},"content":"    \u003cthead\u003e"},{"lineNumber":14,"author":{"gitId":"-"},"content":"      \u003ctr class\u003d\"fw-bold item-center\"\u003e"},{"lineNumber":15,"author":{"gitId":"-"},"content":"        \u003ctd\u003e"},{"lineNumber":16,"author":{"gitId":"-"},"content":"          \u003cdiv\u003eChoices \u003ci class\u003d\"fas fa-arrow-right\"\u003e\u003c/i\u003e\u003c/div\u003e"},{"lineNumber":17,"author":{"gitId":"-"},"content":"        \u003c/td\u003e"},{"lineNumber":18,"author":{"gitId":"jasonqiu212"},"content":"        \u003cth *ngFor\u003d\"let rubricChoice of model.rubricChoices; let j \u003d index; trackBy: trackByIndex\" [ngClass]\u003d\"{\u0027highlight-deletion\u0027: j \u003d\u003d\u003d columnToHighlight}\" scope\u003d\"col\"\u003e"},{"lineNumber":19,"author":{"gitId":"-"},"content":"          \u003cinput type\u003d\"text\" class\u003d\"form-control fw-bold\" [disabled]\u003d\"!isEditable\""},{"lineNumber":20,"author":{"gitId":"-"},"content":"                 [ngModel]\u003d\"rubricChoice\" (ngModelChange)\u003d\"triggerRubricChoiceChange($event, j)\"\u003e"},{"lineNumber":21,"author":{"gitId":"jasonqiu212"},"content":"        \u003c/th\u003e"},{"lineNumber":22,"author":{"gitId":"-"},"content":"      \u003c/tr\u003e"},{"lineNumber":23,"author":{"gitId":"jasonqiu212"},"content":"    \u003c/thead\u003e"},{"lineNumber":24,"author":{"gitId":"jasonqiu212"},"content":"    \u003ctbody\u003e"},{"lineNumber":25,"author":{"gitId":"-"},"content":"      \u003ctr *ngFor\u003d\"let rubricDescriptionRow of model.rubricDescriptions; let i \u003d index; trackBy: trackByIndex\" [ngClass]\u003d\"{\u0027highlight-deletion\u0027: i \u003d\u003d\u003d rowToHighlight}\"\u003e"},{"lineNumber":26,"author":{"gitId":"jasonqiu212"},"content":"        \u003cth scope\u003d\"row\" [attr.aria-label]\u003d\"model.rubricSubQuestions[i]\" class\u003d\"row-header\"\u003e"},{"lineNumber":27,"author":{"gitId":"-"},"content":"          \u003cdiv class\u003d\"input-group\"\u003e"},{"lineNumber":28,"author":{"gitId":"-"},"content":"            \u003cdiv class\u003d\"btn-group-vertical\"\u003e"},{"lineNumber":29,"author":{"gitId":"-"},"content":"              \u003cbutton type\u003d\"button\" class\u003d\"btn btn-light\" [disabled]\u003d\"i \u003d\u003d\u003d 0 || !isEditable\""},{"lineNumber":30,"author":{"gitId":"jasonqiu212"},"content":"                      ngbTooltip\u003d\"Move row up\" (click)\u003d\"moveRow(i, i - 1)\" aria-label\u003d\"Move row up\"\u003e"},{"lineNumber":31,"author":{"gitId":"-"},"content":"                \u003ci class\u003d\"fas fa-arrow-up\"\u003e\u003c/i\u003e"},{"lineNumber":32,"author":{"gitId":"-"},"content":"              \u003c/button\u003e"},{"lineNumber":33,"author":{"gitId":"-"},"content":"              \u003cbutton id\u003d\"btn-delete-subquestion\" type\u003d\"button\" class\u003d\"btn btn-light\" (click)\u003d\"deleteSubQuestion(i)\""},{"lineNumber":34,"author":{"gitId":"-"},"content":"                      (mouseover)\u003d\"rowToHighlight \u003d i\" (mouseleave)\u003d\"rowToHighlight \u003d -1\""},{"lineNumber":35,"author":{"gitId":"jasonqiu212"},"content":"                      [disabled]\u003d\"model.rubricSubQuestions.length \u003d\u003d\u003d 1 || !isEditable\" aria-label\u003d\"Delete row\"\u003e"},{"lineNumber":36,"author":{"gitId":"-"},"content":"                \u003ci class\u003d\"fas fa-times\"\u003e\u003c/i\u003e"},{"lineNumber":37,"author":{"gitId":"-"},"content":"              \u003c/button\u003e"},{"lineNumber":38,"author":{"gitId":"-"},"content":"              \u003cbutton type\u003d\"button\" class\u003d\"btn btn-light\" [disabled]\u003d\"i \u003d\u003d\u003d this.model.rubricSubQuestions.length - 1 || !isEditable\""},{"lineNumber":39,"author":{"gitId":"jasonqiu212"},"content":"                      ngbTooltip\u003d\"Move row down\" (click)\u003d\"moveRow(i, i + 1)\" aria-label\u003d\"Move row down\"\u003e"},{"lineNumber":40,"author":{"gitId":"-"},"content":"                \u003ci class\u003d\"fas fa-arrow-down\"\u003e\u003c/i\u003e"},{"lineNumber":41,"author":{"gitId":"-"},"content":"              \u003c/button\u003e"},{"lineNumber":42,"author":{"gitId":"-"},"content":"            \u003c/div\u003e"},{"lineNumber":43,"author":{"gitId":"jasonqiu212"},"content":"            \u003ctextarea class\u003d\"form-control min-vw-50\" [ngModel]\u003d\"model.rubricSubQuestions[i]\""},{"lineNumber":44,"author":{"gitId":"-"},"content":"                      (ngModelChange)\u003d\"triggerRubricSubQuestionChange($event, i)\" rows\u003d\"3\" [disabled]\u003d\"!isEditable\"\u003e\u003c/textarea\u003e"},{"lineNumber":45,"author":{"gitId":"-"},"content":"          \u003c/div\u003e"},{"lineNumber":46,"author":{"gitId":"jasonqiu212"},"content":"        \u003c/th\u003e"},{"lineNumber":47,"author":{"gitId":"-"},"content":"        \u003ctd *ngFor\u003d\"let rubricDescriptionCell of rubricDescriptionRow; let j \u003d index; trackBy: trackByIndex\" [ngClass]\u003d\"{\u0027highlight-deletion\u0027: j \u003d\u003d\u003d columnToHighlight}\"\u003e"},{"lineNumber":48,"author":{"gitId":"-"},"content":"          \u003ctextarea class\u003d\"form-control\" [ngModel]\u003d\"rubricDescriptionCell\""},{"lineNumber":49,"author":{"gitId":"-"},"content":"                    (ngModelChange)\u003d\"triggerRubricDescriptionChange($event, i, j)\" rows\u003d\"3\" [disabled]\u003d\"!isEditable\"\u003e\u003c/textarea\u003e"},{"lineNumber":50,"author":{"gitId":"jasonqiu212"},"content":"          \u003cinput *ngIf\u003d\"model.hasAssignedWeights\" type\u003d\"number\" class\u003d\"form-control margin-top-10px\" step\u003d\"0.01\" aria-label\u003d\"Choice weight input\""},{"lineNumber":51,"author":{"gitId":"-"},"content":"                 [disabled]\u003d\"!isEditable\""},{"lineNumber":52,"author":{"gitId":"jasonqiu212"},"content":"                 [ngModel]\u003d\"model.rubricWeightsForEachCell[i][j]\""},{"lineNumber":53,"author":{"gitId":"jasonqiu212"},"content":"                 (ngModelChange)\u003d\"triggerRubricWeightChange($event, i, j)\"\u003e"},{"lineNumber":54,"author":{"gitId":"-"},"content":"        \u003c/td\u003e"},{"lineNumber":55,"author":{"gitId":"-"},"content":"      \u003c/tr\u003e"},{"lineNumber":56,"author":{"gitId":"-"},"content":"      \u003ctr\u003e"},{"lineNumber":57,"author":{"gitId":"-"},"content":"        \u003ctd\u003e\u003c/td\u003e"},{"lineNumber":58,"author":{"gitId":"-"},"content":"        \u003ctd *ngFor\u003d\"let rubricChoice of model.rubricChoices; let j \u003d index;\" class\u003d\"text-center\" [ngClass]\u003d\"{\u0027highlight-deletion\u0027: j \u003d\u003d\u003d columnToHighlight}\"\u003e"},{"lineNumber":59,"author":{"gitId":"-"},"content":"          \u003cdiv class\u003d\"btn-group\"\u003e"},{"lineNumber":60,"author":{"gitId":"-"},"content":"            \u003cbutton type\u003d\"button\" class\u003d\"btn btn-light\" [disabled]\u003d\"j \u003d\u003d\u003d 0 || !isEditable\""},{"lineNumber":61,"author":{"gitId":"jasonqiu212"},"content":"                    ngbTooltip\u003d\"Move column left\" (click)\u003d\"moveChoice(j, j - 1)\" aria-label\u003d\"Move column left\"\u003e"},{"lineNumber":62,"author":{"gitId":"-"},"content":"              \u003ci class\u003d\"fas fa-arrow-left\"\u003e\u003c/i\u003e"},{"lineNumber":63,"author":{"gitId":"-"},"content":"            \u003c/button\u003e"},{"lineNumber":64,"author":{"gitId":"-"},"content":"            \u003cbutton id\u003d\"btn-delete-choice\" type\u003d\"button\" class\u003d\"btn btn-light\" (click)\u003d\"deleteChoice(j)\""},{"lineNumber":65,"author":{"gitId":"-"},"content":"                    (mouseover)\u003d\"columnToHighlight \u003d j\" (mouseleave)\u003d\"columnToHighlight \u003d -1\""},{"lineNumber":66,"author":{"gitId":"jasonqiu212"},"content":"                    [disabled]\u003d\"model.rubricChoices.length \u003d\u003d\u003d 1 || !isEditable\" aria-label\u003d\"Delete column\"\u003e"},{"lineNumber":67,"author":{"gitId":"-"},"content":"              \u003ci class\u003d\"fas fa-times\"\u003e\u003c/i\u003e"},{"lineNumber":68,"author":{"gitId":"-"},"content":"            \u003c/button\u003e"},{"lineNumber":69,"author":{"gitId":"-"},"content":"            \u003cbutton type\u003d\"button\" class\u003d\"btn btn-light\" [disabled]\u003d\"j \u003d\u003d\u003d this.model.rubricChoices.length - 1 || !isEditable\""},{"lineNumber":70,"author":{"gitId":"jasonqiu212"},"content":"                    ngbTooltip\u003d\"Move column right\" (click)\u003d\"moveChoice(j, j + 1)\" aria-label\u003d\"Move column right\"\u003e"},{"lineNumber":71,"author":{"gitId":"-"},"content":"              \u003ci class\u003d\"fas fa-arrow-right\"\u003e\u003c/i\u003e"},{"lineNumber":72,"author":{"gitId":"-"},"content":"            \u003c/button\u003e"},{"lineNumber":73,"author":{"gitId":"-"},"content":"          \u003c/div\u003e"},{"lineNumber":74,"author":{"gitId":"-"},"content":"        \u003c/td\u003e"},{"lineNumber":75,"author":{"gitId":"-"},"content":"      \u003c/tr\u003e"},{"lineNumber":76,"author":{"gitId":"-"},"content":"    \u003c/tbody\u003e"},{"lineNumber":77,"author":{"gitId":"-"},"content":"  \u003c/table\u003e"},{"lineNumber":78,"author":{"gitId":"jasonqiu212"},"content":"\u003c/div\u003e"},{"lineNumber":79,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"row\"\u003e"},{"lineNumber":80,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"col-6 text-start\"\u003e"},{"lineNumber":81,"author":{"gitId":"-"},"content":"    \u003cbutton id\u003d\"btn-add-row\" type\u003d\"button\" class\u003d\"btn btn-primary btn-sm\" (click)\u003d\"addNewSubQuestion()\" [disabled]\u003d\"!isEditable\"\u003eAdd Row \u003ci class\u003d\"fas fa-arrow-down\"\u003e\u003c/i\u003e\u003c/button\u003e"},{"lineNumber":82,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":83,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"col-6 text-end\"\u003e"},{"lineNumber":84,"author":{"gitId":"-"},"content":"    \u003cbutton id\u003d\"btn-add-col\" type\u003d\"button\" class\u003d\"btn btn-primary btn-sm\" (click)\u003d\"addNewChoice()\" [disabled]\u003d\"!isEditable\"\u003eAdd Column \u003ci class\u003d\"fas fa-arrow-right\"\u003e\u003c/i\u003e\u003c/button\u003e"},{"lineNumber":85,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":86,"author":{"gitId":"-"},"content":"\u003c/div\u003e"}],"authorContributionMap":{"jasonqiu212":20,"-":66}},{"path":"src/web/app/components/question-types/question-edit-details-form/rubric-question-edit-details-form.component.scss","fileType":"scss","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":".item-center {"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  text-align: center;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"  vertical-align: middle;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"}"},{"lineNumber":5,"author":{"gitId":"-"},"content":""},{"lineNumber":6,"author":{"gitId":"-"},"content":".highlight-deletion {"},{"lineNumber":7,"author":{"gitId":"-"},"content":"  background-color: #FEA3A3;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"}"},{"lineNumber":9,"author":{"gitId":"-"},"content":""},{"lineNumber":10,"author":{"gitId":"-"},"content":".margin-top-10px {"},{"lineNumber":11,"author":{"gitId":"-"},"content":"  margin-top: 10px;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"}"},{"lineNumber":13,"author":{"gitId":"jasonqiu212"},"content":""},{"lineNumber":14,"author":{"gitId":"jasonqiu212"},"content":".row-header {"},{"lineNumber":15,"author":{"gitId":"jasonqiu212"},"content":"  min-width: 200px;"},{"lineNumber":16,"author":{"gitId":"jasonqiu212"},"content":"}"}],"authorContributionMap":{"jasonqiu212":4,"-":12}},{"path":"src/web/app/components/question-types/question-edit-details-form/text-question-edit-details-form.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"row padding-15px\"\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"col-md-10 allow-rich-text\"\u003e"},{"lineNumber":3,"author":{"gitId":"-"},"content":"    \u003clabel\u003e"},{"lineNumber":4,"author":{"gitId":"-"},"content":"      \u003cinput type\u003d\"checkbox\""},{"lineNumber":5,"author":{"gitId":"-"},"content":"             [checked]\u003d\"model.shouldAllowRichText\""},{"lineNumber":6,"author":{"gitId":"-"},"content":"             (click)\u003d\"triggerModelChange(\u0027shouldAllowRichText\u0027, $event.target.checked)\""},{"lineNumber":7,"author":{"gitId":"-"},"content":"             [disabled]\u003d\"!isEditable\"\u003e"},{"lineNumber":8,"author":{"gitId":"weiquu"},"content":"      Allow rich-text formatting (e.g., bold text, links, bullet lists, colors, etc.) in the answers"},{"lineNumber":9,"author":{"gitId":"-"},"content":"    \u003c/label\u003e"},{"lineNumber":10,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":11,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"col-12 question-recommended-length\"\u003e"},{"lineNumber":12,"author":{"gitId":"weiquu"},"content":"    \u003clabel for\u003d\"recommended-length\"\u003e"},{"lineNumber":13,"author":{"gitId":"-"},"content":"      [Optional]"},{"lineNumber":14,"author":{"gitId":"-"},"content":"      \u003cspan class\u003d\"ngb-tooltip-class\" ngbTooltip\u003d\"The recommended length is shown to the respondent but not enforced\"\u003e"},{"lineNumber":15,"author":{"gitId":"-"},"content":"        Recommended length"},{"lineNumber":16,"author":{"gitId":"-"},"content":"      \u003c/span\u003e"},{"lineNumber":17,"author":{"gitId":"weiquu"},"content":"      (in words) for the response:"},{"lineNumber":18,"author":{"gitId":"weiquu"},"content":"    \u003c/label\u003e"},{"lineNumber":19,"author":{"gitId":"weiquu"},"content":"    \u003cinput id\u003d\"recommended-length\" type\u003d\"number\" class\u003d\"form-control\" [ngModel]\u003d\"model.recommendedLength\" (ngModelChange)\u003d\"triggerModelChange(\u0027recommendedLength\u0027, $event)\" [disabled]\u003d\"!isEditable\" min\u003d\"1\" aria-label\u003d\"Recommended Length Input\"\u003e"},{"lineNumber":20,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":21,"author":{"gitId":"-"},"content":"\u003c/div\u003e"}],"authorContributionMap":{"weiquu":5,"-":16}},{"path":"src/web/app/components/question-types/question-edit-details-form/weight-field/weight-field.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003cinput type\u003d\"number\" class\u003d\"form-control\" step\u003d\".01\" min\u003d\"0\" [ngModel]\u003d\"weight\""},{"lineNumber":2,"author":{"gitId":"weiquu"},"content":"       [disabled]\u003d\"!isEditable\" (ngModelChange)\u003d\"onWeightEntered($event)\" aria-label\u003d\"Weight of Option\"\u003e"}],"authorContributionMap":{"weiquu":1,"-":1}},{"path":"src/web/app/components/question-types/question-instruction/contribution-question-instruction.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"weiquu"},"content":"\u003cp class\u003d\"text-start fw-bold mt-3 mb-0\"\u003eNote:\u003c/p\u003e"},{"lineNumber":2,"author":{"gitId":"weiquu"},"content":"\u003cp class\u003d\"text-info mt-3 mb-0 ms-3\" id\u003d\"total-contributions-message\" *ngIf\u003d\"questionDetails.isZeroSum\"\u003e"},{"lineNumber":3,"author":{"gitId":"-"},"content":"  \u003cspan class\u003d\"fa fa-info-circle\"\u003e\u003c/span\u003e"},{"lineNumber":4,"author":{"gitId":"-"},"content":"  Total contributions distributed should \u003cstrong\u003eadd up to \u003ccode\u003e{{ numOfRecipients }} x Equal Share\u003c/code\u003e\u003c/strong\u003e."},{"lineNumber":5,"author":{"gitId":"-"},"content":"\u003c/p\u003e"},{"lineNumber":6,"author":{"gitId":"weiquu"},"content":"\u003cbutton type\u003d\"button\" class\u003d\"btn btn-link mt-3 ms-3 p-0\" (click)\u003d\"openHelpModal(equalShareHelp)\"\u003e\u003ci class\u003d\"fas fa-exclamation-circle\"\u003e\u003c/i\u003e More info about the \u003ccode\u003eEqual Share\u003c/code\u003e scale\u003c/button\u003e"},{"lineNumber":7,"author":{"gitId":"weiquu"},"content":"\u003cng-template #equalShareHelp\u003e"},{"lineNumber":8,"author":{"gitId":"weiquu"},"content":"  \u003cp\u003e\u003ccode\u003eEqual share\u003c/code\u003e is a relative measure of individual contribution to a team task.\u003c/p\u003e"},{"lineNumber":9,"author":{"gitId":"weiquu"},"content":"  \u003cp\u003eFor example, in a 3-person team, \u003ccode\u003eEqual share\u003c/code\u003e means a third of the work done.\u003c/p\u003e"},{"lineNumber":10,"author":{"gitId":"weiquu"},"content":"  \u003cp\u003e\u003ccode\u003eEqual share + 10%\u003c/code\u003e means the person did about 10% \u003cem\u003emore\u003c/em\u003e than an equal share,"},{"lineNumber":11,"author":{"gitId":"weiquu"},"content":"    \u003ccode\u003eEqual share - 10%\u003c/code\u003e means about 10% \u003cem\u003eless\u003c/em\u003e than an equal share, and so on.\u003c/p\u003e"},{"lineNumber":12,"author":{"gitId":"weiquu"},"content":"\u003c/ng-template\u003e"}],"authorContributionMap":{"weiquu":9,"-":3}},{"path":"src/web/app/components/question-types/question-instruction/contribution-question-instruction.component.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"weiquu"},"content":"import { Component, Input, TemplateRef } from \u0027@angular/core\u0027;"},{"lineNumber":2,"author":{"gitId":"weiquu"},"content":"import { SimpleModalService } from \u0027../../../../services/simple-modal.service\u0027;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"import { FeedbackContributionQuestionDetails } from \u0027../../../../types/api-output\u0027;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import { DEFAULT_CONTRIBUTION_QUESTION_DETAILS } from \u0027../../../../types/default-question-structs\u0027;"},{"lineNumber":5,"author":{"gitId":"weiquu"},"content":"import { SimpleModalType } from \u0027../../simple-modal/simple-modal-type\u0027;"},{"lineNumber":6,"author":{"gitId":"-"},"content":""},{"lineNumber":7,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":8,"author":{"gitId":"-"},"content":" * Instruction of contribution question."},{"lineNumber":9,"author":{"gitId":"-"},"content":" */"},{"lineNumber":10,"author":{"gitId":"-"},"content":"@Component({"},{"lineNumber":11,"author":{"gitId":"-"},"content":"  selector: \u0027tm-contribution-question-instruction\u0027,"},{"lineNumber":12,"author":{"gitId":"-"},"content":"  templateUrl: \u0027./contribution-question-instruction.component.html\u0027,"},{"lineNumber":13,"author":{"gitId":"-"},"content":"  styleUrls: [\u0027./contribution-question-instruction.component.scss\u0027],"},{"lineNumber":14,"author":{"gitId":"-"},"content":"})"},{"lineNumber":15,"author":{"gitId":"-"},"content":"export class ContributionQuestionInstructionComponent {"},{"lineNumber":16,"author":{"gitId":"-"},"content":""},{"lineNumber":17,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":18,"author":{"gitId":"-"},"content":"  questionDetails: FeedbackContributionQuestionDetails \u003d DEFAULT_CONTRIBUTION_QUESTION_DETAILS();"},{"lineNumber":19,"author":{"gitId":"-"},"content":""},{"lineNumber":20,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":21,"author":{"gitId":"-"},"content":"  numOfRecipients: number \u003d 0;"},{"lineNumber":22,"author":{"gitId":"-"},"content":""},{"lineNumber":23,"author":{"gitId":"weiquu"},"content":"  constructor(private simpleModalService: SimpleModalService) {}"},{"lineNumber":24,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":25,"author":{"gitId":"weiquu"},"content":"  openHelpModal(modal: TemplateRef\u003cany\u003e): void {"},{"lineNumber":26,"author":{"gitId":"weiquu"},"content":"    const modalHeader: string \u003d \u0027More info about the \u003ccode\u003eEqual Share\u003c/code\u003e scale\u0027;"},{"lineNumber":27,"author":{"gitId":"weiquu"},"content":"    this.simpleModalService.openInformationModal(modalHeader, SimpleModalType.NEUTRAL, modal);"},{"lineNumber":28,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":29,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"weiquu":9,"-":20}},{"path":"src/web/app/components/question-types/question-response/rubric-question-response.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003cdiv *ngIf\u003d\"isStudentPage\"\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  \u003ctable class\u003d\"table table-bordered\"\u003e"},{"lineNumber":3,"author":{"gitId":"-"},"content":"    \u003cthead\u003e"},{"lineNumber":4,"author":{"gitId":"-"},"content":"      \u003ctr\u003e"},{"lineNumber":5,"author":{"gitId":"-"},"content":"        \u003cth\u003eCriteria\u003c/th\u003e"},{"lineNumber":6,"author":{"gitId":"-"},"content":"        \u003cth class\u003d\"text-center\" *ngFor\u003d\"let choice of questionDetails.rubricChoices\"\u003e{{ choice }}\u003c/th\u003e"},{"lineNumber":7,"author":{"gitId":"-"},"content":"      \u003c/tr\u003e"},{"lineNumber":8,"author":{"gitId":"-"},"content":"    \u003c/thead\u003e"},{"lineNumber":9,"author":{"gitId":"weiquu"},"content":"    \u003ctbody class\u003d\"rubric-answers\"\u003e"},{"lineNumber":10,"author":{"gitId":"-"},"content":"      \u003ctr *ngFor\u003d\"let answer of answers; let i \u003d index\"\u003e"},{"lineNumber":11,"author":{"gitId":"-"},"content":"        \u003ctd\u003e{{ questionDetails.rubricSubQuestions[i] }}\u003c/td\u003e"},{"lineNumber":12,"author":{"gitId":"-"},"content":"        \u003ctd class\u003d\"text-center\" *ngFor\u003d\"let choice of questionDetails.rubricChoices\"\u003e"},{"lineNumber":13,"author":{"gitId":"weiquu"},"content":"          \u003cspan [attr.aria-label]\u003d\"answer.answer \u003d\u003d\u003d choice ? \u0027selected\u0027 : \u0027unselected\u0027\" role\u003d\"img\"\u003e"},{"lineNumber":14,"author":{"gitId":"weiquu"},"content":"            \u003ci *ngIf\u003d\"answer.answer \u003d\u003d\u003d choice\" class\u003d\"fas fa-check\"\u003e\u003c/i\u003e"},{"lineNumber":15,"author":{"gitId":"weiquu"},"content":"          \u003c/span\u003e"},{"lineNumber":16,"author":{"gitId":"-"},"content":"        \u003c/td\u003e"},{"lineNumber":17,"author":{"gitId":"-"},"content":"      \u003c/tr\u003e"},{"lineNumber":18,"author":{"gitId":"-"},"content":"    \u003c/tbody\u003e"},{"lineNumber":19,"author":{"gitId":"-"},"content":"  \u003c/table\u003e"},{"lineNumber":20,"author":{"gitId":"-"},"content":"\u003c/div\u003e"},{"lineNumber":21,"author":{"gitId":"-"},"content":"\u003cdiv *ngIf\u003d\"!isStudentPage\"\u003e"},{"lineNumber":22,"author":{"gitId":"-"},"content":"  \u003col type\u003d\"a\"\u003e"},{"lineNumber":23,"author":{"gitId":"-"},"content":"    \u003cli *ngFor\u003d\"let answer of answers\"\u003e{{ answer.answer }} \u003cspan class\u003d\"choice-index\"\u003e{{ answer.index ? \u0027(Choice \u0027 + answer.index + \u0027)\u0027 : \u0027\u0027 }}\u003c/span\u003e\u003c/li\u003e"},{"lineNumber":24,"author":{"gitId":"-"},"content":"  \u003c/ol\u003e"},{"lineNumber":25,"author":{"gitId":"-"},"content":"\u003c/div\u003e"}],"authorContributionMap":{"weiquu":4,"-":21}},{"path":"src/web/app/components/question-types/question-statistics/num-scale-question-statistics.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003cdiv *ngIf\u003d\"responses.length\"\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"row\"\u003e"},{"lineNumber":3,"author":{"gitId":"weiquu"},"content":"    \u003cdiv class\u003d\"text-color-gray mt-2\"\u003e"},{"lineNumber":4,"author":{"gitId":"-"},"content":"      \u003cstrong *ngIf\u003d\"isStudent\"\u003eSummary of responses received by you\u003c/strong\u003e"},{"lineNumber":5,"author":{"gitId":"-"},"content":"      \u003cstrong *ngIf\u003d\"!isStudent\"\u003eResponse Summary\u003c/strong\u003e"},{"lineNumber":6,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":7,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":8,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"row\"\u003e"},{"lineNumber":9,"author":{"gitId":"-"},"content":"    \u003cdiv id\u003d\"numscale-statistics\" class\u003d\"col-sm-12 table-responsive mb-4\"\u003e"},{"lineNumber":10,"author":{"gitId":"-"},"content":"      \u003ctm-sortable-table [rows]\u003d\"rowsData\" [columns]\u003d\"columnsData\"\u003e\u003c/tm-sortable-table\u003e"},{"lineNumber":11,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":12,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":13,"author":{"gitId":"-"},"content":"\u003c/div\u003e"}],"authorContributionMap":{"weiquu":1,"-":12}},{"path":"src/web/app/components/question-types/question-statistics/question-statistics-calculation/rubric-question-statistics-calculation.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { Directive } from \u0027@angular/core\u0027;"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":3,"author":{"gitId":"-"},"content":"  FeedbackRubricQuestionDetails,"},{"lineNumber":4,"author":{"gitId":"-"},"content":"  FeedbackRubricResponseDetails,"},{"lineNumber":5,"author":{"gitId":"-"},"content":"} from \u0027../../../../../types/api-output\u0027;"},{"lineNumber":6,"author":{"gitId":"jasonqiu212"},"content":"import { NO_VALUE, RUBRIC_ANSWER_NOT_CHOSEN } from \u0027../../../../../types/feedback-response-details\u0027;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import { QuestionStatistics } from \u0027../question-statistics\u0027;"},{"lineNumber":8,"author":{"gitId":"-"},"content":""},{"lineNumber":9,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":10,"author":{"gitId":"-"},"content":" * Type for per recipient statistics."},{"lineNumber":11,"author":{"gitId":"-"},"content":" */"},{"lineNumber":12,"author":{"gitId":"-"},"content":"export interface PerRecipientStats {"},{"lineNumber":13,"author":{"gitId":"-"},"content":"  recipientName: string;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"  recipientEmail?: string;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"  recipientTeam: string;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"  answers: number[][];"},{"lineNumber":17,"author":{"gitId":"-"},"content":"  answersSum: number[];"},{"lineNumber":18,"author":{"gitId":"-"},"content":"  percentages: number[][];"},{"lineNumber":19,"author":{"gitId":"-"},"content":"  percentagesAverage: number[];"},{"lineNumber":20,"author":{"gitId":"-"},"content":"  weightsAverage: number[];"},{"lineNumber":21,"author":{"gitId":"jasonqiu212"},"content":"  areSubQuestionChosenWeightsAllNull: boolean[];"},{"lineNumber":22,"author":{"gitId":"-"},"content":"  subQuestionTotalChosenWeight: number[];"},{"lineNumber":23,"author":{"gitId":"-"},"content":"  subQuestionWeightAverage: number[];"},{"lineNumber":24,"author":{"gitId":"-"},"content":"  overallWeightedSum: number;"},{"lineNumber":25,"author":{"gitId":"-"},"content":"  overallWeightAverage: number;"},{"lineNumber":26,"author":{"gitId":"-"},"content":"}"},{"lineNumber":27,"author":{"gitId":"-"},"content":""},{"lineNumber":28,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":29,"author":{"gitId":"-"},"content":" * Class to calculate stats for rubric question."},{"lineNumber":30,"author":{"gitId":"-"},"content":" */"},{"lineNumber":31,"author":{"gitId":"-"},"content":"@Directive()"},{"lineNumber":32,"author":{"gitId":"-"},"content":"// eslint-disable-next-line @angular-eslint/directive-class-suffix"},{"lineNumber":33,"author":{"gitId":"-"},"content":"export class RubricQuestionStatisticsCalculation"},{"lineNumber":34,"author":{"gitId":"-"},"content":"    extends QuestionStatistics\u003cFeedbackRubricQuestionDetails, FeedbackRubricResponseDetails\u003e {"},{"lineNumber":35,"author":{"gitId":"-"},"content":""},{"lineNumber":36,"author":{"gitId":"-"},"content":"  subQuestions: string[] \u003d [];"},{"lineNumber":37,"author":{"gitId":"-"},"content":"  choices: string[] \u003d [];"},{"lineNumber":38,"author":{"gitId":"-"},"content":"  hasWeights: boolean \u003d false;"},{"lineNumber":39,"author":{"gitId":"-"},"content":"  weights: number[][] \u003d [];"},{"lineNumber":40,"author":{"gitId":"-"},"content":"  answers: number[][] \u003d [];"},{"lineNumber":41,"author":{"gitId":"-"},"content":"  isWeightStatsVisible: boolean \u003d false;"},{"lineNumber":42,"author":{"gitId":"-"},"content":""},{"lineNumber":43,"author":{"gitId":"-"},"content":"  percentages: number[][] \u003d [];"},{"lineNumber":44,"author":{"gitId":"-"},"content":"  subQuestionWeightAverage: number[] \u003d [];"},{"lineNumber":45,"author":{"gitId":"-"},"content":"  answersExcludeSelf: number[][] \u003d [];"},{"lineNumber":46,"author":{"gitId":"-"},"content":"  percentagesExcludeSelf: number[][] \u003d [];"},{"lineNumber":47,"author":{"gitId":"-"},"content":"  subQuestionWeightAverageExcludeSelf: number[] \u003d [];"},{"lineNumber":48,"author":{"gitId":"-"},"content":""},{"lineNumber":49,"author":{"gitId":"-"},"content":"  perRecipientStatsMap: Record\u003cstring, PerRecipientStats\u003e \u003d {};"},{"lineNumber":50,"author":{"gitId":"-"},"content":""},{"lineNumber":51,"author":{"gitId":"-"},"content":"  calculateStatistics(): void {"},{"lineNumber":52,"author":{"gitId":"-"},"content":"    this.answers \u003d [];"},{"lineNumber":53,"author":{"gitId":"-"},"content":"    this.percentages \u003d [];"},{"lineNumber":54,"author":{"gitId":"-"},"content":"    this.answersExcludeSelf \u003d [];"},{"lineNumber":55,"author":{"gitId":"-"},"content":"    this.percentagesExcludeSelf \u003d [];"},{"lineNumber":56,"author":{"gitId":"-"},"content":"    this.subQuestionWeightAverage \u003d [];"},{"lineNumber":57,"author":{"gitId":"-"},"content":"    this.subQuestionWeightAverageExcludeSelf \u003d [];"},{"lineNumber":58,"author":{"gitId":"-"},"content":"    this.perRecipientStatsMap \u003d {};"},{"lineNumber":59,"author":{"gitId":"-"},"content":""},{"lineNumber":60,"author":{"gitId":"-"},"content":"    this.subQuestions \u003d this.question.rubricSubQuestions;"},{"lineNumber":61,"author":{"gitId":"-"},"content":"    this.choices \u003d this.question.rubricChoices;"},{"lineNumber":62,"author":{"gitId":"-"},"content":"    this.hasWeights \u003d this.question.hasAssignedWeights;"},{"lineNumber":63,"author":{"gitId":"-"},"content":"    this.weights \u003d this.question.rubricWeightsForEachCell;"},{"lineNumber":64,"author":{"gitId":"-"},"content":"    this.isWeightStatsVisible \u003d"},{"lineNumber":65,"author":{"gitId":"-"},"content":"      this.hasWeights \u0026\u0026 this.weights.length \u003e 0 \u0026\u0026 this.weights[0].length \u003e 0;"},{"lineNumber":66,"author":{"gitId":"-"},"content":""},{"lineNumber":67,"author":{"gitId":"-"},"content":"    const emptyAnswers: number[][] \u003d [];"},{"lineNumber":68,"author":{"gitId":"-"},"content":"    for (let i \u003d 0; i \u003c this.question.rubricSubQuestions.length; i +\u003d 1) {"},{"lineNumber":69,"author":{"gitId":"-"},"content":"      const subQuestionAnswers: number[] \u003d [];"},{"lineNumber":70,"author":{"gitId":"-"},"content":"      for (let j \u003d 0; j \u003c this.question.rubricChoices.length; j +\u003d 1) {"},{"lineNumber":71,"author":{"gitId":"-"},"content":"        subQuestionAnswers.push(0);"},{"lineNumber":72,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":73,"author":{"gitId":"-"},"content":"      emptyAnswers.push(subQuestionAnswers);"},{"lineNumber":74,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":75,"author":{"gitId":"-"},"content":"    this.answers \u003d JSON.parse(JSON.stringify(emptyAnswers));"},{"lineNumber":76,"author":{"gitId":"-"},"content":"    this.answersExcludeSelf \u003d JSON.parse(JSON.stringify(emptyAnswers));"},{"lineNumber":77,"author":{"gitId":"-"},"content":""},{"lineNumber":78,"author":{"gitId":"-"},"content":"    for (const response of this.responses) {"},{"lineNumber":79,"author":{"gitId":"-"},"content":"      for (let i: number \u003d 0; i \u003c response.responseDetails.answer.length; i +\u003d 1) {"},{"lineNumber":80,"author":{"gitId":"-"},"content":"        const subAnswer: number \u003d response.responseDetails.answer[i];"},{"lineNumber":81,"author":{"gitId":"-"},"content":"        if (subAnswer \u003d\u003d\u003d RUBRIC_ANSWER_NOT_CHOSEN || (this.isStudent \u0026\u0026 response.recipient !\u003d\u003d \u0027You\u0027)) {"},{"lineNumber":82,"author":{"gitId":"-"},"content":"          continue;"},{"lineNumber":83,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":84,"author":{"gitId":"-"},"content":"        this.answers[i][subAnswer] +\u003d 1;"},{"lineNumber":85,"author":{"gitId":"-"},"content":""},{"lineNumber":86,"author":{"gitId":"-"},"content":"        if (response.recipient !\u003d\u003d response.giver) {"},{"lineNumber":87,"author":{"gitId":"-"},"content":"          this.answersExcludeSelf[i][subAnswer] +\u003d 1;"},{"lineNumber":88,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":89,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":90,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":91,"author":{"gitId":"-"},"content":""},{"lineNumber":92,"author":{"gitId":"-"},"content":"    this.percentages \u003d this.calculatePercentages(this.answers);"},{"lineNumber":93,"author":{"gitId":"-"},"content":"    this.percentagesExcludeSelf \u003d this.calculatePercentages(this.answersExcludeSelf);"},{"lineNumber":94,"author":{"gitId":"-"},"content":""},{"lineNumber":95,"author":{"gitId":"-"},"content":"    // only apply weights average if applicable"},{"lineNumber":96,"author":{"gitId":"-"},"content":"    if (!this.isWeightStatsVisible) {"},{"lineNumber":97,"author":{"gitId":"-"},"content":"      return;"},{"lineNumber":98,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":99,"author":{"gitId":"-"},"content":""},{"lineNumber":100,"author":{"gitId":"-"},"content":"    this.subQuestionWeightAverage \u003d this.calculateSubQuestionWeightAverage(this.answers);"},{"lineNumber":101,"author":{"gitId":"-"},"content":"    this.subQuestionWeightAverageExcludeSelf \u003d this.calculateSubQuestionWeightAverage(this.answersExcludeSelf);"},{"lineNumber":102,"author":{"gitId":"-"},"content":""},{"lineNumber":103,"author":{"gitId":"-"},"content":"    // calculate per recipient stats"},{"lineNumber":104,"author":{"gitId":"-"},"content":"    for (const response of this.responses) {"},{"lineNumber":105,"author":{"gitId":"-"},"content":"      this.perRecipientStatsMap[response.recipientEmail || response.recipient] \u003d"},{"lineNumber":106,"author":{"gitId":"-"},"content":"        this.perRecipientStatsMap["},{"lineNumber":107,"author":{"gitId":"-"},"content":"          response.recipientEmail || response.recipient"},{"lineNumber":108,"author":{"gitId":"-"},"content":"        ] || {"},{"lineNumber":109,"author":{"gitId":"-"},"content":"          recipientName: response.recipient,"},{"lineNumber":110,"author":{"gitId":"-"},"content":"          recipientEmail: response.recipientEmail,"},{"lineNumber":111,"author":{"gitId":"-"},"content":"          recipientTeam: response.recipientTeam,"},{"lineNumber":112,"author":{"gitId":"-"},"content":"          answers: JSON.parse(JSON.stringify(emptyAnswers)),"},{"lineNumber":113,"author":{"gitId":"-"},"content":"          answersSum: [],"},{"lineNumber":114,"author":{"gitId":"-"},"content":"          percentages: [],"},{"lineNumber":115,"author":{"gitId":"-"},"content":"          percentagesAverage: [],"},{"lineNumber":116,"author":{"gitId":"-"},"content":"          weightsAverage: [],"},{"lineNumber":117,"author":{"gitId":"jasonqiu212"},"content":"          areSubQuestionChosenWeightsAllNull: this.subQuestions.map(() \u003d\u003e true),"},{"lineNumber":118,"author":{"gitId":"-"},"content":"          subQuestionTotalChosenWeight: this.subQuestions.map(() \u003d\u003e 0),"},{"lineNumber":119,"author":{"gitId":"-"},"content":"          subQuestionWeightAverage: [],"},{"lineNumber":120,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":121,"author":{"gitId":"-"},"content":"      for (let i: number \u003d 0; i \u003c response.responseDetails.answer.length; i +\u003d 1) {"},{"lineNumber":122,"author":{"gitId":"-"},"content":"        const subAnswer: number \u003d response.responseDetails.answer[i];"},{"lineNumber":123,"author":{"gitId":"-"},"content":"        if (subAnswer \u003d\u003d\u003d RUBRIC_ANSWER_NOT_CHOSEN) {"},{"lineNumber":124,"author":{"gitId":"-"},"content":"          continue;"},{"lineNumber":125,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":126,"author":{"gitId":"-"},"content":"        this.perRecipientStatsMap[response.recipientEmail || response.recipient].answers[i][subAnswer] +\u003d 1;"},{"lineNumber":127,"author":{"gitId":"jasonqiu212"},"content":"        if (this.weights[i][subAnswer] !\u003d\u003d null) {"},{"lineNumber":128,"author":{"gitId":"-"},"content":"            this.perRecipientStatsMap[response.recipientEmail || response.recipient].subQuestionTotalChosenWeight[i] +\u003d"},{"lineNumber":129,"author":{"gitId":"-"},"content":"                +this.weights[i][subAnswer].toFixed(5);"},{"lineNumber":130,"author":{"gitId":"jasonqiu212"},"content":"            this.perRecipientStatsMap["},{"lineNumber":131,"author":{"gitId":"jasonqiu212"},"content":"                response.recipientEmail || response.recipient].areSubQuestionChosenWeightsAllNull[i] \u003d false;"},{"lineNumber":132,"author":{"gitId":"jasonqiu212"},"content":"        }"},{"lineNumber":133,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":134,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":135,"author":{"gitId":"-"},"content":""},{"lineNumber":136,"author":{"gitId":"-"},"content":"    for (const recipient of Object.keys(this.perRecipientStatsMap)) {"},{"lineNumber":137,"author":{"gitId":"-"},"content":"      const perRecipientStats: PerRecipientStats \u003d this.perRecipientStatsMap[recipient];"},{"lineNumber":138,"author":{"gitId":"-"},"content":""},{"lineNumber":139,"author":{"gitId":"-"},"content":"      // Answers sum \u003d number of answers in each column"},{"lineNumber":140,"author":{"gitId":"jasonqiu212"},"content":"      perRecipientStats.answersSum \u003d this.sumValidValuesByColumn(perRecipientStats.answers);"},{"lineNumber":141,"author":{"gitId":"-"},"content":"      perRecipientStats.percentages \u003d this.calculatePercentages(perRecipientStats.answers);"},{"lineNumber":142,"author":{"gitId":"-"},"content":"      perRecipientStats.percentagesAverage \u003d this.calculatePercentagesAverage(perRecipientStats.answersSum);"},{"lineNumber":143,"author":{"gitId":"jasonqiu212"},"content":"      perRecipientStats.subQuestionTotalChosenWeight \u003d"},{"lineNumber":144,"author":{"gitId":"jasonqiu212"},"content":"          perRecipientStats.subQuestionTotalChosenWeight.map((val: number, i: number) \u003d\u003e"},{"lineNumber":145,"author":{"gitId":"jasonqiu212"},"content":"              (perRecipientStats.areSubQuestionChosenWeightsAllNull[i] ? NO_VALUE : val));"},{"lineNumber":146,"author":{"gitId":"-"},"content":"      perRecipientStats.subQuestionWeightAverage \u003d"},{"lineNumber":147,"author":{"gitId":"-"},"content":"          this.calculateSubQuestionWeightAverage(perRecipientStats.answers);"},{"lineNumber":148,"author":{"gitId":"-"},"content":"      perRecipientStats.weightsAverage \u003d this.calculateWeightsAverage(this.weights);"},{"lineNumber":149,"author":{"gitId":"jasonqiu212"},"content":"      perRecipientStats.overallWeightedSum \u003d this.calculateOverallWeightedSum("},{"lineNumber":150,"author":{"gitId":"jasonqiu212"},"content":"          perRecipientStats.areSubQuestionChosenWeightsAllNull, perRecipientStats.subQuestionTotalChosenWeight);"},{"lineNumber":151,"author":{"gitId":"jasonqiu212"},"content":"      // Overall weighted average \u003d overall weighted sum / total number of responses with non-null weights"},{"lineNumber":152,"author":{"gitId":"jasonqiu212"},"content":"      perRecipientStats.overallWeightAverage \u003d perRecipientStats.overallWeightedSum \u003d\u003d\u003d NO_VALUE"},{"lineNumber":153,"author":{"gitId":"jasonqiu212"},"content":"          ? NO_VALUE"},{"lineNumber":154,"author":{"gitId":"jasonqiu212"},"content":"          : +(perRecipientStats.overallWeightedSum"},{"lineNumber":155,"author":{"gitId":"jasonqiu212"},"content":"              / this.calculateNumResponses(this.countResponsesByRowWithValidWeight(perRecipientStats.answers)))"},{"lineNumber":156,"author":{"gitId":"jasonqiu212"},"content":"              .toFixed(2);"},{"lineNumber":157,"author":{"gitId":"jasonqiu212"},"content":"    }"},{"lineNumber":158,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":159,"author":{"gitId":"-"},"content":""},{"lineNumber":160,"author":{"gitId":"jasonqiu212"},"content":"  // Number of responses for each sub question with non-null weights"},{"lineNumber":161,"author":{"gitId":"jasonqiu212"},"content":"  private countResponsesByRowWithValidWeight(answers: number[][]): number[] {"},{"lineNumber":162,"author":{"gitId":"jasonqiu212"},"content":"    const sums: number[] \u003d [];"},{"lineNumber":163,"author":{"gitId":"jasonqiu212"},"content":"    for (let r: number \u003d 0; r \u003c answers.length; r +\u003d 1) {"},{"lineNumber":164,"author":{"gitId":"jasonqiu212"},"content":"        let sum: number \u003d 0;"},{"lineNumber":165,"author":{"gitId":"jasonqiu212"},"content":"        for (let c: number \u003d 0; c \u003c answers[0].length; c +\u003d 1) {"},{"lineNumber":166,"author":{"gitId":"jasonqiu212"},"content":"            if (this.weights[r][c] \u003d\u003d\u003d null) {"},{"lineNumber":167,"author":{"gitId":"jasonqiu212"},"content":"                continue;"},{"lineNumber":168,"author":{"gitId":"jasonqiu212"},"content":"            }"},{"lineNumber":169,"author":{"gitId":"jasonqiu212"},"content":"            sum +\u003d answers[r][c];"},{"lineNumber":170,"author":{"gitId":"jasonqiu212"},"content":"        }"},{"lineNumber":171,"author":{"gitId":"jasonqiu212"},"content":"        sums[r] \u003d sum;"},{"lineNumber":172,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":173,"author":{"gitId":"jasonqiu212"},"content":"    return sums;"},{"lineNumber":174,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":175,"author":{"gitId":"-"},"content":""},{"lineNumber":176,"author":{"gitId":"-"},"content":"  private calculateSubQuestionWeightAverage(answers: number[][]): number[] {"},{"lineNumber":177,"author":{"gitId":"jasonqiu212"},"content":"    const sums: number[] \u003d this.countResponsesByRowWithValidWeight(answers);"},{"lineNumber":178,"author":{"gitId":"-"},"content":""},{"lineNumber":179,"author":{"gitId":"-"},"content":"    return answers.map((subQuestionAnswer: number[], subQuestionIdx: number): number \u003d\u003e {"},{"lineNumber":180,"author":{"gitId":"jasonqiu212"},"content":"      if (sums[subQuestionIdx] \u003d\u003d\u003d 0) {"},{"lineNumber":181,"author":{"gitId":"jasonqiu212"},"content":"        return NO_VALUE;"},{"lineNumber":182,"author":{"gitId":"jasonqiu212"},"content":"      }"},{"lineNumber":183,"author":{"gitId":"jasonqiu212"},"content":"      const weightAverage: number \u003d"},{"lineNumber":184,"author":{"gitId":"jasonqiu212"},"content":"          subQuestionAnswer.reduce((prevValue: number, currValue: number, currentIndex: number): number \u003d\u003e"},{"lineNumber":185,"author":{"gitId":"jasonqiu212"},"content":"              (this.weights[subQuestionIdx][currentIndex] \u003d\u003d\u003d null"},{"lineNumber":186,"author":{"gitId":"jasonqiu212"},"content":"                  ? prevValue"},{"lineNumber":187,"author":{"gitId":"jasonqiu212"},"content":"                  : prevValue + currValue * this.weights[subQuestionIdx][currentIndex]), 0) / sums[subQuestionIdx];"},{"lineNumber":188,"author":{"gitId":"-"},"content":"      return +weightAverage.toFixed(2);"},{"lineNumber":189,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":190,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":191,"author":{"gitId":"-"},"content":""},{"lineNumber":192,"author":{"gitId":"-"},"content":"  private calculatePercentages(answers: number[][]): number[][] {"},{"lineNumber":193,"author":{"gitId":"-"},"content":"    // Deep-copy the answers"},{"lineNumber":194,"author":{"gitId":"-"},"content":"    const percentages: number[][] \u003d JSON.parse(JSON.stringify(answers));"},{"lineNumber":195,"author":{"gitId":"-"},"content":""},{"lineNumber":196,"author":{"gitId":"-"},"content":"    // Calculate sums for each row"},{"lineNumber":197,"author":{"gitId":"-"},"content":"    const sums: number[] \u003d percentages.map((weightedAnswers: number[]) \u003d\u003e"},{"lineNumber":198,"author":{"gitId":"-"},"content":"        weightedAnswers.reduce((a: number, b: number) \u003d\u003e a + b, 0));"},{"lineNumber":199,"author":{"gitId":"-"},"content":""},{"lineNumber":200,"author":{"gitId":"-"},"content":"    // Calculate the percentages based on the entry of each cell and the sum of each row"},{"lineNumber":201,"author":{"gitId":"-"},"content":"    for (let i: number \u003d 0; i \u003c answers.length; i +\u003d 1) {"},{"lineNumber":202,"author":{"gitId":"-"},"content":"      for (let j: number \u003d 0; j \u003c answers[i].length; j +\u003d 1) {"},{"lineNumber":203,"author":{"gitId":"-"},"content":"        percentages[i][j] \u003d sums[i] \u003d\u003d\u003d 0 ? 0 : +(percentages[i][j] / sums[i] * 100).toFixed(2);"},{"lineNumber":204,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":205,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":206,"author":{"gitId":"-"},"content":""},{"lineNumber":207,"author":{"gitId":"-"},"content":"    return percentages;"},{"lineNumber":208,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":209,"author":{"gitId":"-"},"content":""},{"lineNumber":210,"author":{"gitId":"jasonqiu212"},"content":"  // Calculate sum of non-null values for each column"},{"lineNumber":211,"author":{"gitId":"jasonqiu212"},"content":"  private sumValidValuesByColumn(matrix: number[][]): number[] {"},{"lineNumber":212,"author":{"gitId":"-"},"content":"    const sums: number[] \u003d [];"},{"lineNumber":213,"author":{"gitId":"jasonqiu212"},"content":"    for (let c: number \u003d 0; c \u003c matrix[0].length; c +\u003d 1) {"},{"lineNumber":214,"author":{"gitId":"-"},"content":"      let sum: number \u003d 0;"},{"lineNumber":215,"author":{"gitId":"jasonqiu212"},"content":"      for (let r: number \u003d 0; r \u003c matrix.length; r +\u003d 1) {"},{"lineNumber":216,"author":{"gitId":"jasonqiu212"},"content":"        sum +\u003d matrix[r][c] \u003d\u003d\u003d null ? 0 : matrix[r][c];"},{"lineNumber":217,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":218,"author":{"gitId":"jasonqiu212"},"content":"      sums[c] \u003d sum;"},{"lineNumber":219,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":220,"author":{"gitId":"-"},"content":"    return sums;"},{"lineNumber":221,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":222,"author":{"gitId":"-"},"content":""},{"lineNumber":223,"author":{"gitId":"jasonqiu212"},"content":"  // Count number of non-null values for each column"},{"lineNumber":224,"author":{"gitId":"jasonqiu212"},"content":"  private countValidValuesByColumn(matrix: number[][]): number[] {"},{"lineNumber":225,"author":{"gitId":"jasonqiu212"},"content":"    const counts: number[] \u003d [];"},{"lineNumber":226,"author":{"gitId":"jasonqiu212"},"content":"    for (let c: number \u003d 0; c \u003c matrix[0].length; c +\u003d 1) {"},{"lineNumber":227,"author":{"gitId":"jasonqiu212"},"content":"      let count: number \u003d 0;"},{"lineNumber":228,"author":{"gitId":"jasonqiu212"},"content":"      for (let r: number \u003d 0; r \u003c matrix.length; r +\u003d 1) {"},{"lineNumber":229,"author":{"gitId":"jasonqiu212"},"content":"        count +\u003d matrix[r][c] \u003d\u003d\u003d null ? 0 : 1;"},{"lineNumber":230,"author":{"gitId":"jasonqiu212"},"content":"      }"},{"lineNumber":231,"author":{"gitId":"jasonqiu212"},"content":"      counts[c] \u003d count;"},{"lineNumber":232,"author":{"gitId":"jasonqiu212"},"content":"    }"},{"lineNumber":233,"author":{"gitId":"jasonqiu212"},"content":"    return counts;"},{"lineNumber":234,"author":{"gitId":"jasonqiu212"},"content":"  }"},{"lineNumber":235,"author":{"gitId":"jasonqiu212"},"content":""},{"lineNumber":236,"author":{"gitId":"jasonqiu212"},"content":"  // Calculate non-null weight average for each column"},{"lineNumber":237,"author":{"gitId":"-"},"content":"  private calculateWeightsAverage(weights: number[][]): number[] {"},{"lineNumber":238,"author":{"gitId":"jasonqiu212"},"content":"    const sums: number[] \u003d this.sumValidValuesByColumn(weights);"},{"lineNumber":239,"author":{"gitId":"jasonqiu212"},"content":"    const counts: number[] \u003d this.countValidValuesByColumn(weights);"},{"lineNumber":240,"author":{"gitId":"-"},"content":"    const averages: number[] \u003d [];"},{"lineNumber":241,"author":{"gitId":"jasonqiu212"},"content":"    // Divide each weight sum by number of non-null weights"},{"lineNumber":242,"author":{"gitId":"-"},"content":"    for (let i: number \u003d 0; i \u003c sums.length; i +\u003d 1) {"},{"lineNumber":243,"author":{"gitId":"jasonqiu212"},"content":"      averages[i] \u003d counts[i] ? +(sums[i] / counts[i]).toFixed(2) : NO_VALUE;"},{"lineNumber":244,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":245,"author":{"gitId":"-"},"content":"    return averages;"},{"lineNumber":246,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":247,"author":{"gitId":"-"},"content":""},{"lineNumber":248,"author":{"gitId":"-"},"content":"  // Calculate percentage average for each column"},{"lineNumber":249,"author":{"gitId":"-"},"content":"  private calculatePercentagesAverage(answersSum: number[]): number[] {"},{"lineNumber":250,"author":{"gitId":"-"},"content":"    // Calculate total number of responses"},{"lineNumber":251,"author":{"gitId":"-"},"content":"    const numResponses \u003d this.calculateNumResponses(answersSum);"},{"lineNumber":252,"author":{"gitId":"-"},"content":"    const averages: number[] \u003d [];"},{"lineNumber":253,"author":{"gitId":"-"},"content":"    // Divide each column sum by total number of responses, then convert to percentage"},{"lineNumber":254,"author":{"gitId":"-"},"content":"    for (let i: number \u003d 0; i \u003c answersSum.length; i +\u003d 1) {"},{"lineNumber":255,"author":{"gitId":"-"},"content":"      averages[i] \u003d numResponses \u003d\u003d\u003d 0 ? 0 : +(answersSum[i] * 100 / numResponses).toFixed(2);"},{"lineNumber":256,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":257,"author":{"gitId":"-"},"content":"    return averages;"},{"lineNumber":258,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":259,"author":{"gitId":"-"},"content":""},{"lineNumber":260,"author":{"gitId":"-"},"content":"  // Calculate total number of responses"},{"lineNumber":261,"author":{"gitId":"-"},"content":"  private calculateNumResponses(answersSum: number[]): number {"},{"lineNumber":262,"author":{"gitId":"-"},"content":"    return answersSum.reduce((a, b) \u003d\u003e a + b);"},{"lineNumber":263,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":264,"author":{"gitId":"jasonqiu212"},"content":""},{"lineNumber":265,"author":{"gitId":"jasonqiu212"},"content":"  // Overall weighted sum is sum of total chosen non-null weight for all sub questions"},{"lineNumber":266,"author":{"gitId":"jasonqiu212"},"content":"  private calculateOverallWeightedSum(areChosenWeightsAllNull: boolean[], totalChosenWeights: number[]): number {"},{"lineNumber":267,"author":{"gitId":"jasonqiu212"},"content":"    if (areChosenWeightsAllNull.every(Boolean)) {"},{"lineNumber":268,"author":{"gitId":"jasonqiu212"},"content":"        return NO_VALUE;"},{"lineNumber":269,"author":{"gitId":"jasonqiu212"},"content":"    }"},{"lineNumber":270,"author":{"gitId":"jasonqiu212"},"content":"    let sum: number \u003d 0;"},{"lineNumber":271,"author":{"gitId":"jasonqiu212"},"content":"    for (const totalChosenWeight of totalChosenWeights) {"},{"lineNumber":272,"author":{"gitId":"jasonqiu212"},"content":"        sum +\u003d totalChosenWeight \u003d\u003d\u003d NO_VALUE ? 0 : totalChosenWeight;"},{"lineNumber":273,"author":{"gitId":"jasonqiu212"},"content":"    }"},{"lineNumber":274,"author":{"gitId":"jasonqiu212"},"content":"    return +(sum).toFixed(2);"},{"lineNumber":275,"author":{"gitId":"jasonqiu212"},"content":"  }"},{"lineNumber":276,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"jasonqiu212":78,"-":198}},{"path":"src/web/app/components/question-types/question-statistics/rubric-question-statistics.component.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { Component, OnChanges } from \u0027@angular/core\u0027;"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import { StringHelper } from \u0027../../../../services/string-helper\u0027;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"import { DEFAULT_RUBRIC_QUESTION_DETAILS } from \u0027../../../../types/default-question-structs\u0027;"},{"lineNumber":4,"author":{"gitId":"jasonqiu212"},"content":"import { NO_VALUE } from \u0027../../../../types/feedback-response-details\u0027;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import { SortBy } from \u0027../../../../types/sort-properties\u0027;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import { ColumnData, SortableTableCellData } from \u0027../../sortable-table/sortable-table.component\u0027;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":8,"author":{"gitId":"-"},"content":"  PerRecipientStats,"},{"lineNumber":9,"author":{"gitId":"-"},"content":"  RubricQuestionStatisticsCalculation,"},{"lineNumber":10,"author":{"gitId":"-"},"content":"} from \u0027./question-statistics-calculation/rubric-question-statistics-calculation\u0027;"},{"lineNumber":11,"author":{"gitId":"-"},"content":""},{"lineNumber":12,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":13,"author":{"gitId":"-"},"content":" * Statistics for rubric questions."},{"lineNumber":14,"author":{"gitId":"-"},"content":" */"},{"lineNumber":15,"author":{"gitId":"-"},"content":"@Component({"},{"lineNumber":16,"author":{"gitId":"-"},"content":"  selector: \u0027tm-rubric-question-statistics\u0027,"},{"lineNumber":17,"author":{"gitId":"-"},"content":"  templateUrl: \u0027./rubric-question-statistics.component.html\u0027,"},{"lineNumber":18,"author":{"gitId":"-"},"content":"  styleUrls: [\u0027./rubric-question-statistics.component.scss\u0027],"},{"lineNumber":19,"author":{"gitId":"-"},"content":"})"},{"lineNumber":20,"author":{"gitId":"-"},"content":"export class RubricQuestionStatisticsComponent extends RubricQuestionStatisticsCalculation"},{"lineNumber":21,"author":{"gitId":"-"},"content":"    implements OnChanges {"},{"lineNumber":22,"author":{"gitId":"-"},"content":""},{"lineNumber":23,"author":{"gitId":"-"},"content":"  excludeSelf: boolean \u003d false;"},{"lineNumber":24,"author":{"gitId":"-"},"content":""},{"lineNumber":25,"author":{"gitId":"-"},"content":"  summaryColumnsData: ColumnData[] \u003d [];"},{"lineNumber":26,"author":{"gitId":"-"},"content":"  summaryRowsData: SortableTableCellData[][] \u003d [];"},{"lineNumber":27,"author":{"gitId":"-"},"content":"  perRecipientPerCriterionColumnsData: ColumnData[] \u003d [];"},{"lineNumber":28,"author":{"gitId":"-"},"content":"  perRecipientPerCriterionRowsData: SortableTableCellData[][] \u003d [];"},{"lineNumber":29,"author":{"gitId":"-"},"content":"  perRecipientOverallColumnsData: ColumnData[] \u003d [];"},{"lineNumber":30,"author":{"gitId":"-"},"content":"  perRecipientOverallRowsData: SortableTableCellData[][] \u003d [];"},{"lineNumber":31,"author":{"gitId":"-"},"content":""},{"lineNumber":32,"author":{"gitId":"-"},"content":"  constructor() {"},{"lineNumber":33,"author":{"gitId":"-"},"content":"    super(DEFAULT_RUBRIC_QUESTION_DETAILS());"},{"lineNumber":34,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":35,"author":{"gitId":"-"},"content":""},{"lineNumber":36,"author":{"gitId":"-"},"content":"  ngOnChanges(): void {"},{"lineNumber":37,"author":{"gitId":"-"},"content":"    this.calculateStatistics();"},{"lineNumber":38,"author":{"gitId":"-"},"content":"    this.getTableData();"},{"lineNumber":39,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":40,"author":{"gitId":"-"},"content":""},{"lineNumber":41,"author":{"gitId":"-"},"content":"  getTableData(): void {"},{"lineNumber":42,"author":{"gitId":"-"},"content":"    this.summaryColumnsData \u003d ["},{"lineNumber":43,"author":{"gitId":"-"},"content":"        { header: \u0027Question\u0027, sortBy: SortBy.RUBRIC_SUBQUESTION },"},{"lineNumber":44,"author":{"gitId":"-"},"content":"      ...this.choices.map((choice: string) \u003d\u003e ({ header: choice, sortBy: SortBy.RUBRIC_CHOICE })),"},{"lineNumber":45,"author":{"gitId":"-"},"content":"    ];"},{"lineNumber":46,"author":{"gitId":"-"},"content":"    if (this.isWeightStatsVisible) {"},{"lineNumber":47,"author":{"gitId":"-"},"content":"      this.summaryColumnsData.push({ header: \u0027Average\u0027, sortBy: SortBy.RUBRIC_WEIGHT_AVERAGE });"},{"lineNumber":48,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":49,"author":{"gitId":"-"},"content":""},{"lineNumber":50,"author":{"gitId":"-"},"content":"    this.summaryRowsData \u003d this.subQuestions.map((subQuestion: string, questionIndex: number) \u003d\u003e {"},{"lineNumber":51,"author":{"gitId":"-"},"content":"      const currRow: SortableTableCellData[] \u003d ["},{"lineNumber":52,"author":{"gitId":"-"},"content":"        { value: `${StringHelper.integerToLowerCaseAlphabeticalIndex(questionIndex + 1)}) ${subQuestion}` },"},{"lineNumber":53,"author":{"gitId":"-"},"content":"        ...this.choices.map((_: string, choiceIndex: number) \u003d\u003e {"},{"lineNumber":54,"author":{"gitId":"-"},"content":"          if (this.excludeSelf) {"},{"lineNumber":55,"author":{"gitId":"-"},"content":"            return {"},{"lineNumber":56,"author":{"gitId":"-"},"content":"              value: `${this.percentagesExcludeSelf[questionIndex][choiceIndex]}%`"},{"lineNumber":57,"author":{"gitId":"-"},"content":"                  + ` (${this.answersExcludeSelf[questionIndex][choiceIndex]})`"},{"lineNumber":58,"author":{"gitId":"jasonqiu212"},"content":"                  + `${this.isWeightStatsVisible"},{"lineNumber":59,"author":{"gitId":"jasonqiu212"},"content":"                      ? ` [${this.getDisplayWeight(this.weights[questionIndex][choiceIndex])}]`"},{"lineNumber":60,"author":{"gitId":"jasonqiu212"},"content":"                      : \u0027\u0027}`,"},{"lineNumber":61,"author":{"gitId":"-"},"content":"            };"},{"lineNumber":62,"author":{"gitId":"-"},"content":"          }"},{"lineNumber":63,"author":{"gitId":"-"},"content":"          return {"},{"lineNumber":64,"author":{"gitId":"-"},"content":"            value: `${this.percentages[questionIndex][choiceIndex]}%`"},{"lineNumber":65,"author":{"gitId":"-"},"content":"                + ` (${this.answers[questionIndex][choiceIndex]})`"},{"lineNumber":66,"author":{"gitId":"jasonqiu212"},"content":"                + `${this.isWeightStatsVisible"},{"lineNumber":67,"author":{"gitId":"jasonqiu212"},"content":"                    ? ` [${this.getDisplayWeight(this.weights[questionIndex][choiceIndex])}]`"},{"lineNumber":68,"author":{"gitId":"jasonqiu212"},"content":"                    : \u0027\u0027}`,"},{"lineNumber":69,"author":{"gitId":"-"},"content":"          };"},{"lineNumber":70,"author":{"gitId":"-"},"content":"        }),"},{"lineNumber":71,"author":{"gitId":"-"},"content":"      ];"},{"lineNumber":72,"author":{"gitId":"-"},"content":"      if (this.isWeightStatsVisible) {"},{"lineNumber":73,"author":{"gitId":"-"},"content":"        if (this.excludeSelf) {"},{"lineNumber":74,"author":{"gitId":"jasonqiu212"},"content":"          currRow.push({"},{"lineNumber":75,"author":{"gitId":"jasonqiu212"},"content":"            value: this.getDisplayWeight(this.subQuestionWeightAverageExcludeSelf[questionIndex]),"},{"lineNumber":76,"author":{"gitId":"jasonqiu212"},"content":"          });"},{"lineNumber":77,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":78,"author":{"gitId":"jasonqiu212"},"content":"          currRow.push({"},{"lineNumber":79,"author":{"gitId":"jasonqiu212"},"content":"            value: this.getDisplayWeight(this.subQuestionWeightAverage[questionIndex]),"},{"lineNumber":80,"author":{"gitId":"jasonqiu212"},"content":"          });"},{"lineNumber":81,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":82,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":83,"author":{"gitId":"-"},"content":""},{"lineNumber":84,"author":{"gitId":"-"},"content":"      return currRow;"},{"lineNumber":85,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":86,"author":{"gitId":"-"},"content":""},{"lineNumber":87,"author":{"gitId":"-"},"content":"    if (!this.isWeightStatsVisible) {"},{"lineNumber":88,"author":{"gitId":"-"},"content":"      return;"},{"lineNumber":89,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":90,"author":{"gitId":"-"},"content":""},{"lineNumber":91,"author":{"gitId":"-"},"content":"    // generate per recipient tables if weight is enabled"},{"lineNumber":92,"author":{"gitId":"-"},"content":"    this.perRecipientPerCriterionColumnsData \u003d ["},{"lineNumber":93,"author":{"gitId":"-"},"content":"      { header: \u0027Team\u0027, sortBy: SortBy.TEAM_NAME },"},{"lineNumber":94,"author":{"gitId":"-"},"content":"      { header: \u0027Recipient Name\u0027, sortBy: SortBy.RECIPIENT_NAME },"},{"lineNumber":95,"author":{"gitId":"-"},"content":"      { header: \u0027Sub Question\u0027, sortBy: SortBy.QUESTION_TEXT },"},{"lineNumber":96,"author":{"gitId":"-"},"content":"      ...this.choices.map((choice: string) \u003d\u003e ({ header: choice, sortBy: SortBy.RUBRIC_CHOICE })),"},{"lineNumber":97,"author":{"gitId":"-"},"content":"      { header: \u0027Total\u0027, sortBy: SortBy.RUBRIC_TOTAL_CHOSEN_WEIGHT },"},{"lineNumber":98,"author":{"gitId":"-"},"content":"      { header: \u0027Average\u0027, sortBy: SortBy.RUBRIC_WEIGHT_AVERAGE },"},{"lineNumber":99,"author":{"gitId":"-"},"content":"    ];"},{"lineNumber":100,"author":{"gitId":"-"},"content":""},{"lineNumber":101,"author":{"gitId":"-"},"content":"    this.perRecipientPerCriterionRowsData \u003d [];"},{"lineNumber":102,"author":{"gitId":"-"},"content":"    Object.values(this.perRecipientStatsMap).forEach((perRecipientStats: PerRecipientStats) \u003d\u003e {"},{"lineNumber":103,"author":{"gitId":"-"},"content":"      this.subQuestions.forEach((subQuestion: string, questionIndex: number) \u003d\u003e {"},{"lineNumber":104,"author":{"gitId":"-"},"content":"        this.perRecipientPerCriterionRowsData.push(["},{"lineNumber":105,"author":{"gitId":"-"},"content":"          { value: perRecipientStats.recipientTeam },"},{"lineNumber":106,"author":{"gitId":"-"},"content":"          {"},{"lineNumber":107,"author":{"gitId":"-"},"content":"            value: perRecipientStats.recipientName"},{"lineNumber":108,"author":{"gitId":"-"},"content":"            + (perRecipientStats.recipientEmail ? ` (${perRecipientStats.recipientEmail})` : \u0027\u0027),"},{"lineNumber":109,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":110,"author":{"gitId":"-"},"content":"          { value: `${StringHelper.integerToLowerCaseAlphabeticalIndex(questionIndex + 1)}) ${subQuestion}` },"},{"lineNumber":111,"author":{"gitId":"-"},"content":"          ...this.choices.map((_: string, choiceIndex: number) \u003d\u003e {"},{"lineNumber":112,"author":{"gitId":"-"},"content":"            return {"},{"lineNumber":113,"author":{"gitId":"-"},"content":"              value: `${perRecipientStats.percentages[questionIndex][choiceIndex]}%`"},{"lineNumber":114,"author":{"gitId":"-"},"content":"                  + ` (${perRecipientStats.answers[questionIndex][choiceIndex]})`"},{"lineNumber":115,"author":{"gitId":"jasonqiu212"},"content":"                  + ` [${this.getDisplayWeight(this.weights[questionIndex][choiceIndex])}]`,"},{"lineNumber":116,"author":{"gitId":"-"},"content":"            };"},{"lineNumber":117,"author":{"gitId":"-"},"content":"          }),"},{"lineNumber":118,"author":{"gitId":"jasonqiu212"},"content":"          { value: this.getDisplayWeight(perRecipientStats.subQuestionTotalChosenWeight[questionIndex]) },"},{"lineNumber":119,"author":{"gitId":"jasonqiu212"},"content":"          { value: this.getDisplayWeight(perRecipientStats.subQuestionWeightAverage[questionIndex]) },"},{"lineNumber":120,"author":{"gitId":"-"},"content":"        ]);"},{"lineNumber":121,"author":{"gitId":"-"},"content":"      });"},{"lineNumber":122,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":123,"author":{"gitId":"-"},"content":""},{"lineNumber":124,"author":{"gitId":"-"},"content":"    this.perRecipientOverallColumnsData \u003d ["},{"lineNumber":125,"author":{"gitId":"-"},"content":"      { header: \u0027Team\u0027, sortBy: SortBy.TEAM_NAME },"},{"lineNumber":126,"author":{"gitId":"-"},"content":"      { header: \u0027Recipient Name\u0027, sortBy: SortBy.RECIPIENT_NAME },"},{"lineNumber":127,"author":{"gitId":"-"},"content":"      { header: \u0027Recipient Email\u0027, sortBy: SortBy.RECIPIENT_EMAIL },"},{"lineNumber":128,"author":{"gitId":"-"},"content":"      ...this.choices.map((choice: string) \u003d\u003e ({ header: choice, sortBy: SortBy.RUBRIC_CHOICE })),"},{"lineNumber":129,"author":{"gitId":"-"},"content":"      { header: \u0027Total\u0027, sortBy: SortBy.RUBRIC_OVERALL_TOTAL_WEIGHT },"},{"lineNumber":130,"author":{"gitId":"-"},"content":"      { header: \u0027Average\u0027, sortBy: SortBy.RUBRIC_OVERALL_WEIGHT_AVERAGE },"},{"lineNumber":131,"author":{"gitId":"-"},"content":"      { header: \u0027Per Criterion Average\u0027, sortBy: SortBy.RUBRIC_OVERALL_WEIGHT_AVERAGE },"},{"lineNumber":132,"author":{"gitId":"-"},"content":"    ];"},{"lineNumber":133,"author":{"gitId":"-"},"content":""},{"lineNumber":134,"author":{"gitId":"-"},"content":"    this.perRecipientOverallRowsData \u003d [];"},{"lineNumber":135,"author":{"gitId":"-"},"content":"    Object.values(this.perRecipientStatsMap).forEach((perRecipientStats: PerRecipientStats) \u003d\u003e {"},{"lineNumber":136,"author":{"gitId":"jasonqiu212"},"content":"      const perCriterionAverage: string \u003d"},{"lineNumber":137,"author":{"gitId":"jasonqiu212"},"content":"          perRecipientStats.subQuestionWeightAverage.map((val: number) \u003d\u003e"},{"lineNumber":138,"author":{"gitId":"jasonqiu212"},"content":"          this.getDisplayWeight(val)).toString();"},{"lineNumber":139,"author":{"gitId":"-"},"content":"      this.perRecipientOverallRowsData.push(["},{"lineNumber":140,"author":{"gitId":"-"},"content":"        { value: perRecipientStats.recipientTeam },"},{"lineNumber":141,"author":{"gitId":"-"},"content":"        { value: perRecipientStats.recipientName },"},{"lineNumber":142,"author":{"gitId":"-"},"content":"        { value: perRecipientStats.recipientEmail },"},{"lineNumber":143,"author":{"gitId":"-"},"content":"        ...this.choices.map((_: string, choiceIndex: number) \u003d\u003e {"},{"lineNumber":144,"author":{"gitId":"-"},"content":"          return {"},{"lineNumber":145,"author":{"gitId":"-"},"content":"            value: `${perRecipientStats.percentagesAverage[choiceIndex]}%`"},{"lineNumber":146,"author":{"gitId":"-"},"content":"                + ` (${perRecipientStats.answersSum[choiceIndex]})`"},{"lineNumber":147,"author":{"gitId":"jasonqiu212"},"content":"                + ` [${this.getDisplayWeight(perRecipientStats.weightsAverage[choiceIndex])}]`,"},{"lineNumber":148,"author":{"gitId":"-"},"content":"          };"},{"lineNumber":149,"author":{"gitId":"-"},"content":"        }),"},{"lineNumber":150,"author":{"gitId":"jasonqiu212"},"content":"        { value: this.getDisplayWeight(perRecipientStats.overallWeightedSum) },"},{"lineNumber":151,"author":{"gitId":"jasonqiu212"},"content":"        { value: this.getDisplayWeight(perRecipientStats.overallWeightAverage) },"},{"lineNumber":152,"author":{"gitId":"jasonqiu212"},"content":"        { value: perCriterionAverage },"},{"lineNumber":153,"author":{"gitId":"-"},"content":"      ]);"},{"lineNumber":154,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":155,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":156,"author":{"gitId":"jasonqiu212"},"content":""},{"lineNumber":157,"author":{"gitId":"jasonqiu212"},"content":"  private getDisplayWeight(weight: number): any {"},{"lineNumber":158,"author":{"gitId":"jasonqiu212"},"content":"    return weight \u003d\u003d\u003d null || weight \u003d\u003d\u003d NO_VALUE ? \u0027-\u0027 : weight;"},{"lineNumber":159,"author":{"gitId":"jasonqiu212"},"content":"  }"},{"lineNumber":160,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"jasonqiu212":27,"-":133}},{"path":"src/web/app/components/sessions-recycle-bin-table/sessions-recycle-bin-table.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"row card-body recycle-bin-body\"\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"col-12\"\u003e"},{"lineNumber":3,"author":{"gitId":"-"},"content":"    \u003ch2 class\u003d\"text-muted\"\u003e"},{"lineNumber":4,"author":{"gitId":"-"},"content":"      \u003ci class\u003d\"fas fa-trash-alt\"\u003e\u003c/i\u003e Deleted Feedback Sessions"},{"lineNumber":5,"author":{"gitId":"-"},"content":"    \u003c/h2\u003e"},{"lineNumber":6,"author":{"gitId":"-"},"content":"    \u003cdiv\u003e"},{"lineNumber":7,"author":{"gitId":"-"},"content":"      \u003cng-template #emptyBinAlert\u003e"},{"lineNumber":8,"author":{"gitId":"-"},"content":"        \u003cdiv class\u003d\"alert alert-warning margin-top-30px\" role\u003d\"alert\"\u003e"},{"lineNumber":9,"author":{"gitId":"-"},"content":"          There are no sessions in the bin."},{"lineNumber":10,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":11,"author":{"gitId":"-"},"content":"      \u003c/ng-template\u003e"},{"lineNumber":12,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"card bg-light top-padded\" *ngIf\u003d\"recycleBinFeedbackSessionRowModels.length !\u003d\u003d 0 else emptyBinAlert\"\u003e"},{"lineNumber":13,"author":{"gitId":"-"},"content":"        \u003cdiv id\u003d\"deleted-sessions-heading\" class\u003d\"card-header bg-secondary text-white cursor-pointer\" (click)\u003d\"recycleBinExpandEvent.emit()\"\u003e"},{"lineNumber":14,"author":{"gitId":"-"},"content":"          \u003cb\u003eRecycle Bin\u003c/b\u003e"},{"lineNumber":15,"author":{"gitId":"-"},"content":"          \u003cdiv class\u003d\"card-header-btn-toolbar\"\u003e"},{"lineNumber":16,"author":{"gitId":"-"},"content":"            \u003cbutton id\u003d\"btn-restore-all\" type\u003d\"button\" class\u003d\"btn btn-secondary btn-sm\" ngbTooltip\u003d\"Restore all feedback sessions\""},{"lineNumber":17,"author":{"gitId":"-"},"content":"                    (click)\u003d\"$event.stopPropagation(); restoreAllRecycleBinFeedbackSessionEvent.emit()\"\u003e\u003ci class\u003d\"fas fa-check\"\u003e\u003c/i\u003e Restore All\u003c/button\u003e"},{"lineNumber":18,"author":{"gitId":"-"},"content":"            \u003cbutton id\u003d\"btn-delete-all\" type\u003d\"button\" class\u003d\"btn btn-secondary btn-sm\" ngbTooltip\u003d\"Permanently delete all feedback sessions\""},{"lineNumber":19,"author":{"gitId":"-"},"content":"                    (click)\u003d\"$event.stopPropagation(); permanentDeleteAllSessionsEvent.emit()\"\u003e\u003ci class\u003d\"fas fa-times\"\u003e\u003c/i\u003e Delete All\u003c/button\u003e"},{"lineNumber":20,"author":{"gitId":"-"},"content":"            \u003ctm-panel-chevron [isExpanded]\u003d\"isRecycleBinExpanded\"\u003e\u003c/tm-panel-chevron\u003e"},{"lineNumber":21,"author":{"gitId":"-"},"content":"          \u003c/div\u003e"},{"lineNumber":22,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":23,"author":{"gitId":"weiquu"},"content":"        \u003cdiv *ngIf\u003d\"isRecycleBinExpanded\" class\u003d\"table-responsive\" @collapseAnim\u003e"},{"lineNumber":24,"author":{"gitId":"weiquu"},"content":"          \u003ctable id\u003d\"deleted-sessions-table\" class\u003d\"table table-striped table-bordered recycle-bin-table\"\u003e"},{"lineNumber":25,"author":{"gitId":"-"},"content":"            \u003cthead class\u003d\"recycle-bin-table-header\"\u003e"},{"lineNumber":26,"author":{"gitId":"-"},"content":"            \u003ctr\u003e"},{"lineNumber":27,"author":{"gitId":"weiquu"},"content":"              \u003cth id\u003d\"sort-deleted-course-id\" (click)\u003d\"sortRecycleBinFeedbackSessionRows(SortBy.COURSE_ID)\" class\u003d\"sortable-header\" [attr.aria-sort]\u003d\"getAriaSort(SortBy.COURSE_ID)\"\u003e"},{"lineNumber":28,"author":{"gitId":"weiquu"},"content":"                \u003cbutton\u003e"},{"lineNumber":29,"author":{"gitId":"-"},"content":"                  Course ID"},{"lineNumber":30,"author":{"gitId":"weiquu"},"content":"                  \u003cspan class\u003d\"fa-stack\" aria-hidden\u003d\"true\"\u003e"},{"lineNumber":31,"author":{"gitId":"-"},"content":"                    \u003ci class\u003d\"fas fa-sort\"\u003e\u003c/i\u003e"},{"lineNumber":32,"author":{"gitId":"-"},"content":"                    \u003ci *ngIf\u003d\"recycleBinFeedbackSessionRowModelsSortBy \u003d\u003d\u003d SortBy.COURSE_ID \u0026\u0026 recycleBinFeedbackSessionRowModelsSortOrder \u003d\u003d\u003d SortOrder.DESC\" class\u003d\"fas fa-sort-down\"\u003e\u003c/i\u003e"},{"lineNumber":33,"author":{"gitId":"-"},"content":"                    \u003ci *ngIf\u003d\"recycleBinFeedbackSessionRowModelsSortBy \u003d\u003d\u003d SortBy.COURSE_ID \u0026\u0026 recycleBinFeedbackSessionRowModelsSortOrder \u003d\u003d\u003d SortOrder.ASC\" class\u003d\"fas fa-sort-up\"\u003e\u003c/i\u003e"},{"lineNumber":34,"author":{"gitId":"-"},"content":"                  \u003c/span\u003e"},{"lineNumber":35,"author":{"gitId":"weiquu"},"content":"                \u003c/button\u003e"},{"lineNumber":36,"author":{"gitId":"-"},"content":"              \u003c/th\u003e"},{"lineNumber":37,"author":{"gitId":"weiquu"},"content":"              \u003cth id\u003d\"sort-deleted-session-name\" (click)\u003d\"sortRecycleBinFeedbackSessionRows(SortBy.SESSION_NAME)\" class\u003d\"sortable-header\" [attr.aria-sort]\u003d\"getAriaSort(SortBy.SESSION_NAME)\"\u003e"},{"lineNumber":38,"author":{"gitId":"weiquu"},"content":"                \u003cbutton\u003e"},{"lineNumber":39,"author":{"gitId":"-"},"content":"                  Session Name"},{"lineNumber":40,"author":{"gitId":"weiquu"},"content":"                  \u003cspan class\u003d\"fa-stack\" aria-hidden\u003d\"true\"\u003e"},{"lineNumber":41,"author":{"gitId":"-"},"content":"                    \u003ci class\u003d\"fas fa-sort\"\u003e\u003c/i\u003e"},{"lineNumber":42,"author":{"gitId":"-"},"content":"                    \u003ci *ngIf\u003d\"recycleBinFeedbackSessionRowModelsSortBy \u003d\u003d\u003d SortBy.SESSION_NAME \u0026\u0026 recycleBinFeedbackSessionRowModelsSortOrder \u003d\u003d\u003d SortOrder.DESC\" class\u003d\"fas fa-sort-down\"\u003e\u003c/i\u003e"},{"lineNumber":43,"author":{"gitId":"-"},"content":"                    \u003ci *ngIf\u003d\"recycleBinFeedbackSessionRowModelsSortBy \u003d\u003d\u003d SortBy.SESSION_NAME \u0026\u0026 recycleBinFeedbackSessionRowModelsSortOrder \u003d\u003d\u003d SortOrder.ASC\" class\u003d\"fas fa-sort-up\"\u003e\u003c/i\u003e"},{"lineNumber":44,"author":{"gitId":"-"},"content":"                  \u003c/span\u003e"},{"lineNumber":45,"author":{"gitId":"weiquu"},"content":"                \u003c/button\u003e"},{"lineNumber":46,"author":{"gitId":"-"},"content":"              \u003c/th\u003e"},{"lineNumber":47,"author":{"gitId":"weiquu"},"content":"              \u003cth (click)\u003d\"sortRecycleBinFeedbackSessionRows(SortBy.SESSION_CREATION_DATE)\" class\u003d\"sortable-header\" [attr.aria-sort]\u003d\"getAriaSort(SortBy.SESSION_CREATION_DATE)\"\u003e"},{"lineNumber":48,"author":{"gitId":"weiquu"},"content":"                \u003cbutton\u003e"},{"lineNumber":49,"author":{"gitId":"-"},"content":"                  Creation Date"},{"lineNumber":50,"author":{"gitId":"weiquu"},"content":"                  \u003cspan class\u003d\"fa-stack\" aria-hidden\u003d\"true\"\u003e"},{"lineNumber":51,"author":{"gitId":"-"},"content":"                    \u003ci class\u003d\"fas fa-sort\"\u003e\u003c/i\u003e"},{"lineNumber":52,"author":{"gitId":"-"},"content":"                    \u003ci *ngIf\u003d\"recycleBinFeedbackSessionRowModelsSortBy \u003d\u003d\u003d SortBy.SESSION_CREATION_DATE \u0026\u0026 recycleBinFeedbackSessionRowModelsSortOrder \u003d\u003d\u003d SortOrder.DESC\" class\u003d\"fas fa-sort-down\"\u003e\u003c/i\u003e"},{"lineNumber":53,"author":{"gitId":"-"},"content":"                    \u003ci *ngIf\u003d\"recycleBinFeedbackSessionRowModelsSortBy \u003d\u003d\u003d SortBy.SESSION_CREATION_DATE \u0026\u0026 recycleBinFeedbackSessionRowModelsSortOrder \u003d\u003d\u003d SortOrder.ASC\" class\u003d\"fas fa-sort-up\"\u003e\u003c/i\u003e"},{"lineNumber":54,"author":{"gitId":"-"},"content":"                  \u003c/span\u003e"},{"lineNumber":55,"author":{"gitId":"weiquu"},"content":"                \u003c/button\u003e"},{"lineNumber":56,"author":{"gitId":"-"},"content":"              \u003c/th\u003e"},{"lineNumber":57,"author":{"gitId":"weiquu"},"content":"              \u003cth (click)\u003d\"sortRecycleBinFeedbackSessionRows(SortBy.SESSION_DELETION_DATE)\" class\u003d\"sortable-header\" [attr.aria-sort]\u003d\"getAriaSort(SortBy.SESSION_DELETION_DATE)\"\u003e"},{"lineNumber":58,"author":{"gitId":"weiquu"},"content":"                \u003cbutton\u003e"},{"lineNumber":59,"author":{"gitId":"-"},"content":"                  Deletion Date"},{"lineNumber":60,"author":{"gitId":"weiquu"},"content":"                  \u003cspan class\u003d\"fa-stack\" aria-hidden\u003d\"true\"\u003e"},{"lineNumber":61,"author":{"gitId":"-"},"content":"                    \u003ci class\u003d\"fas fa-sort\"\u003e\u003c/i\u003e"},{"lineNumber":62,"author":{"gitId":"-"},"content":"                    \u003ci *ngIf\u003d\"recycleBinFeedbackSessionRowModelsSortBy \u003d\u003d\u003d SortBy.SESSION_DELETION_DATE \u0026\u0026 recycleBinFeedbackSessionRowModelsSortOrder \u003d\u003d\u003d SortOrder.DESC\" class\u003d\"fas fa-sort-down\"\u003e\u003c/i\u003e"},{"lineNumber":63,"author":{"gitId":"-"},"content":"                    \u003ci *ngIf\u003d\"recycleBinFeedbackSessionRowModelsSortBy \u003d\u003d\u003d SortBy.SESSION_DELETION_DATE \u0026\u0026 recycleBinFeedbackSessionRowModelsSortOrder \u003d\u003d\u003d SortOrder.ASC\" class\u003d\"fas fa-sort-up\"\u003e\u003c/i\u003e"},{"lineNumber":64,"author":{"gitId":"-"},"content":"                  \u003c/span\u003e"},{"lineNumber":65,"author":{"gitId":"weiquu"},"content":"                \u003c/button\u003e"},{"lineNumber":66,"author":{"gitId":"-"},"content":"              \u003c/th\u003e"},{"lineNumber":67,"author":{"gitId":"-"},"content":"              \u003cth class\u003d\"text-center\"\u003eAction(s)\u003c/th\u003e"},{"lineNumber":68,"author":{"gitId":"-"},"content":"            \u003c/tr\u003e"},{"lineNumber":69,"author":{"gitId":"-"},"content":"            \u003c/thead\u003e"},{"lineNumber":70,"author":{"gitId":"-"},"content":"            \u003ctbody\u003e"},{"lineNumber":71,"author":{"gitId":"-"},"content":"            \u003ctr *ngFor\u003d\"let recycleBinFeedbackSessionRowModel of recycleBinFeedbackSessionRowModels; let i \u003d index\"\u003e"},{"lineNumber":72,"author":{"gitId":"-"},"content":"              \u003ctd class\u003d\"text-break\"\u003e{{ recycleBinFeedbackSessionRowModel.feedbackSession.courseId }}\u003c/td\u003e"},{"lineNumber":73,"author":{"gitId":"-"},"content":"              \u003ctd class\u003d\"text-break\"\u003e{{ recycleBinFeedbackSessionRowModel.feedbackSession.feedbackSessionName }}\u003c/td\u003e"},{"lineNumber":74,"author":{"gitId":"-"},"content":"              \u003ctd\u003e"},{"lineNumber":75,"author":{"gitId":"-"},"content":"                \u003cspan class\u003d\"ngb-tooltip-class\" [ngbTooltip]\u003d\"recycleBinFeedbackSessionRowModel.feedbackSession.createdAtTimestamp | formatDateDetail:recycleBinFeedbackSessionRowModel.feedbackSession.timeZone\" container\u003d\"body\"\u003e"},{"lineNumber":76,"author":{"gitId":"-"},"content":"                  {{ recycleBinFeedbackSessionRowModel.feedbackSession.createdAtTimestamp | recycleBinTableFormatDate:recycleBinFeedbackSessionRowModel.feedbackSession.timeZone }}"},{"lineNumber":77,"author":{"gitId":"-"},"content":"                \u003c/span\u003e"},{"lineNumber":78,"author":{"gitId":"-"},"content":"              \u003c/td\u003e"},{"lineNumber":79,"author":{"gitId":"-"},"content":"              \u003ctd\u003e"},{"lineNumber":80,"author":{"gitId":"-"},"content":"                \u003cspan class\u003d\"ngb-tooltip-class\" [ngbTooltip]\u003d\"recycleBinFeedbackSessionRowModel.feedbackSession.deletedAtTimestamp | formatDateDetail:recycleBinFeedbackSessionRowModel.feedbackSession.timeZone\" container\u003d\"body\"\u003e"},{"lineNumber":81,"author":{"gitId":"-"},"content":"                  {{ recycleBinFeedbackSessionRowModel.feedbackSession.deletedAtTimestamp | recycleBinTableFormatDate:recycleBinFeedbackSessionRowModel.feedbackSession.timeZone }}"},{"lineNumber":82,"author":{"gitId":"-"},"content":"                \u003c/span\u003e"},{"lineNumber":83,"author":{"gitId":"-"},"content":"              \u003c/td\u003e"},{"lineNumber":84,"author":{"gitId":"-"},"content":"              \u003ctd class\u003d\"text-center actions-cell\"\u003e"},{"lineNumber":85,"author":{"gitId":"-"},"content":"                \u003cdiv class\u003d\"d-flex\"\u003e"},{"lineNumber":86,"author":{"gitId":"-"},"content":"                  \u003cbutton id\u003d\"btn-restore-{{ i }}\" type\u003d\"button\" class\u003d\"btn btn-light btn-sm\" (click)\u003d\"restoreSessionEvent.emit(recycleBinFeedbackSessionRowModel)\"\u003eRestore\u003c/button\u003e"},{"lineNumber":87,"author":{"gitId":"-"},"content":"                  \u003cbutton id\u003d\"btn-delete-{{ i }}\" type\u003d\"button\" class\u003d\"btn btn-light btn-sm text-danger\" (click)\u003d\"permanentlyDeleteSessionEvent.emit(recycleBinFeedbackSessionRowModel); setRowClicked(i)\"\u003e"},{"lineNumber":88,"author":{"gitId":"-"},"content":"                    \u003cspan\u003eDelete Permanently\u003c/span\u003e"},{"lineNumber":89,"author":{"gitId":"-"},"content":"                    \u003cdiv class\u003d\"padding-left-7px\"\u003e"},{"lineNumber":90,"author":{"gitId":"-"},"content":"                      \u003ctm-ajax-loading [color]\u003d\"\u0027#000000\u0027\" *ngIf\u003d\"isPermanentDeleteLoading \u0026\u0026 rowClicked \u003d\u003d\u003d i\"\u003e\u003c/tm-ajax-loading\u003e"},{"lineNumber":91,"author":{"gitId":"-"},"content":"                    \u003c/div\u003e"},{"lineNumber":92,"author":{"gitId":"-"},"content":"                  \u003c/button\u003e"},{"lineNumber":93,"author":{"gitId":"-"},"content":"                \u003c/div\u003e"},{"lineNumber":94,"author":{"gitId":"-"},"content":"              \u003c/td\u003e"},{"lineNumber":95,"author":{"gitId":"-"},"content":"            \u003c/tr\u003e"},{"lineNumber":96,"author":{"gitId":"-"},"content":"            \u003c/tbody\u003e"},{"lineNumber":97,"author":{"gitId":"-"},"content":"          \u003c/table\u003e"},{"lineNumber":98,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":99,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":100,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":101,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":102,"author":{"gitId":"-"},"content":"\u003c/div\u003e"}],"authorContributionMap":{"weiquu":18,"-":84}},{"path":"src/web/app/components/sessions-recycle-bin-table/sessions-recycle-bin-table.component.scss","fileType":"scss","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":".recycle-bin-body {"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  padding: 0;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"}"},{"lineNumber":4,"author":{"gitId":"-"},"content":""},{"lineNumber":5,"author":{"gitId":"-"},"content":".recycle-bin-table {"},{"lineNumber":6,"author":{"gitId":"-"},"content":"  margin-bottom: 0;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"  min-width: 700px;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"}"},{"lineNumber":9,"author":{"gitId":"-"},"content":""},{"lineNumber":10,"author":{"gitId":"-"},"content":".recycle-bin-table-header {"},{"lineNumber":11,"author":{"gitId":"-"},"content":"  background-color: #E5E5E6;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"  color: gray;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"  font-weight: normal;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"}"},{"lineNumber":15,"author":{"gitId":"-"},"content":""},{"lineNumber":16,"author":{"gitId":"-"},"content":".sortable-header {"},{"lineNumber":17,"author":{"gitId":"-"},"content":"  cursor: pointer;"},{"lineNumber":18,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":19,"author":{"gitId":"weiquu"},"content":"  i {"},{"lineNumber":20,"author":{"gitId":"weiquu"},"content":"    margin-left: .3em;"},{"lineNumber":21,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":22,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":23,"author":{"gitId":"weiquu"},"content":"  .fa-stack {"},{"lineNumber":24,"author":{"gitId":"weiquu"},"content":"    width: 20%;"},{"lineNumber":25,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":26,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":27,"author":{"gitId":"weiquu"},"content":"  button {"},{"lineNumber":28,"author":{"gitId":"weiquu"},"content":"    background: none;"},{"lineNumber":29,"author":{"gitId":"weiquu"},"content":"    color: inherit;"},{"lineNumber":30,"author":{"gitId":"weiquu"},"content":"    border: none;"},{"lineNumber":31,"author":{"gitId":"weiquu"},"content":"    padding: 0;"},{"lineNumber":32,"author":{"gitId":"weiquu"},"content":"    text-align: left;"},{"lineNumber":33,"author":{"gitId":"weiquu"},"content":"    width: 100%;"},{"lineNumber":34,"author":{"gitId":"weiquu"},"content":"    font: inherit;"},{"lineNumber":35,"author":{"gitId":"weiquu"},"content":"    cursor: inherit;"},{"lineNumber":36,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":37,"author":{"gitId":"-"},"content":"}"},{"lineNumber":38,"author":{"gitId":"-"},"content":""},{"lineNumber":39,"author":{"gitId":"-"},"content":".actions-cell button {"},{"lineNumber":40,"author":{"gitId":"-"},"content":"  margin-right: var(--btn-margin);"},{"lineNumber":41,"author":{"gitId":"-"},"content":"}"},{"lineNumber":42,"author":{"gitId":"-"},"content":""},{"lineNumber":43,"author":{"gitId":"-"},"content":".padding-left-7px {"},{"lineNumber":44,"author":{"gitId":"-"},"content":"  padding-left: 7px;"},{"lineNumber":45,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"weiquu":19,"-":26}},{"path":"src/web/app/components/sessions-recycle-bin-table/sessions-recycle-bin-table.component.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { Component, EventEmitter, Input, Output } from \u0027@angular/core\u0027;"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import { FeedbackSession } from \u0027../../../types/api-output\u0027;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"import { SortBy, SortOrder } from \u0027../../../types/sort-properties\u0027;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import { collapseAnim } from \u0027../teammates-common/collapse-anim\u0027;"},{"lineNumber":5,"author":{"gitId":"-"},"content":""},{"lineNumber":6,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":7,"author":{"gitId":"-"},"content":" * Model for a row of recycle bin feedback session"},{"lineNumber":8,"author":{"gitId":"-"},"content":" */"},{"lineNumber":9,"author":{"gitId":"-"},"content":"export interface RecycleBinFeedbackSessionRowModel {"},{"lineNumber":10,"author":{"gitId":"-"},"content":"  feedbackSession: FeedbackSession;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"}"},{"lineNumber":12,"author":{"gitId":"-"},"content":""},{"lineNumber":13,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":14,"author":{"gitId":"-"},"content":" * A table to display a list of deleted feedback sessions"},{"lineNumber":15,"author":{"gitId":"-"},"content":" */"},{"lineNumber":16,"author":{"gitId":"-"},"content":"@Component({"},{"lineNumber":17,"author":{"gitId":"-"},"content":"  selector: \u0027tm-sessions-recycle-bin-table\u0027,"},{"lineNumber":18,"author":{"gitId":"-"},"content":"  templateUrl: \u0027./sessions-recycle-bin-table.component.html\u0027,"},{"lineNumber":19,"author":{"gitId":"-"},"content":"  styleUrls: [\u0027./sessions-recycle-bin-table.component.scss\u0027],"},{"lineNumber":20,"author":{"gitId":"-"},"content":"  animations: [collapseAnim],"},{"lineNumber":21,"author":{"gitId":"-"},"content":"})"},{"lineNumber":22,"author":{"gitId":"-"},"content":"export class SessionsRecycleBinTableComponent {"},{"lineNumber":23,"author":{"gitId":"-"},"content":""},{"lineNumber":24,"author":{"gitId":"-"},"content":"  // enum"},{"lineNumber":25,"author":{"gitId":"-"},"content":"  SortBy: typeof SortBy \u003d SortBy;"},{"lineNumber":26,"author":{"gitId":"-"},"content":"  SortOrder: typeof SortOrder \u003d SortOrder;"},{"lineNumber":27,"author":{"gitId":"-"},"content":""},{"lineNumber":28,"author":{"gitId":"-"},"content":"  // variable"},{"lineNumber":29,"author":{"gitId":"-"},"content":"  rowClicked: number \u003d -1;"},{"lineNumber":30,"author":{"gitId":"-"},"content":""},{"lineNumber":31,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":32,"author":{"gitId":"-"},"content":"  isRecycleBinExpanded: boolean \u003d false;"},{"lineNumber":33,"author":{"gitId":"-"},"content":""},{"lineNumber":34,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":35,"author":{"gitId":"-"},"content":"  recycleBinFeedbackSessionRowModels: RecycleBinFeedbackSessionRowModel[] \u003d [];"},{"lineNumber":36,"author":{"gitId":"-"},"content":""},{"lineNumber":37,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":38,"author":{"gitId":"-"},"content":"  recycleBinFeedbackSessionRowModelsSortBy: SortBy \u003d SortBy.NONE;"},{"lineNumber":39,"author":{"gitId":"-"},"content":""},{"lineNumber":40,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":41,"author":{"gitId":"-"},"content":"  recycleBinFeedbackSessionRowModelsSortOrder: SortOrder \u003d SortOrder.ASC;"},{"lineNumber":42,"author":{"gitId":"-"},"content":""},{"lineNumber":43,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":44,"author":{"gitId":"-"},"content":"  isPermanentDeleteLoading: boolean \u003d false;"},{"lineNumber":45,"author":{"gitId":"-"},"content":""},{"lineNumber":46,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":47,"author":{"gitId":"-"},"content":"  restoreSessionEvent: EventEmitter\u003cRecycleBinFeedbackSessionRowModel\u003e \u003d new EventEmitter();"},{"lineNumber":48,"author":{"gitId":"-"},"content":""},{"lineNumber":49,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":50,"author":{"gitId":"-"},"content":"  restoreAllRecycleBinFeedbackSessionEvent: EventEmitter\u003cany\u003e \u003d new EventEmitter();"},{"lineNumber":51,"author":{"gitId":"-"},"content":""},{"lineNumber":52,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":53,"author":{"gitId":"-"},"content":"  permanentlyDeleteSessionEvent: EventEmitter\u003cRecycleBinFeedbackSessionRowModel\u003e \u003d new EventEmitter();"},{"lineNumber":54,"author":{"gitId":"-"},"content":""},{"lineNumber":55,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":56,"author":{"gitId":"-"},"content":"  permanentDeleteAllSessionsEvent: EventEmitter\u003cany\u003e \u003d new EventEmitter();"},{"lineNumber":57,"author":{"gitId":"-"},"content":""},{"lineNumber":58,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":59,"author":{"gitId":"-"},"content":"  sortRecycleBinFeedbackSessionRowsEvent: EventEmitter\u003cSortBy\u003e \u003d new EventEmitter();"},{"lineNumber":60,"author":{"gitId":"-"},"content":""},{"lineNumber":61,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":62,"author":{"gitId":"-"},"content":"  recycleBinExpandEvent: EventEmitter\u003cany\u003e \u003d new EventEmitter\u003cany\u003e();"},{"lineNumber":63,"author":{"gitId":"-"},"content":""},{"lineNumber":64,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":65,"author":{"gitId":"-"},"content":"   * Sorts the list of deleted feedback session row"},{"lineNumber":66,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":67,"author":{"gitId":"-"},"content":"  sortRecycleBinFeedbackSessionRows(by: SortBy): void {"},{"lineNumber":68,"author":{"gitId":"-"},"content":"    this.sortRecycleBinFeedbackSessionRowsEvent.emit(by);"},{"lineNumber":69,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":70,"author":{"gitId":"-"},"content":""},{"lineNumber":71,"author":{"gitId":"weiquu"},"content":"  getAriaSort(by: SortBy): String {"},{"lineNumber":72,"author":{"gitId":"weiquu"},"content":"    if (by !\u003d\u003d this.recycleBinFeedbackSessionRowModelsSortBy) {"},{"lineNumber":73,"author":{"gitId":"weiquu"},"content":"      return \u0027none\u0027;"},{"lineNumber":74,"author":{"gitId":"weiquu"},"content":"    }"},{"lineNumber":75,"author":{"gitId":"weiquu"},"content":"    return this.recycleBinFeedbackSessionRowModelsSortOrder \u003d\u003d\u003d SortOrder.ASC ? \u0027ascending\u0027 : \u0027descending\u0027;"},{"lineNumber":76,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":77,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":78,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":79,"author":{"gitId":"-"},"content":"   * Set row number of button clicked."},{"lineNumber":80,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":81,"author":{"gitId":"-"},"content":"  setRowClicked(rowIndex: number): void {"},{"lineNumber":82,"author":{"gitId":"-"},"content":"    this.rowClicked \u003d rowIndex;"},{"lineNumber":83,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":84,"author":{"gitId":"-"},"content":""},{"lineNumber":85,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"weiquu":7,"-":78}},{"path":"src/web/app/components/sessions-table/sessions-table.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"weiquu"},"content":"\u003cdiv *ngIf\u003d\"sessionsTableRowModels.length \u003e 0; else noSessionMessage\"\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  \u003ctm-sortable-table"},{"lineNumber":3,"author":{"gitId":"-"},"content":"    [columns]\u003d\"columnsData\""},{"lineNumber":4,"author":{"gitId":"-"},"content":"    [rows]\u003d\"rowsData\""},{"lineNumber":5,"author":{"gitId":"-"},"content":"    [initialSortBy]\u003d\"initialSortBy\""},{"lineNumber":6,"author":{"gitId":"-"},"content":"    [sortOrder]\u003d\"sortOrder\""},{"lineNumber":7,"author":{"gitId":"-"},"content":"    [headerColorScheme]\u003d\"headerColorScheme\""},{"lineNumber":8,"author":{"gitId":"-"},"content":"    (sortEvent)\u003d\"sortSessionsTableRowModelsEventHandler($event)\""},{"lineNumber":9,"author":{"gitId":"-"},"content":"    \u003e\u003c/tm-sortable-table\u003e"},{"lineNumber":10,"author":{"gitId":"-"},"content":"\u003c/div\u003e"},{"lineNumber":11,"author":{"gitId":"-"},"content":""},{"lineNumber":12,"author":{"gitId":"-"},"content":"\u003cng-template #noSessionMessage\u003e"},{"lineNumber":13,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"no-session-message\"\u003e"},{"lineNumber":14,"author":{"gitId":"-"},"content":"    There are no feedback sessions in this course."},{"lineNumber":15,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":16,"author":{"gitId":"-"},"content":"\u003c/ng-template\u003e"}],"authorContributionMap":{"weiquu":1,"-":15}},{"path":"src/web/app/components/sessions-table/sessions-table.component.scss","fileType":"scss","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":".no-session-message {"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  padding: 10px;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"  text-align: center;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"}"},{"lineNumber":5,"author":{"gitId":"-"},"content":""},{"lineNumber":6,"author":{"gitId":"-"},"content":"@media (min-width: 1200px) {"},{"lineNumber":7,"author":{"gitId":"-"},"content":"  .actions-cell {"},{"lineNumber":8,"author":{"gitId":"-"},"content":"    min-width: 410px;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":10,"author":{"gitId":"-"},"content":"}"},{"lineNumber":11,"author":{"gitId":"-"},"content":""},{"lineNumber":12,"author":{"gitId":"-"},"content":".actions-cell button:not(.dropdown-item) {"},{"lineNumber":13,"author":{"gitId":"-"},"content":"  margin-left: var(--btn-margin);"},{"lineNumber":14,"author":{"gitId":"-"},"content":"}"},{"lineNumber":15,"author":{"gitId":"-"},"content":""},{"lineNumber":16,"author":{"gitId":"-"},"content":".sortable-header {"},{"lineNumber":17,"author":{"gitId":"-"},"content":"  cursor: pointer;"},{"lineNumber":18,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":19,"author":{"gitId":"weiquu"},"content":"  i {"},{"lineNumber":20,"author":{"gitId":"weiquu"},"content":"    margin-left: .3em;"},{"lineNumber":21,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":22,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":23,"author":{"gitId":"weiquu"},"content":"  .fa-stack {"},{"lineNumber":24,"author":{"gitId":"weiquu"},"content":"    width: 20%;"},{"lineNumber":25,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":26,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":27,"author":{"gitId":"weiquu"},"content":"  button {"},{"lineNumber":28,"author":{"gitId":"weiquu"},"content":"    background: none;"},{"lineNumber":29,"author":{"gitId":"weiquu"},"content":"    color: inherit;"},{"lineNumber":30,"author":{"gitId":"weiquu"},"content":"    border: none;"},{"lineNumber":31,"author":{"gitId":"weiquu"},"content":"    padding: 0;"},{"lineNumber":32,"author":{"gitId":"weiquu"},"content":"    text-align: left;"},{"lineNumber":33,"author":{"gitId":"weiquu"},"content":"    width: 100%;"},{"lineNumber":34,"author":{"gitId":"weiquu"},"content":"    font: inherit;"},{"lineNumber":35,"author":{"gitId":"weiquu"},"content":"    cursor: inherit;"},{"lineNumber":36,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":37,"author":{"gitId":"-"},"content":"}"},{"lineNumber":38,"author":{"gitId":"-"},"content":""},{"lineNumber":39,"author":{"gitId":"-"},"content":".clickable {"},{"lineNumber":40,"author":{"gitId":"-"},"content":"  cursor: pointer;"},{"lineNumber":41,"author":{"gitId":"-"},"content":"}"},{"lineNumber":42,"author":{"gitId":"-"},"content":""},{"lineNumber":43,"author":{"gitId":"-"},"content":".margin-bottom-0 {"},{"lineNumber":44,"author":{"gitId":"-"},"content":"  margin-bottom: 0;"},{"lineNumber":45,"author":{"gitId":"-"},"content":"}"},{"lineNumber":46,"author":{"gitId":"-"},"content":""},{"lineNumber":47,"author":{"gitId":"-"},"content":".padding-left-7px {"},{"lineNumber":48,"author":{"gitId":"-"},"content":"  padding-left: 7px;"},{"lineNumber":49,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"weiquu":19,"-":30}},{"path":"src/web/app/components/sessions-table/sessions-table.component.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { Component, EventEmitter, Input, Output, OnInit } from \u0027@angular/core\u0027;"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import { NgbModal, NgbModalRef } from \u0027@ng-bootstrap/ng-bootstrap\u0027;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"import { SimpleModalService } from \u0027../../../services/simple-modal.service\u0027;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import { Course, FeedbackSessionPublishStatus, FeedbackSessionSubmissionStatus } from \u0027../../../types/api-output\u0027;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import { SortBy, SortOrder } from \u0027../../../types/sort-properties\u0027;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import { CopySessionModalResult } from \u0027../copy-session-modal/copy-session-modal-model\u0027;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import { CopySessionModalComponent } from \u0027../copy-session-modal/copy-session-modal.component\u0027;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import { SimpleModalType } from \u0027../simple-modal/simple-modal-type\u0027;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":10,"author":{"gitId":"-"},"content":"  ColumnData,"},{"lineNumber":11,"author":{"gitId":"-"},"content":"  SortableEvent,"},{"lineNumber":12,"author":{"gitId":"-"},"content":"  SortableTableCellData,"},{"lineNumber":13,"author":{"gitId":"-"},"content":"  SortableTableHeaderColorScheme,"},{"lineNumber":14,"author":{"gitId":"-"},"content":"} from \u0027../sortable-table/sortable-table.component\u0027;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import { FormatDateBriefPipe } from \u0027../teammates-common/format-date-brief.pipe\u0027;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"import { FormatDateDetailPipe } from \u0027../teammates-common/format-date-detail.pipe\u0027;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"import { PublishStatusNamePipe } from \u0027../teammates-common/publish-status-name.pipe\u0027;"},{"lineNumber":18,"author":{"gitId":"-"},"content":"import { SubmissionStatusNamePipe } from \u0027../teammates-common/submission-status-name.pipe\u0027;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"import { SubmissionStatusTooltipPipe } from \u0027../teammates-common/submission-status-tooltip.pipe\u0027;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"import { GroupButtonsComponent } from \u0027./cell-with-group-buttons.component\u0027;"},{"lineNumber":21,"author":{"gitId":"-"},"content":"import { ResponseRateComponent } from \u0027./cell-with-response-rate.component\u0027;"},{"lineNumber":22,"author":{"gitId":"-"},"content":"import { CellWithToolTipComponent } from \u0027./cell-with-tooltip.component\u0027;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"import { PublishStatusTooltipPipe } from \u0027./publish-status-tooltip.pipe\u0027;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":25,"author":{"gitId":"-"},"content":"  CopySessionResult,"},{"lineNumber":26,"author":{"gitId":"-"},"content":"  SessionsTableColumn,"},{"lineNumber":27,"author":{"gitId":"-"},"content":"  SessionsTableColumnData,"},{"lineNumber":28,"author":{"gitId":"-"},"content":"  SessionsTableRowData,"},{"lineNumber":29,"author":{"gitId":"-"},"content":"  SessionsTableRowModel,"},{"lineNumber":30,"author":{"gitId":"-"},"content":"} from \u0027./sessions-table-model\u0027;"},{"lineNumber":31,"author":{"gitId":"-"},"content":""},{"lineNumber":32,"author":{"gitId":"-"},"content":"export type MutateEvent \u003d {"},{"lineNumber":33,"author":{"gitId":"-"},"content":"  idx: number,"},{"lineNumber":34,"author":{"gitId":"-"},"content":"  rowData: SortableTableCellData[],"},{"lineNumber":35,"author":{"gitId":"-"},"content":"  columnsData: ColumnData[],"},{"lineNumber":36,"author":{"gitId":"-"},"content":"};"},{"lineNumber":37,"author":{"gitId":"-"},"content":""},{"lineNumber":38,"author":{"gitId":"-"},"content":"export type Index \u003d number;"},{"lineNumber":39,"author":{"gitId":"-"},"content":""},{"lineNumber":40,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":41,"author":{"gitId":"-"},"content":" * A table to display a list of feedback sessions."},{"lineNumber":42,"author":{"gitId":"-"},"content":" */"},{"lineNumber":43,"author":{"gitId":"-"},"content":"@Component({"},{"lineNumber":44,"author":{"gitId":"-"},"content":"  selector: \u0027tm-sessions-table\u0027,"},{"lineNumber":45,"author":{"gitId":"-"},"content":"  templateUrl: \u0027./sessions-table.component.html\u0027,"},{"lineNumber":46,"author":{"gitId":"-"},"content":"  styleUrls: [\u0027./sessions-table.component.scss\u0027],"},{"lineNumber":47,"author":{"gitId":"-"},"content":"})"},{"lineNumber":48,"author":{"gitId":"-"},"content":"export class SessionsTableComponent implements OnInit {"},{"lineNumber":49,"author":{"gitId":"-"},"content":"  // enum"},{"lineNumber":50,"author":{"gitId":"-"},"content":"  SortBy: typeof SortBy \u003d SortBy;"},{"lineNumber":51,"author":{"gitId":"-"},"content":"  SortOrder: typeof SortOrder \u003d SortOrder;"},{"lineNumber":52,"author":{"gitId":"-"},"content":"  SessionsTableColumn: typeof SessionsTableColumn \u003d SessionsTableColumn;"},{"lineNumber":53,"author":{"gitId":"-"},"content":"  FeedbackSessionSubmissionStatus: typeof FeedbackSessionSubmissionStatus \u003d FeedbackSessionSubmissionStatus;"},{"lineNumber":54,"author":{"gitId":"-"},"content":"  FeedbackSessionPublishStatus: typeof FeedbackSessionPublishStatus \u003d FeedbackSessionPublishStatus;"},{"lineNumber":55,"author":{"gitId":"-"},"content":"  SortableTableHeaderColorScheme: typeof SortableTableHeaderColorScheme \u003d SortableTableHeaderColorScheme;"},{"lineNumber":56,"author":{"gitId":"-"},"content":""},{"lineNumber":57,"author":{"gitId":"-"},"content":"  // variable"},{"lineNumber":58,"author":{"gitId":"-"},"content":"  rowClicked: number \u003d -1;"},{"lineNumber":59,"author":{"gitId":"-"},"content":""},{"lineNumber":60,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":61,"author":{"gitId":"-"},"content":"  initialSortBy: SortBy \u003d SortBy.COURSE_ID;"},{"lineNumber":62,"author":{"gitId":"-"},"content":""},{"lineNumber":63,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":64,"author":{"gitId":"-"},"content":"  sortOrder: SortOrder \u003d SortOrder.ASC;"},{"lineNumber":65,"author":{"gitId":"-"},"content":""},{"lineNumber":66,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":67,"author":{"gitId":"-"},"content":"  courseCandidates: Course[] \u003d [];"},{"lineNumber":68,"author":{"gitId":"-"},"content":""},{"lineNumber":69,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":70,"author":{"gitId":"-"},"content":"  columnsToShow: SessionsTableColumn[] \u003d [SessionsTableColumn.COURSE_ID];"},{"lineNumber":71,"author":{"gitId":"-"},"content":""},{"lineNumber":72,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":73,"author":{"gitId":"-"},"content":"  headerColorScheme: SortableTableHeaderColorScheme \u003d SortableTableHeaderColorScheme.BLUE;"},{"lineNumber":74,"author":{"gitId":"-"},"content":""},{"lineNumber":75,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":76,"author":{"gitId":"-"},"content":"  isSendReminderLoading: boolean \u003d false;"},{"lineNumber":77,"author":{"gitId":"-"},"content":""},{"lineNumber":78,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":79,"author":{"gitId":"-"},"content":"  sortSessionsTableRowModelsEvent: EventEmitter\u003cSortableEvent\u003e \u003d new EventEmitter();"},{"lineNumber":80,"author":{"gitId":"-"},"content":""},{"lineNumber":81,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":82,"author":{"gitId":"-"},"content":"  loadResponseRateEvent: EventEmitter\u003cIndex\u003e \u003d new EventEmitter();"},{"lineNumber":83,"author":{"gitId":"-"},"content":""},{"lineNumber":84,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":85,"author":{"gitId":"-"},"content":"  moveSessionToRecycleBinEvent: EventEmitter\u003cIndex\u003e \u003d new EventEmitter();"},{"lineNumber":86,"author":{"gitId":"-"},"content":""},{"lineNumber":87,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":88,"author":{"gitId":"-"},"content":"  copySessionEvent: EventEmitter\u003cCopySessionResult\u003e \u003d new EventEmitter();"},{"lineNumber":89,"author":{"gitId":"-"},"content":""},{"lineNumber":90,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":91,"author":{"gitId":"-"},"content":"  submitSessionAsInstructorEvent: EventEmitter\u003cIndex\u003e \u003d new EventEmitter();"},{"lineNumber":92,"author":{"gitId":"-"},"content":""},{"lineNumber":93,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":94,"author":{"gitId":"-"},"content":"  publishSessionEvent: EventEmitter\u003cMutateEvent\u003e \u003d new EventEmitter();"},{"lineNumber":95,"author":{"gitId":"-"},"content":""},{"lineNumber":96,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":97,"author":{"gitId":"-"},"content":"  unpublishSessionEvent: EventEmitter\u003cMutateEvent\u003e \u003d new EventEmitter();"},{"lineNumber":98,"author":{"gitId":"-"},"content":""},{"lineNumber":99,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":100,"author":{"gitId":"-"},"content":"  resendResultsLinkToStudentsEvent: EventEmitter\u003cIndex\u003e \u003d new EventEmitter();"},{"lineNumber":101,"author":{"gitId":"-"},"content":""},{"lineNumber":102,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":103,"author":{"gitId":"-"},"content":"  downloadSessionResultsEvent: EventEmitter\u003cIndex\u003e \u003d new EventEmitter();"},{"lineNumber":104,"author":{"gitId":"-"},"content":""},{"lineNumber":105,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":106,"author":{"gitId":"-"},"content":"  sendRemindersToAllNonSubmittersEvent: EventEmitter\u003cIndex\u003e \u003d new EventEmitter();"},{"lineNumber":107,"author":{"gitId":"-"},"content":""},{"lineNumber":108,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":109,"author":{"gitId":"-"},"content":"  sendRemindersToSelectedNonSubmittersEvent: EventEmitter\u003cIndex\u003e \u003d new EventEmitter();"},{"lineNumber":110,"author":{"gitId":"-"},"content":""},{"lineNumber":111,"author":{"gitId":"-"},"content":"  @Input() set sessionsTableRowModels(rowModels: SessionsTableRowModel[]) {"},{"lineNumber":112,"author":{"gitId":"-"},"content":"    this.sessionsTableRowModelsVar \u003d rowModels;"},{"lineNumber":113,"author":{"gitId":"-"},"content":"    this.setRowData();"},{"lineNumber":114,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":115,"author":{"gitId":"-"},"content":""},{"lineNumber":116,"author":{"gitId":"-"},"content":"  get sessionsTableRowModels(): SessionsTableRowModel[] {"},{"lineNumber":117,"author":{"gitId":"-"},"content":"    return this.sessionsTableRowModelsVar;"},{"lineNumber":118,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":119,"author":{"gitId":"-"},"content":""},{"lineNumber":120,"author":{"gitId":"-"},"content":"  private sessionsTableRowModelsVar: SessionsTableRowModel[] \u003d [];"},{"lineNumber":121,"author":{"gitId":"-"},"content":"  rowsData: SortableTableCellData[][] \u003d [];"},{"lineNumber":122,"author":{"gitId":"-"},"content":"  columnsData: ColumnData[] \u003d [];"},{"lineNumber":123,"author":{"gitId":"-"},"content":""},{"lineNumber":124,"author":{"gitId":"-"},"content":"  constructor("},{"lineNumber":125,"author":{"gitId":"-"},"content":"    private ngbModal: NgbModal,"},{"lineNumber":126,"author":{"gitId":"-"},"content":"    private simpleModalService: SimpleModalService,"},{"lineNumber":127,"author":{"gitId":"-"},"content":"    private formatDateDetailPipe: FormatDateDetailPipe,"},{"lineNumber":128,"author":{"gitId":"-"},"content":"    private formatDateBriefPipe: FormatDateBriefPipe,"},{"lineNumber":129,"author":{"gitId":"-"},"content":"    private publishStatusName: PublishStatusNamePipe,"},{"lineNumber":130,"author":{"gitId":"-"},"content":"    private publishStatusTooltip: PublishStatusTooltipPipe,"},{"lineNumber":131,"author":{"gitId":"-"},"content":"    private submissionStatusTooltip: SubmissionStatusTooltipPipe,"},{"lineNumber":132,"author":{"gitId":"-"},"content":"    private submissionStatusName: SubmissionStatusNamePipe,"},{"lineNumber":133,"author":{"gitId":"-"},"content":"  ) {}"},{"lineNumber":134,"author":{"gitId":"-"},"content":""},{"lineNumber":135,"author":{"gitId":"-"},"content":"  ngOnInit(): void {"},{"lineNumber":136,"author":{"gitId":"-"},"content":"    this.setColumnData();"},{"lineNumber":137,"author":{"gitId":"-"},"content":"    this.setRowData();"},{"lineNumber":138,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":139,"author":{"gitId":"-"},"content":""},{"lineNumber":140,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":141,"author":{"gitId":"-"},"content":"   * Creates the column data for the table."},{"lineNumber":142,"author":{"gitId":"-"},"content":"   *"},{"lineNumber":143,"author":{"gitId":"-"},"content":"   * @param config Contains the information to create a column data."},{"lineNumber":144,"author":{"gitId":"-"},"content":"   * @returns An array containing a column\u0027s data for the table"},{"lineNumber":145,"author":{"gitId":"-"},"content":"   *  if the column is to be shown, otherwise an empty array."},{"lineNumber":146,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":147,"author":{"gitId":"-"},"content":"  createColumnData(config: SessionsTableColumnData): ColumnData[] {"},{"lineNumber":148,"author":{"gitId":"-"},"content":"    if (!(config?.columnType \u003d\u003d\u003d undefined) \u0026\u0026 !this.columnsToShow.includes(config.columnType!)) {"},{"lineNumber":149,"author":{"gitId":"-"},"content":"      return [];"},{"lineNumber":150,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":151,"author":{"gitId":"-"},"content":""},{"lineNumber":152,"author":{"gitId":"-"},"content":"    const columnData: ColumnData \u003d {"},{"lineNumber":153,"author":{"gitId":"-"},"content":"      header: config.header,"},{"lineNumber":154,"author":{"gitId":"-"},"content":"      ...(config.sortBy \u0026\u0026 { sortBy: config.sortBy }),"},{"lineNumber":155,"author":{"gitId":"-"},"content":"      ...(config.headerToolTip \u0026\u0026 { headerToolTip: config.headerToolTip }),"},{"lineNumber":156,"author":{"gitId":"-"},"content":"      ...(config.alignment \u0026\u0026 { alignment: config.alignment }),"},{"lineNumber":157,"author":{"gitId":"-"},"content":"      ...(config.headerClass \u0026\u0026 { headerClass: config.headerClass }),"},{"lineNumber":158,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":159,"author":{"gitId":"-"},"content":""},{"lineNumber":160,"author":{"gitId":"-"},"content":"    return [columnData];"},{"lineNumber":161,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":162,"author":{"gitId":"-"},"content":""},{"lineNumber":163,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":164,"author":{"gitId":"-"},"content":"   * Creates the row data for the table."},{"lineNumber":165,"author":{"gitId":"-"},"content":"   *"},{"lineNumber":166,"author":{"gitId":"-"},"content":"   * @param config Contains the information to create a row data."},{"lineNumber":167,"author":{"gitId":"-"},"content":"   * @returns An array containing a row\u0027s data for the table if the row is to be shown,"},{"lineNumber":168,"author":{"gitId":"-"},"content":"   * otherwise an empty array."},{"lineNumber":169,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":170,"author":{"gitId":"-"},"content":"  createRowData(config: SessionsTableRowData): SortableTableCellData[] {"},{"lineNumber":171,"author":{"gitId":"-"},"content":"    if (!(config?.columnType \u003d\u003d\u003d undefined) \u0026\u0026 !this.columnsToShow.includes(config.columnType!)) {"},{"lineNumber":172,"author":{"gitId":"-"},"content":"      return [];"},{"lineNumber":173,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":174,"author":{"gitId":"-"},"content":""},{"lineNumber":175,"author":{"gitId":"-"},"content":"    const rowData: SortableTableCellData \u003d {"},{"lineNumber":176,"author":{"gitId":"-"},"content":"      ...(config.value \u0026\u0026 { value: config.value }),"},{"lineNumber":177,"author":{"gitId":"-"},"content":"      ...(config.displayValue \u0026\u0026 { displayValue: config.displayValue }),"},{"lineNumber":178,"author":{"gitId":"-"},"content":"      ...(config.customComponent \u0026\u0026 { customComponent: config.customComponent }),"},{"lineNumber":179,"author":{"gitId":"-"},"content":"      ...(config.style \u0026\u0026 { style: config.style }),"},{"lineNumber":180,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":181,"author":{"gitId":"-"},"content":""},{"lineNumber":182,"author":{"gitId":"-"},"content":"    return [rowData];"},{"lineNumber":183,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":184,"author":{"gitId":"-"},"content":""},{"lineNumber":185,"author":{"gitId":"-"},"content":"  setColumnData(): void {"},{"lineNumber":186,"author":{"gitId":"-"},"content":"    this.columnsData \u003d ["},{"lineNumber":187,"author":{"gitId":"-"},"content":"      ...this.createColumnData({"},{"lineNumber":188,"author":{"gitId":"-"},"content":"        columnType: SessionsTableColumn.COURSE_ID,"},{"lineNumber":189,"author":{"gitId":"-"},"content":"        header: \u0027Course ID\u0027,"},{"lineNumber":190,"author":{"gitId":"-"},"content":"        sortBy: SortBy.COURSE_ID,"},{"lineNumber":191,"author":{"gitId":"-"},"content":"        headerClass: \u0027sort-course-id\u0027,"},{"lineNumber":192,"author":{"gitId":"-"},"content":"      }),"},{"lineNumber":193,"author":{"gitId":"-"},"content":"      ...this.createColumnData({"},{"lineNumber":194,"author":{"gitId":"-"},"content":"        header: \u0027Session Name\u0027,"},{"lineNumber":195,"author":{"gitId":"-"},"content":"        sortBy: SortBy.SESSION_NAME,"},{"lineNumber":196,"author":{"gitId":"-"},"content":"        headerClass: \u0027sort-session-name\u0027,"},{"lineNumber":197,"author":{"gitId":"-"},"content":"      }),"},{"lineNumber":198,"author":{"gitId":"-"},"content":"      ...this.createColumnData({"},{"lineNumber":199,"author":{"gitId":"-"},"content":"        columnType: SessionsTableColumn.START_DATE,"},{"lineNumber":200,"author":{"gitId":"-"},"content":"        header: \u0027Start Date\u0027,"},{"lineNumber":201,"author":{"gitId":"-"},"content":"        sortBy: SortBy.SESSION_START_DATE,"},{"lineNumber":202,"author":{"gitId":"-"},"content":"      }),"},{"lineNumber":203,"author":{"gitId":"-"},"content":"      ...this.createColumnData({"},{"lineNumber":204,"author":{"gitId":"-"},"content":"        columnType: SessionsTableColumn.END_DATE,"},{"lineNumber":205,"author":{"gitId":"-"},"content":"        header: \u0027End Date\u0027,"},{"lineNumber":206,"author":{"gitId":"-"},"content":"        sortBy: SortBy.SESSION_END_DATE,"},{"lineNumber":207,"author":{"gitId":"-"},"content":"      }),"},{"lineNumber":208,"author":{"gitId":"-"},"content":"      ...this.createColumnData({ header: \u0027Submissions\u0027 }),"},{"lineNumber":209,"author":{"gitId":"-"},"content":"      ...this.createColumnData({ header: \u0027Responses\u0027 }),"},{"lineNumber":210,"author":{"gitId":"-"},"content":"      ...this.createColumnData({"},{"lineNumber":211,"author":{"gitId":"-"},"content":"        header: \u0027Response Rate\u0027,"},{"lineNumber":212,"author":{"gitId":"-"},"content":"        headerToolTip: \u0027Number of students submitted / Class size\u0027,"},{"lineNumber":213,"author":{"gitId":"-"},"content":"      }),"},{"lineNumber":214,"author":{"gitId":"-"},"content":"      ...this.createColumnData({"},{"lineNumber":215,"author":{"gitId":"-"},"content":"        header: \u0027Action(s)\u0027,"},{"lineNumber":216,"author":{"gitId":"-"},"content":"        alignment: \u0027center\u0027,"},{"lineNumber":217,"author":{"gitId":"-"},"content":"      }),"},{"lineNumber":218,"author":{"gitId":"-"},"content":"    ];"},{"lineNumber":219,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":220,"author":{"gitId":"-"},"content":""},{"lineNumber":221,"author":{"gitId":"-"},"content":"  setRowData(): void {"},{"lineNumber":222,"author":{"gitId":"-"},"content":"    this.rowsData \u003d this.sessionsTableRowModelsVar.map((sessionTableRowModel: SessionsTableRowModel) \u003d\u003e {"},{"lineNumber":223,"author":{"gitId":"-"},"content":"      const { feedbackSession } \u003d sessionTableRowModel;"},{"lineNumber":224,"author":{"gitId":"-"},"content":"      const { submissionStatus, submissionStartTimestamp, submissionEndTimestamp, timeZone, publishStatus } \u003d"},{"lineNumber":225,"author":{"gitId":"-"},"content":"        feedbackSession;"},{"lineNumber":226,"author":{"gitId":"-"},"content":""},{"lineNumber":227,"author":{"gitId":"-"},"content":"      const deadlines \u003d this.getDeadlines(sessionTableRowModel);"},{"lineNumber":228,"author":{"gitId":"-"},"content":""},{"lineNumber":229,"author":{"gitId":"-"},"content":"      return ["},{"lineNumber":230,"author":{"gitId":"-"},"content":"        ...this.createRowData({"},{"lineNumber":231,"author":{"gitId":"-"},"content":"          columnType: SessionsTableColumn.COURSE_ID,"},{"lineNumber":232,"author":{"gitId":"-"},"content":"          value: sessionTableRowModel.feedbackSession.courseId,"},{"lineNumber":233,"author":{"gitId":"-"},"content":"        }),"},{"lineNumber":234,"author":{"gitId":"-"},"content":"        ...this.createRowData({"},{"lineNumber":235,"author":{"gitId":"-"},"content":"          value: sessionTableRowModel.feedbackSession.feedbackSessionName,"},{"lineNumber":236,"author":{"gitId":"-"},"content":"        }),"},{"lineNumber":237,"author":{"gitId":"-"},"content":"        ...this.createRowData({"},{"lineNumber":238,"author":{"gitId":"-"},"content":"          columnType: SessionsTableColumn.START_DATE,"},{"lineNumber":239,"author":{"gitId":"-"},"content":"          ...this.createDateCellWithToolTip(submissionStartTimestamp, timeZone),"},{"lineNumber":240,"author":{"gitId":"-"},"content":"        }),"},{"lineNumber":241,"author":{"gitId":"-"},"content":"        ...this.createRowData({"},{"lineNumber":242,"author":{"gitId":"-"},"content":"          columnType: SessionsTableColumn.END_DATE,"},{"lineNumber":243,"author":{"gitId":"-"},"content":"          ...this.createDateCellWithToolTip(submissionEndTimestamp, timeZone),"},{"lineNumber":244,"author":{"gitId":"-"},"content":"        }),"},{"lineNumber":245,"author":{"gitId":"-"},"content":"        ...this.createRowData("},{"lineNumber":246,"author":{"gitId":"-"},"content":"          this.createCellWithToolTip("},{"lineNumber":247,"author":{"gitId":"-"},"content":"            this.submissionStatusTooltip.transform(submissionStatus, deadlines),"},{"lineNumber":248,"author":{"gitId":"-"},"content":"            this.submissionStatusName.transform(submissionStatus, deadlines),"},{"lineNumber":249,"author":{"gitId":"-"},"content":"          ),"},{"lineNumber":250,"author":{"gitId":"-"},"content":"        ),"},{"lineNumber":251,"author":{"gitId":"-"},"content":"        ...this.createRowData("},{"lineNumber":252,"author":{"gitId":"-"},"content":"          this.createCellWithToolTip("},{"lineNumber":253,"author":{"gitId":"-"},"content":"            this.publishStatusTooltip.transform(publishStatus),"},{"lineNumber":254,"author":{"gitId":"-"},"content":"            this.publishStatusName.transform(publishStatus),"},{"lineNumber":255,"author":{"gitId":"-"},"content":"          ),"},{"lineNumber":256,"author":{"gitId":"-"},"content":"        ),"},{"lineNumber":257,"author":{"gitId":"-"},"content":"        ...this.createRowData(this.createCellWithResponseRateComponent(sessionTableRowModel)),"},{"lineNumber":258,"author":{"gitId":"-"},"content":"        ...this.createRowData(this.createCellWithGroupButtonsComponent(sessionTableRowModel)),"},{"lineNumber":259,"author":{"gitId":"-"},"content":"      ];"},{"lineNumber":260,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":261,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":262,"author":{"gitId":"-"},"content":""},{"lineNumber":263,"author":{"gitId":"-"},"content":"  private createCellWithGroupButtonsComponent(sessionTableRowModel: SessionsTableRowModel): SortableTableCellData {"},{"lineNumber":264,"author":{"gitId":"-"},"content":"    const { feedbackSession, instructorPrivilege } \u003d sessionTableRowModel;"},{"lineNumber":265,"author":{"gitId":"-"},"content":"    const { courseId, feedbackSessionName, submissionStatus, publishStatus } \u003d feedbackSession;"},{"lineNumber":266,"author":{"gitId":"-"},"content":""},{"lineNumber":267,"author":{"gitId":"-"},"content":"    return {"},{"lineNumber":268,"author":{"gitId":"-"},"content":"      customComponent: {"},{"lineNumber":269,"author":{"gitId":"-"},"content":"        component: GroupButtonsComponent,"},{"lineNumber":270,"author":{"gitId":"-"},"content":"        componentData: (idx: number) \u003d\u003e {"},{"lineNumber":271,"author":{"gitId":"-"},"content":"          return {"},{"lineNumber":272,"author":{"gitId":"-"},"content":"            idx,"},{"lineNumber":273,"author":{"gitId":"-"},"content":"            courseId,"},{"lineNumber":274,"author":{"gitId":"-"},"content":"            fsName: feedbackSessionName,"},{"lineNumber":275,"author":{"gitId":"-"},"content":"            rowClicked: this.rowClicked,"},{"lineNumber":276,"author":{"gitId":"-"},"content":"            publishStatus,"},{"lineNumber":277,"author":{"gitId":"-"},"content":"            submissionStatus,"},{"lineNumber":278,"author":{"gitId":"-"},"content":"            instructorPrivileges: instructorPrivilege,"},{"lineNumber":279,"author":{"gitId":"-"},"content":"            isSendReminderLoading: this.isSendReminderLoading,"},{"lineNumber":280,"author":{"gitId":"-"},"content":"            copySession: () \u003d\u003e this.copySession(idx),"},{"lineNumber":281,"author":{"gitId":"-"},"content":"            setRowClicked: () \u003d\u003e this.setRowClicked(idx),"},{"lineNumber":282,"author":{"gitId":"-"},"content":"            downloadSessionResults: () \u003d\u003e this.downloadSessionResults(idx),"},{"lineNumber":283,"author":{"gitId":"-"},"content":"            moveSessionToRecycleBin: () \u003d\u003e this.moveSessionToRecycleBin(idx),"},{"lineNumber":284,"author":{"gitId":"-"},"content":"            remindResultsLinkToStudent: () \u003d\u003e this.remindResultsLinkToStudent(idx),"},{"lineNumber":285,"author":{"gitId":"-"},"content":"            sendRemindersToAllNonSubmitters: () \u003d\u003e this.sendRemindersToAllNonSubmitters(idx),"},{"lineNumber":286,"author":{"gitId":"-"},"content":"            onSubmitSessionAsInstructor: () \u003d\u003e this.submitSessionAsInstructorEvent.emit(idx),"},{"lineNumber":287,"author":{"gitId":"-"},"content":"            publishSession: () \u003d\u003e this.publishSession(idx, this.rowsData[idx], this.columnsData),"},{"lineNumber":288,"author":{"gitId":"-"},"content":"            unpublishSession: () \u003d\u003e this.unpublishSession(idx, this.rowsData[idx], this.columnsData),"},{"lineNumber":289,"author":{"gitId":"-"},"content":"            sendRemindersToSelectedNonSubmitters: () \u003d\u003e this.sendRemindersToSelectedNonSubmitters(idx),"},{"lineNumber":290,"author":{"gitId":"-"},"content":"          };"},{"lineNumber":291,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":292,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":293,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":294,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":295,"author":{"gitId":"-"},"content":""},{"lineNumber":296,"author":{"gitId":"-"},"content":"  private createCellWithResponseRateComponent(sessionTableRowModel: SessionsTableRowModel): SortableTableCellData {"},{"lineNumber":297,"author":{"gitId":"-"},"content":"    const { responseRate, isLoadingResponseRate } \u003d sessionTableRowModel;"},{"lineNumber":298,"author":{"gitId":"-"},"content":"    return {"},{"lineNumber":299,"author":{"gitId":"-"},"content":"      customComponent: {"},{"lineNumber":300,"author":{"gitId":"-"},"content":"        component: ResponseRateComponent,"},{"lineNumber":301,"author":{"gitId":"-"},"content":"        componentData: (idx: number) \u003d\u003e {"},{"lineNumber":302,"author":{"gitId":"-"},"content":"          return {"},{"lineNumber":303,"author":{"gitId":"-"},"content":"            idx,"},{"lineNumber":304,"author":{"gitId":"-"},"content":"            responseRate,"},{"lineNumber":305,"author":{"gitId":"-"},"content":"            empty: responseRate \u003d\u003d\u003d \u0027\u0027,"},{"lineNumber":306,"author":{"gitId":"-"},"content":"            isLoading: isLoadingResponseRate,"},{"lineNumber":307,"author":{"gitId":"-"},"content":"            onClick: () \u003d\u003e {"},{"lineNumber":308,"author":{"gitId":"-"},"content":"              this.loadResponseRateEvent.emit(idx);"},{"lineNumber":309,"author":{"gitId":"-"},"content":"            },"},{"lineNumber":310,"author":{"gitId":"-"},"content":"          };"},{"lineNumber":311,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":312,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":313,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":314,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":315,"author":{"gitId":"-"},"content":""},{"lineNumber":316,"author":{"gitId":"-"},"content":"  private createCellWithToolTip(toolTip: string, value: string): SortableTableCellData {"},{"lineNumber":317,"author":{"gitId":"-"},"content":"    return {"},{"lineNumber":318,"author":{"gitId":"-"},"content":"      customComponent: {"},{"lineNumber":319,"author":{"gitId":"-"},"content":"        component: CellWithToolTipComponent,"},{"lineNumber":320,"author":{"gitId":"-"},"content":"        componentData: () \u003d\u003e {"},{"lineNumber":321,"author":{"gitId":"-"},"content":"          return {"},{"lineNumber":322,"author":{"gitId":"-"},"content":"            toolTip,"},{"lineNumber":323,"author":{"gitId":"-"},"content":"            value,"},{"lineNumber":324,"author":{"gitId":"-"},"content":"          };"},{"lineNumber":325,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":326,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":327,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":328,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":329,"author":{"gitId":"-"},"content":""},{"lineNumber":330,"author":{"gitId":"-"},"content":"  private createDateCellWithToolTip(timestamp: number, timeZone: string): SortableTableCellData {"},{"lineNumber":331,"author":{"gitId":"-"},"content":"    return {"},{"lineNumber":332,"author":{"gitId":"-"},"content":"      value: String(timestamp),"},{"lineNumber":333,"author":{"gitId":"-"},"content":"      customComponent: {"},{"lineNumber":334,"author":{"gitId":"-"},"content":"        component: CellWithToolTipComponent,"},{"lineNumber":335,"author":{"gitId":"-"},"content":"        componentData: () \u003d\u003e {"},{"lineNumber":336,"author":{"gitId":"-"},"content":"          return {"},{"lineNumber":337,"author":{"gitId":"-"},"content":"            toolTip: this.formatDateDetailPipe.transform(timestamp, timeZone),"},{"lineNumber":338,"author":{"gitId":"-"},"content":"            value: this.formatDateBriefPipe.transform(timestamp, timeZone),"},{"lineNumber":339,"author":{"gitId":"-"},"content":"          };"},{"lineNumber":340,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":341,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":342,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":343,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":344,"author":{"gitId":"-"},"content":""},{"lineNumber":345,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":346,"author":{"gitId":"-"},"content":"   * Sorts the list of feedback session row."},{"lineNumber":347,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":348,"author":{"gitId":"-"},"content":"  sortSessionsTableRowModelsEventHandler(event: { sortBy: SortBy, sortOrder: SortOrder }): void {"},{"lineNumber":349,"author":{"gitId":"-"},"content":"    this.sortSessionsTableRowModelsEvent.emit(event);"},{"lineNumber":350,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":351,"author":{"gitId":"-"},"content":""},{"lineNumber":352,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":353,"author":{"gitId":"-"},"content":"   * Moves the feedback session to the recycle bin."},{"lineNumber":354,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":355,"author":{"gitId":"-"},"content":"  moveSessionToRecycleBin(idx: number): void {"},{"lineNumber":356,"author":{"gitId":"-"},"content":"    const modalContent: string \u003d \u0027Session will be moved to the recycle bin. \u0027"},{"lineNumber":357,"author":{"gitId":"-"},"content":"        + \u0027This action can be reverted by going to the \"Sessions\" tab and restoring the desired session(s).\u0027;"},{"lineNumber":358,"author":{"gitId":"-"},"content":"    const modalRef: NgbModalRef \u003d this.simpleModalService.openConfirmationModal("},{"lineNumber":359,"author":{"gitId":"-"},"content":"        `Delete session \u003cstrong\u003e${this.sessionsTableRowModels[idx].feedbackSession.feedbackSessionName}\u003c/strong\u003e?`,"},{"lineNumber":360,"author":{"gitId":"-"},"content":"        SimpleModalType.WARNING, modalContent);"},{"lineNumber":361,"author":{"gitId":"-"},"content":""},{"lineNumber":362,"author":{"gitId":"-"},"content":"    modalRef.result.then("},{"lineNumber":363,"author":{"gitId":"-"},"content":"      () \u003d\u003e {"},{"lineNumber":364,"author":{"gitId":"-"},"content":"        this.moveSessionToRecycleBinEvent.emit(idx);"},{"lineNumber":365,"author":{"gitId":"-"},"content":"        this.rowsData \u003d this.rowsData.filter((_, index) \u003d\u003e index !\u003d\u003d idx);"},{"lineNumber":366,"author":{"gitId":"-"},"content":"        this.sessionsTableRowModelsVar \u003d this.sessionsTableRowModelsVar.filter((_, index) \u003d\u003e index !\u003d\u003d idx);"},{"lineNumber":367,"author":{"gitId":"-"},"content":"        this.setRowData();"},{"lineNumber":368,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":369,"author":{"gitId":"-"},"content":"      () \u003d\u003e {},"},{"lineNumber":370,"author":{"gitId":"-"},"content":"    );"},{"lineNumber":371,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":372,"author":{"gitId":"-"},"content":""},{"lineNumber":373,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":374,"author":{"gitId":"-"},"content":"   * Copies the feedback session."},{"lineNumber":375,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":376,"author":{"gitId":"-"},"content":"  copySession(rowIndex: number): void {"},{"lineNumber":377,"author":{"gitId":"-"},"content":"    const modalRef: NgbModalRef \u003d this.ngbModal.open(CopySessionModalComponent);"},{"lineNumber":378,"author":{"gitId":"-"},"content":"    const model: SessionsTableRowModel \u003d this.sessionsTableRowModelsVar[rowIndex];"},{"lineNumber":379,"author":{"gitId":"-"},"content":"    modalRef.componentInstance.newFeedbackSessionName \u003d model.feedbackSession.feedbackSessionName;"},{"lineNumber":380,"author":{"gitId":"-"},"content":"    modalRef.componentInstance.courseCandidates \u003d this.courseCandidates;"},{"lineNumber":381,"author":{"gitId":"-"},"content":"    modalRef.componentInstance.sessionToCopyCourseId \u003d model.feedbackSession.courseId;"},{"lineNumber":382,"author":{"gitId":"-"},"content":""},{"lineNumber":383,"author":{"gitId":"-"},"content":"    modalRef.result.then((result: CopySessionModalResult) \u003d\u003e {"},{"lineNumber":384,"author":{"gitId":"-"},"content":"      this.copySessionEvent.emit({"},{"lineNumber":385,"author":{"gitId":"-"},"content":"        ...result,"},{"lineNumber":386,"author":{"gitId":"-"},"content":"        sessionToCopyRowIndex: rowIndex,"},{"lineNumber":387,"author":{"gitId":"-"},"content":"      });"},{"lineNumber":388,"author":{"gitId":"-"},"content":"    }, () \u003d\u003e {});"},{"lineNumber":389,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":390,"author":{"gitId":"-"},"content":""},{"lineNumber":391,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":392,"author":{"gitId":"-"},"content":"   * Publishes a feedback session."},{"lineNumber":393,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":394,"author":{"gitId":"-"},"content":"  publishSession(rowIndex: number, rowData: SortableTableCellData[], columnsData: ColumnData[]): void {"},{"lineNumber":395,"author":{"gitId":"-"},"content":"    const model: SessionsTableRowModel \u003d this.sessionsTableRowModelsVar[rowIndex];"},{"lineNumber":396,"author":{"gitId":"-"},"content":"    const modalRef: NgbModalRef \u003d this.simpleModalService.openConfirmationModal("},{"lineNumber":397,"author":{"gitId":"-"},"content":"        `Publish session \u003cstrong\u003e${model.feedbackSession.feedbackSessionName}\u003c/strong\u003e?`,"},{"lineNumber":398,"author":{"gitId":"-"},"content":"        SimpleModalType.WARNING,"},{"lineNumber":399,"author":{"gitId":"-"},"content":"        \u0027An email will be sent to students to inform them that the responses are ready for viewing.\u0027);"},{"lineNumber":400,"author":{"gitId":"-"},"content":""},{"lineNumber":401,"author":{"gitId":"-"},"content":"    modalRef.result.then(() \u003d\u003e {"},{"lineNumber":402,"author":{"gitId":"-"},"content":"      this.publishSessionEvent.emit({ idx: rowIndex, rowData, columnsData });"},{"lineNumber":403,"author":{"gitId":"-"},"content":"    }, () \u003d\u003e {});"},{"lineNumber":404,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":405,"author":{"gitId":"-"},"content":""},{"lineNumber":406,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":407,"author":{"gitId":"-"},"content":"   * Unpublishes a feedback session."},{"lineNumber":408,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":409,"author":{"gitId":"-"},"content":"  unpublishSession(rowIndex: number, rowData: SortableTableCellData[], columnsData: ColumnData[]): void {"},{"lineNumber":410,"author":{"gitId":"-"},"content":"    const model: SessionsTableRowModel \u003d this.sessionsTableRowModelsVar[rowIndex];"},{"lineNumber":411,"author":{"gitId":"-"},"content":"    const modalContent: string \u003d `An email will be sent to students to inform them that the session "},{"lineNumber":412,"author":{"gitId":"-"},"content":"      has been unpublished and the session responses will no longer be viewable by students.`;"},{"lineNumber":413,"author":{"gitId":"-"},"content":""},{"lineNumber":414,"author":{"gitId":"-"},"content":"    const modalRef: NgbModalRef \u003d this.simpleModalService.openConfirmationModal("},{"lineNumber":415,"author":{"gitId":"-"},"content":"        `Unpublish session \u003cstrong\u003e${model.feedbackSession.feedbackSessionName}\u003c/strong\u003e?`,"},{"lineNumber":416,"author":{"gitId":"-"},"content":"        SimpleModalType.WARNING, modalContent);"},{"lineNumber":417,"author":{"gitId":"-"},"content":""},{"lineNumber":418,"author":{"gitId":"-"},"content":"    modalRef.result.then(() \u003d\u003e {"},{"lineNumber":419,"author":{"gitId":"-"},"content":"      this.unpublishSessionEvent.emit({ idx: rowIndex, rowData, columnsData });"},{"lineNumber":420,"author":{"gitId":"-"},"content":"    }, () \u003d\u003e {});"},{"lineNumber":421,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":422,"author":{"gitId":"-"},"content":""},{"lineNumber":423,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":424,"author":{"gitId":"-"},"content":"   * Resend links to students to view results."},{"lineNumber":425,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":426,"author":{"gitId":"-"},"content":"  remindResultsLinkToStudent(rowIndex: number): void {"},{"lineNumber":427,"author":{"gitId":"-"},"content":"    this.resendResultsLinkToStudentsEvent.emit(rowIndex);"},{"lineNumber":428,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":429,"author":{"gitId":"-"},"content":""},{"lineNumber":430,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":431,"author":{"gitId":"-"},"content":"   * Sends e-mails to remind all students and instructors who have not submitted their feedback."},{"lineNumber":432,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":433,"author":{"gitId":"-"},"content":"  sendRemindersToAllNonSubmitters(rowIndex: number): void {"},{"lineNumber":434,"author":{"gitId":"-"},"content":"    this.sendRemindersToAllNonSubmittersEvent.emit(rowIndex);"},{"lineNumber":435,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":436,"author":{"gitId":"-"},"content":""},{"lineNumber":437,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":438,"author":{"gitId":"-"},"content":"   * Sends e-mails to remind selected students and instructors who have not submitted their feedback."},{"lineNumber":439,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":440,"author":{"gitId":"-"},"content":"  sendRemindersToSelectedNonSubmitters(rowIndex: number): void {"},{"lineNumber":441,"author":{"gitId":"-"},"content":"    this.sendRemindersToSelectedNonSubmittersEvent.emit(rowIndex);"},{"lineNumber":442,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":443,"author":{"gitId":"-"},"content":""},{"lineNumber":444,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":445,"author":{"gitId":"-"},"content":"   * Triggers the download of session results as a CSV file."},{"lineNumber":446,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":447,"author":{"gitId":"-"},"content":"  downloadSessionResults(rowIndex: number): void {"},{"lineNumber":448,"author":{"gitId":"-"},"content":"    this.downloadSessionResultsEvent.emit(rowIndex);"},{"lineNumber":449,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":450,"author":{"gitId":"-"},"content":""},{"lineNumber":451,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":452,"author":{"gitId":"-"},"content":"   * Set row number of button clicked."},{"lineNumber":453,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":454,"author":{"gitId":"-"},"content":"  setRowClicked(rowIndex: number): void {"},{"lineNumber":455,"author":{"gitId":"-"},"content":"    this.rowClicked \u003d rowIndex;"},{"lineNumber":456,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":457,"author":{"gitId":"-"},"content":""},{"lineNumber":458,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":459,"author":{"gitId":"-"},"content":"   * Get the deadlines for student and instructors."},{"lineNumber":460,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":461,"author":{"gitId":"-"},"content":"  getDeadlines(model: SessionsTableRowModel): {"},{"lineNumber":462,"author":{"gitId":"-"},"content":"    studentDeadlines: Record\u003cstring, number\u003e, instructorDeadlines: Record\u003cstring, number\u003e,"},{"lineNumber":463,"author":{"gitId":"-"},"content":"  } {"},{"lineNumber":464,"author":{"gitId":"-"},"content":"    return {"},{"lineNumber":465,"author":{"gitId":"-"},"content":"      studentDeadlines: model.feedbackSession.studentDeadlines,"},{"lineNumber":466,"author":{"gitId":"-"},"content":"      instructorDeadlines: model.feedbackSession.instructorDeadlines,"},{"lineNumber":467,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":468,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":469,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"weiquu":1,"-":468}},{"path":"src/web/app/components/sortable-table/sortable-table.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003ctable class\u003d\"table table-bordered table-striped\"\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  \u003cthead\u003e"},{"lineNumber":3,"author":{"gitId":"-"},"content":"    \u003ctr [ngClass]\u003d\"setMainTableStyle ? \u0027bg-primary text-white\u0027 : customHeaderStyle\"\u003e"},{"lineNumber":4,"author":{"gitId":"-"},"content":"      \u003cth *ngFor\u003d\"let column of columns\" [ngClass]\u003d\"{ \u0027sortable-header\u0027: column.sortBy }\" class\u003d\"{{column?.headerClass}}\""},{"lineNumber":5,"author":{"gitId":"-"},"content":"        [ngStyle]\u003d\"getAlignment(column)\" (click)\u003d\"column.sortBy \u0026\u0026 onClickHeader(column.header)\" [attr.aria-sort]\u003d\"getAriaSort(column.header)\""},{"lineNumber":6,"author":{"gitId":"-"},"content":"      \u003e"},{"lineNumber":7,"author":{"gitId":"-"},"content":"        \u003cbutton *ngIf\u003d\"column.sortBy\" class\u003d\"d-lg-flex align-items-center gap-lg-1 d-inline \"\u003e"},{"lineNumber":8,"author":{"gitId":"-"},"content":"          \u003cspan [ngClass]\u003d\"{ \u0027ngb-tooltip-class\u0027: column.headerToolTip } \" [ngbTooltip]\u003d\"column.headerToolTip\" container\u003d\"body\"\u003e{{ column.header }}\u003c/span\u003e"},{"lineNumber":9,"author":{"gitId":"weiquu"},"content":"          \u003cspan class\u003d\"fa-stack\" aria-hidden\u003d\"true\"\u003e"},{"lineNumber":10,"author":{"gitId":"-"},"content":"            \u003ci class\u003d\"fas fa-sort\"\u003e\u003c/i\u003e"},{"lineNumber":11,"author":{"gitId":"-"},"content":"            \u003ci *ngIf\u003d\"column.sortBy \u0026\u0026 columnToSortBy \u003d\u003d\u003d column.header \u0026\u0026 sortOrder \u003d\u003d\u003d SortOrder.DESC\" class\u003d\"fas fa-sort-down\"\u003e\u003c/i\u003e"},{"lineNumber":12,"author":{"gitId":"-"},"content":"            \u003ci *ngIf\u003d\"column.sortBy \u0026\u0026 columnToSortBy \u003d\u003d\u003d column.header \u0026\u0026 sortOrder \u003d\u003d\u003d SortOrder.ASC\" class\u003d\"fas fa-sort-up\"\u003e\u003c/i\u003e"},{"lineNumber":13,"author":{"gitId":"-"},"content":"          \u003c/span\u003e"},{"lineNumber":14,"author":{"gitId":"weiquu"},"content":"        \u003c/button\u003e"},{"lineNumber":15,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":16,"author":{"gitId":"-"},"content":"        \u003cspan *ngIf\u003d\"!column.sortBy\" [ngbTooltip]\u003d\"column.headerToolTip\" [ngClass]\u003d\"{ \u0027ngb-tooltip-class\u0027: column.headerToolTip } \""},{"lineNumber":17,"author":{"gitId":"-"},"content":"          container\u003d\"body\"\u003e{{ column.header }}\u003c/span\u003e"},{"lineNumber":18,"author":{"gitId":"-"},"content":"      \u003c/th\u003e"},{"lineNumber":19,"author":{"gitId":"-"},"content":"    \u003c/tr\u003e"},{"lineNumber":20,"author":{"gitId":"-"},"content":"  \u003c/thead\u003e"},{"lineNumber":21,"author":{"gitId":"-"},"content":"  \u003ctbody\u003e"},{"lineNumber":22,"author":{"gitId":"-"},"content":"    \u003ctr *ngFor\u003d\"let row of tableRows; let idx \u003d index\"\u003e"},{"lineNumber":23,"author":{"gitId":"-"},"content":"      \u003ctd *ngFor\u003d\"let item of row;\" [style]\u003d\"getStyle(item)\"\u003e"},{"lineNumber":24,"author":{"gitId":"-"},"content":"        \u003cndc-dynamic *ngIf\u003d\"item.customComponent\""},{"lineNumber":25,"author":{"gitId":"-"},"content":"                     [ngComponentOutlet]\u003d\"item.customComponent.component\""},{"lineNumber":26,"author":{"gitId":"-"},"content":"                     [ndcDynamicInputs]\u003d\"item.customComponent.componentData(idx)\""},{"lineNumber":27,"author":{"gitId":"-"},"content":"        \u003e\u003c/ndc-dynamic\u003e"},{"lineNumber":28,"author":{"gitId":"-"},"content":"        \u003cng-container *ngIf\u003d\"!item.customComponent \u0026\u0026 item.displayValue\"\u003e"},{"lineNumber":29,"author":{"gitId":"-"},"content":"          \u003cspan [innerHTML]\u003d\"item.displayValue\"\u003e\u003c/span\u003e"},{"lineNumber":30,"author":{"gitId":"-"},"content":"        \u003c/ng-container\u003e"},{"lineNumber":31,"author":{"gitId":"-"},"content":"        \u003cng-container *ngIf\u003d\"!item.customComponent \u0026\u0026 !item.displayValue\"\u003e{{ item.value }}\u003c/ng-container\u003e"},{"lineNumber":32,"author":{"gitId":"-"},"content":"      \u003c/td\u003e"},{"lineNumber":33,"author":{"gitId":"-"},"content":"    \u003c/tr\u003e"},{"lineNumber":34,"author":{"gitId":"-"},"content":"  \u003c/tbody\u003e"},{"lineNumber":35,"author":{"gitId":"-"},"content":"\u003c/table\u003e"}],"authorContributionMap":{"weiquu":3,"-":32}},{"path":"src/web/app/components/sortable-table/sortable-table.component.scss","fileType":"scss","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":".sortable-header {"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  cursor: pointer;"},{"lineNumber":3,"author":{"gitId":"-"},"content":""},{"lineNumber":4,"author":{"gitId":"-"},"content":"  i {"},{"lineNumber":5,"author":{"gitId":"-"},"content":"    margin-left: .3em;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":7,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":8,"author":{"gitId":"weiquu"},"content":"  .fa-stack {"},{"lineNumber":9,"author":{"gitId":"weiquu"},"content":"    width: 20%;"},{"lineNumber":10,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":11,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":12,"author":{"gitId":"weiquu"},"content":"  button {"},{"lineNumber":13,"author":{"gitId":"weiquu"},"content":"    background: none;"},{"lineNumber":14,"author":{"gitId":"weiquu"},"content":"    color: inherit;"},{"lineNumber":15,"author":{"gitId":"weiquu"},"content":"    border: none;"},{"lineNumber":16,"author":{"gitId":"weiquu"},"content":"    padding: 0;"},{"lineNumber":17,"author":{"gitId":"weiquu"},"content":"    text-align: left;"},{"lineNumber":18,"author":{"gitId":"weiquu"},"content":"    width: 100%;"},{"lineNumber":19,"author":{"gitId":"weiquu"},"content":"    font: inherit;"},{"lineNumber":20,"author":{"gitId":"weiquu"},"content":"    cursor: inherit;"},{"lineNumber":21,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":22,"author":{"gitId":"-"},"content":"}"},{"lineNumber":23,"author":{"gitId":"-"},"content":""},{"lineNumber":24,"author":{"gitId":"weiquu"},"content":"th {"},{"lineNumber":25,"author":{"gitId":"weiquu"},"content":"  vertical-align: middle;"},{"lineNumber":26,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"weiquu":17,"-":9}},{"path":"src/web/app/components/sortable-table/sortable-table.component.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { Component, Input, OnChanges, OnInit, Type, EventEmitter, Output } from \u0027@angular/core\u0027;"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import { TableComparatorService } from \u0027../../../services/table-comparator.service\u0027;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"import { SortBy, SortOrder } from \u0027../../../types/sort-properties\u0027;"},{"lineNumber":4,"author":{"gitId":"-"},"content":""},{"lineNumber":5,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":6,"author":{"gitId":"-"},"content":" * The color scheme of the header of the table"},{"lineNumber":7,"author":{"gitId":"-"},"content":" */"},{"lineNumber":8,"author":{"gitId":"-"},"content":"export enum SortableTableHeaderColorScheme {"},{"lineNumber":9,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":10,"author":{"gitId":"-"},"content":"   * Blue background with white text."},{"lineNumber":11,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":12,"author":{"gitId":"-"},"content":"  BLUE,"},{"lineNumber":13,"author":{"gitId":"-"},"content":""},{"lineNumber":14,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":15,"author":{"gitId":"-"},"content":"   * White background with black text."},{"lineNumber":16,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":17,"author":{"gitId":"-"},"content":"  WHITE,"},{"lineNumber":18,"author":{"gitId":"-"},"content":""},{"lineNumber":19,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":20,"author":{"gitId":"-"},"content":"   * Custom background setting"},{"lineNumber":21,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":22,"author":{"gitId":"-"},"content":"  OTHERS,"},{"lineNumber":23,"author":{"gitId":"-"},"content":"}"},{"lineNumber":24,"author":{"gitId":"-"},"content":""},{"lineNumber":25,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":26,"author":{"gitId":"-"},"content":" * Column data for sortable table"},{"lineNumber":27,"author":{"gitId":"-"},"content":" */"},{"lineNumber":28,"author":{"gitId":"-"},"content":"export interface ColumnData {"},{"lineNumber":29,"author":{"gitId":"-"},"content":"  header: string;"},{"lineNumber":30,"author":{"gitId":"-"},"content":"  headerToolTip?: string;"},{"lineNumber":31,"author":{"gitId":"-"},"content":"  sortBy?: SortBy; // optional if the column is not sortable"},{"lineNumber":32,"author":{"gitId":"-"},"content":"  alignment?: \u0027start\u0027 | \u0027center\u0027 | \u0027end\u0027; // defaults to start"},{"lineNumber":33,"author":{"gitId":"-"},"content":"  headerClass?: string; // additional stylings"},{"lineNumber":34,"author":{"gitId":"-"},"content":"}"},{"lineNumber":35,"author":{"gitId":"-"},"content":""},{"lineNumber":36,"author":{"gitId":"-"},"content":"export type SortableEvent \u003d {"},{"lineNumber":37,"author":{"gitId":"-"},"content":"  sortBy: SortBy,"},{"lineNumber":38,"author":{"gitId":"-"},"content":"  sortOrder: SortOrder,"},{"lineNumber":39,"author":{"gitId":"-"},"content":"};"},{"lineNumber":40,"author":{"gitId":"-"},"content":""},{"lineNumber":41,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":42,"author":{"gitId":"-"},"content":" * Data provided for each table cell"},{"lineNumber":43,"author":{"gitId":"-"},"content":" * Priority of display"},{"lineNumber":44,"author":{"gitId":"-"},"content":" * 1. customComponent"},{"lineNumber":45,"author":{"gitId":"-"},"content":" * 2. displayValue"},{"lineNumber":46,"author":{"gitId":"-"},"content":" * 3. value"},{"lineNumber":47,"author":{"gitId":"-"},"content":" */"},{"lineNumber":48,"author":{"gitId":"-"},"content":"export interface SortableTableCellData {"},{"lineNumber":49,"author":{"gitId":"-"},"content":"  value?: any; // Optional value used for sorting with sortBy provided in ColumnData"},{"lineNumber":50,"author":{"gitId":"-"},"content":"  displayValue?: string; // Raw string to be display in the cell"},{"lineNumber":51,"author":{"gitId":"-"},"content":"  style?: string; // Optional value used to set style of data"},{"lineNumber":52,"author":{"gitId":"-"},"content":"  customComponent?: {"},{"lineNumber":53,"author":{"gitId":"-"},"content":"    component: Type\u003cany\u003e,"},{"lineNumber":54,"author":{"gitId":"-"},"content":"    componentData: (idx: number) \u003d\u003e Record\u003cstring, any\u003e, // @Input values for component"},{"lineNumber":55,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":56,"author":{"gitId":"-"},"content":"}"},{"lineNumber":57,"author":{"gitId":"-"},"content":""},{"lineNumber":58,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":59,"author":{"gitId":"-"},"content":" * Displays a sortable table, sorting by clicking on the header"},{"lineNumber":60,"author":{"gitId":"-"},"content":" * Optional sortBy option provided for each column"},{"lineNumber":61,"author":{"gitId":"-"},"content":" * Columns and rows provided must be aligned"},{"lineNumber":62,"author":{"gitId":"-"},"content":" * Remember to register new dynamic components using the withComponents method under sortable-table-module"},{"lineNumber":63,"author":{"gitId":"-"},"content":" */"},{"lineNumber":64,"author":{"gitId":"-"},"content":"@Component({"},{"lineNumber":65,"author":{"gitId":"-"},"content":"  selector: \u0027tm-sortable-table\u0027,"},{"lineNumber":66,"author":{"gitId":"-"},"content":"  templateUrl: \u0027./sortable-table.component.html\u0027,"},{"lineNumber":67,"author":{"gitId":"-"},"content":"  styleUrls: [\u0027./sortable-table.component.scss\u0027],"},{"lineNumber":68,"author":{"gitId":"-"},"content":"})"},{"lineNumber":69,"author":{"gitId":"-"},"content":"export class SortableTableComponent implements OnInit, OnChanges {"},{"lineNumber":70,"author":{"gitId":"-"},"content":""},{"lineNumber":71,"author":{"gitId":"-"},"content":"  // enum"},{"lineNumber":72,"author":{"gitId":"-"},"content":"  SortOrder: typeof SortOrder \u003d SortOrder;"},{"lineNumber":73,"author":{"gitId":"-"},"content":""},{"lineNumber":74,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":75,"author":{"gitId":"-"},"content":"  tableId: string \u003d \u0027\u0027;"},{"lineNumber":76,"author":{"gitId":"-"},"content":""},{"lineNumber":77,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":78,"author":{"gitId":"-"},"content":"  headerColorScheme: SortableTableHeaderColorScheme \u003d SortableTableHeaderColorScheme.BLUE;"},{"lineNumber":79,"author":{"gitId":"-"},"content":""},{"lineNumber":80,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":81,"author":{"gitId":"-"},"content":"  customHeaderStyle: string \u003d \u0027\u0027;"},{"lineNumber":82,"author":{"gitId":"-"},"content":""},{"lineNumber":83,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":84,"author":{"gitId":"-"},"content":"  columns: ColumnData[] \u003d [];"},{"lineNumber":85,"author":{"gitId":"-"},"content":""},{"lineNumber":86,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":87,"author":{"gitId":"-"},"content":"  rows: SortableTableCellData[][] \u003d [];"},{"lineNumber":88,"author":{"gitId":"-"},"content":""},{"lineNumber":89,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":90,"author":{"gitId":"-"},"content":"  initialSortBy: SortBy \u003d SortBy.NONE;"},{"lineNumber":91,"author":{"gitId":"-"},"content":""},{"lineNumber":92,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":93,"author":{"gitId":"-"},"content":"  sortOrder: SortOrder \u003d SortOrder.ASC;"},{"lineNumber":94,"author":{"gitId":"-"},"content":""},{"lineNumber":95,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":96,"author":{"gitId":"-"},"content":"  sortEvent: EventEmitter\u003cSortableEvent\u003e \u003d new EventEmitter();"},{"lineNumber":97,"author":{"gitId":"-"},"content":""},{"lineNumber":98,"author":{"gitId":"-"},"content":"  columnToSortBy: string \u003d \u0027\u0027;"},{"lineNumber":99,"author":{"gitId":"-"},"content":"  tableRows: SortableTableCellData[][] \u003d [];"},{"lineNumber":100,"author":{"gitId":"-"},"content":"  setMainTableStyle: boolean \u003d true;"},{"lineNumber":101,"author":{"gitId":"-"},"content":""},{"lineNumber":102,"author":{"gitId":"-"},"content":"  constructor(private tableComparatorService: TableComparatorService) { }"},{"lineNumber":103,"author":{"gitId":"-"},"content":""},{"lineNumber":104,"author":{"gitId":"-"},"content":"  ngOnInit(): void {"},{"lineNumber":105,"author":{"gitId":"-"},"content":"    this.tableRows \u003d this.rows;"},{"lineNumber":106,"author":{"gitId":"-"},"content":"    this.initialSort(); // Performs an initial sort on the table"},{"lineNumber":107,"author":{"gitId":"-"},"content":"    this.setMainTableStyle \u003d this.headerColorScheme \u003d\u003d\u003d SortableTableHeaderColorScheme.BLUE;"},{"lineNumber":108,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":109,"author":{"gitId":"-"},"content":""},{"lineNumber":110,"author":{"gitId":"-"},"content":"  ngOnChanges(): void {"},{"lineNumber":111,"author":{"gitId":"-"},"content":"    this.tableRows \u003d this.rows;"},{"lineNumber":112,"author":{"gitId":"-"},"content":"    this.sortRows();"},{"lineNumber":113,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":114,"author":{"gitId":"-"},"content":""},{"lineNumber":115,"author":{"gitId":"-"},"content":"  onClickHeader(columnHeader: string): void {"},{"lineNumber":116,"author":{"gitId":"-"},"content":"    this.sortOrder \u003d this.columnToSortBy \u003d\u003d\u003d columnHeader \u0026\u0026 this.sortOrder \u003d\u003d\u003d SortOrder.ASC"},{"lineNumber":117,"author":{"gitId":"-"},"content":"        ? SortOrder.DESC : SortOrder.ASC;"},{"lineNumber":118,"author":{"gitId":"-"},"content":"    this.columnToSortBy \u003d columnHeader;"},{"lineNumber":119,"author":{"gitId":"-"},"content":"    this.sortRows();"},{"lineNumber":120,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":121,"author":{"gitId":"-"},"content":""},{"lineNumber":122,"author":{"gitId":"weiquu"},"content":"  getAriaSort(column: String): String {"},{"lineNumber":123,"author":{"gitId":"weiquu"},"content":"    if (column !\u003d\u003d this.columnToSortBy) {"},{"lineNumber":124,"author":{"gitId":"weiquu"},"content":"      return \u0027none\u0027;"},{"lineNumber":125,"author":{"gitId":"weiquu"},"content":"    }"},{"lineNumber":126,"author":{"gitId":"weiquu"},"content":"    return this.sortOrder \u003d\u003d\u003d SortOrder.ASC ? \u0027ascending\u0027 : \u0027descending\u0027;"},{"lineNumber":127,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":128,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":129,"author":{"gitId":"-"},"content":"  sortRows(): void {"},{"lineNumber":130,"author":{"gitId":"-"},"content":"    if (!this.columnToSortBy) {"},{"lineNumber":131,"author":{"gitId":"-"},"content":"      return;"},{"lineNumber":132,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":133,"author":{"gitId":"-"},"content":"    const columnIndex: number \u003d this.columns.findIndex("},{"lineNumber":134,"author":{"gitId":"-"},"content":"        (column: ColumnData) \u003d\u003e column.header \u003d\u003d\u003d this.columnToSortBy);"},{"lineNumber":135,"author":{"gitId":"-"},"content":"    if (columnIndex \u003c 0) {"},{"lineNumber":136,"author":{"gitId":"-"},"content":"      return;"},{"lineNumber":137,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":138,"author":{"gitId":"-"},"content":"    const sortBy: SortBy | undefined \u003d this.columns[columnIndex].sortBy;"},{"lineNumber":139,"author":{"gitId":"-"},"content":"    if (!sortBy) {"},{"lineNumber":140,"author":{"gitId":"-"},"content":"      return;"},{"lineNumber":141,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":142,"author":{"gitId":"-"},"content":"    this.sortEvent.emit({ sortBy, sortOrder: this.sortOrder });"},{"lineNumber":143,"author":{"gitId":"-"},"content":"    this.tableRows.sort((row1: any[], row2: any[]) \u003d\u003e {"},{"lineNumber":144,"author":{"gitId":"-"},"content":"      return this.tableComparatorService.compare("},{"lineNumber":145,"author":{"gitId":"-"},"content":"          sortBy, this.sortOrder, String(row1[columnIndex].value), String(row2[columnIndex].value));"},{"lineNumber":146,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":147,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":148,"author":{"gitId":"-"},"content":""},{"lineNumber":149,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":150,"author":{"gitId":"-"},"content":"   * Sorts the table with an initial SortBy"},{"lineNumber":151,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":152,"author":{"gitId":"-"},"content":"  initialSort(): void {"},{"lineNumber":153,"author":{"gitId":"-"},"content":"    const indexOfColumnToSort: number \u003d"},{"lineNumber":154,"author":{"gitId":"-"},"content":"        this.columns.findIndex((column: ColumnData) \u003d\u003e column.sortBy \u003d\u003d\u003d this.initialSortBy);"},{"lineNumber":155,"author":{"gitId":"-"},"content":"    if (indexOfColumnToSort \u003c 0) {"},{"lineNumber":156,"author":{"gitId":"-"},"content":"      return;"},{"lineNumber":157,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":158,"author":{"gitId":"-"},"content":""},{"lineNumber":159,"author":{"gitId":"-"},"content":"    this.columnToSortBy \u003d this.columns[indexOfColumnToSort].header;"},{"lineNumber":160,"author":{"gitId":"-"},"content":"    this.sortRows();"},{"lineNumber":161,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":162,"author":{"gitId":"-"},"content":""},{"lineNumber":163,"author":{"gitId":"-"},"content":"  getStyle(cellData: SortableTableCellData): string | undefined {"},{"lineNumber":164,"author":{"gitId":"-"},"content":"    return cellData.style;"},{"lineNumber":165,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":166,"author":{"gitId":"-"},"content":""},{"lineNumber":167,"author":{"gitId":"-"},"content":"  getAlignment(column: ColumnData): { \u0027text-align\u0027: ColumnData[\u0027alignment\u0027] } {"},{"lineNumber":168,"author":{"gitId":"-"},"content":"    return {"},{"lineNumber":169,"author":{"gitId":"-"},"content":"      \u0027text-align\u0027: `${column?.alignment || \u0027start\u0027}`,"},{"lineNumber":170,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":171,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":172,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"weiquu":7,"-":165}},{"path":"src/web/app/components/student-list/student-list.component.scss","fileType":"scss","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":".align-center {"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  text-align: center;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"}"},{"lineNumber":4,"author":{"gitId":"-"},"content":""},{"lineNumber":5,"author":{"gitId":"-"},"content":"@media (max-width: 768px) { //applies only to mobile screens"},{"lineNumber":6,"author":{"gitId":"-"},"content":"  .custom-button {"},{"lineNumber":7,"author":{"gitId":"-"},"content":"    width: 90px;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"    margin-bottom: 5px;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":10,"author":{"gitId":"-"},"content":"}"},{"lineNumber":11,"author":{"gitId":"-"},"content":""},{"lineNumber":12,"author":{"gitId":"-"},"content":".table .thead-gray th {"},{"lineNumber":13,"author":{"gitId":"-"},"content":"  color: #495057;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"  background-color: #DADADA;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"}"},{"lineNumber":16,"author":{"gitId":"-"},"content":""},{"lineNumber":17,"author":{"gitId":"-"},"content":".fa-sort {"},{"lineNumber":18,"author":{"gitId":"-"},"content":"  color: white;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"}"},{"lineNumber":20,"author":{"gitId":"-"},"content":""},{"lineNumber":21,"author":{"gitId":"-"},"content":"/*"},{"lineNumber":22,"author":{"gitId":"-"},"content":"Allow only mouse hover events for the element."},{"lineNumber":23,"author":{"gitId":"-"},"content":"!important is required to override Bootstrap .disabled class matches"},{"lineNumber":24,"author":{"gitId":"-"},"content":"which usually match 2 classes (eg .btn.disabled)"},{"lineNumber":25,"author":{"gitId":"-"},"content":"*/"},{"lineNumber":26,"author":{"gitId":"-"},"content":".mouse-hover-only {"},{"lineNumber":27,"author":{"gitId":"-"},"content":"  pointer-events: auto !important;"},{"lineNumber":28,"author":{"gitId":"-"},"content":"}"},{"lineNumber":29,"author":{"gitId":"-"},"content":""},{"lineNumber":30,"author":{"gitId":"-"},"content":".mouse-hover-only:active {"},{"lineNumber":31,"author":{"gitId":"-"},"content":"  pointer-events: none !important;"},{"lineNumber":32,"author":{"gitId":"-"},"content":"}"},{"lineNumber":33,"author":{"gitId":"-"},"content":""},{"lineNumber":34,"author":{"gitId":"-"},"content":".sortable-header {"},{"lineNumber":35,"author":{"gitId":"-"},"content":"  cursor: pointer;"},{"lineNumber":36,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":37,"author":{"gitId":"weiquu"},"content":"  i {"},{"lineNumber":38,"author":{"gitId":"weiquu"},"content":"    margin-left: .3em;"},{"lineNumber":39,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":40,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":41,"author":{"gitId":"weiquu"},"content":"  .fa-stack {"},{"lineNumber":42,"author":{"gitId":"weiquu"},"content":"    width: 20%;"},{"lineNumber":43,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":44,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":45,"author":{"gitId":"weiquu"},"content":"  button {"},{"lineNumber":46,"author":{"gitId":"weiquu"},"content":"    background: none;"},{"lineNumber":47,"author":{"gitId":"weiquu"},"content":"    color: inherit;"},{"lineNumber":48,"author":{"gitId":"weiquu"},"content":"    border: none;"},{"lineNumber":49,"author":{"gitId":"weiquu"},"content":"    padding: 0;"},{"lineNumber":50,"author":{"gitId":"weiquu"},"content":"    text-align: left;"},{"lineNumber":51,"author":{"gitId":"weiquu"},"content":"    width: 100%;"},{"lineNumber":52,"author":{"gitId":"weiquu"},"content":"    font: inherit;"},{"lineNumber":53,"author":{"gitId":"weiquu"},"content":"    cursor: inherit;"},{"lineNumber":54,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":55,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"weiquu":19,"-":36}},{"path":"src/web/app/components/student-list/student-list.component.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { Component, EventEmitter, Input, Output, OnInit } from \u0027@angular/core\u0027;"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import { NgbModalRef } from \u0027@ng-bootstrap/ng-bootstrap\u0027;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"import { CourseService } from \u0027../../../services/course.service\u0027;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import { SimpleModalService } from \u0027../../../services/simple-modal.service\u0027;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import { StatusMessageService } from \u0027../../../services/status-message.service\u0027;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import { JoinState, MessageOutput, Student } from \u0027../../../types/api-output\u0027;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import { SortBy, SortOrder } from \u0027../../../types/sort-properties\u0027;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import { ErrorMessageOutput } from \u0027../../error-message-output\u0027;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import { SearchTermsHighlighterPipe } from \u0027../../pipes/search-terms-highlighter.pipe\u0027;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import { SimpleModalType } from \u0027../simple-modal/simple-modal-type\u0027;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":12,"author":{"gitId":"-"},"content":"    ColumnData,"},{"lineNumber":13,"author":{"gitId":"-"},"content":"    SortableEvent,"},{"lineNumber":14,"author":{"gitId":"-"},"content":"    SortableTableCellData,"},{"lineNumber":15,"author":{"gitId":"-"},"content":"    SortableTableHeaderColorScheme,"},{"lineNumber":16,"author":{"gitId":"-"},"content":"} from \u0027../sortable-table/sortable-table.component\u0027;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"import { CellWithActionsComponent } from \u0027./cell-with-actions.component\u0027;"},{"lineNumber":18,"author":{"gitId":"-"},"content":""},{"lineNumber":19,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":20,"author":{"gitId":"-"},"content":" * Model of row of student data containing details about a student and their section."},{"lineNumber":21,"author":{"gitId":"-"},"content":" */"},{"lineNumber":22,"author":{"gitId":"-"},"content":"export interface StudentListRowModel {"},{"lineNumber":23,"author":{"gitId":"-"},"content":"  student: Student;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"  isAllowedToViewStudentInSection: boolean;"},{"lineNumber":25,"author":{"gitId":"-"},"content":"  isAllowedToModifyStudent: boolean;"},{"lineNumber":26,"author":{"gitId":"-"},"content":"}"},{"lineNumber":27,"author":{"gitId":"-"},"content":""},{"lineNumber":28,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":29,"author":{"gitId":"-"},"content":" * A table displaying a list of students from a course, with buttons to view/edit/delete students etc."},{"lineNumber":30,"author":{"gitId":"-"},"content":" */"},{"lineNumber":31,"author":{"gitId":"-"},"content":"@Component({"},{"lineNumber":32,"author":{"gitId":"-"},"content":"  selector: \u0027tm-student-list\u0027,"},{"lineNumber":33,"author":{"gitId":"-"},"content":"  templateUrl: \u0027./student-list.component.html\u0027,"},{"lineNumber":34,"author":{"gitId":"-"},"content":"  styleUrls: [\u0027./student-list.component.scss\u0027],"},{"lineNumber":35,"author":{"gitId":"-"},"content":"})"},{"lineNumber":36,"author":{"gitId":"-"},"content":"export class StudentListComponent implements OnInit {"},{"lineNumber":37,"author":{"gitId":"-"},"content":"  @Input() courseId: string \u003d \u0027\u0027;"},{"lineNumber":38,"author":{"gitId":"-"},"content":"  @Input() useGrayHeading: boolean \u003d true;"},{"lineNumber":39,"author":{"gitId":"-"},"content":"  @Input() listOfStudentsToHide: string[] \u003d [];"},{"lineNumber":40,"author":{"gitId":"-"},"content":"  @Input() isHideTableHead: boolean \u003d false;"},{"lineNumber":41,"author":{"gitId":"-"},"content":"  @Input() enableRemindButton: boolean \u003d false;"},{"lineNumber":42,"author":{"gitId":"-"},"content":"  @Input() isActionButtonsEnabled: boolean \u003d true;"},{"lineNumber":43,"author":{"gitId":"-"},"content":"  @Input() students: StudentListRowModel[] \u003d [];"},{"lineNumber":44,"author":{"gitId":"-"},"content":"  @Input() tableSortBy: SortBy \u003d SortBy.NONE;"},{"lineNumber":45,"author":{"gitId":"-"},"content":"  @Input() tableSortOrder: SortOrder \u003d SortOrder.ASC;"},{"lineNumber":46,"author":{"gitId":"-"},"content":"  @Input() searchString: string \u003d \u0027\u0027;"},{"lineNumber":47,"author":{"gitId":"-"},"content":"  @Input() headerColorScheme: SortableTableHeaderColorScheme \u003d SortableTableHeaderColorScheme.OTHERS;"},{"lineNumber":48,"author":{"gitId":"-"},"content":"  @Input() customHeaderStyle: string \u003d \u0027bg-light\u0027;"},{"lineNumber":49,"author":{"gitId":"-"},"content":""},{"lineNumber":50,"author":{"gitId":"-"},"content":"  @Input() set studentModels(studentRowModels: StudentListRowModel[]) {"},{"lineNumber":51,"author":{"gitId":"-"},"content":"    this.students \u003d studentRowModels;"},{"lineNumber":52,"author":{"gitId":"-"},"content":"    this.setRowData();"},{"lineNumber":53,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":54,"author":{"gitId":"-"},"content":""},{"lineNumber":55,"author":{"gitId":"-"},"content":"  @Input() set hiddenStudents(hiddenStudents: string[]) {"},{"lineNumber":56,"author":{"gitId":"-"},"content":"    this.listOfStudentsToHide \u003d hiddenStudents;"},{"lineNumber":57,"author":{"gitId":"-"},"content":"    this.setRowData();"},{"lineNumber":58,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":59,"author":{"gitId":"-"},"content":""},{"lineNumber":60,"author":{"gitId":"-"},"content":"  @Output() removeStudentFromCourseEvent: EventEmitter\u003cstring\u003e \u003d new EventEmitter();"},{"lineNumber":61,"author":{"gitId":"-"},"content":"  @Output() sortStudentListEvent: EventEmitter\u003cSortableEvent\u003e \u003d new EventEmitter();"},{"lineNumber":62,"author":{"gitId":"-"},"content":""},{"lineNumber":63,"author":{"gitId":"-"},"content":"  rowsData: SortableTableCellData[][] \u003d [];"},{"lineNumber":64,"author":{"gitId":"-"},"content":"  columnsData: ColumnData[] \u003d [];"},{"lineNumber":65,"author":{"gitId":"-"},"content":""},{"lineNumber":66,"author":{"gitId":"-"},"content":"  // enum"},{"lineNumber":67,"author":{"gitId":"-"},"content":"  SortBy: typeof SortBy \u003d SortBy;"},{"lineNumber":68,"author":{"gitId":"-"},"content":"  SortOrder: typeof SortOrder \u003d SortOrder;"},{"lineNumber":69,"author":{"gitId":"-"},"content":"  JoinState: typeof JoinState \u003d JoinState;"},{"lineNumber":70,"author":{"gitId":"-"},"content":"  SortableTableHeaderColorScheme: typeof SortableTableHeaderColorScheme \u003d SortableTableHeaderColorScheme;"},{"lineNumber":71,"author":{"gitId":"-"},"content":""},{"lineNumber":72,"author":{"gitId":"-"},"content":"  constructor(private statusMessageService: StatusMessageService,"},{"lineNumber":73,"author":{"gitId":"-"},"content":"              private courseService: CourseService,"},{"lineNumber":74,"author":{"gitId":"-"},"content":"              private simpleModalService: SimpleModalService,"},{"lineNumber":75,"author":{"gitId":"-"},"content":"              private searchTermsHighlighterPipe: SearchTermsHighlighterPipe) {"},{"lineNumber":76,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":77,"author":{"gitId":"-"},"content":""},{"lineNumber":78,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":79,"author":{"gitId":"-"},"content":"   * Returns whether this course are divided into sections"},{"lineNumber":80,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":81,"author":{"gitId":"-"},"content":"  hasSection(): boolean {"},{"lineNumber":82,"author":{"gitId":"-"},"content":"    return (this.students.some((studentModel: StudentListRowModel) \u003d\u003e"},{"lineNumber":83,"author":{"gitId":"-"},"content":"        studentModel.student.sectionName !\u003d\u003d \u0027None\u0027));"},{"lineNumber":84,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":85,"author":{"gitId":"-"},"content":""},{"lineNumber":86,"author":{"gitId":"-"},"content":"  ngOnInit(): void {"},{"lineNumber":87,"author":{"gitId":"-"},"content":"    this.setRowData();"},{"lineNumber":88,"author":{"gitId":"-"},"content":"    this.setColumnData();"},{"lineNumber":89,"author":{"gitId":"-"},"content":"    this.setHeaderStyle();"},{"lineNumber":90,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":91,"author":{"gitId":"-"},"content":""},{"lineNumber":92,"author":{"gitId":"-"},"content":"  setHeaderStyle(): void {"},{"lineNumber":93,"author":{"gitId":"-"},"content":"    this.customHeaderStyle \u003d this.useGrayHeading ? \u0027bg-light\u0027 : \u0027bg-info\u0027;"},{"lineNumber":94,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":95,"author":{"gitId":"-"},"content":""},{"lineNumber":96,"author":{"gitId":"-"},"content":"  setColumnData(): void {"},{"lineNumber":97,"author":{"gitId":"-"},"content":"    this.columnsData \u003d ["},{"lineNumber":98,"author":{"gitId":"-"},"content":"        {"},{"lineNumber":99,"author":{"gitId":"-"},"content":"            header: \u0027Section\u0027,"},{"lineNumber":100,"author":{"gitId":"-"},"content":"            sortBy: SortBy.SECTION_NAME,"},{"lineNumber":101,"author":{"gitId":"-"},"content":"            headerClass: \u0027sort-by-section\u0027,"},{"lineNumber":102,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":103,"author":{"gitId":"-"},"content":"        {"},{"lineNumber":104,"author":{"gitId":"-"},"content":"            header: \u0027Team\u0027,"},{"lineNumber":105,"author":{"gitId":"-"},"content":"            sortBy: SortBy.TEAM_NAME,"},{"lineNumber":106,"author":{"gitId":"-"},"content":"            headerClass: \u0027sort-by-team\u0027,"},{"lineNumber":107,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":108,"author":{"gitId":"-"},"content":"        {"},{"lineNumber":109,"author":{"gitId":"-"},"content":"            header: \u0027Student Name\u0027,"},{"lineNumber":110,"author":{"gitId":"-"},"content":"            sortBy: SortBy.RESPONDENT_NAME,"},{"lineNumber":111,"author":{"gitId":"-"},"content":"            headerClass: \u0027sort-by-name\u0027,"},{"lineNumber":112,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":113,"author":{"gitId":"-"},"content":"        {"},{"lineNumber":114,"author":{"gitId":"-"},"content":"            header: \u0027Status\u0027,"},{"lineNumber":115,"author":{"gitId":"-"},"content":"            sortBy: SortBy.JOIN_STATUS,"},{"lineNumber":116,"author":{"gitId":"-"},"content":"            headerClass: \u0027sort-by-status\u0027,"},{"lineNumber":117,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":118,"author":{"gitId":"-"},"content":"        {"},{"lineNumber":119,"author":{"gitId":"-"},"content":"            header: \u0027Email\u0027,"},{"lineNumber":120,"author":{"gitId":"-"},"content":"            sortBy: SortBy.RESPONDENT_EMAIL,"},{"lineNumber":121,"author":{"gitId":"-"},"content":"            headerClass: \u0027sort-by-email\u0027,"},{"lineNumber":122,"author":{"gitId":"-"},"content":""},{"lineNumber":123,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":124,"author":{"gitId":"-"},"content":"        {"},{"lineNumber":125,"author":{"gitId":"-"},"content":"            header: \u0027Action(s)\u0027,"},{"lineNumber":126,"author":{"gitId":"-"},"content":"            alignment: \u0027center\u0027,"},{"lineNumber":127,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":128,"author":{"gitId":"-"},"content":"    ];"},{"lineNumber":129,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":130,"author":{"gitId":"-"},"content":""},{"lineNumber":131,"author":{"gitId":"-"},"content":"  setRowData(): void {"},{"lineNumber":132,"author":{"gitId":"-"},"content":"    this.rowsData \u003d this.students"},{"lineNumber":133,"author":{"gitId":"-"},"content":"    .filter((studentModel: StudentListRowModel) \u003d\u003e !this.isStudentToHide(studentModel.student.email))"},{"lineNumber":134,"author":{"gitId":"-"},"content":"    .map((studentModel: StudentListRowModel) \u003d\u003e {"},{"lineNumber":135,"author":{"gitId":"-"},"content":"      const rowData: SortableTableCellData[] \u003d ["},{"lineNumber":136,"author":{"gitId":"-"},"content":"        {"},{"lineNumber":137,"author":{"gitId":"-"},"content":"          value: studentModel.student.sectionName,"},{"lineNumber":138,"author":{"gitId":"-"},"content":"          displayValue: this.searchTermsHighlighterPipe.transform(studentModel.student.sectionName, this.searchString),"},{"lineNumber":139,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":140,"author":{"gitId":"-"},"content":"        {"},{"lineNumber":141,"author":{"gitId":"-"},"content":"          value: studentModel.student.teamName,"},{"lineNumber":142,"author":{"gitId":"-"},"content":"          displayValue: this.searchTermsHighlighterPipe.transform(studentModel.student.teamName, this.searchString),"},{"lineNumber":143,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":144,"author":{"gitId":"-"},"content":"        {"},{"lineNumber":145,"author":{"gitId":"-"},"content":"          value: studentModel.student.name,"},{"lineNumber":146,"author":{"gitId":"-"},"content":"          displayValue: this.searchTermsHighlighterPipe.transform(studentModel.student.name, this.searchString),"},{"lineNumber":147,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":148,"author":{"gitId":"-"},"content":"        {"},{"lineNumber":149,"author":{"gitId":"-"},"content":"          value: studentModel.student.joinState \u003d\u003d\u003d JoinState.JOINED ? \u0027Joined\u0027 : \u0027Yet to Join\u0027,"},{"lineNumber":150,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":151,"author":{"gitId":"-"},"content":"        {"},{"lineNumber":152,"author":{"gitId":"-"},"content":"          value: studentModel.student.email,"},{"lineNumber":153,"author":{"gitId":"-"},"content":"          displayValue: this.searchTermsHighlighterPipe.transform(studentModel.student.email, this.searchString),"},{"lineNumber":154,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":155,"author":{"gitId":"-"},"content":"        this.createActionsCell(studentModel),"},{"lineNumber":156,"author":{"gitId":"-"},"content":"      ];"},{"lineNumber":157,"author":{"gitId":"-"},"content":""},{"lineNumber":158,"author":{"gitId":"-"},"content":"      return rowData;"},{"lineNumber":159,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":160,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":161,"author":{"gitId":"-"},"content":""},{"lineNumber":162,"author":{"gitId":"-"},"content":"  createActionsCell(studentModel: StudentListRowModel): SortableTableCellData {"},{"lineNumber":163,"author":{"gitId":"-"},"content":"    const actionsCell: SortableTableCellData \u003d {"},{"lineNumber":164,"author":{"gitId":"-"},"content":"      customComponent: {"},{"lineNumber":165,"author":{"gitId":"-"},"content":"      component: CellWithActionsComponent,"},{"lineNumber":166,"author":{"gitId":"-"},"content":"      componentData: (idx: number) \u003d\u003e ({"},{"lineNumber":167,"author":{"gitId":"-"},"content":"        idx,"},{"lineNumber":168,"author":{"gitId":"-"},"content":"        courseId: this.courseId,"},{"lineNumber":169,"author":{"gitId":"-"},"content":"        email: studentModel.student.email,"},{"lineNumber":170,"author":{"gitId":"-"},"content":"        enableRemindButton: studentModel.student.joinState \u003d\u003d\u003d JoinState.NOT_JOINED,"},{"lineNumber":171,"author":{"gitId":"-"},"content":"        instructorPrivileges: {"},{"lineNumber":172,"author":{"gitId":"-"},"content":"            canModifyStudent: studentModel.isAllowedToModifyStudent,"},{"lineNumber":173,"author":{"gitId":"-"},"content":"            canViewStudentInSections: studentModel.isAllowedToViewStudentInSection,"},{"lineNumber":174,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":175,"author":{"gitId":"-"},"content":"        isActionButtonsEnabled: this.isActionButtonsEnabled,"},{"lineNumber":176,"author":{"gitId":"-"},"content":"        removeStudentFromCourse: () \u003d\u003e this.openDeleteModal(studentModel),"},{"lineNumber":177,"author":{"gitId":"-"},"content":"        remindStudentFromCourse: () \u003d\u003e this.openRemindModal(studentModel),"},{"lineNumber":178,"author":{"gitId":"-"},"content":"      }),"},{"lineNumber":179,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":180,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":181,"author":{"gitId":"-"},"content":""},{"lineNumber":182,"author":{"gitId":"-"},"content":"    return actionsCell;"},{"lineNumber":183,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":184,"author":{"gitId":"-"},"content":""},{"lineNumber":185,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":186,"author":{"gitId":"-"},"content":"   * Function to be passed to ngFor, so that students in the list is tracked by email"},{"lineNumber":187,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":188,"author":{"gitId":"-"},"content":"  trackByFn(_index: number, item: StudentListRowModel): any {"},{"lineNumber":189,"author":{"gitId":"-"},"content":"    return item.student.email;"},{"lineNumber":190,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":191,"author":{"gitId":"-"},"content":""},{"lineNumber":192,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":193,"author":{"gitId":"-"},"content":"   * Open the student email reminder modal."},{"lineNumber":194,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":195,"author":{"gitId":"-"},"content":"  openRemindModal(studentModel: StudentListRowModel): void {"},{"lineNumber":196,"author":{"gitId":"-"},"content":"    const modalContent: string \u003d `Usually, there is no need to use this feature because"},{"lineNumber":197,"author":{"gitId":"-"},"content":"          TEAMMATES sends an automatic invite to students at the opening time of each session."},{"lineNumber":198,"author":{"gitId":"-"},"content":"          Send a join request to \u003cstrong\u003e${studentModel.student.email}\u003c/strong\u003e anyway?`;"},{"lineNumber":199,"author":{"gitId":"-"},"content":"    const modalRef: NgbModalRef \u003d this.simpleModalService.openConfirmationModal("},{"lineNumber":200,"author":{"gitId":"-"},"content":"        \u0027Send join request?\u0027, SimpleModalType.INFO, modalContent);"},{"lineNumber":201,"author":{"gitId":"-"},"content":"    modalRef.result.then(() \u003d\u003e {"},{"lineNumber":202,"author":{"gitId":"-"},"content":"      this.remindStudentFromCourse(studentModel.student.email);"},{"lineNumber":203,"author":{"gitId":"-"},"content":"    }, () \u003d\u003e {});"},{"lineNumber":204,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":205,"author":{"gitId":"-"},"content":""},{"lineNumber":206,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":207,"author":{"gitId":"-"},"content":"   * Open the delete student confirmation modal."},{"lineNumber":208,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":209,"author":{"gitId":"-"},"content":"  openDeleteModal(studentModel: StudentListRowModel): void {"},{"lineNumber":210,"author":{"gitId":"-"},"content":"    const modalContent: string \u003d `Are you sure you want to remove \u003cstrong\u003e${studentModel.student.name}\u003c/strong\u003e `"},{"lineNumber":211,"author":{"gitId":"-"},"content":"        + `from the course \u003cstrong\u003e${this.courseId}?\u003c/strong\u003e`;"},{"lineNumber":212,"author":{"gitId":"-"},"content":"    const modalRef: NgbModalRef \u003d this.simpleModalService.openConfirmationModal("},{"lineNumber":213,"author":{"gitId":"-"},"content":"        `Delete student \u003cstrong\u003e${studentModel.student.name}\u003c/strong\u003e?`, SimpleModalType.DANGER, modalContent);"},{"lineNumber":214,"author":{"gitId":"-"},"content":"    modalRef.result.then(() \u003d\u003e {"},{"lineNumber":215,"author":{"gitId":"-"},"content":"      this.removeStudentFromCourse(studentModel.student.email);"},{"lineNumber":216,"author":{"gitId":"-"},"content":"      this.students \u003d this.students.filter((student: StudentListRowModel) \u003d\u003e"},{"lineNumber":217,"author":{"gitId":"-"},"content":"      student.student.email !\u003d\u003d studentModel.student.email);"},{"lineNumber":218,"author":{"gitId":"-"},"content":"      this.setRowData();"},{"lineNumber":219,"author":{"gitId":"-"},"content":"    }, () \u003d\u003e {});"},{"lineNumber":220,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":221,"author":{"gitId":"-"},"content":""},{"lineNumber":222,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":223,"author":{"gitId":"-"},"content":"   * Remind the student from course."},{"lineNumber":224,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":225,"author":{"gitId":"-"},"content":"  remindStudentFromCourse(studentEmail: string): void {"},{"lineNumber":226,"author":{"gitId":"-"},"content":"    this.courseService.remindStudentForJoin(this.courseId, studentEmail)"},{"lineNumber":227,"author":{"gitId":"-"},"content":"      .subscribe({"},{"lineNumber":228,"author":{"gitId":"-"},"content":"        next: (resp: MessageOutput) \u003d\u003e {"},{"lineNumber":229,"author":{"gitId":"-"},"content":"          this.statusMessageService.showSuccessToast(resp.message);"},{"lineNumber":230,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":231,"author":{"gitId":"-"},"content":"        error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":232,"author":{"gitId":"-"},"content":"          this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":233,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":234,"author":{"gitId":"-"},"content":"      });"},{"lineNumber":235,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":236,"author":{"gitId":"-"},"content":""},{"lineNumber":237,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":238,"author":{"gitId":"-"},"content":"   * Removes the student from course."},{"lineNumber":239,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":240,"author":{"gitId":"-"},"content":"  removeStudentFromCourse(studentEmail: string): void {"},{"lineNumber":241,"author":{"gitId":"-"},"content":"    this.removeStudentFromCourseEvent.emit(studentEmail);"},{"lineNumber":242,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":243,"author":{"gitId":"-"},"content":""},{"lineNumber":244,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":245,"author":{"gitId":"-"},"content":"   * Determines which row in the studentTable should be hidden."},{"lineNumber":246,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":247,"author":{"gitId":"-"},"content":"  isStudentToHide(studentEmail: string): boolean {"},{"lineNumber":248,"author":{"gitId":"-"},"content":"    return this.listOfStudentsToHide.indexOf(studentEmail) \u003e -1;"},{"lineNumber":249,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":250,"author":{"gitId":"-"},"content":""},{"lineNumber":251,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":252,"author":{"gitId":"-"},"content":"   * Sorts the student list"},{"lineNumber":253,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":254,"author":{"gitId":"-"},"content":"  sortStudentListEventHandler(event: { sortBy: SortBy, sortOrder: SortOrder }): void {"},{"lineNumber":255,"author":{"gitId":"-"},"content":"    this.sortStudentListEvent.emit(event);"},{"lineNumber":256,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":257,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":258,"author":{"gitId":"weiquu"},"content":"  getAriaSort(by: SortBy): String {"},{"lineNumber":259,"author":{"gitId":"weiquu"},"content":"    if (by !\u003d\u003d this.tableSortBy) {"},{"lineNumber":260,"author":{"gitId":"weiquu"},"content":"      return \u0027none\u0027;"},{"lineNumber":261,"author":{"gitId":"weiquu"},"content":"    }"},{"lineNumber":262,"author":{"gitId":"weiquu"},"content":"    return this.tableSortOrder \u003d\u003d\u003d SortOrder.ASC ? \u0027ascending\u0027 : \u0027descending\u0027;"},{"lineNumber":263,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":264,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"weiquu":6,"-":258}},{"path":"src/web/app/components/visibility-panel/visibility-panel.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"margin-top-15px padding-15px\" [ngClass]\u003d\"{ \u0027background-color-light-green\u0027: !model.isQuestionHasResponses, \u0027alert alert-danger\u0027: model.isQuestionHasResponses }\"\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  \u003cdiv\u003e"},{"lineNumber":3,"author":{"gitId":"-"},"content":"    \u003cdiv *ngIf\u003d\"model.isQuestionHasResponses\"\u003e"},{"lineNumber":4,"author":{"gitId":"jasonqiu212"},"content":"      \u003cp class\u003d\"fs-6 fw-bold\"\u003eChanging the visibility after collecting responses is not recommended.\u003c/p\u003e"},{"lineNumber":5,"author":{"gitId":"-"},"content":"      \u003cp\u003eReason: The existing responses were submitted under the \u0027promise\u0027 of a certain visibility and changing the visibility later \u0027breaks\u0027 that promise.\u003c/p\u003e"},{"lineNumber":6,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":7,"author":{"gitId":"-"},"content":"    \u003cb [ngClass]\u003d\"{ \u0027visibility-title\u0027: !model.isQuestionHasResponses }\"\u003eVisibility\u003c/b\u003e (Who can see the responses?)"},{"lineNumber":8,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":9,"author":{"gitId":"-"},"content":"  \u003cdiv ngbDropdown class\u003d\"margin-top-15px\"\u003e"},{"lineNumber":10,"author":{"gitId":"-"},"content":"    \u003cbutton id\u003d\"btn-question-visibility\" class\u003d\"btn btn-light white-space-normal\" ngbDropdownToggle [disabled]\u003d\"!model.isEditable\"\u003e"},{"lineNumber":11,"author":{"gitId":"-"},"content":"      \u003cspan *ngIf\u003d\"!model.isUsingOtherVisibilitySetting\"\u003e"},{"lineNumber":12,"author":{"gitId":"-"},"content":"        {{ model.commonVisibilitySettingName }}"},{"lineNumber":13,"author":{"gitId":"-"},"content":"      \u003c/span\u003e"},{"lineNumber":14,"author":{"gitId":"-"},"content":"      \u003cspan *ngIf\u003d\"model.isUsingOtherVisibilitySetting\"\u003eCustom visibility options\u003c/span\u003e"},{"lineNumber":15,"author":{"gitId":"-"},"content":"    \u003c/button\u003e"},{"lineNumber":16,"author":{"gitId":"-"},"content":"    \u003cul id\u003d\"question-visibility-dropdown\" ngbDropdownMenu\u003e"},{"lineNumber":17,"author":{"gitId":"-"},"content":"      \u003cli class\u003d\"dropdown-header\"\u003eCommon visibility options\u003c/li\u003e"},{"lineNumber":18,"author":{"gitId":"weiquu"},"content":"      \u003cli class\u003d\"text-wrap dropdown-item\" *ngFor\u003d\"let visibilityOption of commonFeedbackVisibilitySettings\"\u003e"},{"lineNumber":19,"author":{"gitId":"weiquu"},"content":"        \u003cbutton class\u003d\"dropdown-button\" (click)\u003d\"applyCommonVisibilitySettings(visibilityOption)\"\u003e{{ visibilityOption.name }}\u003c/button\u003e"},{"lineNumber":20,"author":{"gitId":"weiquu"},"content":"      \u003c/li\u003e"},{"lineNumber":21,"author":{"gitId":"weiquu"},"content":"      \u003cli class\u003d\"dropdown-divider\" *ngIf\u003d\"isCustomFeedbackVisibilitySettingAllowed\" aria-hidden\u003d\"true\"\u003e\u003c/li\u003e"},{"lineNumber":22,"author":{"gitId":"weiquu"},"content":"      \u003cli class\u003d\"text-wrap dropdown-item\" *ngIf\u003d\"isCustomFeedbackVisibilitySettingAllowed\"\u003e"},{"lineNumber":23,"author":{"gitId":"weiquu"},"content":"        \u003cbutton class\u003d\"dropdown-button\" (click)\u003d\"triggerCustomVisibilitySetting()\"\u003eCustom visibility options...\u003c/button\u003e"},{"lineNumber":24,"author":{"gitId":"weiquu"},"content":"      \u003c/li\u003e"},{"lineNumber":25,"author":{"gitId":"-"},"content":"    \u003c/ul\u003e"},{"lineNumber":26,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":27,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"table-responsive\"\u003e"},{"lineNumber":28,"author":{"gitId":"weiquu"},"content":"    \u003ctable class\u003d\"table margin-top-15px background-color-white table-striped\" *ngIf\u003d\"model.isUsingOtherVisibilitySetting\" aria-label\u003d\"Custom Visibility Options Table\"\u003e"},{"lineNumber":29,"author":{"gitId":"-"},"content":"      \u003cthead\u003e"},{"lineNumber":30,"author":{"gitId":"-"},"content":"      \u003ctr\u003e"},{"lineNumber":31,"author":{"gitId":"-"},"content":"        \u003cth scope\u003d\"col\" class\u003d\"text-start\"\u003eUser/Group\u003c/th\u003e"},{"lineNumber":32,"author":{"gitId":"-"},"content":"        \u003cth scope\u003d\"col\" class\u003d\"text-center\" *ngFor\u003d\"let visibilityControl of VisibilityControl | enumToArray\"\u003e{{ visibilityControl | visibilityControlName }}\u003c/th\u003e"},{"lineNumber":33,"author":{"gitId":"-"},"content":"      \u003c/tr\u003e"},{"lineNumber":34,"author":{"gitId":"-"},"content":"      \u003c/thead\u003e"},{"lineNumber":35,"author":{"gitId":"-"},"content":"      \u003ctbody id\u003d\"custom-visibility-table\"\u003e"},{"lineNumber":36,"author":{"gitId":"-"},"content":"      \u003cng-container *ngFor\u003d\"let visibilityType of FeedbackVisibilityType | enumToArray\"\u003e"},{"lineNumber":37,"author":{"gitId":"-"},"content":"        \u003ctr *ngIf\u003d\"visibilityStateMachine.isVisibilityTypeApplicable(visibilityType)\"\u003e"},{"lineNumber":38,"author":{"gitId":"-"},"content":"          \u003ctd\u003e\u003cspan class\u003d\"ngb-tooltip-class\" [ngbTooltip]\u003d\"visibilityType | visibilityTypeDescription\" container\u003d\"body\"\u003e{{ visibilityType | visibilityTypeName }}\u003c/span\u003e\u003c/td\u003e"},{"lineNumber":39,"author":{"gitId":"-"},"content":"          \u003ctd *ngFor\u003d\"let visibilityControl of VisibilityControl | enumToArray\" class\u003d\"text-center\"\u003e"},{"lineNumber":40,"author":{"gitId":"-"},"content":"            \u003cinput type\u003d\"checkbox\""},{"lineNumber":41,"author":{"gitId":"-"},"content":"                   (click)\u003d\"modifyVisibilityControl($event.target.checked, visibilityType, visibilityControl)\""},{"lineNumber":42,"author":{"gitId":"-"},"content":"                   [checked]\u003d\"visibilityStateMachine.isVisible(visibilityType, visibilityControl)\""},{"lineNumber":43,"author":{"gitId":"weiquu"},"content":"                   [disabled]\u003d\"!visibilityStateMachine.isCellEditable(visibilityType, visibilityControl) || !model.isEditable\""},{"lineNumber":44,"author":{"gitId":"weiquu"},"content":"                   [attr.aria-label]\u003d\"getCheckboxAriaLabel(visibilityType, visibilityControl)\"\u003e"},{"lineNumber":45,"author":{"gitId":"-"},"content":"          \u003c/td\u003e"},{"lineNumber":46,"author":{"gitId":"-"},"content":"        \u003c/tr\u003e"},{"lineNumber":47,"author":{"gitId":"-"},"content":"      \u003c/ng-container\u003e"},{"lineNumber":48,"author":{"gitId":"-"},"content":"      \u003c/tbody\u003e"},{"lineNumber":49,"author":{"gitId":"-"},"content":"    \u003c/table\u003e"},{"lineNumber":50,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":51,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"margin-top-15px visibility-message\"\u003e"},{"lineNumber":52,"author":{"gitId":"-"},"content":"    This is the visibility hint as seen by the feedback giver:"},{"lineNumber":53,"author":{"gitId":"-"},"content":"    \u003cul class\u003d\"text-muted background-color-warning\"\u003e"},{"lineNumber":54,"author":{"gitId":"-"},"content":"      \u003cli *ngIf\u003d\"model.recipientType \u003d\u003d\u003d FeedbackParticipantType.SELF\"\u003eYou can see your own feedback in the results page later on.\u003c/li\u003e"},{"lineNumber":55,"author":{"gitId":"-"},"content":"      \u003cng-container *ngFor\u003d\"let visibilityType of FeedbackVisibilityType | enumToArray\"\u003e"},{"lineNumber":56,"author":{"gitId":"-"},"content":"        \u003cli *ngIf\u003d\"visibilityStateMachine.isVisibilityTypeApplicable(visibilityType) \u0026\u0026 visibilityStateMachine.hasAnyVisibilityControl(visibilityType)\"\u003e"},{"lineNumber":57,"author":{"gitId":"-"},"content":"          {{ visibilityType | visibilityEntityName:model.recipientType:model.numberOfEntitiesToGiveFeedbackToSetting:model.customNumberOfEntitiesToGiveFeedbackTo }} {{ visibilityStateMachine.getVisibilityControlUnderVisibilityType(visibilityType) | visibilityCapability }}"},{"lineNumber":58,"author":{"gitId":"-"},"content":"        \u003c/li\u003e"},{"lineNumber":59,"author":{"gitId":"-"},"content":"      \u003c/ng-container\u003e"},{"lineNumber":60,"author":{"gitId":"-"},"content":"      \u003cli *ngIf\u003d\"!visibilityStateMachine.hasAnyVisibilityControlForAll()\"\u003eNo-one can see your responses\u003c/li\u003e"},{"lineNumber":61,"author":{"gitId":"-"},"content":"    \u003c/ul\u003e"},{"lineNumber":62,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":63,"author":{"gitId":"-"},"content":"\u003c/div\u003e"}],"authorContributionMap":{"jasonqiu212":1,"weiquu":10,"-":52}},{"path":"src/web/app/components/visibility-panel/visibility-panel.component.scss","fileType":"scss","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":".background-color-light-green {"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  background-color: #E0EEEE;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"}"},{"lineNumber":4,"author":{"gitId":"-"},"content":""},{"lineNumber":5,"author":{"gitId":"-"},"content":".background-color-warning {"},{"lineNumber":6,"author":{"gitId":"-"},"content":"  background-color: #FCF8E3;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"}"},{"lineNumber":8,"author":{"gitId":"-"},"content":""},{"lineNumber":9,"author":{"gitId":"-"},"content":".background-color-white {"},{"lineNumber":10,"author":{"gitId":"-"},"content":"  background-color: white;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"}"},{"lineNumber":12,"author":{"gitId":"-"},"content":""},{"lineNumber":13,"author":{"gitId":"-"},"content":".margin-top-15px {"},{"lineNumber":14,"author":{"gitId":"-"},"content":"  margin-top: 15px;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"}"},{"lineNumber":16,"author":{"gitId":"-"},"content":""},{"lineNumber":17,"author":{"gitId":"-"},"content":".padding-15px {"},{"lineNumber":18,"author":{"gitId":"-"},"content":"  padding: 15px;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"}"},{"lineNumber":20,"author":{"gitId":"-"},"content":""},{"lineNumber":21,"author":{"gitId":"-"},"content":".visibility-title {"},{"lineNumber":22,"author":{"gitId":"-"},"content":"  color: #2AABD2;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"}"},{"lineNumber":24,"author":{"gitId":"-"},"content":""},{"lineNumber":25,"author":{"gitId":"-"},"content":".visibility-message \u003e ul {"},{"lineNumber":26,"author":{"gitId":"-"},"content":"  margin-top: 5px;"},{"lineNumber":27,"author":{"gitId":"-"},"content":"  padding: 5px 25px;"},{"lineNumber":28,"author":{"gitId":"-"},"content":"  margin-bottom: 0;"},{"lineNumber":29,"author":{"gitId":"-"},"content":"}"},{"lineNumber":30,"author":{"gitId":"-"},"content":""},{"lineNumber":31,"author":{"gitId":"-"},"content":".visibility-message \u003e ul \u003e li {"},{"lineNumber":32,"author":{"gitId":"-"},"content":"  cursor: default;"},{"lineNumber":33,"author":{"gitId":"-"},"content":"}"},{"lineNumber":34,"author":{"gitId":"-"},"content":""},{"lineNumber":35,"author":{"gitId":"-"},"content":".white-space-normal {"},{"lineNumber":36,"author":{"gitId":"-"},"content":"  white-space: normal;"},{"lineNumber":37,"author":{"gitId":"-"},"content":"}"},{"lineNumber":38,"author":{"gitId":"-"},"content":""},{"lineNumber":39,"author":{"gitId":"-"},"content":".dropdown-item {"},{"lineNumber":40,"author":{"gitId":"-"},"content":"  cursor: pointer;"},{"lineNumber":41,"author":{"gitId":"-"},"content":"}"},{"lineNumber":42,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":43,"author":{"gitId":"weiquu"},"content":".dropdown-button {"},{"lineNumber":44,"author":{"gitId":"weiquu"},"content":"  border: none;"},{"lineNumber":45,"author":{"gitId":"weiquu"},"content":"  background: none;"},{"lineNumber":46,"author":{"gitId":"weiquu"},"content":"  width: 100%;"},{"lineNumber":47,"author":{"gitId":"weiquu"},"content":"  text-align: left;"},{"lineNumber":48,"author":{"gitId":"weiquu"},"content":"}"}],"authorContributionMap":{"weiquu":7,"-":41}},{"path":"src/web/app/components/visibility-panel/visibility-panel.component.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { Component, EventEmitter, Input, Output } from \u0027@angular/core\u0027;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import { CommonVisibilitySetting } from \u0027../../../services/feedback-questions.service\u0027;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import { VisibilityStateMachine } from \u0027../../../services/visibility-state-machine\u0027;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":6,"author":{"gitId":"-"},"content":"  FeedbackParticipantType,"},{"lineNumber":7,"author":{"gitId":"-"},"content":"  FeedbackQuestionType,"},{"lineNumber":8,"author":{"gitId":"-"},"content":"  FeedbackTextQuestionDetails,"},{"lineNumber":9,"author":{"gitId":"-"},"content":"  FeedbackVisibilityType,"},{"lineNumber":10,"author":{"gitId":"-"},"content":"  NumberOfEntitiesToGiveFeedbackToSetting,"},{"lineNumber":11,"author":{"gitId":"-"},"content":"} from \u0027../../../types/api-output\u0027;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import { VisibilityControl } from \u0027../../../types/visibility-control\u0027;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import { QuestionEditFormModel } from \u0027../question-edit-form/question-edit-form-model\u0027;"},{"lineNumber":14,"author":{"gitId":"-"},"content":""},{"lineNumber":15,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":16,"author":{"gitId":"-"},"content":" * Displaying the visibility panel."},{"lineNumber":17,"author":{"gitId":"-"},"content":" */"},{"lineNumber":18,"author":{"gitId":"-"},"content":"@Component({"},{"lineNumber":19,"author":{"gitId":"-"},"content":"  selector: \u0027tm-visibility-panel\u0027,"},{"lineNumber":20,"author":{"gitId":"-"},"content":"  templateUrl: \u0027./visibility-panel.component.html\u0027,"},{"lineNumber":21,"author":{"gitId":"-"},"content":"  styleUrls: [\u0027./visibility-panel.component.scss\u0027],"},{"lineNumber":22,"author":{"gitId":"-"},"content":"})"},{"lineNumber":23,"author":{"gitId":"-"},"content":"export class VisibilityPanelComponent {"},{"lineNumber":24,"author":{"gitId":"-"},"content":""},{"lineNumber":25,"author":{"gitId":"-"},"content":"  // enum"},{"lineNumber":26,"author":{"gitId":"-"},"content":"  FeedbackParticipantType: typeof FeedbackParticipantType \u003d FeedbackParticipantType;"},{"lineNumber":27,"author":{"gitId":"-"},"content":"  FeedbackQuestionType: typeof FeedbackQuestionType \u003d FeedbackQuestionType;"},{"lineNumber":28,"author":{"gitId":"-"},"content":"  NumberOfEntitiesToGiveFeedbackToSetting: typeof NumberOfEntitiesToGiveFeedbackToSetting \u003d"},{"lineNumber":29,"author":{"gitId":"-"},"content":"        NumberOfEntitiesToGiveFeedbackToSetting;"},{"lineNumber":30,"author":{"gitId":"-"},"content":"  VisibilityControl: typeof VisibilityControl \u003d VisibilityControl;"},{"lineNumber":31,"author":{"gitId":"-"},"content":"  FeedbackVisibilityType: typeof FeedbackVisibilityType \u003d FeedbackVisibilityType;"},{"lineNumber":32,"author":{"gitId":"-"},"content":""},{"lineNumber":33,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":34,"author":{"gitId":"-"},"content":"  model: QuestionEditFormModel \u003d {"},{"lineNumber":35,"author":{"gitId":"-"},"content":"    feedbackQuestionId: \u0027\u0027,"},{"lineNumber":36,"author":{"gitId":"-"},"content":""},{"lineNumber":37,"author":{"gitId":"-"},"content":"    questionNumber: 0,"},{"lineNumber":38,"author":{"gitId":"-"},"content":"    questionBrief: \u0027\u0027,"},{"lineNumber":39,"author":{"gitId":"-"},"content":"    questionDescription: \u0027\u0027,"},{"lineNumber":40,"author":{"gitId":"-"},"content":""},{"lineNumber":41,"author":{"gitId":"-"},"content":"    isQuestionHasResponses: false,"},{"lineNumber":42,"author":{"gitId":"-"},"content":""},{"lineNumber":43,"author":{"gitId":"-"},"content":"    questionType: FeedbackQuestionType.TEXT,"},{"lineNumber":44,"author":{"gitId":"-"},"content":"    questionDetails: {"},{"lineNumber":45,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.TEXT,"},{"lineNumber":46,"author":{"gitId":"-"},"content":"      questionText: \u0027\u0027,"},{"lineNumber":47,"author":{"gitId":"-"},"content":"    } as FeedbackTextQuestionDetails,"},{"lineNumber":48,"author":{"gitId":"-"},"content":""},{"lineNumber":49,"author":{"gitId":"-"},"content":"    giverType: FeedbackParticipantType.STUDENTS,"},{"lineNumber":50,"author":{"gitId":"-"},"content":"    recipientType: FeedbackParticipantType.STUDENTS_EXCLUDING_SELF,"},{"lineNumber":51,"author":{"gitId":"-"},"content":""},{"lineNumber":52,"author":{"gitId":"-"},"content":"    numberOfEntitiesToGiveFeedbackToSetting: NumberOfEntitiesToGiveFeedbackToSetting.CUSTOM,"},{"lineNumber":53,"author":{"gitId":"-"},"content":"    customNumberOfEntitiesToGiveFeedbackTo: 1,"},{"lineNumber":54,"author":{"gitId":"-"},"content":""},{"lineNumber":55,"author":{"gitId":"-"},"content":"    showResponsesTo: [],"},{"lineNumber":56,"author":{"gitId":"-"},"content":"    showGiverNameTo: [],"},{"lineNumber":57,"author":{"gitId":"-"},"content":"    showRecipientNameTo: [],"},{"lineNumber":58,"author":{"gitId":"-"},"content":""},{"lineNumber":59,"author":{"gitId":"-"},"content":"    commonVisibilitySettingName: \u0027Please select a visibility option\u0027,"},{"lineNumber":60,"author":{"gitId":"-"},"content":""},{"lineNumber":61,"author":{"gitId":"-"},"content":"    isUsingOtherFeedbackPath: false,"},{"lineNumber":62,"author":{"gitId":"-"},"content":"    isUsingOtherVisibilitySetting: false,"},{"lineNumber":63,"author":{"gitId":"-"},"content":"    isDeleting: false,"},{"lineNumber":64,"author":{"gitId":"-"},"content":"    isDuplicating: false,"},{"lineNumber":65,"author":{"gitId":"-"},"content":"    isEditable: false,"},{"lineNumber":66,"author":{"gitId":"-"},"content":"    isSaving: false,"},{"lineNumber":67,"author":{"gitId":"-"},"content":"    isCollapsed: false,"},{"lineNumber":68,"author":{"gitId":"-"},"content":"    isVisibilityChanged: false,"},{"lineNumber":69,"author":{"gitId":"-"},"content":"    isFeedbackPathChanged: false,"},{"lineNumber":70,"author":{"gitId":"-"},"content":"    isQuestionDetailsChanged: false,"},{"lineNumber":71,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":72,"author":{"gitId":"-"},"content":""},{"lineNumber":73,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":74,"author":{"gitId":"-"},"content":"  isCustomFeedbackVisibilitySettingAllowed: boolean \u003d false;"},{"lineNumber":75,"author":{"gitId":"-"},"content":""},{"lineNumber":76,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":77,"author":{"gitId":"-"},"content":"  commonFeedbackVisibilitySettings: CommonVisibilitySetting[] \u003d [];"},{"lineNumber":78,"author":{"gitId":"-"},"content":""},{"lineNumber":79,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":80,"author":{"gitId":"-"},"content":"  visibilityStateMachine: VisibilityStateMachine \u003d"},{"lineNumber":81,"author":{"gitId":"-"},"content":"    new VisibilityStateMachine(this.model.giverType, this.model.recipientType);"},{"lineNumber":82,"author":{"gitId":"-"},"content":""},{"lineNumber":83,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":84,"author":{"gitId":"-"},"content":"  customVisibilitySetting: EventEmitter\u003cboolean\u003e \u003d new EventEmitter\u003cboolean\u003e();"},{"lineNumber":85,"author":{"gitId":"-"},"content":""},{"lineNumber":86,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":87,"author":{"gitId":"-"},"content":"  triggerModelChangeBatch: EventEmitter\u003cPartial\u003cQuestionEditFormModel\u003e\u003e \u003d"},{"lineNumber":88,"author":{"gitId":"-"},"content":"    new EventEmitter\u003cPartial\u003cQuestionEditFormModel\u003e\u003e();"},{"lineNumber":89,"author":{"gitId":"-"},"content":""},{"lineNumber":90,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":91,"author":{"gitId":"-"},"content":"  visibilityStateMachineChange: EventEmitter\u003cVisibilityStateMachine\u003e \u003d new EventEmitter\u003cVisibilityStateMachine\u003e();"},{"lineNumber":92,"author":{"gitId":"-"},"content":""},{"lineNumber":93,"author":{"gitId":"weiquu"},"content":"  visibilityTypeAriaLabels: Map\u003cFeedbackVisibilityType, string\u003e \u003d new Map(["},{"lineNumber":94,"author":{"gitId":"weiquu"},"content":"    [FeedbackVisibilityType.RECIPIENT, \u0027Recipient(s)\u0027],"},{"lineNumber":95,"author":{"gitId":"weiquu"},"content":"    [FeedbackVisibilityType.GIVER_TEAM_MEMBERS, \u0027Giver\\\u0027s Team Members\u0027],"},{"lineNumber":96,"author":{"gitId":"weiquu"},"content":"    [FeedbackVisibilityType.RECIPIENT_TEAM_MEMBERS, \u0027Recipient\\\u0027s Team Members\u0027],"},{"lineNumber":97,"author":{"gitId":"weiquu"},"content":"    [FeedbackVisibilityType.STUDENTS, \u0027Other Students\u0027],"},{"lineNumber":98,"author":{"gitId":"weiquu"},"content":"    [FeedbackVisibilityType.INSTRUCTORS, \u0027Instructors\u0027],"},{"lineNumber":99,"author":{"gitId":"weiquu"},"content":"  ]);"},{"lineNumber":100,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":101,"author":{"gitId":"weiquu"},"content":"  visibilityControlAriaLabels: Map\u003cVisibilityControl, string\u003e \u003d new Map(["},{"lineNumber":102,"author":{"gitId":"weiquu"},"content":"    [VisibilityControl.SHOW_RESPONSE, \u0027Answer\u0027],"},{"lineNumber":103,"author":{"gitId":"weiquu"},"content":"    [VisibilityControl.SHOW_GIVER_NAME, \u0027Giver\\\u0027s Name\u0027],"},{"lineNumber":104,"author":{"gitId":"weiquu"},"content":"    [VisibilityControl.SHOW_RECIPIENT_NAME, \u0027Recipient\\\u0027s Name\u0027],"},{"lineNumber":105,"author":{"gitId":"weiquu"},"content":"  ]);"},{"lineNumber":106,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":107,"author":{"gitId":"-"},"content":"  triggerCustomVisibilitySetting(): void {"},{"lineNumber":108,"author":{"gitId":"-"},"content":"    this.customVisibilitySetting.emit(true);"},{"lineNumber":109,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":110,"author":{"gitId":"-"},"content":""},{"lineNumber":111,"author":{"gitId":"weiquu"},"content":"  getCheckboxAriaLabel(visibilityType: FeedbackVisibilityType, visibilityControl: VisibilityControl): string {"},{"lineNumber":112,"author":{"gitId":"weiquu"},"content":"    const group: string \u003d this.visibilityTypeAriaLabels.get(visibilityType) || \u0027\u0027;"},{"lineNumber":113,"author":{"gitId":"weiquu"},"content":"    const groupVisibility: string \u003d this.visibilityControlAriaLabels.get(visibilityControl) || \u0027\u0027;"},{"lineNumber":114,"author":{"gitId":"weiquu"},"content":"    return `${group} can see ${groupVisibility}`;"},{"lineNumber":115,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":116,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":117,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":118,"author":{"gitId":"-"},"content":"   * Applies the common visibility setting."},{"lineNumber":119,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":120,"author":{"gitId":"-"},"content":"  applyCommonVisibilitySettings(commonSettings: CommonVisibilitySetting): void {"},{"lineNumber":121,"author":{"gitId":"-"},"content":"    this.triggerModelChangeBatch.emit({"},{"lineNumber":122,"author":{"gitId":"-"},"content":"      showResponsesTo: commonSettings.visibilitySettings.SHOW_RESPONSE,"},{"lineNumber":123,"author":{"gitId":"-"},"content":"      showGiverNameTo: commonSettings.visibilitySettings.SHOW_GIVER_NAME,"},{"lineNumber":124,"author":{"gitId":"-"},"content":"      showRecipientNameTo: commonSettings.visibilitySettings.SHOW_RECIPIENT_NAME,"},{"lineNumber":125,"author":{"gitId":"-"},"content":"      commonVisibilitySettingName: commonSettings.name,"},{"lineNumber":126,"author":{"gitId":"-"},"content":"      isUsingOtherVisibilitySetting: false,"},{"lineNumber":127,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":128,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":129,"author":{"gitId":"-"},"content":""},{"lineNumber":130,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":131,"author":{"gitId":"-"},"content":"   * Modifies visibility control of visibility type based on {@code isAllowed}."},{"lineNumber":132,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":133,"author":{"gitId":"-"},"content":"  modifyVisibilityControl("},{"lineNumber":134,"author":{"gitId":"-"},"content":"      isAllowed: boolean, visibilityType: FeedbackVisibilityType, visibilityControl: VisibilityControl): void {"},{"lineNumber":135,"author":{"gitId":"-"},"content":"    if (isAllowed) {"},{"lineNumber":136,"author":{"gitId":"-"},"content":"      this.visibilityStateMachine.allowToSee(visibilityType, visibilityControl);"},{"lineNumber":137,"author":{"gitId":"-"},"content":"      this.visibilityStateMachineChange.emit(this.visibilityStateMachine);"},{"lineNumber":138,"author":{"gitId":"-"},"content":"    } else {"},{"lineNumber":139,"author":{"gitId":"-"},"content":"      this.visibilityStateMachine.disallowToSee(visibilityType, visibilityControl);"},{"lineNumber":140,"author":{"gitId":"-"},"content":"      this.visibilityStateMachineChange.emit(this.visibilityStateMachine);"},{"lineNumber":141,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":142,"author":{"gitId":"-"},"content":"    this.triggerModelChangeBatch.emit({"},{"lineNumber":143,"author":{"gitId":"-"},"content":"      showResponsesTo:"},{"lineNumber":144,"author":{"gitId":"-"},"content":"          this.visibilityStateMachine.getVisibilityTypesUnderVisibilityControl(VisibilityControl.SHOW_RESPONSE),"},{"lineNumber":145,"author":{"gitId":"-"},"content":"      showGiverNameTo:"},{"lineNumber":146,"author":{"gitId":"-"},"content":"          this.visibilityStateMachine.getVisibilityTypesUnderVisibilityControl(VisibilityControl.SHOW_GIVER_NAME),"},{"lineNumber":147,"author":{"gitId":"-"},"content":"      showRecipientNameTo:"},{"lineNumber":148,"author":{"gitId":"-"},"content":"          this.visibilityStateMachine.getVisibilityTypesUnderVisibilityControl(VisibilityControl.SHOW_RECIPIENT_NAME),"},{"lineNumber":149,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":150,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":151,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"weiquu":20,"-":131}},{"path":"src/web/app/page.component.scss","fileType":"scss","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"footer,"},{"lineNumber":2,"author":{"gitId":"-"},"content":"nav {"},{"lineNumber":3,"author":{"gitId":"-"},"content":"  background: #3C3C3C;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"}"},{"lineNumber":5,"author":{"gitId":"-"},"content":""},{"lineNumber":6,"author":{"gitId":"-"},"content":"nav {"},{"lineNumber":7,"author":{"gitId":"-"},"content":"  height: 50px;"},{"lineNumber":8,"author":{"gitId":"-"},"content":""},{"lineNumber":9,"author":{"gitId":"-"},"content":"  img {"},{"lineNumber":10,"author":{"gitId":"-"},"content":"    height: 50px;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"    margin-left: 20px;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":13,"author":{"gitId":"-"},"content":"}"},{"lineNumber":14,"author":{"gitId":"-"},"content":""},{"lineNumber":15,"author":{"gitId":"-"},"content":".main-content {"},{"lineNumber":16,"author":{"gitId":"-"},"content":"  margin-top: 50px;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"  min-height: calc(100vh - 102px);"},{"lineNumber":18,"author":{"gitId":"-"},"content":"  padding: 20px 70px;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"}"},{"lineNumber":20,"author":{"gitId":"-"},"content":""},{"lineNumber":21,"author":{"gitId":"-"},"content":"@media (max-width: 575px) {"},{"lineNumber":22,"author":{"gitId":"-"},"content":"  .main-content {"},{"lineNumber":23,"author":{"gitId":"-"},"content":"    min-height: calc(100vh - 144px);"},{"lineNumber":24,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":25,"author":{"gitId":"-"},"content":"}"},{"lineNumber":26,"author":{"gitId":"-"},"content":""},{"lineNumber":27,"author":{"gitId":"-"},"content":"@media (min-width: 576px) and (max-width: 589px) {"},{"lineNumber":28,"author":{"gitId":"-"},"content":"  .main-content {"},{"lineNumber":29,"author":{"gitId":"-"},"content":"    min-height: calc(100vh - 123px);"},{"lineNumber":30,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":31,"author":{"gitId":"-"},"content":"}"},{"lineNumber":32,"author":{"gitId":"-"},"content":""},{"lineNumber":33,"author":{"gitId":"-"},"content":".footer {"},{"lineNumber":34,"author":{"gitId":"-"},"content":"  padding: 5px 70px;"},{"lineNumber":35,"author":{"gitId":"-"},"content":"  color: rgba(255, 255, 255, .75);"},{"lineNumber":36,"author":{"gitId":"-"},"content":""},{"lineNumber":37,"author":{"gitId":"-"},"content":"  a {"},{"lineNumber":38,"author":{"gitId":"-"},"content":"    \u0026:hover {"},{"lineNumber":39,"author":{"gitId":"-"},"content":"      filter: brightness(150%);"},{"lineNumber":40,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":41,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":42,"author":{"gitId":"-"},"content":"}"},{"lineNumber":43,"author":{"gitId":"-"},"content":""},{"lineNumber":44,"author":{"gitId":"-"},"content":".container {"},{"lineNumber":45,"author":{"gitId":"-"},"content":"  max-width: 1350px;"},{"lineNumber":46,"author":{"gitId":"-"},"content":"}"},{"lineNumber":47,"author":{"gitId":"-"},"content":""},{"lineNumber":48,"author":{"gitId":"-"},"content":".dropdown-item {"},{"lineNumber":49,"author":{"gitId":"-"},"content":"  color: rgba(255, 255, 255, .75);"},{"lineNumber":50,"author":{"gitId":"-"},"content":""},{"lineNumber":51,"author":{"gitId":"-"},"content":"  \u0026:hover,"},{"lineNumber":52,"author":{"gitId":"-"},"content":"  \u0026:focus {"},{"lineNumber":53,"author":{"gitId":"-"},"content":"    background-color: inherit;"},{"lineNumber":54,"author":{"gitId":"-"},"content":"    color: white;"},{"lineNumber":55,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":56,"author":{"gitId":"-"},"content":"}"},{"lineNumber":57,"author":{"gitId":"-"},"content":""},{"lineNumber":58,"author":{"gitId":"-"},"content":".navbar-nav li {"},{"lineNumber":59,"author":{"gitId":"-"},"content":"  margin: auto 0;"},{"lineNumber":60,"author":{"gitId":"-"},"content":"  margin-left: 10px;"},{"lineNumber":61,"author":{"gitId":"-"},"content":"}"},{"lineNumber":62,"author":{"gitId":"-"},"content":""},{"lineNumber":63,"author":{"gitId":"-"},"content":".navbar {"},{"lineNumber":64,"author":{"gitId":"-"},"content":"  padding: 0 80px;"},{"lineNumber":65,"author":{"gitId":"-"},"content":"  z-index: 1000;"},{"lineNumber":66,"author":{"gitId":"-"},"content":"}"},{"lineNumber":67,"author":{"gitId":"-"},"content":""},{"lineNumber":68,"author":{"gitId":"-"},"content":".nav-link {"},{"lineNumber":69,"author":{"gitId":"-"},"content":"  cursor: pointer;"},{"lineNumber":70,"author":{"gitId":"-"},"content":"}"},{"lineNumber":71,"author":{"gitId":"-"},"content":""},{"lineNumber":72,"author":{"gitId":"-"},"content":".pull-right {"},{"lineNumber":73,"author":{"gitId":"-"},"content":"  margin-right: 20px;"},{"lineNumber":74,"author":{"gitId":"-"},"content":"}"},{"lineNumber":75,"author":{"gitId":"-"},"content":""},{"lineNumber":76,"author":{"gitId":"-"},"content":"@media (max-width: 1024px) {"},{"lineNumber":77,"author":{"gitId":"-"},"content":"  .navbar {"},{"lineNumber":78,"author":{"gitId":"-"},"content":"    padding: 0 30px;"},{"lineNumber":79,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":80,"author":{"gitId":"-"},"content":""},{"lineNumber":81,"author":{"gitId":"-"},"content":"  .main-content {"},{"lineNumber":82,"author":{"gitId":"-"},"content":"    padding: 20px 50px;"},{"lineNumber":83,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":84,"author":{"gitId":"-"},"content":""},{"lineNumber":85,"author":{"gitId":"-"},"content":"  .footer {"},{"lineNumber":86,"author":{"gitId":"-"},"content":"    padding: 5px 30px;"},{"lineNumber":87,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":88,"author":{"gitId":"-"},"content":"}"},{"lineNumber":89,"author":{"gitId":"-"},"content":""},{"lineNumber":90,"author":{"gitId":"-"},"content":"@media (max-width: 991px) {"},{"lineNumber":91,"author":{"gitId":"-"},"content":"  .navbar-nav li {"},{"lineNumber":92,"author":{"gitId":"-"},"content":"    margin: auto 20px;"},{"lineNumber":93,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":94,"author":{"gitId":"-"},"content":""},{"lineNumber":95,"author":{"gitId":"-"},"content":"  .pull-right {"},{"lineNumber":96,"author":{"gitId":"-"},"content":"    margin-right: 0;"},{"lineNumber":97,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":98,"author":{"gitId":"-"},"content":"}"},{"lineNumber":99,"author":{"gitId":"-"},"content":""},{"lineNumber":100,"author":{"gitId":"-"},"content":"@media (max-width: 768px) {"},{"lineNumber":101,"author":{"gitId":"-"},"content":"  .navbar {"},{"lineNumber":102,"author":{"gitId":"-"},"content":"    padding: 0 0;"},{"lineNumber":103,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":104,"author":{"gitId":"-"},"content":""},{"lineNumber":105,"author":{"gitId":"-"},"content":"  .main-content {"},{"lineNumber":106,"author":{"gitId":"weiquu"},"content":"    padding: 10px 15px;"},{"lineNumber":107,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":108,"author":{"gitId":"-"},"content":""},{"lineNumber":109,"author":{"gitId":"-"},"content":"  .footer {"},{"lineNumber":110,"author":{"gitId":"weiquu"},"content":"    padding: 5px 15px;"},{"lineNumber":111,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":112,"author":{"gitId":"-"},"content":"}"},{"lineNumber":113,"author":{"gitId":"-"},"content":""},{"lineNumber":114,"author":{"gitId":"-"},"content":".navbar-toggler {"},{"lineNumber":115,"author":{"gitId":"-"},"content":"  margin-right: 20px;"},{"lineNumber":116,"author":{"gitId":"-"},"content":""},{"lineNumber":117,"author":{"gitId":"-"},"content":"  \u0026:focus {"},{"lineNumber":118,"author":{"gitId":"-"},"content":"    outline: none;"},{"lineNumber":119,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":120,"author":{"gitId":"-"},"content":"}"},{"lineNumber":121,"author":{"gitId":"-"},"content":""},{"lineNumber":122,"author":{"gitId":"-"},"content":".navbar-collapse,"},{"lineNumber":123,"author":{"gitId":"-"},"content":".dropdown-menu {"},{"lineNumber":124,"author":{"gitId":"-"},"content":"  background: #3C3C3C;"},{"lineNumber":125,"author":{"gitId":"jasonqiu212"},"content":"  min-width: 0;"},{"lineNumber":126,"author":{"gitId":"-"},"content":"}"},{"lineNumber":127,"author":{"gitId":"-"},"content":""},{"lineNumber":128,"author":{"gitId":"-"},"content":".dropdown-divider {"},{"lineNumber":129,"author":{"gitId":"-"},"content":"  border: 1px solid rgba(255, 255, 255, .5);"},{"lineNumber":130,"author":{"gitId":"-"},"content":"  margin: .5rem 15px;"},{"lineNumber":131,"author":{"gitId":"-"},"content":"}"},{"lineNumber":132,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":133,"author":{"gitId":"weiquu"},"content":".dropdown-menu-right {"},{"lineNumber":134,"author":{"gitId":"weiquu"},"content":"  margin-bottom: .5rem;"},{"lineNumber":135,"author":{"gitId":"weiquu"},"content":"}"},{"lineNumber":136,"author":{"gitId":"-"},"content":""},{"lineNumber":137,"author":{"gitId":"-"},"content":"button.bg-transparent.btn.btn-link.nav-link:active {"},{"lineNumber":138,"author":{"gitId":"-"},"content":"  color: white !important;"},{"lineNumber":139,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"jasonqiu212":1,"weiquu":6,"-":132}},{"path":"src/web/app/pages-admin/admin-notifications-page/notifications-table/notifications-table.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"row\"\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"col-12 table-responsive\"\u003e"},{"lineNumber":3,"author":{"gitId":"-"},"content":"    \u003ctable id\u003d\"notifications-table\" class\u003d\"table table-responsive-lg table-striped table-bordered margin-bottom-0\"\u003e"},{"lineNumber":4,"author":{"gitId":"-"},"content":"      \u003cthead\u003e"},{"lineNumber":5,"author":{"gitId":"-"},"content":"      \u003ctr [ngClass]\u003d\"{ \u0027bg-primary text-white\u0027: headerColorScheme \u003d\u003d\u003d NotificationsTableHeaderColorScheme.BLUE }\"\u003e"},{"lineNumber":6,"author":{"gitId":"weiquu"},"content":"        \u003cth class\u003d\"sortable-header\" (click)\u003d\"sortNotificationsTableRowModels(SortBy.NOTIFICATION_TITLE)\" [attr.aria-sort]\u003d\"getAriaSort(SortBy.NOTIFICATION_TITLE)\"\u003e"},{"lineNumber":7,"author":{"gitId":"weiquu"},"content":"          \u003cbutton\u003e"},{"lineNumber":8,"author":{"gitId":"-"},"content":"            Title"},{"lineNumber":9,"author":{"gitId":"weiquu"},"content":"            \u003cspan class\u003d\"fa-stack\" aria-hidden\u003d\"true\"\u003e"},{"lineNumber":10,"author":{"gitId":"-"},"content":"              \u003ci class\u003d\"fas fa-sort\"\u003e\u003c/i\u003e"},{"lineNumber":11,"author":{"gitId":"-"},"content":"              \u003ci class\u003d\"fas fa-sort-down\" *ngIf\u003d\"notificationsTableRowModelsSortBy \u003d\u003d\u003d SortBy.NOTIFICATION_TITLE \u0026\u0026 notificationsTableRowModelsSortOrder \u003d\u003d\u003d SortOrder.DESC\"\u003e\u003c/i\u003e"},{"lineNumber":12,"author":{"gitId":"-"},"content":"              \u003ci class\u003d\"fas fa-sort-up\" *ngIf\u003d\"notificationsTableRowModelsSortBy \u003d\u003d\u003d SortBy.NOTIFICATION_TITLE \u0026\u0026 notificationsTableRowModelsSortOrder \u003d\u003d\u003d SortOrder.ASC\"\u003e\u003c/i\u003e"},{"lineNumber":13,"author":{"gitId":"-"},"content":"            \u003c/span\u003e"},{"lineNumber":14,"author":{"gitId":"weiquu"},"content":"          \u003c/button\u003e"},{"lineNumber":15,"author":{"gitId":"-"},"content":"        \u003c/th\u003e"},{"lineNumber":16,"author":{"gitId":"weiquu"},"content":"        \u003cth class\u003d\"sortable-header\" (click)\u003d\"sortNotificationsTableRowModels(SortBy.NOTIFICATION_START_TIME)\" [attr.aria-sort]\u003d\"getAriaSort(SortBy.NOTIFICATION_START_TIME)\"\u003e"},{"lineNumber":17,"author":{"gitId":"weiquu"},"content":"          \u003cbutton\u003e"},{"lineNumber":18,"author":{"gitId":"-"},"content":"            Start Time"},{"lineNumber":19,"author":{"gitId":"weiquu"},"content":"            \u003cspan class\u003d\"fa-stack\" aria-hidden\u003d\"true\"\u003e"},{"lineNumber":20,"author":{"gitId":"-"},"content":"              \u003ci class\u003d\"fas fa-sort\"\u003e\u003c/i\u003e"},{"lineNumber":21,"author":{"gitId":"-"},"content":"              \u003ci class\u003d\"fas fa-sort-down\" *ngIf\u003d\"notificationsTableRowModelsSortBy \u003d\u003d\u003d SortBy.NOTIFICATION_START_TIME \u0026\u0026 notificationsTableRowModelsSortOrder \u003d\u003d\u003d SortOrder.DESC\"\u003e\u003c/i\u003e"},{"lineNumber":22,"author":{"gitId":"-"},"content":"              \u003ci class\u003d\"fas fa-sort-up\" *ngIf\u003d\"notificationsTableRowModelsSortBy \u003d\u003d\u003d SortBy.NOTIFICATION_START_TIME \u0026\u0026 notificationsTableRowModelsSortOrder \u003d\u003d\u003d SortOrder.ASC\"\u003e\u003c/i\u003e"},{"lineNumber":23,"author":{"gitId":"-"},"content":"            \u003c/span\u003e"},{"lineNumber":24,"author":{"gitId":"weiquu"},"content":"          \u003c/button\u003e"},{"lineNumber":25,"author":{"gitId":"-"},"content":"        \u003c/th\u003e"},{"lineNumber":26,"author":{"gitId":"weiquu"},"content":"        \u003cth class\u003d\"sortable-header\" (click)\u003d\"sortNotificationsTableRowModels(SortBy.NOTIFICATION_END_TIME)\" [attr.aria-sort]\u003d\"getAriaSort(SortBy.NOTIFICATION_END_TIME)\"\u003e"},{"lineNumber":27,"author":{"gitId":"weiquu"},"content":"          \u003cbutton\u003e"},{"lineNumber":28,"author":{"gitId":"-"},"content":"            End Time"},{"lineNumber":29,"author":{"gitId":"weiquu"},"content":"            \u003cspan class\u003d\"fa-stack\" aria-hidden\u003d\"true\"\u003e"},{"lineNumber":30,"author":{"gitId":"-"},"content":"              \u003ci class\u003d\"fas fa-sort\"\u003e\u003c/i\u003e"},{"lineNumber":31,"author":{"gitId":"-"},"content":"              \u003ci class\u003d\"fas fa-sort-down\" *ngIf\u003d\"notificationsTableRowModelsSortBy \u003d\u003d\u003d SortBy.NOTIFICATION_END_TIME \u0026\u0026 notificationsTableRowModelsSortOrder \u003d\u003d\u003d SortOrder.DESC\"\u003e\u003c/i\u003e"},{"lineNumber":32,"author":{"gitId":"-"},"content":"              \u003ci class\u003d\"fas fa-sort-up\" *ngIf\u003d\"notificationsTableRowModelsSortBy \u003d\u003d\u003d SortBy.NOTIFICATION_END_TIME \u0026\u0026 notificationsTableRowModelsSortOrder \u003d\u003d\u003d SortOrder.ASC\"\u003e\u003c/i\u003e"},{"lineNumber":33,"author":{"gitId":"-"},"content":"            \u003c/span\u003e"},{"lineNumber":34,"author":{"gitId":"weiquu"},"content":"          \u003c/button\u003e"},{"lineNumber":35,"author":{"gitId":"-"},"content":"        \u003c/th\u003e"},{"lineNumber":36,"author":{"gitId":"weiquu"},"content":"        \u003cth class\u003d\"sortable-header\" (click)\u003d\"sortNotificationsTableRowModels(SortBy.NOTIFICATION_TARGET_USER)\" [attr.aria-sort]\u003d\"getAriaSort(SortBy.NOTIFICATION_TARGET_USER)\"\u003e"},{"lineNumber":37,"author":{"gitId":"weiquu"},"content":"          \u003cbutton\u003e"},{"lineNumber":38,"author":{"gitId":"-"},"content":"            Target User"},{"lineNumber":39,"author":{"gitId":"weiquu"},"content":"            \u003cspan class\u003d\"fa-stack\" aria-hidden\u003d\"true\"\u003e"},{"lineNumber":40,"author":{"gitId":"-"},"content":"              \u003ci class\u003d\"fas fa-sort\"\u003e\u003c/i\u003e"},{"lineNumber":41,"author":{"gitId":"-"},"content":"              \u003ci class\u003d\"fas fa-sort-down\" *ngIf\u003d\"notificationsTableRowModelsSortBy \u003d\u003d\u003d SortBy.NOTIFICATION_TARGET_USER \u0026\u0026 notificationsTableRowModelsSortOrder \u003d\u003d\u003d SortOrder.DESC\"\u003e\u003c/i\u003e"},{"lineNumber":42,"author":{"gitId":"-"},"content":"              \u003ci class\u003d\"fas fa-sort-up\" *ngIf\u003d\"notificationsTableRowModelsSortBy \u003d\u003d\u003d SortBy.NOTIFICATION_TARGET_USER \u0026\u0026 notificationsTableRowModelsSortOrder \u003d\u003d\u003d SortOrder.ASC\"\u003e\u003c/i\u003e"},{"lineNumber":43,"author":{"gitId":"-"},"content":"            \u003c/span\u003e"},{"lineNumber":44,"author":{"gitId":"weiquu"},"content":"          \u003c/button\u003e"},{"lineNumber":45,"author":{"gitId":"-"},"content":"        \u003c/th\u003e"},{"lineNumber":46,"author":{"gitId":"weiquu"},"content":"        \u003cth class\u003d\"sortable-header\" (click)\u003d\"sortNotificationsTableRowModels(SortBy.NOTIFICATION_STYLE)\" [attr.aria-sort]\u003d\"getAriaSort(SortBy.NOTIFICATION_STYLE)\"\u003e"},{"lineNumber":47,"author":{"gitId":"weiquu"},"content":"          \u003cbutton\u003e"},{"lineNumber":48,"author":{"gitId":"-"},"content":"            Style"},{"lineNumber":49,"author":{"gitId":"weiquu"},"content":"            \u003cspan class\u003d\"fa-stack\" aria-hidden\u003d\"true\"\u003e"},{"lineNumber":50,"author":{"gitId":"-"},"content":"              \u003ci class\u003d\"fas fa-sort\"\u003e\u003c/i\u003e"},{"lineNumber":51,"author":{"gitId":"-"},"content":"              \u003ci class\u003d\"fas fa-sort-down\" *ngIf\u003d\"notificationsTableRowModelsSortBy \u003d\u003d\u003d SortBy.NOTIFICATION_STYLE \u0026\u0026 notificationsTableRowModelsSortOrder \u003d\u003d\u003d SortOrder.DESC\"\u003e\u003c/i\u003e"},{"lineNumber":52,"author":{"gitId":"-"},"content":"              \u003ci class\u003d\"fas fa-sort-up\" *ngIf\u003d\"notificationsTableRowModelsSortBy \u003d\u003d\u003d SortBy.NOTIFICATION_STYLE \u0026\u0026 notificationsTableRowModelsSortOrder \u003d\u003d\u003d SortOrder.ASC\"\u003e\u003c/i\u003e"},{"lineNumber":53,"author":{"gitId":"-"},"content":"            \u003c/span\u003e"},{"lineNumber":54,"author":{"gitId":"weiquu"},"content":"          \u003c/button\u003e"},{"lineNumber":55,"author":{"gitId":"-"},"content":"        \u003c/th\u003e"},{"lineNumber":56,"author":{"gitId":"weiquu"},"content":"        \u003cth class\u003d\"sortable-header\" (click)\u003d\"sortNotificationsTableRowModels(SortBy.NOTIFICATION_CREATE_TIME)\" [attr.aria-sort]\u003d\"getAriaSort(SortBy.NOTIFICATION_CREATE_TIME)\"\u003e"},{"lineNumber":57,"author":{"gitId":"weiquu"},"content":"          \u003cbutton\u003e"},{"lineNumber":58,"author":{"gitId":"-"},"content":"            Creation Time"},{"lineNumber":59,"author":{"gitId":"weiquu"},"content":"            \u003cspan class\u003d\"fa-stack\" aria-hidden\u003d\"true\"\u003e"},{"lineNumber":60,"author":{"gitId":"-"},"content":"              \u003ci class\u003d\"fas fa-sort\"\u003e\u003c/i\u003e"},{"lineNumber":61,"author":{"gitId":"-"},"content":"              \u003ci class\u003d\"fas fa-sort-down\" *ngIf\u003d\"notificationsTableRowModelsSortBy \u003d\u003d\u003d SortBy.NOTIFICATION_CREATE_TIME \u0026\u0026 notificationsTableRowModelsSortOrder \u003d\u003d\u003d SortOrder.DESC\"\u003e\u003c/i\u003e"},{"lineNumber":62,"author":{"gitId":"-"},"content":"              \u003ci class\u003d\"fas fa-sort-up\" *ngIf\u003d\"notificationsTableRowModelsSortBy \u003d\u003d\u003d SortBy.NOTIFICATION_CREATE_TIME \u0026\u0026 notificationsTableRowModelsSortOrder \u003d\u003d\u003d SortOrder.ASC\"\u003e\u003c/i\u003e"},{"lineNumber":63,"author":{"gitId":"-"},"content":"            \u003c/span\u003e"},{"lineNumber":64,"author":{"gitId":"weiquu"},"content":"          \u003c/button\u003e"},{"lineNumber":65,"author":{"gitId":"-"},"content":"        \u003c/th\u003e"},{"lineNumber":66,"author":{"gitId":"-"},"content":"        \u003cth\u003eActions\u003c/th\u003e"},{"lineNumber":67,"author":{"gitId":"-"},"content":"      \u003c/tr\u003e"},{"lineNumber":68,"author":{"gitId":"-"},"content":"      \u003c/thead\u003e"},{"lineNumber":69,"author":{"gitId":"-"},"content":"      \u003ctbody\u003e"},{"lineNumber":70,"author":{"gitId":"-"},"content":"      \u003ctr *ngFor\u003d\"let notificationsTableRowModel of notificationsTableRowModels\" [id]\u003d\"notificationsTableRowModel.notification.notificationId\" [ngClass]\u003d\"{ \u0027table-success\u0027: notificationsTableRowModel.isHighlighted }\"\u003e"},{"lineNumber":71,"author":{"gitId":"-"},"content":"        \u003ctd class\u003d\"text-break\"\u003e{{ notificationsTableRowModel.notification.title }}\u003c/td\u003e"},{"lineNumber":72,"author":{"gitId":"-"},"content":"        \u003ctd class\u003d\"text-break\"\u003e\u003cspan class\u003d\"ngb-tooltip-class\" ngbTooltip\u003d\"{{ notificationsTableRowModel.notification.startTimestamp | formatDateDetail: guessTimezone }}\"\u003e{{ notificationsTableRowModel.notification.startTimestamp | formatDateBrief: guessTimezone }}\u003c/span\u003e\u003c/td\u003e"},{"lineNumber":73,"author":{"gitId":"-"},"content":"        \u003ctd class\u003d\"text-break\"\u003e\u003cspan class\u003d\"ngb-tooltip-class\" ngbTooltip\u003d\"{{ notificationsTableRowModel.notification.endTimestamp | formatDateDetail: guessTimezone }}\"\u003e{{ notificationsTableRowModel.notification.endTimestamp | formatDateBrief: guessTimezone }}\u003c/span\u003e\u003c/td\u003e"},{"lineNumber":74,"author":{"gitId":"-"},"content":"        \u003ctd class\u003d\"text-break\"\u003e{{ notificationsTableRowModel.notification.targetUser }}\u003c/td\u003e"},{"lineNumber":75,"author":{"gitId":"-"},"content":"        \u003ctd class\u003d\"text-break\" [ngClass]\u003d\"notificationsTableRowModel.notification.style | notificationStyleClass\"\u003e{{ notificationsTableRowModel.notification.style | notificationStyleDescription }}\u003c/td\u003e"},{"lineNumber":76,"author":{"gitId":"-"},"content":"        \u003ctd class\u003d\"text-break\"\u003e\u003cspan class\u003d\"ngb-tooltip-class\" ngbTooltip\u003d\"{{ notificationsTableRowModel.notification.createdAt | formatDateDetail: guessTimezone }}\"\u003e{{ notificationsTableRowModel.notification.createdAt | formatDateBrief: guessTimezone }}\u003c/span\u003e\u003c/td\u003e"},{"lineNumber":77,"author":{"gitId":"-"},"content":"        \u003ctd class\u003d\"actions-cell\"\u003e"},{"lineNumber":78,"author":{"gitId":"-"},"content":"          \u003cdiv class\u003d\"d-flex\"\u003e"},{"lineNumber":79,"author":{"gitId":"-"},"content":"            \u003cbutton type\u003d\"button\" class\u003d\"btn btn-light btn-sm\" (click)\u003d\"loadNotificationEditForm(notificationsTableRowModel.notification)\"\u003e"},{"lineNumber":80,"author":{"gitId":"-"},"content":"              Edit"},{"lineNumber":81,"author":{"gitId":"-"},"content":"            \u003c/button\u003e"},{"lineNumber":82,"author":{"gitId":"-"},"content":"            \u003cbutton type\u003d\"button\" class\u003d\"btn btn-danger btn-sm\" (click)\u003d\"deleteNotification(notificationsTableRowModel.notification.notificationId, notificationsTableRowModel.notification.title)\"\u003e"},{"lineNumber":83,"author":{"gitId":"-"},"content":"              Delete"},{"lineNumber":84,"author":{"gitId":"-"},"content":"            \u003c/button\u003e"},{"lineNumber":85,"author":{"gitId":"-"},"content":"          \u003c/div\u003e"},{"lineNumber":86,"author":{"gitId":"-"},"content":"        \u003c/td\u003e"},{"lineNumber":87,"author":{"gitId":"-"},"content":"      \u003c/tr\u003e"},{"lineNumber":88,"author":{"gitId":"-"},"content":"      \u003c/tbody\u003e"},{"lineNumber":89,"author":{"gitId":"-"},"content":"    \u003c/table\u003e"},{"lineNumber":90,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":91,"author":{"gitId":"-"},"content":"\u003c/div\u003e"}],"authorContributionMap":{"weiquu":24,"-":67}},{"path":"src/web/app/pages-admin/admin-notifications-page/notifications-table/notifications-table.component.scss","fileType":"scss","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":".actions-cell button:not(.dropdown-item) {"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  margin-left: var(--btn-margin);"},{"lineNumber":3,"author":{"gitId":"-"},"content":"}"},{"lineNumber":4,"author":{"gitId":"-"},"content":""},{"lineNumber":5,"author":{"gitId":"-"},"content":".sortable-header {"},{"lineNumber":6,"author":{"gitId":"-"},"content":"  cursor: pointer;"},{"lineNumber":7,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":8,"author":{"gitId":"weiquu"},"content":"  i {"},{"lineNumber":9,"author":{"gitId":"weiquu"},"content":"    margin-left: .3em;"},{"lineNumber":10,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":11,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":12,"author":{"gitId":"weiquu"},"content":"  .fa-stack {"},{"lineNumber":13,"author":{"gitId":"weiquu"},"content":"    width: 20%;"},{"lineNumber":14,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":15,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":16,"author":{"gitId":"weiquu"},"content":"  button {"},{"lineNumber":17,"author":{"gitId":"weiquu"},"content":"    background: none;"},{"lineNumber":18,"author":{"gitId":"weiquu"},"content":"    color: inherit;"},{"lineNumber":19,"author":{"gitId":"weiquu"},"content":"    border: none;"},{"lineNumber":20,"author":{"gitId":"weiquu"},"content":"    padding: 0;"},{"lineNumber":21,"author":{"gitId":"weiquu"},"content":"    text-align: left;"},{"lineNumber":22,"author":{"gitId":"weiquu"},"content":"    width: 100%;"},{"lineNumber":23,"author":{"gitId":"weiquu"},"content":"    font: inherit;"},{"lineNumber":24,"author":{"gitId":"weiquu"},"content":"    cursor: inherit;"},{"lineNumber":25,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":26,"author":{"gitId":"-"},"content":"}"},{"lineNumber":27,"author":{"gitId":"-"},"content":""},{"lineNumber":28,"author":{"gitId":"-"},"content":".clickable {"},{"lineNumber":29,"author":{"gitId":"-"},"content":"  cursor: pointer;"},{"lineNumber":30,"author":{"gitId":"-"},"content":"}"},{"lineNumber":31,"author":{"gitId":"-"},"content":""},{"lineNumber":32,"author":{"gitId":"-"},"content":".margin-bottom-0 {"},{"lineNumber":33,"author":{"gitId":"-"},"content":"  margin-bottom: 0;"},{"lineNumber":34,"author":{"gitId":"-"},"content":"}"},{"lineNumber":35,"author":{"gitId":"-"},"content":""},{"lineNumber":36,"author":{"gitId":"-"},"content":".padding-left-7px {"},{"lineNumber":37,"author":{"gitId":"-"},"content":"  padding-left: 7px;"},{"lineNumber":38,"author":{"gitId":"-"},"content":"}"},{"lineNumber":39,"author":{"gitId":"-"},"content":""},{"lineNumber":40,"author":{"gitId":"-"},"content":"#notifications-table {"},{"lineNumber":41,"author":{"gitId":"-"},"content":"  min-width: 650px;"},{"lineNumber":42,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"weiquu":19,"-":23}},{"path":"src/web/app/pages-admin/admin-notifications-page/notifications-table/notifications-table.component.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { Component, EventEmitter, Input, Output } from \u0027@angular/core\u0027;"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import { SimpleModalService } from \u0027../../../../services/simple-modal.service\u0027;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"import { Notification } from \u0027../../../../types/api-output\u0027;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import { SortBy, SortOrder } from \u0027../../../../types/sort-properties\u0027;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import { SimpleModalType } from \u0027../../../components/simple-modal/simple-modal-type\u0027;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import { NotificationsTableHeaderColorScheme, NotificationsTableRowModel } from \u0027./notifications-table-model\u0027;"},{"lineNumber":7,"author":{"gitId":"-"},"content":""},{"lineNumber":8,"author":{"gitId":"-"},"content":"@Component({"},{"lineNumber":9,"author":{"gitId":"-"},"content":"  selector: \u0027tm-notifications-table\u0027,"},{"lineNumber":10,"author":{"gitId":"-"},"content":"  templateUrl: \u0027./notifications-table.component.html\u0027,"},{"lineNumber":11,"author":{"gitId":"-"},"content":"  styleUrls: [\u0027./notifications-table.component.scss\u0027],"},{"lineNumber":12,"author":{"gitId":"-"},"content":"})"},{"lineNumber":13,"author":{"gitId":"-"},"content":"export class NotificationsTableComponent {"},{"lineNumber":14,"author":{"gitId":"-"},"content":"  SortBy \u003d SortBy;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"  SortOrder \u003d SortOrder;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"  NotificationsTableHeaderColorScheme \u003d NotificationsTableHeaderColorScheme;"},{"lineNumber":17,"author":{"gitId":"-"},"content":""},{"lineNumber":18,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":19,"author":{"gitId":"-"},"content":"  guessTimezone \u003d \u0027UTC\u0027;"},{"lineNumber":20,"author":{"gitId":"-"},"content":""},{"lineNumber":21,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":22,"author":{"gitId":"-"},"content":"  notificationsTableRowModels: NotificationsTableRowModel[] \u003d [];"},{"lineNumber":23,"author":{"gitId":"-"},"content":""},{"lineNumber":24,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":25,"author":{"gitId":"-"},"content":"  notificationsTableRowModelsSortBy \u003d SortBy.NOTIFICATION_CREATE_TIME;"},{"lineNumber":26,"author":{"gitId":"-"},"content":""},{"lineNumber":27,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":28,"author":{"gitId":"-"},"content":"  notificationsTableRowModelsSortOrder \u003d SortOrder.DESC;"},{"lineNumber":29,"author":{"gitId":"-"},"content":""},{"lineNumber":30,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":31,"author":{"gitId":"-"},"content":"  headerColorScheme \u003d NotificationsTableHeaderColorScheme.BLUE;"},{"lineNumber":32,"author":{"gitId":"-"},"content":""},{"lineNumber":33,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":34,"author":{"gitId":"-"},"content":"  sortNotificationsTableRowModelsEvent: EventEmitter\u003cSortBy\u003e \u003d new EventEmitter();"},{"lineNumber":35,"author":{"gitId":"-"},"content":""},{"lineNumber":36,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":37,"author":{"gitId":"-"},"content":"  deleteNotificationEvent: EventEmitter\u003cString\u003e \u003d new EventEmitter();"},{"lineNumber":38,"author":{"gitId":"-"},"content":""},{"lineNumber":39,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":40,"author":{"gitId":"-"},"content":"  loadNotificationEditFormEvent: EventEmitter\u003cNotification\u003e \u003d new EventEmitter();"},{"lineNumber":41,"author":{"gitId":"-"},"content":""},{"lineNumber":42,"author":{"gitId":"-"},"content":"  constructor(private simpleModalService: SimpleModalService) { }"},{"lineNumber":43,"author":{"gitId":"-"},"content":""},{"lineNumber":44,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":45,"author":{"gitId":"-"},"content":"   * Sorts the list of feedback session row."},{"lineNumber":46,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":47,"author":{"gitId":"-"},"content":"  sortNotificationsTableRowModels(by: SortBy): void {"},{"lineNumber":48,"author":{"gitId":"-"},"content":"    this.sortNotificationsTableRowModelsEvent.emit(by);"},{"lineNumber":49,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":50,"author":{"gitId":"-"},"content":""},{"lineNumber":51,"author":{"gitId":"weiquu"},"content":"  getAriaSort(by: SortBy): String {"},{"lineNumber":52,"author":{"gitId":"weiquu"},"content":"    if (by !\u003d\u003d this.notificationsTableRowModelsSortBy) {"},{"lineNumber":53,"author":{"gitId":"weiquu"},"content":"      return \u0027none\u0027;"},{"lineNumber":54,"author":{"gitId":"weiquu"},"content":"    }"},{"lineNumber":55,"author":{"gitId":"weiquu"},"content":"    return this.notificationsTableRowModelsSortOrder \u003d\u003d\u003d SortOrder.ASC ? \u0027ascending\u0027 : \u0027descending\u0027;"},{"lineNumber":56,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":57,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":58,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":59,"author":{"gitId":"-"},"content":"   * Deletes a notification based on its ID."},{"lineNumber":60,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":61,"author":{"gitId":"-"},"content":"  deleteNotification(notificationId: string, title: string): void {"},{"lineNumber":62,"author":{"gitId":"-"},"content":"    const modalRef \u003d this.simpleModalService.openConfirmationModal("},{"lineNumber":63,"author":{"gitId":"-"},"content":"      \u0027Confirm your action\u0027,"},{"lineNumber":64,"author":{"gitId":"-"},"content":"      SimpleModalType.DANGER,"},{"lineNumber":65,"author":{"gitId":"-"},"content":"      `Do you want to delete this notification (titled \"${title}\") permanently? This action will not be reversible.`,"},{"lineNumber":66,"author":{"gitId":"-"},"content":"    );"},{"lineNumber":67,"author":{"gitId":"-"},"content":"    modalRef.result.then(() \u003d\u003e this.deleteNotificationEvent.emit(notificationId));"},{"lineNumber":68,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":69,"author":{"gitId":"-"},"content":""},{"lineNumber":70,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":71,"author":{"gitId":"-"},"content":"   * Loads the notification edit form."},{"lineNumber":72,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":73,"author":{"gitId":"-"},"content":"  loadNotificationEditForm(notification: Notification): void {"},{"lineNumber":74,"author":{"gitId":"-"},"content":"    this.loadNotificationEditFormEvent.emit(notification);"},{"lineNumber":75,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":76,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"weiquu":7,"-":69}},{"path":"src/web/app/pages-help/instructor-help-page/instructor-help-questions-section/instructor-help-questions-data.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  ContributionStatistics,"},{"lineNumber":3,"author":{"gitId":"-"},"content":"  FeedbackConstantSumDistributePointsType,"},{"lineNumber":4,"author":{"gitId":"-"},"content":"  FeedbackConstantSumQuestionDetails,"},{"lineNumber":5,"author":{"gitId":"-"},"content":"  FeedbackConstantSumResponseDetails,"},{"lineNumber":6,"author":{"gitId":"-"},"content":"  FeedbackContributionResponseDetails,"},{"lineNumber":7,"author":{"gitId":"-"},"content":"  FeedbackMcqQuestionDetails,"},{"lineNumber":8,"author":{"gitId":"-"},"content":"  FeedbackNumericalScaleResponseDetails,"},{"lineNumber":9,"author":{"gitId":"-"},"content":"  FeedbackParticipantType,"},{"lineNumber":10,"author":{"gitId":"-"},"content":"  FeedbackQuestionType,"},{"lineNumber":11,"author":{"gitId":"-"},"content":"  FeedbackRankRecipientsResponseDetails,"},{"lineNumber":12,"author":{"gitId":"-"},"content":"  FeedbackRubricQuestionDetails,"},{"lineNumber":13,"author":{"gitId":"-"},"content":"  FeedbackRubricResponseDetails,"},{"lineNumber":14,"author":{"gitId":"-"},"content":"  FeedbackSession,"},{"lineNumber":15,"author":{"gitId":"-"},"content":"  FeedbackSessionPublishStatus,"},{"lineNumber":16,"author":{"gitId":"-"},"content":"  FeedbackSessionSubmissionStatus,"},{"lineNumber":17,"author":{"gitId":"-"},"content":"  FeedbackVisibilityType,"},{"lineNumber":18,"author":{"gitId":"-"},"content":"  NumberOfEntitiesToGiveFeedbackToSetting,"},{"lineNumber":19,"author":{"gitId":"-"},"content":"  ResponseOutput,"},{"lineNumber":20,"author":{"gitId":"-"},"content":"  ResponseVisibleSetting,"},{"lineNumber":21,"author":{"gitId":"-"},"content":"  SessionVisibleSetting,"},{"lineNumber":22,"author":{"gitId":"-"},"content":"} from \u0027../../../../types/api-output\u0027;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":24,"author":{"gitId":"-"},"content":"    DEFAULT_CONSTSUM_RECIPIENTS_QUESTION_DETAILS,"},{"lineNumber":25,"author":{"gitId":"-"},"content":"    DEFAULT_CONTRIBUTION_QUESTION_DETAILS,"},{"lineNumber":26,"author":{"gitId":"-"},"content":"    DEFAULT_MCQ_QUESTION_DETAILS,"},{"lineNumber":27,"author":{"gitId":"-"},"content":"    DEFAULT_NUMSCALE_QUESTION_DETAILS,"},{"lineNumber":28,"author":{"gitId":"-"},"content":"    DEFAULT_RANK_OPTIONS_QUESTION_DETAILS,"},{"lineNumber":29,"author":{"gitId":"-"},"content":"    DEFAULT_RANK_RECIPIENTS_QUESTION_DETAILS,"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    DEFAULT_RUBRIC_QUESTION_DETAILS,"},{"lineNumber":31,"author":{"gitId":"-"},"content":"    DEFAULT_TEXT_QUESTION_DETAILS,"},{"lineNumber":32,"author":{"gitId":"-"},"content":"} from \u0027../../../../types/default-question-structs\u0027;"},{"lineNumber":33,"author":{"gitId":"-"},"content":"import { CommentTableModel } from \u0027../../../components/comment-box/comment-table/comment-table.component\u0027;"},{"lineNumber":34,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":35,"author":{"gitId":"-"},"content":"  QuestionEditFormModel,"},{"lineNumber":36,"author":{"gitId":"-"},"content":"} from \u0027../../../components/question-edit-form/question-edit-form-model\u0027;"},{"lineNumber":37,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":38,"author":{"gitId":"-"},"content":"  QuestionSubmissionFormModel,"},{"lineNumber":39,"author":{"gitId":"-"},"content":"} from \u0027../../../components/question-submission-form/question-submission-form-model\u0027;"},{"lineNumber":40,"author":{"gitId":"-"},"content":"import { Response } from \u0027../../../components/question-types/question-statistics/question-statistics\u0027;"},{"lineNumber":41,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":42,"author":{"gitId":"-"},"content":"    QuestionTabModel,"},{"lineNumber":43,"author":{"gitId":"-"},"content":"} from \u0027../../../pages-instructor/instructor-session-result-page/instructor-session-result-page.component\u0027;"},{"lineNumber":44,"author":{"gitId":"-"},"content":""},{"lineNumber":45,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":46,"author":{"gitId":"-"},"content":" * Structure for example of essay question model"},{"lineNumber":47,"author":{"gitId":"-"},"content":" */"},{"lineNumber":48,"author":{"gitId":"-"},"content":"export const EXAMPLE_ESSAY_QUESTION_MODEL: QuestionEditFormModel \u003d {"},{"lineNumber":49,"author":{"gitId":"-"},"content":"  feedbackQuestionId: \u0027\u0027,"},{"lineNumber":50,"author":{"gitId":"-"},"content":"  isQuestionHasResponses: false,"},{"lineNumber":51,"author":{"gitId":"-"},"content":""},{"lineNumber":52,"author":{"gitId":"-"},"content":"  questionNumber: 1,"},{"lineNumber":53,"author":{"gitId":"-"},"content":"  questionBrief: \u0027\u0027,"},{"lineNumber":54,"author":{"gitId":"-"},"content":"  questionDescription: \u0027\u0027,"},{"lineNumber":55,"author":{"gitId":"-"},"content":"  questionType: FeedbackQuestionType.TEXT,"},{"lineNumber":56,"author":{"gitId":"-"},"content":"  questionDetails: DEFAULT_TEXT_QUESTION_DETAILS(),"},{"lineNumber":57,"author":{"gitId":"-"},"content":""},{"lineNumber":58,"author":{"gitId":"-"},"content":"  isDeleting: false,"},{"lineNumber":59,"author":{"gitId":"-"},"content":"  isDuplicating: false,"},{"lineNumber":60,"author":{"gitId":"-"},"content":"  isEditable: false,"},{"lineNumber":61,"author":{"gitId":"-"},"content":"  isSaving: false,"},{"lineNumber":62,"author":{"gitId":"-"},"content":"  isCollapsed: false,"},{"lineNumber":63,"author":{"gitId":"-"},"content":"  isVisibilityChanged: false,"},{"lineNumber":64,"author":{"gitId":"-"},"content":"  isFeedbackPathChanged: false,"},{"lineNumber":65,"author":{"gitId":"-"},"content":"  isQuestionDetailsChanged: false,"},{"lineNumber":66,"author":{"gitId":"-"},"content":""},{"lineNumber":67,"author":{"gitId":"-"},"content":"  giverType: FeedbackParticipantType.STUDENTS,"},{"lineNumber":68,"author":{"gitId":"-"},"content":"  recipientType: FeedbackParticipantType.OWN_TEAM_MEMBERS,"},{"lineNumber":69,"author":{"gitId":"-"},"content":""},{"lineNumber":70,"author":{"gitId":"-"},"content":"  customNumberOfEntitiesToGiveFeedbackTo: 0,"},{"lineNumber":71,"author":{"gitId":"-"},"content":"  numberOfEntitiesToGiveFeedbackToSetting: NumberOfEntitiesToGiveFeedbackToSetting.UNLIMITED,"},{"lineNumber":72,"author":{"gitId":"-"},"content":""},{"lineNumber":73,"author":{"gitId":"-"},"content":"  showResponsesTo: [FeedbackVisibilityType.INSTRUCTORS, FeedbackVisibilityType.RECIPIENT],"},{"lineNumber":74,"author":{"gitId":"-"},"content":"  showGiverNameTo: [FeedbackVisibilityType.INSTRUCTORS],"},{"lineNumber":75,"author":{"gitId":"-"},"content":"  showRecipientNameTo: [FeedbackVisibilityType.INSTRUCTORS, FeedbackVisibilityType.RECIPIENT],"},{"lineNumber":76,"author":{"gitId":"-"},"content":"};"},{"lineNumber":77,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":78,"author":{"gitId":"-"},"content":" * Structure for example of numerical scale question model"},{"lineNumber":79,"author":{"gitId":"-"},"content":" */"},{"lineNumber":80,"author":{"gitId":"-"},"content":"export const EXAMPLE_NUMERICAL_SCALE_QUESTION_MODEL: QuestionEditFormModel \u003d {"},{"lineNumber":81,"author":{"gitId":"-"},"content":"  feedbackQuestionId: \u0027\u0027,"},{"lineNumber":82,"author":{"gitId":"-"},"content":"  isQuestionHasResponses: false,"},{"lineNumber":83,"author":{"gitId":"-"},"content":""},{"lineNumber":84,"author":{"gitId":"-"},"content":"  questionNumber: 1,"},{"lineNumber":85,"author":{"gitId":"-"},"content":"  questionBrief: \u0027\u0027,"},{"lineNumber":86,"author":{"gitId":"-"},"content":"  questionDescription: \u0027\u0027,"},{"lineNumber":87,"author":{"gitId":"-"},"content":"  questionType: FeedbackQuestionType.NUMSCALE,"},{"lineNumber":88,"author":{"gitId":"-"},"content":"  questionDetails: DEFAULT_NUMSCALE_QUESTION_DETAILS(),"},{"lineNumber":89,"author":{"gitId":"-"},"content":""},{"lineNumber":90,"author":{"gitId":"-"},"content":"  isDeleting: false,"},{"lineNumber":91,"author":{"gitId":"-"},"content":"  isDuplicating: false,"},{"lineNumber":92,"author":{"gitId":"-"},"content":"  isEditable: false,"},{"lineNumber":93,"author":{"gitId":"-"},"content":"  isSaving: false,"},{"lineNumber":94,"author":{"gitId":"-"},"content":"  isCollapsed: false,"},{"lineNumber":95,"author":{"gitId":"-"},"content":"  isVisibilityChanged: false,"},{"lineNumber":96,"author":{"gitId":"-"},"content":"  isFeedbackPathChanged: false,"},{"lineNumber":97,"author":{"gitId":"-"},"content":"  isQuestionDetailsChanged: false,"},{"lineNumber":98,"author":{"gitId":"-"},"content":""},{"lineNumber":99,"author":{"gitId":"-"},"content":"  giverType: FeedbackParticipantType.STUDENTS,"},{"lineNumber":100,"author":{"gitId":"-"},"content":"  recipientType: FeedbackParticipantType.OWN_TEAM_MEMBERS,"},{"lineNumber":101,"author":{"gitId":"-"},"content":""},{"lineNumber":102,"author":{"gitId":"-"},"content":"  customNumberOfEntitiesToGiveFeedbackTo: 0,"},{"lineNumber":103,"author":{"gitId":"-"},"content":"  numberOfEntitiesToGiveFeedbackToSetting: NumberOfEntitiesToGiveFeedbackToSetting.UNLIMITED,"},{"lineNumber":104,"author":{"gitId":"-"},"content":""},{"lineNumber":105,"author":{"gitId":"-"},"content":"  showResponsesTo: [FeedbackVisibilityType.INSTRUCTORS, FeedbackVisibilityType.RECIPIENT],"},{"lineNumber":106,"author":{"gitId":"-"},"content":"  showGiverNameTo: [FeedbackVisibilityType.INSTRUCTORS],"},{"lineNumber":107,"author":{"gitId":"-"},"content":"  showRecipientNameTo: [FeedbackVisibilityType.INSTRUCTORS, FeedbackVisibilityType.RECIPIENT],"},{"lineNumber":108,"author":{"gitId":"-"},"content":"};"},{"lineNumber":109,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":110,"author":{"gitId":"-"},"content":" * Structure for example of numerical scale responses"},{"lineNumber":111,"author":{"gitId":"-"},"content":" */"},{"lineNumber":112,"author":{"gitId":"-"},"content":"export const EXAMPLE_NUMERICAL_SCALE_RESPONSES: Response\u003cFeedbackNumericalScaleResponseDetails\u003e[] \u003d ["},{"lineNumber":113,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":114,"author":{"gitId":"-"},"content":"    giver: \u0027Alice\u0027,"},{"lineNumber":115,"author":{"gitId":"-"},"content":"    giverEmail: \u0027alice@gmail.com\u0027,"},{"lineNumber":116,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 1\u0027,"},{"lineNumber":117,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":118,"author":{"gitId":"-"},"content":"    recipient: \u0027Bob\u0027,"},{"lineNumber":119,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027bob@gmail.com\u0027,"},{"lineNumber":120,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 2\u0027,"},{"lineNumber":121,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":122,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":123,"author":{"gitId":"-"},"content":"      answer: 5,"},{"lineNumber":124,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.NUMSCALE,"},{"lineNumber":125,"author":{"gitId":"-"},"content":"    },"},{"lineNumber":126,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":127,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":128,"author":{"gitId":"-"},"content":"    giver: \u0027Charles\u0027,"},{"lineNumber":129,"author":{"gitId":"-"},"content":"    giverEmail: \u0027charles@gmail.com\u0027,"},{"lineNumber":130,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 1\u0027,"},{"lineNumber":131,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":132,"author":{"gitId":"-"},"content":"    recipient: \u0027Bob\u0027,"},{"lineNumber":133,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027bob@gmail.com\u0027,"},{"lineNumber":134,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 2\u0027,"},{"lineNumber":135,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":136,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":137,"author":{"gitId":"-"},"content":"      answer: 5,"},{"lineNumber":138,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.NUMSCALE,"},{"lineNumber":139,"author":{"gitId":"-"},"content":"    },"},{"lineNumber":140,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":141,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":142,"author":{"gitId":"-"},"content":"    giver: \u0027David\u0027,"},{"lineNumber":143,"author":{"gitId":"-"},"content":"    giverEmail: \u0027david@gmail.com\u0027,"},{"lineNumber":144,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 1\u0027,"},{"lineNumber":145,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":146,"author":{"gitId":"-"},"content":"    recipient: \u0027Bob\u0027,"},{"lineNumber":147,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027bob@gmail.com\u0027,"},{"lineNumber":148,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 2\u0027,"},{"lineNumber":149,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":150,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":151,"author":{"gitId":"-"},"content":"      answer: 2,"},{"lineNumber":152,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.NUMSCALE,"},{"lineNumber":153,"author":{"gitId":"-"},"content":"    },"},{"lineNumber":154,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":155,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":156,"author":{"gitId":"-"},"content":"    giver: \u0027Bob\u0027,"},{"lineNumber":157,"author":{"gitId":"-"},"content":"    giverEmail: \u0027bob@gmail.com\u0027,"},{"lineNumber":158,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 2\u0027,"},{"lineNumber":159,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":160,"author":{"gitId":"-"},"content":"    recipient: \u0027Bob\u0027,"},{"lineNumber":161,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027bob@gmail.com\u0027,"},{"lineNumber":162,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 2\u0027,"},{"lineNumber":163,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":164,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":165,"author":{"gitId":"-"},"content":"      answer: 5,"},{"lineNumber":166,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.NUMSCALE,"},{"lineNumber":167,"author":{"gitId":"-"},"content":"    },"},{"lineNumber":168,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":169,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":170,"author":{"gitId":"-"},"content":"    giver: \u0027Alice\u0027,"},{"lineNumber":171,"author":{"gitId":"-"},"content":"    giverEmail: \u0027alice@gmail.com\u0027,"},{"lineNumber":172,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 1\u0027,"},{"lineNumber":173,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":174,"author":{"gitId":"-"},"content":"    recipient: \u0027Emma\u0027,"},{"lineNumber":175,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027emma@gmail.com\u0027,"},{"lineNumber":176,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 2\u0027,"},{"lineNumber":177,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":178,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":179,"author":{"gitId":"-"},"content":"      answer: 4,"},{"lineNumber":180,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.NUMSCALE,"},{"lineNumber":181,"author":{"gitId":"-"},"content":"    },"},{"lineNumber":182,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":183,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":184,"author":{"gitId":"-"},"content":"    giver: \u0027Charles\u0027,"},{"lineNumber":185,"author":{"gitId":"-"},"content":"    giverEmail: \u0027charles@gmail.com\u0027,"},{"lineNumber":186,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 1\u0027,"},{"lineNumber":187,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":188,"author":{"gitId":"-"},"content":"    recipient: \u0027Emma\u0027,"},{"lineNumber":189,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027emma@gmail.com\u0027,"},{"lineNumber":190,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 2\u0027,"},{"lineNumber":191,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":192,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":193,"author":{"gitId":"-"},"content":"      answer: 3,"},{"lineNumber":194,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.NUMSCALE,"},{"lineNumber":195,"author":{"gitId":"-"},"content":"    },"},{"lineNumber":196,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":197,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":198,"author":{"gitId":"-"},"content":"    giver: \u0027David\u0027,"},{"lineNumber":199,"author":{"gitId":"-"},"content":"    giverEmail: \u0027david@gmail.com\u0027,"},{"lineNumber":200,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 1\u0027,"},{"lineNumber":201,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":202,"author":{"gitId":"-"},"content":"    recipient: \u0027Emma\u0027,"},{"lineNumber":203,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027emma@gmail.com\u0027,"},{"lineNumber":204,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 2\u0027,"},{"lineNumber":205,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":206,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":207,"author":{"gitId":"-"},"content":"      answer: 4,"},{"lineNumber":208,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.NUMSCALE,"},{"lineNumber":209,"author":{"gitId":"-"},"content":"    },"},{"lineNumber":210,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":211,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":212,"author":{"gitId":"-"},"content":"    giver: \u0027Emma\u0027,"},{"lineNumber":213,"author":{"gitId":"-"},"content":"    giverEmail: \u0027emma@gmail.com\u0027,"},{"lineNumber":214,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 2\u0027,"},{"lineNumber":215,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":216,"author":{"gitId":"-"},"content":"    recipient: \u0027Emma\u0027,"},{"lineNumber":217,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027emma@gmail.com\u0027,"},{"lineNumber":218,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 2\u0027,"},{"lineNumber":219,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":220,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":221,"author":{"gitId":"-"},"content":"      answer: 5,"},{"lineNumber":222,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.NUMSCALE,"},{"lineNumber":223,"author":{"gitId":"-"},"content":"    },"},{"lineNumber":224,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":225,"author":{"gitId":"-"},"content":"];"},{"lineNumber":226,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":227,"author":{"gitId":"-"},"content":" * Structure for example of numerical scale response output"},{"lineNumber":228,"author":{"gitId":"-"},"content":" */"},{"lineNumber":229,"author":{"gitId":"-"},"content":"export const EXAMPLE_NUMERICAL_SCALE_RESPONSE_OUTPUT: ResponseOutput[] \u003d ["},{"lineNumber":230,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":231,"author":{"gitId":"-"},"content":"    isMissingResponse: false,"},{"lineNumber":232,"author":{"gitId":"-"},"content":"    responseId: \u00271\u0027,"},{"lineNumber":233,"author":{"gitId":"-"},"content":"    giver: \u0027Alice\u0027,"},{"lineNumber":234,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 1\u0027,"},{"lineNumber":235,"author":{"gitId":"-"},"content":"    giverEmail: \u0027alice@gmail.com\u0027,"},{"lineNumber":236,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":237,"author":{"gitId":"-"},"content":"    recipient: \u0027Bob\u0027,"},{"lineNumber":238,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 2\u0027,"},{"lineNumber":239,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027bob@gmail.com\u0027,"},{"lineNumber":240,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":241,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":242,"author":{"gitId":"-"},"content":"      answer: 5,"},{"lineNumber":243,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.NUMSCALE,"},{"lineNumber":244,"author":{"gitId":"-"},"content":"    } as FeedbackNumericalScaleResponseDetails,"},{"lineNumber":245,"author":{"gitId":"-"},"content":"    instructorComments: [],"},{"lineNumber":246,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":247,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":248,"author":{"gitId":"-"},"content":"    isMissingResponse: false,"},{"lineNumber":249,"author":{"gitId":"-"},"content":"    responseId: \u00272\u0027,"},{"lineNumber":250,"author":{"gitId":"-"},"content":"    giver: \u0027Charles\u0027,"},{"lineNumber":251,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 1\u0027,"},{"lineNumber":252,"author":{"gitId":"-"},"content":"    giverEmail: \u0027charles@gmail.com\u0027,"},{"lineNumber":253,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":254,"author":{"gitId":"-"},"content":"    recipient: \u0027Bob\u0027,"},{"lineNumber":255,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 2\u0027,"},{"lineNumber":256,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027bob@gmail.com\u0027,"},{"lineNumber":257,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":258,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":259,"author":{"gitId":"-"},"content":"      answer: 5,"},{"lineNumber":260,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.NUMSCALE,"},{"lineNumber":261,"author":{"gitId":"-"},"content":"    } as FeedbackNumericalScaleResponseDetails,"},{"lineNumber":262,"author":{"gitId":"-"},"content":"    instructorComments: [],"},{"lineNumber":263,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":264,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":265,"author":{"gitId":"-"},"content":"    isMissingResponse: false,"},{"lineNumber":266,"author":{"gitId":"-"},"content":"    responseId: \u00273\u0027,"},{"lineNumber":267,"author":{"gitId":"-"},"content":"    giver: \u0027David\u0027,"},{"lineNumber":268,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 1\u0027,"},{"lineNumber":269,"author":{"gitId":"-"},"content":"    giverEmail: \u0027david@gmail.com\u0027,"},{"lineNumber":270,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":271,"author":{"gitId":"-"},"content":"    recipient: \u0027Bob\u0027,"},{"lineNumber":272,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 2\u0027,"},{"lineNumber":273,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027bob@gmail.com\u0027,"},{"lineNumber":274,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":275,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":276,"author":{"gitId":"-"},"content":"      answer: 2,"},{"lineNumber":277,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.NUMSCALE,"},{"lineNumber":278,"author":{"gitId":"-"},"content":"    } as FeedbackNumericalScaleResponseDetails,"},{"lineNumber":279,"author":{"gitId":"-"},"content":"    instructorComments: [],"},{"lineNumber":280,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":281,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":282,"author":{"gitId":"-"},"content":"    isMissingResponse: false,"},{"lineNumber":283,"author":{"gitId":"-"},"content":"    responseId: \u00274\u0027,"},{"lineNumber":284,"author":{"gitId":"-"},"content":"    giver: \u0027Bob\u0027,"},{"lineNumber":285,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 2\u0027,"},{"lineNumber":286,"author":{"gitId":"-"},"content":"    giverEmail: \u0027bob@gmail.com\u0027,"},{"lineNumber":287,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":288,"author":{"gitId":"-"},"content":"    recipient: \u0027Bob\u0027,"},{"lineNumber":289,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 2\u0027,"},{"lineNumber":290,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027bob@gmail.com\u0027,"},{"lineNumber":291,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":292,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":293,"author":{"gitId":"-"},"content":"      answer: 5,"},{"lineNumber":294,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.NUMSCALE,"},{"lineNumber":295,"author":{"gitId":"-"},"content":"    } as FeedbackNumericalScaleResponseDetails,"},{"lineNumber":296,"author":{"gitId":"-"},"content":"    instructorComments: [],"},{"lineNumber":297,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":298,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":299,"author":{"gitId":"-"},"content":"    isMissingResponse: false,"},{"lineNumber":300,"author":{"gitId":"-"},"content":"    responseId: \u00275\u0027,"},{"lineNumber":301,"author":{"gitId":"-"},"content":"    giver: \u0027Alice\u0027,"},{"lineNumber":302,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 1\u0027,"},{"lineNumber":303,"author":{"gitId":"-"},"content":"    giverEmail: \u0027alice@gmail.com\u0027,"},{"lineNumber":304,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":305,"author":{"gitId":"-"},"content":"    recipient: \u0027Emma\u0027,"},{"lineNumber":306,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 2\u0027,"},{"lineNumber":307,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027emma@gmail.com\u0027,"},{"lineNumber":308,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":309,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":310,"author":{"gitId":"-"},"content":"      answer: 4,"},{"lineNumber":311,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.NUMSCALE,"},{"lineNumber":312,"author":{"gitId":"-"},"content":"    } as FeedbackNumericalScaleResponseDetails,"},{"lineNumber":313,"author":{"gitId":"-"},"content":"    instructorComments: [],"},{"lineNumber":314,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":315,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":316,"author":{"gitId":"-"},"content":"    isMissingResponse: false,"},{"lineNumber":317,"author":{"gitId":"-"},"content":"    responseId: \u00276\u0027,"},{"lineNumber":318,"author":{"gitId":"-"},"content":"    giver: \u0027Charles\u0027,"},{"lineNumber":319,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 1\u0027,"},{"lineNumber":320,"author":{"gitId":"-"},"content":"    giverEmail: \u0027charles@gmail.com\u0027,"},{"lineNumber":321,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":322,"author":{"gitId":"-"},"content":"    recipient: \u0027Emma\u0027,"},{"lineNumber":323,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 2\u0027,"},{"lineNumber":324,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027emma@gmail.com\u0027,"},{"lineNumber":325,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":326,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":327,"author":{"gitId":"-"},"content":"      answer: 3,"},{"lineNumber":328,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.NUMSCALE,"},{"lineNumber":329,"author":{"gitId":"-"},"content":"    } as FeedbackNumericalScaleResponseDetails,"},{"lineNumber":330,"author":{"gitId":"-"},"content":"    instructorComments: [],"},{"lineNumber":331,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":332,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":333,"author":{"gitId":"-"},"content":"    isMissingResponse: false,"},{"lineNumber":334,"author":{"gitId":"-"},"content":"    responseId: \u00277\u0027,"},{"lineNumber":335,"author":{"gitId":"-"},"content":"    giver: \u0027David\u0027,"},{"lineNumber":336,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 1\u0027,"},{"lineNumber":337,"author":{"gitId":"-"},"content":"    giverEmail: \u0027david@gmail.com\u0027,"},{"lineNumber":338,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":339,"author":{"gitId":"-"},"content":"    recipient: \u0027Emma\u0027,"},{"lineNumber":340,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 2\u0027,"},{"lineNumber":341,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027emma@gmail.com\u0027,"},{"lineNumber":342,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":343,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":344,"author":{"gitId":"-"},"content":"      answer: 4,"},{"lineNumber":345,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.NUMSCALE,"},{"lineNumber":346,"author":{"gitId":"-"},"content":"    } as FeedbackNumericalScaleResponseDetails,"},{"lineNumber":347,"author":{"gitId":"-"},"content":"    instructorComments: [],"},{"lineNumber":348,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":349,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":350,"author":{"gitId":"-"},"content":"    isMissingResponse: false,"},{"lineNumber":351,"author":{"gitId":"-"},"content":"    responseId: \u00278\u0027,"},{"lineNumber":352,"author":{"gitId":"-"},"content":"    giver: \u0027Emma\u0027,"},{"lineNumber":353,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 2\u0027,"},{"lineNumber":354,"author":{"gitId":"-"},"content":"    giverEmail: \u0027emma@gmail.com\u0027,"},{"lineNumber":355,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":356,"author":{"gitId":"-"},"content":"    recipient: \u0027Emma\u0027,"},{"lineNumber":357,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 2\u0027,"},{"lineNumber":358,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027emma@gmail.com\u0027,"},{"lineNumber":359,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":360,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":361,"author":{"gitId":"-"},"content":"      answer: 5,"},{"lineNumber":362,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.NUMSCALE,"},{"lineNumber":363,"author":{"gitId":"-"},"content":"    } as FeedbackNumericalScaleResponseDetails,"},{"lineNumber":364,"author":{"gitId":"-"},"content":"    instructorComments: [],"},{"lineNumber":365,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":366,"author":{"gitId":"-"},"content":"];"},{"lineNumber":367,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":368,"author":{"gitId":"-"},"content":" * Structure for example of numerical scale question tab model"},{"lineNumber":369,"author":{"gitId":"-"},"content":" */"},{"lineNumber":370,"author":{"gitId":"-"},"content":"export const EXAMPLE_NUMERICAL_SCALE_QUESTION_TAB_MODEL: QuestionTabModel \u003d {"},{"lineNumber":371,"author":{"gitId":"-"},"content":"  question: EXAMPLE_NUMERICAL_SCALE_QUESTION_MODEL,"},{"lineNumber":372,"author":{"gitId":"-"},"content":"  responses: EXAMPLE_NUMERICAL_SCALE_RESPONSE_OUTPUT,"},{"lineNumber":373,"author":{"gitId":"-"},"content":"  statistics: \u0027\u0027,"},{"lineNumber":374,"author":{"gitId":"-"},"content":"  hasPopulated: true,"},{"lineNumber":375,"author":{"gitId":"-"},"content":"  isTabExpanded: true,"},{"lineNumber":376,"author":{"gitId":"-"},"content":"};"},{"lineNumber":377,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":378,"author":{"gitId":"-"},"content":" * Structure for example of numerical scale questions"},{"lineNumber":379,"author":{"gitId":"-"},"content":" */"},{"lineNumber":380,"author":{"gitId":"-"},"content":"export const EXAMPLE_NUMERICAL_SCALE_QUESTIONS: Record\u003cstring, QuestionTabModel\u003e \u003d {"},{"lineNumber":381,"author":{"gitId":"-"},"content":"  question: EXAMPLE_NUMERICAL_SCALE_QUESTION_TAB_MODEL,"},{"lineNumber":382,"author":{"gitId":"-"},"content":"};"},{"lineNumber":383,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":384,"author":{"gitId":"-"},"content":" * Structure for example of instructor comment tab model"},{"lineNumber":385,"author":{"gitId":"-"},"content":" */"},{"lineNumber":386,"author":{"gitId":"-"},"content":"export const EXAMPLE_INSTRUCTOR_COMMENT_TABLE_MODEL: Record\u003cstring, CommentTableModel\u003e \u003d {"},{"lineNumber":387,"author":{"gitId":"-"},"content":"  1: {"},{"lineNumber":388,"author":{"gitId":"-"},"content":"    commentRows: [],"},{"lineNumber":389,"author":{"gitId":"-"},"content":"    newCommentRow: {"},{"lineNumber":390,"author":{"gitId":"-"},"content":"      commentEditFormModel: {"},{"lineNumber":391,"author":{"gitId":"-"},"content":"        commentText: \u0027\u0027,"},{"lineNumber":392,"author":{"gitId":"-"},"content":""},{"lineNumber":393,"author":{"gitId":"-"},"content":"        isUsingCustomVisibilities: false,"},{"lineNumber":394,"author":{"gitId":"-"},"content":"        showCommentTo: [],"},{"lineNumber":395,"author":{"gitId":"-"},"content":"        showGiverNameTo: [],"},{"lineNumber":396,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":397,"author":{"gitId":"-"},"content":"      isEditing: false,"},{"lineNumber":398,"author":{"gitId":"-"},"content":"    },"},{"lineNumber":399,"author":{"gitId":"-"},"content":""},{"lineNumber":400,"author":{"gitId":"-"},"content":"    isAddingNewComment: false,"},{"lineNumber":401,"author":{"gitId":"-"},"content":"    isReadOnly: true,"},{"lineNumber":402,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":403,"author":{"gitId":"-"},"content":"  2: {"},{"lineNumber":404,"author":{"gitId":"-"},"content":"    commentRows: [],"},{"lineNumber":405,"author":{"gitId":"-"},"content":"    newCommentRow: {"},{"lineNumber":406,"author":{"gitId":"-"},"content":"      commentEditFormModel: {"},{"lineNumber":407,"author":{"gitId":"-"},"content":"        commentText: \u0027\u0027,"},{"lineNumber":408,"author":{"gitId":"-"},"content":""},{"lineNumber":409,"author":{"gitId":"-"},"content":"        isUsingCustomVisibilities: false,"},{"lineNumber":410,"author":{"gitId":"-"},"content":"        showCommentTo: [],"},{"lineNumber":411,"author":{"gitId":"-"},"content":"        showGiverNameTo: [],"},{"lineNumber":412,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":413,"author":{"gitId":"-"},"content":"      isEditing: false,"},{"lineNumber":414,"author":{"gitId":"-"},"content":"    },"},{"lineNumber":415,"author":{"gitId":"-"},"content":""},{"lineNumber":416,"author":{"gitId":"-"},"content":"    isAddingNewComment: false,"},{"lineNumber":417,"author":{"gitId":"-"},"content":"    isReadOnly: true,"},{"lineNumber":418,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":419,"author":{"gitId":"-"},"content":"  3: {"},{"lineNumber":420,"author":{"gitId":"-"},"content":"    commentRows: [],"},{"lineNumber":421,"author":{"gitId":"-"},"content":"    newCommentRow: {"},{"lineNumber":422,"author":{"gitId":"-"},"content":"      commentEditFormModel: {"},{"lineNumber":423,"author":{"gitId":"-"},"content":"        commentText: \u0027\u0027,"},{"lineNumber":424,"author":{"gitId":"-"},"content":""},{"lineNumber":425,"author":{"gitId":"-"},"content":"        isUsingCustomVisibilities: false,"},{"lineNumber":426,"author":{"gitId":"-"},"content":"        showCommentTo: [],"},{"lineNumber":427,"author":{"gitId":"-"},"content":"        showGiverNameTo: [],"},{"lineNumber":428,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":429,"author":{"gitId":"-"},"content":"      isEditing: false,"},{"lineNumber":430,"author":{"gitId":"-"},"content":"    },"},{"lineNumber":431,"author":{"gitId":"-"},"content":""},{"lineNumber":432,"author":{"gitId":"-"},"content":"    isAddingNewComment: false,"},{"lineNumber":433,"author":{"gitId":"-"},"content":"    isReadOnly: true,"},{"lineNumber":434,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":435,"author":{"gitId":"-"},"content":"  4: {"},{"lineNumber":436,"author":{"gitId":"-"},"content":"    commentRows: [],"},{"lineNumber":437,"author":{"gitId":"-"},"content":"    newCommentRow: {"},{"lineNumber":438,"author":{"gitId":"-"},"content":"      commentEditFormModel: {"},{"lineNumber":439,"author":{"gitId":"-"},"content":"        commentText: \u0027\u0027,"},{"lineNumber":440,"author":{"gitId":"-"},"content":""},{"lineNumber":441,"author":{"gitId":"-"},"content":"        isUsingCustomVisibilities: false,"},{"lineNumber":442,"author":{"gitId":"-"},"content":"        showCommentTo: [],"},{"lineNumber":443,"author":{"gitId":"-"},"content":"        showGiverNameTo: [],"},{"lineNumber":444,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":445,"author":{"gitId":"-"},"content":"      isEditing: false,"},{"lineNumber":446,"author":{"gitId":"-"},"content":"    },"},{"lineNumber":447,"author":{"gitId":"-"},"content":""},{"lineNumber":448,"author":{"gitId":"-"},"content":"    isAddingNewComment: false,"},{"lineNumber":449,"author":{"gitId":"-"},"content":"    isReadOnly: true,"},{"lineNumber":450,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":451,"author":{"gitId":"-"},"content":"  5: {"},{"lineNumber":452,"author":{"gitId":"-"},"content":"    commentRows: [],"},{"lineNumber":453,"author":{"gitId":"-"},"content":"    newCommentRow: {"},{"lineNumber":454,"author":{"gitId":"-"},"content":"      commentEditFormModel: {"},{"lineNumber":455,"author":{"gitId":"-"},"content":"        commentText: \u0027\u0027,"},{"lineNumber":456,"author":{"gitId":"-"},"content":""},{"lineNumber":457,"author":{"gitId":"-"},"content":"        isUsingCustomVisibilities: false,"},{"lineNumber":458,"author":{"gitId":"-"},"content":"        showCommentTo: [],"},{"lineNumber":459,"author":{"gitId":"-"},"content":"        showGiverNameTo: [],"},{"lineNumber":460,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":461,"author":{"gitId":"-"},"content":"      isEditing: false,"},{"lineNumber":462,"author":{"gitId":"-"},"content":"    },"},{"lineNumber":463,"author":{"gitId":"-"},"content":""},{"lineNumber":464,"author":{"gitId":"-"},"content":"    isAddingNewComment: false,"},{"lineNumber":465,"author":{"gitId":"-"},"content":"    isReadOnly: true,"},{"lineNumber":466,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":467,"author":{"gitId":"-"},"content":"  6: {"},{"lineNumber":468,"author":{"gitId":"-"},"content":"    commentRows: [],"},{"lineNumber":469,"author":{"gitId":"-"},"content":"    newCommentRow: {"},{"lineNumber":470,"author":{"gitId":"-"},"content":"      commentEditFormModel: {"},{"lineNumber":471,"author":{"gitId":"-"},"content":"        commentText: \u0027\u0027,"},{"lineNumber":472,"author":{"gitId":"-"},"content":""},{"lineNumber":473,"author":{"gitId":"-"},"content":"        isUsingCustomVisibilities: false,"},{"lineNumber":474,"author":{"gitId":"-"},"content":"        showCommentTo: [],"},{"lineNumber":475,"author":{"gitId":"-"},"content":"        showGiverNameTo: [],"},{"lineNumber":476,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":477,"author":{"gitId":"-"},"content":"      isEditing: false,"},{"lineNumber":478,"author":{"gitId":"-"},"content":"    },"},{"lineNumber":479,"author":{"gitId":"-"},"content":""},{"lineNumber":480,"author":{"gitId":"-"},"content":"    isAddingNewComment: false,"},{"lineNumber":481,"author":{"gitId":"-"},"content":"    isReadOnly: true,"},{"lineNumber":482,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":483,"author":{"gitId":"-"},"content":"  7: {"},{"lineNumber":484,"author":{"gitId":"-"},"content":"    commentRows: [],"},{"lineNumber":485,"author":{"gitId":"-"},"content":"    newCommentRow: {"},{"lineNumber":486,"author":{"gitId":"-"},"content":"      commentEditFormModel: {"},{"lineNumber":487,"author":{"gitId":"-"},"content":"        commentText: \u0027\u0027,"},{"lineNumber":488,"author":{"gitId":"-"},"content":""},{"lineNumber":489,"author":{"gitId":"-"},"content":"        isUsingCustomVisibilities: false,"},{"lineNumber":490,"author":{"gitId":"-"},"content":"        showCommentTo: [],"},{"lineNumber":491,"author":{"gitId":"-"},"content":"        showGiverNameTo: [],"},{"lineNumber":492,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":493,"author":{"gitId":"-"},"content":"      isEditing: false,"},{"lineNumber":494,"author":{"gitId":"-"},"content":"    },"},{"lineNumber":495,"author":{"gitId":"-"},"content":""},{"lineNumber":496,"author":{"gitId":"-"},"content":"    isAddingNewComment: false,"},{"lineNumber":497,"author":{"gitId":"-"},"content":"    isReadOnly: true,"},{"lineNumber":498,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":499,"author":{"gitId":"-"},"content":"  8: {"},{"lineNumber":500,"author":{"gitId":"-"},"content":"    commentRows: [],"},{"lineNumber":501,"author":{"gitId":"-"},"content":"    newCommentRow: {"},{"lineNumber":502,"author":{"gitId":"-"},"content":"      commentEditFormModel: {"},{"lineNumber":503,"author":{"gitId":"-"},"content":"        commentText: \u0027\u0027,"},{"lineNumber":504,"author":{"gitId":"-"},"content":""},{"lineNumber":505,"author":{"gitId":"-"},"content":"        isUsingCustomVisibilities: false,"},{"lineNumber":506,"author":{"gitId":"-"},"content":"        showCommentTo: [],"},{"lineNumber":507,"author":{"gitId":"-"},"content":"        showGiverNameTo: [],"},{"lineNumber":508,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":509,"author":{"gitId":"-"},"content":"      isEditing: false,"},{"lineNumber":510,"author":{"gitId":"-"},"content":"    },"},{"lineNumber":511,"author":{"gitId":"-"},"content":""},{"lineNumber":512,"author":{"gitId":"-"},"content":"    isAddingNewComment: false,"},{"lineNumber":513,"author":{"gitId":"-"},"content":"    isReadOnly: true,"},{"lineNumber":514,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":515,"author":{"gitId":"-"},"content":"};"},{"lineNumber":516,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":517,"author":{"gitId":"-"},"content":" * Structure for example of feedback session"},{"lineNumber":518,"author":{"gitId":"-"},"content":" */"},{"lineNumber":519,"author":{"gitId":"-"},"content":"export const EXAMPLE_FEEDBACK_SESSION: FeedbackSession \u003d {"},{"lineNumber":520,"author":{"gitId":"-"},"content":"  courseId: \u0027CS2103T\u0027,"},{"lineNumber":521,"author":{"gitId":"-"},"content":"  timeZone: \u0027UTC\u0027,"},{"lineNumber":522,"author":{"gitId":"-"},"content":"  feedbackSessionName: \u0027Project Feedback 1\u0027,"},{"lineNumber":523,"author":{"gitId":"-"},"content":"  instructions: \u0027Enter your feedback for projects\u0027,"},{"lineNumber":524,"author":{"gitId":"-"},"content":"  submissionStartTimestamp: 0,"},{"lineNumber":525,"author":{"gitId":"-"},"content":"  submissionEndTimestamp: 0,"},{"lineNumber":526,"author":{"gitId":"-"},"content":"  gracePeriod: 0,"},{"lineNumber":527,"author":{"gitId":"-"},"content":"  sessionVisibleSetting: SessionVisibleSetting.AT_OPEN,"},{"lineNumber":528,"author":{"gitId":"-"},"content":"  responseVisibleSetting: ResponseVisibleSetting.AT_VISIBLE,"},{"lineNumber":529,"author":{"gitId":"-"},"content":"  submissionStatus: FeedbackSessionSubmissionStatus.CLOSED,"},{"lineNumber":530,"author":{"gitId":"-"},"content":"  publishStatus: FeedbackSessionPublishStatus.NOT_PUBLISHED,"},{"lineNumber":531,"author":{"gitId":"-"},"content":"  isClosingEmailEnabled: true,"},{"lineNumber":532,"author":{"gitId":"-"},"content":"  isPublishedEmailEnabled: true,"},{"lineNumber":533,"author":{"gitId":"-"},"content":"  createdAtTimestamp: 0,"},{"lineNumber":534,"author":{"gitId":"-"},"content":"  studentDeadlines: {},"},{"lineNumber":535,"author":{"gitId":"-"},"content":"  instructorDeadlines: {},"},{"lineNumber":536,"author":{"gitId":"-"},"content":"};"},{"lineNumber":537,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":538,"author":{"gitId":"-"},"content":" * Structure for example of distrution point option question detail"},{"lineNumber":539,"author":{"gitId":"-"},"content":" */"},{"lineNumber":540,"author":{"gitId":"-"},"content":"export const EXAMPLE_DISTRIBUTE_POINT_OPTION_QUESTION_DETAIL: FeedbackConstantSumQuestionDetails \u003d {"},{"lineNumber":541,"author":{"gitId":"-"},"content":"  constSumOptions: [\u0027Option A\u0027, \u0027Option B\u0027],"},{"lineNumber":542,"author":{"gitId":"-"},"content":"  distributeToRecipients: false,"},{"lineNumber":543,"author":{"gitId":"-"},"content":"  pointsPerOption: false,"},{"lineNumber":544,"author":{"gitId":"-"},"content":"  forceUnevenDistribution: false,"},{"lineNumber":545,"author":{"gitId":"-"},"content":"  distributePointsFor: FeedbackConstantSumDistributePointsType.NONE,"},{"lineNumber":546,"author":{"gitId":"-"},"content":"  points: 100,"},{"lineNumber":547,"author":{"gitId":"-"},"content":"  questionType: FeedbackQuestionType.CONSTSUM_OPTIONS,"},{"lineNumber":548,"author":{"gitId":"-"},"content":"  questionText: \u0027\u0027,"},{"lineNumber":549,"author":{"gitId":"-"},"content":"  minPoint: 0,"},{"lineNumber":550,"author":{"gitId":"-"},"content":"  maxPoint: 100,"},{"lineNumber":551,"author":{"gitId":"-"},"content":"};"},{"lineNumber":552,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":553,"author":{"gitId":"-"},"content":" * Structure for example of distribution point option model"},{"lineNumber":554,"author":{"gitId":"-"},"content":" */"},{"lineNumber":555,"author":{"gitId":"-"},"content":"export const EXAMPLE_DISTRIBUTED_POINT_OPTION_MODEL: QuestionEditFormModel \u003d {"},{"lineNumber":556,"author":{"gitId":"-"},"content":"  feedbackQuestionId: \u0027\u0027,"},{"lineNumber":557,"author":{"gitId":"-"},"content":"  isQuestionHasResponses: false,"},{"lineNumber":558,"author":{"gitId":"-"},"content":""},{"lineNumber":559,"author":{"gitId":"-"},"content":"  questionNumber: 1,"},{"lineNumber":560,"author":{"gitId":"-"},"content":"  questionBrief: \u0027\u0027,"},{"lineNumber":561,"author":{"gitId":"-"},"content":"  questionDescription: \u0027\u0027,"},{"lineNumber":562,"author":{"gitId":"-"},"content":"  questionType: FeedbackQuestionType.CONSTSUM_OPTIONS,"},{"lineNumber":563,"author":{"gitId":"-"},"content":"  questionDetails: EXAMPLE_DISTRIBUTE_POINT_OPTION_QUESTION_DETAIL,"},{"lineNumber":564,"author":{"gitId":"-"},"content":""},{"lineNumber":565,"author":{"gitId":"-"},"content":"  isDeleting: false,"},{"lineNumber":566,"author":{"gitId":"-"},"content":"  isDuplicating: false,"},{"lineNumber":567,"author":{"gitId":"-"},"content":"  isEditable: false,"},{"lineNumber":568,"author":{"gitId":"-"},"content":"  isSaving: false,"},{"lineNumber":569,"author":{"gitId":"-"},"content":"  isCollapsed: false,"},{"lineNumber":570,"author":{"gitId":"-"},"content":"  isVisibilityChanged: false,"},{"lineNumber":571,"author":{"gitId":"-"},"content":"  isFeedbackPathChanged: false,"},{"lineNumber":572,"author":{"gitId":"-"},"content":"  isQuestionDetailsChanged: false,"},{"lineNumber":573,"author":{"gitId":"-"},"content":""},{"lineNumber":574,"author":{"gitId":"-"},"content":"  giverType: FeedbackParticipantType.STUDENTS,"},{"lineNumber":575,"author":{"gitId":"-"},"content":"  recipientType: FeedbackParticipantType.OWN_TEAM_MEMBERS,"},{"lineNumber":576,"author":{"gitId":"-"},"content":""},{"lineNumber":577,"author":{"gitId":"-"},"content":"  customNumberOfEntitiesToGiveFeedbackTo: 0,"},{"lineNumber":578,"author":{"gitId":"-"},"content":"  numberOfEntitiesToGiveFeedbackToSetting: NumberOfEntitiesToGiveFeedbackToSetting.UNLIMITED,"},{"lineNumber":579,"author":{"gitId":"-"},"content":""},{"lineNumber":580,"author":{"gitId":"-"},"content":"  showResponsesTo: [FeedbackVisibilityType.INSTRUCTORS, FeedbackVisibilityType.RECIPIENT],"},{"lineNumber":581,"author":{"gitId":"-"},"content":"  showGiverNameTo: [FeedbackVisibilityType.INSTRUCTORS],"},{"lineNumber":582,"author":{"gitId":"-"},"content":"  showRecipientNameTo: [FeedbackVisibilityType.INSTRUCTORS, FeedbackVisibilityType.RECIPIENT],"},{"lineNumber":583,"author":{"gitId":"-"},"content":"};"},{"lineNumber":584,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":585,"author":{"gitId":"-"},"content":" * Structure for example of distribute point option response output"},{"lineNumber":586,"author":{"gitId":"-"},"content":" */"},{"lineNumber":587,"author":{"gitId":"-"},"content":"export const EXAMPLE_DISTRIBUTE_POINT_OPTION_RESPONSE_OUTPUT: ResponseOutput[] \u003d ["},{"lineNumber":588,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":589,"author":{"gitId":"-"},"content":"    isMissingResponse: false,"},{"lineNumber":590,"author":{"gitId":"-"},"content":"    responseId: \u00271\u0027,"},{"lineNumber":591,"author":{"gitId":"-"},"content":"    giver: \u0027Alice\u0027,"},{"lineNumber":592,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 1\u0027,"},{"lineNumber":593,"author":{"gitId":"-"},"content":"    giverEmail: \u0027alice@gmail.com\u0027,"},{"lineNumber":594,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":595,"author":{"gitId":"-"},"content":"    recipient: \u0027Bob\u0027,"},{"lineNumber":596,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 2\u0027,"},{"lineNumber":597,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027bob@gmail.com\u0027,"},{"lineNumber":598,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":599,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":600,"author":{"gitId":"-"},"content":"      answers: [2, 8],"},{"lineNumber":601,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.CONSTSUM,"},{"lineNumber":602,"author":{"gitId":"-"},"content":"    } as FeedbackConstantSumResponseDetails,"},{"lineNumber":603,"author":{"gitId":"-"},"content":"    instructorComments: [],"},{"lineNumber":604,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":605,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":606,"author":{"gitId":"-"},"content":"    isMissingResponse: false,"},{"lineNumber":607,"author":{"gitId":"-"},"content":"    responseId: \u00272\u0027,"},{"lineNumber":608,"author":{"gitId":"-"},"content":"    giver: \u0027Charles\u0027,"},{"lineNumber":609,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 1\u0027,"},{"lineNumber":610,"author":{"gitId":"-"},"content":"    giverEmail: \u0027charles@gmail.com\u0027,"},{"lineNumber":611,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":612,"author":{"gitId":"-"},"content":"    recipient: \u0027Bob\u0027,"},{"lineNumber":613,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 2\u0027,"},{"lineNumber":614,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027bob@gmail.com\u0027,"},{"lineNumber":615,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":616,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":617,"author":{"gitId":"-"},"content":"      answers: [3, 7],"},{"lineNumber":618,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.CONSTSUM,"},{"lineNumber":619,"author":{"gitId":"-"},"content":"    } as FeedbackConstantSumResponseDetails,"},{"lineNumber":620,"author":{"gitId":"-"},"content":"    instructorComments: [],"},{"lineNumber":621,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":622,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":623,"author":{"gitId":"-"},"content":"    isMissingResponse: false,"},{"lineNumber":624,"author":{"gitId":"-"},"content":"    responseId: \u00273\u0027,"},{"lineNumber":625,"author":{"gitId":"-"},"content":"    giver: \u0027David\u0027,"},{"lineNumber":626,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 1\u0027,"},{"lineNumber":627,"author":{"gitId":"-"},"content":"    giverEmail: \u0027david@gmail.com\u0027,"},{"lineNumber":628,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":629,"author":{"gitId":"-"},"content":"    recipient: \u0027Bob\u0027,"},{"lineNumber":630,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 2\u0027,"},{"lineNumber":631,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027bob@gmail.com\u0027,"},{"lineNumber":632,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":633,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":634,"author":{"gitId":"-"},"content":"      answers: [5, 5],"},{"lineNumber":635,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.CONSTSUM,"},{"lineNumber":636,"author":{"gitId":"-"},"content":"    } as FeedbackConstantSumResponseDetails,"},{"lineNumber":637,"author":{"gitId":"-"},"content":"    instructorComments: [],"},{"lineNumber":638,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":639,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":640,"author":{"gitId":"-"},"content":"    isMissingResponse: false,"},{"lineNumber":641,"author":{"gitId":"-"},"content":"    responseId: \u00274\u0027,"},{"lineNumber":642,"author":{"gitId":"-"},"content":"    giver: \u0027Bob\u0027,"},{"lineNumber":643,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 2\u0027,"},{"lineNumber":644,"author":{"gitId":"-"},"content":"    giverEmail: \u0027bob@gmail.com\u0027,"},{"lineNumber":645,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":646,"author":{"gitId":"-"},"content":"    recipient: \u0027Bob\u0027,"},{"lineNumber":647,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 2\u0027,"},{"lineNumber":648,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027bob@gmail.com\u0027,"},{"lineNumber":649,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":650,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":651,"author":{"gitId":"-"},"content":"      answers: [5, 5],"},{"lineNumber":652,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.CONSTSUM,"},{"lineNumber":653,"author":{"gitId":"-"},"content":"    } as FeedbackConstantSumResponseDetails,"},{"lineNumber":654,"author":{"gitId":"-"},"content":"    instructorComments: [],"},{"lineNumber":655,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":656,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":657,"author":{"gitId":"-"},"content":"    isMissingResponse: false,"},{"lineNumber":658,"author":{"gitId":"-"},"content":"    responseId: \u00275\u0027,"},{"lineNumber":659,"author":{"gitId":"-"},"content":"    giver: \u0027Alice\u0027,"},{"lineNumber":660,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 1\u0027,"},{"lineNumber":661,"author":{"gitId":"-"},"content":"    giverEmail: \u0027alice@gmail.com\u0027,"},{"lineNumber":662,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":663,"author":{"gitId":"-"},"content":"    recipient: \u0027Emma\u0027,"},{"lineNumber":664,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 2\u0027,"},{"lineNumber":665,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027emma@gmail.com\u0027,"},{"lineNumber":666,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":667,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":668,"author":{"gitId":"-"},"content":"      answers: [9, 1],"},{"lineNumber":669,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.CONSTSUM,"},{"lineNumber":670,"author":{"gitId":"-"},"content":"    } as FeedbackConstantSumResponseDetails,"},{"lineNumber":671,"author":{"gitId":"-"},"content":"    instructorComments: [],"},{"lineNumber":672,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":673,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":674,"author":{"gitId":"-"},"content":"    isMissingResponse: false,"},{"lineNumber":675,"author":{"gitId":"-"},"content":"    responseId: \u00276\u0027,"},{"lineNumber":676,"author":{"gitId":"-"},"content":"    giver: \u0027Charles\u0027,"},{"lineNumber":677,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 1\u0027,"},{"lineNumber":678,"author":{"gitId":"-"},"content":"    giverEmail: \u0027charles@gmail.com\u0027,"},{"lineNumber":679,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":680,"author":{"gitId":"-"},"content":"    recipient: \u0027Emma\u0027,"},{"lineNumber":681,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 2\u0027,"},{"lineNumber":682,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027emma@gmail.com\u0027,"},{"lineNumber":683,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":684,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":685,"author":{"gitId":"-"},"content":"      answers: [6, 4],"},{"lineNumber":686,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.CONSTSUM,"},{"lineNumber":687,"author":{"gitId":"-"},"content":"    } as FeedbackConstantSumResponseDetails,"},{"lineNumber":688,"author":{"gitId":"-"},"content":"    instructorComments: [],"},{"lineNumber":689,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":690,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":691,"author":{"gitId":"-"},"content":"    isMissingResponse: false,"},{"lineNumber":692,"author":{"gitId":"-"},"content":"    responseId: \u00277\u0027,"},{"lineNumber":693,"author":{"gitId":"-"},"content":"    giver: \u0027David\u0027,"},{"lineNumber":694,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 1\u0027,"},{"lineNumber":695,"author":{"gitId":"-"},"content":"    giverEmail: \u0027david@gmail.com\u0027,"},{"lineNumber":696,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":697,"author":{"gitId":"-"},"content":"    recipient: \u0027Emma\u0027,"},{"lineNumber":698,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 2\u0027,"},{"lineNumber":699,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027emma@gmail.com\u0027,"},{"lineNumber":700,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":701,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":702,"author":{"gitId":"-"},"content":"      answers: [4, 6],"},{"lineNumber":703,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.CONSTSUM,"},{"lineNumber":704,"author":{"gitId":"-"},"content":"    } as FeedbackConstantSumResponseDetails,"},{"lineNumber":705,"author":{"gitId":"-"},"content":"    instructorComments: [],"},{"lineNumber":706,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":707,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":708,"author":{"gitId":"-"},"content":"    isMissingResponse: false,"},{"lineNumber":709,"author":{"gitId":"-"},"content":"    responseId: \u00278\u0027,"},{"lineNumber":710,"author":{"gitId":"-"},"content":"    giver: \u0027Emma\u0027,"},{"lineNumber":711,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 2\u0027,"},{"lineNumber":712,"author":{"gitId":"-"},"content":"    giverEmail: \u0027emma@gmail.com\u0027,"},{"lineNumber":713,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":714,"author":{"gitId":"-"},"content":"    recipient: \u0027Emma\u0027,"},{"lineNumber":715,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 2\u0027,"},{"lineNumber":716,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027emma@gmail.com\u0027,"},{"lineNumber":717,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":718,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":719,"author":{"gitId":"-"},"content":"      answers: [7, 3],"},{"lineNumber":720,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.CONSTSUM,"},{"lineNumber":721,"author":{"gitId":"-"},"content":"    } as FeedbackConstantSumResponseDetails,"},{"lineNumber":722,"author":{"gitId":"-"},"content":"    instructorComments: [],"},{"lineNumber":723,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":724,"author":{"gitId":"-"},"content":"];"},{"lineNumber":725,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":726,"author":{"gitId":"-"},"content":" * Structure for example of distribute point option question tab model"},{"lineNumber":727,"author":{"gitId":"-"},"content":" */"},{"lineNumber":728,"author":{"gitId":"-"},"content":"export const EXAMPLE_DISTRIBUTE_POINT_OPTION_QUESTION_TAB_MODEL: QuestionTabModel \u003d {"},{"lineNumber":729,"author":{"gitId":"-"},"content":"  question: EXAMPLE_DISTRIBUTED_POINT_OPTION_MODEL,"},{"lineNumber":730,"author":{"gitId":"-"},"content":"  responses: EXAMPLE_DISTRIBUTE_POINT_OPTION_RESPONSE_OUTPUT,"},{"lineNumber":731,"author":{"gitId":"-"},"content":"  statistics: \u0027\u0027,"},{"lineNumber":732,"author":{"gitId":"-"},"content":"  hasPopulated: true,"},{"lineNumber":733,"author":{"gitId":"-"},"content":"  isTabExpanded: true,"},{"lineNumber":734,"author":{"gitId":"-"},"content":"};"},{"lineNumber":735,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":736,"author":{"gitId":"-"},"content":" * Structure for example of distribute point option questions"},{"lineNumber":737,"author":{"gitId":"-"},"content":" */"},{"lineNumber":738,"author":{"gitId":"-"},"content":"export const EXAMPLE_DISTRIBUTE_POINT_OPTION_QUESTIONS: Record\u003cstring, QuestionTabModel\u003e \u003d {"},{"lineNumber":739,"author":{"gitId":"-"},"content":"  question: EXAMPLE_DISTRIBUTE_POINT_OPTION_QUESTION_TAB_MODEL,"},{"lineNumber":740,"author":{"gitId":"-"},"content":"};"},{"lineNumber":741,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":742,"author":{"gitId":"-"},"content":" * Structure for example of distributed point recipient model"},{"lineNumber":743,"author":{"gitId":"-"},"content":" */"},{"lineNumber":744,"author":{"gitId":"-"},"content":"export const EXAMPLE_DISTRIBUTED_POINT_RECIPIENT_MODEL: QuestionEditFormModel \u003d {"},{"lineNumber":745,"author":{"gitId":"-"},"content":"  feedbackQuestionId: \u0027\u0027,"},{"lineNumber":746,"author":{"gitId":"-"},"content":"  isQuestionHasResponses: false,"},{"lineNumber":747,"author":{"gitId":"-"},"content":""},{"lineNumber":748,"author":{"gitId":"-"},"content":"  questionNumber: 1,"},{"lineNumber":749,"author":{"gitId":"-"},"content":"  questionBrief: \u0027\u0027,"},{"lineNumber":750,"author":{"gitId":"-"},"content":"  questionDescription: \u0027\u0027,"},{"lineNumber":751,"author":{"gitId":"-"},"content":"  questionType: FeedbackQuestionType.CONSTSUM_RECIPIENTS,"},{"lineNumber":752,"author":{"gitId":"-"},"content":"  questionDetails: DEFAULT_CONSTSUM_RECIPIENTS_QUESTION_DETAILS(),"},{"lineNumber":753,"author":{"gitId":"-"},"content":""},{"lineNumber":754,"author":{"gitId":"-"},"content":"  isDeleting: false,"},{"lineNumber":755,"author":{"gitId":"-"},"content":"  isDuplicating: false,"},{"lineNumber":756,"author":{"gitId":"-"},"content":"  isEditable: false,"},{"lineNumber":757,"author":{"gitId":"-"},"content":"  isSaving: false,"},{"lineNumber":758,"author":{"gitId":"-"},"content":"  isCollapsed: false,"},{"lineNumber":759,"author":{"gitId":"-"},"content":"  isVisibilityChanged: false,"},{"lineNumber":760,"author":{"gitId":"-"},"content":"  isFeedbackPathChanged: false,"},{"lineNumber":761,"author":{"gitId":"-"},"content":"  isQuestionDetailsChanged: false,"},{"lineNumber":762,"author":{"gitId":"-"},"content":""},{"lineNumber":763,"author":{"gitId":"-"},"content":"  giverType: FeedbackParticipantType.STUDENTS,"},{"lineNumber":764,"author":{"gitId":"-"},"content":"  recipientType: FeedbackParticipantType.OWN_TEAM_MEMBERS,"},{"lineNumber":765,"author":{"gitId":"-"},"content":""},{"lineNumber":766,"author":{"gitId":"-"},"content":"  customNumberOfEntitiesToGiveFeedbackTo: 0,"},{"lineNumber":767,"author":{"gitId":"-"},"content":"  numberOfEntitiesToGiveFeedbackToSetting: NumberOfEntitiesToGiveFeedbackToSetting.UNLIMITED,"},{"lineNumber":768,"author":{"gitId":"-"},"content":""},{"lineNumber":769,"author":{"gitId":"-"},"content":"  showResponsesTo: [FeedbackVisibilityType.INSTRUCTORS, FeedbackVisibilityType.RECIPIENT],"},{"lineNumber":770,"author":{"gitId":"-"},"content":"  showGiverNameTo: [FeedbackVisibilityType.INSTRUCTORS],"},{"lineNumber":771,"author":{"gitId":"-"},"content":"  showRecipientNameTo: [FeedbackVisibilityType.INSTRUCTORS, FeedbackVisibilityType.RECIPIENT],"},{"lineNumber":772,"author":{"gitId":"-"},"content":"};"},{"lineNumber":773,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":774,"author":{"gitId":"-"},"content":" * Structure for example of team contribution question model"},{"lineNumber":775,"author":{"gitId":"-"},"content":" */"},{"lineNumber":776,"author":{"gitId":"-"},"content":"export const EXAMPLE_TEAM_CONTRIBUTION_QUESTION_MODEL: QuestionEditFormModel \u003d {"},{"lineNumber":777,"author":{"gitId":"-"},"content":"  feedbackQuestionId: \u0027\u0027,"},{"lineNumber":778,"author":{"gitId":"-"},"content":"  isQuestionHasResponses: false,"},{"lineNumber":779,"author":{"gitId":"-"},"content":""},{"lineNumber":780,"author":{"gitId":"-"},"content":"  questionNumber: 1,"},{"lineNumber":781,"author":{"gitId":"-"},"content":"  questionBrief: \u0027\u0027,"},{"lineNumber":782,"author":{"gitId":"-"},"content":"  questionDescription: \u0027\u0027,"},{"lineNumber":783,"author":{"gitId":"-"},"content":"  questionType: FeedbackQuestionType.CONTRIB,"},{"lineNumber":784,"author":{"gitId":"-"},"content":"  questionDetails: DEFAULT_CONTRIBUTION_QUESTION_DETAILS(),"},{"lineNumber":785,"author":{"gitId":"-"},"content":""},{"lineNumber":786,"author":{"gitId":"-"},"content":"  isDeleting: false,"},{"lineNumber":787,"author":{"gitId":"-"},"content":"  isDuplicating: false,"},{"lineNumber":788,"author":{"gitId":"-"},"content":"  isEditable: false,"},{"lineNumber":789,"author":{"gitId":"-"},"content":"  isSaving: false,"},{"lineNumber":790,"author":{"gitId":"-"},"content":"  isCollapsed: false,"},{"lineNumber":791,"author":{"gitId":"-"},"content":"  isVisibilityChanged: false,"},{"lineNumber":792,"author":{"gitId":"-"},"content":"  isFeedbackPathChanged: false,"},{"lineNumber":793,"author":{"gitId":"-"},"content":"  isQuestionDetailsChanged: false,"},{"lineNumber":794,"author":{"gitId":"-"},"content":""},{"lineNumber":795,"author":{"gitId":"-"},"content":"  giverType: FeedbackParticipantType.STUDENTS,"},{"lineNumber":796,"author":{"gitId":"-"},"content":"  recipientType: FeedbackParticipantType.OWN_TEAM_MEMBERS_INCLUDING_SELF,"},{"lineNumber":797,"author":{"gitId":"-"},"content":""},{"lineNumber":798,"author":{"gitId":"-"},"content":"  customNumberOfEntitiesToGiveFeedbackTo: 0,"},{"lineNumber":799,"author":{"gitId":"-"},"content":"  numberOfEntitiesToGiveFeedbackToSetting: NumberOfEntitiesToGiveFeedbackToSetting.UNLIMITED,"},{"lineNumber":800,"author":{"gitId":"-"},"content":""},{"lineNumber":801,"author":{"gitId":"-"},"content":"  showResponsesTo: [FeedbackVisibilityType.INSTRUCTORS, FeedbackVisibilityType.RECIPIENT,"},{"lineNumber":802,"author":{"gitId":"-"},"content":"    FeedbackVisibilityType.GIVER_TEAM_MEMBERS],"},{"lineNumber":803,"author":{"gitId":"-"},"content":"  showGiverNameTo: [FeedbackVisibilityType.INSTRUCTORS],"},{"lineNumber":804,"author":{"gitId":"-"},"content":"  showRecipientNameTo: [FeedbackVisibilityType.INSTRUCTORS, FeedbackVisibilityType.RECIPIENT],"},{"lineNumber":805,"author":{"gitId":"-"},"content":"};"},{"lineNumber":806,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":807,"author":{"gitId":"-"},"content":" * Structure for example of team contribution response output"},{"lineNumber":808,"author":{"gitId":"-"},"content":" */"},{"lineNumber":809,"author":{"gitId":"-"},"content":"export const EXAMPLE_TEAM_CONTRIBUTION_RESPONSE_OUTPUT: ResponseOutput[] \u003d ["},{"lineNumber":810,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":811,"author":{"gitId":"-"},"content":"    isMissingResponse: false,"},{"lineNumber":812,"author":{"gitId":"-"},"content":"    responseId: \u00271\u0027,"},{"lineNumber":813,"author":{"gitId":"-"},"content":"    giver: \u0027Alice\u0027,"},{"lineNumber":814,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 1\u0027,"},{"lineNumber":815,"author":{"gitId":"-"},"content":"    giverEmail: \u0027alice@gmail.com\u0027,"},{"lineNumber":816,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":817,"author":{"gitId":"-"},"content":"    recipient: \u0027Bob\u0027,"},{"lineNumber":818,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 2\u0027,"},{"lineNumber":819,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027bob@gmail.com\u0027,"},{"lineNumber":820,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":821,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":822,"author":{"gitId":"-"},"content":"      answer: 90,"},{"lineNumber":823,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.CONTRIB,"},{"lineNumber":824,"author":{"gitId":"-"},"content":"    } as FeedbackContributionResponseDetails,"},{"lineNumber":825,"author":{"gitId":"-"},"content":"    instructorComments: [],"},{"lineNumber":826,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":827,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":828,"author":{"gitId":"-"},"content":"    isMissingResponse: false,"},{"lineNumber":829,"author":{"gitId":"-"},"content":"    responseId: \u00272\u0027,"},{"lineNumber":830,"author":{"gitId":"-"},"content":"    giver: \u0027Charles\u0027,"},{"lineNumber":831,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 1\u0027,"},{"lineNumber":832,"author":{"gitId":"-"},"content":"    giverEmail: \u0027charles@gmail.com\u0027,"},{"lineNumber":833,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":834,"author":{"gitId":"-"},"content":"    recipient: \u0027Bob\u0027,"},{"lineNumber":835,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 2\u0027,"},{"lineNumber":836,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027bob@gmail.com\u0027,"},{"lineNumber":837,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":838,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":839,"author":{"gitId":"-"},"content":"      answer: 70,"},{"lineNumber":840,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.CONTRIB,"},{"lineNumber":841,"author":{"gitId":"-"},"content":"    } as FeedbackContributionResponseDetails,"},{"lineNumber":842,"author":{"gitId":"-"},"content":"    instructorComments: [],"},{"lineNumber":843,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":844,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":845,"author":{"gitId":"-"},"content":"    isMissingResponse: false,"},{"lineNumber":846,"author":{"gitId":"-"},"content":"    responseId: \u00273\u0027,"},{"lineNumber":847,"author":{"gitId":"-"},"content":"    giver: \u0027David\u0027,"},{"lineNumber":848,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 1\u0027,"},{"lineNumber":849,"author":{"gitId":"-"},"content":"    giverEmail: \u0027david@gmail.com\u0027,"},{"lineNumber":850,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":851,"author":{"gitId":"-"},"content":"    recipient: \u0027Bob\u0027,"},{"lineNumber":852,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 2\u0027,"},{"lineNumber":853,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027bob@gmail.com\u0027,"},{"lineNumber":854,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":855,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":856,"author":{"gitId":"-"},"content":"      answer: 120,"},{"lineNumber":857,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.CONTRIB,"},{"lineNumber":858,"author":{"gitId":"-"},"content":"    } as FeedbackContributionResponseDetails,"},{"lineNumber":859,"author":{"gitId":"-"},"content":"    instructorComments: [],"},{"lineNumber":860,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":861,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":862,"author":{"gitId":"-"},"content":"    isMissingResponse: false,"},{"lineNumber":863,"author":{"gitId":"-"},"content":"    responseId: \u00274\u0027,"},{"lineNumber":864,"author":{"gitId":"-"},"content":"    giver: \u0027Bob\u0027,"},{"lineNumber":865,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 2\u0027,"},{"lineNumber":866,"author":{"gitId":"-"},"content":"    giverEmail: \u0027bob@gmail.com\u0027,"},{"lineNumber":867,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":868,"author":{"gitId":"-"},"content":"    recipient: \u0027Bob\u0027,"},{"lineNumber":869,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 2\u0027,"},{"lineNumber":870,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027bob@gmail.com\u0027,"},{"lineNumber":871,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":872,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":873,"author":{"gitId":"-"},"content":"      answer: 100,"},{"lineNumber":874,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.CONTRIB,"},{"lineNumber":875,"author":{"gitId":"-"},"content":"    } as FeedbackContributionResponseDetails,"},{"lineNumber":876,"author":{"gitId":"-"},"content":"    instructorComments: [],"},{"lineNumber":877,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":878,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":879,"author":{"gitId":"-"},"content":"    isMissingResponse: false,"},{"lineNumber":880,"author":{"gitId":"-"},"content":"    responseId: \u00275\u0027,"},{"lineNumber":881,"author":{"gitId":"-"},"content":"    giver: \u0027Alice\u0027,"},{"lineNumber":882,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 1\u0027,"},{"lineNumber":883,"author":{"gitId":"-"},"content":"    giverEmail: \u0027alice@gmail.com\u0027,"},{"lineNumber":884,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":885,"author":{"gitId":"-"},"content":"    recipient: \u0027Emma\u0027,"},{"lineNumber":886,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 2\u0027,"},{"lineNumber":887,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027emma@gmail.com\u0027,"},{"lineNumber":888,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":889,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":890,"author":{"gitId":"-"},"content":"      answer: 110,"},{"lineNumber":891,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.CONTRIB,"},{"lineNumber":892,"author":{"gitId":"-"},"content":"    } as FeedbackContributionResponseDetails,"},{"lineNumber":893,"author":{"gitId":"-"},"content":"    instructorComments: [],"},{"lineNumber":894,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":895,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":896,"author":{"gitId":"-"},"content":"    isMissingResponse: false,"},{"lineNumber":897,"author":{"gitId":"-"},"content":"    responseId: \u00276\u0027,"},{"lineNumber":898,"author":{"gitId":"-"},"content":"    giver: \u0027Charles\u0027,"},{"lineNumber":899,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 1\u0027,"},{"lineNumber":900,"author":{"gitId":"-"},"content":"    giverEmail: \u0027charles@gmail.com\u0027,"},{"lineNumber":901,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":902,"author":{"gitId":"-"},"content":"    recipient: \u0027Emma\u0027,"},{"lineNumber":903,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 2\u0027,"},{"lineNumber":904,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027emma@gmail.com\u0027,"},{"lineNumber":905,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":906,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":907,"author":{"gitId":"-"},"content":"      answer: 110,"},{"lineNumber":908,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.CONTRIB,"},{"lineNumber":909,"author":{"gitId":"-"},"content":"    } as FeedbackContributionResponseDetails,"},{"lineNumber":910,"author":{"gitId":"-"},"content":"    instructorComments: [],"},{"lineNumber":911,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":912,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":913,"author":{"gitId":"-"},"content":"    isMissingResponse: false,"},{"lineNumber":914,"author":{"gitId":"-"},"content":"    responseId: \u00277\u0027,"},{"lineNumber":915,"author":{"gitId":"-"},"content":"    giver: \u0027David\u0027,"},{"lineNumber":916,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 1\u0027,"},{"lineNumber":917,"author":{"gitId":"-"},"content":"    giverEmail: \u0027david@gmail.com\u0027,"},{"lineNumber":918,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":919,"author":{"gitId":"-"},"content":"    recipient: \u0027Emma\u0027,"},{"lineNumber":920,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 2\u0027,"},{"lineNumber":921,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027emma@gmail.com\u0027,"},{"lineNumber":922,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":923,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":924,"author":{"gitId":"-"},"content":"      answer: 100,"},{"lineNumber":925,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.CONTRIB,"},{"lineNumber":926,"author":{"gitId":"-"},"content":"    } as FeedbackContributionResponseDetails,"},{"lineNumber":927,"author":{"gitId":"-"},"content":"    instructorComments: [],"},{"lineNumber":928,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":929,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":930,"author":{"gitId":"-"},"content":"    isMissingResponse: false,"},{"lineNumber":931,"author":{"gitId":"-"},"content":"    responseId: \u00278\u0027,"},{"lineNumber":932,"author":{"gitId":"-"},"content":"    giver: \u0027Emma\u0027,"},{"lineNumber":933,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 2\u0027,"},{"lineNumber":934,"author":{"gitId":"-"},"content":"    giverEmail: \u0027emma@gmail.com\u0027,"},{"lineNumber":935,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":936,"author":{"gitId":"-"},"content":"    recipient: \u0027Emma\u0027,"},{"lineNumber":937,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 2\u0027,"},{"lineNumber":938,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027emma@gmail.com\u0027,"},{"lineNumber":939,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":940,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":941,"author":{"gitId":"-"},"content":"      answer: 110,"},{"lineNumber":942,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.CONTRIB,"},{"lineNumber":943,"author":{"gitId":"-"},"content":"    } as FeedbackContributionResponseDetails,"},{"lineNumber":944,"author":{"gitId":"-"},"content":"    instructorComments: [],"},{"lineNumber":945,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":946,"author":{"gitId":"-"},"content":"];"},{"lineNumber":947,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":948,"author":{"gitId":"-"},"content":" * Structure for example of contribution statistics"},{"lineNumber":949,"author":{"gitId":"-"},"content":" */"},{"lineNumber":950,"author":{"gitId":"-"},"content":"export const EXAMPLE_CONTRIBUTION_STATISTICS: ContributionStatistics \u003d {"},{"lineNumber":951,"author":{"gitId":"-"},"content":"  results: {"},{"lineNumber":952,"author":{"gitId":"-"},"content":"    \u0027alice@gmail.com\u0027: {"},{"lineNumber":953,"author":{"gitId":"-"},"content":"      claimed: -999,"},{"lineNumber":954,"author":{"gitId":"-"},"content":"      perceived: -9999,"},{"lineNumber":955,"author":{"gitId":"-"},"content":"      claimedOthers: {"},{"lineNumber":956,"author":{"gitId":"-"},"content":"        \u0027bob@gmail.com\u0027: 90,"},{"lineNumber":957,"author":{"gitId":"-"},"content":"        \u0027emma@gmail.com\u0027: 110,"},{"lineNumber":958,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":959,"author":{"gitId":"-"},"content":"      perceivedOthers: [],"},{"lineNumber":960,"author":{"gitId":"-"},"content":"    },"},{"lineNumber":961,"author":{"gitId":"-"},"content":"    \u0027bob@gmail.com\u0027: {"},{"lineNumber":962,"author":{"gitId":"-"},"content":"      claimed: 100,"},{"lineNumber":963,"author":{"gitId":"-"},"content":"      perceived: 92,"},{"lineNumber":964,"author":{"gitId":"-"},"content":"      claimedOthers: {},"},{"lineNumber":965,"author":{"gitId":"-"},"content":"      perceivedOthers: [109, 90, 78, -9999],"},{"lineNumber":966,"author":{"gitId":"-"},"content":"    },"},{"lineNumber":967,"author":{"gitId":"-"},"content":"    \u0027charles@gmail.com\u0027: {"},{"lineNumber":968,"author":{"gitId":"-"},"content":"      claimed: -999,"},{"lineNumber":969,"author":{"gitId":"-"},"content":"      perceived: -9999,"},{"lineNumber":970,"author":{"gitId":"-"},"content":"      claimedOthers: {"},{"lineNumber":971,"author":{"gitId":"-"},"content":"        \u0027bob@gmail.com\u0027: 78,"},{"lineNumber":972,"author":{"gitId":"-"},"content":"        \u0027emma@gmail.com\u0027: 122,"},{"lineNumber":973,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":974,"author":{"gitId":"-"},"content":"      perceivedOthers: [],"},{"lineNumber":975,"author":{"gitId":"-"},"content":"    },"},{"lineNumber":976,"author":{"gitId":"-"},"content":"    \u0027david@gmail.com\u0027: {"},{"lineNumber":977,"author":{"gitId":"-"},"content":"      claimed: -999,"},{"lineNumber":978,"author":{"gitId":"-"},"content":"      perceived: -9999,"},{"lineNumber":979,"author":{"gitId":"-"},"content":"      claimedOthers: {"},{"lineNumber":980,"author":{"gitId":"-"},"content":"        \u0027bob@gmail.com\u0027: 109,"},{"lineNumber":981,"author":{"gitId":"-"},"content":"        \u0027emma@gmail.com\u0027: 91,"},{"lineNumber":982,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":983,"author":{"gitId":"-"},"content":"      perceivedOthers: [],"},{"lineNumber":984,"author":{"gitId":"-"},"content":"    },"},{"lineNumber":985,"author":{"gitId":"-"},"content":"    \u0027emma@gmail.com\u0027: {"},{"lineNumber":986,"author":{"gitId":"-"},"content":"      claimed: 110,"},{"lineNumber":987,"author":{"gitId":"-"},"content":"      perceived: 108,"},{"lineNumber":988,"author":{"gitId":"-"},"content":"      claimedOthers: {},"},{"lineNumber":989,"author":{"gitId":"-"},"content":"      perceivedOthers: [122, 110, 91, -9999],"},{"lineNumber":990,"author":{"gitId":"-"},"content":"    },"},{"lineNumber":991,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":992,"author":{"gitId":"-"},"content":"};"},{"lineNumber":993,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":994,"author":{"gitId":"-"},"content":" * Structure for example of team contribution question tab model"},{"lineNumber":995,"author":{"gitId":"-"},"content":" */"},{"lineNumber":996,"author":{"gitId":"-"},"content":"export const EXAMPLE_TEAM_CONTRIBUTION_QUESTION_TAB_MODEL: QuestionTabModel \u003d {"},{"lineNumber":997,"author":{"gitId":"-"},"content":"  question: EXAMPLE_TEAM_CONTRIBUTION_QUESTION_MODEL,"},{"lineNumber":998,"author":{"gitId":"-"},"content":"  responses: EXAMPLE_TEAM_CONTRIBUTION_RESPONSE_OUTPUT,"},{"lineNumber":999,"author":{"gitId":"-"},"content":"  statistics: JSON.stringify(EXAMPLE_CONTRIBUTION_STATISTICS),"},{"lineNumber":1000,"author":{"gitId":"-"},"content":"  hasPopulated: true,"},{"lineNumber":1001,"author":{"gitId":"-"},"content":"  isTabExpanded: true,"},{"lineNumber":1002,"author":{"gitId":"-"},"content":"};"},{"lineNumber":1003,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":1004,"author":{"gitId":"-"},"content":" * Structure for example of team contribution questions"},{"lineNumber":1005,"author":{"gitId":"-"},"content":" */"},{"lineNumber":1006,"author":{"gitId":"-"},"content":"export const EXAMPLE_TEAM_CONTRIBUTION_QUESTIONS: Record\u003cstring, QuestionTabModel\u003e \u003d {"},{"lineNumber":1007,"author":{"gitId":"-"},"content":"  question: EXAMPLE_TEAM_CONTRIBUTION_QUESTION_TAB_MODEL,"},{"lineNumber":1008,"author":{"gitId":"-"},"content":"};"},{"lineNumber":1009,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":1010,"author":{"gitId":"-"},"content":" * Structure for example of rubric question model"},{"lineNumber":1011,"author":{"gitId":"-"},"content":" */"},{"lineNumber":1012,"author":{"gitId":"-"},"content":"export const EXAMPLE_RUBRIC_QUESTION_MODEL: QuestionEditFormModel \u003d {"},{"lineNumber":1013,"author":{"gitId":"-"},"content":"  feedbackQuestionId: \u0027\u0027,"},{"lineNumber":1014,"author":{"gitId":"-"},"content":"  isQuestionHasResponses: false,"},{"lineNumber":1015,"author":{"gitId":"-"},"content":""},{"lineNumber":1016,"author":{"gitId":"-"},"content":"  questionNumber: 1,"},{"lineNumber":1017,"author":{"gitId":"-"},"content":"  questionBrief: \u0027\u0027,"},{"lineNumber":1018,"author":{"gitId":"-"},"content":"  questionDescription: \u0027\u0027,"},{"lineNumber":1019,"author":{"gitId":"-"},"content":"  questionType: FeedbackQuestionType.RUBRIC,"},{"lineNumber":1020,"author":{"gitId":"-"},"content":"  questionDetails: {"},{"lineNumber":1021,"author":{"gitId":"-"},"content":"    ...DEFAULT_RUBRIC_QUESTION_DETAILS(),"},{"lineNumber":1022,"author":{"gitId":"-"},"content":"    rubricChoices: [\u0027Strongly Disagree\u0027, \u0027Disagree\u0027, \u0027Agree\u0027, \u0027Strongly Agree\u0027],"},{"lineNumber":1023,"author":{"gitId":"-"},"content":"    rubricSubQuestions:"},{"lineNumber":1024,"author":{"gitId":"-"},"content":"      [\u0027This student participates well in online discussions.\u0027, \u0027This student completes assigned tasks on time.\u0027],"},{"lineNumber":1025,"author":{"gitId":"-"},"content":"    rubricDescriptions: ["},{"lineNumber":1026,"author":{"gitId":"-"},"content":"      [\u0027Rarely or never responds.\u0027, \u0027Occasionally responds, but never initiates discussions.\u0027,"},{"lineNumber":1027,"author":{"gitId":"-"},"content":"        \u0027Takes part in discussions and sometimes initiates discussions.\u0027,"},{"lineNumber":1028,"author":{"gitId":"-"},"content":"        \u0027Initiates discussions frequently, and engages the team.\u0027],"},{"lineNumber":1029,"author":{"gitId":"-"},"content":"      [\u0027Rarely or never completes tasks.\u0027, \u0027Often misses deadlines.\u0027, \u0027Occasionally misses deadlines.\u0027,"},{"lineNumber":1030,"author":{"gitId":"-"},"content":"        \u0027Tasks are always completed before the deadline.\u0027]],"},{"lineNumber":1031,"author":{"gitId":"-"},"content":"  } as FeedbackRubricQuestionDetails,"},{"lineNumber":1032,"author":{"gitId":"-"},"content":""},{"lineNumber":1033,"author":{"gitId":"-"},"content":"  isDeleting: false,"},{"lineNumber":1034,"author":{"gitId":"-"},"content":"  isDuplicating: false,"},{"lineNumber":1035,"author":{"gitId":"-"},"content":"  isEditable: false,"},{"lineNumber":1036,"author":{"gitId":"-"},"content":"  isSaving: false,"},{"lineNumber":1037,"author":{"gitId":"-"},"content":"  isCollapsed: false,"},{"lineNumber":1038,"author":{"gitId":"-"},"content":"  isVisibilityChanged: false,"},{"lineNumber":1039,"author":{"gitId":"-"},"content":"  isFeedbackPathChanged: false,"},{"lineNumber":1040,"author":{"gitId":"-"},"content":"  isQuestionDetailsChanged: false,"},{"lineNumber":1041,"author":{"gitId":"-"},"content":""},{"lineNumber":1042,"author":{"gitId":"-"},"content":"  giverType: FeedbackParticipantType.STUDENTS,"},{"lineNumber":1043,"author":{"gitId":"-"},"content":"  recipientType: FeedbackParticipantType.OWN_TEAM_MEMBERS,"},{"lineNumber":1044,"author":{"gitId":"-"},"content":""},{"lineNumber":1045,"author":{"gitId":"-"},"content":"  customNumberOfEntitiesToGiveFeedbackTo: 0,"},{"lineNumber":1046,"author":{"gitId":"-"},"content":"  numberOfEntitiesToGiveFeedbackToSetting: NumberOfEntitiesToGiveFeedbackToSetting.UNLIMITED,"},{"lineNumber":1047,"author":{"gitId":"-"},"content":""},{"lineNumber":1048,"author":{"gitId":"-"},"content":"  showResponsesTo: [FeedbackVisibilityType.INSTRUCTORS, FeedbackVisibilityType.RECIPIENT],"},{"lineNumber":1049,"author":{"gitId":"-"},"content":"  showGiverNameTo: [FeedbackVisibilityType.INSTRUCTORS],"},{"lineNumber":1050,"author":{"gitId":"-"},"content":"  showRecipientNameTo: [FeedbackVisibilityType.INSTRUCTORS, FeedbackVisibilityType.RECIPIENT],"},{"lineNumber":1051,"author":{"gitId":"-"},"content":"};"},{"lineNumber":1052,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":1053,"author":{"gitId":"-"},"content":" * Structure for example of rubric question response output"},{"lineNumber":1054,"author":{"gitId":"-"},"content":" */"},{"lineNumber":1055,"author":{"gitId":"-"},"content":"export const EXAMPLE_RUBRIC_QUESTION_RESPONSE_OUTPUT: ResponseOutput[] \u003d ["},{"lineNumber":1056,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":1057,"author":{"gitId":"-"},"content":"    isMissingResponse: false,"},{"lineNumber":1058,"author":{"gitId":"-"},"content":"    responseId: \u00271\u0027,"},{"lineNumber":1059,"author":{"gitId":"-"},"content":"    giver: \u0027Alice\u0027,"},{"lineNumber":1060,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 1\u0027,"},{"lineNumber":1061,"author":{"gitId":"-"},"content":"    giverEmail: \u0027alice@gmail.com\u0027,"},{"lineNumber":1062,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":1063,"author":{"gitId":"-"},"content":"    recipient: \u0027Bob\u0027,"},{"lineNumber":1064,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 2\u0027,"},{"lineNumber":1065,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027bob@gmail.com\u0027,"},{"lineNumber":1066,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":1067,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":1068,"author":{"gitId":"-"},"content":"      answer: [0, 0],"},{"lineNumber":1069,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.RUBRIC,"},{"lineNumber":1070,"author":{"gitId":"-"},"content":"    } as FeedbackRubricResponseDetails,"},{"lineNumber":1071,"author":{"gitId":"-"},"content":"    instructorComments: [],"},{"lineNumber":1072,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":1073,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":1074,"author":{"gitId":"-"},"content":"    isMissingResponse: false,"},{"lineNumber":1075,"author":{"gitId":"-"},"content":"    responseId: \u00272\u0027,"},{"lineNumber":1076,"author":{"gitId":"-"},"content":"    giver: \u0027Charles\u0027,"},{"lineNumber":1077,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 1\u0027,"},{"lineNumber":1078,"author":{"gitId":"-"},"content":"    giverEmail: \u0027charles@gmail.com\u0027,"},{"lineNumber":1079,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":1080,"author":{"gitId":"-"},"content":"    recipient: \u0027Bob\u0027,"},{"lineNumber":1081,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 2\u0027,"},{"lineNumber":1082,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027bob@gmail.com\u0027,"},{"lineNumber":1083,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":1084,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":1085,"author":{"gitId":"-"},"content":"      answer: [2, 2],"},{"lineNumber":1086,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.RUBRIC,"},{"lineNumber":1087,"author":{"gitId":"-"},"content":"    } as FeedbackRubricResponseDetails,"},{"lineNumber":1088,"author":{"gitId":"-"},"content":"    instructorComments: [],"},{"lineNumber":1089,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":1090,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":1091,"author":{"gitId":"-"},"content":"    isMissingResponse: false,"},{"lineNumber":1092,"author":{"gitId":"-"},"content":"    responseId: \u00273\u0027,"},{"lineNumber":1093,"author":{"gitId":"-"},"content":"    giver: \u0027David\u0027,"},{"lineNumber":1094,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 1\u0027,"},{"lineNumber":1095,"author":{"gitId":"-"},"content":"    giverEmail: \u0027david@gmail.com\u0027,"},{"lineNumber":1096,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":1097,"author":{"gitId":"-"},"content":"    recipient: \u0027Bob\u0027,"},{"lineNumber":1098,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 2\u0027,"},{"lineNumber":1099,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027bob@gmail.com\u0027,"},{"lineNumber":1100,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":1101,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":1102,"author":{"gitId":"-"},"content":"      answer: [1, 1],"},{"lineNumber":1103,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.RUBRIC,"},{"lineNumber":1104,"author":{"gitId":"-"},"content":"    } as FeedbackRubricResponseDetails,"},{"lineNumber":1105,"author":{"gitId":"-"},"content":"    instructorComments: [],"},{"lineNumber":1106,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":1107,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":1108,"author":{"gitId":"-"},"content":"    isMissingResponse: false,"},{"lineNumber":1109,"author":{"gitId":"-"},"content":"    responseId: \u00274\u0027,"},{"lineNumber":1110,"author":{"gitId":"-"},"content":"    giver: \u0027Bob\u0027,"},{"lineNumber":1111,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 2\u0027,"},{"lineNumber":1112,"author":{"gitId":"-"},"content":"    giverEmail: \u0027bob@gmail.com\u0027,"},{"lineNumber":1113,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":1114,"author":{"gitId":"-"},"content":"    recipient: \u0027Bob\u0027,"},{"lineNumber":1115,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 2\u0027,"},{"lineNumber":1116,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027bob@gmail.com\u0027,"},{"lineNumber":1117,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":1118,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":1119,"author":{"gitId":"-"},"content":"      answer: [1, 2],"},{"lineNumber":1120,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.RUBRIC,"},{"lineNumber":1121,"author":{"gitId":"-"},"content":"    } as FeedbackRubricResponseDetails,"},{"lineNumber":1122,"author":{"gitId":"-"},"content":"    instructorComments: [],"},{"lineNumber":1123,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":1124,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":1125,"author":{"gitId":"-"},"content":"    isMissingResponse: false,"},{"lineNumber":1126,"author":{"gitId":"-"},"content":"    responseId: \u00275\u0027,"},{"lineNumber":1127,"author":{"gitId":"-"},"content":"    giver: \u0027Alice\u0027,"},{"lineNumber":1128,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 1\u0027,"},{"lineNumber":1129,"author":{"gitId":"-"},"content":"    giverEmail: \u0027alice@gmail.com\u0027,"},{"lineNumber":1130,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":1131,"author":{"gitId":"-"},"content":"    recipient: \u0027Emma\u0027,"},{"lineNumber":1132,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 2\u0027,"},{"lineNumber":1133,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027emma@gmail.com\u0027,"},{"lineNumber":1134,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":1135,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":1136,"author":{"gitId":"-"},"content":"      answer: [0, 1],"},{"lineNumber":1137,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.RUBRIC,"},{"lineNumber":1138,"author":{"gitId":"-"},"content":"    } as FeedbackRubricResponseDetails,"},{"lineNumber":1139,"author":{"gitId":"-"},"content":"    instructorComments: [],"},{"lineNumber":1140,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":1141,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":1142,"author":{"gitId":"-"},"content":"    isMissingResponse: false,"},{"lineNumber":1143,"author":{"gitId":"-"},"content":"    responseId: \u00276\u0027,"},{"lineNumber":1144,"author":{"gitId":"-"},"content":"    giver: \u0027Charles\u0027,"},{"lineNumber":1145,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 1\u0027,"},{"lineNumber":1146,"author":{"gitId":"-"},"content":"    giverEmail: \u0027charles@gmail.com\u0027,"},{"lineNumber":1147,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":1148,"author":{"gitId":"-"},"content":"    recipient: \u0027Emma\u0027,"},{"lineNumber":1149,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 2\u0027,"},{"lineNumber":1150,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027emma@gmail.com\u0027,"},{"lineNumber":1151,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":1152,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":1153,"author":{"gitId":"-"},"content":"      answer: [2, 3],"},{"lineNumber":1154,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.RUBRIC,"},{"lineNumber":1155,"author":{"gitId":"-"},"content":"    } as FeedbackRubricResponseDetails,"},{"lineNumber":1156,"author":{"gitId":"-"},"content":"    instructorComments: [],"},{"lineNumber":1157,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":1158,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":1159,"author":{"gitId":"-"},"content":"    isMissingResponse: false,"},{"lineNumber":1160,"author":{"gitId":"-"},"content":"    responseId: \u00277\u0027,"},{"lineNumber":1161,"author":{"gitId":"-"},"content":"    giver: \u0027David\u0027,"},{"lineNumber":1162,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 1\u0027,"},{"lineNumber":1163,"author":{"gitId":"-"},"content":"    giverEmail: \u0027david@gmail.com\u0027,"},{"lineNumber":1164,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":1165,"author":{"gitId":"-"},"content":"    recipient: \u0027Emma\u0027,"},{"lineNumber":1166,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 2\u0027,"},{"lineNumber":1167,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027emma@gmail.com\u0027,"},{"lineNumber":1168,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":1169,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":1170,"author":{"gitId":"-"},"content":"      answer: [1, 3],"},{"lineNumber":1171,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.RUBRIC,"},{"lineNumber":1172,"author":{"gitId":"-"},"content":"    } as FeedbackRubricResponseDetails,"},{"lineNumber":1173,"author":{"gitId":"-"},"content":"    instructorComments: [],"},{"lineNumber":1174,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":1175,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":1176,"author":{"gitId":"-"},"content":"    isMissingResponse: false,"},{"lineNumber":1177,"author":{"gitId":"-"},"content":"    responseId: \u00278\u0027,"},{"lineNumber":1178,"author":{"gitId":"-"},"content":"    giver: \u0027Emma\u0027,"},{"lineNumber":1179,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 2\u0027,"},{"lineNumber":1180,"author":{"gitId":"-"},"content":"    giverEmail: \u0027emma@gmail.com\u0027,"},{"lineNumber":1181,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":1182,"author":{"gitId":"-"},"content":"    recipient: \u0027Emma\u0027,"},{"lineNumber":1183,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 2\u0027,"},{"lineNumber":1184,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027emma@gmail.com\u0027,"},{"lineNumber":1185,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":1186,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":1187,"author":{"gitId":"-"},"content":"      answer: [0, 1],"},{"lineNumber":1188,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.RUBRIC,"},{"lineNumber":1189,"author":{"gitId":"-"},"content":"    } as FeedbackRubricResponseDetails,"},{"lineNumber":1190,"author":{"gitId":"-"},"content":"    instructorComments: [],"},{"lineNumber":1191,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":1192,"author":{"gitId":"-"},"content":"];"},{"lineNumber":1193,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":1194,"author":{"gitId":"-"},"content":" * Structure for example of rubric question questions tab model"},{"lineNumber":1195,"author":{"gitId":"-"},"content":" */"},{"lineNumber":1196,"author":{"gitId":"-"},"content":"export const EXAMPLE_RUBRIC_QUESTION_QUESTION_TAB_MODEL: QuestionTabModel \u003d {"},{"lineNumber":1197,"author":{"gitId":"-"},"content":"  question: EXAMPLE_RUBRIC_QUESTION_MODEL,"},{"lineNumber":1198,"author":{"gitId":"-"},"content":"  responses: EXAMPLE_RUBRIC_QUESTION_RESPONSE_OUTPUT,"},{"lineNumber":1199,"author":{"gitId":"-"},"content":"  statistics: \u0027\u0027,"},{"lineNumber":1200,"author":{"gitId":"-"},"content":"  hasPopulated: true,"},{"lineNumber":1201,"author":{"gitId":"-"},"content":"  isTabExpanded: true,"},{"lineNumber":1202,"author":{"gitId":"-"},"content":"};"},{"lineNumber":1203,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":1204,"author":{"gitId":"-"},"content":" * Structure for example of rubric question questions"},{"lineNumber":1205,"author":{"gitId":"-"},"content":" */"},{"lineNumber":1206,"author":{"gitId":"-"},"content":"export const EXAMPLE_RUBRIC_QUESTION_QUESTIONS: Record\u003cstring, QuestionTabModel\u003e \u003d {"},{"lineNumber":1207,"author":{"gitId":"-"},"content":"  question: EXAMPLE_RUBRIC_QUESTION_QUESTION_TAB_MODEL,"},{"lineNumber":1208,"author":{"gitId":"-"},"content":"};"},{"lineNumber":1209,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":1210,"author":{"gitId":"-"},"content":" * Structure for example of rank recipient question model"},{"lineNumber":1211,"author":{"gitId":"-"},"content":" */"},{"lineNumber":1212,"author":{"gitId":"-"},"content":"export const EXAMPLE_RANK_RECIPIENT_QUESTION_MODEL: QuestionEditFormModel \u003d {"},{"lineNumber":1213,"author":{"gitId":"-"},"content":"  feedbackQuestionId: \u0027\u0027,"},{"lineNumber":1214,"author":{"gitId":"-"},"content":"  isQuestionHasResponses: false,"},{"lineNumber":1215,"author":{"gitId":"-"},"content":""},{"lineNumber":1216,"author":{"gitId":"-"},"content":"  questionNumber: 1,"},{"lineNumber":1217,"author":{"gitId":"-"},"content":"  questionBrief: \u0027\u0027,"},{"lineNumber":1218,"author":{"gitId":"-"},"content":"  questionDescription: \u0027\u0027,"},{"lineNumber":1219,"author":{"gitId":"-"},"content":"  questionType: FeedbackQuestionType.RANK_RECIPIENTS,"},{"lineNumber":1220,"author":{"gitId":"-"},"content":"  questionDetails: DEFAULT_RANK_RECIPIENTS_QUESTION_DETAILS(),"},{"lineNumber":1221,"author":{"gitId":"-"},"content":""},{"lineNumber":1222,"author":{"gitId":"-"},"content":"  isDeleting: false,"},{"lineNumber":1223,"author":{"gitId":"-"},"content":"  isDuplicating: false,"},{"lineNumber":1224,"author":{"gitId":"-"},"content":"  isEditable: false,"},{"lineNumber":1225,"author":{"gitId":"-"},"content":"  isSaving: false,"},{"lineNumber":1226,"author":{"gitId":"-"},"content":"  isCollapsed: false,"},{"lineNumber":1227,"author":{"gitId":"-"},"content":"  isVisibilityChanged: false,"},{"lineNumber":1228,"author":{"gitId":"-"},"content":"  isFeedbackPathChanged: false,"},{"lineNumber":1229,"author":{"gitId":"-"},"content":"  isQuestionDetailsChanged: false,"},{"lineNumber":1230,"author":{"gitId":"-"},"content":""},{"lineNumber":1231,"author":{"gitId":"-"},"content":"  giverType: FeedbackParticipantType.STUDENTS,"},{"lineNumber":1232,"author":{"gitId":"-"},"content":"  recipientType: FeedbackParticipantType.OWN_TEAM_MEMBERS,"},{"lineNumber":1233,"author":{"gitId":"-"},"content":""},{"lineNumber":1234,"author":{"gitId":"-"},"content":"  customNumberOfEntitiesToGiveFeedbackTo: 0,"},{"lineNumber":1235,"author":{"gitId":"-"},"content":"  numberOfEntitiesToGiveFeedbackToSetting: NumberOfEntitiesToGiveFeedbackToSetting.UNLIMITED,"},{"lineNumber":1236,"author":{"gitId":"-"},"content":""},{"lineNumber":1237,"author":{"gitId":"-"},"content":"  showResponsesTo: [FeedbackVisibilityType.INSTRUCTORS, FeedbackVisibilityType.RECIPIENT],"},{"lineNumber":1238,"author":{"gitId":"-"},"content":"  showGiverNameTo: [FeedbackVisibilityType.INSTRUCTORS],"},{"lineNumber":1239,"author":{"gitId":"-"},"content":"  showRecipientNameTo: [FeedbackVisibilityType.INSTRUCTORS, FeedbackVisibilityType.RECIPIENT],"},{"lineNumber":1240,"author":{"gitId":"-"},"content":"};"},{"lineNumber":1241,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":1242,"author":{"gitId":"-"},"content":" * Structure for example of rank recipient response output"},{"lineNumber":1243,"author":{"gitId":"-"},"content":" */"},{"lineNumber":1244,"author":{"gitId":"-"},"content":"export const EXAMPLE_RANK_RECIPIENT_RESPONSE_OUTPUT: ResponseOutput[] \u003d ["},{"lineNumber":1245,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":1246,"author":{"gitId":"-"},"content":"    isMissingResponse: false,"},{"lineNumber":1247,"author":{"gitId":"-"},"content":"    responseId: \u00271\u0027,"},{"lineNumber":1248,"author":{"gitId":"-"},"content":"    giver: \u0027Charles\u0027,"},{"lineNumber":1249,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 1\u0027,"},{"lineNumber":1250,"author":{"gitId":"-"},"content":"    giverEmail: \u0027charles@gmail.com\u0027,"},{"lineNumber":1251,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":1252,"author":{"gitId":"-"},"content":"    recipient: \u0027Alice\u0027,"},{"lineNumber":1253,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 1\u0027,"},{"lineNumber":1254,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027alice@gmail.com\u0027,"},{"lineNumber":1255,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":1256,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":1257,"author":{"gitId":"-"},"content":"      answer: 2,"},{"lineNumber":1258,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.RANK_RECIPIENTS,"},{"lineNumber":1259,"author":{"gitId":"-"},"content":"    } as FeedbackRankRecipientsResponseDetails,"},{"lineNumber":1260,"author":{"gitId":"-"},"content":"    instructorComments: [],"},{"lineNumber":1261,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":1262,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":1263,"author":{"gitId":"-"},"content":"    isMissingResponse: false,"},{"lineNumber":1264,"author":{"gitId":"-"},"content":"    responseId: \u00272\u0027,"},{"lineNumber":1265,"author":{"gitId":"-"},"content":"    giver: \u0027David\u0027,"},{"lineNumber":1266,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 1\u0027,"},{"lineNumber":1267,"author":{"gitId":"-"},"content":"    giverEmail: \u0027david@gmail.com\u0027,"},{"lineNumber":1268,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":1269,"author":{"gitId":"-"},"content":"    recipient: \u0027Alice\u0027,"},{"lineNumber":1270,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 1\u0027,"},{"lineNumber":1271,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027alice@gmail.com\u0027,"},{"lineNumber":1272,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":1273,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":1274,"author":{"gitId":"-"},"content":"      answer: 1,"},{"lineNumber":1275,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.RANK_RECIPIENTS,"},{"lineNumber":1276,"author":{"gitId":"-"},"content":"    } as FeedbackRankRecipientsResponseDetails,"},{"lineNumber":1277,"author":{"gitId":"-"},"content":"    instructorComments: [],"},{"lineNumber":1278,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":1279,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":1280,"author":{"gitId":"-"},"content":"    isMissingResponse: false,"},{"lineNumber":1281,"author":{"gitId":"-"},"content":"    responseId: \u00273\u0027,"},{"lineNumber":1282,"author":{"gitId":"-"},"content":"    giver: \u0027Emma\u0027,"},{"lineNumber":1283,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 2\u0027,"},{"lineNumber":1284,"author":{"gitId":"-"},"content":"    giverEmail: \u0027emma@gmail.com\u0027,"},{"lineNumber":1285,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":1286,"author":{"gitId":"-"},"content":"    recipient: \u0027Bob\u0027,"},{"lineNumber":1287,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 2\u0027,"},{"lineNumber":1288,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027bob@gmail.com\u0027,"},{"lineNumber":1289,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":1290,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":1291,"author":{"gitId":"-"},"content":"      answer: 2,"},{"lineNumber":1292,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.RANK_RECIPIENTS,"},{"lineNumber":1293,"author":{"gitId":"-"},"content":"    } as FeedbackRankRecipientsResponseDetails,"},{"lineNumber":1294,"author":{"gitId":"-"},"content":"    instructorComments: [],"},{"lineNumber":1295,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":1296,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":1297,"author":{"gitId":"-"},"content":"    isMissingResponse: false,"},{"lineNumber":1298,"author":{"gitId":"-"},"content":"    responseId: \u00274\u0027,"},{"lineNumber":1299,"author":{"gitId":"-"},"content":"    giver: \u0027Alice\u0027,"},{"lineNumber":1300,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 1\u0027,"},{"lineNumber":1301,"author":{"gitId":"-"},"content":"    giverEmail: \u0027alice@gmail.com\u0027,"},{"lineNumber":1302,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":1303,"author":{"gitId":"-"},"content":"    recipient: \u0027Charles\u0027,"},{"lineNumber":1304,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 1\u0027,"},{"lineNumber":1305,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027charles@gmail.com\u0027,"},{"lineNumber":1306,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":1307,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":1308,"author":{"gitId":"-"},"content":"      answer: 1,"},{"lineNumber":1309,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.RANK_RECIPIENTS,"},{"lineNumber":1310,"author":{"gitId":"-"},"content":"    } as FeedbackRankRecipientsResponseDetails,"},{"lineNumber":1311,"author":{"gitId":"-"},"content":"    instructorComments: [],"},{"lineNumber":1312,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":1313,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":1314,"author":{"gitId":"-"},"content":"    isMissingResponse: false,"},{"lineNumber":1315,"author":{"gitId":"-"},"content":"    responseId: \u00275\u0027,"},{"lineNumber":1316,"author":{"gitId":"-"},"content":"    giver: \u0027David\u0027,"},{"lineNumber":1317,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 1\u0027,"},{"lineNumber":1318,"author":{"gitId":"-"},"content":"    giverEmail: \u0027david@gmail.com\u0027,"},{"lineNumber":1319,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":1320,"author":{"gitId":"-"},"content":"    recipient: \u0027Charles\u0027,"},{"lineNumber":1321,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 1\u0027,"},{"lineNumber":1322,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027charles@gmail.com\u0027,"},{"lineNumber":1323,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":1324,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":1325,"author":{"gitId":"-"},"content":"      answer: 3,"},{"lineNumber":1326,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.RANK_RECIPIENTS,"},{"lineNumber":1327,"author":{"gitId":"-"},"content":"    } as FeedbackRankRecipientsResponseDetails,"},{"lineNumber":1328,"author":{"gitId":"-"},"content":"    instructorComments: [],"},{"lineNumber":1329,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":1330,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":1331,"author":{"gitId":"-"},"content":"    isMissingResponse: false,"},{"lineNumber":1332,"author":{"gitId":"-"},"content":"    responseId: \u00276\u0027,"},{"lineNumber":1333,"author":{"gitId":"-"},"content":"    giver: \u0027Alice\u0027,"},{"lineNumber":1334,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 1\u0027,"},{"lineNumber":1335,"author":{"gitId":"-"},"content":"    giverEmail: \u0027alice@gmail.com\u0027,"},{"lineNumber":1336,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":1337,"author":{"gitId":"-"},"content":"    recipient: \u0027David\u0027,"},{"lineNumber":1338,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 1\u0027,"},{"lineNumber":1339,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027david@gmail.com\u0027,"},{"lineNumber":1340,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":1341,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":1342,"author":{"gitId":"-"},"content":"      answer: 3,"},{"lineNumber":1343,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.RANK_RECIPIENTS,"},{"lineNumber":1344,"author":{"gitId":"-"},"content":"    } as FeedbackRankRecipientsResponseDetails,"},{"lineNumber":1345,"author":{"gitId":"-"},"content":"    instructorComments: [],"},{"lineNumber":1346,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":1347,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":1348,"author":{"gitId":"-"},"content":"    isMissingResponse: false,"},{"lineNumber":1349,"author":{"gitId":"-"},"content":"    responseId: \u00277\u0027,"},{"lineNumber":1350,"author":{"gitId":"-"},"content":"    giver: \u0027Charles\u0027,"},{"lineNumber":1351,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 1\u0027,"},{"lineNumber":1352,"author":{"gitId":"-"},"content":"    giverEmail: \u0027charles@gmail.com\u0027,"},{"lineNumber":1353,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":1354,"author":{"gitId":"-"},"content":"    recipient: \u0027David\u0027,"},{"lineNumber":1355,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 1\u0027,"},{"lineNumber":1356,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027david@gmail.com\u0027,"},{"lineNumber":1357,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":1358,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":1359,"author":{"gitId":"-"},"content":"      answer: 2,"},{"lineNumber":1360,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.RANK_RECIPIENTS,"},{"lineNumber":1361,"author":{"gitId":"-"},"content":"    } as FeedbackRankRecipientsResponseDetails,"},{"lineNumber":1362,"author":{"gitId":"-"},"content":"    instructorComments: [],"},{"lineNumber":1363,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":1364,"author":{"gitId":"-"},"content":"  {"},{"lineNumber":1365,"author":{"gitId":"-"},"content":"    isMissingResponse: false,"},{"lineNumber":1366,"author":{"gitId":"-"},"content":"    responseId: \u00278\u0027,"},{"lineNumber":1367,"author":{"gitId":"-"},"content":"    giver: \u0027Bob\u0027,"},{"lineNumber":1368,"author":{"gitId":"-"},"content":"    giverTeam: \u0027Team 2\u0027,"},{"lineNumber":1369,"author":{"gitId":"-"},"content":"    giverEmail: \u0027bob@gmail.com\u0027,"},{"lineNumber":1370,"author":{"gitId":"-"},"content":"    giverSection: \u0027\u0027,"},{"lineNumber":1371,"author":{"gitId":"-"},"content":"    recipient: \u0027Emma\u0027,"},{"lineNumber":1372,"author":{"gitId":"-"},"content":"    recipientTeam: \u0027Team 2\u0027,"},{"lineNumber":1373,"author":{"gitId":"-"},"content":"    recipientEmail: \u0027emma@gmail.com\u0027,"},{"lineNumber":1374,"author":{"gitId":"-"},"content":"    recipientSection: \u0027\u0027,"},{"lineNumber":1375,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":1376,"author":{"gitId":"-"},"content":"      answer: 1,"},{"lineNumber":1377,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.RANK_RECIPIENTS,"},{"lineNumber":1378,"author":{"gitId":"-"},"content":"    } as FeedbackRankRecipientsResponseDetails,"},{"lineNumber":1379,"author":{"gitId":"-"},"content":"    instructorComments: [],"},{"lineNumber":1380,"author":{"gitId":"-"},"content":"  },"},{"lineNumber":1381,"author":{"gitId":"-"},"content":"];"},{"lineNumber":1382,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":1383,"author":{"gitId":"-"},"content":" * Structure for example of rank recipient question tab model"},{"lineNumber":1384,"author":{"gitId":"-"},"content":" */"},{"lineNumber":1385,"author":{"gitId":"-"},"content":"export const EXAMPLE_RANK_RECIPIENT_QUESTION_TAB_MODEL: QuestionTabModel \u003d {"},{"lineNumber":1386,"author":{"gitId":"-"},"content":"  question: EXAMPLE_RANK_RECIPIENT_QUESTION_MODEL,"},{"lineNumber":1387,"author":{"gitId":"-"},"content":"  responses: EXAMPLE_RANK_RECIPIENT_RESPONSE_OUTPUT,"},{"lineNumber":1388,"author":{"gitId":"-"},"content":"  statistics: \u0027\u0027,"},{"lineNumber":1389,"author":{"gitId":"-"},"content":"  hasPopulated: true,"},{"lineNumber":1390,"author":{"gitId":"-"},"content":"  isTabExpanded: true,"},{"lineNumber":1391,"author":{"gitId":"-"},"content":"};"},{"lineNumber":1392,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":1393,"author":{"gitId":"-"},"content":" * Structure for example of rank recipient questions"},{"lineNumber":1394,"author":{"gitId":"-"},"content":" */"},{"lineNumber":1395,"author":{"gitId":"-"},"content":"export const EXAMPLE_RANK_RECIPIENT_QUESTIONS: Record\u003cstring, QuestionTabModel\u003e \u003d {"},{"lineNumber":1396,"author":{"gitId":"-"},"content":"  question: EXAMPLE_RANK_RECIPIENT_QUESTION_TAB_MODEL,"},{"lineNumber":1397,"author":{"gitId":"-"},"content":"};"},{"lineNumber":1398,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":1399,"author":{"gitId":"-"},"content":" * Structure for example of rank option question model"},{"lineNumber":1400,"author":{"gitId":"-"},"content":" */"},{"lineNumber":1401,"author":{"gitId":"-"},"content":"export const EXAMPLE_RANK_OPTION_QUESTION_MODEL: QuestionEditFormModel \u003d {"},{"lineNumber":1402,"author":{"gitId":"-"},"content":"  feedbackQuestionId: \u0027\u0027,"},{"lineNumber":1403,"author":{"gitId":"-"},"content":"  isQuestionHasResponses: false,"},{"lineNumber":1404,"author":{"gitId":"-"},"content":""},{"lineNumber":1405,"author":{"gitId":"-"},"content":"  questionNumber: 1,"},{"lineNumber":1406,"author":{"gitId":"-"},"content":"  questionBrief: \u0027\u0027,"},{"lineNumber":1407,"author":{"gitId":"-"},"content":"  questionDescription: \u0027\u0027,"},{"lineNumber":1408,"author":{"gitId":"-"},"content":"  questionType: FeedbackQuestionType.RANK_OPTIONS,"},{"lineNumber":1409,"author":{"gitId":"-"},"content":"  questionDetails: DEFAULT_RANK_OPTIONS_QUESTION_DETAILS(),"},{"lineNumber":1410,"author":{"gitId":"-"},"content":""},{"lineNumber":1411,"author":{"gitId":"-"},"content":"  isDeleting: false,"},{"lineNumber":1412,"author":{"gitId":"-"},"content":"  isDuplicating: false,"},{"lineNumber":1413,"author":{"gitId":"-"},"content":"  isEditable: false,"},{"lineNumber":1414,"author":{"gitId":"-"},"content":"  isSaving: false,"},{"lineNumber":1415,"author":{"gitId":"-"},"content":"  isCollapsed: false,"},{"lineNumber":1416,"author":{"gitId":"-"},"content":"  isVisibilityChanged: false,"},{"lineNumber":1417,"author":{"gitId":"-"},"content":"  isFeedbackPathChanged: false,"},{"lineNumber":1418,"author":{"gitId":"-"},"content":"  isQuestionDetailsChanged: false,"},{"lineNumber":1419,"author":{"gitId":"-"},"content":""},{"lineNumber":1420,"author":{"gitId":"-"},"content":"  giverType: FeedbackParticipantType.STUDENTS,"},{"lineNumber":1421,"author":{"gitId":"-"},"content":"  recipientType: FeedbackParticipantType.OWN_TEAM_MEMBERS,"},{"lineNumber":1422,"author":{"gitId":"-"},"content":""},{"lineNumber":1423,"author":{"gitId":"-"},"content":"  customNumberOfEntitiesToGiveFeedbackTo: 0,"},{"lineNumber":1424,"author":{"gitId":"-"},"content":"  numberOfEntitiesToGiveFeedbackToSetting: NumberOfEntitiesToGiveFeedbackToSetting.UNLIMITED,"},{"lineNumber":1425,"author":{"gitId":"-"},"content":""},{"lineNumber":1426,"author":{"gitId":"-"},"content":"  showResponsesTo: [FeedbackVisibilityType.INSTRUCTORS, FeedbackVisibilityType.RECIPIENT,"},{"lineNumber":1427,"author":{"gitId":"-"},"content":"    FeedbackVisibilityType.GIVER_TEAM_MEMBERS],"},{"lineNumber":1428,"author":{"gitId":"-"},"content":"  showGiverNameTo: [FeedbackVisibilityType.INSTRUCTORS],"},{"lineNumber":1429,"author":{"gitId":"-"},"content":"  showRecipientNameTo: [FeedbackVisibilityType.INSTRUCTORS, FeedbackVisibilityType.RECIPIENT],"},{"lineNumber":1430,"author":{"gitId":"-"},"content":"};"},{"lineNumber":1431,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":1432,"author":{"gitId":"-"},"content":" * Structure for example of MCQ question without weights model"},{"lineNumber":1433,"author":{"gitId":"-"},"content":" */"},{"lineNumber":1434,"author":{"gitId":"-"},"content":"export const EXAMPLE_MCQ_QUESTION_WITHOUT_WEIGHTS_MODEL: QuestionEditFormModel \u003d {"},{"lineNumber":1435,"author":{"gitId":"-"},"content":"  feedbackQuestionId: \u0027\u0027,"},{"lineNumber":1436,"author":{"gitId":"-"},"content":"  isQuestionHasResponses: false,"},{"lineNumber":1437,"author":{"gitId":"-"},"content":""},{"lineNumber":1438,"author":{"gitId":"-"},"content":"  questionNumber: 1,"},{"lineNumber":1439,"author":{"gitId":"-"},"content":"  questionBrief: \u0027How much did you think you contributed?\u0027,"},{"lineNumber":1440,"author":{"gitId":"-"},"content":"  questionDescription: \u0027\u0027,"},{"lineNumber":1441,"author":{"gitId":"-"},"content":"  questionType: FeedbackQuestionType.MCQ,"},{"lineNumber":1442,"author":{"gitId":"-"},"content":"  questionDetails: {"},{"lineNumber":1443,"author":{"gitId":"-"},"content":"    ...DEFAULT_MCQ_QUESTION_DETAILS(),"},{"lineNumber":1444,"author":{"gitId":"-"},"content":"    mcqChoices: [\u0027I did great!\u0027, \u0027I performed satisfactorily.\u0027, \u0027I did not contribute as much as I wanted to.\u0027],"},{"lineNumber":1445,"author":{"gitId":"-"},"content":"    hasAssignedWeights: false,"},{"lineNumber":1446,"author":{"gitId":"-"},"content":"    mcqWeights: [],"},{"lineNumber":1447,"author":{"gitId":"-"},"content":"  } as FeedbackMcqQuestionDetails,"},{"lineNumber":1448,"author":{"gitId":"-"},"content":""},{"lineNumber":1449,"author":{"gitId":"-"},"content":"  isDeleting: false,"},{"lineNumber":1450,"author":{"gitId":"-"},"content":"  isDuplicating: false,"},{"lineNumber":1451,"author":{"gitId":"-"},"content":"  isEditable: false,"},{"lineNumber":1452,"author":{"gitId":"-"},"content":"  isSaving: false,"},{"lineNumber":1453,"author":{"gitId":"-"},"content":"  isCollapsed: false,"},{"lineNumber":1454,"author":{"gitId":"-"},"content":"  isVisibilityChanged: false,"},{"lineNumber":1455,"author":{"gitId":"-"},"content":"  isFeedbackPathChanged: false,"},{"lineNumber":1456,"author":{"gitId":"-"},"content":"  isQuestionDetailsChanged: false,"},{"lineNumber":1457,"author":{"gitId":"-"},"content":""},{"lineNumber":1458,"author":{"gitId":"-"},"content":"  giverType: FeedbackParticipantType.STUDENTS,"},{"lineNumber":1459,"author":{"gitId":"-"},"content":"  recipientType: FeedbackParticipantType.OWN_TEAM_MEMBERS,"},{"lineNumber":1460,"author":{"gitId":"-"},"content":""},{"lineNumber":1461,"author":{"gitId":"-"},"content":"  customNumberOfEntitiesToGiveFeedbackTo: 0,"},{"lineNumber":1462,"author":{"gitId":"-"},"content":"  numberOfEntitiesToGiveFeedbackToSetting: NumberOfEntitiesToGiveFeedbackToSetting.UNLIMITED,"},{"lineNumber":1463,"author":{"gitId":"-"},"content":""},{"lineNumber":1464,"author":{"gitId":"-"},"content":"  showResponsesTo: [FeedbackVisibilityType.INSTRUCTORS, FeedbackVisibilityType.RECIPIENT,"},{"lineNumber":1465,"author":{"gitId":"-"},"content":"    FeedbackVisibilityType.GIVER_TEAM_MEMBERS],"},{"lineNumber":1466,"author":{"gitId":"-"},"content":"  showGiverNameTo: [FeedbackVisibilityType.INSTRUCTORS],"},{"lineNumber":1467,"author":{"gitId":"-"},"content":"  showRecipientNameTo: [FeedbackVisibilityType.INSTRUCTORS, FeedbackVisibilityType.RECIPIENT],"},{"lineNumber":1468,"author":{"gitId":"-"},"content":"};"},{"lineNumber":1469,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":1470,"author":{"gitId":"-"},"content":" * Structure for example of MCQ question with weights model"},{"lineNumber":1471,"author":{"gitId":"-"},"content":" */"},{"lineNumber":1472,"author":{"gitId":"-"},"content":"export const EXAMPLE_MCQ_QUESTION_WITH_WEIGHTS_MODEL: QuestionEditFormModel \u003d {"},{"lineNumber":1473,"author":{"gitId":"-"},"content":"  feedbackQuestionId: \u0027\u0027,"},{"lineNumber":1474,"author":{"gitId":"-"},"content":"  isQuestionHasResponses: false,"},{"lineNumber":1475,"author":{"gitId":"-"},"content":""},{"lineNumber":1476,"author":{"gitId":"-"},"content":"  questionNumber: 1,"},{"lineNumber":1477,"author":{"gitId":"-"},"content":"  questionBrief: \u0027How much did you think you contributed?\u0027,"},{"lineNumber":1478,"author":{"gitId":"-"},"content":"  questionDescription: \u0027\u0027,"},{"lineNumber":1479,"author":{"gitId":"-"},"content":"  questionType: FeedbackQuestionType.MCQ,"},{"lineNumber":1480,"author":{"gitId":"-"},"content":"  questionDetails: {"},{"lineNumber":1481,"author":{"gitId":"-"},"content":"    ...DEFAULT_MCQ_QUESTION_DETAILS(),"},{"lineNumber":1482,"author":{"gitId":"-"},"content":"    mcqChoices: [\u0027I did great!\u0027, \u0027I performed satisfactorily.\u0027, \u0027I did not contribute as much as I wanted to.\u0027],"},{"lineNumber":1483,"author":{"gitId":"-"},"content":"    hasAssignedWeights: true,"},{"lineNumber":1484,"author":{"gitId":"-"},"content":"    mcqWeights: [1, 3, 5],"},{"lineNumber":1485,"author":{"gitId":"-"},"content":"  } as FeedbackMcqQuestionDetails,"},{"lineNumber":1486,"author":{"gitId":"-"},"content":""},{"lineNumber":1487,"author":{"gitId":"-"},"content":"  isDeleting: false,"},{"lineNumber":1488,"author":{"gitId":"-"},"content":"  isDuplicating: false,"},{"lineNumber":1489,"author":{"gitId":"-"},"content":"  isEditable: false,"},{"lineNumber":1490,"author":{"gitId":"-"},"content":"  isSaving: false,"},{"lineNumber":1491,"author":{"gitId":"-"},"content":"  isCollapsed: false,"},{"lineNumber":1492,"author":{"gitId":"-"},"content":"  isVisibilityChanged: false,"},{"lineNumber":1493,"author":{"gitId":"-"},"content":"  isFeedbackPathChanged: false,"},{"lineNumber":1494,"author":{"gitId":"-"},"content":"  isQuestionDetailsChanged: false,"},{"lineNumber":1495,"author":{"gitId":"-"},"content":""},{"lineNumber":1496,"author":{"gitId":"-"},"content":"  giverType: FeedbackParticipantType.STUDENTS,"},{"lineNumber":1497,"author":{"gitId":"-"},"content":"  recipientType: FeedbackParticipantType.OWN_TEAM_MEMBERS,"},{"lineNumber":1498,"author":{"gitId":"-"},"content":""},{"lineNumber":1499,"author":{"gitId":"-"},"content":"  customNumberOfEntitiesToGiveFeedbackTo: 0,"},{"lineNumber":1500,"author":{"gitId":"-"},"content":"  numberOfEntitiesToGiveFeedbackToSetting: NumberOfEntitiesToGiveFeedbackToSetting.UNLIMITED,"},{"lineNumber":1501,"author":{"gitId":"-"},"content":""},{"lineNumber":1502,"author":{"gitId":"-"},"content":"  showResponsesTo: [FeedbackVisibilityType.INSTRUCTORS, FeedbackVisibilityType.RECIPIENT,"},{"lineNumber":1503,"author":{"gitId":"-"},"content":"    FeedbackVisibilityType.GIVER_TEAM_MEMBERS],"},{"lineNumber":1504,"author":{"gitId":"-"},"content":"  showGiverNameTo: [FeedbackVisibilityType.INSTRUCTORS],"},{"lineNumber":1505,"author":{"gitId":"-"},"content":"  showRecipientNameTo: [FeedbackVisibilityType.INSTRUCTORS, FeedbackVisibilityType.RECIPIENT],"},{"lineNumber":1506,"author":{"gitId":"-"},"content":"};"},{"lineNumber":1507,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":1508,"author":{"gitId":"-"},"content":" * Structure for example of responder rubric submission form model"},{"lineNumber":1509,"author":{"gitId":"-"},"content":" */"},{"lineNumber":1510,"author":{"gitId":"-"},"content":"export const EXAMPLE_RESPONDER_RUBRIC_SUBMISSION_FORM_MODEL: QuestionSubmissionFormModel \u003d {"},{"lineNumber":1511,"author":{"gitId":"-"},"content":"  isLoading: false,"},{"lineNumber":1512,"author":{"gitId":"-"},"content":"  isLoaded: true,"},{"lineNumber":1513,"author":{"gitId":"weiquu"},"content":"  isTabExpanded: true,"},{"lineNumber":1514,"author":{"gitId":"-"},"content":"  recipientList: ["},{"lineNumber":1515,"author":{"gitId":"-"},"content":"    {"},{"lineNumber":1516,"author":{"gitId":"-"},"content":"      recipientIdentifier: \u0027alice\u0027,"},{"lineNumber":1517,"author":{"gitId":"-"},"content":"      recipientName: \u0027Alice\u0027,"},{"lineNumber":1518,"author":{"gitId":"-"},"content":"    },"},{"lineNumber":1519,"author":{"gitId":"-"},"content":"    {"},{"lineNumber":1520,"author":{"gitId":"-"},"content":"      recipientIdentifier: \u0027bob\u0027,"},{"lineNumber":1521,"author":{"gitId":"-"},"content":"      recipientName: \u0027Bob\u0027,"},{"lineNumber":1522,"author":{"gitId":"-"},"content":"    },"},{"lineNumber":1523,"author":{"gitId":"-"},"content":"  ],"},{"lineNumber":1524,"author":{"gitId":"-"},"content":"  recipientSubmissionForms: ["},{"lineNumber":1525,"author":{"gitId":"-"},"content":"    {"},{"lineNumber":1526,"author":{"gitId":"-"},"content":"      responseId: \u0027response1\u0027,"},{"lineNumber":1527,"author":{"gitId":"-"},"content":"      recipientIdentifier: \u0027alice\u0027,"},{"lineNumber":1528,"author":{"gitId":"-"},"content":"      responseDetails: { questionType: FeedbackQuestionType.RUBRIC, answer: [0, 2] } as FeedbackRubricResponseDetails,"},{"lineNumber":1529,"author":{"gitId":"-"},"content":"      isValid: true,"},{"lineNumber":1530,"author":{"gitId":"-"},"content":"    },"},{"lineNumber":1531,"author":{"gitId":"-"},"content":"    {"},{"lineNumber":1532,"author":{"gitId":"-"},"content":"      responseId: \u0027response2\u0027,"},{"lineNumber":1533,"author":{"gitId":"-"},"content":"      recipientIdentifier: \u0027bob\u0027,"},{"lineNumber":1534,"author":{"gitId":"-"},"content":"      responseDetails: { questionType: FeedbackQuestionType.RUBRIC, answer: [1, 3] } as FeedbackRubricResponseDetails,"},{"lineNumber":1535,"author":{"gitId":"-"},"content":"      isValid: true,"},{"lineNumber":1536,"author":{"gitId":"-"},"content":"    },"},{"lineNumber":1537,"author":{"gitId":"-"},"content":"  ],"},{"lineNumber":1538,"author":{"gitId":"-"},"content":"  customNumberOfEntitiesToGiveFeedbackTo: 0,"},{"lineNumber":1539,"author":{"gitId":"-"},"content":"  feedbackQuestionId: \u0027\u0027,"},{"lineNumber":1540,"author":{"gitId":"-"},"content":"  questionNumber: 1,"},{"lineNumber":1541,"author":{"gitId":"-"},"content":"  questionBrief: \u0027\u0027,"},{"lineNumber":1542,"author":{"gitId":"-"},"content":"  questionDescription: \u0027\u0027,"},{"lineNumber":1543,"author":{"gitId":"-"},"content":"  questionType: FeedbackQuestionType.RUBRIC,"},{"lineNumber":1544,"author":{"gitId":"-"},"content":"  giverType: FeedbackParticipantType.STUDENTS,"},{"lineNumber":1545,"author":{"gitId":"-"},"content":"  recipientType: FeedbackParticipantType.OWN_TEAM_MEMBERS,"},{"lineNumber":1546,"author":{"gitId":"-"},"content":"  numberOfEntitiesToGiveFeedbackToSetting: NumberOfEntitiesToGiveFeedbackToSetting.UNLIMITED,"},{"lineNumber":1547,"author":{"gitId":"-"},"content":"  showResponsesTo: [FeedbackVisibilityType.INSTRUCTORS, FeedbackVisibilityType.RECIPIENT],"},{"lineNumber":1548,"author":{"gitId":"-"},"content":"  showGiverNameTo: [FeedbackVisibilityType.INSTRUCTORS],"},{"lineNumber":1549,"author":{"gitId":"-"},"content":"  showRecipientNameTo: [FeedbackVisibilityType.INSTRUCTORS, FeedbackVisibilityType.RECIPIENT],"},{"lineNumber":1550,"author":{"gitId":"-"},"content":"  questionDetails: {"},{"lineNumber":1551,"author":{"gitId":"-"},"content":"    ...DEFAULT_RUBRIC_QUESTION_DETAILS(),"},{"lineNumber":1552,"author":{"gitId":"-"},"content":"    rubricChoices: [\u0027Strongly Disagree\u0027, \u0027Disagree\u0027, \u0027Agree\u0027, \u0027Strongly Agree\u0027],"},{"lineNumber":1553,"author":{"gitId":"-"},"content":"    rubricSubQuestions: ["},{"lineNumber":1554,"author":{"gitId":"-"},"content":"      \u0027This student participates well in online discussions.\u0027,"},{"lineNumber":1555,"author":{"gitId":"-"},"content":"      \u0027This student completes assigned tasks on time.\u0027,"},{"lineNumber":1556,"author":{"gitId":"-"},"content":"    ],"},{"lineNumber":1557,"author":{"gitId":"-"},"content":"    rubricDescriptions:"},{"lineNumber":1558,"author":{"gitId":"-"},"content":"    ["},{"lineNumber":1559,"author":{"gitId":"-"},"content":"      ["},{"lineNumber":1560,"author":{"gitId":"-"},"content":"        \u0027Rarely or never responds.\u0027, \u0027Occasionally responds, but never initiates discussions.\u0027,"},{"lineNumber":1561,"author":{"gitId":"-"},"content":"        \u0027Takes part in discussions and sometimes initiates discussions.\u0027,"},{"lineNumber":1562,"author":{"gitId":"-"},"content":"        \u0027Initiates discussions frequently, and engages the team.\u0027,"},{"lineNumber":1563,"author":{"gitId":"-"},"content":"      ],"},{"lineNumber":1564,"author":{"gitId":"-"},"content":"      ["},{"lineNumber":1565,"author":{"gitId":"-"},"content":"        \u0027Rarely or never completes tasks.\u0027,"},{"lineNumber":1566,"author":{"gitId":"-"},"content":"        \u0027Often misses deadlines.\u0027,"},{"lineNumber":1567,"author":{"gitId":"-"},"content":"        \u0027Occasionally misses deadlines.\u0027,"},{"lineNumber":1568,"author":{"gitId":"-"},"content":"        \u0027Tasks are always completed before the deadline.\u0027,"},{"lineNumber":1569,"author":{"gitId":"-"},"content":"      ],"},{"lineNumber":1570,"author":{"gitId":"-"},"content":"    ],"},{"lineNumber":1571,"author":{"gitId":"-"},"content":"  } as FeedbackRubricQuestionDetails,"},{"lineNumber":1572,"author":{"gitId":"-"},"content":"};"}],"authorContributionMap":{"weiquu":1,"-":1571}},{"path":"src/web/app/pages-instructor/instructor-course-details-page/instructor-course-details-page.component.scss","fileType":"scss","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":".form-group {"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  margin-bottom: .5rem;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"}"},{"lineNumber":4,"author":{"gitId":"-"},"content":""},{"lineNumber":5,"author":{"gitId":"-"},"content":".fill-plain {"},{"lineNumber":6,"author":{"gitId":"-"},"content":"  background-color: #EAEFF5;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"}"},{"lineNumber":8,"author":{"gitId":"-"},"content":""},{"lineNumber":9,"author":{"gitId":"-"},"content":"button {"},{"lineNumber":10,"author":{"gitId":"-"},"content":"  margin-right: 5px;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"}"},{"lineNumber":12,"author":{"gitId":"-"},"content":""},{"lineNumber":13,"author":{"gitId":"-"},"content":"label {"},{"lineNumber":14,"author":{"gitId":"-"},"content":"  font-weight: bold;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"}"},{"lineNumber":16,"author":{"gitId":"-"},"content":""},{"lineNumber":17,"author":{"gitId":"-"},"content":".btn-link:hover {"},{"lineNumber":18,"author":{"gitId":"-"},"content":"  cursor: pointer;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"}"},{"lineNumber":20,"author":{"gitId":"-"},"content":""},{"lineNumber":21,"author":{"gitId":"-"},"content":".student-table-margin {"},{"lineNumber":22,"author":{"gitId":"-"},"content":"  margin-top: 50px;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"}"},{"lineNumber":24,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":25,"author":{"gitId":"weiquu"},"content":"@media (max-width: 768px) {"},{"lineNumber":26,"author":{"gitId":"weiquu"},"content":"  #btn-remind-all,"},{"lineNumber":27,"author":{"gitId":"weiquu"},"content":"  #btn-download {"},{"lineNumber":28,"author":{"gitId":"weiquu"},"content":"    margin-bottom: .5rem;"},{"lineNumber":29,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":30,"author":{"gitId":"weiquu"},"content":"}"}],"authorContributionMap":{"weiquu":7,"-":23}},{"path":"src/web/app/pages-instructor/instructor-course-edit-page/copy-instructors-from-other-courses-modal/copy-instructors-from-other-courses-modal.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"modal-header\"\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  \u003ch4 class\u003d\"modal-title\"\u003eCopy Instructors\u003c/h4\u003e"},{"lineNumber":3,"author":{"gitId":"-"},"content":"  \u003cbutton id\u003d\"btn-close-modal\" type\u003d\"button\" class\u003d\"btn-close\" aria-label\u003d\"Close\" (click)\u003d\"activeModal.dismiss()\" [disabled]\u003d\"isCopyingSelectedInstructors\"\u003e\u003c/button\u003e"},{"lineNumber":4,"author":{"gitId":"-"},"content":"\u003c/div\u003e"},{"lineNumber":5,"author":{"gitId":"-"},"content":"\u003cdiv id\u003d\"copy-instructor-modal\" class\u003d\"modal-body\"\u003e"},{"lineNumber":6,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"col-12 mb-3 text-md-end\" *ngIf\u003d\"courses.length \u003e 0\"\u003e"},{"lineNumber":7,"author":{"gitId":"-"},"content":"    \u003cstrong class\u003d\"d-inline\"\u003e Sort Courses By: \u003c/strong\u003e"},{"lineNumber":8,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"btn-group\" data-toggle\u003d\"buttons\"\u003e"},{"lineNumber":9,"author":{"gitId":"-"},"content":"      \u003cbutton id\u003d\"sort-course-id\" class\u003d\"btn btn-light\" [disabled]\u003d\"isSelectedForSorting(SortBy.COURSE_ID)\" (click)\u003d\"sortCourses(SortBy.COURSE_ID)\"\u003eCourse ID\u003c/button\u003e"},{"lineNumber":10,"author":{"gitId":"-"},"content":"      \u003cbutton id\u003d\"sort-course-name\" class\u003d\"btn btn-light\" [disabled]\u003d\"isSelectedForSorting(SortBy.COURSE_NAME)\" (click)\u003d\"sortCourses(SortBy.COURSE_NAME)\"\u003eCourse Name\u003c/button\u003e"},{"lineNumber":11,"author":{"gitId":"-"},"content":"      \u003cbutton id\u003d\"sort-course-creation-date\" class\u003d\"btn btn-light\" [disabled]\u003d\"isSelectedForSorting(SortBy.COURSE_CREATION_DATE)\" (click)\u003d\"sortCourses(SortBy.COURSE_CREATION_DATE)\"\u003eCreation Date\u003c/button\u003e"},{"lineNumber":12,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":13,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":14,"author":{"gitId":"-"},"content":"  \u003cdiv *ngFor\u003d\"let course of courses\"\u003e"},{"lineNumber":15,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"card\"\u003e"},{"lineNumber":16,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"card-header cursor-pointer\" [ngClass]\u003d\"{\u0027bg-primary text-white\u0027: !course.isArchived, \u0027bg-info\u0027: course.isArchived}\" (click)\u003d\"toggleCard(course)\"\u003e"},{"lineNumber":17,"author":{"gitId":"-"},"content":"        \u003cstrong class\u003d\"text-break\" *ngIf\u003d\"!course.isArchived\"\u003e[{{course.courseId}}]: {{course.courseName}}\u003c/strong\u003e"},{"lineNumber":18,"author":{"gitId":"-"},"content":"        \u003cstrong class\u003d\"text-break\" *ngIf\u003d\"course.isArchived\"\u003e[{{course.courseId}}] (Archived): {{course.courseName}}\u003c/strong\u003e"},{"lineNumber":19,"author":{"gitId":"-"},"content":"        \u003cdiv class\u003d\"card-header-btn-toolbar\"\u003e"},{"lineNumber":20,"author":{"gitId":"-"},"content":"          \u003ctm-panel-chevron [isExpanded]\u003d\"course.isTabExpanded\"\u003e\u003c/tm-panel-chevron\u003e"},{"lineNumber":21,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":22,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":23,"author":{"gitId":"-"},"content":""},{"lineNumber":24,"author":{"gitId":"-"},"content":"      \u003cdiv *ngIf\u003d\"course.isTabExpanded\"\u003e"},{"lineNumber":25,"author":{"gitId":"-"},"content":"        \u003ctm-loading-retry [shouldShowRetry]\u003d\"course.hasLoadingFailed\" [retryButtonDisabled]\u003d\"isCopyingSelectedInstructors\" [message]\u003d\"\u0027Failed to load instructors\u0027\" (retryEvent)\u003d\"loadInstructors(course)\"\u003e"},{"lineNumber":26,"author":{"gitId":"-"},"content":"          \u003cdiv *tmIsLoading\u003d\"!course.hasInstructorsLoaded\"\u003e"},{"lineNumber":27,"author":{"gitId":"-"},"content":"            \u003cdiv *ngIf\u003d\"!course.hasLoadingFailed\" class\u003d\"card-body\"\u003e"},{"lineNumber":28,"author":{"gitId":"-"},"content":"              \u003cng-container *ngIf\u003d\"course.hasInstructorsLoaded\"\u003e"},{"lineNumber":29,"author":{"gitId":"-"},"content":"                \u003ctable id\u003d\"copy-instructor-table\" class\u003d\"table table-bordered table-responsive-lg\"\u003e"},{"lineNumber":30,"author":{"gitId":"-"},"content":"                  \u003cthead [ngClass]\u003d\"{\u0027bg-primary text-white\u0027: !course.isArchived, \u0027bg-info\u0027: course.isArchived}\"\u003e"},{"lineNumber":31,"author":{"gitId":"-"},"content":"                    \u003ctr\u003e"},{"lineNumber":32,"author":{"gitId":"-"},"content":"                      \u003cth\u003e#\u003c/th\u003e"},{"lineNumber":33,"author":{"gitId":"weiquu"},"content":"                      \u003cth class\u003d\"sortable-header\" (click)\u003d\"sortInstructorsToCopyForCourse(course, SortBy.RESPONDENT_NAME)\" [attr.aria-sort]\u003d\"getAriaSort(course, SortBy.RESPONDENT_NAME)\"\u003e"},{"lineNumber":34,"author":{"gitId":"weiquu"},"content":"                        \u003cbutton\u003e"},{"lineNumber":35,"author":{"gitId":"-"},"content":"                          Instructor Name"},{"lineNumber":36,"author":{"gitId":"weiquu"},"content":"                          \u003cspan class\u003d\"fa-stack\" aria-hidden\u003d\"true\"\u003e"},{"lineNumber":37,"author":{"gitId":"-"},"content":"                            \u003ci class\u003d\"fas fa-sort\"\u003e\u003c/i\u003e"},{"lineNumber":38,"author":{"gitId":"-"},"content":"                            \u003ci *ngIf\u003d\"isSortInstructorsBy(course, SortBy.RESPONDENT_NAME, SortOrder.DESC)\" class\u003d\"fas fa-sort-down\"\u003e\u003c/i\u003e"},{"lineNumber":39,"author":{"gitId":"-"},"content":"                            \u003ci *ngIf\u003d\"isSortInstructorsBy(course, SortBy.RESPONDENT_NAME, SortOrder.ASC)\" class\u003d\"fas fa-sort-up\"\u003e\u003c/i\u003e"},{"lineNumber":40,"author":{"gitId":"-"},"content":"                          \u003c/span\u003e"},{"lineNumber":41,"author":{"gitId":"weiquu"},"content":"                        \u003c/button\u003e"},{"lineNumber":42,"author":{"gitId":"-"},"content":"                      \u003c/th\u003e"},{"lineNumber":43,"author":{"gitId":"weiquu"},"content":"                      \u003cth class\u003d\"sortable-header\" (click)\u003d\"sortInstructorsToCopyForCourse(course, SortBy.RESPONDENT_EMAIL)\" [attr.aria-sort]\u003d\"getAriaSort(course, SortBy.RESPONDENT_EMAIL)\"\u003e"},{"lineNumber":44,"author":{"gitId":"weiquu"},"content":"                        \u003cbutton\u003e"},{"lineNumber":45,"author":{"gitId":"-"},"content":"                          Instructor Email"},{"lineNumber":46,"author":{"gitId":"weiquu"},"content":"                          \u003cspan class\u003d\"fa-stack\" aria-hidden\u003d\"true\"\u003e"},{"lineNumber":47,"author":{"gitId":"-"},"content":"                            \u003ci class\u003d\"fas fa-sort\"\u003e\u003c/i\u003e"},{"lineNumber":48,"author":{"gitId":"-"},"content":"                            \u003ci *ngIf\u003d\"isSortInstructorsBy(course, SortBy.RESPONDENT_EMAIL, SortOrder.DESC)\" class\u003d\"fas fa-sort-down\"\u003e\u003c/i\u003e"},{"lineNumber":49,"author":{"gitId":"-"},"content":"                            \u003ci *ngIf\u003d\"isSortInstructorsBy(course, SortBy.RESPONDENT_EMAIL, SortOrder.ASC)\" class\u003d\"fas fa-sort-up\"\u003e\u003c/i\u003e"},{"lineNumber":50,"author":{"gitId":"-"},"content":"                          \u003c/span\u003e"},{"lineNumber":51,"author":{"gitId":"weiquu"},"content":"                        \u003c/button\u003e"},{"lineNumber":52,"author":{"gitId":"-"},"content":"                      \u003c/th\u003e"},{"lineNumber":53,"author":{"gitId":"weiquu"},"content":"                      \u003cth class\u003d\"sortable-header\" (click)\u003d\"sortInstructorsToCopyForCourse(course, SortBy.INSTRUCTOR_DISPLAYED_TEXT)\" [attr.aria-sort]\u003d\"getAriaSort(course, SortBy.INSTRUCTOR_DISPLAYED_TEXT)\"\u003e"},{"lineNumber":54,"author":{"gitId":"weiquu"},"content":"                        \u003cbutton\u003e"},{"lineNumber":55,"author":{"gitId":"-"},"content":"                          Displayed to Student As"},{"lineNumber":56,"author":{"gitId":"weiquu"},"content":"                          \u003cspan class\u003d\"fa-stack\" aria-hidden\u003d\"true\"\u003e"},{"lineNumber":57,"author":{"gitId":"-"},"content":"                            \u003ci class\u003d\"fas fa-sort\"\u003e\u003c/i\u003e"},{"lineNumber":58,"author":{"gitId":"-"},"content":"                            \u003ci *ngIf\u003d\"isSortInstructorsBy(course, SortBy.INSTRUCTOR_DISPLAYED_TEXT, SortOrder.DESC)\" class\u003d\"fas fa-sort-down\"\u003e\u003c/i\u003e"},{"lineNumber":59,"author":{"gitId":"-"},"content":"                            \u003ci *ngIf\u003d\"isSortInstructorsBy(course, SortBy.INSTRUCTOR_DISPLAYED_TEXT, SortOrder.ASC)\" class\u003d\"fas fa-sort-up\"\u003e\u003c/i\u003e"},{"lineNumber":60,"author":{"gitId":"-"},"content":"                          \u003c/span\u003e"},{"lineNumber":61,"author":{"gitId":"weiquu"},"content":"                        \u003c/button\u003e"},{"lineNumber":62,"author":{"gitId":"-"},"content":"                      \u003c/th\u003e"},{"lineNumber":63,"author":{"gitId":"weiquu"},"content":"                      \u003cth class\u003d\"sortable-header\" (click)\u003d\"sortInstructorsToCopyForCourse(course, SortBy.INSTRUCTOR_PERMISSION_ROLE)\" [attr.aria-sort]\u003d\"getAriaSort(course, SortBy.INSTRUCTOR_PERMISSION_ROLE)\"\u003e"},{"lineNumber":64,"author":{"gitId":"weiquu"},"content":"                        \u003cbutton\u003e"},{"lineNumber":65,"author":{"gitId":"-"},"content":"                          Access Level"},{"lineNumber":66,"author":{"gitId":"weiquu"},"content":"                          \u003cspan class\u003d\"fa-stack\" aria-hidden\u003d\"true\"\u003e"},{"lineNumber":67,"author":{"gitId":"-"},"content":"                            \u003ci class\u003d\"fas fa-sort\"\u003e\u003c/i\u003e"},{"lineNumber":68,"author":{"gitId":"-"},"content":"                            \u003ci *ngIf\u003d\"isSortInstructorsBy(course, SortBy.INSTRUCTOR_PERMISSION_ROLE, SortOrder.DESC)\" class\u003d\"fas fa-sort-down\"\u003e\u003c/i\u003e"},{"lineNumber":69,"author":{"gitId":"-"},"content":"                            \u003ci *ngIf\u003d\"isSortInstructorsBy(course, SortBy.INSTRUCTOR_PERMISSION_ROLE, SortOrder.ASC)\" class\u003d\"fas fa-sort-up\"\u003e\u003c/i\u003e"},{"lineNumber":70,"author":{"gitId":"-"},"content":"                          \u003c/span\u003e"},{"lineNumber":71,"author":{"gitId":"weiquu"},"content":"                        \u003c/button\u003e"},{"lineNumber":72,"author":{"gitId":"-"},"content":"                      \u003c/th\u003e"},{"lineNumber":73,"author":{"gitId":"-"},"content":"                    \u003c/tr\u003e"},{"lineNumber":74,"author":{"gitId":"-"},"content":"                  \u003c/thead\u003e"},{"lineNumber":75,"author":{"gitId":"-"},"content":"                  \u003ctbody\u003e"},{"lineNumber":76,"author":{"gitId":"-"},"content":"                    \u003ctr *ngFor\u003d\"let instructorCandidate of course.instructorCandidates\"\u003e"},{"lineNumber":77,"author":{"gitId":"-"},"content":"                      \u003ctd\u003e"},{"lineNumber":78,"author":{"gitId":"-"},"content":"                        \u003cdiv *ngIf\u003d\"instructorCandidate.instructor.role \u003d\u003d\u003d InstructorPermissionRole.INSTRUCTOR_PERMISSION_ROLE_CUSTOM\" class\u003d\"ngb-tooltip-class\" ngbTooltip\u003d\"This instructor has a customised access level and cannot be copied.\"\u003e"},{"lineNumber":79,"author":{"gitId":"-"},"content":"                          \u003cinput disabled type\u003d\"checkbox\" class\u003d\"form-check-input no-shadow\"\u003e"},{"lineNumber":80,"author":{"gitId":"-"},"content":"                        \u003c/div\u003e"},{"lineNumber":81,"author":{"gitId":"-"},"content":"                        \u003cdiv *ngIf\u003d\"instructorCandidate.instructor.role !\u003d\u003d InstructorPermissionRole.INSTRUCTOR_PERMISSION_ROLE_CUSTOM\"\u003e"},{"lineNumber":82,"author":{"gitId":"-"},"content":"                          \u003cinput id\u003d\"enabled-checkbox\" [disabled]\u003d\"isCopyingSelectedInstructors\" type\u003d\"checkbox\" class\u003d\"form-check-input no-shadow\" [(ngModel)]\u003d\"instructorCandidate.isSelected\"\u003e"},{"lineNumber":83,"author":{"gitId":"-"},"content":"                        \u003c/div\u003e"},{"lineNumber":84,"author":{"gitId":"-"},"content":"                      \u003c/td\u003e"},{"lineNumber":85,"author":{"gitId":"-"},"content":"                      \u003ctd\u003e{{ instructorCandidate.instructor.name }}\u003c/td\u003e"},{"lineNumber":86,"author":{"gitId":"-"},"content":"                      \u003ctd\u003e{{ instructorCandidate.instructor.email }}\u003c/td\u003e"},{"lineNumber":87,"author":{"gitId":"-"},"content":"                      \u003ctd\u003e{{ instructorCandidate.instructor.isDisplayedToStudents ? instructorCandidate.instructor.displayedToStudentsAs : notDisplayedToStudentText }}\u003c/td\u003e"},{"lineNumber":88,"author":{"gitId":"-"},"content":"                      \u003ctd\u003e{{ instructorCandidate.instructor.role  | instructorRoleName }}\u003c/td\u003e"},{"lineNumber":89,"author":{"gitId":"-"},"content":"                    \u003c/tr\u003e"},{"lineNumber":90,"author":{"gitId":"-"},"content":"                  \u003c/tbody\u003e"},{"lineNumber":91,"author":{"gitId":"-"},"content":"                \u003c/table\u003e"},{"lineNumber":92,"author":{"gitId":"-"},"content":"              \u003c/ng-container\u003e"},{"lineNumber":93,"author":{"gitId":"-"},"content":"              \u003cbutton class\u003d\"btn btn-secondary float-end mt-2 mb-3\" (click)\u003d\"loadInstructors(course)\" [disabled]\u003d\"isCopyingSelectedInstructors\"\u003e"},{"lineNumber":94,"author":{"gitId":"-"},"content":"                \u003ci class\u003d\"fas fa-redo\" aria-hidden\u003d\"true\"\u003e\u003c/i\u003e"},{"lineNumber":95,"author":{"gitId":"-"},"content":"                \u0026nbsp;Reload"},{"lineNumber":96,"author":{"gitId":"-"},"content":"              \u003c/button\u003e"},{"lineNumber":97,"author":{"gitId":"-"},"content":"            \u003c/div\u003e"},{"lineNumber":98,"author":{"gitId":"-"},"content":"          \u003c/div\u003e"},{"lineNumber":99,"author":{"gitId":"-"},"content":"        \u003c/tm-loading-retry\u003e"},{"lineNumber":100,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":101,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":102,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":103,"author":{"gitId":"-"},"content":"\u003c/div\u003e"},{"lineNumber":104,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"modal-footer\"\u003e"},{"lineNumber":105,"author":{"gitId":"-"},"content":"  \u003cbutton id\u003d\"btn-confirm-copy-instructor\" type\u003d\"button\" class\u003d\"btn btn-primary\" (click)\u003d\"copySelectedInstructors()\" [disabled]\u003d\"!isAnyInstructorCandidatesSelected || isCopyingSelectedInstructors\"\u003e"},{"lineNumber":106,"author":{"gitId":"-"},"content":"    \u003ctm-ajax-loading *ngIf\u003d\"isCopyingSelectedInstructors\"\u003e\u003c/tm-ajax-loading\u003eCopy"},{"lineNumber":107,"author":{"gitId":"-"},"content":"  \u003c/button\u003e"},{"lineNumber":108,"author":{"gitId":"-"},"content":"  \u003cbutton id\u003d\"btn-cancel-copy-instructor\" type\u003d\"button\" class\u003d\"btn btn-light\" (click)\u003d\"activeModal.dismiss()\" [disabled]\u003d\"isCopyingSelectedInstructors\"\u003eCancel\u003c/button\u003e"},{"lineNumber":109,"author":{"gitId":"-"},"content":"\u003c/div\u003e"}],"authorContributionMap":{"weiquu":16,"-":93}},{"path":"src/web/app/pages-instructor/instructor-course-edit-page/copy-instructors-from-other-courses-modal/copy-instructors-from-other-courses-modal.component.scss","fileType":"scss","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":".sortable-header {"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  cursor: pointer;"},{"lineNumber":3,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":4,"author":{"gitId":"weiquu"},"content":"  i {"},{"lineNumber":5,"author":{"gitId":"weiquu"},"content":"    margin-left: .3em;"},{"lineNumber":6,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":7,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":8,"author":{"gitId":"weiquu"},"content":"  .fa-stack {"},{"lineNumber":9,"author":{"gitId":"weiquu"},"content":"    width: 20%;"},{"lineNumber":10,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":11,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":12,"author":{"gitId":"weiquu"},"content":"  button {"},{"lineNumber":13,"author":{"gitId":"weiquu"},"content":"    background: none;"},{"lineNumber":14,"author":{"gitId":"weiquu"},"content":"    color: inherit;"},{"lineNumber":15,"author":{"gitId":"weiquu"},"content":"    border: none;"},{"lineNumber":16,"author":{"gitId":"weiquu"},"content":"    padding: 0;"},{"lineNumber":17,"author":{"gitId":"weiquu"},"content":"    text-align: left;"},{"lineNumber":18,"author":{"gitId":"weiquu"},"content":"    width: 100%;"},{"lineNumber":19,"author":{"gitId":"weiquu"},"content":"    font: inherit;"},{"lineNumber":20,"author":{"gitId":"weiquu"},"content":"    cursor: inherit;"},{"lineNumber":21,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":22,"author":{"gitId":"-"},"content":"}"},{"lineNumber":23,"author":{"gitId":"-"},"content":""},{"lineNumber":24,"author":{"gitId":"-"},"content":"#copy-instructor-modal {"},{"lineNumber":25,"author":{"gitId":"-"},"content":"  table-layout: auto;"},{"lineNumber":26,"author":{"gitId":"-"},"content":"  margin-bottom: 10px;"},{"lineNumber":27,"author":{"gitId":"-"},"content":"  min-width: 70vw;"},{"lineNumber":28,"author":{"gitId":"-"},"content":"}"},{"lineNumber":29,"author":{"gitId":"-"},"content":""},{"lineNumber":30,"author":{"gitId":"-"},"content":".modal-footer {"},{"lineNumber":31,"author":{"gitId":"-"},"content":"  justify-content: right;"},{"lineNumber":32,"author":{"gitId":"-"},"content":"  background-color: white;"},{"lineNumber":33,"author":{"gitId":"-"},"content":"}"},{"lineNumber":34,"author":{"gitId":"-"},"content":""},{"lineNumber":35,"author":{"gitId":"-"},"content":".form-control {"},{"lineNumber":36,"author":{"gitId":"-"},"content":"  height: calc(.5em + 1.5vh);"},{"lineNumber":37,"author":{"gitId":"-"},"content":"  width: calc(.5em + 1.5vw);"},{"lineNumber":38,"author":{"gitId":"-"},"content":"}"},{"lineNumber":39,"author":{"gitId":"-"},"content":""},{"lineNumber":40,"author":{"gitId":"-"},"content":".no-shadow {"},{"lineNumber":41,"author":{"gitId":"-"},"content":"  box-shadow: none;"},{"lineNumber":42,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"weiquu":19,"-":23}},{"path":"src/web/app/pages-instructor/instructor-course-edit-page/copy-instructors-from-other-courses-modal/copy-instructors-from-other-courses-modal.component.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { Component, EventEmitter, Output } from \u0027@angular/core\u0027;"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import { NgbActiveModal } from \u0027@ng-bootstrap/ng-bootstrap\u0027;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"import { InstructorService } from \u0027../../../../services/instructor.service\u0027;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import { StatusMessageService } from \u0027../../../../services/status-message.service\u0027;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import { TableComparatorService } from \u0027../../../../services/table-comparator.service\u0027;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import { Instructor, InstructorPermissionRole, Instructors } from \u0027../../../../types/api-output\u0027;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import { Intent } from \u0027../../../../types/api-request\u0027;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import { SortBy, SortOrder } from \u0027../../../../types/sort-properties\u0027;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import { ErrorMessageOutput } from \u0027../../../error-message-output\u0027;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import { CourseTabModel, InstructorToCopyCandidateModel } from \u0027./copy-instructors-from-other-courses-modal-model\u0027;"},{"lineNumber":11,"author":{"gitId":"-"},"content":""},{"lineNumber":12,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":13,"author":{"gitId":"-"},"content":" * Modal to select instructors to copy from other courses."},{"lineNumber":14,"author":{"gitId":"-"},"content":" */"},{"lineNumber":15,"author":{"gitId":"-"},"content":"@Component({"},{"lineNumber":16,"author":{"gitId":"-"},"content":"  selector: \u0027tm-copy-instructors-from-other-courses-modal\u0027,"},{"lineNumber":17,"author":{"gitId":"-"},"content":"  templateUrl: \u0027./copy-instructors-from-other-courses-modal.component.html\u0027,"},{"lineNumber":18,"author":{"gitId":"-"},"content":"  styleUrls: [\u0027./copy-instructors-from-other-courses-modal.component.scss\u0027],"},{"lineNumber":19,"author":{"gitId":"-"},"content":"})"},{"lineNumber":20,"author":{"gitId":"-"},"content":"export class CopyInstructorsFromOtherCoursesModalComponent {"},{"lineNumber":21,"author":{"gitId":"-"},"content":""},{"lineNumber":22,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":23,"author":{"gitId":"-"},"content":"  copyClickedEvent: EventEmitter\u003cInstructor[]\u003e \u003d new EventEmitter();"},{"lineNumber":24,"author":{"gitId":"-"},"content":""},{"lineNumber":25,"author":{"gitId":"-"},"content":"  // enum"},{"lineNumber":26,"author":{"gitId":"-"},"content":"  SortBy: typeof SortBy \u003d SortBy;"},{"lineNumber":27,"author":{"gitId":"-"},"content":"  SortOrder: typeof SortOrder \u003d SortOrder;"},{"lineNumber":28,"author":{"gitId":"-"},"content":"  InstructorPermissionRole: typeof InstructorPermissionRole \u003d InstructorPermissionRole;"},{"lineNumber":29,"author":{"gitId":"-"},"content":""},{"lineNumber":30,"author":{"gitId":"-"},"content":"  // data"},{"lineNumber":31,"author":{"gitId":"-"},"content":"  courses: CourseTabModel[] \u003d [];"},{"lineNumber":32,"author":{"gitId":"-"},"content":""},{"lineNumber":33,"author":{"gitId":"-"},"content":"  readonly notDisplayedToStudentText: string \u003d \u0027(NOT displayed to students)\u0027;"},{"lineNumber":34,"author":{"gitId":"-"},"content":"  coursesSortBy: SortBy | undefined;"},{"lineNumber":35,"author":{"gitId":"-"},"content":"  isCopyingSelectedInstructors: boolean \u003d false;"},{"lineNumber":36,"author":{"gitId":"-"},"content":""},{"lineNumber":37,"author":{"gitId":"-"},"content":"  constructor(public activeModal: NgbActiveModal,"},{"lineNumber":38,"author":{"gitId":"-"},"content":"              public statusMessageService: StatusMessageService,"},{"lineNumber":39,"author":{"gitId":"-"},"content":"              public instructorService: InstructorService,"},{"lineNumber":40,"author":{"gitId":"-"},"content":"              private tableComparatorService: TableComparatorService) { }"},{"lineNumber":41,"author":{"gitId":"-"},"content":""},{"lineNumber":42,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":43,"author":{"gitId":"-"},"content":"   * Toggles specific card and loads instructors if needed."},{"lineNumber":44,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":45,"author":{"gitId":"-"},"content":"  toggleCard(course: CourseTabModel): void {"},{"lineNumber":46,"author":{"gitId":"-"},"content":"    course.isTabExpanded \u003d !course.isTabExpanded;"},{"lineNumber":47,"author":{"gitId":"-"},"content":"    if (!course.hasInstructorsLoaded) {"},{"lineNumber":48,"author":{"gitId":"-"},"content":"      this.loadInstructors(course);"},{"lineNumber":49,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":50,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":51,"author":{"gitId":"-"},"content":""},{"lineNumber":52,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":53,"author":{"gitId":"-"},"content":"   * Loads the instructors in the course."},{"lineNumber":54,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":55,"author":{"gitId":"-"},"content":"  loadInstructors(course: CourseTabModel): void {"},{"lineNumber":56,"author":{"gitId":"-"},"content":"    course.hasInstructorsLoaded \u003d false;"},{"lineNumber":57,"author":{"gitId":"-"},"content":"    course.hasLoadingFailed \u003d false;"},{"lineNumber":58,"author":{"gitId":"-"},"content":"    course.instructorCandidates \u003d [];"},{"lineNumber":59,"author":{"gitId":"-"},"content":"    this.instructorService.loadInstructors({"},{"lineNumber":60,"author":{"gitId":"-"},"content":"      courseId: course.courseId,"},{"lineNumber":61,"author":{"gitId":"-"},"content":"      intent: Intent.FULL_DETAIL,"},{"lineNumber":62,"author":{"gitId":"-"},"content":"    }).subscribe({"},{"lineNumber":63,"author":{"gitId":"-"},"content":"      next: (response: Instructors) \u003d\u003e {"},{"lineNumber":64,"author":{"gitId":"-"},"content":"        response.instructors.forEach((i: Instructor) \u003d\u003e {"},{"lineNumber":65,"author":{"gitId":"-"},"content":"          const instructorToCopy: InstructorToCopyCandidateModel \u003d {"},{"lineNumber":66,"author":{"gitId":"-"},"content":"            instructor: i,"},{"lineNumber":67,"author":{"gitId":"-"},"content":"            isSelected: false,"},{"lineNumber":68,"author":{"gitId":"-"},"content":"          };"},{"lineNumber":69,"author":{"gitId":"-"},"content":"          course.instructorCandidates.push(instructorToCopy);"},{"lineNumber":70,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":71,"author":{"gitId":"-"},"content":"        course.hasInstructorsLoaded \u003d true;"},{"lineNumber":72,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":73,"author":{"gitId":"-"},"content":"      error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":74,"author":{"gitId":"-"},"content":"        course.hasLoadingFailed \u003d true;"},{"lineNumber":75,"author":{"gitId":"-"},"content":"        this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":76,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":77,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":78,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":79,"author":{"gitId":"-"},"content":""},{"lineNumber":80,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":81,"author":{"gitId":"-"},"content":"   * Attempts to copy the selected instructors."},{"lineNumber":82,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":83,"author":{"gitId":"-"},"content":"  copySelectedInstructors(): void {"},{"lineNumber":84,"author":{"gitId":"-"},"content":"    this.isCopyingSelectedInstructors \u003d true;"},{"lineNumber":85,"author":{"gitId":"-"},"content":"    const instructors: Instructor[] \u003d this.getSelectedInstructors();"},{"lineNumber":86,"author":{"gitId":"-"},"content":"    this.copyClickedEvent.emit(instructors);"},{"lineNumber":87,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":88,"author":{"gitId":"-"},"content":""},{"lineNumber":89,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":90,"author":{"gitId":"-"},"content":"   * Gets the selected instructors to copy."},{"lineNumber":91,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":92,"author":{"gitId":"-"},"content":"  getSelectedInstructors(): Instructor[] {"},{"lineNumber":93,"author":{"gitId":"-"},"content":"    const selectedInstructors: Instructor[] \u003d [];"},{"lineNumber":94,"author":{"gitId":"-"},"content":"    this.courses.forEach((course: CourseTabModel) \u003d\u003e {"},{"lineNumber":95,"author":{"gitId":"-"},"content":"      if (course.instructorCandidates.length \u003e 0) {"},{"lineNumber":96,"author":{"gitId":"-"},"content":"        selectedInstructors.push("},{"lineNumber":97,"author":{"gitId":"-"},"content":"          ...course.instructorCandidates"},{"lineNumber":98,"author":{"gitId":"-"},"content":"            .filter((c: InstructorToCopyCandidateModel) \u003d\u003e c.isSelected)"},{"lineNumber":99,"author":{"gitId":"-"},"content":"            .map((c: InstructorToCopyCandidateModel) \u003d\u003e c.instructor),"},{"lineNumber":100,"author":{"gitId":"-"},"content":"        );"},{"lineNumber":101,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":102,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":103,"author":{"gitId":"-"},"content":"    return selectedInstructors;"},{"lineNumber":104,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":105,"author":{"gitId":"-"},"content":""},{"lineNumber":106,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":107,"author":{"gitId":"-"},"content":"   * Checks the option selected to sort courses."},{"lineNumber":108,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":109,"author":{"gitId":"-"},"content":"  isSelectedForSorting(by: SortBy): boolean {"},{"lineNumber":110,"author":{"gitId":"-"},"content":"    return this.coursesSortBy \u003d\u003d\u003d by;"},{"lineNumber":111,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":112,"author":{"gitId":"-"},"content":""},{"lineNumber":113,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":114,"author":{"gitId":"-"},"content":"   * Check whether the course instructors are sorted by the given type and in the given order."},{"lineNumber":115,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":116,"author":{"gitId":"-"},"content":"  isSortInstructorsBy(course: CourseTabModel, by: SortBy, order: SortOrder): boolean {"},{"lineNumber":117,"author":{"gitId":"-"},"content":"    return course.instructorCandidatesSortBy \u003d\u003d\u003d by \u0026\u0026 course.instructorCandidatesSortOrder \u003d\u003d\u003d order;"},{"lineNumber":118,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":119,"author":{"gitId":"-"},"content":""},{"lineNumber":120,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":121,"author":{"gitId":"-"},"content":"   * Sorts the list of courses."},{"lineNumber":122,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":123,"author":{"gitId":"-"},"content":"  sortCourses(by: SortBy): void {"},{"lineNumber":124,"author":{"gitId":"-"},"content":"    this.coursesSortBy \u003d by;"},{"lineNumber":125,"author":{"gitId":"-"},"content":"    this.courses.sort(this.sortCoursesBy(by));"},{"lineNumber":126,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":127,"author":{"gitId":"-"},"content":""},{"lineNumber":128,"author":{"gitId":"weiquu"},"content":"  getAriaSort(course: CourseTabModel, by: SortBy): String {"},{"lineNumber":129,"author":{"gitId":"weiquu"},"content":"    if (course.instructorCandidatesSortBy !\u003d\u003d by) {"},{"lineNumber":130,"author":{"gitId":"weiquu"},"content":"      return \u0027none\u0027;"},{"lineNumber":131,"author":{"gitId":"weiquu"},"content":"    }"},{"lineNumber":132,"author":{"gitId":"weiquu"},"content":"    return course.instructorCandidatesSortOrder \u003d\u003d\u003d SortOrder.ASC ? \u0027ascending\u0027 : \u0027descending\u0027;"},{"lineNumber":133,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":134,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":135,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":136,"author":{"gitId":"-"},"content":"   * Sorts the list of instructors for a course."},{"lineNumber":137,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":138,"author":{"gitId":"-"},"content":"  sortInstructorsToCopyForCourse(course: CourseTabModel, by: SortBy): void {"},{"lineNumber":139,"author":{"gitId":"-"},"content":"    course.instructorCandidatesSortBy \u003d by;"},{"lineNumber":140,"author":{"gitId":"-"},"content":"    // reverse the sort order"},{"lineNumber":141,"author":{"gitId":"-"},"content":"    course.instructorCandidatesSortOrder \u003d"},{"lineNumber":142,"author":{"gitId":"-"},"content":"      course.instructorCandidatesSortOrder \u003d\u003d\u003d SortOrder.DESC ? SortOrder.ASC : SortOrder.DESC;"},{"lineNumber":143,"author":{"gitId":"-"},"content":"    course.instructorCandidates.sort(this.sortInstructorsBy(by, course.instructorCandidatesSortOrder));"},{"lineNumber":144,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":145,"author":{"gitId":"-"},"content":""},{"lineNumber":146,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":147,"author":{"gitId":"-"},"content":"   * Generates a sorting function for courses."},{"lineNumber":148,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":149,"author":{"gitId":"-"},"content":"  protected sortCoursesBy(by: SortBy):"},{"lineNumber":150,"author":{"gitId":"-"},"content":"      ((a: CourseTabModel, b: CourseTabModel) \u003d\u003e number) {"},{"lineNumber":151,"author":{"gitId":"-"},"content":"    return ((a: CourseTabModel, b: CourseTabModel): number \u003d\u003e {"},{"lineNumber":152,"author":{"gitId":"-"},"content":"      let strA: string;"},{"lineNumber":153,"author":{"gitId":"-"},"content":"      let strB: string;"},{"lineNumber":154,"author":{"gitId":"-"},"content":"      let order: SortOrder;"},{"lineNumber":155,"author":{"gitId":"-"},"content":"      switch (by) {"},{"lineNumber":156,"author":{"gitId":"-"},"content":"        case SortBy.COURSE_ID:"},{"lineNumber":157,"author":{"gitId":"-"},"content":"          strA \u003d a.courseId;"},{"lineNumber":158,"author":{"gitId":"-"},"content":"          strB \u003d b.courseId;"},{"lineNumber":159,"author":{"gitId":"-"},"content":"          order \u003d SortOrder.ASC;"},{"lineNumber":160,"author":{"gitId":"-"},"content":"          break;"},{"lineNumber":161,"author":{"gitId":"-"},"content":"        case SortBy.COURSE_NAME:"},{"lineNumber":162,"author":{"gitId":"-"},"content":"          strA \u003d a.courseName;"},{"lineNumber":163,"author":{"gitId":"-"},"content":"          strB \u003d b.courseName;"},{"lineNumber":164,"author":{"gitId":"-"},"content":"          order \u003d SortOrder.ASC;"},{"lineNumber":165,"author":{"gitId":"-"},"content":"          break;"},{"lineNumber":166,"author":{"gitId":"-"},"content":"        case SortBy.COURSE_CREATION_DATE:"},{"lineNumber":167,"author":{"gitId":"-"},"content":"          strA \u003d a.creationTimestamp.toString();"},{"lineNumber":168,"author":{"gitId":"-"},"content":"          strB \u003d b.creationTimestamp.toString();"},{"lineNumber":169,"author":{"gitId":"-"},"content":"          order \u003d SortOrder.DESC;"},{"lineNumber":170,"author":{"gitId":"-"},"content":"          break;"},{"lineNumber":171,"author":{"gitId":"-"},"content":"        default:"},{"lineNumber":172,"author":{"gitId":"-"},"content":"          strA \u003d \u0027\u0027;"},{"lineNumber":173,"author":{"gitId":"-"},"content":"          strB \u003d \u0027\u0027;"},{"lineNumber":174,"author":{"gitId":"-"},"content":"          order \u003d SortOrder.ASC;"},{"lineNumber":175,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":176,"author":{"gitId":"-"},"content":"      return this.tableComparatorService.compare(by, order, strA, strB);"},{"lineNumber":177,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":178,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":179,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":180,"author":{"gitId":"-"},"content":"   * Generates a sorting function for instructors."},{"lineNumber":181,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":182,"author":{"gitId":"-"},"content":"  protected sortInstructorsBy(by: SortBy, order: SortOrder):"},{"lineNumber":183,"author":{"gitId":"-"},"content":"      ((a: InstructorToCopyCandidateModel, b: InstructorToCopyCandidateModel) \u003d\u003e number) {"},{"lineNumber":184,"author":{"gitId":"-"},"content":"    return ((a: InstructorToCopyCandidateModel, b: InstructorToCopyCandidateModel): number \u003d\u003e {"},{"lineNumber":185,"author":{"gitId":"-"},"content":"      let strA: string;"},{"lineNumber":186,"author":{"gitId":"-"},"content":"      let strB: string;"},{"lineNumber":187,"author":{"gitId":"-"},"content":"      switch (by) {"},{"lineNumber":188,"author":{"gitId":"-"},"content":"        case SortBy.RESPONDENT_NAME:"},{"lineNumber":189,"author":{"gitId":"-"},"content":"          strA \u003d a.instructor.name;"},{"lineNumber":190,"author":{"gitId":"-"},"content":"          strB \u003d b.instructor.name;"},{"lineNumber":191,"author":{"gitId":"-"},"content":"          break;"},{"lineNumber":192,"author":{"gitId":"-"},"content":"        case SortBy.RESPONDENT_EMAIL:"},{"lineNumber":193,"author":{"gitId":"-"},"content":"          strA \u003d a.instructor.email;"},{"lineNumber":194,"author":{"gitId":"-"},"content":"          strB \u003d b.instructor.email;"},{"lineNumber":195,"author":{"gitId":"-"},"content":"          break;"},{"lineNumber":196,"author":{"gitId":"-"},"content":"        case SortBy.INSTRUCTOR_DISPLAYED_TEXT:"},{"lineNumber":197,"author":{"gitId":"-"},"content":"          strA \u003d a.instructor.isDisplayedToStudents"},{"lineNumber":198,"author":{"gitId":"-"},"content":"            ? a.instructor.displayedToStudentsAs || \u0027\u0027"},{"lineNumber":199,"author":{"gitId":"-"},"content":"            : this.notDisplayedToStudentText;"},{"lineNumber":200,"author":{"gitId":"-"},"content":"          strB \u003d b.instructor.isDisplayedToStudents"},{"lineNumber":201,"author":{"gitId":"-"},"content":"            ? b.instructor.displayedToStudentsAs || \u0027\u0027"},{"lineNumber":202,"author":{"gitId":"-"},"content":"            : this.notDisplayedToStudentText;"},{"lineNumber":203,"author":{"gitId":"-"},"content":"          break;"},{"lineNumber":204,"author":{"gitId":"-"},"content":"        case SortBy.INSTRUCTOR_PERMISSION_ROLE:"},{"lineNumber":205,"author":{"gitId":"-"},"content":"          strA \u003d a.instructor.role || \u0027\u0027;"},{"lineNumber":206,"author":{"gitId":"-"},"content":"          strB \u003d b.instructor.role || \u0027\u0027;"},{"lineNumber":207,"author":{"gitId":"-"},"content":"          break;"},{"lineNumber":208,"author":{"gitId":"-"},"content":"        default:"},{"lineNumber":209,"author":{"gitId":"-"},"content":"          strA \u003d \u0027\u0027;"},{"lineNumber":210,"author":{"gitId":"-"},"content":"          strB \u003d \u0027\u0027;"},{"lineNumber":211,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":212,"author":{"gitId":"-"},"content":"      return this.tableComparatorService.compare(by, order, strA, strB);"},{"lineNumber":213,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":214,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":215,"author":{"gitId":"-"},"content":""},{"lineNumber":216,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":217,"author":{"gitId":"-"},"content":"   * Checks whether there are any selected instructors."},{"lineNumber":218,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":219,"author":{"gitId":"-"},"content":"  get isAnyInstructorCandidatesSelected(): boolean {"},{"lineNumber":220,"author":{"gitId":"-"},"content":"    return this.courses.reduce((a: boolean, b: CourseTabModel) \u003d\u003e {"},{"lineNumber":221,"author":{"gitId":"-"},"content":"      return a || !!b.instructorCandidates.find((c: InstructorToCopyCandidateModel) \u003d\u003e c.isSelected);"},{"lineNumber":222,"author":{"gitId":"-"},"content":"    }, false);"},{"lineNumber":223,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":224,"author":{"gitId":"-"},"content":""},{"lineNumber":225,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"weiquu":7,"-":218}},{"path":"src/web/app/pages-instructor/instructor-course-enroll-page/instructor-course-enroll-page.component.scss","fileType":"scss","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":".fill-plain {"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  background-color: #EAEFF5;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"}"},{"lineNumber":4,"author":{"gitId":"-"},"content":""},{"lineNumber":5,"author":{"gitId":"-"},"content":".card-default {"},{"lineNumber":6,"author":{"gitId":"-"},"content":"  border-color: #DDD;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"  width: 100%;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"  margin-bottom: 20px;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"}"},{"lineNumber":10,"author":{"gitId":"-"},"content":""},{"lineNumber":11,"author":{"gitId":"-"},"content":".card-header {"},{"lineNumber":12,"author":{"gitId":"-"},"content":"  background-color: #F0F0F0;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"}"},{"lineNumber":14,"author":{"gitId":"-"},"content":""},{"lineNumber":15,"author":{"gitId":"-"},"content":".card-body {"},{"lineNumber":16,"author":{"gitId":"-"},"content":"  padding: 15px;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"}"},{"lineNumber":18,"author":{"gitId":"-"},"content":""},{"lineNumber":19,"author":{"gitId":"-"},"content":".text-muted {"},{"lineNumber":20,"author":{"gitId":"-"},"content":"  padding: 15px;"},{"lineNumber":21,"author":{"gitId":"-"},"content":"  margin-bottom: 0;"},{"lineNumber":22,"author":{"gitId":"-"},"content":"}"},{"lineNumber":23,"author":{"gitId":"-"},"content":""},{"lineNumber":24,"author":{"gitId":"-"},"content":".scroll-down :hover {"},{"lineNumber":25,"author":{"gitId":"-"},"content":"  color: blue;"},{"lineNumber":26,"author":{"gitId":"-"},"content":"  cursor: pointer;"},{"lineNumber":27,"author":{"gitId":"-"},"content":"}"},{"lineNumber":28,"author":{"gitId":"-"},"content":""},{"lineNumber":29,"author":{"gitId":"-"},"content":".status-message {"},{"lineNumber":30,"author":{"gitId":"-"},"content":"  padding: 15px;"},{"lineNumber":31,"author":{"gitId":"-"},"content":"}"},{"lineNumber":32,"author":{"gitId":"-"},"content":""},{"lineNumber":33,"author":{"gitId":"-"},"content":".more-info {"},{"lineNumber":34,"author":{"gitId":"-"},"content":"  margin-top: 30px;"},{"lineNumber":35,"author":{"gitId":"-"},"content":"  padding-bottom: 30px;"},{"lineNumber":36,"author":{"gitId":"-"},"content":"}"},{"lineNumber":37,"author":{"gitId":"-"},"content":""},{"lineNumber":38,"author":{"gitId":"-"},"content":".more-info-point-title {"},{"lineNumber":39,"author":{"gitId":"-"},"content":"  display: block;"},{"lineNumber":40,"author":{"gitId":"-"},"content":"  font-weight: bold;"},{"lineNumber":41,"author":{"gitId":"-"},"content":"  margin: 10px 0;"},{"lineNumber":42,"author":{"gitId":"-"},"content":"}"},{"lineNumber":43,"author":{"gitId":"-"},"content":""},{"lineNumber":44,"author":{"gitId":"-"},"content":".more-info-column-info {"},{"lineNumber":45,"author":{"gitId":"-"},"content":"  list-style: circle;"},{"lineNumber":46,"author":{"gitId":"-"},"content":"}"},{"lineNumber":47,"author":{"gitId":"-"},"content":""},{"lineNumber":48,"author":{"gitId":"-"},"content":".more-info-sub-point-details {"},{"lineNumber":49,"author":{"gitId":"-"},"content":"  list-style: disc;"},{"lineNumber":50,"author":{"gitId":"-"},"content":"  margin-left: -20px;"},{"lineNumber":51,"author":{"gitId":"-"},"content":"}"},{"lineNumber":52,"author":{"gitId":"-"},"content":""},{"lineNumber":53,"author":{"gitId":"-"},"content":".enroll-students-spreadsheet-buttons {"},{"lineNumber":54,"author":{"gitId":"-"},"content":"  margin-top: -15px;"},{"lineNumber":55,"author":{"gitId":"-"},"content":"}"},{"lineNumber":56,"author":{"gitId":"-"},"content":""},{"lineNumber":57,"author":{"gitId":"-"},"content":"#number-of-rows {"},{"lineNumber":58,"author":{"gitId":"-"},"content":"  margin-left: 10px;"},{"lineNumber":59,"author":{"gitId":"-"},"content":"}"},{"lineNumber":60,"author":{"gitId":"-"},"content":""},{"lineNumber":61,"author":{"gitId":"-"},"content":".enroll-results-panel {"},{"lineNumber":62,"author":{"gitId":"-"},"content":"  margin-bottom: 15px;"},{"lineNumber":63,"author":{"gitId":"-"},"content":"}"},{"lineNumber":64,"author":{"gitId":"-"},"content":""},{"lineNumber":65,"author":{"gitId":"-"},"content":".existing-students-status-message {"},{"lineNumber":66,"author":{"gitId":"-"},"content":"  font-weight: bold;"},{"lineNumber":67,"author":{"gitId":"-"},"content":"  margin-left: 1em;"},{"lineNumber":68,"author":{"gitId":"-"},"content":"  margin-right: 1em;"},{"lineNumber":69,"author":{"gitId":"-"},"content":"}"},{"lineNumber":70,"author":{"gitId":"-"},"content":""},{"lineNumber":71,"author":{"gitId":"-"},"content":".enroll-button-group {"},{"lineNumber":72,"author":{"gitId":"-"},"content":"  width: 50%;"},{"lineNumber":73,"author":{"gitId":"-"},"content":"  display: inline-block;"},{"lineNumber":74,"author":{"gitId":"-"},"content":"}"},{"lineNumber":75,"author":{"gitId":"-"},"content":""},{"lineNumber":76,"author":{"gitId":"-"},"content":".enroll-button-group * {"},{"lineNumber":77,"author":{"gitId":"-"},"content":"  max-height: inherit;"},{"lineNumber":78,"author":{"gitId":"-"},"content":"}"},{"lineNumber":79,"author":{"gitId":"-"},"content":""},{"lineNumber":80,"author":{"gitId":"-"},"content":"table {"},{"lineNumber":81,"author":{"gitId":"-"},"content":"  table-layout: fixed;"},{"lineNumber":82,"author":{"gitId":"weiquu"},"content":"  overflow-wrap: break-word;"},{"lineNumber":83,"author":{"gitId":"-"},"content":"}"},{"lineNumber":84,"author":{"gitId":"-"},"content":""},{"lineNumber":85,"author":{"gitId":"-"},"content":"table td {"},{"lineNumber":86,"author":{"gitId":"-"},"content":"  word-wrap: break-word;"},{"lineNumber":87,"author":{"gitId":"-"},"content":"  overflow-wrap: break-word;"},{"lineNumber":88,"author":{"gitId":"-"},"content":"}"},{"lineNumber":89,"author":{"gitId":"-"},"content":""},{"lineNumber":90,"author":{"gitId":"-"},"content":".box {"},{"lineNumber":91,"author":{"gitId":"-"},"content":"  float: left;"},{"lineNumber":92,"author":{"gitId":"-"},"content":"  width: 20px;"},{"lineNumber":93,"author":{"gitId":"-"},"content":"  height: 20px;"},{"lineNumber":94,"author":{"gitId":"-"},"content":"  margin: 5px;"},{"lineNumber":95,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"weiquu":1,"-":94}},{"path":"src/web/app/pages-instructor/instructor-courses-page/instructor-courses-page.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003cdiv\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  \u003cbutton id\u003d\"btn-add-course\" class\u003d\"btn btn-success\" (click)\u003d\"isAddNewCourseFormExpanded \u003d true\""},{"lineNumber":3,"author":{"gitId":"-"},"content":"    [disabled]\u003d\"isAddNewCourseFormExpanded || isLoadingActiveCourses\"\u003e\u003ci class\u003d\"fas fa-plus\"\u003e\u003c/i\u003e Add New Course"},{"lineNumber":4,"author":{"gitId":"-"},"content":"  \u003c/button\u003e"},{"lineNumber":5,"author":{"gitId":"-"},"content":"\u003c/div\u003e"},{"lineNumber":6,"author":{"gitId":"-"},"content":""},{"lineNumber":7,"author":{"gitId":"-"},"content":"\u003cdiv id\u003d\"add-course-section\" class\u003d\"course-section\" *ngIf\u003d\"isAddNewCourseFormExpanded \u0026\u0026 !isLoadingActiveCourses\" @collapseAnim\u003e"},{"lineNumber":8,"author":{"gitId":"-"},"content":"  \u003ctm-course-edit-form [formMode]\u003d\"CourseEditFormMode.ADD\" [(formModel)]\u003d\"courseFormModel\""},{"lineNumber":9,"author":{"gitId":"-"},"content":"    [resetFormEvent]\u003d\"resetCourseForm\" (closeFormEvent)\u003d\"isAddNewCourseFormExpanded \u003d false\""},{"lineNumber":10,"author":{"gitId":"-"},"content":"    (createNewCourseEvent)\u003d\"createNewCourse()\" (copyCourseEvent)\u003d\"createCopiedCourse($event)\"\u003e"},{"lineNumber":11,"author":{"gitId":"-"},"content":"  \u003c/tm-course-edit-form\u003e"},{"lineNumber":12,"author":{"gitId":"-"},"content":"\u003c/div\u003e"},{"lineNumber":13,"author":{"gitId":"-"},"content":""},{"lineNumber":14,"author":{"gitId":"-"},"content":"\u003cdiv *ngIf\u003d\"isCopyingCourse\" class\u003d\"margin-top-30px\"\u003e"},{"lineNumber":15,"author":{"gitId":"-"},"content":"  \u003cp\u003eCopy Progress\u003c/p\u003e"},{"lineNumber":16,"author":{"gitId":"-"},"content":"  \u003ctm-progress-bar\u003e\u003c/tm-progress-bar\u003e"},{"lineNumber":17,"author":{"gitId":"-"},"content":"\u003c/div\u003e"},{"lineNumber":18,"author":{"gitId":"-"},"content":""},{"lineNumber":19,"author":{"gitId":"-"},"content":"\u003ctm-loading-retry [shouldShowRetry]\u003d\"hasLoadingFailed\" [message]\u003d\"\u0027Failed to load courses\u0027\""},{"lineNumber":20,"author":{"gitId":"-"},"content":"  (retryEvent)\u003d\"loadInstructorCourses()\"\u003e"},{"lineNumber":21,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"course-section\"\u003e"},{"lineNumber":22,"author":{"gitId":"-"},"content":"    \u003ch2 class\u003d\"h3\"\u003eActive courses\u003c/h2\u003e"},{"lineNumber":23,"author":{"gitId":"-"},"content":"    \u003cdiv *tmIsLoading\u003d\"isLoadingActiveCourses\"\u003e"},{"lineNumber":24,"author":{"gitId":"-"},"content":"      \u003cng-template #addCourseAlert\u003e"},{"lineNumber":25,"author":{"gitId":"-"},"content":"        \u003cdiv class\u003d\"alert alert-warning margin-top-30px\" role\u003d\"alert\"\u003e"},{"lineNumber":26,"author":{"gitId":"-"},"content":"          You do not seem to have any active courses. Use the button above to create a new course."},{"lineNumber":27,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":28,"author":{"gitId":"-"},"content":"      \u003c/ng-template\u003e"},{"lineNumber":29,"author":{"gitId":"-"},"content":"      \u003cdiv *ngIf\u003d\"activeCourses.length; else addCourseAlert;\"\u003e"},{"lineNumber":30,"author":{"gitId":"-"},"content":"        \u003cdiv class\u003d\"table table-responsive\"\u003e"},{"lineNumber":31,"author":{"gitId":"-"},"content":"          \u003ctable id\u003d\"active-courses-table\" class\u003d\"table table-striped table-bordered margin-0\"\u003e"},{"lineNumber":32,"author":{"gitId":"-"},"content":"            \u003cthead\u003e"},{"lineNumber":33,"author":{"gitId":"-"},"content":"              \u003ctr class\u003d\"bg-primary text-white\"\u003e"},{"lineNumber":34,"author":{"gitId":"-"},"content":"                \u003cth id\u003d\"sort-course-id\" class\u003d\"sortable-header\" (click)\u003d\"sortCoursesEvent(SortBy.COURSE_ID)\""},{"lineNumber":35,"author":{"gitId":"-"},"content":"                  [attr.aria-sort]\u003d\"getAriaSortActive(SortBy.COURSE_ID)\"\u003e"},{"lineNumber":36,"author":{"gitId":"weiquu"},"content":"                  \u003cbutton\u003e"},{"lineNumber":37,"author":{"gitId":"-"},"content":"                    Course ID"},{"lineNumber":38,"author":{"gitId":"weiquu"},"content":"                    \u003cspan class\u003d\"fa-stack\" aria-hidden\u003d\"true\"\u003e"},{"lineNumber":39,"author":{"gitId":"-"},"content":"                      \u003ci class\u003d\"fas fa-sort\"\u003e\u003c/i\u003e"},{"lineNumber":40,"author":{"gitId":"-"},"content":"                      \u003ci class\u003d\"fas fa-sort-down\""},{"lineNumber":41,"author":{"gitId":"-"},"content":"                        *ngIf\u003d\"activeTableSortBy \u003d\u003d\u003d SortBy.COURSE_ID \u0026\u0026 activeTableSortOrder \u003d\u003d\u003d SortOrder.DESC\"\u003e\u003c/i\u003e"},{"lineNumber":42,"author":{"gitId":"-"},"content":"                      \u003ci class\u003d\"fas fa-sort-up\""},{"lineNumber":43,"author":{"gitId":"-"},"content":"                        *ngIf\u003d\"activeTableSortBy \u003d\u003d\u003d SortBy.COURSE_ID \u0026\u0026 activeTableSortOrder \u003d\u003d\u003d SortOrder.ASC\"\u003e\u003c/i\u003e"},{"lineNumber":44,"author":{"gitId":"-"},"content":"                    \u003c/span\u003e"},{"lineNumber":45,"author":{"gitId":"-"},"content":"                  \u003c/button\u003e"},{"lineNumber":46,"author":{"gitId":"-"},"content":"                \u003c/th\u003e"},{"lineNumber":47,"author":{"gitId":"-"},"content":"                \u003cth id\u003d\"sort-course-name\" class\u003d\"sortable-header\" (click)\u003d\"sortCoursesEvent(SortBy.COURSE_NAME)\""},{"lineNumber":48,"author":{"gitId":"-"},"content":"                  [attr.aria-sort]\u003d\"getAriaSortActive(SortBy.COURSE_NAME)\"\u003e"},{"lineNumber":49,"author":{"gitId":"weiquu"},"content":"                  \u003cbutton\u003e"},{"lineNumber":50,"author":{"gitId":"-"},"content":"                    Course Name"},{"lineNumber":51,"author":{"gitId":"weiquu"},"content":"                    \u003cspan class\u003d\"fa-stack\" aria-hidden\u003d\"true\"\u003e"},{"lineNumber":52,"author":{"gitId":"-"},"content":"                      \u003ci class\u003d\"fas fa-sort\"\u003e\u003c/i\u003e"},{"lineNumber":53,"author":{"gitId":"-"},"content":"                      \u003ci class\u003d\"fas fa-sort-down\""},{"lineNumber":54,"author":{"gitId":"-"},"content":"                        *ngIf\u003d\"activeTableSortBy \u003d\u003d\u003d SortBy.COURSE_NAME \u0026\u0026 activeTableSortOrder \u003d\u003d\u003d SortOrder.DESC\"\u003e\u003c/i\u003e"},{"lineNumber":55,"author":{"gitId":"-"},"content":"                      \u003ci class\u003d\"fas fa-sort-up\""},{"lineNumber":56,"author":{"gitId":"-"},"content":"                        *ngIf\u003d\"activeTableSortBy \u003d\u003d\u003d SortBy.COURSE_NAME \u0026\u0026 activeTableSortOrder \u003d\u003d\u003d SortOrder.ASC\"\u003e\u003c/i\u003e"},{"lineNumber":57,"author":{"gitId":"-"},"content":"                    \u003c/span\u003e"},{"lineNumber":58,"author":{"gitId":"-"},"content":"                  \u003c/button\u003e"},{"lineNumber":59,"author":{"gitId":"-"},"content":"                \u003c/th\u003e"},{"lineNumber":60,"author":{"gitId":"-"},"content":"                \u003cth id\u003d\"sort-creation-date\" class\u003d\"sortable-header\""},{"lineNumber":61,"author":{"gitId":"-"},"content":"                  (click)\u003d\"sortCoursesEvent(SortBy.COURSE_CREATION_DATE)\""},{"lineNumber":62,"author":{"gitId":"-"},"content":"                  [attr.aria-sort]\u003d\"getAriaSortActive(SortBy.COURSE_CREATION_DATE)\"\u003e"},{"lineNumber":63,"author":{"gitId":"weiquu"},"content":"                  \u003cbutton\u003e"},{"lineNumber":64,"author":{"gitId":"-"},"content":"                    Creation Date"},{"lineNumber":65,"author":{"gitId":"weiquu"},"content":"                    \u003cspan class\u003d\"fa-stack\" aria-hidden\u003d\"true\"\u003e"},{"lineNumber":66,"author":{"gitId":"-"},"content":"                      \u003ci class\u003d\"fas fa-sort\"\u003e\u003c/i\u003e"},{"lineNumber":67,"author":{"gitId":"-"},"content":"                      \u003ci class\u003d\"fas fa-sort-down\""},{"lineNumber":68,"author":{"gitId":"-"},"content":"                        *ngIf\u003d\"activeTableSortBy \u003d\u003d\u003d SortBy.COURSE_CREATION_DATE \u0026\u0026 activeTableSortOrder \u003d\u003d\u003d SortOrder.DESC\"\u003e\u003c/i\u003e"},{"lineNumber":69,"author":{"gitId":"-"},"content":"                      \u003ci class\u003d\"fas fa-sort-up\""},{"lineNumber":70,"author":{"gitId":"-"},"content":"                        *ngIf\u003d\"activeTableSortBy \u003d\u003d\u003d SortBy.COURSE_CREATION_DATE \u0026\u0026 activeTableSortOrder \u003d\u003d\u003d SortOrder.ASC\"\u003e\u003c/i\u003e"},{"lineNumber":71,"author":{"gitId":"-"},"content":"                    \u003c/span\u003e"},{"lineNumber":72,"author":{"gitId":"-"},"content":"                  \u003c/button\u003e"},{"lineNumber":73,"author":{"gitId":"-"},"content":"                \u003c/th\u003e"},{"lineNumber":74,"author":{"gitId":"-"},"content":"                \u003cth\u003eSections\u003c/th\u003e"},{"lineNumber":75,"author":{"gitId":"-"},"content":"                \u003cth\u003eTeams\u003c/th\u003e"},{"lineNumber":76,"author":{"gitId":"-"},"content":"                \u003cth\u003eTotal Students\u003c/th\u003e"},{"lineNumber":77,"author":{"gitId":"-"},"content":"                \u003cth\u003eTotal Unregistered\u003c/th\u003e"},{"lineNumber":78,"author":{"gitId":"-"},"content":"                \u003cth class\u003d\"text-center\"\u003eAction(s)\u003c/th\u003e"},{"lineNumber":79,"author":{"gitId":"-"},"content":"              \u003c/tr\u003e"},{"lineNumber":80,"author":{"gitId":"-"},"content":"            \u003c/thead\u003e"},{"lineNumber":81,"author":{"gitId":"-"},"content":"            \u003ctbody\u003e"},{"lineNumber":82,"author":{"gitId":"-"},"content":"              \u003cng-template #loadingSpinner\u003e"},{"lineNumber":83,"author":{"gitId":"-"},"content":"                \u003ctm-ajax-loading [useBlueSpinner]\u003d\"true\"\u003e\u003c/tm-ajax-loading\u003e"},{"lineNumber":84,"author":{"gitId":"-"},"content":"              \u003c/ng-template\u003e"},{"lineNumber":85,"author":{"gitId":"-"},"content":"              \u003ctr *ngFor\u003d\"let course of activeCourses; let i \u003d index\"\u003e"},{"lineNumber":86,"author":{"gitId":"-"},"content":"                \u003ctd id\u003d\"course-id-{{ i }}\" class\u003d\"text-break\"\u003e{{course.course.courseId}}\u003c/td\u003e"},{"lineNumber":87,"author":{"gitId":"-"},"content":"                \u003ctd class\u003d\"text-break\"\u003e{{course.course.courseName}}\u003c/td\u003e"},{"lineNumber":88,"author":{"gitId":"-"},"content":"                \u003ctd\u003e"},{"lineNumber":89,"author":{"gitId":"-"},"content":"                  \u003cspan class\u003d\"ngb-tooltip-class\" container\u003d\"body\""},{"lineNumber":90,"author":{"gitId":"-"},"content":"                    [ngbTooltip]\u003d\"course.course.creationTimestamp | date:\u0027EEE, dd MMM yyyy, h:mma\u0027\"\u003e"},{"lineNumber":91,"author":{"gitId":"-"},"content":"                    {{course.course.creationTimestamp | date:\u0027d MMM yyyy\u0027}}"},{"lineNumber":92,"author":{"gitId":"-"},"content":"                  \u003c/span\u003e"},{"lineNumber":93,"author":{"gitId":"-"},"content":"                \u003c/td\u003e"},{"lineNumber":94,"author":{"gitId":"-"},"content":"                \u003ctd\u003e"},{"lineNumber":95,"author":{"gitId":"-"},"content":"                  \u003cspan *ngIf\u003d\"!courseStats[course.course.courseId]\"\u003e"},{"lineNumber":96,"author":{"gitId":"-"},"content":"                    \u003cbutton *ngIf\u003d\"!course.isLoadingCourseStats; else loadingSpinner\""},{"lineNumber":97,"author":{"gitId":"-"},"content":"                      (click)\u003d\"getCourseStats(i)\" class\u003d\"link-button\" \u003e Show"},{"lineNumber":98,"author":{"gitId":"-"},"content":"                    \u003c/button\u003e"},{"lineNumber":99,"author":{"gitId":"-"},"content":"                  \u003c/span\u003e"},{"lineNumber":100,"author":{"gitId":"-"},"content":"                  \u003cspan *ngIf\u003d\"courseStats[course.course.courseId]\"\u003e"},{"lineNumber":101,"author":{"gitId":"-"},"content":"                    {{ courseStats[course.course.courseId][\u0027sections\u0027] }}"},{"lineNumber":102,"author":{"gitId":"-"},"content":"                  \u003c/span\u003e"},{"lineNumber":103,"author":{"gitId":"-"},"content":"                \u003c/td\u003e"},{"lineNumber":104,"author":{"gitId":"-"},"content":"                \u003ctd\u003e"},{"lineNumber":105,"author":{"gitId":"-"},"content":"                  \u003cspan *ngIf\u003d\"!courseStats[course.course.courseId]\"\u003e"},{"lineNumber":106,"author":{"gitId":"-"},"content":"                    \u003cbutton *ngIf\u003d\"!course.isLoadingCourseStats; else loadingSpinner\" id\u003d\"show-statistics-{{ i }}\""},{"lineNumber":107,"author":{"gitId":"-"},"content":"                      (click)\u003d\"getCourseStats(i)\" class\u003d\"link-button\" \u003e Show"},{"lineNumber":108,"author":{"gitId":"-"},"content":"                    \u003c/button\u003e"},{"lineNumber":109,"author":{"gitId":"-"},"content":"                  \u003c/span\u003e"},{"lineNumber":110,"author":{"gitId":"-"},"content":"                  \u003cspan *ngIf\u003d\"courseStats[course.course.courseId]\"\u003e"},{"lineNumber":111,"author":{"gitId":"-"},"content":"                    {{ courseStats[course.course.courseId][\u0027teams\u0027] }}"},{"lineNumber":112,"author":{"gitId":"-"},"content":"                  \u003c/span\u003e"},{"lineNumber":113,"author":{"gitId":"-"},"content":"                \u003c/td\u003e"},{"lineNumber":114,"author":{"gitId":"-"},"content":"                \u003ctd\u003e"},{"lineNumber":115,"author":{"gitId":"-"},"content":"                  \u003cspan *ngIf\u003d\"!courseStats[course.course.courseId]\"\u003e"},{"lineNumber":116,"author":{"gitId":"-"},"content":"                    \u003cbutton *ngIf\u003d\"!course.isLoadingCourseStats; else loadingSpinner\""},{"lineNumber":117,"author":{"gitId":"-"},"content":"                      (click)\u003d\"getCourseStats(i)\" class\u003d\"link-button\" \u003e Show"},{"lineNumber":118,"author":{"gitId":"-"},"content":"                    \u003c/button\u003e"},{"lineNumber":119,"author":{"gitId":"-"},"content":"                  \u003c/span\u003e"},{"lineNumber":120,"author":{"gitId":"-"},"content":"                  \u003cspan *ngIf\u003d\"courseStats[course.course.courseId]\"\u003e"},{"lineNumber":121,"author":{"gitId":"-"},"content":"                    {{ courseStats[course.course.courseId][\u0027students\u0027] }}"},{"lineNumber":122,"author":{"gitId":"-"},"content":"                  \u003c/span\u003e"},{"lineNumber":123,"author":{"gitId":"-"},"content":"                \u003c/td\u003e"},{"lineNumber":124,"author":{"gitId":"-"},"content":"                \u003ctd\u003e"},{"lineNumber":125,"author":{"gitId":"-"},"content":"                  \u003cspan *ngIf\u003d\"!courseStats[course.course.courseId]\"\u003e"},{"lineNumber":126,"author":{"gitId":"-"},"content":"                    \u003cbutton *ngIf\u003d\"!course.isLoadingCourseStats; else loadingSpinner\""},{"lineNumber":127,"author":{"gitId":"-"},"content":"                      (click)\u003d\"getCourseStats(i)\" class\u003d\"link-button\" \u003e Show"},{"lineNumber":128,"author":{"gitId":"-"},"content":"                    \u003c/button\u003e"},{"lineNumber":129,"author":{"gitId":"-"},"content":"                  \u003c/span\u003e"},{"lineNumber":130,"author":{"gitId":"-"},"content":"                  \u003cspan *ngIf\u003d\"courseStats[course.course.courseId]\"\u003e"},{"lineNumber":131,"author":{"gitId":"-"},"content":"                    {{ courseStats[course.course.courseId][\u0027unregistered\u0027] }}"},{"lineNumber":132,"author":{"gitId":"-"},"content":"                  \u003c/span\u003e"},{"lineNumber":133,"author":{"gitId":"-"},"content":"                \u003c/td\u003e"},{"lineNumber":134,"author":{"gitId":"-"},"content":"                \u003ctd class\u003d\"text-center actions-cell\"\u003e"},{"lineNumber":135,"author":{"gitId":"-"},"content":"                  \u003ca id\u003d\"btn-enroll-{{ i }}\" class\u003d\"btn btn-light btn-sm custom-button-active\" *ngIf\u003d\"course.canModifyStudent\""},{"lineNumber":136,"author":{"gitId":"-"},"content":"                    ngbTooltip\u003d\"Enroll student into the course\" tmRouterLink\u003d\"/web/instructor/courses/enroll\""},{"lineNumber":137,"author":{"gitId":"-"},"content":"                    [queryParams]\u003d\"{courseid: course.course.courseId}\"\u003e"},{"lineNumber":138,"author":{"gitId":"-"},"content":"                    Enroll"},{"lineNumber":139,"author":{"gitId":"-"},"content":"                  \u003c/a\u003e"},{"lineNumber":140,"author":{"gitId":"-"},"content":"                  \u003cbutton id\u003d\"btn-enroll-disabled-{{ i }}\" class\u003d\"btn btn-light btn-sm disabled\""},{"lineNumber":141,"author":{"gitId":"-"},"content":"                    *ngIf\u003d\"!course.canModifyStudent\"\u003e"},{"lineNumber":142,"author":{"gitId":"-"},"content":"                    Enroll"},{"lineNumber":143,"author":{"gitId":"-"},"content":"                  \u003c/button\u003e"},{"lineNumber":144,"author":{"gitId":"-"},"content":"                  \u003cdiv ngbDropdown class\u003d\"d-inline-block\"\u003e"},{"lineNumber":145,"author":{"gitId":"-"},"content":"                    \u003cbutton id\u003d\"btn-other-actions-{{ i }}\" class\u003d\"btn btn-light btn-sm custom-button-active\" ngbDropdownToggle\u003eOther"},{"lineNumber":146,"author":{"gitId":"-"},"content":"                      Actions\u003c/button\u003e"},{"lineNumber":147,"author":{"gitId":"-"},"content":"                    \u003cdiv ngbDropdownMenu\u003e"},{"lineNumber":148,"author":{"gitId":"-"},"content":"                      \u003ca class\u003d\"btn btn-primary btn-sm dropdown-item clickable\""},{"lineNumber":149,"author":{"gitId":"-"},"content":"                        tmRouterLink\u003d\"/web/instructor/courses/details\" [queryParams]\u003d\"{courseid: course.course.courseId}\"\u003e"},{"lineNumber":150,"author":{"gitId":"-"},"content":"                        View"},{"lineNumber":151,"author":{"gitId":"-"},"content":"                      \u003c/a\u003e"},{"lineNumber":152,"author":{"gitId":"-"},"content":"                      \u003ca class\u003d\"btn btn-primary btn-sm dropdown-item clickable\""},{"lineNumber":153,"author":{"gitId":"-"},"content":"                        tmRouterLink\u003d\"/web/instructor/courses/edit\" [queryParams]\u003d\"{courseid: course.course.courseId}\"\u003e"},{"lineNumber":154,"author":{"gitId":"-"},"content":"                        Edit"},{"lineNumber":155,"author":{"gitId":"-"},"content":"                      \u003c/a\u003e"},{"lineNumber":156,"author":{"gitId":"-"},"content":"                      \u003cbutton id\u003d\"btn-copy-{{ i }}\" class\u003d\"btn btn-primary btn-sm dropdown-item clickable\""},{"lineNumber":157,"author":{"gitId":"-"},"content":"                        *ngIf\u003d\"course.canModifyCourse\""},{"lineNumber":158,"author":{"gitId":"-"},"content":"                        (click)\u003d\"onCopy(course.course.courseId, course.course.courseName, course.course.timeZone)\""},{"lineNumber":159,"author":{"gitId":"-"},"content":"                        ngbTooltip\u003d\"Copy the course and its corresponding sessions\" placement\u003d\"left\" container\u003d\"body\""},{"lineNumber":160,"author":{"gitId":"-"},"content":"                        [disabled]\u003d\"isCopyingCourse\"\u003e"},{"lineNumber":161,"author":{"gitId":"-"},"content":"                        Copy"},{"lineNumber":162,"author":{"gitId":"-"},"content":"                      \u003c/button\u003e"},{"lineNumber":163,"author":{"gitId":"-"},"content":"                      \u003cbutton id\u003d\"btn-archive-{{ i }}\" class\u003d\"btn btn-primary btn-sm dropdown-item clickable\""},{"lineNumber":164,"author":{"gitId":"-"},"content":"                        (click)\u003d\"changeArchiveStatus(course.course.courseId, true)\""},{"lineNumber":165,"author":{"gitId":"-"},"content":"                        ngbTooltip\u003d\"Archive the course so that it will not be shown in the home page any more (you can still access it from the \u0027Courses\u0027 tab)\""},{"lineNumber":166,"author":{"gitId":"-"},"content":"                        placement\u003d\"left\" container\u003d\"body\"\u003e"},{"lineNumber":167,"author":{"gitId":"-"},"content":"                        Archive"},{"lineNumber":168,"author":{"gitId":"-"},"content":"                      \u003c/button\u003e"},{"lineNumber":169,"author":{"gitId":"-"},"content":"                      \u003c!--                  \u003ca class\u003d\"btn btn-primary btn-sm dropdown-item clickable\"--\u003e"},{"lineNumber":170,"author":{"gitId":"-"},"content":"                      \u003c!--                     tmRouterLink\u003d\u0027/web/instructor/courses/student-activity-logs\u0027 [queryParams]\u003d\"{courseid: course.course.courseId}\"\u003e View Logs--\u003e"},{"lineNumber":171,"author":{"gitId":"-"},"content":"                      \u003c!--                  \u003c/a\u003e--\u003e"},{"lineNumber":172,"author":{"gitId":"-"},"content":"                      \u003cbutton id\u003d\"btn-soft-delete-{{ i }}\" class\u003d\"btn btn-primary btn-sm dropdown-item clickable\""},{"lineNumber":173,"author":{"gitId":"-"},"content":"                        *ngIf\u003d\"course.canModifyCourse\" (click)\u003d\"onDelete(course.course.courseId)\""},{"lineNumber":174,"author":{"gitId":"-"},"content":"                        ngbTooltip\u003d\"Delete the course and its corresponding students and sessions\" placement\u003d\"left\""},{"lineNumber":175,"author":{"gitId":"-"},"content":"                        container\u003d\"body\"\u003e"},{"lineNumber":176,"author":{"gitId":"-"},"content":"                        Delete"},{"lineNumber":177,"author":{"gitId":"-"},"content":"                      \u003c/button\u003e"},{"lineNumber":178,"author":{"gitId":"-"},"content":"                      \u003cbutton id\u003d\"btn-soft-delete-disabled-{{ i }}\" class\u003d\"btn btn-primary btn-sm dropdown-item disabled\""},{"lineNumber":179,"author":{"gitId":"-"},"content":"                        *ngIf\u003d\"!course.canModifyCourse\"\u003e"},{"lineNumber":180,"author":{"gitId":"-"},"content":"                        Delete"},{"lineNumber":181,"author":{"gitId":"-"},"content":"                      \u003c/button\u003e"},{"lineNumber":182,"author":{"gitId":"-"},"content":"                    \u003c/div\u003e"},{"lineNumber":183,"author":{"gitId":"-"},"content":"                  \u003c/div\u003e"},{"lineNumber":184,"author":{"gitId":"-"},"content":"                \u003c/td\u003e"},{"lineNumber":185,"author":{"gitId":"-"},"content":"              \u003c/tr\u003e"},{"lineNumber":186,"author":{"gitId":"-"},"content":"            \u003c/tbody\u003e"},{"lineNumber":187,"author":{"gitId":"-"},"content":"            \u003ctr *ngIf\u003d\"!activeCourses.length\"\u003e"},{"lineNumber":188,"author":{"gitId":"-"},"content":"              \u003ctd\u003e\u003c/td\u003e"},{"lineNumber":189,"author":{"gitId":"-"},"content":"              \u003ctd\u003e\u003c/td\u003e"},{"lineNumber":190,"author":{"gitId":"-"},"content":"              \u003ctd\u003e\u003c/td\u003e"},{"lineNumber":191,"author":{"gitId":"-"},"content":"              \u003ctd\u003e\u003c/td\u003e"},{"lineNumber":192,"author":{"gitId":"-"},"content":"              \u003ctd\u003e\u003c/td\u003e"},{"lineNumber":193,"author":{"gitId":"-"},"content":"              \u003ctd\u003e\u003c/td\u003e"},{"lineNumber":194,"author":{"gitId":"-"},"content":"              \u003ctd\u003e\u003c/td\u003e"},{"lineNumber":195,"author":{"gitId":"-"},"content":"              \u003ctd\u003e\u003c/td\u003e"},{"lineNumber":196,"author":{"gitId":"-"},"content":"            \u003c/tr\u003e"},{"lineNumber":197,"author":{"gitId":"-"},"content":"          \u003c/table\u003e"},{"lineNumber":198,"author":{"gitId":"-"},"content":"          \u003cp *ngIf\u003d\"!activeCourses.length\"\u003eNo records found.\u003c/p\u003e"},{"lineNumber":199,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":200,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":201,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":202,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":203,"author":{"gitId":"-"},"content":"\u003c/tm-loading-retry\u003e"},{"lineNumber":204,"author":{"gitId":"-"},"content":""},{"lineNumber":205,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"course-section\"\u003e"},{"lineNumber":206,"author":{"gitId":"-"},"content":"  \u003ch2 class\u003d\"h3 text-muted\"\u003e"},{"lineNumber":207,"author":{"gitId":"weiquu"},"content":"    \u003cspan class\u003d\"fa fa-file-archive\" aria-hidden\u003d\"true\"\u003e\u003c/span\u003e Archived courses"},{"lineNumber":208,"author":{"gitId":"-"},"content":"  \u003c/h2\u003e"},{"lineNumber":209,"author":{"gitId":"-"},"content":"  \u003cdiv *tmIsLoading\u003d\"isLoadingArchivedCourses\"\u003e"},{"lineNumber":210,"author":{"gitId":"-"},"content":"    \u003cng-template #noArchiveAlert\u003e"},{"lineNumber":211,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"alert alert-warning margin-top-30px\" role\u003d\"alert\"\u003e"},{"lineNumber":212,"author":{"gitId":"-"},"content":"        There are no courses archived currently."},{"lineNumber":213,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":214,"author":{"gitId":"-"},"content":"    \u003c/ng-template\u003e"},{"lineNumber":215,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"card top-padded\" *ngIf\u003d\"archivedCourses.length else noArchiveAlert\"\u003e"},{"lineNumber":216,"author":{"gitId":"-"},"content":"      \u003cdiv id\u003d\"archived-table-heading\" class\u003d\"card-header bg-info cursor-pointer\""},{"lineNumber":217,"author":{"gitId":"-"},"content":"        (click)\u003d\"isArchivedCourseExpanded \u003d !isArchivedCourseExpanded\"\u003e"},{"lineNumber":218,"author":{"gitId":"-"},"content":"        \u003cb\u003eArchive\u003c/b\u003e"},{"lineNumber":219,"author":{"gitId":"-"},"content":"        \u003cdiv class\u003d\"card-header-btn-toolbar\"\u003e"},{"lineNumber":220,"author":{"gitId":"-"},"content":"          \u003ctm-panel-chevron [isExpanded]\u003d\"isArchivedCourseExpanded\"\u003e\u003c/tm-panel-chevron\u003e"},{"lineNumber":221,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":222,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":223,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"card-body archive-body table-responsive\" *ngIf\u003d\"isArchivedCourseExpanded\" @collapseAnim\u003e"},{"lineNumber":224,"author":{"gitId":"-"},"content":"        \u003ctable id\u003d\"archived-courses-table\" class\u003d\"table table-striped table-bordered archive-table\"\u003e"},{"lineNumber":225,"author":{"gitId":"-"},"content":"          \u003cthead\u003e"},{"lineNumber":226,"author":{"gitId":"-"},"content":"            \u003ctr class\u003d\"background-color-medium-gray text-color-gray\"\u003e"},{"lineNumber":227,"author":{"gitId":"-"},"content":"              \u003cth class\u003d\"sortable-header\" (click)\u003d\"sortArchivedCoursesEvent(SortBy.COURSE_ID)\""},{"lineNumber":228,"author":{"gitId":"-"},"content":"                [attr.aria-sort]\u003d\"getAriaSortArchived(SortBy.COURSE_ID)\"\u003e"},{"lineNumber":229,"author":{"gitId":"weiquu"},"content":"                \u003cbutton\u003e"},{"lineNumber":230,"author":{"gitId":"-"},"content":"                  Course ID"},{"lineNumber":231,"author":{"gitId":"weiquu"},"content":"                  \u003cspan class\u003d\"fa-stack\" aria-hidden\u003d\"true\"\u003e"},{"lineNumber":232,"author":{"gitId":"-"},"content":"                    \u003ci class\u003d\"fas fa-sort\"\u003e\u003c/i\u003e"},{"lineNumber":233,"author":{"gitId":"-"},"content":"                    \u003ci class\u003d\"fas fa-sort-down\""},{"lineNumber":234,"author":{"gitId":"-"},"content":"                      *ngIf\u003d\"archivedTableSortBy \u003d\u003d\u003d SortBy.COURSE_ID \u0026\u0026 archivedTableSortOrder \u003d\u003d\u003d SortOrder.DESC\"\u003e\u003c/i\u003e"},{"lineNumber":235,"author":{"gitId":"-"},"content":"                    \u003ci class\u003d\"fas fa-sort-up\""},{"lineNumber":236,"author":{"gitId":"-"},"content":"                      *ngIf\u003d\"archivedTableSortBy \u003d\u003d\u003d SortBy.COURSE_ID \u0026\u0026 archivedTableSortOrder \u003d\u003d\u003d SortOrder.ASC\"\u003e\u003c/i\u003e"},{"lineNumber":237,"author":{"gitId":"-"},"content":"                  \u003c/span\u003e"},{"lineNumber":238,"author":{"gitId":"weiquu"},"content":"                \u003c/button\u003e"},{"lineNumber":239,"author":{"gitId":"-"},"content":"              \u003c/th\u003e"},{"lineNumber":240,"author":{"gitId":"-"},"content":"              \u003cth class\u003d\"sortable-header\" (click)\u003d\"sortArchivedCoursesEvent(SortBy.COURSE_NAME)\""},{"lineNumber":241,"author":{"gitId":"-"},"content":"                [attr.aria-sort]\u003d\"getAriaSortArchived(SortBy.COURSE_NAME)\"\u003e"},{"lineNumber":242,"author":{"gitId":"weiquu"},"content":"                \u003cbutton\u003e"},{"lineNumber":243,"author":{"gitId":"-"},"content":"                  Course Name"},{"lineNumber":244,"author":{"gitId":"weiquu"},"content":"                  \u003cspan class\u003d\"fa-stack\" aria-hidden\u003d\"true\"\u003e"},{"lineNumber":245,"author":{"gitId":"-"},"content":"                    \u003ci class\u003d\"fas fa-sort\"\u003e\u003c/i\u003e"},{"lineNumber":246,"author":{"gitId":"-"},"content":"                    \u003ci class\u003d\"fas fa-sort-down\""},{"lineNumber":247,"author":{"gitId":"-"},"content":"                      *ngIf\u003d\"archivedTableSortBy \u003d\u003d\u003d SortBy.COURSE_NAME \u0026\u0026 archivedTableSortOrder \u003d\u003d\u003d SortOrder.DESC\"\u003e\u003c/i\u003e"},{"lineNumber":248,"author":{"gitId":"-"},"content":"                    \u003ci class\u003d\"fas fa-sort-up\""},{"lineNumber":249,"author":{"gitId":"-"},"content":"                      *ngIf\u003d\"archivedTableSortBy \u003d\u003d\u003d SortBy.COURSE_NAME \u0026\u0026 archivedTableSortOrder \u003d\u003d\u003d SortOrder.ASC\"\u003e\u003c/i\u003e"},{"lineNumber":250,"author":{"gitId":"-"},"content":"                  \u003c/span\u003e"},{"lineNumber":251,"author":{"gitId":"weiquu"},"content":"                \u003c/button\u003e"},{"lineNumber":252,"author":{"gitId":"-"},"content":"              \u003c/th\u003e"},{"lineNumber":253,"author":{"gitId":"-"},"content":"              \u003cth class\u003d\"sortable-header\" (click)\u003d\"sortArchivedCoursesEvent(SortBy.COURSE_CREATION_DATE)\""},{"lineNumber":254,"author":{"gitId":"-"},"content":"                [attr.aria-sort]\u003d\"getAriaSortArchived(SortBy.COURSE_CREATION_DATE)\"\u003e"},{"lineNumber":255,"author":{"gitId":"weiquu"},"content":"                \u003cbutton\u003e"},{"lineNumber":256,"author":{"gitId":"-"},"content":"                  Creation Date"},{"lineNumber":257,"author":{"gitId":"weiquu"},"content":"                  \u003cspan class\u003d\"fa-stack\" aria-hidden\u003d\"true\"\u003e"},{"lineNumber":258,"author":{"gitId":"-"},"content":"                    \u003ci class\u003d\"fas fa-sort\"\u003e\u003c/i\u003e"},{"lineNumber":259,"author":{"gitId":"-"},"content":"                    \u003ci class\u003d\"fas fa-sort-down\""},{"lineNumber":260,"author":{"gitId":"-"},"content":"                      *ngIf\u003d\"archivedTableSortBy \u003d\u003d\u003d SortBy.COURSE_CREATION_DATE \u0026\u0026 archivedTableSortOrder \u003d\u003d\u003d SortOrder.DESC\"\u003e\u003c/i\u003e"},{"lineNumber":261,"author":{"gitId":"-"},"content":"                    \u003ci class\u003d\"fas fa-sort-up\""},{"lineNumber":262,"author":{"gitId":"-"},"content":"                      *ngIf\u003d\"archivedTableSortBy \u003d\u003d\u003d SortBy.COURSE_CREATION_DATE \u0026\u0026 archivedTableSortOrder \u003d\u003d\u003d SortOrder.ASC\"\u003e\u003c/i\u003e"},{"lineNumber":263,"author":{"gitId":"-"},"content":"                  \u003c/span\u003e"},{"lineNumber":264,"author":{"gitId":"weiquu"},"content":"                \u003c/button\u003e"},{"lineNumber":265,"author":{"gitId":"-"},"content":"              \u003c/th\u003e"},{"lineNumber":266,"author":{"gitId":"-"},"content":"              \u003cth class\u003d\"text-center\"\u003eAction(s)\u003c/th\u003e"},{"lineNumber":267,"author":{"gitId":"-"},"content":"            \u003c/tr\u003e"},{"lineNumber":268,"author":{"gitId":"-"},"content":"          \u003c/thead\u003e"},{"lineNumber":269,"author":{"gitId":"-"},"content":"          \u003ctbody\u003e"},{"lineNumber":270,"author":{"gitId":"-"},"content":"            \u003ctr *ngFor\u003d\"let course of archivedCourses; let i \u003d index\"\u003e"},{"lineNumber":271,"author":{"gitId":"-"},"content":"              \u003ctd id\u003d\"archived-course-id-{{ i }}\" class\u003d\"text-break\"\u003e{{course.course.courseId}}\u003c/td\u003e"},{"lineNumber":272,"author":{"gitId":"-"},"content":"              \u003ctd class\u003d\"text-break\"\u003e{{course.course.courseName}}\u003c/td\u003e"},{"lineNumber":273,"author":{"gitId":"-"},"content":"              \u003ctd\u003e"},{"lineNumber":274,"author":{"gitId":"-"},"content":"                \u003cspan container\u003d\"body\" class\u003d\"ngb-tooltip-class\""},{"lineNumber":275,"author":{"gitId":"-"},"content":"                  ngbTooltip\u003d\"{{course.course.creationTimestamp | date:\u0027EEE, dd MMM yyyy, h:mma\u0027}}\"\u003e{{course.course.creationTimestamp"},{"lineNumber":276,"author":{"gitId":"-"},"content":"                  | date:\u0027d MMM yyyy\u0027}}\u003c/span\u003e"},{"lineNumber":277,"author":{"gitId":"-"},"content":"              \u003c/td\u003e"},{"lineNumber":278,"author":{"gitId":"-"},"content":"              \u003ctd class\u003d\"text-center actions-cell\"\u003e"},{"lineNumber":279,"author":{"gitId":"-"},"content":"                \u003cbutton id\u003d\"btn-unarchive-{{ i }}\" class\u003d\"btn btn-light btn-sm custom-button-archived\""},{"lineNumber":280,"author":{"gitId":"-"},"content":"                  (click)\u003d\"changeArchiveStatus(course.course.courseId, false)\"\u003e"},{"lineNumber":281,"author":{"gitId":"-"},"content":"                  Unarchive"},{"lineNumber":282,"author":{"gitId":"-"},"content":"                \u003c/button\u003e"},{"lineNumber":283,"author":{"gitId":"-"},"content":"                \u003cbutton id\u003d\"btn-soft-delete-archived-{{ i }}\" class\u003d\"btn btn-light btn-sm custom-button-archived\" *ngIf\u003d\"course.canModifyCourse\""},{"lineNumber":284,"author":{"gitId":"-"},"content":"                  (click)\u003d\"onDelete(course.course.courseId)\""},{"lineNumber":285,"author":{"gitId":"-"},"content":"                  ngbTooltip\u003d\"Delete the course and its corresponding students and sessions\"\u003e"},{"lineNumber":286,"author":{"gitId":"-"},"content":"                  Delete"},{"lineNumber":287,"author":{"gitId":"-"},"content":"                \u003c/button\u003e"},{"lineNumber":288,"author":{"gitId":"-"},"content":"                \u003cbutton id\u003d\"btn-soft-delete-archived-disabled-{{ i }}\" class\u003d\"btn btn-light btn-sm disabled\""},{"lineNumber":289,"author":{"gitId":"-"},"content":"                  *ngIf\u003d\"!course.canModifyCourse\"\u003e"},{"lineNumber":290,"author":{"gitId":"-"},"content":"                  Delete"},{"lineNumber":291,"author":{"gitId":"-"},"content":"                \u003c/button\u003e"},{"lineNumber":292,"author":{"gitId":"-"},"content":"              \u003c/td\u003e"},{"lineNumber":293,"author":{"gitId":"-"},"content":"            \u003c/tr\u003e"},{"lineNumber":294,"author":{"gitId":"-"},"content":"          \u003c/tbody\u003e"},{"lineNumber":295,"author":{"gitId":"-"},"content":"        \u003c/table\u003e"},{"lineNumber":296,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":297,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":298,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":299,"author":{"gitId":"-"},"content":"\u003c/div\u003e"},{"lineNumber":300,"author":{"gitId":"-"},"content":""},{"lineNumber":301,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"row course-section margin-top-30px\"\u003e"},{"lineNumber":302,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"col-12\"\u003e"},{"lineNumber":303,"author":{"gitId":"-"},"content":"    \u003ch2 class\u003d\"h3 text-muted\"\u003e"},{"lineNumber":304,"author":{"gitId":"weiquu"},"content":"      \u003cspan class\u003d\"fa fa-trash-alt\" aria-hidden\u003d\"true\"\u003e\u003c/span\u003e Deleted courses"},{"lineNumber":305,"author":{"gitId":"-"},"content":"    \u003c/h2\u003e"},{"lineNumber":306,"author":{"gitId":"-"},"content":"    \u003cdiv *tmIsLoading\u003d\"isLoadingSoftDeletedCourses\"\u003e"},{"lineNumber":307,"author":{"gitId":"-"},"content":"      \u003cng-template #emptyBinAlert\u003e"},{"lineNumber":308,"author":{"gitId":"-"},"content":"        \u003cdiv class\u003d\"alert alert-warning margin-top-30px\" role\u003d\"alert\"\u003e"},{"lineNumber":309,"author":{"gitId":"-"},"content":"          There are no courses in the bin."},{"lineNumber":310,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":311,"author":{"gitId":"-"},"content":"      \u003c/ng-template\u003e"},{"lineNumber":312,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"card bg-light top-padded\" *ngIf\u003d\"softDeletedCourses.length else emptyBinAlert\"\u003e"},{"lineNumber":313,"author":{"gitId":"-"},"content":"        \u003cdiv id\u003d\"deleted-table-heading\" class\u003d\"card-header bg-secondary text-white cursor-pointer\""},{"lineNumber":314,"author":{"gitId":"-"},"content":"          (click)\u003d\"isRecycleBinExpanded \u003d !isRecycleBinExpanded\"\u003e"},{"lineNumber":315,"author":{"gitId":"-"},"content":"          \u003cb\u003eRecycle Bin\u003c/b\u003e"},{"lineNumber":316,"author":{"gitId":"-"},"content":"          \u003cdiv class\u003d\"card-header-btn-toolbar\"\u003e"},{"lineNumber":317,"author":{"gitId":"-"},"content":"            \u003cbutton id\u003d\"btn-restore-all\" class\u003d\"btn btn-secondary btn-sm\" *ngIf\u003d\"canRestoreAll\""},{"lineNumber":318,"author":{"gitId":"-"},"content":"              (click)\u003d\"$event.stopPropagation(); onRestoreAll()\""},{"lineNumber":319,"author":{"gitId":"-"},"content":"              ngbTooltip\u003d\"Restore all deleted courses and their corresponding students and sessions\"\u003e"},{"lineNumber":320,"author":{"gitId":"weiquu"},"content":"              \u003ci class\u003d\"fas fa-check\" aria-hidden\u003d\"true\"\u003e\u003c/i\u003e Restore All"},{"lineNumber":321,"author":{"gitId":"-"},"content":"            \u003c/button\u003e"},{"lineNumber":322,"author":{"gitId":"-"},"content":"            \u003cbutton class\u003d\"btn btn-secondary btn-sm disabled\" *ngIf\u003d\"!canRestoreAll\"\u003e"},{"lineNumber":323,"author":{"gitId":"weiquu"},"content":"              \u003ci class\u003d\"fas fa-check\" aria-hidden\u003d\"true\"\u003e\u003c/i\u003e Restore All"},{"lineNumber":324,"author":{"gitId":"-"},"content":"            \u003c/button\u003e"},{"lineNumber":325,"author":{"gitId":"-"},"content":"            \u003cbutton id\u003d\"btn-delete-all\" class\u003d\"btn btn-secondary btn-sm\" *ngIf\u003d\"canDeleteAll\""},{"lineNumber":326,"author":{"gitId":"-"},"content":"              (click)\u003d\"$event.stopPropagation(); onDeleteAll()\""},{"lineNumber":327,"author":{"gitId":"-"},"content":"              ngbTooltip\u003d\"Permanently delete all courses and their corresponding students and sessions\"\u003e"},{"lineNumber":328,"author":{"gitId":"weiquu"},"content":"              \u003ci class\u003d\"fas fa-times\" aria-hidden\u003d\"true\"\u003e\u003c/i\u003e Delete All"},{"lineNumber":329,"author":{"gitId":"-"},"content":"            \u003c/button\u003e"},{"lineNumber":330,"author":{"gitId":"-"},"content":"            \u003cbutton class\u003d\"btn btn-secondary btn-sm disabled\" *ngIf\u003d\"!canDeleteAll\"\u003e"},{"lineNumber":331,"author":{"gitId":"weiquu"},"content":"              \u003ci class\u003d\"fas fa-times\" aria-hidden\u003d\"true\"\u003e\u003c/i\u003e Delete All"},{"lineNumber":332,"author":{"gitId":"-"},"content":"            \u003c/button\u003e"},{"lineNumber":333,"author":{"gitId":"-"},"content":"            \u003ctm-panel-chevron [isExpanded]\u003d\"isRecycleBinExpanded\"\u003e\u003c/tm-panel-chevron\u003e"},{"lineNumber":334,"author":{"gitId":"-"},"content":"          \u003c/div\u003e"},{"lineNumber":335,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":336,"author":{"gitId":"-"},"content":"        \u003cdiv class\u003d\"card-body recycle-bin-body table-responsive\" *ngIf\u003d\"isRecycleBinExpanded\" @collapseAnim\u003e"},{"lineNumber":337,"author":{"gitId":"-"},"content":"          \u003ctable id\u003d\"deleted-courses-table\""},{"lineNumber":338,"author":{"gitId":"-"},"content":"            class\u003d\"table table-responsive-lg table-striped table-bordered recycle-bin-table\"\u003e"},{"lineNumber":339,"author":{"gitId":"-"},"content":"            \u003cthead\u003e"},{"lineNumber":340,"author":{"gitId":"-"},"content":"              \u003ctr class\u003d\"background-color-medium-gray text-color-gray\"\u003e"},{"lineNumber":341,"author":{"gitId":"-"},"content":"                \u003cth class\u003d\"sortable-header\" (click)\u003d\"sortDeletedCoursesEvent(SortBy.COURSE_ID)\""},{"lineNumber":342,"author":{"gitId":"-"},"content":"                  [attr.aria-sort]\u003d\"getAriaSortDeleted(SortBy.COURSE_ID)\"\u003e"},{"lineNumber":343,"author":{"gitId":"weiquu"},"content":"                  \u003cbutton\u003e"},{"lineNumber":344,"author":{"gitId":"-"},"content":"                    Course ID"},{"lineNumber":345,"author":{"gitId":"weiquu"},"content":"                    \u003cspan class\u003d\"fa-stack\" aria-hidden\u003d\"true\"\u003e"},{"lineNumber":346,"author":{"gitId":"-"},"content":"                      \u003ci class\u003d\"fas fa-sort\"\u003e\u003c/i\u003e"},{"lineNumber":347,"author":{"gitId":"-"},"content":"                      \u003ci class\u003d\"fas fa-sort-down\""},{"lineNumber":348,"author":{"gitId":"-"},"content":"                        *ngIf\u003d\"deletedTableSortBy \u003d\u003d\u003d SortBy.COURSE_ID \u0026\u0026 deletedTableSortOrder \u003d\u003d\u003d SortOrder.DESC\"\u003e\u003c/i\u003e"},{"lineNumber":349,"author":{"gitId":"-"},"content":"                      \u003ci class\u003d\"fas fa-sort-up\""},{"lineNumber":350,"author":{"gitId":"-"},"content":"                        *ngIf\u003d\"deletedTableSortBy \u003d\u003d\u003d SortBy.COURSE_ID \u0026\u0026 deletedTableSortOrder \u003d\u003d\u003d SortOrder.ASC\"\u003e\u003c/i\u003e"},{"lineNumber":351,"author":{"gitId":"-"},"content":"                    \u003c/span\u003e"},{"lineNumber":352,"author":{"gitId":"weiquu"},"content":"                  \u003c/button\u003e"},{"lineNumber":353,"author":{"gitId":"-"},"content":"                \u003c/th\u003e"},{"lineNumber":354,"author":{"gitId":"-"},"content":"                \u003cth class\u003d\"sortable-header\" (click)\u003d\"sortDeletedCoursesEvent(SortBy.COURSE_NAME)\""},{"lineNumber":355,"author":{"gitId":"-"},"content":"                  [attr.aria-sort]\u003d\"getAriaSortDeleted(SortBy.COURSE_NAME)\"\u003e"},{"lineNumber":356,"author":{"gitId":"weiquu"},"content":"                  \u003cbutton\u003e"},{"lineNumber":357,"author":{"gitId":"-"},"content":"                    Course Name"},{"lineNumber":358,"author":{"gitId":"weiquu"},"content":"                    \u003cspan class\u003d\"fa-stack\" aria-hidden\u003d\"true\"\u003e"},{"lineNumber":359,"author":{"gitId":"-"},"content":"                      \u003ci class\u003d\"fas fa-sort\"\u003e\u003c/i\u003e"},{"lineNumber":360,"author":{"gitId":"-"},"content":"                      \u003ci class\u003d\"fas fa-sort-down\""},{"lineNumber":361,"author":{"gitId":"-"},"content":"                        *ngIf\u003d\"deletedTableSortBy \u003d\u003d\u003d SortBy.COURSE_NAME \u0026\u0026 deletedTableSortOrder \u003d\u003d\u003d SortOrder.DESC\"\u003e\u003c/i\u003e"},{"lineNumber":362,"author":{"gitId":"-"},"content":"                      \u003ci class\u003d\"fas fa-sort-up\""},{"lineNumber":363,"author":{"gitId":"-"},"content":"                        *ngIf\u003d\"deletedTableSortBy \u003d\u003d\u003d SortBy.COURSE_NAME \u0026\u0026 deletedTableSortOrder \u003d\u003d\u003d SortOrder.ASC\"\u003e\u003c/i\u003e"},{"lineNumber":364,"author":{"gitId":"-"},"content":"                    \u003c/span\u003e"},{"lineNumber":365,"author":{"gitId":"weiquu"},"content":"                  \u003c/button\u003e"},{"lineNumber":366,"author":{"gitId":"-"},"content":"                \u003c/th\u003e"},{"lineNumber":367,"author":{"gitId":"-"},"content":"                \u003cth class\u003d\"sortable-header\" (click)\u003d\"sortDeletedCoursesEvent(SortBy.COURSE_CREATION_DATE)\""},{"lineNumber":368,"author":{"gitId":"-"},"content":"                  [attr.aria-sort]\u003d\"getAriaSortDeleted(SortBy.COURSE_CREATION_DATE)\"\u003e"},{"lineNumber":369,"author":{"gitId":"weiquu"},"content":"                  \u003cbutton\u003e"},{"lineNumber":370,"author":{"gitId":"-"},"content":"                    Creation Date"},{"lineNumber":371,"author":{"gitId":"weiquu"},"content":"                    \u003cspan class\u003d\"fa-stack\" aria-hidden\u003d\"true\"\u003e"},{"lineNumber":372,"author":{"gitId":"-"},"content":"                      \u003ci class\u003d\"fas fa-sort\"\u003e\u003c/i\u003e"},{"lineNumber":373,"author":{"gitId":"-"},"content":"                      \u003ci class\u003d\"fas fa-sort-down\""},{"lineNumber":374,"author":{"gitId":"-"},"content":"                        *ngIf\u003d\"deletedTableSortBy \u003d\u003d\u003d SortBy.COURSE_CREATION_DATE \u0026\u0026 deletedTableSortOrder \u003d\u003d\u003d SortOrder.DESC\"\u003e\u003c/i\u003e"},{"lineNumber":375,"author":{"gitId":"-"},"content":"                      \u003ci class\u003d\"fas fa-sort-up\""},{"lineNumber":376,"author":{"gitId":"-"},"content":"                        *ngIf\u003d\"deletedTableSortBy \u003d\u003d\u003d SortBy.COURSE_CREATION_DATE \u0026\u0026 deletedTableSortOrder \u003d\u003d\u003d SortOrder.ASC\"\u003e\u003c/i\u003e"},{"lineNumber":377,"author":{"gitId":"-"},"content":"                    \u003c/span\u003e"},{"lineNumber":378,"author":{"gitId":"weiquu"},"content":"                  \u003c/button\u003e"},{"lineNumber":379,"author":{"gitId":"-"},"content":"                \u003c/th\u003e"},{"lineNumber":380,"author":{"gitId":"-"},"content":"                \u003cth class\u003d\"sortable-header\" (click)\u003d\"sortDeletedCoursesEvent(SortBy.COURSE_DELETION_DATE)\""},{"lineNumber":381,"author":{"gitId":"-"},"content":"                  [attr.aria-sort]\u003d\"getAriaSortDeleted(SortBy.COURSE_DELETION_DATE)\"\u003e"},{"lineNumber":382,"author":{"gitId":"weiquu"},"content":"                  \u003cbutton\u003e"},{"lineNumber":383,"author":{"gitId":"-"},"content":"                    Deletion Date"},{"lineNumber":384,"author":{"gitId":"weiquu"},"content":"                    \u003cspan class\u003d\"fa-stack\" aria-hidden\u003d\"true\"\u003e"},{"lineNumber":385,"author":{"gitId":"-"},"content":"                      \u003ci class\u003d\"fas fa-sort\"\u003e\u003c/i\u003e"},{"lineNumber":386,"author":{"gitId":"-"},"content":"                      \u003ci class\u003d\"fas fa-sort-down\""},{"lineNumber":387,"author":{"gitId":"-"},"content":"                        *ngIf\u003d\"deletedTableSortBy \u003d\u003d\u003d SortBy.COURSE_DELETION_DATE \u0026\u0026 deletedTableSortOrder \u003d\u003d\u003d SortOrder.DESC\"\u003e\u003c/i\u003e"},{"lineNumber":388,"author":{"gitId":"-"},"content":"                      \u003ci class\u003d\"fas fa-sort-up\""},{"lineNumber":389,"author":{"gitId":"-"},"content":"                        *ngIf\u003d\"deletedTableSortBy \u003d\u003d\u003d SortBy.COURSE_DELETION_DATE \u0026\u0026 deletedTableSortOrder \u003d\u003d\u003d SortOrder.ASC\"\u003e\u003c/i\u003e"},{"lineNumber":390,"author":{"gitId":"-"},"content":"                    \u003c/span\u003e"},{"lineNumber":391,"author":{"gitId":"weiquu"},"content":"                  \u003c/button\u003e"},{"lineNumber":392,"author":{"gitId":"-"},"content":"                \u003c/th\u003e"},{"lineNumber":393,"author":{"gitId":"-"},"content":"                \u003cth class\u003d\"text-center\"\u003eAction(s)\u003c/th\u003e"},{"lineNumber":394,"author":{"gitId":"-"},"content":"              \u003c/tr\u003e"},{"lineNumber":395,"author":{"gitId":"-"},"content":"            \u003c/thead\u003e"},{"lineNumber":396,"author":{"gitId":"-"},"content":"            \u003ctbody\u003e"},{"lineNumber":397,"author":{"gitId":"-"},"content":"              \u003ctr *ngFor\u003d\"let course of softDeletedCourses; let i \u003d index\"\u003e"},{"lineNumber":398,"author":{"gitId":"-"},"content":"                \u003ctd id\u003d\"deleted-course-id-{{ i }}\" class\u003d\"text-break\"\u003e{{course.course.courseId}}\u003c/td\u003e"},{"lineNumber":399,"author":{"gitId":"-"},"content":"                \u003ctd class\u003d\"text-break\"\u003e{{course.course.courseName}}\u003c/td\u003e"},{"lineNumber":400,"author":{"gitId":"-"},"content":"                \u003ctd\u003e"},{"lineNumber":401,"author":{"gitId":"-"},"content":"                  \u003cspan container\u003d\"body\" class\u003d\"ngb-tooltip-class\""},{"lineNumber":402,"author":{"gitId":"-"},"content":"                    [ngbTooltip]\u003d\"course.course.creationTimestamp | date:\u0027EEE, dd MMM yyyy, h:mma\u0027\"\u003e"},{"lineNumber":403,"author":{"gitId":"-"},"content":"                    {{course.course.creationTimestamp | date:\u0027d MMM yyyy\u0027}}"},{"lineNumber":404,"author":{"gitId":"-"},"content":"                  \u003c/span\u003e"},{"lineNumber":405,"author":{"gitId":"-"},"content":"                \u003c/td\u003e"},{"lineNumber":406,"author":{"gitId":"-"},"content":"                \u003ctd\u003e"},{"lineNumber":407,"author":{"gitId":"-"},"content":"                  \u003cspan container\u003d\"body\" class\u003d\"ngb-tooltip-class\""},{"lineNumber":408,"author":{"gitId":"-"},"content":"                    [ngbTooltip]\u003d\"course.course.deletionTimestamp | date:\u0027EEE, dd MMM yyyy, h:mma\u0027\"\u003e"},{"lineNumber":409,"author":{"gitId":"-"},"content":"                    {{course.course.deletionTimestamp | date:\u0027d MMM yyyy\u0027}}"},{"lineNumber":410,"author":{"gitId":"-"},"content":"                  \u003c/span\u003e"},{"lineNumber":411,"author":{"gitId":"-"},"content":"                \u003c/td\u003e"},{"lineNumber":412,"author":{"gitId":"-"},"content":"                \u003ctd class\u003d\"text-center actions-cell\"\u003e"},{"lineNumber":413,"author":{"gitId":"-"},"content":"                  \u003cbutton id\u003d\"btn-restore-{{ i }}\" class\u003d\"btn btn-light btn-sm\" *ngIf\u003d\"course.canModifyCourse\""},{"lineNumber":414,"author":{"gitId":"-"},"content":"                    (click)\u003d\"onRestore(course.course.courseId)\""},{"lineNumber":415,"author":{"gitId":"-"},"content":"                    ngbTooltip\u003d\"Restore the deleted course and its corresponding students and sessions\"\u003e"},{"lineNumber":416,"author":{"gitId":"-"},"content":"                    Restore"},{"lineNumber":417,"author":{"gitId":"-"},"content":"                  \u003c/button\u003e"},{"lineNumber":418,"author":{"gitId":"-"},"content":"                  \u003cbutton id\u003d\"btn-restore-disabled-{{ i }}\" class\u003d\"btn btn-light btn-sm disabled\""},{"lineNumber":419,"author":{"gitId":"-"},"content":"                    *ngIf\u003d\"!course.canModifyCourse\"\u003e"},{"lineNumber":420,"author":{"gitId":"-"},"content":"                    Restore"},{"lineNumber":421,"author":{"gitId":"-"},"content":"                  \u003c/button\u003e"},{"lineNumber":422,"author":{"gitId":"-"},"content":"                  \u003cbutton id\u003d\"btn-delete-{{ i }}\" class\u003d\"btn btn-light btn-sm text-danger\" *ngIf\u003d\"course.canModifyCourse\""},{"lineNumber":423,"author":{"gitId":"-"},"content":"                    (click)\u003d\"onDeletePermanently(course.course.courseId)\""},{"lineNumber":424,"author":{"gitId":"-"},"content":"                    ngbTooltip\u003d\"Permanently delete the course and its corresponding students and sessions\"\u003e"},{"lineNumber":425,"author":{"gitId":"-"},"content":"                    Delete Permanently"},{"lineNumber":426,"author":{"gitId":"-"},"content":"                  \u003c/button\u003e"},{"lineNumber":427,"author":{"gitId":"-"},"content":"                  \u003cbutton id\u003d\"btn-delete-disabled-{{ i }}\" class\u003d\"btn btn-light btn-sm disabled text-danger\""},{"lineNumber":428,"author":{"gitId":"-"},"content":"                    *ngIf\u003d\"!course.canModifyCourse\"\u003e"},{"lineNumber":429,"author":{"gitId":"-"},"content":"                    Delete Permanently"},{"lineNumber":430,"author":{"gitId":"-"},"content":"                  \u003c/button\u003e"},{"lineNumber":431,"author":{"gitId":"-"},"content":"                \u003c/td\u003e"},{"lineNumber":432,"author":{"gitId":"-"},"content":"              \u003c/tr\u003e"},{"lineNumber":433,"author":{"gitId":"-"},"content":"            \u003c/tbody\u003e"},{"lineNumber":434,"author":{"gitId":"-"},"content":"          \u003c/table\u003e"},{"lineNumber":435,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":436,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":437,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":438,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":439,"author":{"gitId":"-"},"content":"\u003c/div\u003e"},{"lineNumber":440,"author":{"gitId":"-"},"content":""},{"lineNumber":441,"author":{"gitId":"-"},"content":"\u003cng-template #modifiedTimestampsModal\u003e"},{"lineNumber":442,"author":{"gitId":"-"},"content":"  \u003ctm-modified-timestamps-modal [modifiedSessions]\u003d\"this.modifiedSessions\"\u003e"},{"lineNumber":443,"author":{"gitId":"-"},"content":"  \u003c/tm-modified-timestamps-modal\u003e"},{"lineNumber":444,"author":{"gitId":"-"},"content":"\u003c/ng-template\u003e"}],"authorContributionMap":{"weiquu":33,"-":411}},{"path":"src/web/app/pages-instructor/instructor-courses-page/instructor-courses-page.component.scss","fileType":"scss","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"@media (max-width: 768px) { //applies only to mobile screens"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  .custom-button-active {"},{"lineNumber":3,"author":{"gitId":"-"},"content":"    width: 115px;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"    margin-bottom: 5px;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":6,"author":{"gitId":"-"},"content":"}"},{"lineNumber":7,"author":{"gitId":"-"},"content":""},{"lineNumber":8,"author":{"gitId":"-"},"content":"@media (max-width: 768px) { //applies only to mobile screens"},{"lineNumber":9,"author":{"gitId":"-"},"content":"  .custom-button-archived {"},{"lineNumber":10,"author":{"gitId":"-"},"content":"    width: 95px;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"    margin-bottom: 5px;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":13,"author":{"gitId":"-"},"content":"}"},{"lineNumber":14,"author":{"gitId":"-"},"content":""},{"lineNumber":15,"author":{"gitId":"-"},"content":".sortable-header {"},{"lineNumber":16,"author":{"gitId":"-"},"content":"  cursor: pointer;"},{"lineNumber":17,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":18,"author":{"gitId":"weiquu"},"content":"  i {"},{"lineNumber":19,"author":{"gitId":"weiquu"},"content":"    margin-left: .3em;"},{"lineNumber":20,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":21,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":22,"author":{"gitId":"weiquu"},"content":"  .fa-stack {"},{"lineNumber":23,"author":{"gitId":"weiquu"},"content":"    width: 20%;"},{"lineNumber":24,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":25,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":26,"author":{"gitId":"weiquu"},"content":"  button {"},{"lineNumber":27,"author":{"gitId":"weiquu"},"content":"    background: none;"},{"lineNumber":28,"author":{"gitId":"weiquu"},"content":"    color: inherit;"},{"lineNumber":29,"author":{"gitId":"weiquu"},"content":"    border: none;"},{"lineNumber":30,"author":{"gitId":"weiquu"},"content":"    padding: 0;"},{"lineNumber":31,"author":{"gitId":"weiquu"},"content":"    text-align: left;"},{"lineNumber":32,"author":{"gitId":"weiquu"},"content":"    width: 100%;"},{"lineNumber":33,"author":{"gitId":"weiquu"},"content":"    font: inherit;"},{"lineNumber":34,"author":{"gitId":"weiquu"},"content":"    cursor: inherit;"},{"lineNumber":35,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":36,"author":{"gitId":"-"},"content":"}"},{"lineNumber":37,"author":{"gitId":"-"},"content":""},{"lineNumber":38,"author":{"gitId":"-"},"content":".course-section {"},{"lineNumber":39,"author":{"gitId":"-"},"content":"  margin-top: 2em;"},{"lineNumber":40,"author":{"gitId":"-"},"content":"}"},{"lineNumber":41,"author":{"gitId":"-"},"content":""},{"lineNumber":42,"author":{"gitId":"-"},"content":".bold-label {"},{"lineNumber":43,"author":{"gitId":"-"},"content":"  font-weight: 700 !important;"},{"lineNumber":44,"author":{"gitId":"-"},"content":"}"},{"lineNumber":45,"author":{"gitId":"-"},"content":""},{"lineNumber":46,"author":{"gitId":"-"},"content":".recycle-bin-body {"},{"lineNumber":47,"author":{"gitId":"-"},"content":"  padding: 0;"},{"lineNumber":48,"author":{"gitId":"-"},"content":"}"},{"lineNumber":49,"author":{"gitId":"-"},"content":""},{"lineNumber":50,"author":{"gitId":"-"},"content":".background-color-medium-gray {"},{"lineNumber":51,"author":{"gitId":"-"},"content":"  background-color: #E5E5E6;"},{"lineNumber":52,"author":{"gitId":"-"},"content":"}"},{"lineNumber":53,"author":{"gitId":"-"},"content":""},{"lineNumber":54,"author":{"gitId":"-"},"content":".text-color-black {"},{"lineNumber":55,"author":{"gitId":"-"},"content":"  color: #000;"},{"lineNumber":56,"author":{"gitId":"-"},"content":"}"},{"lineNumber":57,"author":{"gitId":"-"},"content":""},{"lineNumber":58,"author":{"gitId":"-"},"content":".text-color-gray {"},{"lineNumber":59,"author":{"gitId":"-"},"content":"  color: gray;"},{"lineNumber":60,"author":{"gitId":"-"},"content":"}"},{"lineNumber":61,"author":{"gitId":"-"},"content":""},{"lineNumber":62,"author":{"gitId":"-"},"content":".text-color-lightgray {"},{"lineNumber":63,"author":{"gitId":"-"},"content":"  color: lightgray;"},{"lineNumber":64,"author":{"gitId":"-"},"content":"}"},{"lineNumber":65,"author":{"gitId":"-"},"content":""},{"lineNumber":66,"author":{"gitId":"-"},"content":".text-color-red {"},{"lineNumber":67,"author":{"gitId":"-"},"content":"  color: red;"},{"lineNumber":68,"author":{"gitId":"-"},"content":"}"},{"lineNumber":69,"author":{"gitId":"-"},"content":""},{"lineNumber":70,"author":{"gitId":"-"},"content":".link-disabled {"},{"lineNumber":71,"author":{"gitId":"-"},"content":"  cursor: default;"},{"lineNumber":72,"author":{"gitId":"-"},"content":"  color: #000;"},{"lineNumber":73,"author":{"gitId":"-"},"content":"  pointer-events: none;"},{"lineNumber":74,"author":{"gitId":"-"},"content":"}"},{"lineNumber":75,"author":{"gitId":"-"},"content":""},{"lineNumber":76,"author":{"gitId":"-"},"content":".recycle-bin-table {"},{"lineNumber":77,"author":{"gitId":"-"},"content":"  margin-bottom: 0;"},{"lineNumber":78,"author":{"gitId":"-"},"content":"}"},{"lineNumber":79,"author":{"gitId":"-"},"content":""},{"lineNumber":80,"author":{"gitId":"-"},"content":".archive-body {"},{"lineNumber":81,"author":{"gitId":"-"},"content":"  padding: 0;"},{"lineNumber":82,"author":{"gitId":"-"},"content":"}"},{"lineNumber":83,"author":{"gitId":"-"},"content":""},{"lineNumber":84,"author":{"gitId":"-"},"content":".archive-table {"},{"lineNumber":85,"author":{"gitId":"-"},"content":"  margin-bottom: 0;"},{"lineNumber":86,"author":{"gitId":"-"},"content":"}"},{"lineNumber":87,"author":{"gitId":"-"},"content":""},{"lineNumber":88,"author":{"gitId":"-"},"content":".margin-top-30px {"},{"lineNumber":89,"author":{"gitId":"-"},"content":"  margin-top: 30px;"},{"lineNumber":90,"author":{"gitId":"-"},"content":"}"},{"lineNumber":91,"author":{"gitId":"-"},"content":""},{"lineNumber":92,"author":{"gitId":"-"},"content":"@media (min-width: 768px) { //applies only to non-mobile screens"},{"lineNumber":93,"author":{"gitId":"-"},"content":"  .actions-cell button:not(.dropdown-item) {"},{"lineNumber":94,"author":{"gitId":"-"},"content":"    margin-left: var(--btn-margin);"},{"lineNumber":95,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":96,"author":{"gitId":"-"},"content":"}"},{"lineNumber":97,"author":{"gitId":"-"},"content":""},{"lineNumber":98,"author":{"gitId":"-"},"content":".dropdown-menu {"},{"lineNumber":99,"author":{"gitId":"-"},"content":"  min-width: .5rem;"},{"lineNumber":100,"author":{"gitId":"-"},"content":"}"},{"lineNumber":101,"author":{"gitId":"-"},"content":""},{"lineNumber":102,"author":{"gitId":"-"},"content":".table-responsive {"},{"lineNumber":103,"author":{"gitId":"-"},"content":"  overflow: auto;"},{"lineNumber":104,"author":{"gitId":"-"},"content":"}"},{"lineNumber":105,"author":{"gitId":"-"},"content":""},{"lineNumber":106,"author":{"gitId":"-"},"content":".d-inline-block {"},{"lineNumber":107,"author":{"gitId":"-"},"content":"  position: inherit;"},{"lineNumber":108,"author":{"gitId":"-"},"content":"}"},{"lineNumber":109,"author":{"gitId":"-"},"content":""},{"lineNumber":110,"author":{"gitId":"-"},"content":".link-button {"},{"lineNumber":111,"author":{"gitId":"-"},"content":"  border: none;"},{"lineNumber":112,"author":{"gitId":"-"},"content":"  text-decoration: underline;"},{"lineNumber":113,"author":{"gitId":"-"},"content":"  color: var(--bs-link-color);"},{"lineNumber":114,"author":{"gitId":"-"},"content":"  padding: 0;"},{"lineNumber":115,"author":{"gitId":"-"},"content":"  background: none;"},{"lineNumber":116,"author":{"gitId":"-"},"content":"}"},{"lineNumber":117,"author":{"gitId":"-"},"content":""},{"lineNumber":118,"author":{"gitId":"-"},"content":".link-button:hover {"},{"lineNumber":119,"author":{"gitId":"-"},"content":"  color: var(--bs-link-hover-color);"},{"lineNumber":120,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"weiquu":19,"-":101}},{"path":"src/web/app/pages-instructor/instructor-courses-page/instructor-courses-page.component.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { Component, EventEmitter, OnInit, Output, TemplateRef, ViewChild } from \u0027@angular/core\u0027;"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import { ActivatedRoute } from \u0027@angular/router\u0027;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"import { NgbModal, NgbModalRef } from \u0027@ng-bootstrap/ng-bootstrap\u0027;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import moment from \u0027moment-timezone\u0027;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import { forkJoin, Observable } from \u0027rxjs\u0027;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import { finalize } from \u0027rxjs/operators\u0027;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import { CourseService } from \u0027../../../services/course.service\u0027;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import { FeedbackSessionsService } from \u0027../../../services/feedback-sessions.service\u0027;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import { ProgressBarService } from \u0027../../../services/progress-bar.service\u0027;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import { SimpleModalService } from \u0027../../../services/simple-modal.service\u0027;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import { StatusMessageService } from \u0027../../../services/status-message.service\u0027;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import { StudentService } from \u0027../../../services/student.service\u0027;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import { TableComparatorService } from \u0027../../../services/table-comparator.service\u0027;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import { TimezoneService } from \u0027../../../services/timezone.service\u0027;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":16,"author":{"gitId":"-"},"content":"  Course,"},{"lineNumber":17,"author":{"gitId":"-"},"content":"  CourseArchive,"},{"lineNumber":18,"author":{"gitId":"-"},"content":"  Courses,"},{"lineNumber":19,"author":{"gitId":"-"},"content":"  FeedbackSession,"},{"lineNumber":20,"author":{"gitId":"-"},"content":"  FeedbackSessions,"},{"lineNumber":21,"author":{"gitId":"-"},"content":"  JoinState,"},{"lineNumber":22,"author":{"gitId":"-"},"content":"  MessageOutput,"},{"lineNumber":23,"author":{"gitId":"-"},"content":"  ResponseVisibleSetting,"},{"lineNumber":24,"author":{"gitId":"-"},"content":"  SessionVisibleSetting,"},{"lineNumber":25,"author":{"gitId":"-"},"content":"  Student,"},{"lineNumber":26,"author":{"gitId":"-"},"content":"  Students,"},{"lineNumber":27,"author":{"gitId":"-"},"content":"} from \u0027../../../types/api-output\u0027;"},{"lineNumber":28,"author":{"gitId":"-"},"content":"import { FeedbackSessionCreateRequest } from \u0027../../../types/api-request\u0027;"},{"lineNumber":29,"author":{"gitId":"-"},"content":"import { SortBy, SortOrder } from \u0027../../../types/sort-properties\u0027;"},{"lineNumber":30,"author":{"gitId":"-"},"content":"import { CopyCourseModalResult } from \u0027../../components/copy-course-modal/copy-course-modal-model\u0027;"},{"lineNumber":31,"author":{"gitId":"-"},"content":"import { CopyCourseModalComponent } from \u0027../../components/copy-course-modal/copy-course-modal.component\u0027;"},{"lineNumber":32,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":33,"author":{"gitId":"-"},"content":"  CourseAddFormModel,"},{"lineNumber":34,"author":{"gitId":"-"},"content":"  CourseEditFormMode,"},{"lineNumber":35,"author":{"gitId":"-"},"content":"  DEFAULT_COURSE_ADD_FORM_MODEL,"},{"lineNumber":36,"author":{"gitId":"-"},"content":"} from \u0027../../components/course-edit-form/course-edit-form-model\u0027;"},{"lineNumber":37,"author":{"gitId":"-"},"content":"import { SimpleModalType } from \u0027../../components/simple-modal/simple-modal-type\u0027;"},{"lineNumber":38,"author":{"gitId":"-"},"content":"import { collapseAnim } from \u0027../../components/teammates-common/collapse-anim\u0027;"},{"lineNumber":39,"author":{"gitId":"-"},"content":"import { ErrorMessageOutput } from \u0027../../error-message-output\u0027;"},{"lineNumber":40,"author":{"gitId":"-"},"content":""},{"lineNumber":41,"author":{"gitId":"-"},"content":"interface CourseModel {"},{"lineNumber":42,"author":{"gitId":"-"},"content":"  course: Course;"},{"lineNumber":43,"author":{"gitId":"-"},"content":"  canModifyCourse: boolean;"},{"lineNumber":44,"author":{"gitId":"-"},"content":"  canModifyStudent: boolean;"},{"lineNumber":45,"author":{"gitId":"-"},"content":"  isLoadingCourseStats: boolean;"},{"lineNumber":46,"author":{"gitId":"-"},"content":"}"},{"lineNumber":47,"author":{"gitId":"-"},"content":""},{"lineNumber":48,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":49,"author":{"gitId":"-"},"content":" * Instructor courses list page."},{"lineNumber":50,"author":{"gitId":"-"},"content":" */"},{"lineNumber":51,"author":{"gitId":"-"},"content":"@Component({"},{"lineNumber":52,"author":{"gitId":"-"},"content":"  selector: \u0027tm-instructor-courses-page\u0027,"},{"lineNumber":53,"author":{"gitId":"-"},"content":"  templateUrl: \u0027./instructor-courses-page.component.html\u0027,"},{"lineNumber":54,"author":{"gitId":"-"},"content":"  styleUrls: [\u0027./instructor-courses-page.component.scss\u0027],"},{"lineNumber":55,"author":{"gitId":"-"},"content":"  animations: [collapseAnim],"},{"lineNumber":56,"author":{"gitId":"-"},"content":"})"},{"lineNumber":57,"author":{"gitId":"-"},"content":"export class InstructorCoursesPageComponent implements OnInit {"},{"lineNumber":58,"author":{"gitId":"-"},"content":""},{"lineNumber":59,"author":{"gitId":"-"},"content":"  activeCourses: CourseModel[] \u003d [];"},{"lineNumber":60,"author":{"gitId":"-"},"content":"  archivedCourses: CourseModel[] \u003d [];"},{"lineNumber":61,"author":{"gitId":"-"},"content":"  softDeletedCourses: CourseModel[] \u003d [];"},{"lineNumber":62,"author":{"gitId":"-"},"content":"  allCoursesList: Course[] \u003d [];"},{"lineNumber":63,"author":{"gitId":"-"},"content":"  activeCoursesList: Course[] \u003d [];"},{"lineNumber":64,"author":{"gitId":"-"},"content":"  courseStats: Record\u003cstring, Record\u003cstring, number\u003e\u003e \u003d {};"},{"lineNumber":65,"author":{"gitId":"-"},"content":"  courseFormModel: CourseAddFormModel \u003d DEFAULT_COURSE_ADD_FORM_MODEL();"},{"lineNumber":66,"author":{"gitId":"-"},"content":"  resetCourseForm: EventEmitter\u003cvoid\u003e \u003d new EventEmitter();"},{"lineNumber":67,"author":{"gitId":"-"},"content":""},{"lineNumber":68,"author":{"gitId":"-"},"content":"  activeTableSortOrder: SortOrder \u003d SortOrder.ASC;"},{"lineNumber":69,"author":{"gitId":"-"},"content":"  activeTableSortBy: SortBy \u003d SortBy.COURSE_CREATION_DATE;"},{"lineNumber":70,"author":{"gitId":"-"},"content":"  archivedTableSortOrder: SortOrder \u003d SortOrder.ASC;"},{"lineNumber":71,"author":{"gitId":"-"},"content":"  archivedTableSortBy: SortBy \u003d SortBy.COURSE_NAME;"},{"lineNumber":72,"author":{"gitId":"-"},"content":"  deletedTableSortOrder: SortOrder \u003d SortOrder.ASC;"},{"lineNumber":73,"author":{"gitId":"-"},"content":"  deletedTableSortBy: SortBy \u003d SortBy.COURSE_NAME;"},{"lineNumber":74,"author":{"gitId":"-"},"content":""},{"lineNumber":75,"author":{"gitId":"-"},"content":"  // enum"},{"lineNumber":76,"author":{"gitId":"-"},"content":"  SortBy: typeof SortBy \u003d SortBy;"},{"lineNumber":77,"author":{"gitId":"-"},"content":"  SortOrder: typeof SortOrder \u003d SortOrder;"},{"lineNumber":78,"author":{"gitId":"-"},"content":"  CourseEditFormMode: typeof CourseEditFormMode \u003d CourseEditFormMode;"},{"lineNumber":79,"author":{"gitId":"-"},"content":""},{"lineNumber":80,"author":{"gitId":"-"},"content":"  isLoadingActiveCourses: boolean \u003d false;"},{"lineNumber":81,"author":{"gitId":"-"},"content":"  isLoadingArchivedCourses: boolean \u003d false;"},{"lineNumber":82,"author":{"gitId":"-"},"content":"  isLoadingSoftDeletedCourses: boolean \u003d false;"},{"lineNumber":83,"author":{"gitId":"-"},"content":"  hasLoadingFailed: boolean \u003d false;"},{"lineNumber":84,"author":{"gitId":"-"},"content":"  isRecycleBinExpanded: boolean \u003d false;"},{"lineNumber":85,"author":{"gitId":"-"},"content":"  canDeleteAll: boolean \u003d true;"},{"lineNumber":86,"author":{"gitId":"-"},"content":"  canRestoreAll: boolean \u003d true;"},{"lineNumber":87,"author":{"gitId":"-"},"content":"  isAddNewCourseFormExpanded: boolean \u003d false;"},{"lineNumber":88,"author":{"gitId":"-"},"content":"  isArchivedCourseExpanded: boolean \u003d false;"},{"lineNumber":89,"author":{"gitId":"-"},"content":"  isCopyingCourse: boolean \u003d false;"},{"lineNumber":90,"author":{"gitId":"-"},"content":""},{"lineNumber":91,"author":{"gitId":"-"},"content":"  copyProgressPercentage: number \u003d 0;"},{"lineNumber":92,"author":{"gitId":"-"},"content":"  totalNumberOfSessionsToCopy: number \u003d 0;"},{"lineNumber":93,"author":{"gitId":"-"},"content":"  numberOfSessionsCopied: number \u003d 0;"},{"lineNumber":94,"author":{"gitId":"-"},"content":""},{"lineNumber":95,"author":{"gitId":"-"},"content":"  modifiedSessions: Record\u003cstring, TweakedTimestampData\u003e \u003d {};"},{"lineNumber":96,"author":{"gitId":"-"},"content":""},{"lineNumber":97,"author":{"gitId":"-"},"content":"  @Output() courseAdded: EventEmitter\u003cvoid\u003e \u003d new EventEmitter\u003cvoid\u003e();"},{"lineNumber":98,"author":{"gitId":"-"},"content":""},{"lineNumber":99,"author":{"gitId":"-"},"content":"  @ViewChild(\u0027modifiedTimestampsModal\u0027) modifiedTimestampsModal!: TemplateRef\u003cany\u003e;"},{"lineNumber":100,"author":{"gitId":"-"},"content":""},{"lineNumber":101,"author":{"gitId":"-"},"content":"  constructor(private ngbModal: NgbModal,"},{"lineNumber":102,"author":{"gitId":"-"},"content":"              private route: ActivatedRoute,"},{"lineNumber":103,"author":{"gitId":"-"},"content":"              private statusMessageService: StatusMessageService,"},{"lineNumber":104,"author":{"gitId":"-"},"content":"              private courseService: CourseService,"},{"lineNumber":105,"author":{"gitId":"-"},"content":"              private studentService: StudentService,"},{"lineNumber":106,"author":{"gitId":"-"},"content":"              private simpleModalService: SimpleModalService,"},{"lineNumber":107,"author":{"gitId":"-"},"content":"              private tableComparatorService: TableComparatorService,"},{"lineNumber":108,"author":{"gitId":"-"},"content":"              private feedbackSessionsService: FeedbackSessionsService,"},{"lineNumber":109,"author":{"gitId":"-"},"content":"              private progressBarService: ProgressBarService,"},{"lineNumber":110,"author":{"gitId":"-"},"content":"              private timezoneService: TimezoneService) {}"},{"lineNumber":111,"author":{"gitId":"-"},"content":""},{"lineNumber":112,"author":{"gitId":"-"},"content":"  ngOnInit(): void {"},{"lineNumber":113,"author":{"gitId":"-"},"content":"    this.route.queryParams.subscribe((queryParams: any) \u003d\u003e {"},{"lineNumber":114,"author":{"gitId":"-"},"content":"      if (queryParams.isAddNewCourse) {"},{"lineNumber":115,"author":{"gitId":"-"},"content":"        this.isAddNewCourseFormExpanded \u003d queryParams.isAddNewCourse;"},{"lineNumber":116,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":117,"author":{"gitId":"-"},"content":"      this.loadInstructorCourses();"},{"lineNumber":118,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":119,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":120,"author":{"gitId":"-"},"content":""},{"lineNumber":121,"author":{"gitId":"-"},"content":"  setIsCopyingCourse(value: boolean): void {"},{"lineNumber":122,"author":{"gitId":"-"},"content":"    this.isCopyingCourse \u003d value;"},{"lineNumber":123,"author":{"gitId":"-"},"content":"    this.courseFormModel.isCopying \u003d value;"},{"lineNumber":124,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":125,"author":{"gitId":"-"},"content":""},{"lineNumber":126,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":127,"author":{"gitId":"-"},"content":"   * Loads instructor courses required for this page."},{"lineNumber":128,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":129,"author":{"gitId":"-"},"content":"  loadInstructorCourses(): void {"},{"lineNumber":130,"author":{"gitId":"-"},"content":"    this.hasLoadingFailed \u003d false;"},{"lineNumber":131,"author":{"gitId":"-"},"content":"    this.isLoadingActiveCourses \u003d true;"},{"lineNumber":132,"author":{"gitId":"-"},"content":"    this.isLoadingArchivedCourses \u003d true;"},{"lineNumber":133,"author":{"gitId":"-"},"content":"    this.isLoadingSoftDeletedCourses \u003d true;"},{"lineNumber":134,"author":{"gitId":"-"},"content":"    this.activeCourses \u003d [];"},{"lineNumber":135,"author":{"gitId":"-"},"content":"    this.archivedCourses \u003d [];"},{"lineNumber":136,"author":{"gitId":"-"},"content":"    this.softDeletedCourses \u003d [];"},{"lineNumber":137,"author":{"gitId":"-"},"content":"    this.activeCoursesList \u003d [];"},{"lineNumber":138,"author":{"gitId":"-"},"content":"    this.allCoursesList \u003d [];"},{"lineNumber":139,"author":{"gitId":"-"},"content":"    this.courseService.getAllCoursesAsInstructor(\u0027active\u0027).subscribe({"},{"lineNumber":140,"author":{"gitId":"-"},"content":"      next: (resp: Courses) \u003d\u003e {"},{"lineNumber":141,"author":{"gitId":"-"},"content":"        resp.courses.forEach((course: Course) \u003d\u003e {"},{"lineNumber":142,"author":{"gitId":"-"},"content":"          this.allCoursesList.push(course);"},{"lineNumber":143,"author":{"gitId":"-"},"content":"          this.activeCoursesList.push(course);"},{"lineNumber":144,"author":{"gitId":"-"},"content":"          let canModifyCourse: boolean \u003d false;"},{"lineNumber":145,"author":{"gitId":"-"},"content":"          let canModifyStudent: boolean \u003d false;"},{"lineNumber":146,"author":{"gitId":"-"},"content":"          if (course.privileges) {"},{"lineNumber":147,"author":{"gitId":"-"},"content":"            canModifyCourse \u003d course.privileges.canModifyCourse;"},{"lineNumber":148,"author":{"gitId":"-"},"content":"            canModifyStudent \u003d course.privileges.canModifyStudent;"},{"lineNumber":149,"author":{"gitId":"-"},"content":"          }"},{"lineNumber":150,"author":{"gitId":"-"},"content":"          const isLoadingCourseStats: boolean \u003d false;"},{"lineNumber":151,"author":{"gitId":"-"},"content":"          const activeCourse: CourseModel \u003d {"},{"lineNumber":152,"author":{"gitId":"-"},"content":"            course, canModifyCourse, canModifyStudent, isLoadingCourseStats,"},{"lineNumber":153,"author":{"gitId":"-"},"content":"          };"},{"lineNumber":154,"author":{"gitId":"-"},"content":"          this.activeCourses.push(activeCourse);"},{"lineNumber":155,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":156,"author":{"gitId":"-"},"content":"        this.activeCoursesDefaultSort();"},{"lineNumber":157,"author":{"gitId":"-"},"content":"        this.isLoadingActiveCourses \u003d false;"},{"lineNumber":158,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":159,"author":{"gitId":"-"},"content":"      error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":160,"author":{"gitId":"-"},"content":"        this.isLoadingActiveCourses \u003d false;"},{"lineNumber":161,"author":{"gitId":"-"},"content":"        this.hasLoadingFailed \u003d true;"},{"lineNumber":162,"author":{"gitId":"-"},"content":"        this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":163,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":164,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":165,"author":{"gitId":"-"},"content":""},{"lineNumber":166,"author":{"gitId":"-"},"content":"    this.courseService.getAllCoursesAsInstructor(\u0027archived\u0027).subscribe({"},{"lineNumber":167,"author":{"gitId":"-"},"content":"      next: (resp: Courses) \u003d\u003e {"},{"lineNumber":168,"author":{"gitId":"-"},"content":"        for (const course of resp.courses) {"},{"lineNumber":169,"author":{"gitId":"-"},"content":"          this.allCoursesList.push(course);"},{"lineNumber":170,"author":{"gitId":"-"},"content":"          let canModifyCourse: boolean \u003d false;"},{"lineNumber":171,"author":{"gitId":"-"},"content":"          let canModifyStudent: boolean \u003d false;"},{"lineNumber":172,"author":{"gitId":"-"},"content":"          if (course.privileges) {"},{"lineNumber":173,"author":{"gitId":"-"},"content":"            canModifyCourse \u003d course.privileges.canModifyCourse;"},{"lineNumber":174,"author":{"gitId":"-"},"content":"            canModifyStudent \u003d course.privileges.canModifyStudent;"},{"lineNumber":175,"author":{"gitId":"-"},"content":"          }"},{"lineNumber":176,"author":{"gitId":"-"},"content":"          const isLoadingCourseStats: boolean \u003d false;"},{"lineNumber":177,"author":{"gitId":"-"},"content":"          const archivedCourse: CourseModel \u003d {"},{"lineNumber":178,"author":{"gitId":"-"},"content":"            course, canModifyCourse, canModifyStudent, isLoadingCourseStats,"},{"lineNumber":179,"author":{"gitId":"-"},"content":"          };"},{"lineNumber":180,"author":{"gitId":"-"},"content":"          this.archivedCourses.push(archivedCourse);"},{"lineNumber":181,"author":{"gitId":"-"},"content":"          this.archivedCoursesDefaultSort();"},{"lineNumber":182,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":183,"author":{"gitId":"-"},"content":"        this.isLoadingArchivedCourses \u003d false;"},{"lineNumber":184,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":185,"author":{"gitId":"-"},"content":"      error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":186,"author":{"gitId":"-"},"content":"        this.isLoadingArchivedCourses \u003d false;"},{"lineNumber":187,"author":{"gitId":"-"},"content":"        this.hasLoadingFailed \u003d true;"},{"lineNumber":188,"author":{"gitId":"-"},"content":"        this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":189,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":190,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":191,"author":{"gitId":"-"},"content":""},{"lineNumber":192,"author":{"gitId":"-"},"content":"    this.courseService.getAllCoursesAsInstructor(\u0027softDeleted\u0027).subscribe({"},{"lineNumber":193,"author":{"gitId":"-"},"content":"      next: (resp: Courses) \u003d\u003e {"},{"lineNumber":194,"author":{"gitId":"-"},"content":"        for (const course of resp.courses) {"},{"lineNumber":195,"author":{"gitId":"-"},"content":"          this.allCoursesList.push(course);"},{"lineNumber":196,"author":{"gitId":"-"},"content":"          let canModifyCourse: boolean \u003d false;"},{"lineNumber":197,"author":{"gitId":"-"},"content":"          let canModifyStudent: boolean \u003d false;"},{"lineNumber":198,"author":{"gitId":"-"},"content":"          if (course.privileges) {"},{"lineNumber":199,"author":{"gitId":"-"},"content":"            canModifyCourse \u003d course.privileges.canModifyCourse;"},{"lineNumber":200,"author":{"gitId":"-"},"content":"            canModifyStudent \u003d course.privileges.canModifyStudent;"},{"lineNumber":201,"author":{"gitId":"-"},"content":"          }"},{"lineNumber":202,"author":{"gitId":"-"},"content":"          const isLoadingCourseStats: boolean \u003d false;"},{"lineNumber":203,"author":{"gitId":"-"},"content":"          const softDeletedCourse: CourseModel \u003d {"},{"lineNumber":204,"author":{"gitId":"-"},"content":"            course, canModifyCourse, canModifyStudent, isLoadingCourseStats,"},{"lineNumber":205,"author":{"gitId":"-"},"content":"          };"},{"lineNumber":206,"author":{"gitId":"-"},"content":"          this.softDeletedCourses.push(softDeletedCourse);"},{"lineNumber":207,"author":{"gitId":"-"},"content":"          this.deletedCoursesDefaultSort();"},{"lineNumber":208,"author":{"gitId":"-"},"content":"          if (!softDeletedCourse.canModifyCourse) {"},{"lineNumber":209,"author":{"gitId":"-"},"content":"            this.canDeleteAll \u003d false;"},{"lineNumber":210,"author":{"gitId":"-"},"content":"            this.canRestoreAll \u003d false;"},{"lineNumber":211,"author":{"gitId":"-"},"content":"          }"},{"lineNumber":212,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":213,"author":{"gitId":"-"},"content":"        this.isLoadingSoftDeletedCourses \u003d false;"},{"lineNumber":214,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":215,"author":{"gitId":"-"},"content":"      error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":216,"author":{"gitId":"-"},"content":"        this.isLoadingSoftDeletedCourses \u003d false;"},{"lineNumber":217,"author":{"gitId":"-"},"content":"        this.hasLoadingFailed \u003d true;"},{"lineNumber":218,"author":{"gitId":"-"},"content":"        this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":219,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":220,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":221,"author":{"gitId":"-"},"content":""},{"lineNumber":222,"author":{"gitId":"-"},"content":"    this.courseFormModel.activeCourses \u003d this.activeCoursesList;"},{"lineNumber":223,"author":{"gitId":"-"},"content":"    this.courseFormModel.allCourses \u003d this.allCoursesList;"},{"lineNumber":224,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":225,"author":{"gitId":"-"},"content":""},{"lineNumber":226,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":227,"author":{"gitId":"-"},"content":"   * Constructs the url for course stats from the given course id."},{"lineNumber":228,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":229,"author":{"gitId":"-"},"content":"  getCourseStats(idx: number): void {"},{"lineNumber":230,"author":{"gitId":"-"},"content":"    const course: CourseModel \u003d this.activeCourses[idx];"},{"lineNumber":231,"author":{"gitId":"-"},"content":"    const courseId: string \u003d course.course.courseId;"},{"lineNumber":232,"author":{"gitId":"-"},"content":"    if (!courseId) {"},{"lineNumber":233,"author":{"gitId":"-"},"content":"      this.statusMessageService.showErrorToast(`Course ${courseId} is not found!`);"},{"lineNumber":234,"author":{"gitId":"-"},"content":"      return;"},{"lineNumber":235,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":236,"author":{"gitId":"-"},"content":"    course.isLoadingCourseStats \u003d true;"},{"lineNumber":237,"author":{"gitId":"-"},"content":"    this.studentService.getStudentsFromCourse({ courseId })"},{"lineNumber":238,"author":{"gitId":"-"},"content":"        .pipe(finalize(() \u003d\u003e {"},{"lineNumber":239,"author":{"gitId":"-"},"content":"          course.isLoadingCourseStats \u003d false;"},{"lineNumber":240,"author":{"gitId":"-"},"content":"        }))"},{"lineNumber":241,"author":{"gitId":"-"},"content":"        .subscribe({"},{"lineNumber":242,"author":{"gitId":"-"},"content":"          next: (students: Students) \u003d\u003e {"},{"lineNumber":243,"author":{"gitId":"-"},"content":"            this.courseStats[courseId] \u003d {"},{"lineNumber":244,"author":{"gitId":"-"},"content":"              sections: (new Set(students.students.map((value: Student) \u003d\u003e value.sectionName))).size,"},{"lineNumber":245,"author":{"gitId":"-"},"content":"              teams: (new Set(students.students.map((value: Student) \u003d\u003e value.teamName))).size,"},{"lineNumber":246,"author":{"gitId":"-"},"content":"              students: students.students.length,"},{"lineNumber":247,"author":{"gitId":"-"},"content":"              unregistered: students.students"},{"lineNumber":248,"author":{"gitId":"-"},"content":"                  .filter((value: Student) \u003d\u003e value.joinState \u003d\u003d\u003d JoinState.NOT_JOINED).length,"},{"lineNumber":249,"author":{"gitId":"-"},"content":"            };"},{"lineNumber":250,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":251,"author":{"gitId":"-"},"content":"          error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":252,"author":{"gitId":"-"},"content":"            this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":253,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":254,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":255,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":256,"author":{"gitId":"-"},"content":""},{"lineNumber":257,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":258,"author":{"gitId":"-"},"content":"   * Changes the status of an archived course."},{"lineNumber":259,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":260,"author":{"gitId":"-"},"content":"  changeArchiveStatus(courseId: string, toArchive: boolean): void {"},{"lineNumber":261,"author":{"gitId":"-"},"content":"    if (!courseId) {"},{"lineNumber":262,"author":{"gitId":"-"},"content":"      this.statusMessageService.showErrorToast(`Course ${courseId} is not found!`);"},{"lineNumber":263,"author":{"gitId":"-"},"content":"      return;"},{"lineNumber":264,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":265,"author":{"gitId":"-"},"content":"    this.courseService.changeArchiveStatus(courseId, {"},{"lineNumber":266,"author":{"gitId":"-"},"content":"      archiveStatus: toArchive,"},{"lineNumber":267,"author":{"gitId":"-"},"content":"    }).subscribe({"},{"lineNumber":268,"author":{"gitId":"-"},"content":"      next: (courseArchive: CourseArchive) \u003d\u003e {"},{"lineNumber":269,"author":{"gitId":"-"},"content":"        if (courseArchive.isArchived) {"},{"lineNumber":270,"author":{"gitId":"-"},"content":"          this.changeModelFromActiveToArchived(courseId);"},{"lineNumber":271,"author":{"gitId":"-"},"content":"          this.statusMessageService.showSuccessToast(`The course ${courseId} has been archived. `"},{"lineNumber":272,"author":{"gitId":"-"},"content":"          + \u0027It will not appear on the home page anymore.\u0027);"},{"lineNumber":273,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":274,"author":{"gitId":"-"},"content":"          this.changeModelFromArchivedToActive(courseId);"},{"lineNumber":275,"author":{"gitId":"-"},"content":"          this.statusMessageService.showSuccessToast(\u0027The course has been unarchived.\u0027);"},{"lineNumber":276,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":277,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":278,"author":{"gitId":"-"},"content":"      error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":279,"author":{"gitId":"-"},"content":"        this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":280,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":281,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":282,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":283,"author":{"gitId":"-"},"content":""},{"lineNumber":284,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":285,"author":{"gitId":"-"},"content":"   * Moves a course model from active courses list to archived list."},{"lineNumber":286,"author":{"gitId":"-"},"content":"   * This is to reduce the need to refresh the entire list of courses multiple times."},{"lineNumber":287,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":288,"author":{"gitId":"-"},"content":"  changeModelFromActiveToArchived(courseId: string): void {"},{"lineNumber":289,"author":{"gitId":"-"},"content":"    const courseToBeRemoved: CourseModel | undefined \u003d this.findCourse(this.activeCourses, courseId);"},{"lineNumber":290,"author":{"gitId":"-"},"content":"    this.activeCourses \u003d this.removeCourse(this.activeCourses, courseId);"},{"lineNumber":291,"author":{"gitId":"-"},"content":"    this.activeCoursesList \u003d this.activeCourses.map((courseModel: CourseModel) \u003d\u003e courseModel.course);"},{"lineNumber":292,"author":{"gitId":"-"},"content":"    if (courseToBeRemoved !\u003d\u003d undefined) {"},{"lineNumber":293,"author":{"gitId":"-"},"content":"      this.archivedCourses.push(courseToBeRemoved);"},{"lineNumber":294,"author":{"gitId":"-"},"content":"      this.archivedCourses.sort(this.sortBy(this.archivedTableSortBy, this.archivedTableSortOrder));"},{"lineNumber":295,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":296,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":297,"author":{"gitId":"-"},"content":""},{"lineNumber":298,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":299,"author":{"gitId":"-"},"content":"   * Moves a course model from archived courses list to active list."},{"lineNumber":300,"author":{"gitId":"-"},"content":"   * This is to reduce the need to refresh the entire list of courses multiple times."},{"lineNumber":301,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":302,"author":{"gitId":"-"},"content":"  changeModelFromArchivedToActive(courseId: string): void {"},{"lineNumber":303,"author":{"gitId":"-"},"content":"    const courseToBeRemoved: CourseModel | undefined \u003d this.findCourse(this.archivedCourses, courseId);"},{"lineNumber":304,"author":{"gitId":"-"},"content":"    this.archivedCourses \u003d this.removeCourse(this.archivedCourses, courseId);"},{"lineNumber":305,"author":{"gitId":"-"},"content":"    if (courseToBeRemoved !\u003d\u003d undefined) {"},{"lineNumber":306,"author":{"gitId":"-"},"content":"      this.activeCourses.push(courseToBeRemoved);"},{"lineNumber":307,"author":{"gitId":"-"},"content":"      this.activeCoursesList \u003d this.activeCourses.map((courseModel: CourseModel) \u003d\u003e courseModel.course);"},{"lineNumber":308,"author":{"gitId":"-"},"content":"      this.activeCourses.sort(this.sortBy(this.activeTableSortBy, this.activeTableSortOrder));"},{"lineNumber":309,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":310,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":311,"author":{"gitId":"-"},"content":""},{"lineNumber":312,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":313,"author":{"gitId":"-"},"content":"   * Creates new course"},{"lineNumber":314,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":315,"author":{"gitId":"-"},"content":"  createNewCourse(): void {"},{"lineNumber":316,"author":{"gitId":"-"},"content":"    this.courseFormModel.isSaving \u003d true;"},{"lineNumber":317,"author":{"gitId":"-"},"content":"    this.courseService.createCourse(this.courseFormModel.course.institute, {"},{"lineNumber":318,"author":{"gitId":"-"},"content":"      courseName: this.courseFormModel.course.courseName,"},{"lineNumber":319,"author":{"gitId":"-"},"content":"      timeZone: this.courseFormModel.course.timeZone,"},{"lineNumber":320,"author":{"gitId":"-"},"content":"      courseId: this.courseFormModel.course.courseId,"},{"lineNumber":321,"author":{"gitId":"-"},"content":"    }).pipe(finalize(() \u003d\u003e {"},{"lineNumber":322,"author":{"gitId":"-"},"content":"      this.courseFormModel.isSaving \u003d false;"},{"lineNumber":323,"author":{"gitId":"-"},"content":"    })).subscribe({"},{"lineNumber":324,"author":{"gitId":"-"},"content":"      next: () \u003d\u003e {"},{"lineNumber":325,"author":{"gitId":"-"},"content":"        this.statusMessageService.showSuccessToast(\u0027The course has been added.\u0027);"},{"lineNumber":326,"author":{"gitId":"-"},"content":"        this.courseFormModel.course.courseId \u003d \u0027\u0027;"},{"lineNumber":327,"author":{"gitId":"-"},"content":"        this.courseFormModel.course.courseName \u003d \u0027\u0027;"},{"lineNumber":328,"author":{"gitId":"-"},"content":"        this.resetCourseForm.emit();"},{"lineNumber":329,"author":{"gitId":"-"},"content":"        this.loadInstructorCourses();"},{"lineNumber":330,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":331,"author":{"gitId":"-"},"content":"      error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":332,"author":{"gitId":"-"},"content":"        this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":333,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":334,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":335,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":336,"author":{"gitId":"-"},"content":""},{"lineNumber":337,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":338,"author":{"gitId":"-"},"content":"   * Finds and returns a course from the target course list."},{"lineNumber":339,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":340,"author":{"gitId":"-"},"content":"  findCourse(targetList: CourseModel[], courseId: string): CourseModel | undefined {"},{"lineNumber":341,"author":{"gitId":"-"},"content":"    return targetList.find((model: CourseModel) \u003d\u003e {"},{"lineNumber":342,"author":{"gitId":"-"},"content":"      return model.course.courseId \u003d\u003d\u003d courseId;"},{"lineNumber":343,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":344,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":345,"author":{"gitId":"-"},"content":""},{"lineNumber":346,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":347,"author":{"gitId":"-"},"content":"   * Removes a course from the target course list and returns the result list."},{"lineNumber":348,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":349,"author":{"gitId":"-"},"content":"  removeCourse(targetList: CourseModel[], courseId: string): CourseModel[] {"},{"lineNumber":350,"author":{"gitId":"-"},"content":"    return targetList.filter((model: CourseModel) \u003d\u003e {"},{"lineNumber":351,"author":{"gitId":"-"},"content":"      return model.course.courseId !\u003d\u003d courseId;"},{"lineNumber":352,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":353,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":354,"author":{"gitId":"-"},"content":""},{"lineNumber":355,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":356,"author":{"gitId":"-"},"content":"   * Creates a copy of a course including the selected sessions."},{"lineNumber":357,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":358,"author":{"gitId":"-"},"content":"  onCopy(courseId: string, courseName: string, timeZone: string): void {"},{"lineNumber":359,"author":{"gitId":"-"},"content":"    if (!courseId) {"},{"lineNumber":360,"author":{"gitId":"-"},"content":"      this.statusMessageService.showErrorToast(\u0027Course is not found!\u0027);"},{"lineNumber":361,"author":{"gitId":"-"},"content":"      return;"},{"lineNumber":362,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":363,"author":{"gitId":"-"},"content":""},{"lineNumber":364,"author":{"gitId":"-"},"content":"    this.feedbackSessionsService.getFeedbackSessionsForInstructor(courseId).subscribe({"},{"lineNumber":365,"author":{"gitId":"-"},"content":"      next: (response: FeedbackSessions) \u003d\u003e {"},{"lineNumber":366,"author":{"gitId":"-"},"content":"        const modalRef: NgbModalRef \u003d this.ngbModal.open(CopyCourseModalComponent);"},{"lineNumber":367,"author":{"gitId":"-"},"content":"        modalRef.componentInstance.oldCourseId \u003d courseId;"},{"lineNumber":368,"author":{"gitId":"-"},"content":"        modalRef.componentInstance.oldCourseName \u003d courseName;"},{"lineNumber":369,"author":{"gitId":"-"},"content":"        modalRef.componentInstance.allCourses \u003d this.allCoursesList;"},{"lineNumber":370,"author":{"gitId":"-"},"content":"        modalRef.componentInstance.newTimeZone \u003d timeZone;"},{"lineNumber":371,"author":{"gitId":"-"},"content":"        modalRef.componentInstance.courseToFeedbackSession[courseId] \u003d response.feedbackSessions;"},{"lineNumber":372,"author":{"gitId":"-"},"content":"        modalRef.componentInstance.selectedFeedbackSessions \u003d new Set(response.feedbackSessions);"},{"lineNumber":373,"author":{"gitId":"-"},"content":"        modalRef.result.then((result: CopyCourseModalResult) \u003d\u003e this.createCopiedCourse(result), () \u003d\u003e {"},{"lineNumber":374,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":375,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":376,"author":{"gitId":"-"},"content":"      error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":377,"author":{"gitId":"-"},"content":"        this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":378,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":379,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":380,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":381,"author":{"gitId":"-"},"content":""},{"lineNumber":382,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":383,"author":{"gitId":"-"},"content":"   * Creates a new course with the selected feedback sessions"},{"lineNumber":384,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":385,"author":{"gitId":"-"},"content":"  createCopiedCourse(result: CopyCourseModalResult): void {"},{"lineNumber":386,"author":{"gitId":"-"},"content":"    this.setIsCopyingCourse(true);"},{"lineNumber":387,"author":{"gitId":"-"},"content":"    this.modifiedSessions \u003d {};"},{"lineNumber":388,"author":{"gitId":"-"},"content":"    this.numberOfSessionsCopied \u003d 0;"},{"lineNumber":389,"author":{"gitId":"-"},"content":"    this.totalNumberOfSessionsToCopy \u003d result.totalNumberOfSessions;"},{"lineNumber":390,"author":{"gitId":"-"},"content":"    this.copyProgressPercentage \u003d 0;"},{"lineNumber":391,"author":{"gitId":"-"},"content":""},{"lineNumber":392,"author":{"gitId":"-"},"content":"    this.courseService.createCourse(result.newCourseInstitute, {"},{"lineNumber":393,"author":{"gitId":"-"},"content":"      courseName: result.newCourseName,"},{"lineNumber":394,"author":{"gitId":"-"},"content":"      timeZone: result.newTimeZone,"},{"lineNumber":395,"author":{"gitId":"-"},"content":"      courseId: result.newCourseId,"},{"lineNumber":396,"author":{"gitId":"-"},"content":"    })"},{"lineNumber":397,"author":{"gitId":"-"},"content":"    .subscribe({"},{"lineNumber":398,"author":{"gitId":"-"},"content":"      next: () \u003d\u003e {"},{"lineNumber":399,"author":{"gitId":"-"},"content":"        // Wrap in a Promise to wait for all feedback sessions to be copied"},{"lineNumber":400,"author":{"gitId":"-"},"content":"        const promise: Promise\u003cvoid\u003e \u003d new Promise\u003cvoid\u003e((resolve: () \u003d\u003e void) \u003d\u003e {"},{"lineNumber":401,"author":{"gitId":"-"},"content":"          if (result.selectedFeedbackSessionList.size \u003d\u003d\u003d 0) {"},{"lineNumber":402,"author":{"gitId":"-"},"content":"            this.progressBarService.updateProgress(100);"},{"lineNumber":403,"author":{"gitId":"-"},"content":"            resolve();"},{"lineNumber":404,"author":{"gitId":"-"},"content":""},{"lineNumber":405,"author":{"gitId":"-"},"content":"            return;"},{"lineNumber":406,"author":{"gitId":"-"},"content":"          }"},{"lineNumber":407,"author":{"gitId":"-"},"content":""},{"lineNumber":408,"author":{"gitId":"-"},"content":"          result.selectedFeedbackSessionList.forEach((session: FeedbackSession) \u003d\u003e {"},{"lineNumber":409,"author":{"gitId":"-"},"content":"            this.copyFeedbackSession(session, result.newCourseId, result.newTimeZone, result.oldCourseId)"},{"lineNumber":410,"author":{"gitId":"-"},"content":"                .pipe(finalize(() \u003d\u003e {"},{"lineNumber":411,"author":{"gitId":"-"},"content":"                  this.numberOfSessionsCopied +\u003d 1;"},{"lineNumber":412,"author":{"gitId":"-"},"content":"                  this.copyProgressPercentage \u003d"},{"lineNumber":413,"author":{"gitId":"-"},"content":"                      Math.round(100 * this.numberOfSessionsCopied / this.totalNumberOfSessionsToCopy);"},{"lineNumber":414,"author":{"gitId":"-"},"content":"                  this.progressBarService.updateProgress(this.copyProgressPercentage);"},{"lineNumber":415,"author":{"gitId":"-"},"content":""},{"lineNumber":416,"author":{"gitId":"-"},"content":"                  if (this.numberOfSessionsCopied \u003d\u003d\u003d this.totalNumberOfSessionsToCopy) {"},{"lineNumber":417,"author":{"gitId":"-"},"content":"                    resolve();"},{"lineNumber":418,"author":{"gitId":"-"},"content":"                  }"},{"lineNumber":419,"author":{"gitId":"-"},"content":"                }))"},{"lineNumber":420,"author":{"gitId":"-"},"content":"                .subscribe();"},{"lineNumber":421,"author":{"gitId":"-"},"content":"          });"},{"lineNumber":422,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":423,"author":{"gitId":"-"},"content":""},{"lineNumber":424,"author":{"gitId":"-"},"content":"        promise.then(() \u003d\u003e {"},{"lineNumber":425,"author":{"gitId":"-"},"content":"          this.courseService"},{"lineNumber":426,"author":{"gitId":"-"},"content":"              .getCourseAsInstructor(result.newCourseId)"},{"lineNumber":427,"author":{"gitId":"-"},"content":"              .subscribe((course: Course) \u003d\u003e {"},{"lineNumber":428,"author":{"gitId":"-"},"content":"                this.activeCourses.push(this.getCourseModelFromCourse(course));"},{"lineNumber":429,"author":{"gitId":"-"},"content":"                this.activeCoursesList.push(course);"},{"lineNumber":430,"author":{"gitId":"-"},"content":"                this.allCoursesList.push(course);"},{"lineNumber":431,"author":{"gitId":"-"},"content":"                this.activeCoursesDefaultSort();"},{"lineNumber":432,"author":{"gitId":"-"},"content":"                this.setIsCopyingCourse(false);"},{"lineNumber":433,"author":{"gitId":"-"},"content":"                if (Object.keys(this.modifiedSessions).length \u003e 0) {"},{"lineNumber":434,"author":{"gitId":"-"},"content":"                  this.simpleModalService.openInformationModal(\u0027Note On Modified Session Timings\u0027,"},{"lineNumber":435,"author":{"gitId":"-"},"content":"                      SimpleModalType.WARNING, this.modifiedTimestampsModal);"},{"lineNumber":436,"author":{"gitId":"-"},"content":"                } else {"},{"lineNumber":437,"author":{"gitId":"-"},"content":"                  this.statusMessageService.showSuccessToast(\u0027The course has been added.\u0027);"},{"lineNumber":438,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":439,"author":{"gitId":"-"},"content":"              });"},{"lineNumber":440,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":441,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":442,"author":{"gitId":"-"},"content":"      error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":443,"author":{"gitId":"-"},"content":"        this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":444,"author":{"gitId":"-"},"content":"        this.setIsCopyingCourse(false);"},{"lineNumber":445,"author":{"gitId":"-"},"content":"        this.hasLoadingFailed \u003d true;"},{"lineNumber":446,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":447,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":448,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":449,"author":{"gitId":"-"},"content":""},{"lineNumber":450,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":451,"author":{"gitId":"-"},"content":"   * Gets a CourseModel from courseID"},{"lineNumber":452,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":453,"author":{"gitId":"-"},"content":"  private getCourseModelFromCourse(course: Course): CourseModel {"},{"lineNumber":454,"author":{"gitId":"-"},"content":"    let canModifyCourse: boolean \u003d false;"},{"lineNumber":455,"author":{"gitId":"-"},"content":"    let canModifyStudent: boolean \u003d false;"},{"lineNumber":456,"author":{"gitId":"-"},"content":"    if (course.privileges) {"},{"lineNumber":457,"author":{"gitId":"-"},"content":"      canModifyCourse \u003d course.privileges.canModifyCourse;"},{"lineNumber":458,"author":{"gitId":"-"},"content":"      canModifyStudent \u003d course.privileges.canModifyStudent;"},{"lineNumber":459,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":460,"author":{"gitId":"-"},"content":"    const isLoadingCourseStats: boolean \u003d false;"},{"lineNumber":461,"author":{"gitId":"-"},"content":"    return { course, canModifyCourse, canModifyStudent, isLoadingCourseStats };"},{"lineNumber":462,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":463,"author":{"gitId":"-"},"content":""},{"lineNumber":464,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":465,"author":{"gitId":"-"},"content":"   * Copies a feedback session."},{"lineNumber":466,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":467,"author":{"gitId":"-"},"content":"  private copyFeedbackSession(fromFeedbackSession: FeedbackSession, newCourseId: string,"},{"lineNumber":468,"author":{"gitId":"-"},"content":"                              newTimeZone: string, oldCourseId: string): Observable\u003cFeedbackSession\u003e {"},{"lineNumber":469,"author":{"gitId":"-"},"content":"    return this.feedbackSessionsService.createFeedbackSession(newCourseId,"},{"lineNumber":470,"author":{"gitId":"-"},"content":"        this.toFbSessionCreationReqWithName(fromFeedbackSession, newTimeZone, oldCourseId));"},{"lineNumber":471,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":472,"author":{"gitId":"-"},"content":""},{"lineNumber":473,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":474,"author":{"gitId":"-"},"content":"   * Creates a FeedbackSessionCreateRequest with the provided name."},{"lineNumber":475,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":476,"author":{"gitId":"-"},"content":"  private toFbSessionCreationReqWithName(fromFeedbackSession: FeedbackSession, newTimeZone: string,"},{"lineNumber":477,"author":{"gitId":"-"},"content":"                                         oldCourseId: string): FeedbackSessionCreateRequest {"},{"lineNumber":478,"author":{"gitId":"-"},"content":"    // Local constants"},{"lineNumber":479,"author":{"gitId":"-"},"content":"    const twoHoursBeforeNow \u003d moment().tz(newTimeZone).subtract(2, \u0027hours\u0027)"},{"lineNumber":480,"author":{"gitId":"-"},"content":"        .valueOf();"},{"lineNumber":481,"author":{"gitId":"-"},"content":"    const twoDaysFromNowRoundedUp \u003d moment().tz(newTimeZone).add(2, \u0027days\u0027).startOf(\u0027hour\u0027)"},{"lineNumber":482,"author":{"gitId":"-"},"content":"        .valueOf();"},{"lineNumber":483,"author":{"gitId":"-"},"content":"    const sevenDaysFromNowRoundedUp \u003d moment().tz(newTimeZone).add(7, \u0027days\u0027).startOf(\u0027hour\u0027)"},{"lineNumber":484,"author":{"gitId":"-"},"content":"        .valueOf();"},{"lineNumber":485,"author":{"gitId":"-"},"content":"    const ninetyDaysFromNow \u003d moment().tz(newTimeZone).add(90, \u0027days\u0027)"},{"lineNumber":486,"author":{"gitId":"-"},"content":"        .valueOf();"},{"lineNumber":487,"author":{"gitId":"-"},"content":"    const ninetyDaysFromNowRoundedUp \u003d moment().tz(newTimeZone).add(90, \u0027days\u0027).startOf(\u0027hour\u0027)"},{"lineNumber":488,"author":{"gitId":"-"},"content":"        .valueOf();"},{"lineNumber":489,"author":{"gitId":"-"},"content":"    const oneHundredAndEightyDaysFromNow \u003d moment().tz(newTimeZone).add(180, \u0027days\u0027)"},{"lineNumber":490,"author":{"gitId":"-"},"content":"        .valueOf();"},{"lineNumber":491,"author":{"gitId":"-"},"content":"    const oneHundredAndEightyDaysFromNowRoundedUp \u003d moment().tz(newTimeZone).add(180, \u0027days\u0027)"},{"lineNumber":492,"author":{"gitId":"-"},"content":"        .startOf(\u0027hour\u0027)"},{"lineNumber":493,"author":{"gitId":"-"},"content":"        .valueOf();"},{"lineNumber":494,"author":{"gitId":"-"},"content":""},{"lineNumber":495,"author":{"gitId":"-"},"content":"    // Preprocess timestamps to adhere to feedback session timestamps constraints"},{"lineNumber":496,"author":{"gitId":"-"},"content":"    let isModified \u003d false;"},{"lineNumber":497,"author":{"gitId":"-"},"content":""},{"lineNumber":498,"author":{"gitId":"-"},"content":"    let copiedSubmissionStartTimestamp \u003d fromFeedbackSession.submissionStartTimestamp;"},{"lineNumber":499,"author":{"gitId":"-"},"content":"    if (copiedSubmissionStartTimestamp \u003c twoHoursBeforeNow) {"},{"lineNumber":500,"author":{"gitId":"-"},"content":"      copiedSubmissionStartTimestamp \u003d twoDaysFromNowRoundedUp;"},{"lineNumber":501,"author":{"gitId":"-"},"content":"      isModified \u003d true;"},{"lineNumber":502,"author":{"gitId":"-"},"content":"    } else if (copiedSubmissionStartTimestamp \u003e ninetyDaysFromNow) {"},{"lineNumber":503,"author":{"gitId":"-"},"content":"      copiedSubmissionStartTimestamp \u003d ninetyDaysFromNowRoundedUp;"},{"lineNumber":504,"author":{"gitId":"-"},"content":"      isModified \u003d true;"},{"lineNumber":505,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":506,"author":{"gitId":"-"},"content":""},{"lineNumber":507,"author":{"gitId":"-"},"content":"    let copiedSubmissionEndTimestamp \u003d fromFeedbackSession.submissionEndTimestamp;"},{"lineNumber":508,"author":{"gitId":"-"},"content":"    if (copiedSubmissionEndTimestamp \u003c copiedSubmissionStartTimestamp) {"},{"lineNumber":509,"author":{"gitId":"-"},"content":"      copiedSubmissionEndTimestamp \u003d sevenDaysFromNowRoundedUp;"},{"lineNumber":510,"author":{"gitId":"-"},"content":"      isModified \u003d true;"},{"lineNumber":511,"author":{"gitId":"-"},"content":"    } else if (copiedSubmissionEndTimestamp \u003e oneHundredAndEightyDaysFromNow) {"},{"lineNumber":512,"author":{"gitId":"-"},"content":"      copiedSubmissionEndTimestamp \u003d oneHundredAndEightyDaysFromNowRoundedUp;"},{"lineNumber":513,"author":{"gitId":"-"},"content":"      isModified \u003d true;"},{"lineNumber":514,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":515,"author":{"gitId":"-"},"content":""},{"lineNumber":516,"author":{"gitId":"-"},"content":"    let copiedSessionVisibleSetting \u003d fromFeedbackSession.sessionVisibleSetting;"},{"lineNumber":517,"author":{"gitId":"-"},"content":"    let copiedCustomSessionVisibleTimestamp \u003d fromFeedbackSession.customSessionVisibleTimestamp!;"},{"lineNumber":518,"author":{"gitId":"-"},"content":"    const thirtyDaysBeforeSubmissionStart \u003d moment(copiedSubmissionStartTimestamp)"},{"lineNumber":519,"author":{"gitId":"-"},"content":"        .tz(newTimeZone).subtract(30, \u0027days\u0027)"},{"lineNumber":520,"author":{"gitId":"-"},"content":"        .valueOf();"},{"lineNumber":521,"author":{"gitId":"-"},"content":"    const thirtyDaysBeforeSubmissionStartRoundedUp \u003d moment(copiedSubmissionStartTimestamp)"},{"lineNumber":522,"author":{"gitId":"-"},"content":"        .tz(newTimeZone).subtract(30, \u0027days\u0027).startOf(\u0027hour\u0027)"},{"lineNumber":523,"author":{"gitId":"-"},"content":"        .valueOf();"},{"lineNumber":524,"author":{"gitId":"-"},"content":"    if (copiedSessionVisibleSetting \u003d\u003d\u003d SessionVisibleSetting.CUSTOM) {"},{"lineNumber":525,"author":{"gitId":"-"},"content":"      if (copiedCustomSessionVisibleTimestamp \u003c thirtyDaysBeforeSubmissionStart) {"},{"lineNumber":526,"author":{"gitId":"-"},"content":"        copiedCustomSessionVisibleTimestamp \u003d thirtyDaysBeforeSubmissionStartRoundedUp;"},{"lineNumber":527,"author":{"gitId":"-"},"content":"        isModified \u003d true;"},{"lineNumber":528,"author":{"gitId":"-"},"content":"      } else if (copiedCustomSessionVisibleTimestamp \u003e copiedSubmissionStartTimestamp) {"},{"lineNumber":529,"author":{"gitId":"-"},"content":"        copiedSessionVisibleSetting \u003d SessionVisibleSetting.AT_OPEN;"},{"lineNumber":530,"author":{"gitId":"-"},"content":"        isModified \u003d true;"},{"lineNumber":531,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":532,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":533,"author":{"gitId":"-"},"content":""},{"lineNumber":534,"author":{"gitId":"-"},"content":"    let copiedResponseVisibleSetting \u003d fromFeedbackSession.responseVisibleSetting;"},{"lineNumber":535,"author":{"gitId":"-"},"content":"    const copiedCustomResponseVisibleTimestamp \u003d fromFeedbackSession.customResponseVisibleTimestamp!;"},{"lineNumber":536,"author":{"gitId":"-"},"content":"    if (copiedResponseVisibleSetting \u003d\u003d\u003d ResponseVisibleSetting.CUSTOM"},{"lineNumber":537,"author":{"gitId":"-"},"content":"        \u0026\u0026 ((copiedSessionVisibleSetting \u003d\u003d\u003d SessionVisibleSetting.AT_OPEN"},{"lineNumber":538,"author":{"gitId":"-"},"content":"            \u0026\u0026 copiedCustomResponseVisibleTimestamp \u003c copiedSubmissionStartTimestamp)"},{"lineNumber":539,"author":{"gitId":"-"},"content":"            || copiedCustomResponseVisibleTimestamp \u003c copiedCustomSessionVisibleTimestamp)) {"},{"lineNumber":540,"author":{"gitId":"-"},"content":"      copiedResponseVisibleSetting \u003d ResponseVisibleSetting.LATER;"},{"lineNumber":541,"author":{"gitId":"-"},"content":"      isModified \u003d true;"},{"lineNumber":542,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":543,"author":{"gitId":"-"},"content":""},{"lineNumber":544,"author":{"gitId":"-"},"content":"    if (isModified) {"},{"lineNumber":545,"author":{"gitId":"-"},"content":"      this.modifiedSessions[fromFeedbackSession.feedbackSessionName] \u003d {"},{"lineNumber":546,"author":{"gitId":"-"},"content":"        oldTimestamp: {"},{"lineNumber":547,"author":{"gitId":"-"},"content":"          submissionStartTimestamp: this.formatTimestamp(fromFeedbackSession.submissionStartTimestamp,"},{"lineNumber":548,"author":{"gitId":"-"},"content":"              fromFeedbackSession.timeZone),"},{"lineNumber":549,"author":{"gitId":"-"},"content":"          submissionEndTimestamp: this.formatTimestamp(fromFeedbackSession.submissionEndTimestamp,"},{"lineNumber":550,"author":{"gitId":"-"},"content":"              fromFeedbackSession.timeZone),"},{"lineNumber":551,"author":{"gitId":"-"},"content":"          sessionVisibleTimestamp: fromFeedbackSession.sessionVisibleSetting \u003d\u003d\u003d SessionVisibleSetting.AT_OPEN"},{"lineNumber":552,"author":{"gitId":"-"},"content":"              ? \u0027On submission opening time\u0027"},{"lineNumber":553,"author":{"gitId":"-"},"content":"              : this.formatTimestamp(fromFeedbackSession.customSessionVisibleTimestamp!, fromFeedbackSession.timeZone),"},{"lineNumber":554,"author":{"gitId":"-"},"content":"          responseVisibleTimestamp: \u0027\u0027,"},{"lineNumber":555,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":556,"author":{"gitId":"-"},"content":"        newTimestamp: {"},{"lineNumber":557,"author":{"gitId":"-"},"content":"          submissionStartTimestamp: this.formatTimestamp(copiedSubmissionStartTimestamp, fromFeedbackSession.timeZone),"},{"lineNumber":558,"author":{"gitId":"-"},"content":"          submissionEndTimestamp: this.formatTimestamp(copiedSubmissionEndTimestamp, fromFeedbackSession.timeZone),"},{"lineNumber":559,"author":{"gitId":"-"},"content":"          sessionVisibleTimestamp: copiedSessionVisibleSetting \u003d\u003d\u003d SessionVisibleSetting.AT_OPEN"},{"lineNumber":560,"author":{"gitId":"-"},"content":"              ? \u0027On submission opening time\u0027"},{"lineNumber":561,"author":{"gitId":"-"},"content":"              : this.formatTimestamp(copiedCustomSessionVisibleTimestamp!, fromFeedbackSession.timeZone),"},{"lineNumber":562,"author":{"gitId":"-"},"content":"          responseVisibleTimestamp: \u0027\u0027,"},{"lineNumber":563,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":564,"author":{"gitId":"-"},"content":"      };"},{"lineNumber":565,"author":{"gitId":"-"},"content":""},{"lineNumber":566,"author":{"gitId":"-"},"content":"      if (fromFeedbackSession.responseVisibleSetting \u003d\u003d\u003d ResponseVisibleSetting.AT_VISIBLE) {"},{"lineNumber":567,"author":{"gitId":"-"},"content":"        this.modifiedSessions[fromFeedbackSession.feedbackSessionName].oldTimestamp.responseVisibleTimestamp \u003d"},{"lineNumber":568,"author":{"gitId":"-"},"content":"            \u0027On session visible time\u0027;"},{"lineNumber":569,"author":{"gitId":"-"},"content":"      } else if (fromFeedbackSession.responseVisibleSetting \u003d\u003d\u003d ResponseVisibleSetting.LATER) {"},{"lineNumber":570,"author":{"gitId":"-"},"content":"        this.modifiedSessions[fromFeedbackSession.feedbackSessionName].oldTimestamp.responseVisibleTimestamp \u003d"},{"lineNumber":571,"author":{"gitId":"-"},"content":"            \u0027Not now (publish manually)\u0027;"},{"lineNumber":572,"author":{"gitId":"-"},"content":"      } else {"},{"lineNumber":573,"author":{"gitId":"-"},"content":"        this.modifiedSessions[fromFeedbackSession.feedbackSessionName].oldTimestamp.responseVisibleTimestamp \u003d"},{"lineNumber":574,"author":{"gitId":"-"},"content":"            this.formatTimestamp(fromFeedbackSession.customResponseVisibleTimestamp!, fromFeedbackSession.timeZone);"},{"lineNumber":575,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":576,"author":{"gitId":"-"},"content":""},{"lineNumber":577,"author":{"gitId":"-"},"content":"      if (copiedResponseVisibleSetting \u003d\u003d\u003d ResponseVisibleSetting.AT_VISIBLE) {"},{"lineNumber":578,"author":{"gitId":"-"},"content":"        this.modifiedSessions[fromFeedbackSession.feedbackSessionName].newTimestamp.responseVisibleTimestamp \u003d"},{"lineNumber":579,"author":{"gitId":"-"},"content":"            \u0027On session visible time\u0027;"},{"lineNumber":580,"author":{"gitId":"-"},"content":"      } else if (copiedResponseVisibleSetting \u003d\u003d\u003d ResponseVisibleSetting.LATER) {"},{"lineNumber":581,"author":{"gitId":"-"},"content":"        this.modifiedSessions[fromFeedbackSession.feedbackSessionName].newTimestamp.responseVisibleTimestamp \u003d"},{"lineNumber":582,"author":{"gitId":"-"},"content":"            \u0027Not now (publish manually)\u0027;"},{"lineNumber":583,"author":{"gitId":"-"},"content":"      } else {"},{"lineNumber":584,"author":{"gitId":"-"},"content":"        this.modifiedSessions[fromFeedbackSession.feedbackSessionName].newTimestamp.responseVisibleTimestamp \u003d"},{"lineNumber":585,"author":{"gitId":"-"},"content":"            this.formatTimestamp(copiedCustomResponseVisibleTimestamp!, fromFeedbackSession.timeZone);"},{"lineNumber":586,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":587,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":588,"author":{"gitId":"-"},"content":""},{"lineNumber":589,"author":{"gitId":"-"},"content":"    return {"},{"lineNumber":590,"author":{"gitId":"-"},"content":"      feedbackSessionName: fromFeedbackSession.feedbackSessionName,"},{"lineNumber":591,"author":{"gitId":"-"},"content":"      toCopyCourseId: oldCourseId,"},{"lineNumber":592,"author":{"gitId":"-"},"content":"      toCopySessionName: fromFeedbackSession.feedbackSessionName,"},{"lineNumber":593,"author":{"gitId":"-"},"content":"      instructions: fromFeedbackSession.instructions,"},{"lineNumber":594,"author":{"gitId":"-"},"content":""},{"lineNumber":595,"author":{"gitId":"-"},"content":"      submissionStartTimestamp: copiedSubmissionStartTimestamp,"},{"lineNumber":596,"author":{"gitId":"-"},"content":"      submissionEndTimestamp: copiedSubmissionEndTimestamp,"},{"lineNumber":597,"author":{"gitId":"-"},"content":"      gracePeriod: fromFeedbackSession.gracePeriod,"},{"lineNumber":598,"author":{"gitId":"-"},"content":""},{"lineNumber":599,"author":{"gitId":"-"},"content":"      sessionVisibleSetting: copiedSessionVisibleSetting,"},{"lineNumber":600,"author":{"gitId":"-"},"content":"      customSessionVisibleTimestamp: copiedCustomSessionVisibleTimestamp,"},{"lineNumber":601,"author":{"gitId":"-"},"content":""},{"lineNumber":602,"author":{"gitId":"-"},"content":"      responseVisibleSetting: copiedResponseVisibleSetting,"},{"lineNumber":603,"author":{"gitId":"-"},"content":"      customResponseVisibleTimestamp: fromFeedbackSession.customResponseVisibleTimestamp,"},{"lineNumber":604,"author":{"gitId":"-"},"content":""},{"lineNumber":605,"author":{"gitId":"-"},"content":"      isClosingEmailEnabled: fromFeedbackSession.isClosingEmailEnabled,"},{"lineNumber":606,"author":{"gitId":"-"},"content":"      isPublishedEmailEnabled: fromFeedbackSession.isPublishedEmailEnabled,"},{"lineNumber":607,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":608,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":609,"author":{"gitId":"-"},"content":""},{"lineNumber":610,"author":{"gitId":"-"},"content":"  private formatTimestamp(timestamp: number, timeZone: string): string {"},{"lineNumber":611,"author":{"gitId":"-"},"content":"    return this.timezoneService.formatToString(timestamp, timeZone, \u0027D MMM YYYY h:mm A\u0027);"},{"lineNumber":612,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":613,"author":{"gitId":"-"},"content":""},{"lineNumber":614,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":615,"author":{"gitId":"-"},"content":"   * Moves an active/archived course to Recycle Bin."},{"lineNumber":616,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":617,"author":{"gitId":"-"},"content":"  onDelete(courseId: string): Promise\u003cvoid\u003e {"},{"lineNumber":618,"author":{"gitId":"-"},"content":"    if (!courseId) {"},{"lineNumber":619,"author":{"gitId":"-"},"content":"      this.statusMessageService.showErrorToast(`Course ${courseId} is not found!`);"},{"lineNumber":620,"author":{"gitId":"-"},"content":"      return Promise.resolve();"},{"lineNumber":621,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":622,"author":{"gitId":"-"},"content":"    const modalRef: NgbModalRef \u003d this.simpleModalService.openConfirmationModal("},{"lineNumber":623,"author":{"gitId":"-"},"content":"        \u0027Warning: The course will be moved to the recycle bin.\u0027,"},{"lineNumber":624,"author":{"gitId":"-"},"content":"        SimpleModalType.WARNING, \u0027Are you sure you want to continue?\u0027);"},{"lineNumber":625,"author":{"gitId":"-"},"content":"    return modalRef.result.then(() \u003d\u003e {"},{"lineNumber":626,"author":{"gitId":"-"},"content":"      this.courseService.binCourse(courseId).subscribe({"},{"lineNumber":627,"author":{"gitId":"-"},"content":"        next: (course: Course) \u003d\u003e {"},{"lineNumber":628,"author":{"gitId":"-"},"content":"          this.moveCourseToRecycleBin(courseId, course.deletionTimestamp);"},{"lineNumber":629,"author":{"gitId":"-"},"content":"          this.statusMessageService.showSuccessToast("},{"lineNumber":630,"author":{"gitId":"-"},"content":"              `The course ${course.courseId} has been deleted. You can restore it from the Recycle Bin manually.`);"},{"lineNumber":631,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":632,"author":{"gitId":"-"},"content":"        error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":633,"author":{"gitId":"-"},"content":"          this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":634,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":635,"author":{"gitId":"-"},"content":"      });"},{"lineNumber":636,"author":{"gitId":"-"},"content":"    }).catch(() \u003d\u003e {});"},{"lineNumber":637,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":638,"author":{"gitId":"-"},"content":""},{"lineNumber":639,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":640,"author":{"gitId":"-"},"content":"   * Moves an active/archived course to Recycle Bin."},{"lineNumber":641,"author":{"gitId":"-"},"content":"   * This is to reduce the need to refresh the entire list of courses multiple times."},{"lineNumber":642,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":643,"author":{"gitId":"-"},"content":"  moveCourseToRecycleBin(courseId: string, deletionTimeStamp: number): void {"},{"lineNumber":644,"author":{"gitId":"-"},"content":"    const activeCourseToBeRemoved: CourseModel | undefined \u003d this.findCourse(this.activeCourses, courseId);"},{"lineNumber":645,"author":{"gitId":"-"},"content":"    this.activeCourses \u003d this.removeCourse(this.activeCourses, courseId);"},{"lineNumber":646,"author":{"gitId":"-"},"content":"    this.activeCoursesList \u003d this.activeCourses.map((courseModel: CourseModel) \u003d\u003e courseModel.course);"},{"lineNumber":647,"author":{"gitId":"-"},"content":"    if (activeCourseToBeRemoved) {"},{"lineNumber":648,"author":{"gitId":"-"},"content":"      activeCourseToBeRemoved.course.deletionTimestamp \u003d deletionTimeStamp;"},{"lineNumber":649,"author":{"gitId":"-"},"content":"      this.softDeletedCourses.push(activeCourseToBeRemoved);"},{"lineNumber":650,"author":{"gitId":"-"},"content":"      this.softDeletedCourses.sort(this.sortBy(this.deletedTableSortBy, this.deletedTableSortOrder));"},{"lineNumber":651,"author":{"gitId":"-"},"content":"    } else {"},{"lineNumber":652,"author":{"gitId":"-"},"content":"      const archivedCourseToBeRemoved: CourseModel | undefined \u003d this.findCourse(this.archivedCourses, courseId);"},{"lineNumber":653,"author":{"gitId":"-"},"content":"      this.archivedCourses \u003d this.removeCourse(this.archivedCourses, courseId);"},{"lineNumber":654,"author":{"gitId":"-"},"content":"      if (archivedCourseToBeRemoved !\u003d\u003d undefined) {"},{"lineNumber":655,"author":{"gitId":"-"},"content":"        archivedCourseToBeRemoved.course.deletionTimestamp \u003d deletionTimeStamp;"},{"lineNumber":656,"author":{"gitId":"-"},"content":"        this.softDeletedCourses.push(archivedCourseToBeRemoved);"},{"lineNumber":657,"author":{"gitId":"-"},"content":"        this.softDeletedCourses.sort(this.sortBy(this.deletedTableSortBy, this.deletedTableSortOrder));"},{"lineNumber":658,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":659,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":660,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":661,"author":{"gitId":"-"},"content":""},{"lineNumber":662,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":663,"author":{"gitId":"-"},"content":"   * Permanently deletes a soft-deleted course in Recycle Bin."},{"lineNumber":664,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":665,"author":{"gitId":"-"},"content":"  onDeletePermanently(courseId: string): Promise\u003cvoid\u003e {"},{"lineNumber":666,"author":{"gitId":"-"},"content":"    if (!courseId) {"},{"lineNumber":667,"author":{"gitId":"-"},"content":"      this.statusMessageService.showErrorToast(`Course ${courseId} is not found!`);"},{"lineNumber":668,"author":{"gitId":"-"},"content":"      return Promise.resolve();"},{"lineNumber":669,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":670,"author":{"gitId":"-"},"content":""},{"lineNumber":671,"author":{"gitId":"-"},"content":"    const institute: string \u003d this.allCoursesList.find("},{"lineNumber":672,"author":{"gitId":"-"},"content":"      (course: Course) \u003d\u003e course.courseId \u003d\u003d\u003d courseId)?.institute ?? \u0027\u0027;"},{"lineNumber":673,"author":{"gitId":"-"},"content":"    const numTotalCourses: number \u003d this.allCoursesList.length;"},{"lineNumber":674,"author":{"gitId":"-"},"content":"    const numCoursesFromSameInstitute: number \u003d this.allCoursesList.filter("},{"lineNumber":675,"author":{"gitId":"-"},"content":"      (course: Course) \u003d\u003e course.institute \u003d\u003d\u003d institute).length;"},{"lineNumber":676,"author":{"gitId":"-"},"content":""},{"lineNumber":677,"author":{"gitId":"-"},"content":"    const modalContent: string \u003d `\u003cstrong\u003eAre you sure you want to permanently delete ${courseId}?\u003c/strong\u003e\u003cbr\u003e"},{"lineNumber":678,"author":{"gitId":"-"},"content":"      This operation will delete all students and sessions in these courses."},{"lineNumber":679,"author":{"gitId":"-"},"content":"      All instructors of these courses will not be able to access them hereafter as well.`;"},{"lineNumber":680,"author":{"gitId":"-"},"content":""},{"lineNumber":681,"author":{"gitId":"-"},"content":"    const modalRef: NgbModalRef \u003d this.simpleModalService.openConfirmationModal("},{"lineNumber":682,"author":{"gitId":"-"},"content":"      `Delete course \u003cstrong\u003e${courseId}\u003c/strong\u003e permanently?`, SimpleModalType.DANGER, modalContent);"},{"lineNumber":683,"author":{"gitId":"-"},"content":"    modalRef.componentInstance.courseId \u003d courseId;"},{"lineNumber":684,"author":{"gitId":"-"},"content":""},{"lineNumber":685,"author":{"gitId":"-"},"content":"    return modalRef.result.then(() \u003d\u003e {"},{"lineNumber":686,"author":{"gitId":"-"},"content":"     if (numTotalCourses \u003d\u003d\u003d 1 || numCoursesFromSameInstitute \u003d\u003d\u003d 1) {"},{"lineNumber":687,"author":{"gitId":"-"},"content":"        const finalConfModalContent \u003d numTotalCourses \u003d\u003d\u003d 1"},{"lineNumber":688,"author":{"gitId":"-"},"content":"          ? `This is your last course on TEAMMATES for which you have instructor access. "},{"lineNumber":689,"author":{"gitId":"-"},"content":"            Deleting this course will \u003cmark\u003e\u003cstrong\u003eremove your instructor access\u003c/strong\u003e\u003c/mark\u003e to TEAMMATES.\u003cbr\u003e"},{"lineNumber":690,"author":{"gitId":"-"},"content":"            Are you sure you want to delete the course \u003cstrong\u003e${courseId}\u003c/strong\u003e?`"},{"lineNumber":691,"author":{"gitId":"-"},"content":"          : `If you delete all courses of institute \u003cstrong\u003e${institute}\u003c/strong\u003e, "},{"lineNumber":692,"author":{"gitId":"-"},"content":"            you will \u003cmark\u003e\u003cstrong\u003elose instructor access\u003c/strong\u003e\u003c/mark\u003e "},{"lineNumber":693,"author":{"gitId":"-"},"content":"            to TEAMMATES under the institution \u003cstrong\u003e${institute}\u003c/strong\u003e. "},{"lineNumber":694,"author":{"gitId":"-"},"content":"            To retain access, ensure you keep at least one course for each institution you are an instructor of.\u003cbr\u003e"},{"lineNumber":695,"author":{"gitId":"-"},"content":"            Are you sure you want to delete the course \u003cstrong\u003e${courseId}\u003c/strong\u003e in institution"},{"lineNumber":696,"author":{"gitId":"-"},"content":"            \u003cstrong\u003e${institute}\u003c/strong\u003e?`;"},{"lineNumber":697,"author":{"gitId":"-"},"content":"        return this.simpleModalService.openConfirmationModal("},{"lineNumber":698,"author":{"gitId":"-"},"content":"          \u0027This action will cause you to \u003cmark\u003e\u003cstrong\u003elose access\u003c/strong\u003e\u003c/mark\u003e to TEAMMATES!\u0027,"},{"lineNumber":699,"author":{"gitId":"-"},"content":"          SimpleModalType.DANGER, finalConfModalContent).result;"},{"lineNumber":700,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":701,"author":{"gitId":"-"},"content":"      return Promise.resolve();"},{"lineNumber":702,"author":{"gitId":"-"},"content":"    }).then(() \u003d\u003e {"},{"lineNumber":703,"author":{"gitId":"-"},"content":"      this.courseService.deleteCourse(courseId).subscribe({"},{"lineNumber":704,"author":{"gitId":"-"},"content":"        next: () \u003d\u003e {"},{"lineNumber":705,"author":{"gitId":"-"},"content":"          this.softDeletedCourses \u003d this.removeCourse(this.softDeletedCourses, courseId);"},{"lineNumber":706,"author":{"gitId":"-"},"content":"          this.allCoursesList \u003d this.allCoursesList.filter((course: Course) \u003d\u003e course.courseId !\u003d\u003d courseId);"},{"lineNumber":707,"author":{"gitId":"-"},"content":"          this.statusMessageService.showSuccessToast(`The course ${courseId} has been permanently deleted.`);"},{"lineNumber":708,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":709,"author":{"gitId":"-"},"content":"        error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":710,"author":{"gitId":"-"},"content":"          this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":711,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":712,"author":{"gitId":"-"},"content":"      });"},{"lineNumber":713,"author":{"gitId":"-"},"content":"    }).catch(() \u003d\u003e {});"},{"lineNumber":714,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":715,"author":{"gitId":"-"},"content":""},{"lineNumber":716,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":717,"author":{"gitId":"-"},"content":"   * Restores a soft-deleted course from Recycle Bin."},{"lineNumber":718,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":719,"author":{"gitId":"-"},"content":"  onRestore(courseId: string): void {"},{"lineNumber":720,"author":{"gitId":"-"},"content":"    if (!courseId) {"},{"lineNumber":721,"author":{"gitId":"-"},"content":"      this.statusMessageService.showErrorToast(`Course ${courseId} is not found!`);"},{"lineNumber":722,"author":{"gitId":"-"},"content":"      return;"},{"lineNumber":723,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":724,"author":{"gitId":"-"},"content":""},{"lineNumber":725,"author":{"gitId":"-"},"content":"    this.courseService.restoreCourse(courseId).subscribe({"},{"lineNumber":726,"author":{"gitId":"-"},"content":"      next: (resp: MessageOutput) \u003d\u003e {"},{"lineNumber":727,"author":{"gitId":"-"},"content":"        this.loadInstructorCourses();"},{"lineNumber":728,"author":{"gitId":"-"},"content":"        this.statusMessageService.showSuccessToast(resp.message);"},{"lineNumber":729,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":730,"author":{"gitId":"-"},"content":"      error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":731,"author":{"gitId":"-"},"content":"        this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":732,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":733,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":734,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":735,"author":{"gitId":"-"},"content":""},{"lineNumber":736,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":737,"author":{"gitId":"-"},"content":"   * Permanently deletes all soft-deleted courses in Recycle Bin."},{"lineNumber":738,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":739,"author":{"gitId":"-"},"content":"  onDeleteAll(): void {"},{"lineNumber":740,"author":{"gitId":"-"},"content":"    const modalContent: string \u003d"},{"lineNumber":741,"author":{"gitId":"-"},"content":"        `\u003cstrong\u003eAre you sure you want to permanently delete all the courses in the Recycle Bin?\u003c/strong\u003e\u003cbr\u003e"},{"lineNumber":742,"author":{"gitId":"-"},"content":"        This operation will delete all students and sessions in these courses."},{"lineNumber":743,"author":{"gitId":"-"},"content":"        All instructors of these courses will not be able to access them hereafter as well.`;"},{"lineNumber":744,"author":{"gitId":"-"},"content":""},{"lineNumber":745,"author":{"gitId":"-"},"content":"    const lastCourseRemaining: boolean \u003d this.allCoursesList.length \u003d\u003d\u003d this.softDeletedCourses.length;"},{"lineNumber":746,"author":{"gitId":"-"},"content":""},{"lineNumber":747,"author":{"gitId":"-"},"content":"    const modalRef: NgbModalRef \u003d this.simpleModalService.openConfirmationModal("},{"lineNumber":748,"author":{"gitId":"-"},"content":"      \u0027Deleting all courses permanently?\u0027, SimpleModalType.DANGER, modalContent);"},{"lineNumber":749,"author":{"gitId":"-"},"content":""},{"lineNumber":750,"author":{"gitId":"-"},"content":"    modalRef.result.then(() \u003d\u003e {"},{"lineNumber":751,"author":{"gitId":"-"},"content":"      if (lastCourseRemaining) {"},{"lineNumber":752,"author":{"gitId":"-"},"content":"        const modalContentCnf: string \u003d"},{"lineNumber":753,"author":{"gitId":"-"},"content":"          `These are your last courses registered on TEAMMATES for which you have instructor access. "},{"lineNumber":754,"author":{"gitId":"-"},"content":"          Deleting these courses will \u003cmark\u003e\u003cstrong\u003eremove your instructor access\u003c/strong\u003e\u003c/mark\u003e to TEAMMATES.\u003cbr\u003e"},{"lineNumber":755,"author":{"gitId":"-"},"content":"          Are you sure you want to permanently delete these courses?`;"},{"lineNumber":756,"author":{"gitId":"-"},"content":""},{"lineNumber":757,"author":{"gitId":"-"},"content":"        return this.simpleModalService.openConfirmationModal("},{"lineNumber":758,"author":{"gitId":"-"},"content":"          \u0027This action will cause you to \u003cmark\u003e\u003cstrong\u003elose access\u003c/strong\u003e\u003c/mark\u003e to TEAMMATES!\u0027,"},{"lineNumber":759,"author":{"gitId":"-"},"content":"          SimpleModalType.DANGER, modalContentCnf).result;"},{"lineNumber":760,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":761,"author":{"gitId":"-"},"content":"      return Promise.resolve();"},{"lineNumber":762,"author":{"gitId":"-"},"content":"    }).then(() \u003d\u003e {"},{"lineNumber":763,"author":{"gitId":"-"},"content":"      const deleteRequests: Observable\u003cMessageOutput\u003e[] \u003d [];"},{"lineNumber":764,"author":{"gitId":"-"},"content":"      this.softDeletedCourses.forEach((courseToDelete: CourseModel) \u003d\u003e {"},{"lineNumber":765,"author":{"gitId":"-"},"content":"        deleteRequests.push(this.courseService.deleteCourse(courseToDelete.course.courseId));"},{"lineNumber":766,"author":{"gitId":"-"},"content":"      });"},{"lineNumber":767,"author":{"gitId":"-"},"content":""},{"lineNumber":768,"author":{"gitId":"-"},"content":"      forkJoin(deleteRequests).subscribe({"},{"lineNumber":769,"author":{"gitId":"-"},"content":"        next: () \u003d\u003e {"},{"lineNumber":770,"author":{"gitId":"-"},"content":"          this.softDeletedCourses \u003d [];"},{"lineNumber":771,"author":{"gitId":"-"},"content":"          this.allCoursesList \u003d [];"},{"lineNumber":772,"author":{"gitId":"-"},"content":"          this.allCoursesList.push(...this.activeCourses.map((courseModel: CourseModel) \u003d\u003e courseModel.course));"},{"lineNumber":773,"author":{"gitId":"-"},"content":"          this.allCoursesList.push(...this.archivedCourses.map((courseModel: CourseModel) \u003d\u003e courseModel.course));"},{"lineNumber":774,"author":{"gitId":"-"},"content":"          this.statusMessageService.showSuccessToast(\u0027All courses have been permanently deleted.\u0027);"},{"lineNumber":775,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":776,"author":{"gitId":"-"},"content":"        error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":777,"author":{"gitId":"-"},"content":"          this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":778,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":779,"author":{"gitId":"-"},"content":"      });"},{"lineNumber":780,"author":{"gitId":"-"},"content":"    }).catch(() \u003d\u003e {});"},{"lineNumber":781,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":782,"author":{"gitId":"-"},"content":""},{"lineNumber":783,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":784,"author":{"gitId":"-"},"content":"   * Restores all soft-deleted courses from Recycle Bin."},{"lineNumber":785,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":786,"author":{"gitId":"-"},"content":"  onRestoreAll(): void {"},{"lineNumber":787,"author":{"gitId":"-"},"content":"    const restoreRequests: Observable\u003cMessageOutput\u003e[] \u003d [];"},{"lineNumber":788,"author":{"gitId":"-"},"content":"    this.softDeletedCourses.forEach((courseToRestore: CourseModel) \u003d\u003e {"},{"lineNumber":789,"author":{"gitId":"-"},"content":"      restoreRequests.push(this.courseService.restoreCourse(courseToRestore.course.courseId));"},{"lineNumber":790,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":791,"author":{"gitId":"-"},"content":""},{"lineNumber":792,"author":{"gitId":"-"},"content":"    forkJoin(restoreRequests).subscribe({"},{"lineNumber":793,"author":{"gitId":"-"},"content":"      next: () \u003d\u003e {"},{"lineNumber":794,"author":{"gitId":"-"},"content":"        this.loadInstructorCourses();"},{"lineNumber":795,"author":{"gitId":"-"},"content":"        this.statusMessageService.showSuccessToast(\u0027All courses have been restored.\u0027);"},{"lineNumber":796,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":797,"author":{"gitId":"-"},"content":"      error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":798,"author":{"gitId":"-"},"content":"        this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":799,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":800,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":801,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":802,"author":{"gitId":"-"},"content":""},{"lineNumber":803,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":804,"author":{"gitId":"-"},"content":"   * Sorts the active courses table"},{"lineNumber":805,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":806,"author":{"gitId":"-"},"content":"  sortCoursesEvent(by: SortBy): void {"},{"lineNumber":807,"author":{"gitId":"-"},"content":"    this.activeTableSortOrder \u003d this.activeTableSortBy \u003d\u003d\u003d by \u0026\u0026 this.activeTableSortOrder \u003d\u003d\u003d SortOrder.ASC"},{"lineNumber":808,"author":{"gitId":"-"},"content":"        ? SortOrder.DESC : SortOrder.ASC;"},{"lineNumber":809,"author":{"gitId":"-"},"content":"    this.activeTableSortBy \u003d by;"},{"lineNumber":810,"author":{"gitId":"-"},"content":"    this.activeCourses.sort(this.sortBy(by, this.activeTableSortOrder));"},{"lineNumber":811,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":812,"author":{"gitId":"-"},"content":""},{"lineNumber":813,"author":{"gitId":"weiquu"},"content":"  getAriaSortActive(by: SortBy): String {"},{"lineNumber":814,"author":{"gitId":"weiquu"},"content":"    if (by !\u003d\u003d this.activeTableSortBy) {"},{"lineNumber":815,"author":{"gitId":"weiquu"},"content":"      return \u0027none\u0027;"},{"lineNumber":816,"author":{"gitId":"weiquu"},"content":"    }"},{"lineNumber":817,"author":{"gitId":"weiquu"},"content":"    return this.activeTableSortOrder \u003d\u003d\u003d SortOrder.ASC ? \u0027ascending\u0027 : \u0027descending\u0027;"},{"lineNumber":818,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":819,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":820,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":821,"author":{"gitId":"-"},"content":"   * Active courses default sort on page load"},{"lineNumber":822,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":823,"author":{"gitId":"-"},"content":"  activeCoursesDefaultSort(): void {"},{"lineNumber":824,"author":{"gitId":"-"},"content":"    this.activeTableSortBy \u003d SortBy.COURSE_CREATION_DATE;"},{"lineNumber":825,"author":{"gitId":"-"},"content":"    this.activeTableSortOrder \u003d SortOrder.DESC;"},{"lineNumber":826,"author":{"gitId":"-"},"content":"    this.activeCourses.sort(this.sortBy(this.activeTableSortBy, this.activeTableSortOrder));"},{"lineNumber":827,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":828,"author":{"gitId":"-"},"content":""},{"lineNumber":829,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":830,"author":{"gitId":"-"},"content":"   * Sorts the archived courses table"},{"lineNumber":831,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":832,"author":{"gitId":"-"},"content":"  sortArchivedCoursesEvent(by: SortBy): void {"},{"lineNumber":833,"author":{"gitId":"-"},"content":"    this.archivedTableSortOrder \u003d this.archivedTableSortBy \u003d\u003d\u003d by \u0026\u0026 this.archivedTableSortOrder \u003d\u003d\u003d SortOrder.ASC"},{"lineNumber":834,"author":{"gitId":"-"},"content":"        ? SortOrder.DESC : SortOrder.ASC;"},{"lineNumber":835,"author":{"gitId":"-"},"content":"    this.archivedTableSortBy \u003d by;"},{"lineNumber":836,"author":{"gitId":"-"},"content":"    this.archivedCourses.sort(this.sortBy(by, this.archivedTableSortOrder));"},{"lineNumber":837,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":838,"author":{"gitId":"-"},"content":""},{"lineNumber":839,"author":{"gitId":"weiquu"},"content":"  getAriaSortArchived(by: SortBy): String {"},{"lineNumber":840,"author":{"gitId":"weiquu"},"content":"    if (by !\u003d\u003d this.archivedTableSortBy) {"},{"lineNumber":841,"author":{"gitId":"weiquu"},"content":"      return \u0027none\u0027;"},{"lineNumber":842,"author":{"gitId":"weiquu"},"content":"    }"},{"lineNumber":843,"author":{"gitId":"weiquu"},"content":"    return this.archivedTableSortOrder \u003d\u003d\u003d SortOrder.ASC ? \u0027ascending\u0027 : \u0027descending\u0027;"},{"lineNumber":844,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":845,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":846,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":847,"author":{"gitId":"-"},"content":"   * Archived courses default sort on page load"},{"lineNumber":848,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":849,"author":{"gitId":"-"},"content":"  archivedCoursesDefaultSort(): void {"},{"lineNumber":850,"author":{"gitId":"-"},"content":"    this.archivedTableSortBy \u003d SortBy.COURSE_CREATION_DATE;"},{"lineNumber":851,"author":{"gitId":"-"},"content":"    this.archivedTableSortOrder \u003d SortOrder.DESC;"},{"lineNumber":852,"author":{"gitId":"-"},"content":"    this.archivedCourses.sort(this.sortBy(this.archivedTableSortBy, this.archivedTableSortOrder));"},{"lineNumber":853,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":854,"author":{"gitId":"-"},"content":""},{"lineNumber":855,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":856,"author":{"gitId":"-"},"content":"   * Sorts the soft-deleted courses table"},{"lineNumber":857,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":858,"author":{"gitId":"-"},"content":"  sortDeletedCoursesEvent(by: SortBy): void {"},{"lineNumber":859,"author":{"gitId":"-"},"content":"    this.deletedTableSortOrder \u003d this.deletedTableSortBy \u003d\u003d\u003d by \u0026\u0026 this.deletedTableSortOrder \u003d\u003d\u003d SortOrder.ASC"},{"lineNumber":860,"author":{"gitId":"-"},"content":"        ? SortOrder.DESC : SortOrder.ASC;"},{"lineNumber":861,"author":{"gitId":"-"},"content":"    this.deletedTableSortBy \u003d by;"},{"lineNumber":862,"author":{"gitId":"-"},"content":"    this.softDeletedCourses.sort(this.sortBy(by, this.deletedTableSortOrder));"},{"lineNumber":863,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":864,"author":{"gitId":"-"},"content":""},{"lineNumber":865,"author":{"gitId":"weiquu"},"content":"  getAriaSortDeleted(by: SortBy): String {"},{"lineNumber":866,"author":{"gitId":"weiquu"},"content":"    if (by !\u003d\u003d this.deletedTableSortBy) {"},{"lineNumber":867,"author":{"gitId":"weiquu"},"content":"      return \u0027none\u0027;"},{"lineNumber":868,"author":{"gitId":"weiquu"},"content":"    }"},{"lineNumber":869,"author":{"gitId":"weiquu"},"content":"    return this.deletedTableSortOrder \u003d\u003d\u003d SortOrder.ASC ? \u0027ascending\u0027 : \u0027descending\u0027;"},{"lineNumber":870,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":871,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":872,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":873,"author":{"gitId":"-"},"content":"   * Deleted courses default sort on page load"},{"lineNumber":874,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":875,"author":{"gitId":"-"},"content":"  deletedCoursesDefaultSort(): void {"},{"lineNumber":876,"author":{"gitId":"-"},"content":"    this.deletedTableSortBy \u003d SortBy.COURSE_DELETION_DATE;"},{"lineNumber":877,"author":{"gitId":"-"},"content":"    this.deletedTableSortOrder \u003d SortOrder.DESC;"},{"lineNumber":878,"author":{"gitId":"-"},"content":"    this.softDeletedCourses.sort(this.sortBy(this.deletedTableSortBy, this.deletedTableSortOrder));"},{"lineNumber":879,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":880,"author":{"gitId":"-"},"content":""},{"lineNumber":881,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":882,"author":{"gitId":"-"},"content":"   * Returns a function to determine the order of sort"},{"lineNumber":883,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":884,"author":{"gitId":"-"},"content":"  sortBy(by: SortBy, order: SortOrder):"},{"lineNumber":885,"author":{"gitId":"-"},"content":"      ((a: CourseModel, b: CourseModel) \u003d\u003e number) {"},{"lineNumber":886,"author":{"gitId":"-"},"content":"    return (a: CourseModel, b: CourseModel): number \u003d\u003e {"},{"lineNumber":887,"author":{"gitId":"-"},"content":"      let strA: string;"},{"lineNumber":888,"author":{"gitId":"-"},"content":"      let strB: string;"},{"lineNumber":889,"author":{"gitId":"-"},"content":"      switch (by) {"},{"lineNumber":890,"author":{"gitId":"-"},"content":"        case SortBy.COURSE_ID:"},{"lineNumber":891,"author":{"gitId":"-"},"content":"          strA \u003d a.course.courseId ? a.course.courseId : \u0027\u0027;"},{"lineNumber":892,"author":{"gitId":"-"},"content":"          strB \u003d b.course.courseId ? b.course.courseId : \u0027\u0027;"},{"lineNumber":893,"author":{"gitId":"-"},"content":"          break;"},{"lineNumber":894,"author":{"gitId":"-"},"content":"        case SortBy.COURSE_NAME:"},{"lineNumber":895,"author":{"gitId":"-"},"content":"          strA \u003d a.course.courseName;"},{"lineNumber":896,"author":{"gitId":"-"},"content":"          strB \u003d b.course.courseName;"},{"lineNumber":897,"author":{"gitId":"-"},"content":"          break;"},{"lineNumber":898,"author":{"gitId":"-"},"content":"        case SortBy.COURSE_CREATION_DATE:"},{"lineNumber":899,"author":{"gitId":"-"},"content":"          strA \u003d a.course.creationTimestamp.toString();"},{"lineNumber":900,"author":{"gitId":"-"},"content":"          strB \u003d b.course.creationTimestamp.toString();"},{"lineNumber":901,"author":{"gitId":"-"},"content":"          break;"},{"lineNumber":902,"author":{"gitId":"-"},"content":"        default:"},{"lineNumber":903,"author":{"gitId":"-"},"content":"          strA \u003d \u0027\u0027;"},{"lineNumber":904,"author":{"gitId":"-"},"content":"          strB \u003d \u0027\u0027;"},{"lineNumber":905,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":906,"author":{"gitId":"-"},"content":"      return this.tableComparatorService.compare(by, order, strA, strB);"},{"lineNumber":907,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":908,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":909,"author":{"gitId":"-"},"content":"}"},{"lineNumber":910,"author":{"gitId":"-"},"content":""},{"lineNumber":911,"author":{"gitId":"-"},"content":"interface SessionTimestampData {"},{"lineNumber":912,"author":{"gitId":"-"},"content":"  submissionStartTimestamp: string;"},{"lineNumber":913,"author":{"gitId":"-"},"content":"  submissionEndTimestamp: string;"},{"lineNumber":914,"author":{"gitId":"-"},"content":"  sessionVisibleTimestamp: string;"},{"lineNumber":915,"author":{"gitId":"-"},"content":"  responseVisibleTimestamp: string;"},{"lineNumber":916,"author":{"gitId":"-"},"content":"}"},{"lineNumber":917,"author":{"gitId":"-"},"content":""},{"lineNumber":918,"author":{"gitId":"-"},"content":"interface TweakedTimestampData {"},{"lineNumber":919,"author":{"gitId":"-"},"content":"  oldTimestamp: SessionTimestampData;"},{"lineNumber":920,"author":{"gitId":"-"},"content":"  newTimestamp: SessionTimestampData;"},{"lineNumber":921,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"weiquu":21,"-":900}},{"path":"src/web/app/pages-instructor/instructor-home-page/instructor-home-page.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003ch1\u003eHome\u003c/h1\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"card bg-light\" style\u003d\"margin-bottom: 20px;\" *ngIf\u003d\"isNewUser\"\u003e"},{"lineNumber":4,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"card-body\"\u003e"},{"lineNumber":5,"author":{"gitId":"-"},"content":"    New to TEAMMATES? You may wish to have a look at our \u003ca href\u003d\"/web/instructor/getting-started\" target\u003d\"_blank\""},{"lineNumber":6,"author":{"gitId":"-"},"content":"      rel\u003d\"noopener noreferrer\"\u003eGetting Started Guide\u003c/a\u003e."},{"lineNumber":7,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":8,"author":{"gitId":"-"},"content":"\u003c/div\u003e"},{"lineNumber":9,"author":{"gitId":"-"},"content":""},{"lineNumber":10,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"row mb-3\" *tmIsLoading\u003d\"!hasCoursesLoaded\"\u003e"},{"lineNumber":11,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"col-4 mt-auto\"\u003e"},{"lineNumber":12,"author":{"gitId":"-"},"content":"    \u003ca tmRouterLink\u003d\"/web/instructor/courses\" class\u003d\"btn btn-success\" [queryParams]\u003d\"{isAddNewCourse: true}\"\u003e"},{"lineNumber":13,"author":{"gitId":"-"},"content":"      \u003ci class\u003d\"fas fa-plus\"\u003e\u003c/i\u003e Add New Course"},{"lineNumber":14,"author":{"gitId":"-"},"content":"    \u003c/a\u003e"},{"lineNumber":15,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":16,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"col-8\" *ngIf\u003d\"courseTabModels.length \u003e 0\"\u003e"},{"lineNumber":17,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"float-end\"\u003e"},{"lineNumber":18,"author":{"gitId":"-"},"content":"      \u003cstrong class\u003d\"d-inline\"\u003e Sort By: \u003c/strong\u003e"},{"lineNumber":19,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"btn-group\" data-toggle\u003d\"buttons\"\u003e"},{"lineNumber":20,"author":{"gitId":"-"},"content":"        \u003cbutton id\u003d\"sort-course-id\" class\u003d\"btn btn-light\" [disabled]\u003d\"isSelectedForSorting(SortBy.COURSE_ID)\""},{"lineNumber":21,"author":{"gitId":"-"},"content":"          (click)\u003d\"sortCoursesBy(SortBy.COURSE_ID)\"\u003eCourse ID\u003c/button\u003e"},{"lineNumber":22,"author":{"gitId":"-"},"content":"        \u003cbutton id\u003d\"sort-course-name\" class\u003d\"btn btn-light\" [disabled]\u003d\"isSelectedForSorting(SortBy.COURSE_NAME)\""},{"lineNumber":23,"author":{"gitId":"-"},"content":"          (click)\u003d\"sortCoursesBy(SortBy.COURSE_NAME)\"\u003eCourse Name\u003c/button\u003e"},{"lineNumber":24,"author":{"gitId":"-"},"content":"        \u003cbutton id\u003d\"sort-course-date\" class\u003d\"btn btn-light\""},{"lineNumber":25,"author":{"gitId":"-"},"content":"          [disabled]\u003d\"isSelectedForSorting(SortBy.COURSE_CREATION_DATE)\""},{"lineNumber":26,"author":{"gitId":"-"},"content":"          (click)\u003d\"sortCoursesBy(SortBy.COURSE_CREATION_DATE)\"\u003eCreation Date\u003c/button\u003e"},{"lineNumber":27,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":28,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":29,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":30,"author":{"gitId":"-"},"content":"\u003c/div\u003e"},{"lineNumber":31,"author":{"gitId":"-"},"content":""},{"lineNumber":32,"author":{"gitId":"-"},"content":"\u003cdiv *ngIf\u003d\"isCopyingCourse\" class\u003d\"mb-4\"\u003e"},{"lineNumber":33,"author":{"gitId":"-"},"content":"  \u003cp\u003eCopy Progress\u003c/p\u003e"},{"lineNumber":34,"author":{"gitId":"-"},"content":"  \u003ctm-progress-bar\u003e\u003c/tm-progress-bar\u003e"},{"lineNumber":35,"author":{"gitId":"-"},"content":"\u003c/div\u003e"},{"lineNumber":36,"author":{"gitId":"-"},"content":""},{"lineNumber":37,"author":{"gitId":"-"},"content":"\u003ctm-loading-retry [shouldShowRetry]\u003d\"hasCoursesLoadingFailed\" [message]\u003d\"\u0027Something went wrong\u0027\""},{"lineNumber":38,"author":{"gitId":"-"},"content":"  (retryEvent)\u003d\"loadCourses()\"\u003e"},{"lineNumber":39,"author":{"gitId":"-"},"content":"  \u003cdiv *tmIsLoading\u003d\"!hasCoursesLoaded || isCopyLoading\"\u003e"},{"lineNumber":40,"author":{"gitId":"-"},"content":"    \u003cdiv *ngIf\u003d\"courseTabModels.length \u003e 0\"\u003e"},{"lineNumber":41,"author":{"gitId":"-"},"content":"      \u003cdiv id\u003d\"course-tab-{{ idx }}\" class\u003d\"card\" *ngFor\u003d\"let courseTabModel of courseTabModels; let idx \u003d index\"\u003e"},{"lineNumber":42,"author":{"gitId":"-"},"content":"        \u003cdiv class\u003d\"card-header bg-primary text-white cursor-pointer\""},{"lineNumber":43,"author":{"gitId":"-"},"content":"          (click)\u003d\"courseTabModel.isTabExpanded \u003d handleClick($event, courseTabModel); this.loadFeedbackSessions(idx);\"\u003e"},{"lineNumber":44,"author":{"gitId":"-"},"content":"          \u003cb class\u003d\"course-details text-break\"\u003e[{{ courseTabModel.course.courseId }}]: {{"},{"lineNumber":45,"author":{"gitId":"-"},"content":"            courseTabModel.course.courseName }}\u003c/b\u003e"},{"lineNumber":46,"author":{"gitId":"-"},"content":"          \u003cdiv class\u003d\"card-header-btn-toolbar flex-lg-shrink-0\" *ngIf\u003d\"courseTabModel.isAjaxSuccess\"\u003e"},{"lineNumber":47,"author":{"gitId":"-"},"content":"            \u003cspan ngbDropdown container\u003d\"body\"\u003e"},{"lineNumber":48,"author":{"gitId":"-"},"content":"              \u003cbutton type\u003d\"button\" class\u003d\"btn btn-primary btn-sm\" ngbDropdownToggle\u003e Students \u003c/button\u003e"},{"lineNumber":49,"author":{"gitId":"-"},"content":"              \u003cdiv ngbDropdownMenu (click)\u003d\"$event.stopPropagation()\"\u003e"},{"lineNumber":50,"author":{"gitId":"-"},"content":"                \u003cng-container *ngIf\u003d\"courseTabModel.instructorPrivilege.canModifyStudent\"\u003e"},{"lineNumber":51,"author":{"gitId":"-"},"content":"                  \u003ca class\u003d\"btn btn-info btn-sm dropdown-item\" tmRouterLink\u003d\"/web/instructor/courses/enroll\""},{"lineNumber":52,"author":{"gitId":"-"},"content":"                    [queryParams]\u003d\"{courseid: courseTabModel.course.courseId}\"\u003e Enroll"},{"lineNumber":53,"author":{"gitId":"-"},"content":"                  \u003c/a\u003e"},{"lineNumber":54,"author":{"gitId":"-"},"content":"                \u003c/ng-container\u003e"},{"lineNumber":55,"author":{"gitId":"-"},"content":"                \u003ca class\u003d\"btn btn-info btn-sm dropdown-item\" tmRouterLink\u003d\"/web/instructor/courses/details\""},{"lineNumber":56,"author":{"gitId":"-"},"content":"                  [queryParams]\u003d\"{courseid: courseTabModel.course.courseId}\"\u003e View / Edit"},{"lineNumber":57,"author":{"gitId":"-"},"content":"                \u003c/a\u003e"},{"lineNumber":58,"author":{"gitId":"-"},"content":"              \u003c/div\u003e"},{"lineNumber":59,"author":{"gitId":"-"},"content":"            \u003c/span\u003e"},{"lineNumber":60,"author":{"gitId":"-"},"content":"            \u003cspan ngbDropdown container\u003d\"body\"\u003e"},{"lineNumber":61,"author":{"gitId":"-"},"content":"              \u003cbutton type\u003d\"button\" class\u003d\"btn btn-primary btn-sm\" ngbDropdownToggle\u003e Instructors \u003c/button\u003e"},{"lineNumber":62,"author":{"gitId":"-"},"content":"              \u003cdiv ngbDropdownMenu (click)\u003d\"$event.stopPropagation()\"\u003e"},{"lineNumber":63,"author":{"gitId":"-"},"content":"                \u003ca class\u003d\"btn btn-light btn-sm dropdown-item\" tmRouterLink\u003d\"/web/instructor/courses/edit\""},{"lineNumber":64,"author":{"gitId":"-"},"content":"                  [queryParams]\u003d\"{courseid: courseTabModel.course.courseId}\"\u003e View / Edit"},{"lineNumber":65,"author":{"gitId":"-"},"content":"                \u003c/a\u003e"},{"lineNumber":66,"author":{"gitId":"-"},"content":"              \u003c/div\u003e"},{"lineNumber":67,"author":{"gitId":"-"},"content":"            \u003c/span\u003e"},{"lineNumber":68,"author":{"gitId":"-"},"content":"            \u003cspan ngbDropdown container\u003d\"body\"\u003e"},{"lineNumber":69,"author":{"gitId":"-"},"content":"              \u003cbutton type\u003d\"button\" class\u003d\"btn btn-primary btn-sm\" ngbDropdownToggle\u003e Sessions \u003c/button\u003e"},{"lineNumber":70,"author":{"gitId":"-"},"content":"              \u003cdiv ngbDropdownMenu (click)\u003d\"$event.stopPropagation()\"\u003e"},{"lineNumber":71,"author":{"gitId":"-"},"content":"                \u003ca class\u003d\"btn btn-light btn-sm dropdown-item\" tmRouterLink\u003d\"/web/instructor/sessions\""},{"lineNumber":72,"author":{"gitId":"-"},"content":"                  [queryParams]\u003d\"{courseid: courseTabModel.course.courseId}\"\u003e Add"},{"lineNumber":73,"author":{"gitId":"-"},"content":"                \u003c/a\u003e"},{"lineNumber":74,"author":{"gitId":"-"},"content":"              \u003c/div\u003e"},{"lineNumber":75,"author":{"gitId":"-"},"content":"            \u003c/span\u003e"},{"lineNumber":76,"author":{"gitId":"-"},"content":"            \u003cspan ngbDropdown container\u003d\"body\"\u003e"},{"lineNumber":77,"author":{"gitId":"-"},"content":"              \u003cbutton type\u003d\"button\" class\u003d\"btn-course btn btn-primary btn-sm\" ngbDropdownToggle\u003e Course \u003c/button\u003e"},{"lineNumber":78,"author":{"gitId":"-"},"content":"              \u003cdiv ngbDropdownMenu (click)\u003d\"$event.stopPropagation()\"\u003e"},{"lineNumber":79,"author":{"gitId":"-"},"content":"                \u003ca class\u003d\"btn-archive-course btn btn-light btn-sm dropdown-item\""},{"lineNumber":80,"author":{"gitId":"-"},"content":"                  ngbTooltip\u003d\"Archive the course so that it will not be shown in the home page any more (you can still access it from the \u0027Courses\u0027 tab)\""},{"lineNumber":81,"author":{"gitId":"-"},"content":"                  (click)\u003d\"archiveCourse(courseTabModel.course.courseId)\""},{"lineNumber":82,"author":{"gitId":"-"},"content":"                  tmRouterLink\u003d\"./\"\u003e Archive"},{"lineNumber":83,"author":{"gitId":"-"},"content":"                \u003c/a\u003e"},{"lineNumber":84,"author":{"gitId":"-"},"content":"                \u003ca class\u003d\"btn btn-light btn-sm dropdown-item\" tmRouterLink\u003d\u0027/web/instructor/courses/edit\u0027"},{"lineNumber":85,"author":{"gitId":"-"},"content":"                  [queryParams]\u003d\"{courseid: courseTabModel.course.courseId}\"\u003e View / Edit"},{"lineNumber":86,"author":{"gitId":"-"},"content":"                \u003c/a\u003e"},{"lineNumber":87,"author":{"gitId":"-"},"content":"                \u003cng-container *ngIf\u003d\"courseTabModel.instructorPrivilege.canModifyCourse\"\u003e"},{"lineNumber":88,"author":{"gitId":"-"},"content":"                  \u003ca class\u003d\"btn-copy-course btn btn-light btn-sm dropdown-item\""},{"lineNumber":89,"author":{"gitId":"-"},"content":"                    ngbTooltip\u003d\"Copy the course and its corresponding sessions\""},{"lineNumber":90,"author":{"gitId":"-"},"content":"                    (click)\u003d\"!isCopyingCourse \u0026\u0026 onCopy(courseTabModel.course.courseId, courseTabModel.course.courseName, courseTabModel.course.timeZone)\""},{"lineNumber":91,"author":{"gitId":"-"},"content":"                    tmRouterLink\u003d\"./\"\u003e Copy"},{"lineNumber":92,"author":{"gitId":"-"},"content":"                  \u003c/a\u003e"},{"lineNumber":93,"author":{"gitId":"-"},"content":"                \u003c/ng-container\u003e"},{"lineNumber":94,"author":{"gitId":"-"},"content":"                \u003cng-container *ngIf\u003d\"courseTabModel.instructorPrivilege.canModifyCourse\"\u003e"},{"lineNumber":95,"author":{"gitId":"-"},"content":"                  \u003ca class\u003d\"btn-delete-course btn btn-light btn-sm dropdown-item\""},{"lineNumber":96,"author":{"gitId":"-"},"content":"                    ngbTooltip\u003d\"Delete the course and its corresponding students and sessions\""},{"lineNumber":97,"author":{"gitId":"-"},"content":"                    (click)\u003d\"deleteCourse(courseTabModel.course.courseId)\""},{"lineNumber":98,"author":{"gitId":"-"},"content":"                    tmRouterLink\u003d\"./\"\u003e Delete"},{"lineNumber":99,"author":{"gitId":"-"},"content":"                  \u003c/a\u003e"},{"lineNumber":100,"author":{"gitId":"-"},"content":"                \u003c/ng-container\u003e"},{"lineNumber":101,"author":{"gitId":"-"},"content":"              \u003c/div\u003e"},{"lineNumber":102,"author":{"gitId":"-"},"content":"            \u003c/span\u003e"},{"lineNumber":103,"author":{"gitId":"-"},"content":"            \u003ctm-panel-chevron [isExpanded]\u003d\"courseTabModel.isTabExpanded\"\u003e\u003c/tm-panel-chevron\u003e"},{"lineNumber":104,"author":{"gitId":"-"},"content":"          \u003c/div\u003e"},{"lineNumber":105,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":106,"author":{"gitId":"weiquu"},"content":"        \u003cdiv class\u003d\"card-body padding-0 table-responsive\" *ngIf\u003d\"courseTabModel.isTabExpanded\" @collapseAnim\u003e"},{"lineNumber":107,"author":{"gitId":"-"},"content":"          \u003ctm-loading-retry [shouldShowRetry]\u003d\"courseTabModel.hasLoadingFailed\""},{"lineNumber":108,"author":{"gitId":"-"},"content":"            [message]\u003d\"\u0027Error loading feedback sessions\u0027\" (retryEvent)\u003d\"loadFeedbackSessions(idx)\"\u003e"},{"lineNumber":109,"author":{"gitId":"-"},"content":"            \u003ctm-sessions-table *tmIsLoading\u003d\"!courseTabModel.hasPopulated\""},{"lineNumber":110,"author":{"gitId":"-"},"content":"              [sessionsTableRowModels]\u003d\"courseTabModel.sessionsTableRowModels\""},{"lineNumber":111,"author":{"gitId":"-"},"content":"              id \u003d \"sessions-table-{{ idx }}\""},{"lineNumber":112,"author":{"gitId":"-"},"content":"              [initialSortBy]\u003d\"initialSortBy\""},{"lineNumber":113,"author":{"gitId":"-"},"content":"              [sortOrder]\u003d\"sortOrder\""},{"lineNumber":114,"author":{"gitId":"-"},"content":"              [courseCandidates]\u003d\"courseCandidates\""},{"lineNumber":115,"author":{"gitId":"-"},"content":"              [headerColorScheme]\u003d\"SortableTableHeaderColorScheme.WHITE\""},{"lineNumber":116,"author":{"gitId":"-"},"content":"              [columnsToShow]\u003d\"["},{"lineNumber":117,"author":{"gitId":"-"},"content":"                SessionsTableColumn.START_DATE,"},{"lineNumber":118,"author":{"gitId":"-"},"content":"                SessionsTableColumn.END_DATE"},{"lineNumber":119,"author":{"gitId":"-"},"content":"              ]\""},{"lineNumber":120,"author":{"gitId":"-"},"content":"              [isSendReminderLoading]\u003d\"isSendReminderLoading\""},{"lineNumber":121,"author":{"gitId":"-"},"content":"              (sortSessionsTableRowModelsEvent)\u003d\"sortSessionsTableRowModelsEvent(idx, $event)\""},{"lineNumber":122,"author":{"gitId":"-"},"content":"              (loadResponseRateEvent)\u003d\"loadResponseRateEventHandler(idx, $event)\""},{"lineNumber":123,"author":{"gitId":"-"},"content":"              (moveSessionToRecycleBinEvent)\u003d\"moveSessionToRecycleBinEventHandler(idx, $event)\""},{"lineNumber":124,"author":{"gitId":"-"},"content":"              (copySessionEvent)\u003d\"copySessionEventHandler(idx, $event)\""},{"lineNumber":125,"author":{"gitId":"-"},"content":"              (submitSessionAsInstructorEvent)\u003d\"submitSessionAsInstructorEventHandler(idx, $event)\""},{"lineNumber":126,"author":{"gitId":"-"},"content":"              (publishSessionEvent)\u003d\"publishSessionEventHandler(idx, $event)\""},{"lineNumber":127,"author":{"gitId":"-"},"content":"              (unpublishSessionEvent)\u003d\"unpublishSessionEventHandler(idx, $event)\""},{"lineNumber":128,"author":{"gitId":"-"},"content":"              (downloadSessionResultsEvent)\u003d\"downloadSessionResultEventHandler(idx, $event)\""},{"lineNumber":129,"author":{"gitId":"-"},"content":"              (resendResultsLinkToStudentsEvent)\u003d\"resendResultsLinkToRespondentsEventHandler(courseTabModel.sessionsTableRowModels[$event])\""},{"lineNumber":130,"author":{"gitId":"-"},"content":"              (sendRemindersToAllNonSubmittersEvent)\u003d\"sendRemindersToRespondentsEventHandler(courseTabModel.sessionsTableRowModels[$event], true)\""},{"lineNumber":131,"author":{"gitId":"-"},"content":"              (sendRemindersToSelectedNonSubmittersEvent)\u003d\"sendRemindersToRespondentsEventHandler(courseTabModel.sessionsTableRowModels[$event], false)\"\u003e\u003c/tm-sessions-table\u003e"},{"lineNumber":132,"author":{"gitId":"-"},"content":"          \u003c/tm-loading-retry\u003e"},{"lineNumber":133,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":134,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":135,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":136,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":137,"author":{"gitId":"-"},"content":"\u003c/tm-loading-retry\u003e"},{"lineNumber":138,"author":{"gitId":"-"},"content":""},{"lineNumber":139,"author":{"gitId":"-"},"content":"\u003cng-template #modifiedTimestampsModal\u003e"},{"lineNumber":140,"author":{"gitId":"-"},"content":"  \u003ctm-modified-timestamps-modal [coursesOfModifiedSession]\u003d\"this.coursesOfModifiedSession\""},{"lineNumber":141,"author":{"gitId":"-"},"content":"    [modifiedSessions]\u003d\"this.modifiedSession\"\u003e"},{"lineNumber":142,"author":{"gitId":"-"},"content":"  \u003c/tm-modified-timestamps-modal\u003e"},{"lineNumber":143,"author":{"gitId":"-"},"content":"\u003c/ng-template\u003e"}],"authorContributionMap":{"weiquu":1,"-":142}},{"path":"src/web/app/pages-instructor/instructor-session-edit-page/copy-questions-from-other-sessions-modal/copy-questions-from-other-sessions-modal.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"modal-header\"\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  \u003ch4 class\u003d\"modal-title\"\u003eCopy Questions\u003c/h4\u003e"},{"lineNumber":3,"author":{"gitId":"-"},"content":"  \u003cbutton type\u003d\"button\" class\u003d\"btn-close\" aria-label\u003d\"Close\" (click)\u003d\"activeModal.dismiss()\"\u003e\u003c/button\u003e"},{"lineNumber":4,"author":{"gitId":"-"},"content":"\u003c/div\u003e"},{"lineNumber":5,"author":{"gitId":"-"},"content":"\u003cdiv id\u003d\"copy-question-modal\" class\u003d\"modal-body\"\u003e"},{"lineNumber":6,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"col-12 mb-3 text-md-end\"\u003e"},{"lineNumber":7,"author":{"gitId":"-"},"content":"    \u003cstrong class\u003d\"d-inline\"\u003e Sort Sessions By: \u003c/strong\u003e"},{"lineNumber":8,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"btn-group\" data-toggle\u003d\"buttons\"\u003e"},{"lineNumber":9,"author":{"gitId":"-"},"content":"      \u003cbutton id\u003d\"sort-course-id\" class\u003d\"btn btn-light\" [disabled]\u003d\"isSelectedForSorting(SortBy.COURSE_ID)\" (click)\u003d\"sortFeedbackSessionTabs(SortBy.COURSE_ID)\"\u003eCourse ID\u003c/button\u003e"},{"lineNumber":10,"author":{"gitId":"-"},"content":"      \u003cbutton id\u003d\"sort-session-name\" class\u003d\"btn btn-light\" [disabled]\u003d\"isSelectedForSorting(SortBy.SESSION_NAME)\" (click)\u003d\"sortFeedbackSessionTabs(SortBy.SESSION_NAME)\"\u003eSession Name\u003c/button\u003e"},{"lineNumber":11,"author":{"gitId":"-"},"content":"      \u003cbutton id\u003d\"sort-creation-date\" class\u003d\"btn btn-light\" [disabled]\u003d\"isSelectedForSorting(SortBy.SESSION_CREATION_DATE)\" (click)\u003d\"sortFeedbackSessionTabs(SortBy.SESSION_CREATION_DATE)\"\u003eCreation Date\u003c/button\u003e"},{"lineNumber":12,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":13,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":14,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"feedback-session-tabs\" *ngFor\u003d\"let feedbackSessionTabModel of feedbackSessionTabModels\"\u003e"},{"lineNumber":15,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"card\"\u003e"},{"lineNumber":16,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"card-header cursor-pointer bg-primary text-white\" (click)\u003d\"toggleCard(feedbackSessionTabModel)\"\u003e"},{"lineNumber":17,"author":{"gitId":"-"},"content":"        \u003cstrong class\u003d\"text-break\"\u003e[{{feedbackSessionTabModel.courseId}}] Session: {{feedbackSessionTabModel.feedbackSessionName}}\u003c/strong\u003e"},{"lineNumber":18,"author":{"gitId":"-"},"content":"        \u003cdiv class\u003d\"card-header-btn-toolbar\"\u003e"},{"lineNumber":19,"author":{"gitId":"-"},"content":"          \u003ctm-panel-chevron [isExpanded]\u003d\"feedbackSessionTabModel.isTabExpanded\"\u003e\u003c/tm-panel-chevron\u003e"},{"lineNumber":20,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":21,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":22,"author":{"gitId":"-"},"content":""},{"lineNumber":23,"author":{"gitId":"-"},"content":"      \u003cdiv *ngIf\u003d\"feedbackSessionTabModel.isTabExpanded\"\u003e"},{"lineNumber":24,"author":{"gitId":"-"},"content":"        \u003ctm-loading-retry [shouldShowRetry]\u003d\"feedbackSessionTabModel.hasLoadingFailed\" [message]\u003d\"\u0027Failed to load questions\u0027\" (retryEvent)\u003d\"loadQuestions(feedbackSessionTabModel)\"\u003e"},{"lineNumber":25,"author":{"gitId":"-"},"content":"          \u003cdiv *tmIsLoading\u003d\"!feedbackSessionTabModel.hasQuestionsLoaded\"\u003e"},{"lineNumber":26,"author":{"gitId":"-"},"content":"            \u003cdiv *ngIf\u003d\"!feedbackSessionTabModel.hasLoadingFailed\" class\u003d\"card-body\"\u003e"},{"lineNumber":27,"author":{"gitId":"-"},"content":"              \u003cng-container *ngIf\u003d\"feedbackSessionTabModel.hasQuestionsLoaded \u0026\u0026 feedbackSessionTabModel.questionsTableRowModels.length \u003e 0, else noQuestionsTemplate\"\u003e"},{"lineNumber":28,"author":{"gitId":"-"},"content":"                \u003ctable id\u003d\"copy-question-table\" class\u003d\"table table-bordered table-responsive-lg\"\u003e"},{"lineNumber":29,"author":{"gitId":"-"},"content":"                  \u003cthead class\u003d\"bg-primary text-white\"\u003e"},{"lineNumber":30,"author":{"gitId":"-"},"content":"                    \u003ctr\u003e"},{"lineNumber":31,"author":{"gitId":"-"},"content":"                      \u003cth\u003e#\u003c/th\u003e"},{"lineNumber":32,"author":{"gitId":"weiquu"},"content":"                      \u003cth class\u003d\"sortable-header\" (click)\u003d\"sortQuestionsToCopyForFeedbackSession(feedbackSessionTabModel, SortBy.QUESTION_TYPE)\" [attr.aria-sort]\u003d\"getAriaSort(feedbackSessionTabModel, SortBy.QUESTION_TYPE)\"\u003e"},{"lineNumber":33,"author":{"gitId":"weiquu"},"content":"                        \u003cbutton\u003e"},{"lineNumber":34,"author":{"gitId":"-"},"content":"                          Question Type"},{"lineNumber":35,"author":{"gitId":"weiquu"},"content":"                          \u003cspan class\u003d\"fa-stack\" aria-hidden\u003d\"true\"\u003e"},{"lineNumber":36,"author":{"gitId":"-"},"content":"                            \u003ci class\u003d\"fas fa-sort\"\u003e\u003c/i\u003e"},{"lineNumber":37,"author":{"gitId":"-"},"content":"                            \u003ci *ngIf\u003d\"isSortQuestionsBy(feedbackSessionTabModel, SortBy.QUESTION_TYPE, SortOrder.DESC)\" class\u003d\"fas fa-sort-down\"\u003e\u003c/i\u003e"},{"lineNumber":38,"author":{"gitId":"-"},"content":"                            \u003ci *ngIf\u003d\"isSortQuestionsBy(feedbackSessionTabModel, SortBy.QUESTION_TYPE, SortOrder.ASC)\" class\u003d\"fas fa-sort-up\"\u003e\u003c/i\u003e"},{"lineNumber":39,"author":{"gitId":"-"},"content":"                          \u003c/span\u003e"},{"lineNumber":40,"author":{"gitId":"weiquu"},"content":"                        \u003c/button\u003e"},{"lineNumber":41,"author":{"gitId":"-"},"content":"                      \u003c/th\u003e"},{"lineNumber":42,"author":{"gitId":"weiquu"},"content":"                      \u003cth class\u003d\"sortable-header\" (click)\u003d\"sortQuestionsToCopyForFeedbackSession(feedbackSessionTabModel, SortBy.QUESTION_TEXT)\" [attr.aria-sort]\u003d\"getAriaSort(feedbackSessionTabModel, SortBy.QUESTION_TEXT)\"\u003e"},{"lineNumber":43,"author":{"gitId":"weiquu"},"content":"                        \u003cbutton\u003e"},{"lineNumber":44,"author":{"gitId":"-"},"content":"                          Question Text"},{"lineNumber":45,"author":{"gitId":"weiquu"},"content":"                          \u003cspan class\u003d\"fa-stack\" aria-hidden\u003d\"true\"\u003e"},{"lineNumber":46,"author":{"gitId":"-"},"content":"                            \u003ci class\u003d\"fas fa-sort\"\u003e\u003c/i\u003e"},{"lineNumber":47,"author":{"gitId":"-"},"content":"                            \u003ci *ngIf\u003d\"isSortQuestionsBy(feedbackSessionTabModel, SortBy.QUESTION_TEXT, SortOrder.DESC)\" class\u003d\"fas fa-sort-down\"\u003e\u003c/i\u003e"},{"lineNumber":48,"author":{"gitId":"-"},"content":"                            \u003ci *ngIf\u003d\"isSortQuestionsBy(feedbackSessionTabModel, SortBy.QUESTION_TEXT, SortOrder.ASC)\" class\u003d\"fas fa-sort-up\"\u003e\u003c/i\u003e"},{"lineNumber":49,"author":{"gitId":"-"},"content":"                          \u003c/span\u003e"},{"lineNumber":50,"author":{"gitId":"weiquu"},"content":"                        \u003c/button\u003e"},{"lineNumber":51,"author":{"gitId":"-"},"content":"                      \u003c/th\u003e"},{"lineNumber":52,"author":{"gitId":"-"},"content":"                    \u003c/tr\u003e"},{"lineNumber":53,"author":{"gitId":"-"},"content":"                  \u003c/thead\u003e"},{"lineNumber":54,"author":{"gitId":"-"},"content":"                  \u003ctbody\u003e"},{"lineNumber":55,"author":{"gitId":"-"},"content":"                    \u003ctr *ngFor\u003d\"let questionCandidate of feedbackSessionTabModel.questionsTableRowModels\"\u003e"},{"lineNumber":56,"author":{"gitId":"-"},"content":"                      \u003ctd\u003e\u003cinput type\u003d\"checkbox\" [(ngModel)]\u003d\"questionCandidate.isSelected\"\u003e\u003c/td\u003e"},{"lineNumber":57,"author":{"gitId":"-"},"content":"                      \u003ctd\u003e{{ questionCandidate.question.questionType | questionTypeName }}\u003c/td\u003e"},{"lineNumber":58,"author":{"gitId":"-"},"content":"                      \u003ctd\u003e{{ questionCandidate.question.questionBrief }}\u003c/td\u003e"},{"lineNumber":59,"author":{"gitId":"-"},"content":"                    \u003c/tr\u003e"},{"lineNumber":60,"author":{"gitId":"-"},"content":"                  \u003c/tbody\u003e"},{"lineNumber":61,"author":{"gitId":"-"},"content":"                \u003c/table\u003e"},{"lineNumber":62,"author":{"gitId":"-"},"content":"              \u003c/ng-container\u003e"},{"lineNumber":63,"author":{"gitId":"-"},"content":"              \u003cbutton (click)\u003d\"loadQuestions(feedbackSessionTabModel)\" class\u003d\"btn btn-primary float-end mt-2 mb-3\"\u003e"},{"lineNumber":64,"author":{"gitId":"-"},"content":"                \u003ci class\u003d\"fas fa-redo\" aria-hidden\u003d\"true\"\u003e\u003c/i\u003e"},{"lineNumber":65,"author":{"gitId":"-"},"content":"                \u0026nbsp;Reload"},{"lineNumber":66,"author":{"gitId":"-"},"content":"              \u003c/button\u003e"},{"lineNumber":67,"author":{"gitId":"-"},"content":"            \u003c/div\u003e"},{"lineNumber":68,"author":{"gitId":"-"},"content":"          \u003c/div\u003e"},{"lineNumber":69,"author":{"gitId":"-"},"content":"        \u003c/tm-loading-retry\u003e"},{"lineNumber":70,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":71,"author":{"gitId":"-"},"content":""},{"lineNumber":72,"author":{"gitId":"-"},"content":"      \u003cng-template #noQuestionsTemplate\u003e"},{"lineNumber":73,"author":{"gitId":"-"},"content":"        \u003ch5\u003eThere are no questions in this feedback session available for copying.\u003c/h5\u003e"},{"lineNumber":74,"author":{"gitId":"-"},"content":"      \u003c/ng-template\u003e"},{"lineNumber":75,"author":{"gitId":"-"},"content":""},{"lineNumber":76,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":77,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":78,"author":{"gitId":"-"},"content":"\u003c/div\u003e"},{"lineNumber":79,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"modal-footer\"\u003e"},{"lineNumber":80,"author":{"gitId":"-"},"content":"  \u003cbutton id\u003d\"btn-confirm-copy-question\" type\u003d\"button\" class\u003d\"btn btn-primary\" (click)\u003d\"activeModal.close(getSelectedQuestions())\""},{"lineNumber":81,"author":{"gitId":"-"},"content":"          [disabled]\u003d\"!hasAnyQuestionsToCopySelected\"\u003eCopy\u003c/button\u003e"},{"lineNumber":82,"author":{"gitId":"-"},"content":"  \u003cbutton type\u003d\"button\" class\u003d\"btn btn-light\" (click)\u003d\"activeModal.dismiss()\"\u003eCancel\u003c/button\u003e"},{"lineNumber":83,"author":{"gitId":"-"},"content":"\u003c/div\u003e"}],"authorContributionMap":{"weiquu":8,"-":75}},{"path":"src/web/app/pages-instructor/instructor-session-edit-page/copy-questions-from-other-sessions-modal/copy-questions-from-other-sessions-modal.component.scss","fileType":"scss","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":".sortable-header {"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  cursor: pointer;"},{"lineNumber":3,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":4,"author":{"gitId":"weiquu"},"content":"  i {"},{"lineNumber":5,"author":{"gitId":"weiquu"},"content":"    margin-left: .3em;"},{"lineNumber":6,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":7,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":8,"author":{"gitId":"weiquu"},"content":"  .fa-stack {"},{"lineNumber":9,"author":{"gitId":"weiquu"},"content":"    width: 20%;"},{"lineNumber":10,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":11,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":12,"author":{"gitId":"weiquu"},"content":"  button {"},{"lineNumber":13,"author":{"gitId":"weiquu"},"content":"    background: none;"},{"lineNumber":14,"author":{"gitId":"weiquu"},"content":"    color: inherit;"},{"lineNumber":15,"author":{"gitId":"weiquu"},"content":"    border: none;"},{"lineNumber":16,"author":{"gitId":"weiquu"},"content":"    padding: 0;"},{"lineNumber":17,"author":{"gitId":"weiquu"},"content":"    text-align: left;"},{"lineNumber":18,"author":{"gitId":"weiquu"},"content":"    width: 100%;"},{"lineNumber":19,"author":{"gitId":"weiquu"},"content":"    font: inherit;"},{"lineNumber":20,"author":{"gitId":"weiquu"},"content":"    cursor: inherit;"},{"lineNumber":21,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":22,"author":{"gitId":"-"},"content":"}"},{"lineNumber":23,"author":{"gitId":"-"},"content":""},{"lineNumber":24,"author":{"gitId":"-"},"content":"#copy-question-modal {"},{"lineNumber":25,"author":{"gitId":"-"},"content":"  table-layout: auto;"},{"lineNumber":26,"author":{"gitId":"-"},"content":"  margin-bottom: 10px;"},{"lineNumber":27,"author":{"gitId":"jasonqiu212"},"content":"  min-width: 70vw;"},{"lineNumber":28,"author":{"gitId":"-"},"content":"}"},{"lineNumber":29,"author":{"gitId":"-"},"content":""},{"lineNumber":30,"author":{"gitId":"-"},"content":".modal-footer {"},{"lineNumber":31,"author":{"gitId":"-"},"content":"  justify-content: right;"},{"lineNumber":32,"author":{"gitId":"-"},"content":"  background-color: white;"},{"lineNumber":33,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"jasonqiu212":1,"weiquu":19,"-":13}},{"path":"src/web/app/pages-instructor/instructor-session-edit-page/copy-questions-from-other-sessions-modal/copy-questions-from-other-sessions-modal.component.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { Component } from \u0027@angular/core\u0027;"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import { NgbActiveModal } from \u0027@ng-bootstrap/ng-bootstrap\u0027;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"import { FeedbackQuestionsService } from \u0027../../../../services/feedback-questions.service\u0027;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import { StatusMessageService } from \u0027../../../../services/status-message.service\u0027;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import { TableComparatorService } from \u0027../../../../services/table-comparator.service\u0027;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import { FeedbackQuestion, FeedbackQuestions } from \u0027../../../../types/api-output\u0027;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import { Intent } from \u0027../../../../types/api-request\u0027;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import { SortBy, SortOrder } from \u0027../../../../types/sort-properties\u0027;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import { ErrorMessageOutput } from \u0027../../../error-message-output\u0027;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import { FeedbackSessionTabModel, QuestionToCopyCandidate } from \u0027./copy-questions-from-other-sessions-modal-model\u0027;"},{"lineNumber":11,"author":{"gitId":"-"},"content":""},{"lineNumber":12,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":13,"author":{"gitId":"-"},"content":" * Modal to select questions to copy from other sessions."},{"lineNumber":14,"author":{"gitId":"-"},"content":" */"},{"lineNumber":15,"author":{"gitId":"-"},"content":"@Component({"},{"lineNumber":16,"author":{"gitId":"-"},"content":"  selector: \u0027tm-copy-questions-from-other-sessions-modal\u0027,"},{"lineNumber":17,"author":{"gitId":"-"},"content":"  templateUrl: \u0027./copy-questions-from-other-sessions-modal.component.html\u0027,"},{"lineNumber":18,"author":{"gitId":"-"},"content":"  styleUrls: [\u0027./copy-questions-from-other-sessions-modal.component.scss\u0027],"},{"lineNumber":19,"author":{"gitId":"-"},"content":"})"},{"lineNumber":20,"author":{"gitId":"-"},"content":"export class CopyQuestionsFromOtherSessionsModalComponent {"},{"lineNumber":21,"author":{"gitId":"-"},"content":""},{"lineNumber":22,"author":{"gitId":"-"},"content":"  // enum"},{"lineNumber":23,"author":{"gitId":"-"},"content":"  SortBy: typeof SortBy \u003d SortBy;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"  SortOrder: typeof SortOrder \u003d SortOrder;"},{"lineNumber":25,"author":{"gitId":"-"},"content":""},{"lineNumber":26,"author":{"gitId":"-"},"content":"  // data"},{"lineNumber":27,"author":{"gitId":"-"},"content":"  feedbackSessionTabModels: FeedbackSessionTabModel[] \u003d [];"},{"lineNumber":28,"author":{"gitId":"-"},"content":"  feedbackSessionTabModelsSortBy: SortBy \u003d SortBy.COURSE_ID;"},{"lineNumber":29,"author":{"gitId":"-"},"content":""},{"lineNumber":30,"author":{"gitId":"-"},"content":"  constructor(public activeModal: NgbActiveModal,"},{"lineNumber":31,"author":{"gitId":"-"},"content":"              public statusMessageService: StatusMessageService,"},{"lineNumber":32,"author":{"gitId":"-"},"content":"              public feedbackQuestionsService: FeedbackQuestionsService,"},{"lineNumber":33,"author":{"gitId":"-"},"content":"              private tableComparatorService: TableComparatorService) { }"},{"lineNumber":34,"author":{"gitId":"-"},"content":""},{"lineNumber":35,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":36,"author":{"gitId":"-"},"content":"   * Toggles specific card and loads questions if needed."},{"lineNumber":37,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":38,"author":{"gitId":"-"},"content":"  toggleCard(feedbackSessionTabModel: FeedbackSessionTabModel): void {"},{"lineNumber":39,"author":{"gitId":"-"},"content":"    feedbackSessionTabModel.isTabExpanded \u003d !feedbackSessionTabModel.isTabExpanded;"},{"lineNumber":40,"author":{"gitId":"-"},"content":"    if (!feedbackSessionTabModel.hasQuestionsLoaded) {"},{"lineNumber":41,"author":{"gitId":"-"},"content":"      this.loadQuestions(feedbackSessionTabModel);"},{"lineNumber":42,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":43,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":44,"author":{"gitId":"-"},"content":""},{"lineNumber":45,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":46,"author":{"gitId":"-"},"content":"   * Loads the questions in the feedback session."},{"lineNumber":47,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":48,"author":{"gitId":"-"},"content":"  loadQuestions(model: FeedbackSessionTabModel): void {"},{"lineNumber":49,"author":{"gitId":"-"},"content":"    model.hasQuestionsLoaded \u003d false;"},{"lineNumber":50,"author":{"gitId":"-"},"content":"    model.hasLoadingFailed \u003d false;"},{"lineNumber":51,"author":{"gitId":"-"},"content":"    model.questionsTableRowModels \u003d [];"},{"lineNumber":52,"author":{"gitId":"-"},"content":"    this.feedbackQuestionsService.getFeedbackQuestions({"},{"lineNumber":53,"author":{"gitId":"-"},"content":"      courseId: model.courseId,"},{"lineNumber":54,"author":{"gitId":"-"},"content":"      feedbackSessionName: model.feedbackSessionName,"},{"lineNumber":55,"author":{"gitId":"-"},"content":"      intent: Intent.FULL_DETAIL,"},{"lineNumber":56,"author":{"gitId":"-"},"content":"    })"},{"lineNumber":57,"author":{"gitId":"-"},"content":"    .subscribe({"},{"lineNumber":58,"author":{"gitId":"-"},"content":"      next: (response: FeedbackQuestions) \u003d\u003e {"},{"lineNumber":59,"author":{"gitId":"-"},"content":"        response.questions.forEach((q: FeedbackQuestion) \u003d\u003e {"},{"lineNumber":60,"author":{"gitId":"-"},"content":"          const questionToCopy: QuestionToCopyCandidate \u003d {"},{"lineNumber":61,"author":{"gitId":"-"},"content":"            question: q,"},{"lineNumber":62,"author":{"gitId":"-"},"content":"            isSelected: false,"},{"lineNumber":63,"author":{"gitId":"-"},"content":"          };"},{"lineNumber":64,"author":{"gitId":"-"},"content":"          model.questionsTableRowModels.push(questionToCopy);"},{"lineNumber":65,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":66,"author":{"gitId":"-"},"content":"        model.hasQuestionsLoaded \u003d true;"},{"lineNumber":67,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":68,"author":{"gitId":"-"},"content":"      error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":69,"author":{"gitId":"-"},"content":"        model.hasLoadingFailed \u003d true;"},{"lineNumber":70,"author":{"gitId":"-"},"content":"        this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":71,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":72,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":73,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":74,"author":{"gitId":"-"},"content":""},{"lineNumber":75,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":76,"author":{"gitId":"-"},"content":"   * Gets the selected questions to copy."},{"lineNumber":77,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":78,"author":{"gitId":"-"},"content":"  getSelectedQuestions(): FeedbackQuestion[] {"},{"lineNumber":79,"author":{"gitId":"-"},"content":"    const selectedQuestions: FeedbackQuestion[] \u003d [];"},{"lineNumber":80,"author":{"gitId":"-"},"content":"    this.feedbackSessionTabModels.forEach((model: FeedbackSessionTabModel) \u003d\u003e {"},{"lineNumber":81,"author":{"gitId":"-"},"content":"      if (model.questionsTableRowModels.length \u003e 0) {"},{"lineNumber":82,"author":{"gitId":"-"},"content":"        selectedQuestions.push("},{"lineNumber":83,"author":{"gitId":"-"},"content":"          ...model.questionsTableRowModels"},{"lineNumber":84,"author":{"gitId":"-"},"content":"            .filter((c: QuestionToCopyCandidate) \u003d\u003e c.isSelected)"},{"lineNumber":85,"author":{"gitId":"-"},"content":"            .map((c: QuestionToCopyCandidate) \u003d\u003e c.question),"},{"lineNumber":86,"author":{"gitId":"-"},"content":"        );"},{"lineNumber":87,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":88,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":89,"author":{"gitId":"-"},"content":"    return selectedQuestions;"},{"lineNumber":90,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":91,"author":{"gitId":"-"},"content":""},{"lineNumber":92,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":93,"author":{"gitId":"-"},"content":"   * Checks the option selected to sort feedback sessions."},{"lineNumber":94,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":95,"author":{"gitId":"-"},"content":"  isSelectedForSorting(by: SortBy): boolean {"},{"lineNumber":96,"author":{"gitId":"-"},"content":"    return this.feedbackSessionTabModelsSortBy \u003d\u003d\u003d by;"},{"lineNumber":97,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":98,"author":{"gitId":"-"},"content":""},{"lineNumber":99,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":100,"author":{"gitId":"-"},"content":"   * Check whether the feedback session questions are sorted by the given type and in the given order."},{"lineNumber":101,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":102,"author":{"gitId":"-"},"content":"  isSortQuestionsBy(model: FeedbackSessionTabModel, by: SortBy, order: SortOrder): boolean {"},{"lineNumber":103,"author":{"gitId":"-"},"content":"    return model.questionsTableRowModelsSortBy \u003d\u003d\u003d by \u0026\u0026 model.questionsTableRowModelsSortOrder \u003d\u003d\u003d order;"},{"lineNumber":104,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":105,"author":{"gitId":"-"},"content":""},{"lineNumber":106,"author":{"gitId":"weiquu"},"content":"  getAriaSort(model: FeedbackSessionTabModel, by: SortBy): String {"},{"lineNumber":107,"author":{"gitId":"weiquu"},"content":"    if (model.questionsTableRowModelsSortBy !\u003d\u003d by) {"},{"lineNumber":108,"author":{"gitId":"weiquu"},"content":"      return \u0027none\u0027;"},{"lineNumber":109,"author":{"gitId":"weiquu"},"content":"    }"},{"lineNumber":110,"author":{"gitId":"weiquu"},"content":"    return model.questionsTableRowModelsSortOrder \u003d\u003d\u003d SortOrder.ASC ? \u0027ascending\u0027 : \u0027descending\u0027;"},{"lineNumber":111,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":112,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":113,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":114,"author":{"gitId":"-"},"content":"   * Sorts the list of feedback sessions."},{"lineNumber":115,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":116,"author":{"gitId":"-"},"content":"  sortFeedbackSessionTabs(by: SortBy): void {"},{"lineNumber":117,"author":{"gitId":"-"},"content":"    this.feedbackSessionTabModelsSortBy \u003d by;"},{"lineNumber":118,"author":{"gitId":"-"},"content":"    this.feedbackSessionTabModels.sort(this.sortFeedbackSessionsBy(by));"},{"lineNumber":119,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":120,"author":{"gitId":"-"},"content":""},{"lineNumber":121,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":122,"author":{"gitId":"-"},"content":"   * Sorts the list of questions for a feedback session."},{"lineNumber":123,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":124,"author":{"gitId":"-"},"content":"  sortQuestionsToCopyForFeedbackSession(model: FeedbackSessionTabModel, by: SortBy): void {"},{"lineNumber":125,"author":{"gitId":"-"},"content":"    model.questionsTableRowModelsSortBy \u003d by;"},{"lineNumber":126,"author":{"gitId":"-"},"content":"    // reverse the sort order"},{"lineNumber":127,"author":{"gitId":"-"},"content":"    model.questionsTableRowModelsSortOrder \u003d"},{"lineNumber":128,"author":{"gitId":"-"},"content":"      model.questionsTableRowModelsSortOrder \u003d\u003d\u003d SortOrder.DESC ? SortOrder.ASC : SortOrder.DESC;"},{"lineNumber":129,"author":{"gitId":"-"},"content":"    model.questionsTableRowModels.sort(this.sortQuestionsBy(by, model.questionsTableRowModelsSortOrder));"},{"lineNumber":130,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":131,"author":{"gitId":"-"},"content":""},{"lineNumber":132,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":133,"author":{"gitId":"-"},"content":"   * Generates a sorting function for sessions."},{"lineNumber":134,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":135,"author":{"gitId":"-"},"content":"  protected sortFeedbackSessionsBy(by: SortBy):"},{"lineNumber":136,"author":{"gitId":"-"},"content":"      ((a: FeedbackSessionTabModel, b: FeedbackSessionTabModel) \u003d\u003e number) {"},{"lineNumber":137,"author":{"gitId":"-"},"content":"    return ((a: FeedbackSessionTabModel, b: FeedbackSessionTabModel): number \u003d\u003e {"},{"lineNumber":138,"author":{"gitId":"-"},"content":"      let strA: string;"},{"lineNumber":139,"author":{"gitId":"-"},"content":"      let strB: string;"},{"lineNumber":140,"author":{"gitId":"-"},"content":"      let order: SortOrder;"},{"lineNumber":141,"author":{"gitId":"-"},"content":"      switch (by) {"},{"lineNumber":142,"author":{"gitId":"-"},"content":"        case SortBy.COURSE_ID:"},{"lineNumber":143,"author":{"gitId":"-"},"content":"          strA \u003d a.courseId.toString();"},{"lineNumber":144,"author":{"gitId":"-"},"content":"          strB \u003d b.courseId.toString();"},{"lineNumber":145,"author":{"gitId":"-"},"content":"          order \u003d SortOrder.ASC;"},{"lineNumber":146,"author":{"gitId":"-"},"content":"          break;"},{"lineNumber":147,"author":{"gitId":"-"},"content":"        case SortBy.SESSION_NAME:"},{"lineNumber":148,"author":{"gitId":"-"},"content":"          strA \u003d a.feedbackSessionName;"},{"lineNumber":149,"author":{"gitId":"-"},"content":"          strB \u003d b.feedbackSessionName;"},{"lineNumber":150,"author":{"gitId":"-"},"content":"          order \u003d SortOrder.ASC;"},{"lineNumber":151,"author":{"gitId":"-"},"content":"          break;"},{"lineNumber":152,"author":{"gitId":"-"},"content":"        case SortBy.SESSION_CREATION_DATE:"},{"lineNumber":153,"author":{"gitId":"-"},"content":"          strA \u003d a.createdAtTimestamp.toString();"},{"lineNumber":154,"author":{"gitId":"-"},"content":"          strB \u003d b.createdAtTimestamp.toString();"},{"lineNumber":155,"author":{"gitId":"-"},"content":"          order \u003d SortOrder.DESC;"},{"lineNumber":156,"author":{"gitId":"-"},"content":"          break;"},{"lineNumber":157,"author":{"gitId":"-"},"content":"        default:"},{"lineNumber":158,"author":{"gitId":"-"},"content":"          strA \u003d \u0027\u0027;"},{"lineNumber":159,"author":{"gitId":"-"},"content":"          strB \u003d \u0027\u0027;"},{"lineNumber":160,"author":{"gitId":"-"},"content":"          order \u003d SortOrder.ASC;"},{"lineNumber":161,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":162,"author":{"gitId":"-"},"content":"      return this.tableComparatorService.compare(by, order, strA, strB);"},{"lineNumber":163,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":164,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":165,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":166,"author":{"gitId":"-"},"content":"   * Generates a sorting function for questions."},{"lineNumber":167,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":168,"author":{"gitId":"-"},"content":"  protected sortQuestionsBy(by: SortBy, order: SortOrder):"},{"lineNumber":169,"author":{"gitId":"-"},"content":"      ((a: QuestionToCopyCandidate, b: QuestionToCopyCandidate) \u003d\u003e number) {"},{"lineNumber":170,"author":{"gitId":"-"},"content":"    return ((a: QuestionToCopyCandidate, b: QuestionToCopyCandidate): number \u003d\u003e {"},{"lineNumber":171,"author":{"gitId":"-"},"content":"      let strA: string;"},{"lineNumber":172,"author":{"gitId":"-"},"content":"      let strB: string;"},{"lineNumber":173,"author":{"gitId":"-"},"content":"      switch (by) {"},{"lineNumber":174,"author":{"gitId":"-"},"content":"        case SortBy.QUESTION_TYPE:"},{"lineNumber":175,"author":{"gitId":"-"},"content":"          strA \u003d a.question.questionType;"},{"lineNumber":176,"author":{"gitId":"-"},"content":"          strB \u003d b.question.questionType;"},{"lineNumber":177,"author":{"gitId":"-"},"content":"          break;"},{"lineNumber":178,"author":{"gitId":"-"},"content":"        case SortBy.QUESTION_TEXT:"},{"lineNumber":179,"author":{"gitId":"-"},"content":"          strA \u003d a.question.questionBrief;"},{"lineNumber":180,"author":{"gitId":"-"},"content":"          strB \u003d b.question.questionBrief;"},{"lineNumber":181,"author":{"gitId":"-"},"content":"          break;"},{"lineNumber":182,"author":{"gitId":"-"},"content":"        default:"},{"lineNumber":183,"author":{"gitId":"-"},"content":"          strA \u003d \u0027\u0027;"},{"lineNumber":184,"author":{"gitId":"-"},"content":"          strB \u003d \u0027\u0027;"},{"lineNumber":185,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":186,"author":{"gitId":"-"},"content":"      return this.tableComparatorService.compare(by, order, strA, strB);"},{"lineNumber":187,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":188,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":189,"author":{"gitId":"-"},"content":""},{"lineNumber":190,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":191,"author":{"gitId":"-"},"content":"   * Checks whether there are any selected questions."},{"lineNumber":192,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":193,"author":{"gitId":"-"},"content":"  get hasAnyQuestionsToCopySelected(): boolean {"},{"lineNumber":194,"author":{"gitId":"-"},"content":"    return this.feedbackSessionTabModels.reduce((a: boolean, b: FeedbackSessionTabModel) \u003d\u003e {"},{"lineNumber":195,"author":{"gitId":"-"},"content":"      return a || !!b.questionsTableRowModels.find((c: QuestionToCopyCandidate) \u003d\u003e c.isSelected);"},{"lineNumber":196,"author":{"gitId":"-"},"content":"    }, false);"},{"lineNumber":197,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":198,"author":{"gitId":"-"},"content":""},{"lineNumber":199,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"weiquu":7,"-":192}},{"path":"src/web/app/pages-instructor/instructor-session-edit-page/instructor-session-edit-page.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003ctm-loading-retry [shouldShowRetry]\u003d\"hasLoadingFeedbackSessionFailed\" [message]\u003d\"\u0027Failed to load feedback session\u0027\""},{"lineNumber":2,"author":{"gitId":"-"},"content":"  (retryEvent)\u003d\"loadFeedbackSession()\"\u003e"},{"lineNumber":3,"author":{"gitId":"-"},"content":"  \u003ctm-session-edit-form *tmIsLoading\u003d\"isLoadingFeedbackSession\" [formMode]\u003d\"SessionEditFormMode.EDIT\""},{"lineNumber":4,"author":{"gitId":"-"},"content":"    [(model)]\u003d\"sessionEditFormModel\" (editExistingSessionEvent)\u003d\"editExistingSessionHandler()\""},{"lineNumber":5,"author":{"gitId":"-"},"content":"    (modelChange)\u003d\"triggerModelChange($event)\""},{"lineNumber":6,"author":{"gitId":"-"},"content":"    (cancelEditingSessionEvent)\u003d\"cancelEditingSessionHandler()\""},{"lineNumber":7,"author":{"gitId":"-"},"content":"    (deleteExistingSessionEvent)\u003d\"deleteExistingSessionHandler()\""},{"lineNumber":8,"author":{"gitId":"-"},"content":"    (copyCurrentSessionEvent)\u003d\"copyCurrentSession()\"\u003e\u003c/tm-session-edit-form\u003e"},{"lineNumber":9,"author":{"gitId":"-"},"content":"\u003c/tm-loading-retry\u003e"},{"lineNumber":10,"author":{"gitId":"-"},"content":"\u003ctm-loading-retry [shouldShowRetry]\u003d\"hasLoadingFeedbackQuestionsFailed\" [message]\u003d\"\u0027Failed to load feedback questions\u0027\""},{"lineNumber":11,"author":{"gitId":"-"},"content":"  (retryEvent)\u003d\"loadFeedbackQuestions()\"\u003e"},{"lineNumber":12,"author":{"gitId":"-"},"content":"  \u003cdiv *ngIf\u003d\"!isLoadingFeedbackQuestions \u0026\u0026 questionEditFormModels.length\" class\u003d\"offset-md-10 margin-vertical-20px\"\u003e"},{"lineNumber":13,"author":{"gitId":"-"},"content":"    \u003cbutton id\u003d\"btn-collapse-expand\" class\u003d\"btn expand-btn btn-light margin-top-30px\""},{"lineNumber":14,"author":{"gitId":"-"},"content":"      (click)\u003d\"isAllCollapsed ? expandAll() : collapseAll()\"\u003e"},{"lineNumber":15,"author":{"gitId":"-"},"content":"      {{isAllCollapsed ? \"Expand\" : \"Collapse\" }} All"},{"lineNumber":16,"author":{"gitId":"-"},"content":"    \u003c/button\u003e"},{"lineNumber":17,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":18,"author":{"gitId":"-"},"content":""},{"lineNumber":19,"author":{"gitId":"-"},"content":"  \u003cdiv *tmIsLoading\u003d\"isLoadingFeedbackQuestions\"\u003e"},{"lineNumber":20,"author":{"gitId":"-"},"content":"    \u003cdiv"},{"lineNumber":21,"author":{"gitId":"-"},"content":"      *ngFor\u003d\"let questionEditFormModel of questionEditFormModels; let i \u003d index; trackBy: trackQuestionEditFormByFn\"\u003e"},{"lineNumber":22,"author":{"gitId":"-"},"content":"      \u003ctm-question-edit-form [formMode]\u003d\"QuestionEditFormMode.EDIT\" [numOfQuestions]\u003d\"questionEditFormModels.length\""},{"lineNumber":23,"author":{"gitId":"-"},"content":"        (saveExistingQuestionEvent)\u003d\"saveExistingQuestionHandler(i)\""},{"lineNumber":24,"author":{"gitId":"-"},"content":"        (discardExistingQuestionChangesEvent)\u003d\"discardExistingQuestionHandler(i)\""},{"lineNumber":25,"author":{"gitId":"-"},"content":"        (duplicateCurrentQuestionEvent)\u003d\"duplicateCurrentQuestionHandler(i)\""},{"lineNumber":26,"author":{"gitId":"-"},"content":"        (deleteCurrentQuestionEvent)\u003d\"deleteExistingQuestionHandler(i)\" [(formModel)]\u003d\"questionEditFormModels[i]\""},{"lineNumber":27,"author":{"gitId":"cedricongjh"},"content":"        [isQuestionPublished]\u003d\"sessionEditFormModel.publishStatus \u003d\u003d\u003d FeedbackSessionPublishStatus.PUBLISHED\"\u003e\u003c/tm-question-edit-form\u003e"},{"lineNumber":28,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":29,"author":{"gitId":"-"},"content":"    \u003ca class\u003d\"d-block text-end cursor-pointer\" (click)\u003d\"scrollToTopOfPage()\"\u003e"},{"lineNumber":30,"author":{"gitId":"-"},"content":"      Back to Top \u003ci class\u003d\"fas fa-arrow-up\"\u003e\u003c/i\u003e"},{"lineNumber":31,"author":{"gitId":"-"},"content":"    \u003c/a\u003e"},{"lineNumber":32,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":33,"author":{"gitId":"-"},"content":"  \u003cdiv *tmIsLoading\u003d\"isAddingFromTemplate\"\u003e\u003c/div\u003e"},{"lineNumber":34,"author":{"gitId":"-"},"content":"  \u003cbr /\u003e"},{"lineNumber":35,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"card\" *ngIf\u003d\"!isLoadingFeedbackQuestions \u0026\u0026 !isAddingQuestionPanelExpanded\"\u003e"},{"lineNumber":36,"author":{"gitId":"-"},"content":"    \u003ctm-adding-question-panel (templateQuestionModalEvent)\u003d\"templateQuestionModalHandler()\""},{"lineNumber":37,"author":{"gitId":"-"},"content":"      (populateAndShowNewQuestionFormEvent)\u003d\"populateAndShowNewQuestionForm($event)\""},{"lineNumber":38,"author":{"gitId":"-"},"content":"      (copyQuestionsFromOtherSessionsEvent)\u003d\"copyQuestionsFromOtherSessionsHandler()\""},{"lineNumber":39,"author":{"gitId":"-"},"content":"      [isCopyingQuestion]\u003d\"isCopyingQuestion\"\u003e\u003c/tm-adding-question-panel\u003e"},{"lineNumber":40,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":41,"author":{"gitId":"-"},"content":"  \u003ctm-question-edit-form *ngIf\u003d\"isAddingQuestionPanelExpanded\" [formMode]\u003d\"QuestionEditFormMode.ADD\""},{"lineNumber":42,"author":{"gitId":"-"},"content":"    [numOfQuestions]\u003d\"questionEditFormModels.length + 1\""},{"lineNumber":43,"author":{"gitId":"-"},"content":"    (discardNewQuestionEvent)\u003d\"isAddingQuestionPanelExpanded \u003d false\""},{"lineNumber":44,"author":{"gitId":"-"},"content":"    (createNewQuestionEvent)\u003d\"createNewQuestionHandler()\""},{"lineNumber":45,"author":{"gitId":"-"},"content":"    [(formModel)]\u003d\"newQuestionEditFormModel\"\u003e\u003c/tm-question-edit-form\u003e"},{"lineNumber":46,"author":{"gitId":"-"},"content":"  \u003cbr /\u003e"},{"lineNumber":47,"author":{"gitId":"-"},"content":"  \u003cdiv *ngIf\u003d\"!isLoadingFeedbackQuestions\" class\u003d\"card\"\u003e"},{"lineNumber":48,"author":{"gitId":"-"},"content":"    \u003ctm-preview-session-panel [courseId]\u003d\"courseId\" [feedbackSessionName]\u003d\"feedbackSessionName\""},{"lineNumber":49,"author":{"gitId":"-"},"content":"      [emailOfStudentToPreview]\u003d\"emailOfStudentToPreview\" [studentsOfCourse]\u003d\"studentsOfCourse\""},{"lineNumber":50,"author":{"gitId":"-"},"content":"      [instructorsCanBePreviewedAs]\u003d\"instructorsOfCourse\""},{"lineNumber":51,"author":{"gitId":"-"},"content":"      [emailOfInstructorToPreview]\u003d\"emailOfInstructorToPreview\"\u003e\u003c/tm-preview-session-panel\u003e"},{"lineNumber":52,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":53,"author":{"gitId":"-"},"content":"\u003c/tm-loading-retry\u003e"},{"lineNumber":54,"author":{"gitId":"-"},"content":""},{"lineNumber":55,"author":{"gitId":"-"},"content":"\u003cng-template #modifiedTimestampsModal\u003e"},{"lineNumber":56,"author":{"gitId":"-"},"content":"  \u003ctm-modified-timestamps-modal [coursesOfModifiedSession]\u003d\"this.coursesOfModifiedSession\""},{"lineNumber":57,"author":{"gitId":"-"},"content":"    [modifiedSessions]\u003d\"this.modifiedSession\"\u003e"},{"lineNumber":58,"author":{"gitId":"-"},"content":"  \u003c/tm-modified-timestamps-modal\u003e"},{"lineNumber":59,"author":{"gitId":"-"},"content":"\u003c/ng-template\u003e"}],"authorContributionMap":{"cedricongjh":1,"-":58}},{"path":"src/web/app/pages-instructor/instructor-session-edit-page/instructor-session-edit-page.component.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { ChangeDetectorRef, Component, OnInit, TemplateRef, ViewChild } from \u0027@angular/core\u0027;"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import { ActivatedRoute } from \u0027@angular/router\u0027;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"import { NgbModal, NgbModalRef } from \u0027@ng-bootstrap/ng-bootstrap\u0027;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import { forkJoin, Observable, of } from \u0027rxjs\u0027;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import { concatMap, finalize } from \u0027rxjs/operators\u0027;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import { CourseService } from \u0027../../../services/course.service\u0027;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import { DateTimeService } from \u0027../../../services/datetime.service\u0027;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import { DeadlineExtensionHelper } from \u0027../../../services/deadline-extension-helper\u0027;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":10,"author":{"gitId":"-"},"content":"  CommonVisibilitySetting,"},{"lineNumber":11,"author":{"gitId":"-"},"content":"  FeedbackQuestionsService,"},{"lineNumber":12,"author":{"gitId":"-"},"content":"  NewQuestionModel,"},{"lineNumber":13,"author":{"gitId":"-"},"content":"} from \u0027../../../services/feedback-questions.service\u0027;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import { FeedbackSessionActionsService } from \u0027../../../services/feedback-session-actions.service\u0027;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import { FeedbackSessionsService } from \u0027../../../services/feedback-sessions.service\u0027;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"import { InstructorService } from \u0027../../../services/instructor.service\u0027;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"import { NavigationService } from \u0027../../../services/navigation.service\u0027;"},{"lineNumber":18,"author":{"gitId":"-"},"content":"import { ProgressBarService } from \u0027../../../services/progress-bar.service\u0027;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"import { SimpleModalService } from \u0027../../../services/simple-modal.service\u0027;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"import { StatusMessageService } from \u0027../../../services/status-message.service\u0027;"},{"lineNumber":21,"author":{"gitId":"-"},"content":"import { StudentService } from \u0027../../../services/student.service\u0027;"},{"lineNumber":22,"author":{"gitId":"-"},"content":"import { TableComparatorService } from \u0027../../../services/table-comparator.service\u0027;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"import { TimezoneService } from \u0027../../../services/timezone.service\u0027;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"import { VisibilityStateMachine } from \u0027../../../services/visibility-state-machine\u0027;"},{"lineNumber":25,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":26,"author":{"gitId":"-"},"content":"  Course,"},{"lineNumber":27,"author":{"gitId":"-"},"content":"  Courses,"},{"lineNumber":28,"author":{"gitId":"-"},"content":"  FeedbackParticipantType,"},{"lineNumber":29,"author":{"gitId":"-"},"content":"  FeedbackQuestion,"},{"lineNumber":30,"author":{"gitId":"-"},"content":"  FeedbackQuestions,"},{"lineNumber":31,"author":{"gitId":"-"},"content":"  FeedbackQuestionType,"},{"lineNumber":32,"author":{"gitId":"-"},"content":"  FeedbackSession,"},{"lineNumber":33,"author":{"gitId":"-"},"content":"  FeedbackSessionPublishStatus,"},{"lineNumber":34,"author":{"gitId":"-"},"content":"  FeedbackSessions,"},{"lineNumber":35,"author":{"gitId":"-"},"content":"  FeedbackTextQuestionDetails, FeedbackVisibilityType,"},{"lineNumber":36,"author":{"gitId":"-"},"content":"  HasResponses,"},{"lineNumber":37,"author":{"gitId":"-"},"content":"  Instructor,"},{"lineNumber":38,"author":{"gitId":"-"},"content":"  Instructors,"},{"lineNumber":39,"author":{"gitId":"-"},"content":"  NumberOfEntitiesToGiveFeedbackToSetting,"},{"lineNumber":40,"author":{"gitId":"-"},"content":"  ResponseVisibleSetting,"},{"lineNumber":41,"author":{"gitId":"-"},"content":"  SessionVisibleSetting,"},{"lineNumber":42,"author":{"gitId":"-"},"content":"  Student,"},{"lineNumber":43,"author":{"gitId":"-"},"content":"  Students,"},{"lineNumber":44,"author":{"gitId":"-"},"content":"} from \u0027../../../types/api-output\u0027;"},{"lineNumber":45,"author":{"gitId":"-"},"content":"import { Intent } from \u0027../../../types/api-request\u0027;"},{"lineNumber":46,"author":{"gitId":"-"},"content":"import { DateFormat, TimeFormat, getDefaultDateFormat, getLatestTimeFormat } from \u0027../../../types/datetime-const\u0027;"},{"lineNumber":47,"author":{"gitId":"-"},"content":"import { SortBy, SortOrder } from \u0027../../../types/sort-properties\u0027;"},{"lineNumber":48,"author":{"gitId":"-"},"content":"import { VisibilityControl } from \u0027../../../types/visibility-control\u0027;"},{"lineNumber":49,"author":{"gitId":"-"},"content":"import { CopySessionModalResult } from \u0027../../components/copy-session-modal/copy-session-modal-model\u0027;"},{"lineNumber":50,"author":{"gitId":"-"},"content":"import { CopySessionModalComponent } from \u0027../../components/copy-session-modal/copy-session-modal.component\u0027;"},{"lineNumber":51,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":52,"author":{"gitId":"-"},"content":"  ExtensionConfirmModalComponent,"},{"lineNumber":53,"author":{"gitId":"-"},"content":"  ExtensionModalType,"},{"lineNumber":54,"author":{"gitId":"-"},"content":"} from \u0027../../components/extension-confirm-modal/extension-confirm-modal.component\u0027;"},{"lineNumber":55,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":56,"author":{"gitId":"-"},"content":"  QuestionEditFormMode,"},{"lineNumber":57,"author":{"gitId":"-"},"content":"  QuestionEditFormModel,"},{"lineNumber":58,"author":{"gitId":"-"},"content":"} from \u0027../../components/question-edit-form/question-edit-form-model\u0027;"},{"lineNumber":59,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":60,"author":{"gitId":"-"},"content":"  SessionEditFormMode,"},{"lineNumber":61,"author":{"gitId":"-"},"content":"  SessionEditFormModel,"},{"lineNumber":62,"author":{"gitId":"-"},"content":"} from \u0027../../components/session-edit-form/session-edit-form-model\u0027;"},{"lineNumber":63,"author":{"gitId":"-"},"content":"import { SimpleModalType } from \u0027../../components/simple-modal/simple-modal-type\u0027;"},{"lineNumber":64,"author":{"gitId":"-"},"content":"import { ErrorMessageOutput } from \u0027../../error-message-output\u0027;"},{"lineNumber":65,"author":{"gitId":"-"},"content":"import { InstructorSessionBasePageComponent } from \u0027../instructor-session-base-page.component\u0027;"},{"lineNumber":66,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":67,"author":{"gitId":"-"},"content":"  InstructorExtensionTableColumnModel,"},{"lineNumber":68,"author":{"gitId":"-"},"content":"  StudentExtensionTableColumnModel,"},{"lineNumber":69,"author":{"gitId":"-"},"content":"} from \u0027../instructor-session-individual-extension-page/extension-table-column-model\u0027;"},{"lineNumber":70,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":71,"author":{"gitId":"-"},"content":"  FeedbackSessionTabModel,"},{"lineNumber":72,"author":{"gitId":"-"},"content":"} from \u0027./copy-questions-from-other-sessions-modal/copy-questions-from-other-sessions-modal-model\u0027;"},{"lineNumber":73,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":74,"author":{"gitId":"-"},"content":"  CopyQuestionsFromOtherSessionsModalComponent,"},{"lineNumber":75,"author":{"gitId":"-"},"content":"} from \u0027./copy-questions-from-other-sessions-modal/copy-questions-from-other-sessions-modal.component\u0027;"},{"lineNumber":76,"author":{"gitId":"-"},"content":"import { TemplateQuestionModalComponent } from \u0027./template-question-modal/template-question-modal.component\u0027;"},{"lineNumber":77,"author":{"gitId":"-"},"content":""},{"lineNumber":78,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":79,"author":{"gitId":"-"},"content":" * Instructor feedback session edit page."},{"lineNumber":80,"author":{"gitId":"-"},"content":" */"},{"lineNumber":81,"author":{"gitId":"-"},"content":"@Component({"},{"lineNumber":82,"author":{"gitId":"-"},"content":"  selector: \u0027tm-instructor-session-edit-page\u0027,"},{"lineNumber":83,"author":{"gitId":"-"},"content":"  templateUrl: \u0027./instructor-session-edit-page.component.html\u0027,"},{"lineNumber":84,"author":{"gitId":"-"},"content":"  styleUrls: [\u0027./instructor-session-edit-page.component.scss\u0027],"},{"lineNumber":85,"author":{"gitId":"-"},"content":"})"},{"lineNumber":86,"author":{"gitId":"-"},"content":"export class InstructorSessionEditPageComponent extends InstructorSessionBasePageComponent implements OnInit {"},{"lineNumber":87,"author":{"gitId":"-"},"content":""},{"lineNumber":88,"author":{"gitId":"-"},"content":"  // enum"},{"lineNumber":89,"author":{"gitId":"-"},"content":"  SessionEditFormMode: typeof SessionEditFormMode \u003d SessionEditFormMode;"},{"lineNumber":90,"author":{"gitId":"-"},"content":"  QuestionEditFormMode: typeof QuestionEditFormMode \u003d QuestionEditFormMode;"},{"lineNumber":91,"author":{"gitId":"-"},"content":"  FeedbackQuestionType: typeof FeedbackQuestionType \u003d FeedbackQuestionType;"},{"lineNumber":92,"author":{"gitId":"cedricongjh"},"content":"  FeedbackSessionPublishStatus: typeof FeedbackSessionPublishStatus \u003d FeedbackSessionPublishStatus;"},{"lineNumber":93,"author":{"gitId":"-"},"content":""},{"lineNumber":94,"author":{"gitId":"-"},"content":"  // url param"},{"lineNumber":95,"author":{"gitId":"-"},"content":"  courseId: string \u003d \u0027\u0027;"},{"lineNumber":96,"author":{"gitId":"-"},"content":"  feedbackSessionName: string \u003d \u0027\u0027;"},{"lineNumber":97,"author":{"gitId":"-"},"content":"  isEditingMode: boolean \u003d false;"},{"lineNumber":98,"author":{"gitId":"-"},"content":""},{"lineNumber":99,"author":{"gitId":"-"},"content":"  courseName: string \u003d \u0027\u0027;"},{"lineNumber":100,"author":{"gitId":"-"},"content":"  studentDeadlines: Record\u003cstring, number\u003e \u003d {};"},{"lineNumber":101,"author":{"gitId":"-"},"content":"  instructorDeadlines: Record\u003cstring, number\u003e \u003d {};"},{"lineNumber":102,"author":{"gitId":"-"},"content":""},{"lineNumber":103,"author":{"gitId":"-"},"content":"  // to get the original session model on discard changes"},{"lineNumber":104,"author":{"gitId":"-"},"content":"  feedbackSessionModelBeforeEditing: SessionEditFormModel \u003d JSON.parse(JSON.stringify(this.sessionEditFormModel));"},{"lineNumber":105,"author":{"gitId":"-"},"content":""},{"lineNumber":106,"author":{"gitId":"-"},"content":"  // to get the original question model"},{"lineNumber":107,"author":{"gitId":"-"},"content":"  feedbackQuestionModels: Map\u003cstring, FeedbackQuestion\u003e \u003d new Map();"},{"lineNumber":108,"author":{"gitId":"-"},"content":""},{"lineNumber":109,"author":{"gitId":"-"},"content":"  questionEditFormModels: QuestionEditFormModel[] \u003d [];"},{"lineNumber":110,"author":{"gitId":"-"},"content":""},{"lineNumber":111,"author":{"gitId":"-"},"content":"  newQuestionEditFormModel: QuestionEditFormModel \u003d {"},{"lineNumber":112,"author":{"gitId":"-"},"content":"    feedbackQuestionId: \u0027\u0027,"},{"lineNumber":113,"author":{"gitId":"-"},"content":"    questionNumber: 0,"},{"lineNumber":114,"author":{"gitId":"-"},"content":"    questionBrief: \u0027\u0027,"},{"lineNumber":115,"author":{"gitId":"-"},"content":"    questionDescription: \u0027\u0027,"},{"lineNumber":116,"author":{"gitId":"-"},"content":""},{"lineNumber":117,"author":{"gitId":"-"},"content":"    isQuestionHasResponses: false,"},{"lineNumber":118,"author":{"gitId":"-"},"content":""},{"lineNumber":119,"author":{"gitId":"-"},"content":"    questionType: FeedbackQuestionType.TEXT,"},{"lineNumber":120,"author":{"gitId":"-"},"content":"    questionDetails: {"},{"lineNumber":121,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.TEXT,"},{"lineNumber":122,"author":{"gitId":"-"},"content":"      questionText: \u0027\u0027,"},{"lineNumber":123,"author":{"gitId":"-"},"content":"    } as FeedbackTextQuestionDetails,"},{"lineNumber":124,"author":{"gitId":"-"},"content":""},{"lineNumber":125,"author":{"gitId":"-"},"content":"    giverType: FeedbackParticipantType.STUDENTS,"},{"lineNumber":126,"author":{"gitId":"-"},"content":"    recipientType: FeedbackParticipantType.STUDENTS_EXCLUDING_SELF,"},{"lineNumber":127,"author":{"gitId":"-"},"content":""},{"lineNumber":128,"author":{"gitId":"-"},"content":"    numberOfEntitiesToGiveFeedbackToSetting: NumberOfEntitiesToGiveFeedbackToSetting.UNLIMITED,"},{"lineNumber":129,"author":{"gitId":"-"},"content":"    customNumberOfEntitiesToGiveFeedbackTo: 1,"},{"lineNumber":130,"author":{"gitId":"-"},"content":""},{"lineNumber":131,"author":{"gitId":"-"},"content":"    showResponsesTo: [],"},{"lineNumber":132,"author":{"gitId":"-"},"content":"    showGiverNameTo: [],"},{"lineNumber":133,"author":{"gitId":"-"},"content":"    showRecipientNameTo: [],"},{"lineNumber":134,"author":{"gitId":"-"},"content":""},{"lineNumber":135,"author":{"gitId":"-"},"content":"    isDeleting: false,"},{"lineNumber":136,"author":{"gitId":"-"},"content":"    isDuplicating: false,"},{"lineNumber":137,"author":{"gitId":"-"},"content":"    isEditable: true,"},{"lineNumber":138,"author":{"gitId":"-"},"content":"    isSaving: false,"},{"lineNumber":139,"author":{"gitId":"-"},"content":"    isCollapsed: false,"},{"lineNumber":140,"author":{"gitId":"-"},"content":"    isVisibilityChanged: false,"},{"lineNumber":141,"author":{"gitId":"-"},"content":"    isFeedbackPathChanged: false,"},{"lineNumber":142,"author":{"gitId":"-"},"content":"    isQuestionDetailsChanged: false,"},{"lineNumber":143,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":144,"author":{"gitId":"-"},"content":""},{"lineNumber":145,"author":{"gitId":"-"},"content":"  isAddingFromTemplate: boolean \u003d false;"},{"lineNumber":146,"author":{"gitId":"-"},"content":"  isAddingQuestionPanelExpanded: boolean \u003d false;"},{"lineNumber":147,"author":{"gitId":"-"},"content":"  isLoadingFeedbackSession: boolean \u003d false;"},{"lineNumber":148,"author":{"gitId":"-"},"content":"  hasLoadingFeedbackSessionFailed: boolean \u003d false;"},{"lineNumber":149,"author":{"gitId":"-"},"content":"  isLoadingFeedbackQuestions: boolean \u003d false;"},{"lineNumber":150,"author":{"gitId":"-"},"content":"  hasLoadingFeedbackQuestionsFailed: boolean \u003d false;"},{"lineNumber":151,"author":{"gitId":"-"},"content":"  isCopyingQuestion: boolean \u003d false;"},{"lineNumber":152,"author":{"gitId":"-"},"content":""},{"lineNumber":153,"author":{"gitId":"-"},"content":"  // all students of the course"},{"lineNumber":154,"author":{"gitId":"-"},"content":"  studentsOfCourse: Student[] \u003d [];"},{"lineNumber":155,"author":{"gitId":"-"},"content":"  emailOfStudentToPreview: string \u003d \u0027\u0027;"},{"lineNumber":156,"author":{"gitId":"-"},"content":"  // all instructors of the course"},{"lineNumber":157,"author":{"gitId":"-"},"content":"  instructorsOfCourse: Instructor[] \u003d [];"},{"lineNumber":158,"author":{"gitId":"-"},"content":"  emailOfInstructorToPreview: string \u003d \u0027\u0027;"},{"lineNumber":159,"author":{"gitId":"-"},"content":""},{"lineNumber":160,"author":{"gitId":"-"},"content":"  get isAllCollapsed(): boolean {"},{"lineNumber":161,"author":{"gitId":"-"},"content":"    return this.questionEditFormModels.some((model: QuestionEditFormModel) \u003d\u003e {"},{"lineNumber":162,"author":{"gitId":"-"},"content":"      return model.isCollapsed;"},{"lineNumber":163,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":164,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":165,"author":{"gitId":"-"},"content":""},{"lineNumber":166,"author":{"gitId":"-"},"content":"  @ViewChild(\u0027modifiedTimestampsModal\u0027) modifiedTimestampsModal!: TemplateRef\u003cany\u003e;"},{"lineNumber":167,"author":{"gitId":"-"},"content":""},{"lineNumber":168,"author":{"gitId":"-"},"content":"  constructor(instructorService: InstructorService,"},{"lineNumber":169,"author":{"gitId":"-"},"content":"              statusMessageService: StatusMessageService,"},{"lineNumber":170,"author":{"gitId":"-"},"content":"              navigationService: NavigationService,"},{"lineNumber":171,"author":{"gitId":"-"},"content":"              feedbackSessionsService: FeedbackSessionsService,"},{"lineNumber":172,"author":{"gitId":"-"},"content":"              feedbackQuestionsService: FeedbackQuestionsService,"},{"lineNumber":173,"author":{"gitId":"-"},"content":"              tableComparatorService: TableComparatorService,"},{"lineNumber":174,"author":{"gitId":"-"},"content":"              ngbModal: NgbModal,"},{"lineNumber":175,"author":{"gitId":"-"},"content":"              simpleModalService: SimpleModalService,"},{"lineNumber":176,"author":{"gitId":"-"},"content":"              progressBarService: ProgressBarService,"},{"lineNumber":177,"author":{"gitId":"-"},"content":"              feedbackSessionActionsService: FeedbackSessionActionsService,"},{"lineNumber":178,"author":{"gitId":"-"},"content":"              timezoneService: TimezoneService,"},{"lineNumber":179,"author":{"gitId":"-"},"content":"              private datetimeService: DateTimeService,"},{"lineNumber":180,"author":{"gitId":"-"},"content":"              private studentService: StudentService,"},{"lineNumber":181,"author":{"gitId":"-"},"content":"              private courseService: CourseService,"},{"lineNumber":182,"author":{"gitId":"-"},"content":"              private route: ActivatedRoute,"},{"lineNumber":183,"author":{"gitId":"-"},"content":"              private changeDetectorRef: ChangeDetectorRef) {"},{"lineNumber":184,"author":{"gitId":"-"},"content":"    super(instructorService, statusMessageService, navigationService,"},{"lineNumber":185,"author":{"gitId":"-"},"content":"        feedbackSessionsService, feedbackQuestionsService, tableComparatorService,"},{"lineNumber":186,"author":{"gitId":"-"},"content":"        ngbModal, simpleModalService, progressBarService, feedbackSessionActionsService, timezoneService);"},{"lineNumber":187,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":188,"author":{"gitId":"-"},"content":""},{"lineNumber":189,"author":{"gitId":"-"},"content":"  ngOnInit(): void {"},{"lineNumber":190,"author":{"gitId":"-"},"content":"    this.route.queryParams.subscribe((queryParams: any) \u003d\u003e {"},{"lineNumber":191,"author":{"gitId":"-"},"content":"      this.courseId \u003d queryParams.courseid;"},{"lineNumber":192,"author":{"gitId":"-"},"content":"      this.feedbackSessionName \u003d queryParams.fsname;"},{"lineNumber":193,"author":{"gitId":"-"},"content":"      this.isEditingMode \u003d queryParams.editingMode \u003d\u003d\u003d \u0027true\u0027;"},{"lineNumber":194,"author":{"gitId":"-"},"content":""},{"lineNumber":195,"author":{"gitId":"-"},"content":"      this.loadFeedbackSession();"},{"lineNumber":196,"author":{"gitId":"-"},"content":"      this.loadFeedbackQuestions();"},{"lineNumber":197,"author":{"gitId":"-"},"content":"      this.getAllStudentsOfCourse();"},{"lineNumber":198,"author":{"gitId":"-"},"content":"      this.getAllInstructors();"},{"lineNumber":199,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":200,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":201,"author":{"gitId":"-"},"content":""},{"lineNumber":202,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":203,"author":{"gitId":"-"},"content":"   * Loads a feedback session."},{"lineNumber":204,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":205,"author":{"gitId":"-"},"content":"  loadFeedbackSession(): void {"},{"lineNumber":206,"author":{"gitId":"-"},"content":"    this.hasLoadingFeedbackSessionFailed \u003d false;"},{"lineNumber":207,"author":{"gitId":"-"},"content":"    this.isLoadingFeedbackSession \u003d true;"},{"lineNumber":208,"author":{"gitId":"-"},"content":"    // load the course of the feedback session first"},{"lineNumber":209,"author":{"gitId":"-"},"content":"    this.courseService.getCourseAsInstructor(this.courseId).subscribe({"},{"lineNumber":210,"author":{"gitId":"-"},"content":"      next: (course: Course) \u003d\u003e {"},{"lineNumber":211,"author":{"gitId":"-"},"content":"        this.courseName \u003d course.courseName;"},{"lineNumber":212,"author":{"gitId":"-"},"content":""},{"lineNumber":213,"author":{"gitId":"-"},"content":"        this.feedbackSessionsService.getFeedbackSession({"},{"lineNumber":214,"author":{"gitId":"-"},"content":"          courseId: this.courseId,"},{"lineNumber":215,"author":{"gitId":"-"},"content":"          feedbackSessionName: this.feedbackSessionName,"},{"lineNumber":216,"author":{"gitId":"-"},"content":"          intent: Intent.FULL_DETAIL,"},{"lineNumber":217,"author":{"gitId":"-"},"content":"        }).pipe(finalize(() \u003d\u003e {"},{"lineNumber":218,"author":{"gitId":"-"},"content":"          this.isLoadingFeedbackSession \u003d false;"},{"lineNumber":219,"author":{"gitId":"-"},"content":"        }))"},{"lineNumber":220,"author":{"gitId":"-"},"content":"            .subscribe({"},{"lineNumber":221,"author":{"gitId":"-"},"content":"              next: (feedbackSession: FeedbackSession) \u003d\u003e {"},{"lineNumber":222,"author":{"gitId":"-"},"content":"                this.sessionEditFormModel \u003d this.getSessionEditFormModel(feedbackSession, this.isEditingMode);"},{"lineNumber":223,"author":{"gitId":"-"},"content":"                this.feedbackSessionModelBeforeEditing \u003d this.getSessionEditFormModel(feedbackSession);"},{"lineNumber":224,"author":{"gitId":"-"},"content":"              },"},{"lineNumber":225,"author":{"gitId":"-"},"content":"              error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":226,"author":{"gitId":"-"},"content":"                this.hasLoadingFeedbackSessionFailed \u003d true;"},{"lineNumber":227,"author":{"gitId":"-"},"content":"                this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":228,"author":{"gitId":"-"},"content":"              },"},{"lineNumber":229,"author":{"gitId":"-"},"content":"            });"},{"lineNumber":230,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":231,"author":{"gitId":"-"},"content":"      error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":232,"author":{"gitId":"-"},"content":"        this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":233,"author":{"gitId":"-"},"content":"        this.isLoadingFeedbackSession \u003d false;"},{"lineNumber":234,"author":{"gitId":"-"},"content":"        this.hasLoadingFeedbackSessionFailed \u003d true;"},{"lineNumber":235,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":236,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":237,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":238,"author":{"gitId":"-"},"content":""},{"lineNumber":239,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":240,"author":{"gitId":"-"},"content":"   * Copies the feedback session."},{"lineNumber":241,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":242,"author":{"gitId":"-"},"content":"  copyCurrentSession(): Promise\u003cvoid\u003e {"},{"lineNumber":243,"author":{"gitId":"-"},"content":"    // load course candidates first"},{"lineNumber":244,"author":{"gitId":"-"},"content":"    return new Promise\u003cvoid\u003e((_resolve: any, reject: any) \u003d\u003e {"},{"lineNumber":245,"author":{"gitId":"-"},"content":"      this.courseService.getInstructorCoursesThatAreActive()"},{"lineNumber":246,"author":{"gitId":"-"},"content":"      .pipe(finalize(() \u003d\u003e {"},{"lineNumber":247,"author":{"gitId":"-"},"content":"        this.sessionEditFormModel.isCopying \u003d false;"},{"lineNumber":248,"author":{"gitId":"-"},"content":"      }))"},{"lineNumber":249,"author":{"gitId":"-"},"content":"      .subscribe((courses: Courses) \u003d\u003e {"},{"lineNumber":250,"author":{"gitId":"-"},"content":"        this.failedToCopySessions \u003d {};"},{"lineNumber":251,"author":{"gitId":"-"},"content":"        this.coursesOfModifiedSession \u003d [];"},{"lineNumber":252,"author":{"gitId":"-"},"content":"        this.modifiedSession \u003d {};"},{"lineNumber":253,"author":{"gitId":"-"},"content":"        const modalRef: NgbModalRef \u003d this.ngbModal.open(CopySessionModalComponent);"},{"lineNumber":254,"author":{"gitId":"-"},"content":"        modalRef.componentInstance.newFeedbackSessionName \u003d this.feedbackSessionName;"},{"lineNumber":255,"author":{"gitId":"-"},"content":"        modalRef.componentInstance.courseCandidates \u003d courses.courses;"},{"lineNumber":256,"author":{"gitId":"-"},"content":"        modalRef.componentInstance.sessionToCopyCourseId \u003d this.courseId;"},{"lineNumber":257,"author":{"gitId":"-"},"content":""},{"lineNumber":258,"author":{"gitId":"-"},"content":"        modalRef.result.then((result: CopySessionModalResult) \u003d\u003e {"},{"lineNumber":259,"author":{"gitId":"-"},"content":"          const requestList: Observable\u003cFeedbackSession\u003e[] \u003d this.createSessionCopyRequestsFromModal("},{"lineNumber":260,"author":{"gitId":"-"},"content":"              result, this.courseId, this.feedbackSessionName);"},{"lineNumber":261,"author":{"gitId":"-"},"content":"          this.sessionEditFormModel.isCopying \u003d true;"},{"lineNumber":262,"author":{"gitId":"-"},"content":"          if (requestList.length \u003d\u003d\u003d 1) {"},{"lineNumber":263,"author":{"gitId":"-"},"content":"            this.copySingleSession(requestList[0].pipe(finalize(() \u003d\u003e {"},{"lineNumber":264,"author":{"gitId":"-"},"content":"              this.sessionEditFormModel.isCopying \u003d false;"},{"lineNumber":265,"author":{"gitId":"-"},"content":"            })), this.modifiedTimestampsModal);"},{"lineNumber":266,"author":{"gitId":"-"},"content":"          }"},{"lineNumber":267,"author":{"gitId":"-"},"content":"          if (requestList.length \u003e 1) {"},{"lineNumber":268,"author":{"gitId":"-"},"content":"            forkJoin(requestList)"},{"lineNumber":269,"author":{"gitId":"-"},"content":"            .pipe(finalize(() \u003d\u003e {"},{"lineNumber":270,"author":{"gitId":"-"},"content":"              this.sessionEditFormModel.isCopying \u003d false;"},{"lineNumber":271,"author":{"gitId":"-"},"content":"            }))"},{"lineNumber":272,"author":{"gitId":"-"},"content":"            .subscribe(() \u003d\u003e {"},{"lineNumber":273,"author":{"gitId":"-"},"content":"              this.showCopyStatusMessage(this.modifiedTimestampsModal);"},{"lineNumber":274,"author":{"gitId":"-"},"content":"            });"},{"lineNumber":275,"author":{"gitId":"-"},"content":"          }"},{"lineNumber":276,"author":{"gitId":"-"},"content":"        }, (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":277,"author":{"gitId":"-"},"content":"          reject(resp);"},{"lineNumber":278,"author":{"gitId":"-"},"content":"          this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":279,"author":{"gitId":"-"},"content":"        })"},{"lineNumber":280,"author":{"gitId":"-"},"content":"        .catch(() \u003d\u003e {"},{"lineNumber":281,"author":{"gitId":"-"},"content":"          this.sessionEditFormModel.isCopying \u003d false;"},{"lineNumber":282,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":283,"author":{"gitId":"-"},"content":"      });"},{"lineNumber":284,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":285,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":286,"author":{"gitId":"-"},"content":""},{"lineNumber":287,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":288,"author":{"gitId":"-"},"content":"   * Gets the {@code sessionEditFormModel} with {@link FeedbackSession} entity."},{"lineNumber":289,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":290,"author":{"gitId":"-"},"content":"  getSessionEditFormModel(feedbackSession: FeedbackSession, isEditable: boolean \u003d false): SessionEditFormModel {"},{"lineNumber":291,"author":{"gitId":"-"},"content":"    const submissionStart: { date: DateFormat, time: TimeFormat } \u003d"},{"lineNumber":292,"author":{"gitId":"-"},"content":"        this.datetimeService.getDateTimeAtTimezone(feedbackSession.submissionStartTimestamp,"},{"lineNumber":293,"author":{"gitId":"-"},"content":"          feedbackSession.timeZone, true);"},{"lineNumber":294,"author":{"gitId":"-"},"content":""},{"lineNumber":295,"author":{"gitId":"-"},"content":"    const submissionEnd: { date: DateFormat, time: TimeFormat } \u003d"},{"lineNumber":296,"author":{"gitId":"-"},"content":"        this.datetimeService.getDateTimeAtTimezone(feedbackSession.submissionEndTimestamp,"},{"lineNumber":297,"author":{"gitId":"-"},"content":"          feedbackSession.timeZone, true);"},{"lineNumber":298,"author":{"gitId":"-"},"content":""},{"lineNumber":299,"author":{"gitId":"-"},"content":"    const model: SessionEditFormModel \u003d {"},{"lineNumber":300,"author":{"gitId":"-"},"content":"      isEditable,"},{"lineNumber":301,"author":{"gitId":"-"},"content":"      courseId: feedbackSession.courseId,"},{"lineNumber":302,"author":{"gitId":"-"},"content":"      timeZone: feedbackSession.timeZone,"},{"lineNumber":303,"author":{"gitId":"-"},"content":"      courseName: this.courseName,"},{"lineNumber":304,"author":{"gitId":"-"},"content":"      feedbackSessionName: feedbackSession.feedbackSessionName,"},{"lineNumber":305,"author":{"gitId":"-"},"content":"      instructions: feedbackSession.instructions,"},{"lineNumber":306,"author":{"gitId":"-"},"content":""},{"lineNumber":307,"author":{"gitId":"-"},"content":"      submissionStartTime: submissionStart.time,"},{"lineNumber":308,"author":{"gitId":"-"},"content":"      submissionStartDate: submissionStart.date,"},{"lineNumber":309,"author":{"gitId":"-"},"content":"      submissionEndTime: submissionEnd.time,"},{"lineNumber":310,"author":{"gitId":"-"},"content":"      submissionEndDate: submissionEnd.date,"},{"lineNumber":311,"author":{"gitId":"-"},"content":"      gracePeriod: feedbackSession.gracePeriod,"},{"lineNumber":312,"author":{"gitId":"-"},"content":""},{"lineNumber":313,"author":{"gitId":"-"},"content":"      sessionVisibleSetting: feedbackSession.sessionVisibleSetting,"},{"lineNumber":314,"author":{"gitId":"-"},"content":"      customSessionVisibleTime: getLatestTimeFormat(),"},{"lineNumber":315,"author":{"gitId":"-"},"content":"      customSessionVisibleDate: getDefaultDateFormat(),"},{"lineNumber":316,"author":{"gitId":"-"},"content":""},{"lineNumber":317,"author":{"gitId":"-"},"content":"      responseVisibleSetting: feedbackSession.responseVisibleSetting,"},{"lineNumber":318,"author":{"gitId":"-"},"content":"      customResponseVisibleTime: getLatestTimeFormat(),"},{"lineNumber":319,"author":{"gitId":"-"},"content":"      customResponseVisibleDate: getDefaultDateFormat(),"},{"lineNumber":320,"author":{"gitId":"-"},"content":""},{"lineNumber":321,"author":{"gitId":"-"},"content":"      submissionStatus: feedbackSession.submissionStatus,"},{"lineNumber":322,"author":{"gitId":"-"},"content":"      publishStatus: feedbackSession.publishStatus,"},{"lineNumber":323,"author":{"gitId":"-"},"content":""},{"lineNumber":324,"author":{"gitId":"-"},"content":"      templateSessionName: \u0027\u0027,"},{"lineNumber":325,"author":{"gitId":"-"},"content":""},{"lineNumber":326,"author":{"gitId":"-"},"content":"      isClosingEmailEnabled: feedbackSession.isClosingEmailEnabled,"},{"lineNumber":327,"author":{"gitId":"-"},"content":"      isPublishedEmailEnabled: feedbackSession.isPublishedEmailEnabled,"},{"lineNumber":328,"author":{"gitId":"-"},"content":""},{"lineNumber":329,"author":{"gitId":"-"},"content":"      isSaving: false,"},{"lineNumber":330,"author":{"gitId":"-"},"content":"      isDeleting: false,"},{"lineNumber":331,"author":{"gitId":"-"},"content":"      isCopying: false,"},{"lineNumber":332,"author":{"gitId":"-"},"content":"      hasVisibleSettingsPanelExpanded: feedbackSession.sessionVisibleSetting !\u003d\u003d SessionVisibleSetting.AT_OPEN"},{"lineNumber":333,"author":{"gitId":"-"},"content":"          || feedbackSession.responseVisibleSetting !\u003d\u003d ResponseVisibleSetting.LATER,"},{"lineNumber":334,"author":{"gitId":"-"},"content":"      hasEmailSettingsPanelExpanded: !feedbackSession.isClosingEmailEnabled || !feedbackSession.isPublishedEmailEnabled,"},{"lineNumber":335,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":336,"author":{"gitId":"-"},"content":""},{"lineNumber":337,"author":{"gitId":"-"},"content":"    this.studentDeadlines \u003d feedbackSession.studentDeadlines;"},{"lineNumber":338,"author":{"gitId":"-"},"content":"    this.instructorDeadlines \u003d feedbackSession.instructorDeadlines;"},{"lineNumber":339,"author":{"gitId":"-"},"content":""},{"lineNumber":340,"author":{"gitId":"-"},"content":"    if (feedbackSession.customSessionVisibleTimestamp) {"},{"lineNumber":341,"author":{"gitId":"-"},"content":"      const customSessionVisible: { date: DateFormat, time: TimeFormat } \u003d"},{"lineNumber":342,"author":{"gitId":"-"},"content":"          this.datetimeService.getDateTimeAtTimezone(feedbackSession.customSessionVisibleTimestamp,"},{"lineNumber":343,"author":{"gitId":"-"},"content":"              feedbackSession.timeZone, true);"},{"lineNumber":344,"author":{"gitId":"-"},"content":"      model.customSessionVisibleTime \u003d customSessionVisible.time;"},{"lineNumber":345,"author":{"gitId":"-"},"content":"      model.customSessionVisibleDate \u003d customSessionVisible.date;"},{"lineNumber":346,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":347,"author":{"gitId":"-"},"content":""},{"lineNumber":348,"author":{"gitId":"-"},"content":"    if (feedbackSession.customResponseVisibleTimestamp) {"},{"lineNumber":349,"author":{"gitId":"-"},"content":"      const customResponseVisible: { date: DateFormat, time: TimeFormat } \u003d"},{"lineNumber":350,"author":{"gitId":"-"},"content":"          this.datetimeService.getDateTimeAtTimezone(feedbackSession.customResponseVisibleTimestamp,"},{"lineNumber":351,"author":{"gitId":"-"},"content":"              feedbackSession.timeZone, true);"},{"lineNumber":352,"author":{"gitId":"-"},"content":"      model.customResponseVisibleTime \u003d customResponseVisible.time;"},{"lineNumber":353,"author":{"gitId":"-"},"content":"      model.customResponseVisibleDate \u003d customResponseVisible.date;"},{"lineNumber":354,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":355,"author":{"gitId":"-"},"content":""},{"lineNumber":356,"author":{"gitId":"-"},"content":"    return model;"},{"lineNumber":357,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":358,"author":{"gitId":"-"},"content":""},{"lineNumber":359,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":360,"author":{"gitId":"-"},"content":"   * Handles editing existing session event."},{"lineNumber":361,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":362,"author":{"gitId":"-"},"content":"  editExistingSessionHandler(): void {"},{"lineNumber":363,"author":{"gitId":"-"},"content":"    this.feedbackSessionModelBeforeEditing \u003d JSON.parse(JSON.stringify(this.sessionEditFormModel));"},{"lineNumber":364,"author":{"gitId":"-"},"content":""},{"lineNumber":365,"author":{"gitId":"-"},"content":"    const submissionStartTime: number \u003d this.timezoneService.resolveLocalDateTime("},{"lineNumber":366,"author":{"gitId":"-"},"content":"        this.sessionEditFormModel.submissionStartDate, this.sessionEditFormModel.submissionStartTime,"},{"lineNumber":367,"author":{"gitId":"-"},"content":"        this.sessionEditFormModel.timeZone, true);"},{"lineNumber":368,"author":{"gitId":"-"},"content":"    const submissionEndTime: number \u003d this.timezoneService.resolveLocalDateTime("},{"lineNumber":369,"author":{"gitId":"-"},"content":"        this.sessionEditFormModel.submissionEndDate, this.sessionEditFormModel.submissionEndTime,"},{"lineNumber":370,"author":{"gitId":"-"},"content":"        this.sessionEditFormModel.timeZone, true);"},{"lineNumber":371,"author":{"gitId":"-"},"content":"    let sessionVisibleTime: number \u003d 0;"},{"lineNumber":372,"author":{"gitId":"-"},"content":"    if (this.sessionEditFormModel.sessionVisibleSetting \u003d\u003d\u003d SessionVisibleSetting.CUSTOM) {"},{"lineNumber":373,"author":{"gitId":"-"},"content":"      sessionVisibleTime \u003d this.timezoneService.resolveLocalDateTime("},{"lineNumber":374,"author":{"gitId":"-"},"content":"          this.sessionEditFormModel.customSessionVisibleDate, this.sessionEditFormModel.customSessionVisibleTime,"},{"lineNumber":375,"author":{"gitId":"-"},"content":"          this.sessionEditFormModel.timeZone, true);"},{"lineNumber":376,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":377,"author":{"gitId":"-"},"content":"    let responseVisibleTime: number \u003d 0;"},{"lineNumber":378,"author":{"gitId":"-"},"content":"    if (this.sessionEditFormModel.responseVisibleSetting \u003d\u003d\u003d ResponseVisibleSetting.CUSTOM) {"},{"lineNumber":379,"author":{"gitId":"-"},"content":"      responseVisibleTime \u003d this.timezoneService.resolveLocalDateTime("},{"lineNumber":380,"author":{"gitId":"-"},"content":"          this.sessionEditFormModel.customResponseVisibleDate, this.sessionEditFormModel.customResponseVisibleTime,"},{"lineNumber":381,"author":{"gitId":"-"},"content":"          this.sessionEditFormModel.timeZone, true);"},{"lineNumber":382,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":383,"author":{"gitId":"-"},"content":""},{"lineNumber":384,"author":{"gitId":"-"},"content":"    this.deleteDeadlineExtensionsHandler(submissionEndTime).subscribe((isUpdateSession) \u003d\u003e {"},{"lineNumber":385,"author":{"gitId":"-"},"content":"      if (isUpdateSession) {"},{"lineNumber":386,"author":{"gitId":"-"},"content":"        this.updateFeedbackSession(submissionStartTime, submissionEndTime, sessionVisibleTime, responseVisibleTime);"},{"lineNumber":387,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":388,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":389,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":390,"author":{"gitId":"-"},"content":""},{"lineNumber":391,"author":{"gitId":"-"},"content":"  updateFeedbackSession(submissionStartTime: number, submissionEndTime: number, sessionVisibleTime: number,"},{"lineNumber":392,"author":{"gitId":"-"},"content":"    responseVisibleTime: number): void {"},{"lineNumber":393,"author":{"gitId":"-"},"content":"    this.sessionEditFormModel.isSaving \u003d true;"},{"lineNumber":394,"author":{"gitId":"-"},"content":"    this.sessionEditFormModel.isEditable \u003d false;"},{"lineNumber":395,"author":{"gitId":"-"},"content":"    this.feedbackSessionsService.updateFeedbackSession(this.courseId, this.feedbackSessionName, {"},{"lineNumber":396,"author":{"gitId":"-"},"content":"      instructions: this.sessionEditFormModel.instructions,"},{"lineNumber":397,"author":{"gitId":"-"},"content":""},{"lineNumber":398,"author":{"gitId":"-"},"content":"      submissionStartTimestamp: submissionStartTime,"},{"lineNumber":399,"author":{"gitId":"-"},"content":"      submissionEndTimestamp: submissionEndTime,"},{"lineNumber":400,"author":{"gitId":"-"},"content":"      gracePeriod: this.sessionEditFormModel.gracePeriod,"},{"lineNumber":401,"author":{"gitId":"-"},"content":""},{"lineNumber":402,"author":{"gitId":"-"},"content":"      sessionVisibleSetting: this.sessionEditFormModel.sessionVisibleSetting,"},{"lineNumber":403,"author":{"gitId":"-"},"content":"      customSessionVisibleTimestamp: sessionVisibleTime,"},{"lineNumber":404,"author":{"gitId":"-"},"content":""},{"lineNumber":405,"author":{"gitId":"-"},"content":"      responseVisibleSetting: this.sessionEditFormModel.responseVisibleSetting,"},{"lineNumber":406,"author":{"gitId":"-"},"content":"      customResponseVisibleTimestamp: responseVisibleTime,"},{"lineNumber":407,"author":{"gitId":"-"},"content":""},{"lineNumber":408,"author":{"gitId":"-"},"content":"      isClosingEmailEnabled: this.sessionEditFormModel.isClosingEmailEnabled,"},{"lineNumber":409,"author":{"gitId":"-"},"content":"      isPublishedEmailEnabled: this.sessionEditFormModel.isPublishedEmailEnabled,"},{"lineNumber":410,"author":{"gitId":"-"},"content":""},{"lineNumber":411,"author":{"gitId":"-"},"content":"      studentDeadlines: this.studentDeadlines,"},{"lineNumber":412,"author":{"gitId":"-"},"content":"      instructorDeadlines: this.instructorDeadlines,"},{"lineNumber":413,"author":{"gitId":"-"},"content":"    }).pipe(finalize(() \u003d\u003e {"},{"lineNumber":414,"author":{"gitId":"-"},"content":"      this.sessionEditFormModel.isSaving \u003d false;"},{"lineNumber":415,"author":{"gitId":"-"},"content":"    })).subscribe({"},{"lineNumber":416,"author":{"gitId":"-"},"content":"      next: (feedbackSession: FeedbackSession) \u003d\u003e {"},{"lineNumber":417,"author":{"gitId":"-"},"content":"        this.sessionEditFormModel \u003d this.getSessionEditFormModel(feedbackSession);"},{"lineNumber":418,"author":{"gitId":"-"},"content":""},{"lineNumber":419,"author":{"gitId":"-"},"content":"        this.statusMessageService.showSuccessToast(\u0027The feedback session has been updated.\u0027);"},{"lineNumber":420,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":421,"author":{"gitId":"-"},"content":"      error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":422,"author":{"gitId":"-"},"content":"        this.sessionEditFormModel.isEditable \u003d true;"},{"lineNumber":423,"author":{"gitId":"-"},"content":"        this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":424,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":425,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":426,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":427,"author":{"gitId":"-"},"content":""},{"lineNumber":428,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":429,"author":{"gitId":"-"},"content":"   * Prompts the user to delete individual extensions that are before or equal to the new session end time."},{"lineNumber":430,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":431,"author":{"gitId":"-"},"content":"  deleteDeadlineExtensionsHandler(submissionEndTimestamp: number): Observable\u003cboolean\u003e {"},{"lineNumber":432,"author":{"gitId":"-"},"content":"    const [studentDeadlinesToDelete, instructorDeadlinesToDelete] \u003d this"},{"lineNumber":433,"author":{"gitId":"-"},"content":"      .getIndividualDeadlinesToDelete(submissionEndTimestamp);"},{"lineNumber":434,"author":{"gitId":"-"},"content":""},{"lineNumber":435,"author":{"gitId":"-"},"content":"    const isAllDeadlinesAfterUpdatedEndTime \u003d Object.values(studentDeadlinesToDelete).length \u003d\u003d\u003d 0"},{"lineNumber":436,"author":{"gitId":"-"},"content":"      \u0026\u0026 Object.values(instructorDeadlinesToDelete).length \u003d\u003d\u003d 0;"},{"lineNumber":437,"author":{"gitId":"-"},"content":""},{"lineNumber":438,"author":{"gitId":"-"},"content":"    if (isAllDeadlinesAfterUpdatedEndTime) {"},{"lineNumber":439,"author":{"gitId":"-"},"content":"      return of(true); // no need to prompt for deletion"},{"lineNumber":440,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":441,"author":{"gitId":"-"},"content":""},{"lineNumber":442,"author":{"gitId":"-"},"content":"    const [affectedStudentModels, affectedInstructorModels] \u003d this"},{"lineNumber":443,"author":{"gitId":"-"},"content":"      .getAffectedIndividualModels(submissionEndTimestamp, studentDeadlinesToDelete, instructorDeadlinesToDelete);"},{"lineNumber":444,"author":{"gitId":"-"},"content":""},{"lineNumber":445,"author":{"gitId":"-"},"content":"    const modalRef: NgbModalRef \u003d this.ngbModal.open(ExtensionConfirmModalComponent);"},{"lineNumber":446,"author":{"gitId":"-"},"content":"    modalRef.componentInstance.modalType \u003d ExtensionModalType.SESSION_DELETE;"},{"lineNumber":447,"author":{"gitId":"-"},"content":"    modalRef.componentInstance.selectedStudents \u003d affectedStudentModels;"},{"lineNumber":448,"author":{"gitId":"-"},"content":"    modalRef.componentInstance.selectedInstructors \u003d affectedInstructorModels;"},{"lineNumber":449,"author":{"gitId":"-"},"content":"    modalRef.componentInstance.extensionTimestamp \u003d submissionEndTimestamp;"},{"lineNumber":450,"author":{"gitId":"-"},"content":"    modalRef.componentInstance.feedbackSessionTimeZone \u003d this.sessionEditFormModel.timeZone;"},{"lineNumber":451,"author":{"gitId":"-"},"content":""},{"lineNumber":452,"author":{"gitId":"-"},"content":"    return new Observable((subscribeIsUserAccept) \u003d\u003e {"},{"lineNumber":453,"author":{"gitId":"-"},"content":"      modalRef.componentInstance.confirmExtensionCallbackEvent.subscribe(() \u003d\u003e {"},{"lineNumber":454,"author":{"gitId":"-"},"content":"        this.removeDeadlines(affectedStudentModels, affectedInstructorModels);"},{"lineNumber":455,"author":{"gitId":"-"},"content":"        modalRef.componentInstance.isSubmitting \u003d false;"},{"lineNumber":456,"author":{"gitId":"-"},"content":"        modalRef.close();"},{"lineNumber":457,"author":{"gitId":"-"},"content":"        subscribeIsUserAccept.next(true);"},{"lineNumber":458,"author":{"gitId":"-"},"content":"      }, () \u003d\u003e {"},{"lineNumber":459,"author":{"gitId":"-"},"content":"        subscribeIsUserAccept.next(false);"},{"lineNumber":460,"author":{"gitId":"-"},"content":"      });"},{"lineNumber":461,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":462,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":463,"author":{"gitId":"-"},"content":""},{"lineNumber":464,"author":{"gitId":"-"},"content":"  private getIndividualDeadlinesToDelete(submissionEndTimestamp: number): ["},{"lineNumber":465,"author":{"gitId":"-"},"content":"    Record\u003cstring, number\u003e, Record\u003cstring, number\u003e,"},{"lineNumber":466,"author":{"gitId":"-"},"content":"  ] {"},{"lineNumber":467,"author":{"gitId":"-"},"content":"    const studentDeadlinesToDelete \u003d DeadlineExtensionHelper.getDeadlinesBeforeOrEqualToEndTime("},{"lineNumber":468,"author":{"gitId":"-"},"content":"      this.studentDeadlines, submissionEndTimestamp);"},{"lineNumber":469,"author":{"gitId":"-"},"content":"    const instructorDeadlinesToDelete \u003d DeadlineExtensionHelper.getDeadlinesBeforeOrEqualToEndTime("},{"lineNumber":470,"author":{"gitId":"-"},"content":"      this.instructorDeadlines, submissionEndTimestamp);"},{"lineNumber":471,"author":{"gitId":"-"},"content":"    return [studentDeadlinesToDelete, instructorDeadlinesToDelete];"},{"lineNumber":472,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":473,"author":{"gitId":"-"},"content":""},{"lineNumber":474,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":475,"author":{"gitId":"-"},"content":"   * Get models for individuals whose deadline extensions are before or equal to the new session end time."},{"lineNumber":476,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":477,"author":{"gitId":"-"},"content":"  private getAffectedIndividualModels("},{"lineNumber":478,"author":{"gitId":"-"},"content":"    submissionEndTimestamp: number,"},{"lineNumber":479,"author":{"gitId":"-"},"content":"    affectedStudentDeadlines: Record\u003cstring, number\u003e,"},{"lineNumber":480,"author":{"gitId":"-"},"content":"    affectedInstructorDeadlines: Record\u003cstring, number\u003e,"},{"lineNumber":481,"author":{"gitId":"-"},"content":"  ): [StudentExtensionTableColumnModel[], InstructorExtensionTableColumnModel[]] {"},{"lineNumber":482,"author":{"gitId":"-"},"content":"    const affectedStudents \u003d this.studentsOfCourse.filter((student) \u003d\u003e affectedStudentDeadlines[student.email]);"},{"lineNumber":483,"author":{"gitId":"-"},"content":"    const affectedInstructors \u003d this.instructorsOfCourse"},{"lineNumber":484,"author":{"gitId":"-"},"content":"      .filter((instructor) \u003d\u003e affectedInstructorDeadlines[instructor.email]);"},{"lineNumber":485,"author":{"gitId":"-"},"content":""},{"lineNumber":486,"author":{"gitId":"-"},"content":"    const affectedStudentModels \u003d DeadlineExtensionHelper.mapStudentsToStudentModels("},{"lineNumber":487,"author":{"gitId":"-"},"content":"      affectedStudents, affectedStudentDeadlines, submissionEndTimestamp,"},{"lineNumber":488,"author":{"gitId":"-"},"content":"    );"},{"lineNumber":489,"author":{"gitId":"-"},"content":"    const affectedInstructorModels \u003d DeadlineExtensionHelper.mapInstructorsToInstructorModels("},{"lineNumber":490,"author":{"gitId":"-"},"content":"      affectedInstructors, affectedInstructorDeadlines, submissionEndTimestamp,"},{"lineNumber":491,"author":{"gitId":"-"},"content":"    );"},{"lineNumber":492,"author":{"gitId":"-"},"content":"    return [affectedStudentModels, affectedInstructorModels];"},{"lineNumber":493,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":494,"author":{"gitId":"-"},"content":""},{"lineNumber":495,"author":{"gitId":"-"},"content":"  private removeDeadlines(students: StudentExtensionTableColumnModel[],"},{"lineNumber":496,"author":{"gitId":"-"},"content":"    instructors: InstructorExtensionTableColumnModel[],"},{"lineNumber":497,"author":{"gitId":"-"},"content":"  ): void {"},{"lineNumber":498,"author":{"gitId":"-"},"content":"    this.studentDeadlines \u003d DeadlineExtensionHelper"},{"lineNumber":499,"author":{"gitId":"-"},"content":"      .getUpdatedDeadlinesForDeletion(students, this.studentDeadlines);"},{"lineNumber":500,"author":{"gitId":"-"},"content":"    this.instructorDeadlines \u003d DeadlineExtensionHelper"},{"lineNumber":501,"author":{"gitId":"-"},"content":"      .getUpdatedDeadlinesForDeletion(instructors, this.instructorDeadlines);"},{"lineNumber":502,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":503,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":504,"author":{"gitId":"-"},"content":"   * Handles canceling existing session event without saving changes."},{"lineNumber":505,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":506,"author":{"gitId":"-"},"content":"  cancelEditingSessionHandler(): void {"},{"lineNumber":507,"author":{"gitId":"-"},"content":"    this.sessionEditFormModel \u003d JSON.parse(JSON.stringify(this.feedbackSessionModelBeforeEditing));"},{"lineNumber":508,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":509,"author":{"gitId":"-"},"content":""},{"lineNumber":510,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":511,"author":{"gitId":"-"},"content":"   * Handles deleting current feedback session."},{"lineNumber":512,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":513,"author":{"gitId":"-"},"content":"  deleteExistingSessionHandler(): void {"},{"lineNumber":514,"author":{"gitId":"-"},"content":"    this.sessionEditFormModel.isDeleting \u003d true;"},{"lineNumber":515,"author":{"gitId":"-"},"content":"    this.feedbackSessionsService.moveSessionToRecycleBin(this.courseId, this.feedbackSessionName)"},{"lineNumber":516,"author":{"gitId":"-"},"content":"      .pipe(finalize(() \u003d\u003e {"},{"lineNumber":517,"author":{"gitId":"-"},"content":"        this.sessionEditFormModel.isDeleting \u003d false;"},{"lineNumber":518,"author":{"gitId":"-"},"content":"      }))"},{"lineNumber":519,"author":{"gitId":"-"},"content":"      .subscribe({"},{"lineNumber":520,"author":{"gitId":"-"},"content":"        next: () \u003d\u003e {"},{"lineNumber":521,"author":{"gitId":"-"},"content":"          this.navigationService.navigateWithSuccessMessage(\u0027/web/instructor/sessions\u0027,"},{"lineNumber":522,"author":{"gitId":"-"},"content":"              \u0027The feedback session has been deleted. You can restore it from the deleted sessions table below.\u0027);"},{"lineNumber":523,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":524,"author":{"gitId":"-"},"content":"        error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":525,"author":{"gitId":"-"},"content":"          this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":526,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":527,"author":{"gitId":"-"},"content":"      });"},{"lineNumber":528,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":529,"author":{"gitId":"-"},"content":""},{"lineNumber":530,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":531,"author":{"gitId":"-"},"content":"   * Loads feedback questions."},{"lineNumber":532,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":533,"author":{"gitId":"-"},"content":"  loadFeedbackQuestions(): void {"},{"lineNumber":534,"author":{"gitId":"-"},"content":"    this.questionEditFormModels \u003d [];"},{"lineNumber":535,"author":{"gitId":"-"},"content":"    this.hasLoadingFeedbackQuestionsFailed \u003d false;"},{"lineNumber":536,"author":{"gitId":"-"},"content":"    this.isLoadingFeedbackQuestions \u003d true;"},{"lineNumber":537,"author":{"gitId":"-"},"content":"    this.feedbackQuestionsService.getFeedbackQuestions({"},{"lineNumber":538,"author":{"gitId":"-"},"content":"      courseId: this.courseId,"},{"lineNumber":539,"author":{"gitId":"-"},"content":"      feedbackSessionName: this.feedbackSessionName,"},{"lineNumber":540,"author":{"gitId":"-"},"content":"      intent: Intent.FULL_DETAIL,"},{"lineNumber":541,"author":{"gitId":"-"},"content":"    })"},{"lineNumber":542,"author":{"gitId":"-"},"content":"        .pipe(finalize(() \u003d\u003e {"},{"lineNumber":543,"author":{"gitId":"-"},"content":"          this.isLoadingFeedbackQuestions \u003d false;"},{"lineNumber":544,"author":{"gitId":"-"},"content":"        }))"},{"lineNumber":545,"author":{"gitId":"-"},"content":"        .subscribe({"},{"lineNumber":546,"author":{"gitId":"-"},"content":"          next: (response: FeedbackQuestions) \u003d\u003e {"},{"lineNumber":547,"author":{"gitId":"-"},"content":"            response.questions.forEach((feedbackQuestion: FeedbackQuestion) \u003d\u003e {"},{"lineNumber":548,"author":{"gitId":"-"},"content":"              const addedQuestionEditFormModel: QuestionEditFormModel \u003d this.getQuestionEditFormModel(feedbackQuestion);"},{"lineNumber":549,"author":{"gitId":"-"},"content":"              this.questionEditFormModels.push(addedQuestionEditFormModel);"},{"lineNumber":550,"author":{"gitId":"-"},"content":"              this.loadResponseStatusForQuestion(addedQuestionEditFormModel);"},{"lineNumber":551,"author":{"gitId":"-"},"content":"              this.feedbackQuestionModels.set(feedbackQuestion.feedbackQuestionId, feedbackQuestion);"},{"lineNumber":552,"author":{"gitId":"-"},"content":"            });"},{"lineNumber":553,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":554,"author":{"gitId":"-"},"content":"          error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":555,"author":{"gitId":"-"},"content":"            this.hasLoadingFeedbackQuestionsFailed \u003d true;"},{"lineNumber":556,"author":{"gitId":"-"},"content":"            this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":557,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":558,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":559,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":560,"author":{"gitId":"-"},"content":""},{"lineNumber":561,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":562,"author":{"gitId":"-"},"content":"   * Tracks the question edit form by feedback question id."},{"lineNumber":563,"author":{"gitId":"-"},"content":"   *"},{"lineNumber":564,"author":{"gitId":"-"},"content":"   * @see https://angular.io/api/common/NgForOf#properties"},{"lineNumber":565,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":566,"author":{"gitId":"-"},"content":"  trackQuestionEditFormByFn(_: any, item: QuestionEditFormModel): any {"},{"lineNumber":567,"author":{"gitId":"-"},"content":"    return item.feedbackQuestionId;"},{"lineNumber":568,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":569,"author":{"gitId":"-"},"content":""},{"lineNumber":570,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":571,"author":{"gitId":"-"},"content":"   * Converts feedback question to the question edit form model."},{"lineNumber":572,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":573,"author":{"gitId":"-"},"content":"  private getQuestionEditFormModel(feedbackQuestion: FeedbackQuestion): QuestionEditFormModel {"},{"lineNumber":574,"author":{"gitId":"-"},"content":"    return {"},{"lineNumber":575,"author":{"gitId":"-"},"content":"      feedbackQuestionId: feedbackQuestion.feedbackQuestionId,"},{"lineNumber":576,"author":{"gitId":"-"},"content":""},{"lineNumber":577,"author":{"gitId":"-"},"content":"      questionNumber: feedbackQuestion.questionNumber,"},{"lineNumber":578,"author":{"gitId":"-"},"content":"      questionBrief: feedbackQuestion.questionBrief,"},{"lineNumber":579,"author":{"gitId":"-"},"content":"      questionDescription: feedbackQuestion.questionDescription,"},{"lineNumber":580,"author":{"gitId":"-"},"content":""},{"lineNumber":581,"author":{"gitId":"-"},"content":"      isQuestionHasResponses: false,"},{"lineNumber":582,"author":{"gitId":"-"},"content":""},{"lineNumber":583,"author":{"gitId":"-"},"content":"      questionType: feedbackQuestion.questionType,"},{"lineNumber":584,"author":{"gitId":"-"},"content":"      questionDetails: this.deepCopy(feedbackQuestion.questionDetails),"},{"lineNumber":585,"author":{"gitId":"-"},"content":""},{"lineNumber":586,"author":{"gitId":"-"},"content":"      giverType: feedbackQuestion.giverType,"},{"lineNumber":587,"author":{"gitId":"-"},"content":"      recipientType: feedbackQuestion.recipientType,"},{"lineNumber":588,"author":{"gitId":"-"},"content":""},{"lineNumber":589,"author":{"gitId":"-"},"content":"      numberOfEntitiesToGiveFeedbackToSetting: feedbackQuestion.numberOfEntitiesToGiveFeedbackToSetting,"},{"lineNumber":590,"author":{"gitId":"-"},"content":"      customNumberOfEntitiesToGiveFeedbackTo: feedbackQuestion.customNumberOfEntitiesToGiveFeedbackTo"},{"lineNumber":591,"author":{"gitId":"-"},"content":"          ? feedbackQuestion.customNumberOfEntitiesToGiveFeedbackTo : 1,"},{"lineNumber":592,"author":{"gitId":"-"},"content":""},{"lineNumber":593,"author":{"gitId":"-"},"content":"      showResponsesTo: feedbackQuestion.showResponsesTo,"},{"lineNumber":594,"author":{"gitId":"-"},"content":"      showGiverNameTo: feedbackQuestion.showGiverNameTo,"},{"lineNumber":595,"author":{"gitId":"-"},"content":"      showRecipientNameTo: feedbackQuestion.showRecipientNameTo,"},{"lineNumber":596,"author":{"gitId":"-"},"content":""},{"lineNumber":597,"author":{"gitId":"-"},"content":"      isDeleting: false,"},{"lineNumber":598,"author":{"gitId":"-"},"content":"      isDuplicating: false,"},{"lineNumber":599,"author":{"gitId":"-"},"content":"      isEditable: false,"},{"lineNumber":600,"author":{"gitId":"-"},"content":"      isSaving: false,"},{"lineNumber":601,"author":{"gitId":"-"},"content":"      isCollapsed: false,"},{"lineNumber":602,"author":{"gitId":"-"},"content":""},{"lineNumber":603,"author":{"gitId":"-"},"content":"      isVisibilityChanged: false,"},{"lineNumber":604,"author":{"gitId":"-"},"content":"      isFeedbackPathChanged: false,"},{"lineNumber":605,"author":{"gitId":"-"},"content":"      isQuestionDetailsChanged: false,"},{"lineNumber":606,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":607,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":608,"author":{"gitId":"-"},"content":""},{"lineNumber":609,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":610,"author":{"gitId":"-"},"content":"   * Loads the isQuestionHasResponses value for a question edit for model."},{"lineNumber":611,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":612,"author":{"gitId":"-"},"content":"  private loadResponseStatusForQuestion(model: QuestionEditFormModel): void {"},{"lineNumber":613,"author":{"gitId":"-"},"content":"    this.feedbackSessionsService.hasResponsesForQuestion(model.feedbackQuestionId)"},{"lineNumber":614,"author":{"gitId":"-"},"content":"        .subscribe({"},{"lineNumber":615,"author":{"gitId":"-"},"content":"          next: (resp: HasResponses) \u003d\u003e {"},{"lineNumber":616,"author":{"gitId":"-"},"content":"            model.isQuestionHasResponses \u003d resp.hasResponses;"},{"lineNumber":617,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":618,"author":{"gitId":"-"},"content":"          error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":619,"author":{"gitId":"-"},"content":"            this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":620,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":621,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":622,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":623,"author":{"gitId":"-"},"content":""},{"lineNumber":624,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":625,"author":{"gitId":"-"},"content":"   * Saves the existing question."},{"lineNumber":626,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":627,"author":{"gitId":"-"},"content":"  saveExistingQuestionHandler(index: number): void {"},{"lineNumber":628,"author":{"gitId":"-"},"content":"    const questionEditFormModel: QuestionEditFormModel \u003d this.questionEditFormModels[index];"},{"lineNumber":629,"author":{"gitId":"-"},"content":"    const originalQuestionNumber: number \u003d"},{"lineNumber":630,"author":{"gitId":"-"},"content":"        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion"},{"lineNumber":631,"author":{"gitId":"-"},"content":"        this.feedbackQuestionModels.get(questionEditFormModel.feedbackQuestionId)!.questionNumber;"},{"lineNumber":632,"author":{"gitId":"-"},"content":""},{"lineNumber":633,"author":{"gitId":"-"},"content":"    questionEditFormModel.isSaving \u003d true;"},{"lineNumber":634,"author":{"gitId":"-"},"content":"    this.feedbackQuestionsService.saveFeedbackQuestion(questionEditFormModel.feedbackQuestionId, {"},{"lineNumber":635,"author":{"gitId":"-"},"content":"      questionNumber: questionEditFormModel.questionNumber,"},{"lineNumber":636,"author":{"gitId":"-"},"content":"      questionBrief: questionEditFormModel.questionBrief,"},{"lineNumber":637,"author":{"gitId":"-"},"content":"      questionDescription: questionEditFormModel.questionDescription,"},{"lineNumber":638,"author":{"gitId":"-"},"content":""},{"lineNumber":639,"author":{"gitId":"-"},"content":"      questionDetails: questionEditFormModel.questionDetails,"},{"lineNumber":640,"author":{"gitId":"-"},"content":"      questionType: questionEditFormModel.questionType,"},{"lineNumber":641,"author":{"gitId":"-"},"content":""},{"lineNumber":642,"author":{"gitId":"-"},"content":"      giverType: questionEditFormModel.giverType,"},{"lineNumber":643,"author":{"gitId":"-"},"content":"      recipientType: questionEditFormModel.recipientType,"},{"lineNumber":644,"author":{"gitId":"-"},"content":""},{"lineNumber":645,"author":{"gitId":"-"},"content":"      numberOfEntitiesToGiveFeedbackToSetting: questionEditFormModel.numberOfEntitiesToGiveFeedbackToSetting,"},{"lineNumber":646,"author":{"gitId":"-"},"content":"      customNumberOfEntitiesToGiveFeedbackTo: questionEditFormModel.customNumberOfEntitiesToGiveFeedbackTo,"},{"lineNumber":647,"author":{"gitId":"-"},"content":""},{"lineNumber":648,"author":{"gitId":"-"},"content":"      showResponsesTo: questionEditFormModel.showResponsesTo,"},{"lineNumber":649,"author":{"gitId":"-"},"content":"      showGiverNameTo: questionEditFormModel.showGiverNameTo,"},{"lineNumber":650,"author":{"gitId":"-"},"content":"      showRecipientNameTo: questionEditFormModel.showRecipientNameTo,"},{"lineNumber":651,"author":{"gitId":"-"},"content":"    })"},{"lineNumber":652,"author":{"gitId":"-"},"content":"        .pipe("},{"lineNumber":653,"author":{"gitId":"-"},"content":"            finalize(() \u003d\u003e {"},{"lineNumber":654,"author":{"gitId":"-"},"content":"              questionEditFormModel.isSaving \u003d false;"},{"lineNumber":655,"author":{"gitId":"-"},"content":"            }),"},{"lineNumber":656,"author":{"gitId":"-"},"content":"        )"},{"lineNumber":657,"author":{"gitId":"-"},"content":"        .subscribe({"},{"lineNumber":658,"author":{"gitId":"-"},"content":"          next: (updatedQuestion: FeedbackQuestion) \u003d\u003e {"},{"lineNumber":659,"author":{"gitId":"-"},"content":"            this.questionEditFormModels[index] \u003d this.getQuestionEditFormModel(updatedQuestion);"},{"lineNumber":660,"author":{"gitId":"-"},"content":"            this.feedbackQuestionModels.set(updatedQuestion.feedbackQuestionId, updatedQuestion);"},{"lineNumber":661,"author":{"gitId":"-"},"content":"            this.loadResponseStatusForQuestion(this.questionEditFormModels[index]);"},{"lineNumber":662,"author":{"gitId":"-"},"content":""},{"lineNumber":663,"author":{"gitId":"-"},"content":"            // shift question if needed"},{"lineNumber":664,"author":{"gitId":"-"},"content":"            if (originalQuestionNumber !\u003d\u003d updatedQuestion.questionNumber) {"},{"lineNumber":665,"author":{"gitId":"-"},"content":"              // move question form"},{"lineNumber":666,"author":{"gitId":"-"},"content":"              this.moveQuestionForm("},{"lineNumber":667,"author":{"gitId":"-"},"content":"                  originalQuestionNumber - 1, updatedQuestion.questionNumber - 1);"},{"lineNumber":668,"author":{"gitId":"-"},"content":"              this.normalizeQuestionNumberInQuestionForms();"},{"lineNumber":669,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":670,"author":{"gitId":"-"},"content":""},{"lineNumber":671,"author":{"gitId":"-"},"content":"            this.statusMessageService.showSuccessToast(\u0027The changes to the question have been updated.\u0027);"},{"lineNumber":672,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":673,"author":{"gitId":"-"},"content":"          error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":674,"author":{"gitId":"-"},"content":"            this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":675,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":676,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":677,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":678,"author":{"gitId":"-"},"content":""},{"lineNumber":679,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":680,"author":{"gitId":"-"},"content":"   * Moves question edit form from the original position to the new position."},{"lineNumber":681,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":682,"author":{"gitId":"-"},"content":"  private moveQuestionForm(originalPosition: number, newPosition: number): void {"},{"lineNumber":683,"author":{"gitId":"-"},"content":"    this.questionEditFormModels.splice(newPosition, 0,"},{"lineNumber":684,"author":{"gitId":"-"},"content":"        this.questionEditFormModels.splice(originalPosition, 1)[0]);"},{"lineNumber":685,"author":{"gitId":"-"},"content":""},{"lineNumber":686,"author":{"gitId":"-"},"content":"    // all expanded questions that were moved upwards must be re-expanded to reload rich text editor"},{"lineNumber":687,"author":{"gitId":"-"},"content":"    const start: number \u003d Math.min(originalPosition, newPosition);"},{"lineNumber":688,"author":{"gitId":"-"},"content":"    const movedExpandedQuestions: QuestionEditFormModel[] \u003d this.questionEditFormModels"},{"lineNumber":689,"author":{"gitId":"-"},"content":"      .slice(start, newPosition + 1)"},{"lineNumber":690,"author":{"gitId":"-"},"content":"      .filter((model: QuestionEditFormModel) \u003d\u003e !model.isCollapsed);"},{"lineNumber":691,"author":{"gitId":"-"},"content":"    movedExpandedQuestions.forEach((model: QuestionEditFormModel) \u003d\u003e {"},{"lineNumber":692,"author":{"gitId":"-"},"content":"      model.isCollapsed \u003d true;"},{"lineNumber":693,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":694,"author":{"gitId":"-"},"content":"    this.changeDetectorRef.detectChanges();"},{"lineNumber":695,"author":{"gitId":"-"},"content":"    movedExpandedQuestions.forEach((model: QuestionEditFormModel) \u003d\u003e {"},{"lineNumber":696,"author":{"gitId":"-"},"content":"      model.isCollapsed \u003d false;"},{"lineNumber":697,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":698,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":699,"author":{"gitId":"-"},"content":""},{"lineNumber":700,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":701,"author":{"gitId":"-"},"content":"   * Normalizes question number in question forms by setting question number in sequence (i.e. 1, 2, 3, 4 ...)."},{"lineNumber":702,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":703,"author":{"gitId":"-"},"content":"  private normalizeQuestionNumberInQuestionForms(): void {"},{"lineNumber":704,"author":{"gitId":"-"},"content":"    for (let i: number \u003d 1; i \u003c\u003d this.questionEditFormModels.length; i +\u003d 1) {"},{"lineNumber":705,"author":{"gitId":"-"},"content":"      const questionEditFormModel: QuestionEditFormModel \u003d this.questionEditFormModels[i - 1];"},{"lineNumber":706,"author":{"gitId":"-"},"content":"      questionEditFormModel.questionNumber \u003d i;"},{"lineNumber":707,"author":{"gitId":"-"},"content":"      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion"},{"lineNumber":708,"author":{"gitId":"-"},"content":"      this.feedbackQuestionModels.get(questionEditFormModel.feedbackQuestionId)!.questionNumber \u003d i;"},{"lineNumber":709,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":710,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":711,"author":{"gitId":"-"},"content":""},{"lineNumber":712,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":713,"author":{"gitId":"-"},"content":"   * Discards the changes made to the existing question."},{"lineNumber":714,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":715,"author":{"gitId":"-"},"content":"  discardExistingQuestionHandler(index: number): void {"},{"lineNumber":716,"author":{"gitId":"-"},"content":"    const questionEditFormModel: QuestionEditFormModel \u003d this.questionEditFormModels[index];"},{"lineNumber":717,"author":{"gitId":"-"},"content":"    const feedbackQuestion: FeedbackQuestion \u003d"},{"lineNumber":718,"author":{"gitId":"-"},"content":"        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion"},{"lineNumber":719,"author":{"gitId":"-"},"content":"        this.feedbackQuestionModels.get(questionEditFormModel.feedbackQuestionId)!;"},{"lineNumber":720,"author":{"gitId":"-"},"content":"    this.questionEditFormModels[index] \u003d this.getQuestionEditFormModel(feedbackQuestion);"},{"lineNumber":721,"author":{"gitId":"-"},"content":"    this.questionEditFormModels[index].isQuestionHasResponses \u003d questionEditFormModel.isQuestionHasResponses;"},{"lineNumber":722,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":723,"author":{"gitId":"-"},"content":""},{"lineNumber":724,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":725,"author":{"gitId":"-"},"content":"   * Duplicates the question."},{"lineNumber":726,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":727,"author":{"gitId":"-"},"content":"  duplicateCurrentQuestionHandler(index: number): void {"},{"lineNumber":728,"author":{"gitId":"-"},"content":"    const questionEditFormModel: QuestionEditFormModel \u003d this.questionEditFormModels[index];"},{"lineNumber":729,"author":{"gitId":"-"},"content":""},{"lineNumber":730,"author":{"gitId":"-"},"content":"    questionEditFormModel.isDuplicating \u003d true;"},{"lineNumber":731,"author":{"gitId":"-"},"content":"    this.feedbackQuestionsService.createFeedbackQuestion(this.courseId, this.feedbackSessionName, {"},{"lineNumber":732,"author":{"gitId":"-"},"content":"      questionNumber: this.questionEditFormModels.length + 1, // add the duplicated question at the end"},{"lineNumber":733,"author":{"gitId":"-"},"content":"      questionBrief: questionEditFormModel.questionBrief,"},{"lineNumber":734,"author":{"gitId":"-"},"content":"      questionDescription: questionEditFormModel.questionDescription,"},{"lineNumber":735,"author":{"gitId":"-"},"content":""},{"lineNumber":736,"author":{"gitId":"-"},"content":"      questionDetails: questionEditFormModel.questionDetails,"},{"lineNumber":737,"author":{"gitId":"-"},"content":"      questionType: questionEditFormModel.questionType,"},{"lineNumber":738,"author":{"gitId":"-"},"content":""},{"lineNumber":739,"author":{"gitId":"-"},"content":"      giverType: questionEditFormModel.giverType,"},{"lineNumber":740,"author":{"gitId":"-"},"content":"      recipientType: questionEditFormModel.recipientType,"},{"lineNumber":741,"author":{"gitId":"-"},"content":""},{"lineNumber":742,"author":{"gitId":"-"},"content":"      numberOfEntitiesToGiveFeedbackToSetting: questionEditFormModel.numberOfEntitiesToGiveFeedbackToSetting,"},{"lineNumber":743,"author":{"gitId":"-"},"content":"      customNumberOfEntitiesToGiveFeedbackTo: questionEditFormModel.customNumberOfEntitiesToGiveFeedbackTo,"},{"lineNumber":744,"author":{"gitId":"-"},"content":""},{"lineNumber":745,"author":{"gitId":"-"},"content":"      showResponsesTo: questionEditFormModel.showResponsesTo,"},{"lineNumber":746,"author":{"gitId":"-"},"content":"      showGiverNameTo: questionEditFormModel.showGiverNameTo,"},{"lineNumber":747,"author":{"gitId":"-"},"content":"      showRecipientNameTo: questionEditFormModel.showRecipientNameTo,"},{"lineNumber":748,"author":{"gitId":"-"},"content":"    })"},{"lineNumber":749,"author":{"gitId":"-"},"content":"        .pipe("},{"lineNumber":750,"author":{"gitId":"-"},"content":"            finalize(() \u003d\u003e {"},{"lineNumber":751,"author":{"gitId":"-"},"content":"              questionEditFormModel.isDuplicating \u003d false;"},{"lineNumber":752,"author":{"gitId":"-"},"content":"            }),"},{"lineNumber":753,"author":{"gitId":"-"},"content":"        )"},{"lineNumber":754,"author":{"gitId":"-"},"content":"        .subscribe({"},{"lineNumber":755,"author":{"gitId":"-"},"content":"          next: (newQuestion: FeedbackQuestion) \u003d\u003e {"},{"lineNumber":756,"author":{"gitId":"-"},"content":"            this.questionEditFormModels.push(this.getQuestionEditFormModel(newQuestion));"},{"lineNumber":757,"author":{"gitId":"-"},"content":"            this.feedbackQuestionModels.set(newQuestion.feedbackQuestionId, newQuestion);"},{"lineNumber":758,"author":{"gitId":"-"},"content":"            this.statusMessageService.showSuccessToast(\u0027The question has been duplicated below.\u0027);"},{"lineNumber":759,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":760,"author":{"gitId":"-"},"content":"          error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":761,"author":{"gitId":"-"},"content":"            this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":762,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":763,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":764,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":765,"author":{"gitId":"-"},"content":""},{"lineNumber":766,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":767,"author":{"gitId":"-"},"content":"   * Deletes the existing question."},{"lineNumber":768,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":769,"author":{"gitId":"-"},"content":"  deleteExistingQuestionHandler(index: number): void {"},{"lineNumber":770,"author":{"gitId":"-"},"content":"    const modalRef: NgbModalRef \u003d this.simpleModalService.openConfirmationModal("},{"lineNumber":771,"author":{"gitId":"-"},"content":"        \u0027Delete the question?\u0027, SimpleModalType.DANGER,"},{"lineNumber":772,"author":{"gitId":"-"},"content":"        \u0027Warning: Deleted question cannot be recovered. \u0027"},{"lineNumber":773,"author":{"gitId":"-"},"content":"        + \u0027\u003cb\u003eAll existing responses for this question to be deleted.\u003c/b\u003e\u0027);"},{"lineNumber":774,"author":{"gitId":"-"},"content":"    modalRef.result.then(() \u003d\u003e {"},{"lineNumber":775,"author":{"gitId":"-"},"content":"      const questionEditFormModel: QuestionEditFormModel \u003d this.questionEditFormModels[index];"},{"lineNumber":776,"author":{"gitId":"-"},"content":"      questionEditFormModel.isDeleting \u003d true;"},{"lineNumber":777,"author":{"gitId":"-"},"content":"      this.feedbackQuestionsService.deleteFeedbackQuestion(questionEditFormModel.feedbackQuestionId)"},{"lineNumber":778,"author":{"gitId":"-"},"content":"          .pipe(finalize(() \u003d\u003e {"},{"lineNumber":779,"author":{"gitId":"-"},"content":"            questionEditFormModel.isDeleting \u003d false;"},{"lineNumber":780,"author":{"gitId":"-"},"content":"          }))"},{"lineNumber":781,"author":{"gitId":"-"},"content":"          .subscribe({"},{"lineNumber":782,"author":{"gitId":"-"},"content":"            next: () \u003d\u003e {"},{"lineNumber":783,"author":{"gitId":"-"},"content":"              // remove form model"},{"lineNumber":784,"author":{"gitId":"-"},"content":"              this.feedbackQuestionModels.delete(questionEditFormModel.feedbackQuestionId);"},{"lineNumber":785,"author":{"gitId":"-"},"content":"              this.questionEditFormModels.splice(index, 1);"},{"lineNumber":786,"author":{"gitId":"-"},"content":"              this.normalizeQuestionNumberInQuestionForms();"},{"lineNumber":787,"author":{"gitId":"-"},"content":""},{"lineNumber":788,"author":{"gitId":"-"},"content":"              this.statusMessageService.showSuccessToast(\u0027The question has been deleted.\u0027);"},{"lineNumber":789,"author":{"gitId":"-"},"content":"            },"},{"lineNumber":790,"author":{"gitId":"-"},"content":"            error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":791,"author":{"gitId":"-"},"content":"              this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":792,"author":{"gitId":"-"},"content":"            },"},{"lineNumber":793,"author":{"gitId":"-"},"content":"          });"},{"lineNumber":794,"author":{"gitId":"-"},"content":"    }, () \u003d\u003e {});"},{"lineNumber":795,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":796,"author":{"gitId":"-"},"content":""},{"lineNumber":797,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":798,"author":{"gitId":"-"},"content":"   * Handles display of template question modal."},{"lineNumber":799,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":800,"author":{"gitId":"-"},"content":"  templateQuestionModalHandler(): void {"},{"lineNumber":801,"author":{"gitId":"-"},"content":"    const windowClass: string \u003d \u0027modal-large\u0027;"},{"lineNumber":802,"author":{"gitId":"-"},"content":"    this.ngbModal.open(TemplateQuestionModalComponent, { windowClass }).result.then((questions: FeedbackQuestion[]) \u003d\u003e {"},{"lineNumber":803,"author":{"gitId":"-"},"content":"      let questionNumber: number \u003d this.questionEditFormModels.length; // append the questions at the end"},{"lineNumber":804,"author":{"gitId":"-"},"content":"      this.isAddingFromTemplate \u003d true;"},{"lineNumber":805,"author":{"gitId":"-"},"content":"      of(...questions).pipe("},{"lineNumber":806,"author":{"gitId":"-"},"content":"          concatMap((question: FeedbackQuestion) \u003d\u003e {"},{"lineNumber":807,"author":{"gitId":"-"},"content":"            questionNumber +\u003d 1;"},{"lineNumber":808,"author":{"gitId":"-"},"content":"            return this.feedbackQuestionsService.createFeedbackQuestion(this.courseId, this.feedbackSessionName, {"},{"lineNumber":809,"author":{"gitId":"-"},"content":"              questionNumber,"},{"lineNumber":810,"author":{"gitId":"-"},"content":"              questionBrief: question.questionBrief,"},{"lineNumber":811,"author":{"gitId":"-"},"content":"              questionDescription: question.questionDescription,"},{"lineNumber":812,"author":{"gitId":"-"},"content":""},{"lineNumber":813,"author":{"gitId":"-"},"content":"              questionDetails: question.questionDetails,"},{"lineNumber":814,"author":{"gitId":"-"},"content":"              questionType: question.questionType,"},{"lineNumber":815,"author":{"gitId":"-"},"content":""},{"lineNumber":816,"author":{"gitId":"-"},"content":"              giverType: question.giverType,"},{"lineNumber":817,"author":{"gitId":"-"},"content":"              recipientType: question.recipientType,"},{"lineNumber":818,"author":{"gitId":"-"},"content":""},{"lineNumber":819,"author":{"gitId":"-"},"content":"              numberOfEntitiesToGiveFeedbackToSetting: question.numberOfEntitiesToGiveFeedbackToSetting,"},{"lineNumber":820,"author":{"gitId":"-"},"content":"              customNumberOfEntitiesToGiveFeedbackTo: question.customNumberOfEntitiesToGiveFeedbackTo,"},{"lineNumber":821,"author":{"gitId":"-"},"content":""},{"lineNumber":822,"author":{"gitId":"-"},"content":"              showResponsesTo: question.showResponsesTo,"},{"lineNumber":823,"author":{"gitId":"-"},"content":"              showGiverNameTo: question.showGiverNameTo,"},{"lineNumber":824,"author":{"gitId":"-"},"content":"              showRecipientNameTo: question.showRecipientNameTo,"},{"lineNumber":825,"author":{"gitId":"-"},"content":"            });"},{"lineNumber":826,"author":{"gitId":"-"},"content":"          }),"},{"lineNumber":827,"author":{"gitId":"-"},"content":"      ).pipe("},{"lineNumber":828,"author":{"gitId":"-"},"content":"        finalize(() \u003d\u003e {"},{"lineNumber":829,"author":{"gitId":"-"},"content":"          this.isAddingFromTemplate \u003d false;"},{"lineNumber":830,"author":{"gitId":"-"},"content":"        }),"},{"lineNumber":831,"author":{"gitId":"-"},"content":"      ).subscribe({"},{"lineNumber":832,"author":{"gitId":"-"},"content":"        next: (newQuestion: FeedbackQuestion) \u003d\u003e {"},{"lineNumber":833,"author":{"gitId":"-"},"content":"          this.questionEditFormModels.push(this.getQuestionEditFormModel(newQuestion));"},{"lineNumber":834,"author":{"gitId":"-"},"content":"          this.feedbackQuestionModels.set(newQuestion.feedbackQuestionId, newQuestion);"},{"lineNumber":835,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":836,"author":{"gitId":"-"},"content":"        error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":837,"author":{"gitId":"-"},"content":"          this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":838,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":839,"author":{"gitId":"-"},"content":"        complete: () \u003d\u003e {"},{"lineNumber":840,"author":{"gitId":"-"},"content":"          if (questions.length \u003d\u003d\u003d 1) {"},{"lineNumber":841,"author":{"gitId":"-"},"content":"            this.statusMessageService.showSuccessToast(\u0027The question has been added to this feedback session.\u0027);"},{"lineNumber":842,"author":{"gitId":"-"},"content":"          } else {"},{"lineNumber":843,"author":{"gitId":"-"},"content":"            this.statusMessageService.showSuccessToast(\u0027The questions have been added to this feedback session.\u0027);"},{"lineNumber":844,"author":{"gitId":"-"},"content":"          }"},{"lineNumber":845,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":846,"author":{"gitId":"-"},"content":"      });"},{"lineNumber":847,"author":{"gitId":"-"},"content":"    }, () \u003d\u003e {});"},{"lineNumber":848,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":849,"author":{"gitId":"-"},"content":""},{"lineNumber":850,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":851,"author":{"gitId":"-"},"content":"   * Populates and shows new question edit form."},{"lineNumber":852,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":853,"author":{"gitId":"-"},"content":"  populateAndShowNewQuestionForm(type: FeedbackQuestionType): void {"},{"lineNumber":854,"author":{"gitId":"-"},"content":"    this.isAddingQuestionPanelExpanded \u003d true;"},{"lineNumber":855,"author":{"gitId":"-"},"content":""},{"lineNumber":856,"author":{"gitId":"-"},"content":"    const newQuestionModel: NewQuestionModel \u003d"},{"lineNumber":857,"author":{"gitId":"-"},"content":"        this.feedbackQuestionsService.getNewQuestionModel(type);"},{"lineNumber":858,"author":{"gitId":"-"},"content":""},{"lineNumber":859,"author":{"gitId":"-"},"content":"    this.newQuestionEditFormModel \u003d {"},{"lineNumber":860,"author":{"gitId":"-"},"content":"      feedbackQuestionId: \u0027\u0027,"},{"lineNumber":861,"author":{"gitId":"-"},"content":"      questionNumber: this.questionEditFormModels.length + 1,"},{"lineNumber":862,"author":{"gitId":"-"},"content":"      questionBrief: newQuestionModel.questionBrief,"},{"lineNumber":863,"author":{"gitId":"-"},"content":"      questionDescription: newQuestionModel.questionDescription,"},{"lineNumber":864,"author":{"gitId":"-"},"content":""},{"lineNumber":865,"author":{"gitId":"-"},"content":"      isQuestionHasResponses: false,"},{"lineNumber":866,"author":{"gitId":"-"},"content":""},{"lineNumber":867,"author":{"gitId":"-"},"content":"      questionType: newQuestionModel.questionType,"},{"lineNumber":868,"author":{"gitId":"-"},"content":"      questionDetails: newQuestionModel.questionDetails,"},{"lineNumber":869,"author":{"gitId":"-"},"content":""},{"lineNumber":870,"author":{"gitId":"-"},"content":"      giverType: newQuestionModel.giverType,"},{"lineNumber":871,"author":{"gitId":"-"},"content":"      recipientType: newQuestionModel.recipientType,"},{"lineNumber":872,"author":{"gitId":"-"},"content":""},{"lineNumber":873,"author":{"gitId":"-"},"content":"      numberOfEntitiesToGiveFeedbackToSetting: newQuestionModel.numberOfEntitiesToGiveFeedbackToSetting,"},{"lineNumber":874,"author":{"gitId":"-"},"content":"      customNumberOfEntitiesToGiveFeedbackTo: newQuestionModel.customNumberOfEntitiesToGiveFeedbackTo"},{"lineNumber":875,"author":{"gitId":"-"},"content":"          ? newQuestionModel.customNumberOfEntitiesToGiveFeedbackTo : 1,"},{"lineNumber":876,"author":{"gitId":"-"},"content":""},{"lineNumber":877,"author":{"gitId":"-"},"content":"      showResponsesTo: newQuestionModel.showResponsesTo,"},{"lineNumber":878,"author":{"gitId":"-"},"content":"      showGiverNameTo: newQuestionModel.showGiverNameTo,"},{"lineNumber":879,"author":{"gitId":"-"},"content":"      showRecipientNameTo: newQuestionModel.showRecipientNameTo,"},{"lineNumber":880,"author":{"gitId":"-"},"content":""},{"lineNumber":881,"author":{"gitId":"-"},"content":"      isDeleting: false,"},{"lineNumber":882,"author":{"gitId":"-"},"content":"      isDuplicating: false,"},{"lineNumber":883,"author":{"gitId":"-"},"content":"      isEditable: true,"},{"lineNumber":884,"author":{"gitId":"-"},"content":"      isSaving: false,"},{"lineNumber":885,"author":{"gitId":"-"},"content":"      isCollapsed: false,"},{"lineNumber":886,"author":{"gitId":"-"},"content":""},{"lineNumber":887,"author":{"gitId":"-"},"content":"      isVisibilityChanged: false,"},{"lineNumber":888,"author":{"gitId":"-"},"content":"      isFeedbackPathChanged: false,"},{"lineNumber":889,"author":{"gitId":"-"},"content":"      isQuestionDetailsChanged: false,"},{"lineNumber":890,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":891,"author":{"gitId":"-"},"content":""},{"lineNumber":892,"author":{"gitId":"-"},"content":"    // inherit some settings from the last question"},{"lineNumber":893,"author":{"gitId":"-"},"content":"    if (this.questionEditFormModels.length \u003e 0) {"},{"lineNumber":894,"author":{"gitId":"-"},"content":"      const lastQuestionEditFormModel: QuestionEditFormModel \u003d"},{"lineNumber":895,"author":{"gitId":"-"},"content":"          this.questionEditFormModels[this.questionEditFormModels.length - 1];"},{"lineNumber":896,"author":{"gitId":"-"},"content":""},{"lineNumber":897,"author":{"gitId":"-"},"content":"      const newQuestionAllowedFeedbackPaths: Map\u003cFeedbackParticipantType, FeedbackParticipantType[]\u003e \u003d"},{"lineNumber":898,"author":{"gitId":"-"},"content":"          this.feedbackQuestionsService.getAllowedFeedbackPaths(type);"},{"lineNumber":899,"author":{"gitId":"-"},"content":"      // inherit feedback path if applicable"},{"lineNumber":900,"author":{"gitId":"-"},"content":"      if (newQuestionAllowedFeedbackPaths.has(lastQuestionEditFormModel.giverType)"},{"lineNumber":901,"author":{"gitId":"-"},"content":"          // eslint-disable-next-line @typescript-eslint/no-non-null-assertion"},{"lineNumber":902,"author":{"gitId":"-"},"content":"          \u0026\u0026 newQuestionAllowedFeedbackPaths.get(lastQuestionEditFormModel.giverType)!"},{"lineNumber":903,"author":{"gitId":"-"},"content":"              .indexOf(lastQuestionEditFormModel.recipientType) !\u003d\u003d -1) {"},{"lineNumber":904,"author":{"gitId":"-"},"content":"        this.newQuestionEditFormModel.giverType \u003d lastQuestionEditFormModel.giverType;"},{"lineNumber":905,"author":{"gitId":"-"},"content":"        this.newQuestionEditFormModel.recipientType \u003d lastQuestionEditFormModel.recipientType;"},{"lineNumber":906,"author":{"gitId":"-"},"content":"        this.newQuestionEditFormModel.numberOfEntitiesToGiveFeedbackToSetting \u003d"},{"lineNumber":907,"author":{"gitId":"-"},"content":"          lastQuestionEditFormModel.numberOfEntitiesToGiveFeedbackToSetting;"},{"lineNumber":908,"author":{"gitId":"-"},"content":"        this.newQuestionEditFormModel.customNumberOfEntitiesToGiveFeedbackTo \u003d"},{"lineNumber":909,"author":{"gitId":"-"},"content":"          lastQuestionEditFormModel.customNumberOfEntitiesToGiveFeedbackTo;"},{"lineNumber":910,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":911,"author":{"gitId":"-"},"content":""},{"lineNumber":912,"author":{"gitId":"-"},"content":"      const newQuestionVisibilityStateMachine: VisibilityStateMachine \u003d"},{"lineNumber":913,"author":{"gitId":"-"},"content":"          this.feedbackQuestionsService.getNewVisibilityStateMachine("},{"lineNumber":914,"author":{"gitId":"-"},"content":"              this.newQuestionEditFormModel.giverType, this.newQuestionEditFormModel.recipientType);"},{"lineNumber":915,"author":{"gitId":"-"},"content":"      // inherit visibility settings if applicable, the state machine will automatically filter out invalid choices"},{"lineNumber":916,"author":{"gitId":"-"},"content":"      newQuestionVisibilityStateMachine.applyVisibilitySettings({"},{"lineNumber":917,"author":{"gitId":"-"},"content":"        SHOW_RESPONSE: lastQuestionEditFormModel.showResponsesTo,"},{"lineNumber":918,"author":{"gitId":"-"},"content":"        SHOW_GIVER_NAME: lastQuestionEditFormModel.showGiverNameTo,"},{"lineNumber":919,"author":{"gitId":"-"},"content":"        SHOW_RECIPIENT_NAME: lastQuestionEditFormModel.showRecipientNameTo,"},{"lineNumber":920,"author":{"gitId":"-"},"content":"      });"},{"lineNumber":921,"author":{"gitId":"-"},"content":"      const newQuestionShowResponsesTo: FeedbackVisibilityType[] \u003d"},{"lineNumber":922,"author":{"gitId":"-"},"content":"          newQuestionVisibilityStateMachine.getVisibilityTypesUnderVisibilityControl(VisibilityControl.SHOW_RESPONSE);"},{"lineNumber":923,"author":{"gitId":"-"},"content":"      const newQuestionShowGiverNameTo: FeedbackVisibilityType[] \u003d"},{"lineNumber":924,"author":{"gitId":"-"},"content":"          newQuestionVisibilityStateMachine.getVisibilityTypesUnderVisibilityControl(VisibilityControl.SHOW_GIVER_NAME);"},{"lineNumber":925,"author":{"gitId":"-"},"content":"      const newQuestionShowRecipientNameTo: FeedbackVisibilityType[] \u003d"},{"lineNumber":926,"author":{"gitId":"-"},"content":"          newQuestionVisibilityStateMachine"},{"lineNumber":927,"author":{"gitId":"-"},"content":"              .getVisibilityTypesUnderVisibilityControl(VisibilityControl.SHOW_RECIPIENT_NAME);"},{"lineNumber":928,"author":{"gitId":"-"},"content":""},{"lineNumber":929,"author":{"gitId":"-"},"content":"      let isAllowedToUseInheritedVisibility: boolean \u003d false;"},{"lineNumber":930,"author":{"gitId":"-"},"content":"      if (this.feedbackQuestionsService"},{"lineNumber":931,"author":{"gitId":"-"},"content":"          .isCustomFeedbackVisibilitySettingAllowed(this.newQuestionEditFormModel.questionType)) {"},{"lineNumber":932,"author":{"gitId":"-"},"content":"        isAllowedToUseInheritedVisibility \u003d true;"},{"lineNumber":933,"author":{"gitId":"-"},"content":"      } else {"},{"lineNumber":934,"author":{"gitId":"-"},"content":"        const commonFeedbackVisibilitySettings: CommonVisibilitySetting[] \u003d"},{"lineNumber":935,"author":{"gitId":"-"},"content":"            this.feedbackQuestionsService.getCommonFeedbackVisibilitySettings("},{"lineNumber":936,"author":{"gitId":"-"},"content":"                newQuestionVisibilityStateMachine, this.newQuestionEditFormModel.questionType);"},{"lineNumber":937,"author":{"gitId":"-"},"content":"        // new question is only allowed to have common visibility settings"},{"lineNumber":938,"author":{"gitId":"-"},"content":"        // check whether the inherited settings fall into that or not"},{"lineNumber":939,"author":{"gitId":"-"},"content":"        for (const commonVisibilityOption of commonFeedbackVisibilitySettings) {"},{"lineNumber":940,"author":{"gitId":"-"},"content":"          if (this.isSameSet(newQuestionShowResponsesTo, commonVisibilityOption.visibilitySettings.SHOW_RESPONSE)"},{"lineNumber":941,"author":{"gitId":"-"},"content":"              \u0026\u0026 this.isSameSet(newQuestionShowGiverNameTo,"},{"lineNumber":942,"author":{"gitId":"-"},"content":"                  commonVisibilityOption.visibilitySettings.SHOW_GIVER_NAME)"},{"lineNumber":943,"author":{"gitId":"-"},"content":"              \u0026\u0026 this.isSameSet(newQuestionShowRecipientNameTo,"},{"lineNumber":944,"author":{"gitId":"-"},"content":"                  commonVisibilityOption.visibilitySettings.SHOW_RECIPIENT_NAME)) {"},{"lineNumber":945,"author":{"gitId":"-"},"content":"            isAllowedToUseInheritedVisibility \u003d true;"},{"lineNumber":946,"author":{"gitId":"-"},"content":"            break;"},{"lineNumber":947,"author":{"gitId":"-"},"content":"          }"},{"lineNumber":948,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":949,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":950,"author":{"gitId":"-"},"content":""},{"lineNumber":951,"author":{"gitId":"-"},"content":"      if (isAllowedToUseInheritedVisibility) {"},{"lineNumber":952,"author":{"gitId":"-"},"content":"        this.newQuestionEditFormModel.showResponsesTo \u003d newQuestionShowResponsesTo;"},{"lineNumber":953,"author":{"gitId":"-"},"content":"        this.newQuestionEditFormModel.showGiverNameTo \u003d newQuestionShowGiverNameTo;"},{"lineNumber":954,"author":{"gitId":"-"},"content":"        this.newQuestionEditFormModel.showRecipientNameTo \u003d newQuestionShowRecipientNameTo;"},{"lineNumber":955,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":956,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":957,"author":{"gitId":"-"},"content":""},{"lineNumber":958,"author":{"gitId":"-"},"content":"    this.scrollToNewEditForm();"},{"lineNumber":959,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":960,"author":{"gitId":"-"},"content":""},{"lineNumber":961,"author":{"gitId":"-"},"content":"  private isSameSet(setA: FeedbackVisibilityType[], setB: FeedbackVisibilityType[]): boolean {"},{"lineNumber":962,"author":{"gitId":"-"},"content":"    return setA.length \u003d\u003d\u003d setB.length \u0026\u0026 setA.every((ele: FeedbackVisibilityType) \u003d\u003e setB.includes(ele));"},{"lineNumber":963,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":964,"author":{"gitId":"-"},"content":""},{"lineNumber":965,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":966,"author":{"gitId":"-"},"content":"   * Creates a new question."},{"lineNumber":967,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":968,"author":{"gitId":"-"},"content":"  createNewQuestionHandler(): void {"},{"lineNumber":969,"author":{"gitId":"-"},"content":"    this.newQuestionEditFormModel.isSaving \u003d true;"},{"lineNumber":970,"author":{"gitId":"-"},"content":"    this.feedbackQuestionsService.createFeedbackQuestion(this.courseId, this.feedbackSessionName, {"},{"lineNumber":971,"author":{"gitId":"-"},"content":"      questionNumber: this.newQuestionEditFormModel.questionNumber,"},{"lineNumber":972,"author":{"gitId":"-"},"content":"      questionBrief: this.newQuestionEditFormModel.questionBrief,"},{"lineNumber":973,"author":{"gitId":"-"},"content":"      questionDescription: this.newQuestionEditFormModel.questionDescription,"},{"lineNumber":974,"author":{"gitId":"-"},"content":""},{"lineNumber":975,"author":{"gitId":"-"},"content":"      questionDetails: this.newQuestionEditFormModel.questionDetails,"},{"lineNumber":976,"author":{"gitId":"-"},"content":"      questionType: this.newQuestionEditFormModel.questionType,"},{"lineNumber":977,"author":{"gitId":"-"},"content":""},{"lineNumber":978,"author":{"gitId":"-"},"content":"      giverType: this.newQuestionEditFormModel.giverType,"},{"lineNumber":979,"author":{"gitId":"-"},"content":"      recipientType: this.newQuestionEditFormModel.recipientType,"},{"lineNumber":980,"author":{"gitId":"-"},"content":""},{"lineNumber":981,"author":{"gitId":"-"},"content":"      numberOfEntitiesToGiveFeedbackToSetting: this.newQuestionEditFormModel.numberOfEntitiesToGiveFeedbackToSetting,"},{"lineNumber":982,"author":{"gitId":"-"},"content":"      customNumberOfEntitiesToGiveFeedbackTo: this.newQuestionEditFormModel.customNumberOfEntitiesToGiveFeedbackTo,"},{"lineNumber":983,"author":{"gitId":"-"},"content":""},{"lineNumber":984,"author":{"gitId":"-"},"content":"      showResponsesTo: this.newQuestionEditFormModel.showResponsesTo,"},{"lineNumber":985,"author":{"gitId":"-"},"content":"      showGiverNameTo: this.newQuestionEditFormModel.showGiverNameTo,"},{"lineNumber":986,"author":{"gitId":"-"},"content":"      showRecipientNameTo: this.newQuestionEditFormModel.showRecipientNameTo,"},{"lineNumber":987,"author":{"gitId":"-"},"content":"    })"},{"lineNumber":988,"author":{"gitId":"-"},"content":"        .pipe("},{"lineNumber":989,"author":{"gitId":"-"},"content":"            finalize(() \u003d\u003e {"},{"lineNumber":990,"author":{"gitId":"-"},"content":"              this.newQuestionEditFormModel.isSaving \u003d false;"},{"lineNumber":991,"author":{"gitId":"-"},"content":"            }),"},{"lineNumber":992,"author":{"gitId":"-"},"content":"        )"},{"lineNumber":993,"author":{"gitId":"-"},"content":"        .subscribe({"},{"lineNumber":994,"author":{"gitId":"-"},"content":"          next: (newQuestion: FeedbackQuestion) \u003d\u003e {"},{"lineNumber":995,"author":{"gitId":"-"},"content":"            this.questionEditFormModels.push(this.getQuestionEditFormModel(newQuestion));"},{"lineNumber":996,"author":{"gitId":"-"},"content":"            this.feedbackQuestionModels.set(newQuestion.feedbackQuestionId, newQuestion);"},{"lineNumber":997,"author":{"gitId":"-"},"content":""},{"lineNumber":998,"author":{"gitId":"-"},"content":"            this.moveQuestionForm("},{"lineNumber":999,"author":{"gitId":"-"},"content":"                this.questionEditFormModels.length - 1, newQuestion.questionNumber - 1);"},{"lineNumber":1000,"author":{"gitId":"-"},"content":"            this.normalizeQuestionNumberInQuestionForms();"},{"lineNumber":1001,"author":{"gitId":"-"},"content":"            this.isAddingQuestionPanelExpanded \u003d false;"},{"lineNumber":1002,"author":{"gitId":"-"},"content":""},{"lineNumber":1003,"author":{"gitId":"-"},"content":"            this.statusMessageService.showSuccessToast(\u0027The question has been added to this feedback session.\u0027);"},{"lineNumber":1004,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":1005,"author":{"gitId":"-"},"content":"          error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":1006,"author":{"gitId":"-"},"content":"            this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":1007,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":1008,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":1009,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":1010,"author":{"gitId":"-"},"content":""},{"lineNumber":1011,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":1012,"author":{"gitId":"-"},"content":"   * Handles \u0027Copy Question\u0027 click event."},{"lineNumber":1013,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":1014,"author":{"gitId":"-"},"content":"  copyQuestionsFromOtherSessionsHandler(): void {"},{"lineNumber":1015,"author":{"gitId":"-"},"content":"    this.isCopyingQuestion \u003d true;"},{"lineNumber":1016,"author":{"gitId":"-"},"content":"    const feedbackSessionTabModels: FeedbackSessionTabModel[] \u003d [];"},{"lineNumber":1017,"author":{"gitId":"-"},"content":""},{"lineNumber":1018,"author":{"gitId":"-"},"content":"    this.feedbackSessionsService.getFeedbackSessionsForInstructor().pipe("},{"lineNumber":1019,"author":{"gitId":"-"},"content":"      finalize(() \u003d\u003e {"},{"lineNumber":1020,"author":{"gitId":"-"},"content":"        this.isCopyingQuestion \u003d false;"},{"lineNumber":1021,"author":{"gitId":"-"},"content":"      }),"},{"lineNumber":1022,"author":{"gitId":"-"},"content":"    ).subscribe({"},{"lineNumber":1023,"author":{"gitId":"-"},"content":"      next: (response: FeedbackSessions) \u003d\u003e {"},{"lineNumber":1024,"author":{"gitId":"-"},"content":"        response.feedbackSessions.forEach((feedbackSession: FeedbackSession) \u003d\u003e {"},{"lineNumber":1025,"author":{"gitId":"-"},"content":"          const model: FeedbackSessionTabModel \u003d {"},{"lineNumber":1026,"author":{"gitId":"-"},"content":"            courseId: feedbackSession.courseId,"},{"lineNumber":1027,"author":{"gitId":"-"},"content":"            feedbackSessionName: feedbackSession.feedbackSessionName,"},{"lineNumber":1028,"author":{"gitId":"-"},"content":"            createdAtTimestamp: feedbackSession.createdAtTimestamp,"},{"lineNumber":1029,"author":{"gitId":"-"},"content":"            questionsTableRowModels: [],"},{"lineNumber":1030,"author":{"gitId":"-"},"content":"            isTabExpanded: false,"},{"lineNumber":1031,"author":{"gitId":"-"},"content":"            hasQuestionsLoaded: false,"},{"lineNumber":1032,"author":{"gitId":"-"},"content":"            hasLoadingFailed: false,"},{"lineNumber":1033,"author":{"gitId":"-"},"content":"            questionsTableRowModelsSortBy: SortBy.NONE,"},{"lineNumber":1034,"author":{"gitId":"-"},"content":"            questionsTableRowModelsSortOrder: SortOrder.ASC,"},{"lineNumber":1035,"author":{"gitId":"-"},"content":"          };"},{"lineNumber":1036,"author":{"gitId":"-"},"content":"          feedbackSessionTabModels.push(model);"},{"lineNumber":1037,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":1038,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":1039,"author":{"gitId":"-"},"content":"      error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":1040,"author":{"gitId":"-"},"content":"        this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":1041,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":1042,"author":{"gitId":"-"},"content":"      complete: () \u003d\u003e {"},{"lineNumber":1043,"author":{"gitId":"-"},"content":"        const ref: NgbModalRef \u003d this.ngbModal.open(CopyQuestionsFromOtherSessionsModalComponent);"},{"lineNumber":1044,"author":{"gitId":"-"},"content":"        ref.componentInstance.feedbackSessionTabModels \u003d feedbackSessionTabModels;"},{"lineNumber":1045,"author":{"gitId":"-"},"content":""},{"lineNumber":1046,"author":{"gitId":"-"},"content":"        ref.result.then((questionsToCopy: FeedbackQuestion[]) \u003d\u003e {"},{"lineNumber":1047,"author":{"gitId":"-"},"content":"          this.isCopyingQuestion \u003d true;"},{"lineNumber":1048,"author":{"gitId":"-"},"content":"          of(...questionsToCopy).pipe("},{"lineNumber":1049,"author":{"gitId":"-"},"content":"              concatMap((questionToCopy: FeedbackQuestion) \u003d\u003e {"},{"lineNumber":1050,"author":{"gitId":"-"},"content":"                return this.feedbackQuestionsService.createFeedbackQuestion(this.courseId, this.feedbackSessionName, {"},{"lineNumber":1051,"author":{"gitId":"-"},"content":"                  questionNumber: this.questionEditFormModels.length + 1, // add the copied question at the end"},{"lineNumber":1052,"author":{"gitId":"-"},"content":"                  questionBrief: questionToCopy.questionBrief,"},{"lineNumber":1053,"author":{"gitId":"-"},"content":"                  questionDescription: questionToCopy.questionDescription,"},{"lineNumber":1054,"author":{"gitId":"-"},"content":""},{"lineNumber":1055,"author":{"gitId":"-"},"content":"                  questionDetails: questionToCopy.questionDetails,"},{"lineNumber":1056,"author":{"gitId":"-"},"content":"                  questionType: questionToCopy.questionType,"},{"lineNumber":1057,"author":{"gitId":"-"},"content":""},{"lineNumber":1058,"author":{"gitId":"-"},"content":"                  giverType: questionToCopy.giverType,"},{"lineNumber":1059,"author":{"gitId":"-"},"content":"                  recipientType: questionToCopy.recipientType,"},{"lineNumber":1060,"author":{"gitId":"-"},"content":""},{"lineNumber":1061,"author":{"gitId":"-"},"content":"                  numberOfEntitiesToGiveFeedbackToSetting: questionToCopy.numberOfEntitiesToGiveFeedbackToSetting,"},{"lineNumber":1062,"author":{"gitId":"-"},"content":"                  customNumberOfEntitiesToGiveFeedbackTo: questionToCopy.customNumberOfEntitiesToGiveFeedbackTo,"},{"lineNumber":1063,"author":{"gitId":"-"},"content":""},{"lineNumber":1064,"author":{"gitId":"-"},"content":"                  showResponsesTo: questionToCopy.showResponsesTo,"},{"lineNumber":1065,"author":{"gitId":"-"},"content":"                  showGiverNameTo: questionToCopy.showGiverNameTo,"},{"lineNumber":1066,"author":{"gitId":"-"},"content":"                  showRecipientNameTo: questionToCopy.showRecipientNameTo,"},{"lineNumber":1067,"author":{"gitId":"-"},"content":"                });"},{"lineNumber":1068,"author":{"gitId":"-"},"content":"              }),"},{"lineNumber":1069,"author":{"gitId":"-"},"content":"              finalize(() \u003d\u003e {"},{"lineNumber":1070,"author":{"gitId":"-"},"content":"                this.isCopyingQuestion \u003d false;"},{"lineNumber":1071,"author":{"gitId":"-"},"content":"              }),"},{"lineNumber":1072,"author":{"gitId":"-"},"content":"          ).subscribe({"},{"lineNumber":1073,"author":{"gitId":"-"},"content":"            next: (newQuestion: FeedbackQuestion) \u003d\u003e {"},{"lineNumber":1074,"author":{"gitId":"-"},"content":"              this.questionEditFormModels.push(this.getQuestionEditFormModel(newQuestion));"},{"lineNumber":1075,"author":{"gitId":"-"},"content":"              this.feedbackQuestionModels.set(newQuestion.feedbackQuestionId, newQuestion);"},{"lineNumber":1076,"author":{"gitId":"-"},"content":"              this.statusMessageService.showSuccessToast("},{"lineNumber":1077,"author":{"gitId":"-"},"content":"                  \u0027The selected question(s) have been added to this feedback session.\u0027,"},{"lineNumber":1078,"author":{"gitId":"-"},"content":"              );"},{"lineNumber":1079,"author":{"gitId":"-"},"content":"            },"},{"lineNumber":1080,"author":{"gitId":"-"},"content":"            error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":1081,"author":{"gitId":"-"},"content":"              this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":1082,"author":{"gitId":"-"},"content":"            },"},{"lineNumber":1083,"author":{"gitId":"-"},"content":"          });"},{"lineNumber":1084,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":1085,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":1086,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":1087,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":1088,"author":{"gitId":"-"},"content":""},{"lineNumber":1089,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":1090,"author":{"gitId":"-"},"content":"   * Gets all students of a course."},{"lineNumber":1091,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":1092,"author":{"gitId":"-"},"content":"  getAllStudentsOfCourse(): void {"},{"lineNumber":1093,"author":{"gitId":"-"},"content":"    this.studentService.getStudentsFromCourse({ courseId: this.courseId })"},{"lineNumber":1094,"author":{"gitId":"-"},"content":"        .subscribe({"},{"lineNumber":1095,"author":{"gitId":"-"},"content":"          next: (students: Students) \u003d\u003e {"},{"lineNumber":1096,"author":{"gitId":"-"},"content":"            this.studentsOfCourse \u003d students.students;"},{"lineNumber":1097,"author":{"gitId":"-"},"content":""},{"lineNumber":1098,"author":{"gitId":"-"},"content":"            // sort the student list based on team name and student name"},{"lineNumber":1099,"author":{"gitId":"-"},"content":"            this.studentsOfCourse.sort((a: Student, b: Student): number \u003d\u003e {"},{"lineNumber":1100,"author":{"gitId":"-"},"content":"              const teamNameCompare: number \u003d a.teamName.localeCompare(b.teamName);"},{"lineNumber":1101,"author":{"gitId":"-"},"content":"              if (teamNameCompare \u003d\u003d\u003d 0) {"},{"lineNumber":1102,"author":{"gitId":"-"},"content":"                return a.name.localeCompare(b.name);"},{"lineNumber":1103,"author":{"gitId":"-"},"content":"              }"},{"lineNumber":1104,"author":{"gitId":"-"},"content":"              return teamNameCompare;"},{"lineNumber":1105,"author":{"gitId":"-"},"content":"            });"},{"lineNumber":1106,"author":{"gitId":"-"},"content":""},{"lineNumber":1107,"author":{"gitId":"-"},"content":"            // select the first student"},{"lineNumber":1108,"author":{"gitId":"-"},"content":"            if (this.studentsOfCourse.length \u003e\u003d 1) {"},{"lineNumber":1109,"author":{"gitId":"-"},"content":"              this.emailOfStudentToPreview \u003d this.studentsOfCourse[0].email;"},{"lineNumber":1110,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":1111,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":1112,"author":{"gitId":"-"},"content":"          error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":1113,"author":{"gitId":"-"},"content":"            this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":1114,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":1115,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":1116,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":1117,"author":{"gitId":"-"},"content":""},{"lineNumber":1118,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":1119,"author":{"gitId":"-"},"content":"   * Gets all instructors of a course."},{"lineNumber":1120,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":1121,"author":{"gitId":"-"},"content":"  getAllInstructors(): void {"},{"lineNumber":1122,"author":{"gitId":"-"},"content":"    this.instructorService.loadInstructors({"},{"lineNumber":1123,"author":{"gitId":"-"},"content":"      courseId: this.courseId,"},{"lineNumber":1124,"author":{"gitId":"-"},"content":"      intent: Intent.FULL_DETAIL,"},{"lineNumber":1125,"author":{"gitId":"-"},"content":"    })"},{"lineNumber":1126,"author":{"gitId":"-"},"content":"        .subscribe({"},{"lineNumber":1127,"author":{"gitId":"-"},"content":"          next: (instructors: Instructors) \u003d\u003e {"},{"lineNumber":1128,"author":{"gitId":"-"},"content":"            this.instructorsOfCourse \u003d instructors.instructors;"},{"lineNumber":1129,"author":{"gitId":"-"},"content":"            // TODO use privilege API to filter instructors who has INSTRUCTOR_PERMISSION_SUBMIT_SESSION_IN_SECTIONS"},{"lineNumber":1130,"author":{"gitId":"-"},"content":"            // in the feedback session"},{"lineNumber":1131,"author":{"gitId":"-"},"content":""},{"lineNumber":1132,"author":{"gitId":"-"},"content":"            // sort the instructor list based on name"},{"lineNumber":1133,"author":{"gitId":"-"},"content":"            this.instructorsOfCourse.sort((a: Instructor, b: Instructor): number \u003d\u003e {"},{"lineNumber":1134,"author":{"gitId":"-"},"content":"              return a.name.localeCompare(b.name);"},{"lineNumber":1135,"author":{"gitId":"-"},"content":"            });"},{"lineNumber":1136,"author":{"gitId":"-"},"content":""},{"lineNumber":1137,"author":{"gitId":"-"},"content":"            // select the first instructor"},{"lineNumber":1138,"author":{"gitId":"-"},"content":"            if (this.instructorsOfCourse.length \u003e\u003d 1) {"},{"lineNumber":1139,"author":{"gitId":"-"},"content":"              this.emailOfInstructorToPreview \u003d this.instructorsOfCourse[0].email;"},{"lineNumber":1140,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":1141,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":1142,"author":{"gitId":"-"},"content":"          error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":1143,"author":{"gitId":"-"},"content":"            this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":1144,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":1145,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":1146,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":1147,"author":{"gitId":"-"},"content":""},{"lineNumber":1148,"author":{"gitId":"-"},"content":"  expandAll(): void {"},{"lineNumber":1149,"author":{"gitId":"-"},"content":"    this.questionEditFormModels.forEach(((model: QuestionEditFormModel): void \u003d\u003e {"},{"lineNumber":1150,"author":{"gitId":"-"},"content":"      model.isCollapsed \u003d false;"},{"lineNumber":1151,"author":{"gitId":"-"},"content":"    }));"},{"lineNumber":1152,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":1153,"author":{"gitId":"-"},"content":""},{"lineNumber":1154,"author":{"gitId":"-"},"content":"  collapseAll(): void {"},{"lineNumber":1155,"author":{"gitId":"-"},"content":"    this.questionEditFormModels.forEach(((model: QuestionEditFormModel): void \u003d\u003e {"},{"lineNumber":1156,"author":{"gitId":"-"},"content":"      model.isCollapsed \u003d true;"},{"lineNumber":1157,"author":{"gitId":"-"},"content":"    }));"},{"lineNumber":1158,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":1159,"author":{"gitId":"-"},"content":""},{"lineNumber":1160,"author":{"gitId":"-"},"content":"  private deepCopy\u003cT\u003e(obj: T): T {"},{"lineNumber":1161,"author":{"gitId":"-"},"content":"    return JSON.parse(JSON.stringify(obj));"},{"lineNumber":1162,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":1163,"author":{"gitId":"-"},"content":""},{"lineNumber":1164,"author":{"gitId":"-"},"content":"  private scrollToNewEditForm(): void {"},{"lineNumber":1165,"author":{"gitId":"-"},"content":"    setTimeout(() \u003d\u003e {"},{"lineNumber":1166,"author":{"gitId":"-"},"content":"      const allEditForms: NodeListOf\u003cElement\u003e \u003d document.querySelectorAll(\u0027tm-question-edit-form\u0027);"},{"lineNumber":1167,"author":{"gitId":"-"},"content":"      const newEditForm: Element \u003d allEditForms[allEditForms.length - 1];"},{"lineNumber":1168,"author":{"gitId":"-"},"content":"      const yOffset: number \u003d -70; // Need offset because of the navBar"},{"lineNumber":1169,"author":{"gitId":"-"},"content":"      const y: number \u003d newEditForm.getBoundingClientRect().top + window.scrollY + yOffset;"},{"lineNumber":1170,"author":{"gitId":"-"},"content":"      window.scrollTo({ top: y, behavior: \u0027smooth\u0027 });"},{"lineNumber":1171,"author":{"gitId":"-"},"content":"    }, 0);"},{"lineNumber":1172,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":1173,"author":{"gitId":"-"},"content":""},{"lineNumber":1174,"author":{"gitId":"-"},"content":"  scrollToTopOfPage(): void {"},{"lineNumber":1175,"author":{"gitId":"-"},"content":"    window.scrollTo({ top: 0, behavior: \u0027smooth\u0027 });"},{"lineNumber":1176,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":1177,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"cedricongjh":1,"-":1176}},{"path":"src/web/app/pages-instructor/instructor-session-individual-extension-page/instructor-session-individual-extension-page.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003ctm-loading-retry [shouldShowRetry]\u003d\"hasLoadingFeedbackSessionFailed\""},{"lineNumber":2,"author":{"gitId":"-"},"content":"  [message]\u003d\"\u0027Failed to load course and feedback session\u0027\" (retryEvent)\u003d\"loadFeedbackSessionAndIndividuals()\"\u003e"},{"lineNumber":3,"author":{"gitId":"-"},"content":"  \u003cdiv *tmIsLoading\u003d\"isLoadingFeedbackSession\"\u003e"},{"lineNumber":4,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"card bg-light top-padded text-center text-sm-start\"\u003e"},{"lineNumber":5,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"card-body\"\u003e"},{"lineNumber":6,"author":{"gitId":"-"},"content":"        \u003cdiv class\u003d\"row text-center\"\u003e"},{"lineNumber":7,"author":{"gitId":"-"},"content":"          \u003cdiv class\u003d\"col-md-2 text-md-end font-bold\"\u003eCourse ID\u003c/div\u003e"},{"lineNumber":8,"author":{"gitId":"-"},"content":"          \u003cdiv id\u003d\"course-id\" class\u003d\"col-md-3 text-md-start\"\u003e"},{"lineNumber":9,"author":{"gitId":"-"},"content":"            {{ courseId }}"},{"lineNumber":10,"author":{"gitId":"-"},"content":"          \u003c/div\u003e"},{"lineNumber":11,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":12,"author":{"gitId":"-"},"content":"        \u003cdiv class\u003d\"row text-center\"\u003e"},{"lineNumber":13,"author":{"gitId":"-"},"content":"          \u003cdiv class\u003d\"col-md-2 text-md-end font-bold\"\u003eTime Zone\u003c/div\u003e"},{"lineNumber":14,"author":{"gitId":"-"},"content":"          \u003cdiv id\u003d\"time-zone\" class\u003d\"col-md-3 text-md-start\"\u003e"},{"lineNumber":15,"author":{"gitId":"-"},"content":"            {{ feedbackSessionTimeZone }}"},{"lineNumber":16,"author":{"gitId":"-"},"content":"          \u003c/div\u003e"},{"lineNumber":17,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":18,"author":{"gitId":"-"},"content":"        \u003cdiv class\u003d\"row text-center\"\u003e"},{"lineNumber":19,"author":{"gitId":"-"},"content":"          \u003cdiv class\u003d\"col-md-2 text-md-end font-bold\"\u003eCourse Name\u003c/div\u003e"},{"lineNumber":20,"author":{"gitId":"-"},"content":"          \u003cdiv id\u003d\"course-name\" class\u003d\"col-md-10 text-md-start\"\u003e"},{"lineNumber":21,"author":{"gitId":"-"},"content":"            {{ courseName }}"},{"lineNumber":22,"author":{"gitId":"-"},"content":"          \u003c/div\u003e"},{"lineNumber":23,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":24,"author":{"gitId":"-"},"content":"        \u003cdiv class\u003d\"row text-center\"\u003e"},{"lineNumber":25,"author":{"gitId":"-"},"content":"          \u003cdiv class\u003d\"col-md-2 text-md-end font-bold\"\u003eSession Name\u003c/div\u003e"},{"lineNumber":26,"author":{"gitId":"-"},"content":"          \u003cdiv id\u003d\"session-name\" class\u003d\"col-md-10 text-md-start\"\u003e"},{"lineNumber":27,"author":{"gitId":"-"},"content":"            {{ feedbackSessionName }}"},{"lineNumber":28,"author":{"gitId":"-"},"content":"          \u003c/div\u003e"},{"lineNumber":29,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":30,"author":{"gitId":"-"},"content":"        \u003cdiv class\u003d\"row text-center\"\u003e"},{"lineNumber":31,"author":{"gitId":"-"},"content":"          \u003cdiv class\u003d\"col-md-2 text-md-end font-bold\"\u003eOriginal Deadline\u003c/div\u003e"},{"lineNumber":32,"author":{"gitId":"-"},"content":"          \u003cdiv id\u003d\"original-deadline\" class\u003d\"col-md-10 text-md-start\"\u003e"},{"lineNumber":33,"author":{"gitId":"-"},"content":"            {{ feedbackSessionEndingTimestamp | formatDateDetail: feedbackSessionTimeZone }}"},{"lineNumber":34,"author":{"gitId":"-"},"content":"          \u003c/div\u003e"},{"lineNumber":35,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":36,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":37,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":38,"author":{"gitId":"-"},"content":"    \u003cp\u003e Select students or instructors from the lists and click the \u003cb\u003eExtend / Edit\u003c/b\u003e or \u003cb\u003eDelete\u003c/b\u003e buttons at"},{"lineNumber":39,"author":{"gitId":"-"},"content":"      the bottom of the page to update their feedback session deadline. \u003c/p\u003e"},{"lineNumber":40,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":41,"author":{"gitId":"-"},"content":"\u003c/tm-loading-retry\u003e"},{"lineNumber":42,"author":{"gitId":"-"},"content":""},{"lineNumber":43,"author":{"gitId":"-"},"content":"\u003ctm-loading-retry [shouldShowRetry]\u003d\"hasLoadedAllStudentsFailed\" [message]\u003d\"\u0027Failed to load all students\u0027\""},{"lineNumber":44,"author":{"gitId":"-"},"content":"  (retryEvent)\u003d\"loadFeedbackSessionAndIndividuals()\"\u003e"},{"lineNumber":45,"author":{"gitId":"-"},"content":"  \u003cdiv *tmIsLoading\u003d\"isLoadingAllStudents\"\u003e"},{"lineNumber":46,"author":{"gitId":"-"},"content":"    \u003cdiv *ngIf\u003d\"studentsOfCourse.length \u003e 0\" class\u003d\"form-check\"\u003e"},{"lineNumber":47,"author":{"gitId":"-"},"content":"      \u003cinput id\u003d\"select-not-submitted-student-btn\" class\u003d\"form-check-input\" type\u003d\"checkbox\" [ngModel]\u003d\"isAllYetToSubmitStudentsSelected\" (ngModelChange)\u003d\"changeSelectionStatusForAllYetSubmittedStudentsHandler($event)\"/\u003e"},{"lineNumber":48,"author":{"gitId":"-"},"content":"      \u003clabel for\u003d\"select-not-submitted-student-btn\" class\u003d\"form-check-label\"\u003eSelect all students not yet submitted\u003c/label\u003e"},{"lineNumber":49,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":50,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":51,"author":{"gitId":"-"},"content":"\u003c/tm-loading-retry\u003e"},{"lineNumber":52,"author":{"gitId":"-"},"content":""},{"lineNumber":53,"author":{"gitId":"-"},"content":"\u003ctm-loading-retry [shouldShowRetry]\u003d\"hasLoadedAllInstructorsFailed\" [message]\u003d\"\u0027Failed to load all instructors\u0027\""},{"lineNumber":54,"author":{"gitId":"-"},"content":"  (retryEvent)\u003d\"loadFeedbackSessionAndIndividuals()\"\u003e"},{"lineNumber":55,"author":{"gitId":"-"},"content":"  \u003cdiv *tmIsLoading\u003d\"isLoadingAllInstructors\"\u003e"},{"lineNumber":56,"author":{"gitId":"-"},"content":"    \u003cdiv *ngIf\u003d\"instructorsOfCourse.length \u003e 0\" class\u003d\"form-check\"\u003e"},{"lineNumber":57,"author":{"gitId":"-"},"content":"      \u003cinput id\u003d\"select-not-submitted-instructor-btn\" class\u003d\"form-check-input\" type\u003d\"checkbox\" [ngModel]\u003d\"isAllYetToSubmitInstructorsSelected\" (ngModelChange)\u003d\"changeSelectionStatusForAllYetSubmittedInstructorsHandler($event)\"/\u003e"},{"lineNumber":58,"author":{"gitId":"-"},"content":"      \u003clabel for\u003d\"select-not-submitted-instructor-btn\" class\u003d\"form-check-label\"\u003eSelect all instructors not yet submitted\u003c/label\u003e"},{"lineNumber":59,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":60,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":61,"author":{"gitId":"-"},"content":"\u003c/tm-loading-retry\u003e"},{"lineNumber":62,"author":{"gitId":"-"},"content":""},{"lineNumber":63,"author":{"gitId":"-"},"content":"\u003ctm-loading-retry [shouldShowRetry]\u003d\"hasLoadedAllStudentsFailed\" [message]\u003d\"\u0027Failed to load students\u0027\""},{"lineNumber":64,"author":{"gitId":"-"},"content":"  (retryEvent)\u003d\"loadFeedbackSessionAndIndividuals()\"\u003e"},{"lineNumber":65,"author":{"gitId":"-"},"content":"  \u003cdiv *tmIsLoading\u003d\"isLoadingAllStudents\"\u003e"},{"lineNumber":66,"author":{"gitId":"-"},"content":"    \u003ch1\u003eStudents\u003c/h1\u003e"},{"lineNumber":67,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"table-responsive\"\u003e"},{"lineNumber":68,"author":{"gitId":"-"},"content":"      \u003ctable id\u003d\"student-list-table\" class\u003d\"table table-bordered table-hover\"\u003e"},{"lineNumber":69,"author":{"gitId":"-"},"content":"        \u003cthead\u003e"},{"lineNumber":70,"author":{"gitId":"-"},"content":"          \u003ctr\u003e"},{"lineNumber":71,"author":{"gitId":"-"},"content":"            \u003cth (click)\u003d\"selectAllStudents()\"\u003e"},{"lineNumber":72,"author":{"gitId":"weiquu"},"content":"              \u003cinput type\u003d\"checkbox\" id\u003d\"select-all-student-btn\" [checked]\u003d\"isAllStudentsSelected\"/\u003e"},{"lineNumber":73,"author":{"gitId":"weiquu"},"content":"              \u003clabel for\u003d\"select-all-student-btn\"\u003e\u0026nbsp;Select all\u003c/label\u003e"},{"lineNumber":74,"author":{"gitId":"-"},"content":"            \u003c/th\u003e"},{"lineNumber":75,"author":{"gitId":"weiquu"},"content":"            \u003cth class\u003d\"sortable-header\" (click)\u003d\"sortStudentColumnsBy(SortBy.SECTION_NAME)\" [attr.aria-sort]\u003d\"getAriaSortStudent(SortBy.SECTION_NAME)\"\u003e"},{"lineNumber":76,"author":{"gitId":"weiquu"},"content":"              \u003cbutton\u003e"},{"lineNumber":77,"author":{"gitId":"-"},"content":"                Section"},{"lineNumber":78,"author":{"gitId":"weiquu"},"content":"                \u003cspan class\u003d\"fa-stack\" aria-hidden\u003d\"true\"\u003e"},{"lineNumber":79,"author":{"gitId":"-"},"content":"                  \u003ci class\u003d\"fas fa-sort\"\u003e\u003c/i\u003e"},{"lineNumber":80,"author":{"gitId":"-"},"content":"                  \u003ci *ngIf\u003d\"sortStudentsBy \u003d\u003d\u003d SortBy.SECTION_NAME \u0026\u0026 sortStudentOrder \u003d\u003d\u003d SortOrder.DESC\""},{"lineNumber":81,"author":{"gitId":"-"},"content":"                    class\u003d\"fas fa-sort-down\"\u003e\u003c/i\u003e"},{"lineNumber":82,"author":{"gitId":"-"},"content":"                  \u003ci *ngIf\u003d\"sortStudentsBy \u003d\u003d\u003d SortBy.SECTION_NAME \u0026\u0026 sortStudentOrder \u003d\u003d\u003d SortOrder.ASC\""},{"lineNumber":83,"author":{"gitId":"-"},"content":"                    class\u003d\"fas fa-sort-up\"\u003e\u003c/i\u003e"},{"lineNumber":84,"author":{"gitId":"-"},"content":"                \u003c/span\u003e"},{"lineNumber":85,"author":{"gitId":"weiquu"},"content":"              \u003c/button\u003e"},{"lineNumber":86,"author":{"gitId":"-"},"content":"            \u003c/th\u003e"},{"lineNumber":87,"author":{"gitId":"weiquu"},"content":"            \u003cth class\u003d\"sortable-header\" (click)\u003d\"sortStudentColumnsBy(SortBy.TEAM_NAME)\" [attr.aria-sort]\u003d\"getAriaSortStudent(SortBy.TEAM_NAME)\"\u003e"},{"lineNumber":88,"author":{"gitId":"weiquu"},"content":"              \u003cbutton\u003e"},{"lineNumber":89,"author":{"gitId":"-"},"content":"                Team"},{"lineNumber":90,"author":{"gitId":"weiquu"},"content":"                \u003cspan class\u003d\"fa-stack\" aria-hidden\u003d\"true\"\u003e"},{"lineNumber":91,"author":{"gitId":"-"},"content":"                  \u003ci class\u003d\"fas fa-sort\"\u003e\u003c/i\u003e"},{"lineNumber":92,"author":{"gitId":"-"},"content":"                  \u003ci *ngIf\u003d\"sortStudentsBy \u003d\u003d\u003d SortBy.TEAM_NAME \u0026\u0026 sortStudentOrder \u003d\u003d\u003d SortOrder.DESC\""},{"lineNumber":93,"author":{"gitId":"-"},"content":"                    class\u003d\"fas fa-sort-down\"\u003e\u003c/i\u003e"},{"lineNumber":94,"author":{"gitId":"-"},"content":"                  \u003ci *ngIf\u003d\"sortStudentsBy \u003d\u003d\u003d SortBy.TEAM_NAME \u0026\u0026 sortStudentOrder \u003d\u003d\u003d SortOrder.ASC\""},{"lineNumber":95,"author":{"gitId":"-"},"content":"                    class\u003d\"fas fa-sort-up\"\u003e\u003c/i\u003e"},{"lineNumber":96,"author":{"gitId":"-"},"content":"                \u003c/span\u003e"},{"lineNumber":97,"author":{"gitId":"weiquu"},"content":"              \u003c/button\u003e"},{"lineNumber":98,"author":{"gitId":"-"},"content":"            \u003c/th\u003e"},{"lineNumber":99,"author":{"gitId":"weiquu"},"content":"            \u003cth class\u003d\"sortable-header\" (click)\u003d\"sortStudentColumnsBy(SortBy.RESPONDENT_NAME)\" [attr.aria-sort]\u003d\"getAriaSortStudent(SortBy.RESPONDENT_NAME)\"\u003e"},{"lineNumber":100,"author":{"gitId":"weiquu"},"content":"              \u003cbutton\u003e"},{"lineNumber":101,"author":{"gitId":"-"},"content":"                Name"},{"lineNumber":102,"author":{"gitId":"weiquu"},"content":"                \u003cspan class\u003d\"fa-stack\" aria-hidden\u003d\"true\"\u003e"},{"lineNumber":103,"author":{"gitId":"-"},"content":"                  \u003ci class\u003d\"fas fa-sort\"\u003e\u003c/i\u003e"},{"lineNumber":104,"author":{"gitId":"-"},"content":"                  \u003ci *ngIf\u003d\"sortStudentsBy \u003d\u003d\u003d SortBy.RESPONDENT_NAME \u0026\u0026 sortStudentOrder \u003d\u003d\u003d SortOrder.DESC\""},{"lineNumber":105,"author":{"gitId":"-"},"content":"                    class\u003d\"fas fa-sort-down\"\u003e\u003c/i\u003e"},{"lineNumber":106,"author":{"gitId":"-"},"content":"                  \u003ci *ngIf\u003d\"sortStudentsBy \u003d\u003d\u003d SortBy.RESPONDENT_NAME \u0026\u0026 sortStudentOrder \u003d\u003d\u003d SortOrder.ASC\""},{"lineNumber":107,"author":{"gitId":"-"},"content":"                    class\u003d\"fas fa-sort-up\"\u003e\u003c/i\u003e"},{"lineNumber":108,"author":{"gitId":"-"},"content":"                \u003c/span\u003e"},{"lineNumber":109,"author":{"gitId":"weiquu"},"content":"              \u003c/button\u003e"},{"lineNumber":110,"author":{"gitId":"-"},"content":"            \u003c/th\u003e"},{"lineNumber":111,"author":{"gitId":"weiquu"},"content":"            \u003cth class\u003d\"sortable-header\" (click)\u003d\"sortStudentColumnsBy(SortBy.RESPONDENT_EMAIL)\" [attr.aria-sort]\u003d\"getAriaSortStudent(SortBy.RESPONDENT_EMAIL)\"\u003e"},{"lineNumber":112,"author":{"gitId":"weiquu"},"content":"              \u003cbutton\u003e"},{"lineNumber":113,"author":{"gitId":"-"},"content":"                Email"},{"lineNumber":114,"author":{"gitId":"-"},"content":"                \u003cspan class\u003d\"fa-stack\"\u003e"},{"lineNumber":115,"author":{"gitId":"-"},"content":"                  \u003ci class\u003d\"fas fa-sort\"\u003e\u003c/i\u003e"},{"lineNumber":116,"author":{"gitId":"-"},"content":"                  \u003ci *ngIf\u003d\"sortStudentsBy \u003d\u003d\u003d SortBy.RESPONDENT_EMAIL \u0026\u0026 sortStudentOrder \u003d\u003d\u003d SortOrder.DESC\""},{"lineNumber":117,"author":{"gitId":"-"},"content":"                    class\u003d\"fas fa-sort-down\"\u003e\u003c/i\u003e"},{"lineNumber":118,"author":{"gitId":"-"},"content":"                  \u003ci *ngIf\u003d\"sortStudentsBy \u003d\u003d\u003d SortBy.RESPONDENT_EMAIL \u0026\u0026 sortStudentOrder \u003d\u003d\u003d SortOrder.ASC\""},{"lineNumber":119,"author":{"gitId":"-"},"content":"                    class\u003d\"fas fa-sort-up\"\u003e\u003c/i\u003e"},{"lineNumber":120,"author":{"gitId":"-"},"content":"                \u003c/span\u003e"},{"lineNumber":121,"author":{"gitId":"weiquu"},"content":"              \u003c/button\u003e"},{"lineNumber":122,"author":{"gitId":"-"},"content":"            \u003c/th\u003e"},{"lineNumber":123,"author":{"gitId":"weiquu"},"content":"            \u003cth class\u003d\"sortable-header\" (click)\u003d\"sortStudentColumnsBy(SortBy.SESSION_END_DATE)\" [attr.aria-sort]\u003d\"getAriaSortStudent(SortBy.SESSION_END_DATE)\"\u003e"},{"lineNumber":124,"author":{"gitId":"weiquu"},"content":"              \u003cbutton\u003e"},{"lineNumber":125,"author":{"gitId":"-"},"content":"                Current Deadline"},{"lineNumber":126,"author":{"gitId":"weiquu"},"content":"                \u003cspan class\u003d\"fa-stack\" aria-hidden\u003d\"true\"\u003e"},{"lineNumber":127,"author":{"gitId":"-"},"content":"                  \u003ci class\u003d\"fas fa-sort\"\u003e\u003c/i\u003e"},{"lineNumber":128,"author":{"gitId":"-"},"content":"                  \u003ci *ngIf\u003d\"sortStudentsBy \u003d\u003d\u003d SortBy.SESSION_END_DATE \u0026\u0026 sortStudentOrder \u003d\u003d\u003d SortOrder.DESC\""},{"lineNumber":129,"author":{"gitId":"-"},"content":"                    class\u003d\"fas fa-sort-down\"\u003e\u003c/i\u003e"},{"lineNumber":130,"author":{"gitId":"-"},"content":"                  \u003ci *ngIf\u003d\"sortStudentsBy \u003d\u003d\u003d SortBy.SESSION_END_DATE \u0026\u0026 sortStudentOrder \u003d\u003d\u003d SortOrder.ASC\""},{"lineNumber":131,"author":{"gitId":"-"},"content":"                    class\u003d\"fas fa-sort-up\"\u003e\u003c/i\u003e"},{"lineNumber":132,"author":{"gitId":"-"},"content":"                \u003c/span\u003e"},{"lineNumber":133,"author":{"gitId":"weiquu"},"content":"              \u003c/button\u003e"},{"lineNumber":134,"author":{"gitId":"-"},"content":"            \u003c/th\u003e"},{"lineNumber":135,"author":{"gitId":"-"},"content":"          \u003c/tr\u003e"},{"lineNumber":136,"author":{"gitId":"-"},"content":"        \u003c/thead\u003e"},{"lineNumber":137,"author":{"gitId":"-"},"content":"        \u003ctbody\u003e"},{"lineNumber":138,"author":{"gitId":"-"},"content":"          \u003ctr *ngFor\u003d\"let student of studentsOfCourse; index as i\" id\u003d\"student-row-{{ i }}\" (click)\u003d\"selectStudent(i)\""},{"lineNumber":139,"author":{"gitId":"-"},"content":"            [ngClass]\u003d\"{ \u0027table-warning\u0027: student.hasExtension \u003d\u003d\u003d true }\"\u003e"},{"lineNumber":140,"author":{"gitId":"-"},"content":"            \u003ctd class\u003d\"align-center\"\u003e"},{"lineNumber":141,"author":{"gitId":"-"},"content":"              \u003cinput type\u003d\"checkbox\" id\u003d\"student-checkbox-{{ i }}\" [checked]\u003d\"student.isSelected\" [attr.aria-label]\u003d\"getAriaLabel(student)\" /\u003e"},{"lineNumber":142,"author":{"gitId":"-"},"content":"            \u003c/td\u003e"},{"lineNumber":143,"author":{"gitId":"-"},"content":"            \u003ctd\u003e{{ student.sectionName }}\u003c/td\u003e"},{"lineNumber":144,"author":{"gitId":"-"},"content":"            \u003ctd\u003e{{ student.teamName }}\u003c/td\u003e"},{"lineNumber":145,"author":{"gitId":"-"},"content":"            \u003ctd\u003e{{ student.name }}\u003c/td\u003e"},{"lineNumber":146,"author":{"gitId":"-"},"content":"            \u003ctd\u003e{{ student.email }}\u003c/td\u003e"},{"lineNumber":147,"author":{"gitId":"-"},"content":"            \u003ctd\u003e{{ student.extensionDeadline | formatDateDetail: feedbackSessionTimeZone }}\u003c/td\u003e"},{"lineNumber":148,"author":{"gitId":"-"},"content":"          \u003c/tr\u003e"},{"lineNumber":149,"author":{"gitId":"-"},"content":"        \u003c/tbody\u003e"},{"lineNumber":150,"author":{"gitId":"-"},"content":"      \u003c/table\u003e"},{"lineNumber":151,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":152,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":153,"author":{"gitId":"-"},"content":"\u003c/tm-loading-retry\u003e"},{"lineNumber":154,"author":{"gitId":"-"},"content":""},{"lineNumber":155,"author":{"gitId":"-"},"content":"\u003cbr\u003e"},{"lineNumber":156,"author":{"gitId":"-"},"content":""},{"lineNumber":157,"author":{"gitId":"-"},"content":"\u003ctm-loading-retry [shouldShowRetry]\u003d\"hasLoadedAllInstructorsFailed\" [message]\u003d\"\u0027Failed to load instructors\u0027\""},{"lineNumber":158,"author":{"gitId":"-"},"content":"  (retryEvent)\u003d\"loadFeedbackSessionAndIndividuals()\"\u003e"},{"lineNumber":159,"author":{"gitId":"-"},"content":"  \u003cdiv *tmIsLoading\u003d\"isLoadingAllInstructors\"\u003e"},{"lineNumber":160,"author":{"gitId":"-"},"content":"    \u003ch1\u003eInstructors\u003c/h1\u003e"},{"lineNumber":161,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"table-responsive\"\u003e"},{"lineNumber":162,"author":{"gitId":"-"},"content":"      \u003ctable id\u003d\"instructor-list-table\" class\u003d\"table table-bordered table-hover\"\u003e"},{"lineNumber":163,"author":{"gitId":"-"},"content":"        \u003cthead\u003e"},{"lineNumber":164,"author":{"gitId":"-"},"content":"          \u003ctr\u003e"},{"lineNumber":165,"author":{"gitId":"-"},"content":"            \u003cth (click)\u003d\"selectAllInstructors()\"\u003e"},{"lineNumber":166,"author":{"gitId":"weiquu"},"content":"              \u003cinput type\u003d\"checkbox\" id\u003d\"select-all-instructor-btn\" [checked]\u003d\"isAllInstructorsSelected\"/\u003e"},{"lineNumber":167,"author":{"gitId":"weiquu"},"content":"              \u003clabel for\u003d\"select-all-instructor-btn\"\u003e\u0026nbsp;Select all\u003c/label\u003e"},{"lineNumber":168,"author":{"gitId":"-"},"content":"            \u003c/th\u003e"},{"lineNumber":169,"author":{"gitId":"weiquu"},"content":"            \u003cth class\u003d\"sortable-header\" (click)\u003d\"sortInstructorsColumnsBy(SortBy.RESPONDENT_NAME)\" [attr.aria-sort]\u003d\"getAriaSortInstructor(SortBy.RESPONDENT_NAME)\"\u003e"},{"lineNumber":170,"author":{"gitId":"weiquu"},"content":"              \u003cbutton\u003e"},{"lineNumber":171,"author":{"gitId":"-"},"content":"                Name"},{"lineNumber":172,"author":{"gitId":"weiquu"},"content":"                \u003cspan class\u003d\"fa-stack\" aria-hidden\u003d\"true\"\u003e"},{"lineNumber":173,"author":{"gitId":"-"},"content":"                  \u003ci class\u003d\"fas fa-sort\"\u003e\u003c/i\u003e"},{"lineNumber":174,"author":{"gitId":"-"},"content":"                  \u003ci *ngIf\u003d\"sortInstructorsBy \u003d\u003d\u003d SortBy.RESPONDENT_NAME \u0026\u0026 sortInstructorOrder \u003d\u003d\u003d SortOrder.DESC\""},{"lineNumber":175,"author":{"gitId":"-"},"content":"                    class\u003d\"fas fa-sort-down\"\u003e\u003c/i\u003e"},{"lineNumber":176,"author":{"gitId":"-"},"content":"                  \u003ci *ngIf\u003d\"sortInstructorsBy \u003d\u003d\u003d SortBy.RESPONDENT_NAME \u0026\u0026 sortInstructorOrder \u003d\u003d\u003d SortOrder.ASC\""},{"lineNumber":177,"author":{"gitId":"-"},"content":"                    class\u003d\"fas fa-sort-up\"\u003e\u003c/i\u003e"},{"lineNumber":178,"author":{"gitId":"-"},"content":"                \u003c/span\u003e"},{"lineNumber":179,"author":{"gitId":"weiquu"},"content":"              \u003c/button\u003e"},{"lineNumber":180,"author":{"gitId":"-"},"content":"            \u003c/th\u003e"},{"lineNumber":181,"author":{"gitId":"weiquu"},"content":"            \u003cth class\u003d\"sortable-header\" (click)\u003d\"sortInstructorsColumnsBy(SortBy.RESPONDENT_EMAIL)\" [attr.aria-sort]\u003d\"getAriaSortInstructor(SortBy.RESPONDENT_EMAIL)\"\u003e"},{"lineNumber":182,"author":{"gitId":"weiquu"},"content":"              \u003cbutton\u003e"},{"lineNumber":183,"author":{"gitId":"-"},"content":"                Email"},{"lineNumber":184,"author":{"gitId":"weiquu"},"content":"                \u003cspan class\u003d\"fa-stack\" aria-hidden\u003d\"true\"\u003e"},{"lineNumber":185,"author":{"gitId":"-"},"content":"                  \u003ci class\u003d\"fas fa-sort\"\u003e\u003c/i\u003e"},{"lineNumber":186,"author":{"gitId":"-"},"content":"                  \u003ci *ngIf\u003d\"sortInstructorsBy \u003d\u003d\u003d SortBy.RESPONDENT_EMAIL \u0026\u0026 sortInstructorOrder \u003d\u003d\u003d SortOrder.DESC\""},{"lineNumber":187,"author":{"gitId":"-"},"content":"                    class\u003d\"fas fa-sort-down\"\u003e\u003c/i\u003e"},{"lineNumber":188,"author":{"gitId":"-"},"content":"                  \u003ci *ngIf\u003d\"sortInstructorsBy \u003d\u003d\u003d SortBy.RESPONDENT_EMAIL \u0026\u0026 sortInstructorOrder \u003d\u003d\u003d SortOrder.ASC\""},{"lineNumber":189,"author":{"gitId":"-"},"content":"                    class\u003d\"fas fa-sort-up\"\u003e\u003c/i\u003e"},{"lineNumber":190,"author":{"gitId":"-"},"content":"                \u003c/span\u003e"},{"lineNumber":191,"author":{"gitId":"weiquu"},"content":"              \u003c/button\u003e"},{"lineNumber":192,"author":{"gitId":"-"},"content":"            \u003c/th\u003e"},{"lineNumber":193,"author":{"gitId":"weiquu"},"content":"            \u003cth class\u003d\"sortable-header\" (click)\u003d\"sortInstructorsColumnsBy(SortBy.INSTRUCTOR_PERMISSION_ROLE)\" [attr.aria-sort]\u003d\"getAriaSortInstructor(SortBy.INSTRUCTOR_PERMISSION_ROLE)\"\u003e"},{"lineNumber":194,"author":{"gitId":"weiquu"},"content":"              \u003cbutton\u003e"},{"lineNumber":195,"author":{"gitId":"-"},"content":"                Role"},{"lineNumber":196,"author":{"gitId":"weiquu"},"content":"                \u003cspan class\u003d\"fa-stack\" aria-hidden\u003d\"true\"\u003e"},{"lineNumber":197,"author":{"gitId":"-"},"content":"                  \u003ci class\u003d\"fas fa-sort\"\u003e\u003c/i\u003e"},{"lineNumber":198,"author":{"gitId":"-"},"content":"                  \u003ci *ngIf\u003d\"sortInstructorsBy \u003d\u003d\u003d SortBy.INSTRUCTOR_PERMISSION_ROLE \u0026\u0026 sortInstructorOrder \u003d\u003d\u003d SortOrder.DESC\""},{"lineNumber":199,"author":{"gitId":"-"},"content":"                    class\u003d\"fas fa-sort-down\"\u003e\u003c/i\u003e"},{"lineNumber":200,"author":{"gitId":"-"},"content":"                  \u003ci *ngIf\u003d\"sortInstructorsBy \u003d\u003d\u003d SortBy.INSTRUCTOR_PERMISSION_ROLE \u0026\u0026 sortInstructorOrder \u003d\u003d\u003d SortOrder.ASC\""},{"lineNumber":201,"author":{"gitId":"-"},"content":"                    class\u003d\"fas fa-sort-up\"\u003e\u003c/i\u003e"},{"lineNumber":202,"author":{"gitId":"-"},"content":"                \u003c/span\u003e"},{"lineNumber":203,"author":{"gitId":"weiquu"},"content":"              \u003c/button\u003e"},{"lineNumber":204,"author":{"gitId":"-"},"content":"            \u003c/th\u003e"},{"lineNumber":205,"author":{"gitId":"weiquu"},"content":"            \u003cth class\u003d\"sortable-header\" (click)\u003d\"sortInstructorsColumnsBy(SortBy.SESSION_END_DATE)\" [attr.aria-sort]\u003d\"getAriaSortInstructor(SortBy.SESSION_END_DATE)\"\u003e"},{"lineNumber":206,"author":{"gitId":"weiquu"},"content":"              \u003cbutton\u003e"},{"lineNumber":207,"author":{"gitId":"-"},"content":"                Current Deadline"},{"lineNumber":208,"author":{"gitId":"weiquu"},"content":"                \u003cspan class\u003d\"fa-stack\" aria-hidden\u003d\"true\"\u003e"},{"lineNumber":209,"author":{"gitId":"-"},"content":"                  \u003ci class\u003d\"fas fa-sort\"\u003e\u003c/i\u003e"},{"lineNumber":210,"author":{"gitId":"-"},"content":"                  \u003ci *ngIf\u003d\"sortInstructorsBy \u003d\u003d\u003d SortBy.SESSION_END_DATE \u0026\u0026 sortInstructorOrder \u003d\u003d\u003d SortOrder.DESC\""},{"lineNumber":211,"author":{"gitId":"-"},"content":"                    class\u003d\"fas fa-sort-down\"\u003e\u003c/i\u003e"},{"lineNumber":212,"author":{"gitId":"-"},"content":"                  \u003ci *ngIf\u003d\"sortInstructorsBy \u003d\u003d\u003d SortBy.SESSION_END_DATE \u0026\u0026 sortInstructorOrder \u003d\u003d\u003d SortOrder.ASC\""},{"lineNumber":213,"author":{"gitId":"-"},"content":"                    class\u003d\"fas fa-sort-up\"\u003e\u003c/i\u003e"},{"lineNumber":214,"author":{"gitId":"-"},"content":"                \u003c/span\u003e"},{"lineNumber":215,"author":{"gitId":"weiquu"},"content":"              \u003c/button\u003e"},{"lineNumber":216,"author":{"gitId":"-"},"content":"            \u003c/th\u003e"},{"lineNumber":217,"author":{"gitId":"-"},"content":"          \u003c/tr\u003e"},{"lineNumber":218,"author":{"gitId":"-"},"content":"        \u003c/thead\u003e"},{"lineNumber":219,"author":{"gitId":"-"},"content":"        \u003ctbody\u003e"},{"lineNumber":220,"author":{"gitId":"-"},"content":"          \u003ctr *ngFor\u003d\"let instructor of instructorsOfCourse; index as i\" id\u003d\"instructor-row-{{ i }}\" (click)\u003d\"selectIntructor(i)\""},{"lineNumber":221,"author":{"gitId":"-"},"content":"            [ngClass]\u003d\"{ \u0027table-warning\u0027: instructor.hasExtension \u003d\u003d\u003d true }\"\u003e"},{"lineNumber":222,"author":{"gitId":"-"},"content":"            \u003ctd class\u003d\"align-center\"\u003e"},{"lineNumber":223,"author":{"gitId":"-"},"content":"              \u003cinput type\u003d\"checkbox\" id\u003d\"instructor-checkbox-{{ i }}\" [checked]\u003d\"instructor.isSelected\" [attr.aria-label]\u003d\"getAriaLabel(instructor)\" /\u003e"},{"lineNumber":224,"author":{"gitId":"-"},"content":"            \u003c/td\u003e"},{"lineNumber":225,"author":{"gitId":"-"},"content":"            \u003ctd\u003e{{ instructor.name }}\u003c/td\u003e"},{"lineNumber":226,"author":{"gitId":"-"},"content":"            \u003ctd\u003e{{ instructor.email }}\u003c/td\u003e"},{"lineNumber":227,"author":{"gitId":"-"},"content":"            \u003ctd\u003e{{ instructor.role | instructorRoleName }}\u003c/td\u003e"},{"lineNumber":228,"author":{"gitId":"-"},"content":"            \u003ctd\u003e{{ instructor.extensionDeadline | formatDateDetail: feedbackSessionTimeZone }}\u003c/td\u003e"},{"lineNumber":229,"author":{"gitId":"-"},"content":"          \u003c/tr\u003e"},{"lineNumber":230,"author":{"gitId":"-"},"content":"        \u003c/tbody\u003e"},{"lineNumber":231,"author":{"gitId":"-"},"content":"      \u003c/table\u003e"},{"lineNumber":232,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":233,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":234,"author":{"gitId":"-"},"content":"\u003c/tm-loading-retry\u003e"},{"lineNumber":235,"author":{"gitId":"-"},"content":"\u003cbr\u003e"},{"lineNumber":236,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"align-row-right\"\u003e"},{"lineNumber":237,"author":{"gitId":"-"},"content":"  \u003cdiv\u003e"},{"lineNumber":238,"author":{"gitId":"-"},"content":"    \u003cbutton type\u003d\"button\" id\u003d\"extend-btn\" class\u003d\"btn btn-success\" (click)\u003d\"onExtend()\""},{"lineNumber":239,"author":{"gitId":"-"},"content":"      [disabled]\u003d\"!hasSelected()\"\u003eExtend / Edit\u003c/button\u003e"},{"lineNumber":240,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":241,"author":{"gitId":"-"},"content":"  \u003cdiv\u003e"},{"lineNumber":242,"author":{"gitId":"-"},"content":"    \u003cbutton type\u003d\"button\" id\u003d\"delete-btn\" class\u003d\"btn btn-danger\" (click)\u003d\"onDelete()\""},{"lineNumber":243,"author":{"gitId":"-"},"content":"      [disabled]\u003d\"!hasSelectedValidForDeletion()\"\u003eDelete\u003c/button\u003e"},{"lineNumber":244,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":245,"author":{"gitId":"-"},"content":"\u003c/div\u003e"}],"authorContributionMap":{"weiquu":39,"-":206}},{"path":"src/web/app/pages-instructor/instructor-session-individual-extension-page/instructor-session-individual-extension-page.component.scss","fileType":"scss","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":".align-row-right {"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  justify-content: right;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"  display: flex;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"  flex-direction: row;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"  gap: 20px;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"}"},{"lineNumber":7,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":8,"author":{"gitId":"weiquu"},"content":".sortable-header {"},{"lineNumber":9,"author":{"gitId":"weiquu"},"content":"  cursor: pointer;"},{"lineNumber":10,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":11,"author":{"gitId":"weiquu"},"content":"  i {"},{"lineNumber":12,"author":{"gitId":"weiquu"},"content":"    margin-left: .3em;"},{"lineNumber":13,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":14,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":15,"author":{"gitId":"weiquu"},"content":"  .fa-stack {"},{"lineNumber":16,"author":{"gitId":"weiquu"},"content":"    width: 20%;"},{"lineNumber":17,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":18,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":19,"author":{"gitId":"weiquu"},"content":"  button {"},{"lineNumber":20,"author":{"gitId":"weiquu"},"content":"    background: none;"},{"lineNumber":21,"author":{"gitId":"weiquu"},"content":"    color: inherit;"},{"lineNumber":22,"author":{"gitId":"weiquu"},"content":"    border: none;"},{"lineNumber":23,"author":{"gitId":"weiquu"},"content":"    padding: 0;"},{"lineNumber":24,"author":{"gitId":"weiquu"},"content":"    text-align: left;"},{"lineNumber":25,"author":{"gitId":"weiquu"},"content":"    width: 100%;"},{"lineNumber":26,"author":{"gitId":"weiquu"},"content":"    font: inherit;"},{"lineNumber":27,"author":{"gitId":"weiquu"},"content":"    cursor: inherit;"},{"lineNumber":28,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":29,"author":{"gitId":"weiquu"},"content":"}"}],"authorContributionMap":{"weiquu":23,"-":6}},{"path":"src/web/app/pages-instructor/instructor-session-individual-extension-page/instructor-session-individual-extension-page.component.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { Component, OnInit } from \u0027@angular/core\u0027;"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import { ActivatedRoute } from \u0027@angular/router\u0027;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"import { NgbModal, NgbModalRef } from \u0027@ng-bootstrap/ng-bootstrap\u0027;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import { forkJoin } from \u0027rxjs\u0027;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import { finalize, map } from \u0027rxjs/operators\u0027;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import { CourseService } from \u0027../../../services/course.service\u0027;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import { DeadlineExtensionHelper } from \u0027../../../services/deadline-extension-helper\u0027;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import { FeedbackSessionsService } from \u0027../../../services/feedback-sessions.service\u0027;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import { InstructorService } from \u0027../../../services/instructor.service\u0027;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import { StatusMessageService } from \u0027../../../services/status-message.service\u0027;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import { StudentService } from \u0027../../../services/student.service\u0027;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import { TableComparatorService } from \u0027../../../services/table-comparator.service\u0027;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":14,"author":{"gitId":"-"},"content":"  Course,"},{"lineNumber":15,"author":{"gitId":"-"},"content":"  FeedbackSession,"},{"lineNumber":16,"author":{"gitId":"-"},"content":"  FeedbackSessionSubmittedGiverSet,"},{"lineNumber":17,"author":{"gitId":"-"},"content":"  Instructors,"},{"lineNumber":18,"author":{"gitId":"-"},"content":"  Students,"},{"lineNumber":19,"author":{"gitId":"-"},"content":"} from \u0027../../../types/api-output\u0027;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":21,"author":{"gitId":"-"},"content":"  FeedbackSessionBasicRequest,"},{"lineNumber":22,"author":{"gitId":"-"},"content":"  FeedbackSessionUpdateRequest,"},{"lineNumber":23,"author":{"gitId":"-"},"content":"  Intent,"},{"lineNumber":24,"author":{"gitId":"-"},"content":"  ResponseVisibleSetting,"},{"lineNumber":25,"author":{"gitId":"-"},"content":"  SessionVisibleSetting,"},{"lineNumber":26,"author":{"gitId":"-"},"content":"} from \u0027../../../types/api-request\u0027;"},{"lineNumber":27,"author":{"gitId":"-"},"content":"import { SortBy, SortOrder } from \u0027../../../types/sort-properties\u0027;"},{"lineNumber":28,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":29,"author":{"gitId":"-"},"content":"  ExtensionConfirmModalComponent,"},{"lineNumber":30,"author":{"gitId":"-"},"content":"  ExtensionModalType,"},{"lineNumber":31,"author":{"gitId":"-"},"content":"} from \u0027../../components/extension-confirm-modal/extension-confirm-modal.component\u0027;"},{"lineNumber":32,"author":{"gitId":"-"},"content":"import { ErrorMessageOutput } from \u0027../../error-message-output\u0027;"},{"lineNumber":33,"author":{"gitId":"-"},"content":"import { InstructorExtensionTableColumnModel, StudentExtensionTableColumnModel } from \u0027./extension-table-column-model\u0027;"},{"lineNumber":34,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":35,"author":{"gitId":"-"},"content":"  IndividualExtensionDateModalComponent,"},{"lineNumber":36,"author":{"gitId":"-"},"content":"} from \u0027./individual-extension-date-modal/individual-extension-date-modal.component\u0027;"},{"lineNumber":37,"author":{"gitId":"-"},"content":""},{"lineNumber":38,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":39,"author":{"gitId":"-"},"content":" * Send reminders to respondents modal."},{"lineNumber":40,"author":{"gitId":"-"},"content":" */"},{"lineNumber":41,"author":{"gitId":"-"},"content":"@Component({"},{"lineNumber":42,"author":{"gitId":"-"},"content":"  selector: \u0027tm-instructor-session-individual-extension-page\u0027,"},{"lineNumber":43,"author":{"gitId":"-"},"content":"  templateUrl: \u0027./instructor-session-individual-extension-page.component.html\u0027,"},{"lineNumber":44,"author":{"gitId":"-"},"content":"  styleUrls: [\u0027./instructor-session-individual-extension-page.component.scss\u0027],"},{"lineNumber":45,"author":{"gitId":"-"},"content":"})"},{"lineNumber":46,"author":{"gitId":"-"},"content":"export class InstructorSessionIndividualExtensionPageComponent implements OnInit {"},{"lineNumber":47,"author":{"gitId":"-"},"content":"  feedbackSessionDetails: FeedbackSessionBasicRequest \u003d {"},{"lineNumber":48,"author":{"gitId":"-"},"content":"    instructions: \u0027\u0027,"},{"lineNumber":49,"author":{"gitId":"-"},"content":"    submissionStartTimestamp: 0,"},{"lineNumber":50,"author":{"gitId":"-"},"content":"    submissionEndTimestamp: 0,"},{"lineNumber":51,"author":{"gitId":"-"},"content":"    gracePeriod: 0,"},{"lineNumber":52,"author":{"gitId":"-"},"content":"    sessionVisibleSetting: SessionVisibleSetting.AT_OPEN,"},{"lineNumber":53,"author":{"gitId":"-"},"content":"    customSessionVisibleTimestamp: 0,"},{"lineNumber":54,"author":{"gitId":"-"},"content":"    responseVisibleSetting: ResponseVisibleSetting.CUSTOM,"},{"lineNumber":55,"author":{"gitId":"-"},"content":"    customResponseVisibleTimestamp: 0,"},{"lineNumber":56,"author":{"gitId":"-"},"content":"    isClosingEmailEnabled: false,"},{"lineNumber":57,"author":{"gitId":"-"},"content":"    isPublishedEmailEnabled: false,"},{"lineNumber":58,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":59,"author":{"gitId":"-"},"content":""},{"lineNumber":60,"author":{"gitId":"-"},"content":"  feedbackSessionEndingTimestamp: number \u003d 0;"},{"lineNumber":61,"author":{"gitId":"-"},"content":"  feedbackSessionTimeZone: string \u003d \u0027UTC\u0027;"},{"lineNumber":62,"author":{"gitId":"-"},"content":"  courseId: string \u003d \u0027\u0027;"},{"lineNumber":63,"author":{"gitId":"-"},"content":"  courseName: string \u003d \u0027\u0027;"},{"lineNumber":64,"author":{"gitId":"-"},"content":"  feedbackSessionName: string \u003d \u0027\u0027;"},{"lineNumber":65,"author":{"gitId":"-"},"content":""},{"lineNumber":66,"author":{"gitId":"-"},"content":"  studentsOfCourse: StudentExtensionTableColumnModel[] \u003d [];"},{"lineNumber":67,"author":{"gitId":"-"},"content":"  instructorsOfCourse: InstructorExtensionTableColumnModel[] \u003d [];"},{"lineNumber":68,"author":{"gitId":"-"},"content":"  studentDeadlines: Record\u003cstring, number\u003e \u003d {};"},{"lineNumber":69,"author":{"gitId":"-"},"content":"  instructorDeadlines: Record\u003cstring, number\u003e \u003d {};"},{"lineNumber":70,"author":{"gitId":"-"},"content":""},{"lineNumber":71,"author":{"gitId":"-"},"content":"  SortBy: typeof SortBy \u003d SortBy;"},{"lineNumber":72,"author":{"gitId":"-"},"content":"  SortOrder: typeof SortOrder \u003d SortOrder;"},{"lineNumber":73,"author":{"gitId":"-"},"content":"  sortStudentsBy: SortBy \u003d SortBy.SESSION_END_DATE;"},{"lineNumber":74,"author":{"gitId":"-"},"content":"  sortStudentOrder: SortOrder \u003d SortOrder.DESC;"},{"lineNumber":75,"author":{"gitId":"-"},"content":"  sortInstructorsBy: SortBy \u003d SortBy.SESSION_END_DATE;"},{"lineNumber":76,"author":{"gitId":"-"},"content":"  sortInstructorOrder: SortOrder \u003d SortOrder.DESC;"},{"lineNumber":77,"author":{"gitId":"-"},"content":""},{"lineNumber":78,"author":{"gitId":"-"},"content":"  isAllStudentsSelected: boolean \u003d false;"},{"lineNumber":79,"author":{"gitId":"-"},"content":"  isAllInstructorsSelected: boolean \u003d false;"},{"lineNumber":80,"author":{"gitId":"-"},"content":""},{"lineNumber":81,"author":{"gitId":"-"},"content":"  isAllYetToSubmitStudentsSelected: boolean \u003d false;"},{"lineNumber":82,"author":{"gitId":"-"},"content":"  isAllYetToSubmitInstructorsSelected: boolean \u003d false;"},{"lineNumber":83,"author":{"gitId":"-"},"content":""},{"lineNumber":84,"author":{"gitId":"-"},"content":"  isLoadingAllStudents: boolean \u003d true;"},{"lineNumber":85,"author":{"gitId":"-"},"content":"  hasLoadedAllStudentsFailed: boolean \u003d false;"},{"lineNumber":86,"author":{"gitId":"-"},"content":"  isLoadingAllInstructors: boolean \u003d true;"},{"lineNumber":87,"author":{"gitId":"-"},"content":"  hasLoadedAllInstructorsFailed: boolean \u003d false;"},{"lineNumber":88,"author":{"gitId":"-"},"content":"  isLoadingFeedbackSession: boolean \u003d true;"},{"lineNumber":89,"author":{"gitId":"-"},"content":"  hasLoadingFeedbackSessionFailed: boolean \u003d false;"},{"lineNumber":90,"author":{"gitId":"-"},"content":"  isSubmittingDeadlines: boolean \u003d false;"},{"lineNumber":91,"author":{"gitId":"-"},"content":""},{"lineNumber":92,"author":{"gitId":"-"},"content":"  ngOnInit(): void {"},{"lineNumber":93,"author":{"gitId":"-"},"content":"    this.route.queryParams.subscribe((queryParams: any) \u003d\u003e {"},{"lineNumber":94,"author":{"gitId":"-"},"content":"      this.courseId \u003d queryParams.courseid;"},{"lineNumber":95,"author":{"gitId":"-"},"content":"      this.feedbackSessionName \u003d queryParams.fsname;"},{"lineNumber":96,"author":{"gitId":"-"},"content":"      this.isAllYetToSubmitInstructorsSelected \u003d queryParams.preselectnonsubmitters \u003d\u003d\u003d \u0027true\u0027;"},{"lineNumber":97,"author":{"gitId":"-"},"content":"      this.isAllYetToSubmitStudentsSelected \u003d queryParams.preselectnonsubmitters \u003d\u003d\u003d \u0027true\u0027;"},{"lineNumber":98,"author":{"gitId":"-"},"content":"      this.loadFeedbackSessionAndIndividuals();"},{"lineNumber":99,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":100,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":101,"author":{"gitId":"-"},"content":""},{"lineNumber":102,"author":{"gitId":"-"},"content":"  constructor("},{"lineNumber":103,"author":{"gitId":"-"},"content":"    private statusMessageService: StatusMessageService,"},{"lineNumber":104,"author":{"gitId":"-"},"content":"    private feedbackSessionsService: FeedbackSessionsService,"},{"lineNumber":105,"author":{"gitId":"-"},"content":"    private studentService: StudentService,"},{"lineNumber":106,"author":{"gitId":"-"},"content":"    private ngbModal: NgbModal,"},{"lineNumber":107,"author":{"gitId":"-"},"content":"    private route: ActivatedRoute,"},{"lineNumber":108,"author":{"gitId":"-"},"content":"    private courseService: CourseService,"},{"lineNumber":109,"author":{"gitId":"-"},"content":"    private tableComparatorService: TableComparatorService,"},{"lineNumber":110,"author":{"gitId":"-"},"content":"    private instructorService: InstructorService,"},{"lineNumber":111,"author":{"gitId":"-"},"content":"  ) { }"},{"lineNumber":112,"author":{"gitId":"-"},"content":""},{"lineNumber":113,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":114,"author":{"gitId":"-"},"content":"   * Loads a feedback session and individuals"},{"lineNumber":115,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":116,"author":{"gitId":"-"},"content":"  loadFeedbackSessionAndIndividuals(): void {"},{"lineNumber":117,"author":{"gitId":"-"},"content":"    this.resetTables();"},{"lineNumber":118,"author":{"gitId":"-"},"content":"    this.isLoadingAllStudents \u003d true;"},{"lineNumber":119,"author":{"gitId":"-"},"content":"    this.hasLoadedAllStudentsFailed \u003d false;"},{"lineNumber":120,"author":{"gitId":"-"},"content":"    this.isLoadingFeedbackSession \u003d true;"},{"lineNumber":121,"author":{"gitId":"-"},"content":"    this.hasLoadingFeedbackSessionFailed \u003d false;"},{"lineNumber":122,"author":{"gitId":"-"},"content":"    this.isLoadingAllInstructors \u003d true;"},{"lineNumber":123,"author":{"gitId":"-"},"content":"    this.hasLoadedAllStudentsFailed \u003d false;"},{"lineNumber":124,"author":{"gitId":"-"},"content":"    forkJoin(["},{"lineNumber":125,"author":{"gitId":"-"},"content":"      this.courseService.getCourseAsInstructor(this.courseId),"},{"lineNumber":126,"author":{"gitId":"-"},"content":"      this.feedbackSessionsService.getFeedbackSession({"},{"lineNumber":127,"author":{"gitId":"-"},"content":"        courseId: this.courseId,"},{"lineNumber":128,"author":{"gitId":"-"},"content":"        feedbackSessionName: this.feedbackSessionName,"},{"lineNumber":129,"author":{"gitId":"-"},"content":"        intent: Intent.FULL_DETAIL,"},{"lineNumber":130,"author":{"gitId":"-"},"content":"      }),"},{"lineNumber":131,"author":{"gitId":"-"},"content":"    ])"},{"lineNumber":132,"author":{"gitId":"-"},"content":"      .pipe(finalize(() \u003d\u003e {"},{"lineNumber":133,"author":{"gitId":"-"},"content":"        this.isLoadingFeedbackSession \u003d false;"},{"lineNumber":134,"author":{"gitId":"-"},"content":"        this.isLoadingAllStudents \u003d false;"},{"lineNumber":135,"author":{"gitId":"-"},"content":"        this.isLoadingAllInstructors \u003d false;"},{"lineNumber":136,"author":{"gitId":"-"},"content":"      }))"},{"lineNumber":137,"author":{"gitId":"-"},"content":"      .subscribe({"},{"lineNumber":138,"author":{"gitId":"-"},"content":"        next: ([course, feedbackSession]: [Course, FeedbackSession]) \u003d\u003e {"},{"lineNumber":139,"author":{"gitId":"-"},"content":"          this.courseName \u003d course.courseName;"},{"lineNumber":140,"author":{"gitId":"-"},"content":"          this.setFeedbackSessionDetails(feedbackSession);"},{"lineNumber":141,"author":{"gitId":"-"},"content":"          this.getAllStudentsOfCourse(); // Both students and instructors need feedback ending time."},{"lineNumber":142,"author":{"gitId":"-"},"content":"          this.getAllInstructorsOfCourse();"},{"lineNumber":143,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":144,"author":{"gitId":"-"},"content":"        error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":145,"author":{"gitId":"-"},"content":"          this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":146,"author":{"gitId":"-"},"content":"          this.hasLoadingFeedbackSessionFailed \u003d true;"},{"lineNumber":147,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":148,"author":{"gitId":"-"},"content":"      });"},{"lineNumber":149,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":150,"author":{"gitId":"-"},"content":""},{"lineNumber":151,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":152,"author":{"gitId":"-"},"content":"   * Gets all students of a course."},{"lineNumber":153,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":154,"author":{"gitId":"-"},"content":"  private getAllStudentsOfCourse(): void {"},{"lineNumber":155,"author":{"gitId":"-"},"content":"    this.studentService"},{"lineNumber":156,"author":{"gitId":"-"},"content":"      .getStudentsFromCourse({ courseId: this.courseId })"},{"lineNumber":157,"author":{"gitId":"-"},"content":"      .pipe(map(({ students }: Students) \u003d\u003e DeadlineExtensionHelper"},{"lineNumber":158,"author":{"gitId":"-"},"content":"        .mapStudentsToStudentModels(students, this.studentDeadlines, this.feedbackSessionEndingTimestamp)),"},{"lineNumber":159,"author":{"gitId":"-"},"content":"      )"},{"lineNumber":160,"author":{"gitId":"-"},"content":"      .subscribe({"},{"lineNumber":161,"author":{"gitId":"-"},"content":"        next: (studentModels: StudentExtensionTableColumnModel[]) \u003d\u003e {"},{"lineNumber":162,"author":{"gitId":"-"},"content":"          this.studentsOfCourse \u003d studentModels;"},{"lineNumber":163,"author":{"gitId":"-"},"content":"          this.initialSortOfStudents();"},{"lineNumber":164,"author":{"gitId":"-"},"content":"          this.getNonSubmitterStudents();"},{"lineNumber":165,"author":{"gitId":"-"},"content":""},{"lineNumber":166,"author":{"gitId":"-"},"content":"          if (this.isAllYetToSubmitStudentsSelected) {"},{"lineNumber":167,"author":{"gitId":"-"},"content":"            this.changeSelectionStatusForAllYetSubmittedStudentsHandler(true);"},{"lineNumber":168,"author":{"gitId":"-"},"content":"          }"},{"lineNumber":169,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":170,"author":{"gitId":"-"},"content":"        error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":171,"author":{"gitId":"-"},"content":"          this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":172,"author":{"gitId":"-"},"content":"          this.hasLoadedAllStudentsFailed \u003d true;"},{"lineNumber":173,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":174,"author":{"gitId":"-"},"content":"      });"},{"lineNumber":175,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":176,"author":{"gitId":"-"},"content":""},{"lineNumber":177,"author":{"gitId":"-"},"content":"  private setFeedbackSessionDetails(feedbackSession: FeedbackSession): void {"},{"lineNumber":178,"author":{"gitId":"-"},"content":"    this.feedbackSessionDetails \u003d {"},{"lineNumber":179,"author":{"gitId":"-"},"content":"      instructions: feedbackSession.instructions,"},{"lineNumber":180,"author":{"gitId":"-"},"content":"      submissionStartTimestamp: feedbackSession.submissionStartTimestamp,"},{"lineNumber":181,"author":{"gitId":"-"},"content":"      submissionEndTimestamp: feedbackSession.submissionEndTimestamp,"},{"lineNumber":182,"author":{"gitId":"-"},"content":"      gracePeriod: feedbackSession.gracePeriod,"},{"lineNumber":183,"author":{"gitId":"-"},"content":"      sessionVisibleSetting: feedbackSession.sessionVisibleSetting,"},{"lineNumber":184,"author":{"gitId":"-"},"content":"      customSessionVisibleTimestamp: feedbackSession.customSessionVisibleTimestamp,"},{"lineNumber":185,"author":{"gitId":"-"},"content":"      responseVisibleSetting: feedbackSession.responseVisibleSetting,"},{"lineNumber":186,"author":{"gitId":"-"},"content":"      customResponseVisibleTimestamp: feedbackSession.customResponseVisibleTimestamp,"},{"lineNumber":187,"author":{"gitId":"-"},"content":"      isClosingEmailEnabled: feedbackSession.isClosingEmailEnabled,"},{"lineNumber":188,"author":{"gitId":"-"},"content":"      isPublishedEmailEnabled: feedbackSession.isPublishedEmailEnabled,"},{"lineNumber":189,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":190,"author":{"gitId":"-"},"content":"    this.feedbackSessionEndingTimestamp \u003d feedbackSession.submissionEndTimestamp;"},{"lineNumber":191,"author":{"gitId":"-"},"content":"    this.feedbackSessionTimeZone \u003d feedbackSession.timeZone;"},{"lineNumber":192,"author":{"gitId":"-"},"content":"    this.studentDeadlines \u003d feedbackSession.studentDeadlines ?? {};"},{"lineNumber":193,"author":{"gitId":"-"},"content":"    this.instructorDeadlines \u003d feedbackSession.instructorDeadlines ?? {};"},{"lineNumber":194,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":195,"author":{"gitId":"-"},"content":""},{"lineNumber":196,"author":{"gitId":"-"},"content":"  private initialSortOfStudents(): void {"},{"lineNumber":197,"author":{"gitId":"-"},"content":"    this.studentsOfCourse.sort(this.sortStudentPanelsBy(SortBy.TEAM_NAME));"},{"lineNumber":198,"author":{"gitId":"-"},"content":"    this.studentsOfCourse.sort(this.sortStudentPanelsBy(SortBy.SECTION_NAME));"},{"lineNumber":199,"author":{"gitId":"-"},"content":"    this.studentsOfCourse.sort(this.sortStudentPanelsBy(SortBy.SESSION_END_DATE));"},{"lineNumber":200,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":201,"author":{"gitId":"-"},"content":""},{"lineNumber":202,"author":{"gitId":"-"},"content":"  private getNonSubmitterStudents(): void {"},{"lineNumber":203,"author":{"gitId":"-"},"content":"    this.feedbackSessionsService.getFeedbackSessionSubmittedGiverSet({"},{"lineNumber":204,"author":{"gitId":"-"},"content":"      courseId: this.courseId,"},{"lineNumber":205,"author":{"gitId":"-"},"content":"      feedbackSessionName: this.feedbackSessionName,"},{"lineNumber":206,"author":{"gitId":"-"},"content":"    }).subscribe({"},{"lineNumber":207,"author":{"gitId":"-"},"content":"      next: (feedbackSessionSubmittedGiverSet: FeedbackSessionSubmittedGiverSet) \u003d\u003e {"},{"lineNumber":208,"author":{"gitId":"-"},"content":"        this.studentsOfCourse"},{"lineNumber":209,"author":{"gitId":"-"},"content":"          .forEach((studentColumnModel: StudentExtensionTableColumnModel) \u003d\u003e {"},{"lineNumber":210,"author":{"gitId":"-"},"content":"            studentColumnModel.hasSubmittedSession \u003d"},{"lineNumber":211,"author":{"gitId":"-"},"content":"              feedbackSessionSubmittedGiverSet.giverIdentifiers.includes(studentColumnModel.email);"},{"lineNumber":212,"author":{"gitId":"-"},"content":"          });"},{"lineNumber":213,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":214,"author":{"gitId":"-"},"content":"      error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":215,"author":{"gitId":"-"},"content":"        this.hasLoadedAllStudentsFailed \u003d true;"},{"lineNumber":216,"author":{"gitId":"-"},"content":"        this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":217,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":218,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":219,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":220,"author":{"gitId":"-"},"content":""},{"lineNumber":221,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":222,"author":{"gitId":"-"},"content":"   * Changes selection state for all yet to submit students."},{"lineNumber":223,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":224,"author":{"gitId":"-"},"content":"  changeSelectionStatusForAllYetSubmittedStudentsHandler(shouldSelect: boolean): void {"},{"lineNumber":225,"author":{"gitId":"-"},"content":"    this.isAllYetToSubmitStudentsSelected \u003d shouldSelect;"},{"lineNumber":226,"author":{"gitId":"-"},"content":""},{"lineNumber":227,"author":{"gitId":"-"},"content":"    this.studentsOfCourse.forEach((model: StudentExtensionTableColumnModel) \u003d\u003e {"},{"lineNumber":228,"author":{"gitId":"-"},"content":"      if (!model.hasSubmittedSession) {"},{"lineNumber":229,"author":{"gitId":"-"},"content":"        model.isSelected \u003d shouldSelect;"},{"lineNumber":230,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":231,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":232,"author":{"gitId":"-"},"content":"    this.updateSelectAllStudents();"},{"lineNumber":233,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":234,"author":{"gitId":"-"},"content":""},{"lineNumber":235,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":236,"author":{"gitId":"-"},"content":"   * Loads the instructors in the course"},{"lineNumber":237,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":238,"author":{"gitId":"-"},"content":"  private getAllInstructorsOfCourse(): void {"},{"lineNumber":239,"author":{"gitId":"-"},"content":"    this.instructorService"},{"lineNumber":240,"author":{"gitId":"-"},"content":"      .loadInstructors({ courseId: this.courseId, intent: Intent.FULL_DETAIL })"},{"lineNumber":241,"author":{"gitId":"-"},"content":"      .pipe(map(({ instructors }: Instructors) \u003d\u003e DeadlineExtensionHelper"},{"lineNumber":242,"author":{"gitId":"-"},"content":"        .mapInstructorsToInstructorModels(instructors, this.instructorDeadlines, this.feedbackSessionEndingTimestamp)))"},{"lineNumber":243,"author":{"gitId":"-"},"content":"      .subscribe({"},{"lineNumber":244,"author":{"gitId":"-"},"content":"        next: (instructorModels: InstructorExtensionTableColumnModel[]) \u003d\u003e {"},{"lineNumber":245,"author":{"gitId":"-"},"content":"          this.instructorsOfCourse \u003d instructorModels;"},{"lineNumber":246,"author":{"gitId":"-"},"content":"          this.initialSortOfInstructors();"},{"lineNumber":247,"author":{"gitId":"-"},"content":"          this.getNonSubmitterInstructors();"},{"lineNumber":248,"author":{"gitId":"-"},"content":""},{"lineNumber":249,"author":{"gitId":"-"},"content":"          if (this.isAllYetToSubmitInstructorsSelected) {"},{"lineNumber":250,"author":{"gitId":"-"},"content":"            this.changeSelectionStatusForAllYetSubmittedInstructorsHandler(true);"},{"lineNumber":251,"author":{"gitId":"-"},"content":"          }"},{"lineNumber":252,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":253,"author":{"gitId":"-"},"content":"        error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":254,"author":{"gitId":"-"},"content":"          this.hasLoadedAllInstructorsFailed \u003d true;"},{"lineNumber":255,"author":{"gitId":"-"},"content":"          this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":256,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":257,"author":{"gitId":"-"},"content":"      });"},{"lineNumber":258,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":259,"author":{"gitId":"-"},"content":""},{"lineNumber":260,"author":{"gitId":"-"},"content":"  private initialSortOfInstructors(): void {"},{"lineNumber":261,"author":{"gitId":"-"},"content":"    this.instructorsOfCourse.sort(this.sortInstructorPanelsBy(SortBy.INSTRUCTOR_PERMISSION_ROLE));"},{"lineNumber":262,"author":{"gitId":"-"},"content":"    this.instructorsOfCourse.sort(this.sortInstructorPanelsBy(SortBy.SESSION_END_DATE));"},{"lineNumber":263,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":264,"author":{"gitId":"-"},"content":""},{"lineNumber":265,"author":{"gitId":"-"},"content":"  private getNonSubmitterInstructors(): void {"},{"lineNumber":266,"author":{"gitId":"-"},"content":"    this.feedbackSessionsService.getFeedbackSessionSubmittedGiverSet({"},{"lineNumber":267,"author":{"gitId":"-"},"content":"      courseId: this.courseId,"},{"lineNumber":268,"author":{"gitId":"-"},"content":"      feedbackSessionName: this.feedbackSessionName,"},{"lineNumber":269,"author":{"gitId":"-"},"content":"    }).subscribe({"},{"lineNumber":270,"author":{"gitId":"-"},"content":"      next: (feedbackSessionSubmittedGiverSet: FeedbackSessionSubmittedGiverSet) \u003d\u003e {"},{"lineNumber":271,"author":{"gitId":"-"},"content":"        this.instructorsOfCourse"},{"lineNumber":272,"author":{"gitId":"-"},"content":"          .forEach((instructorColumnModel: InstructorExtensionTableColumnModel) \u003d\u003e {"},{"lineNumber":273,"author":{"gitId":"-"},"content":"            instructorColumnModel.hasSubmittedSession \u003d"},{"lineNumber":274,"author":{"gitId":"-"},"content":"              feedbackSessionSubmittedGiverSet.giverIdentifiers.includes(instructorColumnModel.email);"},{"lineNumber":275,"author":{"gitId":"-"},"content":"          });"},{"lineNumber":276,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":277,"author":{"gitId":"-"},"content":"      error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":278,"author":{"gitId":"-"},"content":"        this.hasLoadedAllInstructorsFailed \u003d true;"},{"lineNumber":279,"author":{"gitId":"-"},"content":"        this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":280,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":281,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":282,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":283,"author":{"gitId":"-"},"content":""},{"lineNumber":284,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":285,"author":{"gitId":"-"},"content":"   * Changes selection state for all yet to submit instructors."},{"lineNumber":286,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":287,"author":{"gitId":"-"},"content":"  changeSelectionStatusForAllYetSubmittedInstructorsHandler(shouldSelect: boolean): void {"},{"lineNumber":288,"author":{"gitId":"-"},"content":"    this.isAllYetToSubmitInstructorsSelected \u003d shouldSelect;"},{"lineNumber":289,"author":{"gitId":"-"},"content":""},{"lineNumber":290,"author":{"gitId":"-"},"content":"    this.instructorsOfCourse.forEach((model: InstructorExtensionTableColumnModel) \u003d\u003e {"},{"lineNumber":291,"author":{"gitId":"-"},"content":"      if (!model.hasSubmittedSession) {"},{"lineNumber":292,"author":{"gitId":"-"},"content":"        model.isSelected \u003d shouldSelect;"},{"lineNumber":293,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":294,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":295,"author":{"gitId":"-"},"content":"    this.updateSelectAllInstructors();"},{"lineNumber":296,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":297,"author":{"gitId":"-"},"content":""},{"lineNumber":298,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":299,"author":{"gitId":"-"},"content":"   * Handles the the date and time selection modal to create/update deadlines."},{"lineNumber":300,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":301,"author":{"gitId":"-"},"content":"  onExtend(): void {"},{"lineNumber":302,"author":{"gitId":"-"},"content":"    const modalRef: NgbModalRef \u003d this.ngbModal.open(IndividualExtensionDateModalComponent);"},{"lineNumber":303,"author":{"gitId":"-"},"content":"    modalRef.componentInstance.numStudents \u003d this.getNumberOfSelectedStudents();"},{"lineNumber":304,"author":{"gitId":"-"},"content":"    modalRef.componentInstance.numInstructors \u003d this.getNumberOfSelectedInstructors();"},{"lineNumber":305,"author":{"gitId":"-"},"content":"    modalRef.componentInstance.feedbackSessionEndingTimestamp \u003d this.feedbackSessionEndingTimestamp;"},{"lineNumber":306,"author":{"gitId":"-"},"content":"    modalRef.componentInstance.feedbackSessionTimeZone \u003d this.feedbackSessionTimeZone;"},{"lineNumber":307,"author":{"gitId":"-"},"content":"    modalRef.componentInstance.confirmCallbackEvent.subscribe((extensionTimestamp: number) \u003d\u003e {"},{"lineNumber":308,"author":{"gitId":"-"},"content":"      this.onConfirmExtension(extensionTimestamp);"},{"lineNumber":309,"author":{"gitId":"-"},"content":"      modalRef.close();"},{"lineNumber":310,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":311,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":312,"author":{"gitId":"-"},"content":""},{"lineNumber":313,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":314,"author":{"gitId":"-"},"content":"   * Handles the opening the confirmation modal to create/update deadlines."},{"lineNumber":315,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":316,"author":{"gitId":"-"},"content":"  private onConfirmExtension(extensionTimestamp: number): void {"},{"lineNumber":317,"author":{"gitId":"-"},"content":"    const modalRef: NgbModalRef \u003d this.ngbModal.open(ExtensionConfirmModalComponent);"},{"lineNumber":318,"author":{"gitId":"-"},"content":"    const selectedStudents \u003d this.getSelectedStudents();"},{"lineNumber":319,"author":{"gitId":"-"},"content":"    const selectedInstructors \u003d this.getSelectedInstructors();"},{"lineNumber":320,"author":{"gitId":"-"},"content":"    modalRef.componentInstance.modalType \u003d ExtensionModalType.EXTEND;"},{"lineNumber":321,"author":{"gitId":"-"},"content":"    modalRef.componentInstance.selectedStudents \u003d selectedStudents;"},{"lineNumber":322,"author":{"gitId":"-"},"content":"    modalRef.componentInstance.selectedInstructors \u003d selectedInstructors;"},{"lineNumber":323,"author":{"gitId":"-"},"content":"    modalRef.componentInstance.extensionTimestamp \u003d extensionTimestamp;"},{"lineNumber":324,"author":{"gitId":"-"},"content":"    modalRef.componentInstance.feedbackSessionTimeZone \u003d this.feedbackSessionTimeZone;"},{"lineNumber":325,"author":{"gitId":"-"},"content":""},{"lineNumber":326,"author":{"gitId":"-"},"content":"    modalRef.componentInstance.confirmExtensionCallbackEvent.subscribe((isNotifyDeadlines: boolean) \u003d\u003e {"},{"lineNumber":327,"author":{"gitId":"-"},"content":"      this.handleCreateDeadlines(selectedStudents, selectedInstructors, isNotifyDeadlines, extensionTimestamp);"},{"lineNumber":328,"author":{"gitId":"-"},"content":"      modalRef.componentInstance.isSubmitting \u003d false;"},{"lineNumber":329,"author":{"gitId":"-"},"content":"      modalRef.close();"},{"lineNumber":330,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":331,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":332,"author":{"gitId":"-"},"content":""},{"lineNumber":333,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":334,"author":{"gitId":"-"},"content":"   * Handles the opening the confirmation modal to delete deadlines."},{"lineNumber":335,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":336,"author":{"gitId":"-"},"content":"  onDelete(): void {"},{"lineNumber":337,"author":{"gitId":"-"},"content":"    const modalRef: NgbModalRef \u003d this.ngbModal.open(ExtensionConfirmModalComponent);"},{"lineNumber":338,"author":{"gitId":"-"},"content":"    const selectedStudents \u003d this.getSelectedStudentsWithExtensions();"},{"lineNumber":339,"author":{"gitId":"-"},"content":"    const selectedInstructors \u003d this.getSelectedInstructorsWithExtensions();"},{"lineNumber":340,"author":{"gitId":"-"},"content":"    modalRef.componentInstance.modalType \u003d ExtensionModalType.DELETE;"},{"lineNumber":341,"author":{"gitId":"-"},"content":"    modalRef.componentInstance.selectedStudents \u003d selectedStudents;"},{"lineNumber":342,"author":{"gitId":"-"},"content":"    modalRef.componentInstance.selectedInstructors \u003d selectedInstructors;"},{"lineNumber":343,"author":{"gitId":"-"},"content":"    modalRef.componentInstance.extensionTimestamp \u003d this.feedbackSessionEndingTimestamp;"},{"lineNumber":344,"author":{"gitId":"-"},"content":"    modalRef.componentInstance.feedbackSessionTimeZone \u003d this.feedbackSessionTimeZone;"},{"lineNumber":345,"author":{"gitId":"-"},"content":""},{"lineNumber":346,"author":{"gitId":"-"},"content":"    modalRef.componentInstance.confirmExtensionCallbackEvent.subscribe((isNotifyDeadlines: boolean) \u003d\u003e {"},{"lineNumber":347,"author":{"gitId":"-"},"content":"      this.handleDeleteDeadlines(selectedStudents, selectedInstructors, isNotifyDeadlines);"},{"lineNumber":348,"author":{"gitId":"-"},"content":"      modalRef.componentInstance.isSubmitting \u003d false;"},{"lineNumber":349,"author":{"gitId":"-"},"content":"      modalRef.close();"},{"lineNumber":350,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":351,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":352,"author":{"gitId":"-"},"content":""},{"lineNumber":353,"author":{"gitId":"-"},"content":"  private handleCreateDeadlines("},{"lineNumber":354,"author":{"gitId":"-"},"content":"    selectedStudents: StudentExtensionTableColumnModel[],"},{"lineNumber":355,"author":{"gitId":"-"},"content":"    selectedInstructors: InstructorExtensionTableColumnModel[],"},{"lineNumber":356,"author":{"gitId":"-"},"content":"    isNotifyDeadlines: boolean,"},{"lineNumber":357,"author":{"gitId":"-"},"content":"    extensionTimestamp: number,"},{"lineNumber":358,"author":{"gitId":"-"},"content":"  ): void {"},{"lineNumber":359,"author":{"gitId":"-"},"content":"    const updatedDeadlinesForCreation \u003d this.getUpdatedDeadlinesForCreation("},{"lineNumber":360,"author":{"gitId":"-"},"content":"      selectedStudents, selectedInstructors, extensionTimestamp);"},{"lineNumber":361,"author":{"gitId":"-"},"content":"    const request: FeedbackSessionUpdateRequest \u003d {"},{"lineNumber":362,"author":{"gitId":"-"},"content":"      ...updatedDeadlinesForCreation,"},{"lineNumber":363,"author":{"gitId":"-"},"content":"      ...this.feedbackSessionDetails,"},{"lineNumber":364,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":365,"author":{"gitId":"-"},"content":""},{"lineNumber":366,"author":{"gitId":"-"},"content":"    this.handleUpdateDeadlines(request, selectedStudents.length,"},{"lineNumber":367,"author":{"gitId":"-"},"content":"      selectedInstructors.length, isNotifyDeadlines, \u0027created\u0027);"},{"lineNumber":368,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":369,"author":{"gitId":"-"},"content":""},{"lineNumber":370,"author":{"gitId":"-"},"content":"  private handleDeleteDeadlines("},{"lineNumber":371,"author":{"gitId":"-"},"content":"    selectedStudents: StudentExtensionTableColumnModel[],"},{"lineNumber":372,"author":{"gitId":"-"},"content":"    selectedInstructors: InstructorExtensionTableColumnModel[],"},{"lineNumber":373,"author":{"gitId":"-"},"content":"    isNotifyDeadlines: boolean,"},{"lineNumber":374,"author":{"gitId":"-"},"content":"  ): void {"},{"lineNumber":375,"author":{"gitId":"-"},"content":"    const updatedDeadlinesForDeletion \u003d this.getUpdatedDeadlinesForDeletion("},{"lineNumber":376,"author":{"gitId":"-"},"content":"      selectedStudents, selectedInstructors);"},{"lineNumber":377,"author":{"gitId":"-"},"content":"    const request: FeedbackSessionUpdateRequest \u003d {"},{"lineNumber":378,"author":{"gitId":"-"},"content":"      ...updatedDeadlinesForDeletion,"},{"lineNumber":379,"author":{"gitId":"-"},"content":"      ...this.feedbackSessionDetails,"},{"lineNumber":380,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":381,"author":{"gitId":"-"},"content":"    this.handleUpdateDeadlines(request, selectedStudents.length,"},{"lineNumber":382,"author":{"gitId":"-"},"content":"      selectedInstructors.length, isNotifyDeadlines, \u0027deleted\u0027);"},{"lineNumber":383,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":384,"author":{"gitId":"-"},"content":""},{"lineNumber":385,"author":{"gitId":"-"},"content":"  private handleUpdateDeadlines("},{"lineNumber":386,"author":{"gitId":"-"},"content":"    request: FeedbackSessionUpdateRequest,"},{"lineNumber":387,"author":{"gitId":"-"},"content":"    numStudentsUpdated: number,"},{"lineNumber":388,"author":{"gitId":"-"},"content":"    numInstructorsUpdated: number,"},{"lineNumber":389,"author":{"gitId":"-"},"content":"    isNotifyDeadlines: boolean,"},{"lineNumber":390,"author":{"gitId":"-"},"content":"    actionForToast: string,"},{"lineNumber":391,"author":{"gitId":"-"},"content":"  ): void {"},{"lineNumber":392,"author":{"gitId":"-"},"content":"    this.isSubmittingDeadlines \u003d true;"},{"lineNumber":393,"author":{"gitId":"-"},"content":"    this.feedbackSessionsService"},{"lineNumber":394,"author":{"gitId":"-"},"content":"      .updateFeedbackSession(this.courseId, this.feedbackSessionName, request, isNotifyDeadlines)"},{"lineNumber":395,"author":{"gitId":"-"},"content":"      .pipe(finalize(() \u003d\u003e { this.isSubmittingDeadlines \u003d false; }))"},{"lineNumber":396,"author":{"gitId":"-"},"content":"      .subscribe({"},{"lineNumber":397,"author":{"gitId":"-"},"content":"        next: () \u003d\u003e {"},{"lineNumber":398,"author":{"gitId":"-"},"content":"          this.loadFeedbackSessionAndIndividuals();"},{"lineNumber":399,"author":{"gitId":"-"},"content":"          this.showSuccessToast(actionForToast, numStudentsUpdated, numInstructorsUpdated);"},{"lineNumber":400,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":401,"author":{"gitId":"-"},"content":"        error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":402,"author":{"gitId":"-"},"content":"          this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":403,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":404,"author":{"gitId":"-"},"content":"      });"},{"lineNumber":405,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":406,"author":{"gitId":"-"},"content":""},{"lineNumber":407,"author":{"gitId":"-"},"content":"  private getUpdatedDeadlinesForCreation(selectedStudents: StudentExtensionTableColumnModel[],"},{"lineNumber":408,"author":{"gitId":"-"},"content":"    selectedInstructors: InstructorExtensionTableColumnModel[], extensionTimestamp: number,"},{"lineNumber":409,"author":{"gitId":"-"},"content":"  ): { studentDeadlines: Record\u003cstring, number\u003e, instructorDeadlines: Record\u003cstring, number\u003e } {"},{"lineNumber":410,"author":{"gitId":"-"},"content":"    const studentDeadlines \u003d DeadlineExtensionHelper.getUpdatedDeadlinesForCreation("},{"lineNumber":411,"author":{"gitId":"-"},"content":"      selectedStudents, this.studentDeadlines, extensionTimestamp);"},{"lineNumber":412,"author":{"gitId":"-"},"content":"    const instructorDeadlines \u003d DeadlineExtensionHelper.getUpdatedDeadlinesForCreation("},{"lineNumber":413,"author":{"gitId":"-"},"content":"      selectedInstructors, this.instructorDeadlines, extensionTimestamp);"},{"lineNumber":414,"author":{"gitId":"-"},"content":""},{"lineNumber":415,"author":{"gitId":"-"},"content":"    return { studentDeadlines, instructorDeadlines };"},{"lineNumber":416,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":417,"author":{"gitId":"-"},"content":""},{"lineNumber":418,"author":{"gitId":"-"},"content":"  private getUpdatedDeadlinesForDeletion(selectedStudents: StudentExtensionTableColumnModel[],"},{"lineNumber":419,"author":{"gitId":"-"},"content":"    selectedInstructors: InstructorExtensionTableColumnModel[],"},{"lineNumber":420,"author":{"gitId":"-"},"content":"  ): { studentDeadlines: Record\u003cstring, number\u003e, instructorDeadlines: Record\u003cstring, number\u003e } {"},{"lineNumber":421,"author":{"gitId":"-"},"content":"    const studentDeadlines \u003d DeadlineExtensionHelper.getUpdatedDeadlinesForDeletion("},{"lineNumber":422,"author":{"gitId":"-"},"content":"      selectedStudents, this.studentDeadlines);"},{"lineNumber":423,"author":{"gitId":"-"},"content":"    const instructorDeadlines \u003d DeadlineExtensionHelper.getUpdatedDeadlinesForDeletion("},{"lineNumber":424,"author":{"gitId":"-"},"content":"      selectedInstructors, this.instructorDeadlines);"},{"lineNumber":425,"author":{"gitId":"-"},"content":""},{"lineNumber":426,"author":{"gitId":"-"},"content":"    return { studentDeadlines, instructorDeadlines };"},{"lineNumber":427,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":428,"author":{"gitId":"-"},"content":""},{"lineNumber":429,"author":{"gitId":"-"},"content":"  private showSuccessToast(updateAction: string, numOfStudentsUpdated: number, numOfInstructorsUpdated: number): void {"},{"lineNumber":430,"author":{"gitId":"-"},"content":"    this.statusMessageService.showSuccessToast("},{"lineNumber":431,"author":{"gitId":"-"},"content":"      `Successfully ${updateAction} extension(s) for ${numOfStudentsUpdated} student(s) and`"},{"lineNumber":432,"author":{"gitId":"-"},"content":"      + ` ${numOfInstructorsUpdated} instructor(s)!`);"},{"lineNumber":433,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":434,"author":{"gitId":"-"},"content":""},{"lineNumber":435,"author":{"gitId":"-"},"content":"  private getSelectedStudents(): StudentExtensionTableColumnModel[] {"},{"lineNumber":436,"author":{"gitId":"-"},"content":"    return this.studentsOfCourse.filter((x) \u003d\u003e x.isSelected);"},{"lineNumber":437,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":438,"author":{"gitId":"-"},"content":""},{"lineNumber":439,"author":{"gitId":"-"},"content":"  getNumberOfSelectedStudents(): number {"},{"lineNumber":440,"author":{"gitId":"-"},"content":"    return this.getSelectedStudents().length;"},{"lineNumber":441,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":442,"author":{"gitId":"-"},"content":""},{"lineNumber":443,"author":{"gitId":"-"},"content":"  private getSelectedStudentsWithExtensions(): StudentExtensionTableColumnModel[] {"},{"lineNumber":444,"author":{"gitId":"-"},"content":"    return this.studentsOfCourse.filter((x) \u003d\u003e x.isSelected \u0026\u0026 x.hasExtension);"},{"lineNumber":445,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":446,"author":{"gitId":"-"},"content":""},{"lineNumber":447,"author":{"gitId":"-"},"content":"  private getSelectedInstructors(): InstructorExtensionTableColumnModel[] {"},{"lineNumber":448,"author":{"gitId":"-"},"content":"    return this.instructorsOfCourse.filter((x) \u003d\u003e x.isSelected);"},{"lineNumber":449,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":450,"author":{"gitId":"-"},"content":""},{"lineNumber":451,"author":{"gitId":"-"},"content":"  private getNumberOfSelectedInstructors(): number {"},{"lineNumber":452,"author":{"gitId":"-"},"content":"    return this.getSelectedInstructors().length;"},{"lineNumber":453,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":454,"author":{"gitId":"-"},"content":""},{"lineNumber":455,"author":{"gitId":"-"},"content":"  private getSelectedInstructorsWithExtensions(): InstructorExtensionTableColumnModel[] {"},{"lineNumber":456,"author":{"gitId":"-"},"content":"    return this.instructorsOfCourse.filter((x) \u003d\u003e x.isSelected \u0026\u0026 x.hasExtension);"},{"lineNumber":457,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":458,"author":{"gitId":"-"},"content":""},{"lineNumber":459,"author":{"gitId":"-"},"content":"  hasSelected(): boolean {"},{"lineNumber":460,"author":{"gitId":"-"},"content":"    return this.studentsOfCourse.some((user) \u003d\u003e user.isSelected)"},{"lineNumber":461,"author":{"gitId":"-"},"content":"      || this.instructorsOfCourse.some((user) \u003d\u003e user.isSelected);"},{"lineNumber":462,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":463,"author":{"gitId":"-"},"content":""},{"lineNumber":464,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":465,"author":{"gitId":"-"},"content":"   * Checks if at least one valid extension has been selected"},{"lineNumber":466,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":467,"author":{"gitId":"-"},"content":"  hasSelectedValidForDeletion(): boolean {"},{"lineNumber":468,"author":{"gitId":"-"},"content":"    return this.studentsOfCourse.some((user) \u003d\u003e user.isSelected \u0026\u0026 user.hasExtension)"},{"lineNumber":469,"author":{"gitId":"-"},"content":"      || this.instructorsOfCourse.some((user) \u003d\u003e user.isSelected \u0026\u0026 user.hasExtension);"},{"lineNumber":470,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":471,"author":{"gitId":"-"},"content":""},{"lineNumber":472,"author":{"gitId":"-"},"content":"  selectAllStudents(): void {"},{"lineNumber":473,"author":{"gitId":"-"},"content":"    this.isAllStudentsSelected \u003d !this.isAllStudentsSelected;"},{"lineNumber":474,"author":{"gitId":"-"},"content":"    this.studentsOfCourse.forEach((x) \u003d\u003e { x.isSelected \u003d this.isAllStudentsSelected; });"},{"lineNumber":475,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":476,"author":{"gitId":"-"},"content":""},{"lineNumber":477,"author":{"gitId":"-"},"content":"  selectAllInstructors(): void {"},{"lineNumber":478,"author":{"gitId":"-"},"content":"    this.isAllInstructorsSelected \u003d !this.isAllInstructorsSelected;"},{"lineNumber":479,"author":{"gitId":"-"},"content":"    this.instructorsOfCourse.forEach((x) \u003d\u003e { x.isSelected \u003d this.isAllInstructorsSelected; });"},{"lineNumber":480,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":481,"author":{"gitId":"-"},"content":""},{"lineNumber":482,"author":{"gitId":"-"},"content":"  selectStudent(i: number): void {"},{"lineNumber":483,"author":{"gitId":"-"},"content":"    this.studentsOfCourse[i].isSelected \u003d !this.studentsOfCourse[i].isSelected;"},{"lineNumber":484,"author":{"gitId":"-"},"content":"    this.updateSelectAllStudents();"},{"lineNumber":485,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":486,"author":{"gitId":"-"},"content":""},{"lineNumber":487,"author":{"gitId":"-"},"content":"  private updateSelectAllStudents(): void {"},{"lineNumber":488,"author":{"gitId":"-"},"content":"    const numStudentsSelected \u003d this.getNumberOfSelectedStudents();"},{"lineNumber":489,"author":{"gitId":"-"},"content":"    const numStudents \u003d this.studentsOfCourse.length;"},{"lineNumber":490,"author":{"gitId":"-"},"content":"    this.isAllStudentsSelected \u003d numStudentsSelected \u003d\u003d\u003d numStudents;"},{"lineNumber":491,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":492,"author":{"gitId":"-"},"content":""},{"lineNumber":493,"author":{"gitId":"-"},"content":"  selectIntructor(i: number): void {"},{"lineNumber":494,"author":{"gitId":"-"},"content":"    this.instructorsOfCourse[i].isSelected \u003d !this.instructorsOfCourse[i].isSelected;"},{"lineNumber":495,"author":{"gitId":"-"},"content":"    this.updateSelectAllInstructors();"},{"lineNumber":496,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":497,"author":{"gitId":"-"},"content":""},{"lineNumber":498,"author":{"gitId":"-"},"content":"  private updateSelectAllInstructors(): void {"},{"lineNumber":499,"author":{"gitId":"-"},"content":"    const numInstructorsSelected \u003d this.getNumberOfSelectedInstructors();"},{"lineNumber":500,"author":{"gitId":"-"},"content":"    const numInstructors \u003d this.instructorsOfCourse.length;"},{"lineNumber":501,"author":{"gitId":"-"},"content":"    this.isAllInstructorsSelected \u003d numInstructorsSelected \u003d\u003d\u003d numInstructors;"},{"lineNumber":502,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":503,"author":{"gitId":"-"},"content":""},{"lineNumber":504,"author":{"gitId":"-"},"content":"  sortStudentColumnsBy(by: SortBy): void {"},{"lineNumber":505,"author":{"gitId":"-"},"content":"    this.sortStudentsBy \u003d by;"},{"lineNumber":506,"author":{"gitId":"-"},"content":"    this.sortStudentOrder \u003d this.sortStudentOrder \u003d\u003d\u003d SortOrder.DESC ? SortOrder.ASC : SortOrder.DESC;"},{"lineNumber":507,"author":{"gitId":"-"},"content":"    this.studentsOfCourse.sort(this.sortStudentPanelsBy(by));"},{"lineNumber":508,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":509,"author":{"gitId":"-"},"content":""},{"lineNumber":510,"author":{"gitId":"weiquu"},"content":"  getAriaSortStudent(by: SortBy): String {"},{"lineNumber":511,"author":{"gitId":"weiquu"},"content":"    if (by !\u003d\u003d this.sortStudentsBy) {"},{"lineNumber":512,"author":{"gitId":"weiquu"},"content":"      return \u0027none\u0027;"},{"lineNumber":513,"author":{"gitId":"weiquu"},"content":"    }"},{"lineNumber":514,"author":{"gitId":"weiquu"},"content":"    return this.sortStudentOrder \u003d\u003d\u003d SortOrder.ASC ? \u0027ascending\u0027 : \u0027descending\u0027;"},{"lineNumber":515,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":516,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":517,"author":{"gitId":"-"},"content":"  private resetTables(): void {"},{"lineNumber":518,"author":{"gitId":"-"},"content":"    this.isAllInstructorsSelected \u003d false;"},{"lineNumber":519,"author":{"gitId":"-"},"content":"    this.isAllStudentsSelected \u003d false;"},{"lineNumber":520,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":521,"author":{"gitId":"-"},"content":""},{"lineNumber":522,"author":{"gitId":"-"},"content":"  private sortStudentPanelsBy("},{"lineNumber":523,"author":{"gitId":"-"},"content":"    by: SortBy,"},{"lineNumber":524,"author":{"gitId":"-"},"content":"  ): (a: StudentExtensionTableColumnModel, b: StudentExtensionTableColumnModel) \u003d\u003e number {"},{"lineNumber":525,"author":{"gitId":"-"},"content":"    return (a: StudentExtensionTableColumnModel, b: StudentExtensionTableColumnModel): number \u003d\u003e {"},{"lineNumber":526,"author":{"gitId":"-"},"content":"      let strA: string;"},{"lineNumber":527,"author":{"gitId":"-"},"content":"      let strB: string;"},{"lineNumber":528,"author":{"gitId":"-"},"content":"      switch (by) {"},{"lineNumber":529,"author":{"gitId":"-"},"content":"        case SortBy.SECTION_NAME:"},{"lineNumber":530,"author":{"gitId":"-"},"content":"          strA \u003d a.sectionName;"},{"lineNumber":531,"author":{"gitId":"-"},"content":"          strB \u003d b.sectionName;"},{"lineNumber":532,"author":{"gitId":"-"},"content":"          break;"},{"lineNumber":533,"author":{"gitId":"-"},"content":"        case SortBy.TEAM_NAME:"},{"lineNumber":534,"author":{"gitId":"-"},"content":"          strA \u003d a.sectionName;"},{"lineNumber":535,"author":{"gitId":"-"},"content":"          strB \u003d b.sectionName;"},{"lineNumber":536,"author":{"gitId":"-"},"content":"          break;"},{"lineNumber":537,"author":{"gitId":"-"},"content":"        case SortBy.RESPONDENT_NAME:"},{"lineNumber":538,"author":{"gitId":"-"},"content":"          strA \u003d a.name;"},{"lineNumber":539,"author":{"gitId":"-"},"content":"          strB \u003d b.name;"},{"lineNumber":540,"author":{"gitId":"-"},"content":"          break;"},{"lineNumber":541,"author":{"gitId":"-"},"content":"        case SortBy.RESPONDENT_EMAIL:"},{"lineNumber":542,"author":{"gitId":"-"},"content":"          strA \u003d a.email;"},{"lineNumber":543,"author":{"gitId":"-"},"content":"          strB \u003d b.email;"},{"lineNumber":544,"author":{"gitId":"-"},"content":"          break;"},{"lineNumber":545,"author":{"gitId":"-"},"content":"        case SortBy.SESSION_END_DATE:"},{"lineNumber":546,"author":{"gitId":"-"},"content":"          strA \u003d a.extensionDeadline.toString();"},{"lineNumber":547,"author":{"gitId":"-"},"content":"          strB \u003d b.extensionDeadline.toString();"},{"lineNumber":548,"author":{"gitId":"-"},"content":"          break;"},{"lineNumber":549,"author":{"gitId":"-"},"content":"        default:"},{"lineNumber":550,"author":{"gitId":"-"},"content":"          strA \u003d \u0027\u0027;"},{"lineNumber":551,"author":{"gitId":"-"},"content":"          strB \u003d \u0027\u0027;"},{"lineNumber":552,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":553,"author":{"gitId":"-"},"content":"      return this.tableComparatorService.compare(by, this.sortStudentOrder, strA, strB);"},{"lineNumber":554,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":555,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":556,"author":{"gitId":"-"},"content":""},{"lineNumber":557,"author":{"gitId":"-"},"content":"  sortInstructorsColumnsBy(by: SortBy): void {"},{"lineNumber":558,"author":{"gitId":"-"},"content":"    this.sortInstructorsBy \u003d by;"},{"lineNumber":559,"author":{"gitId":"-"},"content":"    this.sortInstructorOrder \u003d this.sortInstructorOrder \u003d\u003d\u003d SortOrder.DESC ? SortOrder.ASC : SortOrder.DESC;"},{"lineNumber":560,"author":{"gitId":"-"},"content":"    this.instructorsOfCourse.sort(this.sortInstructorPanelsBy(by));"},{"lineNumber":561,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":562,"author":{"gitId":"-"},"content":""},{"lineNumber":563,"author":{"gitId":"weiquu"},"content":"  getAriaSortInstructor(by: SortBy): String {"},{"lineNumber":564,"author":{"gitId":"weiquu"},"content":"    if (by !\u003d\u003d this.sortInstructorsBy) {"},{"lineNumber":565,"author":{"gitId":"weiquu"},"content":"      return \u0027none\u0027;"},{"lineNumber":566,"author":{"gitId":"weiquu"},"content":"    }"},{"lineNumber":567,"author":{"gitId":"weiquu"},"content":"    return this.sortInstructorOrder \u003d\u003d\u003d SortOrder.ASC ? \u0027ascending\u0027 : \u0027descending\u0027;"},{"lineNumber":568,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":569,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":570,"author":{"gitId":"-"},"content":"  private sortInstructorPanelsBy("},{"lineNumber":571,"author":{"gitId":"-"},"content":"    by: SortBy,"},{"lineNumber":572,"author":{"gitId":"-"},"content":"  ): (a: InstructorExtensionTableColumnModel, b: InstructorExtensionTableColumnModel) \u003d\u003e number {"},{"lineNumber":573,"author":{"gitId":"-"},"content":"    return (a: InstructorExtensionTableColumnModel, b: InstructorExtensionTableColumnModel): number \u003d\u003e {"},{"lineNumber":574,"author":{"gitId":"-"},"content":"      let strA: string;"},{"lineNumber":575,"author":{"gitId":"-"},"content":"      let strB: string;"},{"lineNumber":576,"author":{"gitId":"-"},"content":"      switch (by) {"},{"lineNumber":577,"author":{"gitId":"-"},"content":"        case SortBy.RESPONDENT_NAME:"},{"lineNumber":578,"author":{"gitId":"-"},"content":"          strA \u003d a.name;"},{"lineNumber":579,"author":{"gitId":"-"},"content":"          strB \u003d b.name;"},{"lineNumber":580,"author":{"gitId":"-"},"content":"          break;"},{"lineNumber":581,"author":{"gitId":"-"},"content":"        case SortBy.RESPONDENT_EMAIL:"},{"lineNumber":582,"author":{"gitId":"-"},"content":"          strA \u003d a.email;"},{"lineNumber":583,"author":{"gitId":"-"},"content":"          strB \u003d b.email;"},{"lineNumber":584,"author":{"gitId":"-"},"content":"          break;"},{"lineNumber":585,"author":{"gitId":"-"},"content":"        case SortBy.INSTRUCTOR_PERMISSION_ROLE:"},{"lineNumber":586,"author":{"gitId":"-"},"content":"          strA \u003d a.role || \u0027\u0027;"},{"lineNumber":587,"author":{"gitId":"-"},"content":"          strB \u003d b.role || \u0027\u0027;"},{"lineNumber":588,"author":{"gitId":"-"},"content":"          break;"},{"lineNumber":589,"author":{"gitId":"-"},"content":"        case SortBy.SESSION_END_DATE:"},{"lineNumber":590,"author":{"gitId":"-"},"content":"          strA \u003d a.extensionDeadline.toString();"},{"lineNumber":591,"author":{"gitId":"-"},"content":"          strB \u003d b.extensionDeadline.toString();"},{"lineNumber":592,"author":{"gitId":"-"},"content":"          break;"},{"lineNumber":593,"author":{"gitId":"-"},"content":"        default:"},{"lineNumber":594,"author":{"gitId":"-"},"content":"          strA \u003d \u0027\u0027;"},{"lineNumber":595,"author":{"gitId":"-"},"content":"          strB \u003d \u0027\u0027;"},{"lineNumber":596,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":597,"author":{"gitId":"-"},"content":"      return this.tableComparatorService.compare(by, this.sortInstructorOrder, strA, strB);"},{"lineNumber":598,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":599,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":600,"author":{"gitId":"-"},"content":""},{"lineNumber":601,"author":{"gitId":"-"},"content":"  getAriaLabel(user: StudentExtensionTableColumnModel | InstructorExtensionTableColumnModel): string {"},{"lineNumber":602,"author":{"gitId":"-"},"content":"    return `Select ${user.name}`;"},{"lineNumber":603,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":604,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"weiquu":14,"-":590}},{"path":"src/web/app/pages-monitoring/usage-stats-page/usage-statistics-page.component.scss","fileType":"scss","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":".bg-form {"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  background-color: #EAEFF5;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"}"},{"lineNumber":4,"author":{"gitId":"-"},"content":""},{"lineNumber":5,"author":{"gitId":"-"},"content":".no-border {"},{"lineNumber":6,"author":{"gitId":"-"},"content":"  border: 0;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"}"},{"lineNumber":8,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":9,"author":{"gitId":"weiquu"},"content":"@media (max-width: 768px) {"},{"lineNumber":10,"author":{"gitId":"weiquu"},"content":"  .col-4 {"},{"lineNumber":11,"author":{"gitId":"weiquu"},"content":"    width: auto;"},{"lineNumber":12,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":13,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":14,"author":{"gitId":"weiquu"},"content":"  .col-2 {"},{"lineNumber":15,"author":{"gitId":"weiquu"},"content":"    width: auto;"},{"lineNumber":16,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":17,"author":{"gitId":"weiquu"},"content":""},{"lineNumber":18,"author":{"gitId":"weiquu"},"content":"  .col-1 {"},{"lineNumber":19,"author":{"gitId":"weiquu"},"content":"    width: auto;"},{"lineNumber":20,"author":{"gitId":"weiquu"},"content":"  }"},{"lineNumber":21,"author":{"gitId":"weiquu"},"content":"}"}],"authorContributionMap":{"weiquu":14,"-":7}},{"path":"src/web/app/pages-session/session-submission-page/session-submission-page.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"bg-light\" *ngIf\u003d\"moderatedPerson\"\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"col-12 text-center text-break\"\u003e"},{"lineNumber":3,"author":{"gitId":"-"},"content":"    \u003ch5\u003eYou are moderating responses for"},{"lineNumber":4,"author":{"gitId":"-"},"content":"      \u003cspan *ngIf\u003d\"intent \u003d\u003d\u003d Intent.STUDENT_SUBMISSION\"\u003estudent\u003c/span\u003e"},{"lineNumber":5,"author":{"gitId":"-"},"content":"      \u003cspan *ngIf\u003d\"intent \u003d\u003d\u003d Intent.INSTRUCTOR_SUBMISSION\"\u003einstructor\u003c/span\u003e"},{"lineNumber":6,"author":{"gitId":"-"},"content":"      {{ personName }} ({{ moderatedPerson }})"},{"lineNumber":7,"author":{"gitId":"-"},"content":"      \u003cbutton type\u003d\"button\" class\u003d\"btn btn-link\" *ngIf\u003d\"!isModerationHintExpanded\" (click)\u003d\"isModerationHintExpanded \u003d true\"\u003e[More]\u003c/button\u003e"},{"lineNumber":8,"author":{"gitId":"-"},"content":"      \u003cbutton type\u003d\"button\" class\u003d\"btn btn-link\" *ngIf\u003d\"isModerationHintExpanded\" (click)\u003d\"isModerationHintExpanded \u003d false\"\u003e[Less]\u003c/button\u003e"},{"lineNumber":9,"author":{"gitId":"-"},"content":"    \u003c/h5\u003e"},{"lineNumber":10,"author":{"gitId":"-"},"content":"    \u003cdiv *ngIf\u003d\"isModerationHintExpanded\" class\u003d\"text-start\"\u003e"},{"lineNumber":11,"author":{"gitId":"-"},"content":"      \u003cp\u003e"},{"lineNumber":12,"author":{"gitId":"-"},"content":"        The page below resembles the submission page as seen by the respondent {{ personName }} ({{ moderatedPerson }})."},{"lineNumber":13,"author":{"gitId":"-"},"content":"        You can use it to moderate responses submitted by the respondent or submit responses on behalf of the respondent."},{"lineNumber":14,"author":{"gitId":"-"},"content":"      \u003c/p\u003e"},{"lineNumber":15,"author":{"gitId":"-"},"content":"      \u003cp\u003e"},{"lineNumber":16,"author":{"gitId":"-"},"content":"        Note that due to visibility settings, questions that are not supposed to show responses to instructors (i.e you) are not shown in the page below."},{"lineNumber":17,"author":{"gitId":"-"},"content":"      \u003c/p\u003e"},{"lineNumber":18,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":19,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":20,"author":{"gitId":"-"},"content":"\u003c/div\u003e"},{"lineNumber":21,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"bg-light\" *ngIf\u003d\"previewAsPerson\"\u003e"},{"lineNumber":22,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"col-12 text-center text-break\"\u003e"},{"lineNumber":23,"author":{"gitId":"-"},"content":"    \u003ch4\u003ePreviewing Session as"},{"lineNumber":24,"author":{"gitId":"-"},"content":"      \u003cspan *ngIf\u003d\"intent \u003d\u003d\u003d Intent.STUDENT_SUBMISSION\"\u003estudent\u003c/span\u003e"},{"lineNumber":25,"author":{"gitId":"-"},"content":"      \u003cspan *ngIf\u003d\"intent \u003d\u003d\u003d Intent.INSTRUCTOR_SUBMISSION\"\u003einstructor\u003c/span\u003e"},{"lineNumber":26,"author":{"gitId":"-"},"content":"      {{ personName }} ({{ previewAsPerson }})"},{"lineNumber":27,"author":{"gitId":"-"},"content":"    \u003c/h4\u003e"},{"lineNumber":28,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":29,"author":{"gitId":"-"},"content":"\u003c/div\u003e"},{"lineNumber":30,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"row\" *ngIf\u003d\"regKey\"\u003e"},{"lineNumber":31,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"col-12\"\u003e"},{"lineNumber":32,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"alert alert-primary\" role\u003d\"alert\"\u003e"},{"lineNumber":33,"author":{"gitId":"-"},"content":"      \u003cdiv *ngIf\u003d\"loggedInUser\"\u003e"},{"lineNumber":34,"author":{"gitId":"-"},"content":"        You are submitting feedback as \u003cmark\u003e\u003cb\u003e{{ personName }}\u003c/b\u003e\u003c/mark\u003e. If you wish to link your Google account ({{ loggedInUser }}) with this user,"},{"lineNumber":35,"author":{"gitId":"-"},"content":"        \u003ca href\u003d\"#\" (click)\u003d\"joinCourseForUnregisteredEntity(); $event.preventDefault()\"\u003eclick here\u003c/a\u003e."},{"lineNumber":36,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":37,"author":{"gitId":"-"},"content":"      \u003cdiv *ngIf\u003d\"!loggedInUser\"\u003e"},{"lineNumber":38,"author":{"gitId":"-"},"content":"        You are submitting feedback as \u003cmark\u003e\u003cb\u003e{{ personName }}\u003c/b\u003e\u003c/mark\u003e. You may submit feedback for sessions that are currently open and view results without logging in."},{"lineNumber":39,"author":{"gitId":"-"},"content":"        To access other features you need to \u003ca href\u003d\"#\" (click)\u003d\"joinCourseForUnregisteredEntity(); $event.preventDefault()\"\u003elog in using a Google account\u003c/a\u003e (optional)."},{"lineNumber":40,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":41,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":42,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":43,"author":{"gitId":"-"},"content":"\u003c/div\u003e"},{"lineNumber":44,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"row mobile-invisible\" *ngIf\u003d\"feedbackSessionSubmissionStatus \u003d\u003d\u003d FeedbackSessionSubmissionStatus.OPEN\"\u003e"},{"lineNumber":45,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"col-12\"\u003e"},{"lineNumber":46,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"alert alert-primary\" role\u003d\"alert\"\u003e"},{"lineNumber":47,"author":{"gitId":"-"},"content":"      \u003ci class\u003d\"fas fa-exclamation-circle\"\u003e\u003c/i\u003e Notes:"},{"lineNumber":48,"author":{"gitId":"-"},"content":"      \u003cul\u003e"},{"lineNumber":49,"author":{"gitId":"-"},"content":"        \u003cli\u003e"},{"lineNumber":50,"author":{"gitId":"-"},"content":"          You can use the \u003cb\u003eSubmit Response for Question _\u003c/b\u003e buttons to submit one-response-at-a-time."},{"lineNumber":51,"author":{"gitId":"-"},"content":"          \u003cbr\u003eAlternatively, you can submit all responses in one go using the \u003cb\u003eSubmit Responses for All Questions\u003c/b\u003e button at the bottom of this page."},{"lineNumber":52,"author":{"gitId":"-"},"content":"        \u003c/li\u003e"},{"lineNumber":53,"author":{"gitId":"-"},"content":"        \u003cli\u003eYou may edit your submission any number of times before the closing time of this session.\u003c/li\u003e"},{"lineNumber":54,"author":{"gitId":"-"},"content":"      \u003c/ul\u003e"},{"lineNumber":55,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":56,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":57,"author":{"gitId":"-"},"content":"\u003c/div\u003e"},{"lineNumber":58,"author":{"gitId":"-"},"content":""},{"lineNumber":59,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"card card-plain\" *tmIsLoading\u003d\"isCourseLoading || isFeedbackSessionLoading\"\u003e"},{"lineNumber":60,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"card-body\"\u003e"},{"lineNumber":61,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"row text-center\"\u003e"},{"lineNumber":62,"author":{"gitId":"-"},"content":"      \u003clabel class\u003d\"col-md-2 text-md-end\"\u003eCourse ID:\u003c/label\u003e"},{"lineNumber":63,"author":{"gitId":"-"},"content":"      \u003cdiv id\u003d\"course-id\" class\u003d\"col-md-10 text-md-start\"\u003e{{ courseId }}\u003c/div\u003e"},{"lineNumber":64,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":65,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"row text-center\" *ngIf\u003d\"courseName\"\u003e"},{"lineNumber":66,"author":{"gitId":"-"},"content":"      \u003clabel class\u003d\"col-md-2 text-md-end\"\u003eCourse name:\u003c/label\u003e"},{"lineNumber":67,"author":{"gitId":"-"},"content":"      \u003cdiv id\u003d\"course-name\" class\u003d\"col-md-10 text-md-start\"\u003e{{ courseName }}\u003c/div\u003e"},{"lineNumber":68,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":69,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"row text-center\" *ngIf\u003d\"courseInstitute\"\u003e"},{"lineNumber":70,"author":{"gitId":"-"},"content":"      \u003clabel class\u003d\"col-md-2 text-md-end\"\u003eCourse institute:\u003c/label\u003e"},{"lineNumber":71,"author":{"gitId":"-"},"content":"      \u003cdiv id\u003d\"course-institute\" class\u003d\"col-md-10 text-md-start\"\u003e{{ courseInstitute }}\u003c/div\u003e"},{"lineNumber":72,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":73,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"row text-center\"\u003e"},{"lineNumber":74,"author":{"gitId":"-"},"content":"      \u003clabel class\u003d\"col-md-2 text-md-end\"\u003eSession:\u003c/label\u003e"},{"lineNumber":75,"author":{"gitId":"-"},"content":"      \u003cdiv id\u003d\"fs-name\" class\u003d\"col-md-10 text-md-start\"\u003e{{ feedbackSessionName }}\u003c/div\u003e"},{"lineNumber":76,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":77,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"row text-center\"\u003e"},{"lineNumber":78,"author":{"gitId":"-"},"content":"      \u003clabel class\u003d\"col-md-2 text-md-end\"\u003eOpening time:\u003c/label\u003e"},{"lineNumber":79,"author":{"gitId":"-"},"content":"      \u003cdiv id\u003d\"opening-time\" class\u003d\"col-md-10 text-md-start\"\u003e{{ formattedSessionOpeningTime }}\u003c/div\u003e"},{"lineNumber":80,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":81,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"row text-center\"\u003e"},{"lineNumber":82,"author":{"gitId":"-"},"content":"      \u003clabel class\u003d\"col-md-2 text-md-end\"\u003eClosing time:\u003c/label\u003e"},{"lineNumber":83,"author":{"gitId":"-"},"content":"      \u003cdiv id\u003d\"closing-time\" class\u003d\"col-md-10 text-md-start\"\u003e{{ formattedSessionClosingTime }}\u003c/div\u003e"},{"lineNumber":84,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":85,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"row text-center\"\u003e"},{"lineNumber":86,"author":{"gitId":"-"},"content":"      \u003clabel class\u003d\"col-md-2 text-md-end\"\u003eInstructions:\u003c/label\u003e"},{"lineNumber":87,"author":{"gitId":"-"},"content":"      \u003cdiv id\u003d\"instructions\" class\u003d\"col-md-10 text-md-start\" [innerHTML]\u003d\"feedbackSessionInstructions | safeHtml\"\u003e\u003c/div\u003e"},{"lineNumber":88,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":89,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":90,"author":{"gitId":"-"},"content":"\u003c/div\u003e"},{"lineNumber":91,"author":{"gitId":"-"},"content":""},{"lineNumber":92,"author":{"gitId":"-"},"content":"\u003ctm-loading-retry [shouldShowRetry]\u003d\"hasFeedbackSessionQuestionsLoadingFailed\" [message]\u003d\"\u0027Failed to load questions\u0027\" (retryEvent)\u003d\"retryLoadingFeedbackSessionQuestions()\"\u003e"},{"lineNumber":93,"author":{"gitId":"-"},"content":"  \u003cdiv *tmIsLoading\u003d\"isFeedbackSessionQuestionsLoading\"\u003e"},{"lineNumber":94,"author":{"gitId":"-"},"content":"    \u003ctm-question-submission-form *ngFor\u003d\"let questionSubmissionForm of questionSubmissionForms; let i \u003d index; trackBy: trackQuestionSubmissionFormByFn\""},{"lineNumber":95,"author":{"gitId":"-"},"content":"                                 [attr.id]\u003d\"questionSubmissionForm.feedbackQuestionId\""},{"lineNumber":96,"author":{"gitId":"-"},"content":"                                 inViewport (inViewportAction)\u003d\"loadRecipientsAndResponses($event, questionSubmissionForm)\""},{"lineNumber":97,"author":{"gitId":"-"},"content":"                                 [(formModel)]\u003d\"questionSubmissionForms[i]\" [formMode]\u003d\"getQuestionSubmissionFormMode(questionSubmissionForm)\""},{"lineNumber":98,"author":{"gitId":"-"},"content":"                                 [isSubmissionDisabled]\u003d\"isSubmissionFormsDisabled\" [isFormsDisabled]\u003d\"isSubmissionFormsDisabled \u0026\u0026 !this.previewAsPerson\""},{"lineNumber":99,"author":{"gitId":"-"},"content":"                                 [isSavingResponses]\u003d\"isSavingResponses\" (responsesSave)\u003d\"saveFeedbackResponses([$event])\""},{"lineNumber":100,"author":{"gitId":"-"},"content":"                                 (deleteCommentEvent)\u003d\"deleteParticipantComment(i, $event)\""},{"lineNumber":101,"author":{"gitId":"-"},"content":"                                 [isQuestionCountOne]\u003d\"isQuestionCountOne\""},{"lineNumber":102,"author":{"gitId":"domlimm"},"content":"                                 [(isSubmitAllClicked)]\u003d\"isSubmitAllClicked\""},{"lineNumber":103,"author":{"gitId":"-"},"content":"    \u003e\u003c/tm-question-submission-form\u003e"},{"lineNumber":104,"author":{"gitId":"-"},"content":""},{"lineNumber":105,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"row\" *ngIf\u003d\"questionsNeedingSubmission.length \u003d\u003d\u003d 0\"\u003e"},{"lineNumber":106,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"col-12 text-center\"\u003e"},{"lineNumber":107,"author":{"gitId":"-"},"content":"        \u003cdiv class\u003d\"alert alert-info\" role\u003d\"alert\"\u003e"},{"lineNumber":108,"author":{"gitId":"-"},"content":"          There are no questions for you to answer here!"},{"lineNumber":109,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":110,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":111,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":112,"author":{"gitId":"-"},"content":"    \u003c!-- Do not display if only one question can be answered, as a button to submit individual response exists --\u003e"},{"lineNumber":113,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"row\" *ngIf\u003d\"questionsNeedingSubmission.length \u003e 1\"\u003e"},{"lineNumber":114,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"col-12 text-center\"\u003e"},{"lineNumber":115,"author":{"gitId":"-"},"content":"        \u003cbutton id\u003d\"btn-submit\" type\u003d\"submit\" class\u003d\"btn btn-success\""},{"lineNumber":116,"author":{"gitId":"-"},"content":"                ngbTooltip\u003d\"You can save your responses at any time and come back later to continue.\""},{"lineNumber":117,"author":{"gitId":"-"},"content":"                (click)\u003d\"saveFeedbackResponses(questionSubmissionForms)\" [disabled]\u003d\"isSavingResponses || isSubmissionFormsDisabled\""},{"lineNumber":118,"author":{"gitId":"-"},"content":"        \u003e\u003ctm-ajax-loading *ngIf\u003d\"isSavingResponses\"\u003e\u003c/tm-ajax-loading\u003eSubmit Responses for All Questions\u003c/button\u003e"},{"lineNumber":119,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":120,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":121,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":122,"author":{"gitId":"-"},"content":"\u003c/tm-loading-retry\u003e"}],"authorContributionMap":{"domlimm":1,"-":121}},{"path":"src/web/app/pages-session/session-submission-page/session-submission-page.component.spec.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { HttpClientTestingModule } from \u0027@angular/common/http/testing\u0027;"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import { ComponentFixture, TestBed, waitForAsync } from \u0027@angular/core/testing\u0027;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"import { FormsModule } from \u0027@angular/forms\u0027;"},{"lineNumber":4,"author":{"gitId":"weiquu"},"content":"import { BrowserAnimationsModule } from \u0027@angular/platform-browser/animations\u0027;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import { ActivatedRoute } from \u0027@angular/router\u0027;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import { RouterTestingModule } from \u0027@angular/router/testing\u0027;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import { NgbModal } from \u0027@ng-bootstrap/ng-bootstrap\u0027;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import { NgxPageScrollCoreModule } from \u0027ngx-page-scroll-core\u0027;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import { of, throwError } from \u0027rxjs\u0027;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import SpyInstance \u003d jest.SpyInstance;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import { environment } from \u0027../../../environments/environment\u0027;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import { AuthService } from \u0027../../../services/auth.service\u0027;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import { FeedbackQuestionsService } from \u0027../../../services/feedback-questions.service\u0027;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import { FeedbackResponseCommentService } from \u0027../../../services/feedback-response-comment.service\u0027;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import { FeedbackResponsesService } from \u0027../../../services/feedback-responses.service\u0027;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"import { FeedbackSessionsService } from \u0027../../../services/feedback-sessions.service\u0027;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"import { InstructorService } from \u0027../../../services/instructor.service\u0027;"},{"lineNumber":18,"author":{"gitId":"-"},"content":"import { NavigationService } from \u0027../../../services/navigation.service\u0027;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"import { SimpleModalService } from \u0027../../../services/simple-modal.service\u0027;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"import { StudentService } from \u0027../../../services/student.service\u0027;"},{"lineNumber":21,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":22,"author":{"gitId":"-"},"content":"  AuthInfo,"},{"lineNumber":23,"author":{"gitId":"-"},"content":"  CommentVisibilityType,"},{"lineNumber":24,"author":{"gitId":"-"},"content":"  FeedbackConstantSumQuestionDetails,"},{"lineNumber":25,"author":{"gitId":"-"},"content":"  FeedbackConstantSumResponseDetails,"},{"lineNumber":26,"author":{"gitId":"-"},"content":"  FeedbackContributionQuestionDetails,"},{"lineNumber":27,"author":{"gitId":"-"},"content":"  FeedbackContributionResponseDetails,"},{"lineNumber":28,"author":{"gitId":"-"},"content":"  FeedbackMcqQuestionDetails,"},{"lineNumber":29,"author":{"gitId":"-"},"content":"  FeedbackMcqResponseDetails,"},{"lineNumber":30,"author":{"gitId":"-"},"content":"  FeedbackMsqQuestionDetails,"},{"lineNumber":31,"author":{"gitId":"-"},"content":"  FeedbackMsqResponseDetails,"},{"lineNumber":32,"author":{"gitId":"-"},"content":"  FeedbackNumericalScaleQuestionDetails,"},{"lineNumber":33,"author":{"gitId":"-"},"content":"  FeedbackNumericalScaleResponseDetails,"},{"lineNumber":34,"author":{"gitId":"-"},"content":"  FeedbackParticipantType,"},{"lineNumber":35,"author":{"gitId":"-"},"content":"  FeedbackQuestionRecipients,"},{"lineNumber":36,"author":{"gitId":"-"},"content":"  FeedbackQuestions,"},{"lineNumber":37,"author":{"gitId":"-"},"content":"  FeedbackQuestionType,"},{"lineNumber":38,"author":{"gitId":"-"},"content":"  FeedbackRankOptionsQuestionDetails,"},{"lineNumber":39,"author":{"gitId":"-"},"content":"  FeedbackRankOptionsResponseDetails,"},{"lineNumber":40,"author":{"gitId":"-"},"content":"  FeedbackRankRecipientsQuestionDetails,"},{"lineNumber":41,"author":{"gitId":"-"},"content":"  FeedbackResponse,"},{"lineNumber":42,"author":{"gitId":"-"},"content":"  FeedbackResponseComment,"},{"lineNumber":43,"author":{"gitId":"-"},"content":"  FeedbackResponses,"},{"lineNumber":44,"author":{"gitId":"-"},"content":"  FeedbackRubricQuestionDetails,"},{"lineNumber":45,"author":{"gitId":"-"},"content":"  FeedbackRubricResponseDetails,"},{"lineNumber":46,"author":{"gitId":"-"},"content":"  FeedbackSession,"},{"lineNumber":47,"author":{"gitId":"-"},"content":"  FeedbackSessionPublishStatus,"},{"lineNumber":48,"author":{"gitId":"-"},"content":"  FeedbackSessionSubmissionStatus,"},{"lineNumber":49,"author":{"gitId":"-"},"content":"  FeedbackTextQuestionDetails,"},{"lineNumber":50,"author":{"gitId":"-"},"content":"  FeedbackTextResponseDetails,"},{"lineNumber":51,"author":{"gitId":"-"},"content":"  FeedbackVisibilityType,"},{"lineNumber":52,"author":{"gitId":"-"},"content":"  Instructor,"},{"lineNumber":53,"author":{"gitId":"-"},"content":"  JoinState,"},{"lineNumber":54,"author":{"gitId":"-"},"content":"  NumberOfEntitiesToGiveFeedbackToSetting,"},{"lineNumber":55,"author":{"gitId":"-"},"content":"  RegkeyValidity,"},{"lineNumber":56,"author":{"gitId":"-"},"content":"  ResponseVisibleSetting,"},{"lineNumber":57,"author":{"gitId":"-"},"content":"  SessionVisibleSetting,"},{"lineNumber":58,"author":{"gitId":"-"},"content":"  Student,"},{"lineNumber":59,"author":{"gitId":"-"},"content":"} from \u0027../../../types/api-output\u0027;"},{"lineNumber":60,"author":{"gitId":"-"},"content":"import { Intent } from \u0027../../../types/api-request\u0027;"},{"lineNumber":61,"author":{"gitId":"-"},"content":"import { Milliseconds } from \u0027../../../types/datetime-const\u0027;"},{"lineNumber":62,"author":{"gitId":"-"},"content":"import { AjaxLoadingModule } from \u0027../../components/ajax-loading/ajax-loading.module\u0027;"},{"lineNumber":63,"author":{"gitId":"-"},"content":"import { LoadingRetryModule } from \u0027../../components/loading-retry/loading-retry.module\u0027;"},{"lineNumber":64,"author":{"gitId":"-"},"content":"import { LoadingSpinnerModule } from \u0027../../components/loading-spinner/loading-spinner.module\u0027;"},{"lineNumber":65,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":66,"author":{"gitId":"-"},"content":"  FeedbackResponseRecipientSubmissionFormModel,"},{"lineNumber":67,"author":{"gitId":"-"},"content":"  QuestionSubmissionFormModel,"},{"lineNumber":68,"author":{"gitId":"-"},"content":"} from \u0027../../components/question-submission-form/question-submission-form-model\u0027;"},{"lineNumber":69,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":70,"author":{"gitId":"-"},"content":"  QuestionSubmissionFormModule,"},{"lineNumber":71,"author":{"gitId":"-"},"content":"} from \u0027../../components/question-submission-form/question-submission-form.module\u0027;"},{"lineNumber":72,"author":{"gitId":"-"},"content":"import { SimpleModalType } from \u0027../../components/simple-modal/simple-modal-type\u0027;"},{"lineNumber":73,"author":{"gitId":"-"},"content":"import { TeammatesCommonModule } from \u0027../../components/teammates-common/teammates-common.module\u0027;"},{"lineNumber":74,"author":{"gitId":"-"},"content":"import { SavingCompleteModalComponent } from \u0027./saving-complete-modal/saving-complete-modal.component\u0027;"},{"lineNumber":75,"author":{"gitId":"-"},"content":"import { SessionSubmissionPageComponent } from \u0027./session-submission-page.component\u0027;"},{"lineNumber":76,"author":{"gitId":"-"},"content":""},{"lineNumber":77,"author":{"gitId":"-"},"content":"describe(\u0027SessionSubmissionPageComponent\u0027, () \u003d\u003e {"},{"lineNumber":78,"author":{"gitId":"-"},"content":"  const deepCopy: \u003cT\u003e(obj: T) \u003d\u003e T \u003d \u003cT\u003e(obj: T) \u003d\u003e JSON.parse(JSON.stringify(obj));"},{"lineNumber":79,"author":{"gitId":"-"},"content":""},{"lineNumber":80,"author":{"gitId":"-"},"content":"  const testStudent: Student \u003d {"},{"lineNumber":81,"author":{"gitId":"-"},"content":"    email: \u0027alice@tmms.com\u0027,"},{"lineNumber":82,"author":{"gitId":"-"},"content":"    courseId: \u0027course-id\u0027,"},{"lineNumber":83,"author":{"gitId":"-"},"content":"    name: \u0027Alice Betsy\u0027,"},{"lineNumber":84,"author":{"gitId":"-"},"content":"    teamName: \u0027Team 1\u0027,"},{"lineNumber":85,"author":{"gitId":"-"},"content":"    sectionName: \u0027Section 1\u0027,"},{"lineNumber":86,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":87,"author":{"gitId":"-"},"content":""},{"lineNumber":88,"author":{"gitId":"-"},"content":"  const testInstructor: Instructor \u003d {"},{"lineNumber":89,"author":{"gitId":"-"},"content":"    courseId: \u0027course-id\u0027,"},{"lineNumber":90,"author":{"gitId":"-"},"content":"    email: \u0027test@example.com\u0027,"},{"lineNumber":91,"author":{"gitId":"-"},"content":"    name: \u0027Instructor Ho\u0027,"},{"lineNumber":92,"author":{"gitId":"-"},"content":"    joinState: JoinState.JOINED,"},{"lineNumber":93,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":94,"author":{"gitId":"-"},"content":""},{"lineNumber":95,"author":{"gitId":"-"},"content":"  const testOpenFeedbackSession: FeedbackSession \u003d {"},{"lineNumber":96,"author":{"gitId":"-"},"content":"    feedbackSessionName: \u0027First Session\u0027,"},{"lineNumber":97,"author":{"gitId":"-"},"content":"    courseId: \u0027CS1231\u0027,"},{"lineNumber":98,"author":{"gitId":"-"},"content":"    timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":99,"author":{"gitId":"-"},"content":"    instructions: \u0027Instructions\u0027,"},{"lineNumber":100,"author":{"gitId":"-"},"content":"    submissionStartTimestamp: 1000000000000,"},{"lineNumber":101,"author":{"gitId":"-"},"content":"    submissionEndTimestamp: Date.now() + Milliseconds.IN_TEN_MINUTES, // 10 minutes before closing"},{"lineNumber":102,"author":{"gitId":"-"},"content":"    gracePeriod: 0,"},{"lineNumber":103,"author":{"gitId":"-"},"content":"    sessionVisibleSetting: SessionVisibleSetting.AT_OPEN,"},{"lineNumber":104,"author":{"gitId":"-"},"content":"    responseVisibleSetting: ResponseVisibleSetting.AT_VISIBLE,"},{"lineNumber":105,"author":{"gitId":"-"},"content":"    submissionStatus: FeedbackSessionSubmissionStatus.OPEN,"},{"lineNumber":106,"author":{"gitId":"-"},"content":"    publishStatus: FeedbackSessionPublishStatus.PUBLISHED,"},{"lineNumber":107,"author":{"gitId":"-"},"content":"    isClosingEmailEnabled: true,"},{"lineNumber":108,"author":{"gitId":"-"},"content":"    isPublishedEmailEnabled: true,"},{"lineNumber":109,"author":{"gitId":"-"},"content":"    createdAtTimestamp: 0,"},{"lineNumber":110,"author":{"gitId":"-"},"content":"    studentDeadlines: {},"},{"lineNumber":111,"author":{"gitId":"-"},"content":"    instructorDeadlines: {},"},{"lineNumber":112,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":113,"author":{"gitId":"-"},"content":""},{"lineNumber":114,"author":{"gitId":"-"},"content":"  const testComment: FeedbackResponseComment \u003d {"},{"lineNumber":115,"author":{"gitId":"-"},"content":"    commentGiver: \u0027comment giver\u0027,"},{"lineNumber":116,"author":{"gitId":"-"},"content":"    lastEditorEmail: \u0027last-editor@email.com\u0027,"},{"lineNumber":117,"author":{"gitId":"-"},"content":"    feedbackResponseCommentId: 1,"},{"lineNumber":118,"author":{"gitId":"-"},"content":"    commentText: \u0027comment text\u0027,"},{"lineNumber":119,"author":{"gitId":"-"},"content":"    createdAt: 10000000,"},{"lineNumber":120,"author":{"gitId":"-"},"content":"    lastEditedAt: 20000000,"},{"lineNumber":121,"author":{"gitId":"-"},"content":"    isVisibilityFollowingFeedbackQuestion: true,"},{"lineNumber":122,"author":{"gitId":"-"},"content":"    showCommentTo: [CommentVisibilityType.GIVER, CommentVisibilityType.RECIPIENT],"},{"lineNumber":123,"author":{"gitId":"-"},"content":"    showGiverNameTo: [CommentVisibilityType.GIVER, CommentVisibilityType.RECIPIENT],"},{"lineNumber":124,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":125,"author":{"gitId":"-"},"content":""},{"lineNumber":126,"author":{"gitId":"-"},"content":"  const testMcqRecipientSubmissionForm: FeedbackResponseRecipientSubmissionFormModel \u003d {"},{"lineNumber":127,"author":{"gitId":"-"},"content":"    responseId: \u0027response-id-1\u0027,"},{"lineNumber":128,"author":{"gitId":"-"},"content":"    recipientIdentifier: \u0027barry-harris-id\u0027,"},{"lineNumber":129,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":130,"author":{"gitId":"-"},"content":"      answer: \u0027answer\u0027,"},{"lineNumber":131,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.MCQ,"},{"lineNumber":132,"author":{"gitId":"-"},"content":"    } as FeedbackMcqResponseDetails,"},{"lineNumber":133,"author":{"gitId":"-"},"content":"    isValid: true,"},{"lineNumber":134,"author":{"gitId":"-"},"content":"    commentByGiver: {"},{"lineNumber":135,"author":{"gitId":"-"},"content":"      originalComment: testComment,"},{"lineNumber":136,"author":{"gitId":"-"},"content":"      originalRecipientIdentifier: \u0027barry-harris-id\u0027,"},{"lineNumber":137,"author":{"gitId":"-"},"content":"      commentEditFormModel: {"},{"lineNumber":138,"author":{"gitId":"-"},"content":"        commentText: \u0027comment text here\u0027,"},{"lineNumber":139,"author":{"gitId":"-"},"content":"        isUsingCustomVisibilities: false,"},{"lineNumber":140,"author":{"gitId":"-"},"content":"        showCommentTo: [CommentVisibilityType.GIVER, CommentVisibilityType.RECIPIENT],"},{"lineNumber":141,"author":{"gitId":"-"},"content":"        showGiverNameTo: [CommentVisibilityType.GIVER, CommentVisibilityType.RECIPIENT],"},{"lineNumber":142,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":143,"author":{"gitId":"-"},"content":"      isEditing: false,"},{"lineNumber":144,"author":{"gitId":"-"},"content":"    },"},{"lineNumber":145,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":146,"author":{"gitId":"-"},"content":""},{"lineNumber":147,"author":{"gitId":"-"},"content":"  const testMcqRecipientSubmissionForm2: FeedbackResponseRecipientSubmissionFormModel \u003d {"},{"lineNumber":148,"author":{"gitId":"-"},"content":"    responseId: \u0027response-id-2\u0027,"},{"lineNumber":149,"author":{"gitId":"-"},"content":"    recipientIdentifier: \u0027recipient-identifier\u0027,"},{"lineNumber":150,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":151,"author":{"gitId":"-"},"content":"      answer: \u0027answer\u0027,"},{"lineNumber":152,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.MCQ,"},{"lineNumber":153,"author":{"gitId":"-"},"content":"    } as FeedbackMcqResponseDetails,"},{"lineNumber":154,"author":{"gitId":"-"},"content":"    isValid: true,"},{"lineNumber":155,"author":{"gitId":"-"},"content":"    commentByGiver: {"},{"lineNumber":156,"author":{"gitId":"-"},"content":"      originalComment: testComment,"},{"lineNumber":157,"author":{"gitId":"-"},"content":"      originalRecipientIdentifier: \u0027recipient-identifier\u0027,"},{"lineNumber":158,"author":{"gitId":"-"},"content":"      commentEditFormModel: {"},{"lineNumber":159,"author":{"gitId":"-"},"content":"        commentText: \u0027\u0027,"},{"lineNumber":160,"author":{"gitId":"-"},"content":"        isUsingCustomVisibilities: false,"},{"lineNumber":161,"author":{"gitId":"-"},"content":"        showCommentTo: [CommentVisibilityType.GIVER, CommentVisibilityType.RECIPIENT],"},{"lineNumber":162,"author":{"gitId":"-"},"content":"        showGiverNameTo: [CommentVisibilityType.GIVER, CommentVisibilityType.RECIPIENT],"},{"lineNumber":163,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":164,"author":{"gitId":"-"},"content":"      isEditing: false,"},{"lineNumber":165,"author":{"gitId":"-"},"content":"    },"},{"lineNumber":166,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":167,"author":{"gitId":"-"},"content":""},{"lineNumber":168,"author":{"gitId":"-"},"content":"  const testTextRecipientSubmissionForm: FeedbackResponseRecipientSubmissionFormModel \u003d {"},{"lineNumber":169,"author":{"gitId":"-"},"content":"    responseId: \u0027response-id-3\u0027,"},{"lineNumber":170,"author":{"gitId":"-"},"content":"    recipientIdentifier: \u0027gene-harris-id\u0027,"},{"lineNumber":171,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":172,"author":{"gitId":"-"},"content":"      answer: \u0027answer\u0027,"},{"lineNumber":173,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.TEXT,"},{"lineNumber":174,"author":{"gitId":"-"},"content":"    } as FeedbackTextResponseDetails,"},{"lineNumber":175,"author":{"gitId":"-"},"content":"    isValid: true,"},{"lineNumber":176,"author":{"gitId":"-"},"content":"    commentByGiver: {"},{"lineNumber":177,"author":{"gitId":"-"},"content":"      commentEditFormModel: {"},{"lineNumber":178,"author":{"gitId":"-"},"content":"        commentText: \u0027comment text here\u0027,"},{"lineNumber":179,"author":{"gitId":"-"},"content":"        isUsingCustomVisibilities: false,"},{"lineNumber":180,"author":{"gitId":"-"},"content":"        showCommentTo: [CommentVisibilityType.GIVER, CommentVisibilityType.RECIPIENT],"},{"lineNumber":181,"author":{"gitId":"-"},"content":"        showGiverNameTo: [CommentVisibilityType.GIVER, CommentVisibilityType.RECIPIENT],"},{"lineNumber":182,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":183,"author":{"gitId":"-"},"content":"      isEditing: false,"},{"lineNumber":184,"author":{"gitId":"-"},"content":"    },"},{"lineNumber":185,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":186,"author":{"gitId":"-"},"content":""},{"lineNumber":187,"author":{"gitId":"-"},"content":"  const testMcqRecipientSubmissionForm3: FeedbackResponseRecipientSubmissionFormModel \u003d {"},{"lineNumber":188,"author":{"gitId":"-"},"content":"    responseId: \u0027response-id-4\u0027,"},{"lineNumber":189,"author":{"gitId":"-"},"content":"    recipientIdentifier: \u0027barry-harris-id\u0027,"},{"lineNumber":190,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":191,"author":{"gitId":"-"},"content":"      answer: \u0027barry-harris-answer\u0027,"},{"lineNumber":192,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.MCQ,"},{"lineNumber":193,"author":{"gitId":"-"},"content":"    } as FeedbackMcqResponseDetails,"},{"lineNumber":194,"author":{"gitId":"-"},"content":"    isValid: true,"},{"lineNumber":195,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":196,"author":{"gitId":"-"},"content":""},{"lineNumber":197,"author":{"gitId":"-"},"content":"  const testMcqRecipientSubmissionForm4: FeedbackResponseRecipientSubmissionFormModel \u003d {"},{"lineNumber":198,"author":{"gitId":"-"},"content":"    responseId: \u0027response-id-5\u0027,"},{"lineNumber":199,"author":{"gitId":"-"},"content":"    recipientIdentifier: \u0027gene-harris-id\u0027,"},{"lineNumber":200,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":201,"author":{"gitId":"-"},"content":"      answer: \u0027gene-harris-answer\u0027,"},{"lineNumber":202,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.MCQ,"},{"lineNumber":203,"author":{"gitId":"-"},"content":"    } as FeedbackMcqResponseDetails,"},{"lineNumber":204,"author":{"gitId":"-"},"content":"    isValid: true,"},{"lineNumber":205,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":206,"author":{"gitId":"-"},"content":""},{"lineNumber":207,"author":{"gitId":"-"},"content":"  const testMsqRecipientSubmissionForm: FeedbackResponseRecipientSubmissionFormModel \u003d {"},{"lineNumber":208,"author":{"gitId":"-"},"content":"    responseId: \u0027response-id-6\u0027,"},{"lineNumber":209,"author":{"gitId":"-"},"content":"    recipientIdentifier: \u0027barry-harris-id\u0027,"},{"lineNumber":210,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":211,"author":{"gitId":"-"},"content":"      answers: [\u0027answer 1\u0027, \u0027answer 2\u0027],"},{"lineNumber":212,"author":{"gitId":"-"},"content":"      isOther: false,"},{"lineNumber":213,"author":{"gitId":"-"},"content":"      otherFieldContent: \u0027other field content\u0027,"},{"lineNumber":214,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.MSQ,"},{"lineNumber":215,"author":{"gitId":"-"},"content":"    } as FeedbackMsqResponseDetails,"},{"lineNumber":216,"author":{"gitId":"-"},"content":"    isValid: true,"},{"lineNumber":217,"author":{"gitId":"-"},"content":"    commentByGiver: {"},{"lineNumber":218,"author":{"gitId":"-"},"content":"      originalComment: testComment,"},{"lineNumber":219,"author":{"gitId":"-"},"content":"      originalRecipientIdentifier: \u0027barry-harris-id\u0027,"},{"lineNumber":220,"author":{"gitId":"-"},"content":"      commentEditFormModel: {"},{"lineNumber":221,"author":{"gitId":"-"},"content":"        commentText: \u0027comment text\u0027,"},{"lineNumber":222,"author":{"gitId":"-"},"content":"        isUsingCustomVisibilities: false,"},{"lineNumber":223,"author":{"gitId":"-"},"content":"        showCommentTo: [CommentVisibilityType.GIVER, CommentVisibilityType.RECIPIENT],"},{"lineNumber":224,"author":{"gitId":"-"},"content":"        showGiverNameTo: [CommentVisibilityType.GIVER, CommentVisibilityType.RECIPIENT],"},{"lineNumber":225,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":226,"author":{"gitId":"-"},"content":"      isEditing: false,"},{"lineNumber":227,"author":{"gitId":"-"},"content":"    },"},{"lineNumber":228,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":229,"author":{"gitId":"-"},"content":""},{"lineNumber":230,"author":{"gitId":"-"},"content":"  const testNumscaleRecipientSubmissionForm: FeedbackResponseRecipientSubmissionFormModel \u003d {"},{"lineNumber":231,"author":{"gitId":"-"},"content":"    responseId: \u0027response-id-7\u0027,"},{"lineNumber":232,"author":{"gitId":"-"},"content":"    recipientIdentifier: \u0027barry-harris-id\u0027,"},{"lineNumber":233,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":234,"author":{"gitId":"-"},"content":"      answer: 5,"},{"lineNumber":235,"author":{"gitId":"-"},"content":"    } as FeedbackNumericalScaleResponseDetails,"},{"lineNumber":236,"author":{"gitId":"-"},"content":"    isValid: true,"},{"lineNumber":237,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":238,"author":{"gitId":"-"},"content":""},{"lineNumber":239,"author":{"gitId":"-"},"content":"  const testConstsumRecipientSubmissionForm: FeedbackResponseRecipientSubmissionFormModel \u003d {"},{"lineNumber":240,"author":{"gitId":"-"},"content":"    responseId: \u0027response-id-8\u0027,"},{"lineNumber":241,"author":{"gitId":"-"},"content":"    recipientIdentifier: \u0027barry-harris-id\u0027,"},{"lineNumber":242,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":243,"author":{"gitId":"-"},"content":"      answers: [7, 13],"},{"lineNumber":244,"author":{"gitId":"-"},"content":"    } as FeedbackConstantSumResponseDetails,"},{"lineNumber":245,"author":{"gitId":"-"},"content":"    isValid: true,"},{"lineNumber":246,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":247,"author":{"gitId":"-"},"content":""},{"lineNumber":248,"author":{"gitId":"-"},"content":"  const testContribRecipientSubmissionForm: FeedbackResponseRecipientSubmissionFormModel \u003d {"},{"lineNumber":249,"author":{"gitId":"-"},"content":"    responseId: \u0027response-id-9\u0027,"},{"lineNumber":250,"author":{"gitId":"-"},"content":"    recipientIdentifier: \u0027barry-harris-id\u0027,"},{"lineNumber":251,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":252,"author":{"gitId":"-"},"content":"      answer: 20,"},{"lineNumber":253,"author":{"gitId":"-"},"content":"    } as FeedbackContributionResponseDetails,"},{"lineNumber":254,"author":{"gitId":"-"},"content":"    isValid: true,"},{"lineNumber":255,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":256,"author":{"gitId":"-"},"content":""},{"lineNumber":257,"author":{"gitId":"-"},"content":"  const testRubricRecipientSubmissionForm: FeedbackResponseRecipientSubmissionFormModel \u003d {"},{"lineNumber":258,"author":{"gitId":"-"},"content":"    responseId: \u0027response-id-10\u0027,"},{"lineNumber":259,"author":{"gitId":"-"},"content":"    recipientIdentifier: \u0027barry-harris-id\u0027,"},{"lineNumber":260,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":261,"author":{"gitId":"-"},"content":"      answer: [3, 4],"},{"lineNumber":262,"author":{"gitId":"-"},"content":"    } as FeedbackRubricResponseDetails,"},{"lineNumber":263,"author":{"gitId":"-"},"content":"    isValid: true,"},{"lineNumber":264,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":265,"author":{"gitId":"-"},"content":""},{"lineNumber":266,"author":{"gitId":"-"},"content":"  const testRankOptionsRecipientSubmissionForm: FeedbackResponseRecipientSubmissionFormModel \u003d {"},{"lineNumber":267,"author":{"gitId":"-"},"content":"    responseId: \u0027response-id-11\u0027,"},{"lineNumber":268,"author":{"gitId":"-"},"content":"    recipientIdentifier: \u0027barry-harris-id\u0027,"},{"lineNumber":269,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":270,"author":{"gitId":"-"},"content":"      answers: [2, 1],"},{"lineNumber":271,"author":{"gitId":"-"},"content":"    } as FeedbackRankOptionsResponseDetails,"},{"lineNumber":272,"author":{"gitId":"-"},"content":"    isValid: true,"},{"lineNumber":273,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":274,"author":{"gitId":"-"},"content":""},{"lineNumber":275,"author":{"gitId":"-"},"content":"  const testRankRecipientsRecipientSubmissionForm: FeedbackResponseRecipientSubmissionFormModel \u003d {"},{"lineNumber":276,"author":{"gitId":"-"},"content":"    responseId: \u0027response-id-12\u0027,"},{"lineNumber":277,"author":{"gitId":"-"},"content":"    recipientIdentifier: \u0027barry-harris-id\u0027,"},{"lineNumber":278,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":279,"author":{"gitId":"-"},"content":"      minOptionsToBeRanked: 1,"},{"lineNumber":280,"author":{"gitId":"-"},"content":"      maxOptionsToBeRanked: 2,"},{"lineNumber":281,"author":{"gitId":"-"},"content":"      areDuplicatesAllowed: false,"},{"lineNumber":282,"author":{"gitId":"-"},"content":"    } as FeedbackRankRecipientsQuestionDetails,"},{"lineNumber":283,"author":{"gitId":"-"},"content":"    isValid: true,"},{"lineNumber":284,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":285,"author":{"gitId":"-"},"content":""},{"lineNumber":286,"author":{"gitId":"-"},"content":"  const testResponse1: FeedbackResponse \u003d {"},{"lineNumber":287,"author":{"gitId":"-"},"content":"    feedbackResponseId: \u0027response-id-4\u0027,"},{"lineNumber":288,"author":{"gitId":"-"},"content":"    giverIdentifier: \u0027giver-identifier\u0027,"},{"lineNumber":289,"author":{"gitId":"-"},"content":"    recipientIdentifier: \u0027barry-harris-id\u0027,"},{"lineNumber":290,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":291,"author":{"gitId":"-"},"content":"      answer: \u0027barry-harris-answer\u0027,"},{"lineNumber":292,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.MCQ,"},{"lineNumber":293,"author":{"gitId":"-"},"content":"    } as FeedbackMcqResponseDetails,"},{"lineNumber":294,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":295,"author":{"gitId":"-"},"content":""},{"lineNumber":296,"author":{"gitId":"-"},"content":"  const testResponse2: FeedbackResponse \u003d {"},{"lineNumber":297,"author":{"gitId":"-"},"content":"    feedbackResponseId: \u0027response-id-5\u0027,"},{"lineNumber":298,"author":{"gitId":"-"},"content":"    giverIdentifier: \u0027giver-identifier\u0027,"},{"lineNumber":299,"author":{"gitId":"-"},"content":"    recipientIdentifier: \u0027gene-harris-id\u0027,"},{"lineNumber":300,"author":{"gitId":"-"},"content":"    responseDetails: {"},{"lineNumber":301,"author":{"gitId":"-"},"content":"      answer: \u0027gene-harris-answer\u0027,"},{"lineNumber":302,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.MCQ,"},{"lineNumber":303,"author":{"gitId":"-"},"content":"    } as FeedbackMcqResponseDetails,"},{"lineNumber":304,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":305,"author":{"gitId":"-"},"content":""},{"lineNumber":306,"author":{"gitId":"-"},"content":"  const testMcqQuestionSubmissionForm: QuestionSubmissionFormModel \u003d {"},{"lineNumber":307,"author":{"gitId":"-"},"content":"    feedbackQuestionId: \u0027feedback-question-id-mcq\u0027,"},{"lineNumber":308,"author":{"gitId":"-"},"content":"    questionNumber: 1,"},{"lineNumber":309,"author":{"gitId":"-"},"content":"    questionBrief: \u0027question brief\u0027,"},{"lineNumber":310,"author":{"gitId":"-"},"content":"    questionDescription: \u0027question description\u0027,"},{"lineNumber":311,"author":{"gitId":"-"},"content":"    questionType: FeedbackQuestionType.MCQ,"},{"lineNumber":312,"author":{"gitId":"-"},"content":"    questionDetails: {"},{"lineNumber":313,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.MCQ,"},{"lineNumber":314,"author":{"gitId":"-"},"content":"      questionText: \u0027question text\u0027,"},{"lineNumber":315,"author":{"gitId":"-"},"content":"      mcqChoices: [\u0027choice 1\u0027, \u0027choice 2\u0027, \u0027choice 3\u0027],"},{"lineNumber":316,"author":{"gitId":"-"},"content":"    } as FeedbackMcqQuestionDetails,"},{"lineNumber":317,"author":{"gitId":"-"},"content":"    giverType: FeedbackParticipantType.STUDENTS,"},{"lineNumber":318,"author":{"gitId":"-"},"content":"    recipientType: FeedbackParticipantType.OWN_TEAM,"},{"lineNumber":319,"author":{"gitId":"-"},"content":"    recipientList: [],"},{"lineNumber":320,"author":{"gitId":"-"},"content":"    recipientSubmissionForms: [testMcqRecipientSubmissionForm],"},{"lineNumber":321,"author":{"gitId":"-"},"content":"    numberOfEntitiesToGiveFeedbackToSetting: NumberOfEntitiesToGiveFeedbackToSetting.UNLIMITED,"},{"lineNumber":322,"author":{"gitId":"-"},"content":"    customNumberOfEntitiesToGiveFeedbackTo: 5,"},{"lineNumber":323,"author":{"gitId":"-"},"content":"    showResponsesTo: [FeedbackVisibilityType.STUDENTS, FeedbackVisibilityType.INSTRUCTORS],"},{"lineNumber":324,"author":{"gitId":"-"},"content":"    showGiverNameTo: [],"},{"lineNumber":325,"author":{"gitId":"-"},"content":"    showRecipientNameTo: [],"},{"lineNumber":326,"author":{"gitId":"-"},"content":"    isLoading: false,"},{"lineNumber":327,"author":{"gitId":"-"},"content":"    isLoaded: true,"},{"lineNumber":328,"author":{"gitId":"weiquu"},"content":"    isTabExpanded: true,"},{"lineNumber":329,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":330,"author":{"gitId":"-"},"content":""},{"lineNumber":331,"author":{"gitId":"-"},"content":"  const testMcqQuestionSubmissionForm2: QuestionSubmissionFormModel \u003d {"},{"lineNumber":332,"author":{"gitId":"-"},"content":"    feedbackQuestionId: \u0027feedback-question-id-mcq-2\u0027,"},{"lineNumber":333,"author":{"gitId":"-"},"content":"    questionNumber: 2,"},{"lineNumber":334,"author":{"gitId":"-"},"content":"    questionBrief: \u0027question brief\u0027,"},{"lineNumber":335,"author":{"gitId":"-"},"content":"    questionDescription: \u0027question description\u0027,"},{"lineNumber":336,"author":{"gitId":"-"},"content":"    questionType: FeedbackQuestionType.MCQ,"},{"lineNumber":337,"author":{"gitId":"-"},"content":"    questionDetails: {"},{"lineNumber":338,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.MCQ,"},{"lineNumber":339,"author":{"gitId":"-"},"content":"      questionText: \u0027question text\u0027,"},{"lineNumber":340,"author":{"gitId":"-"},"content":"      mcqChoices: [\u0027choice 1\u0027, \u0027choice 2\u0027, \u0027choice 3\u0027],"},{"lineNumber":341,"author":{"gitId":"-"},"content":"    } as FeedbackMcqQuestionDetails,"},{"lineNumber":342,"author":{"gitId":"-"},"content":"    giverType: FeedbackParticipantType.INSTRUCTORS,"},{"lineNumber":343,"author":{"gitId":"-"},"content":"    recipientType: FeedbackParticipantType.TEAMS,"},{"lineNumber":344,"author":{"gitId":"-"},"content":"    recipientList: [],"},{"lineNumber":345,"author":{"gitId":"-"},"content":"    recipientSubmissionForms: [],"},{"lineNumber":346,"author":{"gitId":"-"},"content":"    numberOfEntitiesToGiveFeedbackToSetting: NumberOfEntitiesToGiveFeedbackToSetting.UNLIMITED,"},{"lineNumber":347,"author":{"gitId":"-"},"content":"    customNumberOfEntitiesToGiveFeedbackTo: 5,"},{"lineNumber":348,"author":{"gitId":"-"},"content":"    showResponsesTo: [FeedbackVisibilityType.RECIPIENT, FeedbackVisibilityType.INSTRUCTORS],"},{"lineNumber":349,"author":{"gitId":"-"},"content":"    showGiverNameTo: [FeedbackVisibilityType.RECIPIENT, FeedbackVisibilityType.INSTRUCTORS],"},{"lineNumber":350,"author":{"gitId":"-"},"content":"    showRecipientNameTo: [FeedbackVisibilityType.RECIPIENT, FeedbackVisibilityType.INSTRUCTORS],"},{"lineNumber":351,"author":{"gitId":"-"},"content":"    isLoading: false,"},{"lineNumber":352,"author":{"gitId":"-"},"content":"    isLoaded: false,"},{"lineNumber":353,"author":{"gitId":"weiquu"},"content":"    isTabExpanded: true,"},{"lineNumber":354,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":355,"author":{"gitId":"-"},"content":""},{"lineNumber":356,"author":{"gitId":"-"},"content":"  const testTextQuestionSubmissionForm: QuestionSubmissionFormModel \u003d {"},{"lineNumber":357,"author":{"gitId":"-"},"content":"    feedbackQuestionId: \u0027feedback-question-id-text\u0027,"},{"lineNumber":358,"author":{"gitId":"-"},"content":"    questionNumber: 3,"},{"lineNumber":359,"author":{"gitId":"-"},"content":"    questionBrief: \u0027question brief\u0027,"},{"lineNumber":360,"author":{"gitId":"-"},"content":"    questionDescription: \u0027question description\u0027,"},{"lineNumber":361,"author":{"gitId":"-"},"content":"    questionType: FeedbackQuestionType.TEXT,"},{"lineNumber":362,"author":{"gitId":"-"},"content":"    questionDetails: {"},{"lineNumber":363,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.TEXT,"},{"lineNumber":364,"author":{"gitId":"-"},"content":"      questionText: \u0027question text\u0027,"},{"lineNumber":365,"author":{"gitId":"-"},"content":"    } as FeedbackTextQuestionDetails,"},{"lineNumber":366,"author":{"gitId":"-"},"content":"    giverType: FeedbackParticipantType.STUDENTS,"},{"lineNumber":367,"author":{"gitId":"-"},"content":"    recipientType: FeedbackParticipantType.INSTRUCTORS,"},{"lineNumber":368,"author":{"gitId":"-"},"content":"    recipientList: [],"},{"lineNumber":369,"author":{"gitId":"-"},"content":"    recipientSubmissionForms: [testTextRecipientSubmissionForm],"},{"lineNumber":370,"author":{"gitId":"-"},"content":"    numberOfEntitiesToGiveFeedbackToSetting: NumberOfEntitiesToGiveFeedbackToSetting.UNLIMITED,"},{"lineNumber":371,"author":{"gitId":"-"},"content":"    customNumberOfEntitiesToGiveFeedbackTo: 5,"},{"lineNumber":372,"author":{"gitId":"-"},"content":"    showResponsesTo: [FeedbackVisibilityType.GIVER_TEAM_MEMBERS, FeedbackVisibilityType.INSTRUCTORS],"},{"lineNumber":373,"author":{"gitId":"-"},"content":"    showGiverNameTo: [],"},{"lineNumber":374,"author":{"gitId":"-"},"content":"    showRecipientNameTo: [],"},{"lineNumber":375,"author":{"gitId":"-"},"content":"    isLoading: false,"},{"lineNumber":376,"author":{"gitId":"-"},"content":"    isLoaded: true,"},{"lineNumber":377,"author":{"gitId":"weiquu"},"content":"    isTabExpanded: true,"},{"lineNumber":378,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":379,"author":{"gitId":"-"},"content":""},{"lineNumber":380,"author":{"gitId":"-"},"content":"  const testMsqQuestionSubmissionForm: QuestionSubmissionFormModel \u003d {"},{"lineNumber":381,"author":{"gitId":"-"},"content":"    feedbackQuestionId: \u0027feedback-question-id-msq\u0027,"},{"lineNumber":382,"author":{"gitId":"-"},"content":"    questionNumber: 4,"},{"lineNumber":383,"author":{"gitId":"-"},"content":"    questionBrief: \u0027MSQ question\u0027,"},{"lineNumber":384,"author":{"gitId":"-"},"content":"    questionDescription: \u0027question description\u0027,"},{"lineNumber":385,"author":{"gitId":"-"},"content":"    questionType: FeedbackQuestionType.MSQ,"},{"lineNumber":386,"author":{"gitId":"-"},"content":"    questionDetails: {"},{"lineNumber":387,"author":{"gitId":"-"},"content":"      msqChoices: [\u0027first\u0027, \u0027second\u0027, \u0027third\u0027],"},{"lineNumber":388,"author":{"gitId":"-"},"content":"      otherEnabled: false,"},{"lineNumber":389,"author":{"gitId":"-"},"content":"      hasAssignedWeights: true,"},{"lineNumber":390,"author":{"gitId":"-"},"content":"      msqWeights: [1, 2, 3],"},{"lineNumber":391,"author":{"gitId":"-"},"content":"      maxSelectableChoices: 2,"},{"lineNumber":392,"author":{"gitId":"-"},"content":"      minSelectableChoices: 1,"},{"lineNumber":393,"author":{"gitId":"-"},"content":"    } as FeedbackMsqQuestionDetails,"},{"lineNumber":394,"author":{"gitId":"-"},"content":"    giverType: FeedbackParticipantType.INSTRUCTORS,"},{"lineNumber":395,"author":{"gitId":"-"},"content":"    recipientType: FeedbackParticipantType.STUDENTS,"},{"lineNumber":396,"author":{"gitId":"-"},"content":"    recipientList: [{ recipientName: \u0027Barry Harris\u0027, recipientIdentifier: \u0027barry-harris-id\u0027 }],"},{"lineNumber":397,"author":{"gitId":"-"},"content":"    recipientSubmissionForms: [testMsqRecipientSubmissionForm],"},{"lineNumber":398,"author":{"gitId":"-"},"content":"    numberOfEntitiesToGiveFeedbackToSetting: NumberOfEntitiesToGiveFeedbackToSetting.UNLIMITED,"},{"lineNumber":399,"author":{"gitId":"-"},"content":"    customNumberOfEntitiesToGiveFeedbackTo: 5,"},{"lineNumber":400,"author":{"gitId":"-"},"content":"    showResponsesTo: [FeedbackVisibilityType.RECIPIENT, FeedbackVisibilityType.INSTRUCTORS],"},{"lineNumber":401,"author":{"gitId":"-"},"content":"    showGiverNameTo: [FeedbackVisibilityType.RECIPIENT, FeedbackVisibilityType.INSTRUCTORS],"},{"lineNumber":402,"author":{"gitId":"-"},"content":"    showRecipientNameTo: [FeedbackVisibilityType.RECIPIENT, FeedbackVisibilityType.INSTRUCTORS],"},{"lineNumber":403,"author":{"gitId":"-"},"content":"    isLoading: false,"},{"lineNumber":404,"author":{"gitId":"-"},"content":"    isLoaded: true,"},{"lineNumber":405,"author":{"gitId":"weiquu"},"content":"    isTabExpanded: true,"},{"lineNumber":406,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":407,"author":{"gitId":"-"},"content":""},{"lineNumber":408,"author":{"gitId":"-"},"content":"  const testNumscaleQuestionSubmissionForm: QuestionSubmissionFormModel \u003d {"},{"lineNumber":409,"author":{"gitId":"-"},"content":"    feedbackQuestionId: \u0027feedback-question-id-numscale\u0027,"},{"lineNumber":410,"author":{"gitId":"-"},"content":"    questionNumber: 5,"},{"lineNumber":411,"author":{"gitId":"-"},"content":"    questionBrief: \u0027numerical scale question\u0027,"},{"lineNumber":412,"author":{"gitId":"-"},"content":"    questionDescription: \u0027question description\u0027,"},{"lineNumber":413,"author":{"gitId":"-"},"content":"    questionType: FeedbackQuestionType.NUMSCALE,"},{"lineNumber":414,"author":{"gitId":"-"},"content":"    questionDetails: {"},{"lineNumber":415,"author":{"gitId":"-"},"content":"      minScale: 1,"},{"lineNumber":416,"author":{"gitId":"-"},"content":"      maxScale: 10,"},{"lineNumber":417,"author":{"gitId":"-"},"content":"      step: 1,"},{"lineNumber":418,"author":{"gitId":"-"},"content":"    } as FeedbackNumericalScaleQuestionDetails,"},{"lineNumber":419,"author":{"gitId":"-"},"content":"    giverType: FeedbackParticipantType.INSTRUCTORS,"},{"lineNumber":420,"author":{"gitId":"-"},"content":"    recipientType: FeedbackParticipantType.STUDENTS,"},{"lineNumber":421,"author":{"gitId":"-"},"content":"    recipientList: [{ recipientName: \u0027Barry Harris\u0027, recipientIdentifier: \u0027barry-harris-id\u0027 }],"},{"lineNumber":422,"author":{"gitId":"-"},"content":"    recipientSubmissionForms: [testNumscaleRecipientSubmissionForm],"},{"lineNumber":423,"author":{"gitId":"-"},"content":"    numberOfEntitiesToGiveFeedbackToSetting: NumberOfEntitiesToGiveFeedbackToSetting.UNLIMITED,"},{"lineNumber":424,"author":{"gitId":"-"},"content":"    customNumberOfEntitiesToGiveFeedbackTo: 5,"},{"lineNumber":425,"author":{"gitId":"-"},"content":"    showResponsesTo: [FeedbackVisibilityType.RECIPIENT, FeedbackVisibilityType.INSTRUCTORS],"},{"lineNumber":426,"author":{"gitId":"-"},"content":"    showGiverNameTo: [FeedbackVisibilityType.RECIPIENT, FeedbackVisibilityType.INSTRUCTORS],"},{"lineNumber":427,"author":{"gitId":"-"},"content":"    showRecipientNameTo: [FeedbackVisibilityType.RECIPIENT, FeedbackVisibilityType.INSTRUCTORS],"},{"lineNumber":428,"author":{"gitId":"-"},"content":"    isLoading: false,"},{"lineNumber":429,"author":{"gitId":"-"},"content":"    isLoaded: true,"},{"lineNumber":430,"author":{"gitId":"weiquu"},"content":"    isTabExpanded: true,"},{"lineNumber":431,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":432,"author":{"gitId":"-"},"content":""},{"lineNumber":433,"author":{"gitId":"-"},"content":"  const testConstsumQuestionSubmissionForm: QuestionSubmissionFormModel \u003d {"},{"lineNumber":434,"author":{"gitId":"-"},"content":"    feedbackQuestionId: \u0027feedback-question-id-constsum\u0027,"},{"lineNumber":435,"author":{"gitId":"-"},"content":"    questionNumber: 6,"},{"lineNumber":436,"author":{"gitId":"-"},"content":"    questionBrief: \u0027constant sum question\u0027,"},{"lineNumber":437,"author":{"gitId":"-"},"content":"    questionDescription: \u0027question description\u0027,"},{"lineNumber":438,"author":{"gitId":"-"},"content":"    questionType: FeedbackQuestionType.CONSTSUM_RECIPIENTS,"},{"lineNumber":439,"author":{"gitId":"-"},"content":"    questionDetails: {"},{"lineNumber":440,"author":{"gitId":"-"},"content":"      constSumOptions: [\u0027option 1\u0027, \u0027option 2\u0027],"},{"lineNumber":441,"author":{"gitId":"-"},"content":"      distributeToRecipients: true,"},{"lineNumber":442,"author":{"gitId":"-"},"content":"      pointsPerOption: true,"},{"lineNumber":443,"author":{"gitId":"-"},"content":"      forceUnevenDistribution: false,"},{"lineNumber":444,"author":{"gitId":"-"},"content":"      distributePointsFor: \u0027distribute points for\u0027,"},{"lineNumber":445,"author":{"gitId":"-"},"content":"      points: 20,"},{"lineNumber":446,"author":{"gitId":"-"},"content":"    } as FeedbackConstantSumQuestionDetails,"},{"lineNumber":447,"author":{"gitId":"-"},"content":"    giverType: FeedbackParticipantType.INSTRUCTORS,"},{"lineNumber":448,"author":{"gitId":"-"},"content":"    recipientType: FeedbackParticipantType.STUDENTS,"},{"lineNumber":449,"author":{"gitId":"-"},"content":"    recipientList: [{ recipientName: \u0027Barry Harris\u0027, recipientIdentifier: \u0027barry-harris-id\u0027 }],"},{"lineNumber":450,"author":{"gitId":"-"},"content":"    recipientSubmissionForms: [testConstsumRecipientSubmissionForm],"},{"lineNumber":451,"author":{"gitId":"-"},"content":"    numberOfEntitiesToGiveFeedbackToSetting: NumberOfEntitiesToGiveFeedbackToSetting.UNLIMITED,"},{"lineNumber":452,"author":{"gitId":"-"},"content":"    customNumberOfEntitiesToGiveFeedbackTo: 5,"},{"lineNumber":453,"author":{"gitId":"-"},"content":"    showResponsesTo: [FeedbackVisibilityType.RECIPIENT, FeedbackVisibilityType.INSTRUCTORS],"},{"lineNumber":454,"author":{"gitId":"-"},"content":"    showGiverNameTo: [FeedbackVisibilityType.RECIPIENT, FeedbackVisibilityType.INSTRUCTORS],"},{"lineNumber":455,"author":{"gitId":"-"},"content":"    showRecipientNameTo: [FeedbackVisibilityType.RECIPIENT, FeedbackVisibilityType.INSTRUCTORS],"},{"lineNumber":456,"author":{"gitId":"-"},"content":"    isLoading: false,"},{"lineNumber":457,"author":{"gitId":"-"},"content":"    isLoaded: true,"},{"lineNumber":458,"author":{"gitId":"weiquu"},"content":"    isTabExpanded: true,"},{"lineNumber":459,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":460,"author":{"gitId":"-"},"content":""},{"lineNumber":461,"author":{"gitId":"-"},"content":"  const testContribQuestionSubmissionForm: QuestionSubmissionFormModel \u003d {"},{"lineNumber":462,"author":{"gitId":"-"},"content":"    feedbackQuestionId: \u0027feedback-question-id-contrib\u0027,"},{"lineNumber":463,"author":{"gitId":"-"},"content":"    questionNumber: 7,"},{"lineNumber":464,"author":{"gitId":"-"},"content":"    questionBrief: \u0027contribution question\u0027,"},{"lineNumber":465,"author":{"gitId":"-"},"content":"    questionDescription: \u0027question description\u0027,"},{"lineNumber":466,"author":{"gitId":"-"},"content":"    questionType: FeedbackQuestionType.CONTRIB,"},{"lineNumber":467,"author":{"gitId":"-"},"content":"    questionDetails: {"},{"lineNumber":468,"author":{"gitId":"-"},"content":"      isNotSureAllowed: false,"},{"lineNumber":469,"author":{"gitId":"-"},"content":"    } as FeedbackContributionQuestionDetails,"},{"lineNumber":470,"author":{"gitId":"-"},"content":"    giverType: FeedbackParticipantType.INSTRUCTORS,"},{"lineNumber":471,"author":{"gitId":"-"},"content":"    recipientType: FeedbackParticipantType.STUDENTS,"},{"lineNumber":472,"author":{"gitId":"-"},"content":"    recipientList: [{ recipientName: \u0027Barry Harris\u0027, recipientIdentifier: \u0027barry-harris-id\u0027 }],"},{"lineNumber":473,"author":{"gitId":"-"},"content":"    recipientSubmissionForms: [testContribRecipientSubmissionForm],"},{"lineNumber":474,"author":{"gitId":"-"},"content":"    numberOfEntitiesToGiveFeedbackToSetting: NumberOfEntitiesToGiveFeedbackToSetting.UNLIMITED,"},{"lineNumber":475,"author":{"gitId":"-"},"content":"    customNumberOfEntitiesToGiveFeedbackTo: 5,"},{"lineNumber":476,"author":{"gitId":"-"},"content":"    showResponsesTo: [FeedbackVisibilityType.RECIPIENT, FeedbackVisibilityType.INSTRUCTORS],"},{"lineNumber":477,"author":{"gitId":"-"},"content":"    showGiverNameTo: [FeedbackVisibilityType.RECIPIENT, FeedbackVisibilityType.INSTRUCTORS],"},{"lineNumber":478,"author":{"gitId":"-"},"content":"    showRecipientNameTo: [FeedbackVisibilityType.RECIPIENT, FeedbackVisibilityType.INSTRUCTORS],"},{"lineNumber":479,"author":{"gitId":"-"},"content":"    isLoading: false,"},{"lineNumber":480,"author":{"gitId":"-"},"content":"    isLoaded: true,"},{"lineNumber":481,"author":{"gitId":"weiquu"},"content":"    isTabExpanded: true,"},{"lineNumber":482,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":483,"author":{"gitId":"-"},"content":""},{"lineNumber":484,"author":{"gitId":"-"},"content":"  const testRubricQuestionSubmissionForm: QuestionSubmissionFormModel \u003d {"},{"lineNumber":485,"author":{"gitId":"-"},"content":"    feedbackQuestionId: \u0027feedback-question-id-rubric\u0027,"},{"lineNumber":486,"author":{"gitId":"-"},"content":"    questionNumber: 8,"},{"lineNumber":487,"author":{"gitId":"-"},"content":"    questionBrief: \u0027question brief\u0027,"},{"lineNumber":488,"author":{"gitId":"-"},"content":"    questionDescription: \u0027question description\u0027,"},{"lineNumber":489,"author":{"gitId":"-"},"content":"    questionType: FeedbackQuestionType.RUBRIC,"},{"lineNumber":490,"author":{"gitId":"-"},"content":"    questionDetails: {"},{"lineNumber":491,"author":{"gitId":"-"},"content":"      hasAssignedWeights: false,"},{"lineNumber":492,"author":{"gitId":"-"},"content":"      rubricWeightsForEachCell: [[1, 2], [2, 1]],"},{"lineNumber":493,"author":{"gitId":"-"},"content":"      rubricChoices: [\u0027choice 1\u0027, \u0027choice 2\u0027],"},{"lineNumber":494,"author":{"gitId":"-"},"content":"      rubricSubQuestions: [\u0027subquestion 1\u0027, \u0027subquestion 2\u0027],"},{"lineNumber":495,"author":{"gitId":"-"},"content":"      rubricDescriptions: [[\u0027description 1\u0027, \u0027description 2\u0027], [\u0027description 3\u0027, \u0027description 4\u0027]],"},{"lineNumber":496,"author":{"gitId":"-"},"content":"    } as FeedbackRubricQuestionDetails,"},{"lineNumber":497,"author":{"gitId":"-"},"content":"    giverType: FeedbackParticipantType.INSTRUCTORS,"},{"lineNumber":498,"author":{"gitId":"-"},"content":"    recipientType: FeedbackParticipantType.STUDENTS,"},{"lineNumber":499,"author":{"gitId":"-"},"content":"    recipientList: [{ recipientName: \u0027Barry Harris\u0027, recipientIdentifier: \u0027barry-harris-id\u0027 }],"},{"lineNumber":500,"author":{"gitId":"-"},"content":"    recipientSubmissionForms: [testRubricRecipientSubmissionForm],"},{"lineNumber":501,"author":{"gitId":"-"},"content":"    numberOfEntitiesToGiveFeedbackToSetting: NumberOfEntitiesToGiveFeedbackToSetting.UNLIMITED,"},{"lineNumber":502,"author":{"gitId":"-"},"content":"    customNumberOfEntitiesToGiveFeedbackTo: 5,"},{"lineNumber":503,"author":{"gitId":"-"},"content":"    showResponsesTo: [FeedbackVisibilityType.RECIPIENT, FeedbackVisibilityType.INSTRUCTORS],"},{"lineNumber":504,"author":{"gitId":"-"},"content":"    showGiverNameTo: [FeedbackVisibilityType.RECIPIENT, FeedbackVisibilityType.INSTRUCTORS],"},{"lineNumber":505,"author":{"gitId":"-"},"content":"    showRecipientNameTo: [FeedbackVisibilityType.RECIPIENT, FeedbackVisibilityType.INSTRUCTORS],"},{"lineNumber":506,"author":{"gitId":"-"},"content":"    isLoading: false,"},{"lineNumber":507,"author":{"gitId":"-"},"content":"    isLoaded: true,"},{"lineNumber":508,"author":{"gitId":"weiquu"},"content":"    isTabExpanded: true,"},{"lineNumber":509,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":510,"author":{"gitId":"-"},"content":""},{"lineNumber":511,"author":{"gitId":"-"},"content":"  const testRankOptionsQuestionSubmissionForm: QuestionSubmissionFormModel \u003d {"},{"lineNumber":512,"author":{"gitId":"-"},"content":"    feedbackQuestionId: \u0027feedback-question-id-rank-options\u0027,"},{"lineNumber":513,"author":{"gitId":"-"},"content":"    questionNumber: 9,"},{"lineNumber":514,"author":{"gitId":"-"},"content":"    questionBrief: \u0027question brief\u0027,"},{"lineNumber":515,"author":{"gitId":"-"},"content":"    questionDescription: \u0027question description\u0027,"},{"lineNumber":516,"author":{"gitId":"-"},"content":"    questionType: FeedbackQuestionType.RANK_OPTIONS,"},{"lineNumber":517,"author":{"gitId":"-"},"content":"    questionDetails: {"},{"lineNumber":518,"author":{"gitId":"-"},"content":"      options: [\u0027option 1\u0027, \u0027option 2\u0027],"},{"lineNumber":519,"author":{"gitId":"-"},"content":"    } as FeedbackRankOptionsQuestionDetails,"},{"lineNumber":520,"author":{"gitId":"-"},"content":"    giverType: FeedbackParticipantType.INSTRUCTORS,"},{"lineNumber":521,"author":{"gitId":"-"},"content":"    recipientType: FeedbackParticipantType.STUDENTS,"},{"lineNumber":522,"author":{"gitId":"-"},"content":"    recipientList: [{ recipientName: \u0027Barry Harris\u0027, recipientIdentifier: \u0027barry-harris-id\u0027 }],"},{"lineNumber":523,"author":{"gitId":"-"},"content":"    recipientSubmissionForms: [testRankOptionsRecipientSubmissionForm],"},{"lineNumber":524,"author":{"gitId":"-"},"content":"    numberOfEntitiesToGiveFeedbackToSetting: NumberOfEntitiesToGiveFeedbackToSetting.UNLIMITED,"},{"lineNumber":525,"author":{"gitId":"-"},"content":"    customNumberOfEntitiesToGiveFeedbackTo: 5,"},{"lineNumber":526,"author":{"gitId":"-"},"content":"    showResponsesTo: [FeedbackVisibilityType.RECIPIENT, FeedbackVisibilityType.INSTRUCTORS],"},{"lineNumber":527,"author":{"gitId":"-"},"content":"    showGiverNameTo: [FeedbackVisibilityType.RECIPIENT, FeedbackVisibilityType.INSTRUCTORS],"},{"lineNumber":528,"author":{"gitId":"-"},"content":"    showRecipientNameTo: [FeedbackVisibilityType.RECIPIENT, FeedbackVisibilityType.INSTRUCTORS],"},{"lineNumber":529,"author":{"gitId":"-"},"content":"    isLoading: false,"},{"lineNumber":530,"author":{"gitId":"-"},"content":"    isLoaded: true,"},{"lineNumber":531,"author":{"gitId":"weiquu"},"content":"    isTabExpanded: true,"},{"lineNumber":532,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":533,"author":{"gitId":"-"},"content":""},{"lineNumber":534,"author":{"gitId":"-"},"content":"  const testRankRecipientsQuestionSubmissionForm: QuestionSubmissionFormModel \u003d {"},{"lineNumber":535,"author":{"gitId":"-"},"content":"    feedbackQuestionId: \u0027feedback-question-id-rank-recipients\u0027,"},{"lineNumber":536,"author":{"gitId":"-"},"content":"    questionNumber: 10,"},{"lineNumber":537,"author":{"gitId":"-"},"content":"    questionBrief: \u0027question brief\u0027,"},{"lineNumber":538,"author":{"gitId":"-"},"content":"    questionDescription: \u0027question description\u0027,"},{"lineNumber":539,"author":{"gitId":"-"},"content":"    questionType: FeedbackQuestionType.RANK_RECIPIENTS,"},{"lineNumber":540,"author":{"gitId":"-"},"content":"    questionDetails: {"},{"lineNumber":541,"author":{"gitId":"-"},"content":"      minOptionsToBeRanked: 1,"},{"lineNumber":542,"author":{"gitId":"-"},"content":"      maxOptionsToBeRanked: 2,"},{"lineNumber":543,"author":{"gitId":"-"},"content":"      areDuplicatesAllowed: false,"},{"lineNumber":544,"author":{"gitId":"-"},"content":"    } as FeedbackRankRecipientsQuestionDetails,"},{"lineNumber":545,"author":{"gitId":"-"},"content":"    giverType: FeedbackParticipantType.INSTRUCTORS,"},{"lineNumber":546,"author":{"gitId":"-"},"content":"    recipientType: FeedbackParticipantType.STUDENTS,"},{"lineNumber":547,"author":{"gitId":"-"},"content":"    recipientList: [{ recipientName: \u0027Barry Harris\u0027, recipientIdentifier: \u0027barry-harris-id\u0027 }],"},{"lineNumber":548,"author":{"gitId":"-"},"content":"    recipientSubmissionForms: [testRankRecipientsRecipientSubmissionForm],"},{"lineNumber":549,"author":{"gitId":"-"},"content":"    numberOfEntitiesToGiveFeedbackToSetting: NumberOfEntitiesToGiveFeedbackToSetting.UNLIMITED,"},{"lineNumber":550,"author":{"gitId":"-"},"content":"    customNumberOfEntitiesToGiveFeedbackTo: 5,"},{"lineNumber":551,"author":{"gitId":"-"},"content":"    showResponsesTo: [FeedbackVisibilityType.RECIPIENT, FeedbackVisibilityType.INSTRUCTORS],"},{"lineNumber":552,"author":{"gitId":"-"},"content":"    showGiverNameTo: [FeedbackVisibilityType.RECIPIENT, FeedbackVisibilityType.INSTRUCTORS],"},{"lineNumber":553,"author":{"gitId":"-"},"content":"    showRecipientNameTo: [FeedbackVisibilityType.RECIPIENT, FeedbackVisibilityType.INSTRUCTORS],"},{"lineNumber":554,"author":{"gitId":"-"},"content":"    isLoading: false,"},{"lineNumber":555,"author":{"gitId":"-"},"content":"    isLoaded: true,"},{"lineNumber":556,"author":{"gitId":"weiquu"},"content":"    isTabExpanded: true,"},{"lineNumber":557,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":558,"author":{"gitId":"-"},"content":""},{"lineNumber":559,"author":{"gitId":"-"},"content":"  const testInfo: AuthInfo \u003d {"},{"lineNumber":560,"author":{"gitId":"-"},"content":"    masquerade: false,"},{"lineNumber":561,"author":{"gitId":"-"},"content":"    user: {"},{"lineNumber":562,"author":{"gitId":"-"},"content":"      id: \u0027user-id\u0027,"},{"lineNumber":563,"author":{"gitId":"-"},"content":"      isAdmin: false,"},{"lineNumber":564,"author":{"gitId":"-"},"content":"      isInstructor: false,"},{"lineNumber":565,"author":{"gitId":"-"},"content":"      isStudent: true,"},{"lineNumber":566,"author":{"gitId":"-"},"content":"      isMaintainer: false,"},{"lineNumber":567,"author":{"gitId":"-"},"content":"    },"},{"lineNumber":568,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":569,"author":{"gitId":"-"},"content":""},{"lineNumber":570,"author":{"gitId":"-"},"content":"  const testQueryParams: any \u003d {"},{"lineNumber":571,"author":{"gitId":"-"},"content":"    courseid: \u0027CS3281\u0027,"},{"lineNumber":572,"author":{"gitId":"-"},"content":"    fsname: \u0027Feedback Session Name\u0027,"},{"lineNumber":573,"author":{"gitId":"-"},"content":"    key: \u0027reg-key\u0027,"},{"lineNumber":574,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":575,"author":{"gitId":"-"},"content":""},{"lineNumber":576,"author":{"gitId":"-"},"content":"  const getFeedbackSessionArgs: any \u003d {"},{"lineNumber":577,"author":{"gitId":"-"},"content":"    courseId: testQueryParams.courseid,"},{"lineNumber":578,"author":{"gitId":"-"},"content":"    feedbackSessionName: testQueryParams.fsname,"},{"lineNumber":579,"author":{"gitId":"-"},"content":"    intent: Intent.STUDENT_SUBMISSION,"},{"lineNumber":580,"author":{"gitId":"-"},"content":"    key: testQueryParams.key,"},{"lineNumber":581,"author":{"gitId":"-"},"content":"    moderatedPerson: \u0027\u0027,"},{"lineNumber":582,"author":{"gitId":"-"},"content":"    previewAs: \u0027\u0027,"},{"lineNumber":583,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":584,"author":{"gitId":"-"},"content":""},{"lineNumber":585,"author":{"gitId":"-"},"content":"  let component: SessionSubmissionPageComponent;"},{"lineNumber":586,"author":{"gitId":"-"},"content":"  let fixture: ComponentFixture\u003cSessionSubmissionPageComponent\u003e;"},{"lineNumber":587,"author":{"gitId":"-"},"content":"  let authService: AuthService;"},{"lineNumber":588,"author":{"gitId":"-"},"content":"  let navService: NavigationService;"},{"lineNumber":589,"author":{"gitId":"-"},"content":"  let studentService: StudentService;"},{"lineNumber":590,"author":{"gitId":"-"},"content":"  let instructorService: InstructorService;"},{"lineNumber":591,"author":{"gitId":"-"},"content":"  let feedbackSessionsService: FeedbackSessionsService;"},{"lineNumber":592,"author":{"gitId":"-"},"content":"  let feedbackResponsesService: FeedbackResponsesService;"},{"lineNumber":593,"author":{"gitId":"-"},"content":"  let feedbackResponseCommentService: FeedbackResponseCommentService;"},{"lineNumber":594,"author":{"gitId":"-"},"content":"  let feedbackQuestionsService: FeedbackQuestionsService;"},{"lineNumber":595,"author":{"gitId":"-"},"content":"  let simpleModalService: SimpleModalService;"},{"lineNumber":596,"author":{"gitId":"-"},"content":"  let ngbModal: NgbModal;"},{"lineNumber":597,"author":{"gitId":"-"},"content":""},{"lineNumber":598,"author":{"gitId":"-"},"content":"  beforeEach(waitForAsync(() \u003d\u003e {"},{"lineNumber":599,"author":{"gitId":"-"},"content":"    TestBed.configureTestingModule({"},{"lineNumber":600,"author":{"gitId":"-"},"content":"      declarations: [SessionSubmissionPageComponent, SavingCompleteModalComponent],"},{"lineNumber":601,"author":{"gitId":"-"},"content":"      imports: ["},{"lineNumber":602,"author":{"gitId":"-"},"content":"        HttpClientTestingModule,"},{"lineNumber":603,"author":{"gitId":"-"},"content":"        RouterTestingModule,"},{"lineNumber":604,"author":{"gitId":"-"},"content":"        NgxPageScrollCoreModule,"},{"lineNumber":605,"author":{"gitId":"-"},"content":"        TeammatesCommonModule,"},{"lineNumber":606,"author":{"gitId":"-"},"content":"        FormsModule,"},{"lineNumber":607,"author":{"gitId":"-"},"content":"        AjaxLoadingModule,"},{"lineNumber":608,"author":{"gitId":"-"},"content":"        QuestionSubmissionFormModule,"},{"lineNumber":609,"author":{"gitId":"-"},"content":"        LoadingSpinnerModule,"},{"lineNumber":610,"author":{"gitId":"-"},"content":"        LoadingRetryModule,"},{"lineNumber":611,"author":{"gitId":"weiquu"},"content":"        BrowserAnimationsModule,"},{"lineNumber":612,"author":{"gitId":"-"},"content":"      ],"},{"lineNumber":613,"author":{"gitId":"-"},"content":"      providers: ["},{"lineNumber":614,"author":{"gitId":"-"},"content":"        {"},{"lineNumber":615,"author":{"gitId":"-"},"content":"          provide: ActivatedRoute,"},{"lineNumber":616,"author":{"gitId":"-"},"content":"          useValue: {"},{"lineNumber":617,"author":{"gitId":"-"},"content":"            data: {"},{"lineNumber":618,"author":{"gitId":"-"},"content":"              intent: Intent.STUDENT_SUBMISSION,"},{"lineNumber":619,"author":{"gitId":"-"},"content":"              pipe: () \u003d\u003e {"},{"lineNumber":620,"author":{"gitId":"-"},"content":"                return {"},{"lineNumber":621,"author":{"gitId":"-"},"content":"                  subscribe: (fn: (value: any) \u003d\u003e void) \u003d\u003e fn(testQueryParams),"},{"lineNumber":622,"author":{"gitId":"-"},"content":"                };"},{"lineNumber":623,"author":{"gitId":"-"},"content":"              },"},{"lineNumber":624,"author":{"gitId":"-"},"content":"            },"},{"lineNumber":625,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":626,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":627,"author":{"gitId":"-"},"content":"      ],"},{"lineNumber":628,"author":{"gitId":"-"},"content":"    })"},{"lineNumber":629,"author":{"gitId":"-"},"content":"    .compileComponents();"},{"lineNumber":630,"author":{"gitId":"-"},"content":"  }));"},{"lineNumber":631,"author":{"gitId":"-"},"content":""},{"lineNumber":632,"author":{"gitId":"-"},"content":"  beforeEach(() \u003d\u003e {"},{"lineNumber":633,"author":{"gitId":"-"},"content":"    fixture \u003d TestBed.createComponent(SessionSubmissionPageComponent);"},{"lineNumber":634,"author":{"gitId":"-"},"content":"    authService \u003d TestBed.inject(AuthService);"},{"lineNumber":635,"author":{"gitId":"-"},"content":"    navService \u003d TestBed.inject(NavigationService);"},{"lineNumber":636,"author":{"gitId":"-"},"content":"    studentService \u003d TestBed.inject(StudentService);"},{"lineNumber":637,"author":{"gitId":"-"},"content":"    instructorService \u003d TestBed.inject(InstructorService);"},{"lineNumber":638,"author":{"gitId":"-"},"content":"    feedbackQuestionsService \u003d TestBed.inject(FeedbackQuestionsService);"},{"lineNumber":639,"author":{"gitId":"-"},"content":"    feedbackResponsesService \u003d TestBed.inject(FeedbackResponsesService);"},{"lineNumber":640,"author":{"gitId":"-"},"content":"    feedbackResponseCommentService \u003d TestBed.inject(FeedbackResponseCommentService);"},{"lineNumber":641,"author":{"gitId":"-"},"content":"    feedbackSessionsService \u003d TestBed.inject(FeedbackSessionsService);"},{"lineNumber":642,"author":{"gitId":"-"},"content":"    simpleModalService \u003d TestBed.inject(SimpleModalService);"},{"lineNumber":643,"author":{"gitId":"-"},"content":"    ngbModal \u003d TestBed.inject(NgbModal);"},{"lineNumber":644,"author":{"gitId":"-"},"content":"    component \u003d fixture.componentInstance;"},{"lineNumber":645,"author":{"gitId":"-"},"content":"    fixture.detectChanges();"},{"lineNumber":646,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":647,"author":{"gitId":"-"},"content":""},{"lineNumber":648,"author":{"gitId":"-"},"content":"  it(\u0027should create\u0027, () \u003d\u003e {"},{"lineNumber":649,"author":{"gitId":"-"},"content":"    expect(component).toBeTruthy();"},{"lineNumber":650,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":651,"author":{"gitId":"-"},"content":""},{"lineNumber":652,"author":{"gitId":"-"},"content":"  it(\u0027should snap with default fields\u0027, () \u003d\u003e {"},{"lineNumber":653,"author":{"gitId":"-"},"content":"    expect(fixture).toMatchSnapshot();"},{"lineNumber":654,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":655,"author":{"gitId":"-"},"content":""},{"lineNumber":656,"author":{"gitId":"-"},"content":"  it(\u0027should snap when feedback session questions have failed to load\u0027, () \u003d\u003e {"},{"lineNumber":657,"author":{"gitId":"-"},"content":"    component.retryAttempts \u003d 0;"},{"lineNumber":658,"author":{"gitId":"-"},"content":"    component.hasFeedbackSessionQuestionsLoadingFailed \u003d true;"},{"lineNumber":659,"author":{"gitId":"-"},"content":"    fixture.detectChanges();"},{"lineNumber":660,"author":{"gitId":"-"},"content":"    expect(fixture).toMatchSnapshot();"},{"lineNumber":661,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":662,"author":{"gitId":"-"},"content":""},{"lineNumber":663,"author":{"gitId":"-"},"content":"  it(\u0027should snap when saving responses\u0027, () \u003d\u003e {"},{"lineNumber":664,"author":{"gitId":"-"},"content":"    component.isSavingResponses \u003d true;"},{"lineNumber":665,"author":{"gitId":"-"},"content":"    fixture.detectChanges();"},{"lineNumber":666,"author":{"gitId":"-"},"content":"    expect(fixture).toMatchSnapshot();"},{"lineNumber":667,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":668,"author":{"gitId":"-"},"content":""},{"lineNumber":669,"author":{"gitId":"-"},"content":"  it(\u0027should snap with user that is logged in and using session link\u0027, () \u003d\u003e {"},{"lineNumber":670,"author":{"gitId":"-"},"content":"    component.regKey \u003d \u0027reg-key\u0027;"},{"lineNumber":671,"author":{"gitId":"-"},"content":"    component.loggedInUser \u003d \u0027alice\u0027;"},{"lineNumber":672,"author":{"gitId":"-"},"content":"    component.personName \u003d \u0027alice\u0027;"},{"lineNumber":673,"author":{"gitId":"-"},"content":"    fixture.detectChanges();"},{"lineNumber":674,"author":{"gitId":"-"},"content":"    expect(fixture).toMatchSnapshot();"},{"lineNumber":675,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":676,"author":{"gitId":"-"},"content":""},{"lineNumber":677,"author":{"gitId":"-"},"content":"  it(\u0027should snap with user that is not logged in and using session link\u0027, () \u003d\u003e {"},{"lineNumber":678,"author":{"gitId":"-"},"content":"    component.regKey \u003d \u0027reg-key\u0027;"},{"lineNumber":679,"author":{"gitId":"-"},"content":"    component.loggedInUser \u003d \u0027\u0027;"},{"lineNumber":680,"author":{"gitId":"-"},"content":"    component.personName \u003d \u0027alice\u0027;"},{"lineNumber":681,"author":{"gitId":"-"},"content":"    fixture.detectChanges();"},{"lineNumber":682,"author":{"gitId":"-"},"content":"    expect(fixture).toMatchSnapshot();"},{"lineNumber":683,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":684,"author":{"gitId":"-"},"content":""},{"lineNumber":685,"author":{"gitId":"-"},"content":"  it(\u0027should snap with feedback session and user details\u0027, () \u003d\u003e {"},{"lineNumber":686,"author":{"gitId":"-"},"content":"    component.courseId \u003d \u0027test.exa-demo\u0027;"},{"lineNumber":687,"author":{"gitId":"-"},"content":"    component.feedbackSessionName \u003d \u0027First team feedback session\u0027;"},{"lineNumber":688,"author":{"gitId":"-"},"content":"    component.regKey \u003d \u0027reg-key\u0027;"},{"lineNumber":689,"author":{"gitId":"-"},"content":"    component.loggedInUser \u003d \u0027logged-in-user\u0027;"},{"lineNumber":690,"author":{"gitId":"-"},"content":"    component.personName \u003d \u0027person name\u0027;"},{"lineNumber":691,"author":{"gitId":"-"},"content":"    component.personEmail \u003d \u0027person@email.com\u0027;"},{"lineNumber":692,"author":{"gitId":"-"},"content":"    component.courseName \u003d \u0027Course name\u0027;"},{"lineNumber":693,"author":{"gitId":"-"},"content":"    component.courseInstitute \u003d \u0027Test institute\u0027;"},{"lineNumber":694,"author":{"gitId":"-"},"content":"    component.formattedSessionOpeningTime \u003d \u0027Sun, 01 Apr, 2012, 11:59 PM +08\u0027;"},{"lineNumber":695,"author":{"gitId":"-"},"content":"    component.formattedSessionClosingTime \u003d \u0027Mon, 02 Apr, 2012, 11:59 PM +08\u0027;"},{"lineNumber":696,"author":{"gitId":"-"},"content":"    component.feedbackSessionInstructions \u003d \u0027Please give your feedback based on the following questions.\u0027;"},{"lineNumber":697,"author":{"gitId":"-"},"content":"    component.isCourseLoading \u003d false;"},{"lineNumber":698,"author":{"gitId":"-"},"content":"    component.isFeedbackSessionLoading \u003d false;"},{"lineNumber":699,"author":{"gitId":"-"},"content":"    fixture.detectChanges();"},{"lineNumber":700,"author":{"gitId":"-"},"content":"    expect(fixture).toMatchSnapshot();"},{"lineNumber":701,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":702,"author":{"gitId":"-"},"content":""},{"lineNumber":703,"author":{"gitId":"-"},"content":"  it(\u0027should snap with feedback session question submission forms\u0027, () \u003d\u003e {"},{"lineNumber":704,"author":{"gitId":"-"},"content":"    component.questionSubmissionForms \u003d ["},{"lineNumber":705,"author":{"gitId":"-"},"content":"      testMcqQuestionSubmissionForm,"},{"lineNumber":706,"author":{"gitId":"-"},"content":"      testTextQuestionSubmissionForm,"},{"lineNumber":707,"author":{"gitId":"-"},"content":"      testMcqQuestionSubmissionForm2,"},{"lineNumber":708,"author":{"gitId":"-"},"content":"      testMsqQuestionSubmissionForm,"},{"lineNumber":709,"author":{"gitId":"-"},"content":"      testNumscaleQuestionSubmissionForm,"},{"lineNumber":710,"author":{"gitId":"-"},"content":"      testConstsumQuestionSubmissionForm,"},{"lineNumber":711,"author":{"gitId":"-"},"content":"      testContribQuestionSubmissionForm,"},{"lineNumber":712,"author":{"gitId":"-"},"content":"      testRubricQuestionSubmissionForm,"},{"lineNumber":713,"author":{"gitId":"-"},"content":"      testRankOptionsQuestionSubmissionForm,"},{"lineNumber":714,"author":{"gitId":"-"},"content":"      testRankRecipientsQuestionSubmissionForm,"},{"lineNumber":715,"author":{"gitId":"-"},"content":"    ];"},{"lineNumber":716,"author":{"gitId":"-"},"content":"    component.isCourseLoading \u003d false;"},{"lineNumber":717,"author":{"gitId":"-"},"content":"    component.isFeedbackSessionLoading \u003d false;"},{"lineNumber":718,"author":{"gitId":"-"},"content":"    component.isFeedbackSessionQuestionsLoading \u003d false;"},{"lineNumber":719,"author":{"gitId":"-"},"content":"    fixture.detectChanges();"},{"lineNumber":720,"author":{"gitId":"-"},"content":"    expect(fixture).toMatchSnapshot();"},{"lineNumber":721,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":722,"author":{"gitId":"-"},"content":""},{"lineNumber":723,"author":{"gitId":"-"},"content":"  it(\u0027should snap with feedback session question submission forms when disabled\u0027, () \u003d\u003e {"},{"lineNumber":724,"author":{"gitId":"-"},"content":"    component.questionSubmissionForms \u003d ["},{"lineNumber":725,"author":{"gitId":"-"},"content":"      testMcqQuestionSubmissionForm,"},{"lineNumber":726,"author":{"gitId":"-"},"content":"      testTextQuestionSubmissionForm,"},{"lineNumber":727,"author":{"gitId":"-"},"content":"      testMcqQuestionSubmissionForm2,"},{"lineNumber":728,"author":{"gitId":"-"},"content":"      testMsqQuestionSubmissionForm,"},{"lineNumber":729,"author":{"gitId":"-"},"content":"      testNumscaleQuestionSubmissionForm,"},{"lineNumber":730,"author":{"gitId":"-"},"content":"      testConstsumQuestionSubmissionForm,"},{"lineNumber":731,"author":{"gitId":"-"},"content":"      testContribQuestionSubmissionForm,"},{"lineNumber":732,"author":{"gitId":"-"},"content":"      testRubricQuestionSubmissionForm,"},{"lineNumber":733,"author":{"gitId":"-"},"content":"      testRankOptionsQuestionSubmissionForm,"},{"lineNumber":734,"author":{"gitId":"-"},"content":"      testRankRecipientsQuestionSubmissionForm,"},{"lineNumber":735,"author":{"gitId":"-"},"content":"    ];"},{"lineNumber":736,"author":{"gitId":"-"},"content":"    component.isSubmissionFormsDisabled \u003d true;"},{"lineNumber":737,"author":{"gitId":"-"},"content":"    component.isCourseLoading \u003d false;"},{"lineNumber":738,"author":{"gitId":"-"},"content":"    component.isFeedbackSessionLoading \u003d false;"},{"lineNumber":739,"author":{"gitId":"-"},"content":"    component.isFeedbackSessionQuestionsLoading \u003d false;"},{"lineNumber":740,"author":{"gitId":"-"},"content":"    fixture.detectChanges();"},{"lineNumber":741,"author":{"gitId":"-"},"content":"    expect(fixture).toMatchSnapshot();"},{"lineNumber":742,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":743,"author":{"gitId":"-"},"content":""},{"lineNumber":744,"author":{"gitId":"-"},"content":"  it(\u0027should fetch auth info on init\u0027, () \u003d\u003e {"},{"lineNumber":745,"author":{"gitId":"-"},"content":"    jest.spyOn(authService, \u0027getAuthUser\u0027).mockReturnValue(of(testInfo));"},{"lineNumber":746,"author":{"gitId":"-"},"content":"    component.ngOnInit();"},{"lineNumber":747,"author":{"gitId":"-"},"content":"    expect(component.intent).toEqual(Intent.STUDENT_SUBMISSION);"},{"lineNumber":748,"author":{"gitId":"-"},"content":"    expect(component.courseId).toEqual(testQueryParams.courseid);"},{"lineNumber":749,"author":{"gitId":"-"},"content":"    expect(component.feedbackSessionName).toEqual(testQueryParams.fsname);"},{"lineNumber":750,"author":{"gitId":"-"},"content":"    expect(component.regKey).toEqual(testQueryParams.key);"},{"lineNumber":751,"author":{"gitId":"-"},"content":"    expect(component.loggedInUser).toEqual(testInfo.user?.id);"},{"lineNumber":752,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":753,"author":{"gitId":"-"},"content":""},{"lineNumber":754,"author":{"gitId":"-"},"content":"  it(\u0027should verify allowed access with used reg key\u0027, () \u003d\u003e {"},{"lineNumber":755,"author":{"gitId":"-"},"content":"    const testValidity: RegkeyValidity \u003d {"},{"lineNumber":756,"author":{"gitId":"-"},"content":"      isAllowedAccess: true,"},{"lineNumber":757,"author":{"gitId":"-"},"content":"      isUsed: true,"},{"lineNumber":758,"author":{"gitId":"-"},"content":"      isValid: false,"},{"lineNumber":759,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":760,"author":{"gitId":"-"},"content":"    jest.spyOn(authService, \u0027getAuthUser\u0027).mockReturnValue(of(testInfo));"},{"lineNumber":761,"author":{"gitId":"-"},"content":"    jest.spyOn(authService, \u0027getAuthRegkeyValidity\u0027).mockReturnValue(of(testValidity));"},{"lineNumber":762,"author":{"gitId":"-"},"content":"    const navSpy: SpyInstance \u003d jest.spyOn(navService, \u0027navigateByURLWithParamEncoding\u0027).mockImplementation();"},{"lineNumber":763,"author":{"gitId":"-"},"content":""},{"lineNumber":764,"author":{"gitId":"-"},"content":"    component.ngOnInit();"},{"lineNumber":765,"author":{"gitId":"-"},"content":""},{"lineNumber":766,"author":{"gitId":"-"},"content":"    expect(navSpy).toHaveBeenCalledTimes(1);"},{"lineNumber":767,"author":{"gitId":"-"},"content":"    expect(navSpy).toHaveBeenLastCalledWith(\u0027/web/student/sessions/submission\u0027,"},{"lineNumber":768,"author":{"gitId":"-"},"content":"        { courseid: \u0027CS3281\u0027, fsname: \u0027Feedback Session Name\u0027 });"},{"lineNumber":769,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":770,"author":{"gitId":"-"},"content":""},{"lineNumber":771,"author":{"gitId":"-"},"content":"  it(\u0027should deny unallowed access with valid reg key for logged in user\u0027, () \u003d\u003e {"},{"lineNumber":772,"author":{"gitId":"-"},"content":"    const testValidity: RegkeyValidity \u003d {"},{"lineNumber":773,"author":{"gitId":"-"},"content":"      isAllowedAccess: false,"},{"lineNumber":774,"author":{"gitId":"-"},"content":"      isUsed: false,"},{"lineNumber":775,"author":{"gitId":"-"},"content":"      isValid: true,"},{"lineNumber":776,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":777,"author":{"gitId":"-"},"content":"    jest.spyOn(authService, \u0027getAuthUser\u0027).mockReturnValue(of(testInfo));"},{"lineNumber":778,"author":{"gitId":"-"},"content":"    jest.spyOn(authService, \u0027getAuthRegkeyValidity\u0027).mockReturnValue(of(testValidity));"},{"lineNumber":779,"author":{"gitId":"-"},"content":"    const navSpy: SpyInstance \u003d jest.spyOn(navService, \u0027navigateWithErrorMessage\u0027).mockImplementation();"},{"lineNumber":780,"author":{"gitId":"-"},"content":""},{"lineNumber":781,"author":{"gitId":"-"},"content":"    component.ngOnInit();"},{"lineNumber":782,"author":{"gitId":"-"},"content":""},{"lineNumber":783,"author":{"gitId":"-"},"content":"    expect(navSpy).toHaveBeenCalledTimes(1);"},{"lineNumber":784,"author":{"gitId":"-"},"content":"    expect(navSpy).toHaveBeenLastCalledWith(\u0027/web/front\u0027,"},{"lineNumber":785,"author":{"gitId":"-"},"content":"        `You are trying to access TEAMMATES using the Google account user-id, which"},{"lineNumber":786,"author":{"gitId":"-"},"content":"                        is not linked to this TEAMMATES account. If you used a different Google account to"},{"lineNumber":787,"author":{"gitId":"-"},"content":"                        join/access TEAMMATES before, please use that Google account to access TEAMMATES. If you"},{"lineNumber":788,"author":{"gitId":"-"},"content":"                        cannot remember which Google account you used before, please email us at"},{"lineNumber":789,"author":{"gitId":"-"},"content":"                        ${environment.supportEmail} for help.`);"},{"lineNumber":790,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":791,"author":{"gitId":"-"},"content":""},{"lineNumber":792,"author":{"gitId":"-"},"content":"  it(\u0027should deny unallowed access with invalid reg key\u0027, () \u003d\u003e {"},{"lineNumber":793,"author":{"gitId":"-"},"content":"    const testValidity: RegkeyValidity \u003d {"},{"lineNumber":794,"author":{"gitId":"-"},"content":"      isAllowedAccess: false,"},{"lineNumber":795,"author":{"gitId":"-"},"content":"      isUsed: false,"},{"lineNumber":796,"author":{"gitId":"-"},"content":"      isValid: false,"},{"lineNumber":797,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":798,"author":{"gitId":"-"},"content":"    jest.spyOn(authService, \u0027getAuthUser\u0027).mockReturnValue(of(testInfo));"},{"lineNumber":799,"author":{"gitId":"-"},"content":"    jest.spyOn(authService, \u0027getAuthRegkeyValidity\u0027).mockReturnValue(of(testValidity));"},{"lineNumber":800,"author":{"gitId":"-"},"content":"    const navSpy: SpyInstance \u003d jest.spyOn(navService, \u0027navigateWithErrorMessage\u0027).mockImplementation();"},{"lineNumber":801,"author":{"gitId":"-"},"content":""},{"lineNumber":802,"author":{"gitId":"-"},"content":"    component.ngOnInit();"},{"lineNumber":803,"author":{"gitId":"-"},"content":""},{"lineNumber":804,"author":{"gitId":"-"},"content":"    expect(navSpy).toHaveBeenCalledTimes(1);"},{"lineNumber":805,"author":{"gitId":"-"},"content":"    expect(navSpy).toHaveBeenLastCalledWith(\u0027/web/front\u0027,"},{"lineNumber":806,"author":{"gitId":"-"},"content":"        \u0027You are not authorized to view this page.\u0027);"},{"lineNumber":807,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":808,"author":{"gitId":"-"},"content":""},{"lineNumber":809,"author":{"gitId":"-"},"content":"  it(\u0027should load a student name\u0027, () \u003d\u003e {"},{"lineNumber":810,"author":{"gitId":"-"},"content":"    component.intent \u003d Intent.STUDENT_SUBMISSION;"},{"lineNumber":811,"author":{"gitId":"-"},"content":"    jest.spyOn(studentService, \u0027getStudent\u0027).mockReturnValue(of(testStudent));"},{"lineNumber":812,"author":{"gitId":"-"},"content":"    component.loadPersonName();"},{"lineNumber":813,"author":{"gitId":"-"},"content":"    expect(component.personName).toEqual(testStudent.name);"},{"lineNumber":814,"author":{"gitId":"-"},"content":"    expect(component.personEmail).toEqual(testStudent.email);"},{"lineNumber":815,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":816,"author":{"gitId":"-"},"content":""},{"lineNumber":817,"author":{"gitId":"-"},"content":"  it(\u0027should load an instructor name\u0027, () \u003d\u003e {"},{"lineNumber":818,"author":{"gitId":"-"},"content":"    component.intent \u003d Intent.INSTRUCTOR_SUBMISSION;"},{"lineNumber":819,"author":{"gitId":"-"},"content":"    jest.spyOn(instructorService, \u0027getInstructor\u0027).mockReturnValue(of(testInstructor));"},{"lineNumber":820,"author":{"gitId":"-"},"content":"    component.loadPersonName();"},{"lineNumber":821,"author":{"gitId":"-"},"content":"    expect(component.personName).toEqual(testInstructor.name);"},{"lineNumber":822,"author":{"gitId":"-"},"content":"    expect(component.personEmail).toEqual(testInstructor.email);"},{"lineNumber":823,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":824,"author":{"gitId":"-"},"content":""},{"lineNumber":825,"author":{"gitId":"-"},"content":"  it(\u0027should join course for unregistered student\u0027, () \u003d\u003e {"},{"lineNumber":826,"author":{"gitId":"-"},"content":"    const navSpy: SpyInstance \u003d jest.spyOn(navService, \u0027navigateByURL\u0027).mockImplementation();"},{"lineNumber":827,"author":{"gitId":"-"},"content":"    component.joinCourseForUnregisteredEntity();"},{"lineNumber":828,"author":{"gitId":"-"},"content":"    expect(navSpy).toHaveBeenCalledTimes(1);"},{"lineNumber":829,"author":{"gitId":"-"},"content":"    expect(navSpy).toHaveBeenLastCalledWith(\u0027/web/join\u0027,"},{"lineNumber":830,"author":{"gitId":"-"},"content":"        { entitytype: \u0027student\u0027, key: testQueryParams.key });"},{"lineNumber":831,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":832,"author":{"gitId":"-"},"content":""},{"lineNumber":833,"author":{"gitId":"-"},"content":"  it(\u0027should load an open feedback session\u0027, () \u003d\u003e {"},{"lineNumber":834,"author":{"gitId":"-"},"content":"    const fsSpy: SpyInstance \u003d jest.spyOn(feedbackSessionsService, \u0027getFeedbackSession\u0027)"},{"lineNumber":835,"author":{"gitId":"-"},"content":"        .mockReturnValue(of(testOpenFeedbackSession));"},{"lineNumber":836,"author":{"gitId":"-"},"content":"    const modalSpy: SpyInstance \u003d jest.spyOn(simpleModalService, \u0027openInformationModal\u0027).mockImplementation();"},{"lineNumber":837,"author":{"gitId":"-"},"content":""},{"lineNumber":838,"author":{"gitId":"-"},"content":"    component.loadFeedbackSession(false, testInfo);"},{"lineNumber":839,"author":{"gitId":"-"},"content":""},{"lineNumber":840,"author":{"gitId":"-"},"content":"    expect(fsSpy).toHaveBeenCalledTimes(1);"},{"lineNumber":841,"author":{"gitId":"-"},"content":"    expect(fsSpy).toHaveBeenLastCalledWith(getFeedbackSessionArgs);"},{"lineNumber":842,"author":{"gitId":"-"},"content":"    expect(modalSpy).toHaveBeenCalledTimes(1);"},{"lineNumber":843,"author":{"gitId":"-"},"content":"    expect(modalSpy).toHaveBeenLastCalledWith(\u0027Feedback Session Will Be Closing Soon!\u0027,"},{"lineNumber":844,"author":{"gitId":"-"},"content":"        SimpleModalType.WARNING, \u0027Warning: you have less than 15 minutes before the submission deadline expires!\u0027);"},{"lineNumber":845,"author":{"gitId":"-"},"content":"    expect(component.feedbackSessionInstructions).toEqual(testOpenFeedbackSession.instructions);"},{"lineNumber":846,"author":{"gitId":"-"},"content":"    expect(component.feedbackSessionSubmissionStatus).toEqual(testOpenFeedbackSession.submissionStatus);"},{"lineNumber":847,"author":{"gitId":"-"},"content":"    expect(component.feedbackSessionTimezone).toEqual(testOpenFeedbackSession.timeZone);"},{"lineNumber":848,"author":{"gitId":"-"},"content":"    expect(component.isSubmissionFormsDisabled).toEqual(false);"},{"lineNumber":849,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":850,"author":{"gitId":"-"},"content":""},{"lineNumber":851,"author":{"gitId":"-"},"content":"  it(\u0027should load a closed feedback session\u0027, () \u003d\u003e {"},{"lineNumber":852,"author":{"gitId":"-"},"content":"    const testClosedFeedbackSession: FeedbackSession \u003d deepCopy(testOpenFeedbackSession);"},{"lineNumber":853,"author":{"gitId":"-"},"content":"    testClosedFeedbackSession.submissionStatus \u003d FeedbackSessionSubmissionStatus.CLOSED;"},{"lineNumber":854,"author":{"gitId":"-"},"content":"    const fsSpy: SpyInstance \u003d jest.spyOn(feedbackSessionsService, \u0027getFeedbackSession\u0027)"},{"lineNumber":855,"author":{"gitId":"-"},"content":"        .mockReturnValue(of(testClosedFeedbackSession));"},{"lineNumber":856,"author":{"gitId":"-"},"content":"    const modalSpy: SpyInstance \u003d jest.spyOn(simpleModalService, \u0027openInformationModal\u0027).mockImplementation();"},{"lineNumber":857,"author":{"gitId":"-"},"content":""},{"lineNumber":858,"author":{"gitId":"-"},"content":"    component.loadFeedbackSession(false, testInfo);"},{"lineNumber":859,"author":{"gitId":"-"},"content":""},{"lineNumber":860,"author":{"gitId":"-"},"content":"    expect(fsSpy).toHaveBeenCalledTimes(1);"},{"lineNumber":861,"author":{"gitId":"-"},"content":"    expect(fsSpy).toHaveBeenLastCalledWith(getFeedbackSessionArgs);"},{"lineNumber":862,"author":{"gitId":"-"},"content":"    expect(modalSpy).toHaveBeenCalledTimes(1);"},{"lineNumber":863,"author":{"gitId":"-"},"content":"    expect(modalSpy).toHaveBeenLastCalledWith(\u0027Feedback Session Closed\u0027, SimpleModalType.WARNING, expect.anything());"},{"lineNumber":864,"author":{"gitId":"-"},"content":"    expect(component.feedbackSessionInstructions).toEqual(testClosedFeedbackSession.instructions);"},{"lineNumber":865,"author":{"gitId":"-"},"content":"    expect(component.feedbackSessionSubmissionStatus).toEqual(testClosedFeedbackSession.submissionStatus);"},{"lineNumber":866,"author":{"gitId":"-"},"content":"    expect(component.feedbackSessionTimezone).toEqual(testClosedFeedbackSession.timeZone);"},{"lineNumber":867,"author":{"gitId":"-"},"content":"    expect(component.isSubmissionFormsDisabled).toEqual(true);"},{"lineNumber":868,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":869,"author":{"gitId":"-"},"content":""},{"lineNumber":870,"author":{"gitId":"-"},"content":"  it(\u0027should load a visible not open feedback session\u0027, () \u003d\u003e {"},{"lineNumber":871,"author":{"gitId":"-"},"content":"    const testVisibleNotOpenFeedbackSession: FeedbackSession \u003d deepCopy(testOpenFeedbackSession);"},{"lineNumber":872,"author":{"gitId":"-"},"content":"    testVisibleNotOpenFeedbackSession.submissionStatus \u003d FeedbackSessionSubmissionStatus.VISIBLE_NOT_OPEN;"},{"lineNumber":873,"author":{"gitId":"-"},"content":"    const fsSpy: SpyInstance \u003d jest.spyOn(feedbackSessionsService, \u0027getFeedbackSession\u0027)"},{"lineNumber":874,"author":{"gitId":"-"},"content":"        .mockReturnValue(of(testVisibleNotOpenFeedbackSession));"},{"lineNumber":875,"author":{"gitId":"-"},"content":"    const modalSpy: SpyInstance \u003d jest.spyOn(simpleModalService, \u0027openInformationModal\u0027).mockImplementation();"},{"lineNumber":876,"author":{"gitId":"-"},"content":""},{"lineNumber":877,"author":{"gitId":"-"},"content":"    component.loadFeedbackSession(false, testInfo);"},{"lineNumber":878,"author":{"gitId":"-"},"content":""},{"lineNumber":879,"author":{"gitId":"-"},"content":"    expect(fsSpy).toHaveBeenCalledTimes(1);"},{"lineNumber":880,"author":{"gitId":"-"},"content":"    expect(fsSpy).toHaveBeenLastCalledWith(getFeedbackSessionArgs);"},{"lineNumber":881,"author":{"gitId":"-"},"content":"    expect(modalSpy).toHaveBeenCalledTimes(1);"},{"lineNumber":882,"author":{"gitId":"-"},"content":"    expect(modalSpy).toHaveBeenLastCalledWith(\u0027Feedback Session Not Open\u0027, SimpleModalType.WARNING, expect.anything());"},{"lineNumber":883,"author":{"gitId":"-"},"content":"    expect(component.feedbackSessionInstructions).toEqual(testVisibleNotOpenFeedbackSession.instructions);"},{"lineNumber":884,"author":{"gitId":"-"},"content":"    expect(component.feedbackSessionSubmissionStatus).toEqual(testVisibleNotOpenFeedbackSession.submissionStatus);"},{"lineNumber":885,"author":{"gitId":"-"},"content":"    expect(component.feedbackSessionTimezone).toEqual(testVisibleNotOpenFeedbackSession.timeZone);"},{"lineNumber":886,"author":{"gitId":"-"},"content":"    expect(component.isSubmissionFormsDisabled).toEqual(true);"},{"lineNumber":887,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":888,"author":{"gitId":"-"},"content":""},{"lineNumber":889,"author":{"gitId":"-"},"content":"  it(\u0027should show session not found modal when loading non-existent feedback session\u0027, () \u003d\u003e {"},{"lineNumber":890,"author":{"gitId":"-"},"content":"    jest.spyOn(feedbackSessionsService, \u0027getFeedbackSession\u0027).mockReturnValue(throwError(() \u003d\u003e ({"},{"lineNumber":891,"author":{"gitId":"-"},"content":"      error: { message: \u0027This is an error\u0027 },"},{"lineNumber":892,"author":{"gitId":"-"},"content":"      status: 404,"},{"lineNumber":893,"author":{"gitId":"-"},"content":"    })));"},{"lineNumber":894,"author":{"gitId":"-"},"content":"    const modalSpy: SpyInstance \u003d jest.spyOn(simpleModalService, \u0027openInformationModal\u0027).mockImplementation();"},{"lineNumber":895,"author":{"gitId":"-"},"content":""},{"lineNumber":896,"author":{"gitId":"-"},"content":"    component.loadFeedbackSession(false, testInfo);"},{"lineNumber":897,"author":{"gitId":"-"},"content":""},{"lineNumber":898,"author":{"gitId":"-"},"content":"    expect(modalSpy).toHaveBeenCalledTimes(1);"},{"lineNumber":899,"author":{"gitId":"-"},"content":"    expect(modalSpy).toHaveBeenLastCalledWith(\u0027Feedback Session Does Not Exist!\u0027, SimpleModalType.DANGER,"},{"lineNumber":900,"author":{"gitId":"-"},"content":"        \u0027The session does not exist (most likely deleted by an instructor after the submission link was sent).\u0027,"},{"lineNumber":901,"author":{"gitId":"-"},"content":"        { onClosed: expect.any(Function) }, { backdrop: \u0027static\u0027 });"},{"lineNumber":902,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":903,"author":{"gitId":"-"},"content":""},{"lineNumber":904,"author":{"gitId":"-"},"content":"  it(\u0027should show session not visible modal when loading non-viewable feedback session\u0027, () \u003d\u003e {"},{"lineNumber":905,"author":{"gitId":"-"},"content":"    jest.spyOn(feedbackSessionsService, \u0027getFeedbackSession\u0027).mockReturnValue(throwError(() \u003d\u003e ({"},{"lineNumber":906,"author":{"gitId":"-"},"content":"      error: { message: \u0027This is an error\u0027 },"},{"lineNumber":907,"author":{"gitId":"-"},"content":"      status: 403,"},{"lineNumber":908,"author":{"gitId":"-"},"content":"    })));"},{"lineNumber":909,"author":{"gitId":"-"},"content":"    const modalSpy: SpyInstance \u003d jest.spyOn(simpleModalService, \u0027openInformationModal\u0027).mockImplementation();"},{"lineNumber":910,"author":{"gitId":"-"},"content":""},{"lineNumber":911,"author":{"gitId":"-"},"content":"    component.loadFeedbackSession(false, testInfo);"},{"lineNumber":912,"author":{"gitId":"-"},"content":""},{"lineNumber":913,"author":{"gitId":"-"},"content":"    expect(modalSpy).toHaveBeenCalledTimes(1);"},{"lineNumber":914,"author":{"gitId":"-"},"content":"    expect(modalSpy).toHaveBeenLastCalledWith(\u0027Not Authorised To Access!\u0027, SimpleModalType.DANGER, \u0027This is an error\u0027,"},{"lineNumber":915,"author":{"gitId":"-"},"content":"        { onClosed: expect.any(Function) }, { backdrop: \u0027static\u0027 });"},{"lineNumber":916,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":917,"author":{"gitId":"-"},"content":""},{"lineNumber":918,"author":{"gitId":"-"},"content":"  it(\u0027should load feedback questions\u0027, () \u003d\u003e {"},{"lineNumber":919,"author":{"gitId":"-"},"content":"    const testFeedbackQuestions: FeedbackQuestions \u003d {"},{"lineNumber":920,"author":{"gitId":"-"},"content":"      questions: ["},{"lineNumber":921,"author":{"gitId":"-"},"content":"        {"},{"lineNumber":922,"author":{"gitId":"-"},"content":"          feedbackQuestionId: testMcqQuestionSubmissionForm2.feedbackQuestionId,"},{"lineNumber":923,"author":{"gitId":"-"},"content":"          questionNumber: testMcqQuestionSubmissionForm2.questionNumber,"},{"lineNumber":924,"author":{"gitId":"-"},"content":"          questionBrief: testMcqQuestionSubmissionForm2.questionBrief,"},{"lineNumber":925,"author":{"gitId":"-"},"content":"          questionDescription: testMcqQuestionSubmissionForm2.questionDescription,"},{"lineNumber":926,"author":{"gitId":"-"},"content":"          questionDetails: testMcqQuestionSubmissionForm2.questionDetails,"},{"lineNumber":927,"author":{"gitId":"-"},"content":"          questionType: testMcqQuestionSubmissionForm2.questionType,"},{"lineNumber":928,"author":{"gitId":"-"},"content":"          giverType: testMcqQuestionSubmissionForm2.giverType,"},{"lineNumber":929,"author":{"gitId":"-"},"content":"          recipientType: testMcqQuestionSubmissionForm2.recipientType,"},{"lineNumber":930,"author":{"gitId":"-"},"content":"          numberOfEntitiesToGiveFeedbackToSetting:"},{"lineNumber":931,"author":{"gitId":"-"},"content":"            testMcqQuestionSubmissionForm2.numberOfEntitiesToGiveFeedbackToSetting,"},{"lineNumber":932,"author":{"gitId":"-"},"content":"          customNumberOfEntitiesToGiveFeedbackTo: testMcqQuestionSubmissionForm2.customNumberOfEntitiesToGiveFeedbackTo,"},{"lineNumber":933,"author":{"gitId":"-"},"content":"          showResponsesTo: testMcqQuestionSubmissionForm2.showResponsesTo,"},{"lineNumber":934,"author":{"gitId":"-"},"content":"          showGiverNameTo: testMcqQuestionSubmissionForm2.showGiverNameTo,"},{"lineNumber":935,"author":{"gitId":"-"},"content":"          showRecipientNameTo: testMcqQuestionSubmissionForm2.showRecipientNameTo,"},{"lineNumber":936,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":937,"author":{"gitId":"-"},"content":"      ],"},{"lineNumber":938,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":939,"author":{"gitId":"-"},"content":""},{"lineNumber":940,"author":{"gitId":"-"},"content":"    const getQuestionsSpy: SpyInstance \u003d jest.spyOn(feedbackQuestionsService, \u0027getFeedbackQuestions\u0027)"},{"lineNumber":941,"author":{"gitId":"-"},"content":"        .mockReturnValue(of(testFeedbackQuestions));"},{"lineNumber":942,"author":{"gitId":"-"},"content":""},{"lineNumber":943,"author":{"gitId":"-"},"content":"    component.loadFeedbackQuestions();"},{"lineNumber":944,"author":{"gitId":"-"},"content":""},{"lineNumber":945,"author":{"gitId":"-"},"content":"    expect(getQuestionsSpy).toHaveBeenLastCalledWith(getFeedbackSessionArgs);"},{"lineNumber":946,"author":{"gitId":"-"},"content":"    expect(component.questionSubmissionForms.length).toEqual(1);"},{"lineNumber":947,"author":{"gitId":"-"},"content":"    expect(component.questionSubmissionForms[0]).toEqual(testMcqQuestionSubmissionForm2);"},{"lineNumber":948,"author":{"gitId":"-"},"content":"    expect(component.questionsNeedingSubmission.length).toEqual(0);"},{"lineNumber":949,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":950,"author":{"gitId":"-"},"content":""},{"lineNumber":951,"author":{"gitId":"-"},"content":"  it(\u0027should load the recipients and responses of a question if not yet loaded\u0027, () \u003d\u003e {"},{"lineNumber":952,"author":{"gitId":"-"},"content":"    const testFeedbackQuestionRecipients: FeedbackQuestionRecipients \u003d {"},{"lineNumber":953,"author":{"gitId":"-"},"content":"      recipients: ["},{"lineNumber":954,"author":{"gitId":"-"},"content":"        {"},{"lineNumber":955,"author":{"gitId":"-"},"content":"          name: \u0027Barry Harris\u0027,"},{"lineNumber":956,"author":{"gitId":"-"},"content":"          identifier: \u0027barry-harris-id\u0027,"},{"lineNumber":957,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":958,"author":{"gitId":"-"},"content":"        {"},{"lineNumber":959,"author":{"gitId":"-"},"content":"          name: \u0027Gene Harris\u0027,"},{"lineNumber":960,"author":{"gitId":"-"},"content":"          identifier: \u0027gene-harris-id\u0027,"},{"lineNumber":961,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":962,"author":{"gitId":"-"},"content":"      ],"},{"lineNumber":963,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":964,"author":{"gitId":"-"},"content":"    const testExistingResponses: FeedbackResponses \u003d {"},{"lineNumber":965,"author":{"gitId":"-"},"content":"      responses: [testResponse1, testResponse2],"},{"lineNumber":966,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":967,"author":{"gitId":"-"},"content":""},{"lineNumber":968,"author":{"gitId":"-"},"content":"    const loadRecipientsSpy: SpyInstance \u003d jest.spyOn(feedbackQuestionsService, \u0027loadFeedbackQuestionRecipients\u0027)"},{"lineNumber":969,"author":{"gitId":"-"},"content":"        .mockReturnValue(of(testFeedbackQuestionRecipients));"},{"lineNumber":970,"author":{"gitId":"-"},"content":"    const getResponseSpy: SpyInstance \u003d jest.spyOn(feedbackResponsesService, \u0027getFeedbackResponse\u0027)"},{"lineNumber":971,"author":{"gitId":"-"},"content":"        .mockReturnValue(of(testExistingResponses));"},{"lineNumber":972,"author":{"gitId":"-"},"content":""},{"lineNumber":973,"author":{"gitId":"-"},"content":"    component.questionSubmissionForms \u003d [testMcqQuestionSubmissionForm2];"},{"lineNumber":974,"author":{"gitId":"-"},"content":"    component.loadRecipientsAndResponses({ visible: true }, testMcqQuestionSubmissionForm2);"},{"lineNumber":975,"author":{"gitId":"-"},"content":""},{"lineNumber":976,"author":{"gitId":"-"},"content":"    expect(loadRecipientsSpy).toHaveBeenLastCalledWith({"},{"lineNumber":977,"author":{"gitId":"-"},"content":"      intent: \u0027STUDENT_SUBMISSION\u0027,"},{"lineNumber":978,"author":{"gitId":"-"},"content":"      key: \u0027reg-key\u0027,"},{"lineNumber":979,"author":{"gitId":"-"},"content":"      moderatedPerson: \u0027\u0027,"},{"lineNumber":980,"author":{"gitId":"-"},"content":"      previewAs: \u0027\u0027,"},{"lineNumber":981,"author":{"gitId":"-"},"content":"      questionId: testMcqQuestionSubmissionForm2.feedbackQuestionId,"},{"lineNumber":982,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":983,"author":{"gitId":"-"},"content":"    expect(getResponseSpy).toHaveBeenLastCalledWith({"},{"lineNumber":984,"author":{"gitId":"-"},"content":"      intent: \u0027STUDENT_SUBMISSION\u0027,"},{"lineNumber":985,"author":{"gitId":"-"},"content":"      key: \u0027reg-key\u0027,"},{"lineNumber":986,"author":{"gitId":"-"},"content":"      moderatedPerson: \u0027\u0027,"},{"lineNumber":987,"author":{"gitId":"-"},"content":"      questionId: testMcqQuestionSubmissionForm2.feedbackQuestionId,"},{"lineNumber":988,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":989,"author":{"gitId":"-"},"content":"    expect(testMcqQuestionSubmissionForm2.isLoading).toBe(false);"},{"lineNumber":990,"author":{"gitId":"-"},"content":"    expect(testMcqQuestionSubmissionForm2.isLoaded).toBe(true);"},{"lineNumber":991,"author":{"gitId":"-"},"content":"    expect(testMcqQuestionSubmissionForm2.recipientList).toEqual(["},{"lineNumber":992,"author":{"gitId":"-"},"content":"      {"},{"lineNumber":993,"author":{"gitId":"-"},"content":"        recipientName: \u0027Barry Harris\u0027,"},{"lineNumber":994,"author":{"gitId":"-"},"content":"        recipientIdentifier: \u0027barry-harris-id\u0027,"},{"lineNumber":995,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":996,"author":{"gitId":"-"},"content":"      {"},{"lineNumber":997,"author":{"gitId":"-"},"content":"        recipientName: \u0027Gene Harris\u0027,"},{"lineNumber":998,"author":{"gitId":"-"},"content":"        recipientIdentifier: \u0027gene-harris-id\u0027,"},{"lineNumber":999,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":1000,"author":{"gitId":"-"},"content":"    ]);"},{"lineNumber":1001,"author":{"gitId":"-"},"content":"    expect(testMcqQuestionSubmissionForm2.recipientSubmissionForms).toEqual(["},{"lineNumber":1002,"author":{"gitId":"-"},"content":"      testMcqRecipientSubmissionForm3, testMcqRecipientSubmissionForm4,"},{"lineNumber":1003,"author":{"gitId":"-"},"content":"    ]);"},{"lineNumber":1004,"author":{"gitId":"-"},"content":"    expect(component.questionsNeedingSubmission.length).toEqual(1);"},{"lineNumber":1005,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":1006,"author":{"gitId":"-"},"content":""},{"lineNumber":1007,"author":{"gitId":"-"},"content":"  it(\u0027should not load the recipients and responses of a question if already loaded\u0027, () \u003d\u003e {"},{"lineNumber":1008,"author":{"gitId":"-"},"content":"    const loadRecipientsSpy: SpyInstance \u003d jest.spyOn(feedbackQuestionsService, \u0027loadFeedbackQuestionRecipients\u0027);"},{"lineNumber":1009,"author":{"gitId":"-"},"content":"    const getResponseSpy: SpyInstance \u003d jest.spyOn(feedbackResponsesService, \u0027getFeedbackResponse\u0027);"},{"lineNumber":1010,"author":{"gitId":"-"},"content":""},{"lineNumber":1011,"author":{"gitId":"-"},"content":"    testMcqQuestionSubmissionForm2.isLoaded \u003d true;"},{"lineNumber":1012,"author":{"gitId":"-"},"content":"    component.loadRecipientsAndResponses({ visible: true }, testMcqQuestionSubmissionForm2);"},{"lineNumber":1013,"author":{"gitId":"-"},"content":""},{"lineNumber":1014,"author":{"gitId":"-"},"content":"    testMsqQuestionSubmissionForm.isLoading \u003d true;"},{"lineNumber":1015,"author":{"gitId":"-"},"content":"    component.loadRecipientsAndResponses({ visible: true }, testMsqQuestionSubmissionForm);"},{"lineNumber":1016,"author":{"gitId":"-"},"content":""},{"lineNumber":1017,"author":{"gitId":"-"},"content":"    expect(loadRecipientsSpy).not.toHaveBeenCalled();"},{"lineNumber":1018,"author":{"gitId":"-"},"content":"    expect(getResponseSpy).not.toHaveBeenCalled();"},{"lineNumber":1019,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":1020,"author":{"gitId":"-"},"content":""},{"lineNumber":1021,"author":{"gitId":"-"},"content":"  it(\u0027should not load the recipients and responses of a question if the event is not correct\u0027, () \u003d\u003e {"},{"lineNumber":1022,"author":{"gitId":"-"},"content":"    const loadRecipientsSpy: SpyInstance \u003d jest.spyOn(feedbackQuestionsService, \u0027loadFeedbackQuestionRecipients\u0027);"},{"lineNumber":1023,"author":{"gitId":"-"},"content":"    const getResponseSpy: SpyInstance \u003d jest.spyOn(feedbackResponsesService, \u0027getFeedbackResponse\u0027);"},{"lineNumber":1024,"author":{"gitId":"-"},"content":""},{"lineNumber":1025,"author":{"gitId":"-"},"content":"    component.loadRecipientsAndResponses(null, testMcqQuestionSubmissionForm2);"},{"lineNumber":1026,"author":{"gitId":"-"},"content":"    component.loadRecipientsAndResponses({}, testMcqQuestionSubmissionForm2);"},{"lineNumber":1027,"author":{"gitId":"-"},"content":"    component.loadRecipientsAndResponses({ visible: false }, testMsqQuestionSubmissionForm);"},{"lineNumber":1028,"author":{"gitId":"-"},"content":""},{"lineNumber":1029,"author":{"gitId":"-"},"content":"    expect(loadRecipientsSpy).not.toHaveBeenCalled();"},{"lineNumber":1030,"author":{"gitId":"-"},"content":"    expect(getResponseSpy).not.toHaveBeenCalled();"},{"lineNumber":1031,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":1032,"author":{"gitId":"-"},"content":""},{"lineNumber":1033,"author":{"gitId":"-"},"content":"  it(\u0027should check that there are no responses to submit\u0027, () \u003d\u003e {"},{"lineNumber":1034,"author":{"gitId":"-"},"content":"    const testSubmissionForm: QuestionSubmissionFormModel \u003d deepCopy(testTextQuestionSubmissionForm);"},{"lineNumber":1035,"author":{"gitId":"-"},"content":"    testSubmissionForm.recipientSubmissionForms \u003d [];"},{"lineNumber":1036,"author":{"gitId":"-"},"content":"    component.questionSubmissionForms \u003d [testSubmissionForm];"},{"lineNumber":1037,"author":{"gitId":"-"},"content":"    expect(component.questionsNeedingSubmission.length).toEqual(0);"},{"lineNumber":1038,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":1039,"author":{"gitId":"-"},"content":""},{"lineNumber":1040,"author":{"gitId":"-"},"content":"  it(\u0027should save feedback responses\u0027, () \u003d\u003e {"},{"lineNumber":1041,"author":{"gitId":"-"},"content":"    const mockModalRef: any \u003d { componentInstance: {} };"},{"lineNumber":1042,"author":{"gitId":"-"},"content":"    const testResponseDetails1: any \u003d deepCopy(testMcqRecipientSubmissionForm.responseDetails);"},{"lineNumber":1043,"author":{"gitId":"-"},"content":"    // leave question unanswered"},{"lineNumber":1044,"author":{"gitId":"-"},"content":"    const testResponseDetails2: FeedbackTextResponseDetails \u003d { answer: \u0027\u0027, questionType: FeedbackQuestionType.TEXT };"},{"lineNumber":1045,"author":{"gitId":"-"},"content":"    const testQuestionSubmissionForm1: QuestionSubmissionFormModel \u003d deepCopy(testMcqQuestionSubmissionForm);"},{"lineNumber":1046,"author":{"gitId":"-"},"content":"    const testQuestionSubmissionForm2: QuestionSubmissionFormModel \u003d deepCopy(testTextQuestionSubmissionForm);"},{"lineNumber":1047,"author":{"gitId":"-"},"content":"    testQuestionSubmissionForm1.recipientSubmissionForms[0].responseDetails \u003d testResponseDetails1;"},{"lineNumber":1048,"author":{"gitId":"-"},"content":"    testQuestionSubmissionForm2.recipientSubmissionForms[0].responseDetails \u003d testResponseDetails2;"},{"lineNumber":1049,"author":{"gitId":"-"},"content":"    component.questionSubmissionForms \u003d [testQuestionSubmissionForm1, testQuestionSubmissionForm2];"},{"lineNumber":1050,"author":{"gitId":"-"},"content":""},{"lineNumber":1051,"author":{"gitId":"-"},"content":"    const responseSpy: SpyInstance \u003d jest.spyOn(feedbackResponsesService, \u0027submitFeedbackResponses\u0027)"},{"lineNumber":1052,"author":{"gitId":"-"},"content":"        .mockImplementation((id: string) \u003d\u003e {"},{"lineNumber":1053,"author":{"gitId":"-"},"content":"          if (id \u003d\u003d\u003d testQuestionSubmissionForm1.feedbackQuestionId) {"},{"lineNumber":1054,"author":{"gitId":"-"},"content":"            return of({ responses: [testResponse1], requestId: \u002710\u0027 });"},{"lineNumber":1055,"author":{"gitId":"-"},"content":"          }"},{"lineNumber":1056,"author":{"gitId":"-"},"content":"          return of({ responses: [testResponse2], requestId: \u002720\u0027 });"},{"lineNumber":1057,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":1058,"author":{"gitId":"-"},"content":"    jest.spyOn(feedbackResponseCommentService, \u0027createComment\u0027).mockReturnValue(of(testComment));"},{"lineNumber":1059,"author":{"gitId":"-"},"content":"    jest.spyOn(feedbackResponseCommentService, \u0027updateComment\u0027).mockReturnValue(of(testComment));"},{"lineNumber":1060,"author":{"gitId":"-"},"content":"    jest.spyOn(ngbModal, \u0027open\u0027).mockReturnValue(mockModalRef);"},{"lineNumber":1061,"author":{"gitId":"-"},"content":""},{"lineNumber":1062,"author":{"gitId":"-"},"content":"    component.saveFeedbackResponses(component.questionSubmissionForms);"},{"lineNumber":1063,"author":{"gitId":"-"},"content":""},{"lineNumber":1064,"author":{"gitId":"-"},"content":"    expect(responseSpy).toHaveBeenCalledTimes(2);"},{"lineNumber":1065,"author":{"gitId":"-"},"content":"    expect(responseSpy).toHaveBeenNthCalledWith(1, \u0027feedback-question-id-mcq\u0027, {"},{"lineNumber":1066,"author":{"gitId":"-"},"content":"      responses: [{"},{"lineNumber":1067,"author":{"gitId":"-"},"content":"        recipient: testMcqRecipientSubmissionForm.recipientIdentifier,"},{"lineNumber":1068,"author":{"gitId":"-"},"content":"        responseDetails: testResponseDetails1,"},{"lineNumber":1069,"author":{"gitId":"-"},"content":"      }],"},{"lineNumber":1070,"author":{"gitId":"-"},"content":"    }, {"},{"lineNumber":1071,"author":{"gitId":"-"},"content":"      intent: \u0027STUDENT_SUBMISSION\u0027,"},{"lineNumber":1072,"author":{"gitId":"-"},"content":"      key: \u0027reg-key\u0027,"},{"lineNumber":1073,"author":{"gitId":"-"},"content":"      moderatedperson: \u0027\u0027,"},{"lineNumber":1074,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":1075,"author":{"gitId":"-"},"content":"    expect(responseSpy).toHaveBeenLastCalledWith(\u0027feedback-question-id-text\u0027, {"},{"lineNumber":1076,"author":{"gitId":"-"},"content":"      responses: [], // do not call for empty response details"},{"lineNumber":1077,"author":{"gitId":"-"},"content":"    }, {"},{"lineNumber":1078,"author":{"gitId":"-"},"content":"      intent: \u0027STUDENT_SUBMISSION\u0027,"},{"lineNumber":1079,"author":{"gitId":"-"},"content":"      key: \u0027reg-key\u0027,"},{"lineNumber":1080,"author":{"gitId":"-"},"content":"      moderatedperson: \u0027\u0027,"},{"lineNumber":1081,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":1082,"author":{"gitId":"-"},"content":""},{"lineNumber":1083,"author":{"gitId":"-"},"content":"    expect(mockModalRef.componentInstance.requestIds).toEqual({"},{"lineNumber":1084,"author":{"gitId":"-"},"content":"      \u0027feedback-question-id-mcq\u0027: \u002710\u0027,"},{"lineNumber":1085,"author":{"gitId":"-"},"content":"      \u0027feedback-question-id-text\u0027: \u002720\u0027,"},{"lineNumber":1086,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":1087,"author":{"gitId":"-"},"content":"    expect(mockModalRef.componentInstance.questions).toEqual(["},{"lineNumber":1088,"author":{"gitId":"-"},"content":"      testQuestionSubmissionForm1,"},{"lineNumber":1089,"author":{"gitId":"-"},"content":"      testQuestionSubmissionForm2,"},{"lineNumber":1090,"author":{"gitId":"-"},"content":"    ]);"},{"lineNumber":1091,"author":{"gitId":"-"},"content":"    expect(mockModalRef.componentInstance.answers).toEqual({"},{"lineNumber":1092,"author":{"gitId":"-"},"content":"      \u0027feedback-question-id-mcq\u0027: [testResponse1],"},{"lineNumber":1093,"author":{"gitId":"-"},"content":"      \u0027feedback-question-id-text\u0027: [testResponse2],"},{"lineNumber":1094,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":1095,"author":{"gitId":"-"},"content":"    expect(mockModalRef.componentInstance.notYetAnsweredQuestions).toHaveLength(1);"},{"lineNumber":1096,"author":{"gitId":"-"},"content":"    expect(mockModalRef.componentInstance.failToSaveQuestions).toEqual({});"},{"lineNumber":1097,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":1098,"author":{"gitId":"-"},"content":""},{"lineNumber":1099,"author":{"gitId":"-"},"content":"  it(\u0027should not save invalid feedback responses\u0027, () \u003d\u003e {"},{"lineNumber":1100,"author":{"gitId":"-"},"content":"    const mockModalRef: any \u003d { componentInstance: {} };"},{"lineNumber":1101,"author":{"gitId":"-"},"content":"    const testResponseDetails1: any \u003d deepCopy(testMcqRecipientSubmissionForm.responseDetails);"},{"lineNumber":1102,"author":{"gitId":"-"},"content":"    const testResponseDetails2: any \u003d deepCopy(testConstsumRecipientSubmissionForm.responseDetails);"},{"lineNumber":1103,"author":{"gitId":"-"},"content":"    const testQuestionSubmissionForm1: QuestionSubmissionFormModel \u003d deepCopy(testMcqQuestionSubmissionForm);"},{"lineNumber":1104,"author":{"gitId":"-"},"content":"    const testQuestionSubmissionForm2: QuestionSubmissionFormModel \u003d deepCopy(testConstsumQuestionSubmissionForm);"},{"lineNumber":1105,"author":{"gitId":"-"},"content":"    testQuestionSubmissionForm1.recipientSubmissionForms[0].responseDetails \u003d testResponseDetails1;"},{"lineNumber":1106,"author":{"gitId":"-"},"content":"    testQuestionSubmissionForm2.recipientSubmissionForms[0].responseDetails \u003d testResponseDetails2;"},{"lineNumber":1107,"author":{"gitId":"-"},"content":"    // invalid response"},{"lineNumber":1108,"author":{"gitId":"-"},"content":"    testQuestionSubmissionForm2.recipientSubmissionForms[0].isValid \u003d false;"},{"lineNumber":1109,"author":{"gitId":"-"},"content":"    component.questionSubmissionForms \u003d [testQuestionSubmissionForm1, testQuestionSubmissionForm2];"},{"lineNumber":1110,"author":{"gitId":"-"},"content":""},{"lineNumber":1111,"author":{"gitId":"-"},"content":"    const responseSpy: SpyInstance \u003d jest.spyOn(feedbackResponsesService, \u0027submitFeedbackResponses\u0027)"},{"lineNumber":1112,"author":{"gitId":"-"},"content":"        .mockImplementation(() \u003d\u003e {"},{"lineNumber":1113,"author":{"gitId":"-"},"content":"          return of({ responses: [testResponse1], requestId: \u002710\u0027 });"},{"lineNumber":1114,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":1115,"author":{"gitId":"-"},"content":"    jest.spyOn(feedbackResponseCommentService, \u0027createComment\u0027).mockReturnValue(of(testComment));"},{"lineNumber":1116,"author":{"gitId":"-"},"content":"    jest.spyOn(feedbackResponseCommentService, \u0027updateComment\u0027).mockReturnValue(of(testComment));"},{"lineNumber":1117,"author":{"gitId":"-"},"content":"    jest.spyOn(ngbModal, \u0027open\u0027).mockReturnValue(mockModalRef);"},{"lineNumber":1118,"author":{"gitId":"-"},"content":""},{"lineNumber":1119,"author":{"gitId":"-"},"content":"    component.saveFeedbackResponses(component.questionSubmissionForms);"},{"lineNumber":1120,"author":{"gitId":"-"},"content":""},{"lineNumber":1121,"author":{"gitId":"-"},"content":"    expect(responseSpy).toHaveBeenCalledTimes(1);"},{"lineNumber":1122,"author":{"gitId":"-"},"content":"    expect(responseSpy).toHaveBeenNthCalledWith(1, testQuestionSubmissionForm1.feedbackQuestionId, {"},{"lineNumber":1123,"author":{"gitId":"-"},"content":"      responses: [{"},{"lineNumber":1124,"author":{"gitId":"-"},"content":"        recipient: testMcqRecipientSubmissionForm.recipientIdentifier,"},{"lineNumber":1125,"author":{"gitId":"-"},"content":"        responseDetails: testResponseDetails1,"},{"lineNumber":1126,"author":{"gitId":"-"},"content":"      }],"},{"lineNumber":1127,"author":{"gitId":"-"},"content":"    }, {"},{"lineNumber":1128,"author":{"gitId":"-"},"content":"      intent: \u0027STUDENT_SUBMISSION\u0027,"},{"lineNumber":1129,"author":{"gitId":"-"},"content":"      key: \u0027reg-key\u0027,"},{"lineNumber":1130,"author":{"gitId":"-"},"content":"      moderatedperson: \u0027\u0027,"},{"lineNumber":1131,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":1132,"author":{"gitId":"-"},"content":""},{"lineNumber":1133,"author":{"gitId":"-"},"content":"    // only the valid response is saved"},{"lineNumber":1134,"author":{"gitId":"-"},"content":"    expect(mockModalRef.componentInstance.requestIds).toEqual({"},{"lineNumber":1135,"author":{"gitId":"-"},"content":"      [testQuestionSubmissionForm1.feedbackQuestionId]: \u002710\u0027,"},{"lineNumber":1136,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":1137,"author":{"gitId":"-"},"content":"    expect(mockModalRef.componentInstance.questions).toEqual(["},{"lineNumber":1138,"author":{"gitId":"-"},"content":"      testQuestionSubmissionForm1,"},{"lineNumber":1139,"author":{"gitId":"-"},"content":"      testQuestionSubmissionForm2,"},{"lineNumber":1140,"author":{"gitId":"-"},"content":"    ]);"},{"lineNumber":1141,"author":{"gitId":"-"},"content":"    expect(mockModalRef.componentInstance.answers).toEqual({"},{"lineNumber":1142,"author":{"gitId":"-"},"content":"      [testQuestionSubmissionForm1.feedbackQuestionId]: [testResponse1],"},{"lineNumber":1143,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":1144,"author":{"gitId":"-"},"content":"    expect(mockModalRef.componentInstance.failToSaveQuestions).toEqual({"},{"lineNumber":1145,"author":{"gitId":"-"},"content":"      [testQuestionSubmissionForm2.questionNumber]: \u0027Invalid responses provided. Please check question constraints.\u0027,"},{"lineNumber":1146,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":1147,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":1148,"author":{"gitId":"-"},"content":""},{"lineNumber":1149,"author":{"gitId":"-"},"content":"  it(\u0027should create comment request to create new comment when submission form has no original comment\u0027, () \u003d\u003e {"},{"lineNumber":1150,"author":{"gitId":"-"},"content":"    const testSubmissionForm: FeedbackResponseRecipientSubmissionFormModel \u003d deepCopy(testTextRecipientSubmissionForm);"},{"lineNumber":1151,"author":{"gitId":"-"},"content":"    const commentSpy: SpyInstance \u003d jest.spyOn(feedbackResponseCommentService, \u0027createComment\u0027)"},{"lineNumber":1152,"author":{"gitId":"-"},"content":"        .mockReturnValue(of(testComment));"},{"lineNumber":1153,"author":{"gitId":"-"},"content":""},{"lineNumber":1154,"author":{"gitId":"-"},"content":"    component.createCommentRequest(testSubmissionForm).subscribe(() \u003d\u003e {"},{"lineNumber":1155,"author":{"gitId":"-"},"content":"      expect(testSubmissionForm.commentByGiver).toEqual("},{"lineNumber":1156,"author":{"gitId":"-"},"content":"          component.getCommentModel(testComment, testSubmissionForm.recipientIdentifier));"},{"lineNumber":1157,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":1158,"author":{"gitId":"-"},"content":""},{"lineNumber":1159,"author":{"gitId":"-"},"content":"    expect(commentSpy).toHaveBeenCalledTimes(1);"},{"lineNumber":1160,"author":{"gitId":"-"},"content":"    expect(commentSpy).toHaveBeenLastCalledWith({"},{"lineNumber":1161,"author":{"gitId":"-"},"content":"      commentText: \u0027comment text here\u0027,"},{"lineNumber":1162,"author":{"gitId":"-"},"content":"      showCommentTo: [],"},{"lineNumber":1163,"author":{"gitId":"-"},"content":"      showGiverNameTo: [],"},{"lineNumber":1164,"author":{"gitId":"-"},"content":"    }, testTextRecipientSubmissionForm.responseId, Intent.STUDENT_SUBMISSION,"},{"lineNumber":1165,"author":{"gitId":"-"},"content":"        { key: testQueryParams.key, moderatedperson: \u0027\u0027 });"},{"lineNumber":1166,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":1167,"author":{"gitId":"-"},"content":""},{"lineNumber":1168,"author":{"gitId":"-"},"content":"  it(\u0027should create comment request to create new comment when submission form has original comment\u0027"},{"lineNumber":1169,"author":{"gitId":"-"},"content":"      + \u0027with different original recipient\u0027, () \u003d\u003e {"},{"lineNumber":1170,"author":{"gitId":"-"},"content":"    const testSubmissionForm: FeedbackResponseRecipientSubmissionFormModel \u003d deepCopy(testMcqRecipientSubmissionForm);"},{"lineNumber":1171,"author":{"gitId":"-"},"content":"    testSubmissionForm.commentByGiver!.originalRecipientIdentifier \u003d \u0027other-recipient-identifier\u0027;"},{"lineNumber":1172,"author":{"gitId":"-"},"content":"    const commentSpy: SpyInstance \u003d jest.spyOn(feedbackResponseCommentService, \u0027createComment\u0027)"},{"lineNumber":1173,"author":{"gitId":"-"},"content":"        .mockReturnValue(of(testComment));"},{"lineNumber":1174,"author":{"gitId":"-"},"content":""},{"lineNumber":1175,"author":{"gitId":"-"},"content":"    component.createCommentRequest(testSubmissionForm).subscribe(() \u003d\u003e {"},{"lineNumber":1176,"author":{"gitId":"-"},"content":"      expect(testSubmissionForm.commentByGiver).toEqual("},{"lineNumber":1177,"author":{"gitId":"-"},"content":"          component.getCommentModel(testComment, testSubmissionForm.recipientIdentifier));"},{"lineNumber":1178,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":1179,"author":{"gitId":"-"},"content":""},{"lineNumber":1180,"author":{"gitId":"-"},"content":"    expect(commentSpy).toHaveBeenCalledTimes(1);"},{"lineNumber":1181,"author":{"gitId":"-"},"content":"    expect(commentSpy).toHaveBeenLastCalledWith({"},{"lineNumber":1182,"author":{"gitId":"-"},"content":"      commentText: \u0027comment text here\u0027,"},{"lineNumber":1183,"author":{"gitId":"-"},"content":"      showCommentTo: [],"},{"lineNumber":1184,"author":{"gitId":"-"},"content":"      showGiverNameTo: [],"},{"lineNumber":1185,"author":{"gitId":"-"},"content":"    }, testMcqRecipientSubmissionForm.responseId, Intent.STUDENT_SUBMISSION,"},{"lineNumber":1186,"author":{"gitId":"-"},"content":"        { key: testQueryParams.key, moderatedperson: \u0027\u0027 });"},{"lineNumber":1187,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":1188,"author":{"gitId":"-"},"content":""},{"lineNumber":1189,"author":{"gitId":"-"},"content":"  it(\u0027should create comment request to update existing comment when submission form has original comment\u0027, () \u003d\u003e {"},{"lineNumber":1190,"author":{"gitId":"-"},"content":"    const testSubmissionForm: FeedbackResponseRecipientSubmissionFormModel \u003d deepCopy(testMcqRecipientSubmissionForm);"},{"lineNumber":1191,"author":{"gitId":"-"},"content":"    const expectedId: any \u003d testMcqRecipientSubmissionForm.commentByGiver?.originalComment?.feedbackResponseCommentId;"},{"lineNumber":1192,"author":{"gitId":"-"},"content":"    const commentSpy: SpyInstance \u003d jest.spyOn(feedbackResponseCommentService, \u0027updateComment\u0027)"},{"lineNumber":1193,"author":{"gitId":"-"},"content":"        .mockReturnValue(of(testComment));"},{"lineNumber":1194,"author":{"gitId":"-"},"content":""},{"lineNumber":1195,"author":{"gitId":"-"},"content":"    component.createCommentRequest(testSubmissionForm).subscribe(() \u003d\u003e {"},{"lineNumber":1196,"author":{"gitId":"-"},"content":"      expect(testSubmissionForm.commentByGiver).toEqual("},{"lineNumber":1197,"author":{"gitId":"-"},"content":"          component.getCommentModel(testComment, testSubmissionForm.recipientIdentifier));"},{"lineNumber":1198,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":1199,"author":{"gitId":"-"},"content":""},{"lineNumber":1200,"author":{"gitId":"-"},"content":"    expect(commentSpy).toHaveBeenCalledTimes(1);"},{"lineNumber":1201,"author":{"gitId":"-"},"content":"    expect(commentSpy).toHaveBeenLastCalledWith({"},{"lineNumber":1202,"author":{"gitId":"-"},"content":"      commentText: \u0027comment text here\u0027,"},{"lineNumber":1203,"author":{"gitId":"-"},"content":"      showCommentTo: [],"},{"lineNumber":1204,"author":{"gitId":"-"},"content":"      showGiverNameTo: [],"},{"lineNumber":1205,"author":{"gitId":"-"},"content":"    }, expectedId, Intent.STUDENT_SUBMISSION, { key: testQueryParams.key, moderatedperson: \u0027\u0027 });"},{"lineNumber":1206,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":1207,"author":{"gitId":"-"},"content":""},{"lineNumber":1208,"author":{"gitId":"-"},"content":"  it(\u0027should create comment request to delete existing comment when new comment text is empty\u0027, () \u003d\u003e {"},{"lineNumber":1209,"author":{"gitId":"-"},"content":"    const testSubmissionForm: FeedbackResponseRecipientSubmissionFormModel \u003d deepCopy(testMcqRecipientSubmissionForm2);"},{"lineNumber":1210,"author":{"gitId":"-"},"content":"    const expectedId: any \u003d testMcqRecipientSubmissionForm2.commentByGiver?.originalComment?.feedbackResponseCommentId;"},{"lineNumber":1211,"author":{"gitId":"-"},"content":"    const commentSpy: SpyInstance \u003d jest.spyOn(feedbackResponseCommentService, \u0027deleteComment\u0027)"},{"lineNumber":1212,"author":{"gitId":"-"},"content":"        .mockReturnValue(of({}));"},{"lineNumber":1213,"author":{"gitId":"-"},"content":""},{"lineNumber":1214,"author":{"gitId":"-"},"content":"    component.createCommentRequest(testSubmissionForm).subscribe(() \u003d\u003e {"},{"lineNumber":1215,"author":{"gitId":"-"},"content":"      expect(testSubmissionForm.commentByGiver).toEqual(undefined);"},{"lineNumber":1216,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":1217,"author":{"gitId":"-"},"content":""},{"lineNumber":1218,"author":{"gitId":"-"},"content":"    expect(commentSpy).toHaveBeenCalledTimes(1);"},{"lineNumber":1219,"author":{"gitId":"-"},"content":"    expect(commentSpy).toHaveBeenLastCalledWith(expectedId, Intent.STUDENT_SUBMISSION,"},{"lineNumber":1220,"author":{"gitId":"-"},"content":"        { key: testQueryParams.key, moderatedperson: \u0027\u0027 });"},{"lineNumber":1221,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":1222,"author":{"gitId":"-"},"content":""},{"lineNumber":1223,"author":{"gitId":"-"},"content":"  it(\u0027should delete participant comment\u0027, () \u003d\u003e {"},{"lineNumber":1224,"author":{"gitId":"-"},"content":"    const testSubmissionForm: QuestionSubmissionFormModel \u003d deepCopy(testMsqQuestionSubmissionForm);"},{"lineNumber":1225,"author":{"gitId":"-"},"content":"    const expectedId: any \u003d testMsqQuestionSubmissionForm.recipientSubmissionForms[0]"},{"lineNumber":1226,"author":{"gitId":"-"},"content":"        .commentByGiver?.originalComment?.feedbackResponseCommentId;"},{"lineNumber":1227,"author":{"gitId":"-"},"content":"    const commentSpy: SpyInstance \u003d jest.spyOn(feedbackResponseCommentService, \u0027deleteComment\u0027)"},{"lineNumber":1228,"author":{"gitId":"-"},"content":"        .mockReturnValue(of(true));"},{"lineNumber":1229,"author":{"gitId":"-"},"content":""},{"lineNumber":1230,"author":{"gitId":"-"},"content":"    component.questionSubmissionForms \u003d [testSubmissionForm];"},{"lineNumber":1231,"author":{"gitId":"-"},"content":"    component.deleteParticipantComment(0, 0);"},{"lineNumber":1232,"author":{"gitId":"-"},"content":""},{"lineNumber":1233,"author":{"gitId":"-"},"content":"    expect(commentSpy).toHaveBeenCalledTimes(1);"},{"lineNumber":1234,"author":{"gitId":"-"},"content":"    expect(commentSpy).toHaveBeenLastCalledWith(expectedId, Intent.STUDENT_SUBMISSION,"},{"lineNumber":1235,"author":{"gitId":"-"},"content":"        { key: testQueryParams.key, moderatedperson: \u0027\u0027 });"},{"lineNumber":1236,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":1237,"author":{"gitId":"-"},"content":"});"}],"authorContributionMap":{"weiquu":12,"-":1225}},{"path":"src/web/app/pages-session/session-submission-page/session-submission-page.component.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { DOCUMENT } from \u0027@angular/common\u0027;"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import { AfterViewInit, Component, Inject, OnInit } from \u0027@angular/core\u0027;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"import { ActivatedRoute } from \u0027@angular/router\u0027;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import { NgbModal, NgbModalRef } from \u0027@ng-bootstrap/ng-bootstrap\u0027;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import { PageScrollService } from \u0027ngx-page-scroll-core\u0027;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import { forkJoin, Observable, of } from \u0027rxjs\u0027;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import { catchError, finalize, switchMap, tap } from \u0027rxjs/operators\u0027;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import { environment } from \u0027../../../environments/environment\u0027;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import { AuthService } from \u0027../../../services/auth.service\u0027;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import { CourseService } from \u0027../../../services/course.service\u0027;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import { DeadlineExtensionHelper } from \u0027../../../services/deadline-extension-helper\u0027;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import { FeedbackQuestionsService } from \u0027../../../services/feedback-questions.service\u0027;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import { FeedbackResponseCommentService } from \u0027../../../services/feedback-response-comment.service\u0027;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import { FeedbackResponsesResponse, FeedbackResponsesService } from \u0027../../../services/feedback-responses.service\u0027;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import { FeedbackSessionsService } from \u0027../../../services/feedback-sessions.service\u0027;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"import { InstructorService } from \u0027../../../services/instructor.service\u0027;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"import { LogService } from \u0027../../../services/log.service\u0027;"},{"lineNumber":18,"author":{"gitId":"-"},"content":"import { NavigationService } from \u0027../../../services/navigation.service\u0027;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"import { SimpleModalService } from \u0027../../../services/simple-modal.service\u0027;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"import { StatusMessageService } from \u0027../../../services/status-message.service\u0027;"},{"lineNumber":21,"author":{"gitId":"-"},"content":"import { StudentService } from \u0027../../../services/student.service\u0027;"},{"lineNumber":22,"author":{"gitId":"-"},"content":"import { TimezoneService } from \u0027../../../services/timezone.service\u0027;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":24,"author":{"gitId":"-"},"content":"  AuthInfo,"},{"lineNumber":25,"author":{"gitId":"-"},"content":"  Course,"},{"lineNumber":26,"author":{"gitId":"-"},"content":"  FeedbackParticipantType,"},{"lineNumber":27,"author":{"gitId":"-"},"content":"  FeedbackQuestion,"},{"lineNumber":28,"author":{"gitId":"-"},"content":"  FeedbackQuestionRecipient,"},{"lineNumber":29,"author":{"gitId":"-"},"content":"  FeedbackQuestionRecipients,"},{"lineNumber":30,"author":{"gitId":"-"},"content":"  FeedbackResponse,"},{"lineNumber":31,"author":{"gitId":"-"},"content":"  FeedbackResponseComment,"},{"lineNumber":32,"author":{"gitId":"-"},"content":"  FeedbackResponses,"},{"lineNumber":33,"author":{"gitId":"-"},"content":"  FeedbackSession,"},{"lineNumber":34,"author":{"gitId":"-"},"content":"  FeedbackSessionLogType,"},{"lineNumber":35,"author":{"gitId":"-"},"content":"  FeedbackSessionSubmissionStatus,"},{"lineNumber":36,"author":{"gitId":"-"},"content":"  Instructor,"},{"lineNumber":37,"author":{"gitId":"-"},"content":"  NumberOfEntitiesToGiveFeedbackToSetting,"},{"lineNumber":38,"author":{"gitId":"-"},"content":"  RegkeyValidity,"},{"lineNumber":39,"author":{"gitId":"-"},"content":"  Student,"},{"lineNumber":40,"author":{"gitId":"-"},"content":"} from \u0027../../../types/api-output\u0027;"},{"lineNumber":41,"author":{"gitId":"-"},"content":"import { FeedbackResponseRequest, Intent } from \u0027../../../types/api-request\u0027;"},{"lineNumber":42,"author":{"gitId":"-"},"content":"import { Milliseconds } from \u0027../../../types/datetime-const\u0027;"},{"lineNumber":43,"author":{"gitId":"-"},"content":"import { DEFAULT_NUMBER_OF_RETRY_ATTEMPTS } from \u0027../../../types/default-retry-attempts\u0027;"},{"lineNumber":44,"author":{"gitId":"-"},"content":"import { CommentRowModel } from \u0027../../components/comment-box/comment-row/comment-row.component\u0027;"},{"lineNumber":45,"author":{"gitId":"-"},"content":"import { ErrorReportComponent } from \u0027../../components/error-report/error-report.component\u0027;"},{"lineNumber":46,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":47,"author":{"gitId":"-"},"content":"  FeedbackResponseRecipient,"},{"lineNumber":48,"author":{"gitId":"-"},"content":"  FeedbackResponseRecipientSubmissionFormModel,"},{"lineNumber":49,"author":{"gitId":"-"},"content":"  QuestionSubmissionFormMode,"},{"lineNumber":50,"author":{"gitId":"-"},"content":"  QuestionSubmissionFormModel,"},{"lineNumber":51,"author":{"gitId":"-"},"content":"} from \u0027../../components/question-submission-form/question-submission-form-model\u0027;"},{"lineNumber":52,"author":{"gitId":"-"},"content":"import { SimpleModalType } from \u0027../../components/simple-modal/simple-modal-type\u0027;"},{"lineNumber":53,"author":{"gitId":"-"},"content":"import { ErrorMessageOutput } from \u0027../../error-message-output\u0027;"},{"lineNumber":54,"author":{"gitId":"-"},"content":"import { SavingCompleteModalComponent } from \u0027./saving-complete-modal/saving-complete-modal.component\u0027;"},{"lineNumber":55,"author":{"gitId":"-"},"content":""},{"lineNumber":56,"author":{"gitId":"-"},"content":"interface FeedbackQuestionsResponse {"},{"lineNumber":57,"author":{"gitId":"-"},"content":"  questions: FeedbackQuestion[];"},{"lineNumber":58,"author":{"gitId":"-"},"content":"}"},{"lineNumber":59,"author":{"gitId":"-"},"content":""},{"lineNumber":60,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":61,"author":{"gitId":"-"},"content":" * Feedback session submission page."},{"lineNumber":62,"author":{"gitId":"-"},"content":" */"},{"lineNumber":63,"author":{"gitId":"-"},"content":"@Component({"},{"lineNumber":64,"author":{"gitId":"-"},"content":"  selector: \u0027tm-session-submission-page\u0027,"},{"lineNumber":65,"author":{"gitId":"-"},"content":"  templateUrl: \u0027./session-submission-page.component.html\u0027,"},{"lineNumber":66,"author":{"gitId":"-"},"content":"  styleUrls: [\u0027./session-submission-page.component.scss\u0027],"},{"lineNumber":67,"author":{"gitId":"-"},"content":"})"},{"lineNumber":68,"author":{"gitId":"-"},"content":"export class SessionSubmissionPageComponent implements OnInit, AfterViewInit {"},{"lineNumber":69,"author":{"gitId":"-"},"content":""},{"lineNumber":70,"author":{"gitId":"-"},"content":"  // enum"},{"lineNumber":71,"author":{"gitId":"-"},"content":"  FeedbackSessionSubmissionStatus: typeof FeedbackSessionSubmissionStatus \u003d FeedbackSessionSubmissionStatus;"},{"lineNumber":72,"author":{"gitId":"-"},"content":"  Intent: typeof Intent \u003d Intent;"},{"lineNumber":73,"author":{"gitId":"-"},"content":""},{"lineNumber":74,"author":{"gitId":"-"},"content":"  courseId: string \u003d \u0027\u0027;"},{"lineNumber":75,"author":{"gitId":"-"},"content":"  feedbackSessionName: string \u003d \u0027\u0027;"},{"lineNumber":76,"author":{"gitId":"-"},"content":"  regKey: string \u003d \u0027\u0027;"},{"lineNumber":77,"author":{"gitId":"-"},"content":"  entityType: string \u003d \u0027student\u0027;"},{"lineNumber":78,"author":{"gitId":"-"},"content":"  loggedInUser: string \u003d \u0027\u0027;"},{"lineNumber":79,"author":{"gitId":"-"},"content":""},{"lineNumber":80,"author":{"gitId":"-"},"content":"  moderatedPerson: string \u003d \u0027\u0027;"},{"lineNumber":81,"author":{"gitId":"-"},"content":"  previewAsPerson: string \u003d \u0027\u0027;"},{"lineNumber":82,"author":{"gitId":"-"},"content":"  // the name of the person involved"},{"lineNumber":83,"author":{"gitId":"-"},"content":"  // (e.g. the student name for unregistered student, the name of instructor being moderated)"},{"lineNumber":84,"author":{"gitId":"-"},"content":"  personName: string \u003d \u0027\u0027;"},{"lineNumber":85,"author":{"gitId":"-"},"content":"  personEmail: string \u003d \u0027\u0027;"},{"lineNumber":86,"author":{"gitId":"-"},"content":""},{"lineNumber":87,"author":{"gitId":"-"},"content":"  courseName: string \u003d \u0027\u0027;"},{"lineNumber":88,"author":{"gitId":"-"},"content":"  courseInstitute: string \u003d \u0027\u0027;"},{"lineNumber":89,"author":{"gitId":"-"},"content":"  formattedSessionOpeningTime: string \u003d \u0027\u0027;"},{"lineNumber":90,"author":{"gitId":"-"},"content":"  formattedSessionClosingTime: string \u003d \u0027\u0027;"},{"lineNumber":91,"author":{"gitId":"-"},"content":"  feedbackSessionInstructions: string \u003d \u0027\u0027;"},{"lineNumber":92,"author":{"gitId":"-"},"content":"  feedbackSessionTimezone: string \u003d \u0027\u0027;"},{"lineNumber":93,"author":{"gitId":"-"},"content":"  feedbackSessionSubmissionStatus: FeedbackSessionSubmissionStatus \u003d FeedbackSessionSubmissionStatus.OPEN;"},{"lineNumber":94,"author":{"gitId":"-"},"content":""},{"lineNumber":95,"author":{"gitId":"-"},"content":"  intent: Intent \u003d Intent.STUDENT_SUBMISSION;"},{"lineNumber":96,"author":{"gitId":"-"},"content":""},{"lineNumber":97,"author":{"gitId":"-"},"content":"  questionSubmissionForms: QuestionSubmissionFormModel[] \u003d [];"},{"lineNumber":98,"author":{"gitId":"-"},"content":""},{"lineNumber":99,"author":{"gitId":"-"},"content":"  isSavingResponses: boolean \u003d false;"},{"lineNumber":100,"author":{"gitId":"-"},"content":"  isSubmissionFormsDisabled: boolean \u003d false;"},{"lineNumber":101,"author":{"gitId":"-"},"content":""},{"lineNumber":102,"author":{"gitId":"-"},"content":"  isModerationHintExpanded: boolean \u003d false;"},{"lineNumber":103,"author":{"gitId":"-"},"content":"  moderatedQuestionId: string \u003d \u0027\u0027;"},{"lineNumber":104,"author":{"gitId":"-"},"content":""},{"lineNumber":105,"author":{"gitId":"-"},"content":"  isCourseLoading: boolean \u003d true;"},{"lineNumber":106,"author":{"gitId":"-"},"content":"  isFeedbackSessionLoading: boolean \u003d true;"},{"lineNumber":107,"author":{"gitId":"-"},"content":"  isFeedbackSessionQuestionsLoading: boolean \u003d true;"},{"lineNumber":108,"author":{"gitId":"-"},"content":"  hasFeedbackSessionQuestionsLoadingFailed: boolean \u003d false;"},{"lineNumber":109,"author":{"gitId":"-"},"content":"  retryAttempts: number \u003d DEFAULT_NUMBER_OF_RETRY_ATTEMPTS;"},{"lineNumber":110,"author":{"gitId":"-"},"content":""},{"lineNumber":111,"author":{"gitId":"-"},"content":"  isQuestionCountOne: boolean \u003d false;"},{"lineNumber":112,"author":{"gitId":"domlimm"},"content":"  isSubmitAllClicked: boolean \u003d false;"},{"lineNumber":113,"author":{"gitId":"-"},"content":""},{"lineNumber":114,"author":{"gitId":"-"},"content":"  private backendUrl: string \u003d environment.backendUrl;"},{"lineNumber":115,"author":{"gitId":"-"},"content":""},{"lineNumber":116,"author":{"gitId":"-"},"content":"  constructor(private route: ActivatedRoute,"},{"lineNumber":117,"author":{"gitId":"-"},"content":"              private statusMessageService: StatusMessageService,"},{"lineNumber":118,"author":{"gitId":"-"},"content":"              private timezoneService: TimezoneService,"},{"lineNumber":119,"author":{"gitId":"-"},"content":"              private feedbackQuestionsService: FeedbackQuestionsService,"},{"lineNumber":120,"author":{"gitId":"-"},"content":"              private feedbackResponsesService: FeedbackResponsesService,"},{"lineNumber":121,"author":{"gitId":"-"},"content":"              private feedbackSessionsService: FeedbackSessionsService,"},{"lineNumber":122,"author":{"gitId":"-"},"content":"              private studentService: StudentService,"},{"lineNumber":123,"author":{"gitId":"-"},"content":"              private instructorService: InstructorService,"},{"lineNumber":124,"author":{"gitId":"-"},"content":"              private courseService: CourseService,"},{"lineNumber":125,"author":{"gitId":"-"},"content":"              private ngbModal: NgbModal,"},{"lineNumber":126,"author":{"gitId":"-"},"content":"              private simpleModalService: SimpleModalService,"},{"lineNumber":127,"author":{"gitId":"-"},"content":"              private pageScrollService: PageScrollService,"},{"lineNumber":128,"author":{"gitId":"-"},"content":"              private authService: AuthService,"},{"lineNumber":129,"author":{"gitId":"-"},"content":"              private navigationService: NavigationService,"},{"lineNumber":130,"author":{"gitId":"-"},"content":"              private commentService: FeedbackResponseCommentService,"},{"lineNumber":131,"author":{"gitId":"-"},"content":"              private logService: LogService,"},{"lineNumber":132,"author":{"gitId":"-"},"content":"              @Inject(DOCUMENT) private document: any) {"},{"lineNumber":133,"author":{"gitId":"-"},"content":"    this.timezoneService.getTzVersion(); // import timezone service to load timezone data"},{"lineNumber":134,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":135,"author":{"gitId":"-"},"content":""},{"lineNumber":136,"author":{"gitId":"-"},"content":"  ngOnInit(): void {"},{"lineNumber":137,"author":{"gitId":"-"},"content":"    this.route.data.pipe("},{"lineNumber":138,"author":{"gitId":"-"},"content":"        tap((data: any) \u003d\u003e {"},{"lineNumber":139,"author":{"gitId":"-"},"content":"          this.intent \u003d data.intent;"},{"lineNumber":140,"author":{"gitId":"-"},"content":"          this.entityType \u003d data.intent \u003d\u003d\u003d Intent.INSTRUCTOR_SUBMISSION ? \u0027instructor\u0027 : this.entityType;"},{"lineNumber":141,"author":{"gitId":"-"},"content":"        }),"},{"lineNumber":142,"author":{"gitId":"-"},"content":"        switchMap(() \u003d\u003e this.route.queryParams),"},{"lineNumber":143,"author":{"gitId":"-"},"content":"    ).subscribe((queryParams: any) \u003d\u003e {"},{"lineNumber":144,"author":{"gitId":"-"},"content":"      this.courseId \u003d queryParams.courseid;"},{"lineNumber":145,"author":{"gitId":"-"},"content":"      this.feedbackSessionName \u003d queryParams.fsname;"},{"lineNumber":146,"author":{"gitId":"-"},"content":"      this.regKey \u003d queryParams.key ? queryParams.key : \u0027\u0027;"},{"lineNumber":147,"author":{"gitId":"-"},"content":"      this.moderatedPerson \u003d queryParams.moderatedperson ? queryParams.moderatedperson : \u0027\u0027;"},{"lineNumber":148,"author":{"gitId":"-"},"content":"      this.previewAsPerson \u003d queryParams.previewas ? queryParams.previewas : \u0027\u0027;"},{"lineNumber":149,"author":{"gitId":"-"},"content":"      if (queryParams.entitytype \u003d\u003d\u003d \u0027instructor\u0027) {"},{"lineNumber":150,"author":{"gitId":"-"},"content":"        this.entityType \u003d \u0027instructor\u0027;"},{"lineNumber":151,"author":{"gitId":"-"},"content":"        this.intent \u003d Intent.INSTRUCTOR_SUBMISSION;"},{"lineNumber":152,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":153,"author":{"gitId":"-"},"content":"      this.moderatedQuestionId \u003d queryParams.moderatedquestionId ? queryParams.moderatedquestionId : \u0027\u0027;"},{"lineNumber":154,"author":{"gitId":"-"},"content":""},{"lineNumber":155,"author":{"gitId":"-"},"content":"      if (this.previewAsPerson) {"},{"lineNumber":156,"author":{"gitId":"-"},"content":"        // disable submission in the preview mode"},{"lineNumber":157,"author":{"gitId":"-"},"content":"        this.isSubmissionFormsDisabled \u003d true;"},{"lineNumber":158,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":159,"author":{"gitId":"-"},"content":""},{"lineNumber":160,"author":{"gitId":"-"},"content":"      const nextUrl: string \u003d `${window.location.pathname}${window.location.search.replace(/\u0026/g, \u0027%26\u0027)}`;"},{"lineNumber":161,"author":{"gitId":"-"},"content":"      this.authService.getAuthUser(undefined, nextUrl).subscribe({"},{"lineNumber":162,"author":{"gitId":"-"},"content":"        next: (auth: AuthInfo) \u003d\u003e {"},{"lineNumber":163,"author":{"gitId":"-"},"content":"          const isPreviewOrModeration: boolean \u003d !!(auth.user \u0026\u0026 (this.moderatedPerson || this.previewAsPerson));"},{"lineNumber":164,"author":{"gitId":"-"},"content":"          if (auth.user) {"},{"lineNumber":165,"author":{"gitId":"-"},"content":"            this.loggedInUser \u003d auth.user.id;"},{"lineNumber":166,"author":{"gitId":"-"},"content":"          }"},{"lineNumber":167,"author":{"gitId":"-"},"content":"          if (this.regKey \u0026\u0026 !isPreviewOrModeration) {"},{"lineNumber":168,"author":{"gitId":"-"},"content":"            this.authService.getAuthRegkeyValidity(this.regKey, this.intent).subscribe({"},{"lineNumber":169,"author":{"gitId":"-"},"content":"              next: (resp: RegkeyValidity) \u003d\u003e {"},{"lineNumber":170,"author":{"gitId":"-"},"content":"                if (resp.isAllowedAccess) {"},{"lineNumber":171,"author":{"gitId":"-"},"content":"                  if (resp.isUsed) {"},{"lineNumber":172,"author":{"gitId":"-"},"content":"                    // The logged in user matches the registration key; redirect to the logged in URL"},{"lineNumber":173,"author":{"gitId":"-"},"content":"                    this.navigationService.navigateByURLWithParamEncoding("},{"lineNumber":174,"author":{"gitId":"-"},"content":"                        `/web/${this.entityType}/sessions/submission`,"},{"lineNumber":175,"author":{"gitId":"-"},"content":"                        { courseid: this.courseId, fsname: this.feedbackSessionName });"},{"lineNumber":176,"author":{"gitId":"-"},"content":"                  } else {"},{"lineNumber":177,"author":{"gitId":"-"},"content":"                    // Valid, unused registration key; load information based on the key"},{"lineNumber":178,"author":{"gitId":"-"},"content":"                    this.loadCourseInfo();"},{"lineNumber":179,"author":{"gitId":"-"},"content":"                    this.loadPersonName();"},{"lineNumber":180,"author":{"gitId":"-"},"content":"                    this.loadFeedbackSession(false, auth);"},{"lineNumber":181,"author":{"gitId":"-"},"content":"                  }"},{"lineNumber":182,"author":{"gitId":"-"},"content":"                } else if (resp.isValid) {"},{"lineNumber":183,"author":{"gitId":"-"},"content":"                  // At this point, registration key must already be used, otherwise access would be granted"},{"lineNumber":184,"author":{"gitId":"-"},"content":"                  if (this.loggedInUser) {"},{"lineNumber":185,"author":{"gitId":"-"},"content":"                    // Registration key belongs to another user who is not the logged in user"},{"lineNumber":186,"author":{"gitId":"-"},"content":"                    this.navigationService.navigateWithErrorMessage(\u0027/web/front\u0027,"},{"lineNumber":187,"author":{"gitId":"-"},"content":"                        `You are trying to access TEAMMATES using the Google account ${this.loggedInUser}, which"},{"lineNumber":188,"author":{"gitId":"-"},"content":"                        is not linked to this TEAMMATES account. If you used a different Google account to"},{"lineNumber":189,"author":{"gitId":"-"},"content":"                        join/access TEAMMATES before, please use that Google account to access TEAMMATES. If you"},{"lineNumber":190,"author":{"gitId":"-"},"content":"                        cannot remember which Google account you used before, please email us at"},{"lineNumber":191,"author":{"gitId":"-"},"content":"                        ${environment.supportEmail} for help.`);"},{"lineNumber":192,"author":{"gitId":"-"},"content":"                  } else {"},{"lineNumber":193,"author":{"gitId":"-"},"content":"                    this.loadFeedbackSession(true, auth);"},{"lineNumber":194,"author":{"gitId":"-"},"content":"                  }"},{"lineNumber":195,"author":{"gitId":"-"},"content":"                } else {"},{"lineNumber":196,"author":{"gitId":"-"},"content":"                  // The registration key is invalid"},{"lineNumber":197,"author":{"gitId":"-"},"content":"                  this.navigationService.navigateWithErrorMessage(\u0027/web/front\u0027,"},{"lineNumber":198,"author":{"gitId":"-"},"content":"                      \u0027You are not authorized to view this page.\u0027);"},{"lineNumber":199,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":200,"author":{"gitId":"-"},"content":"              },"},{"lineNumber":201,"author":{"gitId":"-"},"content":"              error: () \u003d\u003e {"},{"lineNumber":202,"author":{"gitId":"-"},"content":"                this.navigationService.navigateWithErrorMessage(\u0027/web/front\u0027,"},{"lineNumber":203,"author":{"gitId":"-"},"content":"                    \u0027You are not authorized to view this page.\u0027);"},{"lineNumber":204,"author":{"gitId":"-"},"content":"              },"},{"lineNumber":205,"author":{"gitId":"-"},"content":"            });"},{"lineNumber":206,"author":{"gitId":"-"},"content":"          } else if (this.loggedInUser) {"},{"lineNumber":207,"author":{"gitId":"-"},"content":"            // Load information based on logged in user"},{"lineNumber":208,"author":{"gitId":"-"},"content":"            // This will also cover moderation/preview cases"},{"lineNumber":209,"author":{"gitId":"-"},"content":"            this.loadCourseInfo();"},{"lineNumber":210,"author":{"gitId":"-"},"content":"            this.loadPersonName();"},{"lineNumber":211,"author":{"gitId":"-"},"content":"            this.loadFeedbackSession(false, auth);"},{"lineNumber":212,"author":{"gitId":"-"},"content":"          } else {"},{"lineNumber":213,"author":{"gitId":"-"},"content":"            this.navigationService.navigateWithErrorMessage(\u0027/web/front\u0027,"},{"lineNumber":214,"author":{"gitId":"-"},"content":"                \u0027You are not authorized to view this page.\u0027);"},{"lineNumber":215,"author":{"gitId":"-"},"content":"          }"},{"lineNumber":216,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":217,"author":{"gitId":"-"},"content":"        error: () \u003d\u003e {"},{"lineNumber":218,"author":{"gitId":"-"},"content":"          this.navigationService.navigateWithErrorMessage(\u0027/web/front\u0027,"},{"lineNumber":219,"author":{"gitId":"-"},"content":"              \u0027You are not authorized to view this page.\u0027);"},{"lineNumber":220,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":221,"author":{"gitId":"-"},"content":"      });"},{"lineNumber":222,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":223,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":224,"author":{"gitId":"-"},"content":""},{"lineNumber":225,"author":{"gitId":"-"},"content":"  // Solution for checking partial element visibility adapted from"},{"lineNumber":226,"author":{"gitId":"-"},"content":"  // https://stackoverflow.com/questions/30943662/check-if-element-is-partially-in-viewport"},{"lineNumber":227,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":228,"author":{"gitId":"-"},"content":"   * Checks if a given element is in view."},{"lineNumber":229,"author":{"gitId":"-"},"content":"   *"},{"lineNumber":230,"author":{"gitId":"-"},"content":"   * @param e element to perform check for"},{"lineNumber":231,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":232,"author":{"gitId":"-"},"content":"  isInViewport(e: HTMLElement): boolean {"},{"lineNumber":233,"author":{"gitId":"-"},"content":"    const rect \u003d e.getBoundingClientRect();"},{"lineNumber":234,"author":{"gitId":"-"},"content":"    const windowHeight: number \u003d (window.innerHeight || document.documentElement.clientHeight);"},{"lineNumber":235,"author":{"gitId":"-"},"content":""},{"lineNumber":236,"author":{"gitId":"-"},"content":"    return !("},{"lineNumber":237,"author":{"gitId":"-"},"content":"      Math.floor(100 - (((rect.top \u003e\u003d 0 ? 0 : rect.top) / +-rect.height) * 100)) \u003c 1"},{"lineNumber":238,"author":{"gitId":"-"},"content":"      || Math.floor(100 - ((rect.bottom - windowHeight) / rect.height) * 100) \u003c 1"},{"lineNumber":239,"author":{"gitId":"-"},"content":"    );"},{"lineNumber":240,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":241,"author":{"gitId":"-"},"content":""},{"lineNumber":242,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":243,"author":{"gitId":"-"},"content":"   * Scrolls to the question based on its given question id."},{"lineNumber":244,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":245,"author":{"gitId":"-"},"content":"  scrollToQuestion(): void {"},{"lineNumber":246,"author":{"gitId":"-"},"content":"    const div: HTMLElement | null \u003d document.getElementById(this.moderatedQuestionId);"},{"lineNumber":247,"author":{"gitId":"-"},"content":""},{"lineNumber":248,"author":{"gitId":"-"},"content":"    // continue scrolling as long as the element to scroll to is yet to be found or not in view"},{"lineNumber":249,"author":{"gitId":"-"},"content":"    if (div \u003d\u003d null || !(this.isInViewport(div))) {"},{"lineNumber":250,"author":{"gitId":"-"},"content":"      setTimeout(() \u003d\u003e {"},{"lineNumber":251,"author":{"gitId":"-"},"content":"        this.pageScrollService.scroll({"},{"lineNumber":252,"author":{"gitId":"-"},"content":"          document: this.document,"},{"lineNumber":253,"author":{"gitId":"-"},"content":"          scrollTarget: `#${this.moderatedQuestionId}`,"},{"lineNumber":254,"author":{"gitId":"-"},"content":"          scrollOffset: 70,"},{"lineNumber":255,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":256,"author":{"gitId":"-"},"content":"        this.scrollToQuestion();"},{"lineNumber":257,"author":{"gitId":"-"},"content":"      }, 500);"},{"lineNumber":258,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":259,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":260,"author":{"gitId":"-"},"content":""},{"lineNumber":261,"author":{"gitId":"-"},"content":"  ngAfterViewInit(): void {"},{"lineNumber":262,"author":{"gitId":"-"},"content":"    if (!this.moderatedQuestionId) {"},{"lineNumber":263,"author":{"gitId":"-"},"content":"      return;"},{"lineNumber":264,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":265,"author":{"gitId":"-"},"content":"    this.scrollToQuestion();"},{"lineNumber":266,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":267,"author":{"gitId":"-"},"content":""},{"lineNumber":268,"author":{"gitId":"-"},"content":"  private loadCourseInfo(): void {"},{"lineNumber":269,"author":{"gitId":"-"},"content":"    this.isCourseLoading \u003d true;"},{"lineNumber":270,"author":{"gitId":"-"},"content":"    let request: Observable\u003cCourse\u003e;"},{"lineNumber":271,"author":{"gitId":"-"},"content":"    switch (this.intent) {"},{"lineNumber":272,"author":{"gitId":"-"},"content":"      case Intent.STUDENT_SUBMISSION:"},{"lineNumber":273,"author":{"gitId":"-"},"content":"        if (this.moderatedPerson || this.previewAsPerson) {"},{"lineNumber":274,"author":{"gitId":"-"},"content":"          request \u003d this.courseService.getCourseAsInstructor(this.courseId);"},{"lineNumber":275,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":276,"author":{"gitId":"-"},"content":"          request \u003d this.courseService.getCourseAsStudent(this.courseId, this.regKey);"},{"lineNumber":277,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":278,"author":{"gitId":"-"},"content":"        break;"},{"lineNumber":279,"author":{"gitId":"-"},"content":"      case Intent.INSTRUCTOR_SUBMISSION:"},{"lineNumber":280,"author":{"gitId":"-"},"content":"        request \u003d this.courseService.getCourseAsInstructor(this.courseId, this.regKey);"},{"lineNumber":281,"author":{"gitId":"-"},"content":"        break;"},{"lineNumber":282,"author":{"gitId":"-"},"content":"      default:"},{"lineNumber":283,"author":{"gitId":"-"},"content":"        this.isCourseLoading \u003d false;"},{"lineNumber":284,"author":{"gitId":"-"},"content":"        return;"},{"lineNumber":285,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":286,"author":{"gitId":"-"},"content":"    request.subscribe({"},{"lineNumber":287,"author":{"gitId":"-"},"content":"      next: (resp: Course) \u003d\u003e {"},{"lineNumber":288,"author":{"gitId":"-"},"content":"        this.courseName \u003d resp.courseName;"},{"lineNumber":289,"author":{"gitId":"-"},"content":"        this.courseInstitute \u003d resp.institute;"},{"lineNumber":290,"author":{"gitId":"-"},"content":"        this.isCourseLoading \u003d false;"},{"lineNumber":291,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":292,"author":{"gitId":"-"},"content":"      error: () \u003d\u003e {"},{"lineNumber":293,"author":{"gitId":"-"},"content":"        this.isCourseLoading \u003d false;"},{"lineNumber":294,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":295,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":296,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":297,"author":{"gitId":"-"},"content":""},{"lineNumber":298,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":299,"author":{"gitId":"-"},"content":"   * Loads the name of the person involved in the submission."},{"lineNumber":300,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":301,"author":{"gitId":"-"},"content":"  loadPersonName(): void {"},{"lineNumber":302,"author":{"gitId":"-"},"content":"    switch (this.intent) {"},{"lineNumber":303,"author":{"gitId":"-"},"content":"      case Intent.STUDENT_SUBMISSION:"},{"lineNumber":304,"author":{"gitId":"-"},"content":"        this.studentService.getStudent("},{"lineNumber":305,"author":{"gitId":"-"},"content":"            this.courseId,"},{"lineNumber":306,"author":{"gitId":"-"},"content":"            this.moderatedPerson || this.previewAsPerson,"},{"lineNumber":307,"author":{"gitId":"-"},"content":"            this.regKey,"},{"lineNumber":308,"author":{"gitId":"-"},"content":"        ).subscribe((student: Student) \u003d\u003e {"},{"lineNumber":309,"author":{"gitId":"-"},"content":"          this.personName \u003d student.name;"},{"lineNumber":310,"author":{"gitId":"-"},"content":"          this.personEmail \u003d student.email;"},{"lineNumber":311,"author":{"gitId":"-"},"content":""},{"lineNumber":312,"author":{"gitId":"-"},"content":"          this.logService.createFeedbackSessionLog({"},{"lineNumber":313,"author":{"gitId":"-"},"content":"            courseId: this.courseId,"},{"lineNumber":314,"author":{"gitId":"-"},"content":"            feedbackSessionName: this.feedbackSessionName,"},{"lineNumber":315,"author":{"gitId":"-"},"content":"            studentEmail: this.personEmail,"},{"lineNumber":316,"author":{"gitId":"-"},"content":"            logType: FeedbackSessionLogType.ACCESS,"},{"lineNumber":317,"author":{"gitId":"-"},"content":"          }).subscribe({"},{"lineNumber":318,"author":{"gitId":"-"},"content":"            next: () \u003d\u003e {},"},{"lineNumber":319,"author":{"gitId":"-"},"content":"            error: () \u003d\u003e {"},{"lineNumber":320,"author":{"gitId":"-"},"content":"              this.statusMessageService.showWarningToast(\u0027Failed to log feedback session access\u0027);"},{"lineNumber":321,"author":{"gitId":"-"},"content":"            },"},{"lineNumber":322,"author":{"gitId":"-"},"content":"          });"},{"lineNumber":323,"author":{"gitId":"-"},"content":""},{"lineNumber":324,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":325,"author":{"gitId":"-"},"content":"        break;"},{"lineNumber":326,"author":{"gitId":"-"},"content":"      case Intent.INSTRUCTOR_SUBMISSION:"},{"lineNumber":327,"author":{"gitId":"-"},"content":"        this.instructorService.getInstructor({"},{"lineNumber":328,"author":{"gitId":"-"},"content":"          courseId: this.courseId,"},{"lineNumber":329,"author":{"gitId":"-"},"content":"          feedbackSessionName: this.feedbackSessionName,"},{"lineNumber":330,"author":{"gitId":"-"},"content":"          intent: this.intent,"},{"lineNumber":331,"author":{"gitId":"-"},"content":"          key: this.regKey,"},{"lineNumber":332,"author":{"gitId":"-"},"content":"          moderatedPerson: this.moderatedPerson,"},{"lineNumber":333,"author":{"gitId":"-"},"content":"          previewAs: this.previewAsPerson,"},{"lineNumber":334,"author":{"gitId":"-"},"content":"        }).subscribe((instructor: Instructor) \u003d\u003e {"},{"lineNumber":335,"author":{"gitId":"-"},"content":"          this.personName \u003d instructor.name;"},{"lineNumber":336,"author":{"gitId":"-"},"content":"          this.personEmail \u003d instructor.email;"},{"lineNumber":337,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":338,"author":{"gitId":"-"},"content":"        break;"},{"lineNumber":339,"author":{"gitId":"-"},"content":"      default:"},{"lineNumber":340,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":341,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":342,"author":{"gitId":"-"},"content":""},{"lineNumber":343,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":344,"author":{"gitId":"-"},"content":"   * Redirects to join course link for unregistered student/instructor."},{"lineNumber":345,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":346,"author":{"gitId":"-"},"content":"  joinCourseForUnregisteredEntity(): void {"},{"lineNumber":347,"author":{"gitId":"-"},"content":"    this.navigationService.navigateByURL(\u0027/web/join\u0027, { entitytype: this.entityType, key: this.regKey });"},{"lineNumber":348,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":349,"author":{"gitId":"-"},"content":""},{"lineNumber":350,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":351,"author":{"gitId":"-"},"content":"   * Loads the feedback session information."},{"lineNumber":352,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":353,"author":{"gitId":"-"},"content":"  loadFeedbackSession(loginRequired: boolean, auth: AuthInfo): void {"},{"lineNumber":354,"author":{"gitId":"-"},"content":"    this.isFeedbackSessionLoading \u003d true;"},{"lineNumber":355,"author":{"gitId":"-"},"content":"    const TIME_FORMAT: string \u003d \u0027ddd, DD MMM, YYYY, hh:mm A zz\u0027;"},{"lineNumber":356,"author":{"gitId":"-"},"content":"    this.feedbackSessionsService.getFeedbackSession({"},{"lineNumber":357,"author":{"gitId":"-"},"content":"      courseId: this.courseId,"},{"lineNumber":358,"author":{"gitId":"-"},"content":"      feedbackSessionName: this.feedbackSessionName,"},{"lineNumber":359,"author":{"gitId":"-"},"content":"      intent: this.intent,"},{"lineNumber":360,"author":{"gitId":"-"},"content":"      key: this.regKey,"},{"lineNumber":361,"author":{"gitId":"-"},"content":"      moderatedPerson: this.moderatedPerson,"},{"lineNumber":362,"author":{"gitId":"-"},"content":"      previewAs: this.previewAsPerson,"},{"lineNumber":363,"author":{"gitId":"-"},"content":"    }).pipe(finalize(() \u003d\u003e {"},{"lineNumber":364,"author":{"gitId":"-"},"content":"      this.isFeedbackSessionLoading \u003d false;"},{"lineNumber":365,"author":{"gitId":"-"},"content":"    }))"},{"lineNumber":366,"author":{"gitId":"-"},"content":"      .subscribe({"},{"lineNumber":367,"author":{"gitId":"-"},"content":"        next: (feedbackSession: FeedbackSession) \u003d\u003e {"},{"lineNumber":368,"author":{"gitId":"-"},"content":"          this.feedbackSessionInstructions \u003d feedbackSession.instructions;"},{"lineNumber":369,"author":{"gitId":"-"},"content":"          this.formattedSessionOpeningTime \u003d this.timezoneService"},{"lineNumber":370,"author":{"gitId":"-"},"content":"              .formatToString(feedbackSession.submissionStartTimestamp, feedbackSession.timeZone, TIME_FORMAT);"},{"lineNumber":371,"author":{"gitId":"-"},"content":""},{"lineNumber":372,"author":{"gitId":"-"},"content":"          this.formattedSessionClosingTime \u003d this.getformattedSessionClosingTime(feedbackSession, TIME_FORMAT);"},{"lineNumber":373,"author":{"gitId":"-"},"content":""},{"lineNumber":374,"author":{"gitId":"-"},"content":"          this.feedbackSessionSubmissionStatus \u003d feedbackSession.submissionStatus;"},{"lineNumber":375,"author":{"gitId":"-"},"content":"          this.feedbackSessionTimezone \u003d feedbackSession.timeZone;"},{"lineNumber":376,"author":{"gitId":"-"},"content":""},{"lineNumber":377,"author":{"gitId":"-"},"content":"          // don\u0027t show alert modal in moderation"},{"lineNumber":378,"author":{"gitId":"-"},"content":"          if (!this.moderatedPerson) {"},{"lineNumber":379,"author":{"gitId":"-"},"content":"            let modalContent: string;"},{"lineNumber":380,"author":{"gitId":"-"},"content":"            switch (feedbackSession.submissionStatus) {"},{"lineNumber":381,"author":{"gitId":"-"},"content":"              case FeedbackSessionSubmissionStatus.VISIBLE_NOT_OPEN:"},{"lineNumber":382,"author":{"gitId":"-"},"content":"                this.isSubmissionFormsDisabled \u003d true;"},{"lineNumber":383,"author":{"gitId":"-"},"content":"                modalContent \u003d `\u003cp\u003e\u003cstrong\u003eThe feedback session is currently not open for submissions.\u003c/strong\u003e\u003c/p\u003e"},{"lineNumber":384,"author":{"gitId":"-"},"content":"                \u003cp\u003eYou can view the questions and any submitted responses"},{"lineNumber":385,"author":{"gitId":"-"},"content":"                for this feedback session but cannot submit new responses.\u003c/p\u003e`;"},{"lineNumber":386,"author":{"gitId":"-"},"content":"                this.simpleModalService.openInformationModal("},{"lineNumber":387,"author":{"gitId":"-"},"content":"                    \u0027Feedback Session Not Open\u0027, SimpleModalType.WARNING, modalContent);"},{"lineNumber":388,"author":{"gitId":"-"},"content":"                break;"},{"lineNumber":389,"author":{"gitId":"-"},"content":"              case FeedbackSessionSubmissionStatus.OPEN:"},{"lineNumber":390,"author":{"gitId":"-"},"content":"                if (this.isFeedbackEndingLessThanFifteenMinutes(feedbackSession)) {"},{"lineNumber":391,"author":{"gitId":"-"},"content":"                  modalContent \u003d \u0027Warning: you have less than 15 minutes before the submission deadline expires!\u0027;"},{"lineNumber":392,"author":{"gitId":"-"},"content":"                  this.simpleModalService.openInformationModal("},{"lineNumber":393,"author":{"gitId":"-"},"content":"                      \u0027Feedback Session Will Be Closing Soon!\u0027, SimpleModalType.WARNING, modalContent);"},{"lineNumber":394,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":395,"author":{"gitId":"-"},"content":"                break;"},{"lineNumber":396,"author":{"gitId":"-"},"content":"              case FeedbackSessionSubmissionStatus.CLOSED:"},{"lineNumber":397,"author":{"gitId":"-"},"content":"                this.isSubmissionFormsDisabled \u003d true;"},{"lineNumber":398,"author":{"gitId":"-"},"content":"                modalContent \u003d `\u003cp\u003e\u003cstrong\u003eFeedback Session is Closed\u003c/strong\u003e\u003c/p\u003e"},{"lineNumber":399,"author":{"gitId":"-"},"content":"                \u003cp\u003eYou can view the questions and any submitted responses"},{"lineNumber":400,"author":{"gitId":"-"},"content":"                for this feedback session but cannot submit new responses.\u003c/p\u003e`;"},{"lineNumber":401,"author":{"gitId":"-"},"content":"                this.simpleModalService.openInformationModal("},{"lineNumber":402,"author":{"gitId":"-"},"content":"                    \u0027Feedback Session Closed\u0027, SimpleModalType.WARNING, modalContent);"},{"lineNumber":403,"author":{"gitId":"-"},"content":"                break;"},{"lineNumber":404,"author":{"gitId":"-"},"content":"              case FeedbackSessionSubmissionStatus.GRACE_PERIOD:"},{"lineNumber":405,"author":{"gitId":"-"},"content":"              default:"},{"lineNumber":406,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":407,"author":{"gitId":"-"},"content":"          }"},{"lineNumber":408,"author":{"gitId":"-"},"content":""},{"lineNumber":409,"author":{"gitId":"-"},"content":"          this.loadFeedbackQuestions();"},{"lineNumber":410,"author":{"gitId":"-"},"content":""},{"lineNumber":411,"author":{"gitId":"-"},"content":"          // Display note on submission on mobile device"},{"lineNumber":412,"author":{"gitId":"-"},"content":"          const mobileDeviceWidth: number \u003d 768;"},{"lineNumber":413,"author":{"gitId":"-"},"content":"          if (this.feedbackSessionSubmissionStatus \u003d\u003d\u003d FeedbackSessionSubmissionStatus.OPEN"},{"lineNumber":414,"author":{"gitId":"-"},"content":"              \u0026\u0026 window.innerWidth \u003c mobileDeviceWidth) {"},{"lineNumber":415,"author":{"gitId":"-"},"content":"            const modalContent: string \u003d `Note that you can use the Submit button to save responses already entered,"},{"lineNumber":416,"author":{"gitId":"-"},"content":"              and continue to answer remaining questions after that."},{"lineNumber":417,"author":{"gitId":"-"},"content":"              You may also edit your submission any number of times before the closing time of this session.`;"},{"lineNumber":418,"author":{"gitId":"-"},"content":"            this.simpleModalService.openInformationModal("},{"lineNumber":419,"author":{"gitId":"-"},"content":"                \u0027Note On Submission\u0027, SimpleModalType.INFO, modalContent);"},{"lineNumber":420,"author":{"gitId":"-"},"content":"          }"},{"lineNumber":421,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":422,"author":{"gitId":"-"},"content":"        error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":423,"author":{"gitId":"-"},"content":"          if (resp.status \u003d\u003d\u003d 404) {"},{"lineNumber":424,"author":{"gitId":"-"},"content":"            const message \u003d \u0027The session does not exist \u0027"},{"lineNumber":425,"author":{"gitId":"-"},"content":"                + \u0027(most likely deleted by an instructor after the submission link was sent).\u0027;"},{"lineNumber":426,"author":{"gitId":"-"},"content":"            this.simpleModalService.openInformationModal(\u0027Feedback Session Does Not Exist!\u0027, SimpleModalType.DANGER,"},{"lineNumber":427,"author":{"gitId":"-"},"content":"                message,"},{"lineNumber":428,"author":{"gitId":"-"},"content":"                {"},{"lineNumber":429,"author":{"gitId":"-"},"content":"                  onClosed: () \u003d\u003e this.navigationService.navigateByURL("},{"lineNumber":430,"author":{"gitId":"-"},"content":"                      this.loggedInUser ? `/web/${this.entityType}/home` : \u0027/web/front/home\u0027),"},{"lineNumber":431,"author":{"gitId":"-"},"content":"                },"},{"lineNumber":432,"author":{"gitId":"-"},"content":"                { backdrop: \u0027static\u0027 });"},{"lineNumber":433,"author":{"gitId":"-"},"content":"          } else if (resp.status \u003d\u003d\u003d 403) {"},{"lineNumber":434,"author":{"gitId":"-"},"content":"            if (loginRequired \u0026\u0026 !auth.user) {"},{"lineNumber":435,"author":{"gitId":"-"},"content":"              // There is no logged in user for a valid, used registration key, redirect to login page"},{"lineNumber":436,"author":{"gitId":"-"},"content":"              if (this.entityType \u003d\u003d\u003d \u0027student\u0027) {"},{"lineNumber":437,"author":{"gitId":"-"},"content":"                window.location.href \u003d `${this.backendUrl}${auth.studentLoginUrl}`;"},{"lineNumber":438,"author":{"gitId":"-"},"content":"              } else if (this.entityType \u003d\u003d\u003d \u0027instructor\u0027) {"},{"lineNumber":439,"author":{"gitId":"-"},"content":"                window.location.href \u003d `${this.backendUrl}${auth.instructorLoginUrl}`;"},{"lineNumber":440,"author":{"gitId":"-"},"content":"              }"},{"lineNumber":441,"author":{"gitId":"-"},"content":"            } else {"},{"lineNumber":442,"author":{"gitId":"-"},"content":"              this.simpleModalService.openInformationModal(\u0027Not Authorised To Access!\u0027, SimpleModalType.DANGER,"},{"lineNumber":443,"author":{"gitId":"-"},"content":"                  resp.error.message,"},{"lineNumber":444,"author":{"gitId":"-"},"content":"                  {"},{"lineNumber":445,"author":{"gitId":"-"},"content":"                    onClosed: () \u003d\u003e this.navigationService.navigateByURL("},{"lineNumber":446,"author":{"gitId":"-"},"content":"                        this.loggedInUser ? `/web/${this.entityType}/home` : \u0027/web/front/home\u0027),"},{"lineNumber":447,"author":{"gitId":"-"},"content":"                  },"},{"lineNumber":448,"author":{"gitId":"-"},"content":"                  { backdrop: \u0027static\u0027 });"},{"lineNumber":449,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":450,"author":{"gitId":"-"},"content":"          } else {"},{"lineNumber":451,"author":{"gitId":"-"},"content":"            this.navigationService.navigateWithErrorMessage("},{"lineNumber":452,"author":{"gitId":"-"},"content":"                `/web/${this.entityType}/home`, resp.error.message);"},{"lineNumber":453,"author":{"gitId":"-"},"content":"          }"},{"lineNumber":454,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":455,"author":{"gitId":"-"},"content":"      });"},{"lineNumber":456,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":457,"author":{"gitId":"-"},"content":""},{"lineNumber":458,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":459,"author":{"gitId":"-"},"content":"   * Loads feedback questions to submit."},{"lineNumber":460,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":461,"author":{"gitId":"-"},"content":"  loadFeedbackQuestions(): void {"},{"lineNumber":462,"author":{"gitId":"-"},"content":"    this.isFeedbackSessionQuestionsLoading \u003d true;"},{"lineNumber":463,"author":{"gitId":"-"},"content":"    this.questionSubmissionForms \u003d [];"},{"lineNumber":464,"author":{"gitId":"-"},"content":"    this.feedbackQuestionsService.getFeedbackQuestions({"},{"lineNumber":465,"author":{"gitId":"-"},"content":"      courseId: this.courseId,"},{"lineNumber":466,"author":{"gitId":"-"},"content":"      feedbackSessionName: this.feedbackSessionName,"},{"lineNumber":467,"author":{"gitId":"-"},"content":"      intent: this.intent,"},{"lineNumber":468,"author":{"gitId":"-"},"content":"      key: this.regKey,"},{"lineNumber":469,"author":{"gitId":"-"},"content":"      moderatedPerson: this.moderatedPerson,"},{"lineNumber":470,"author":{"gitId":"-"},"content":"      previewAs: this.previewAsPerson,"},{"lineNumber":471,"author":{"gitId":"-"},"content":"    }).pipe(finalize(() \u003d\u003e {"},{"lineNumber":472,"author":{"gitId":"-"},"content":"      this.isFeedbackSessionQuestionsLoading \u003d false;"},{"lineNumber":473,"author":{"gitId":"-"},"content":"    }))"},{"lineNumber":474,"author":{"gitId":"-"},"content":"        .subscribe({"},{"lineNumber":475,"author":{"gitId":"-"},"content":"          next: (response: FeedbackQuestionsResponse) \u003d\u003e {"},{"lineNumber":476,"author":{"gitId":"-"},"content":"            response.questions.forEach((feedbackQuestion: FeedbackQuestion) \u003d\u003e {"},{"lineNumber":477,"author":{"gitId":"-"},"content":"              const model: QuestionSubmissionFormModel \u003d {"},{"lineNumber":478,"author":{"gitId":"-"},"content":"                isLoading: false,"},{"lineNumber":479,"author":{"gitId":"-"},"content":"                isLoaded: false,"},{"lineNumber":480,"author":{"gitId":"weiquu"},"content":"                isTabExpanded: true,"},{"lineNumber":481,"author":{"gitId":"-"},"content":"                feedbackQuestionId: feedbackQuestion.feedbackQuestionId,"},{"lineNumber":482,"author":{"gitId":"-"},"content":""},{"lineNumber":483,"author":{"gitId":"-"},"content":"                questionNumber: feedbackQuestion.questionNumber,"},{"lineNumber":484,"author":{"gitId":"-"},"content":"                questionBrief: feedbackQuestion.questionBrief,"},{"lineNumber":485,"author":{"gitId":"-"},"content":"                questionDescription: feedbackQuestion.questionDescription,"},{"lineNumber":486,"author":{"gitId":"-"},"content":""},{"lineNumber":487,"author":{"gitId":"-"},"content":"                giverType: feedbackQuestion.giverType,"},{"lineNumber":488,"author":{"gitId":"-"},"content":"                recipientType: feedbackQuestion.recipientType,"},{"lineNumber":489,"author":{"gitId":"-"},"content":"                recipientList: [],"},{"lineNumber":490,"author":{"gitId":"-"},"content":"                recipientSubmissionForms: [],"},{"lineNumber":491,"author":{"gitId":"-"},"content":""},{"lineNumber":492,"author":{"gitId":"-"},"content":"                questionType: feedbackQuestion.questionType,"},{"lineNumber":493,"author":{"gitId":"-"},"content":"                questionDetails: feedbackQuestion.questionDetails,"},{"lineNumber":494,"author":{"gitId":"-"},"content":""},{"lineNumber":495,"author":{"gitId":"-"},"content":"                numberOfEntitiesToGiveFeedbackToSetting: feedbackQuestion.numberOfEntitiesToGiveFeedbackToSetting,"},{"lineNumber":496,"author":{"gitId":"-"},"content":"                customNumberOfEntitiesToGiveFeedbackTo: feedbackQuestion.customNumberOfEntitiesToGiveFeedbackTo"},{"lineNumber":497,"author":{"gitId":"-"},"content":"                    ? feedbackQuestion.customNumberOfEntitiesToGiveFeedbackTo : 0,"},{"lineNumber":498,"author":{"gitId":"-"},"content":""},{"lineNumber":499,"author":{"gitId":"-"},"content":"                showGiverNameTo: feedbackQuestion.showGiverNameTo,"},{"lineNumber":500,"author":{"gitId":"-"},"content":"                showRecipientNameTo: feedbackQuestion.showRecipientNameTo,"},{"lineNumber":501,"author":{"gitId":"-"},"content":"                showResponsesTo: feedbackQuestion.showResponsesTo,"},{"lineNumber":502,"author":{"gitId":"-"},"content":"              };"},{"lineNumber":503,"author":{"gitId":"-"},"content":"              this.questionSubmissionForms.push(model);"},{"lineNumber":504,"author":{"gitId":"-"},"content":"            });"},{"lineNumber":505,"author":{"gitId":"-"},"content":""},{"lineNumber":506,"author":{"gitId":"-"},"content":"            this.isQuestionCountOne \u003d this.questionSubmissionForms.length \u003d\u003d\u003d 1;"},{"lineNumber":507,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":508,"author":{"gitId":"-"},"content":"          error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":509,"author":{"gitId":"-"},"content":"            this.handleError(resp);"},{"lineNumber":510,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":511,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":512,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":513,"author":{"gitId":"-"},"content":""},{"lineNumber":514,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":515,"author":{"gitId":"-"},"content":"   * Tracks the question submission form by feedback question id."},{"lineNumber":516,"author":{"gitId":"-"},"content":"   *"},{"lineNumber":517,"author":{"gitId":"-"},"content":"   * @see https://angular.io/api/common/NgForOf#properties"},{"lineNumber":518,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":519,"author":{"gitId":"-"},"content":"  trackQuestionSubmissionFormByFn(_: any, item: QuestionSubmissionFormModel): any {"},{"lineNumber":520,"author":{"gitId":"-"},"content":"    return item.feedbackQuestionId;"},{"lineNumber":521,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":522,"author":{"gitId":"-"},"content":""},{"lineNumber":523,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":524,"author":{"gitId":"-"},"content":"   * Loads the feedback question recipients for the question."},{"lineNumber":525,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":526,"author":{"gitId":"-"},"content":"  loadFeedbackQuestionRecipientsForQuestion(model: QuestionSubmissionFormModel): void {"},{"lineNumber":527,"author":{"gitId":"-"},"content":"    this.feedbackQuestionsService.loadFeedbackQuestionRecipients({"},{"lineNumber":528,"author":{"gitId":"-"},"content":"      questionId: model.feedbackQuestionId,"},{"lineNumber":529,"author":{"gitId":"-"},"content":"      intent: this.intent,"},{"lineNumber":530,"author":{"gitId":"-"},"content":"      key: this.regKey,"},{"lineNumber":531,"author":{"gitId":"-"},"content":"      moderatedPerson: this.moderatedPerson,"},{"lineNumber":532,"author":{"gitId":"-"},"content":"      previewAs: this.previewAsPerson,"},{"lineNumber":533,"author":{"gitId":"-"},"content":"    }).subscribe({"},{"lineNumber":534,"author":{"gitId":"-"},"content":"      next: (response: FeedbackQuestionRecipients) \u003d\u003e {"},{"lineNumber":535,"author":{"gitId":"-"},"content":"        response.recipients.forEach((recipient: FeedbackQuestionRecipient) \u003d\u003e {"},{"lineNumber":536,"author":{"gitId":"-"},"content":"          model.recipientList.push({"},{"lineNumber":537,"author":{"gitId":"-"},"content":"            recipientIdentifier: recipient.identifier,"},{"lineNumber":538,"author":{"gitId":"-"},"content":"            recipientName: recipient.name,"},{"lineNumber":539,"author":{"gitId":"-"},"content":"            recipientSection: recipient.section,"},{"lineNumber":540,"author":{"gitId":"-"},"content":"            recipientTeam: recipient.team,"},{"lineNumber":541,"author":{"gitId":"-"},"content":"          });"},{"lineNumber":542,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":543,"author":{"gitId":"-"},"content":""},{"lineNumber":544,"author":{"gitId":"-"},"content":"        if (this.previewAsPerson) {"},{"lineNumber":545,"author":{"gitId":"-"},"content":"          // don\u0027t load responses in preview mode"},{"lineNumber":546,"author":{"gitId":"-"},"content":"          // generate a list of empty response box"},{"lineNumber":547,"author":{"gitId":"-"},"content":"          const formMode: QuestionSubmissionFormMode \u003d this.getQuestionSubmissionFormMode(model);"},{"lineNumber":548,"author":{"gitId":"-"},"content":"          model.recipientList.forEach((recipient: FeedbackResponseRecipient) \u003d\u003e {"},{"lineNumber":549,"author":{"gitId":"-"},"content":"            if (formMode \u003d\u003d\u003d QuestionSubmissionFormMode.FLEXIBLE_RECIPIENT"},{"lineNumber":550,"author":{"gitId":"-"},"content":"                \u0026\u0026 model.recipientSubmissionForms.length \u003e\u003d model.customNumberOfEntitiesToGiveFeedbackTo) {"},{"lineNumber":551,"author":{"gitId":"-"},"content":"              return;"},{"lineNumber":552,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":553,"author":{"gitId":"-"},"content":""},{"lineNumber":554,"author":{"gitId":"-"},"content":"            let recipientIdentifier: string \u003d \u0027\u0027;"},{"lineNumber":555,"author":{"gitId":"-"},"content":"            if (formMode !\u003d\u003d QuestionSubmissionFormMode.FLEXIBLE_RECIPIENT) {"},{"lineNumber":556,"author":{"gitId":"-"},"content":"              recipientIdentifier \u003d recipient.recipientIdentifier;"},{"lineNumber":557,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":558,"author":{"gitId":"-"},"content":""},{"lineNumber":559,"author":{"gitId":"-"},"content":"            model.recipientSubmissionForms.push({"},{"lineNumber":560,"author":{"gitId":"-"},"content":"              recipientIdentifier,"},{"lineNumber":561,"author":{"gitId":"-"},"content":"              responseDetails: this.feedbackResponsesService.getDefaultFeedbackResponseDetails(model.questionType),"},{"lineNumber":562,"author":{"gitId":"-"},"content":"              responseId: \u0027\u0027,"},{"lineNumber":563,"author":{"gitId":"-"},"content":"              isValid: true,"},{"lineNumber":564,"author":{"gitId":"-"},"content":"            });"},{"lineNumber":565,"author":{"gitId":"-"},"content":"          });"},{"lineNumber":566,"author":{"gitId":"-"},"content":"          model.isLoading \u003d false;"},{"lineNumber":567,"author":{"gitId":"-"},"content":"          model.isLoaded \u003d true;"},{"lineNumber":568,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":569,"author":{"gitId":"-"},"content":"          this.loadFeedbackResponses(model);"},{"lineNumber":570,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":571,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":572,"author":{"gitId":"-"},"content":"      error: (resp: ErrorMessageOutput) \u003d\u003e this.statusMessageService.showErrorToast(resp.error.message),"},{"lineNumber":573,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":574,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":575,"author":{"gitId":"-"},"content":""},{"lineNumber":576,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":577,"author":{"gitId":"-"},"content":"   * Gets the form mode of the question submission form."},{"lineNumber":578,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":579,"author":{"gitId":"-"},"content":"  getQuestionSubmissionFormMode(model: QuestionSubmissionFormModel): QuestionSubmissionFormMode {"},{"lineNumber":580,"author":{"gitId":"-"},"content":"    const isNumberOfEntitiesToGiveFeedbackToSettingLimited: boolean \u003d"},{"lineNumber":581,"author":{"gitId":"-"},"content":"        (model.recipientType \u003d\u003d\u003d FeedbackParticipantType.STUDENTS"},{"lineNumber":582,"author":{"gitId":"-"},"content":"            || model.recipientType \u003d\u003d\u003d FeedbackParticipantType.STUDENTS_EXCLUDING_SELF"},{"lineNumber":583,"author":{"gitId":"-"},"content":"            || model.recipientType \u003d\u003d\u003d FeedbackParticipantType.STUDENTS_IN_SAME_SECTION"},{"lineNumber":584,"author":{"gitId":"-"},"content":"            || model.recipientType \u003d\u003d\u003d FeedbackParticipantType.TEAMS"},{"lineNumber":585,"author":{"gitId":"-"},"content":"            || model.recipientType \u003d\u003d\u003d FeedbackParticipantType.TEAMS_EXCLUDING_SELF"},{"lineNumber":586,"author":{"gitId":"-"},"content":"            || model.recipientType \u003d\u003d\u003d FeedbackParticipantType.TEAMS_IN_SAME_SECTION"},{"lineNumber":587,"author":{"gitId":"-"},"content":"            || model.recipientType \u003d\u003d\u003d FeedbackParticipantType.INSTRUCTORS)"},{"lineNumber":588,"author":{"gitId":"-"},"content":"        \u0026\u0026 model.numberOfEntitiesToGiveFeedbackToSetting \u003d\u003d\u003d NumberOfEntitiesToGiveFeedbackToSetting.CUSTOM"},{"lineNumber":589,"author":{"gitId":"-"},"content":"        \u0026\u0026 model.recipientList.length \u003e model.customNumberOfEntitiesToGiveFeedbackTo;"},{"lineNumber":590,"author":{"gitId":"-"},"content":""},{"lineNumber":591,"author":{"gitId":"-"},"content":"    return isNumberOfEntitiesToGiveFeedbackToSettingLimited"},{"lineNumber":592,"author":{"gitId":"-"},"content":"        ? QuestionSubmissionFormMode.FLEXIBLE_RECIPIENT : QuestionSubmissionFormMode.FIXED_RECIPIENT;"},{"lineNumber":593,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":594,"author":{"gitId":"-"},"content":""},{"lineNumber":595,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":596,"author":{"gitId":"-"},"content":"   * Loads the responses of the feedback question to {@recipientSubmissionForms} in the model."},{"lineNumber":597,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":598,"author":{"gitId":"-"},"content":"  loadFeedbackResponses(model: QuestionSubmissionFormModel): void {"},{"lineNumber":599,"author":{"gitId":"-"},"content":"    this.feedbackResponsesService.getFeedbackResponse({"},{"lineNumber":600,"author":{"gitId":"-"},"content":"      questionId: model.feedbackQuestionId,"},{"lineNumber":601,"author":{"gitId":"-"},"content":"      intent: this.intent,"},{"lineNumber":602,"author":{"gitId":"-"},"content":"      key: this.regKey,"},{"lineNumber":603,"author":{"gitId":"-"},"content":"      moderatedPerson: this.moderatedPerson,"},{"lineNumber":604,"author":{"gitId":"-"},"content":"    }).pipe(finalize(() \u003d\u003e {"},{"lineNumber":605,"author":{"gitId":"-"},"content":"      model.isLoading \u003d false;"},{"lineNumber":606,"author":{"gitId":"-"},"content":"      model.isLoaded \u003d true;"},{"lineNumber":607,"author":{"gitId":"-"},"content":"    }))"},{"lineNumber":608,"author":{"gitId":"-"},"content":"      .subscribe({"},{"lineNumber":609,"author":{"gitId":"-"},"content":"        next: (existingResponses: FeedbackResponsesResponse) \u003d\u003e {"},{"lineNumber":610,"author":{"gitId":"-"},"content":"          if (this.getQuestionSubmissionFormMode(model) \u003d\u003d\u003d QuestionSubmissionFormMode.FIXED_RECIPIENT) {"},{"lineNumber":611,"author":{"gitId":"-"},"content":"            // need to generate a full list of submission forms"},{"lineNumber":612,"author":{"gitId":"-"},"content":"            model.recipientList.forEach((recipient: FeedbackResponseRecipient) \u003d\u003e {"},{"lineNumber":613,"author":{"gitId":"-"},"content":"              const matchedExistingResponse: FeedbackResponse | undefined \u003d"},{"lineNumber":614,"author":{"gitId":"-"},"content":"                  existingResponses.responses.find("},{"lineNumber":615,"author":{"gitId":"-"},"content":"                      (response: FeedbackResponse) \u003d\u003e response.recipientIdentifier \u003d\u003d\u003d recipient.recipientIdentifier);"},{"lineNumber":616,"author":{"gitId":"-"},"content":"              const submissionForm: FeedbackResponseRecipientSubmissionFormModel \u003d {"},{"lineNumber":617,"author":{"gitId":"-"},"content":"                recipientIdentifier: recipient.recipientIdentifier,"},{"lineNumber":618,"author":{"gitId":"-"},"content":"                responseDetails: matchedExistingResponse"},{"lineNumber":619,"author":{"gitId":"-"},"content":"                    ? matchedExistingResponse.responseDetails"},{"lineNumber":620,"author":{"gitId":"-"},"content":"                    : this.feedbackResponsesService.getDefaultFeedbackResponseDetails(model.questionType),"},{"lineNumber":621,"author":{"gitId":"-"},"content":"                responseId: matchedExistingResponse ? matchedExistingResponse.feedbackResponseId : \u0027\u0027,"},{"lineNumber":622,"author":{"gitId":"-"},"content":"                isValid: true,"},{"lineNumber":623,"author":{"gitId":"-"},"content":"              };"},{"lineNumber":624,"author":{"gitId":"-"},"content":"              if (matchedExistingResponse \u0026\u0026 matchedExistingResponse.giverComment) {"},{"lineNumber":625,"author":{"gitId":"-"},"content":"                submissionForm.commentByGiver \u003d this.getCommentModel("},{"lineNumber":626,"author":{"gitId":"-"},"content":"                    matchedExistingResponse.giverComment, recipient.recipientIdentifier);"},{"lineNumber":627,"author":{"gitId":"-"},"content":"              }"},{"lineNumber":628,"author":{"gitId":"-"},"content":"              model.recipientSubmissionForms.push(submissionForm);"},{"lineNumber":629,"author":{"gitId":"-"},"content":"            });"},{"lineNumber":630,"author":{"gitId":"-"},"content":"          }"},{"lineNumber":631,"author":{"gitId":"-"},"content":""},{"lineNumber":632,"author":{"gitId":"-"},"content":"          if (this.getQuestionSubmissionFormMode(model) \u003d\u003d\u003d QuestionSubmissionFormMode.FLEXIBLE_RECIPIENT) {"},{"lineNumber":633,"author":{"gitId":"-"},"content":"            // need to generate limited number of submission forms"},{"lineNumber":634,"author":{"gitId":"-"},"content":"            let numberOfRecipientSubmissionFormsNeeded: number \u003d"},{"lineNumber":635,"author":{"gitId":"-"},"content":"                model.customNumberOfEntitiesToGiveFeedbackTo - existingResponses.responses.length;"},{"lineNumber":636,"author":{"gitId":"-"},"content":""},{"lineNumber":637,"author":{"gitId":"-"},"content":"            existingResponses.responses.forEach((response: FeedbackResponse) \u003d\u003e {"},{"lineNumber":638,"author":{"gitId":"-"},"content":"              const submissionForm: FeedbackResponseRecipientSubmissionFormModel \u003d {"},{"lineNumber":639,"author":{"gitId":"-"},"content":"                recipientIdentifier: response.recipientIdentifier,"},{"lineNumber":640,"author":{"gitId":"-"},"content":"                responseDetails: response.responseDetails,"},{"lineNumber":641,"author":{"gitId":"-"},"content":"                responseId: response.feedbackResponseId,"},{"lineNumber":642,"author":{"gitId":"-"},"content":"                isValid: true,"},{"lineNumber":643,"author":{"gitId":"-"},"content":"              };"},{"lineNumber":644,"author":{"gitId":"-"},"content":"              if (response.giverComment) {"},{"lineNumber":645,"author":{"gitId":"-"},"content":"                submissionForm.commentByGiver \u003d this.getCommentModel("},{"lineNumber":646,"author":{"gitId":"-"},"content":"                    response.giverComment, response.recipientIdentifier);"},{"lineNumber":647,"author":{"gitId":"-"},"content":"              }"},{"lineNumber":648,"author":{"gitId":"-"},"content":"              model.recipientSubmissionForms.push(submissionForm);"},{"lineNumber":649,"author":{"gitId":"-"},"content":"            });"},{"lineNumber":650,"author":{"gitId":"-"},"content":""},{"lineNumber":651,"author":{"gitId":"-"},"content":"            // generate empty submission forms"},{"lineNumber":652,"author":{"gitId":"-"},"content":"            while (numberOfRecipientSubmissionFormsNeeded \u003e 0) {"},{"lineNumber":653,"author":{"gitId":"-"},"content":"              model.recipientSubmissionForms.push({"},{"lineNumber":654,"author":{"gitId":"-"},"content":"                recipientIdentifier: \u0027\u0027,"},{"lineNumber":655,"author":{"gitId":"-"},"content":"                responseDetails: this.feedbackResponsesService.getDefaultFeedbackResponseDetails(model.questionType),"},{"lineNumber":656,"author":{"gitId":"-"},"content":"                responseId: \u0027\u0027,"},{"lineNumber":657,"author":{"gitId":"-"},"content":"                isValid: true,"},{"lineNumber":658,"author":{"gitId":"-"},"content":"              });"},{"lineNumber":659,"author":{"gitId":"-"},"content":"              numberOfRecipientSubmissionFormsNeeded -\u003d 1;"},{"lineNumber":660,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":661,"author":{"gitId":"-"},"content":"          }"},{"lineNumber":662,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":663,"author":{"gitId":"-"},"content":"        error: (resp: ErrorMessageOutput) \u003d\u003e this.statusMessageService.showErrorToast(resp.error.message),"},{"lineNumber":664,"author":{"gitId":"-"},"content":"      });"},{"lineNumber":665,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":666,"author":{"gitId":"-"},"content":""},{"lineNumber":667,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":668,"author":{"gitId":"-"},"content":"   * Gets the comment model for a given comment."},{"lineNumber":669,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":670,"author":{"gitId":"-"},"content":"  getCommentModel(comment: FeedbackResponseComment, recipientIdentifier: string): CommentRowModel {"},{"lineNumber":671,"author":{"gitId":"-"},"content":"    return {"},{"lineNumber":672,"author":{"gitId":"-"},"content":"      originalComment: comment,"},{"lineNumber":673,"author":{"gitId":"-"},"content":"      originalRecipientIdentifier: recipientIdentifier,"},{"lineNumber":674,"author":{"gitId":"-"},"content":"      commentEditFormModel: {"},{"lineNumber":675,"author":{"gitId":"-"},"content":"        commentText: comment.commentText,"},{"lineNumber":676,"author":{"gitId":"-"},"content":"        // the participant comment shall not use custom visibilities"},{"lineNumber":677,"author":{"gitId":"-"},"content":"        isUsingCustomVisibilities: false,"},{"lineNumber":678,"author":{"gitId":"-"},"content":"        showCommentTo: [],"},{"lineNumber":679,"author":{"gitId":"-"},"content":"        showGiverNameTo: [],"},{"lineNumber":680,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":681,"author":{"gitId":"-"},"content":"      timezone: this.feedbackSessionTimezone,"},{"lineNumber":682,"author":{"gitId":"-"},"content":"      isEditing: false,"},{"lineNumber":683,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":684,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":685,"author":{"gitId":"-"},"content":""},{"lineNumber":686,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":687,"author":{"gitId":"-"},"content":"   * Checks whether there is any submission forms in the current page."},{"lineNumber":688,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":689,"author":{"gitId":"-"},"content":"  get questionsNeedingSubmission(): QuestionSubmissionFormModel[] {"},{"lineNumber":690,"author":{"gitId":"-"},"content":"    return this.questionSubmissionForms"},{"lineNumber":691,"author":{"gitId":"-"},"content":"        .filter((model: QuestionSubmissionFormModel) \u003d\u003e model.recipientSubmissionForms.length !\u003d\u003d 0);"},{"lineNumber":692,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":693,"author":{"gitId":"-"},"content":""},{"lineNumber":694,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":695,"author":{"gitId":"-"},"content":"   * Saves the feedback responses for the specific questions."},{"lineNumber":696,"author":{"gitId":"-"},"content":"   *"},{"lineNumber":697,"author":{"gitId":"-"},"content":"   * \u003cp\u003eAll empty feedback response will be deleted; For non-empty responses, update/create them if necessary."},{"lineNumber":698,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":699,"author":{"gitId":"-"},"content":"  saveFeedbackResponses(questionSubmissionForms: QuestionSubmissionFormModel[]): void {"},{"lineNumber":700,"author":{"gitId":"domlimm"},"content":"    this.isSubmitAllClicked \u003d true;"},{"lineNumber":701,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":702,"author":{"gitId":"-"},"content":"    const notYetAnsweredQuestions: Set\u003cnumber\u003e \u003d new Set();"},{"lineNumber":703,"author":{"gitId":"-"},"content":"    const requestIds: Record\u003cstring, string\u003e \u003d {};"},{"lineNumber":704,"author":{"gitId":"-"},"content":"    const answers: Record\u003cstring, FeedbackResponse[]\u003e \u003d {};"},{"lineNumber":705,"author":{"gitId":"-"},"content":"    const failToSaveQuestions: Record\u003cnumber, string\u003e \u003d {}; // Map of question number to error message"},{"lineNumber":706,"author":{"gitId":"-"},"content":"    const savingRequests: Observable\u003cany\u003e[] \u003d [];"},{"lineNumber":707,"author":{"gitId":"-"},"content":""},{"lineNumber":708,"author":{"gitId":"-"},"content":"    this.logService.createFeedbackSessionLog({"},{"lineNumber":709,"author":{"gitId":"-"},"content":"      courseId: this.courseId,"},{"lineNumber":710,"author":{"gitId":"-"},"content":"      feedbackSessionName: this.feedbackSessionName,"},{"lineNumber":711,"author":{"gitId":"-"},"content":"      studentEmail: this.personEmail,"},{"lineNumber":712,"author":{"gitId":"-"},"content":"      logType: FeedbackSessionLogType.SUBMISSION,"},{"lineNumber":713,"author":{"gitId":"-"},"content":"    }).subscribe({"},{"lineNumber":714,"author":{"gitId":"-"},"content":"      next: () \u003d\u003e {},"},{"lineNumber":715,"author":{"gitId":"-"},"content":"      error: () \u003d\u003e {"},{"lineNumber":716,"author":{"gitId":"-"},"content":"        this.statusMessageService.showWarningToast(\u0027Failed to log feedback session submission\u0027);"},{"lineNumber":717,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":718,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":719,"author":{"gitId":"-"},"content":""},{"lineNumber":720,"author":{"gitId":"-"},"content":"    questionSubmissionForms.forEach((questionSubmissionFormModel: QuestionSubmissionFormModel) \u003d\u003e {"},{"lineNumber":721,"author":{"gitId":"-"},"content":"      let isQuestionFullyAnswered: boolean \u003d true;"},{"lineNumber":722,"author":{"gitId":"-"},"content":""},{"lineNumber":723,"author":{"gitId":"-"},"content":"      const responses: FeedbackResponseRequest[] \u003d [];"},{"lineNumber":724,"author":{"gitId":"-"},"content":""},{"lineNumber":725,"author":{"gitId":"-"},"content":"      questionSubmissionFormModel.recipientSubmissionForms"},{"lineNumber":726,"author":{"gitId":"-"},"content":"          .forEach((recipientSubmissionFormModel: FeedbackResponseRecipientSubmissionFormModel) \u003d\u003e {"},{"lineNumber":727,"author":{"gitId":"-"},"content":"            if (!recipientSubmissionFormModel.isValid) {"},{"lineNumber":728,"author":{"gitId":"-"},"content":"              failToSaveQuestions[questionSubmissionFormModel.questionNumber] \u003d"},{"lineNumber":729,"author":{"gitId":"-"},"content":"                  \u0027Invalid responses provided. Please check question constraints.\u0027;"},{"lineNumber":730,"author":{"gitId":"-"},"content":"              return;"},{"lineNumber":731,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":732,"author":{"gitId":"-"},"content":"            const isFeedbackResponseDetailsEmpty: boolean \u003d"},{"lineNumber":733,"author":{"gitId":"-"},"content":"                this.feedbackResponsesService.isFeedbackResponseDetailsEmpty("},{"lineNumber":734,"author":{"gitId":"-"},"content":"                    questionSubmissionFormModel.questionType, recipientSubmissionFormModel.responseDetails);"},{"lineNumber":735,"author":{"gitId":"-"},"content":""},{"lineNumber":736,"author":{"gitId":"-"},"content":"            if (!isFeedbackResponseDetailsEmpty) {"},{"lineNumber":737,"author":{"gitId":"-"},"content":"              responses.push({"},{"lineNumber":738,"author":{"gitId":"-"},"content":"                recipient: recipientSubmissionFormModel.recipientIdentifier,"},{"lineNumber":739,"author":{"gitId":"-"},"content":"                responseDetails: recipientSubmissionFormModel.responseDetails,"},{"lineNumber":740,"author":{"gitId":"-"},"content":"              });"},{"lineNumber":741,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":742,"author":{"gitId":"-"},"content":"          });"},{"lineNumber":743,"author":{"gitId":"-"},"content":""},{"lineNumber":744,"author":{"gitId":"-"},"content":"      isQuestionFullyAnswered \u003d responses.length \u003e 0;"},{"lineNumber":745,"author":{"gitId":"-"},"content":""},{"lineNumber":746,"author":{"gitId":"-"},"content":"      if (!failToSaveQuestions[questionSubmissionFormModel.questionNumber]) {"},{"lineNumber":747,"author":{"gitId":"-"},"content":"        savingRequests.push("},{"lineNumber":748,"author":{"gitId":"-"},"content":"            this.feedbackResponsesService.submitFeedbackResponses(questionSubmissionFormModel.feedbackQuestionId, {"},{"lineNumber":749,"author":{"gitId":"-"},"content":"              responses,"},{"lineNumber":750,"author":{"gitId":"-"},"content":"            }, {"},{"lineNumber":751,"author":{"gitId":"-"},"content":"              intent: this.intent,"},{"lineNumber":752,"author":{"gitId":"-"},"content":"              key: this.regKey,"},{"lineNumber":753,"author":{"gitId":"-"},"content":"              moderatedperson: this.moderatedPerson,"},{"lineNumber":754,"author":{"gitId":"-"},"content":"            }).pipe("},{"lineNumber":755,"author":{"gitId":"-"},"content":"                tap((resp: FeedbackResponses) \u003d\u003e {"},{"lineNumber":756,"author":{"gitId":"-"},"content":"                  const responsesMap: Record\u003cstring, FeedbackResponse\u003e \u003d {};"},{"lineNumber":757,"author":{"gitId":"-"},"content":"                  resp.responses.forEach((response: FeedbackResponse) \u003d\u003e {"},{"lineNumber":758,"author":{"gitId":"-"},"content":"                    responsesMap[response.recipientIdentifier] \u003d response;"},{"lineNumber":759,"author":{"gitId":"-"},"content":"                    answers[questionSubmissionFormModel.feedbackQuestionId] \u003d"},{"lineNumber":760,"author":{"gitId":"-"},"content":"                        answers[questionSubmissionFormModel.feedbackQuestionId] || [];"},{"lineNumber":761,"author":{"gitId":"-"},"content":"                    answers[questionSubmissionFormModel.feedbackQuestionId].push(response);"},{"lineNumber":762,"author":{"gitId":"-"},"content":"                  });"},{"lineNumber":763,"author":{"gitId":"-"},"content":"                  requestIds[questionSubmissionFormModel.feedbackQuestionId] \u003d resp.requestId || \u0027\u0027;"},{"lineNumber":764,"author":{"gitId":"-"},"content":""},{"lineNumber":765,"author":{"gitId":"-"},"content":"                  questionSubmissionFormModel.recipientSubmissionForms"},{"lineNumber":766,"author":{"gitId":"-"},"content":"                      .forEach((recipientSubmissionFormModel: FeedbackResponseRecipientSubmissionFormModel) \u003d\u003e {"},{"lineNumber":767,"author":{"gitId":"-"},"content":"                        if (responsesMap[recipientSubmissionFormModel.recipientIdentifier]) {"},{"lineNumber":768,"author":{"gitId":"-"},"content":"                          const correspondingResp: FeedbackResponse \u003d"},{"lineNumber":769,"author":{"gitId":"-"},"content":"                              responsesMap[recipientSubmissionFormModel.recipientIdentifier];"},{"lineNumber":770,"author":{"gitId":"-"},"content":"                          recipientSubmissionFormModel.responseId \u003d correspondingResp.feedbackResponseId;"},{"lineNumber":771,"author":{"gitId":"-"},"content":"                          recipientSubmissionFormModel.responseDetails \u003d correspondingResp.responseDetails;"},{"lineNumber":772,"author":{"gitId":"-"},"content":"                          recipientSubmissionFormModel.recipientIdentifier \u003d correspondingResp.recipientIdentifier;"},{"lineNumber":773,"author":{"gitId":"-"},"content":"                        } else {"},{"lineNumber":774,"author":{"gitId":"-"},"content":"                          recipientSubmissionFormModel.responseId \u003d \u0027\u0027;"},{"lineNumber":775,"author":{"gitId":"-"},"content":"                          recipientSubmissionFormModel.commentByGiver \u003d undefined;"},{"lineNumber":776,"author":{"gitId":"-"},"content":"                        }"},{"lineNumber":777,"author":{"gitId":"-"},"content":"                      });"},{"lineNumber":778,"author":{"gitId":"-"},"content":"                }),"},{"lineNumber":779,"author":{"gitId":"-"},"content":"                switchMap(() \u003d\u003e"},{"lineNumber":780,"author":{"gitId":"-"},"content":"                    forkJoin(questionSubmissionFormModel.recipientSubmissionForms"},{"lineNumber":781,"author":{"gitId":"-"},"content":"                        .map((recipientSubmissionFormModel: FeedbackResponseRecipientSubmissionFormModel) \u003d\u003e"},{"lineNumber":782,"author":{"gitId":"-"},"content":"                            this.createCommentRequest(recipientSubmissionFormModel))),"},{"lineNumber":783,"author":{"gitId":"-"},"content":"                ),"},{"lineNumber":784,"author":{"gitId":"-"},"content":"                catchError((error: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":785,"author":{"gitId":"-"},"content":"                  failToSaveQuestions[questionSubmissionFormModel.questionNumber] \u003d error.error.message;"},{"lineNumber":786,"author":{"gitId":"-"},"content":"                  return of(error);"},{"lineNumber":787,"author":{"gitId":"-"},"content":"                }),"},{"lineNumber":788,"author":{"gitId":"-"},"content":"            ),"},{"lineNumber":789,"author":{"gitId":"-"},"content":"        );"},{"lineNumber":790,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":791,"author":{"gitId":"-"},"content":""},{"lineNumber":792,"author":{"gitId":"-"},"content":"      if (!isQuestionFullyAnswered) {"},{"lineNumber":793,"author":{"gitId":"-"},"content":"        notYetAnsweredQuestions.add(questionSubmissionFormModel.questionNumber);"},{"lineNumber":794,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":795,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":796,"author":{"gitId":"-"},"content":""},{"lineNumber":797,"author":{"gitId":"-"},"content":"    this.isSavingResponses \u003d true;"},{"lineNumber":798,"author":{"gitId":"-"},"content":"    forkJoin(savingRequests).pipe("},{"lineNumber":799,"author":{"gitId":"-"},"content":"        finalize(() \u003d\u003e {"},{"lineNumber":800,"author":{"gitId":"-"},"content":"          this.isSavingResponses \u003d false;"},{"lineNumber":801,"author":{"gitId":"-"},"content":""},{"lineNumber":802,"author":{"gitId":"-"},"content":"          const modalRef: NgbModalRef \u003d this.ngbModal.open(SavingCompleteModalComponent);"},{"lineNumber":803,"author":{"gitId":"-"},"content":"          modalRef.componentInstance.requestIds \u003d requestIds;"},{"lineNumber":804,"author":{"gitId":"-"},"content":"          modalRef.componentInstance.courseId \u003d this.courseId;"},{"lineNumber":805,"author":{"gitId":"-"},"content":"          modalRef.componentInstance.feedbackSessionName \u003d this.feedbackSessionName;"},{"lineNumber":806,"author":{"gitId":"-"},"content":"          modalRef.componentInstance.feedbackSessionTimezone \u003d this.feedbackSessionTimezone;"},{"lineNumber":807,"author":{"gitId":"-"},"content":"          modalRef.componentInstance.personEmail \u003d this.personEmail;"},{"lineNumber":808,"author":{"gitId":"-"},"content":"          modalRef.componentInstance.personName \u003d this.personName;"},{"lineNumber":809,"author":{"gitId":"-"},"content":"          modalRef.componentInstance.questions \u003d questionSubmissionForms;"},{"lineNumber":810,"author":{"gitId":"-"},"content":"          modalRef.componentInstance.answers \u003d answers;"},{"lineNumber":811,"author":{"gitId":"-"},"content":"          modalRef.componentInstance.notYetAnsweredQuestions \u003d Array.from(notYetAnsweredQuestions.values());"},{"lineNumber":812,"author":{"gitId":"-"},"content":"          modalRef.componentInstance.failToSaveQuestions \u003d failToSaveQuestions;"},{"lineNumber":813,"author":{"gitId":"-"},"content":"        }),"},{"lineNumber":814,"author":{"gitId":"-"},"content":"    ).subscribe();"},{"lineNumber":815,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":816,"author":{"gitId":"-"},"content":""},{"lineNumber":817,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":818,"author":{"gitId":"-"},"content":"   * Creates comment request."},{"lineNumber":819,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":820,"author":{"gitId":"-"},"content":"  createCommentRequest(recipientSubmissionFormModel: FeedbackResponseRecipientSubmissionFormModel): Observable\u003cany\u003e {"},{"lineNumber":821,"author":{"gitId":"-"},"content":"    if (!recipientSubmissionFormModel.responseId) {"},{"lineNumber":822,"author":{"gitId":"-"},"content":"      // responseId not set, cannot set comment"},{"lineNumber":823,"author":{"gitId":"-"},"content":"      return of({});"},{"lineNumber":824,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":825,"author":{"gitId":"-"},"content":"    if (!recipientSubmissionFormModel.commentByGiver) {"},{"lineNumber":826,"author":{"gitId":"-"},"content":"      // comment not given, do nothing"},{"lineNumber":827,"author":{"gitId":"-"},"content":"      return of({});"},{"lineNumber":828,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":829,"author":{"gitId":"-"},"content":""},{"lineNumber":830,"author":{"gitId":"-"},"content":"    const isSameRecipient \u003d recipientSubmissionFormModel.recipientIdentifier"},{"lineNumber":831,"author":{"gitId":"-"},"content":"        \u003d\u003d\u003d recipientSubmissionFormModel.commentByGiver.originalRecipientIdentifier;"},{"lineNumber":832,"author":{"gitId":"-"},"content":""},{"lineNumber":833,"author":{"gitId":"-"},"content":"    if (!recipientSubmissionFormModel.commentByGiver.originalComment || !isSameRecipient) {"},{"lineNumber":834,"author":{"gitId":"-"},"content":"      // comment is new or original comment deleted because recipient has changed"},{"lineNumber":835,"author":{"gitId":"-"},"content":""},{"lineNumber":836,"author":{"gitId":"-"},"content":"      if (recipientSubmissionFormModel.commentByGiver.commentEditFormModel.commentText \u003d\u003d\u003d \u0027\u0027) {"},{"lineNumber":837,"author":{"gitId":"-"},"content":"        // new comment is empty"},{"lineNumber":838,"author":{"gitId":"-"},"content":"        recipientSubmissionFormModel.commentByGiver \u003d undefined;"},{"lineNumber":839,"author":{"gitId":"-"},"content":"        return of({});"},{"lineNumber":840,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":841,"author":{"gitId":"-"},"content":""},{"lineNumber":842,"author":{"gitId":"-"},"content":"      // create new comment"},{"lineNumber":843,"author":{"gitId":"-"},"content":"      return this.commentService.createComment({"},{"lineNumber":844,"author":{"gitId":"-"},"content":"        commentText: recipientSubmissionFormModel.commentByGiver.commentEditFormModel.commentText,"},{"lineNumber":845,"author":{"gitId":"-"},"content":"        // we ignore the fields in comment edit model as participant comment"},{"lineNumber":846,"author":{"gitId":"-"},"content":"        // will follow visibilities from question by design"},{"lineNumber":847,"author":{"gitId":"-"},"content":"        showCommentTo: [],"},{"lineNumber":848,"author":{"gitId":"-"},"content":"        showGiverNameTo: [],"},{"lineNumber":849,"author":{"gitId":"-"},"content":"      }, recipientSubmissionFormModel.responseId, this.intent, {"},{"lineNumber":850,"author":{"gitId":"-"},"content":"        key: this.regKey,"},{"lineNumber":851,"author":{"gitId":"-"},"content":"        moderatedperson: this.moderatedPerson,"},{"lineNumber":852,"author":{"gitId":"-"},"content":"      }).pipe("},{"lineNumber":853,"author":{"gitId":"-"},"content":"          tap((comment: FeedbackResponseComment) \u003d\u003e {"},{"lineNumber":854,"author":{"gitId":"-"},"content":"            recipientSubmissionFormModel.commentByGiver \u003d this.getCommentModel("},{"lineNumber":855,"author":{"gitId":"-"},"content":"                comment, recipientSubmissionFormModel.recipientIdentifier);"},{"lineNumber":856,"author":{"gitId":"-"},"content":"          }),"},{"lineNumber":857,"author":{"gitId":"-"},"content":"      );"},{"lineNumber":858,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":859,"author":{"gitId":"-"},"content":""},{"lineNumber":860,"author":{"gitId":"-"},"content":"    // existing comment"},{"lineNumber":861,"author":{"gitId":"-"},"content":""},{"lineNumber":862,"author":{"gitId":"-"},"content":"    if (recipientSubmissionFormModel.commentByGiver.commentEditFormModel.commentText \u003d\u003d\u003d \u0027\u0027) {"},{"lineNumber":863,"author":{"gitId":"-"},"content":"      // comment is empty, create delete request"},{"lineNumber":864,"author":{"gitId":"-"},"content":"      return this.commentService.deleteComment("},{"lineNumber":865,"author":{"gitId":"-"},"content":"          recipientSubmissionFormModel.commentByGiver.originalComment.feedbackResponseCommentId, this.intent, {"},{"lineNumber":866,"author":{"gitId":"-"},"content":"            key: this.regKey,"},{"lineNumber":867,"author":{"gitId":"-"},"content":"            moderatedperson: this.moderatedPerson,"},{"lineNumber":868,"author":{"gitId":"-"},"content":"          })"},{"lineNumber":869,"author":{"gitId":"-"},"content":"          .pipe("},{"lineNumber":870,"author":{"gitId":"-"},"content":"              tap(() \u003d\u003e {"},{"lineNumber":871,"author":{"gitId":"-"},"content":"                recipientSubmissionFormModel.commentByGiver \u003d undefined;"},{"lineNumber":872,"author":{"gitId":"-"},"content":"              }));"},{"lineNumber":873,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":874,"author":{"gitId":"-"},"content":""},{"lineNumber":875,"author":{"gitId":"-"},"content":"    // update comment"},{"lineNumber":876,"author":{"gitId":"-"},"content":"    return this.commentService.updateComment({"},{"lineNumber":877,"author":{"gitId":"-"},"content":"      commentText: recipientSubmissionFormModel.commentByGiver.commentEditFormModel.commentText,"},{"lineNumber":878,"author":{"gitId":"-"},"content":"      // we ignore the fields in comment edit model as participant comment"},{"lineNumber":879,"author":{"gitId":"-"},"content":"      // will follow visibilities from question by design"},{"lineNumber":880,"author":{"gitId":"-"},"content":"      showCommentTo: [],"},{"lineNumber":881,"author":{"gitId":"-"},"content":"      showGiverNameTo: [],"},{"lineNumber":882,"author":{"gitId":"-"},"content":"    }, recipientSubmissionFormModel.commentByGiver.originalComment.feedbackResponseCommentId, this.intent, {"},{"lineNumber":883,"author":{"gitId":"-"},"content":"      key: this.regKey,"},{"lineNumber":884,"author":{"gitId":"-"},"content":"      moderatedperson: this.moderatedPerson,"},{"lineNumber":885,"author":{"gitId":"-"},"content":"    }).pipe("},{"lineNumber":886,"author":{"gitId":"-"},"content":"        tap((comment: FeedbackResponseComment) \u003d\u003e {"},{"lineNumber":887,"author":{"gitId":"-"},"content":"          recipientSubmissionFormModel.commentByGiver \u003d this.getCommentModel("},{"lineNumber":888,"author":{"gitId":"-"},"content":"              comment, recipientSubmissionFormModel.recipientIdentifier);"},{"lineNumber":889,"author":{"gitId":"-"},"content":"        }),"},{"lineNumber":890,"author":{"gitId":"-"},"content":"    );"},{"lineNumber":891,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":892,"author":{"gitId":"-"},"content":""},{"lineNumber":893,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":894,"author":{"gitId":"-"},"content":"   * Deletes a comment by participants."},{"lineNumber":895,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":896,"author":{"gitId":"-"},"content":"  deleteParticipantComment(questionIndex: number, responseIdx: number): void {"},{"lineNumber":897,"author":{"gitId":"-"},"content":"    const recipientSubmissionFormModel: FeedbackResponseRecipientSubmissionFormModel \u003d"},{"lineNumber":898,"author":{"gitId":"-"},"content":"        this.questionSubmissionForms[questionIndex].recipientSubmissionForms[responseIdx];"},{"lineNumber":899,"author":{"gitId":"-"},"content":""},{"lineNumber":900,"author":{"gitId":"-"},"content":"    if (!recipientSubmissionFormModel.commentByGiver || !recipientSubmissionFormModel.commentByGiver.originalComment) {"},{"lineNumber":901,"author":{"gitId":"-"},"content":"      return;"},{"lineNumber":902,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":903,"author":{"gitId":"-"},"content":""},{"lineNumber":904,"author":{"gitId":"-"},"content":"    this.commentService.deleteComment("},{"lineNumber":905,"author":{"gitId":"-"},"content":"        recipientSubmissionFormModel.commentByGiver.originalComment.feedbackResponseCommentId, this.intent, {"},{"lineNumber":906,"author":{"gitId":"-"},"content":"          key: this.regKey,"},{"lineNumber":907,"author":{"gitId":"-"},"content":"          moderatedperson: this.moderatedPerson,"},{"lineNumber":908,"author":{"gitId":"-"},"content":"        })"},{"lineNumber":909,"author":{"gitId":"-"},"content":"        .subscribe({"},{"lineNumber":910,"author":{"gitId":"-"},"content":"          next: () \u003d\u003e {"},{"lineNumber":911,"author":{"gitId":"-"},"content":"            recipientSubmissionFormModel.commentByGiver \u003d undefined;"},{"lineNumber":912,"author":{"gitId":"-"},"content":"            this.statusMessageService.showSuccessToast(\u0027Your comment has been deleted!\u0027);"},{"lineNumber":913,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":914,"author":{"gitId":"-"},"content":"          error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":915,"author":{"gitId":"-"},"content":"            this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":916,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":917,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":918,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":919,"author":{"gitId":"-"},"content":""},{"lineNumber":920,"author":{"gitId":"-"},"content":"  retryLoadingFeedbackSessionQuestions(): void {"},{"lineNumber":921,"author":{"gitId":"-"},"content":"    this.hasFeedbackSessionQuestionsLoadingFailed \u003d false;"},{"lineNumber":922,"author":{"gitId":"-"},"content":"    if (this.retryAttempts \u003e\u003d 0) {"},{"lineNumber":923,"author":{"gitId":"-"},"content":"      this.retryAttempts -\u003d 1;"},{"lineNumber":924,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":925,"author":{"gitId":"-"},"content":"    this.loadFeedbackQuestions();"},{"lineNumber":926,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":927,"author":{"gitId":"-"},"content":""},{"lineNumber":928,"author":{"gitId":"-"},"content":"  handleError(resp: ErrorMessageOutput): void {"},{"lineNumber":929,"author":{"gitId":"-"},"content":"    this.hasFeedbackSessionQuestionsLoadingFailed \u003d true;"},{"lineNumber":930,"author":{"gitId":"-"},"content":"    if (this.retryAttempts \u003c 0) {"},{"lineNumber":931,"author":{"gitId":"-"},"content":"      const report: NgbModalRef \u003d this.ngbModal.open(ErrorReportComponent);"},{"lineNumber":932,"author":{"gitId":"-"},"content":"      report.componentInstance.requestId \u003d resp.error.requestId;"},{"lineNumber":933,"author":{"gitId":"-"},"content":"      report.componentInstance.errorMessage \u003d resp.error.message;"},{"lineNumber":934,"author":{"gitId":"-"},"content":"    } else {"},{"lineNumber":935,"author":{"gitId":"-"},"content":"      this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":936,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":937,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":938,"author":{"gitId":"-"},"content":""},{"lineNumber":939,"author":{"gitId":"-"},"content":"  loadRecipientsAndResponses(event: any, questionSubmissionForm: QuestionSubmissionFormModel): void {"},{"lineNumber":940,"author":{"gitId":"-"},"content":"    if (event \u0026\u0026 event.visible \u0026\u0026 !questionSubmissionForm.isLoaded \u0026\u0026 !questionSubmissionForm.isLoading) {"},{"lineNumber":941,"author":{"gitId":"-"},"content":"      questionSubmissionForm.isLoading \u003d true;"},{"lineNumber":942,"author":{"gitId":"-"},"content":"      this.loadFeedbackQuestionRecipientsForQuestion(questionSubmissionForm);"},{"lineNumber":943,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":944,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":945,"author":{"gitId":"-"},"content":""},{"lineNumber":946,"author":{"gitId":"-"},"content":"  private getformattedSessionClosingTime(feedbackSession: FeedbackSession, TIME_FORMAT: string): string {"},{"lineNumber":947,"author":{"gitId":"-"},"content":"    const userSessionEndingTime \u003d DeadlineExtensionHelper.getUserFeedbackSessionEndingTimestamp(feedbackSession);"},{"lineNumber":948,"author":{"gitId":"-"},"content":"    let formattedString \u003d this.timezoneService.formatToString("},{"lineNumber":949,"author":{"gitId":"-"},"content":"      userSessionEndingTime, feedbackSession.timeZone, TIME_FORMAT);"},{"lineNumber":950,"author":{"gitId":"-"},"content":"    if (DeadlineExtensionHelper.hasUserExtension(feedbackSession)) {"},{"lineNumber":951,"author":{"gitId":"-"},"content":"      formattedString +\u003d \u0027 (Extension given)\u0027;"},{"lineNumber":952,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":953,"author":{"gitId":"-"},"content":"    return formattedString;"},{"lineNumber":954,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":955,"author":{"gitId":"-"},"content":""},{"lineNumber":956,"author":{"gitId":"-"},"content":"  private isFeedbackEndingLessThanFifteenMinutes(feedbackSession: FeedbackSession): boolean {"},{"lineNumber":957,"author":{"gitId":"-"},"content":"    const userSessionEndingTime \u003d DeadlineExtensionHelper.getOngoingUserFeedbackSessionEndingTimestamp(feedbackSession);"},{"lineNumber":958,"author":{"gitId":"-"},"content":"    return (userSessionEndingTime - Date.now()) \u003c Milliseconds.IN_FIFTEEN_MINUTES;"},{"lineNumber":959,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":960,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"domlimm":3,"weiquu":1,"-":956}},{"path":"src/web/styles.scss","fileType":"scss","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"/* You can add global styles to this file, and also import other style files */"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"// Required to use ngx-page-scroll service https://github.com/TEAMMATES/teammates/pull/12224#issuecomment-1480350769."},{"lineNumber":4,"author":{"gitId":"-"},"content":"html {"},{"lineNumber":5,"author":{"gitId":"-"},"content":"  scroll-behavior: auto !important;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"}"},{"lineNumber":7,"author":{"gitId":"-"},"content":""},{"lineNumber":8,"author":{"gitId":"-"},"content":"body {"},{"lineNumber":9,"author":{"gitId":"-"},"content":"  font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"  font-size: .875rem;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"}"},{"lineNumber":12,"author":{"gitId":"-"},"content":""},{"lineNumber":13,"author":{"gitId":"-"},"content":"ul {"},{"lineNumber":14,"author":{"gitId":"-"},"content":"  margin-bottom: 0;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"}"},{"lineNumber":16,"author":{"gitId":"-"},"content":""},{"lineNumber":17,"author":{"gitId":"-"},"content":"h1,"},{"lineNumber":18,"author":{"gitId":"-"},"content":".h1 {"},{"lineNumber":19,"author":{"gitId":"-"},"content":"  font-size: 2.1875rem;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"}"},{"lineNumber":21,"author":{"gitId":"-"},"content":""},{"lineNumber":22,"author":{"gitId":"-"},"content":"h2,"},{"lineNumber":23,"author":{"gitId":"-"},"content":".h2 {"},{"lineNumber":24,"author":{"gitId":"-"},"content":"  font-size: 1.75rem;"},{"lineNumber":25,"author":{"gitId":"-"},"content":"}"},{"lineNumber":26,"author":{"gitId":"-"},"content":""},{"lineNumber":27,"author":{"gitId":"-"},"content":"h3,"},{"lineNumber":28,"author":{"gitId":"-"},"content":".h3 {"},{"lineNumber":29,"author":{"gitId":"-"},"content":"  font-size: 1.53125rem;"},{"lineNumber":30,"author":{"gitId":"-"},"content":"}"},{"lineNumber":31,"author":{"gitId":"-"},"content":""},{"lineNumber":32,"author":{"gitId":"-"},"content":"h4,"},{"lineNumber":33,"author":{"gitId":"-"},"content":".h4 {"},{"lineNumber":34,"author":{"gitId":"-"},"content":"  font-size: 1.3125rem;"},{"lineNumber":35,"author":{"gitId":"-"},"content":"}"},{"lineNumber":36,"author":{"gitId":"-"},"content":""},{"lineNumber":37,"author":{"gitId":"-"},"content":"h5,"},{"lineNumber":38,"author":{"gitId":"-"},"content":".h5 {"},{"lineNumber":39,"author":{"gitId":"-"},"content":"  font-size: 1.09375rem;"},{"lineNumber":40,"author":{"gitId":"-"},"content":"}"},{"lineNumber":41,"author":{"gitId":"-"},"content":""},{"lineNumber":42,"author":{"gitId":"-"},"content":"h6,"},{"lineNumber":43,"author":{"gitId":"-"},"content":".h6 {"},{"lineNumber":44,"author":{"gitId":"-"},"content":"  font-size: .875rem;"},{"lineNumber":45,"author":{"gitId":"-"},"content":"}"},{"lineNumber":46,"author":{"gitId":"-"},"content":""},{"lineNumber":47,"author":{"gitId":"-"},"content":".btn,"},{"lineNumber":48,"author":{"gitId":"-"},"content":".form-control,"},{"lineNumber":49,"author":{"gitId":"-"},"content":".dropdown-item {"},{"lineNumber":50,"author":{"gitId":"-"},"content":"  font-size: .875rem;"},{"lineNumber":51,"author":{"gitId":"-"},"content":"}"},{"lineNumber":52,"author":{"gitId":"-"},"content":""},{"lineNumber":53,"author":{"gitId":"-"},"content":".color-orange {"},{"lineNumber":54,"author":{"gitId":"-"},"content":"  color: #E46D0B;"},{"lineNumber":55,"author":{"gitId":"-"},"content":"}"},{"lineNumber":56,"author":{"gitId":"-"},"content":""},{"lineNumber":57,"author":{"gitId":"-"},"content":".color-blue {"},{"lineNumber":58,"author":{"gitId":"-"},"content":"  color: #4379D1;"},{"lineNumber":59,"author":{"gitId":"-"},"content":"}"},{"lineNumber":60,"author":{"gitId":"-"},"content":""},{"lineNumber":61,"author":{"gitId":"-"},"content":".hidden {"},{"lineNumber":62,"author":{"gitId":"-"},"content":"  display: none;"},{"lineNumber":63,"author":{"gitId":"-"},"content":"}"},{"lineNumber":64,"author":{"gitId":"-"},"content":""},{"lineNumber":65,"author":{"gitId":"-"},"content":".modal {"},{"lineNumber":66,"author":{"gitId":"-"},"content":"  text-align: center;"},{"lineNumber":67,"author":{"gitId":"-"},"content":"}"},{"lineNumber":68,"author":{"gitId":"-"},"content":""},{"lineNumber":69,"author":{"gitId":"-"},"content":".modal::before {"},{"lineNumber":70,"author":{"gitId":"-"},"content":"  content: \u0027\u0027;"},{"lineNumber":71,"author":{"gitId":"-"},"content":"  display: inline-block;"},{"lineNumber":72,"author":{"gitId":"-"},"content":"  height: 100%;"},{"lineNumber":73,"author":{"gitId":"-"},"content":"  vertical-align: middle;"},{"lineNumber":74,"author":{"gitId":"-"},"content":"}"},{"lineNumber":75,"author":{"gitId":"-"},"content":""},{"lineNumber":76,"author":{"gitId":"-"},"content":".modal-header {"},{"lineNumber":77,"author":{"gitId":"-"},"content":"  padding: .75rem 1rem;"},{"lineNumber":78,"author":{"gitId":"-"},"content":"  word-break: break-word !important;"},{"lineNumber":79,"author":{"gitId":"-"},"content":"  word-wrap: break-word !important;"},{"lineNumber":80,"author":{"gitId":"-"},"content":"}"},{"lineNumber":81,"author":{"gitId":"-"},"content":""},{"lineNumber":82,"author":{"gitId":"-"},"content":".modal-body {"},{"lineNumber":83,"author":{"gitId":"-"},"content":"  padding: 1rem 1.25rem;"},{"lineNumber":84,"author":{"gitId":"-"},"content":"  word-break: break-word !important;"},{"lineNumber":85,"author":{"gitId":"-"},"content":"  word-wrap: break-word !important;"},{"lineNumber":86,"author":{"gitId":"-"},"content":"}"},{"lineNumber":87,"author":{"gitId":"-"},"content":""},{"lineNumber":88,"author":{"gitId":"-"},"content":".modal-footer {"},{"lineNumber":89,"author":{"gitId":"-"},"content":"  padding: .3rem .5rem;"},{"lineNumber":90,"author":{"gitId":"-"},"content":"}"},{"lineNumber":91,"author":{"gitId":"-"},"content":""},{"lineNumber":92,"author":{"gitId":"-"},"content":".modal-dialog {"},{"lineNumber":93,"author":{"gitId":"-"},"content":"  text-align: left;"},{"lineNumber":94,"author":{"gitId":"-"},"content":"  display: inline-block;"},{"lineNumber":95,"author":{"gitId":"-"},"content":"  max-height: 90vh;"},{"lineNumber":96,"author":{"gitId":"-"},"content":"  max-width: 70vw;"},{"lineNumber":97,"author":{"gitId":"-"},"content":"  min-width: 30vw;"},{"lineNumber":98,"author":{"gitId":"-"},"content":"  scrollbar-width: none; // Firefox"},{"lineNumber":99,"author":{"gitId":"-"},"content":"  -ms-overflow-style: none;  // IE10+"},{"lineNumber":100,"author":{"gitId":"-"},"content":"  vertical-align: middle;"},{"lineNumber":101,"author":{"gitId":"-"},"content":""},{"lineNumber":102,"author":{"gitId":"-"},"content":"  \u0026::-webkit-scrollbar { // Webkit-based browsers"},{"lineNumber":103,"author":{"gitId":"-"},"content":"    width: 0;"},{"lineNumber":104,"author":{"gitId":"-"},"content":"    height: 0;"},{"lineNumber":105,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":106,"author":{"gitId":"-"},"content":"}"},{"lineNumber":107,"author":{"gitId":"-"},"content":""},{"lineNumber":108,"author":{"gitId":"jasonqiu212"},"content":".modal-large .modal-dialog {"},{"lineNumber":109,"author":{"gitId":"jasonqiu212"},"content":"  width: 1000px;"},{"lineNumber":110,"author":{"gitId":"jasonqiu212"},"content":"}"},{"lineNumber":111,"author":{"gitId":"jasonqiu212"},"content":""},{"lineNumber":112,"author":{"gitId":"-"},"content":"@media (max-width: 768px) {"},{"lineNumber":113,"author":{"gitId":"-"},"content":"  .modal-dialog {"},{"lineNumber":114,"author":{"gitId":"jasonqiu212"},"content":"    max-width: none;"},{"lineNumber":115,"author":{"gitId":"-"},"content":"    min-width: 65vw;"},{"lineNumber":116,"author":{"gitId":"jasonqiu212"},"content":"    max-height: none;"},{"lineNumber":117,"author":{"gitId":"jasonqiu212"},"content":"    width: 95vw;"},{"lineNumber":118,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":119,"author":{"gitId":"-"},"content":""},{"lineNumber":120,"author":{"gitId":"-"},"content":"  .modal-large .modal-dialog {"},{"lineNumber":121,"author":{"gitId":"jasonqiu212"},"content":"    width: 95vw;"},{"lineNumber":122,"author":{"gitId":"jasonqiu212"},"content":"  }"},{"lineNumber":123,"author":{"gitId":"-"},"content":"}"},{"lineNumber":124,"author":{"gitId":"-"},"content":""},{"lineNumber":125,"author":{"gitId":"-"},"content":".close:focus {"},{"lineNumber":126,"author":{"gitId":"-"},"content":"  outline: 0;"},{"lineNumber":127,"author":{"gitId":"-"},"content":"}"},{"lineNumber":128,"author":{"gitId":"-"},"content":""},{"lineNumber":129,"author":{"gitId":"-"},"content":".table {"},{"lineNumber":130,"author":{"gitId":"-"},"content":"  margin-bottom: 0;"},{"lineNumber":131,"author":{"gitId":"-"},"content":""},{"lineNumber":132,"author":{"gitId":"-"},"content":"  \u0026 th,"},{"lineNumber":133,"author":{"gitId":"-"},"content":"  td {"},{"lineNumber":134,"author":{"gitId":"-"},"content":"    padding: .5rem;"},{"lineNumber":135,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":136,"author":{"gitId":"-"},"content":"}"},{"lineNumber":137,"author":{"gitId":"-"},"content":""},{"lineNumber":138,"author":{"gitId":"-"},"content":".card {"},{"lineNumber":139,"author":{"gitId":"-"},"content":"  margin-bottom: 20px;"},{"lineNumber":140,"author":{"gitId":"-"},"content":"}"},{"lineNumber":141,"author":{"gitId":"-"},"content":""},{"lineNumber":142,"author":{"gitId":"-"},"content":".card-header {"},{"lineNumber":143,"author":{"gitId":"-"},"content":"  align-items: center;"},{"lineNumber":144,"author":{"gitId":"-"},"content":"  display: flex;"},{"lineNumber":145,"author":{"gitId":"-"},"content":"  padding: .5rem 1rem;"},{"lineNumber":146,"author":{"gitId":"-"},"content":"}"},{"lineNumber":147,"author":{"gitId":"-"},"content":""},{"lineNumber":148,"author":{"gitId":"-"},"content":".card-header-btn-toolbar {"},{"lineNumber":149,"author":{"gitId":"-"},"content":"  align-items: center;"},{"lineNumber":150,"author":{"gitId":"-"},"content":"  margin-left: auto;"},{"lineNumber":151,"author":{"gitId":"-"},"content":"  text-align: right;"},{"lineNumber":152,"author":{"gitId":"-"},"content":""},{"lineNumber":153,"author":{"gitId":"-"},"content":"  button {"},{"lineNumber":154,"author":{"gitId":"-"},"content":"    margin-right: var(--btn-margin);"},{"lineNumber":155,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":156,"author":{"gitId":"-"},"content":""},{"lineNumber":157,"author":{"gitId":"-"},"content":"  .btn-primary {"},{"lineNumber":158,"author":{"gitId":"-"},"content":"    background-color: darken(#007BFF, 5%); // 5% darker than primary"},{"lineNumber":159,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":160,"author":{"gitId":"-"},"content":""},{"lineNumber":161,"author":{"gitId":"-"},"content":"  .btn-secondary {"},{"lineNumber":162,"author":{"gitId":"-"},"content":"    background-color: darken(#6C757D, 10%); // 10% darker than secondary"},{"lineNumber":163,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":164,"author":{"gitId":"-"},"content":""},{"lineNumber":165,"author":{"gitId":"-"},"content":"  .btn-info {"},{"lineNumber":166,"author":{"gitId":"-"},"content":"    background-color: darken(#0DCAF0, 3%); // 3% darker than info"},{"lineNumber":167,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":168,"author":{"gitId":"-"},"content":"}"},{"lineNumber":169,"author":{"gitId":"-"},"content":""},{"lineNumber":170,"author":{"gitId":"-"},"content":".dropdown-item {"},{"lineNumber":171,"author":{"gitId":"-"},"content":"  \u0026:focus,"},{"lineNumber":172,"author":{"gitId":"-"},"content":"  \u0026:hover {"},{"lineNumber":173,"author":{"gitId":"-"},"content":"    background-color: #DAE0E5;"},{"lineNumber":174,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":175,"author":{"gitId":"-"},"content":"}"},{"lineNumber":176,"author":{"gitId":"-"},"content":""},{"lineNumber":177,"author":{"gitId":"-"},"content":".form-control::placeholder {"},{"lineNumber":178,"author":{"gitId":"-"},"content":"  opacity: .7;"},{"lineNumber":179,"author":{"gitId":"-"},"content":"}"},{"lineNumber":180,"author":{"gitId":"-"},"content":""},{"lineNumber":181,"author":{"gitId":"-"},"content":".text-preserve-space {"},{"lineNumber":182,"author":{"gitId":"-"},"content":"  white-space: pre-wrap;"},{"lineNumber":183,"author":{"gitId":"-"},"content":"}"},{"lineNumber":184,"author":{"gitId":"-"},"content":""},{"lineNumber":185,"author":{"gitId":"-"},"content":".cursor-pointer {"},{"lineNumber":186,"author":{"gitId":"-"},"content":"  cursor: pointer;"},{"lineNumber":187,"author":{"gitId":"-"},"content":"}"},{"lineNumber":188,"author":{"gitId":"-"},"content":""},{"lineNumber":189,"author":{"gitId":"-"},"content":".ngb-tooltip-class {"},{"lineNumber":190,"author":{"gitId":"-"},"content":"  text-decoration: underline dotted #808080;"},{"lineNumber":191,"author":{"gitId":"-"},"content":""},{"lineNumber":192,"author":{"gitId":"-"},"content":"  \u0026:hover {"},{"lineNumber":193,"author":{"gitId":"-"},"content":"    text-decoration: underline dotted #000;"},{"lineNumber":194,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":195,"author":{"gitId":"-"},"content":"}"},{"lineNumber":196,"author":{"gitId":"-"},"content":""},{"lineNumber":197,"author":{"gitId":"-"},"content":".modal-window-class {"},{"lineNumber":198,"author":{"gitId":"-"},"content":"  color: #000;"},{"lineNumber":199,"author":{"gitId":"-"},"content":"  text-decoration: underline dashed #000;"},{"lineNumber":200,"author":{"gitId":"-"},"content":"  cursor: pointer;"},{"lineNumber":201,"author":{"gitId":"-"},"content":"}"},{"lineNumber":202,"author":{"gitId":"-"},"content":""},{"lineNumber":203,"author":{"gitId":"-"},"content":"@media print {"},{"lineNumber":204,"author":{"gitId":"-"},"content":"  .no-print {"},{"lineNumber":205,"author":{"gitId":"-"},"content":"    display: none;"},{"lineNumber":206,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":207,"author":{"gitId":"-"},"content":"}"},{"lineNumber":208,"author":{"gitId":"-"},"content":""},{"lineNumber":209,"author":{"gitId":"-"},"content":"// cursor not-allowed for input disabled attribute and tinyMCE\u0027s disabled"},{"lineNumber":210,"author":{"gitId":"-"},"content":"[disabled],"},{"lineNumber":211,"author":{"gitId":"-"},"content":".editor.editor-disabled {"},{"lineNumber":212,"author":{"gitId":"-"},"content":"  cursor: not-allowed;"},{"lineNumber":213,"author":{"gitId":"-"},"content":"}"},{"lineNumber":214,"author":{"gitId":"-"},"content":""},{"lineNumber":215,"author":{"gitId":"-"},"content":".btn-light {"},{"lineNumber":216,"author":{"gitId":"-"},"content":"  border: 1px solid #DDD;"},{"lineNumber":217,"author":{"gitId":"-"},"content":""},{"lineNumber":218,"author":{"gitId":"-"},"content":"  \u0026[disabled] {"},{"lineNumber":219,"author":{"gitId":"-"},"content":"    border: 1px solid #EEE;"},{"lineNumber":220,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":221,"author":{"gitId":"-"},"content":"}"},{"lineNumber":222,"author":{"gitId":"-"},"content":""},{"lineNumber":223,"author":{"gitId":"-"},"content":":root {"},{"lineNumber":224,"author":{"gitId":"-"},"content":"  --btn-margin: 5px;"},{"lineNumber":225,"author":{"gitId":"-"},"content":"}"},{"lineNumber":226,"author":{"gitId":"-"},"content":""},{"lineNumber":227,"author":{"gitId":"-"},"content":".btn-margin-left {"},{"lineNumber":228,"author":{"gitId":"-"},"content":"  margin-left: var(--btn-margin);"},{"lineNumber":229,"author":{"gitId":"-"},"content":"}"},{"lineNumber":230,"author":{"gitId":"-"},"content":""},{"lineNumber":231,"author":{"gitId":"-"},"content":".btn-margin-right {"},{"lineNumber":232,"author":{"gitId":"-"},"content":"  margin-right: var(--btn-margin);"},{"lineNumber":233,"author":{"gitId":"-"},"content":"}"},{"lineNumber":234,"author":{"gitId":"-"},"content":""},{"lineNumber":235,"author":{"gitId":"-"},"content":".btn-margin {"},{"lineNumber":236,"author":{"gitId":"-"},"content":"  margin: var(--btn-margin);"},{"lineNumber":237,"author":{"gitId":"-"},"content":"}"},{"lineNumber":238,"author":{"gitId":"-"},"content":""},{"lineNumber":239,"author":{"gitId":"-"},"content":".fa-sort-down,"},{"lineNumber":240,"author":{"gitId":"-"},"content":".fa-sort-up {"},{"lineNumber":241,"author":{"gitId":"-"},"content":"  color: black;"},{"lineNumber":242,"author":{"gitId":"-"},"content":"}"},{"lineNumber":243,"author":{"gitId":"-"},"content":""},{"lineNumber":244,"author":{"gitId":"-"},"content":".fa-sort {"},{"lineNumber":245,"author":{"gitId":"-"},"content":"  color: #CCC;"},{"lineNumber":246,"author":{"gitId":"-"},"content":"}"},{"lineNumber":247,"author":{"gitId":"-"},"content":""},{"lineNumber":248,"author":{"gitId":"-"},"content":".fa-sort,"},{"lineNumber":249,"author":{"gitId":"-"},"content":".fa-sort-up,"},{"lineNumber":250,"author":{"gitId":"-"},"content":".fa-sort-down {"},{"lineNumber":251,"author":{"gitId":"-"},"content":"  // copied from fa-stack-X"},{"lineNumber":252,"author":{"gitId":"-"},"content":"  left: 0;"},{"lineNumber":253,"author":{"gitId":"-"},"content":"  position: absolute;"},{"lineNumber":254,"author":{"gitId":"-"},"content":"  text-align: center;"},{"lineNumber":255,"author":{"gitId":"-"},"content":"  line-height: inherit;"},{"lineNumber":256,"author":{"gitId":"-"},"content":"}"},{"lineNumber":257,"author":{"gitId":"-"},"content":""},{"lineNumber":258,"author":{"gitId":"-"},"content":".fa-stack {"},{"lineNumber":259,"author":{"gitId":"-"},"content":"  width: auto;"},{"lineNumber":260,"author":{"gitId":"-"},"content":"}"},{"lineNumber":261,"author":{"gitId":"-"},"content":""},{"lineNumber":262,"author":{"gitId":"-"},"content":".ngb-dp-today \u003e .btn-light {"},{"lineNumber":263,"author":{"gitId":"-"},"content":"  font-weight: bold;"},{"lineNumber":264,"author":{"gitId":"-"},"content":"  color: blue;"},{"lineNumber":265,"author":{"gitId":"-"},"content":"}"},{"lineNumber":266,"author":{"gitId":"-"},"content":""},{"lineNumber":267,"author":{"gitId":"-"},"content":".handsontable .invalid-row,"},{"lineNumber":268,"author":{"gitId":"-"},"content":".red-box {"},{"lineNumber":269,"author":{"gitId":"-"},"content":"  background: #F19491;"},{"lineNumber":270,"author":{"gitId":"-"},"content":"}"},{"lineNumber":271,"author":{"gitId":"-"},"content":""},{"lineNumber":272,"author":{"gitId":"-"},"content":".handsontable .new-row,"},{"lineNumber":273,"author":{"gitId":"-"},"content":".green-box {"},{"lineNumber":274,"author":{"gitId":"-"},"content":"  background: #AEEBA6;"},{"lineNumber":275,"author":{"gitId":"-"},"content":"}"},{"lineNumber":276,"author":{"gitId":"-"},"content":""},{"lineNumber":277,"author":{"gitId":"-"},"content":".handsontable .modified-row,"},{"lineNumber":278,"author":{"gitId":"-"},"content":".yellow-box {"},{"lineNumber":279,"author":{"gitId":"-"},"content":"  background: #FCF4B3;"},{"lineNumber":280,"author":{"gitId":"-"},"content":"}"},{"lineNumber":281,"author":{"gitId":"-"},"content":""},{"lineNumber":282,"author":{"gitId":"-"},"content":".handsontable .unchanged-row,"},{"lineNumber":283,"author":{"gitId":"-"},"content":".grey-box {"},{"lineNumber":284,"author":{"gitId":"-"},"content":"  background: #DDD;"},{"lineNumber":285,"author":{"gitId":"-"},"content":"}"},{"lineNumber":286,"author":{"gitId":"-"},"content":""},{"lineNumber":287,"author":{"gitId":"-"},"content":".handsontable .valid-row {"},{"lineNumber":288,"author":{"gitId":"-"},"content":"  background: white;"},{"lineNumber":289,"author":{"gitId":"-"},"content":"}"},{"lineNumber":290,"author":{"gitId":"-"},"content":""},{"lineNumber":291,"author":{"gitId":"-"},"content":".alert.alert-no-bottom {"},{"lineNumber":292,"author":{"gitId":"-"},"content":"  margin-bottom: 0;"},{"lineNumber":293,"author":{"gitId":"-"},"content":"}"},{"lineNumber":294,"author":{"gitId":"-"},"content":""},{"lineNumber":295,"author":{"gitId":"-"},"content":"// new rules to adapt to Bootstrap 5 changes"},{"lineNumber":296,"author":{"gitId":"-"},"content":""},{"lineNumber":297,"author":{"gitId":"-"},"content":".btn-link {"},{"lineNumber":298,"author":{"gitId":"-"},"content":"  text-decoration: none;"},{"lineNumber":299,"author":{"gitId":"-"},"content":"}"},{"lineNumber":300,"author":{"gitId":"-"},"content":""},{"lineNumber":301,"author":{"gitId":"-"},"content":"label {"},{"lineNumber":302,"author":{"gitId":"-"},"content":"  margin-bottom: .5rem;"},{"lineNumber":303,"author":{"gitId":"-"},"content":"}"},{"lineNumber":304,"author":{"gitId":"-"},"content":""},{"lineNumber":305,"author":{"gitId":"-"},"content":".form-group {"},{"lineNumber":306,"author":{"gitId":"-"},"content":"  margin-bottom: 1rem;"},{"lineNumber":307,"author":{"gitId":"-"},"content":"}"},{"lineNumber":308,"author":{"gitId":"-"},"content":""},{"lineNumber":309,"author":{"gitId":"-"},"content":"// end of new rules to adapt to Bootstrap 5"},{"lineNumber":310,"author":{"gitId":"-"},"content":""},{"lineNumber":311,"author":{"gitId":"-"},"content":"// overrides default bootstrap colours to increase contrast"},{"lineNumber":312,"author":{"gitId":"-"},"content":".navbar-dark {"},{"lineNumber":313,"author":{"gitId":"-"},"content":"  --bs-navbar-color: rgba(255, 255, 255, .75);"},{"lineNumber":314,"author":{"gitId":"-"},"content":"  --bs-navbar-hover-color: white;"},{"lineNumber":315,"author":{"gitId":"-"},"content":"}"},{"lineNumber":316,"author":{"gitId":"-"},"content":""},{"lineNumber":317,"author":{"gitId":"-"},"content":"// mouse hover on the icon \"i\""},{"lineNumber":318,"author":{"gitId":"-"},"content":"a:hover {"},{"lineNumber":319,"author":{"gitId":"-"},"content":"  cursor: pointer;"},{"lineNumber":320,"author":{"gitId":"-"},"content":"}"},{"lineNumber":321,"author":{"gitId":"-"},"content":""},{"lineNumber":322,"author":{"gitId":"-"},"content":"// dotted line below the icon \"i\""},{"lineNumber":323,"author":{"gitId":"-"},"content":"a i.fa-info-circle {"},{"lineNumber":324,"author":{"gitId":"-"},"content":"  border-bottom: 2px dotted #000;"},{"lineNumber":325,"author":{"gitId":"-"},"content":"  padding-bottom: 2px;"},{"lineNumber":326,"author":{"gitId":"-"},"content":"  box-sizing: border-box;"},{"lineNumber":327,"author":{"gitId":"-"},"content":"}"},{"lineNumber":328,"author":{"gitId":"-"},"content":""},{"lineNumber":329,"author":{"gitId":"-"},"content":"// overrides default table-responsive scrolling"},{"lineNumber":330,"author":{"gitId":"-"},"content":".table-responsive {"},{"lineNumber":331,"author":{"gitId":"-"},"content":"  -webkit-overflow-scrolling: auto;"},{"lineNumber":332,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"jasonqiu212":9,"-":323}},{"path":"src/web/types/question-details-impl/feedback-rubric-question-details.impl.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  PerRecipientStats,"},{"lineNumber":3,"author":{"gitId":"-"},"content":"  RubricQuestionStatisticsCalculation,"},{"lineNumber":4,"author":{"gitId":"-"},"content":"} from \u0027../../app/components/question-types/question-statistics/question-statistics-calculation/rubric-question-statistics-calculation\u0027;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import { StringHelper } from \u0027../../services/string-helper\u0027;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":7,"author":{"gitId":"-"},"content":"  FeedbackQuestionType,"},{"lineNumber":8,"author":{"gitId":"-"},"content":"  FeedbackRubricQuestionDetails, QuestionOutput,"},{"lineNumber":9,"author":{"gitId":"-"},"content":"} from \u0027../api-output\u0027;"},{"lineNumber":10,"author":{"gitId":"jasonqiu212"},"content":"import { NO_VALUE } from \u0027../feedback-response-details\u0027;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import { AbstractFeedbackQuestionDetails } from \u0027./abstract-feedback-question-details\u0027;"},{"lineNumber":12,"author":{"gitId":"-"},"content":""},{"lineNumber":13,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":14,"author":{"gitId":"-"},"content":" * Concrete implementation of {@link FeedbackRubricQuestionDetails}."},{"lineNumber":15,"author":{"gitId":"-"},"content":" */"},{"lineNumber":16,"author":{"gitId":"-"},"content":"export class FeedbackRubricQuestionDetailsImpl extends AbstractFeedbackQuestionDetails"},{"lineNumber":17,"author":{"gitId":"-"},"content":"    implements FeedbackRubricQuestionDetails {"},{"lineNumber":18,"author":{"gitId":"-"},"content":""},{"lineNumber":19,"author":{"gitId":"-"},"content":"  hasAssignedWeights: boolean \u003d false;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"  rubricChoices: string[] \u003d [];"},{"lineNumber":21,"author":{"gitId":"-"},"content":"  rubricSubQuestions: string[] \u003d [];"},{"lineNumber":22,"author":{"gitId":"-"},"content":"  rubricWeightsForEachCell: number[][] \u003d [];"},{"lineNumber":23,"author":{"gitId":"-"},"content":"  rubricDescriptions: string[][] \u003d [];"},{"lineNumber":24,"author":{"gitId":"-"},"content":"  questionText: string \u003d \u0027\u0027;"},{"lineNumber":25,"author":{"gitId":"-"},"content":"  questionType: FeedbackQuestionType \u003d FeedbackQuestionType.RUBRIC;"},{"lineNumber":26,"author":{"gitId":"-"},"content":""},{"lineNumber":27,"author":{"gitId":"-"},"content":"  constructor(apiOutput: FeedbackRubricQuestionDetails) {"},{"lineNumber":28,"author":{"gitId":"-"},"content":"    super();"},{"lineNumber":29,"author":{"gitId":"-"},"content":"    this.hasAssignedWeights \u003d apiOutput.hasAssignedWeights;"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    this.rubricChoices \u003d apiOutput.rubricChoices;"},{"lineNumber":31,"author":{"gitId":"-"},"content":"    this.rubricSubQuestions \u003d apiOutput.rubricSubQuestions;"},{"lineNumber":32,"author":{"gitId":"-"},"content":"    this.rubricWeightsForEachCell \u003d apiOutput.rubricWeightsForEachCell;"},{"lineNumber":33,"author":{"gitId":"-"},"content":"    this.rubricDescriptions \u003d apiOutput.rubricDescriptions;"},{"lineNumber":34,"author":{"gitId":"-"},"content":"    this.questionText \u003d apiOutput.questionText;"},{"lineNumber":35,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":36,"author":{"gitId":"-"},"content":""},{"lineNumber":37,"author":{"gitId":"-"},"content":"  override getQuestionCsvHeaders(): string[] {"},{"lineNumber":38,"author":{"gitId":"-"},"content":"    return [\u0027Sub Question\u0027, \u0027Choice Value\u0027, \u0027Choice Number\u0027];"},{"lineNumber":39,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":40,"author":{"gitId":"-"},"content":""},{"lineNumber":41,"author":{"gitId":"-"},"content":"  override getMissingResponseCsvAnswers(): string[][] {"},{"lineNumber":42,"author":{"gitId":"-"},"content":"    return [[\u0027All Sub-Questions\u0027, \u0027No Response\u0027]];"},{"lineNumber":43,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":44,"author":{"gitId":"-"},"content":""},{"lineNumber":45,"author":{"gitId":"-"},"content":"  getQuestionCsvStats(question: QuestionOutput): string[][] {"},{"lineNumber":46,"author":{"gitId":"-"},"content":"    const statsRows: string[][] \u003d [];"},{"lineNumber":47,"author":{"gitId":"-"},"content":""},{"lineNumber":48,"author":{"gitId":"-"},"content":"    const statsCalculation: RubricQuestionStatisticsCalculation \u003d new RubricQuestionStatisticsCalculation(this);"},{"lineNumber":49,"author":{"gitId":"-"},"content":"    this.populateQuestionStatistics(statsCalculation, question);"},{"lineNumber":50,"author":{"gitId":"-"},"content":"    if (statsCalculation.responses.length \u003d\u003d\u003d 0) {"},{"lineNumber":51,"author":{"gitId":"-"},"content":"      // skip stats for no response"},{"lineNumber":52,"author":{"gitId":"-"},"content":"      return [];"},{"lineNumber":53,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":54,"author":{"gitId":"-"},"content":"    statsCalculation.calculateStatistics();"},{"lineNumber":55,"author":{"gitId":"-"},"content":""},{"lineNumber":56,"author":{"gitId":"-"},"content":"    const header: string[] \u003d [\u0027\u0027, ...statsCalculation.choices];"},{"lineNumber":57,"author":{"gitId":"-"},"content":"    if (statsCalculation.hasWeights) {"},{"lineNumber":58,"author":{"gitId":"-"},"content":"      header.push(\u0027Average\u0027);"},{"lineNumber":59,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":60,"author":{"gitId":"-"},"content":"    statsRows.push(header);"},{"lineNumber":61,"author":{"gitId":"-"},"content":""},{"lineNumber":62,"author":{"gitId":"-"},"content":"    statsCalculation.subQuestions.forEach((subQuestion: string, questionIndex: number) \u003d\u003e {"},{"lineNumber":63,"author":{"gitId":"-"},"content":"      const currRow: string[] \u003d ["},{"lineNumber":64,"author":{"gitId":"-"},"content":"        `${StringHelper.integerToLowerCaseAlphabeticalIndex(questionIndex + 1)}) ${subQuestion}`,"},{"lineNumber":65,"author":{"gitId":"-"},"content":"        ...statsCalculation.choices.map((_: string, choiceIndex: number) \u003d\u003e {"},{"lineNumber":66,"author":{"gitId":"-"},"content":"          return `${statsCalculation.percentages[questionIndex][choiceIndex]}% \\"},{"lineNumber":67,"author":{"gitId":"-"},"content":"(${statsCalculation.answers[questionIndex][choiceIndex]}) \\"},{"lineNumber":68,"author":{"gitId":"jasonqiu212"},"content":"${statsCalculation.hasWeights"},{"lineNumber":69,"author":{"gitId":"jasonqiu212"},"content":"    ? `[${this.getDisplayWeight(statsCalculation.weights[questionIndex][choiceIndex])}]`"},{"lineNumber":70,"author":{"gitId":"jasonqiu212"},"content":"    : \u0027\u0027}`;"},{"lineNumber":71,"author":{"gitId":"-"},"content":"        }),"},{"lineNumber":72,"author":{"gitId":"-"},"content":"      ];"},{"lineNumber":73,"author":{"gitId":"-"},"content":"      if (statsCalculation.hasWeights) {"},{"lineNumber":74,"author":{"gitId":"jasonqiu212"},"content":"        currRow.push(String(this.getDisplayWeight(statsCalculation.subQuestionWeightAverage[questionIndex])));"},{"lineNumber":75,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":76,"author":{"gitId":"-"},"content":"      statsRows.push(currRow);"},{"lineNumber":77,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":78,"author":{"gitId":"-"},"content":""},{"lineNumber":79,"author":{"gitId":"-"},"content":"    if (!statsCalculation.hasWeights) {"},{"lineNumber":80,"author":{"gitId":"-"},"content":"      return statsRows;"},{"lineNumber":81,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":82,"author":{"gitId":"-"},"content":""},{"lineNumber":83,"author":{"gitId":"-"},"content":"    // generate per recipient stats"},{"lineNumber":84,"author":{"gitId":"-"},"content":"    statsRows.push([], [\u0027Per Recipient Statistics (Per Criterion)\u0027]);"},{"lineNumber":85,"author":{"gitId":"-"},"content":""},{"lineNumber":86,"author":{"gitId":"-"},"content":"    statsRows.push(["},{"lineNumber":87,"author":{"gitId":"-"},"content":"      \u0027Team\u0027,"},{"lineNumber":88,"author":{"gitId":"-"},"content":"      \u0027Recipient Name\u0027,"},{"lineNumber":89,"author":{"gitId":"-"},"content":"      \u0027Recipient Email\u0027,"},{"lineNumber":90,"author":{"gitId":"-"},"content":"      \u0027Sub Question\u0027,"},{"lineNumber":91,"author":{"gitId":"-"},"content":"      ...statsCalculation.choices,"},{"lineNumber":92,"author":{"gitId":"-"},"content":"      \u0027Total\u0027,"},{"lineNumber":93,"author":{"gitId":"-"},"content":"      \u0027Average\u0027,"},{"lineNumber":94,"author":{"gitId":"-"},"content":"    ]);"},{"lineNumber":95,"author":{"gitId":"-"},"content":""},{"lineNumber":96,"author":{"gitId":"-"},"content":"    Object.values(statsCalculation.perRecipientStatsMap)"},{"lineNumber":97,"author":{"gitId":"-"},"content":"        .sort((a: PerRecipientStats, b: PerRecipientStats) \u003d\u003e"},{"lineNumber":98,"author":{"gitId":"-"},"content":"            a.recipientTeam.localeCompare(b.recipientTeam) || a.recipientName.localeCompare(b.recipientName))"},{"lineNumber":99,"author":{"gitId":"-"},"content":"        .forEach((perRecipientStats: PerRecipientStats) \u003d\u003e {"},{"lineNumber":100,"author":{"gitId":"-"},"content":"          this.rubricSubQuestions.forEach((subQuestion: string, questionIndex: number) \u003d\u003e {"},{"lineNumber":101,"author":{"gitId":"-"},"content":"            statsRows.push(["},{"lineNumber":102,"author":{"gitId":"-"},"content":"              perRecipientStats.recipientTeam,"},{"lineNumber":103,"author":{"gitId":"-"},"content":"              perRecipientStats.recipientName,"},{"lineNumber":104,"author":{"gitId":"-"},"content":"              perRecipientStats.recipientEmail ?? \u0027\u0027,"},{"lineNumber":105,"author":{"gitId":"-"},"content":"              `${StringHelper.integerToLowerCaseAlphabeticalIndex(questionIndex + 1)}) ${subQuestion}`,"},{"lineNumber":106,"author":{"gitId":"-"},"content":"              ...statsCalculation.choices.map((_: string, choiceIndex: number) \u003d\u003e {"},{"lineNumber":107,"author":{"gitId":"-"},"content":"                return `${perRecipientStats.percentages[questionIndex][choiceIndex]}% \\"},{"lineNumber":108,"author":{"gitId":"-"},"content":"(${perRecipientStats.answers[questionIndex][choiceIndex]}) \\"},{"lineNumber":109,"author":{"gitId":"jasonqiu212"},"content":"[${this.getDisplayWeight(statsCalculation.weights[questionIndex][choiceIndex])}]`;"},{"lineNumber":110,"author":{"gitId":"-"},"content":"              }),"},{"lineNumber":111,"author":{"gitId":"jasonqiu212"},"content":"              String(this.getDisplayWeight(perRecipientStats.subQuestionTotalChosenWeight[questionIndex])),"},{"lineNumber":112,"author":{"gitId":"jasonqiu212"},"content":"              String(this.getDisplayWeight(perRecipientStats.subQuestionWeightAverage[questionIndex])),"},{"lineNumber":113,"author":{"gitId":"-"},"content":"            ]);"},{"lineNumber":114,"author":{"gitId":"-"},"content":"          });"},{"lineNumber":115,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":116,"author":{"gitId":"-"},"content":""},{"lineNumber":117,"author":{"gitId":"-"},"content":"    // generate overall recipient stats"},{"lineNumber":118,"author":{"gitId":"-"},"content":"    statsRows.push([], [\u0027Per Recipient Statistics (Overall)\u0027]);"},{"lineNumber":119,"author":{"gitId":"-"},"content":""},{"lineNumber":120,"author":{"gitId":"-"},"content":"    statsRows.push(["},{"lineNumber":121,"author":{"gitId":"-"},"content":"      \u0027Team\u0027,"},{"lineNumber":122,"author":{"gitId":"-"},"content":"      \u0027Recipient Name\u0027,"},{"lineNumber":123,"author":{"gitId":"-"},"content":"      \u0027Recipient Email\u0027,"},{"lineNumber":124,"author":{"gitId":"-"},"content":"      ...statsCalculation.choices,"},{"lineNumber":125,"author":{"gitId":"-"},"content":"      \u0027Total\u0027,"},{"lineNumber":126,"author":{"gitId":"-"},"content":"      \u0027Average\u0027,"},{"lineNumber":127,"author":{"gitId":"-"},"content":"      \u0027Per Criterion Average\u0027,"},{"lineNumber":128,"author":{"gitId":"-"},"content":"    ]);"},{"lineNumber":129,"author":{"gitId":"-"},"content":""},{"lineNumber":130,"author":{"gitId":"-"},"content":"    Object.values(statsCalculation.perRecipientStatsMap)"},{"lineNumber":131,"author":{"gitId":"-"},"content":"      .sort((a: PerRecipientStats, b: PerRecipientStats) \u003d\u003e"},{"lineNumber":132,"author":{"gitId":"-"},"content":"        a.recipientTeam.localeCompare(b.recipientTeam) || a.recipientName.localeCompare(b.recipientName))"},{"lineNumber":133,"author":{"gitId":"-"},"content":"      .forEach((perRecipientStats: PerRecipientStats) \u003d\u003e {"},{"lineNumber":134,"author":{"gitId":"jasonqiu212"},"content":"        const perCriterionAverage: string \u003d"},{"lineNumber":135,"author":{"gitId":"jasonqiu212"},"content":"            perRecipientStats.subQuestionWeightAverage.map((val: number) \u003d\u003e"},{"lineNumber":136,"author":{"gitId":"jasonqiu212"},"content":"            this.getDisplayWeight(val)).toString();"},{"lineNumber":137,"author":{"gitId":"-"},"content":"        statsRows.push(["},{"lineNumber":138,"author":{"gitId":"-"},"content":"          perRecipientStats.recipientTeam,"},{"lineNumber":139,"author":{"gitId":"-"},"content":"          perRecipientStats.recipientName,"},{"lineNumber":140,"author":{"gitId":"-"},"content":"          perRecipientStats.recipientEmail ?? \u0027\u0027,"},{"lineNumber":141,"author":{"gitId":"-"},"content":"          ...statsCalculation.choices.map((_: string, choiceIndex: number) \u003d\u003e {"},{"lineNumber":142,"author":{"gitId":"-"},"content":"          return `${perRecipientStats.percentagesAverage[choiceIndex]}% \\"},{"lineNumber":143,"author":{"gitId":"-"},"content":"(${perRecipientStats.answersSum[choiceIndex]}) \\"},{"lineNumber":144,"author":{"gitId":"jasonqiu212"},"content":"[${this.getDisplayWeight(perRecipientStats.weightsAverage[choiceIndex])}]`;"},{"lineNumber":145,"author":{"gitId":"-"},"content":"          }),"},{"lineNumber":146,"author":{"gitId":"jasonqiu212"},"content":"          String(this.getDisplayWeight(perRecipientStats.overallWeightedSum)),"},{"lineNumber":147,"author":{"gitId":"jasonqiu212"},"content":"          String(this.getDisplayWeight(perRecipientStats.overallWeightAverage)),"},{"lineNumber":148,"author":{"gitId":"jasonqiu212"},"content":"          String(perCriterionAverage),"},{"lineNumber":149,"author":{"gitId":"-"},"content":"        ]);"},{"lineNumber":150,"author":{"gitId":"-"},"content":"      });"},{"lineNumber":151,"author":{"gitId":"-"},"content":""},{"lineNumber":152,"author":{"gitId":"-"},"content":"    return statsRows;"},{"lineNumber":153,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":154,"author":{"gitId":"-"},"content":""},{"lineNumber":155,"author":{"gitId":"-"},"content":"  isParticipantCommentsOnResponsesAllowed(): boolean {"},{"lineNumber":156,"author":{"gitId":"-"},"content":"    return false;"},{"lineNumber":157,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":158,"author":{"gitId":"-"},"content":""},{"lineNumber":159,"author":{"gitId":"-"},"content":"  isInstructorCommentsOnResponsesAllowed(): boolean {"},{"lineNumber":160,"author":{"gitId":"-"},"content":"    return true;"},{"lineNumber":161,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":162,"author":{"gitId":"jasonqiu212"},"content":""},{"lineNumber":163,"author":{"gitId":"jasonqiu212"},"content":"  private getDisplayWeight(weight: number): any {"},{"lineNumber":164,"author":{"gitId":"jasonqiu212"},"content":"    return weight \u003d\u003d\u003d null || weight \u003d\u003d\u003d NO_VALUE ? \u0027-\u0027 : weight;"},{"lineNumber":165,"author":{"gitId":"jasonqiu212"},"content":"  }"},{"lineNumber":166,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"jasonqiu212":19,"-":147}}]
