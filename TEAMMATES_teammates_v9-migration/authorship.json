[{"path":"src/it/java/teammates/it/sqllogic/core/AccountRequestsLogicIT.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"kevin9foong"},"content":"package teammates.it.sqllogic.core;"},{"lineNumber":2,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":3,"author":{"gitId":"kevin9foong"},"content":"import java.time.Instant;"},{"lineNumber":4,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":5,"author":{"gitId":"kevin9foong"},"content":"import org.testng.annotations.Test;"},{"lineNumber":6,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":7,"author":{"gitId":"kevin9foong"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":8,"author":{"gitId":"kevin9foong"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":9,"author":{"gitId":"kevin9foong"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":10,"author":{"gitId":"kevin9foong"},"content":"import teammates.it.test.BaseTestCaseWithSqlDatabaseAccess;"},{"lineNumber":11,"author":{"gitId":"kevin9foong"},"content":"import teammates.sqllogic.core.AccountRequestsLogic;"},{"lineNumber":12,"author":{"gitId":"kevin9foong"},"content":"import teammates.storage.sqlapi.AccountRequestsDb;"},{"lineNumber":13,"author":{"gitId":"kevin9foong"},"content":"import teammates.storage.sqlentity.AccountRequest;"},{"lineNumber":14,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":15,"author":{"gitId":"kevin9foong"},"content":"/**"},{"lineNumber":16,"author":{"gitId":"kevin9foong"},"content":" * SUT: {@link AccountRequestsLogic}."},{"lineNumber":17,"author":{"gitId":"kevin9foong"},"content":" */"},{"lineNumber":18,"author":{"gitId":"kevin9foong"},"content":"public class AccountRequestsLogicIT extends BaseTestCaseWithSqlDatabaseAccess {"},{"lineNumber":19,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":20,"author":{"gitId":"kevin9foong"},"content":"    private AccountRequestsLogic accountRequestsLogic \u003d AccountRequestsLogic.inst();"},{"lineNumber":21,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":22,"author":{"gitId":"kevin9foong"},"content":"    @Test"},{"lineNumber":23,"author":{"gitId":"kevin9foong"},"content":"    public void testResetAccountRequest()"},{"lineNumber":24,"author":{"gitId":"kevin9foong"},"content":"            throws EntityAlreadyExistsException, InvalidParametersException, EntityDoesNotExistException {"},{"lineNumber":25,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":26,"author":{"gitId":"kevin9foong"},"content":"        ______TS(\"success: create account request and update registeredAt field\");"},{"lineNumber":27,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":28,"author":{"gitId":"kevin9foong"},"content":"        String name \u003d \"name lee\";"},{"lineNumber":29,"author":{"gitId":"kevin9foong"},"content":"        String email \u003d \"email@gmail.com\";"},{"lineNumber":30,"author":{"gitId":"kevin9foong"},"content":"        String institute \u003d \"institute\";"},{"lineNumber":31,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":32,"author":{"gitId":"kevin9foong"},"content":"        AccountRequest toReset \u003d accountRequestsLogic.createAccountRequest(name, email, institute);"},{"lineNumber":33,"author":{"gitId":"kevin9foong"},"content":"        AccountRequestsDb accountRequestsDb \u003d AccountRequestsDb.inst();"},{"lineNumber":34,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":35,"author":{"gitId":"kevin9foong"},"content":"        toReset.setRegisteredAt(Instant.now());"},{"lineNumber":36,"author":{"gitId":"kevin9foong"},"content":"        toReset \u003d accountRequestsDb.getAccountRequest(email, institute);"},{"lineNumber":37,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":38,"author":{"gitId":"kevin9foong"},"content":"        assertNotNull(toReset);"},{"lineNumber":39,"author":{"gitId":"kevin9foong"},"content":"        assertNotNull(toReset.getRegisteredAt());"},{"lineNumber":40,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":41,"author":{"gitId":"kevin9foong"},"content":"        ______TS(\"success: reset account request that already exists\");"},{"lineNumber":42,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":43,"author":{"gitId":"kevin9foong"},"content":"        AccountRequest resetted \u003d accountRequestsLogic.resetAccountRequest(email, institute);"},{"lineNumber":44,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":45,"author":{"gitId":"kevin9foong"},"content":"        assertNull(resetted.getRegisteredAt());"},{"lineNumber":46,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":47,"author":{"gitId":"kevin9foong"},"content":"        ______TS(\"success: test delete account request\");"},{"lineNumber":48,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":49,"author":{"gitId":"kevin9foong"},"content":"        accountRequestsLogic.deleteAccountRequest(email, institute);"},{"lineNumber":50,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":51,"author":{"gitId":"kevin9foong"},"content":"        assertNull(accountRequestsLogic.getAccountRequest(email, institute));"},{"lineNumber":52,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":53,"author":{"gitId":"kevin9foong"},"content":"        ______TS(\"failure: reset account request that does not exist\");"},{"lineNumber":54,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":55,"author":{"gitId":"kevin9foong"},"content":"        assertThrows(EntityDoesNotExistException.class,"},{"lineNumber":56,"author":{"gitId":"kevin9foong"},"content":"                () -\u003e accountRequestsLogic.resetAccountRequest(name, institute));"},{"lineNumber":57,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":58,"author":{"gitId":"kevin9foong"},"content":"}"}],"authorContributionMap":{"kevin9foong":58}},{"path":"src/it/java/teammates/it/sqllogic/core/AccountsLogicIT.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"hhdqirui"},"content":"package teammates.it.sqllogic.core;"},{"lineNumber":2,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":3,"author":{"gitId":"hhdqirui"},"content":"import java.time.Instant;"},{"lineNumber":4,"author":{"gitId":"hhdqirui"},"content":"import java.util.List;"},{"lineNumber":5,"author":{"gitId":"hhdqirui"},"content":"import java.util.UUID;"},{"lineNumber":6,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":7,"author":{"gitId":"hhdqirui"},"content":"import org.testng.annotations.Test;"},{"lineNumber":8,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":9,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.NotificationStyle;"},{"lineNumber":10,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.NotificationTargetUser;"},{"lineNumber":11,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":12,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":13,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":14,"author":{"gitId":"hhdqirui"},"content":"import teammates.it.test.BaseTestCaseWithSqlDatabaseAccess;"},{"lineNumber":15,"author":{"gitId":"hhdqirui"},"content":"import teammates.sqllogic.core.AccountsLogic;"},{"lineNumber":16,"author":{"gitId":"hhdqirui"},"content":"import teammates.sqllogic.core.NotificationsLogic;"},{"lineNumber":17,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlapi.AccountsDb;"},{"lineNumber":18,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.Account;"},{"lineNumber":19,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.Notification;"},{"lineNumber":20,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.ReadNotification;"},{"lineNumber":21,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":22,"author":{"gitId":"hhdqirui"},"content":"/**"},{"lineNumber":23,"author":{"gitId":"hhdqirui"},"content":" * SUT: {@link AccountsLogic}."},{"lineNumber":24,"author":{"gitId":"hhdqirui"},"content":" */"},{"lineNumber":25,"author":{"gitId":"hhdqirui"},"content":"public class AccountsLogicIT extends BaseTestCaseWithSqlDatabaseAccess {"},{"lineNumber":26,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":27,"author":{"gitId":"hhdqirui"},"content":"    private AccountsLogic accountsLogic \u003d AccountsLogic.inst();"},{"lineNumber":28,"author":{"gitId":"hhdqirui"},"content":"    private NotificationsLogic notificationsLogic \u003d NotificationsLogic.inst();"},{"lineNumber":29,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":30,"author":{"gitId":"hhdqirui"},"content":"    private AccountsDb accountsDb \u003d AccountsDb.inst();"},{"lineNumber":31,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":32,"author":{"gitId":"hhdqirui"},"content":"    @Test"},{"lineNumber":33,"author":{"gitId":"hhdqirui"},"content":"    public void testUpdateReadNotifications()"},{"lineNumber":34,"author":{"gitId":"hhdqirui"},"content":"            throws EntityAlreadyExistsException, InvalidParametersException, EntityDoesNotExistException {"},{"lineNumber":35,"author":{"gitId":"hhdqirui"},"content":"        ______TS(\"success: mark notification as read\");"},{"lineNumber":36,"author":{"gitId":"hhdqirui"},"content":"        Account account \u003d new Account(\"google-id\", \"name\", \"email@teammates.com\");"},{"lineNumber":37,"author":{"gitId":"hhdqirui"},"content":"        Notification notification \u003d new Notification(Instant.parse(\"2011-01-01T00:00:00Z\"),"},{"lineNumber":38,"author":{"gitId":"hhdqirui"},"content":"                Instant.parse(\"2099-01-01T00:00:00Z\"), NotificationStyle.DANGER, NotificationTargetUser.GENERAL,"},{"lineNumber":39,"author":{"gitId":"hhdqirui"},"content":"                \"A deprecation note\", \"\u003cp\u003eDeprecation happens in three minutes\u003c/p\u003e\");"},{"lineNumber":40,"author":{"gitId":"hhdqirui"},"content":"        accountsDb.createAccount(account);"},{"lineNumber":41,"author":{"gitId":"hhdqirui"},"content":"        notificationsLogic.createNotification(notification);"},{"lineNumber":42,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":43,"author":{"gitId":"hhdqirui"},"content":"        String googleId \u003d account.getGoogleId();"},{"lineNumber":44,"author":{"gitId":"hhdqirui"},"content":"        UUID notificationId \u003d notification.getId();"},{"lineNumber":45,"author":{"gitId":"hhdqirui"},"content":"        accountsLogic.updateReadNotifications(googleId, notificationId, notification.getEndTime());"},{"lineNumber":46,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":47,"author":{"gitId":"hhdqirui"},"content":"        Account actualAccount \u003d accountsDb.getAccountByGoogleId(googleId);"},{"lineNumber":48,"author":{"gitId":"hhdqirui"},"content":"        List\u003cReadNotification\u003e accountReadNotifications \u003d actualAccount.getReadNotifications();"},{"lineNumber":49,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(1, accountReadNotifications.size());"},{"lineNumber":50,"author":{"gitId":"hhdqirui"},"content":"        assertSame(actualAccount, accountReadNotifications.get(0).getAccount());"},{"lineNumber":51,"author":{"gitId":"hhdqirui"},"content":"        assertSame(notification, accountReadNotifications.get(0).getNotification());"},{"lineNumber":52,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":53,"author":{"gitId":"hhdqirui"},"content":"}"}],"authorContributionMap":{"hhdqirui":53}},{"path":"src/it/java/teammates/it/sqllogic/core/DataBundleLogicIT.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.it.sqllogic.core;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.time.Duration;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.time.Instant;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":6,"author":{"gitId":"-"},"content":""},{"lineNumber":7,"author":{"gitId":"-"},"content":"import org.testng.annotations.BeforeMethod;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import org.testng.annotations.Test;"},{"lineNumber":9,"author":{"gitId":"-"},"content":""},{"lineNumber":10,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.FeedbackParticipantType;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.InstructorPermissionRole;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.InstructorPrivileges;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.NotificationStyle;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.NotificationTargetUser;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.SqlDataBundle;"},{"lineNumber":16,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.questions.FeedbackQuestionDetails;"},{"lineNumber":17,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.questions.FeedbackTextQuestionDetails;"},{"lineNumber":18,"author":{"gitId":"-"},"content":"import teammates.it.test.BaseTestCaseWithSqlDatabaseAccess;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"import teammates.sqllogic.core.DataBundleLogic;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Account;"},{"lineNumber":21,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.AccountRequest;"},{"lineNumber":22,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Course;"},{"lineNumber":23,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.FeedbackQuestion;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.FeedbackSession;"},{"lineNumber":25,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":26,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Notification;"},{"lineNumber":27,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.ReadNotification;"},{"lineNumber":28,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Section;"},{"lineNumber":29,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Student;"},{"lineNumber":30,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Team;"},{"lineNumber":31,"author":{"gitId":"-"},"content":"import teammates.test.FileHelper;"},{"lineNumber":32,"author":{"gitId":"-"},"content":""},{"lineNumber":33,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":34,"author":{"gitId":"-"},"content":" * SUT: {@link DataBundleLogic}."},{"lineNumber":35,"author":{"gitId":"-"},"content":" */"},{"lineNumber":36,"author":{"gitId":"-"},"content":"public class DataBundleLogicIT extends BaseTestCaseWithSqlDatabaseAccess {"},{"lineNumber":37,"author":{"gitId":"-"},"content":""},{"lineNumber":38,"author":{"gitId":"-"},"content":"    private final DataBundleLogic dataBundleLogic \u003d DataBundleLogic.inst();"},{"lineNumber":39,"author":{"gitId":"-"},"content":""},{"lineNumber":40,"author":{"gitId":"-"},"content":"    @BeforeMethod"},{"lineNumber":41,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":42,"author":{"gitId":"-"},"content":"    protected void setUp() throws Exception {"},{"lineNumber":43,"author":{"gitId":"-"},"content":"        super.setUp();"},{"lineNumber":44,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":45,"author":{"gitId":"-"},"content":""},{"lineNumber":46,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":47,"author":{"gitId":"-"},"content":"    public void testCreateDataBundle_typicalValues_createdCorrectly() throws Exception {"},{"lineNumber":48,"author":{"gitId":"-"},"content":"        String pathToJsonFile \u003d getTestDataFolder() + \"/DataBundleLogicIT.json\";"},{"lineNumber":49,"author":{"gitId":"-"},"content":"        String jsonString \u003d FileHelper.readFile(pathToJsonFile);"},{"lineNumber":50,"author":{"gitId":"-"},"content":"        SqlDataBundle dataBundle \u003d DataBundleLogic.deserializeDataBundle(jsonString);"},{"lineNumber":51,"author":{"gitId":"-"},"content":""},{"lineNumber":52,"author":{"gitId":"-"},"content":"        ______TS(\"verify account requests deserialized correctly\");"},{"lineNumber":53,"author":{"gitId":"-"},"content":""},{"lineNumber":54,"author":{"gitId":"-"},"content":"        AccountRequest actualAccountRequest \u003d dataBundle.accountRequests.get(\"instructor1\");"},{"lineNumber":55,"author":{"gitId":"-"},"content":"        AccountRequest expectedAccountRequest \u003d new AccountRequest(\"instr1@teammates.tmt\", \"Instructor 1\","},{"lineNumber":56,"author":{"gitId":"-"},"content":"                \"TEAMMATES Test Institute 1\");"},{"lineNumber":57,"author":{"gitId":"-"},"content":"        expectedAccountRequest.setId(actualAccountRequest.getId());"},{"lineNumber":58,"author":{"gitId":"-"},"content":"        expectedAccountRequest.setRegisteredAt(Instant.parse(\"2015-02-14T00:00:00Z\"));"},{"lineNumber":59,"author":{"gitId":"-"},"content":"        expectedAccountRequest.setRegistrationKey(actualAccountRequest.getRegistrationKey());"},{"lineNumber":60,"author":{"gitId":"-"},"content":"        verifyEquals(expectedAccountRequest, actualAccountRequest);"},{"lineNumber":61,"author":{"gitId":"-"},"content":""},{"lineNumber":62,"author":{"gitId":"-"},"content":"        ______TS(\"verify accounts deserialized correctly\");"},{"lineNumber":63,"author":{"gitId":"-"},"content":""},{"lineNumber":64,"author":{"gitId":"-"},"content":"        Account actualInstructorAccount \u003d dataBundle.accounts.get(\"instructor1\");"},{"lineNumber":65,"author":{"gitId":"-"},"content":"        Account expectedInstructorAccount \u003d new Account(\"idOfInstructor1\", \"Instructor 1\", \"instr1@teammates.tmt\");"},{"lineNumber":66,"author":{"gitId":"-"},"content":"        expectedInstructorAccount.setId(actualInstructorAccount.getId());"},{"lineNumber":67,"author":{"gitId":"-"},"content":"        verifyEquals(expectedInstructorAccount, actualInstructorAccount);"},{"lineNumber":68,"author":{"gitId":"-"},"content":"        assertTrue(actualInstructorAccount.getReadNotifications().size() \u003d\u003d 1);"},{"lineNumber":69,"author":{"gitId":"-"},"content":"        assertTrue(List.of(dataBundle.readNotifications.get(\"notification1Instructor1\"))"},{"lineNumber":70,"author":{"gitId":"-"},"content":"                .containsAll(actualInstructorAccount.getReadNotifications()));"},{"lineNumber":71,"author":{"gitId":"-"},"content":""},{"lineNumber":72,"author":{"gitId":"-"},"content":"        Account actualStudentAccount \u003d dataBundle.accounts.get(\"student1\");"},{"lineNumber":73,"author":{"gitId":"-"},"content":"        Account expectedStudentAccount \u003d new Account(\"idOfStudent1\", \"Student 1\", \"student1@teammates.tmt\");"},{"lineNumber":74,"author":{"gitId":"-"},"content":"        expectedStudentAccount.setId(actualStudentAccount.getId());"},{"lineNumber":75,"author":{"gitId":"-"},"content":"        verifyEquals(expectedStudentAccount, actualStudentAccount);"},{"lineNumber":76,"author":{"gitId":"-"},"content":"        assertTrue(actualStudentAccount.getReadNotifications().size() \u003d\u003d 1);"},{"lineNumber":77,"author":{"gitId":"-"},"content":"        assertTrue(List.of(dataBundle.readNotifications.get(\"notification1Student1\"))"},{"lineNumber":78,"author":{"gitId":"-"},"content":"                .containsAll(actualStudentAccount.getReadNotifications()));"},{"lineNumber":79,"author":{"gitId":"-"},"content":""},{"lineNumber":80,"author":{"gitId":"-"},"content":"        ______TS(\"verify notifications deserialized correctly\");"},{"lineNumber":81,"author":{"gitId":"-"},"content":""},{"lineNumber":82,"author":{"gitId":"-"},"content":"        Notification actualNotification \u003d dataBundle.notifications.get(\"notification1\");"},{"lineNumber":83,"author":{"gitId":"-"},"content":"        Notification expectedNotification \u003d new Notification(Instant.parse(\"2011-01-01T00:00:00Z\"),"},{"lineNumber":84,"author":{"gitId":"-"},"content":"                Instant.parse(\"2099-01-01T00:00:00Z\"), NotificationStyle.DANGER, NotificationTargetUser.GENERAL,"},{"lineNumber":85,"author":{"gitId":"-"},"content":"                \"A deprecation note\", \"\u003cp\u003eDeprecation happens in three minutes\u003c/p\u003e\");"},{"lineNumber":86,"author":{"gitId":"-"},"content":"        expectedNotification.setId(actualNotification.getId());"},{"lineNumber":87,"author":{"gitId":"-"},"content":"        verifyEquals(expectedNotification, actualNotification);"},{"lineNumber":88,"author":{"gitId":"-"},"content":""},{"lineNumber":89,"author":{"gitId":"-"},"content":"        ______TS(\"verify read notifications deserialized correctly\");"},{"lineNumber":90,"author":{"gitId":"-"},"content":""},{"lineNumber":91,"author":{"gitId":"-"},"content":"        ReadNotification actualReadNotification \u003d dataBundle.readNotifications.get(\"notification1Instructor1\");"},{"lineNumber":92,"author":{"gitId":"-"},"content":"        ReadNotification expectedReadNotification \u003d new ReadNotification(expectedInstructorAccount,"},{"lineNumber":93,"author":{"gitId":"-"},"content":"                expectedNotification);"},{"lineNumber":94,"author":{"gitId":"-"},"content":"        expectedNotification.setId(actualNotification.getId());"},{"lineNumber":95,"author":{"gitId":"-"},"content":"        verifyEquals(expectedReadNotification, actualReadNotification);"},{"lineNumber":96,"author":{"gitId":"-"},"content":""},{"lineNumber":97,"author":{"gitId":"-"},"content":"        ______TS(\"verify courses deserialized correctly\");"},{"lineNumber":98,"author":{"gitId":"-"},"content":""},{"lineNumber":99,"author":{"gitId":"-"},"content":"        Course actualTypicalCourse \u003d dataBundle.courses.get(\"typicalCourse\");"},{"lineNumber":100,"author":{"gitId":"-"},"content":"        Course expectedTypicalCourse \u003d new Course(\"typical-course-id\", \"Typical Course\", \"Africa/Johannesburg\","},{"lineNumber":101,"author":{"gitId":"-"},"content":"                \"TEAMMATES Test Institute\");"},{"lineNumber":102,"author":{"gitId":"-"},"content":"        verifyEquals(expectedTypicalCourse, actualTypicalCourse);"},{"lineNumber":103,"author":{"gitId":"-"},"content":""},{"lineNumber":104,"author":{"gitId":"-"},"content":"        ______TS(\"verify sections deserialized correctly\");"},{"lineNumber":105,"author":{"gitId":"-"},"content":""},{"lineNumber":106,"author":{"gitId":"-"},"content":"        Section actualSection \u003d dataBundle.sections.get(\"section1InTypicalCourse\");"},{"lineNumber":107,"author":{"gitId":"-"},"content":"        Section expectedSection \u003d new Section(expectedTypicalCourse, \"Section 1\");"},{"lineNumber":108,"author":{"gitId":"-"},"content":"        expectedSection.setId(actualSection.getId());"},{"lineNumber":109,"author":{"gitId":"-"},"content":"        verifyEquals(expectedSection, actualSection);"},{"lineNumber":110,"author":{"gitId":"-"},"content":""},{"lineNumber":111,"author":{"gitId":"-"},"content":"        ______TS(\"verify teams deserialized correctly\");"},{"lineNumber":112,"author":{"gitId":"-"},"content":""},{"lineNumber":113,"author":{"gitId":"-"},"content":"        Team actualTeam \u003d dataBundle.teams.get(\"team1InTypicalCourse\");"},{"lineNumber":114,"author":{"gitId":"-"},"content":"        Team expectedTeam \u003d new Team(expectedSection, \"Team 1\");"},{"lineNumber":115,"author":{"gitId":"-"},"content":"        expectedTeam.setId(actualTeam.getId());"},{"lineNumber":116,"author":{"gitId":"-"},"content":"        verifyEquals(expectedTeam, actualTeam);"},{"lineNumber":117,"author":{"gitId":"-"},"content":""},{"lineNumber":118,"author":{"gitId":"-"},"content":"        ______TS(\"verify instructors deserialized correctly\");"},{"lineNumber":119,"author":{"gitId":"-"},"content":""},{"lineNumber":120,"author":{"gitId":"-"},"content":"        Instructor actualInstructor1 \u003d dataBundle.instructors.get(\"instructor1OfTypicalCourse\");"},{"lineNumber":121,"author":{"gitId":"-"},"content":"        InstructorPermissionRole coOwner \u003d InstructorPermissionRole.INSTRUCTOR_PERMISSION_ROLE_COOWNER;"},{"lineNumber":122,"author":{"gitId":"-"},"content":"        InstructorPrivileges coOwnerPrivileges \u003d new InstructorPrivileges(coOwner.getRoleName());"},{"lineNumber":123,"author":{"gitId":"-"},"content":"        Instructor expectedInstructor1 \u003d new Instructor(actualTypicalCourse, \"Instructor 1\", \"instr1@teammates.tmt\","},{"lineNumber":124,"author":{"gitId":"-"},"content":"                true, \"Instructor\", coOwner, coOwnerPrivileges);"},{"lineNumber":125,"author":{"gitId":"-"},"content":"        expectedInstructor1.setId(actualInstructor1.getId());"},{"lineNumber":126,"author":{"gitId":"-"},"content":"        expectedInstructor1.setRegKey(actualInstructor1.getRegKey());"},{"lineNumber":127,"author":{"gitId":"-"},"content":"        expectedInstructor1.setAccount(expectedInstructorAccount);"},{"lineNumber":128,"author":{"gitId":"-"},"content":"        verifyEquals(expectedInstructor1, actualInstructor1);"},{"lineNumber":129,"author":{"gitId":"-"},"content":""},{"lineNumber":130,"author":{"gitId":"-"},"content":"        Instructor actualInstructor2 \u003d dataBundle.instructors.get(\"instructor2OfTypicalCourse\");"},{"lineNumber":131,"author":{"gitId":"-"},"content":"        InstructorPermissionRole tutor \u003d InstructorPermissionRole.INSTRUCTOR_PERMISSION_ROLE_TUTOR;"},{"lineNumber":132,"author":{"gitId":"-"},"content":"        InstructorPrivileges tutorPrivileges \u003d new InstructorPrivileges(tutor.getRoleName());"},{"lineNumber":133,"author":{"gitId":"-"},"content":"        Instructor expectedInstructor2 \u003d new Instructor(actualTypicalCourse, \"Instructor 2\", \"instr2@teammates.tmt\","},{"lineNumber":134,"author":{"gitId":"-"},"content":"                true, \"Instructor\", tutor, tutorPrivileges);"},{"lineNumber":135,"author":{"gitId":"-"},"content":"        expectedInstructor2.setId(actualInstructor2.getId());"},{"lineNumber":136,"author":{"gitId":"-"},"content":"        expectedInstructor2.setRegKey(actualInstructor2.getRegKey());"},{"lineNumber":137,"author":{"gitId":"-"},"content":"        verifyEquals(expectedInstructor2, actualInstructor2);"},{"lineNumber":138,"author":{"gitId":"-"},"content":""},{"lineNumber":139,"author":{"gitId":"-"},"content":"        ______TS(\"verify students deserialized correctly\");"},{"lineNumber":140,"author":{"gitId":"-"},"content":""},{"lineNumber":141,"author":{"gitId":"-"},"content":"        Student actualStudent1 \u003d dataBundle.students.get(\"student1InTypicalCourse\");"},{"lineNumber":142,"author":{"gitId":"-"},"content":"        Student expectedStudent1 \u003d new Student(expectedTypicalCourse, \"student1 In TypicalCourse\","},{"lineNumber":143,"author":{"gitId":"-"},"content":"                \"student1@teammates.tmt\", \"comment for student1TypicalCourse\");"},{"lineNumber":144,"author":{"gitId":"-"},"content":"        expectedStudent1.setAccount(expectedStudentAccount);"},{"lineNumber":145,"author":{"gitId":"-"},"content":"        expectedStudent1.setTeam(expectedTeam);"},{"lineNumber":146,"author":{"gitId":"-"},"content":"        expectedStudent1.setRegKey(actualStudent1.getRegKey());"},{"lineNumber":147,"author":{"gitId":"-"},"content":"        expectedStudent1.setId(actualStudent1.getId());"},{"lineNumber":148,"author":{"gitId":"-"},"content":"        verifyEquals(expectedStudent1, actualStudent1);"},{"lineNumber":149,"author":{"gitId":"-"},"content":""},{"lineNumber":150,"author":{"gitId":"-"},"content":"        Student actualStudent2 \u003d dataBundle.students.get(\"student2InTypicalCourse\");"},{"lineNumber":151,"author":{"gitId":"-"},"content":"        Student expectedStudent2 \u003d new Student(expectedTypicalCourse, \"student2 In TypicalCourse\","},{"lineNumber":152,"author":{"gitId":"-"},"content":"                \"student2@teammates.tmt\", \"\");"},{"lineNumber":153,"author":{"gitId":"-"},"content":"        expectedStudent2.setTeam(expectedTeam);"},{"lineNumber":154,"author":{"gitId":"-"},"content":"        expectedStudent2.setRegKey(actualStudent2.getRegKey());"},{"lineNumber":155,"author":{"gitId":"-"},"content":"        expectedStudent2.setId(actualStudent2.getId());"},{"lineNumber":156,"author":{"gitId":"-"},"content":"        verifyEquals(expectedStudent2, actualStudent2);"},{"lineNumber":157,"author":{"gitId":"-"},"content":""},{"lineNumber":158,"author":{"gitId":"-"},"content":"        ______TS(\"verify feedback sessions\");"},{"lineNumber":159,"author":{"gitId":"-"},"content":""},{"lineNumber":160,"author":{"gitId":"-"},"content":"        FeedbackSession actualSession1 \u003d dataBundle.feedbackSessions.get(\"session1InTypicalCourse\");"},{"lineNumber":161,"author":{"gitId":"-"},"content":"        FeedbackSession expectedSession1 \u003d new FeedbackSession(\"First feedback session\", expectedTypicalCourse,"},{"lineNumber":162,"author":{"gitId":"-"},"content":"                \"instr1@teammates.tmt\", \"Please please fill in the following questions.\","},{"lineNumber":163,"author":{"gitId":"-"},"content":"                Instant.parse(\"2012-04-01T22:00:00Z\"), Instant.parse(\"2027-04-30T22:00:00Z\"),"},{"lineNumber":164,"author":{"gitId":"-"},"content":"                Instant.parse(\"2012-03-28T22:00:00Z\"), Instant.parse(\"2027-05-01T22:00:00Z\"), Duration.ofMinutes(10),"},{"lineNumber":165,"author":{"gitId":"-"},"content":"                true, true, true);"},{"lineNumber":166,"author":{"gitId":"-"},"content":"        expectedSession1.setId(actualSession1.getId());"},{"lineNumber":167,"author":{"gitId":"-"},"content":"        verifyEquals(expectedSession1, actualSession1);"},{"lineNumber":168,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":169,"author":{"gitId":"hhdqirui"},"content":"        ______TS(\"verify feedback questions deserialized correctly\");"},{"lineNumber":170,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":171,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion actualQuestion1 \u003d dataBundle.feedbackQuestions.get(\"qn1InSession1InCourse1\");"},{"lineNumber":172,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestionDetails questionDetails1 \u003d"},{"lineNumber":173,"author":{"gitId":"hhdqirui"},"content":"                new FeedbackTextQuestionDetails(\"What is the best selling point of your product?\");"},{"lineNumber":174,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion expectedQuestion1 \u003d FeedbackQuestion.makeQuestion(expectedSession1, 1,"},{"lineNumber":175,"author":{"gitId":"hhdqirui"},"content":"                \"This is a text question.\", FeedbackParticipantType.STUDENTS, FeedbackParticipantType.SELF,"},{"lineNumber":176,"author":{"gitId":"hhdqirui"},"content":"                1, List.of(FeedbackParticipantType.INSTRUCTORS), List.of(FeedbackParticipantType.INSTRUCTORS),"},{"lineNumber":177,"author":{"gitId":"hhdqirui"},"content":"                List.of(FeedbackParticipantType.INSTRUCTORS), questionDetails1);"},{"lineNumber":178,"author":{"gitId":"hhdqirui"},"content":"        expectedQuestion1.setId(actualQuestion1.getId());"},{"lineNumber":179,"author":{"gitId":"hhdqirui"},"content":"        verifyEquals(expectedQuestion1, actualQuestion1);"},{"lineNumber":180,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":181,"author":{"gitId":"-"},"content":""},{"lineNumber":182,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":183,"author":{"gitId":"-"},"content":"    public void testPersistDataBundle_typicalValues_persistedToDbCorrectly() throws Exception {"},{"lineNumber":184,"author":{"gitId":"-"},"content":"        SqlDataBundle dataBundle \u003d loadSqlDataBundle(\"/DataBundleLogicIT.json\");"},{"lineNumber":185,"author":{"gitId":"-"},"content":"        dataBundleLogic.persistDataBundle(dataBundle);"},{"lineNumber":186,"author":{"gitId":"-"},"content":""},{"lineNumber":187,"author":{"gitId":"-"},"content":"        ______TS(\"verify notifications persisted correctly\");"},{"lineNumber":188,"author":{"gitId":"-"},"content":"        Notification notification1 \u003d dataBundle.notifications.get(\"notification1\");"},{"lineNumber":189,"author":{"gitId":"-"},"content":""},{"lineNumber":190,"author":{"gitId":"-"},"content":"        verifyPresentInDatabase(notification1);"},{"lineNumber":191,"author":{"gitId":"-"},"content":""},{"lineNumber":192,"author":{"gitId":"-"},"content":"        ______TS(\"verify course persisted correctly\");"},{"lineNumber":193,"author":{"gitId":"-"},"content":"        Course typicalCourse \u003d dataBundle.courses.get(\"typicalCourse\");"},{"lineNumber":194,"author":{"gitId":"-"},"content":""},{"lineNumber":195,"author":{"gitId":"-"},"content":"        verifyPresentInDatabase(typicalCourse);"},{"lineNumber":196,"author":{"gitId":"-"},"content":""},{"lineNumber":197,"author":{"gitId":"-"},"content":"        ______TS(\"verify feedback sessions persisted correctly\");"},{"lineNumber":198,"author":{"gitId":"-"},"content":"        FeedbackSession session1InTypicalCourse \u003d dataBundle.feedbackSessions.get(\"session1InTypicalCourse\");"},{"lineNumber":199,"author":{"gitId":"-"},"content":""},{"lineNumber":200,"author":{"gitId":"-"},"content":"        verifyPresentInDatabase(session1InTypicalCourse);"},{"lineNumber":201,"author":{"gitId":"-"},"content":""},{"lineNumber":202,"author":{"gitId":"-"},"content":"        ______TS(\"verify accounts persisted correctly\");"},{"lineNumber":203,"author":{"gitId":"-"},"content":"        Account instructor1Account \u003d dataBundle.accounts.get(\"instructor1\");"},{"lineNumber":204,"author":{"gitId":"-"},"content":"        Account student1Account \u003d dataBundle.accounts.get(\"student1\");"},{"lineNumber":205,"author":{"gitId":"-"},"content":""},{"lineNumber":206,"author":{"gitId":"-"},"content":"        verifyPresentInDatabase(instructor1Account);"},{"lineNumber":207,"author":{"gitId":"-"},"content":"        verifyPresentInDatabase(student1Account);"},{"lineNumber":208,"author":{"gitId":"-"},"content":""},{"lineNumber":209,"author":{"gitId":"-"},"content":"        // TODO: incomplete"},{"lineNumber":210,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":211,"author":{"gitId":"-"},"content":""},{"lineNumber":212,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"hhdqirui":16,"-":196}},{"path":"src/it/java/teammates/it/sqllogic/core/FeedbackQuestionsLogicIT.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"hhdqirui"},"content":"package teammates.it.sqllogic.core;"},{"lineNumber":2,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":3,"author":{"gitId":"hhdqirui"},"content":"import java.util.ArrayList;"},{"lineNumber":4,"author":{"gitId":"hhdqirui"},"content":"import java.util.List;"},{"lineNumber":5,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":6,"author":{"gitId":"hhdqirui"},"content":"import org.testng.annotations.BeforeClass;"},{"lineNumber":7,"author":{"gitId":"hhdqirui"},"content":"import org.testng.annotations.BeforeMethod;"},{"lineNumber":8,"author":{"gitId":"hhdqirui"},"content":"import org.testng.annotations.Test;"},{"lineNumber":9,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":10,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.FeedbackParticipantType;"},{"lineNumber":11,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.SqlDataBundle;"},{"lineNumber":12,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.questions.FeedbackTextQuestionDetails;"},{"lineNumber":13,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":14,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.util.HibernateUtil;"},{"lineNumber":15,"author":{"gitId":"hhdqirui"},"content":"import teammates.it.test.BaseTestCaseWithSqlDatabaseAccess;"},{"lineNumber":16,"author":{"gitId":"hhdqirui"},"content":"import teammates.sqllogic.core.FeedbackQuestionsLogic;"},{"lineNumber":17,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.FeedbackQuestion;"},{"lineNumber":18,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.FeedbackSession;"},{"lineNumber":19,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":20,"author":{"gitId":"hhdqirui"},"content":"/**"},{"lineNumber":21,"author":{"gitId":"hhdqirui"},"content":" * SUT: {@link FeedbackQuestionsLogic}."},{"lineNumber":22,"author":{"gitId":"hhdqirui"},"content":" */"},{"lineNumber":23,"author":{"gitId":"hhdqirui"},"content":"public class FeedbackQuestionsLogicIT extends BaseTestCaseWithSqlDatabaseAccess {"},{"lineNumber":24,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":25,"author":{"gitId":"hhdqirui"},"content":"    private FeedbackQuestionsLogic fqLogic \u003d FeedbackQuestionsLogic.inst();"},{"lineNumber":26,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":27,"author":{"gitId":"hhdqirui"},"content":"    private SqlDataBundle typicalDataBundle;"},{"lineNumber":28,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":29,"author":{"gitId":"hhdqirui"},"content":"    @Override"},{"lineNumber":30,"author":{"gitId":"hhdqirui"},"content":"    @BeforeClass"},{"lineNumber":31,"author":{"gitId":"hhdqirui"},"content":"    public void setupClass() {"},{"lineNumber":32,"author":{"gitId":"hhdqirui"},"content":"        super.setupClass();"},{"lineNumber":33,"author":{"gitId":"hhdqirui"},"content":"        typicalDataBundle \u003d getTypicalSqlDataBundle();"},{"lineNumber":34,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":35,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":36,"author":{"gitId":"hhdqirui"},"content":"    @Override"},{"lineNumber":37,"author":{"gitId":"hhdqirui"},"content":"    @BeforeMethod"},{"lineNumber":38,"author":{"gitId":"hhdqirui"},"content":"    protected void setUp() throws Exception {"},{"lineNumber":39,"author":{"gitId":"hhdqirui"},"content":"        super.setUp();"},{"lineNumber":40,"author":{"gitId":"hhdqirui"},"content":"        persistDataBundle(typicalDataBundle);"},{"lineNumber":41,"author":{"gitId":"hhdqirui"},"content":"        HibernateUtil.flushSession();"},{"lineNumber":42,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":43,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":44,"author":{"gitId":"hhdqirui"},"content":"    @Test"},{"lineNumber":45,"author":{"gitId":"hhdqirui"},"content":"    public void testCreateFeedbackQuestion() throws InvalidParametersException {"},{"lineNumber":46,"author":{"gitId":"hhdqirui"},"content":"        FeedbackSession fs \u003d typicalDataBundle.feedbackSessions.get(\"session1InCourse1\");"},{"lineNumber":47,"author":{"gitId":"hhdqirui"},"content":"        FeedbackTextQuestionDetails newQuestionDetails \u003d new FeedbackTextQuestionDetails(\"New question text.\");"},{"lineNumber":48,"author":{"gitId":"hhdqirui"},"content":"        List\u003cFeedbackParticipantType\u003e showTos \u003d new ArrayList\u003c\u003e();"},{"lineNumber":49,"author":{"gitId":"hhdqirui"},"content":"        showTos.add(FeedbackParticipantType.INSTRUCTORS);"},{"lineNumber":50,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion newQuestion \u003d FeedbackQuestion.makeQuestion(fs, 6, \"This is a new text question\","},{"lineNumber":51,"author":{"gitId":"hhdqirui"},"content":"                FeedbackParticipantType.STUDENTS, FeedbackParticipantType.OWN_TEAM_MEMBERS, -100,"},{"lineNumber":52,"author":{"gitId":"hhdqirui"},"content":"                showTos, showTos, showTos, newQuestionDetails);"},{"lineNumber":53,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":54,"author":{"gitId":"hhdqirui"},"content":"        newQuestion \u003d fqLogic.createFeedbackQuestion(newQuestion);"},{"lineNumber":55,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":56,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion actualQuestion \u003d fqLogic.getFeedbackQuestion(newQuestion.getId());"},{"lineNumber":57,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":58,"author":{"gitId":"hhdqirui"},"content":"        verifyEquals(newQuestion, actualQuestion);"},{"lineNumber":59,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":60,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":61,"author":{"gitId":"hhdqirui"},"content":"    @Test"},{"lineNumber":62,"author":{"gitId":"hhdqirui"},"content":"    public void testGetFeedbackQuestionsForSession() {"},{"lineNumber":63,"author":{"gitId":"hhdqirui"},"content":"        FeedbackSession fs \u003d typicalDataBundle.feedbackSessions.get(\"session1InCourse1\");"},{"lineNumber":64,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion fq1 \u003d typicalDataBundle.feedbackQuestions.get(\"qn1InSession1InCourse1\");"},{"lineNumber":65,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion fq2 \u003d typicalDataBundle.feedbackQuestions.get(\"qn2InSession1InCourse1\");"},{"lineNumber":66,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion fq3 \u003d typicalDataBundle.feedbackQuestions.get(\"qn3InSession1InCourse1\");"},{"lineNumber":67,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion fq4 \u003d typicalDataBundle.feedbackQuestions.get(\"qn4InSession1InCourse1\");"},{"lineNumber":68,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion fq5 \u003d typicalDataBundle.feedbackQuestions.get(\"qn5InSession1InCourse1\");"},{"lineNumber":69,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":70,"author":{"gitId":"hhdqirui"},"content":"        List\u003cFeedbackQuestion\u003e expectedQuestions \u003d List.of(fq1, fq2, fq3, fq4, fq5);"},{"lineNumber":71,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":72,"author":{"gitId":"hhdqirui"},"content":"        List\u003cFeedbackQuestion\u003e actualQuestions \u003d fqLogic.getFeedbackQuestionsForSession(fs);"},{"lineNumber":73,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":74,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(expectedQuestions.size(), actualQuestions.size());"},{"lineNumber":75,"author":{"gitId":"hhdqirui"},"content":"        for (int i \u003d 0; i \u003c expectedQuestions.size(); i++) {"},{"lineNumber":76,"author":{"gitId":"hhdqirui"},"content":"            verifyEquals(expectedQuestions.get(i), actualQuestions.get(i));"},{"lineNumber":77,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":78,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":79,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":80,"author":{"gitId":"hhdqirui"},"content":"}"}],"authorContributionMap":{"hhdqirui":80}},{"path":"src/it/java/teammates/it/sqllogic/core/NotificationsLogicIT.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"hhdqirui"},"content":"package teammates.it.sqllogic.core;"},{"lineNumber":2,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":3,"author":{"gitId":"hhdqirui"},"content":"import java.time.Instant;"},{"lineNumber":4,"author":{"gitId":"hhdqirui"},"content":"import java.util.UUID;"},{"lineNumber":5,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":6,"author":{"gitId":"hhdqirui"},"content":"import org.testng.annotations.Test;"},{"lineNumber":7,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":8,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.NotificationStyle;"},{"lineNumber":9,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.NotificationTargetUser;"},{"lineNumber":10,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":11,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":12,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":13,"author":{"gitId":"hhdqirui"},"content":"import teammates.it.test.BaseTestCaseWithSqlDatabaseAccess;"},{"lineNumber":14,"author":{"gitId":"hhdqirui"},"content":"import teammates.sqllogic.core.NotificationsLogic;"},{"lineNumber":15,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.Notification;"},{"lineNumber":16,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":17,"author":{"gitId":"hhdqirui"},"content":"/**"},{"lineNumber":18,"author":{"gitId":"hhdqirui"},"content":" * SUT: {@link NotificationsLogic}."},{"lineNumber":19,"author":{"gitId":"hhdqirui"},"content":" */"},{"lineNumber":20,"author":{"gitId":"hhdqirui"},"content":"public class NotificationsLogicIT extends BaseTestCaseWithSqlDatabaseAccess {"},{"lineNumber":21,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":22,"author":{"gitId":"hhdqirui"},"content":"    private NotificationsLogic notificationsLogic \u003d NotificationsLogic.inst();"},{"lineNumber":23,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":24,"author":{"gitId":"hhdqirui"},"content":"    @Test"},{"lineNumber":25,"author":{"gitId":"hhdqirui"},"content":"    public void testUpdateNotification()"},{"lineNumber":26,"author":{"gitId":"hhdqirui"},"content":"            throws EntityAlreadyExistsException, InvalidParametersException, EntityDoesNotExistException {"},{"lineNumber":27,"author":{"gitId":"hhdqirui"},"content":"        Instant newStartTime \u003d Instant.parse(\"2012-01-01T00:00:00Z\");"},{"lineNumber":28,"author":{"gitId":"hhdqirui"},"content":"        Instant newEndTime \u003d Instant.parse(\"2098-01-01T00:00:00Z\");"},{"lineNumber":29,"author":{"gitId":"hhdqirui"},"content":"        NotificationStyle newStyle \u003d NotificationStyle.DARK;"},{"lineNumber":30,"author":{"gitId":"hhdqirui"},"content":"        NotificationTargetUser newTargetUser \u003d NotificationTargetUser.INSTRUCTOR;"},{"lineNumber":31,"author":{"gitId":"hhdqirui"},"content":"        String newTitle \u003d \"An updated deprecation note\";"},{"lineNumber":32,"author":{"gitId":"hhdqirui"},"content":"        String newMessage \u003d \"\u003cp\u003eDeprecation happens in three seconds\u003c/p\u003e\";"},{"lineNumber":33,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":34,"author":{"gitId":"hhdqirui"},"content":"        ______TS(\"success: update notification that already exists\");"},{"lineNumber":35,"author":{"gitId":"hhdqirui"},"content":"        Notification notification \u003d new Notification(Instant.parse(\"2011-01-01T00:00:00Z\"),"},{"lineNumber":36,"author":{"gitId":"hhdqirui"},"content":"                Instant.parse(\"2099-01-01T00:00:00Z\"), NotificationStyle.DANGER, NotificationTargetUser.GENERAL,"},{"lineNumber":37,"author":{"gitId":"hhdqirui"},"content":"                \"A deprecation note\", \"\u003cp\u003eDeprecation happens in three minutes\u003c/p\u003e\");"},{"lineNumber":38,"author":{"gitId":"hhdqirui"},"content":"        notificationsLogic.createNotification(notification);"},{"lineNumber":39,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":40,"author":{"gitId":"-"},"content":"        UUID notificationId \u003d notification.getId();"},{"lineNumber":41,"author":{"gitId":"hhdqirui"},"content":"        Notification expectedNotification \u003d notificationsLogic.updateNotification(notificationId, newStartTime, newEndTime,"},{"lineNumber":42,"author":{"gitId":"hhdqirui"},"content":"                newStyle, newTargetUser, newTitle, newMessage);"},{"lineNumber":43,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":44,"author":{"gitId":"-"},"content":"        assertEquals(notificationId, expectedNotification.getId());"},{"lineNumber":45,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(newStartTime, expectedNotification.getStartTime());"},{"lineNumber":46,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(newEndTime, expectedNotification.getEndTime());"},{"lineNumber":47,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(newStyle, expectedNotification.getStyle());"},{"lineNumber":48,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(newTargetUser, expectedNotification.getTargetUser());"},{"lineNumber":49,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(newTitle, expectedNotification.getTitle());"},{"lineNumber":50,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(newMessage, expectedNotification.getMessage());"},{"lineNumber":51,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":52,"author":{"gitId":"hhdqirui"},"content":"        Notification actualNotification \u003d notificationsLogic.getNotification(notificationId);"},{"lineNumber":53,"author":{"gitId":"hhdqirui"},"content":"        verifyEquals(expectedNotification, actualNotification);"},{"lineNumber":54,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":55,"author":{"gitId":"hhdqirui"},"content":"        ______TS(\"failure: update notification that does not exist\");"},{"lineNumber":56,"author":{"gitId":"hhdqirui"},"content":"        UUID nonExistentId \u003d generateDifferentUuid(notificationId);"},{"lineNumber":57,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":58,"author":{"gitId":"hhdqirui"},"content":"        assertThrows(EntityDoesNotExistException.class, () -\u003e notificationsLogic.updateNotification(nonExistentId,"},{"lineNumber":59,"author":{"gitId":"hhdqirui"},"content":"                newStartTime, newEndTime, newStyle, newTargetUser, newTitle, newMessage));"},{"lineNumber":60,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":61,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":62,"author":{"gitId":"hhdqirui"},"content":"}"}],"authorContributionMap":{"hhdqirui":60,"-":2}},{"path":"src/it/java/teammates/it/sqllogic/core/UsersLogicIT.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"domlimm"},"content":"package teammates.it.sqllogic.core;"},{"lineNumber":2,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":3,"author":{"gitId":"domlimm"},"content":"import org.testng.annotations.BeforeMethod;"},{"lineNumber":4,"author":{"gitId":"domlimm"},"content":"import org.testng.annotations.Test;"},{"lineNumber":5,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":6,"author":{"gitId":"domlimm"},"content":"import teammates.common.datatransfer.InstructorPermissionRole;"},{"lineNumber":7,"author":{"gitId":"domlimm"},"content":"import teammates.common.datatransfer.InstructorPrivileges;"},{"lineNumber":8,"author":{"gitId":"domlimm"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":9,"author":{"gitId":"domlimm"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":10,"author":{"gitId":"domlimm"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":11,"author":{"gitId":"domlimm"},"content":"import teammates.common.util.Const;"},{"lineNumber":12,"author":{"gitId":"domlimm"},"content":"import teammates.it.test.BaseTestCaseWithSqlDatabaseAccess;"},{"lineNumber":13,"author":{"gitId":"domlimm"},"content":"import teammates.sqllogic.core.AccountsLogic;"},{"lineNumber":14,"author":{"gitId":"domlimm"},"content":"import teammates.sqllogic.core.CoursesLogic;"},{"lineNumber":15,"author":{"gitId":"domlimm"},"content":"import teammates.sqllogic.core.UsersLogic;"},{"lineNumber":16,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Account;"},{"lineNumber":17,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Course;"},{"lineNumber":18,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":19,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Student;"},{"lineNumber":20,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":21,"author":{"gitId":"domlimm"},"content":"/**"},{"lineNumber":22,"author":{"gitId":"domlimm"},"content":" * SUT: {@link UsersLogic}."},{"lineNumber":23,"author":{"gitId":"domlimm"},"content":" */"},{"lineNumber":24,"author":{"gitId":"domlimm"},"content":"public class UsersLogicIT extends BaseTestCaseWithSqlDatabaseAccess {"},{"lineNumber":25,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":26,"author":{"gitId":"domlimm"},"content":"    private final UsersLogic usersLogic \u003d UsersLogic.inst();"},{"lineNumber":27,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":28,"author":{"gitId":"domlimm"},"content":"    private final AccountsLogic accountsLogic \u003d AccountsLogic.inst();"},{"lineNumber":29,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":30,"author":{"gitId":"domlimm"},"content":"    private final CoursesLogic coursesLogic \u003d CoursesLogic.inst();"},{"lineNumber":31,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":32,"author":{"gitId":"domlimm"},"content":"    private Course course;"},{"lineNumber":33,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":34,"author":{"gitId":"domlimm"},"content":"    private Account account;"},{"lineNumber":35,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":36,"author":{"gitId":"domlimm"},"content":"    @BeforeMethod"},{"lineNumber":37,"author":{"gitId":"domlimm"},"content":"    @Override"},{"lineNumber":38,"author":{"gitId":"domlimm"},"content":"    protected void setUp() throws Exception {"},{"lineNumber":39,"author":{"gitId":"domlimm"},"content":"        super.setUp();"},{"lineNumber":40,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":41,"author":{"gitId":"domlimm"},"content":"        course \u003d getTypicalCourse();"},{"lineNumber":42,"author":{"gitId":"domlimm"},"content":"        coursesLogic.createCourse(course);"},{"lineNumber":43,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":44,"author":{"gitId":"domlimm"},"content":"        account \u003d getTypicalAccount();"},{"lineNumber":45,"author":{"gitId":"domlimm"},"content":"        accountsLogic.createAccount(account);"},{"lineNumber":46,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":47,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":48,"author":{"gitId":"domlimm"},"content":"    @Test"},{"lineNumber":49,"author":{"gitId":"domlimm"},"content":"    public void testResetInstructorGoogleId()"},{"lineNumber":50,"author":{"gitId":"domlimm"},"content":"            throws InvalidParametersException, EntityAlreadyExistsException, EntityDoesNotExistException {"},{"lineNumber":51,"author":{"gitId":"domlimm"},"content":"        Instructor instructor \u003d getTypicalInstructor();"},{"lineNumber":52,"author":{"gitId":"domlimm"},"content":"        instructor.setCourse(course);"},{"lineNumber":53,"author":{"gitId":"domlimm"},"content":"        instructor.setAccount(account);"},{"lineNumber":54,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":55,"author":{"gitId":"domlimm"},"content":"        String email \u003d instructor.getEmail();"},{"lineNumber":56,"author":{"gitId":"domlimm"},"content":"        String courseId \u003d instructor.getCourseId();"},{"lineNumber":57,"author":{"gitId":"domlimm"},"content":"        String googleId \u003d instructor.getGoogleId();"},{"lineNumber":58,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":59,"author":{"gitId":"domlimm"},"content":"        ______TS(\"success: reset instructor that does not exist\");"},{"lineNumber":60,"author":{"gitId":"domlimm"},"content":"        assertThrows(EntityDoesNotExistException.class,"},{"lineNumber":61,"author":{"gitId":"domlimm"},"content":"                () -\u003e usersLogic.resetInstructorGoogleId(email, courseId, googleId));"},{"lineNumber":62,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":63,"author":{"gitId":"domlimm"},"content":"        ______TS(\"success: reset instructor that exists\");"},{"lineNumber":64,"author":{"gitId":"domlimm"},"content":"        usersLogic.createInstructor(instructor);"},{"lineNumber":65,"author":{"gitId":"domlimm"},"content":"        usersLogic.resetInstructorGoogleId(email, courseId, googleId);"},{"lineNumber":66,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":67,"author":{"gitId":"domlimm"},"content":"        assertNull(instructor.getAccount());"},{"lineNumber":68,"author":{"gitId":"domlimm"},"content":"        assertEquals(0, accountsLogic.getAccountsForEmail(email).size());"},{"lineNumber":69,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":70,"author":{"gitId":"domlimm"},"content":"        ______TS(\"found at least one other user with same googleId, should not delete account\");"},{"lineNumber":71,"author":{"gitId":"domlimm"},"content":"        Account anotherAccount \u003d getTypicalAccount();"},{"lineNumber":72,"author":{"gitId":"domlimm"},"content":"        accountsLogic.createAccount(anotherAccount);"},{"lineNumber":73,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":74,"author":{"gitId":"domlimm"},"content":"        instructor.setCourse(course);"},{"lineNumber":75,"author":{"gitId":"domlimm"},"content":"        instructor.setAccount(anotherAccount);"},{"lineNumber":76,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":77,"author":{"gitId":"domlimm"},"content":"        Student anotherUser \u003d getTypicalStudent();"},{"lineNumber":78,"author":{"gitId":"domlimm"},"content":"        anotherUser.setCourse(course);"},{"lineNumber":79,"author":{"gitId":"domlimm"},"content":"        anotherUser.setAccount(anotherAccount);"},{"lineNumber":80,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":81,"author":{"gitId":"domlimm"},"content":"        usersLogic.createStudent(anotherUser);"},{"lineNumber":82,"author":{"gitId":"domlimm"},"content":"        usersLogic.resetInstructorGoogleId(email, courseId, googleId);"},{"lineNumber":83,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":84,"author":{"gitId":"domlimm"},"content":"        assertNull(instructor.getAccount());"},{"lineNumber":85,"author":{"gitId":"domlimm"},"content":"        assertEquals(anotherAccount, accountsLogic.getAccountForGoogleId(googleId));"},{"lineNumber":86,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":87,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":88,"author":{"gitId":"domlimm"},"content":"    @Test"},{"lineNumber":89,"author":{"gitId":"domlimm"},"content":"    public void testResetStudentGoogleId()"},{"lineNumber":90,"author":{"gitId":"domlimm"},"content":"            throws InvalidParametersException, EntityAlreadyExistsException, EntityDoesNotExistException {"},{"lineNumber":91,"author":{"gitId":"domlimm"},"content":"        Student student \u003d getTypicalStudent();"},{"lineNumber":92,"author":{"gitId":"domlimm"},"content":"        student.setCourse(course);"},{"lineNumber":93,"author":{"gitId":"domlimm"},"content":"        student.setAccount(account);"},{"lineNumber":94,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":95,"author":{"gitId":"domlimm"},"content":"        String email \u003d student.getEmail();"},{"lineNumber":96,"author":{"gitId":"domlimm"},"content":"        String courseId \u003d student.getCourseId();"},{"lineNumber":97,"author":{"gitId":"domlimm"},"content":"        String googleId \u003d student.getGoogleId();"},{"lineNumber":98,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":99,"author":{"gitId":"domlimm"},"content":"        ______TS(\"success: reset student that does not exist\");"},{"lineNumber":100,"author":{"gitId":"domlimm"},"content":"        assertThrows(EntityDoesNotExistException.class,"},{"lineNumber":101,"author":{"gitId":"domlimm"},"content":"                () -\u003e usersLogic.resetStudentGoogleId(email, courseId, googleId));"},{"lineNumber":102,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":103,"author":{"gitId":"domlimm"},"content":"        ______TS(\"success: reset student that exists\");"},{"lineNumber":104,"author":{"gitId":"domlimm"},"content":"        usersLogic.createStudent(student);"},{"lineNumber":105,"author":{"gitId":"domlimm"},"content":"        usersLogic.resetStudentGoogleId(email, courseId, googleId);"},{"lineNumber":106,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":107,"author":{"gitId":"domlimm"},"content":"        assertNull(student.getAccount());"},{"lineNumber":108,"author":{"gitId":"domlimm"},"content":"        assertEquals(0, accountsLogic.getAccountsForEmail(email).size());"},{"lineNumber":109,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":110,"author":{"gitId":"domlimm"},"content":"        ______TS(\"found at least one other user with same googleId, should not delete account\");"},{"lineNumber":111,"author":{"gitId":"domlimm"},"content":"        Account anotherAccount \u003d getTypicalAccount();"},{"lineNumber":112,"author":{"gitId":"domlimm"},"content":"        accountsLogic.createAccount(anotherAccount);"},{"lineNumber":113,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":114,"author":{"gitId":"domlimm"},"content":"        student.setCourse(course);"},{"lineNumber":115,"author":{"gitId":"domlimm"},"content":"        student.setAccount(anotherAccount);"},{"lineNumber":116,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":117,"author":{"gitId":"domlimm"},"content":"        Instructor anotherUser \u003d getTypicalInstructor();"},{"lineNumber":118,"author":{"gitId":"domlimm"},"content":"        anotherUser.setCourse(course);"},{"lineNumber":119,"author":{"gitId":"domlimm"},"content":"        anotherUser.setAccount(anotherAccount);"},{"lineNumber":120,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":121,"author":{"gitId":"domlimm"},"content":"        usersLogic.createInstructor(anotherUser);"},{"lineNumber":122,"author":{"gitId":"domlimm"},"content":"        usersLogic.resetStudentGoogleId(email, courseId, googleId);"},{"lineNumber":123,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":124,"author":{"gitId":"domlimm"},"content":"        assertNull(student.getAccount());"},{"lineNumber":125,"author":{"gitId":"domlimm"},"content":"        assertEquals(anotherAccount, accountsLogic.getAccountForGoogleId(googleId));"},{"lineNumber":126,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":127,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":128,"author":{"gitId":"domlimm"},"content":"    private Course getTypicalCourse() {"},{"lineNumber":129,"author":{"gitId":"domlimm"},"content":"        return new Course(\"course-id\", \"course-name\", Const.DEFAULT_TIME_ZONE, \"teammates\");"},{"lineNumber":130,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":131,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":132,"author":{"gitId":"domlimm"},"content":"    private Student getTypicalStudent() {"},{"lineNumber":133,"author":{"gitId":"domlimm"},"content":"        return new Student(course, \"student-name\", \"valid-student@email.tmt\", \"comments\");"},{"lineNumber":134,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":135,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":136,"author":{"gitId":"domlimm"},"content":"    private Instructor getTypicalInstructor() {"},{"lineNumber":137,"author":{"gitId":"domlimm"},"content":"        InstructorPrivileges instructorPrivileges \u003d"},{"lineNumber":138,"author":{"gitId":"domlimm"},"content":"                new InstructorPrivileges(Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_COOWNER);"},{"lineNumber":139,"author":{"gitId":"domlimm"},"content":"        InstructorPermissionRole role \u003d InstructorPermissionRole"},{"lineNumber":140,"author":{"gitId":"domlimm"},"content":"                .getEnum(Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_COOWNER);"},{"lineNumber":141,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":142,"author":{"gitId":"domlimm"},"content":"        return new Instructor(course, \"instructor-name\", \"valid-instructor@email.tmt\","},{"lineNumber":143,"author":{"gitId":"domlimm"},"content":"                true, Const.DEFAULT_DISPLAY_NAME_FOR_INSTRUCTOR, role, instructorPrivileges);"},{"lineNumber":144,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":145,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":146,"author":{"gitId":"domlimm"},"content":"    private Account getTypicalAccount() {"},{"lineNumber":147,"author":{"gitId":"domlimm"},"content":"        return new Account(\"google-id\", \"name\", \"email@teammates.com\");"},{"lineNumber":148,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":149,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":150,"author":{"gitId":"domlimm"},"content":"}"}],"authorContributionMap":{"domlimm":150}},{"path":"src/it/java/teammates/it/sqllogic/core/package-info.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"hhdqirui"},"content":"/**"},{"lineNumber":2,"author":{"gitId":"hhdqirui"},"content":" * Contains test cases for {@link teammates.storage.sqlapi} package."},{"lineNumber":3,"author":{"gitId":"hhdqirui"},"content":" */"},{"lineNumber":4,"author":{"gitId":"hhdqirui"},"content":"package teammates.it.sqllogic.core;"}],"authorContributionMap":{"hhdqirui":4}},{"path":"src/it/java/teammates/it/storage/sqlapi/AccountRequestsDbIT.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"kevin9foong"},"content":"package teammates.it.storage.sqlapi;"},{"lineNumber":2,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":3,"author":{"gitId":"kevin9foong"},"content":"import java.util.List;"},{"lineNumber":4,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":5,"author":{"gitId":"kevin9foong"},"content":"import org.testng.annotations.Test;"},{"lineNumber":6,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":7,"author":{"gitId":"kevin9foong"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":8,"author":{"gitId":"kevin9foong"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":9,"author":{"gitId":"kevin9foong"},"content":"import teammates.it.test.BaseTestCaseWithSqlDatabaseAccess;"},{"lineNumber":10,"author":{"gitId":"kevin9foong"},"content":"import teammates.storage.sqlapi.AccountRequestsDb;"},{"lineNumber":11,"author":{"gitId":"kevin9foong"},"content":"import teammates.storage.sqlentity.AccountRequest;"},{"lineNumber":12,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":13,"author":{"gitId":"kevin9foong"},"content":"/**"},{"lineNumber":14,"author":{"gitId":"kevin9foong"},"content":" * SUT: {@link CoursesDb}."},{"lineNumber":15,"author":{"gitId":"kevin9foong"},"content":" */"},{"lineNumber":16,"author":{"gitId":"kevin9foong"},"content":"public class AccountRequestsDbIT extends BaseTestCaseWithSqlDatabaseAccess {"},{"lineNumber":17,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":18,"author":{"gitId":"kevin9foong"},"content":"    private final AccountRequestsDb accountRequestDb \u003d AccountRequestsDb.inst();"},{"lineNumber":19,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":20,"author":{"gitId":"kevin9foong"},"content":"    @Test"},{"lineNumber":21,"author":{"gitId":"kevin9foong"},"content":"    public void testCreateReadDeleteAccountRequest() throws Exception {"},{"lineNumber":22,"author":{"gitId":"kevin9foong"},"content":"        ______TS(\"Create account request, does not exists, succeeds\");"},{"lineNumber":23,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":24,"author":{"gitId":"kevin9foong"},"content":"        AccountRequest accountRequest \u003d new AccountRequest(\"test@gmail.com\", \"name\", \"institute\");"},{"lineNumber":25,"author":{"gitId":"kevin9foong"},"content":"        accountRequestDb.createAccountRequest(accountRequest);"},{"lineNumber":26,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":27,"author":{"gitId":"kevin9foong"},"content":"        ______TS(\"Read account request using the given email and institute\");"},{"lineNumber":28,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":29,"author":{"gitId":"kevin9foong"},"content":"        AccountRequest actualAccReqEmalAndInstitute \u003d"},{"lineNumber":30,"author":{"gitId":"kevin9foong"},"content":"                accountRequestDb.getAccountRequest(accountRequest.getEmail(), accountRequest.getInstitute());"},{"lineNumber":31,"author":{"gitId":"kevin9foong"},"content":"        verifyEquals(accountRequest, actualAccReqEmalAndInstitute);"},{"lineNumber":32,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":33,"author":{"gitId":"kevin9foong"},"content":"        ______TS(\"Read account request using the given registration key\");"},{"lineNumber":34,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":35,"author":{"gitId":"kevin9foong"},"content":"        AccountRequest actualAccReqRegistrationKey \u003d"},{"lineNumber":36,"author":{"gitId":"kevin9foong"},"content":"                accountRequestDb.getAccountRequest(accountRequest.getRegistrationKey());"},{"lineNumber":37,"author":{"gitId":"kevin9foong"},"content":"        verifyEquals(accountRequest, actualAccReqRegistrationKey);"},{"lineNumber":38,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":39,"author":{"gitId":"kevin9foong"},"content":"        ______TS(\"Read account request using the given start and end timing\");"},{"lineNumber":40,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":41,"author":{"gitId":"kevin9foong"},"content":"        List\u003cAccountRequest\u003e actualAccReqCreatedAt \u003d"},{"lineNumber":42,"author":{"gitId":"kevin9foong"},"content":"                accountRequestDb.getAccountRequests(accountRequest.getCreatedAt(), accountRequest.getCreatedAt());"},{"lineNumber":43,"author":{"gitId":"kevin9foong"},"content":"        assertEquals(1, actualAccReqCreatedAt.size());"},{"lineNumber":44,"author":{"gitId":"kevin9foong"},"content":"        verifyEquals(accountRequest, actualAccReqCreatedAt.get(0));"},{"lineNumber":45,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":46,"author":{"gitId":"kevin9foong"},"content":"        ______TS(\"Read account request not found using the outside start and end timing\");"},{"lineNumber":47,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":48,"author":{"gitId":"kevin9foong"},"content":"        List\u003cAccountRequest\u003e actualAccReqCreatedAtOutside \u003d"},{"lineNumber":49,"author":{"gitId":"kevin9foong"},"content":"                accountRequestDb.getAccountRequests("},{"lineNumber":50,"author":{"gitId":"kevin9foong"},"content":"                        accountRequest.getCreatedAt().minusMillis(3000),"},{"lineNumber":51,"author":{"gitId":"kevin9foong"},"content":"                        accountRequest.getCreatedAt().minusMillis(2000));"},{"lineNumber":52,"author":{"gitId":"kevin9foong"},"content":"        assertEquals(0, actualAccReqCreatedAtOutside.size());"},{"lineNumber":53,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":54,"author":{"gitId":"kevin9foong"},"content":"        ______TS(\"Create acccount request, already exists, execption thrown\");"},{"lineNumber":55,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":56,"author":{"gitId":"kevin9foong"},"content":"        AccountRequest identicalAccountRequest \u003d"},{"lineNumber":57,"author":{"gitId":"kevin9foong"},"content":"                new AccountRequest(\"test@gmail.com\", \"name\", \"institute\");"},{"lineNumber":58,"author":{"gitId":"kevin9foong"},"content":"        assertNotSame(accountRequest, identicalAccountRequest);"},{"lineNumber":59,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":60,"author":{"gitId":"kevin9foong"},"content":"        assertThrows(EntityAlreadyExistsException.class,"},{"lineNumber":61,"author":{"gitId":"kevin9foong"},"content":"                () -\u003e accountRequestDb.createAccountRequest(identicalAccountRequest));"},{"lineNumber":62,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":63,"author":{"gitId":"kevin9foong"},"content":"        ______TS(\"Delete account request that was created\");"},{"lineNumber":64,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":65,"author":{"gitId":"-"},"content":"        accountRequestDb.deleteAccountRequest(accountRequest);"},{"lineNumber":66,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":67,"author":{"gitId":"kevin9foong"},"content":"        AccountRequest actualAccountRequest \u003d"},{"lineNumber":68,"author":{"gitId":"kevin9foong"},"content":"                accountRequestDb.getAccountRequest(accountRequest.getEmail(), accountRequest.getInstitute());"},{"lineNumber":69,"author":{"gitId":"-"},"content":"        assertNull(actualAccountRequest);"},{"lineNumber":70,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":71,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":72,"author":{"gitId":"kevin9foong"},"content":"    @Test"},{"lineNumber":73,"author":{"gitId":"kevin9foong"},"content":"    public void testUpdateAccountRequest() throws Exception {"},{"lineNumber":74,"author":{"gitId":"kevin9foong"},"content":"        ______TS(\"Update account request, does not exists, exception thrown\");"},{"lineNumber":75,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":76,"author":{"gitId":"kevin9foong"},"content":"        AccountRequest accountRequest \u003d new AccountRequest(\"test@gmail.com\", \"name\", \"institute\");"},{"lineNumber":77,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":78,"author":{"gitId":"kevin9foong"},"content":"        assertThrows(EntityDoesNotExistException.class,"},{"lineNumber":79,"author":{"gitId":"kevin9foong"},"content":"                () -\u003e accountRequestDb.updateAccountRequest(accountRequest));"},{"lineNumber":80,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":81,"author":{"gitId":"kevin9foong"},"content":"        ______TS(\"Update account request, already exists, update successful\");"},{"lineNumber":82,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":83,"author":{"gitId":"kevin9foong"},"content":"        accountRequestDb.createAccountRequest(accountRequest);"},{"lineNumber":84,"author":{"gitId":"kevin9foong"},"content":"        accountRequest.setName(\"new account request name\");"},{"lineNumber":85,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":86,"author":{"gitId":"kevin9foong"},"content":"        accountRequestDb.updateAccountRequest(accountRequest);"},{"lineNumber":87,"author":{"gitId":"kevin9foong"},"content":"        AccountRequest actual \u003d accountRequestDb.getAccountRequest("},{"lineNumber":88,"author":{"gitId":"kevin9foong"},"content":"                accountRequest.getEmail(), accountRequest.getInstitute());"},{"lineNumber":89,"author":{"gitId":"kevin9foong"},"content":"        verifyEquals(accountRequest, actual);"},{"lineNumber":90,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":91,"author":{"gitId":"kevin9foong"},"content":"}"}],"authorContributionMap":{"kevin9foong":89,"-":2}},{"path":"src/it/java/teammates/it/storage/sqlapi/AccountsDbIT.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.it.storage.sqlapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"domlimm"},"content":"import java.util.List;"},{"lineNumber":4,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":5,"author":{"gitId":"-"},"content":"import org.testng.annotations.Test;"},{"lineNumber":6,"author":{"gitId":"-"},"content":""},{"lineNumber":7,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.common.util.HibernateUtil;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import teammates.it.test.BaseTestCaseWithSqlDatabaseAccess;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import teammates.storage.sqlapi.AccountsDb;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Account;"},{"lineNumber":13,"author":{"gitId":"-"},"content":""},{"lineNumber":14,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":15,"author":{"gitId":"-"},"content":" * SUT: {@link AccountsDb}."},{"lineNumber":16,"author":{"gitId":"-"},"content":" */"},{"lineNumber":17,"author":{"gitId":"-"},"content":"public class AccountsDbIT extends BaseTestCaseWithSqlDatabaseAccess {"},{"lineNumber":18,"author":{"gitId":"-"},"content":""},{"lineNumber":19,"author":{"gitId":"-"},"content":"    private final AccountsDb accountsDb \u003d AccountsDb.inst();"},{"lineNumber":20,"author":{"gitId":"-"},"content":""},{"lineNumber":21,"author":{"gitId":"domlimm"},"content":"    @Test"},{"lineNumber":22,"author":{"gitId":"domlimm"},"content":"    public void testGetAccountsByEmail() throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":23,"author":{"gitId":"domlimm"},"content":"        ______TS(\"Get accounts by email, none exists, succeeds\");"},{"lineNumber":24,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":25,"author":{"gitId":"domlimm"},"content":"        List\u003cAccount\u003e accounts \u003d accountsDb.getAccountsByEmail(\"email@teammates.com\");"},{"lineNumber":26,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":27,"author":{"gitId":"domlimm"},"content":"        assertEquals(0, accounts.size());"},{"lineNumber":28,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":29,"author":{"gitId":"domlimm"},"content":"        ______TS(\"Get accounts by email, multiple exists, succeeds\");"},{"lineNumber":30,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":31,"author":{"gitId":"domlimm"},"content":"        Account firstAccount \u003d getTypicalAccount();"},{"lineNumber":32,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":33,"author":{"gitId":"domlimm"},"content":"        Account secondAccount \u003d getTypicalAccount();"},{"lineNumber":34,"author":{"gitId":"domlimm"},"content":"        secondAccount.setGoogleId(firstAccount.getGoogleId() + \"-2\");"},{"lineNumber":35,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":36,"author":{"gitId":"domlimm"},"content":"        Account thirdAccount \u003d getTypicalAccount();"},{"lineNumber":37,"author":{"gitId":"domlimm"},"content":"        thirdAccount.setGoogleId(firstAccount.getGoogleId() + \"-3\");"},{"lineNumber":38,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":39,"author":{"gitId":"domlimm"},"content":"        String email \u003d firstAccount.getEmail();"},{"lineNumber":40,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":41,"author":{"gitId":"domlimm"},"content":"        accountsDb.createAccount(firstAccount);"},{"lineNumber":42,"author":{"gitId":"domlimm"},"content":"        accountsDb.createAccount(secondAccount);"},{"lineNumber":43,"author":{"gitId":"domlimm"},"content":"        accountsDb.createAccount(thirdAccount);"},{"lineNumber":44,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":45,"author":{"gitId":"domlimm"},"content":"        accounts \u003d accountsDb.getAccountsByEmail(email);"},{"lineNumber":46,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":47,"author":{"gitId":"domlimm"},"content":"        assertEquals(3, accounts.size());"},{"lineNumber":48,"author":{"gitId":"domlimm"},"content":"        assertTrue(List.of(firstAccount, secondAccount, thirdAccount).containsAll(accounts));"},{"lineNumber":49,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":50,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":51,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":52,"author":{"gitId":"-"},"content":"    public void testCreateAccount() throws Exception {"},{"lineNumber":53,"author":{"gitId":"-"},"content":"        ______TS(\"Create account, does not exists, succeeds\");"},{"lineNumber":54,"author":{"gitId":"-"},"content":""},{"lineNumber":55,"author":{"gitId":"-"},"content":"        Account account \u003d new Account(\"google-id\", \"name\", \"email@teammates.com\");"},{"lineNumber":56,"author":{"gitId":"-"},"content":""},{"lineNumber":57,"author":{"gitId":"-"},"content":"        accountsDb.createAccount(account);"},{"lineNumber":58,"author":{"gitId":"-"},"content":"        HibernateUtil.flushSession();"},{"lineNumber":59,"author":{"gitId":"-"},"content":""},{"lineNumber":60,"author":{"gitId":"-"},"content":"        Account actualAccount \u003d accountsDb.getAccount(account.getId());"},{"lineNumber":61,"author":{"gitId":"-"},"content":"        verifyEquals(account, actualAccount);"},{"lineNumber":62,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":63,"author":{"gitId":"-"},"content":""},{"lineNumber":64,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":65,"author":{"gitId":"-"},"content":"    public void testUpdateAccount() throws Exception {"},{"lineNumber":66,"author":{"gitId":"-"},"content":"        Account account \u003d new Account(\"google-id\", \"name\", \"email@teammates.com\");"},{"lineNumber":67,"author":{"gitId":"-"},"content":"        accountsDb.createAccount(account);"},{"lineNumber":68,"author":{"gitId":"-"},"content":"        HibernateUtil.flushSession();"},{"lineNumber":69,"author":{"gitId":"-"},"content":""},{"lineNumber":70,"author":{"gitId":"-"},"content":"        ______TS(\"Update existing account, success\");"},{"lineNumber":71,"author":{"gitId":"-"},"content":""},{"lineNumber":72,"author":{"gitId":"-"},"content":"        account.setName(\"new account name\");"},{"lineNumber":73,"author":{"gitId":"-"},"content":"        accountsDb.updateAccount(account);"},{"lineNumber":74,"author":{"gitId":"-"},"content":""},{"lineNumber":75,"author":{"gitId":"-"},"content":"        Account actual \u003d accountsDb.getAccount(account.getId());"},{"lineNumber":76,"author":{"gitId":"-"},"content":"        verifyEquals(account, actual);"},{"lineNumber":77,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":78,"author":{"gitId":"-"},"content":""},{"lineNumber":79,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":80,"author":{"gitId":"-"},"content":"    public void testDeleteAccount() throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":81,"author":{"gitId":"-"},"content":"        Account account \u003d new Account(\"google-id\", \"name\", \"email@teammates.com\");"},{"lineNumber":82,"author":{"gitId":"-"},"content":"        accountsDb.createAccount(account);"},{"lineNumber":83,"author":{"gitId":"-"},"content":"        HibernateUtil.flushSession();"},{"lineNumber":84,"author":{"gitId":"-"},"content":""},{"lineNumber":85,"author":{"gitId":"-"},"content":"        ______TS(\"Delete existing account, success\");"},{"lineNumber":86,"author":{"gitId":"-"},"content":""},{"lineNumber":87,"author":{"gitId":"-"},"content":"        accountsDb.deleteAccount(account);"},{"lineNumber":88,"author":{"gitId":"-"},"content":""},{"lineNumber":89,"author":{"gitId":"-"},"content":"        Account actual \u003d accountsDb.getAccount(account.getId());"},{"lineNumber":90,"author":{"gitId":"-"},"content":"        assertNull(actual);"},{"lineNumber":91,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":92,"author":{"gitId":"-"},"content":""},{"lineNumber":93,"author":{"gitId":"domlimm"},"content":"    private Account getTypicalAccount() {"},{"lineNumber":94,"author":{"gitId":"domlimm"},"content":"        return new Account(\"google-id\", \"name\", \"email@teammates.com\");"},{"lineNumber":95,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":96,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"domlimm":35,"-":61}},{"path":"src/it/java/teammates/it/storage/sqlapi/CoursesDbIT.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.it.storage.sqlapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"cedricongjh"},"content":"import java.util.List;"},{"lineNumber":4,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":5,"author":{"gitId":"-"},"content":"import org.testng.annotations.Test;"},{"lineNumber":6,"author":{"gitId":"-"},"content":""},{"lineNumber":7,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import teammates.it.test.BaseTestCaseWithSqlDatabaseAccess;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import teammates.storage.sqlapi.CoursesDb;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Course;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Section;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Team;"},{"lineNumber":16,"author":{"gitId":"-"},"content":""},{"lineNumber":17,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":18,"author":{"gitId":"-"},"content":" * SUT: {@link CoursesDb}."},{"lineNumber":19,"author":{"gitId":"-"},"content":" */"},{"lineNumber":20,"author":{"gitId":"-"},"content":"public class CoursesDbIT extends BaseTestCaseWithSqlDatabaseAccess {"},{"lineNumber":21,"author":{"gitId":"-"},"content":""},{"lineNumber":22,"author":{"gitId":"-"},"content":"    private final CoursesDb coursesDb \u003d CoursesDb.inst();"},{"lineNumber":23,"author":{"gitId":"-"},"content":""},{"lineNumber":24,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":25,"author":{"gitId":"-"},"content":"    public void testCreateCourse() throws Exception {"},{"lineNumber":26,"author":{"gitId":"-"},"content":"        ______TS(\"success: create course that does not exist\");"},{"lineNumber":27,"author":{"gitId":"-"},"content":"        Course course \u003d getTypicalCourse();"},{"lineNumber":28,"author":{"gitId":"-"},"content":"        coursesDb.createCourse(course);"},{"lineNumber":29,"author":{"gitId":"-"},"content":""},{"lineNumber":30,"author":{"gitId":"-"},"content":"        Course actualCourse \u003d coursesDb.getCourse(\"course-id\");"},{"lineNumber":31,"author":{"gitId":"-"},"content":"        verifyEquals(course, actualCourse);"},{"lineNumber":32,"author":{"gitId":"-"},"content":""},{"lineNumber":33,"author":{"gitId":"-"},"content":"        ______TS(\"failure: create course that already exist, execption thrown\");"},{"lineNumber":34,"author":{"gitId":"-"},"content":"        Course identicalCourse \u003d getTypicalCourse();"},{"lineNumber":35,"author":{"gitId":"-"},"content":"        assertNotSame(course, identicalCourse);"},{"lineNumber":36,"author":{"gitId":"-"},"content":""},{"lineNumber":37,"author":{"gitId":"-"},"content":"        assertThrows(EntityAlreadyExistsException.class, () -\u003e coursesDb.createCourse(identicalCourse));"},{"lineNumber":38,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":39,"author":{"gitId":"-"},"content":""},{"lineNumber":40,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":41,"author":{"gitId":"-"},"content":"    public void testUpdateCourse() throws Exception {"},{"lineNumber":42,"author":{"gitId":"-"},"content":"        ______TS(\"failure: update course that does not exist, exception thrown\");"},{"lineNumber":43,"author":{"gitId":"-"},"content":"        Course course \u003d getTypicalCourse();"},{"lineNumber":44,"author":{"gitId":"-"},"content":""},{"lineNumber":45,"author":{"gitId":"-"},"content":"        assertThrows(EntityDoesNotExistException.class, () -\u003e coursesDb.updateCourse(course));"},{"lineNumber":46,"author":{"gitId":"-"},"content":""},{"lineNumber":47,"author":{"gitId":"-"},"content":"        ______TS(\"success: update course that already exists\");"},{"lineNumber":48,"author":{"gitId":"-"},"content":""},{"lineNumber":49,"author":{"gitId":"-"},"content":"        coursesDb.createCourse(course);"},{"lineNumber":50,"author":{"gitId":"-"},"content":"        course.setName(\"new course name\");"},{"lineNumber":51,"author":{"gitId":"-"},"content":""},{"lineNumber":52,"author":{"gitId":"-"},"content":"        coursesDb.updateCourse(course);"},{"lineNumber":53,"author":{"gitId":"-"},"content":"        Course actual \u003d coursesDb.getCourse(\"course-id\");"},{"lineNumber":54,"author":{"gitId":"-"},"content":"        verifyEquals(course, actual);"},{"lineNumber":55,"author":{"gitId":"-"},"content":""},{"lineNumber":56,"author":{"gitId":"-"},"content":"        ______TS(\"success: update detached course that already exists\");"},{"lineNumber":57,"author":{"gitId":"-"},"content":""},{"lineNumber":58,"author":{"gitId":"-"},"content":"        // same id, different name"},{"lineNumber":59,"author":{"gitId":"-"},"content":"        Course detachedCourse \u003d getTypicalCourse();"},{"lineNumber":60,"author":{"gitId":"-"},"content":"        detachedCourse.setName(\"different-name\");"},{"lineNumber":61,"author":{"gitId":"-"},"content":""},{"lineNumber":62,"author":{"gitId":"-"},"content":"        coursesDb.updateCourse(detachedCourse);"},{"lineNumber":63,"author":{"gitId":"-"},"content":"        verifyEquals(course, detachedCourse);"},{"lineNumber":64,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":65,"author":{"gitId":"-"},"content":""},{"lineNumber":66,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":67,"author":{"gitId":"-"},"content":"    public void testGetSectionByCourseIdAndTeam() throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":68,"author":{"gitId":"-"},"content":"        Course course \u003d getTypicalCourse();"},{"lineNumber":69,"author":{"gitId":"-"},"content":"        Section section \u003d new Section(course, \"section-name\");"},{"lineNumber":70,"author":{"gitId":"-"},"content":"        course.addSection(section);"},{"lineNumber":71,"author":{"gitId":"-"},"content":"        Team team \u003d new Team(section, \"team-name\");"},{"lineNumber":72,"author":{"gitId":"-"},"content":"        section.addTeam(team);"},{"lineNumber":73,"author":{"gitId":"-"},"content":""},{"lineNumber":74,"author":{"gitId":"-"},"content":"        coursesDb.createCourse(course);"},{"lineNumber":75,"author":{"gitId":"-"},"content":""},{"lineNumber":76,"author":{"gitId":"-"},"content":"        ______TS(\"success: typical case\");"},{"lineNumber":77,"author":{"gitId":"-"},"content":"        Section actualSection \u003d coursesDb.getSectionByCourseIdAndTeam(course.getId(), team.getName());"},{"lineNumber":78,"author":{"gitId":"-"},"content":"        verifyEquals(section, actualSection);"},{"lineNumber":79,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":80,"author":{"gitId":"-"},"content":""},{"lineNumber":81,"author":{"gitId":"cedricongjh"},"content":"    @Test"},{"lineNumber":82,"author":{"gitId":"cedricongjh"},"content":"    public void testGetTeamsForSection() throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":83,"author":{"gitId":"cedricongjh"},"content":"        Course course \u003d getTypicalCourse();"},{"lineNumber":84,"author":{"gitId":"cedricongjh"},"content":"        Section section \u003d new Section(course, \"section-name\");"},{"lineNumber":85,"author":{"gitId":"cedricongjh"},"content":"        course.addSection(section);"},{"lineNumber":86,"author":{"gitId":"cedricongjh"},"content":"        Team team1 \u003d new Team(section, \"team-name1\");"},{"lineNumber":87,"author":{"gitId":"cedricongjh"},"content":"        section.addTeam(team1);"},{"lineNumber":88,"author":{"gitId":"cedricongjh"},"content":"        Team team2 \u003d new Team(section, \"team-name2\");"},{"lineNumber":89,"author":{"gitId":"cedricongjh"},"content":"        section.addTeam(team2);"},{"lineNumber":90,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":91,"author":{"gitId":"cedricongjh"},"content":"        List\u003cTeam\u003e expectedTeams \u003d List.of(team1, team2);"},{"lineNumber":92,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":93,"author":{"gitId":"cedricongjh"},"content":"        coursesDb.createCourse(course);"},{"lineNumber":94,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":95,"author":{"gitId":"cedricongjh"},"content":"        ______TS(\"success: typical case\");"},{"lineNumber":96,"author":{"gitId":"cedricongjh"},"content":"        List\u003cTeam\u003e actualTeams \u003d coursesDb.getTeamsForSection(section);"},{"lineNumber":97,"author":{"gitId":"cedricongjh"},"content":"        assertEquals(expectedTeams.size(), actualTeams.size());"},{"lineNumber":98,"author":{"gitId":"cedricongjh"},"content":"        assertTrue(expectedTeams.containsAll(actualTeams));"},{"lineNumber":99,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":100,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":101,"author":{"gitId":"cedricongjh"},"content":"    @Test"},{"lineNumber":102,"author":{"gitId":"cedricongjh"},"content":"    public void testGetTeamsForCourse() throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":103,"author":{"gitId":"cedricongjh"},"content":"        Course course \u003d getTypicalCourse();"},{"lineNumber":104,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":105,"author":{"gitId":"cedricongjh"},"content":"        Section section1 \u003d new Section(course, \"section-name1\");"},{"lineNumber":106,"author":{"gitId":"cedricongjh"},"content":"        course.addSection(section1);"},{"lineNumber":107,"author":{"gitId":"cedricongjh"},"content":"        Team team1 \u003d new Team(section1, \"team-name1\");"},{"lineNumber":108,"author":{"gitId":"cedricongjh"},"content":"        section1.addTeam(team1);"},{"lineNumber":109,"author":{"gitId":"cedricongjh"},"content":"        Team team2 \u003d new Team(section1, \"team-name2\");"},{"lineNumber":110,"author":{"gitId":"cedricongjh"},"content":"        section1.addTeam(team2);"},{"lineNumber":111,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":112,"author":{"gitId":"cedricongjh"},"content":"        Section section2 \u003d new Section(course, \"section-name2\");"},{"lineNumber":113,"author":{"gitId":"cedricongjh"},"content":"        course.addSection(section2);"},{"lineNumber":114,"author":{"gitId":"cedricongjh"},"content":"        Team team3 \u003d new Team(section2, \"team-name3\");"},{"lineNumber":115,"author":{"gitId":"cedricongjh"},"content":"        section2.addTeam(team3);"},{"lineNumber":116,"author":{"gitId":"cedricongjh"},"content":"        Team team4 \u003d new Team(section2, \"team-name4\");"},{"lineNumber":117,"author":{"gitId":"cedricongjh"},"content":"        section2.addTeam(team4);"},{"lineNumber":118,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":119,"author":{"gitId":"cedricongjh"},"content":"        List\u003cTeam\u003e expectedTeams \u003d List.of(team1, team2, team3, team4);"},{"lineNumber":120,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":121,"author":{"gitId":"cedricongjh"},"content":"        coursesDb.createCourse(course);"},{"lineNumber":122,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":123,"author":{"gitId":"cedricongjh"},"content":"        ______TS(\"success: typical case\");"},{"lineNumber":124,"author":{"gitId":"cedricongjh"},"content":"        List\u003cTeam\u003e actualTeams \u003d coursesDb.getTeamsForCourse(course.getId());"},{"lineNumber":125,"author":{"gitId":"cedricongjh"},"content":"        assertEquals(expectedTeams.size(), actualTeams.size());"},{"lineNumber":126,"author":{"gitId":"cedricongjh"},"content":"        assertTrue(expectedTeams.containsAll(actualTeams));"},{"lineNumber":127,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":128,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":129,"author":{"gitId":"-"},"content":"    private Course getTypicalCourse() {"},{"lineNumber":130,"author":{"gitId":"-"},"content":"        return new Course(\"course-id\", \"course-name\", Const.DEFAULT_TIME_ZONE, \"teammates\");"},{"lineNumber":131,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":132,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"cedricongjh":50,"-":82}},{"path":"src/it/java/teammates/it/storage/sqlapi/FeedbackQuestionsDbIT.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"hhdqirui"},"content":"package teammates.it.storage.sqlapi;"},{"lineNumber":2,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":3,"author":{"gitId":"hhdqirui"},"content":"import java.util.List;"},{"lineNumber":4,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":5,"author":{"gitId":"hhdqirui"},"content":"import org.testng.annotations.BeforeClass;"},{"lineNumber":6,"author":{"gitId":"hhdqirui"},"content":"import org.testng.annotations.BeforeMethod;"},{"lineNumber":7,"author":{"gitId":"hhdqirui"},"content":"import org.testng.annotations.Test;"},{"lineNumber":8,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":9,"author":{"gitId":"cedricongjh"},"content":"import teammates.common.datatransfer.FeedbackParticipantType;"},{"lineNumber":10,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.SqlDataBundle;"},{"lineNumber":11,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.util.HibernateUtil;"},{"lineNumber":12,"author":{"gitId":"hhdqirui"},"content":"import teammates.it.test.BaseTestCaseWithSqlDatabaseAccess;"},{"lineNumber":13,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlapi.FeedbackQuestionsDb;"},{"lineNumber":14,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.FeedbackQuestion;"},{"lineNumber":15,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.FeedbackSession;"},{"lineNumber":16,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":17,"author":{"gitId":"hhdqirui"},"content":"/**"},{"lineNumber":18,"author":{"gitId":"hhdqirui"},"content":" * SUT: {@link FeedbackQuestionsDb}."},{"lineNumber":19,"author":{"gitId":"hhdqirui"},"content":" */"},{"lineNumber":20,"author":{"gitId":"hhdqirui"},"content":"public class FeedbackQuestionsDbIT extends BaseTestCaseWithSqlDatabaseAccess {"},{"lineNumber":21,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":22,"author":{"gitId":"hhdqirui"},"content":"    private final FeedbackQuestionsDb fqDb \u003d FeedbackQuestionsDb.inst();"},{"lineNumber":23,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":24,"author":{"gitId":"hhdqirui"},"content":"    private SqlDataBundle typicalDataBundle;"},{"lineNumber":25,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":26,"author":{"gitId":"hhdqirui"},"content":"    @Override"},{"lineNumber":27,"author":{"gitId":"hhdqirui"},"content":"    @BeforeClass"},{"lineNumber":28,"author":{"gitId":"hhdqirui"},"content":"    public void setupClass() {"},{"lineNumber":29,"author":{"gitId":"hhdqirui"},"content":"        super.setupClass();"},{"lineNumber":30,"author":{"gitId":"hhdqirui"},"content":"        typicalDataBundle \u003d getTypicalSqlDataBundle();"},{"lineNumber":31,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":32,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":33,"author":{"gitId":"hhdqirui"},"content":"    @Override"},{"lineNumber":34,"author":{"gitId":"hhdqirui"},"content":"    @BeforeMethod"},{"lineNumber":35,"author":{"gitId":"hhdqirui"},"content":"    protected void setUp() throws Exception {"},{"lineNumber":36,"author":{"gitId":"hhdqirui"},"content":"        super.setUp();"},{"lineNumber":37,"author":{"gitId":"hhdqirui"},"content":"        persistDataBundle(typicalDataBundle);"},{"lineNumber":38,"author":{"gitId":"hhdqirui"},"content":"        HibernateUtil.flushSession();"},{"lineNumber":39,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":40,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":41,"author":{"gitId":"hhdqirui"},"content":"    @Test"},{"lineNumber":42,"author":{"gitId":"hhdqirui"},"content":"    public void testGetFeedbackQuestionsForSession() {"},{"lineNumber":43,"author":{"gitId":"hhdqirui"},"content":"        ______TS(\"success: typical case\");"},{"lineNumber":44,"author":{"gitId":"hhdqirui"},"content":"        FeedbackSession fs \u003d typicalDataBundle.feedbackSessions.get(\"session1InCourse1\");"},{"lineNumber":45,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion fq1 \u003d typicalDataBundle.feedbackQuestions.get(\"qn1InSession1InCourse1\");"},{"lineNumber":46,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion fq2 \u003d typicalDataBundle.feedbackQuestions.get(\"qn2InSession1InCourse1\");"},{"lineNumber":47,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion fq3 \u003d typicalDataBundle.feedbackQuestions.get(\"qn3InSession1InCourse1\");"},{"lineNumber":48,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion fq4 \u003d typicalDataBundle.feedbackQuestions.get(\"qn4InSession1InCourse1\");"},{"lineNumber":49,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion fq5 \u003d typicalDataBundle.feedbackQuestions.get(\"qn5InSession1InCourse1\");"},{"lineNumber":50,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":51,"author":{"gitId":"hhdqirui"},"content":"        List\u003cFeedbackQuestion\u003e expectedQuestions \u003d List.of(fq1, fq2, fq3, fq4, fq5);"},{"lineNumber":52,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":53,"author":{"gitId":"hhdqirui"},"content":"        List\u003cFeedbackQuestion\u003e actualQuestions \u003d fqDb.getFeedbackQuestionsForSession(fs.getId());"},{"lineNumber":54,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":55,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(expectedQuestions.size(), actualQuestions.size());"},{"lineNumber":56,"author":{"gitId":"hhdqirui"},"content":"        assertTrue(expectedQuestions.containsAll(actualQuestions));"},{"lineNumber":57,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":58,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":59,"author":{"gitId":"cedricongjh"},"content":"    @Test"},{"lineNumber":60,"author":{"gitId":"cedricongjh"},"content":"    public void testGetFeedbackQuestionsForGiverType() {"},{"lineNumber":61,"author":{"gitId":"cedricongjh"},"content":"        ______TS(\"success: typical case\");"},{"lineNumber":62,"author":{"gitId":"cedricongjh"},"content":"        FeedbackSession fs \u003d typicalDataBundle.feedbackSessions.get(\"session1InCourse1\");"},{"lineNumber":63,"author":{"gitId":"cedricongjh"},"content":"        FeedbackQuestion fq1 \u003d typicalDataBundle.feedbackQuestions.get(\"qn1InSession1InCourse1\");"},{"lineNumber":64,"author":{"gitId":"cedricongjh"},"content":"        FeedbackQuestion fq2 \u003d typicalDataBundle.feedbackQuestions.get(\"qn2InSession1InCourse1\");"},{"lineNumber":65,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":66,"author":{"gitId":"cedricongjh"},"content":"        List\u003cFeedbackQuestion\u003e expectedQuestions \u003d List.of(fq1, fq2);"},{"lineNumber":67,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":68,"author":{"gitId":"cedricongjh"},"content":"        List\u003cFeedbackQuestion\u003e actualQuestions \u003d fqDb.getFeedbackQuestionsForGiverType(fs, FeedbackParticipantType.STUDENTS);"},{"lineNumber":69,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":70,"author":{"gitId":"cedricongjh"},"content":"        assertEquals(expectedQuestions.size(), actualQuestions.size());"},{"lineNumber":71,"author":{"gitId":"cedricongjh"},"content":"        assertTrue(expectedQuestions.containsAll(actualQuestions));"},{"lineNumber":72,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":73,"author":{"gitId":"hhdqirui"},"content":"}"}],"authorContributionMap":{"cedricongjh":15,"hhdqirui":58}},{"path":"src/it/java/teammates/it/storage/sqlapi/FeedbackSessionsDbIT.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"hhdqirui"},"content":"package teammates.it.storage.sqlapi;"},{"lineNumber":2,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":3,"author":{"gitId":"hhdqirui"},"content":"import java.time.Duration;"},{"lineNumber":4,"author":{"gitId":"hhdqirui"},"content":"import java.time.Instant;"},{"lineNumber":5,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":6,"author":{"gitId":"hhdqirui"},"content":"import org.testng.annotations.Test;"},{"lineNumber":7,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":8,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":9,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":10,"author":{"gitId":"hhdqirui"},"content":"import teammates.it.test.BaseTestCaseWithSqlDatabaseAccess;"},{"lineNumber":11,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlapi.CoursesDb;"},{"lineNumber":12,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlapi.FeedbackSessionsDb;"},{"lineNumber":13,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.Course;"},{"lineNumber":14,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.FeedbackSession;"},{"lineNumber":15,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":16,"author":{"gitId":"hhdqirui"},"content":"/**"},{"lineNumber":17,"author":{"gitId":"hhdqirui"},"content":" * SUT: {@link FeedbackSessionsDb}."},{"lineNumber":18,"author":{"gitId":"hhdqirui"},"content":" */"},{"lineNumber":19,"author":{"gitId":"hhdqirui"},"content":"public class FeedbackSessionsDbIT extends BaseTestCaseWithSqlDatabaseAccess {"},{"lineNumber":20,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":21,"author":{"gitId":"hhdqirui"},"content":"    private final CoursesDb coursesDb \u003d CoursesDb.inst();"},{"lineNumber":22,"author":{"gitId":"hhdqirui"},"content":"    private final FeedbackSessionsDb fsDb \u003d FeedbackSessionsDb.inst();"},{"lineNumber":23,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":24,"author":{"gitId":"hhdqirui"},"content":"    @Test"},{"lineNumber":25,"author":{"gitId":"hhdqirui"},"content":"    public void testGetFeedbackSessionByFeedbackSessionNameAndCourseId()"},{"lineNumber":26,"author":{"gitId":"hhdqirui"},"content":"            throws EntityAlreadyExistsException, InvalidParametersException {"},{"lineNumber":27,"author":{"gitId":"hhdqirui"},"content":"        ______TS(\"success: get feedback session that exists\");"},{"lineNumber":28,"author":{"gitId":"hhdqirui"},"content":"        Course course1 \u003d new Course(\"test-id1\", \"test-name1\", \"UTC\", \"NUS\");"},{"lineNumber":29,"author":{"gitId":"hhdqirui"},"content":"        coursesDb.createCourse(course1);"},{"lineNumber":30,"author":{"gitId":"hhdqirui"},"content":"        FeedbackSession fs1 \u003d new FeedbackSession(\"name1\", course1, \"test1@test.com\", \"test-instruction\","},{"lineNumber":31,"author":{"gitId":"hhdqirui"},"content":"                Instant.now().plus(Duration.ofDays(1)), Instant.now().plus(Duration.ofDays(7)), Instant.now(),"},{"lineNumber":32,"author":{"gitId":"hhdqirui"},"content":"                Instant.now().plus(Duration.ofDays(7)), Duration.ofMinutes(10), true, true, true);"},{"lineNumber":33,"author":{"gitId":"hhdqirui"},"content":"        FeedbackSession fs2 \u003d new FeedbackSession(\"name2\", course1, \"test1@test.com\", \"test-instruction\","},{"lineNumber":34,"author":{"gitId":"hhdqirui"},"content":"                Instant.now().plus(Duration.ofDays(1)), Instant.now().plus(Duration.ofDays(7)), Instant.now(),"},{"lineNumber":35,"author":{"gitId":"hhdqirui"},"content":"                Instant.now().plus(Duration.ofDays(7)), Duration.ofMinutes(10), true, true, true);"},{"lineNumber":36,"author":{"gitId":"hhdqirui"},"content":"        fsDb.createFeedbackSession(fs1);"},{"lineNumber":37,"author":{"gitId":"hhdqirui"},"content":"        fsDb.createFeedbackSession(fs2);"},{"lineNumber":38,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":39,"author":{"gitId":"hhdqirui"},"content":"        FeedbackSession actualFs \u003d fsDb.getFeedbackSession(fs2.getName(), fs2.getCourse().getId());"},{"lineNumber":40,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":41,"author":{"gitId":"hhdqirui"},"content":"        verifyEquals(fs2, actualFs);"},{"lineNumber":42,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":43,"author":{"gitId":"hhdqirui"},"content":"}"}],"authorContributionMap":{"hhdqirui":43}},{"path":"src/it/java/teammates/it/storage/sqlapi/NotificationDbIT.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"hhdqirui"},"content":"package teammates.it.storage.sqlapi;"},{"lineNumber":2,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":3,"author":{"gitId":"hhdqirui"},"content":"import java.time.Instant;"},{"lineNumber":4,"author":{"gitId":"hhdqirui"},"content":"import java.util.Iterator;"},{"lineNumber":5,"author":{"gitId":"hhdqirui"},"content":"import java.util.List;"},{"lineNumber":6,"author":{"gitId":"hhdqirui"},"content":"import java.util.UUID;"},{"lineNumber":7,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":8,"author":{"gitId":"hhdqirui"},"content":"import org.testng.annotations.Test;"},{"lineNumber":9,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":10,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.NotificationStyle;"},{"lineNumber":11,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.NotificationTargetUser;"},{"lineNumber":12,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":13,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":14,"author":{"gitId":"hhdqirui"},"content":"import teammates.it.test.BaseTestCaseWithSqlDatabaseAccess;"},{"lineNumber":15,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlapi.NotificationsDb;"},{"lineNumber":16,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.Notification;"},{"lineNumber":17,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":18,"author":{"gitId":"hhdqirui"},"content":"/**"},{"lineNumber":19,"author":{"gitId":"hhdqirui"},"content":" * SUT: {@link NotificationsDb}."},{"lineNumber":20,"author":{"gitId":"hhdqirui"},"content":" */"},{"lineNumber":21,"author":{"gitId":"hhdqirui"},"content":"public class NotificationDbIT extends BaseTestCaseWithSqlDatabaseAccess {"},{"lineNumber":22,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":23,"author":{"gitId":"hhdqirui"},"content":"    private final NotificationsDb notificationsDb \u003d NotificationsDb.inst();"},{"lineNumber":24,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":25,"author":{"gitId":"hhdqirui"},"content":"    @Test"},{"lineNumber":26,"author":{"gitId":"hhdqirui"},"content":"    public void testCreateNotification() throws EntityAlreadyExistsException, InvalidParametersException {"},{"lineNumber":27,"author":{"gitId":"hhdqirui"},"content":"        ______TS(\"success: create notification that does not exist\");"},{"lineNumber":28,"author":{"gitId":"hhdqirui"},"content":"        Notification newNotification \u003d generateTypicalNotification();"},{"lineNumber":29,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":30,"author":{"gitId":"hhdqirui"},"content":"        notificationsDb.createNotification(newNotification);"},{"lineNumber":31,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":32,"author":{"gitId":"-"},"content":"        UUID notificationId \u003d newNotification.getId();"},{"lineNumber":33,"author":{"gitId":"hhdqirui"},"content":"        Notification actualNotification \u003d notificationsDb.getNotification(notificationId);"},{"lineNumber":34,"author":{"gitId":"hhdqirui"},"content":"        verifyEquals(newNotification, actualNotification);"},{"lineNumber":35,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":36,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":37,"author":{"gitId":"hhdqirui"},"content":"    @Test"},{"lineNumber":38,"author":{"gitId":"hhdqirui"},"content":"    public void testGetNotification() throws EntityAlreadyExistsException, InvalidParametersException {"},{"lineNumber":39,"author":{"gitId":"hhdqirui"},"content":"        ______TS(\"success: get a notification that already exists\");"},{"lineNumber":40,"author":{"gitId":"hhdqirui"},"content":"        Notification newNotification \u003d generateTypicalNotification();"},{"lineNumber":41,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":42,"author":{"gitId":"hhdqirui"},"content":"        notificationsDb.createNotification(newNotification);"},{"lineNumber":43,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":44,"author":{"gitId":"-"},"content":"        UUID notificationId \u003d newNotification.getId();"},{"lineNumber":45,"author":{"gitId":"hhdqirui"},"content":"        Notification actualNotification \u003d notificationsDb.getNotification(notificationId);"},{"lineNumber":46,"author":{"gitId":"hhdqirui"},"content":"        verifyEquals(newNotification, actualNotification);"},{"lineNumber":47,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":48,"author":{"gitId":"hhdqirui"},"content":"        ______TS(\"success: get a notification that does not exist\");"},{"lineNumber":49,"author":{"gitId":"hhdqirui"},"content":"        UUID nonExistentId \u003d generateDifferentUuid(notificationId);"},{"lineNumber":50,"author":{"gitId":"hhdqirui"},"content":"        Notification nonExistentNotification \u003d notificationsDb.getNotification(nonExistentId);"},{"lineNumber":51,"author":{"gitId":"hhdqirui"},"content":"        assertNull(nonExistentNotification);"},{"lineNumber":52,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":53,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":54,"author":{"gitId":"hhdqirui"},"content":"    @Test"},{"lineNumber":55,"author":{"gitId":"hhdqirui"},"content":"    public void testDeleteNotification() throws EntityAlreadyExistsException, InvalidParametersException {"},{"lineNumber":56,"author":{"gitId":"hhdqirui"},"content":"        ______TS(\"success: delete a notification that already exists\");"},{"lineNumber":57,"author":{"gitId":"hhdqirui"},"content":"        Notification notification \u003d generateTypicalNotification();"},{"lineNumber":58,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":59,"author":{"gitId":"hhdqirui"},"content":"        notificationsDb.createNotification(notification);"},{"lineNumber":60,"author":{"gitId":"-"},"content":"        UUID notificationId \u003d notification.getId();"},{"lineNumber":61,"author":{"gitId":"hhdqirui"},"content":"        assertNotNull(notificationsDb.getNotification(notificationId));"},{"lineNumber":62,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":63,"author":{"gitId":"hhdqirui"},"content":"        notificationsDb.deleteNotification(notification);"},{"lineNumber":64,"author":{"gitId":"hhdqirui"},"content":"        assertNull(notificationsDb.getNotification(notificationId));"},{"lineNumber":65,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":66,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":67,"author":{"gitId":"hhdqirui"},"content":"    @Test"},{"lineNumber":68,"author":{"gitId":"hhdqirui"},"content":"    public void testGetAllNotifications() throws EntityAlreadyExistsException, InvalidParametersException {"},{"lineNumber":69,"author":{"gitId":"hhdqirui"},"content":"        ______TS(\"success: no notification present in the database\");"},{"lineNumber":70,"author":{"gitId":"hhdqirui"},"content":"        List\u003cNotification\u003e allNotifications \u003d notificationsDb.getAllNotifications();"},{"lineNumber":71,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(0, allNotifications.size());"},{"lineNumber":72,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":73,"author":{"gitId":"hhdqirui"},"content":"        ______TS(\"success: multiple notifications present in the database\");"},{"lineNumber":74,"author":{"gitId":"hhdqirui"},"content":"        Notification n1 \u003d generateTypicalNotification();"},{"lineNumber":75,"author":{"gitId":"hhdqirui"},"content":"        Notification n2 \u003d generateTypicalNotification();"},{"lineNumber":76,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":77,"author":{"gitId":"hhdqirui"},"content":"        notificationsDb.createNotification(n1);"},{"lineNumber":78,"author":{"gitId":"hhdqirui"},"content":"        notificationsDb.createNotification(n2);"},{"lineNumber":79,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":80,"author":{"gitId":"hhdqirui"},"content":"        allNotifications \u003d notificationsDb.getAllNotifications();"},{"lineNumber":81,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":82,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(2, allNotifications.size());"},{"lineNumber":83,"author":{"gitId":"hhdqirui"},"content":"        verifyEquals(n1, allNotifications.get(0));"},{"lineNumber":84,"author":{"gitId":"hhdqirui"},"content":"        verifyEquals(n2, allNotifications.get(1));"},{"lineNumber":85,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":86,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":87,"author":{"gitId":"hhdqirui"},"content":"    @Test"},{"lineNumber":88,"author":{"gitId":"hhdqirui"},"content":"    public void testGetActiveNotificationsByTargetUser() throws EntityAlreadyExistsException, InvalidParametersException {"},{"lineNumber":89,"author":{"gitId":"hhdqirui"},"content":"        Notification n1 \u003d new Notification("},{"lineNumber":90,"author":{"gitId":"hhdqirui"},"content":"                Instant.parse(\"2011-01-04T00:00:00Z\"),"},{"lineNumber":91,"author":{"gitId":"hhdqirui"},"content":"                Instant.parse(\"2099-01-01T00:00:00Z\"),"},{"lineNumber":92,"author":{"gitId":"hhdqirui"},"content":"                NotificationStyle.DANGER,"},{"lineNumber":93,"author":{"gitId":"hhdqirui"},"content":"                NotificationTargetUser.GENERAL,"},{"lineNumber":94,"author":{"gitId":"hhdqirui"},"content":"                \"notification 1\","},{"lineNumber":95,"author":{"gitId":"hhdqirui"},"content":"                \"\u003cp\u003emessage 1\u003c/p\u003e\");"},{"lineNumber":96,"author":{"gitId":"hhdqirui"},"content":"        Notification n2 \u003d new Notification("},{"lineNumber":97,"author":{"gitId":"hhdqirui"},"content":"                Instant.parse(\"2011-01-02T00:00:00Z\"),"},{"lineNumber":98,"author":{"gitId":"hhdqirui"},"content":"                Instant.parse(\"2099-01-01T00:00:00Z\"),"},{"lineNumber":99,"author":{"gitId":"hhdqirui"},"content":"                NotificationStyle.DANGER,"},{"lineNumber":100,"author":{"gitId":"hhdqirui"},"content":"                NotificationTargetUser.INSTRUCTOR,"},{"lineNumber":101,"author":{"gitId":"hhdqirui"},"content":"                \"notification 2\","},{"lineNumber":102,"author":{"gitId":"hhdqirui"},"content":"                \"\u003cp\u003emessage 2\u003c/p\u003e\");"},{"lineNumber":103,"author":{"gitId":"hhdqirui"},"content":"        Notification n3 \u003d new Notification("},{"lineNumber":104,"author":{"gitId":"hhdqirui"},"content":"                Instant.parse(\"2011-01-03T00:00:00Z\"),"},{"lineNumber":105,"author":{"gitId":"hhdqirui"},"content":"                Instant.parse(\"2099-01-01T00:00:00Z\"),"},{"lineNumber":106,"author":{"gitId":"hhdqirui"},"content":"                NotificationStyle.DANGER,"},{"lineNumber":107,"author":{"gitId":"hhdqirui"},"content":"                NotificationTargetUser.STUDENT,"},{"lineNumber":108,"author":{"gitId":"hhdqirui"},"content":"                \"notification 3\","},{"lineNumber":109,"author":{"gitId":"hhdqirui"},"content":"                \"\u003cp\u003emessage 3\u003c/p\u003e\");"},{"lineNumber":110,"author":{"gitId":"hhdqirui"},"content":"        Notification n4 \u003d new Notification("},{"lineNumber":111,"author":{"gitId":"hhdqirui"},"content":"                Instant.parse(\"2011-01-01T00:00:00Z\"),"},{"lineNumber":112,"author":{"gitId":"hhdqirui"},"content":"                Instant.parse(\"2099-01-01T00:00:00Z\"),"},{"lineNumber":113,"author":{"gitId":"hhdqirui"},"content":"                NotificationStyle.DANGER,"},{"lineNumber":114,"author":{"gitId":"hhdqirui"},"content":"                NotificationTargetUser.GENERAL,"},{"lineNumber":115,"author":{"gitId":"hhdqirui"},"content":"                \"notification 4\","},{"lineNumber":116,"author":{"gitId":"hhdqirui"},"content":"                \"\u003cp\u003emessage 4\u003c/p\u003e\");"},{"lineNumber":117,"author":{"gitId":"hhdqirui"},"content":"        Notification n5 \u003d new Notification("},{"lineNumber":118,"author":{"gitId":"hhdqirui"},"content":"                Instant.parse(\"2011-01-05T00:00:00Z\"),"},{"lineNumber":119,"author":{"gitId":"hhdqirui"},"content":"                Instant.parse(\"2012-01-01T00:00:00Z\"),"},{"lineNumber":120,"author":{"gitId":"hhdqirui"},"content":"                NotificationStyle.DANGER,"},{"lineNumber":121,"author":{"gitId":"hhdqirui"},"content":"                NotificationTargetUser.GENERAL,"},{"lineNumber":122,"author":{"gitId":"hhdqirui"},"content":"                \"notification 5\","},{"lineNumber":123,"author":{"gitId":"hhdqirui"},"content":"                \"\u003cp\u003emessage 5\u003c/p\u003e\");"},{"lineNumber":124,"author":{"gitId":"hhdqirui"},"content":"        Notification n6 \u003d new Notification("},{"lineNumber":125,"author":{"gitId":"hhdqirui"},"content":"                Instant.parse(\"2011-01-05T00:00:00Z\"),"},{"lineNumber":126,"author":{"gitId":"hhdqirui"},"content":"                Instant.parse(\"2013-01-01T00:00:00Z\"),"},{"lineNumber":127,"author":{"gitId":"hhdqirui"},"content":"                NotificationStyle.DANGER,"},{"lineNumber":128,"author":{"gitId":"hhdqirui"},"content":"                NotificationTargetUser.INSTRUCTOR,"},{"lineNumber":129,"author":{"gitId":"hhdqirui"},"content":"                \"notification 6\","},{"lineNumber":130,"author":{"gitId":"hhdqirui"},"content":"                \"\u003cp\u003emessage 6\u003c/p\u003e\");"},{"lineNumber":131,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":132,"author":{"gitId":"hhdqirui"},"content":"        List\u003cNotification\u003e allNotifications \u003d List.of(n1, n2, n3, n4, n5, n6);"},{"lineNumber":133,"author":{"gitId":"hhdqirui"},"content":"        for (Notification n : allNotifications) {"},{"lineNumber":134,"author":{"gitId":"hhdqirui"},"content":"            notificationsDb.createNotification(n);"},{"lineNumber":135,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":136,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":137,"author":{"gitId":"hhdqirui"},"content":"        ______TS(\"success: get active notification with target user GENERAL\");"},{"lineNumber":138,"author":{"gitId":"hhdqirui"},"content":"        List\u003cNotification\u003e actualNotifications \u003d"},{"lineNumber":139,"author":{"gitId":"hhdqirui"},"content":"                notificationsDb.getActiveNotificationsByTargetUser(NotificationTargetUser.GENERAL);"},{"lineNumber":140,"author":{"gitId":"hhdqirui"},"content":"        List\u003cNotification\u003e expectedNotifications \u003d List.of(n4, n1);"},{"lineNumber":141,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(expectedNotifications.size(), actualNotifications.size());"},{"lineNumber":142,"author":{"gitId":"hhdqirui"},"content":"        Iterator\u003cNotification\u003e it1 \u003d expectedNotifications.iterator();"},{"lineNumber":143,"author":{"gitId":"hhdqirui"},"content":"        actualNotifications.forEach(actual -\u003e {"},{"lineNumber":144,"author":{"gitId":"hhdqirui"},"content":"            verifyEquals(it1.next(), actual);"},{"lineNumber":145,"author":{"gitId":"hhdqirui"},"content":"        });"},{"lineNumber":146,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":147,"author":{"gitId":"hhdqirui"},"content":"        ______TS(\"success: get active notification with target user INSTRUCTOR\");"},{"lineNumber":148,"author":{"gitId":"hhdqirui"},"content":"        actualNotifications \u003d notificationsDb.getActiveNotificationsByTargetUser(NotificationTargetUser.INSTRUCTOR);"},{"lineNumber":149,"author":{"gitId":"hhdqirui"},"content":"        expectedNotifications \u003d List.of(n4, n2, n1);"},{"lineNumber":150,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(expectedNotifications.size(), actualNotifications.size());"},{"lineNumber":151,"author":{"gitId":"hhdqirui"},"content":"        Iterator\u003cNotification\u003e it2 \u003d expectedNotifications.iterator();"},{"lineNumber":152,"author":{"gitId":"hhdqirui"},"content":"        actualNotifications.forEach(actual -\u003e {"},{"lineNumber":153,"author":{"gitId":"hhdqirui"},"content":"            verifyEquals(it2.next(), actual);"},{"lineNumber":154,"author":{"gitId":"hhdqirui"},"content":"        });"},{"lineNumber":155,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":156,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":157,"author":{"gitId":"hhdqirui"},"content":"    private Notification generateTypicalNotification() {"},{"lineNumber":158,"author":{"gitId":"hhdqirui"},"content":"        return new Notification("},{"lineNumber":159,"author":{"gitId":"hhdqirui"},"content":"                Instant.parse(\"2011-01-01T00:00:00Z\"),"},{"lineNumber":160,"author":{"gitId":"hhdqirui"},"content":"                Instant.parse(\"2099-01-01T00:00:00Z\"),"},{"lineNumber":161,"author":{"gitId":"hhdqirui"},"content":"                NotificationStyle.DANGER,"},{"lineNumber":162,"author":{"gitId":"hhdqirui"},"content":"                NotificationTargetUser.GENERAL,"},{"lineNumber":163,"author":{"gitId":"hhdqirui"},"content":"                \"A deprecation note\","},{"lineNumber":164,"author":{"gitId":"hhdqirui"},"content":"                \"\u003cp\u003eDeprecation happens in three minutes\u003c/p\u003e\");"},{"lineNumber":165,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":166,"author":{"gitId":"hhdqirui"},"content":"}"}],"authorContributionMap":{"hhdqirui":163,"-":3}},{"path":"src/it/java/teammates/it/storage/sqlapi/UsersDbIT.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"domlimm"},"content":"package teammates.it.storage.sqlapi;"},{"lineNumber":2,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":3,"author":{"gitId":"domlimm"},"content":"import java.util.List;"},{"lineNumber":4,"author":{"gitId":"domlimm"},"content":"import java.util.UUID;"},{"lineNumber":5,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":6,"author":{"gitId":"domlimm"},"content":"import org.testng.annotations.BeforeMethod;"},{"lineNumber":7,"author":{"gitId":"domlimm"},"content":"import org.testng.annotations.Test;"},{"lineNumber":8,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":9,"author":{"gitId":"domlimm"},"content":"import teammates.common.datatransfer.InstructorPermissionRole;"},{"lineNumber":10,"author":{"gitId":"domlimm"},"content":"import teammates.common.datatransfer.InstructorPrivileges;"},{"lineNumber":11,"author":{"gitId":"domlimm"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":12,"author":{"gitId":"cedricongjh"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":13,"author":{"gitId":"domlimm"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":14,"author":{"gitId":"domlimm"},"content":"import teammates.common.util.Const;"},{"lineNumber":15,"author":{"gitId":"domlimm"},"content":"import teammates.common.util.HibernateUtil;"},{"lineNumber":16,"author":{"gitId":"domlimm"},"content":"import teammates.it.test.BaseTestCaseWithSqlDatabaseAccess;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"import teammates.storage.sqlapi.AccountsDb;"},{"lineNumber":18,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlapi.CoursesDb;"},{"lineNumber":19,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlapi.UsersDb;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Account;"},{"lineNumber":21,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Course;"},{"lineNumber":22,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":23,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.Section;"},{"lineNumber":24,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Student;"},{"lineNumber":25,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.Team;"},{"lineNumber":26,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.User;"},{"lineNumber":27,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":28,"author":{"gitId":"domlimm"},"content":"/**"},{"lineNumber":29,"author":{"gitId":"domlimm"},"content":" * SUT: {@link UsersDb}."},{"lineNumber":30,"author":{"gitId":"domlimm"},"content":" */"},{"lineNumber":31,"author":{"gitId":"domlimm"},"content":"public class UsersDbIT extends BaseTestCaseWithSqlDatabaseAccess {"},{"lineNumber":32,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":33,"author":{"gitId":"domlimm"},"content":"    private final UsersDb usersDb \u003d UsersDb.inst();"},{"lineNumber":34,"author":{"gitId":"domlimm"},"content":"    private final CoursesDb coursesDb \u003d CoursesDb.inst();"},{"lineNumber":35,"author":{"gitId":"-"},"content":"    private final AccountsDb accountsDb \u003d AccountsDb.inst();"},{"lineNumber":36,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":37,"author":{"gitId":"domlimm"},"content":"    private Course course;"},{"lineNumber":38,"author":{"gitId":"domlimm"},"content":"    private Instructor instructor;"},{"lineNumber":39,"author":{"gitId":"domlimm"},"content":"    private Student student;"},{"lineNumber":40,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":41,"author":{"gitId":"domlimm"},"content":"    @BeforeMethod"},{"lineNumber":42,"author":{"gitId":"domlimm"},"content":"    @Override"},{"lineNumber":43,"author":{"gitId":"domlimm"},"content":"    public void setUp() throws Exception {"},{"lineNumber":44,"author":{"gitId":"domlimm"},"content":"        super.setUp();"},{"lineNumber":45,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":46,"author":{"gitId":"domlimm"},"content":"        course \u003d new Course(\"course-id\", \"course-name\", Const.DEFAULT_TIME_ZONE, \"institute\");"},{"lineNumber":47,"author":{"gitId":"domlimm"},"content":"        coursesDb.createCourse(course);"},{"lineNumber":48,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":49,"author":{"gitId":"-"},"content":"        Account instructorAccount \u003d new Account(\"instructor-account\", \"instructor-name\", \"valid-instructor@email.tmt\");"},{"lineNumber":50,"author":{"gitId":"-"},"content":"        accountsDb.createAccount(instructorAccount);"},{"lineNumber":51,"author":{"gitId":"domlimm"},"content":"        instructor \u003d getTypicalInstructor();"},{"lineNumber":52,"author":{"gitId":"domlimm"},"content":"        usersDb.createInstructor(instructor);"},{"lineNumber":53,"author":{"gitId":"-"},"content":"        instructor.setAccount(instructorAccount);"},{"lineNumber":54,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":55,"author":{"gitId":"-"},"content":"        Account studentAccount \u003d new Account(\"student-account\", \"student-name\", \"valid-student@email.tmt\");"},{"lineNumber":56,"author":{"gitId":"-"},"content":"        accountsDb.createAccount(studentAccount);"},{"lineNumber":57,"author":{"gitId":"domlimm"},"content":"        student \u003d getTypicalStudent();"},{"lineNumber":58,"author":{"gitId":"domlimm"},"content":"        usersDb.createStudent(student);"},{"lineNumber":59,"author":{"gitId":"-"},"content":"        student.setAccount(studentAccount);"},{"lineNumber":60,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":61,"author":{"gitId":"domlimm"},"content":"        HibernateUtil.flushSession();"},{"lineNumber":62,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":63,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":64,"author":{"gitId":"domlimm"},"content":"    @Test"},{"lineNumber":65,"author":{"gitId":"domlimm"},"content":"    public void testGetInstructor() {"},{"lineNumber":66,"author":{"gitId":"domlimm"},"content":"        ______TS(\"success: gets an instructor that already exists\");"},{"lineNumber":67,"author":{"gitId":"domlimm"},"content":"        Instructor actualInstructor \u003d usersDb.getInstructor(instructor.getId());"},{"lineNumber":68,"author":{"gitId":"domlimm"},"content":"        verifyEquals(instructor, actualInstructor);"},{"lineNumber":69,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":70,"author":{"gitId":"domlimm"},"content":"        ______TS(\"success: gets an instructor that does not exist\");"},{"lineNumber":71,"author":{"gitId":"domlimm"},"content":"        UUID nonExistentId \u003d generateDifferentUuid(actualInstructor.getId());"},{"lineNumber":72,"author":{"gitId":"-"},"content":"        actualInstructor \u003d usersDb.getInstructor(nonExistentId);"},{"lineNumber":73,"author":{"gitId":"-"},"content":"        assertNull(actualInstructor);"},{"lineNumber":74,"author":{"gitId":"-"},"content":""},{"lineNumber":75,"author":{"gitId":"-"},"content":"        ______TS(\"success: gets an instructor by courseId and email\");"},{"lineNumber":76,"author":{"gitId":"EuniceSim142"},"content":"        actualInstructor \u003d usersDb.getInstructorForEmail(instructor.getCourseId(), instructor.getEmail());"},{"lineNumber":77,"author":{"gitId":"-"},"content":"        verifyEquals(instructor, actualInstructor);"},{"lineNumber":78,"author":{"gitId":"-"},"content":""},{"lineNumber":79,"author":{"gitId":"-"},"content":"        ______TS(\"success: gets an instructor by courseId and email that does not exist\");"},{"lineNumber":80,"author":{"gitId":"EuniceSim142"},"content":"        actualInstructor \u003d usersDb.getInstructorForEmail(instructor.getCourseId(), \"does-not-exist@teammates.tmt\");"},{"lineNumber":81,"author":{"gitId":"-"},"content":"        assertNull(actualInstructor);"},{"lineNumber":82,"author":{"gitId":"-"},"content":""},{"lineNumber":83,"author":{"gitId":"-"},"content":"        ______TS(\"success: gets an instructor by regKey\");"},{"lineNumber":84,"author":{"gitId":"-"},"content":"        actualInstructor \u003d usersDb.getInstructorByRegKey(instructor.getRegKey());"},{"lineNumber":85,"author":{"gitId":"-"},"content":"        verifyEquals(instructor, actualInstructor);"},{"lineNumber":86,"author":{"gitId":"-"},"content":""},{"lineNumber":87,"author":{"gitId":"-"},"content":"        ______TS(\"success: gets an instructor by regKey that does not exist\");"},{"lineNumber":88,"author":{"gitId":"-"},"content":"        actualInstructor \u003d usersDb.getInstructorByRegKey(\"invalid-reg-key\");"},{"lineNumber":89,"author":{"gitId":"-"},"content":"        assertNull(actualInstructor);"},{"lineNumber":90,"author":{"gitId":"-"},"content":""},{"lineNumber":91,"author":{"gitId":"-"},"content":"        ______TS(\"success: gets an instructor by googleId\");"},{"lineNumber":92,"author":{"gitId":"-"},"content":"        actualInstructor \u003d usersDb.getInstructorByGoogleId(instructor.getCourseId(), instructor.getAccount().getGoogleId());"},{"lineNumber":93,"author":{"gitId":"-"},"content":"        verifyEquals(instructor, actualInstructor);"},{"lineNumber":94,"author":{"gitId":"-"},"content":""},{"lineNumber":95,"author":{"gitId":"-"},"content":"        ______TS(\"success: gets an instructor by googleId that does not exist\");"},{"lineNumber":96,"author":{"gitId":"-"},"content":"        actualInstructor \u003d usersDb.getInstructorByGoogleId(instructor.getCourseId(), \"invalid-google id\");"},{"lineNumber":97,"author":{"gitId":"-"},"content":"        assertNull(actualInstructor);"},{"lineNumber":98,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":99,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":100,"author":{"gitId":"domlimm"},"content":"    @Test"},{"lineNumber":101,"author":{"gitId":"domlimm"},"content":"    public void testGetStudent() {"},{"lineNumber":102,"author":{"gitId":"domlimm"},"content":"        ______TS(\"success: gets a student that already exists\");"},{"lineNumber":103,"author":{"gitId":"-"},"content":"        Student actualStudent \u003d usersDb.getStudent(student.getId());"},{"lineNumber":104,"author":{"gitId":"-"},"content":"        verifyEquals(student, actualStudent);"},{"lineNumber":105,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":106,"author":{"gitId":"domlimm"},"content":"        ______TS(\"success: gets a student that does not exist\");"},{"lineNumber":107,"author":{"gitId":"-"},"content":"        UUID nonExistentId \u003d generateDifferentUuid(actualStudent.getId());"},{"lineNumber":108,"author":{"gitId":"-"},"content":"        actualStudent \u003d usersDb.getStudent(nonExistentId);"},{"lineNumber":109,"author":{"gitId":"-"},"content":"        assertNull(actualStudent);"},{"lineNumber":110,"author":{"gitId":"-"},"content":""},{"lineNumber":111,"author":{"gitId":"-"},"content":"        ______TS(\"success: gets a student by courseId and email\");"},{"lineNumber":112,"author":{"gitId":"EuniceSim142"},"content":"        actualStudent \u003d usersDb.getStudentForEmail(student.getCourseId(), student.getEmail());"},{"lineNumber":113,"author":{"gitId":"-"},"content":"        verifyEquals(student, actualStudent);"},{"lineNumber":114,"author":{"gitId":"-"},"content":""},{"lineNumber":115,"author":{"gitId":"-"},"content":"        ______TS(\"success: gets a student by courseId and email that does not exist\");"},{"lineNumber":116,"author":{"gitId":"EuniceSim142"},"content":"        actualStudent \u003d usersDb.getStudentForEmail(student.getCourseId(), \"does-not-exist@teammates.tmt\");"},{"lineNumber":117,"author":{"gitId":"-"},"content":"        assertNull(actualStudent);"},{"lineNumber":118,"author":{"gitId":"-"},"content":""},{"lineNumber":119,"author":{"gitId":"-"},"content":"        ______TS(\"success: gets a student by regKey\");"},{"lineNumber":120,"author":{"gitId":"-"},"content":"        actualStudent \u003d usersDb.getStudentByRegKey(student.getRegKey());"},{"lineNumber":121,"author":{"gitId":"-"},"content":"        verifyEquals(student, actualStudent);"},{"lineNumber":122,"author":{"gitId":"-"},"content":""},{"lineNumber":123,"author":{"gitId":"-"},"content":"        ______TS(\"success: gets a student by regKey that does not exist\");"},{"lineNumber":124,"author":{"gitId":"-"},"content":"        actualStudent \u003d usersDb.getStudentByRegKey(\"invalid-reg-key\");"},{"lineNumber":125,"author":{"gitId":"-"},"content":"        assertNull(actualStudent);"},{"lineNumber":126,"author":{"gitId":"-"},"content":""},{"lineNumber":127,"author":{"gitId":"-"},"content":"        ______TS(\"success: gets a student by googleId\");"},{"lineNumber":128,"author":{"gitId":"-"},"content":"        actualStudent \u003d usersDb.getStudentByGoogleId(student.getCourseId(), student.getAccount().getGoogleId());"},{"lineNumber":129,"author":{"gitId":"-"},"content":"        verifyEquals(student, actualStudent);"},{"lineNumber":130,"author":{"gitId":"-"},"content":""},{"lineNumber":131,"author":{"gitId":"-"},"content":"        ______TS(\"success: gets a student by googleId that does not exist\");"},{"lineNumber":132,"author":{"gitId":"-"},"content":"        actualStudent \u003d usersDb.getStudentByGoogleId(student.getCourseId(), \"invalid-google id\");"},{"lineNumber":133,"author":{"gitId":"-"},"content":"        assertNull(actualStudent);"},{"lineNumber":134,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":135,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":136,"author":{"gitId":"domlimm"},"content":"    @Test"},{"lineNumber":137,"author":{"gitId":"domlimm"},"content":"    public void testGetAllUsersByGoogleId() throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":138,"author":{"gitId":"domlimm"},"content":"        ______TS(\"success: gets all instructors and students by googleId\");"},{"lineNumber":139,"author":{"gitId":"domlimm"},"content":"        Account userSharedAccount \u003d new Account(\"user-account\", \"user-name\", \"valid-user@email.tmt\");"},{"lineNumber":140,"author":{"gitId":"domlimm"},"content":"        accountsDb.createAccount(userSharedAccount);"},{"lineNumber":141,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":142,"author":{"gitId":"domlimm"},"content":"        Instructor firstInstructor \u003d getTypicalInstructor();"},{"lineNumber":143,"author":{"gitId":"domlimm"},"content":"        firstInstructor.setEmail(\"valid-instructor-1@email.tmt\");"},{"lineNumber":144,"author":{"gitId":"domlimm"},"content":"        usersDb.createInstructor(firstInstructor);"},{"lineNumber":145,"author":{"gitId":"domlimm"},"content":"        firstInstructor.setAccount(userSharedAccount);"},{"lineNumber":146,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":147,"author":{"gitId":"domlimm"},"content":"        Instructor secondInstructor \u003d getTypicalInstructor();"},{"lineNumber":148,"author":{"gitId":"domlimm"},"content":"        secondInstructor.setEmail(\"valid-instructor-2@email.tmt\");"},{"lineNumber":149,"author":{"gitId":"domlimm"},"content":"        usersDb.createInstructor(secondInstructor);"},{"lineNumber":150,"author":{"gitId":"domlimm"},"content":"        secondInstructor.setAccount(userSharedAccount);"},{"lineNumber":151,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":152,"author":{"gitId":"domlimm"},"content":"        Student firstStudent \u003d getTypicalStudent();"},{"lineNumber":153,"author":{"gitId":"domlimm"},"content":"        firstStudent.setEmail(\"valid-student-1@email.tmt\");"},{"lineNumber":154,"author":{"gitId":"domlimm"},"content":"        usersDb.createStudent(firstStudent);"},{"lineNumber":155,"author":{"gitId":"domlimm"},"content":"        firstStudent.setAccount(userSharedAccount);"},{"lineNumber":156,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":157,"author":{"gitId":"domlimm"},"content":"        Student secondStudent \u003d getTypicalStudent();"},{"lineNumber":158,"author":{"gitId":"domlimm"},"content":"        secondStudent.setEmail(\"valid-student-2@email.tmt\");"},{"lineNumber":159,"author":{"gitId":"domlimm"},"content":"        usersDb.createStudent(secondStudent);"},{"lineNumber":160,"author":{"gitId":"domlimm"},"content":"        secondStudent.setAccount(userSharedAccount);"},{"lineNumber":161,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":162,"author":{"gitId":"domlimm"},"content":"        List\u003cUser\u003e users \u003d usersDb.getAllUsersByGoogleId(userSharedAccount.getGoogleId());"},{"lineNumber":163,"author":{"gitId":"domlimm"},"content":"        assertEquals(4, users.size());"},{"lineNumber":164,"author":{"gitId":"-"},"content":"        assertTrue(List.of(firstInstructor, secondInstructor, firstStudent, secondStudent).containsAll(users));"},{"lineNumber":165,"author":{"gitId":"-"},"content":""},{"lineNumber":166,"author":{"gitId":"-"},"content":"        List\u003cInstructor\u003e instructors \u003d usersDb.getAllInstructorsByGoogleId(userSharedAccount.getGoogleId());"},{"lineNumber":167,"author":{"gitId":"-"},"content":"        assertEquals(2, instructors.size());"},{"lineNumber":168,"author":{"gitId":"-"},"content":"        assertTrue(List.of(firstInstructor, secondInstructor).containsAll(instructors));"},{"lineNumber":169,"author":{"gitId":"-"},"content":""},{"lineNumber":170,"author":{"gitId":"-"},"content":"        List\u003cStudent\u003e students \u003d usersDb.getAllStudentsByGoogleId(userSharedAccount.getGoogleId());"},{"lineNumber":171,"author":{"gitId":"-"},"content":"        assertEquals(2, students.size());"},{"lineNumber":172,"author":{"gitId":"-"},"content":"        assertTrue(List.of(firstStudent, secondStudent).containsAll(students));"},{"lineNumber":173,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":174,"author":{"gitId":"domlimm"},"content":"        ______TS(\"success: gets all instructors and students by googleId that does not exist\");"},{"lineNumber":175,"author":{"gitId":"domlimm"},"content":"        List\u003cUser\u003e emptyUsers \u003d usersDb.getAllUsersByGoogleId(\"non-exist-id\");"},{"lineNumber":176,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":177,"author":{"gitId":"domlimm"},"content":"        assertEquals(0, emptyUsers.size());"},{"lineNumber":178,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":179,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":180,"author":{"gitId":"cedricongjh"},"content":"    @Test"},{"lineNumber":181,"author":{"gitId":"cedricongjh"},"content":"    public void testGetStudentsForSection()"},{"lineNumber":182,"author":{"gitId":"cedricongjh"},"content":"            throws InvalidParametersException, EntityAlreadyExistsException, EntityDoesNotExistException {"},{"lineNumber":183,"author":{"gitId":"cedricongjh"},"content":"        ______TS(\"success: typical case\");"},{"lineNumber":184,"author":{"gitId":"cedricongjh"},"content":"        Section firstSection \u003d new Section(course, \"section-name1\");"},{"lineNumber":185,"author":{"gitId":"cedricongjh"},"content":"        course.addSection(firstSection);"},{"lineNumber":186,"author":{"gitId":"cedricongjh"},"content":"        Team firstTeam \u003d new Team(firstSection, \"team-name1\");"},{"lineNumber":187,"author":{"gitId":"cedricongjh"},"content":"        firstSection.addTeam(firstTeam);"},{"lineNumber":188,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":189,"author":{"gitId":"cedricongjh"},"content":"        Section secondSection \u003d new Section(course, \"section-name2\");"},{"lineNumber":190,"author":{"gitId":"cedricongjh"},"content":"        course.addSection(secondSection);"},{"lineNumber":191,"author":{"gitId":"cedricongjh"},"content":"        Team secondTeam \u003d new Team(secondSection, \"team-name2\");"},{"lineNumber":192,"author":{"gitId":"cedricongjh"},"content":"        secondSection.addTeam(secondTeam);"},{"lineNumber":193,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":194,"author":{"gitId":"cedricongjh"},"content":"        coursesDb.updateCourse(course);"},{"lineNumber":195,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":196,"author":{"gitId":"cedricongjh"},"content":"        Student firstStudent \u003d getTypicalStudent();"},{"lineNumber":197,"author":{"gitId":"cedricongjh"},"content":"        firstStudent.setEmail(\"valid-student-1@email.tmt\");"},{"lineNumber":198,"author":{"gitId":"cedricongjh"},"content":"        firstStudent.setTeam(firstTeam);"},{"lineNumber":199,"author":{"gitId":"cedricongjh"},"content":"        usersDb.createStudent(firstStudent);"},{"lineNumber":200,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":201,"author":{"gitId":"cedricongjh"},"content":"        Student secondStudent \u003d getTypicalStudent();"},{"lineNumber":202,"author":{"gitId":"cedricongjh"},"content":"        secondStudent.setEmail(\"valid-student-2@email.tmt\");"},{"lineNumber":203,"author":{"gitId":"cedricongjh"},"content":"        secondStudent.setTeam(firstTeam);"},{"lineNumber":204,"author":{"gitId":"cedricongjh"},"content":"        usersDb.createStudent(secondStudent);"},{"lineNumber":205,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":206,"author":{"gitId":"cedricongjh"},"content":"        Student thirdStudent \u003d getTypicalStudent();"},{"lineNumber":207,"author":{"gitId":"cedricongjh"},"content":"        thirdStudent.setEmail(\"valid-student-3@email.tmt\");"},{"lineNumber":208,"author":{"gitId":"cedricongjh"},"content":"        thirdStudent.setTeam(secondTeam);"},{"lineNumber":209,"author":{"gitId":"cedricongjh"},"content":"        usersDb.createStudent(thirdStudent);"},{"lineNumber":210,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":211,"author":{"gitId":"cedricongjh"},"content":"        List\u003cStudent\u003e expectedStudents \u003d List.of(firstStudent, secondStudent);"},{"lineNumber":212,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":213,"author":{"gitId":"cedricongjh"},"content":"        List\u003cStudent\u003e actualStudents \u003d usersDb.getStudentsForSection(firstSection, course.getId());"},{"lineNumber":214,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":215,"author":{"gitId":"cedricongjh"},"content":"        assertEquals(expectedStudents.size(), actualStudents.size());"},{"lineNumber":216,"author":{"gitId":"cedricongjh"},"content":"        assertTrue(expectedStudents.containsAll(actualStudents));"},{"lineNumber":217,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":218,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":219,"author":{"gitId":"cedricongjh"},"content":"    @Test"},{"lineNumber":220,"author":{"gitId":"cedricongjh"},"content":"    public void testGetStudentsForTeam()"},{"lineNumber":221,"author":{"gitId":"cedricongjh"},"content":"            throws InvalidParametersException, EntityAlreadyExistsException, EntityDoesNotExistException {"},{"lineNumber":222,"author":{"gitId":"cedricongjh"},"content":"        ______TS(\"success: typical case\");"},{"lineNumber":223,"author":{"gitId":"cedricongjh"},"content":"        Section firstSection \u003d new Section(course, \"section-name1\");"},{"lineNumber":224,"author":{"gitId":"cedricongjh"},"content":"        course.addSection(firstSection);"},{"lineNumber":225,"author":{"gitId":"cedricongjh"},"content":"        Team firstTeam \u003d new Team(firstSection, \"team-name1\");"},{"lineNumber":226,"author":{"gitId":"cedricongjh"},"content":"        firstSection.addTeam(firstTeam);"},{"lineNumber":227,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":228,"author":{"gitId":"cedricongjh"},"content":"        Section secondSection \u003d new Section(course, \"section-name2\");"},{"lineNumber":229,"author":{"gitId":"cedricongjh"},"content":"        course.addSection(secondSection);"},{"lineNumber":230,"author":{"gitId":"cedricongjh"},"content":"        Team secondTeam \u003d new Team(secondSection, \"team-name2\");"},{"lineNumber":231,"author":{"gitId":"cedricongjh"},"content":"        secondSection.addTeam(secondTeam);"},{"lineNumber":232,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":233,"author":{"gitId":"cedricongjh"},"content":"        coursesDb.updateCourse(course);"},{"lineNumber":234,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":235,"author":{"gitId":"cedricongjh"},"content":"        Student firstStudent \u003d getTypicalStudent();"},{"lineNumber":236,"author":{"gitId":"cedricongjh"},"content":"        firstStudent.setEmail(\"valid-student-1@email.tmt\");"},{"lineNumber":237,"author":{"gitId":"cedricongjh"},"content":"        firstStudent.setTeam(firstTeam);"},{"lineNumber":238,"author":{"gitId":"cedricongjh"},"content":"        usersDb.createStudent(firstStudent);"},{"lineNumber":239,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":240,"author":{"gitId":"cedricongjh"},"content":"        Student secondStudent \u003d getTypicalStudent();"},{"lineNumber":241,"author":{"gitId":"cedricongjh"},"content":"        secondStudent.setEmail(\"valid-student-2@email.tmt\");"},{"lineNumber":242,"author":{"gitId":"cedricongjh"},"content":"        secondStudent.setTeam(firstTeam);"},{"lineNumber":243,"author":{"gitId":"cedricongjh"},"content":"        usersDb.createStudent(secondStudent);"},{"lineNumber":244,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":245,"author":{"gitId":"cedricongjh"},"content":"        Student thirdStudent \u003d getTypicalStudent();"},{"lineNumber":246,"author":{"gitId":"cedricongjh"},"content":"        thirdStudent.setEmail(\"valid-student-3@email.tmt\");"},{"lineNumber":247,"author":{"gitId":"cedricongjh"},"content":"        thirdStudent.setTeam(secondTeam);"},{"lineNumber":248,"author":{"gitId":"cedricongjh"},"content":"        usersDb.createStudent(thirdStudent);"},{"lineNumber":249,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":250,"author":{"gitId":"cedricongjh"},"content":"        List\u003cStudent\u003e expectedStudents \u003d List.of(firstStudent, secondStudent);"},{"lineNumber":251,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":252,"author":{"gitId":"cedricongjh"},"content":"        List\u003cStudent\u003e actualStudents \u003d usersDb.getStudentsForTeam(firstTeam.getName(), course.getId());"},{"lineNumber":253,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":254,"author":{"gitId":"cedricongjh"},"content":"        assertEquals(expectedStudents.size(), actualStudents.size());"},{"lineNumber":255,"author":{"gitId":"cedricongjh"},"content":"        assertTrue(expectedStudents.containsAll(actualStudents));"},{"lineNumber":256,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":257,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":258,"author":{"gitId":"domlimm"},"content":"    private Student getTypicalStudent() {"},{"lineNumber":259,"author":{"gitId":"domlimm"},"content":"        return new Student(course, \"student-name\", \"valid-student@email.tmt\", \"comments\");"},{"lineNumber":260,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":261,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":262,"author":{"gitId":"domlimm"},"content":"    private Instructor getTypicalInstructor() {"},{"lineNumber":263,"author":{"gitId":"domlimm"},"content":"        InstructorPrivileges instructorPrivileges \u003d"},{"lineNumber":264,"author":{"gitId":"domlimm"},"content":"                new InstructorPrivileges(Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_COOWNER);"},{"lineNumber":265,"author":{"gitId":"domlimm"},"content":"        InstructorPermissionRole role \u003d InstructorPermissionRole"},{"lineNumber":266,"author":{"gitId":"domlimm"},"content":"                .getEnum(Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_COOWNER);"},{"lineNumber":267,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":268,"author":{"gitId":"domlimm"},"content":"        return new Instructor(course, \"instructor-name\", \"valid-instructor@email.tmt\","},{"lineNumber":269,"author":{"gitId":"domlimm"},"content":"                true, Const.DEFAULT_DISPLAY_NAME_FOR_INSTRUCTOR, role, instructorPrivileges);"},{"lineNumber":270,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":271,"author":{"gitId":"domlimm"},"content":"}"}],"authorContributionMap":{"domlimm":117,"cedricongjh":81,"EuniceSim142":4,"-":69}},{"path":"src/it/java/teammates/it/storage/sqlapi/package-info.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":2,"author":{"gitId":"hhdqirui"},"content":" * Contains test cases for {@link teammates.storage.sqlapi} package."},{"lineNumber":3,"author":{"gitId":"-"},"content":" */"},{"lineNumber":4,"author":{"gitId":"-"},"content":"package teammates.it.storage.sqlapi;"}],"authorContributionMap":{"hhdqirui":1,"-":3}},{"path":"src/it/java/teammates/it/test/BaseTestCaseWithSqlDatabaseAccess.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.it.test;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"hhdqirui"},"content":"import java.util.UUID;"},{"lineNumber":4,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":5,"author":{"gitId":"-"},"content":"import org.testcontainers.containers.PostgreSQLContainer;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import org.testng.annotations.AfterClass;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import org.testng.annotations.AfterMethod;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import org.testng.annotations.AfterSuite;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import org.testng.annotations.BeforeClass;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import org.testng.annotations.BeforeMethod;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import org.testng.annotations.BeforeSuite;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import org.testng.annotations.Test;"},{"lineNumber":13,"author":{"gitId":"-"},"content":""},{"lineNumber":14,"author":{"gitId":"-"},"content":"import com.google.cloud.datastore.DatastoreOptions;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import com.google.cloud.datastore.testing.LocalDatastoreHelper;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"import com.googlecode.objectify.ObjectifyFactory;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"import com.googlecode.objectify.ObjectifyService;"},{"lineNumber":18,"author":{"gitId":"-"},"content":"import com.googlecode.objectify.util.Closeable;"},{"lineNumber":19,"author":{"gitId":"-"},"content":""},{"lineNumber":20,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.SqlDataBundle;"},{"lineNumber":21,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":22,"author":{"gitId":"-"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"import teammates.common.util.HibernateUtil;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"import teammates.common.util.JsonUtils;"},{"lineNumber":25,"author":{"gitId":"-"},"content":"import teammates.sqllogic.api.Logic;"},{"lineNumber":26,"author":{"gitId":"-"},"content":"import teammates.sqllogic.core.LogicStarter;"},{"lineNumber":27,"author":{"gitId":"-"},"content":"import teammates.storage.api.OfyHelper;"},{"lineNumber":28,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Account;"},{"lineNumber":29,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.AccountRequest;"},{"lineNumber":30,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.BaseEntity;"},{"lineNumber":31,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Course;"},{"lineNumber":32,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.DeadlineExtension;"},{"lineNumber":33,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.FeedbackQuestion;"},{"lineNumber":34,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.FeedbackSession;"},{"lineNumber":35,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":36,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.Notification;"},{"lineNumber":37,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.ReadNotification;"},{"lineNumber":38,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Section;"},{"lineNumber":39,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Student;"},{"lineNumber":40,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Team;"},{"lineNumber":41,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.UsageStatistics;"},{"lineNumber":42,"author":{"gitId":"-"},"content":"import teammates.test.BaseTestCase;"},{"lineNumber":43,"author":{"gitId":"-"},"content":""},{"lineNumber":44,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":45,"author":{"gitId":"-"},"content":" * Base test case for tests that access the database."},{"lineNumber":46,"author":{"gitId":"-"},"content":" */"},{"lineNumber":47,"author":{"gitId":"-"},"content":"@Test(singleThreaded \u003d true)"},{"lineNumber":48,"author":{"gitId":"-"},"content":"public class BaseTestCaseWithSqlDatabaseAccess extends BaseTestCase {"},{"lineNumber":49,"author":{"gitId":"-"},"content":""},{"lineNumber":50,"author":{"gitId":"-"},"content":"    private static final PostgreSQLContainer\u003c?\u003e PGSQL \u003d new PostgreSQLContainer\u003c\u003e(\"postgres:15.1-alpine\");"},{"lineNumber":51,"author":{"gitId":"-"},"content":""},{"lineNumber":52,"author":{"gitId":"-"},"content":"    private static final LocalDatastoreHelper LOCAL_DATASTORE_HELPER \u003d LocalDatastoreHelper.newBuilder()"},{"lineNumber":53,"author":{"gitId":"-"},"content":"            .setConsistency(1.0)"},{"lineNumber":54,"author":{"gitId":"-"},"content":"            .setPort(TestProperties.TEST_LOCALDATASTORE_PORT)"},{"lineNumber":55,"author":{"gitId":"-"},"content":"            .setStoreOnDisk(false)"},{"lineNumber":56,"author":{"gitId":"-"},"content":"            .build();"},{"lineNumber":57,"author":{"gitId":"-"},"content":""},{"lineNumber":58,"author":{"gitId":"-"},"content":"    private final Logic logic \u003d Logic.inst();"},{"lineNumber":59,"author":{"gitId":"-"},"content":""},{"lineNumber":60,"author":{"gitId":"-"},"content":"    private Closeable closeable;"},{"lineNumber":61,"author":{"gitId":"-"},"content":""},{"lineNumber":62,"author":{"gitId":"-"},"content":"    @BeforeSuite"},{"lineNumber":63,"author":{"gitId":"-"},"content":"    protected static void setUpSuite() throws Exception {"},{"lineNumber":64,"author":{"gitId":"-"},"content":"        PGSQL.start();"},{"lineNumber":65,"author":{"gitId":"-"},"content":"        // Temporarily disable migration utility"},{"lineNumber":66,"author":{"gitId":"-"},"content":"        // DbMigrationUtil.resetDb(PGSQL.getJdbcUrl(), PGSQL.getUsername(),"},{"lineNumber":67,"author":{"gitId":"-"},"content":"        // PGSQL.getPassword());"},{"lineNumber":68,"author":{"gitId":"-"},"content":"        HibernateUtil.buildSessionFactory(PGSQL.getJdbcUrl(), PGSQL.getUsername(), PGSQL.getPassword());"},{"lineNumber":69,"author":{"gitId":"-"},"content":""},{"lineNumber":70,"author":{"gitId":"-"},"content":"        LogicStarter.initializeDependencies();"},{"lineNumber":71,"author":{"gitId":"-"},"content":""},{"lineNumber":72,"author":{"gitId":"-"},"content":"        // TODO: remove after migration, needed for dual db support"},{"lineNumber":73,"author":{"gitId":"-"},"content":"        teammates.logic.core.LogicStarter.initializeDependencies();"},{"lineNumber":74,"author":{"gitId":"-"},"content":"        LOCAL_DATASTORE_HELPER.start();"},{"lineNumber":75,"author":{"gitId":"-"},"content":"        DatastoreOptions options \u003d LOCAL_DATASTORE_HELPER.getOptions();"},{"lineNumber":76,"author":{"gitId":"-"},"content":"        ObjectifyService.init(new ObjectifyFactory("},{"lineNumber":77,"author":{"gitId":"-"},"content":"                options.getService()));"},{"lineNumber":78,"author":{"gitId":"-"},"content":"        OfyHelper.registerEntityClasses();"},{"lineNumber":79,"author":{"gitId":"-"},"content":""},{"lineNumber":80,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":81,"author":{"gitId":"-"},"content":""},{"lineNumber":82,"author":{"gitId":"-"},"content":"    @BeforeClass"},{"lineNumber":83,"author":{"gitId":"-"},"content":"    public void setupClass() {"},{"lineNumber":84,"author":{"gitId":"-"},"content":"        closeable \u003d ObjectifyService.begin();"},{"lineNumber":85,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":86,"author":{"gitId":"-"},"content":""},{"lineNumber":87,"author":{"gitId":"-"},"content":"    @AfterClass"},{"lineNumber":88,"author":{"gitId":"-"},"content":"    public void tearDownClass() {"},{"lineNumber":89,"author":{"gitId":"-"},"content":"        closeable.close();"},{"lineNumber":90,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":91,"author":{"gitId":"-"},"content":""},{"lineNumber":92,"author":{"gitId":"-"},"content":"    @AfterSuite"},{"lineNumber":93,"author":{"gitId":"-"},"content":"    protected static void tearDownSuite() throws Exception {"},{"lineNumber":94,"author":{"gitId":"-"},"content":"        PGSQL.close();"},{"lineNumber":95,"author":{"gitId":"-"},"content":"        LOCAL_DATASTORE_HELPER.stop();"},{"lineNumber":96,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":97,"author":{"gitId":"-"},"content":""},{"lineNumber":98,"author":{"gitId":"-"},"content":"    @BeforeMethod"},{"lineNumber":99,"author":{"gitId":"-"},"content":"    protected void setUp() throws Exception {"},{"lineNumber":100,"author":{"gitId":"-"},"content":"        HibernateUtil.beginTransaction();"},{"lineNumber":101,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":102,"author":{"gitId":"-"},"content":""},{"lineNumber":103,"author":{"gitId":"-"},"content":"    @AfterMethod"},{"lineNumber":104,"author":{"gitId":"-"},"content":"    protected void tearDown() {"},{"lineNumber":105,"author":{"gitId":"-"},"content":"        HibernateUtil.rollbackTransaction();"},{"lineNumber":106,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":107,"author":{"gitId":"-"},"content":""},{"lineNumber":108,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":109,"author":{"gitId":"-"},"content":"    protected String getTestDataFolder() {"},{"lineNumber":110,"author":{"gitId":"-"},"content":"        return TestProperties.TEST_DATA_FOLDER;"},{"lineNumber":111,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":112,"author":{"gitId":"-"},"content":""},{"lineNumber":113,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":114,"author":{"gitId":"-"},"content":"     * Persist data bundle into the db."},{"lineNumber":115,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":116,"author":{"gitId":"-"},"content":"    protected void persistDataBundle(SqlDataBundle dataBundle)"},{"lineNumber":117,"author":{"gitId":"-"},"content":"            throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":118,"author":{"gitId":"-"},"content":"        logic.persistDataBundle(dataBundle);"},{"lineNumber":119,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":120,"author":{"gitId":"-"},"content":""},{"lineNumber":121,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":122,"author":{"gitId":"-"},"content":"     * Verifies that two entities are equal."},{"lineNumber":123,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":124,"author":{"gitId":"-"},"content":"    protected void verifyEquals(BaseEntity expected, BaseEntity actual) {"},{"lineNumber":125,"author":{"gitId":"-"},"content":"        if (expected instanceof Course) {"},{"lineNumber":126,"author":{"gitId":"-"},"content":"            Course expectedCourse \u003d (Course) expected;"},{"lineNumber":127,"author":{"gitId":"-"},"content":"            Course actualCourse \u003d (Course) actual;"},{"lineNumber":128,"author":{"gitId":"-"},"content":"            equalizeIrrelevantData(expectedCourse, actualCourse);"},{"lineNumber":129,"author":{"gitId":"-"},"content":"            assertEquals(JsonUtils.toJson(expectedCourse), JsonUtils.toJson(actualCourse));"},{"lineNumber":130,"author":{"gitId":"-"},"content":"        } else if (expected instanceof DeadlineExtension) {"},{"lineNumber":131,"author":{"gitId":"-"},"content":"            DeadlineExtension expectedDeadlineExtension \u003d (DeadlineExtension) expected;"},{"lineNumber":132,"author":{"gitId":"-"},"content":"            DeadlineExtension actualDeadlineExtension \u003d (DeadlineExtension) actual;"},{"lineNumber":133,"author":{"gitId":"-"},"content":"            equalizeIrrelevantData(expectedDeadlineExtension, actualDeadlineExtension);"},{"lineNumber":134,"author":{"gitId":"-"},"content":"            assertEquals(JsonUtils.toJson(expectedDeadlineExtension), JsonUtils.toJson(actualDeadlineExtension));"},{"lineNumber":135,"author":{"gitId":"-"},"content":"        } else if (expected instanceof FeedbackSession) {"},{"lineNumber":136,"author":{"gitId":"-"},"content":"            FeedbackSession expectedSession \u003d (FeedbackSession) expected;"},{"lineNumber":137,"author":{"gitId":"-"},"content":"            FeedbackSession actualSession \u003d (FeedbackSession) actual;"},{"lineNumber":138,"author":{"gitId":"-"},"content":"            equalizeIrrelevantData(expectedSession, actualSession);"},{"lineNumber":139,"author":{"gitId":"-"},"content":"            assertEquals(JsonUtils.toJson(expectedSession), JsonUtils.toJson(actualSession));"},{"lineNumber":140,"author":{"gitId":"hhdqirui"},"content":"        } else if (expected instanceof FeedbackQuestion) {"},{"lineNumber":141,"author":{"gitId":"hhdqirui"},"content":"            FeedbackQuestion expectedQuestion \u003d (FeedbackQuestion) expected;"},{"lineNumber":142,"author":{"gitId":"hhdqirui"},"content":"            FeedbackQuestion actualQuestion \u003d (FeedbackQuestion) actual;"},{"lineNumber":143,"author":{"gitId":"hhdqirui"},"content":"            equalizeIrrelevantData(expectedQuestion, actualQuestion);"},{"lineNumber":144,"author":{"gitId":"hhdqirui"},"content":"            assertEquals(JsonUtils.toJson(expectedQuestion), JsonUtils.toJson(actualQuestion));"},{"lineNumber":145,"author":{"gitId":"hhdqirui"},"content":"        } else if (expected instanceof Notification) {"},{"lineNumber":146,"author":{"gitId":"hhdqirui"},"content":"            Notification expectedNotification \u003d (Notification) expected;"},{"lineNumber":147,"author":{"gitId":"hhdqirui"},"content":"            Notification actualNotification \u003d (Notification) actual;"},{"lineNumber":148,"author":{"gitId":"hhdqirui"},"content":"            equalizeIrrelevantData(expectedNotification, actualNotification);"},{"lineNumber":149,"author":{"gitId":"hhdqirui"},"content":"            assertEquals(JsonUtils.toJson(expectedNotification), JsonUtils.toJson(actualNotification));"},{"lineNumber":150,"author":{"gitId":"-"},"content":"        } else if (expected instanceof Account) {"},{"lineNumber":151,"author":{"gitId":"-"},"content":"            Account expectedAccount \u003d (Account) expected;"},{"lineNumber":152,"author":{"gitId":"-"},"content":"            Account actualAccount \u003d (Account) actual;"},{"lineNumber":153,"author":{"gitId":"-"},"content":"            equalizeIrrelevantData(expectedAccount, actualAccount);"},{"lineNumber":154,"author":{"gitId":"-"},"content":"            assertEquals(JsonUtils.toJson(expectedAccount), JsonUtils.toJson(actualAccount));"},{"lineNumber":155,"author":{"gitId":"-"},"content":"        } else if (expected instanceof AccountRequest) {"},{"lineNumber":156,"author":{"gitId":"-"},"content":"            AccountRequest expectedAccountRequest \u003d (AccountRequest) expected;"},{"lineNumber":157,"author":{"gitId":"-"},"content":"            AccountRequest actualAccountRequest \u003d (AccountRequest) actual;"},{"lineNumber":158,"author":{"gitId":"-"},"content":"            equalizeIrrelevantData(expectedAccountRequest, actualAccountRequest);"},{"lineNumber":159,"author":{"gitId":"-"},"content":"            assertEquals(JsonUtils.toJson(expectedAccountRequest), JsonUtils.toJson(actualAccountRequest));"},{"lineNumber":160,"author":{"gitId":"-"},"content":"        } else if (expected instanceof UsageStatistics) {"},{"lineNumber":161,"author":{"gitId":"-"},"content":"            UsageStatistics expectedUsageStatistics \u003d (UsageStatistics) expected;"},{"lineNumber":162,"author":{"gitId":"-"},"content":"            UsageStatistics actualUsageStatistics \u003d (UsageStatistics) actual;"},{"lineNumber":163,"author":{"gitId":"-"},"content":"            equalizeIrrelevantData(expectedUsageStatistics, actualUsageStatistics);"},{"lineNumber":164,"author":{"gitId":"-"},"content":"            assertEquals(JsonUtils.toJson(expectedUsageStatistics), JsonUtils.toJson(actualUsageStatistics));"},{"lineNumber":165,"author":{"gitId":"domlimm"},"content":"        } else if (expected instanceof Instructor) {"},{"lineNumber":166,"author":{"gitId":"domlimm"},"content":"            Instructor expectedInstructor \u003d (Instructor) expected;"},{"lineNumber":167,"author":{"gitId":"domlimm"},"content":"            Instructor actualInstructor \u003d (Instructor) actual;"},{"lineNumber":168,"author":{"gitId":"domlimm"},"content":"            equalizeIrrelevantData(expectedInstructor, actualInstructor);"},{"lineNumber":169,"author":{"gitId":"domlimm"},"content":"            assertEquals(JsonUtils.toJson(expectedInstructor), JsonUtils.toJson(actualInstructor));"},{"lineNumber":170,"author":{"gitId":"domlimm"},"content":"        } else if (expected instanceof Student) {"},{"lineNumber":171,"author":{"gitId":"domlimm"},"content":"            Student expectedStudent \u003d (Student) expected;"},{"lineNumber":172,"author":{"gitId":"domlimm"},"content":"            Student actualStudent \u003d (Student) actual;"},{"lineNumber":173,"author":{"gitId":"domlimm"},"content":"            equalizeIrrelevantData(expectedStudent, actualStudent);"},{"lineNumber":174,"author":{"gitId":"domlimm"},"content":"            assertEquals(JsonUtils.toJson(expectedStudent), JsonUtils.toJson(actualStudent));"},{"lineNumber":175,"author":{"gitId":"-"},"content":"        } else if (expected instanceof Section) {"},{"lineNumber":176,"author":{"gitId":"-"},"content":"            Section expectedSection \u003d (Section) expected;"},{"lineNumber":177,"author":{"gitId":"-"},"content":"            Section actualSection \u003d (Section) actual;"},{"lineNumber":178,"author":{"gitId":"-"},"content":"            equalizeIrrelevantData(expectedSection, actualSection);"},{"lineNumber":179,"author":{"gitId":"-"},"content":"            assertEquals(JsonUtils.toJson(expectedSection), JsonUtils.toJson(actualSection));"},{"lineNumber":180,"author":{"gitId":"-"},"content":"        } else if (expected instanceof Team) {"},{"lineNumber":181,"author":{"gitId":"-"},"content":"            Team expectedTeam \u003d (Team) expected;"},{"lineNumber":182,"author":{"gitId":"-"},"content":"            Team actualTeam \u003d (Team) actual;"},{"lineNumber":183,"author":{"gitId":"-"},"content":"            equalizeIrrelevantData(expectedTeam, actualTeam);"},{"lineNumber":184,"author":{"gitId":"-"},"content":"            assertEquals(JsonUtils.toJson(expectedTeam), JsonUtils.toJson(actualTeam));"},{"lineNumber":185,"author":{"gitId":"-"},"content":"        } else if (expected instanceof ReadNotification) {"},{"lineNumber":186,"author":{"gitId":"-"},"content":"            ReadNotification expectedReadNotification \u003d (ReadNotification) expected;"},{"lineNumber":187,"author":{"gitId":"-"},"content":"            ReadNotification actualReadNotification \u003d (ReadNotification) actual;"},{"lineNumber":188,"author":{"gitId":"-"},"content":"            equalizeIrrelevantData(expectedReadNotification, actualReadNotification);"},{"lineNumber":189,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":190,"author":{"gitId":"-"},"content":"            fail(\"Unknown entity\");"},{"lineNumber":191,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":192,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":193,"author":{"gitId":"-"},"content":""},{"lineNumber":194,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":195,"author":{"gitId":"-"},"content":"     * Verifies that the given entity is present in the database."},{"lineNumber":196,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":197,"author":{"gitId":"-"},"content":"    protected void verifyPresentInDatabase(BaseEntity expected) {"},{"lineNumber":198,"author":{"gitId":"-"},"content":"        assertNotNull(expected);"},{"lineNumber":199,"author":{"gitId":"-"},"content":"        BaseEntity actual \u003d getEntity(expected);"},{"lineNumber":200,"author":{"gitId":"-"},"content":"        verifyEquals(expected, actual);"},{"lineNumber":201,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":202,"author":{"gitId":"-"},"content":""},{"lineNumber":203,"author":{"gitId":"-"},"content":"    private BaseEntity getEntity(BaseEntity entity) {"},{"lineNumber":204,"author":{"gitId":"-"},"content":"        if (entity instanceof Course) {"},{"lineNumber":205,"author":{"gitId":"-"},"content":"            return logic.getCourse(((Course) entity).getId());"},{"lineNumber":206,"author":{"gitId":"-"},"content":"        } else if (entity instanceof FeedbackSession) {"},{"lineNumber":207,"author":{"gitId":"-"},"content":"            return logic.getFeedbackSession(((FeedbackSession) entity).getId());"},{"lineNumber":208,"author":{"gitId":"-"},"content":"        } else if (entity instanceof Account) {"},{"lineNumber":209,"author":{"gitId":"-"},"content":"            return logic.getAccount(((Account) entity).getId());"},{"lineNumber":210,"author":{"gitId":"-"},"content":"        } else if (entity instanceof Notification) {"},{"lineNumber":211,"author":{"gitId":"-"},"content":"            return logic.getNotification(((Notification) entity).getId());"},{"lineNumber":212,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":213,"author":{"gitId":"-"},"content":"            throw new RuntimeException(\"Unknown entity type\");"},{"lineNumber":214,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":215,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":216,"author":{"gitId":"-"},"content":""},{"lineNumber":217,"author":{"gitId":"-"},"content":"    private void equalizeIrrelevantData(Course expected, Course actual) {"},{"lineNumber":218,"author":{"gitId":"-"},"content":"        // Ignore time field as it is stamped at the time of creation in testing"},{"lineNumber":219,"author":{"gitId":"-"},"content":"        expected.setCreatedAt(actual.getCreatedAt());"},{"lineNumber":220,"author":{"gitId":"-"},"content":"        expected.setUpdatedAt(actual.getUpdatedAt());"},{"lineNumber":221,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":222,"author":{"gitId":"-"},"content":""},{"lineNumber":223,"author":{"gitId":"-"},"content":"    private void equalizeIrrelevantData(DeadlineExtension expected, DeadlineExtension actual) {"},{"lineNumber":224,"author":{"gitId":"-"},"content":"        // Ignore time field as it is stamped at the time of creation in testing"},{"lineNumber":225,"author":{"gitId":"-"},"content":"        expected.setCreatedAt(actual.getCreatedAt());"},{"lineNumber":226,"author":{"gitId":"-"},"content":"        expected.setUpdatedAt(actual.getUpdatedAt());"},{"lineNumber":227,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":228,"author":{"gitId":"-"},"content":""},{"lineNumber":229,"author":{"gitId":"-"},"content":"    private void equalizeIrrelevantData(FeedbackSession expected, FeedbackSession actual) {"},{"lineNumber":230,"author":{"gitId":"-"},"content":"        // Ignore time field as it is stamped at the time of creation in testing"},{"lineNumber":231,"author":{"gitId":"-"},"content":"        expected.setCreatedAt(actual.getCreatedAt());"},{"lineNumber":232,"author":{"gitId":"-"},"content":"        expected.setUpdatedAt(actual.getUpdatedAt());"},{"lineNumber":233,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":234,"author":{"gitId":"-"},"content":""},{"lineNumber":235,"author":{"gitId":"hhdqirui"},"content":"    private void equalizeIrrelevantData(FeedbackQuestion expected, FeedbackQuestion actual) {"},{"lineNumber":236,"author":{"gitId":"hhdqirui"},"content":"        // Ignore time field as it is stamped at the time of creation in testing"},{"lineNumber":237,"author":{"gitId":"hhdqirui"},"content":"        expected.setCreatedAt(actual.getCreatedAt());"},{"lineNumber":238,"author":{"gitId":"hhdqirui"},"content":"        expected.setUpdatedAt(actual.getUpdatedAt());"},{"lineNumber":239,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":240,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":241,"author":{"gitId":"hhdqirui"},"content":"    private void equalizeIrrelevantData(Notification expected, Notification actual) {"},{"lineNumber":242,"author":{"gitId":"hhdqirui"},"content":"        // Ignore time field as it is stamped at the time of creation in testing"},{"lineNumber":243,"author":{"gitId":"hhdqirui"},"content":"        expected.setCreatedAt(actual.getCreatedAt());"},{"lineNumber":244,"author":{"gitId":"hhdqirui"},"content":"        expected.setUpdatedAt(actual.getUpdatedAt());"},{"lineNumber":245,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":246,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":247,"author":{"gitId":"-"},"content":"    private void equalizeIrrelevantData(Account expected, Account actual) {"},{"lineNumber":248,"author":{"gitId":"-"},"content":"        // Ignore time field as it is stamped at the time of creation in testing"},{"lineNumber":249,"author":{"gitId":"-"},"content":"        expected.setCreatedAt(actual.getCreatedAt());"},{"lineNumber":250,"author":{"gitId":"-"},"content":"        expected.setUpdatedAt(actual.getUpdatedAt());"},{"lineNumber":251,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":252,"author":{"gitId":"-"},"content":""},{"lineNumber":253,"author":{"gitId":"-"},"content":"    private void equalizeIrrelevantData(AccountRequest expected, AccountRequest actual) {"},{"lineNumber":254,"author":{"gitId":"-"},"content":"        // Ignore time field as it is stamped at the time of creation in testing"},{"lineNumber":255,"author":{"gitId":"-"},"content":"        expected.setCreatedAt(actual.getCreatedAt());"},{"lineNumber":256,"author":{"gitId":"-"},"content":"        expected.setUpdatedAt(actual.getUpdatedAt());"},{"lineNumber":257,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":258,"author":{"gitId":"-"},"content":""},{"lineNumber":259,"author":{"gitId":"-"},"content":"    private void equalizeIrrelevantData(UsageStatistics expected, UsageStatistics actual) {"},{"lineNumber":260,"author":{"gitId":"-"},"content":"        // Ignore time field as it is stamped at the time of creation in testing"},{"lineNumber":261,"author":{"gitId":"-"},"content":"        expected.setCreatedAt(actual.getCreatedAt());"},{"lineNumber":262,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":263,"author":{"gitId":"-"},"content":""},{"lineNumber":264,"author":{"gitId":"domlimm"},"content":"    private void equalizeIrrelevantData(Instructor expected, Instructor actual) {"},{"lineNumber":265,"author":{"gitId":"domlimm"},"content":"        // Ignore time field as it is stamped at the time of creation in testing"},{"lineNumber":266,"author":{"gitId":"domlimm"},"content":"        expected.setCreatedAt(actual.getCreatedAt());"},{"lineNumber":267,"author":{"gitId":"domlimm"},"content":"        expected.setUpdatedAt(actual.getUpdatedAt());"},{"lineNumber":268,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":269,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":270,"author":{"gitId":"domlimm"},"content":"    private void equalizeIrrelevantData(Student expected, Student actual) {"},{"lineNumber":271,"author":{"gitId":"domlimm"},"content":"        // Ignore time field as it is stamped at the time of creation in testing"},{"lineNumber":272,"author":{"gitId":"domlimm"},"content":"        expected.setCreatedAt(actual.getCreatedAt());"},{"lineNumber":273,"author":{"gitId":"domlimm"},"content":"        expected.setUpdatedAt(actual.getUpdatedAt());"},{"lineNumber":274,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":275,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":276,"author":{"gitId":"-"},"content":"    private void equalizeIrrelevantData(Section expected, Section actual) {"},{"lineNumber":277,"author":{"gitId":"-"},"content":"        // Ignore time field as it is stamped at the time of creation in testing"},{"lineNumber":278,"author":{"gitId":"-"},"content":"        expected.setCreatedAt(actual.getCreatedAt());"},{"lineNumber":279,"author":{"gitId":"-"},"content":"        expected.setUpdatedAt(actual.getUpdatedAt());"},{"lineNumber":280,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":281,"author":{"gitId":"-"},"content":""},{"lineNumber":282,"author":{"gitId":"-"},"content":"    private void equalizeIrrelevantData(Team expected, Team actual) {"},{"lineNumber":283,"author":{"gitId":"-"},"content":"        // Ignore time field as it is stamped at the time of creation in testing"},{"lineNumber":284,"author":{"gitId":"-"},"content":"        expected.setCreatedAt(actual.getCreatedAt());"},{"lineNumber":285,"author":{"gitId":"-"},"content":"        expected.setUpdatedAt(actual.getUpdatedAt());"},{"lineNumber":286,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":287,"author":{"gitId":"-"},"content":""},{"lineNumber":288,"author":{"gitId":"-"},"content":"    private void equalizeIrrelevantData(ReadNotification expected, ReadNotification actual) {"},{"lineNumber":289,"author":{"gitId":"-"},"content":"        // Ignore time field as it is stamped at the time of creation in testing"},{"lineNumber":290,"author":{"gitId":"-"},"content":"        expected.setCreatedAt(actual.getCreatedAt());"},{"lineNumber":291,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":292,"author":{"gitId":"-"},"content":""},{"lineNumber":293,"author":{"gitId":"hhdqirui"},"content":"    /**"},{"lineNumber":294,"author":{"gitId":"hhdqirui"},"content":"     * Generates a UUID that is different from the given {@code uuid}."},{"lineNumber":295,"author":{"gitId":"hhdqirui"},"content":"     */"},{"lineNumber":296,"author":{"gitId":"hhdqirui"},"content":"    protected UUID generateDifferentUuid(UUID uuid) {"},{"lineNumber":297,"author":{"gitId":"hhdqirui"},"content":"        UUID ret \u003d UUID.randomUUID();"},{"lineNumber":298,"author":{"gitId":"hhdqirui"},"content":"        while (ret.equals(uuid)) {"},{"lineNumber":299,"author":{"gitId":"hhdqirui"},"content":"            ret \u003d UUID.randomUUID();"},{"lineNumber":300,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":301,"author":{"gitId":"hhdqirui"},"content":"        return ret;"},{"lineNumber":302,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":303,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"domlimm":24,"hhdqirui":36,"-":243}},{"path":"src/it/java/teammates/it/ui/webapi/GetInstructorsActionIT.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"domlimm"},"content":"package teammates.it.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":3,"author":{"gitId":"domlimm"},"content":"import java.util.List;"},{"lineNumber":4,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":5,"author":{"gitId":"domlimm"},"content":"import org.testng.annotations.BeforeMethod;"},{"lineNumber":6,"author":{"gitId":"domlimm"},"content":"import org.testng.annotations.Test;"},{"lineNumber":7,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":8,"author":{"gitId":"domlimm"},"content":"import teammates.common.util.Const;"},{"lineNumber":9,"author":{"gitId":"domlimm"},"content":"import teammates.common.util.HibernateUtil;"},{"lineNumber":10,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":11,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Student;"},{"lineNumber":12,"author":{"gitId":"domlimm"},"content":"import teammates.ui.output.InstructorData;"},{"lineNumber":13,"author":{"gitId":"domlimm"},"content":"import teammates.ui.output.InstructorsData;"},{"lineNumber":14,"author":{"gitId":"domlimm"},"content":"import teammates.ui.request.Intent;"},{"lineNumber":15,"author":{"gitId":"domlimm"},"content":"import teammates.ui.webapi.GetInstructorsAction;"},{"lineNumber":16,"author":{"gitId":"domlimm"},"content":"import teammates.ui.webapi.JsonResult;"},{"lineNumber":17,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":18,"author":{"gitId":"domlimm"},"content":"/**"},{"lineNumber":19,"author":{"gitId":"domlimm"},"content":" * SUT: {@link GetInstructorsAction}."},{"lineNumber":20,"author":{"gitId":"domlimm"},"content":" */"},{"lineNumber":21,"author":{"gitId":"domlimm"},"content":"public class GetInstructorsActionIT extends BaseActionIT\u003cGetInstructorsAction\u003e {"},{"lineNumber":22,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":23,"author":{"gitId":"domlimm"},"content":"    @Override"},{"lineNumber":24,"author":{"gitId":"domlimm"},"content":"    @BeforeMethod"},{"lineNumber":25,"author":{"gitId":"domlimm"},"content":"    protected void setUp() throws Exception {"},{"lineNumber":26,"author":{"gitId":"domlimm"},"content":"        super.setUp();"},{"lineNumber":27,"author":{"gitId":"domlimm"},"content":"        persistDataBundle(typicalBundle);"},{"lineNumber":28,"author":{"gitId":"domlimm"},"content":"        HibernateUtil.flushSession();"},{"lineNumber":29,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":30,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":31,"author":{"gitId":"domlimm"},"content":"    @Override"},{"lineNumber":32,"author":{"gitId":"domlimm"},"content":"    protected String getActionUri() {"},{"lineNumber":33,"author":{"gitId":"domlimm"},"content":"        return Const.ResourceURIs.INSTRUCTORS;"},{"lineNumber":34,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":35,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":36,"author":{"gitId":"domlimm"},"content":"    @Override"},{"lineNumber":37,"author":{"gitId":"domlimm"},"content":"    protected String getRequestMethod() {"},{"lineNumber":38,"author":{"gitId":"domlimm"},"content":"        return GET;"},{"lineNumber":39,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":40,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":41,"author":{"gitId":"domlimm"},"content":"    @Test"},{"lineNumber":42,"author":{"gitId":"domlimm"},"content":"    @Override"},{"lineNumber":43,"author":{"gitId":"domlimm"},"content":"    protected void testExecute() throws Exception {"},{"lineNumber":44,"author":{"gitId":"domlimm"},"content":"        Instructor instructor \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":45,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":46,"author":{"gitId":"domlimm"},"content":"        loginAsInstructor(instructor.getGoogleId());"},{"lineNumber":47,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":48,"author":{"gitId":"domlimm"},"content":"        ______TS(\"Typical Success Case with FULL_DETAIL\");"},{"lineNumber":49,"author":{"gitId":"domlimm"},"content":"        String[] params \u003d new String[] {"},{"lineNumber":50,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.COURSE_ID, instructor.getCourseId(),"},{"lineNumber":51,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.INTENT, Intent.FULL_DETAIL.toString(),"},{"lineNumber":52,"author":{"gitId":"domlimm"},"content":"        };"},{"lineNumber":53,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":54,"author":{"gitId":"domlimm"},"content":"        GetInstructorsAction action \u003d getAction(params);"},{"lineNumber":55,"author":{"gitId":"domlimm"},"content":"        JsonResult jsonResult \u003d getJsonResult(action);"},{"lineNumber":56,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":57,"author":{"gitId":"domlimm"},"content":"        InstructorsData output \u003d (InstructorsData) jsonResult.getOutput();"},{"lineNumber":58,"author":{"gitId":"domlimm"},"content":"        List\u003cInstructorData\u003e instructors \u003d output.getInstructors();"},{"lineNumber":59,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":60,"author":{"gitId":"domlimm"},"content":"        assertEquals(2, instructors.size());"},{"lineNumber":61,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":62,"author":{"gitId":"domlimm"},"content":"        ______TS(\"Typical Success Case with no intent\");"},{"lineNumber":63,"author":{"gitId":"domlimm"},"content":"        params \u003d new String[] {"},{"lineNumber":64,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.COURSE_ID, instructor.getCourseId(),"},{"lineNumber":65,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.INTENT, null,"},{"lineNumber":66,"author":{"gitId":"domlimm"},"content":"        };"},{"lineNumber":67,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":68,"author":{"gitId":"domlimm"},"content":"        action \u003d getAction(params);"},{"lineNumber":69,"author":{"gitId":"domlimm"},"content":"        jsonResult \u003d getJsonResult(action);"},{"lineNumber":70,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":71,"author":{"gitId":"domlimm"},"content":"        output \u003d (InstructorsData) jsonResult.getOutput();"},{"lineNumber":72,"author":{"gitId":"domlimm"},"content":"        instructors \u003d output.getInstructors();"},{"lineNumber":73,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":74,"author":{"gitId":"domlimm"},"content":"        assertEquals(2, instructors.size());"},{"lineNumber":75,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":76,"author":{"gitId":"domlimm"},"content":"        for (InstructorData instructorData : instructors) {"},{"lineNumber":77,"author":{"gitId":"domlimm"},"content":"            assertNull(instructorData.getGoogleId());"},{"lineNumber":78,"author":{"gitId":"domlimm"},"content":"            assertNull(instructorData.getJoinState());"},{"lineNumber":79,"author":{"gitId":"domlimm"},"content":"            assertNull(instructorData.getIsDisplayedToStudents());"},{"lineNumber":80,"author":{"gitId":"domlimm"},"content":"            assertNull(instructorData.getRole());"},{"lineNumber":81,"author":{"gitId":"domlimm"},"content":"        }"},{"lineNumber":82,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":83,"author":{"gitId":"domlimm"},"content":"        ______TS(\"Unknown intent\");"},{"lineNumber":84,"author":{"gitId":"domlimm"},"content":"        params \u003d new String[] {"},{"lineNumber":85,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.COURSE_ID, instructor.getCourseId(),"},{"lineNumber":86,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.INTENT, \"Unknown\","},{"lineNumber":87,"author":{"gitId":"domlimm"},"content":"        };"},{"lineNumber":88,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":89,"author":{"gitId":"domlimm"},"content":"        verifyHttpParameterFailure(params);"},{"lineNumber":90,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":91,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":92,"author":{"gitId":"domlimm"},"content":"    @Test"},{"lineNumber":93,"author":{"gitId":"domlimm"},"content":"    @Override"},{"lineNumber":94,"author":{"gitId":"domlimm"},"content":"    protected void testAccessControl() throws Exception {"},{"lineNumber":95,"author":{"gitId":"domlimm"},"content":"        Instructor instructor \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":96,"author":{"gitId":"domlimm"},"content":"        Student student \u003d typicalBundle.students.get(\"student1InCourse1\");"},{"lineNumber":97,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":98,"author":{"gitId":"domlimm"},"content":"        ______TS(\"Course not found, logged in as instructor, intent FULL_DETAIL\");"},{"lineNumber":99,"author":{"gitId":"domlimm"},"content":"        loginAsInstructor(instructor.getGoogleId());"},{"lineNumber":100,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":101,"author":{"gitId":"domlimm"},"content":"        String[] params \u003d new String[] {"},{"lineNumber":102,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.COURSE_ID, \"does-not-exist-id\","},{"lineNumber":103,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.INTENT, Intent.FULL_DETAIL.toString(),"},{"lineNumber":104,"author":{"gitId":"domlimm"},"content":"        };"},{"lineNumber":105,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":106,"author":{"gitId":"domlimm"},"content":"        verifyEntityNotFoundAcl(params);"},{"lineNumber":107,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":108,"author":{"gitId":"domlimm"},"content":"        ______TS(\"Course not found, logged in as student, intent undefined\");"},{"lineNumber":109,"author":{"gitId":"domlimm"},"content":"        loginAsStudent(student.getGoogleId());"},{"lineNumber":110,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":111,"author":{"gitId":"domlimm"},"content":"        params \u003d new String[] {"},{"lineNumber":112,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.COURSE_ID, \"does-not-exist-id\","},{"lineNumber":113,"author":{"gitId":"domlimm"},"content":"        };"},{"lineNumber":114,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":115,"author":{"gitId":"domlimm"},"content":"        verifyEntityNotFoundAcl(params);"},{"lineNumber":116,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":117,"author":{"gitId":"domlimm"},"content":"        ______TS(\"Unknown login entity, intent FULL_DETAIL\");"},{"lineNumber":118,"author":{"gitId":"domlimm"},"content":"        loginAsUnregistered(\"unregistered\");"},{"lineNumber":119,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":120,"author":{"gitId":"domlimm"},"content":"        params \u003d new String[] {"},{"lineNumber":121,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.COURSE_ID, instructor.getCourseId(),"},{"lineNumber":122,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.INTENT, Intent.FULL_DETAIL.toString(),"},{"lineNumber":123,"author":{"gitId":"domlimm"},"content":"        };"},{"lineNumber":124,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":125,"author":{"gitId":"domlimm"},"content":"        verifyCannotAccess(params);"},{"lineNumber":126,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":127,"author":{"gitId":"domlimm"},"content":"        ______TS(\"Unknown login entity, intent undefined\");"},{"lineNumber":128,"author":{"gitId":"domlimm"},"content":"        params \u003d new String[] {"},{"lineNumber":129,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.COURSE_ID, instructor.getCourseId(),"},{"lineNumber":130,"author":{"gitId":"domlimm"},"content":"        };"},{"lineNumber":131,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":132,"author":{"gitId":"domlimm"},"content":"        verifyCannotAccess(params);"},{"lineNumber":133,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":134,"author":{"gitId":"domlimm"},"content":"        ______TS(\"Unknown intent, logged in as instructor\");"},{"lineNumber":135,"author":{"gitId":"domlimm"},"content":"        loginAsInstructor(instructor.getGoogleId());"},{"lineNumber":136,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":137,"author":{"gitId":"domlimm"},"content":"        params \u003d new String[] {"},{"lineNumber":138,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.COURSE_ID, instructor.getCourseId(),"},{"lineNumber":139,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.INTENT, \"Unknown\","},{"lineNumber":140,"author":{"gitId":"domlimm"},"content":"        };"},{"lineNumber":141,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":142,"author":{"gitId":"domlimm"},"content":"        verifyHttpParameterFailureAcl(params);"},{"lineNumber":143,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":144,"author":{"gitId":"domlimm"},"content":"        ______TS(\"Intent FULL_DETAIL, should authenticate as instructor\");"},{"lineNumber":145,"author":{"gitId":"domlimm"},"content":"        params \u003d new String[] {"},{"lineNumber":146,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.COURSE_ID, instructor.getCourseId(),"},{"lineNumber":147,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.INTENT, Intent.FULL_DETAIL.toString(),"},{"lineNumber":148,"author":{"gitId":"domlimm"},"content":"        };"},{"lineNumber":149,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":150,"author":{"gitId":"domlimm"},"content":"        verifyOnlyInstructorsOfTheSameCourseCanAccess(instructor.getCourse(), params);"},{"lineNumber":151,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":152,"author":{"gitId":"domlimm"},"content":"        ______TS(\"Intent undefined, should authenticate as student, access own course\");"},{"lineNumber":153,"author":{"gitId":"domlimm"},"content":"        loginAsStudent(student.getGoogleId());"},{"lineNumber":154,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":155,"author":{"gitId":"domlimm"},"content":"        params \u003d new String[] {"},{"lineNumber":156,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.COURSE_ID, student.getCourseId(),"},{"lineNumber":157,"author":{"gitId":"domlimm"},"content":"        };"},{"lineNumber":158,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":159,"author":{"gitId":"domlimm"},"content":"        verifyCanAccess(params);"},{"lineNumber":160,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":161,"author":{"gitId":"domlimm"},"content":"        ______TS(\"Intent undefined, should authenticate as student, access other course\");"},{"lineNumber":162,"author":{"gitId":"domlimm"},"content":"        Student otherStudent \u003d typicalBundle.students.get(\"student1InCourse2\");"},{"lineNumber":163,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":164,"author":{"gitId":"domlimm"},"content":"        assertNotEquals(otherStudent.getCourse(), student.getCourse());"},{"lineNumber":165,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":166,"author":{"gitId":"domlimm"},"content":"        params \u003d new String[] {"},{"lineNumber":167,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.COURSE_ID, otherStudent.getCourseId(),"},{"lineNumber":168,"author":{"gitId":"domlimm"},"content":"        };"},{"lineNumber":169,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":170,"author":{"gitId":"domlimm"},"content":"        verifyCannotAccess(params);"},{"lineNumber":171,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":172,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":173,"author":{"gitId":"domlimm"},"content":"}"}],"authorContributionMap":{"domlimm":173}},{"path":"src/it/java/teammates/it/ui/webapi/GetStudentActionIT.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"domlimm"},"content":"package teammates.it.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":3,"author":{"gitId":"domlimm"},"content":"import org.testng.annotations.BeforeMethod;"},{"lineNumber":4,"author":{"gitId":"domlimm"},"content":"import org.testng.annotations.Test;"},{"lineNumber":5,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":6,"author":{"gitId":"domlimm"},"content":"import teammates.common.util.Const;"},{"lineNumber":7,"author":{"gitId":"domlimm"},"content":"import teammates.common.util.HibernateUtil;"},{"lineNumber":8,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Course;"},{"lineNumber":9,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":10,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Student;"},{"lineNumber":11,"author":{"gitId":"domlimm"},"content":"import teammates.ui.output.StudentData;"},{"lineNumber":12,"author":{"gitId":"domlimm"},"content":"import teammates.ui.webapi.EntityNotFoundException;"},{"lineNumber":13,"author":{"gitId":"domlimm"},"content":"import teammates.ui.webapi.GetStudentAction;"},{"lineNumber":14,"author":{"gitId":"domlimm"},"content":"import teammates.ui.webapi.JsonResult;"},{"lineNumber":15,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":16,"author":{"gitId":"domlimm"},"content":"/**"},{"lineNumber":17,"author":{"gitId":"domlimm"},"content":" * SUT: {@link GetStudentAction}."},{"lineNumber":18,"author":{"gitId":"domlimm"},"content":" */"},{"lineNumber":19,"author":{"gitId":"domlimm"},"content":"public class GetStudentActionIT extends BaseActionIT\u003cGetStudentAction\u003e {"},{"lineNumber":20,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":21,"author":{"gitId":"domlimm"},"content":"    @Override"},{"lineNumber":22,"author":{"gitId":"domlimm"},"content":"    @BeforeMethod"},{"lineNumber":23,"author":{"gitId":"domlimm"},"content":"    protected void setUp() throws Exception {"},{"lineNumber":24,"author":{"gitId":"domlimm"},"content":"        super.setUp();"},{"lineNumber":25,"author":{"gitId":"domlimm"},"content":"        persistDataBundle(typicalBundle);"},{"lineNumber":26,"author":{"gitId":"domlimm"},"content":"        HibernateUtil.flushSession();"},{"lineNumber":27,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":28,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":29,"author":{"gitId":"domlimm"},"content":"    @Override"},{"lineNumber":30,"author":{"gitId":"domlimm"},"content":"    protected String getActionUri() {"},{"lineNumber":31,"author":{"gitId":"domlimm"},"content":"        return Const.ResourceURIs.STUDENT;"},{"lineNumber":32,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":33,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":34,"author":{"gitId":"domlimm"},"content":"    @Override"},{"lineNumber":35,"author":{"gitId":"domlimm"},"content":"    protected String getRequestMethod() {"},{"lineNumber":36,"author":{"gitId":"domlimm"},"content":"        return GET;"},{"lineNumber":37,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":38,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":39,"author":{"gitId":"domlimm"},"content":"    @Test"},{"lineNumber":40,"author":{"gitId":"domlimm"},"content":"    @Override"},{"lineNumber":41,"author":{"gitId":"domlimm"},"content":"    protected void testExecute() throws Exception {"},{"lineNumber":42,"author":{"gitId":"domlimm"},"content":"        Course course \u003d typicalBundle.courses.get(\"course1\");"},{"lineNumber":43,"author":{"gitId":"domlimm"},"content":"        Student student \u003d typicalBundle.students.get(\"student1InCourse1\");"},{"lineNumber":44,"author":{"gitId":"domlimm"},"content":"        Instructor instructor \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":45,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":46,"author":{"gitId":"domlimm"},"content":"        ______TS(\"Typical Success Case logged in as instructor, Registered Student\");"},{"lineNumber":47,"author":{"gitId":"domlimm"},"content":"        loginAsInstructor(instructor.getGoogleId());"},{"lineNumber":48,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":49,"author":{"gitId":"domlimm"},"content":"        String[] params \u003d new String[] {"},{"lineNumber":50,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),"},{"lineNumber":51,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.STUDENT_EMAIL, student.getEmail(),"},{"lineNumber":52,"author":{"gitId":"domlimm"},"content":"        };"},{"lineNumber":53,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":54,"author":{"gitId":"domlimm"},"content":"        GetStudentAction getStudentAction \u003d getAction(params);"},{"lineNumber":55,"author":{"gitId":"domlimm"},"content":"        JsonResult actionOutput \u003d getJsonResult(getStudentAction);"},{"lineNumber":56,"author":{"gitId":"domlimm"},"content":"        StudentData response \u003d (StudentData) actionOutput.getOutput();"},{"lineNumber":57,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":58,"author":{"gitId":"domlimm"},"content":"        assertEquals(student.getName(), response.getName());"},{"lineNumber":59,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":60,"author":{"gitId":"domlimm"},"content":"        logoutUser();"},{"lineNumber":61,"author":{"gitId":"domlimm"},"content":"        loginAsStudent(student.getGoogleId());"},{"lineNumber":62,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":63,"author":{"gitId":"domlimm"},"content":"        ______TS(\"Typical Success Case logged in as student, Registered Student\");"},{"lineNumber":64,"author":{"gitId":"domlimm"},"content":"        params \u003d new String[] {"},{"lineNumber":65,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),"},{"lineNumber":66,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.STUDENT_EMAIL, student.getEmail(),"},{"lineNumber":67,"author":{"gitId":"domlimm"},"content":"        };"},{"lineNumber":68,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":69,"author":{"gitId":"domlimm"},"content":"        getStudentAction \u003d getAction(params);"},{"lineNumber":70,"author":{"gitId":"domlimm"},"content":"        actionOutput \u003d getJsonResult(getStudentAction);"},{"lineNumber":71,"author":{"gitId":"domlimm"},"content":"        response \u003d (StudentData) actionOutput.getOutput();"},{"lineNumber":72,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":73,"author":{"gitId":"domlimm"},"content":"        assertEquals(student.getName(), response.getName());"},{"lineNumber":74,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":75,"author":{"gitId":"domlimm"},"content":"        ______TS(\"Typical Success Case with Unregistered Student\");"},{"lineNumber":76,"author":{"gitId":"domlimm"},"content":"        params \u003d new String[] {"},{"lineNumber":77,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),"},{"lineNumber":78,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.STUDENT_EMAIL, null,"},{"lineNumber":79,"author":{"gitId":"domlimm"},"content":"        };"},{"lineNumber":80,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":81,"author":{"gitId":"domlimm"},"content":"        getStudentAction \u003d getAction(params);"},{"lineNumber":82,"author":{"gitId":"domlimm"},"content":"        actionOutput \u003d getJsonResult(getStudentAction);"},{"lineNumber":83,"author":{"gitId":"domlimm"},"content":"        response \u003d (StudentData) actionOutput.getOutput();"},{"lineNumber":84,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":85,"author":{"gitId":"domlimm"},"content":"        assertEquals(student.getName(), response.getName());"},{"lineNumber":86,"author":{"gitId":"domlimm"},"content":"        assertNull(response.getComments());"},{"lineNumber":87,"author":{"gitId":"domlimm"},"content":"        assertNull(response.getJoinState());"},{"lineNumber":88,"author":{"gitId":"domlimm"},"content":"        assertEquals(student.getCourse().getInstitute(), response.getInstitute());"},{"lineNumber":89,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":90,"author":{"gitId":"domlimm"},"content":"        ______TS(\"Student is non existent\");"},{"lineNumber":91,"author":{"gitId":"domlimm"},"content":"        params \u003d new String[] {"},{"lineNumber":92,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),"},{"lineNumber":93,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.STUDENT_EMAIL, \"does-not-exist@teammates.tmt\","},{"lineNumber":94,"author":{"gitId":"domlimm"},"content":"        };"},{"lineNumber":95,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":96,"author":{"gitId":"domlimm"},"content":"        EntityNotFoundException enfe \u003d verifyEntityNotFound(params);"},{"lineNumber":97,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":98,"author":{"gitId":"domlimm"},"content":"        assertEquals(\"No student found\", enfe.getMessage());"},{"lineNumber":99,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":100,"author":{"gitId":"domlimm"},"content":"        logoutUser();"},{"lineNumber":101,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":102,"author":{"gitId":"domlimm"},"content":"        ______TS(\"Typical Success Case logged in as admin, Registered Student\");"},{"lineNumber":103,"author":{"gitId":"domlimm"},"content":"        loginAsAdmin();"},{"lineNumber":104,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":105,"author":{"gitId":"domlimm"},"content":"        params \u003d new String[] {"},{"lineNumber":106,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),"},{"lineNumber":107,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.STUDENT_EMAIL, student.getEmail(),"},{"lineNumber":108,"author":{"gitId":"domlimm"},"content":"        };"},{"lineNumber":109,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":110,"author":{"gitId":"domlimm"},"content":"        getStudentAction \u003d getAction(params);"},{"lineNumber":111,"author":{"gitId":"domlimm"},"content":"        actionOutput \u003d getJsonResult(getStudentAction);"},{"lineNumber":112,"author":{"gitId":"domlimm"},"content":"        response \u003d (StudentData) actionOutput.getOutput();"},{"lineNumber":113,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":114,"author":{"gitId":"domlimm"},"content":"        assertEquals(student.getName(), response.getName());"},{"lineNumber":115,"author":{"gitId":"domlimm"},"content":"        assertEquals(student.getRegKey(), response.getKey());"},{"lineNumber":116,"author":{"gitId":"domlimm"},"content":"        assertEquals(student.getGoogleId(), response.getGoogleId());"},{"lineNumber":117,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":118,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":119,"author":{"gitId":"domlimm"},"content":"    @Test"},{"lineNumber":120,"author":{"gitId":"domlimm"},"content":"    @Override"},{"lineNumber":121,"author":{"gitId":"domlimm"},"content":"    protected void testAccessControl() throws Exception {"},{"lineNumber":122,"author":{"gitId":"domlimm"},"content":"        Course course \u003d typicalBundle.courses.get(\"course1\");"},{"lineNumber":123,"author":{"gitId":"domlimm"},"content":"        Student student \u003d typicalBundle.students.get(\"student1InCourse1\");"},{"lineNumber":124,"author":{"gitId":"domlimm"},"content":"        Instructor instructor \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":125,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":126,"author":{"gitId":"domlimm"},"content":"        ______TS(\"Only students of the same course with correct privilege can access\");"},{"lineNumber":127,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":128,"author":{"gitId":"domlimm"},"content":"        String[] params \u003d new String[] {"},{"lineNumber":129,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),"},{"lineNumber":130,"author":{"gitId":"domlimm"},"content":"        };"},{"lineNumber":131,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":132,"author":{"gitId":"domlimm"},"content":"        verifyAccessibleForStudentsOfTheSameCourse(course, params);"},{"lineNumber":133,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":134,"author":{"gitId":"domlimm"},"content":"        logoutUser();"},{"lineNumber":135,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":136,"author":{"gitId":"domlimm"},"content":"        ______TS(\"Only instructors of the same course with correct privilege can access\");"},{"lineNumber":137,"author":{"gitId":"domlimm"},"content":"        params \u003d new String[] {"},{"lineNumber":138,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),"},{"lineNumber":139,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.STUDENT_EMAIL, student.getEmail(),"},{"lineNumber":140,"author":{"gitId":"domlimm"},"content":"        };"},{"lineNumber":141,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":142,"author":{"gitId":"domlimm"},"content":"        loginAsInstructor(instructor.getGoogleId());"},{"lineNumber":143,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":144,"author":{"gitId":"domlimm"},"content":"        verifyInaccessibleForInstructorsOfOtherCourses(course, params);"},{"lineNumber":145,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":146,"author":{"gitId":"domlimm"},"content":"        ______TS(\"Unregistered Student can access with key\");"},{"lineNumber":147,"author":{"gitId":"domlimm"},"content":"        params \u003d new String[] {"},{"lineNumber":148,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),"},{"lineNumber":149,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.REGKEY, \"does-not-exist-key\","},{"lineNumber":150,"author":{"gitId":"domlimm"},"content":"        };"},{"lineNumber":151,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":152,"author":{"gitId":"domlimm"},"content":"        verifyInaccessibleForUnregisteredUsers(params);"},{"lineNumber":153,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":154,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":155,"author":{"gitId":"domlimm"},"content":"}"}],"authorContributionMap":{"domlimm":155}},{"path":"src/it/java/teammates/it/ui/webapi/GetStudentsActionIT.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"domlimm"},"content":"package teammates.it.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":3,"author":{"gitId":"domlimm"},"content":"import java.util.List;"},{"lineNumber":4,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":5,"author":{"gitId":"domlimm"},"content":"import org.testng.annotations.BeforeMethod;"},{"lineNumber":6,"author":{"gitId":"domlimm"},"content":"import org.testng.annotations.Test;"},{"lineNumber":7,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":8,"author":{"gitId":"domlimm"},"content":"import teammates.common.util.Const;"},{"lineNumber":9,"author":{"gitId":"domlimm"},"content":"import teammates.common.util.HibernateUtil;"},{"lineNumber":10,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Course;"},{"lineNumber":11,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":12,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Student;"},{"lineNumber":13,"author":{"gitId":"domlimm"},"content":"import teammates.ui.output.StudentData;"},{"lineNumber":14,"author":{"gitId":"domlimm"},"content":"import teammates.ui.output.StudentsData;"},{"lineNumber":15,"author":{"gitId":"domlimm"},"content":"import teammates.ui.webapi.GetStudentsAction;"},{"lineNumber":16,"author":{"gitId":"domlimm"},"content":"import teammates.ui.webapi.JsonResult;"},{"lineNumber":17,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":18,"author":{"gitId":"domlimm"},"content":"/**"},{"lineNumber":19,"author":{"gitId":"domlimm"},"content":" * SUT: {@link GetStudentsAction}."},{"lineNumber":20,"author":{"gitId":"domlimm"},"content":" */"},{"lineNumber":21,"author":{"gitId":"domlimm"},"content":"public class GetStudentsActionIT extends BaseActionIT\u003cGetStudentsAction\u003e {"},{"lineNumber":22,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":23,"author":{"gitId":"domlimm"},"content":"    @Override"},{"lineNumber":24,"author":{"gitId":"domlimm"},"content":"    @BeforeMethod"},{"lineNumber":25,"author":{"gitId":"domlimm"},"content":"    protected void setUp() throws Exception {"},{"lineNumber":26,"author":{"gitId":"domlimm"},"content":"        super.setUp();"},{"lineNumber":27,"author":{"gitId":"domlimm"},"content":"        persistDataBundle(typicalBundle);"},{"lineNumber":28,"author":{"gitId":"domlimm"},"content":"        HibernateUtil.flushSession();"},{"lineNumber":29,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":30,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":31,"author":{"gitId":"domlimm"},"content":"    @Override"},{"lineNumber":32,"author":{"gitId":"domlimm"},"content":"    String getActionUri() {"},{"lineNumber":33,"author":{"gitId":"domlimm"},"content":"        return Const.ResourceURIs.STUDENTS;"},{"lineNumber":34,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":35,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":36,"author":{"gitId":"domlimm"},"content":"    @Override"},{"lineNumber":37,"author":{"gitId":"domlimm"},"content":"    String getRequestMethod() {"},{"lineNumber":38,"author":{"gitId":"domlimm"},"content":"        return GET;"},{"lineNumber":39,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":40,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":41,"author":{"gitId":"domlimm"},"content":"    @Test"},{"lineNumber":42,"author":{"gitId":"domlimm"},"content":"    @Override"},{"lineNumber":43,"author":{"gitId":"domlimm"},"content":"    protected void testExecute() throws Exception {"},{"lineNumber":44,"author":{"gitId":"domlimm"},"content":"        Course course \u003d typicalBundle.courses.get(\"course1\");"},{"lineNumber":45,"author":{"gitId":"domlimm"},"content":"        Student student \u003d typicalBundle.students.get(\"student1InCourse1\");"},{"lineNumber":46,"author":{"gitId":"domlimm"},"content":"        Instructor instructor \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":47,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":48,"author":{"gitId":"domlimm"},"content":"        loginAsInstructor(instructor.getGoogleId());"},{"lineNumber":49,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":50,"author":{"gitId":"domlimm"},"content":"        ______TS(\"Typical Success Case with only course id, logged in as instructor\");"},{"lineNumber":51,"author":{"gitId":"domlimm"},"content":"        String[] params \u003d new String[] {"},{"lineNumber":52,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),"},{"lineNumber":53,"author":{"gitId":"domlimm"},"content":"        };"},{"lineNumber":54,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":55,"author":{"gitId":"domlimm"},"content":"        GetStudentsAction getStudentsAction \u003d getAction(params);"},{"lineNumber":56,"author":{"gitId":"domlimm"},"content":"        JsonResult jsonResult \u003d getJsonResult(getStudentsAction);"},{"lineNumber":57,"author":{"gitId":"domlimm"},"content":"        StudentsData response \u003d (StudentsData) jsonResult.getOutput();"},{"lineNumber":58,"author":{"gitId":"domlimm"},"content":"        List\u003cStudentData\u003e students \u003d response.getStudents();"},{"lineNumber":59,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":60,"author":{"gitId":"domlimm"},"content":"        assertEquals(2, students.size());"},{"lineNumber":61,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":62,"author":{"gitId":"domlimm"},"content":"        StudentData firstStudentInStudents \u003d students.get(0);"},{"lineNumber":63,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":64,"author":{"gitId":"domlimm"},"content":"        assertNull(firstStudentInStudents.getGoogleId());"},{"lineNumber":65,"author":{"gitId":"domlimm"},"content":"        assertNull(firstStudentInStudents.getKey());"},{"lineNumber":66,"author":{"gitId":"domlimm"},"content":"        assertEquals(student.getName(), firstStudentInStudents.getName());"},{"lineNumber":67,"author":{"gitId":"domlimm"},"content":"        assertEquals(student.getCourseId(), firstStudentInStudents.getCourseId());"},{"lineNumber":68,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":69,"author":{"gitId":"domlimm"},"content":"        logoutUser();"},{"lineNumber":70,"author":{"gitId":"domlimm"},"content":"        loginAsStudent(student.getGoogleId());"},{"lineNumber":71,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":72,"author":{"gitId":"domlimm"},"content":"        ______TS(\"Typical Success Case with course id and team name, logged in as student\");"},{"lineNumber":73,"author":{"gitId":"domlimm"},"content":"        params \u003d new String[] {"},{"lineNumber":74,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),"},{"lineNumber":75,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.TEAM_NAME, student.getTeam().getName(),"},{"lineNumber":76,"author":{"gitId":"domlimm"},"content":"        };"},{"lineNumber":77,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":78,"author":{"gitId":"domlimm"},"content":"        getStudentsAction \u003d getAction(params);"},{"lineNumber":79,"author":{"gitId":"domlimm"},"content":"        jsonResult \u003d getJsonResult(getStudentsAction);"},{"lineNumber":80,"author":{"gitId":"domlimm"},"content":"        response \u003d (StudentsData) jsonResult.getOutput();"},{"lineNumber":81,"author":{"gitId":"domlimm"},"content":"        students \u003d response.getStudents();"},{"lineNumber":82,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":83,"author":{"gitId":"domlimm"},"content":"        Student expectedOtherTeamMember \u003d typicalBundle.students.get(\"student2InCourse1\");"},{"lineNumber":84,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":85,"author":{"gitId":"domlimm"},"content":"        assertEquals(2, students.size());"},{"lineNumber":86,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":87,"author":{"gitId":"domlimm"},"content":"        StudentData actualOtherTeamMember \u003d students.get(1);"},{"lineNumber":88,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":89,"author":{"gitId":"domlimm"},"content":"        assertNull(actualOtherTeamMember.getGoogleId());"},{"lineNumber":90,"author":{"gitId":"domlimm"},"content":"        assertNull(actualOtherTeamMember.getKey());"},{"lineNumber":91,"author":{"gitId":"domlimm"},"content":"        assertEquals(expectedOtherTeamMember.getName(), actualOtherTeamMember.getName());"},{"lineNumber":92,"author":{"gitId":"domlimm"},"content":"        assertEquals(expectedOtherTeamMember.getCourseId(), actualOtherTeamMember.getCourseId());"},{"lineNumber":93,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":94,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":95,"author":{"gitId":"domlimm"},"content":"    @Test"},{"lineNumber":96,"author":{"gitId":"domlimm"},"content":"    @Override"},{"lineNumber":97,"author":{"gitId":"domlimm"},"content":"    protected void testAccessControl() throws Exception {"},{"lineNumber":98,"author":{"gitId":"domlimm"},"content":"        Course course \u003d typicalBundle.courses.get(\"course1\");"},{"lineNumber":99,"author":{"gitId":"domlimm"},"content":"        Student student \u003d typicalBundle.students.get(\"student1InCourse1\");"},{"lineNumber":100,"author":{"gitId":"domlimm"},"content":"        Instructor instructor \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":101,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":102,"author":{"gitId":"domlimm"},"content":"        ______TS(\"Only instructors with correct privilege can access\");"},{"lineNumber":103,"author":{"gitId":"domlimm"},"content":"        String[] params \u003d new String[] {"},{"lineNumber":104,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),"},{"lineNumber":105,"author":{"gitId":"domlimm"},"content":"        };"},{"lineNumber":106,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":107,"author":{"gitId":"domlimm"},"content":"        loginAsInstructor(instructor.getGoogleId());"},{"lineNumber":108,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":109,"author":{"gitId":"domlimm"},"content":"        verifyCanAccess(params);"},{"lineNumber":110,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":111,"author":{"gitId":"domlimm"},"content":"        ______TS(\"Student to view team members\");"},{"lineNumber":112,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":113,"author":{"gitId":"domlimm"},"content":"        params \u003d new String[] {"},{"lineNumber":114,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),"},{"lineNumber":115,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.TEAM_NAME, student.getTeam().getName(),"},{"lineNumber":116,"author":{"gitId":"domlimm"},"content":"        };"},{"lineNumber":117,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":118,"author":{"gitId":"domlimm"},"content":"        loginAsStudent(student.getGoogleId());"},{"lineNumber":119,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":120,"author":{"gitId":"domlimm"},"content":"        verifyCanAccess(params);"},{"lineNumber":121,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":122,"author":{"gitId":"domlimm"},"content":"        ______TS(\"Unknown login entity\");"},{"lineNumber":123,"author":{"gitId":"domlimm"},"content":"        loginAsUnregistered(\"does-not-exist-id\");"},{"lineNumber":124,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":125,"author":{"gitId":"domlimm"},"content":"        params \u003d new String[] {"},{"lineNumber":126,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),"},{"lineNumber":127,"author":{"gitId":"domlimm"},"content":"        };"},{"lineNumber":128,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":129,"author":{"gitId":"domlimm"},"content":"        verifyCannotAccess(params);"},{"lineNumber":130,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":131,"author":{"gitId":"domlimm"},"content":"        params \u003d new String[] {"},{"lineNumber":132,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),"},{"lineNumber":133,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.TEAM_NAME, student.getTeam().getName(),"},{"lineNumber":134,"author":{"gitId":"domlimm"},"content":"        };"},{"lineNumber":135,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":136,"author":{"gitId":"domlimm"},"content":"        verifyCannotAccess(params);"},{"lineNumber":137,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":138,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":139,"author":{"gitId":"domlimm"},"content":"}"}],"authorContributionMap":{"domlimm":139}},{"path":"src/it/java/teammates/it/ui/webapi/ResetAccountActionIT.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"domlimm"},"content":"package teammates.it.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":3,"author":{"gitId":"domlimm"},"content":"import org.testng.annotations.BeforeMethod;"},{"lineNumber":4,"author":{"gitId":"domlimm"},"content":"import org.testng.annotations.Test;"},{"lineNumber":5,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":6,"author":{"gitId":"domlimm"},"content":"import teammates.common.util.Const;"},{"lineNumber":7,"author":{"gitId":"domlimm"},"content":"import teammates.common.util.HibernateUtil;"},{"lineNumber":8,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Course;"},{"lineNumber":9,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":10,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Student;"},{"lineNumber":11,"author":{"gitId":"domlimm"},"content":"import teammates.ui.output.MessageOutput;"},{"lineNumber":12,"author":{"gitId":"domlimm"},"content":"import teammates.ui.webapi.EntityNotFoundException;"},{"lineNumber":13,"author":{"gitId":"domlimm"},"content":"import teammates.ui.webapi.JsonResult;"},{"lineNumber":14,"author":{"gitId":"domlimm"},"content":"import teammates.ui.webapi.ResetAccountAction;"},{"lineNumber":15,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":16,"author":{"gitId":"domlimm"},"content":"/**"},{"lineNumber":17,"author":{"gitId":"domlimm"},"content":" * SUT: {@link ResetAccountAction}."},{"lineNumber":18,"author":{"gitId":"domlimm"},"content":" */"},{"lineNumber":19,"author":{"gitId":"domlimm"},"content":"public class ResetAccountActionIT extends BaseActionIT\u003cResetAccountAction\u003e {"},{"lineNumber":20,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":21,"author":{"gitId":"domlimm"},"content":"    @Override"},{"lineNumber":22,"author":{"gitId":"domlimm"},"content":"    @BeforeMethod"},{"lineNumber":23,"author":{"gitId":"domlimm"},"content":"    protected void setUp() throws Exception {"},{"lineNumber":24,"author":{"gitId":"domlimm"},"content":"        super.setUp();"},{"lineNumber":25,"author":{"gitId":"domlimm"},"content":"        persistDataBundle(typicalBundle);"},{"lineNumber":26,"author":{"gitId":"domlimm"},"content":"        HibernateUtil.flushSession();"},{"lineNumber":27,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":28,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":29,"author":{"gitId":"domlimm"},"content":"    @Override"},{"lineNumber":30,"author":{"gitId":"domlimm"},"content":"    protected String getActionUri() {"},{"lineNumber":31,"author":{"gitId":"domlimm"},"content":"        return Const.ResourceURIs.ACCOUNT_RESET;"},{"lineNumber":32,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":33,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":34,"author":{"gitId":"domlimm"},"content":"    @Override"},{"lineNumber":35,"author":{"gitId":"domlimm"},"content":"    protected String getRequestMethod() {"},{"lineNumber":36,"author":{"gitId":"domlimm"},"content":"        return PUT;"},{"lineNumber":37,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":38,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":39,"author":{"gitId":"domlimm"},"content":"    @Test"},{"lineNumber":40,"author":{"gitId":"domlimm"},"content":"    @Override"},{"lineNumber":41,"author":{"gitId":"domlimm"},"content":"    protected void testExecute() {"},{"lineNumber":42,"author":{"gitId":"domlimm"},"content":"        Instructor instructor \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":43,"author":{"gitId":"domlimm"},"content":"        Student student \u003d typicalBundle.students.get(\"student1InCourse1\");"},{"lineNumber":44,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":45,"author":{"gitId":"domlimm"},"content":"        loginAsAdmin();"},{"lineNumber":46,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":47,"author":{"gitId":"domlimm"},"content":"        ______TS(\"Typical Success Case with Student Email param given and Student exists\");"},{"lineNumber":48,"author":{"gitId":"domlimm"},"content":"        String[] params \u003d new String[] {"},{"lineNumber":49,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.STUDENT_EMAIL, student.getEmail(),"},{"lineNumber":50,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.COURSE_ID, student.getCourseId(),"},{"lineNumber":51,"author":{"gitId":"domlimm"},"content":"        };"},{"lineNumber":52,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":53,"author":{"gitId":"domlimm"},"content":"        ResetAccountAction resetAccountAction \u003d getAction(params);"},{"lineNumber":54,"author":{"gitId":"domlimm"},"content":"        JsonResult actionOutput \u003d getJsonResult(resetAccountAction);"},{"lineNumber":55,"author":{"gitId":"domlimm"},"content":"        MessageOutput response \u003d (MessageOutput) actionOutput.getOutput();"},{"lineNumber":56,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":57,"author":{"gitId":"domlimm"},"content":"        assertEquals(response.getMessage(), \"Account is successfully reset.\");"},{"lineNumber":58,"author":{"gitId":"domlimm"},"content":"        assertNotNull(student);"},{"lineNumber":59,"author":{"gitId":"domlimm"},"content":"        assertNull(student.getAccount());"},{"lineNumber":60,"author":{"gitId":"domlimm"},"content":"        assertNull(student.getGoogleId());"},{"lineNumber":61,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":62,"author":{"gitId":"domlimm"},"content":"        ______TS(\"Student Email param given but Student is non existent\");"},{"lineNumber":63,"author":{"gitId":"domlimm"},"content":"        String invalidEmail \u003d \"does-not-exist-email@teammates.tmt\";"},{"lineNumber":64,"author":{"gitId":"domlimm"},"content":"        String[] invalidParams \u003d new String[] {"},{"lineNumber":65,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.STUDENT_EMAIL, invalidEmail,"},{"lineNumber":66,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.COURSE_ID, student.getCourseId(),"},{"lineNumber":67,"author":{"gitId":"domlimm"},"content":"        };"},{"lineNumber":68,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":69,"author":{"gitId":"domlimm"},"content":"        EntityNotFoundException enfe \u003d verifyEntityNotFound(invalidParams);"},{"lineNumber":70,"author":{"gitId":"domlimm"},"content":"        assertEquals(\"Student does not exist.\", enfe.getMessage());"},{"lineNumber":71,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":72,"author":{"gitId":"domlimm"},"content":"        ______TS(\"Typical Success Case with Instructor Email param given and Instructor exists\");"},{"lineNumber":73,"author":{"gitId":"domlimm"},"content":"        params \u003d new String[] {"},{"lineNumber":74,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.INSTRUCTOR_EMAIL, instructor.getEmail(),"},{"lineNumber":75,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.COURSE_ID, instructor.getCourseId(),"},{"lineNumber":76,"author":{"gitId":"domlimm"},"content":"        };"},{"lineNumber":77,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":78,"author":{"gitId":"domlimm"},"content":"        resetAccountAction \u003d getAction(params);"},{"lineNumber":79,"author":{"gitId":"domlimm"},"content":"        actionOutput \u003d getJsonResult(resetAccountAction);"},{"lineNumber":80,"author":{"gitId":"domlimm"},"content":"        response \u003d (MessageOutput) actionOutput.getOutput();"},{"lineNumber":81,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":82,"author":{"gitId":"domlimm"},"content":"        assertEquals(response.getMessage(), \"Account is successfully reset.\");"},{"lineNumber":83,"author":{"gitId":"domlimm"},"content":"        assertNotNull(instructor);"},{"lineNumber":84,"author":{"gitId":"domlimm"},"content":"        assertNull(instructor.getAccount());"},{"lineNumber":85,"author":{"gitId":"domlimm"},"content":"        assertNull(instructor.getGoogleId());"},{"lineNumber":86,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":87,"author":{"gitId":"domlimm"},"content":"        ______TS(\"Instructor Email param given but Instructor is non existent\");"},{"lineNumber":88,"author":{"gitId":"domlimm"},"content":"        invalidParams \u003d new String[] {"},{"lineNumber":89,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.INSTRUCTOR_EMAIL, invalidEmail,"},{"lineNumber":90,"author":{"gitId":"domlimm"},"content":"                Const.ParamsNames.COURSE_ID, instructor.getCourseId(),"},{"lineNumber":91,"author":{"gitId":"domlimm"},"content":"        };"},{"lineNumber":92,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":93,"author":{"gitId":"domlimm"},"content":"        enfe \u003d verifyEntityNotFound(invalidParams);"},{"lineNumber":94,"author":{"gitId":"domlimm"},"content":"        assertEquals(\"Instructor does not exist.\", enfe.getMessage());"},{"lineNumber":95,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":96,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":97,"author":{"gitId":"domlimm"},"content":"    @Test"},{"lineNumber":98,"author":{"gitId":"domlimm"},"content":"    @Override"},{"lineNumber":99,"author":{"gitId":"domlimm"},"content":"    protected void testAccessControl() throws Exception {"},{"lineNumber":100,"author":{"gitId":"domlimm"},"content":"        Course course \u003d typicalBundle.courses.get(\"course1\");"},{"lineNumber":101,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":102,"author":{"gitId":"domlimm"},"content":"        verifyOnlyAdminCanAccess(course);"},{"lineNumber":103,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":104,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":105,"author":{"gitId":"domlimm"},"content":"}"}],"authorContributionMap":{"domlimm":105}},{"path":"src/main/java/teammates/common/datatransfer/InstructorPermissionRole.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"domlimm"},"content":"package teammates.common.datatransfer;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":4,"author":{"gitId":"-"},"content":""},{"lineNumber":5,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":6,"author":{"gitId":"-"},"content":" * Instructor Permission Role."},{"lineNumber":7,"author":{"gitId":"-"},"content":" *"},{"lineNumber":8,"author":{"gitId":"-"},"content":" * {@link Const.InstructorPermissionRoleNames}"},{"lineNumber":9,"author":{"gitId":"-"},"content":" */"},{"lineNumber":10,"author":{"gitId":"-"},"content":"public enum InstructorPermissionRole {"},{"lineNumber":11,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":12,"author":{"gitId":"-"},"content":"     * Co-owner."},{"lineNumber":13,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":14,"author":{"gitId":"-"},"content":"    INSTRUCTOR_PERMISSION_ROLE_COOWNER(Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_COOWNER),"},{"lineNumber":15,"author":{"gitId":"-"},"content":""},{"lineNumber":16,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":17,"author":{"gitId":"-"},"content":"     * Manager."},{"lineNumber":18,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":19,"author":{"gitId":"-"},"content":"    INSTRUCTOR_PERMISSION_ROLE_MANAGER(Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_MANAGER),"},{"lineNumber":20,"author":{"gitId":"-"},"content":""},{"lineNumber":21,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":22,"author":{"gitId":"-"},"content":"     * Observer."},{"lineNumber":23,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":24,"author":{"gitId":"-"},"content":"    INSTRUCTOR_PERMISSION_ROLE_OBSERVER(Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_OBSERVER),"},{"lineNumber":25,"author":{"gitId":"-"},"content":""},{"lineNumber":26,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":27,"author":{"gitId":"-"},"content":"     * Tutor."},{"lineNumber":28,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":29,"author":{"gitId":"-"},"content":"    INSTRUCTOR_PERMISSION_ROLE_TUTOR(Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_TUTOR),"},{"lineNumber":30,"author":{"gitId":"-"},"content":""},{"lineNumber":31,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":32,"author":{"gitId":"-"},"content":"     * Custom."},{"lineNumber":33,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":34,"author":{"gitId":"-"},"content":"    INSTRUCTOR_PERMISSION_ROLE_CUSTOM(Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_CUSTOM);"},{"lineNumber":35,"author":{"gitId":"-"},"content":""},{"lineNumber":36,"author":{"gitId":"-"},"content":"    private String roleName;"},{"lineNumber":37,"author":{"gitId":"-"},"content":""},{"lineNumber":38,"author":{"gitId":"-"},"content":"    InstructorPermissionRole(String roleName) {"},{"lineNumber":39,"author":{"gitId":"-"},"content":"        this.roleName \u003d roleName;"},{"lineNumber":40,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":41,"author":{"gitId":"-"},"content":""},{"lineNumber":42,"author":{"gitId":"-"},"content":"    public String getRoleName() {"},{"lineNumber":43,"author":{"gitId":"-"},"content":"        return roleName;"},{"lineNumber":44,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":45,"author":{"gitId":"-"},"content":""},{"lineNumber":46,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":47,"author":{"gitId":"-"},"content":"     * Get enum from string."},{"lineNumber":48,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":49,"author":{"gitId":"-"},"content":"    public static InstructorPermissionRole getEnum(String role) {"},{"lineNumber":50,"author":{"gitId":"-"},"content":"        switch (role) {"},{"lineNumber":51,"author":{"gitId":"-"},"content":"        case Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_COOWNER:"},{"lineNumber":52,"author":{"gitId":"-"},"content":"            return INSTRUCTOR_PERMISSION_ROLE_COOWNER;"},{"lineNumber":53,"author":{"gitId":"-"},"content":"        case Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_MANAGER:"},{"lineNumber":54,"author":{"gitId":"-"},"content":"            return INSTRUCTOR_PERMISSION_ROLE_MANAGER;"},{"lineNumber":55,"author":{"gitId":"-"},"content":"        case Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_OBSERVER:"},{"lineNumber":56,"author":{"gitId":"-"},"content":"            return INSTRUCTOR_PERMISSION_ROLE_OBSERVER;"},{"lineNumber":57,"author":{"gitId":"-"},"content":"        case Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_TUTOR:"},{"lineNumber":58,"author":{"gitId":"-"},"content":"            return INSTRUCTOR_PERMISSION_ROLE_TUTOR;"},{"lineNumber":59,"author":{"gitId":"-"},"content":"        case Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_CUSTOM:"},{"lineNumber":60,"author":{"gitId":"-"},"content":"            return INSTRUCTOR_PERMISSION_ROLE_CUSTOM;"},{"lineNumber":61,"author":{"gitId":"-"},"content":"        default:"},{"lineNumber":62,"author":{"gitId":"-"},"content":"            return INSTRUCTOR_PERMISSION_ROLE_CUSTOM;"},{"lineNumber":63,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":64,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":65,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"domlimm":1,"-":64}},{"path":"src/main/java/teammates/common/datatransfer/questions/FeedbackConstantSumQuestionDetails.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.common.datatransfer.questions;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.util.ArrayList;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.util.HashSet;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import java.util.Objects;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import java.util.Set;"},{"lineNumber":8,"author":{"gitId":"-"},"content":""},{"lineNumber":9,"author":{"gitId":"-"},"content":"import javax.annotation.Nullable;"},{"lineNumber":10,"author":{"gitId":"-"},"content":""},{"lineNumber":11,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import teammates.common.util.FieldValidator;"},{"lineNumber":13,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.FeedbackQuestion;"},{"lineNumber":14,"author":{"gitId":"-"},"content":""},{"lineNumber":15,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":16,"author":{"gitId":"-"},"content":" * Contains specific structure and processing logic for constant sum feedback questions."},{"lineNumber":17,"author":{"gitId":"-"},"content":" */"},{"lineNumber":18,"author":{"gitId":"-"},"content":"public class FeedbackConstantSumQuestionDetails extends FeedbackQuestionDetails {"},{"lineNumber":19,"author":{"gitId":"-"},"content":""},{"lineNumber":20,"author":{"gitId":"-"},"content":"    static final String QUESTION_TYPE_NAME_OPTION \u003d \"Distribute points (among options) question\";"},{"lineNumber":21,"author":{"gitId":"-"},"content":"    static final String QUESTION_TYPE_NAME_RECIPIENT \u003d \"Distribute points (among recipients) question\";"},{"lineNumber":22,"author":{"gitId":"-"},"content":"    static final int CONST_SUM_MIN_NUM_OF_OPTIONS \u003d 2;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"    static final int CONST_SUM_MIN_NUM_OF_POINTS \u003d 1;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"    static final String CONST_SUM_ERROR_NOT_ENOUGH_OPTIONS \u003d"},{"lineNumber":25,"author":{"gitId":"-"},"content":"            \"Too little options for \" + QUESTION_TYPE_NAME_OPTION + \". Minimum number of options is: \";"},{"lineNumber":26,"author":{"gitId":"-"},"content":"    static final String CONST_SUM_ERROR_DUPLICATE_OPTIONS \u003d \"Duplicate options are not allowed.\";"},{"lineNumber":27,"author":{"gitId":"-"},"content":"    static final String CONST_SUM_ERROR_NOT_ENOUGH_POINTS \u003d"},{"lineNumber":28,"author":{"gitId":"-"},"content":"            \"Too little points for \" + QUESTION_TYPE_NAME_RECIPIENT + \". Minimum number of points is: \";"},{"lineNumber":29,"author":{"gitId":"-"},"content":"    static final String CONST_SUM_ERROR_MISMATCH \u003d"},{"lineNumber":30,"author":{"gitId":"-"},"content":"            \"Please distribute all the points for distribution questions. \""},{"lineNumber":31,"author":{"gitId":"-"},"content":"                    + \"To skip a distribution question, leave the boxes blank.\";"},{"lineNumber":32,"author":{"gitId":"-"},"content":"    static final String CONST_SUM_ERROR_NEGATIVE \u003d \"Points cannot be negative.\";"},{"lineNumber":33,"author":{"gitId":"-"},"content":"    static final String CONST_SUM_ERROR_UNIQUE \u003d \"Every option must be given a different number of points.\";"},{"lineNumber":34,"author":{"gitId":"-"},"content":"    static final String CONST_SUM_ERROR_SOME_UNIQUE \u003d"},{"lineNumber":35,"author":{"gitId":"-"},"content":"            \"At least some options must be given a different number of points.\";"},{"lineNumber":36,"author":{"gitId":"-"},"content":"    static final String CONST_SUM_ANSWER_OPTIONS_NOT_MATCH \u003d \"The answers are inconsistent with the options\";"},{"lineNumber":37,"author":{"gitId":"-"},"content":"    static final String CONST_SUM_ANSWER_RECIPIENT_NOT_MATCH \u003d \"The answer is inconsistent with the recipient\";"},{"lineNumber":38,"author":{"gitId":"-"},"content":"    static final String CONST_SUM_TEMPLATE_NEGATIVE \u003d \"%s cannot be negative.\";"},{"lineNumber":39,"author":{"gitId":"-"},"content":"    static final String CONST_SUM_TEMPLATE_EXCEEDS_POINTS \u003d"},{"lineNumber":40,"author":{"gitId":"-"},"content":"            \"%s cannot be greater than the total points distributed: %s.\";"},{"lineNumber":41,"author":{"gitId":"-"},"content":"    static final String CONST_SUM_ERROR_MAX_POINT_BELOW_LOWER_BOUND \u003d"},{"lineNumber":42,"author":{"gitId":"-"},"content":"            \"To ensure total distribution of points, the maximum number of points cannot be smaller than: \";"},{"lineNumber":43,"author":{"gitId":"-"},"content":"    static final String CONST_SUM_ERROR_MIN_POINT_ABOVE_UPPER_BOUND \u003d"},{"lineNumber":44,"author":{"gitId":"-"},"content":"            \"To ensure total distribution of points, the minimum number of points cannot be larger than: \";"},{"lineNumber":45,"author":{"gitId":"-"},"content":"    static final String CONST_SUM_ERROR_MIN_GREATER_THAN_MAX \u003d"},{"lineNumber":46,"author":{"gitId":"-"},"content":"            \"Minimum number of points cannot be greater than the maximum number of points\";"},{"lineNumber":47,"author":{"gitId":"-"},"content":"    static final String CONST_SUM_ANSWER_BELOW_MIN \u003d \"An answer cannot be smaller than the minimum number of points: \";"},{"lineNumber":48,"author":{"gitId":"-"},"content":"    static final String CONST_SUM_ANSWER_ABOVE_MAX \u003d \"An answer cannot be greater than the maximum number of points: \";"},{"lineNumber":49,"author":{"gitId":"-"},"content":"    static final String MAX_POINT_STRING \u003d \"Maximum number of points\";"},{"lineNumber":50,"author":{"gitId":"-"},"content":"    static final String MIN_POINT_STRING \u003d \"Minimum number of points\";"},{"lineNumber":51,"author":{"gitId":"-"},"content":""},{"lineNumber":52,"author":{"gitId":"-"},"content":"    private List\u003cString\u003e constSumOptions;"},{"lineNumber":53,"author":{"gitId":"-"},"content":"    private boolean distributeToRecipients;"},{"lineNumber":54,"author":{"gitId":"-"},"content":"    private boolean pointsPerOption;"},{"lineNumber":55,"author":{"gitId":"-"},"content":"    private boolean forceUnevenDistribution;"},{"lineNumber":56,"author":{"gitId":"-"},"content":"    private String distributePointsFor;"},{"lineNumber":57,"author":{"gitId":"-"},"content":"    private int points;"},{"lineNumber":58,"author":{"gitId":"-"},"content":"    @Nullable"},{"lineNumber":59,"author":{"gitId":"-"},"content":"    private Integer minPoint;"},{"lineNumber":60,"author":{"gitId":"-"},"content":"    @Nullable"},{"lineNumber":61,"author":{"gitId":"-"},"content":"    private Integer maxPoint;"},{"lineNumber":62,"author":{"gitId":"-"},"content":""},{"lineNumber":63,"author":{"gitId":"-"},"content":"    public FeedbackConstantSumQuestionDetails() {"},{"lineNumber":64,"author":{"gitId":"-"},"content":"        this(null);"},{"lineNumber":65,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":66,"author":{"gitId":"-"},"content":""},{"lineNumber":67,"author":{"gitId":"-"},"content":"    public FeedbackConstantSumQuestionDetails(String questionText) {"},{"lineNumber":68,"author":{"gitId":"-"},"content":"        super(FeedbackQuestionType.CONSTSUM, questionText);"},{"lineNumber":69,"author":{"gitId":"-"},"content":"        this.constSumOptions \u003d new ArrayList\u003c\u003e();"},{"lineNumber":70,"author":{"gitId":"-"},"content":"        this.distributeToRecipients \u003d false;"},{"lineNumber":71,"author":{"gitId":"-"},"content":"        this.pointsPerOption \u003d false;"},{"lineNumber":72,"author":{"gitId":"-"},"content":"        this.points \u003d 100;"},{"lineNumber":73,"author":{"gitId":"-"},"content":"        this.forceUnevenDistribution \u003d false;"},{"lineNumber":74,"author":{"gitId":"-"},"content":"        this.distributePointsFor \u003d FeedbackConstantSumDistributePointsType.NONE.getDisplayedOption();"},{"lineNumber":75,"author":{"gitId":"-"},"content":"        this.maxPoint \u003d null;"},{"lineNumber":76,"author":{"gitId":"-"},"content":"        this.minPoint \u003d null;"},{"lineNumber":77,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":78,"author":{"gitId":"-"},"content":""},{"lineNumber":79,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":80,"author":{"gitId":"-"},"content":"    public boolean shouldChangesRequireResponseDeletion("},{"lineNumber":81,"author":{"gitId":"-"},"content":"            FeedbackQuestionDetails newDetails) {"},{"lineNumber":82,"author":{"gitId":"-"},"content":"        FeedbackConstantSumQuestionDetails newConstSumDetails \u003d (FeedbackConstantSumQuestionDetails) newDetails;"},{"lineNumber":83,"author":{"gitId":"-"},"content":""},{"lineNumber":84,"author":{"gitId":"-"},"content":"        if (!this.constSumOptions.containsAll(newConstSumDetails.constSumOptions)"},{"lineNumber":85,"author":{"gitId":"-"},"content":"                || !newConstSumDetails.constSumOptions.containsAll(this.constSumOptions)) {"},{"lineNumber":86,"author":{"gitId":"-"},"content":"            return true;"},{"lineNumber":87,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":88,"author":{"gitId":"-"},"content":""},{"lineNumber":89,"author":{"gitId":"-"},"content":"        if (this.distributeToRecipients !\u003d newConstSumDetails.distributeToRecipients) {"},{"lineNumber":90,"author":{"gitId":"-"},"content":"            return true;"},{"lineNumber":91,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":92,"author":{"gitId":"-"},"content":""},{"lineNumber":93,"author":{"gitId":"-"},"content":"        if (this.points !\u003d newConstSumDetails.points) {"},{"lineNumber":94,"author":{"gitId":"-"},"content":"            return true;"},{"lineNumber":95,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":96,"author":{"gitId":"-"},"content":""},{"lineNumber":97,"author":{"gitId":"-"},"content":"        if (this.pointsPerOption !\u003d newConstSumDetails.pointsPerOption) {"},{"lineNumber":98,"author":{"gitId":"-"},"content":"            return true;"},{"lineNumber":99,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":100,"author":{"gitId":"-"},"content":""},{"lineNumber":101,"author":{"gitId":"-"},"content":"        if (this.forceUnevenDistribution !\u003d newConstSumDetails.forceUnevenDistribution) {"},{"lineNumber":102,"author":{"gitId":"-"},"content":"            return true;"},{"lineNumber":103,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":104,"author":{"gitId":"-"},"content":""},{"lineNumber":105,"author":{"gitId":"-"},"content":"        if (!Objects.equals(this.maxPoint, newConstSumDetails.maxPoint)) {"},{"lineNumber":106,"author":{"gitId":"-"},"content":"            return true;"},{"lineNumber":107,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":108,"author":{"gitId":"-"},"content":""},{"lineNumber":109,"author":{"gitId":"-"},"content":"        if (!Objects.equals(this.minPoint, newConstSumDetails.minPoint)) {"},{"lineNumber":110,"author":{"gitId":"-"},"content":"            return true;"},{"lineNumber":111,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":112,"author":{"gitId":"-"},"content":""},{"lineNumber":113,"author":{"gitId":"-"},"content":"        return !this.distributePointsFor.equals(newConstSumDetails.distributePointsFor);"},{"lineNumber":114,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":115,"author":{"gitId":"-"},"content":""},{"lineNumber":116,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":117,"author":{"gitId":"-"},"content":"    public List\u003cString\u003e validateQuestionDetails() {"},{"lineNumber":118,"author":{"gitId":"-"},"content":"        List\u003cString\u003e errors \u003d new ArrayList\u003c\u003e();"},{"lineNumber":119,"author":{"gitId":"-"},"content":"        if (!distributeToRecipients \u0026\u0026 constSumOptions.size() \u003c CONST_SUM_MIN_NUM_OF_OPTIONS) {"},{"lineNumber":120,"author":{"gitId":"-"},"content":"            errors.add(CONST_SUM_ERROR_NOT_ENOUGH_OPTIONS"},{"lineNumber":121,"author":{"gitId":"-"},"content":"                       + CONST_SUM_MIN_NUM_OF_OPTIONS + \".\");"},{"lineNumber":122,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":123,"author":{"gitId":"-"},"content":""},{"lineNumber":124,"author":{"gitId":"-"},"content":"        if (points \u003c CONST_SUM_MIN_NUM_OF_POINTS) {"},{"lineNumber":125,"author":{"gitId":"-"},"content":"            errors.add(CONST_SUM_ERROR_NOT_ENOUGH_POINTS"},{"lineNumber":126,"author":{"gitId":"-"},"content":"                       + CONST_SUM_MIN_NUM_OF_POINTS + \".\");"},{"lineNumber":127,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":128,"author":{"gitId":"-"},"content":""},{"lineNumber":129,"author":{"gitId":"-"},"content":"        if (!FieldValidator.areElementsUnique(constSumOptions)) {"},{"lineNumber":130,"author":{"gitId":"-"},"content":"            errors.add(CONST_SUM_ERROR_DUPLICATE_OPTIONS);"},{"lineNumber":131,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":132,"author":{"gitId":"-"},"content":""},{"lineNumber":133,"author":{"gitId":"-"},"content":"        if (distributeToRecipients) {"},{"lineNumber":134,"author":{"gitId":"-"},"content":"            return errors;"},{"lineNumber":135,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":136,"author":{"gitId":"-"},"content":""},{"lineNumber":137,"author":{"gitId":"-"},"content":"        // the validations below are only for constSumOptions"},{"lineNumber":138,"author":{"gitId":"-"},"content":"        int totalPoints \u003d pointsPerOption ? points * constSumOptions.size() : points;"},{"lineNumber":139,"author":{"gitId":"-"},"content":"        double evenPointDistribution \u003d ((double) totalPoints) / ((double) constSumOptions.size());"},{"lineNumber":140,"author":{"gitId":"-"},"content":""},{"lineNumber":141,"author":{"gitId":"-"},"content":"        if (minPoint !\u003d null) {"},{"lineNumber":142,"author":{"gitId":"-"},"content":"            commonBoundaryValidation(errors, minPoint, totalPoints, MIN_POINT_STRING);"},{"lineNumber":143,"author":{"gitId":"-"},"content":""},{"lineNumber":144,"author":{"gitId":"-"},"content":"            // calculates the upper bound for minPoint to satisfy the total distribution of points among options"},{"lineNumber":145,"author":{"gitId":"-"},"content":"            int upperBound \u003d (int) Math.floor(evenPointDistribution);"},{"lineNumber":146,"author":{"gitId":"-"},"content":"            if (minPoint \u003e upperBound) {"},{"lineNumber":147,"author":{"gitId":"-"},"content":"                errors.add(CONST_SUM_ERROR_MIN_POINT_ABOVE_UPPER_BOUND + upperBound);"},{"lineNumber":148,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":149,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":150,"author":{"gitId":"-"},"content":""},{"lineNumber":151,"author":{"gitId":"-"},"content":"        if (maxPoint !\u003d null) {"},{"lineNumber":152,"author":{"gitId":"-"},"content":"            commonBoundaryValidation(errors, maxPoint, totalPoints, MAX_POINT_STRING);"},{"lineNumber":153,"author":{"gitId":"-"},"content":""},{"lineNumber":154,"author":{"gitId":"-"},"content":"            // calculates the lower bound for maxPoint to satisfy the total distribution of points among options"},{"lineNumber":155,"author":{"gitId":"-"},"content":"            int lowerBound \u003d (int) Math.ceil(evenPointDistribution);"},{"lineNumber":156,"author":{"gitId":"-"},"content":"            if (maxPoint \u003c lowerBound) {"},{"lineNumber":157,"author":{"gitId":"-"},"content":"                errors.add(CONST_SUM_ERROR_MAX_POINT_BELOW_LOWER_BOUND + lowerBound);"},{"lineNumber":158,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":159,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":160,"author":{"gitId":"-"},"content":""},{"lineNumber":161,"author":{"gitId":"-"},"content":"        if (maxPoint !\u003d null \u0026\u0026 minPoint !\u003d null \u0026\u0026 minPoint \u003e maxPoint) {"},{"lineNumber":162,"author":{"gitId":"-"},"content":"            errors.add(CONST_SUM_ERROR_MIN_GREATER_THAN_MAX);"},{"lineNumber":163,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":164,"author":{"gitId":"-"},"content":""},{"lineNumber":165,"author":{"gitId":"-"},"content":"        return errors;"},{"lineNumber":166,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":167,"author":{"gitId":"-"},"content":""},{"lineNumber":168,"author":{"gitId":"-"},"content":"    private void commonBoundaryValidation(List\u003cString\u003e errors, int points, int totalPoints, String boundaryType) {"},{"lineNumber":169,"author":{"gitId":"-"},"content":"        if (points \u003c 0) {"},{"lineNumber":170,"author":{"gitId":"-"},"content":"            errors.add(String.format(CONST_SUM_TEMPLATE_NEGATIVE, boundaryType));"},{"lineNumber":171,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":172,"author":{"gitId":"-"},"content":""},{"lineNumber":173,"author":{"gitId":"-"},"content":"        if (points \u003e totalPoints) {"},{"lineNumber":174,"author":{"gitId":"-"},"content":"            errors.add(String.format(CONST_SUM_TEMPLATE_EXCEEDS_POINTS, boundaryType, totalPoints));"},{"lineNumber":175,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":176,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":177,"author":{"gitId":"-"},"content":""},{"lineNumber":178,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":179,"author":{"gitId":"-"},"content":"    public List\u003cString\u003e validateResponsesDetails(List\u003cFeedbackResponseDetails\u003e responses, int numRecipients) {"},{"lineNumber":180,"author":{"gitId":"-"},"content":"        List\u003cString\u003e errors;"},{"lineNumber":181,"author":{"gitId":"-"},"content":""},{"lineNumber":182,"author":{"gitId":"-"},"content":"        int numOptions \u003d distributeToRecipients ? numRecipients : constSumOptions.size();"},{"lineNumber":183,"author":{"gitId":"-"},"content":"        int totalPoints \u003d pointsPerOption ? points * numOptions : points;"},{"lineNumber":184,"author":{"gitId":"-"},"content":""},{"lineNumber":185,"author":{"gitId":"-"},"content":"        if (distributeToRecipients) {"},{"lineNumber":186,"author":{"gitId":"-"},"content":"            errors \u003d getErrorsForConstSumRecipients(responses, totalPoints);"},{"lineNumber":187,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":188,"author":{"gitId":"-"},"content":"            errors \u003d getErrorsForConstSumOptions(responses, totalPoints);"},{"lineNumber":189,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":190,"author":{"gitId":"-"},"content":""},{"lineNumber":191,"author":{"gitId":"-"},"content":"        return errors;"},{"lineNumber":192,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":193,"author":{"gitId":"-"},"content":""},{"lineNumber":194,"author":{"gitId":"-"},"content":"    private List\u003cString\u003e getErrorsForConstSumOptions(List\u003cFeedbackResponseDetails\u003e responses, int totalPoints) {"},{"lineNumber":195,"author":{"gitId":"-"},"content":"        for (FeedbackResponseDetails response : responses) {"},{"lineNumber":196,"author":{"gitId":"-"},"content":"            List\u003cString\u003e errors \u003d new ArrayList\u003c\u003e();"},{"lineNumber":197,"author":{"gitId":"-"},"content":""},{"lineNumber":198,"author":{"gitId":"-"},"content":"            FeedbackConstantSumResponseDetails details \u003d (FeedbackConstantSumResponseDetails) response;"},{"lineNumber":199,"author":{"gitId":"-"},"content":""},{"lineNumber":200,"author":{"gitId":"-"},"content":"            if (details.getAnswers().size() !\u003d constSumOptions.size()) {"},{"lineNumber":201,"author":{"gitId":"-"},"content":"                errors.add(CONST_SUM_ANSWER_OPTIONS_NOT_MATCH);"},{"lineNumber":202,"author":{"gitId":"-"},"content":"                return errors;"},{"lineNumber":203,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":204,"author":{"gitId":"-"},"content":""},{"lineNumber":205,"author":{"gitId":"-"},"content":"            errors \u003d getMinMaxPointErrors(details.getAnswers());"},{"lineNumber":206,"author":{"gitId":"-"},"content":"            if (!errors.isEmpty()) {"},{"lineNumber":207,"author":{"gitId":"-"},"content":"                return errors;"},{"lineNumber":208,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":209,"author":{"gitId":"-"},"content":""},{"lineNumber":210,"author":{"gitId":"-"},"content":"            List\u003cInteger\u003e givenPoints \u003d details.getAnswers();"},{"lineNumber":211,"author":{"gitId":"-"},"content":"            errors \u003d getErrors(givenPoints, totalPoints);"},{"lineNumber":212,"author":{"gitId":"-"},"content":""},{"lineNumber":213,"author":{"gitId":"-"},"content":"            // Return an error if any response is erroneous"},{"lineNumber":214,"author":{"gitId":"-"},"content":"            if (!errors.isEmpty()) {"},{"lineNumber":215,"author":{"gitId":"-"},"content":"                return errors;"},{"lineNumber":216,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":217,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":218,"author":{"gitId":"-"},"content":"        return new ArrayList\u003c\u003e();"},{"lineNumber":219,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":220,"author":{"gitId":"-"},"content":""},{"lineNumber":221,"author":{"gitId":"-"},"content":"    private List\u003cString\u003e getErrorsForConstSumRecipients(List\u003cFeedbackResponseDetails\u003e responses, int totalPoints) {"},{"lineNumber":222,"author":{"gitId":"-"},"content":"        List\u003cInteger\u003e givenPoints \u003d new ArrayList\u003c\u003e();"},{"lineNumber":223,"author":{"gitId":"-"},"content":""},{"lineNumber":224,"author":{"gitId":"-"},"content":"        for (FeedbackResponseDetails response : responses) {"},{"lineNumber":225,"author":{"gitId":"-"},"content":"            FeedbackConstantSumResponseDetails details \u003d (FeedbackConstantSumResponseDetails) response;"},{"lineNumber":226,"author":{"gitId":"-"},"content":""},{"lineNumber":227,"author":{"gitId":"-"},"content":"            List\u003cString\u003e errors \u003d new ArrayList\u003c\u003e();"},{"lineNumber":228,"author":{"gitId":"-"},"content":""},{"lineNumber":229,"author":{"gitId":"-"},"content":"            if (details.getAnswers().size() !\u003d 1) {"},{"lineNumber":230,"author":{"gitId":"-"},"content":"                // Distribute to recipient must have array size one"},{"lineNumber":231,"author":{"gitId":"-"},"content":"                errors.add(CONST_SUM_ANSWER_RECIPIENT_NOT_MATCH);"},{"lineNumber":232,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":233,"author":{"gitId":"-"},"content":""},{"lineNumber":234,"author":{"gitId":"-"},"content":"            // Return an error if any response is erroneous"},{"lineNumber":235,"author":{"gitId":"-"},"content":"            if (!errors.isEmpty()) {"},{"lineNumber":236,"author":{"gitId":"-"},"content":"                return errors;"},{"lineNumber":237,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":238,"author":{"gitId":"-"},"content":""},{"lineNumber":239,"author":{"gitId":"-"},"content":"            int givenPoint \u003d details.getAnswers().get(0);"},{"lineNumber":240,"author":{"gitId":"-"},"content":"            givenPoints.add(givenPoint);"},{"lineNumber":241,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":242,"author":{"gitId":"-"},"content":""},{"lineNumber":243,"author":{"gitId":"-"},"content":"        return getErrors(givenPoints, totalPoints);"},{"lineNumber":244,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":245,"author":{"gitId":"-"},"content":""},{"lineNumber":246,"author":{"gitId":"-"},"content":"    private List\u003cString\u003e getMinMaxPointErrors(List\u003cInteger\u003e answers) {"},{"lineNumber":247,"author":{"gitId":"-"},"content":"        List\u003cString\u003e errors \u003d new ArrayList\u003c\u003e();"},{"lineNumber":248,"author":{"gitId":"-"},"content":""},{"lineNumber":249,"author":{"gitId":"-"},"content":"        for (int answer : answers) {"},{"lineNumber":250,"author":{"gitId":"-"},"content":"            if (minPoint !\u003d null \u0026\u0026 answer \u003c minPoint) {"},{"lineNumber":251,"author":{"gitId":"-"},"content":"                errors.add(CONST_SUM_ANSWER_BELOW_MIN + minPoint);"},{"lineNumber":252,"author":{"gitId":"-"},"content":""},{"lineNumber":253,"author":{"gitId":"-"},"content":"            } else if (maxPoint !\u003d null \u0026\u0026 answer \u003e maxPoint) {"},{"lineNumber":254,"author":{"gitId":"-"},"content":"                errors.add(CONST_SUM_ANSWER_ABOVE_MAX + maxPoint);"},{"lineNumber":255,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":256,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":257,"author":{"gitId":"-"},"content":"        return errors;"},{"lineNumber":258,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":259,"author":{"gitId":"-"},"content":""},{"lineNumber":260,"author":{"gitId":"-"},"content":"    private List\u003cString\u003e getErrors(List\u003cInteger\u003e givenPoints, int totalPoints) {"},{"lineNumber":261,"author":{"gitId":"-"},"content":"        List\u003cString\u003e errors \u003d new ArrayList\u003c\u003e();"},{"lineNumber":262,"author":{"gitId":"-"},"content":""},{"lineNumber":263,"author":{"gitId":"-"},"content":"        // Check that all points are \u003e\u003d 0"},{"lineNumber":264,"author":{"gitId":"-"},"content":"        int sum \u003d 0;"},{"lineNumber":265,"author":{"gitId":"-"},"content":"        for (int i : givenPoints) {"},{"lineNumber":266,"author":{"gitId":"-"},"content":"            if (i \u003c 0) {"},{"lineNumber":267,"author":{"gitId":"-"},"content":"                errors.add(CONST_SUM_ERROR_NEGATIVE);"},{"lineNumber":268,"author":{"gitId":"-"},"content":"                return errors;"},{"lineNumber":269,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":270,"author":{"gitId":"-"},"content":""},{"lineNumber":271,"author":{"gitId":"-"},"content":"            sum +\u003d i;"},{"lineNumber":272,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":273,"author":{"gitId":"-"},"content":""},{"lineNumber":274,"author":{"gitId":"-"},"content":"        // Check that points sum up properly"},{"lineNumber":275,"author":{"gitId":"-"},"content":"        if (sum !\u003d totalPoints) {"},{"lineNumber":276,"author":{"gitId":"-"},"content":"            errors.add(CONST_SUM_ERROR_MISMATCH);"},{"lineNumber":277,"author":{"gitId":"-"},"content":"            return errors;"},{"lineNumber":278,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":279,"author":{"gitId":"-"},"content":""},{"lineNumber":280,"author":{"gitId":"-"},"content":"        // Check that points are given unevenly for all/at least some options as per the question settings"},{"lineNumber":281,"author":{"gitId":"-"},"content":"        Set\u003cInteger\u003e answerSet \u003d new HashSet\u003c\u003e();"},{"lineNumber":282,"author":{"gitId":"-"},"content":"        if (distributePointsFor.equals("},{"lineNumber":283,"author":{"gitId":"-"},"content":"                FeedbackConstantSumDistributePointsType.DISTRIBUTE_SOME_UNEVENLY.getDisplayedOption())) {"},{"lineNumber":284,"author":{"gitId":"-"},"content":"            boolean hasDifferentPoints \u003d false;"},{"lineNumber":285,"author":{"gitId":"-"},"content":"            for (int i : givenPoints) {"},{"lineNumber":286,"author":{"gitId":"-"},"content":"                if (!answerSet.isEmpty() \u0026\u0026 !answerSet.contains(i)) {"},{"lineNumber":287,"author":{"gitId":"-"},"content":"                    hasDifferentPoints \u003d true;"},{"lineNumber":288,"author":{"gitId":"-"},"content":"                    break;"},{"lineNumber":289,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":290,"author":{"gitId":"-"},"content":"                answerSet.add(i);"},{"lineNumber":291,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":292,"author":{"gitId":"-"},"content":""},{"lineNumber":293,"author":{"gitId":"-"},"content":"            if (!hasDifferentPoints) {"},{"lineNumber":294,"author":{"gitId":"-"},"content":"                errors.add(CONST_SUM_ERROR_SOME_UNIQUE);"},{"lineNumber":295,"author":{"gitId":"-"},"content":"                return errors;"},{"lineNumber":296,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":297,"author":{"gitId":"-"},"content":"        } else if (forceUnevenDistribution || distributePointsFor.equals("},{"lineNumber":298,"author":{"gitId":"-"},"content":"                FeedbackConstantSumDistributePointsType.DISTRIBUTE_ALL_UNEVENLY.getDisplayedOption())) {"},{"lineNumber":299,"author":{"gitId":"-"},"content":"            for (int i : givenPoints) {"},{"lineNumber":300,"author":{"gitId":"-"},"content":"                if (answerSet.contains(i)) {"},{"lineNumber":301,"author":{"gitId":"-"},"content":"                    errors.add(CONST_SUM_ERROR_UNIQUE);"},{"lineNumber":302,"author":{"gitId":"-"},"content":"                    return errors;"},{"lineNumber":303,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":304,"author":{"gitId":"-"},"content":"                answerSet.add(i);"},{"lineNumber":305,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":306,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":307,"author":{"gitId":"-"},"content":""},{"lineNumber":308,"author":{"gitId":"-"},"content":"        return errors;"},{"lineNumber":309,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":310,"author":{"gitId":"-"},"content":""},{"lineNumber":311,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":312,"author":{"gitId":"-"},"content":"    public boolean isFeedbackParticipantCommentsOnResponsesAllowed() {"},{"lineNumber":313,"author":{"gitId":"-"},"content":"        return false;"},{"lineNumber":314,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":315,"author":{"gitId":"-"},"content":""},{"lineNumber":316,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":317,"author":{"gitId":"-"},"content":"    public String validateGiverRecipientVisibility(FeedbackQuestionAttributes feedbackQuestionAttributes) {"},{"lineNumber":318,"author":{"gitId":"-"},"content":"        return \"\";"},{"lineNumber":319,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":320,"author":{"gitId":"-"},"content":""},{"lineNumber":321,"author":{"gitId":"hhdqirui"},"content":"    @Override"},{"lineNumber":322,"author":{"gitId":"hhdqirui"},"content":"    public String validateGiverRecipientVisibility(FeedbackQuestion feedbackQuestion) {"},{"lineNumber":323,"author":{"gitId":"hhdqirui"},"content":"        return \"\";"},{"lineNumber":324,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":325,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":326,"author":{"gitId":"-"},"content":"    public int getNumOfConstSumOptions() {"},{"lineNumber":327,"author":{"gitId":"-"},"content":"        return constSumOptions.size();"},{"lineNumber":328,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":329,"author":{"gitId":"-"},"content":""},{"lineNumber":330,"author":{"gitId":"-"},"content":"    public List\u003cString\u003e getConstSumOptions() {"},{"lineNumber":331,"author":{"gitId":"-"},"content":"        return constSumOptions;"},{"lineNumber":332,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":333,"author":{"gitId":"-"},"content":""},{"lineNumber":334,"author":{"gitId":"-"},"content":"    public void setConstSumOptions(List\u003cString\u003e constSumOptions) {"},{"lineNumber":335,"author":{"gitId":"-"},"content":"        this.constSumOptions \u003d constSumOptions;"},{"lineNumber":336,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":337,"author":{"gitId":"-"},"content":""},{"lineNumber":338,"author":{"gitId":"-"},"content":"    public boolean isDistributeToRecipients() {"},{"lineNumber":339,"author":{"gitId":"-"},"content":"        return distributeToRecipients;"},{"lineNumber":340,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":341,"author":{"gitId":"-"},"content":""},{"lineNumber":342,"author":{"gitId":"-"},"content":"    public void setDistributeToRecipients(boolean distributeToRecipients) {"},{"lineNumber":343,"author":{"gitId":"-"},"content":"        this.distributeToRecipients \u003d distributeToRecipients;"},{"lineNumber":344,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":345,"author":{"gitId":"-"},"content":""},{"lineNumber":346,"author":{"gitId":"-"},"content":"    public boolean isPointsPerOption() {"},{"lineNumber":347,"author":{"gitId":"-"},"content":"        return pointsPerOption;"},{"lineNumber":348,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":349,"author":{"gitId":"-"},"content":""},{"lineNumber":350,"author":{"gitId":"-"},"content":"    public void setPointsPerOption(boolean pointsPerOption) {"},{"lineNumber":351,"author":{"gitId":"-"},"content":"        this.pointsPerOption \u003d pointsPerOption;"},{"lineNumber":352,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":353,"author":{"gitId":"-"},"content":""},{"lineNumber":354,"author":{"gitId":"-"},"content":"    public boolean isForceUnevenDistribution() {"},{"lineNumber":355,"author":{"gitId":"-"},"content":"        return forceUnevenDistribution;"},{"lineNumber":356,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":357,"author":{"gitId":"-"},"content":""},{"lineNumber":358,"author":{"gitId":"-"},"content":"    public void setForceUnevenDistribution(boolean forceUnevenDistribution) {"},{"lineNumber":359,"author":{"gitId":"-"},"content":"        this.forceUnevenDistribution \u003d forceUnevenDistribution;"},{"lineNumber":360,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":361,"author":{"gitId":"-"},"content":""},{"lineNumber":362,"author":{"gitId":"-"},"content":"    public String getDistributePointsFor() {"},{"lineNumber":363,"author":{"gitId":"-"},"content":"        return distributePointsFor;"},{"lineNumber":364,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":365,"author":{"gitId":"-"},"content":""},{"lineNumber":366,"author":{"gitId":"-"},"content":"    public void setDistributePointsFor(String distributePointsFor) {"},{"lineNumber":367,"author":{"gitId":"-"},"content":"        this.distributePointsFor \u003d distributePointsFor;"},{"lineNumber":368,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":369,"author":{"gitId":"-"},"content":""},{"lineNumber":370,"author":{"gitId":"-"},"content":"    public int getPoints() {"},{"lineNumber":371,"author":{"gitId":"-"},"content":"        return points;"},{"lineNumber":372,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":373,"author":{"gitId":"-"},"content":""},{"lineNumber":374,"author":{"gitId":"-"},"content":"    public void setPoints(int points) {"},{"lineNumber":375,"author":{"gitId":"-"},"content":"        this.points \u003d points;"},{"lineNumber":376,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":377,"author":{"gitId":"-"},"content":""},{"lineNumber":378,"author":{"gitId":"-"},"content":"    public int getMinPoint() {"},{"lineNumber":379,"author":{"gitId":"-"},"content":"        return minPoint;"},{"lineNumber":380,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":381,"author":{"gitId":"-"},"content":""},{"lineNumber":382,"author":{"gitId":"-"},"content":"    public void setMinPoint(int minPoint) {"},{"lineNumber":383,"author":{"gitId":"-"},"content":"        this.minPoint \u003d minPoint;"},{"lineNumber":384,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":385,"author":{"gitId":"-"},"content":""},{"lineNumber":386,"author":{"gitId":"-"},"content":"    public int getMaxPoint() {"},{"lineNumber":387,"author":{"gitId":"-"},"content":"        return maxPoint;"},{"lineNumber":388,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":389,"author":{"gitId":"-"},"content":""},{"lineNumber":390,"author":{"gitId":"-"},"content":"    public void setMaxPoint(int maxPoint) {"},{"lineNumber":391,"author":{"gitId":"-"},"content":"        this.maxPoint \u003d maxPoint;"},{"lineNumber":392,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":393,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"hhdqirui":6,"-":387}},{"path":"src/main/java/teammates/common/datatransfer/questions/FeedbackContributionQuestionDetails.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.common.datatransfer.questions;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.util.ArrayList;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.util.Arrays;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.util.Comparator;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import java.util.HashMap;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import java.util.HashSet;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import java.util.LinkedHashMap;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import java.util.Map;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import java.util.Set;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import java.util.stream.Collectors;"},{"lineNumber":13,"author":{"gitId":"-"},"content":""},{"lineNumber":14,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.FeedbackParticipantType;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.SessionResultsBundle;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.TeamEvalResult;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;"},{"lineNumber":18,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackResponseAttributes;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.StudentAttributes;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":21,"author":{"gitId":"-"},"content":"import teammates.common.util.JsonUtils;"},{"lineNumber":22,"author":{"gitId":"-"},"content":"import teammates.common.util.Logger;"},{"lineNumber":23,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.FeedbackQuestion;"},{"lineNumber":24,"author":{"gitId":"-"},"content":""},{"lineNumber":25,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":26,"author":{"gitId":"-"},"content":" * Contains specific structure and processing logic for contribution feedback questions."},{"lineNumber":27,"author":{"gitId":"-"},"content":" */"},{"lineNumber":28,"author":{"gitId":"-"},"content":"public class FeedbackContributionQuestionDetails extends FeedbackQuestionDetails {"},{"lineNumber":29,"author":{"gitId":"-"},"content":""},{"lineNumber":30,"author":{"gitId":"-"},"content":"    static final String QUESTION_TYPE_NAME \u003d \"Team contribution question\";"},{"lineNumber":31,"author":{"gitId":"-"},"content":"    static final String CONTRIB_ERROR_INVALID_OPTION \u003d"},{"lineNumber":32,"author":{"gitId":"-"},"content":"            \"Invalid option for the \" + QUESTION_TYPE_NAME + \".\";"},{"lineNumber":33,"author":{"gitId":"-"},"content":"    static final String CONTRIB_ERROR_INVALID_FEEDBACK_PATH \u003d"},{"lineNumber":34,"author":{"gitId":"-"},"content":"            QUESTION_TYPE_NAME + \" must have \""},{"lineNumber":35,"author":{"gitId":"-"},"content":"                    + \"\\\"Students in this course\\\" and \\\"Giver\u0027s team members and Giver\\\" \""},{"lineNumber":36,"author":{"gitId":"-"},"content":"                    + \"as the feedback giver and recipient respectively. \""},{"lineNumber":37,"author":{"gitId":"-"},"content":"                    + \"These values will be used instead.\";"},{"lineNumber":38,"author":{"gitId":"-"},"content":"    static final String CONTRIB_ERROR_INVALID_VISIBILITY_OPTIONS \u003d"},{"lineNumber":39,"author":{"gitId":"-"},"content":"            QUESTION_TYPE_NAME + \" must use one of the common visibility options. The \""},{"lineNumber":40,"author":{"gitId":"-"},"content":"                    + \"\\\"Shown anonymously to recipient and team members, visible to instructors\\\" \""},{"lineNumber":41,"author":{"gitId":"-"},"content":"                    + \"option will be used instead.\";"},{"lineNumber":42,"author":{"gitId":"-"},"content":""},{"lineNumber":43,"author":{"gitId":"-"},"content":"    private static final int SUMMARY_INDEX_CLAIMED \u003d 0;"},{"lineNumber":44,"author":{"gitId":"-"},"content":"    private static final int SUMMARY_INDEX_PERCEIVED \u003d 1;"},{"lineNumber":45,"author":{"gitId":"-"},"content":""},{"lineNumber":46,"author":{"gitId":"-"},"content":"    private static final Logger log \u003d Logger.getLogger();"},{"lineNumber":47,"author":{"gitId":"-"},"content":""},{"lineNumber":48,"author":{"gitId":"-"},"content":"    private boolean isZeroSum;"},{"lineNumber":49,"author":{"gitId":"-"},"content":"    private boolean isNotSureAllowed;"},{"lineNumber":50,"author":{"gitId":"-"},"content":""},{"lineNumber":51,"author":{"gitId":"-"},"content":"    public FeedbackContributionQuestionDetails() {"},{"lineNumber":52,"author":{"gitId":"-"},"content":"        this(null);"},{"lineNumber":53,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":54,"author":{"gitId":"-"},"content":""},{"lineNumber":55,"author":{"gitId":"-"},"content":"    public FeedbackContributionQuestionDetails(String questionText) {"},{"lineNumber":56,"author":{"gitId":"-"},"content":"        super(FeedbackQuestionType.CONTRIB, questionText);"},{"lineNumber":57,"author":{"gitId":"-"},"content":"        isZeroSum \u003d true;"},{"lineNumber":58,"author":{"gitId":"-"},"content":"        isNotSureAllowed \u003d false;"},{"lineNumber":59,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":60,"author":{"gitId":"-"},"content":""},{"lineNumber":61,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":62,"author":{"gitId":"-"},"content":"    public boolean shouldChangesRequireResponseDeletion(FeedbackQuestionDetails newDetails) {"},{"lineNumber":63,"author":{"gitId":"-"},"content":"        FeedbackContributionQuestionDetails newContribDetails \u003d (FeedbackContributionQuestionDetails) newDetails;"},{"lineNumber":64,"author":{"gitId":"-"},"content":"        return newContribDetails.isZeroSum !\u003d this.isZeroSum"},{"lineNumber":65,"author":{"gitId":"-"},"content":"                || newContribDetails.isNotSureAllowed !\u003d this.isNotSureAllowed;"},{"lineNumber":66,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":67,"author":{"gitId":"-"},"content":""},{"lineNumber":68,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":69,"author":{"gitId":"-"},"content":"    public boolean isIndividualResponsesShownToStudents() {"},{"lineNumber":70,"author":{"gitId":"-"},"content":"        return false;"},{"lineNumber":71,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":72,"author":{"gitId":"-"},"content":""},{"lineNumber":73,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":74,"author":{"gitId":"-"},"content":"    public String getQuestionResultStatisticsJson("},{"lineNumber":75,"author":{"gitId":"-"},"content":"            FeedbackQuestionAttributes question, String studentEmail, SessionResultsBundle bundle) {"},{"lineNumber":76,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e responses \u003d bundle.getQuestionResponseMap().get(question.getId());"},{"lineNumber":77,"author":{"gitId":"-"},"content":""},{"lineNumber":78,"author":{"gitId":"-"},"content":"        boolean isStudent \u003d studentEmail !\u003d null;"},{"lineNumber":79,"author":{"gitId":"-"},"content":""},{"lineNumber":80,"author":{"gitId":"-"},"content":"        List\u003cString\u003e teamNames;"},{"lineNumber":81,"author":{"gitId":"-"},"content":"        if (isStudent) {"},{"lineNumber":82,"author":{"gitId":"-"},"content":"            teamNames \u003d getTeamsWithAtLeastOneResponse(responses, bundle);"},{"lineNumber":83,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":84,"author":{"gitId":"-"},"content":"            teamNames \u003d new ArrayList\u003c\u003e(bundle.getRoster().getTeamToMembersTable().keySet());"},{"lineNumber":85,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":86,"author":{"gitId":"-"},"content":""},{"lineNumber":87,"author":{"gitId":"-"},"content":"        // Each team\u0027s member (email) list"},{"lineNumber":88,"author":{"gitId":"-"},"content":"        Map\u003cString, List\u003cString\u003e\u003e teamMembersEmail \u003d getTeamMembersEmail(bundle, teamNames);"},{"lineNumber":89,"author":{"gitId":"-"},"content":""},{"lineNumber":90,"author":{"gitId":"-"},"content":"        // Each team\u0027s responses"},{"lineNumber":91,"author":{"gitId":"-"},"content":"        Map\u003cString, List\u003cFeedbackResponseAttributes\u003e\u003e teamResponses \u003d getTeamResponses(responses, bundle, teamNames);"},{"lineNumber":92,"author":{"gitId":"-"},"content":""},{"lineNumber":93,"author":{"gitId":"-"},"content":"        // Get each team\u0027s submission array. -\u003e int[teamSize][teamSize]"},{"lineNumber":94,"author":{"gitId":"-"},"content":"        // Where int[0][1] refers points from student 0 to student 1"},{"lineNumber":95,"author":{"gitId":"-"},"content":"        // Where student 0 is the 0th student in the list in teamMembersEmail"},{"lineNumber":96,"author":{"gitId":"-"},"content":"        Map\u003cString, int[][]\u003e teamSubmissionArray \u003d getTeamSubmissionArray(teamNames, teamMembersEmail, teamResponses);"},{"lineNumber":97,"author":{"gitId":"-"},"content":""},{"lineNumber":98,"author":{"gitId":"-"},"content":"        // Each team\u0027s contribution question results."},{"lineNumber":99,"author":{"gitId":"-"},"content":"        Map\u003cString, TeamEvalResult\u003e teamResults \u003d getTeamResults(teamNames, teamSubmissionArray);"},{"lineNumber":100,"author":{"gitId":"-"},"content":"        ContributionStatistics output \u003d new ContributionStatistics();"},{"lineNumber":101,"author":{"gitId":"-"},"content":""},{"lineNumber":102,"author":{"gitId":"-"},"content":"        if (isStudent) {"},{"lineNumber":103,"author":{"gitId":"-"},"content":"            String currentUserTeam \u003d bundle.getRoster().getInfoForIdentifier(studentEmail).getTeamName();"},{"lineNumber":104,"author":{"gitId":"-"},"content":"            TeamEvalResult currentUserTeamResults \u003d teamResults.get(currentUserTeam);"},{"lineNumber":105,"author":{"gitId":"-"},"content":"            if (currentUserTeamResults !\u003d null) {"},{"lineNumber":106,"author":{"gitId":"-"},"content":"                List\u003cString\u003e teamEmails \u003d teamMembersEmail.get(currentUserTeam);"},{"lineNumber":107,"author":{"gitId":"-"},"content":"                int currentUserIndex \u003d teamEmails.indexOf(studentEmail);"},{"lineNumber":108,"author":{"gitId":"-"},"content":"                int[] claimedNumbers \u003d currentUserTeamResults.claimed[currentUserIndex];"},{"lineNumber":109,"author":{"gitId":"-"},"content":"                int[] perceivedNumbers \u003d currentUserTeamResults.denormalizedAveragePerceived[currentUserIndex];"},{"lineNumber":110,"author":{"gitId":"-"},"content":""},{"lineNumber":111,"author":{"gitId":"-"},"content":"                int claimed \u003d 0;"},{"lineNumber":112,"author":{"gitId":"-"},"content":"                int perceived \u003d 0;"},{"lineNumber":113,"author":{"gitId":"-"},"content":"                Map\u003cString, Integer\u003e claimedOthers \u003d new HashMap\u003c\u003e();"},{"lineNumber":114,"author":{"gitId":"-"},"content":"                List\u003cInteger\u003e perceivedOthers \u003d new ArrayList\u003c\u003e();"},{"lineNumber":115,"author":{"gitId":"-"},"content":""},{"lineNumber":116,"author":{"gitId":"-"},"content":"                for (int i \u003d 0; i \u003c claimedNumbers.length; i++) {"},{"lineNumber":117,"author":{"gitId":"-"},"content":"                    if (i \u003d\u003d currentUserIndex) {"},{"lineNumber":118,"author":{"gitId":"-"},"content":"                        claimed \u003d claimedNumbers[i];"},{"lineNumber":119,"author":{"gitId":"-"},"content":"                    } else {"},{"lineNumber":120,"author":{"gitId":"-"},"content":"                        claimedOthers.put(teamEmails.get(i), claimedNumbers[i]);"},{"lineNumber":121,"author":{"gitId":"-"},"content":"                    }"},{"lineNumber":122,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":123,"author":{"gitId":"-"},"content":""},{"lineNumber":124,"author":{"gitId":"-"},"content":"                for (int i \u003d 0; i \u003c perceivedNumbers.length; i++) {"},{"lineNumber":125,"author":{"gitId":"-"},"content":"                    if (i \u003d\u003d currentUserIndex) {"},{"lineNumber":126,"author":{"gitId":"-"},"content":"                        perceived \u003d perceivedNumbers[i];"},{"lineNumber":127,"author":{"gitId":"-"},"content":"                    } else {"},{"lineNumber":128,"author":{"gitId":"-"},"content":"                        perceivedOthers.add(perceivedNumbers[i]);"},{"lineNumber":129,"author":{"gitId":"-"},"content":"                    }"},{"lineNumber":130,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":131,"author":{"gitId":"-"},"content":"                perceivedOthers.sort(Comparator.reverseOrder());"},{"lineNumber":132,"author":{"gitId":"-"},"content":""},{"lineNumber":133,"author":{"gitId":"-"},"content":"                output.results.put(studentEmail, new ContributionStatisticsEntry(claimed, perceived,"},{"lineNumber":134,"author":{"gitId":"-"},"content":"                        claimedOthers,"},{"lineNumber":135,"author":{"gitId":"-"},"content":"                        perceivedOthers.stream().mapToInt(i -\u003e i).toArray()));"},{"lineNumber":136,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":137,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":138,"author":{"gitId":"-"},"content":"            Map\u003cString, int[]\u003e studentResults \u003d getStudentResults(teamMembersEmail, teamResults);"},{"lineNumber":139,"author":{"gitId":"-"},"content":""},{"lineNumber":140,"author":{"gitId":"-"},"content":"            for (Map.Entry\u003cString, int[]\u003e entry : studentResults.entrySet()) {"},{"lineNumber":141,"author":{"gitId":"-"},"content":"                int[] summary \u003d entry.getValue();"},{"lineNumber":142,"author":{"gitId":"-"},"content":"                String email \u003d entry.getKey();"},{"lineNumber":143,"author":{"gitId":"-"},"content":"                String team \u003d bundle.getRoster().getStudentForEmail(email).getTeam();"},{"lineNumber":144,"author":{"gitId":"-"},"content":"                List\u003cString\u003e teamEmails \u003d teamMembersEmail.get(team);"},{"lineNumber":145,"author":{"gitId":"-"},"content":"                TeamEvalResult teamResult \u003d teamResults.get(team);"},{"lineNumber":146,"author":{"gitId":"-"},"content":"                int studentIndex \u003d teamEmails.indexOf(email);"},{"lineNumber":147,"author":{"gitId":"-"},"content":"                Map\u003cString, Integer\u003e claimedOthers \u003d new HashMap\u003c\u003e();"},{"lineNumber":148,"author":{"gitId":"-"},"content":"                List\u003cInteger\u003e perceivedOthers \u003d new ArrayList\u003c\u003e();"},{"lineNumber":149,"author":{"gitId":"-"},"content":"                for (int i \u003d 0; i \u003c teamResult.normalizedPeerContributionRatio.length; i++) {"},{"lineNumber":150,"author":{"gitId":"-"},"content":"                    if (i !\u003d studentIndex) {"},{"lineNumber":151,"author":{"gitId":"-"},"content":"                        claimedOthers.put(teamEmails.get(i), teamResult.normalizedPeerContributionRatio[studentIndex][i]);"},{"lineNumber":152,"author":{"gitId":"-"},"content":"                        perceivedOthers.add(teamResult.normalizedPeerContributionRatio[i][studentIndex]);"},{"lineNumber":153,"author":{"gitId":"-"},"content":"                    }"},{"lineNumber":154,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":155,"author":{"gitId":"-"},"content":"                perceivedOthers.sort(Comparator.reverseOrder());"},{"lineNumber":156,"author":{"gitId":"-"},"content":""},{"lineNumber":157,"author":{"gitId":"-"},"content":"                output.results.put(email, new ContributionStatisticsEntry(summary[SUMMARY_INDEX_CLAIMED],"},{"lineNumber":158,"author":{"gitId":"-"},"content":"                        summary[SUMMARY_INDEX_PERCEIVED],"},{"lineNumber":159,"author":{"gitId":"-"},"content":"                        claimedOthers, perceivedOthers.stream().mapToInt(i -\u003e i).toArray()));"},{"lineNumber":160,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":161,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":162,"author":{"gitId":"-"},"content":""},{"lineNumber":163,"author":{"gitId":"-"},"content":"        return JsonUtils.toJson(output);"},{"lineNumber":164,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":165,"author":{"gitId":"-"},"content":""},{"lineNumber":166,"author":{"gitId":"-"},"content":"    private Map\u003cString, int[]\u003e getStudentResults("},{"lineNumber":167,"author":{"gitId":"-"},"content":"            Map\u003cString, List\u003cString\u003e\u003e teamMembersEmail,"},{"lineNumber":168,"author":{"gitId":"-"},"content":"            Map\u003cString, TeamEvalResult\u003e teamResults) {"},{"lineNumber":169,"author":{"gitId":"-"},"content":"        Map\u003cString, int[]\u003e studentResults \u003d new LinkedHashMap\u003c\u003e();"},{"lineNumber":170,"author":{"gitId":"-"},"content":"        teamResults.forEach((key, teamResult) -\u003e {"},{"lineNumber":171,"author":{"gitId":"-"},"content":"            List\u003cString\u003e teamEmails \u003d teamMembersEmail.get(key);"},{"lineNumber":172,"author":{"gitId":"-"},"content":"            for (int i \u003d 0; i \u003c teamEmails.size(); i++) {"},{"lineNumber":173,"author":{"gitId":"-"},"content":"                String studentEmail \u003d teamEmails.get(i);"},{"lineNumber":174,"author":{"gitId":"-"},"content":"                int[] summary \u003d new int[2];"},{"lineNumber":175,"author":{"gitId":"-"},"content":"                summary[SUMMARY_INDEX_CLAIMED] \u003d teamResult.normalizedClaimed[i][i];"},{"lineNumber":176,"author":{"gitId":"-"},"content":"                summary[SUMMARY_INDEX_PERCEIVED] \u003d teamResult.normalizedAveragePerceived[i];"},{"lineNumber":177,"author":{"gitId":"-"},"content":""},{"lineNumber":178,"author":{"gitId":"-"},"content":"                studentResults.put(studentEmail, summary);"},{"lineNumber":179,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":180,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":181,"author":{"gitId":"-"},"content":"        return studentResults;"},{"lineNumber":182,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":183,"author":{"gitId":"-"},"content":""},{"lineNumber":184,"author":{"gitId":"-"},"content":"    private Map\u003cString, TeamEvalResult\u003e getTeamResults(List\u003cString\u003e teamNames,"},{"lineNumber":185,"author":{"gitId":"-"},"content":"            Map\u003cString, int[][]\u003e teamSubmissionArray) {"},{"lineNumber":186,"author":{"gitId":"-"},"content":"        Map\u003cString, TeamEvalResult\u003e teamResults \u003d new LinkedHashMap\u003c\u003e();"},{"lineNumber":187,"author":{"gitId":"-"},"content":"        for (String team : teamNames) {"},{"lineNumber":188,"author":{"gitId":"-"},"content":"            TeamEvalResult teamEvalResult \u003d new TeamEvalResult(teamSubmissionArray.get(team));"},{"lineNumber":189,"author":{"gitId":"-"},"content":"            teamResults.put(team, teamEvalResult);"},{"lineNumber":190,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":191,"author":{"gitId":"-"},"content":"        return teamResults;"},{"lineNumber":192,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":193,"author":{"gitId":"-"},"content":""},{"lineNumber":194,"author":{"gitId":"-"},"content":"    private Map\u003cString, int[][]\u003e getTeamSubmissionArray(List\u003cString\u003e teamNames,"},{"lineNumber":195,"author":{"gitId":"-"},"content":"            Map\u003cString, List\u003cString\u003e\u003e teamMembersEmail,"},{"lineNumber":196,"author":{"gitId":"-"},"content":"            Map\u003cString, List\u003cFeedbackResponseAttributes\u003e\u003e teamResponses) {"},{"lineNumber":197,"author":{"gitId":"-"},"content":"        Map\u003cString, int[][]\u003e teamSubmissionArray \u003d new LinkedHashMap\u003c\u003e();"},{"lineNumber":198,"author":{"gitId":"-"},"content":"        for (String team : teamNames) {"},{"lineNumber":199,"author":{"gitId":"-"},"content":"            int teamSize \u003d teamMembersEmail.get(team).size();"},{"lineNumber":200,"author":{"gitId":"-"},"content":"            teamSubmissionArray.put(team, new int[teamSize][teamSize]);"},{"lineNumber":201,"author":{"gitId":"-"},"content":"            //Initialize all as not submitted."},{"lineNumber":202,"author":{"gitId":"-"},"content":"            for (int i \u003d 0; i \u003c teamSize; i++) {"},{"lineNumber":203,"author":{"gitId":"-"},"content":"                for (int j \u003d 0; j \u003c teamSize; j++) {"},{"lineNumber":204,"author":{"gitId":"-"},"content":"                    teamSubmissionArray.get(team)[i][j] \u003d Const.POINTS_NOT_SUBMITTED;"},{"lineNumber":205,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":206,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":207,"author":{"gitId":"-"},"content":"            //Fill in submitted points"},{"lineNumber":208,"author":{"gitId":"-"},"content":"            List\u003cFeedbackResponseAttributes\u003e teamResponseList \u003d teamResponses.get(team);"},{"lineNumber":209,"author":{"gitId":"-"},"content":"            List\u003cString\u003e memberEmailList \u003d teamMembersEmail.get(team);"},{"lineNumber":210,"author":{"gitId":"-"},"content":"            for (FeedbackResponseAttributes response : teamResponseList) {"},{"lineNumber":211,"author":{"gitId":"-"},"content":"                int giverIndx \u003d memberEmailList.indexOf(response.getGiver());"},{"lineNumber":212,"author":{"gitId":"-"},"content":"                int recipientIndx \u003d memberEmailList.indexOf(response.getRecipient());"},{"lineNumber":213,"author":{"gitId":"-"},"content":"                if (giverIndx \u003d\u003d -1 || recipientIndx \u003d\u003d -1) {"},{"lineNumber":214,"author":{"gitId":"-"},"content":"                    continue;"},{"lineNumber":215,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":216,"author":{"gitId":"-"},"content":"                int points \u003d ((FeedbackContributionResponseDetails) response.getResponseDetailsCopy()).getAnswer();"},{"lineNumber":217,"author":{"gitId":"-"},"content":"                teamSubmissionArray.get(team)[giverIndx][recipientIndx] \u003d points;"},{"lineNumber":218,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":219,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":220,"author":{"gitId":"-"},"content":"        return teamSubmissionArray;"},{"lineNumber":221,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":222,"author":{"gitId":"-"},"content":""},{"lineNumber":223,"author":{"gitId":"-"},"content":"    private Map\u003cString, List\u003cFeedbackResponseAttributes\u003e\u003e getTeamResponses("},{"lineNumber":224,"author":{"gitId":"-"},"content":"            List\u003cFeedbackResponseAttributes\u003e responses, SessionResultsBundle bundle, List\u003cString\u003e teamNames) {"},{"lineNumber":225,"author":{"gitId":"-"},"content":"        Map\u003cString, List\u003cFeedbackResponseAttributes\u003e\u003e teamResponses \u003d new LinkedHashMap\u003c\u003e();"},{"lineNumber":226,"author":{"gitId":"-"},"content":"        for (String teamName : teamNames) {"},{"lineNumber":227,"author":{"gitId":"-"},"content":"            teamResponses.put(teamName, new ArrayList\u003c\u003e());"},{"lineNumber":228,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":229,"author":{"gitId":"-"},"content":"        for (FeedbackResponseAttributes response : responses) {"},{"lineNumber":230,"author":{"gitId":"-"},"content":"            String team \u003d bundle.getRoster().getInfoForIdentifier(response.getGiver()).getTeamName();"},{"lineNumber":231,"author":{"gitId":"-"},"content":"            if (teamResponses.containsKey(team)) {"},{"lineNumber":232,"author":{"gitId":"-"},"content":"                teamResponses.get(team).add(response);"},{"lineNumber":233,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":234,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":235,"author":{"gitId":"-"},"content":"        return teamResponses;"},{"lineNumber":236,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":237,"author":{"gitId":"-"},"content":""},{"lineNumber":238,"author":{"gitId":"-"},"content":"    private Map\u003cString, List\u003cString\u003e\u003e getTeamMembersEmail("},{"lineNumber":239,"author":{"gitId":"-"},"content":"            SessionResultsBundle bundle, List\u003cString\u003e teamNames) {"},{"lineNumber":240,"author":{"gitId":"-"},"content":"        Map\u003cString, List\u003cString\u003e\u003e teamMembersEmail \u003d new LinkedHashMap\u003c\u003e();"},{"lineNumber":241,"author":{"gitId":"-"},"content":"        for (String teamName : teamNames) {"},{"lineNumber":242,"author":{"gitId":"-"},"content":"            List\u003cString\u003e memberEmails \u003d bundle.getRoster().getTeamToMembersTable().get(teamName)"},{"lineNumber":243,"author":{"gitId":"-"},"content":"                    .stream().map(StudentAttributes::getEmail)"},{"lineNumber":244,"author":{"gitId":"-"},"content":"                    .collect(Collectors.toList());"},{"lineNumber":245,"author":{"gitId":"-"},"content":"            teamMembersEmail.put(teamName, memberEmails);"},{"lineNumber":246,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":247,"author":{"gitId":"-"},"content":"        return teamMembersEmail;"},{"lineNumber":248,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":249,"author":{"gitId":"-"},"content":""},{"lineNumber":250,"author":{"gitId":"-"},"content":"    private List\u003cString\u003e getTeamsWithAtLeastOneResponse("},{"lineNumber":251,"author":{"gitId":"-"},"content":"            List\u003cFeedbackResponseAttributes\u003e responses, SessionResultsBundle bundle) {"},{"lineNumber":252,"author":{"gitId":"-"},"content":"        Set\u003cString\u003e teamNames \u003d new HashSet\u003c\u003e();"},{"lineNumber":253,"author":{"gitId":"-"},"content":"        for (FeedbackResponseAttributes response : responses) {"},{"lineNumber":254,"author":{"gitId":"-"},"content":"            String teamNameOfResponseGiver \u003d bundle.getRoster().getInfoForIdentifier(response.getGiver()).getTeamName();"},{"lineNumber":255,"author":{"gitId":"-"},"content":"            teamNames.add(teamNameOfResponseGiver);"},{"lineNumber":256,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":257,"author":{"gitId":"-"},"content":"        return new ArrayList\u003c\u003e(teamNames);"},{"lineNumber":258,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":259,"author":{"gitId":"-"},"content":""},{"lineNumber":260,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":261,"author":{"gitId":"-"},"content":"    public List\u003cString\u003e validateQuestionDetails() {"},{"lineNumber":262,"author":{"gitId":"-"},"content":"        List\u003cString\u003e errors \u003d new ArrayList\u003c\u003e();"},{"lineNumber":263,"author":{"gitId":"-"},"content":""},{"lineNumber":264,"author":{"gitId":"-"},"content":"        if (isZeroSum \u0026\u0026 isNotSureAllowed) {"},{"lineNumber":265,"author":{"gitId":"-"},"content":"            errors.add(CONTRIB_ERROR_INVALID_OPTION);"},{"lineNumber":266,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":267,"author":{"gitId":"-"},"content":""},{"lineNumber":268,"author":{"gitId":"-"},"content":"        return errors;"},{"lineNumber":269,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":270,"author":{"gitId":"-"},"content":""},{"lineNumber":271,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":272,"author":{"gitId":"-"},"content":"    public List\u003cString\u003e validateResponsesDetails(List\u003cFeedbackResponseDetails\u003e responses, int numRecipients) {"},{"lineNumber":273,"author":{"gitId":"-"},"content":"        List\u003cString\u003e errors \u003d new ArrayList\u003c\u003e();"},{"lineNumber":274,"author":{"gitId":"-"},"content":""},{"lineNumber":275,"author":{"gitId":"-"},"content":"        // Nothing to validate if there are no responses"},{"lineNumber":276,"author":{"gitId":"-"},"content":"        boolean isAllNotSubmitted \u003d responses"},{"lineNumber":277,"author":{"gitId":"-"},"content":"                .stream()"},{"lineNumber":278,"author":{"gitId":"-"},"content":"                .allMatch(r -\u003e ((FeedbackContributionResponseDetails) r).getAnswer() \u003d\u003d Const.POINTS_NOT_SUBMITTED);"},{"lineNumber":279,"author":{"gitId":"-"},"content":"        if (isAllNotSubmitted) {"},{"lineNumber":280,"author":{"gitId":"-"},"content":"            return errors;"},{"lineNumber":281,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":282,"author":{"gitId":"-"},"content":""},{"lineNumber":283,"author":{"gitId":"-"},"content":"        int actualTotal \u003d 0;"},{"lineNumber":284,"author":{"gitId":"-"},"content":"        for (FeedbackResponseDetails response : responses) {"},{"lineNumber":285,"author":{"gitId":"-"},"content":"            FeedbackContributionResponseDetails details \u003d (FeedbackContributionResponseDetails) response;"},{"lineNumber":286,"author":{"gitId":"-"},"content":"            boolean validAnswer \u003d false;"},{"lineNumber":287,"author":{"gitId":"-"},"content":""},{"lineNumber":288,"author":{"gitId":"-"},"content":"            // Valid answers: 0, 5, 10, 15, .... 190, 195, 200"},{"lineNumber":289,"author":{"gitId":"-"},"content":"            boolean isValidRange \u003d details.getAnswer() \u003e\u003d 0 \u0026\u0026 details.getAnswer() \u003c\u003d 200;"},{"lineNumber":290,"author":{"gitId":"-"},"content":"            boolean isMultipleOf5 \u003d details.getAnswer() % 5 \u003d\u003d 0;"},{"lineNumber":291,"author":{"gitId":"-"},"content":"            if (isValidRange \u0026\u0026 isMultipleOf5) {"},{"lineNumber":292,"author":{"gitId":"-"},"content":"                validAnswer \u003d true;"},{"lineNumber":293,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":294,"author":{"gitId":"-"},"content":""},{"lineNumber":295,"author":{"gitId":"-"},"content":"            boolean isValidNotSure \u003d details.getAnswer() \u003d\u003d Const.POINTS_NOT_SURE \u0026\u0026 isNotSureAllowed;"},{"lineNumber":296,"author":{"gitId":"-"},"content":"            boolean isValidNotSubmitted \u003d details.getAnswer() \u003d\u003d Const.POINTS_NOT_SUBMITTED \u0026\u0026 !isZeroSum;"},{"lineNumber":297,"author":{"gitId":"-"},"content":"            if (isValidNotSure || isValidNotSubmitted) {"},{"lineNumber":298,"author":{"gitId":"-"},"content":"                validAnswer \u003d true;"},{"lineNumber":299,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":300,"author":{"gitId":"-"},"content":""},{"lineNumber":301,"author":{"gitId":"-"},"content":"            if (!validAnswer) {"},{"lineNumber":302,"author":{"gitId":"-"},"content":"                errors.add(CONTRIB_ERROR_INVALID_OPTION);"},{"lineNumber":303,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":304,"author":{"gitId":"-"},"content":""},{"lineNumber":305,"author":{"gitId":"-"},"content":"            actualTotal +\u003d details.getAnswer();"},{"lineNumber":306,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":307,"author":{"gitId":"-"},"content":""},{"lineNumber":308,"author":{"gitId":"-"},"content":"        int expectedTotal \u003d numRecipients * 100;"},{"lineNumber":309,"author":{"gitId":"-"},"content":"        if (actualTotal !\u003d expectedTotal \u0026\u0026 isZeroSum) {"},{"lineNumber":310,"author":{"gitId":"-"},"content":"            errors.add(CONTRIB_ERROR_INVALID_OPTION);"},{"lineNumber":311,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":312,"author":{"gitId":"-"},"content":""},{"lineNumber":313,"author":{"gitId":"-"},"content":"        return errors;"},{"lineNumber":314,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":315,"author":{"gitId":"-"},"content":""},{"lineNumber":316,"author":{"gitId":"hhdqirui"},"content":"    @Override"},{"lineNumber":317,"author":{"gitId":"hhdqirui"},"content":"    public String validateGiverRecipientVisibility(FeedbackQuestion feedbackQuestion) {"},{"lineNumber":318,"author":{"gitId":"hhdqirui"},"content":"        String errorMsg \u003d \"\";"},{"lineNumber":319,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":320,"author":{"gitId":"hhdqirui"},"content":"        // giver type can only be STUDENTS"},{"lineNumber":321,"author":{"gitId":"hhdqirui"},"content":"        if (feedbackQuestion.getGiverType() !\u003d FeedbackParticipantType.STUDENTS) {"},{"lineNumber":322,"author":{"gitId":"hhdqirui"},"content":"            log.severe(\"Unexpected giverType for contribution question: \" + feedbackQuestion.getGiverType()"},{"lineNumber":323,"author":{"gitId":"hhdqirui"},"content":"                       + \" (forced to :\" + FeedbackParticipantType.STUDENTS + \")\");"},{"lineNumber":324,"author":{"gitId":"hhdqirui"},"content":"            feedbackQuestion.setGiverType(FeedbackParticipantType.STUDENTS);"},{"lineNumber":325,"author":{"gitId":"hhdqirui"},"content":"            errorMsg \u003d CONTRIB_ERROR_INVALID_FEEDBACK_PATH;"},{"lineNumber":326,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":327,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":328,"author":{"gitId":"hhdqirui"},"content":"        // recipient type can only be OWN_TEAM_MEMBERS_INCLUDING_SELF"},{"lineNumber":329,"author":{"gitId":"hhdqirui"},"content":"        if (feedbackQuestion.getRecipientType() !\u003d FeedbackParticipantType.OWN_TEAM_MEMBERS_INCLUDING_SELF) {"},{"lineNumber":330,"author":{"gitId":"hhdqirui"},"content":"            log.severe(\"Unexpected recipientType for contribution question: \""},{"lineNumber":331,"author":{"gitId":"hhdqirui"},"content":"                       + feedbackQuestion.getRecipientType()"},{"lineNumber":332,"author":{"gitId":"hhdqirui"},"content":"                       + \" (forced to :\" + FeedbackParticipantType.OWN_TEAM_MEMBERS_INCLUDING_SELF + \")\");"},{"lineNumber":333,"author":{"gitId":"hhdqirui"},"content":"            feedbackQuestion.setRecipientType(FeedbackParticipantType.OWN_TEAM_MEMBERS_INCLUDING_SELF);"},{"lineNumber":334,"author":{"gitId":"hhdqirui"},"content":"            errorMsg \u003d CONTRIB_ERROR_INVALID_FEEDBACK_PATH;"},{"lineNumber":335,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":336,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":337,"author":{"gitId":"hhdqirui"},"content":"        // restrictions on visibility options"},{"lineNumber":338,"author":{"gitId":"hhdqirui"},"content":"        if (!(feedbackQuestion.getShowResponsesTo().contains(FeedbackParticipantType.RECEIVER)"},{"lineNumber":339,"author":{"gitId":"hhdqirui"},"content":"                \u003d\u003d feedbackQuestion.getShowResponsesTo().contains(FeedbackParticipantType.RECEIVER_TEAM_MEMBERS)"},{"lineNumber":340,"author":{"gitId":"hhdqirui"},"content":"                \u0026\u0026 feedbackQuestion.getShowResponsesTo().contains(FeedbackParticipantType.RECEIVER_TEAM_MEMBERS)"},{"lineNumber":341,"author":{"gitId":"hhdqirui"},"content":"                \u003d\u003d feedbackQuestion.getShowResponsesTo().contains(FeedbackParticipantType.OWN_TEAM_MEMBERS))) {"},{"lineNumber":342,"author":{"gitId":"hhdqirui"},"content":"            log.severe(\"Unexpected showResponsesTo for contribution question: \""},{"lineNumber":343,"author":{"gitId":"hhdqirui"},"content":"                       + feedbackQuestion.getShowResponsesTo() + \" (forced to :\""},{"lineNumber":344,"author":{"gitId":"hhdqirui"},"content":"                       + \"Shown anonymously to recipient and team members, visible to instructors\""},{"lineNumber":345,"author":{"gitId":"hhdqirui"},"content":"                       + \")\");"},{"lineNumber":346,"author":{"gitId":"hhdqirui"},"content":"            feedbackQuestion.setShowResponsesTo(Arrays.asList(FeedbackParticipantType.RECEIVER,"},{"lineNumber":347,"author":{"gitId":"hhdqirui"},"content":"                                                                       FeedbackParticipantType.RECEIVER_TEAM_MEMBERS,"},{"lineNumber":348,"author":{"gitId":"hhdqirui"},"content":"                                                                       FeedbackParticipantType.OWN_TEAM_MEMBERS,"},{"lineNumber":349,"author":{"gitId":"hhdqirui"},"content":"                                                                       FeedbackParticipantType.INSTRUCTORS));"},{"lineNumber":350,"author":{"gitId":"hhdqirui"},"content":"            errorMsg \u003d CONTRIB_ERROR_INVALID_VISIBILITY_OPTIONS;"},{"lineNumber":351,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":352,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":353,"author":{"gitId":"hhdqirui"},"content":"        return errorMsg;"},{"lineNumber":354,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":355,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":356,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":357,"author":{"gitId":"-"},"content":"    public String validateGiverRecipientVisibility(FeedbackQuestionAttributes feedbackQuestionAttributes) {"},{"lineNumber":358,"author":{"gitId":"-"},"content":"        String errorMsg \u003d \"\";"},{"lineNumber":359,"author":{"gitId":"-"},"content":""},{"lineNumber":360,"author":{"gitId":"-"},"content":"        // giver type can only be STUDENTS"},{"lineNumber":361,"author":{"gitId":"-"},"content":"        if (feedbackQuestionAttributes.getGiverType() !\u003d FeedbackParticipantType.STUDENTS) {"},{"lineNumber":362,"author":{"gitId":"-"},"content":"            log.severe(\"Unexpected giverType for contribution question: \" + feedbackQuestionAttributes.getGiverType()"},{"lineNumber":363,"author":{"gitId":"-"},"content":"                    + \" (forced to :\" + FeedbackParticipantType.STUDENTS + \")\");"},{"lineNumber":364,"author":{"gitId":"-"},"content":"            feedbackQuestionAttributes.setGiverType(FeedbackParticipantType.STUDENTS);"},{"lineNumber":365,"author":{"gitId":"-"},"content":"            errorMsg \u003d CONTRIB_ERROR_INVALID_FEEDBACK_PATH;"},{"lineNumber":366,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":367,"author":{"gitId":"-"},"content":""},{"lineNumber":368,"author":{"gitId":"-"},"content":"        // recipient type can only be OWN_TEAM_MEMBERS_INCLUDING_SELF"},{"lineNumber":369,"author":{"gitId":"-"},"content":"        if (feedbackQuestionAttributes.getRecipientType() !\u003d FeedbackParticipantType.OWN_TEAM_MEMBERS_INCLUDING_SELF) {"},{"lineNumber":370,"author":{"gitId":"-"},"content":"            log.severe(\"Unexpected recipientType for contribution question: \""},{"lineNumber":371,"author":{"gitId":"-"},"content":"                    + feedbackQuestionAttributes.getRecipientType()"},{"lineNumber":372,"author":{"gitId":"-"},"content":"                    + \" (forced to :\" + FeedbackParticipantType.OWN_TEAM_MEMBERS_INCLUDING_SELF + \")\");"},{"lineNumber":373,"author":{"gitId":"-"},"content":"            feedbackQuestionAttributes.setRecipientType(FeedbackParticipantType.OWN_TEAM_MEMBERS_INCLUDING_SELF);"},{"lineNumber":374,"author":{"gitId":"-"},"content":"            errorMsg \u003d CONTRIB_ERROR_INVALID_FEEDBACK_PATH;"},{"lineNumber":375,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":376,"author":{"gitId":"-"},"content":""},{"lineNumber":377,"author":{"gitId":"-"},"content":"        // restrictions on visibility options"},{"lineNumber":378,"author":{"gitId":"-"},"content":"        if (!(feedbackQuestionAttributes.getShowResponsesTo().contains(FeedbackParticipantType.RECEIVER)"},{"lineNumber":379,"author":{"gitId":"-"},"content":"                \u003d\u003d feedbackQuestionAttributes.getShowResponsesTo().contains(FeedbackParticipantType.RECEIVER_TEAM_MEMBERS)"},{"lineNumber":380,"author":{"gitId":"-"},"content":"                \u0026\u0026 feedbackQuestionAttributes.getShowResponsesTo().contains(FeedbackParticipantType.RECEIVER_TEAM_MEMBERS)"},{"lineNumber":381,"author":{"gitId":"-"},"content":"                \u003d\u003d feedbackQuestionAttributes.getShowResponsesTo().contains(FeedbackParticipantType.OWN_TEAM_MEMBERS))) {"},{"lineNumber":382,"author":{"gitId":"-"},"content":"            log.severe(\"Unexpected showResponsesTo for contribution question: \""},{"lineNumber":383,"author":{"gitId":"-"},"content":"                    + feedbackQuestionAttributes.getShowResponsesTo() + \" (forced to :\""},{"lineNumber":384,"author":{"gitId":"-"},"content":"                    + \"Shown anonymously to recipient and team members, visible to instructors\""},{"lineNumber":385,"author":{"gitId":"-"},"content":"                    + \")\");"},{"lineNumber":386,"author":{"gitId":"-"},"content":"            feedbackQuestionAttributes.setShowResponsesTo(Arrays.asList(FeedbackParticipantType.RECEIVER,"},{"lineNumber":387,"author":{"gitId":"-"},"content":"                    FeedbackParticipantType.RECEIVER_TEAM_MEMBERS,"},{"lineNumber":388,"author":{"gitId":"-"},"content":"                    FeedbackParticipantType.OWN_TEAM_MEMBERS,"},{"lineNumber":389,"author":{"gitId":"-"},"content":"                    FeedbackParticipantType.INSTRUCTORS));"},{"lineNumber":390,"author":{"gitId":"-"},"content":"            errorMsg \u003d CONTRIB_ERROR_INVALID_VISIBILITY_OPTIONS;"},{"lineNumber":391,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":392,"author":{"gitId":"-"},"content":""},{"lineNumber":393,"author":{"gitId":"-"},"content":"        return errorMsg;"},{"lineNumber":394,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":395,"author":{"gitId":"-"},"content":""},{"lineNumber":396,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":397,"author":{"gitId":"-"},"content":"    public boolean isInstructorCommentsOnResponsesAllowed() {"},{"lineNumber":398,"author":{"gitId":"-"},"content":"        return false;"},{"lineNumber":399,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":400,"author":{"gitId":"-"},"content":""},{"lineNumber":401,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":402,"author":{"gitId":"-"},"content":"    public boolean isFeedbackParticipantCommentsOnResponsesAllowed() {"},{"lineNumber":403,"author":{"gitId":"-"},"content":"        return false;"},{"lineNumber":404,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":405,"author":{"gitId":"-"},"content":""},{"lineNumber":406,"author":{"gitId":"-"},"content":"    public boolean isZeroSum() {"},{"lineNumber":407,"author":{"gitId":"-"},"content":"        return isZeroSum;"},{"lineNumber":408,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":409,"author":{"gitId":"-"},"content":""},{"lineNumber":410,"author":{"gitId":"-"},"content":"    public boolean isNotSureAllowed() {"},{"lineNumber":411,"author":{"gitId":"-"},"content":"        return isNotSureAllowed;"},{"lineNumber":412,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":413,"author":{"gitId":"-"},"content":""},{"lineNumber":414,"author":{"gitId":"-"},"content":"    public void setZeroSum(boolean zeroSum) {"},{"lineNumber":415,"author":{"gitId":"-"},"content":"        isZeroSum \u003d zeroSum;"},{"lineNumber":416,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":417,"author":{"gitId":"-"},"content":""},{"lineNumber":418,"author":{"gitId":"-"},"content":"    public void setNotSureAllowed(boolean notSureAllowed) {"},{"lineNumber":419,"author":{"gitId":"-"},"content":"        isNotSureAllowed \u003d notSureAllowed;"},{"lineNumber":420,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":421,"author":{"gitId":"-"},"content":""},{"lineNumber":422,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":423,"author":{"gitId":"-"},"content":"     * Represents a list of participants to their question statistics for one contribution question."},{"lineNumber":424,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":425,"author":{"gitId":"-"},"content":"    public static class ContributionStatistics {"},{"lineNumber":426,"author":{"gitId":"-"},"content":"        private final Map\u003cString, ContributionStatisticsEntry\u003e results \u003d new HashMap\u003c\u003e();"},{"lineNumber":427,"author":{"gitId":"-"},"content":""},{"lineNumber":428,"author":{"gitId":"-"},"content":"        public Map\u003cString, ContributionStatisticsEntry\u003e getResults() {"},{"lineNumber":429,"author":{"gitId":"-"},"content":"            return results;"},{"lineNumber":430,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":431,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":432,"author":{"gitId":"-"},"content":""},{"lineNumber":433,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":434,"author":{"gitId":"-"},"content":"     * Represents the statistics of one feedback participant in one contribution question."},{"lineNumber":435,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":436,"author":{"gitId":"-"},"content":"     * \u003cp\u003eThis class is a container for some representative values from {@link TeamEvalResult}."},{"lineNumber":437,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":438,"author":{"gitId":"-"},"content":"     * @see TeamEvalResult"},{"lineNumber":439,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":440,"author":{"gitId":"-"},"content":"    public static class ContributionStatisticsEntry {"},{"lineNumber":441,"author":{"gitId":"-"},"content":"        private final int claimed;"},{"lineNumber":442,"author":{"gitId":"-"},"content":"        private final int perceived;"},{"lineNumber":443,"author":{"gitId":"-"},"content":"        private final Map\u003cString, Integer\u003e claimedOthers;"},{"lineNumber":444,"author":{"gitId":"-"},"content":"        private final int[] perceivedOthers;"},{"lineNumber":445,"author":{"gitId":"-"},"content":""},{"lineNumber":446,"author":{"gitId":"-"},"content":"        public ContributionStatisticsEntry(int claimed, int perceived, Map\u003cString, Integer\u003e claimedOthers,"},{"lineNumber":447,"author":{"gitId":"-"},"content":"                                           int[] perceivedOthers) {"},{"lineNumber":448,"author":{"gitId":"-"},"content":"            this.claimed \u003d claimed;"},{"lineNumber":449,"author":{"gitId":"-"},"content":"            this.perceived \u003d perceived;"},{"lineNumber":450,"author":{"gitId":"-"},"content":"            this.claimedOthers \u003d claimedOthers;"},{"lineNumber":451,"author":{"gitId":"-"},"content":"            this.perceivedOthers \u003d perceivedOthers;"},{"lineNumber":452,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":453,"author":{"gitId":"-"},"content":""},{"lineNumber":454,"author":{"gitId":"-"},"content":"        public int getClaimed() {"},{"lineNumber":455,"author":{"gitId":"-"},"content":"            return claimed;"},{"lineNumber":456,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":457,"author":{"gitId":"-"},"content":""},{"lineNumber":458,"author":{"gitId":"-"},"content":"        public int getPerceived() {"},{"lineNumber":459,"author":{"gitId":"-"},"content":"            return perceived;"},{"lineNumber":460,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":461,"author":{"gitId":"-"},"content":""},{"lineNumber":462,"author":{"gitId":"-"},"content":"        public Map\u003cString, Integer\u003e getClaimedOthers() {"},{"lineNumber":463,"author":{"gitId":"-"},"content":"            return claimedOthers;"},{"lineNumber":464,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":465,"author":{"gitId":"-"},"content":""},{"lineNumber":466,"author":{"gitId":"-"},"content":"        public int[] getPerceivedOthers() {"},{"lineNumber":467,"author":{"gitId":"-"},"content":"            return perceivedOthers;"},{"lineNumber":468,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":469,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":470,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"hhdqirui":41,"-":429}},{"path":"src/main/java/teammates/common/datatransfer/questions/FeedbackMcqQuestionDetails.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.common.datatransfer.questions;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.util.ArrayList;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":5,"author":{"gitId":"-"},"content":""},{"lineNumber":6,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.FeedbackParticipantType;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;"},{"lineNumber":8,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.FeedbackQuestion;"},{"lineNumber":9,"author":{"gitId":"-"},"content":""},{"lineNumber":10,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":11,"author":{"gitId":"-"},"content":" * Contains specific structure and processing logic for MCQ feedback questions."},{"lineNumber":12,"author":{"gitId":"-"},"content":" */"},{"lineNumber":13,"author":{"gitId":"-"},"content":"public class FeedbackMcqQuestionDetails extends FeedbackQuestionDetails {"},{"lineNumber":14,"author":{"gitId":"-"},"content":""},{"lineNumber":15,"author":{"gitId":"-"},"content":"    static final String QUESTION_TYPE_NAME \u003d \"Multiple-choice (single answer) question\";"},{"lineNumber":16,"author":{"gitId":"-"},"content":"    static final int MCQ_MIN_NUM_OF_CHOICES \u003d 2;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"    static final String MCQ_ERROR_NOT_ENOUGH_CHOICES \u003d"},{"lineNumber":18,"author":{"gitId":"-"},"content":"            \"Too little choices for \" + QUESTION_TYPE_NAME + \". Minimum number of options is: \";"},{"lineNumber":19,"author":{"gitId":"-"},"content":"    static final String MCQ_ERROR_INVALID_OPTION \u003d"},{"lineNumber":20,"author":{"gitId":"-"},"content":"            \" is not a valid option for the \" + QUESTION_TYPE_NAME + \".\";"},{"lineNumber":21,"author":{"gitId":"-"},"content":"    static final String MCQ_ERROR_INVALID_WEIGHT \u003d"},{"lineNumber":22,"author":{"gitId":"-"},"content":"            \"The weights for the choices of a \" + QUESTION_TYPE_NAME"},{"lineNumber":23,"author":{"gitId":"-"},"content":"                    + \" must be valid non-negative numbers with precision up to 2 decimal places.\";"},{"lineNumber":24,"author":{"gitId":"-"},"content":"    static final String MCQ_ERROR_EMPTY_MCQ_OPTION \u003d \"The MCQ options cannot be empty\";"},{"lineNumber":25,"author":{"gitId":"-"},"content":"    static final String MCQ_ERROR_OTHER_CONTENT_NOT_PROVIDED \u003d \"No text provided for other option\";"},{"lineNumber":26,"author":{"gitId":"-"},"content":"    static final String MCQ_ERROR_DUPLICATE_MCQ_OPTION \u003d \"The MCQ options cannot be duplicate\";"},{"lineNumber":27,"author":{"gitId":"-"},"content":""},{"lineNumber":28,"author":{"gitId":"-"},"content":"    private boolean hasAssignedWeights;"},{"lineNumber":29,"author":{"gitId":"-"},"content":"    private List\u003cDouble\u003e mcqWeights;"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    private double mcqOtherWeight;"},{"lineNumber":31,"author":{"gitId":"-"},"content":"    private List\u003cString\u003e mcqChoices;"},{"lineNumber":32,"author":{"gitId":"-"},"content":"    private boolean otherEnabled;"},{"lineNumber":33,"author":{"gitId":"-"},"content":"    private boolean questionDropdownEnabled;"},{"lineNumber":34,"author":{"gitId":"-"},"content":"    private FeedbackParticipantType generateOptionsFor;"},{"lineNumber":35,"author":{"gitId":"-"},"content":""},{"lineNumber":36,"author":{"gitId":"-"},"content":"    public FeedbackMcqQuestionDetails() {"},{"lineNumber":37,"author":{"gitId":"-"},"content":"        this(null);"},{"lineNumber":38,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":39,"author":{"gitId":"-"},"content":""},{"lineNumber":40,"author":{"gitId":"-"},"content":"    public FeedbackMcqQuestionDetails(String questionText) {"},{"lineNumber":41,"author":{"gitId":"-"},"content":"        super(FeedbackQuestionType.MCQ, questionText);"},{"lineNumber":42,"author":{"gitId":"-"},"content":"        this.hasAssignedWeights \u003d false;"},{"lineNumber":43,"author":{"gitId":"-"},"content":"        this.mcqWeights \u003d new ArrayList\u003c\u003e();"},{"lineNumber":44,"author":{"gitId":"-"},"content":"        this.mcqChoices \u003d new ArrayList\u003c\u003e();"},{"lineNumber":45,"author":{"gitId":"-"},"content":"        this.otherEnabled \u003d false;"},{"lineNumber":46,"author":{"gitId":"-"},"content":"        this.questionDropdownEnabled \u003d false;"},{"lineNumber":47,"author":{"gitId":"-"},"content":"        this.mcqOtherWeight \u003d 0;"},{"lineNumber":48,"author":{"gitId":"-"},"content":"        this.generateOptionsFor \u003d FeedbackParticipantType.NONE;"},{"lineNumber":49,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":50,"author":{"gitId":"-"},"content":""},{"lineNumber":51,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":52,"author":{"gitId":"-"},"content":"    public boolean shouldChangesRequireResponseDeletion(FeedbackQuestionDetails newDetails) {"},{"lineNumber":53,"author":{"gitId":"-"},"content":"        FeedbackMcqQuestionDetails newMcqDetails \u003d (FeedbackMcqQuestionDetails) newDetails;"},{"lineNumber":54,"author":{"gitId":"-"},"content":""},{"lineNumber":55,"author":{"gitId":"-"},"content":"        if (this.mcqChoices.size() !\u003d newMcqDetails.mcqChoices.size()"},{"lineNumber":56,"author":{"gitId":"-"},"content":"                || !this.mcqChoices.containsAll(newMcqDetails.mcqChoices)"},{"lineNumber":57,"author":{"gitId":"-"},"content":"                || !newMcqDetails.mcqChoices.containsAll(this.mcqChoices)) {"},{"lineNumber":58,"author":{"gitId":"-"},"content":"            return true;"},{"lineNumber":59,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":60,"author":{"gitId":"-"},"content":""},{"lineNumber":61,"author":{"gitId":"-"},"content":"        if (this.generateOptionsFor !\u003d newMcqDetails.generateOptionsFor) {"},{"lineNumber":62,"author":{"gitId":"-"},"content":"            return true;"},{"lineNumber":63,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":64,"author":{"gitId":"-"},"content":""},{"lineNumber":65,"author":{"gitId":"-"},"content":"        return this.otherEnabled !\u003d newMcqDetails.otherEnabled;"},{"lineNumber":66,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":67,"author":{"gitId":"-"},"content":""},{"lineNumber":68,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":69,"author":{"gitId":"-"},"content":"    public List\u003cString\u003e validateQuestionDetails() {"},{"lineNumber":70,"author":{"gitId":"-"},"content":"        List\u003cString\u003e errors \u003d new ArrayList\u003c\u003e();"},{"lineNumber":71,"author":{"gitId":"-"},"content":"        if (generateOptionsFor \u003d\u003d FeedbackParticipantType.NONE) {"},{"lineNumber":72,"author":{"gitId":"-"},"content":""},{"lineNumber":73,"author":{"gitId":"-"},"content":"            if (mcqChoices.size() \u003c MCQ_MIN_NUM_OF_CHOICES) {"},{"lineNumber":74,"author":{"gitId":"-"},"content":"                errors.add(MCQ_ERROR_NOT_ENOUGH_CHOICES"},{"lineNumber":75,"author":{"gitId":"-"},"content":"                        + MCQ_MIN_NUM_OF_CHOICES + \".\");"},{"lineNumber":76,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":77,"author":{"gitId":"-"},"content":""},{"lineNumber":78,"author":{"gitId":"-"},"content":"            // If there are Empty Mcq options entered trigger this error"},{"lineNumber":79,"author":{"gitId":"-"},"content":"            boolean isEmptyMcqOptionEntered \u003d mcqChoices.stream().anyMatch(mcqText -\u003e \"\".equals(mcqText.trim()));"},{"lineNumber":80,"author":{"gitId":"-"},"content":"            if (isEmptyMcqOptionEntered) {"},{"lineNumber":81,"author":{"gitId":"-"},"content":"                errors.add(MCQ_ERROR_EMPTY_MCQ_OPTION);"},{"lineNumber":82,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":83,"author":{"gitId":"-"},"content":""},{"lineNumber":84,"author":{"gitId":"-"},"content":"            // If weights are enabled, number of choices and weights should be same."},{"lineNumber":85,"author":{"gitId":"-"},"content":"            // If user enters an invalid weight for a valid choice,"},{"lineNumber":86,"author":{"gitId":"-"},"content":"            // the mcqChoices.size() will be greater than mcqWeights.size(),"},{"lineNumber":87,"author":{"gitId":"-"},"content":"            // in that case, trigger this error."},{"lineNumber":88,"author":{"gitId":"-"},"content":"            if (hasAssignedWeights \u0026\u0026 mcqChoices.size() !\u003d mcqWeights.size()) {"},{"lineNumber":89,"author":{"gitId":"-"},"content":"                errors.add(MCQ_ERROR_INVALID_WEIGHT);"},{"lineNumber":90,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":91,"author":{"gitId":"-"},"content":""},{"lineNumber":92,"author":{"gitId":"-"},"content":"            // If weights are not enabled, but weight list is not empty or otherWeight is not 0"},{"lineNumber":93,"author":{"gitId":"-"},"content":"            // In that case, trigger this error."},{"lineNumber":94,"author":{"gitId":"-"},"content":"            if (!hasAssignedWeights \u0026\u0026 (!mcqWeights.isEmpty() || mcqOtherWeight !\u003d 0)) {"},{"lineNumber":95,"author":{"gitId":"-"},"content":"                errors.add(MCQ_ERROR_INVALID_WEIGHT);"},{"lineNumber":96,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":97,"author":{"gitId":"-"},"content":""},{"lineNumber":98,"author":{"gitId":"-"},"content":"            // If weights are enabled, but other option is disabled, and mcqOtherWeight is not 0"},{"lineNumber":99,"author":{"gitId":"-"},"content":"            // In that case, trigger this error."},{"lineNumber":100,"author":{"gitId":"-"},"content":"            if (hasAssignedWeights \u0026\u0026 !otherEnabled \u0026\u0026 mcqOtherWeight !\u003d 0) {"},{"lineNumber":101,"author":{"gitId":"-"},"content":"                errors.add(MCQ_ERROR_INVALID_WEIGHT);"},{"lineNumber":102,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":103,"author":{"gitId":"-"},"content":""},{"lineNumber":104,"author":{"gitId":"-"},"content":"            // If weights are enabled, and any of the weights have negative value,"},{"lineNumber":105,"author":{"gitId":"-"},"content":"            // trigger this error."},{"lineNumber":106,"author":{"gitId":"-"},"content":"            if (hasAssignedWeights \u0026\u0026 !mcqWeights.isEmpty()) {"},{"lineNumber":107,"author":{"gitId":"-"},"content":"                mcqWeights.stream()"},{"lineNumber":108,"author":{"gitId":"-"},"content":"                        .filter(weight -\u003e weight \u003c 0)"},{"lineNumber":109,"author":{"gitId":"-"},"content":"                        .forEach(weight -\u003e errors.add(MCQ_ERROR_INVALID_WEIGHT));"},{"lineNumber":110,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":111,"author":{"gitId":"-"},"content":""},{"lineNumber":112,"author":{"gitId":"-"},"content":"            // If \u0027Other\u0027 option is enabled, and other weight has negative value,"},{"lineNumber":113,"author":{"gitId":"-"},"content":"            // trigger this error."},{"lineNumber":114,"author":{"gitId":"-"},"content":"            if (hasAssignedWeights \u0026\u0026 otherEnabled \u0026\u0026 mcqOtherWeight \u003c 0) {"},{"lineNumber":115,"author":{"gitId":"-"},"content":"                errors.add(MCQ_ERROR_INVALID_WEIGHT);"},{"lineNumber":116,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":117,"author":{"gitId":"-"},"content":""},{"lineNumber":118,"author":{"gitId":"-"},"content":"            //If there are duplicate mcq options trigger this error"},{"lineNumber":119,"author":{"gitId":"-"},"content":"            boolean isDuplicateOptionsEntered \u003d mcqChoices.stream().map(String::trim).distinct().count()"},{"lineNumber":120,"author":{"gitId":"-"},"content":"                                                !\u003d mcqChoices.size();"},{"lineNumber":121,"author":{"gitId":"-"},"content":"            if (isDuplicateOptionsEntered) {"},{"lineNumber":122,"author":{"gitId":"-"},"content":"                errors.add(MCQ_ERROR_DUPLICATE_MCQ_OPTION);"},{"lineNumber":123,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":124,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":125,"author":{"gitId":"-"},"content":""},{"lineNumber":126,"author":{"gitId":"-"},"content":"        return errors;"},{"lineNumber":127,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":128,"author":{"gitId":"-"},"content":""},{"lineNumber":129,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":130,"author":{"gitId":"-"},"content":"    public List\u003cString\u003e validateResponsesDetails(List\u003cFeedbackResponseDetails\u003e responses, int numRecipients) {"},{"lineNumber":131,"author":{"gitId":"-"},"content":"        List\u003cString\u003e errors \u003d new ArrayList\u003c\u003e();"},{"lineNumber":132,"author":{"gitId":"-"},"content":""},{"lineNumber":133,"author":{"gitId":"-"},"content":"        for (FeedbackResponseDetails response : responses) {"},{"lineNumber":134,"author":{"gitId":"-"},"content":"            FeedbackMcqResponseDetails details \u003d (FeedbackMcqResponseDetails) response;"},{"lineNumber":135,"author":{"gitId":"-"},"content":""},{"lineNumber":136,"author":{"gitId":"-"},"content":"            // if other option is not selected and selected answer is not part of Mcq option list trigger this error."},{"lineNumber":137,"author":{"gitId":"-"},"content":"            if (!details.isOther() \u0026\u0026 !mcqChoices.contains(details.getAnswerString())) {"},{"lineNumber":138,"author":{"gitId":"-"},"content":"                errors.add(details.getAnswerString() + \" \" + MCQ_ERROR_INVALID_OPTION);"},{"lineNumber":139,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":140,"author":{"gitId":"-"},"content":""},{"lineNumber":141,"author":{"gitId":"-"},"content":"            // if other option is selected but not text is provided trigger this error"},{"lineNumber":142,"author":{"gitId":"-"},"content":"            if (details.isOther() \u0026\u0026 \"\".equals(details.getAnswerString().trim())) {"},{"lineNumber":143,"author":{"gitId":"-"},"content":"                errors.add(MCQ_ERROR_OTHER_CONTENT_NOT_PROVIDED);"},{"lineNumber":144,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":145,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":146,"author":{"gitId":"-"},"content":""},{"lineNumber":147,"author":{"gitId":"-"},"content":"        return errors;"},{"lineNumber":148,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":149,"author":{"gitId":"-"},"content":""},{"lineNumber":150,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":151,"author":{"gitId":"-"},"content":"    public boolean isFeedbackParticipantCommentsOnResponsesAllowed() {"},{"lineNumber":152,"author":{"gitId":"-"},"content":"        return true;"},{"lineNumber":153,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":154,"author":{"gitId":"-"},"content":""},{"lineNumber":155,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":156,"author":{"gitId":"-"},"content":"    public String validateGiverRecipientVisibility(FeedbackQuestionAttributes feedbackQuestionAttributes) {"},{"lineNumber":157,"author":{"gitId":"-"},"content":"        return \"\";"},{"lineNumber":158,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":159,"author":{"gitId":"-"},"content":""},{"lineNumber":160,"author":{"gitId":"hhdqirui"},"content":"    @Override"},{"lineNumber":161,"author":{"gitId":"hhdqirui"},"content":"    public String validateGiverRecipientVisibility(FeedbackQuestion feedbackQuestion) {"},{"lineNumber":162,"author":{"gitId":"hhdqirui"},"content":"        return \"\";"},{"lineNumber":163,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":164,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":165,"author":{"gitId":"-"},"content":"    public boolean isHasAssignedWeights() {"},{"lineNumber":166,"author":{"gitId":"-"},"content":"        return hasAssignedWeights;"},{"lineNumber":167,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":168,"author":{"gitId":"-"},"content":""},{"lineNumber":169,"author":{"gitId":"-"},"content":"    public void setHasAssignedWeights(boolean hasAssignedWeights) {"},{"lineNumber":170,"author":{"gitId":"-"},"content":"        this.hasAssignedWeights \u003d hasAssignedWeights;"},{"lineNumber":171,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":172,"author":{"gitId":"-"},"content":""},{"lineNumber":173,"author":{"gitId":"-"},"content":"    public List\u003cDouble\u003e getMcqWeights() {"},{"lineNumber":174,"author":{"gitId":"-"},"content":"        return mcqWeights;"},{"lineNumber":175,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":176,"author":{"gitId":"-"},"content":""},{"lineNumber":177,"author":{"gitId":"-"},"content":"    public void setMcqWeights(List\u003cDouble\u003e mcqWeights) {"},{"lineNumber":178,"author":{"gitId":"-"},"content":"        this.mcqWeights \u003d mcqWeights;"},{"lineNumber":179,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":180,"author":{"gitId":"-"},"content":""},{"lineNumber":181,"author":{"gitId":"-"},"content":"    public double getMcqOtherWeight() {"},{"lineNumber":182,"author":{"gitId":"-"},"content":"        return mcqOtherWeight;"},{"lineNumber":183,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":184,"author":{"gitId":"-"},"content":""},{"lineNumber":185,"author":{"gitId":"-"},"content":"    public void setMcqOtherWeight(double mcqOtherWeight) {"},{"lineNumber":186,"author":{"gitId":"-"},"content":"        this.mcqOtherWeight \u003d mcqOtherWeight;"},{"lineNumber":187,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":188,"author":{"gitId":"-"},"content":""},{"lineNumber":189,"author":{"gitId":"-"},"content":"    public int getNumOfMcqChoices() {"},{"lineNumber":190,"author":{"gitId":"-"},"content":"        return mcqChoices.size();"},{"lineNumber":191,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":192,"author":{"gitId":"-"},"content":""},{"lineNumber":193,"author":{"gitId":"-"},"content":"    public List\u003cString\u003e getMcqChoices() {"},{"lineNumber":194,"author":{"gitId":"-"},"content":"        return mcqChoices;"},{"lineNumber":195,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":196,"author":{"gitId":"-"},"content":""},{"lineNumber":197,"author":{"gitId":"-"},"content":"    public void setMcqChoices(List\u003cString\u003e mcqChoices) {"},{"lineNumber":198,"author":{"gitId":"-"},"content":"        this.mcqChoices \u003d mcqChoices;"},{"lineNumber":199,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":200,"author":{"gitId":"-"},"content":""},{"lineNumber":201,"author":{"gitId":"-"},"content":"    public boolean isOtherEnabled() {"},{"lineNumber":202,"author":{"gitId":"-"},"content":"        return otherEnabled;"},{"lineNumber":203,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":204,"author":{"gitId":"-"},"content":""},{"lineNumber":205,"author":{"gitId":"-"},"content":"    public void setOtherEnabled(boolean otherEnabled) {"},{"lineNumber":206,"author":{"gitId":"-"},"content":"        this.otherEnabled \u003d otherEnabled;"},{"lineNumber":207,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":208,"author":{"gitId":"-"},"content":""},{"lineNumber":209,"author":{"gitId":"-"},"content":"    public boolean isQuestionDropdownEnabled() {"},{"lineNumber":210,"author":{"gitId":"-"},"content":"        return questionDropdownEnabled;"},{"lineNumber":211,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":212,"author":{"gitId":"-"},"content":""},{"lineNumber":213,"author":{"gitId":"-"},"content":"    public void setQuestionDropdownEnabled(boolean questionDropdownEnabled) {"},{"lineNumber":214,"author":{"gitId":"-"},"content":"        this.questionDropdownEnabled \u003d questionDropdownEnabled;"},{"lineNumber":215,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":216,"author":{"gitId":"-"},"content":""},{"lineNumber":217,"author":{"gitId":"-"},"content":"    public FeedbackParticipantType getGenerateOptionsFor() {"},{"lineNumber":218,"author":{"gitId":"-"},"content":"        return generateOptionsFor;"},{"lineNumber":219,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":220,"author":{"gitId":"-"},"content":""},{"lineNumber":221,"author":{"gitId":"-"},"content":"    public void setGenerateOptionsFor(FeedbackParticipantType generateOptionsFor) {"},{"lineNumber":222,"author":{"gitId":"-"},"content":"        this.generateOptionsFor \u003d generateOptionsFor;"},{"lineNumber":223,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":224,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"hhdqirui":6,"-":218}},{"path":"src/main/java/teammates/common/datatransfer/questions/FeedbackMsqQuestionDetails.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.common.datatransfer.questions;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.util.ArrayList;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":5,"author":{"gitId":"-"},"content":""},{"lineNumber":6,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.FeedbackParticipantType;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":9,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.FeedbackQuestion;"},{"lineNumber":10,"author":{"gitId":"-"},"content":""},{"lineNumber":11,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":12,"author":{"gitId":"-"},"content":" * Contains specific structure and processing logic for MSQ feedback questions."},{"lineNumber":13,"author":{"gitId":"-"},"content":" */"},{"lineNumber":14,"author":{"gitId":"-"},"content":"public class FeedbackMsqQuestionDetails extends FeedbackQuestionDetails {"},{"lineNumber":15,"author":{"gitId":"-"},"content":""},{"lineNumber":16,"author":{"gitId":"-"},"content":"    static final String QUESTION_TYPE_NAME \u003d \"Multiple-choice (multiple answers) question\";"},{"lineNumber":17,"author":{"gitId":"-"},"content":"    static final int MSQ_MIN_NUM_OF_CHOICES \u003d 2;"},{"lineNumber":18,"author":{"gitId":"-"},"content":"    static final String MSQ_ERROR_EMPTY_MSQ_OPTION \u003d \"The MSQ options cannot be empty\";"},{"lineNumber":19,"author":{"gitId":"-"},"content":"    static final String MSQ_ERROR_OTHER_CONTENT_NOT_PROVIDED \u003d \"No text provided for other option\";"},{"lineNumber":20,"author":{"gitId":"-"},"content":"    static final String MSQ_ERROR_NONE_OF_THE_ABOVE_ANSWER \u003d"},{"lineNumber":21,"author":{"gitId":"-"},"content":"            \"No other choices are allowed with \\\"None of the above\\\" option\";"},{"lineNumber":22,"author":{"gitId":"-"},"content":"    static final String MSQ_ERROR_NOT_ENOUGH_CHOICES \u003d"},{"lineNumber":23,"author":{"gitId":"-"},"content":"            \"Too little choices for \" + QUESTION_TYPE_NAME + \". Minimum number of options is: \";"},{"lineNumber":24,"author":{"gitId":"-"},"content":"    static final String MSQ_ERROR_INVALID_OPTION \u003d"},{"lineNumber":25,"author":{"gitId":"-"},"content":"            \" is not a valid option for the \" + QUESTION_TYPE_NAME + \".\";"},{"lineNumber":26,"author":{"gitId":"-"},"content":"    static final String MSQ_ERROR_MAX_SELECTABLE_EXCEEDED_TOTAL \u003d"},{"lineNumber":27,"author":{"gitId":"-"},"content":"            \"Maximum selectable choices exceeds the total number of options for \" + QUESTION_TYPE_NAME;"},{"lineNumber":28,"author":{"gitId":"-"},"content":"    static final String MSQ_ERROR_NUM_SELECTED_MORE_THAN_MAXIMUM \u003d"},{"lineNumber":29,"author":{"gitId":"-"},"content":"            \"Number of choices selected is more than the maximum number \";"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    static final String MSQ_ERROR_MIN_SELECTABLE_MORE_THAN_NUM_CHOICES \u003d"},{"lineNumber":31,"author":{"gitId":"-"},"content":"            \"Minimum selectable choices exceeds number of options \";"},{"lineNumber":32,"author":{"gitId":"-"},"content":"    static final String MSQ_ERROR_NUM_SELECTED_LESS_THAN_MINIMUM \u003d"},{"lineNumber":33,"author":{"gitId":"-"},"content":"            \"Number of choices selected is less than the minimum number \";"},{"lineNumber":34,"author":{"gitId":"-"},"content":"    static final String MSQ_ERROR_MIN_SELECTABLE_EXCEEDED_MAX_SELECTABLE \u003d"},{"lineNumber":35,"author":{"gitId":"-"},"content":"            \"Minimum selectable choices exceeds maximum selectable choices for \" + QUESTION_TYPE_NAME;"},{"lineNumber":36,"author":{"gitId":"-"},"content":"    static final String MSQ_ERROR_MIN_FOR_MAX_SELECTABLE_CHOICES \u003d"},{"lineNumber":37,"author":{"gitId":"-"},"content":"            \"Maximum selectable choices for \" + QUESTION_TYPE_NAME + \" must be at least 2.\";"},{"lineNumber":38,"author":{"gitId":"-"},"content":"    static final String MSQ_ERROR_MIN_FOR_MIN_SELECTABLE_CHOICES \u003d"},{"lineNumber":39,"author":{"gitId":"-"},"content":"            \"Minimum selectable choices for \" + QUESTION_TYPE_NAME + \" must be at least 1.\";"},{"lineNumber":40,"author":{"gitId":"-"},"content":"    static final String MSQ_ERROR_INVALID_WEIGHT \u003d"},{"lineNumber":41,"author":{"gitId":"-"},"content":"            \"The weights for the choices of a \" + QUESTION_TYPE_NAME"},{"lineNumber":42,"author":{"gitId":"-"},"content":"                    + \" must be valid numbers with precision up to 2 decimal places.\";"},{"lineNumber":43,"author":{"gitId":"-"},"content":"    static final String MSQ_ANSWER_NONE_OF_THE_ABOVE \u003d \"\";"},{"lineNumber":44,"author":{"gitId":"-"},"content":"    static final String MSQ_ERROR_DUPLICATE_MSQ_OPTION \u003d \"The MSQ options cannot be duplicate\";"},{"lineNumber":45,"author":{"gitId":"-"},"content":""},{"lineNumber":46,"author":{"gitId":"-"},"content":"    private List\u003cString\u003e msqChoices;"},{"lineNumber":47,"author":{"gitId":"-"},"content":"    private boolean otherEnabled;"},{"lineNumber":48,"author":{"gitId":"-"},"content":"    private boolean hasAssignedWeights;"},{"lineNumber":49,"author":{"gitId":"-"},"content":"    private List\u003cDouble\u003e msqWeights;"},{"lineNumber":50,"author":{"gitId":"-"},"content":"    private double msqOtherWeight;"},{"lineNumber":51,"author":{"gitId":"-"},"content":"    private FeedbackParticipantType generateOptionsFor;"},{"lineNumber":52,"author":{"gitId":"-"},"content":"    private int maxSelectableChoices;"},{"lineNumber":53,"author":{"gitId":"-"},"content":"    private int minSelectableChoices;"},{"lineNumber":54,"author":{"gitId":"-"},"content":""},{"lineNumber":55,"author":{"gitId":"-"},"content":"    public FeedbackMsqQuestionDetails() {"},{"lineNumber":56,"author":{"gitId":"-"},"content":"        this(null);"},{"lineNumber":57,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":58,"author":{"gitId":"-"},"content":""},{"lineNumber":59,"author":{"gitId":"-"},"content":"    public FeedbackMsqQuestionDetails(String questionText) {"},{"lineNumber":60,"author":{"gitId":"-"},"content":"        super(FeedbackQuestionType.MSQ, questionText);"},{"lineNumber":61,"author":{"gitId":"-"},"content":"        this.msqChoices \u003d new ArrayList\u003c\u003e();"},{"lineNumber":62,"author":{"gitId":"-"},"content":"        this.otherEnabled \u003d false;"},{"lineNumber":63,"author":{"gitId":"-"},"content":"        this.generateOptionsFor \u003d FeedbackParticipantType.NONE;"},{"lineNumber":64,"author":{"gitId":"-"},"content":"        this.maxSelectableChoices \u003d Const.POINTS_NO_VALUE;"},{"lineNumber":65,"author":{"gitId":"-"},"content":"        this.minSelectableChoices \u003d Const.POINTS_NO_VALUE;"},{"lineNumber":66,"author":{"gitId":"-"},"content":"        this.hasAssignedWeights \u003d false;"},{"lineNumber":67,"author":{"gitId":"-"},"content":"        this.msqWeights \u003d new ArrayList\u003c\u003e();"},{"lineNumber":68,"author":{"gitId":"-"},"content":"        this.msqOtherWeight \u003d 0;"},{"lineNumber":69,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":70,"author":{"gitId":"-"},"content":""},{"lineNumber":71,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":72,"author":{"gitId":"-"},"content":"    public boolean shouldChangesRequireResponseDeletion(FeedbackQuestionDetails newDetails) {"},{"lineNumber":73,"author":{"gitId":"-"},"content":"        FeedbackMsqQuestionDetails newMsqDetails \u003d (FeedbackMsqQuestionDetails) newDetails;"},{"lineNumber":74,"author":{"gitId":"-"},"content":""},{"lineNumber":75,"author":{"gitId":"-"},"content":"        if (this.msqChoices.size() !\u003d newMsqDetails.msqChoices.size()"},{"lineNumber":76,"author":{"gitId":"-"},"content":"                || !this.msqChoices.containsAll(newMsqDetails.msqChoices)"},{"lineNumber":77,"author":{"gitId":"-"},"content":"                || !newMsqDetails.msqChoices.containsAll(this.msqChoices)) {"},{"lineNumber":78,"author":{"gitId":"-"},"content":"            return true;"},{"lineNumber":79,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":80,"author":{"gitId":"-"},"content":""},{"lineNumber":81,"author":{"gitId":"-"},"content":"        if (this.generateOptionsFor !\u003d newMsqDetails.generateOptionsFor) {"},{"lineNumber":82,"author":{"gitId":"-"},"content":"            return true;"},{"lineNumber":83,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":84,"author":{"gitId":"-"},"content":""},{"lineNumber":85,"author":{"gitId":"-"},"content":"        if (this.maxSelectableChoices \u003d\u003d Const.POINTS_NO_VALUE"},{"lineNumber":86,"author":{"gitId":"-"},"content":"                \u0026\u0026 newMsqDetails.maxSelectableChoices !\u003d Const.POINTS_NO_VALUE) {"},{"lineNumber":87,"author":{"gitId":"-"},"content":"            // Delete responses if max selectable restriction is newly added"},{"lineNumber":88,"author":{"gitId":"-"},"content":"            return true;"},{"lineNumber":89,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":90,"author":{"gitId":"-"},"content":""},{"lineNumber":91,"author":{"gitId":"-"},"content":"        if (this.minSelectableChoices \u003d\u003d Const.POINTS_NO_VALUE"},{"lineNumber":92,"author":{"gitId":"-"},"content":"                \u0026\u0026 newMsqDetails.minSelectableChoices !\u003d Const.POINTS_NO_VALUE) {"},{"lineNumber":93,"author":{"gitId":"-"},"content":"            // Delete responses if min selectable restriction is newly added"},{"lineNumber":94,"author":{"gitId":"-"},"content":"            return true;"},{"lineNumber":95,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":96,"author":{"gitId":"-"},"content":""},{"lineNumber":97,"author":{"gitId":"-"},"content":"        if (this.minSelectableChoices !\u003d Const.POINTS_NO_VALUE"},{"lineNumber":98,"author":{"gitId":"-"},"content":"                \u0026\u0026 newMsqDetails.minSelectableChoices !\u003d Const.POINTS_NO_VALUE"},{"lineNumber":99,"author":{"gitId":"-"},"content":"                \u0026\u0026 this.minSelectableChoices \u003c newMsqDetails.minSelectableChoices) {"},{"lineNumber":100,"author":{"gitId":"-"},"content":"            // A more strict min selectable choices restriction is placed"},{"lineNumber":101,"author":{"gitId":"-"},"content":"            return true;"},{"lineNumber":102,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":103,"author":{"gitId":"-"},"content":""},{"lineNumber":104,"author":{"gitId":"-"},"content":"        if (this.maxSelectableChoices !\u003d Const.POINTS_NO_VALUE"},{"lineNumber":105,"author":{"gitId":"-"},"content":"                \u0026\u0026 newMsqDetails.maxSelectableChoices !\u003d Const.POINTS_NO_VALUE"},{"lineNumber":106,"author":{"gitId":"-"},"content":"                \u0026\u0026 this.maxSelectableChoices \u003e newMsqDetails.maxSelectableChoices) {"},{"lineNumber":107,"author":{"gitId":"-"},"content":"            // A more strict max selectable choices restriction is placed"},{"lineNumber":108,"author":{"gitId":"-"},"content":"            return true;"},{"lineNumber":109,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":110,"author":{"gitId":"-"},"content":""},{"lineNumber":111,"author":{"gitId":"-"},"content":"        return this.otherEnabled !\u003d newMsqDetails.otherEnabled;"},{"lineNumber":112,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":113,"author":{"gitId":"-"},"content":""},{"lineNumber":114,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":115,"author":{"gitId":"-"},"content":"    public List\u003cString\u003e validateQuestionDetails() {"},{"lineNumber":116,"author":{"gitId":"-"},"content":"        List\u003cString\u003e errors \u003d new ArrayList\u003c\u003e();"},{"lineNumber":117,"author":{"gitId":"-"},"content":"        if (generateOptionsFor \u003d\u003d FeedbackParticipantType.NONE) {"},{"lineNumber":118,"author":{"gitId":"-"},"content":""},{"lineNumber":119,"author":{"gitId":"-"},"content":"            if (msqChoices.size() \u003c MSQ_MIN_NUM_OF_CHOICES) {"},{"lineNumber":120,"author":{"gitId":"-"},"content":"                errors.add(MSQ_ERROR_NOT_ENOUGH_CHOICES"},{"lineNumber":121,"author":{"gitId":"-"},"content":"                           + MSQ_MIN_NUM_OF_CHOICES + \".\");"},{"lineNumber":122,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":123,"author":{"gitId":"-"},"content":""},{"lineNumber":124,"author":{"gitId":"-"},"content":"            // If there are Empty Msq options entered trigger this error"},{"lineNumber":125,"author":{"gitId":"-"},"content":"            boolean isEmptyMsqOptionEntered \u003d msqChoices.stream().anyMatch(msqText -\u003e \"\".equals(msqText.trim()));"},{"lineNumber":126,"author":{"gitId":"-"},"content":"            if (isEmptyMsqOptionEntered) {"},{"lineNumber":127,"author":{"gitId":"-"},"content":"                errors.add(MSQ_ERROR_EMPTY_MSQ_OPTION);"},{"lineNumber":128,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":129,"author":{"gitId":"-"},"content":""},{"lineNumber":130,"author":{"gitId":"-"},"content":"            // If weights are enabled, number of choices and weights should be same."},{"lineNumber":131,"author":{"gitId":"-"},"content":"            // If a user enters an invalid weight for a valid choice,"},{"lineNumber":132,"author":{"gitId":"-"},"content":"            // the msqChoices.size() will be greater than msqWeights.size(), in that case"},{"lineNumber":133,"author":{"gitId":"-"},"content":"            // trigger this error."},{"lineNumber":134,"author":{"gitId":"-"},"content":"            if (hasAssignedWeights \u0026\u0026 msqChoices.size() !\u003d msqWeights.size()) {"},{"lineNumber":135,"author":{"gitId":"-"},"content":"                errors.add(MSQ_ERROR_INVALID_WEIGHT);"},{"lineNumber":136,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":137,"author":{"gitId":"-"},"content":""},{"lineNumber":138,"author":{"gitId":"-"},"content":"            // If weights are not enabled, but weight list is not empty or otherWeight is not 0"},{"lineNumber":139,"author":{"gitId":"-"},"content":"            // In that case, trigger this error."},{"lineNumber":140,"author":{"gitId":"-"},"content":"            if (!hasAssignedWeights \u0026\u0026 (!msqWeights.isEmpty() || msqOtherWeight !\u003d 0)) {"},{"lineNumber":141,"author":{"gitId":"-"},"content":"                errors.add(MSQ_ERROR_INVALID_WEIGHT);"},{"lineNumber":142,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":143,"author":{"gitId":"-"},"content":""},{"lineNumber":144,"author":{"gitId":"-"},"content":"            // If weight is enabled, but other option is disabled, and msqOtherWeight is not 0"},{"lineNumber":145,"author":{"gitId":"-"},"content":"            // In that case, trigger this error."},{"lineNumber":146,"author":{"gitId":"-"},"content":"            if (hasAssignedWeights \u0026\u0026 !otherEnabled \u0026\u0026 msqOtherWeight !\u003d 0) {"},{"lineNumber":147,"author":{"gitId":"-"},"content":"                errors.add(MSQ_ERROR_INVALID_WEIGHT);"},{"lineNumber":148,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":149,"author":{"gitId":"-"},"content":""},{"lineNumber":150,"author":{"gitId":"-"},"content":"            // If weights are negative, trigger this error."},{"lineNumber":151,"author":{"gitId":"-"},"content":"            if (hasAssignedWeights \u0026\u0026 !msqWeights.isEmpty()) {"},{"lineNumber":152,"author":{"gitId":"-"},"content":"                msqWeights.stream()"},{"lineNumber":153,"author":{"gitId":"-"},"content":"                        .filter(weight -\u003e weight \u003c 0)"},{"lineNumber":154,"author":{"gitId":"-"},"content":"                        .forEach(weight -\u003e errors.add(MSQ_ERROR_INVALID_WEIGHT));"},{"lineNumber":155,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":156,"author":{"gitId":"-"},"content":""},{"lineNumber":157,"author":{"gitId":"-"},"content":"            // If \u0027Other\u0027 option is enabled, and other weight has negative value,"},{"lineNumber":158,"author":{"gitId":"-"},"content":"            // trigger this error."},{"lineNumber":159,"author":{"gitId":"-"},"content":"            if (hasAssignedWeights \u0026\u0026 otherEnabled \u0026\u0026 msqOtherWeight \u003c 0) {"},{"lineNumber":160,"author":{"gitId":"-"},"content":"                errors.add(MSQ_ERROR_INVALID_WEIGHT);"},{"lineNumber":161,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":162,"author":{"gitId":"-"},"content":""},{"lineNumber":163,"author":{"gitId":"-"},"content":"            //If there are duplicate mcq options trigger this error"},{"lineNumber":164,"author":{"gitId":"-"},"content":"            boolean isDuplicateOptionsEntered \u003d msqChoices.stream().map(String::trim).distinct().count()"},{"lineNumber":165,"author":{"gitId":"-"},"content":"                                                !\u003d msqChoices.size();"},{"lineNumber":166,"author":{"gitId":"-"},"content":"            if (isDuplicateOptionsEntered) {"},{"lineNumber":167,"author":{"gitId":"-"},"content":"                errors.add(MSQ_ERROR_DUPLICATE_MSQ_OPTION);"},{"lineNumber":168,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":169,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":170,"author":{"gitId":"-"},"content":""},{"lineNumber":171,"author":{"gitId":"-"},"content":"        boolean isMaxSelectableChoicesEnabled \u003d maxSelectableChoices !\u003d Const.POINTS_NO_VALUE;"},{"lineNumber":172,"author":{"gitId":"-"},"content":"        boolean isMinSelectableChoicesEnabled \u003d minSelectableChoices !\u003d Const.POINTS_NO_VALUE;"},{"lineNumber":173,"author":{"gitId":"-"},"content":"        boolean isMsqChoiceValidatable \u003d generateOptionsFor \u003d\u003d FeedbackParticipantType.NONE;"},{"lineNumber":174,"author":{"gitId":"-"},"content":""},{"lineNumber":175,"author":{"gitId":"-"},"content":"        int numOfMsqChoices \u003d msqChoices.size() + (otherEnabled ? 1 : 0);"},{"lineNumber":176,"author":{"gitId":"-"},"content":"        if (isMsqChoiceValidatable \u0026\u0026 isMaxSelectableChoicesEnabled) {"},{"lineNumber":177,"author":{"gitId":"-"},"content":"            if (numOfMsqChoices \u003c maxSelectableChoices) {"},{"lineNumber":178,"author":{"gitId":"-"},"content":"                errors.add(MSQ_ERROR_MAX_SELECTABLE_EXCEEDED_TOTAL);"},{"lineNumber":179,"author":{"gitId":"-"},"content":"            } else if (maxSelectableChoices \u003c 2) {"},{"lineNumber":180,"author":{"gitId":"-"},"content":"                errors.add(MSQ_ERROR_MIN_FOR_MAX_SELECTABLE_CHOICES);"},{"lineNumber":181,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":182,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":183,"author":{"gitId":"-"},"content":""},{"lineNumber":184,"author":{"gitId":"-"},"content":"        if (isMsqChoiceValidatable \u0026\u0026 isMinSelectableChoicesEnabled) {"},{"lineNumber":185,"author":{"gitId":"-"},"content":"            if (minSelectableChoices \u003c 1) {"},{"lineNumber":186,"author":{"gitId":"-"},"content":"                errors.add(MSQ_ERROR_MIN_FOR_MIN_SELECTABLE_CHOICES);"},{"lineNumber":187,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":188,"author":{"gitId":"-"},"content":"            if (minSelectableChoices \u003e numOfMsqChoices) {"},{"lineNumber":189,"author":{"gitId":"-"},"content":"                errors.add(MSQ_ERROR_MIN_SELECTABLE_MORE_THAN_NUM_CHOICES);"},{"lineNumber":190,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":191,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":192,"author":{"gitId":"-"},"content":""},{"lineNumber":193,"author":{"gitId":"-"},"content":"        if (isMaxSelectableChoicesEnabled \u0026\u0026 isMinSelectableChoicesEnabled"},{"lineNumber":194,"author":{"gitId":"-"},"content":"                \u0026\u0026 minSelectableChoices \u003e maxSelectableChoices) {"},{"lineNumber":195,"author":{"gitId":"-"},"content":"            errors.add(MSQ_ERROR_MIN_SELECTABLE_EXCEEDED_MAX_SELECTABLE);"},{"lineNumber":196,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":197,"author":{"gitId":"-"},"content":""},{"lineNumber":198,"author":{"gitId":"-"},"content":"        return errors;"},{"lineNumber":199,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":200,"author":{"gitId":"-"},"content":""},{"lineNumber":201,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":202,"author":{"gitId":"-"},"content":"    public List\u003cString\u003e validateResponsesDetails(List\u003cFeedbackResponseDetails\u003e responses, int numRecipients) {"},{"lineNumber":203,"author":{"gitId":"-"},"content":"        List\u003cString\u003e errors \u003d new ArrayList\u003c\u003e();"},{"lineNumber":204,"author":{"gitId":"-"},"content":""},{"lineNumber":205,"author":{"gitId":"-"},"content":"        for (FeedbackResponseDetails response : responses) {"},{"lineNumber":206,"author":{"gitId":"-"},"content":"            FeedbackMsqResponseDetails details \u003d (FeedbackMsqResponseDetails) response;"},{"lineNumber":207,"author":{"gitId":"-"},"content":""},{"lineNumber":208,"author":{"gitId":"-"},"content":"            // number of Msq options selected including other option"},{"lineNumber":209,"author":{"gitId":"-"},"content":"            int totalChoicesSelected \u003d details.getAnswers().size();"},{"lineNumber":210,"author":{"gitId":"-"},"content":"            boolean isMaxSelectableEnabled \u003d maxSelectableChoices !\u003d Const.POINTS_NO_VALUE;"},{"lineNumber":211,"author":{"gitId":"-"},"content":"            boolean isMinSelectableEnabled \u003d minSelectableChoices !\u003d Const.POINTS_NO_VALUE;"},{"lineNumber":212,"author":{"gitId":"-"},"content":"            boolean isNoneOfTheAboveOptionEnabled \u003d"},{"lineNumber":213,"author":{"gitId":"-"},"content":"                    details.getAnswers().contains(MSQ_ANSWER_NONE_OF_THE_ABOVE);"},{"lineNumber":214,"author":{"gitId":"-"},"content":""},{"lineNumber":215,"author":{"gitId":"-"},"content":"            // if other is not enabled and other is selected as an answer trigger this error"},{"lineNumber":216,"author":{"gitId":"-"},"content":"            if (details.isOther() \u0026\u0026 !otherEnabled) {"},{"lineNumber":217,"author":{"gitId":"-"},"content":"                errors.add(MSQ_ERROR_INVALID_OPTION);"},{"lineNumber":218,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":219,"author":{"gitId":"-"},"content":""},{"lineNumber":220,"author":{"gitId":"-"},"content":"            // if other is not chosen while other field is not empty trigger this error"},{"lineNumber":221,"author":{"gitId":"-"},"content":"            if (otherEnabled \u0026\u0026 !details.isOther() \u0026\u0026 !details.getOtherFieldContent().isEmpty()) {"},{"lineNumber":222,"author":{"gitId":"-"},"content":"                errors.add(MSQ_ERROR_INVALID_OPTION);"},{"lineNumber":223,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":224,"author":{"gitId":"-"},"content":""},{"lineNumber":225,"author":{"gitId":"-"},"content":"            List\u003cString\u003e validChoices \u003d new ArrayList\u003c\u003e(msqChoices);"},{"lineNumber":226,"author":{"gitId":"-"},"content":"            if (otherEnabled \u0026\u0026 details.isOther()) {"},{"lineNumber":227,"author":{"gitId":"-"},"content":"                // other field content becomes a valid choice if other is enabled"},{"lineNumber":228,"author":{"gitId":"-"},"content":"                validChoices.add(details.getOtherFieldContent());"},{"lineNumber":229,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":230,"author":{"gitId":"-"},"content":"            // if selected answers are not a part of the Msq option list trigger this error"},{"lineNumber":231,"author":{"gitId":"-"},"content":"            boolean isAnswersPartOfChoices \u003d validChoices.containsAll(details.getAnswers());"},{"lineNumber":232,"author":{"gitId":"-"},"content":"            if (!isAnswersPartOfChoices \u0026\u0026 !isNoneOfTheAboveOptionEnabled) {"},{"lineNumber":233,"author":{"gitId":"-"},"content":"                errors.add(details.getAnswerString() + \" \" + MSQ_ERROR_INVALID_OPTION);"},{"lineNumber":234,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":235,"author":{"gitId":"-"},"content":""},{"lineNumber":236,"author":{"gitId":"-"},"content":"            // if other option is selected but no text is provided trigger this error"},{"lineNumber":237,"author":{"gitId":"-"},"content":"            if (details.isOther() \u0026\u0026 \"\".equals(details.getOtherFieldContent().trim())) {"},{"lineNumber":238,"author":{"gitId":"-"},"content":"                errors.add(MSQ_ERROR_OTHER_CONTENT_NOT_PROVIDED);"},{"lineNumber":239,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":240,"author":{"gitId":"-"},"content":""},{"lineNumber":241,"author":{"gitId":"-"},"content":"            // if other option is selected but not in the answer list trigger this error"},{"lineNumber":242,"author":{"gitId":"-"},"content":"            if (details.isOther() \u0026\u0026 !details.getAnswers().contains(details.getOtherFieldContent())) {"},{"lineNumber":243,"author":{"gitId":"-"},"content":"                errors.add(MSQ_ERROR_OTHER_CONTENT_NOT_PROVIDED);"},{"lineNumber":244,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":245,"author":{"gitId":"-"},"content":""},{"lineNumber":246,"author":{"gitId":"-"},"content":"            // if total choices selected exceed maximum choices allowed trigger this error"},{"lineNumber":247,"author":{"gitId":"-"},"content":"            if (isMaxSelectableEnabled \u0026\u0026 totalChoicesSelected \u003e maxSelectableChoices) {"},{"lineNumber":248,"author":{"gitId":"-"},"content":"                errors.add(MSQ_ERROR_NUM_SELECTED_MORE_THAN_MAXIMUM + maxSelectableChoices);"},{"lineNumber":249,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":250,"author":{"gitId":"-"},"content":""},{"lineNumber":251,"author":{"gitId":"-"},"content":"            if (isMinSelectableEnabled) {"},{"lineNumber":252,"author":{"gitId":"-"},"content":"                // if total choices selected is less than the minimum required choices"},{"lineNumber":253,"author":{"gitId":"-"},"content":"                if (totalChoicesSelected \u003c minSelectableChoices) {"},{"lineNumber":254,"author":{"gitId":"-"},"content":"                    errors.add(MSQ_ERROR_NUM_SELECTED_LESS_THAN_MINIMUM + minSelectableChoices);"},{"lineNumber":255,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":256,"author":{"gitId":"-"},"content":"                // if minimumSelectableChoices is enabled and None of the Above is selected as an answer trigger this error"},{"lineNumber":257,"author":{"gitId":"-"},"content":"                if (isNoneOfTheAboveOptionEnabled) {"},{"lineNumber":258,"author":{"gitId":"-"},"content":"                    errors.add(MSQ_ERROR_INVALID_OPTION);"},{"lineNumber":259,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":260,"author":{"gitId":"-"},"content":"            } else {"},{"lineNumber":261,"author":{"gitId":"-"},"content":"                // if none of the above is selected AND other options are selected trigger this error"},{"lineNumber":262,"author":{"gitId":"-"},"content":"                if ((details.getAnswers().size() \u003e 1 || details.isOther()) \u0026\u0026 isNoneOfTheAboveOptionEnabled) {"},{"lineNumber":263,"author":{"gitId":"-"},"content":"                    errors.add(MSQ_ERROR_NONE_OF_THE_ABOVE_ANSWER);"},{"lineNumber":264,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":265,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":266,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":267,"author":{"gitId":"-"},"content":"        return errors;"},{"lineNumber":268,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":269,"author":{"gitId":"-"},"content":""},{"lineNumber":270,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":271,"author":{"gitId":"-"},"content":"    public boolean isFeedbackParticipantCommentsOnResponsesAllowed() {"},{"lineNumber":272,"author":{"gitId":"-"},"content":"        return true;"},{"lineNumber":273,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":274,"author":{"gitId":"-"},"content":""},{"lineNumber":275,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":276,"author":{"gitId":"-"},"content":"    public String validateGiverRecipientVisibility(FeedbackQuestionAttributes feedbackQuestionAttributes) {"},{"lineNumber":277,"author":{"gitId":"-"},"content":"        return \"\";"},{"lineNumber":278,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":279,"author":{"gitId":"-"},"content":""},{"lineNumber":280,"author":{"gitId":"hhdqirui"},"content":"    @Override"},{"lineNumber":281,"author":{"gitId":"hhdqirui"},"content":"    public String validateGiverRecipientVisibility(FeedbackQuestion feedbackQuestion) {"},{"lineNumber":282,"author":{"gitId":"hhdqirui"},"content":"        return \"\";"},{"lineNumber":283,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":284,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":285,"author":{"gitId":"-"},"content":"    public List\u003cString\u003e getMsqChoices() {"},{"lineNumber":286,"author":{"gitId":"-"},"content":"        return msqChoices;"},{"lineNumber":287,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":288,"author":{"gitId":"-"},"content":""},{"lineNumber":289,"author":{"gitId":"-"},"content":"    public void setMsqChoices(List\u003cString\u003e msqChoices) {"},{"lineNumber":290,"author":{"gitId":"-"},"content":"        this.msqChoices \u003d msqChoices;"},{"lineNumber":291,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":292,"author":{"gitId":"-"},"content":""},{"lineNumber":293,"author":{"gitId":"-"},"content":"    public boolean isOtherEnabled() {"},{"lineNumber":294,"author":{"gitId":"-"},"content":"        return otherEnabled;"},{"lineNumber":295,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":296,"author":{"gitId":"-"},"content":""},{"lineNumber":297,"author":{"gitId":"-"},"content":"    public void setOtherEnabled(boolean otherEnabled) {"},{"lineNumber":298,"author":{"gitId":"-"},"content":"        this.otherEnabled \u003d otherEnabled;"},{"lineNumber":299,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":300,"author":{"gitId":"-"},"content":""},{"lineNumber":301,"author":{"gitId":"-"},"content":"    public boolean isHasAssignedWeights() {"},{"lineNumber":302,"author":{"gitId":"-"},"content":"        return hasAssignedWeights;"},{"lineNumber":303,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":304,"author":{"gitId":"-"},"content":""},{"lineNumber":305,"author":{"gitId":"-"},"content":"    public void setHasAssignedWeights(boolean hasAssignedWeights) {"},{"lineNumber":306,"author":{"gitId":"-"},"content":"        this.hasAssignedWeights \u003d hasAssignedWeights;"},{"lineNumber":307,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":308,"author":{"gitId":"-"},"content":""},{"lineNumber":309,"author":{"gitId":"-"},"content":"    public List\u003cDouble\u003e getMsqWeights() {"},{"lineNumber":310,"author":{"gitId":"-"},"content":"        return msqWeights;"},{"lineNumber":311,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":312,"author":{"gitId":"-"},"content":""},{"lineNumber":313,"author":{"gitId":"-"},"content":"    public void setMsqWeights(List\u003cDouble\u003e msqWeights) {"},{"lineNumber":314,"author":{"gitId":"-"},"content":"        this.msqWeights \u003d msqWeights;"},{"lineNumber":315,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":316,"author":{"gitId":"-"},"content":""},{"lineNumber":317,"author":{"gitId":"-"},"content":"    public double getMsqOtherWeight() {"},{"lineNumber":318,"author":{"gitId":"-"},"content":"        return msqOtherWeight;"},{"lineNumber":319,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":320,"author":{"gitId":"-"},"content":""},{"lineNumber":321,"author":{"gitId":"-"},"content":"    public void setMsqOtherWeight(double msqOtherWeight) {"},{"lineNumber":322,"author":{"gitId":"-"},"content":"        this.msqOtherWeight \u003d msqOtherWeight;"},{"lineNumber":323,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":324,"author":{"gitId":"-"},"content":""},{"lineNumber":325,"author":{"gitId":"-"},"content":"    public FeedbackParticipantType getGenerateOptionsFor() {"},{"lineNumber":326,"author":{"gitId":"-"},"content":"        return generateOptionsFor;"},{"lineNumber":327,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":328,"author":{"gitId":"-"},"content":""},{"lineNumber":329,"author":{"gitId":"-"},"content":"    public void setGenerateOptionsFor(FeedbackParticipantType generateOptionsFor) {"},{"lineNumber":330,"author":{"gitId":"-"},"content":"        this.generateOptionsFor \u003d generateOptionsFor;"},{"lineNumber":331,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":332,"author":{"gitId":"-"},"content":""},{"lineNumber":333,"author":{"gitId":"-"},"content":"    public int getMaxSelectableChoices() {"},{"lineNumber":334,"author":{"gitId":"-"},"content":"        return maxSelectableChoices;"},{"lineNumber":335,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":336,"author":{"gitId":"-"},"content":""},{"lineNumber":337,"author":{"gitId":"-"},"content":"    public void setMaxSelectableChoices(int maxSelectableChoices) {"},{"lineNumber":338,"author":{"gitId":"-"},"content":"        this.maxSelectableChoices \u003d maxSelectableChoices;"},{"lineNumber":339,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":340,"author":{"gitId":"-"},"content":""},{"lineNumber":341,"author":{"gitId":"-"},"content":"    public int getMinSelectableChoices() {"},{"lineNumber":342,"author":{"gitId":"-"},"content":"        return minSelectableChoices;"},{"lineNumber":343,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":344,"author":{"gitId":"-"},"content":""},{"lineNumber":345,"author":{"gitId":"-"},"content":"    public void setMinSelectableChoices(int minSelectableChoices) {"},{"lineNumber":346,"author":{"gitId":"-"},"content":"        this.minSelectableChoices \u003d minSelectableChoices;"},{"lineNumber":347,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":348,"author":{"gitId":"-"},"content":""},{"lineNumber":349,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"hhdqirui":6,"-":343}},{"path":"src/main/java/teammates/common/datatransfer/questions/FeedbackNumericalScaleQuestionDetails.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.common.datatransfer.questions;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.math.BigDecimal;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.math.RoundingMode;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.util.ArrayList;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":7,"author":{"gitId":"-"},"content":""},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;"},{"lineNumber":9,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.FeedbackQuestion;"},{"lineNumber":10,"author":{"gitId":"-"},"content":""},{"lineNumber":11,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":12,"author":{"gitId":"-"},"content":" * Contains specific structure and processing logic for numerical scale feedback questions."},{"lineNumber":13,"author":{"gitId":"-"},"content":" */"},{"lineNumber":14,"author":{"gitId":"-"},"content":"public class FeedbackNumericalScaleQuestionDetails extends FeedbackQuestionDetails {"},{"lineNumber":15,"author":{"gitId":"-"},"content":""},{"lineNumber":16,"author":{"gitId":"-"},"content":"    static final String QUESTION_TYPE_NAME \u003d \"Numerical-scale question\";"},{"lineNumber":17,"author":{"gitId":"-"},"content":"    static final String NUMSCALE_ERROR_MIN_MAX \u003d \"Minimum value must be \u003c maximum value for \" + QUESTION_TYPE_NAME + \".\";"},{"lineNumber":18,"author":{"gitId":"-"},"content":"    static final String NUMSCALE_ERROR_STEP \u003d \"Step value must be \u003e 0 for \" + QUESTION_TYPE_NAME + \".\";"},{"lineNumber":19,"author":{"gitId":"-"},"content":"    static final String NUMSCALE_ERROR_OUT_OF_RANGE \u003d \" is out of the range for \" + QUESTION_TYPE_NAME + \".\";"},{"lineNumber":20,"author":{"gitId":"-"},"content":""},{"lineNumber":21,"author":{"gitId":"-"},"content":"    private int minScale;"},{"lineNumber":22,"author":{"gitId":"-"},"content":"    private int maxScale;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"    private double step;"},{"lineNumber":24,"author":{"gitId":"-"},"content":""},{"lineNumber":25,"author":{"gitId":"-"},"content":"    public FeedbackNumericalScaleQuestionDetails() {"},{"lineNumber":26,"author":{"gitId":"-"},"content":"        this(null);"},{"lineNumber":27,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":28,"author":{"gitId":"-"},"content":""},{"lineNumber":29,"author":{"gitId":"-"},"content":"    public FeedbackNumericalScaleQuestionDetails(String questionText) {"},{"lineNumber":30,"author":{"gitId":"-"},"content":"        super(FeedbackQuestionType.NUMSCALE, questionText);"},{"lineNumber":31,"author":{"gitId":"-"},"content":"        this.minScale \u003d 1;"},{"lineNumber":32,"author":{"gitId":"-"},"content":"        this.maxScale \u003d 5;"},{"lineNumber":33,"author":{"gitId":"-"},"content":"        this.step \u003d 0.5;"},{"lineNumber":34,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":35,"author":{"gitId":"-"},"content":""},{"lineNumber":36,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":37,"author":{"gitId":"-"},"content":"    public boolean shouldChangesRequireResponseDeletion("},{"lineNumber":38,"author":{"gitId":"-"},"content":"            FeedbackQuestionDetails newDetails) {"},{"lineNumber":39,"author":{"gitId":"-"},"content":"        FeedbackNumericalScaleQuestionDetails newNumScaleDetails \u003d"},{"lineNumber":40,"author":{"gitId":"-"},"content":"                (FeedbackNumericalScaleQuestionDetails) newDetails;"},{"lineNumber":41,"author":{"gitId":"-"},"content":""},{"lineNumber":42,"author":{"gitId":"-"},"content":"        return this.minScale !\u003d newNumScaleDetails.minScale"},{"lineNumber":43,"author":{"gitId":"-"},"content":"               || this.maxScale !\u003d newNumScaleDetails.maxScale"},{"lineNumber":44,"author":{"gitId":"-"},"content":"               || this.step !\u003d newNumScaleDetails.step;"},{"lineNumber":45,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":46,"author":{"gitId":"-"},"content":""},{"lineNumber":47,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":48,"author":{"gitId":"-"},"content":"    public List\u003cString\u003e validateQuestionDetails() {"},{"lineNumber":49,"author":{"gitId":"-"},"content":"        List\u003cString\u003e errors \u003d new ArrayList\u003c\u003e();"},{"lineNumber":50,"author":{"gitId":"-"},"content":"        if (minScale \u003e\u003d maxScale) {"},{"lineNumber":51,"author":{"gitId":"-"},"content":"            errors.add(NUMSCALE_ERROR_MIN_MAX);"},{"lineNumber":52,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":53,"author":{"gitId":"-"},"content":"        if (step \u003c\u003d 0) {"},{"lineNumber":54,"author":{"gitId":"-"},"content":"            errors.add(NUMSCALE_ERROR_STEP);"},{"lineNumber":55,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":56,"author":{"gitId":"-"},"content":"        return errors;"},{"lineNumber":57,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":58,"author":{"gitId":"-"},"content":""},{"lineNumber":59,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":60,"author":{"gitId":"-"},"content":"    public List\u003cString\u003e validateResponsesDetails(List\u003cFeedbackResponseDetails\u003e responses, int numRecipients) {"},{"lineNumber":61,"author":{"gitId":"-"},"content":"        List\u003cString\u003e errors \u003d new ArrayList\u003c\u003e();"},{"lineNumber":62,"author":{"gitId":"-"},"content":""},{"lineNumber":63,"author":{"gitId":"-"},"content":"        for (FeedbackResponseDetails response : responses) {"},{"lineNumber":64,"author":{"gitId":"-"},"content":"            FeedbackNumericalScaleResponseDetails details \u003d (FeedbackNumericalScaleResponseDetails) response;"},{"lineNumber":65,"author":{"gitId":"-"},"content":""},{"lineNumber":66,"author":{"gitId":"-"},"content":"            // out of range"},{"lineNumber":67,"author":{"gitId":"-"},"content":"            boolean isAnswerOutOfRange \u003d details.getAnswer() \u003c minScale || details.getAnswer() \u003e maxScale;"},{"lineNumber":68,"author":{"gitId":"-"},"content":"            if (isAnswerOutOfRange) {"},{"lineNumber":69,"author":{"gitId":"-"},"content":"                errors.add(details.getAnswerString() + NUMSCALE_ERROR_OUT_OF_RANGE"},{"lineNumber":70,"author":{"gitId":"-"},"content":"                        + \"(min\u003d\" + minScale + \", max\u003d\" + maxScale + \")\");"},{"lineNumber":71,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":72,"author":{"gitId":"-"},"content":""},{"lineNumber":73,"author":{"gitId":"-"},"content":"            // when the answer is within range but not one of the possible values"},{"lineNumber":74,"author":{"gitId":"-"},"content":"            BigDecimal minval \u003d BigDecimal.valueOf(this.minScale);"},{"lineNumber":75,"author":{"gitId":"-"},"content":"            BigDecimal answer \u003d BigDecimal.valueOf(details.getAnswer());"},{"lineNumber":76,"author":{"gitId":"-"},"content":"            BigDecimal stepBd \u003d BigDecimal.valueOf(step);"},{"lineNumber":77,"author":{"gitId":"-"},"content":"            BigDecimal remainder \u003d answer.subtract(minval).remainder(stepBd);"},{"lineNumber":78,"author":{"gitId":"-"},"content":"            boolean isAnsMultipleOfStep \u003d remainder.compareTo(BigDecimal.ZERO) \u003d\u003d 0;"},{"lineNumber":79,"author":{"gitId":"-"},"content":"            if (!isAnsMultipleOfStep \u0026\u0026 !isAnswerOutOfRange) {"},{"lineNumber":80,"author":{"gitId":"-"},"content":"                double posValSmall \u003d answer.subtract(remainder).setScale(5, RoundingMode.HALF_UP).doubleValue();"},{"lineNumber":81,"author":{"gitId":"-"},"content":"                double posValBig \u003d answer.subtract(remainder).add(stepBd).setScale(5, RoundingMode.HALF_UP).doubleValue();"},{"lineNumber":82,"author":{"gitId":"-"},"content":""},{"lineNumber":83,"author":{"gitId":"-"},"content":"                errors.add(\"Please enter a valid value. The two nearest valid values are \""},{"lineNumber":84,"author":{"gitId":"-"},"content":"                        + posValSmall + \" and \" + posValBig + \".\");"},{"lineNumber":85,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":86,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":87,"author":{"gitId":"-"},"content":""},{"lineNumber":88,"author":{"gitId":"-"},"content":"        return errors;"},{"lineNumber":89,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":90,"author":{"gitId":"-"},"content":""},{"lineNumber":91,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":92,"author":{"gitId":"-"},"content":"    public boolean isFeedbackParticipantCommentsOnResponsesAllowed() {"},{"lineNumber":93,"author":{"gitId":"-"},"content":"        return false;"},{"lineNumber":94,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":95,"author":{"gitId":"-"},"content":""},{"lineNumber":96,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":97,"author":{"gitId":"-"},"content":"    public String validateGiverRecipientVisibility(FeedbackQuestionAttributes feedbackQuestionAttributes) {"},{"lineNumber":98,"author":{"gitId":"-"},"content":"        return \"\";"},{"lineNumber":99,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":100,"author":{"gitId":"-"},"content":""},{"lineNumber":101,"author":{"gitId":"hhdqirui"},"content":"    @Override"},{"lineNumber":102,"author":{"gitId":"hhdqirui"},"content":"    public String validateGiverRecipientVisibility(FeedbackQuestion feedbackQuestion) {"},{"lineNumber":103,"author":{"gitId":"hhdqirui"},"content":"        return \"\";"},{"lineNumber":104,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":105,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":106,"author":{"gitId":"-"},"content":"    public int getMinScale() {"},{"lineNumber":107,"author":{"gitId":"-"},"content":"        return minScale;"},{"lineNumber":108,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":109,"author":{"gitId":"-"},"content":""},{"lineNumber":110,"author":{"gitId":"-"},"content":"    public void setMinScale(int minScale) {"},{"lineNumber":111,"author":{"gitId":"-"},"content":"        this.minScale \u003d minScale;"},{"lineNumber":112,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":113,"author":{"gitId":"-"},"content":""},{"lineNumber":114,"author":{"gitId":"-"},"content":"    public int getMaxScale() {"},{"lineNumber":115,"author":{"gitId":"-"},"content":"        return maxScale;"},{"lineNumber":116,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":117,"author":{"gitId":"-"},"content":""},{"lineNumber":118,"author":{"gitId":"-"},"content":"    public void setMaxScale(int maxScale) {"},{"lineNumber":119,"author":{"gitId":"-"},"content":"        this.maxScale \u003d maxScale;"},{"lineNumber":120,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":121,"author":{"gitId":"-"},"content":""},{"lineNumber":122,"author":{"gitId":"-"},"content":"    public double getStep() {"},{"lineNumber":123,"author":{"gitId":"-"},"content":"        return step;"},{"lineNumber":124,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":125,"author":{"gitId":"-"},"content":""},{"lineNumber":126,"author":{"gitId":"-"},"content":"    public void setStep(double step) {"},{"lineNumber":127,"author":{"gitId":"-"},"content":"        this.step \u003d step;"},{"lineNumber":128,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":129,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"hhdqirui":6,"-":123}},{"path":"src/main/java/teammates/common/datatransfer/questions/FeedbackQuestionDetails.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.common.datatransfer.questions;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":4,"author":{"gitId":"-"},"content":""},{"lineNumber":5,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.FeedbackParticipantType;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.SessionResultsBundle;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.util.JsonUtils;"},{"lineNumber":9,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.FeedbackQuestion;"},{"lineNumber":10,"author":{"gitId":"-"},"content":""},{"lineNumber":11,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":12,"author":{"gitId":"-"},"content":" * A class holding the details for a specific question type."},{"lineNumber":13,"author":{"gitId":"-"},"content":" * This abstract class is inherited by concrete Feedback*QuestionDetails"},{"lineNumber":14,"author":{"gitId":"-"},"content":" * classes which provides the implementation for the various abstract methods"},{"lineNumber":15,"author":{"gitId":"-"},"content":" * such that pages can render the correct information/forms depending on the"},{"lineNumber":16,"author":{"gitId":"-"},"content":" * question type"},{"lineNumber":17,"author":{"gitId":"-"},"content":" */"},{"lineNumber":18,"author":{"gitId":"-"},"content":"public abstract class FeedbackQuestionDetails {"},{"lineNumber":19,"author":{"gitId":"-"},"content":"    private FeedbackQuestionType questionType;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"    private String questionText;"},{"lineNumber":21,"author":{"gitId":"-"},"content":""},{"lineNumber":22,"author":{"gitId":"-"},"content":"    protected FeedbackQuestionDetails(FeedbackQuestionType questionType) {"},{"lineNumber":23,"author":{"gitId":"-"},"content":"        this.questionType \u003d questionType;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":25,"author":{"gitId":"-"},"content":""},{"lineNumber":26,"author":{"gitId":"-"},"content":"    protected FeedbackQuestionDetails(FeedbackQuestionType questionType, String questionText) {"},{"lineNumber":27,"author":{"gitId":"-"},"content":"        this.questionType \u003d questionType;"},{"lineNumber":28,"author":{"gitId":"-"},"content":"        this.questionText \u003d questionText;"},{"lineNumber":29,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":30,"author":{"gitId":"-"},"content":""},{"lineNumber":31,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":32,"author":{"gitId":"-"},"content":"     * Get question result statistics as JSON string."},{"lineNumber":33,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":34,"author":{"gitId":"-"},"content":"    @SuppressWarnings(\"PMD.EmptyMethodInAbstractClassShouldBeAbstract\")"},{"lineNumber":35,"author":{"gitId":"-"},"content":"    public String getQuestionResultStatisticsJson("},{"lineNumber":36,"author":{"gitId":"-"},"content":"            FeedbackQuestionAttributes question, String studentEmail, SessionResultsBundle bundle) {"},{"lineNumber":37,"author":{"gitId":"-"},"content":"        // Statistics are calculated in the front-end as it is dependent on the responses being filtered."},{"lineNumber":38,"author":{"gitId":"-"},"content":"        // The only exception is contribution question, where there is only one statistics for the entire question."},{"lineNumber":39,"author":{"gitId":"-"},"content":"        // It is also necessary to calculate contribution question statistics here"},{"lineNumber":40,"author":{"gitId":"-"},"content":"        // to be displayed in student result page as students are not supposed to be able to see the exact responses."},{"lineNumber":41,"author":{"gitId":"-"},"content":"        return \"\";"},{"lineNumber":42,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":43,"author":{"gitId":"-"},"content":""},{"lineNumber":44,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":45,"author":{"gitId":"-"},"content":"     * Checks whether the changes to the question details require deletion of corresponding responses."},{"lineNumber":46,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":47,"author":{"gitId":"-"},"content":"    public abstract boolean shouldChangesRequireResponseDeletion(FeedbackQuestionDetails newDetails);"},{"lineNumber":48,"author":{"gitId":"-"},"content":""},{"lineNumber":49,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":50,"author":{"gitId":"-"},"content":"     * Individual responses are shown by default."},{"lineNumber":51,"author":{"gitId":"-"},"content":"     * Override for specific question types if necessary."},{"lineNumber":52,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":53,"author":{"gitId":"-"},"content":"     * @return boolean indicating if individual responses are to be shown to students."},{"lineNumber":54,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":55,"author":{"gitId":"-"},"content":"    public boolean isIndividualResponsesShownToStudents() {"},{"lineNumber":56,"author":{"gitId":"-"},"content":"        return true;"},{"lineNumber":57,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":58,"author":{"gitId":"-"},"content":""},{"lineNumber":59,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":60,"author":{"gitId":"-"},"content":"     * Validates the question details."},{"lineNumber":61,"author":{"gitId":"-"},"content":"     * @return A {@code List\u003cString\u003e} of error messages (to show as status message to user) if any, or an"},{"lineNumber":62,"author":{"gitId":"-"},"content":"     *         empty list if question details are valid."},{"lineNumber":63,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":64,"author":{"gitId":"-"},"content":"    public abstract List\u003cString\u003e validateQuestionDetails();"},{"lineNumber":65,"author":{"gitId":"-"},"content":""},{"lineNumber":66,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":67,"author":{"gitId":"-"},"content":"     * Validates the list of response details."},{"lineNumber":68,"author":{"gitId":"-"},"content":"     * @return A {@code List\u003cString\u003e} of error messages (to show as status message to user) if any, or an"},{"lineNumber":69,"author":{"gitId":"-"},"content":"     *         empty list if all response details are valid."},{"lineNumber":70,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":71,"author":{"gitId":"-"},"content":"    public abstract List\u003cString\u003e validateResponsesDetails(List\u003cFeedbackResponseDetails\u003e responseDetails, int numRecipients);"},{"lineNumber":72,"author":{"gitId":"-"},"content":""},{"lineNumber":73,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":74,"author":{"gitId":"-"},"content":"     * Validates if giverType and recipientType are valid for the question type."},{"lineNumber":75,"author":{"gitId":"-"},"content":"     * Validates visibility options as well."},{"lineNumber":76,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":77,"author":{"gitId":"-"},"content":"     * \u003cp\u003eOverride in Feedback*QuestionDetails if necessary."},{"lineNumber":78,"author":{"gitId":"-"},"content":"     * @return error message detailing the error, or an empty string if valid."},{"lineNumber":79,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":80,"author":{"gitId":"-"},"content":"    public abstract String validateGiverRecipientVisibility(FeedbackQuestionAttributes feedbackQuestionAttributes);"},{"lineNumber":81,"author":{"gitId":"-"},"content":""},{"lineNumber":82,"author":{"gitId":"hhdqirui"},"content":"    /**"},{"lineNumber":83,"author":{"gitId":"hhdqirui"},"content":"     * Validates if giverType and recipientType are valid for the question type."},{"lineNumber":84,"author":{"gitId":"hhdqirui"},"content":"     * Validates visibility options as well."},{"lineNumber":85,"author":{"gitId":"hhdqirui"},"content":"     *"},{"lineNumber":86,"author":{"gitId":"hhdqirui"},"content":"     * \u003cp\u003eOverride in Feedback*QuestionDetails if necessary."},{"lineNumber":87,"author":{"gitId":"hhdqirui"},"content":"     * @return error message detailing the error, or an empty string if valid."},{"lineNumber":88,"author":{"gitId":"hhdqirui"},"content":"     */"},{"lineNumber":89,"author":{"gitId":"hhdqirui"},"content":"    public abstract String validateGiverRecipientVisibility(FeedbackQuestion feedbackQuestion);"},{"lineNumber":90,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":91,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":92,"author":{"gitId":"-"},"content":"     * Checks whether instructor comments are allowed for the question."},{"lineNumber":93,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":94,"author":{"gitId":"-"},"content":"    public boolean isInstructorCommentsOnResponsesAllowed() {"},{"lineNumber":95,"author":{"gitId":"-"},"content":"        return true;"},{"lineNumber":96,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":97,"author":{"gitId":"-"},"content":""},{"lineNumber":98,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":99,"author":{"gitId":"-"},"content":"     * Checks whether participant comments are allowed for the question."},{"lineNumber":100,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":101,"author":{"gitId":"-"},"content":"    public abstract boolean isFeedbackParticipantCommentsOnResponsesAllowed();"},{"lineNumber":102,"author":{"gitId":"-"},"content":""},{"lineNumber":103,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":104,"author":{"gitId":"-"},"content":"     * Checks whether missing responses should be generated."},{"lineNumber":105,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":106,"author":{"gitId":"-"},"content":"    public boolean shouldGenerateMissingResponses(FeedbackQuestionAttributes question) {"},{"lineNumber":107,"author":{"gitId":"-"},"content":"        // generate combinations against all students/teams are meaningless"},{"lineNumber":108,"author":{"gitId":"-"},"content":"        return question.getRecipientType() !\u003d FeedbackParticipantType.STUDENTS"},{"lineNumber":109,"author":{"gitId":"-"},"content":"                \u0026\u0026 question.getRecipientType() !\u003d FeedbackParticipantType.STUDENTS_EXCLUDING_SELF"},{"lineNumber":110,"author":{"gitId":"-"},"content":"                \u0026\u0026 question.getRecipientType() !\u003d FeedbackParticipantType.TEAMS"},{"lineNumber":111,"author":{"gitId":"-"},"content":"                \u0026\u0026 question.getRecipientType() !\u003d FeedbackParticipantType.TEAMS_EXCLUDING_SELF;"},{"lineNumber":112,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":113,"author":{"gitId":"-"},"content":""},{"lineNumber":114,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":115,"author":{"gitId":"-"},"content":"    public boolean equals(Object obj) {"},{"lineNumber":116,"author":{"gitId":"-"},"content":"        if (this \u003d\u003d obj) {"},{"lineNumber":117,"author":{"gitId":"-"},"content":"            return true;"},{"lineNumber":118,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":119,"author":{"gitId":"-"},"content":""},{"lineNumber":120,"author":{"gitId":"-"},"content":"        if (obj \u003d\u003d null || obj.getClass() !\u003d this.getClass()) {"},{"lineNumber":121,"author":{"gitId":"-"},"content":"            return false;"},{"lineNumber":122,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":123,"author":{"gitId":"-"},"content":""},{"lineNumber":124,"author":{"gitId":"-"},"content":"        // Json string contains all attributes of a `FeedbackQuestionDetails` object,"},{"lineNumber":125,"author":{"gitId":"-"},"content":"        // so it is sufficient to use it to compare two `FeedbackQuestionDetails` objects."},{"lineNumber":126,"author":{"gitId":"-"},"content":"        FeedbackQuestionDetails other \u003d (FeedbackQuestionDetails) obj;"},{"lineNumber":127,"author":{"gitId":"-"},"content":"        return this.getJsonString().equals(other.getJsonString());"},{"lineNumber":128,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":129,"author":{"gitId":"-"},"content":""},{"lineNumber":130,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":131,"author":{"gitId":"-"},"content":"    public int hashCode() {"},{"lineNumber":132,"author":{"gitId":"-"},"content":"        return this.getJsonString().hashCode();"},{"lineNumber":133,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":134,"author":{"gitId":"-"},"content":""},{"lineNumber":135,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":136,"author":{"gitId":"-"},"content":"     * Returns a JSON string representation of the question details."},{"lineNumber":137,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":138,"author":{"gitId":"-"},"content":"    public String getJsonString() {"},{"lineNumber":139,"author":{"gitId":"-"},"content":"        assert questionType !\u003d null;"},{"lineNumber":140,"author":{"gitId":"-"},"content":"        return JsonUtils.toJson(this, questionType.getQuestionDetailsClass());"},{"lineNumber":141,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":142,"author":{"gitId":"-"},"content":""},{"lineNumber":143,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":144,"author":{"gitId":"-"},"content":"     * Returns a deep copy of the question details."},{"lineNumber":145,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":146,"author":{"gitId":"-"},"content":"    public FeedbackQuestionDetails getDeepCopy() {"},{"lineNumber":147,"author":{"gitId":"-"},"content":"        assert questionType !\u003d null;"},{"lineNumber":148,"author":{"gitId":"-"},"content":"        String serializedDetails \u003d getJsonString();"},{"lineNumber":149,"author":{"gitId":"-"},"content":"        return JsonUtils.fromJson(serializedDetails, questionType.getQuestionDetailsClass());"},{"lineNumber":150,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":151,"author":{"gitId":"-"},"content":""},{"lineNumber":152,"author":{"gitId":"-"},"content":"    public FeedbackQuestionType getQuestionType() {"},{"lineNumber":153,"author":{"gitId":"-"},"content":"        return questionType;"},{"lineNumber":154,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":155,"author":{"gitId":"-"},"content":""},{"lineNumber":156,"author":{"gitId":"-"},"content":"    public void setQuestionType(FeedbackQuestionType questionType) {"},{"lineNumber":157,"author":{"gitId":"-"},"content":"        this.questionType \u003d questionType;"},{"lineNumber":158,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":159,"author":{"gitId":"-"},"content":""},{"lineNumber":160,"author":{"gitId":"-"},"content":"    public String getQuestionText() {"},{"lineNumber":161,"author":{"gitId":"-"},"content":"        return questionText;"},{"lineNumber":162,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":163,"author":{"gitId":"-"},"content":""},{"lineNumber":164,"author":{"gitId":"-"},"content":"    public void setQuestionText(String questionText) {"},{"lineNumber":165,"author":{"gitId":"-"},"content":"        this.questionText \u003d questionText;"},{"lineNumber":166,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":167,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"hhdqirui":10,"-":157}},{"path":"src/main/java/teammates/common/datatransfer/questions/FeedbackRankOptionsQuestionDetails.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.common.datatransfer.questions;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.util.ArrayList;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.util.HashSet;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import java.util.Set;"},{"lineNumber":7,"author":{"gitId":"-"},"content":""},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":10,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.FeedbackQuestion;"},{"lineNumber":11,"author":{"gitId":"-"},"content":""},{"lineNumber":12,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":13,"author":{"gitId":"-"},"content":" * Contains specific structure and processing logic for rank options feedback questions."},{"lineNumber":14,"author":{"gitId":"-"},"content":" */"},{"lineNumber":15,"author":{"gitId":"-"},"content":"public class FeedbackRankOptionsQuestionDetails extends FeedbackRankQuestionDetails {"},{"lineNumber":16,"author":{"gitId":"-"},"content":""},{"lineNumber":17,"author":{"gitId":"-"},"content":"    static final String QUESTION_TYPE_NAME \u003d \"Rank (options) question\";"},{"lineNumber":18,"author":{"gitId":"-"},"content":"    static final int MIN_NUM_OF_OPTIONS \u003d 2;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"    static final String ERROR_INVALID_MAX_OPTIONS_ENABLED \u003d \"Max options enabled is invalid\";"},{"lineNumber":20,"author":{"gitId":"-"},"content":"    static final String ERROR_INVALID_MIN_OPTIONS_ENABLED \u003d \"Min options enabled is invalid\";"},{"lineNumber":21,"author":{"gitId":"-"},"content":"    static final String ERROR_MIN_OPTIONS_ENABLED_MORE_THAN_CHOICES \u003d \"Min options enabled is more than the total choices\";"},{"lineNumber":22,"author":{"gitId":"-"},"content":"    static final String ERROR_MAX_OPTIONS_ENABLED_MORE_THAN_CHOICES \u003d \"Max options enabled is more than the total choices\";"},{"lineNumber":23,"author":{"gitId":"-"},"content":"    static final String ERROR_NOT_ENOUGH_OPTIONS \u003d"},{"lineNumber":24,"author":{"gitId":"-"},"content":"            \"Too little options for \" + QUESTION_TYPE_NAME + \". Minimum number of options is: \";"},{"lineNumber":25,"author":{"gitId":"-"},"content":"    static final String ERROR_EMPTY_OPTIONS_ENTERED \u003d \"Empty rank options are not allowed\";"},{"lineNumber":26,"author":{"gitId":"-"},"content":"    static final String ERROR_DUPLICATE_RANK_RESPONSE \u003d \"Duplicate ranks are not allowed.\";"},{"lineNumber":27,"author":{"gitId":"-"},"content":"    static final String ERROR_INVALID_RANK_RESPONSE \u003d \"Invalid rank assigned.\";"},{"lineNumber":28,"author":{"gitId":"-"},"content":""},{"lineNumber":29,"author":{"gitId":"-"},"content":"    private List\u003cString\u003e options;"},{"lineNumber":30,"author":{"gitId":"-"},"content":""},{"lineNumber":31,"author":{"gitId":"-"},"content":"    public FeedbackRankOptionsQuestionDetails() {"},{"lineNumber":32,"author":{"gitId":"-"},"content":"        this(null);"},{"lineNumber":33,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":34,"author":{"gitId":"-"},"content":""},{"lineNumber":35,"author":{"gitId":"-"},"content":"    public FeedbackRankOptionsQuestionDetails(String questionText) {"},{"lineNumber":36,"author":{"gitId":"-"},"content":"        super(FeedbackQuestionType.RANK_OPTIONS, questionText);"},{"lineNumber":37,"author":{"gitId":"-"},"content":"        this.options \u003d new ArrayList\u003c\u003e();"},{"lineNumber":38,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":39,"author":{"gitId":"-"},"content":""},{"lineNumber":40,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":41,"author":{"gitId":"-"},"content":"    public boolean shouldChangesRequireResponseDeletion(FeedbackQuestionDetails newDetails) {"},{"lineNumber":42,"author":{"gitId":"-"},"content":"        FeedbackRankOptionsQuestionDetails newRankQuestionDetails \u003d (FeedbackRankOptionsQuestionDetails) newDetails;"},{"lineNumber":43,"author":{"gitId":"-"},"content":""},{"lineNumber":44,"author":{"gitId":"-"},"content":"        return this.options.size() !\u003d newRankQuestionDetails.options.size()"},{"lineNumber":45,"author":{"gitId":"-"},"content":"            || !this.options.containsAll(newRankQuestionDetails.options)"},{"lineNumber":46,"author":{"gitId":"-"},"content":"            || !newRankQuestionDetails.options.containsAll(this.options)"},{"lineNumber":47,"author":{"gitId":"-"},"content":"            || this.minOptionsToBeRanked !\u003d newRankQuestionDetails.minOptionsToBeRanked"},{"lineNumber":48,"author":{"gitId":"-"},"content":"            || this.maxOptionsToBeRanked !\u003d newRankQuestionDetails.maxOptionsToBeRanked;"},{"lineNumber":49,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":50,"author":{"gitId":"-"},"content":""},{"lineNumber":51,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":52,"author":{"gitId":"-"},"content":"    public List\u003cString\u003e validateQuestionDetails() {"},{"lineNumber":53,"author":{"gitId":"-"},"content":"        List\u003cString\u003e errors \u003d new ArrayList\u003c\u003e();"},{"lineNumber":54,"author":{"gitId":"-"},"content":""},{"lineNumber":55,"author":{"gitId":"-"},"content":"        boolean isEmptyRankOptionEntered \u003d options.stream().anyMatch(optionText -\u003e \"\".equals(optionText.trim()));"},{"lineNumber":56,"author":{"gitId":"-"},"content":"        if (isEmptyRankOptionEntered) {"},{"lineNumber":57,"author":{"gitId":"-"},"content":"            errors.add(ERROR_EMPTY_OPTIONS_ENTERED);"},{"lineNumber":58,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":59,"author":{"gitId":"-"},"content":""},{"lineNumber":60,"author":{"gitId":"-"},"content":"        boolean isMaxOptionsToBeRankedEnabled \u003d maxOptionsToBeRanked !\u003d Const.POINTS_NO_VALUE;"},{"lineNumber":61,"author":{"gitId":"-"},"content":"        boolean isMinOptionsToBeRankedEnabled \u003d minOptionsToBeRanked !\u003d Const.POINTS_NO_VALUE;"},{"lineNumber":62,"author":{"gitId":"-"},"content":""},{"lineNumber":63,"author":{"gitId":"-"},"content":"        if (isMaxOptionsToBeRankedEnabled) {"},{"lineNumber":64,"author":{"gitId":"-"},"content":"            if (maxOptionsToBeRanked \u003c 1) {"},{"lineNumber":65,"author":{"gitId":"-"},"content":"                errors.add(ERROR_INVALID_MAX_OPTIONS_ENABLED);"},{"lineNumber":66,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":67,"author":{"gitId":"-"},"content":"            if (maxOptionsToBeRanked \u003e options.size()) {"},{"lineNumber":68,"author":{"gitId":"-"},"content":"                errors.add(ERROR_MAX_OPTIONS_ENABLED_MORE_THAN_CHOICES);"},{"lineNumber":69,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":70,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":71,"author":{"gitId":"-"},"content":""},{"lineNumber":72,"author":{"gitId":"-"},"content":"        if (isMinOptionsToBeRankedEnabled) {"},{"lineNumber":73,"author":{"gitId":"-"},"content":"            if (minOptionsToBeRanked \u003c 1) {"},{"lineNumber":74,"author":{"gitId":"-"},"content":"                errors.add(ERROR_INVALID_MIN_OPTIONS_ENABLED);"},{"lineNumber":75,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":76,"author":{"gitId":"-"},"content":"            if (minOptionsToBeRanked \u003e options.size()) {"},{"lineNumber":77,"author":{"gitId":"-"},"content":"                errors.add(ERROR_MIN_OPTIONS_ENABLED_MORE_THAN_CHOICES);"},{"lineNumber":78,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":79,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":80,"author":{"gitId":"-"},"content":""},{"lineNumber":81,"author":{"gitId":"-"},"content":"        if (isMaxOptionsToBeRankedEnabled \u0026\u0026 isMinOptionsToBeRankedEnabled"},{"lineNumber":82,"author":{"gitId":"-"},"content":"                \u0026\u0026 minOptionsToBeRanked \u003e maxOptionsToBeRanked) {"},{"lineNumber":83,"author":{"gitId":"-"},"content":"            errors.add(ERROR_INVALID_MIN_OPTIONS_ENABLED);"},{"lineNumber":84,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":85,"author":{"gitId":"-"},"content":""},{"lineNumber":86,"author":{"gitId":"-"},"content":"        if (options.size() \u003c MIN_NUM_OF_OPTIONS) {"},{"lineNumber":87,"author":{"gitId":"-"},"content":"            errors.add(ERROR_NOT_ENOUGH_OPTIONS + MIN_NUM_OF_OPTIONS + \".\");"},{"lineNumber":88,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":89,"author":{"gitId":"-"},"content":""},{"lineNumber":90,"author":{"gitId":"-"},"content":"        return errors;"},{"lineNumber":91,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":92,"author":{"gitId":"-"},"content":""},{"lineNumber":93,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":94,"author":{"gitId":"-"},"content":"    public List\u003cString\u003e validateResponsesDetails(List\u003cFeedbackResponseDetails\u003e responses, int numRecipients) {"},{"lineNumber":95,"author":{"gitId":"-"},"content":"        List\u003cString\u003e errors \u003d new ArrayList\u003c\u003e();"},{"lineNumber":96,"author":{"gitId":"-"},"content":""},{"lineNumber":97,"author":{"gitId":"-"},"content":"        boolean isMinOptionsEnabled \u003d minOptionsToBeRanked !\u003d Const.POINTS_NO_VALUE;"},{"lineNumber":98,"author":{"gitId":"-"},"content":"        boolean isMaxOptionsEnabled \u003d maxOptionsToBeRanked !\u003d Const.POINTS_NO_VALUE;"},{"lineNumber":99,"author":{"gitId":"-"},"content":""},{"lineNumber":100,"author":{"gitId":"-"},"content":"        for (FeedbackResponseDetails response : responses) {"},{"lineNumber":101,"author":{"gitId":"-"},"content":"            FeedbackRankOptionsResponseDetails details \u003d (FeedbackRankOptionsResponseDetails) response;"},{"lineNumber":102,"author":{"gitId":"-"},"content":"            List\u003cInteger\u003e filteredAnswers \u003d details.getFilteredSortedAnswerList();"},{"lineNumber":103,"author":{"gitId":"-"},"content":"            Set\u003cInteger\u003e set \u003d new HashSet\u003c\u003e(filteredAnswers);"},{"lineNumber":104,"author":{"gitId":"-"},"content":"            boolean isAnswerContainsDuplicates \u003d set.size() \u003c filteredAnswers.size();"},{"lineNumber":105,"author":{"gitId":"-"},"content":""},{"lineNumber":106,"author":{"gitId":"-"},"content":"            // if duplicate ranks are not allowed but have been assigned trigger this error"},{"lineNumber":107,"author":{"gitId":"-"},"content":"            if (isAnswerContainsDuplicates \u0026\u0026 !areDuplicatesAllowed) {"},{"lineNumber":108,"author":{"gitId":"-"},"content":"                errors.add(ERROR_DUPLICATE_RANK_RESPONSE);"},{"lineNumber":109,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":110,"author":{"gitId":"-"},"content":"            // if number of options ranked is less than the minimum required trigger this error"},{"lineNumber":111,"author":{"gitId":"-"},"content":"            if (isMinOptionsEnabled \u0026\u0026 filteredAnswers.size() \u003c minOptionsToBeRanked) {"},{"lineNumber":112,"author":{"gitId":"-"},"content":"                errors.add(\"You must rank at least \" + minOptionsToBeRanked + \" options.\");"},{"lineNumber":113,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":114,"author":{"gitId":"-"},"content":"            // if number of options ranked is more than the maximum possible trigger this error"},{"lineNumber":115,"author":{"gitId":"-"},"content":"            if (isMaxOptionsEnabled \u0026\u0026 filteredAnswers.size() \u003e maxOptionsToBeRanked) {"},{"lineNumber":116,"author":{"gitId":"-"},"content":"                errors.add(\"You can rank at most \" + maxOptionsToBeRanked + \" options.\");"},{"lineNumber":117,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":118,"author":{"gitId":"-"},"content":"            // if rank assigned is invalid trigger this error"},{"lineNumber":119,"author":{"gitId":"-"},"content":"            boolean isRankInvalid \u003d filteredAnswers.stream().anyMatch(answer -\u003e answer \u003c 1 || answer \u003e options.size());"},{"lineNumber":120,"author":{"gitId":"-"},"content":"            if (isRankInvalid) {"},{"lineNumber":121,"author":{"gitId":"-"},"content":"                errors.add(ERROR_INVALID_RANK_RESPONSE);"},{"lineNumber":122,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":123,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":124,"author":{"gitId":"-"},"content":""},{"lineNumber":125,"author":{"gitId":"-"},"content":"        return errors;"},{"lineNumber":126,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":127,"author":{"gitId":"-"},"content":""},{"lineNumber":128,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":129,"author":{"gitId":"-"},"content":"    public boolean isFeedbackParticipantCommentsOnResponsesAllowed() {"},{"lineNumber":130,"author":{"gitId":"-"},"content":"        return false;"},{"lineNumber":131,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":132,"author":{"gitId":"-"},"content":""},{"lineNumber":133,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":134,"author":{"gitId":"-"},"content":"    public String validateGiverRecipientVisibility(FeedbackQuestionAttributes feedbackQuestionAttributes) {"},{"lineNumber":135,"author":{"gitId":"-"},"content":"        return \"\";"},{"lineNumber":136,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":137,"author":{"gitId":"-"},"content":""},{"lineNumber":138,"author":{"gitId":"hhdqirui"},"content":"    @Override"},{"lineNumber":139,"author":{"gitId":"hhdqirui"},"content":"    public String validateGiverRecipientVisibility(FeedbackQuestion feedbackQuestion) {"},{"lineNumber":140,"author":{"gitId":"hhdqirui"},"content":"        return \"\";"},{"lineNumber":141,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":142,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":143,"author":{"gitId":"-"},"content":"    public List\u003cString\u003e getOptions() {"},{"lineNumber":144,"author":{"gitId":"-"},"content":"        return options;"},{"lineNumber":145,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":146,"author":{"gitId":"-"},"content":""},{"lineNumber":147,"author":{"gitId":"-"},"content":"    public void setOptions(List\u003cString\u003e options) {"},{"lineNumber":148,"author":{"gitId":"-"},"content":"        this.options \u003d options;"},{"lineNumber":149,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":150,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"hhdqirui":6,"-":144}},{"path":"src/main/java/teammates/common/datatransfer/questions/FeedbackRankRecipientsQuestionDetails.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.common.datatransfer.questions;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.util.ArrayList;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.util.HashSet;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import java.util.Set;"},{"lineNumber":7,"author":{"gitId":"-"},"content":""},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":10,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.FeedbackQuestion;"},{"lineNumber":11,"author":{"gitId":"-"},"content":""},{"lineNumber":12,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":13,"author":{"gitId":"-"},"content":" * Contains specific structure and processing logic for rank recipients feedback questions."},{"lineNumber":14,"author":{"gitId":"-"},"content":" */"},{"lineNumber":15,"author":{"gitId":"-"},"content":"public class FeedbackRankRecipientsQuestionDetails extends FeedbackRankQuestionDetails {"},{"lineNumber":16,"author":{"gitId":"-"},"content":""},{"lineNumber":17,"author":{"gitId":"-"},"content":"    public FeedbackRankRecipientsQuestionDetails() {"},{"lineNumber":18,"author":{"gitId":"-"},"content":"        this(null);"},{"lineNumber":19,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":20,"author":{"gitId":"-"},"content":""},{"lineNumber":21,"author":{"gitId":"-"},"content":"    public FeedbackRankRecipientsQuestionDetails(String questionText) {"},{"lineNumber":22,"author":{"gitId":"-"},"content":"        super(FeedbackQuestionType.RANK_RECIPIENTS, questionText);"},{"lineNumber":23,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":24,"author":{"gitId":"-"},"content":""},{"lineNumber":25,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":26,"author":{"gitId":"-"},"content":"    public boolean shouldChangesRequireResponseDeletion(FeedbackQuestionDetails newDetails) {"},{"lineNumber":27,"author":{"gitId":"-"},"content":"        return false;"},{"lineNumber":28,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":29,"author":{"gitId":"-"},"content":""},{"lineNumber":30,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":31,"author":{"gitId":"-"},"content":"    public List\u003cString\u003e validateQuestionDetails() {"},{"lineNumber":32,"author":{"gitId":"-"},"content":"        return new ArrayList\u003c\u003e();"},{"lineNumber":33,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":34,"author":{"gitId":"-"},"content":""},{"lineNumber":35,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":36,"author":{"gitId":"-"},"content":"    public List\u003cString\u003e validateResponsesDetails(List\u003cFeedbackResponseDetails\u003e responses, int numRecipients) {"},{"lineNumber":37,"author":{"gitId":"-"},"content":"        List\u003cString\u003e errors \u003d new ArrayList\u003c\u003e();"},{"lineNumber":38,"author":{"gitId":"-"},"content":""},{"lineNumber":39,"author":{"gitId":"-"},"content":"        boolean isMinOptionsEnabled \u003d minOptionsToBeRanked !\u003d Const.POINTS_NO_VALUE;"},{"lineNumber":40,"author":{"gitId":"-"},"content":"        boolean isMaxOptionsEnabled \u003d maxOptionsToBeRanked !\u003d Const.POINTS_NO_VALUE;"},{"lineNumber":41,"author":{"gitId":"-"},"content":""},{"lineNumber":42,"author":{"gitId":"-"},"content":"        Set\u003cInteger\u003e responseRank \u003d new HashSet\u003c\u003e();"},{"lineNumber":43,"author":{"gitId":"-"},"content":"        for (FeedbackResponseDetails response : responses) {"},{"lineNumber":44,"author":{"gitId":"-"},"content":"            FeedbackRankRecipientsResponseDetails details \u003d (FeedbackRankRecipientsResponseDetails) response;"},{"lineNumber":45,"author":{"gitId":"-"},"content":""},{"lineNumber":46,"author":{"gitId":"-"},"content":"            if (responseRank.contains(details.getAnswer()) \u0026\u0026 !areDuplicatesAllowed) {"},{"lineNumber":47,"author":{"gitId":"-"},"content":"                errors.add(\"Duplicate rank \" + details.getAnswer() + \" in question\");"},{"lineNumber":48,"author":{"gitId":"-"},"content":"            } else if (details.getAnswer() \u003e numRecipients || details.getAnswer() \u003c 1) {"},{"lineNumber":49,"author":{"gitId":"-"},"content":"                errors.add(\"Invalid rank \" + details.getAnswer() + \" in question\");"},{"lineNumber":50,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":51,"author":{"gitId":"-"},"content":"            responseRank.add(details.getAnswer());"},{"lineNumber":52,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":53,"author":{"gitId":"-"},"content":"        // if number of options ranked is less than the minimum required trigger this error"},{"lineNumber":54,"author":{"gitId":"-"},"content":"        if (isMinOptionsEnabled \u0026\u0026 responses.size() \u003c minOptionsToBeRanked) {"},{"lineNumber":55,"author":{"gitId":"-"},"content":"            errors.add(\"You must rank at least \" + minOptionsToBeRanked + \" options.\");"},{"lineNumber":56,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":57,"author":{"gitId":"-"},"content":"        // if number of options ranked is more than the maximum possible trigger this error"},{"lineNumber":58,"author":{"gitId":"-"},"content":"        if (isMaxOptionsEnabled \u0026\u0026 responses.size() \u003e maxOptionsToBeRanked) {"},{"lineNumber":59,"author":{"gitId":"-"},"content":"            errors.add(\"You can rank at most \" + maxOptionsToBeRanked + \" options.\");"},{"lineNumber":60,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":61,"author":{"gitId":"-"},"content":""},{"lineNumber":62,"author":{"gitId":"-"},"content":"        return errors;"},{"lineNumber":63,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":64,"author":{"gitId":"-"},"content":""},{"lineNumber":65,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":66,"author":{"gitId":"-"},"content":"    public boolean isFeedbackParticipantCommentsOnResponsesAllowed() {"},{"lineNumber":67,"author":{"gitId":"-"},"content":"        return false;"},{"lineNumber":68,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":69,"author":{"gitId":"-"},"content":""},{"lineNumber":70,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":71,"author":{"gitId":"-"},"content":"    public String validateGiverRecipientVisibility(FeedbackQuestionAttributes feedbackQuestionAttributes) {"},{"lineNumber":72,"author":{"gitId":"-"},"content":"        return \"\";"},{"lineNumber":73,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":74,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":75,"author":{"gitId":"hhdqirui"},"content":"    @Override"},{"lineNumber":76,"author":{"gitId":"hhdqirui"},"content":"    public String validateGiverRecipientVisibility(FeedbackQuestion feedbackQuestion) {"},{"lineNumber":77,"author":{"gitId":"hhdqirui"},"content":"        return \"\";"},{"lineNumber":78,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":79,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"hhdqirui":6,"-":73}},{"path":"src/main/java/teammates/common/datatransfer/questions/FeedbackRubricQuestionDetails.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.common.datatransfer.questions;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.util.ArrayList;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":5,"author":{"gitId":"-"},"content":""},{"lineNumber":6,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;"},{"lineNumber":7,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.FeedbackQuestion;"},{"lineNumber":8,"author":{"gitId":"-"},"content":""},{"lineNumber":9,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":10,"author":{"gitId":"-"},"content":" * Contains specific structure and processing logic for rubric feedback questions."},{"lineNumber":11,"author":{"gitId":"-"},"content":" */"},{"lineNumber":12,"author":{"gitId":"-"},"content":"public class FeedbackRubricQuestionDetails extends FeedbackQuestionDetails {"},{"lineNumber":13,"author":{"gitId":"-"},"content":""},{"lineNumber":14,"author":{"gitId":"-"},"content":"    static final String QUESTION_TYPE_NAME \u003d \"Rubric question\";"},{"lineNumber":15,"author":{"gitId":"-"},"content":"    static final int RUBRIC_ANSWER_NOT_CHOSEN \u003d -1;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"    static final int RUBRIC_MIN_NUM_OF_CHOICES \u003d 2;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"    static final String RUBRIC_ERROR_NOT_ENOUGH_CHOICES \u003d"},{"lineNumber":18,"author":{"gitId":"-"},"content":"            \"Too little choices for \" + QUESTION_TYPE_NAME + \". Minimum number of options is: \";"},{"lineNumber":19,"author":{"gitId":"-"},"content":"    static final int RUBRIC_MIN_NUM_OF_SUB_QUESTIONS \u003d 1;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"    static final String RUBRIC_ERROR_NOT_ENOUGH_SUB_QUESTIONS \u003d"},{"lineNumber":21,"author":{"gitId":"-"},"content":"            \"Too little sub-questions for \" + QUESTION_TYPE_NAME + \". \" + \"Minimum number of sub-questions is: \";"},{"lineNumber":22,"author":{"gitId":"-"},"content":"    static final String RUBRIC_ERROR_DESC_INVALID_SIZE \u003d"},{"lineNumber":23,"author":{"gitId":"-"},"content":"            \"Invalid number of descriptions for \" + QUESTION_TYPE_NAME;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"    static final String RUBRIC_ERROR_EMPTY_SUB_QUESTION \u003d"},{"lineNumber":25,"author":{"gitId":"-"},"content":"            \"Sub-questions for \" + QUESTION_TYPE_NAME + \" cannot be empty.\";"},{"lineNumber":26,"author":{"gitId":"-"},"content":"    static final String RUBRIC_ERROR_INVALID_WEIGHT \u003d"},{"lineNumber":27,"author":{"gitId":"-"},"content":"            \"The weights for the choices of each sub-question of a \" + QUESTION_TYPE_NAME"},{"lineNumber":28,"author":{"gitId":"-"},"content":"                    + \" must be valid numbers with precision up to 2 decimal places.\";"},{"lineNumber":29,"author":{"gitId":"-"},"content":"    static final String RUBRIC_EMPTY_ANSWER \u003d \"Empty answer.\";"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    static final String RUBRIC_INVALID_ANSWER \u003d \"The answer for the rubric question is not valid.\";"},{"lineNumber":31,"author":{"gitId":"-"},"content":""},{"lineNumber":32,"author":{"gitId":"-"},"content":"    private boolean hasAssignedWeights;"},{"lineNumber":33,"author":{"gitId":"-"},"content":"    private List\u003cList\u003cDouble\u003e\u003e rubricWeightsForEachCell;"},{"lineNumber":34,"author":{"gitId":"-"},"content":"    private List\u003cString\u003e rubricChoices;"},{"lineNumber":35,"author":{"gitId":"-"},"content":"    private List\u003cString\u003e rubricSubQuestions;"},{"lineNumber":36,"author":{"gitId":"-"},"content":"    private List\u003cList\u003cString\u003e\u003e rubricDescriptions;"},{"lineNumber":37,"author":{"gitId":"-"},"content":""},{"lineNumber":38,"author":{"gitId":"-"},"content":"    public FeedbackRubricQuestionDetails() {"},{"lineNumber":39,"author":{"gitId":"-"},"content":"        this(null);"},{"lineNumber":40,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":41,"author":{"gitId":"-"},"content":""},{"lineNumber":42,"author":{"gitId":"-"},"content":"    public FeedbackRubricQuestionDetails(String questionText) {"},{"lineNumber":43,"author":{"gitId":"-"},"content":"        super(FeedbackQuestionType.RUBRIC, questionText);"},{"lineNumber":44,"author":{"gitId":"-"},"content":"        this.hasAssignedWeights \u003d false;"},{"lineNumber":45,"author":{"gitId":"-"},"content":"        this.rubricChoices \u003d new ArrayList\u003c\u003e();"},{"lineNumber":46,"author":{"gitId":"-"},"content":"        this.rubricSubQuestions \u003d new ArrayList\u003c\u003e();"},{"lineNumber":47,"author":{"gitId":"-"},"content":"        this.rubricDescriptions \u003d new ArrayList\u003c\u003e();"},{"lineNumber":48,"author":{"gitId":"-"},"content":"        this.rubricWeightsForEachCell \u003d new ArrayList\u003c\u003e();"},{"lineNumber":49,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":50,"author":{"gitId":"-"},"content":""},{"lineNumber":51,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":52,"author":{"gitId":"-"},"content":"     * Checks if the dimensions of rubricDescription is valid according"},{"lineNumber":53,"author":{"gitId":"-"},"content":"     * to size of rubricSubQuestions and size of rubricChoices."},{"lineNumber":54,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":55,"author":{"gitId":"-"},"content":"    private boolean isValidDescriptionSize() {"},{"lineNumber":56,"author":{"gitId":"-"},"content":"        if (rubricDescriptions.size() !\u003d rubricSubQuestions.size()) {"},{"lineNumber":57,"author":{"gitId":"-"},"content":"            return false;"},{"lineNumber":58,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":59,"author":{"gitId":"-"},"content":"        for (List\u003cString\u003e rubricDescription : rubricDescriptions) {"},{"lineNumber":60,"author":{"gitId":"-"},"content":"            if (rubricDescription.size() !\u003d rubricChoices.size()) {"},{"lineNumber":61,"author":{"gitId":"-"},"content":"                return false;"},{"lineNumber":62,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":63,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":64,"author":{"gitId":"-"},"content":"        return true;"},{"lineNumber":65,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":66,"author":{"gitId":"-"},"content":""},{"lineNumber":67,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":68,"author":{"gitId":"-"},"content":"     * Checks if the dimensions of rubricWeightsForEachCell is valid according"},{"lineNumber":69,"author":{"gitId":"-"},"content":"     * to size of rubricSubQuestions and size of rubricChoices."},{"lineNumber":70,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":71,"author":{"gitId":"-"},"content":"    private boolean isValidWeightSize() {"},{"lineNumber":72,"author":{"gitId":"-"},"content":"        if (rubricWeightsForEachCell.size() !\u003d rubricSubQuestions.size()) {"},{"lineNumber":73,"author":{"gitId":"-"},"content":"            return false;"},{"lineNumber":74,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":75,"author":{"gitId":"-"},"content":"        return rubricWeightsForEachCell.stream().allMatch(x -\u003e x.size() \u003d\u003d rubricChoices.size());"},{"lineNumber":76,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":77,"author":{"gitId":"-"},"content":""},{"lineNumber":78,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":79,"author":{"gitId":"-"},"content":"    public boolean shouldChangesRequireResponseDeletion(FeedbackQuestionDetails newDetails) {"},{"lineNumber":80,"author":{"gitId":"-"},"content":"        FeedbackRubricQuestionDetails newRubricDetails \u003d (FeedbackRubricQuestionDetails) newDetails;"},{"lineNumber":81,"author":{"gitId":"-"},"content":"        // TODO: need to check for exact match."},{"lineNumber":82,"author":{"gitId":"-"},"content":""},{"lineNumber":83,"author":{"gitId":"-"},"content":"        // Responses require deletion if choices change"},{"lineNumber":84,"author":{"gitId":"-"},"content":"        if (!this.rubricChoices.equals(newRubricDetails.rubricChoices)) {"},{"lineNumber":85,"author":{"gitId":"-"},"content":"            return true;"},{"lineNumber":86,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":87,"author":{"gitId":"-"},"content":""},{"lineNumber":88,"author":{"gitId":"-"},"content":"        // Responses require deletion if sub-questions change"},{"lineNumber":89,"author":{"gitId":"-"},"content":"        return this.rubricSubQuestions.size() !\u003d newRubricDetails.rubricSubQuestions.size()"},{"lineNumber":90,"author":{"gitId":"-"},"content":"            || !this.rubricSubQuestions.containsAll(newRubricDetails.rubricSubQuestions)"},{"lineNumber":91,"author":{"gitId":"-"},"content":"            || !newRubricDetails.rubricSubQuestions.containsAll(this.rubricSubQuestions);"},{"lineNumber":92,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":93,"author":{"gitId":"-"},"content":""},{"lineNumber":94,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":95,"author":{"gitId":"-"},"content":"    public List\u003cString\u003e validateQuestionDetails() {"},{"lineNumber":96,"author":{"gitId":"-"},"content":"        // For rubric questions,"},{"lineNumber":97,"author":{"gitId":"-"},"content":"        // 1) Description size should be valid"},{"lineNumber":98,"author":{"gitId":"-"},"content":"        // 2) At least 2 choices"},{"lineNumber":99,"author":{"gitId":"-"},"content":"        // 3) At least 1 sub-question"},{"lineNumber":100,"author":{"gitId":"-"},"content":"        // 4) Choices and sub-questions should not be empty"},{"lineNumber":101,"author":{"gitId":"-"},"content":"        // 5) Weights must be assigned to all cells if weights are assigned, which means"},{"lineNumber":102,"author":{"gitId":"-"},"content":"        //    weight size should be equal to (rubricChoices.size() * rubricSubQuestions.size())."},{"lineNumber":103,"author":{"gitId":"-"},"content":""},{"lineNumber":104,"author":{"gitId":"-"},"content":"        List\u003cString\u003e errors \u003d new ArrayList\u003c\u003e();"},{"lineNumber":105,"author":{"gitId":"-"},"content":""},{"lineNumber":106,"author":{"gitId":"-"},"content":"        if (!isValidDescriptionSize()) {"},{"lineNumber":107,"author":{"gitId":"-"},"content":"            // This should not happen."},{"lineNumber":108,"author":{"gitId":"-"},"content":"            // Set descriptions to empty if the sizes are invalid when extracting question details."},{"lineNumber":109,"author":{"gitId":"-"},"content":"            errors.add(RUBRIC_ERROR_DESC_INVALID_SIZE);"},{"lineNumber":110,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":111,"author":{"gitId":"-"},"content":""},{"lineNumber":112,"author":{"gitId":"-"},"content":"        if (rubricChoices.size() \u003c RUBRIC_MIN_NUM_OF_CHOICES) {"},{"lineNumber":113,"author":{"gitId":"-"},"content":"            errors.add(RUBRIC_ERROR_NOT_ENOUGH_CHOICES"},{"lineNumber":114,"author":{"gitId":"-"},"content":"                       + RUBRIC_MIN_NUM_OF_CHOICES);"},{"lineNumber":115,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":116,"author":{"gitId":"-"},"content":""},{"lineNumber":117,"author":{"gitId":"-"},"content":"        if (this.rubricSubQuestions.size() \u003c RUBRIC_MIN_NUM_OF_SUB_QUESTIONS) {"},{"lineNumber":118,"author":{"gitId":"-"},"content":"            errors.add(RUBRIC_ERROR_NOT_ENOUGH_SUB_QUESTIONS"},{"lineNumber":119,"author":{"gitId":"-"},"content":"                       + RUBRIC_MIN_NUM_OF_SUB_QUESTIONS);"},{"lineNumber":120,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":121,"author":{"gitId":"-"},"content":""},{"lineNumber":122,"author":{"gitId":"-"},"content":"        //Rubric choices are now allowed to be empty."},{"lineNumber":123,"author":{"gitId":"-"},"content":"        /*"},{"lineNumber":124,"author":{"gitId":"-"},"content":"        for (String choice : this.rubricChoices) {"},{"lineNumber":125,"author":{"gitId":"-"},"content":"            if (choice.trim().isEmpty()) {"},{"lineNumber":126,"author":{"gitId":"-"},"content":"                errors.add(ERROR_RUBRIC_EMPTY_CHOICE);"},{"lineNumber":127,"author":{"gitId":"-"},"content":"                break;"},{"lineNumber":128,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":129,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":130,"author":{"gitId":"-"},"content":"        */"},{"lineNumber":131,"author":{"gitId":"-"},"content":""},{"lineNumber":132,"author":{"gitId":"-"},"content":"        for (String subQn : rubricSubQuestions) {"},{"lineNumber":133,"author":{"gitId":"-"},"content":"            if (subQn.trim().isEmpty()) {"},{"lineNumber":134,"author":{"gitId":"-"},"content":"                errors.add(RUBRIC_ERROR_EMPTY_SUB_QUESTION);"},{"lineNumber":135,"author":{"gitId":"-"},"content":"                break;"},{"lineNumber":136,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":137,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":138,"author":{"gitId":"-"},"content":""},{"lineNumber":139,"author":{"gitId":"-"},"content":"        if (hasAssignedWeights \u0026\u0026 !isValidWeightSize()) {"},{"lineNumber":140,"author":{"gitId":"-"},"content":"            errors.add(RUBRIC_ERROR_INVALID_WEIGHT);"},{"lineNumber":141,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":142,"author":{"gitId":"-"},"content":""},{"lineNumber":143,"author":{"gitId":"-"},"content":"        return errors;"},{"lineNumber":144,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":145,"author":{"gitId":"-"},"content":""},{"lineNumber":146,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":147,"author":{"gitId":"-"},"content":"    public List\u003cString\u003e validateResponsesDetails(List\u003cFeedbackResponseDetails\u003e responses, int numRecipients) {"},{"lineNumber":148,"author":{"gitId":"-"},"content":"        List\u003cString\u003e errors \u003d new ArrayList\u003c\u003e();"},{"lineNumber":149,"author":{"gitId":"-"},"content":""},{"lineNumber":150,"author":{"gitId":"-"},"content":"        for (FeedbackResponseDetails response : responses) {"},{"lineNumber":151,"author":{"gitId":"-"},"content":"            FeedbackRubricResponseDetails details \u003d (FeedbackRubricResponseDetails) response;"},{"lineNumber":152,"author":{"gitId":"-"},"content":"            if (details.getAnswer().isEmpty()) {"},{"lineNumber":153,"author":{"gitId":"-"},"content":"                errors.add(RUBRIC_EMPTY_ANSWER);"},{"lineNumber":154,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":155,"author":{"gitId":"-"},"content":""},{"lineNumber":156,"author":{"gitId":"-"},"content":"            if (details.getAnswer().size() !\u003d rubricSubQuestions.size()) {"},{"lineNumber":157,"author":{"gitId":"-"},"content":"                errors.add(RUBRIC_INVALID_ANSWER);"},{"lineNumber":158,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":159,"author":{"gitId":"-"},"content":""},{"lineNumber":160,"author":{"gitId":"-"},"content":"            if (details.getAnswer().stream().anyMatch(choice -\u003e"},{"lineNumber":161,"author":{"gitId":"-"},"content":"                    choice \u003d\u003d null"},{"lineNumber":162,"author":{"gitId":"-"},"content":"                            || choice !\u003d RUBRIC_ANSWER_NOT_CHOSEN"},{"lineNumber":163,"author":{"gitId":"-"},"content":"                            \u0026\u0026 (choice \u003c 0 || choice \u003e\u003d rubricChoices.size()))) {"},{"lineNumber":164,"author":{"gitId":"-"},"content":"                errors.add(RUBRIC_INVALID_ANSWER);"},{"lineNumber":165,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":166,"author":{"gitId":"-"},"content":""},{"lineNumber":167,"author":{"gitId":"-"},"content":"            if (details.getAnswer().stream().allMatch(choice -\u003e choice \u003d\u003d RUBRIC_ANSWER_NOT_CHOSEN)) {"},{"lineNumber":168,"author":{"gitId":"-"},"content":"                errors.add(RUBRIC_INVALID_ANSWER);"},{"lineNumber":169,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":170,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":171,"author":{"gitId":"-"},"content":""},{"lineNumber":172,"author":{"gitId":"-"},"content":"        return errors;"},{"lineNumber":173,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":174,"author":{"gitId":"-"},"content":""},{"lineNumber":175,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":176,"author":{"gitId":"-"},"content":"    public boolean isFeedbackParticipantCommentsOnResponsesAllowed() {"},{"lineNumber":177,"author":{"gitId":"-"},"content":"        return false;"},{"lineNumber":178,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":179,"author":{"gitId":"-"},"content":""},{"lineNumber":180,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":181,"author":{"gitId":"-"},"content":"    public String validateGiverRecipientVisibility(FeedbackQuestionAttributes feedbackQuestionAttributes) {"},{"lineNumber":182,"author":{"gitId":"-"},"content":"        return \"\";"},{"lineNumber":183,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":184,"author":{"gitId":"-"},"content":""},{"lineNumber":185,"author":{"gitId":"hhdqirui"},"content":"    @Override"},{"lineNumber":186,"author":{"gitId":"hhdqirui"},"content":"    public String validateGiverRecipientVisibility(FeedbackQuestion feedbackQuestion) {"},{"lineNumber":187,"author":{"gitId":"hhdqirui"},"content":"        return \"\";"},{"lineNumber":188,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":189,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":190,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":191,"author":{"gitId":"-"},"content":"     * Returns a list of rubric weights if the weights are assigned,"},{"lineNumber":192,"author":{"gitId":"-"},"content":"     * otherwise returns an empty list."},{"lineNumber":193,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":194,"author":{"gitId":"-"},"content":"    public List\u003cList\u003cDouble\u003e\u003e getRubricWeights() {"},{"lineNumber":195,"author":{"gitId":"-"},"content":"        if (hasAssignedWeights) {"},{"lineNumber":196,"author":{"gitId":"-"},"content":"            return rubricWeightsForEachCell;"},{"lineNumber":197,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":198,"author":{"gitId":"-"},"content":""},{"lineNumber":199,"author":{"gitId":"-"},"content":"        return new ArrayList\u003c\u003e();"},{"lineNumber":200,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":201,"author":{"gitId":"-"},"content":""},{"lineNumber":202,"author":{"gitId":"-"},"content":"    public boolean isHasAssignedWeights() {"},{"lineNumber":203,"author":{"gitId":"-"},"content":"        return hasAssignedWeights;"},{"lineNumber":204,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":205,"author":{"gitId":"-"},"content":""},{"lineNumber":206,"author":{"gitId":"-"},"content":"    public void setHasAssignedWeights(boolean hasAssignedWeights) {"},{"lineNumber":207,"author":{"gitId":"-"},"content":"        this.hasAssignedWeights \u003d hasAssignedWeights;"},{"lineNumber":208,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":209,"author":{"gitId":"-"},"content":""},{"lineNumber":210,"author":{"gitId":"-"},"content":"    public List\u003cList\u003cDouble\u003e\u003e getRubricWeightsForEachCell() {"},{"lineNumber":211,"author":{"gitId":"-"},"content":"        return rubricWeightsForEachCell;"},{"lineNumber":212,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":213,"author":{"gitId":"-"},"content":""},{"lineNumber":214,"author":{"gitId":"-"},"content":"    public void setRubricWeightsForEachCell(List\u003cList\u003cDouble\u003e\u003e rubricWeightsForEachCell) {"},{"lineNumber":215,"author":{"gitId":"-"},"content":"        this.rubricWeightsForEachCell \u003d rubricWeightsForEachCell;"},{"lineNumber":216,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":217,"author":{"gitId":"-"},"content":""},{"lineNumber":218,"author":{"gitId":"-"},"content":"    public int getNumOfRubricChoices() {"},{"lineNumber":219,"author":{"gitId":"-"},"content":"        return rubricChoices.size();"},{"lineNumber":220,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":221,"author":{"gitId":"-"},"content":""},{"lineNumber":222,"author":{"gitId":"-"},"content":"    public List\u003cString\u003e getRubricChoices() {"},{"lineNumber":223,"author":{"gitId":"-"},"content":"        return rubricChoices;"},{"lineNumber":224,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":225,"author":{"gitId":"-"},"content":""},{"lineNumber":226,"author":{"gitId":"-"},"content":"    public void setRubricChoices(List\u003cString\u003e rubricChoices) {"},{"lineNumber":227,"author":{"gitId":"-"},"content":"        this.rubricChoices \u003d rubricChoices;"},{"lineNumber":228,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":229,"author":{"gitId":"-"},"content":""},{"lineNumber":230,"author":{"gitId":"-"},"content":"    public int getNumOfRubricSubQuestions() {"},{"lineNumber":231,"author":{"gitId":"-"},"content":"        return rubricSubQuestions.size();"},{"lineNumber":232,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":233,"author":{"gitId":"-"},"content":""},{"lineNumber":234,"author":{"gitId":"-"},"content":"    public List\u003cString\u003e getRubricSubQuestions() {"},{"lineNumber":235,"author":{"gitId":"-"},"content":"        return rubricSubQuestions;"},{"lineNumber":236,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":237,"author":{"gitId":"-"},"content":""},{"lineNumber":238,"author":{"gitId":"-"},"content":"    public void setRubricSubQuestions(List\u003cString\u003e rubricSubQuestions) {"},{"lineNumber":239,"author":{"gitId":"-"},"content":"        this.rubricSubQuestions \u003d rubricSubQuestions;"},{"lineNumber":240,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":241,"author":{"gitId":"-"},"content":""},{"lineNumber":242,"author":{"gitId":"-"},"content":"    public List\u003cList\u003cString\u003e\u003e getRubricDescriptions() {"},{"lineNumber":243,"author":{"gitId":"-"},"content":"        return rubricDescriptions;"},{"lineNumber":244,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":245,"author":{"gitId":"-"},"content":""},{"lineNumber":246,"author":{"gitId":"-"},"content":"    public void setRubricDescriptions(List\u003cList\u003cString\u003e\u003e rubricDescriptions) {"},{"lineNumber":247,"author":{"gitId":"-"},"content":"        this.rubricDescriptions \u003d rubricDescriptions;"},{"lineNumber":248,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":249,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"hhdqirui":6,"-":243}},{"path":"src/main/java/teammates/common/datatransfer/questions/FeedbackTextQuestionDetails.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.common.datatransfer.questions;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.util.ArrayList;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":5,"author":{"gitId":"-"},"content":""},{"lineNumber":6,"author":{"gitId":"-"},"content":"import javax.annotation.Nullable;"},{"lineNumber":7,"author":{"gitId":"-"},"content":""},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;"},{"lineNumber":9,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.FeedbackQuestion;"},{"lineNumber":10,"author":{"gitId":"-"},"content":""},{"lineNumber":11,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":12,"author":{"gitId":"-"},"content":" * Contains specific structure and processing logic for text feedback questions."},{"lineNumber":13,"author":{"gitId":"-"},"content":" */"},{"lineNumber":14,"author":{"gitId":"-"},"content":"public class FeedbackTextQuestionDetails extends FeedbackQuestionDetails {"},{"lineNumber":15,"author":{"gitId":"-"},"content":""},{"lineNumber":16,"author":{"gitId":"-"},"content":"    static final String TEXT_ERROR_INVALID_RECOMMENDED_LENGTH \u003d \"Recommended length must be 1 or greater\";"},{"lineNumber":17,"author":{"gitId":"-"},"content":""},{"lineNumber":18,"author":{"gitId":"-"},"content":"    @Nullable"},{"lineNumber":19,"author":{"gitId":"-"},"content":"    private Integer recommendedLength;"},{"lineNumber":20,"author":{"gitId":"-"},"content":""},{"lineNumber":21,"author":{"gitId":"-"},"content":"    private Boolean shouldAllowRichText;"},{"lineNumber":22,"author":{"gitId":"-"},"content":""},{"lineNumber":23,"author":{"gitId":"-"},"content":"    public FeedbackTextQuestionDetails() {"},{"lineNumber":24,"author":{"gitId":"-"},"content":"        this(null);"},{"lineNumber":25,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":26,"author":{"gitId":"-"},"content":""},{"lineNumber":27,"author":{"gitId":"-"},"content":"    public FeedbackTextQuestionDetails(String questionText) {"},{"lineNumber":28,"author":{"gitId":"-"},"content":"        super(FeedbackQuestionType.TEXT, questionText);"},{"lineNumber":29,"author":{"gitId":"-"},"content":"        recommendedLength \u003d null;"},{"lineNumber":30,"author":{"gitId":"-"},"content":"        shouldAllowRichText \u003d true;"},{"lineNumber":31,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":32,"author":{"gitId":"-"},"content":""},{"lineNumber":33,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":34,"author":{"gitId":"-"},"content":"    public boolean shouldChangesRequireResponseDeletion(FeedbackQuestionDetails newDetails) {"},{"lineNumber":35,"author":{"gitId":"-"},"content":"        assert newDetails instanceof FeedbackTextQuestionDetails;"},{"lineNumber":36,"author":{"gitId":"-"},"content":""},{"lineNumber":37,"author":{"gitId":"-"},"content":"        // delete the existing response upon change from rich text allowed to disallowed"},{"lineNumber":38,"author":{"gitId":"-"},"content":"        // due to the effort to cleanup of HTML tags from the respondents"},{"lineNumber":39,"author":{"gitId":"-"},"content":"        return !((FeedbackTextQuestionDetails) newDetails).shouldAllowRichText \u0026\u0026 shouldAllowRichText;"},{"lineNumber":40,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":41,"author":{"gitId":"-"},"content":""},{"lineNumber":42,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":43,"author":{"gitId":"-"},"content":"    public List\u003cString\u003e validateQuestionDetails() {"},{"lineNumber":44,"author":{"gitId":"-"},"content":"        List\u003cString\u003e errors \u003d new ArrayList\u003c\u003e();"},{"lineNumber":45,"author":{"gitId":"-"},"content":"        if (recommendedLength !\u003d null \u0026\u0026 recommendedLength \u003c 1) {"},{"lineNumber":46,"author":{"gitId":"-"},"content":"            errors.add(TEXT_ERROR_INVALID_RECOMMENDED_LENGTH);"},{"lineNumber":47,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":48,"author":{"gitId":"-"},"content":"        return errors;"},{"lineNumber":49,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":50,"author":{"gitId":"-"},"content":""},{"lineNumber":51,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":52,"author":{"gitId":"-"},"content":"    public List\u003cString\u003e validateResponsesDetails(List\u003cFeedbackResponseDetails\u003e responses, int numRecipients) {"},{"lineNumber":53,"author":{"gitId":"-"},"content":"        return new ArrayList\u003c\u003e();"},{"lineNumber":54,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":55,"author":{"gitId":"-"},"content":""},{"lineNumber":56,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":57,"author":{"gitId":"-"},"content":"    public boolean isFeedbackParticipantCommentsOnResponsesAllowed() {"},{"lineNumber":58,"author":{"gitId":"-"},"content":"        return false;"},{"lineNumber":59,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":60,"author":{"gitId":"-"},"content":""},{"lineNumber":61,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":62,"author":{"gitId":"-"},"content":"    public String validateGiverRecipientVisibility(FeedbackQuestionAttributes feedbackQuestionAttributes) {"},{"lineNumber":63,"author":{"gitId":"-"},"content":"        return \"\";"},{"lineNumber":64,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":65,"author":{"gitId":"-"},"content":""},{"lineNumber":66,"author":{"gitId":"hhdqirui"},"content":"    @Override"},{"lineNumber":67,"author":{"gitId":"hhdqirui"},"content":"    public String validateGiverRecipientVisibility(FeedbackQuestion feedbackQuestion) {"},{"lineNumber":68,"author":{"gitId":"hhdqirui"},"content":"        return \"\";"},{"lineNumber":69,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":70,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":71,"author":{"gitId":"-"},"content":"    public Integer getRecommendedLength() {"},{"lineNumber":72,"author":{"gitId":"-"},"content":"        return recommendedLength;"},{"lineNumber":73,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":74,"author":{"gitId":"-"},"content":""},{"lineNumber":75,"author":{"gitId":"-"},"content":"    public void setRecommendedLength(Integer recommendedLength) {"},{"lineNumber":76,"author":{"gitId":"-"},"content":"        this.recommendedLength \u003d recommendedLength;"},{"lineNumber":77,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":78,"author":{"gitId":"-"},"content":""},{"lineNumber":79,"author":{"gitId":"-"},"content":"    public boolean getShouldAllowRichText() {"},{"lineNumber":80,"author":{"gitId":"-"},"content":"        return shouldAllowRichText;"},{"lineNumber":81,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":82,"author":{"gitId":"-"},"content":""},{"lineNumber":83,"author":{"gitId":"-"},"content":"    public void setShouldAllowRichText(Boolean shouldAllowRichText) {"},{"lineNumber":84,"author":{"gitId":"-"},"content":"        this.shouldAllowRichText \u003d shouldAllowRichText;"},{"lineNumber":85,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":86,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"hhdqirui":6,"-":80}},{"path":"src/main/java/teammates/common/util/Const.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.common.util;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.nio.charset.Charset;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.nio.charset.StandardCharsets;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.time.Duration;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import java.time.Instant;"},{"lineNumber":7,"author":{"gitId":"-"},"content":""},{"lineNumber":8,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":9,"author":{"gitId":"-"},"content":" * Stores constants that are widely used across classes."},{"lineNumber":10,"author":{"gitId":"-"},"content":" * this class contains several nested classes, each containing a specific"},{"lineNumber":11,"author":{"gitId":"-"},"content":" * category of constants."},{"lineNumber":12,"author":{"gitId":"-"},"content":" */"},{"lineNumber":13,"author":{"gitId":"-"},"content":"public final class Const {"},{"lineNumber":14,"author":{"gitId":"-"},"content":""},{"lineNumber":15,"author":{"gitId":"-"},"content":"    // This section holds constants that are defined as constants primarily because they are repeated in many places."},{"lineNumber":16,"author":{"gitId":"-"},"content":""},{"lineNumber":17,"author":{"gitId":"-"},"content":"    public static final String USER_NOBODY_TEXT \u003d \"-\";"},{"lineNumber":18,"author":{"gitId":"-"},"content":""},{"lineNumber":19,"author":{"gitId":"-"},"content":"    public static final String USER_TEAM_FOR_INSTRUCTOR \u003d \"Instructors\";"},{"lineNumber":20,"author":{"gitId":"-"},"content":""},{"lineNumber":21,"author":{"gitId":"-"},"content":"    public static final String DEFAULT_DISPLAY_NAME_FOR_INSTRUCTOR \u003d \"Instructor\";"},{"lineNumber":22,"author":{"gitId":"-"},"content":""},{"lineNumber":23,"author":{"gitId":"-"},"content":"    public static final String DISPLAYED_NAME_FOR_ANONYMOUS_PARTICIPANT \u003d \"Anonymous\";"},{"lineNumber":24,"author":{"gitId":"-"},"content":""},{"lineNumber":25,"author":{"gitId":"-"},"content":"    public static final int SECTION_SIZE_LIMIT \u003d 100;"},{"lineNumber":26,"author":{"gitId":"-"},"content":""},{"lineNumber":27,"author":{"gitId":"-"},"content":"    public static final String DEFAULT_SECTION \u003d \"None\";"},{"lineNumber":28,"author":{"gitId":"-"},"content":""},{"lineNumber":29,"author":{"gitId":"-"},"content":"    public static final String UNKNOWN_INSTITUTION \u003d \"Unknown Institution\";"},{"lineNumber":30,"author":{"gitId":"-"},"content":""},{"lineNumber":31,"author":{"gitId":"-"},"content":"    public static final String DEFAULT_TIME_ZONE \u003d \"UTC\";"},{"lineNumber":32,"author":{"gitId":"-"},"content":"    public static final Charset ENCODING \u003d StandardCharsets.UTF_8;"},{"lineNumber":33,"author":{"gitId":"-"},"content":""},{"lineNumber":34,"author":{"gitId":"-"},"content":"    public static final Duration FEEDBACK_SESSIONS_SEARCH_WINDOW \u003d Duration.ofDays(30);"},{"lineNumber":35,"author":{"gitId":"-"},"content":"    public static final Duration LOGS_RETENTION_PERIOD \u003d Duration.ofDays(30);"},{"lineNumber":36,"author":{"gitId":"-"},"content":"    public static final Duration COOKIE_VALIDITY_PERIOD \u003d Duration.ofDays(7);"},{"lineNumber":37,"author":{"gitId":"-"},"content":""},{"lineNumber":38,"author":{"gitId":"-"},"content":"    public static final int SEARCH_QUERY_SIZE_LIMIT \u003d 50;"},{"lineNumber":39,"author":{"gitId":"-"},"content":""},{"lineNumber":40,"author":{"gitId":"hhdqirui"},"content":"    public static final String ERROR_CREATE_ENTITY_ALREADY_EXISTS \u003d \"Trying to create an entity that exists: %s\";"},{"lineNumber":41,"author":{"gitId":"hhdqirui"},"content":"    public static final String ERROR_UPDATE_NON_EXISTENT \u003d \"Trying to update non-existent Entity: \";"},{"lineNumber":42,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":43,"author":{"gitId":"-"},"content":"    // These constants are used as variable values to mean that the variable is in a \u0027special\u0027 state."},{"lineNumber":44,"author":{"gitId":"-"},"content":""},{"lineNumber":45,"author":{"gitId":"-"},"content":"    public static final int INT_UNINITIALIZED \u003d -9999;"},{"lineNumber":46,"author":{"gitId":"-"},"content":""},{"lineNumber":47,"author":{"gitId":"-"},"content":"    public static final int MAX_POSSIBLE_RECIPIENTS \u003d -100;"},{"lineNumber":48,"author":{"gitId":"-"},"content":""},{"lineNumber":49,"author":{"gitId":"-"},"content":"    public static final int POINTS_EQUAL_SHARE \u003d 100;"},{"lineNumber":50,"author":{"gitId":"-"},"content":"    public static final int POINTS_NOT_SURE \u003d -101;"},{"lineNumber":51,"author":{"gitId":"-"},"content":"    public static final int POINTS_NOT_SUBMITTED \u003d -999;"},{"lineNumber":52,"author":{"gitId":"-"},"content":"    public static final int POINTS_NO_VALUE \u003d Integer.MIN_VALUE;"},{"lineNumber":53,"author":{"gitId":"-"},"content":""},{"lineNumber":54,"author":{"gitId":"-"},"content":"    public static final String GENERAL_QUESTION \u003d \"%GENERAL%\";"},{"lineNumber":55,"author":{"gitId":"-"},"content":""},{"lineNumber":56,"author":{"gitId":"-"},"content":"    public static final Instant TIME_REPRESENTS_FOLLOW_OPENING;"},{"lineNumber":57,"author":{"gitId":"-"},"content":"    public static final Instant TIME_REPRESENTS_FOLLOW_VISIBLE;"},{"lineNumber":58,"author":{"gitId":"-"},"content":"    public static final Instant TIME_REPRESENTS_LATER;"},{"lineNumber":59,"author":{"gitId":"-"},"content":"    public static final Instant TIME_REPRESENTS_NOW;"},{"lineNumber":60,"author":{"gitId":"-"},"content":"    public static final Instant TIME_REPRESENTS_DEFAULT_TIMESTAMP;"},{"lineNumber":61,"author":{"gitId":"-"},"content":""},{"lineNumber":62,"author":{"gitId":"-"},"content":"    static {"},{"lineNumber":63,"author":{"gitId":"-"},"content":"        TIME_REPRESENTS_FOLLOW_OPENING \u003d TimeHelper.parseInstant(\"1970-12-31T00:00:00Z\");"},{"lineNumber":64,"author":{"gitId":"-"},"content":"        TIME_REPRESENTS_FOLLOW_VISIBLE \u003d TimeHelper.parseInstant(\"1970-06-22T00:00:00Z\");"},{"lineNumber":65,"author":{"gitId":"-"},"content":"        TIME_REPRESENTS_LATER \u003d TimeHelper.parseInstant(\"1970-01-01T00:00:00Z\");"},{"lineNumber":66,"author":{"gitId":"-"},"content":"        TIME_REPRESENTS_NOW \u003d TimeHelper.parseInstant(\"1970-02-14T00:00:00Z\");"},{"lineNumber":67,"author":{"gitId":"-"},"content":"        TIME_REPRESENTS_DEFAULT_TIMESTAMP \u003d TimeHelper.parseInstant(\"2011-01-01T00:00:00Z\");"},{"lineNumber":68,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":69,"author":{"gitId":"-"},"content":""},{"lineNumber":70,"author":{"gitId":"-"},"content":"    public static final String TEST_EMAIL_DOMAIN \u003d \"@gmail.tmt\";"},{"lineNumber":71,"author":{"gitId":"-"},"content":""},{"lineNumber":72,"author":{"gitId":"-"},"content":"    // Other Constants"},{"lineNumber":73,"author":{"gitId":"-"},"content":""},{"lineNumber":74,"author":{"gitId":"-"},"content":"    private Const() {"},{"lineNumber":75,"author":{"gitId":"-"},"content":"        // Utility class containing constants"},{"lineNumber":76,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":77,"author":{"gitId":"-"},"content":""},{"lineNumber":78,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":79,"author":{"gitId":"-"},"content":"     * Represents role names for instructors based on their permission settings."},{"lineNumber":80,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":81,"author":{"gitId":"-"},"content":"    public static class InstructorPermissionRoleNames {"},{"lineNumber":82,"author":{"gitId":"-"},"content":"        public static final String INSTRUCTOR_PERMISSION_ROLE_COOWNER \u003d \"Co-owner\";"},{"lineNumber":83,"author":{"gitId":"-"},"content":"        public static final String INSTRUCTOR_PERMISSION_ROLE_MANAGER \u003d \"Manager\";"},{"lineNumber":84,"author":{"gitId":"-"},"content":"        public static final String INSTRUCTOR_PERMISSION_ROLE_OBSERVER \u003d \"Observer\";"},{"lineNumber":85,"author":{"gitId":"-"},"content":"        public static final String INSTRUCTOR_PERMISSION_ROLE_TUTOR \u003d \"Tutor\";"},{"lineNumber":86,"author":{"gitId":"-"},"content":"        public static final String INSTRUCTOR_PERMISSION_ROLE_CUSTOM \u003d \"Custom\";"},{"lineNumber":87,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":88,"author":{"gitId":"-"},"content":""},{"lineNumber":89,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":90,"author":{"gitId":"-"},"content":"     * Represents atomic permission for instructors."},{"lineNumber":91,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":92,"author":{"gitId":"-"},"content":"    public static class InstructorPermissions {"},{"lineNumber":93,"author":{"gitId":"-"},"content":"        public static final String CAN_MODIFY_COURSE \u003d \"canmodifycourse\";"},{"lineNumber":94,"author":{"gitId":"-"},"content":"        public static final String CAN_MODIFY_INSTRUCTOR \u003d \"canmodifyinstructor\";"},{"lineNumber":95,"author":{"gitId":"-"},"content":"        public static final String CAN_MODIFY_SESSION \u003d \"canmodifysession\";"},{"lineNumber":96,"author":{"gitId":"-"},"content":"        public static final String CAN_MODIFY_STUDENT \u003d \"canmodifystudent\";"},{"lineNumber":97,"author":{"gitId":"-"},"content":"        public static final String CAN_VIEW_STUDENT_IN_SECTIONS \u003d \"canviewstudentinsection\";"},{"lineNumber":98,"author":{"gitId":"-"},"content":"        public static final String CAN_VIEW_SESSION_IN_SECTIONS \u003d \"canviewsessioninsection\";"},{"lineNumber":99,"author":{"gitId":"-"},"content":"        public static final String CAN_SUBMIT_SESSION_IN_SECTIONS \u003d \"cansubmitsessioninsection\";"},{"lineNumber":100,"author":{"gitId":"-"},"content":"        public static final String CAN_MODIFY_SESSION_COMMENT_IN_SECTIONS \u003d \"canmodifysessioncommentinsection\";"},{"lineNumber":101,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":102,"author":{"gitId":"-"},"content":""},{"lineNumber":103,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":104,"author":{"gitId":"-"},"content":"     * Represents keys for HTTP requests to the API layer."},{"lineNumber":105,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":106,"author":{"gitId":"-"},"content":"    public static class ParamsNames {"},{"lineNumber":107,"author":{"gitId":"-"},"content":""},{"lineNumber":108,"author":{"gitId":"-"},"content":"        public static final String IS_IN_RECYCLE_BIN \u003d \"isinrecyclebin\";"},{"lineNumber":109,"author":{"gitId":"-"},"content":""},{"lineNumber":110,"author":{"gitId":"-"},"content":"        public static final String IS_STUDENT_REJOINING \u003d \"isstudentrejoining\";"},{"lineNumber":111,"author":{"gitId":"-"},"content":"        public static final String IS_INSTRUCTOR_REJOINING \u003d \"isinstructorrejoining\";"},{"lineNumber":112,"author":{"gitId":"-"},"content":""},{"lineNumber":113,"author":{"gitId":"-"},"content":"        public static final String COURSE_ID \u003d \"courseid\";"},{"lineNumber":114,"author":{"gitId":"-"},"content":"        public static final String COURSE_STATUS \u003d \"coursestatus\";"},{"lineNumber":115,"author":{"gitId":"-"},"content":"        public static final String INSTRUCTOR_ID \u003d \"instructorid\";"},{"lineNumber":116,"author":{"gitId":"-"},"content":"        public static final String INSTRUCTOR_EMAIL \u003d \"instructoremail\";"},{"lineNumber":117,"author":{"gitId":"-"},"content":"        public static final String INSTRUCTOR_INSTITUTION \u003d \"instructorinstitution\";"},{"lineNumber":118,"author":{"gitId":"-"},"content":"        public static final String IS_CREATING_ACCOUNT \u003d \"iscreatingaccount\";"},{"lineNumber":119,"author":{"gitId":"-"},"content":"        public static final String IS_INSTRUCTOR \u003d \"isinstructor\";"},{"lineNumber":120,"author":{"gitId":"-"},"content":""},{"lineNumber":121,"author":{"gitId":"-"},"content":"        public static final String FEEDBACK_SESSION_NAME \u003d \"fsname\";"},{"lineNumber":122,"author":{"gitId":"-"},"content":"        public static final String FEEDBACK_SESSION_STARTTIME \u003d \"starttime\";"},{"lineNumber":123,"author":{"gitId":"-"},"content":"        public static final String FEEDBACK_SESSION_ENDTIME \u003d \"endtime\";"},{"lineNumber":124,"author":{"gitId":"-"},"content":"        public static final String FEEDBACK_SESSION_MODERATED_PERSON \u003d \"moderatedperson\";"},{"lineNumber":125,"author":{"gitId":"-"},"content":"        public static final String FEEDBACK_SESSION_LOG_TYPE \u003d \"fsltype\";"},{"lineNumber":126,"author":{"gitId":"-"},"content":"        public static final String FEEDBACK_SESSION_LOG_STARTTIME \u003d \"fslstarttime\";"},{"lineNumber":127,"author":{"gitId":"-"},"content":"        public static final String FEEDBACK_SESSION_LOG_ENDTIME \u003d \"fslendtime\";"},{"lineNumber":128,"author":{"gitId":"-"},"content":""},{"lineNumber":129,"author":{"gitId":"-"},"content":"        public static final String FEEDBACK_QUESTION_ID \u003d \"questionid\";"},{"lineNumber":130,"author":{"gitId":"-"},"content":""},{"lineNumber":131,"author":{"gitId":"-"},"content":"        public static final String FEEDBACK_RESPONSE_ID \u003d \"responseid\";"},{"lineNumber":132,"author":{"gitId":"-"},"content":""},{"lineNumber":133,"author":{"gitId":"-"},"content":"        public static final String FEEDBACK_RESPONSE_COMMENT_ID \u003d \"responsecommentid\";"},{"lineNumber":134,"author":{"gitId":"-"},"content":""},{"lineNumber":135,"author":{"gitId":"-"},"content":"        public static final String FEEDBACK_RESULTS_GROUPBYSECTION \u003d \"frgroupbysection\";"},{"lineNumber":136,"author":{"gitId":"-"},"content":""},{"lineNumber":137,"author":{"gitId":"-"},"content":"        public static final String FEEDBACK_RESULTS_SECTION_BY_GIVER_RECEIVER \u003d \"frsessionbygiverreceiver\";"},{"lineNumber":138,"author":{"gitId":"-"},"content":""},{"lineNumber":139,"author":{"gitId":"-"},"content":"        public static final String PREVIEWAS \u003d \"previewas\";"},{"lineNumber":140,"author":{"gitId":"-"},"content":""},{"lineNumber":141,"author":{"gitId":"-"},"content":"        public static final String STUDENT_ID \u003d \"googleid\";"},{"lineNumber":142,"author":{"gitId":"-"},"content":"        public static final String INVITER_ID \u003d \"invitergoogleid\";"},{"lineNumber":143,"author":{"gitId":"-"},"content":""},{"lineNumber":144,"author":{"gitId":"-"},"content":"        public static final String REGKEY \u003d \"key\";"},{"lineNumber":145,"author":{"gitId":"-"},"content":"        public static final String STUDENT_EMAIL \u003d \"studentemail\";"},{"lineNumber":146,"author":{"gitId":"-"},"content":""},{"lineNumber":147,"author":{"gitId":"-"},"content":"        public static final String SECTION_NAME \u003d \"sectionname\";"},{"lineNumber":148,"author":{"gitId":"-"},"content":""},{"lineNumber":149,"author":{"gitId":"-"},"content":"        public static final String TEAM_NAME \u003d \"teamname\";"},{"lineNumber":150,"author":{"gitId":"-"},"content":""},{"lineNumber":151,"author":{"gitId":"-"},"content":"        public static final String ERROR \u003d \"error\";"},{"lineNumber":152,"author":{"gitId":"-"},"content":"        public static final String USER_ID \u003d \"user\";"},{"lineNumber":153,"author":{"gitId":"-"},"content":""},{"lineNumber":154,"author":{"gitId":"-"},"content":"        public static final String SEARCH_KEY \u003d \"searchkey\";"},{"lineNumber":155,"author":{"gitId":"-"},"content":""},{"lineNumber":156,"author":{"gitId":"-"},"content":"        public static final String USER_CAPTCHA_RESPONSE \u003d \"captcharesponse\";"},{"lineNumber":157,"author":{"gitId":"-"},"content":""},{"lineNumber":158,"author":{"gitId":"-"},"content":"        public static final String EMAIL_TYPE \u003d \"emailtype\";"},{"lineNumber":159,"author":{"gitId":"-"},"content":"        public static final String USER_EMAIL \u003d \"useremail\";"},{"lineNumber":160,"author":{"gitId":"-"},"content":""},{"lineNumber":161,"author":{"gitId":"-"},"content":"        public static final String ENTITY_TYPE \u003d \"entitytype\";"},{"lineNumber":162,"author":{"gitId":"-"},"content":""},{"lineNumber":163,"author":{"gitId":"-"},"content":"        public static final String INTENT \u003d \"intent\";"},{"lineNumber":164,"author":{"gitId":"-"},"content":""},{"lineNumber":165,"author":{"gitId":"-"},"content":"        public static final String TIMEZONE \u003d \"timezone\";"},{"lineNumber":166,"author":{"gitId":"-"},"content":""},{"lineNumber":167,"author":{"gitId":"-"},"content":"        public static final String NOTIFY_ABOUT_DEADLINES \u003d \"notifydeadlines\";"},{"lineNumber":168,"author":{"gitId":"-"},"content":""},{"lineNumber":169,"author":{"gitId":"-"},"content":"        public static final String QUERY_LOGS_STARTTIME \u003d \"starttime\";"},{"lineNumber":170,"author":{"gitId":"-"},"content":"        public static final String QUERY_LOGS_ENDTIME \u003d \"endtime\";"},{"lineNumber":171,"author":{"gitId":"-"},"content":"        public static final String QUERY_LOGS_SEVERITY \u003d \"severity\";"},{"lineNumber":172,"author":{"gitId":"-"},"content":"        public static final String QUERY_LOGS_MIN_SEVERITY \u003d \"minseverity\";"},{"lineNumber":173,"author":{"gitId":"-"},"content":"        public static final String QUERY_LOGS_TRACE \u003d \"traceid\";"},{"lineNumber":174,"author":{"gitId":"-"},"content":"        public static final String QUERY_LOGS_ACTION_CLASS \u003d \"actionclass\";"},{"lineNumber":175,"author":{"gitId":"-"},"content":"        public static final String QUERY_LOGS_EMAIL \u003d \"email\";"},{"lineNumber":176,"author":{"gitId":"-"},"content":"        public static final String QUERY_LOGS_EVENT \u003d \"logevent\";"},{"lineNumber":177,"author":{"gitId":"-"},"content":"        public static final String QUERY_LOGS_SOURCE_LOCATION_FILE \u003d \"sourcelocationfile\";"},{"lineNumber":178,"author":{"gitId":"-"},"content":"        public static final String QUERY_LOGS_SOURCE_LOCATION_FUNCTION \u003d \"sourcelocationfunction\";"},{"lineNumber":179,"author":{"gitId":"-"},"content":"        public static final String QUERY_LOGS_EXCEPTION_CLASS \u003d \"exceptionclass\";"},{"lineNumber":180,"author":{"gitId":"-"},"content":"        public static final String QUERY_LOGS_LATENCY \u003d \"latency\";"},{"lineNumber":181,"author":{"gitId":"-"},"content":"        public static final String QUERY_LOGS_STATUS \u003d \"status\";"},{"lineNumber":182,"author":{"gitId":"-"},"content":"        public static final String QUERY_LOGS_VERSION \u003d \"version\";"},{"lineNumber":183,"author":{"gitId":"-"},"content":"        public static final String QUERY_LOGS_EXTRA_FILTERS \u003d \"extrafilters\";"},{"lineNumber":184,"author":{"gitId":"-"},"content":"        public static final String QUERY_LOGS_ORDER \u003d \"order\";"},{"lineNumber":185,"author":{"gitId":"-"},"content":""},{"lineNumber":186,"author":{"gitId":"-"},"content":"        public static final String LIMIT \u003d \"limit\";"},{"lineNumber":187,"author":{"gitId":"-"},"content":""},{"lineNumber":188,"author":{"gitId":"-"},"content":"        public static final String NOTIFICATION_ID \u003d \"notificationid\";"},{"lineNumber":189,"author":{"gitId":"-"},"content":"        public static final String NOTIFICATION_TARGET_USER \u003d \"usertype\";"},{"lineNumber":190,"author":{"gitId":"-"},"content":"        public static final String NOTIFICATION_IS_FETCHING_ALL \u003d \"isfetchingall\";"},{"lineNumber":191,"author":{"gitId":"-"},"content":"        public static final String NOTFICATION_END_TIME \u003d \"endtime\";"},{"lineNumber":192,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":193,"author":{"gitId":"-"},"content":""},{"lineNumber":194,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":195,"author":{"gitId":"-"},"content":"     * Represents custom header names used by the system."},{"lineNumber":196,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":197,"author":{"gitId":"-"},"content":"    public static class HeaderNames {"},{"lineNumber":198,"author":{"gitId":"-"},"content":"        public static final String BACKDOOR_KEY \u003d \"Backdoor-Key\";"},{"lineNumber":199,"author":{"gitId":"-"},"content":"        public static final String CSRF_KEY \u003d \"CSRF-Key\";"},{"lineNumber":200,"author":{"gitId":"-"},"content":"        public static final String WEB_VERSION \u003d \"X-WEB-VERSION\";"},{"lineNumber":201,"author":{"gitId":"-"},"content":"        public static final String CSRF_TOKEN \u003d \"X-CSRF-TOKEN\";"},{"lineNumber":202,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":203,"author":{"gitId":"-"},"content":""},{"lineNumber":204,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":205,"author":{"gitId":"-"},"content":"     * The course status respect to the instructor\u0027s point of view."},{"lineNumber":206,"author":{"gitId":"-"},"content":"     * This parameter is used to get a course list for instructor."},{"lineNumber":207,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":208,"author":{"gitId":"-"},"content":"    public static class CourseStatus {"},{"lineNumber":209,"author":{"gitId":"-"},"content":"        public static final String ACTIVE \u003d \"active\";"},{"lineNumber":210,"author":{"gitId":"-"},"content":"        public static final String ARCHIVED \u003d \"archived\";"},{"lineNumber":211,"author":{"gitId":"-"},"content":"        public static final String SOFT_DELETED \u003d \"softDeleted\";"},{"lineNumber":212,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":213,"author":{"gitId":"-"},"content":""},{"lineNumber":214,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":215,"author":{"gitId":"-"},"content":"     * Represents user types."},{"lineNumber":216,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":217,"author":{"gitId":"-"},"content":"    public static class EntityType {"},{"lineNumber":218,"author":{"gitId":"-"},"content":""},{"lineNumber":219,"author":{"gitId":"-"},"content":"        public static final String STUDENT \u003d \"student\";"},{"lineNumber":220,"author":{"gitId":"-"},"content":"        public static final String INSTRUCTOR \u003d \"instructor\";"},{"lineNumber":221,"author":{"gitId":"-"},"content":"        public static final String ADMIN \u003d \"admin\";"},{"lineNumber":222,"author":{"gitId":"-"},"content":"        public static final String MAINTAINER \u003d \"maintainer\";"},{"lineNumber":223,"author":{"gitId":"-"},"content":""},{"lineNumber":224,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":225,"author":{"gitId":"-"},"content":""},{"lineNumber":226,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":227,"author":{"gitId":"-"},"content":"     * Represents security-related configuration."},{"lineNumber":228,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":229,"author":{"gitId":"-"},"content":"    public static class SecurityConfig {"},{"lineNumber":230,"author":{"gitId":"-"},"content":""},{"lineNumber":231,"author":{"gitId":"-"},"content":"        public static final String CSRF_COOKIE_NAME \u003d \"CSRF-TOKEN\";"},{"lineNumber":232,"author":{"gitId":"-"},"content":"        public static final String AUTH_COOKIE_NAME \u003d \"AUTH-TOKEN\";"},{"lineNumber":233,"author":{"gitId":"-"},"content":""},{"lineNumber":234,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":235,"author":{"gitId":"-"},"content":""},{"lineNumber":236,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":237,"author":{"gitId":"-"},"content":"     * Represents URIs of accessible pages in the front-end in past versions (V6 and before)."},{"lineNumber":238,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":239,"author":{"gitId":"-"},"content":"    @Deprecated"},{"lineNumber":240,"author":{"gitId":"-"},"content":"    public static class LegacyURIs {"},{"lineNumber":241,"author":{"gitId":"-"},"content":""},{"lineNumber":242,"author":{"gitId":"-"},"content":"        public static final String INSTRUCTOR_COURSE_JOIN \u003d \"/page/instructorCourseJoin\";"},{"lineNumber":243,"author":{"gitId":"-"},"content":"        public static final String STUDENT_COURSE_JOIN \u003d \"/page/studentCourseJoin\";"},{"lineNumber":244,"author":{"gitId":"-"},"content":"        public static final String STUDENT_COURSE_JOIN_NEW \u003d \"/page/studentCourseJoinAuthentication\";"},{"lineNumber":245,"author":{"gitId":"-"},"content":"        public static final String INSTRUCTOR_HOME_PAGE \u003d \"/page/instructorHomePage\";"},{"lineNumber":246,"author":{"gitId":"-"},"content":"        public static final String STUDENT_HOME_PAGE \u003d \"/page/studentHomePage\";"},{"lineNumber":247,"author":{"gitId":"-"},"content":"        public static final String STUDENT_FEEDBACK_SUBMISSION_EDIT_PAGE \u003d \"/page/studentFeedbackSubmissionEditPage\";"},{"lineNumber":248,"author":{"gitId":"-"},"content":"        public static final String STUDENT_FEEDBACK_RESULTS_PAGE \u003d \"/page/studentFeedbackResultsPage\";"},{"lineNumber":249,"author":{"gitId":"-"},"content":"        public static final String INSTRUCTOR_FEEDBACK_SUBMISSION_EDIT_PAGE \u003d \"/page/instructorFeedbackSubmissionEditPage\";"},{"lineNumber":250,"author":{"gitId":"-"},"content":"        public static final String INSTRUCTOR_FEEDBACK_RESULTS_PAGE \u003d \"/page/instructorFeedbackResultsPage\";"},{"lineNumber":251,"author":{"gitId":"-"},"content":""},{"lineNumber":252,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":253,"author":{"gitId":"-"},"content":""},{"lineNumber":254,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":255,"author":{"gitId":"-"},"content":"     * Represents URIs of accessible pages in the front-end."},{"lineNumber":256,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":257,"author":{"gitId":"-"},"content":"    public static class WebPageURIs {"},{"lineNumber":258,"author":{"gitId":"-"},"content":"        public static final String LOGIN \u003d \"/login\";"},{"lineNumber":259,"author":{"gitId":"-"},"content":"        public static final String LOGOUT \u003d \"/logout\";"},{"lineNumber":260,"author":{"gitId":"-"},"content":"        private static final String URI_PREFIX \u003d \"/web\";"},{"lineNumber":261,"author":{"gitId":"-"},"content":""},{"lineNumber":262,"author":{"gitId":"-"},"content":"        private static final String STUDENT_PAGE \u003d URI_PREFIX + \"/\" + EntityType.STUDENT;"},{"lineNumber":263,"author":{"gitId":"-"},"content":"        private static final String INSTRUCTOR_PAGE \u003d URI_PREFIX + \"/\" + EntityType.INSTRUCTOR;"},{"lineNumber":264,"author":{"gitId":"-"},"content":"        private static final String ADMIN_PAGE \u003d URI_PREFIX + \"/\" + EntityType.ADMIN;"},{"lineNumber":265,"author":{"gitId":"-"},"content":"        private static final String MAINTAINER_PAGE \u003d URI_PREFIX + \"/\" + EntityType.MAINTAINER;"},{"lineNumber":266,"author":{"gitId":"-"},"content":"        private static final String FRONT_PAGE \u003d URI_PREFIX + \"/front\";"},{"lineNumber":267,"author":{"gitId":"-"},"content":"        public static final String JOIN_PAGE \u003d URI_PREFIX + \"/join\";"},{"lineNumber":268,"author":{"gitId":"-"},"content":""},{"lineNumber":269,"author":{"gitId":"-"},"content":"        public static final String ADMIN_HOME_PAGE \u003d ADMIN_PAGE + \"/home\";"},{"lineNumber":270,"author":{"gitId":"-"},"content":"        public static final String ADMIN_ACCOUNTS_PAGE \u003d ADMIN_PAGE + \"/accounts\";"},{"lineNumber":271,"author":{"gitId":"-"},"content":"        public static final String ADMIN_SEARCH_PAGE \u003d ADMIN_PAGE + \"/search\";"},{"lineNumber":272,"author":{"gitId":"-"},"content":"        public static final String ADMIN_SESSIONS_PAGE \u003d ADMIN_PAGE + \"/sessions\";"},{"lineNumber":273,"author":{"gitId":"-"},"content":"        public static final String ADMIN_TIMEZONE_PAGE \u003d ADMIN_PAGE + \"/timezone\";"},{"lineNumber":274,"author":{"gitId":"-"},"content":"        public static final String ADMIN_LOGS_PAGE \u003d ADMIN_PAGE + \"/logs\";"},{"lineNumber":275,"author":{"gitId":"-"},"content":"        public static final String ADMIN_NOTIFICATIONS_PAGE \u003d ADMIN_PAGE + \"/notifications\";"},{"lineNumber":276,"author":{"gitId":"-"},"content":""},{"lineNumber":277,"author":{"gitId":"-"},"content":"        public static final String MAINTAINER_HOME_PAGE \u003d MAINTAINER_PAGE + \"/home\";"},{"lineNumber":278,"author":{"gitId":"-"},"content":""},{"lineNumber":279,"author":{"gitId":"-"},"content":"        public static final String INSTRUCTOR_HOME_PAGE \u003d INSTRUCTOR_PAGE + \"/home\";"},{"lineNumber":280,"author":{"gitId":"-"},"content":"        public static final String INSTRUCTOR_SEARCH_PAGE \u003d INSTRUCTOR_PAGE + \"/search\";"},{"lineNumber":281,"author":{"gitId":"-"},"content":"        public static final String INSTRUCTOR_SESSIONS_PAGE \u003d INSTRUCTOR_PAGE + \"/sessions\";"},{"lineNumber":282,"author":{"gitId":"-"},"content":"        public static final String INSTRUCTOR_SESSION_SUBMISSION_PAGE \u003d INSTRUCTOR_PAGE + \"/sessions/submission\";"},{"lineNumber":283,"author":{"gitId":"-"},"content":"        public static final String INSTRUCTOR_SESSION_EDIT_PAGE \u003d INSTRUCTOR_PAGE + \"/sessions/edit\";"},{"lineNumber":284,"author":{"gitId":"-"},"content":"        public static final String INSTRUCTOR_SESSION_INDIVIDUAL_EXTENSION_PAGE \u003d INSTRUCTOR_PAGE"},{"lineNumber":285,"author":{"gitId":"-"},"content":"                + \"/sessions/individual-extension\";"},{"lineNumber":286,"author":{"gitId":"-"},"content":"        public static final String INSTRUCTOR_SESSION_RESULTS_PAGE \u003d INSTRUCTOR_PAGE + \"/sessions/result\";"},{"lineNumber":287,"author":{"gitId":"-"},"content":"        public static final String INSTRUCTOR_SESSION_REPORT_PAGE \u003d INSTRUCTOR_PAGE + \"/sessions/report\";"},{"lineNumber":288,"author":{"gitId":"-"},"content":"        public static final String INSTRUCTOR_COURSES_PAGE \u003d INSTRUCTOR_PAGE + \"/courses\";"},{"lineNumber":289,"author":{"gitId":"-"},"content":"        public static final String INSTRUCTOR_COURSE_DETAILS_PAGE \u003d INSTRUCTOR_PAGE + \"/courses/details\";"},{"lineNumber":290,"author":{"gitId":"-"},"content":"        public static final String INSTRUCTOR_COURSE_EDIT_PAGE \u003d INSTRUCTOR_PAGE + \"/courses/edit\";"},{"lineNumber":291,"author":{"gitId":"-"},"content":"        public static final String INSTRUCTOR_COURSE_ENROLL_PAGE \u003d INSTRUCTOR_PAGE + \"/courses/enroll\";"},{"lineNumber":292,"author":{"gitId":"-"},"content":"        public static final String INSTRUCTOR_COURSE_STUDENT_DETAILS_PAGE \u003d INSTRUCTOR_PAGE + \"/courses/student/details\";"},{"lineNumber":293,"author":{"gitId":"-"},"content":"        public static final String INSTRUCTOR_COURSE_STUDENT_DETAILS_EDIT_PAGE \u003d INSTRUCTOR_PAGE + \"/courses/student/edit\";"},{"lineNumber":294,"author":{"gitId":"-"},"content":"        public static final String INSTRUCTOR_STUDENT_LIST_PAGE \u003d INSTRUCTOR_PAGE + \"/students\";"},{"lineNumber":295,"author":{"gitId":"-"},"content":"        public static final String INSTRUCTOR_STUDENT_RECORDS_PAGE \u003d INSTRUCTOR_PAGE + \"/students/records\";"},{"lineNumber":296,"author":{"gitId":"-"},"content":"        public static final String INSTRUCTOR_STUDENT_ACTIVITY_LOGS_PAGE \u003d INSTRUCTOR_PAGE"},{"lineNumber":297,"author":{"gitId":"-"},"content":"                + \"/courses/student-activity-logs\";"},{"lineNumber":298,"author":{"gitId":"-"},"content":"        public static final String INSTRUCTOR_NOTIFICATIONS_PAGE \u003d INSTRUCTOR_PAGE + \"/notifications\";"},{"lineNumber":299,"author":{"gitId":"-"},"content":""},{"lineNumber":300,"author":{"gitId":"-"},"content":"        public static final String STUDENT_HOME_PAGE \u003d STUDENT_PAGE + \"/home\";"},{"lineNumber":301,"author":{"gitId":"-"},"content":"        public static final String STUDENT_COURSE_DETAILS_PAGE \u003d STUDENT_PAGE + \"/course\";"},{"lineNumber":302,"author":{"gitId":"-"},"content":"        public static final String STUDENT_SESSION_SUBMISSION_PAGE \u003d STUDENT_PAGE + \"/sessions/submission\";"},{"lineNumber":303,"author":{"gitId":"-"},"content":"        public static final String STUDENT_SESSION_RESULTS_PAGE \u003d STUDENT_PAGE + \"/sessions/result\";"},{"lineNumber":304,"author":{"gitId":"-"},"content":"        public static final String STUDENT_NOTIFICATIONS_PAGE \u003d STUDENT_PAGE + \"/notifications\";"},{"lineNumber":305,"author":{"gitId":"-"},"content":""},{"lineNumber":306,"author":{"gitId":"-"},"content":"        public static final String SESSION_RESULTS_PAGE \u003d URI_PREFIX + \"/sessions/result\";"},{"lineNumber":307,"author":{"gitId":"-"},"content":"        public static final String SESSION_SUBMISSION_PAGE \u003d URI_PREFIX + \"/sessions/submission\";"},{"lineNumber":308,"author":{"gitId":"-"},"content":"        public static final String SESSIONS_LINK_RECOVERY_PAGE \u003d FRONT_PAGE + \"/help/session-links-recovery\";"},{"lineNumber":309,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":310,"author":{"gitId":"-"},"content":""},{"lineNumber":311,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":312,"author":{"gitId":"-"},"content":"     * Represents URIs of resource endpoints."},{"lineNumber":313,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":314,"author":{"gitId":"-"},"content":"    public static class ResourceURIs {"},{"lineNumber":315,"author":{"gitId":"-"},"content":"        private static final String URI_PREFIX \u003d \"/webapi\";"},{"lineNumber":316,"author":{"gitId":"-"},"content":""},{"lineNumber":317,"author":{"gitId":"-"},"content":"        public static final String DATABUNDLE \u003d URI_PREFIX + \"/databundle\";"},{"lineNumber":318,"author":{"gitId":"-"},"content":"        public static final String DATABUNDLE_DOCUMENTS \u003d URI_PREFIX + \"/databundle/documents\";"},{"lineNumber":319,"author":{"gitId":"-"},"content":"        public static final String DEADLINE_EXTENSION \u003d URI_PREFIX + \"/deadlineextension\";"},{"lineNumber":320,"author":{"gitId":"-"},"content":"        public static final String EXCEPTION \u003d URI_PREFIX + \"/exception\";"},{"lineNumber":321,"author":{"gitId":"-"},"content":"        public static final String ERROR_REPORT \u003d URI_PREFIX + \"/errorreport\";"},{"lineNumber":322,"author":{"gitId":"-"},"content":"        public static final String AUTH \u003d URI_PREFIX + \"/auth\";"},{"lineNumber":323,"author":{"gitId":"-"},"content":"        public static final String AUTH_REGKEY \u003d URI_PREFIX + \"/auth/regkey\";"},{"lineNumber":324,"author":{"gitId":"-"},"content":"        public static final String ACCOUNT \u003d URI_PREFIX + \"/account\";"},{"lineNumber":325,"author":{"gitId":"-"},"content":"        public static final String ACCOUNT_RESET \u003d URI_PREFIX + \"/account/reset\";"},{"lineNumber":326,"author":{"gitId":"-"},"content":"        public static final String ACCOUNT_REQUEST \u003d URI_PREFIX + \"/account/request\";"},{"lineNumber":327,"author":{"gitId":"-"},"content":"        public static final String ACCOUNT_REQUEST_RESET \u003d ACCOUNT_REQUEST + \"/reset\";"},{"lineNumber":328,"author":{"gitId":"-"},"content":"        public static final String ACCOUNTS \u003d URI_PREFIX + \"/accounts\";"},{"lineNumber":329,"author":{"gitId":"-"},"content":"        public static final String RESPONSE_COMMENT \u003d URI_PREFIX + \"/responsecomment\";"},{"lineNumber":330,"author":{"gitId":"-"},"content":"        public static final String COURSE \u003d URI_PREFIX + \"/course\";"},{"lineNumber":331,"author":{"gitId":"-"},"content":"        public static final String COURSE_ARCHIVE \u003d URI_PREFIX + \"/course/archive\";"},{"lineNumber":332,"author":{"gitId":"-"},"content":"        public static final String BIN_COURSE \u003d URI_PREFIX + \"/bin/course\";"},{"lineNumber":333,"author":{"gitId":"-"},"content":"        public static final String COURSE_SECTIONS \u003d URI_PREFIX + \"/course/sections\";"},{"lineNumber":334,"author":{"gitId":"-"},"content":"        public static final String COURSES \u003d URI_PREFIX + \"/courses\";"},{"lineNumber":335,"author":{"gitId":"-"},"content":"        public static final String INSTRUCTORS \u003d URI_PREFIX + \"/instructors\";"},{"lineNumber":336,"author":{"gitId":"-"},"content":"        public static final String INSTRUCTOR \u003d URI_PREFIX + \"/instructor\";"},{"lineNumber":337,"author":{"gitId":"-"},"content":"        public static final String INSTRUCTOR_PRIVILEGE \u003d URI_PREFIX + \"/instructor/privilege\";"},{"lineNumber":338,"author":{"gitId":"-"},"content":"        public static final String INSTRUCTOR_KEY \u003d URI_PREFIX + \"/instructor/key\";"},{"lineNumber":339,"author":{"gitId":"-"},"content":"        public static final String RESULT \u003d URI_PREFIX + \"/result\";"},{"lineNumber":340,"author":{"gitId":"-"},"content":"        public static final String STUDENTS \u003d URI_PREFIX + \"/students\";"},{"lineNumber":341,"author":{"gitId":"-"},"content":"        public static final String STUDENT \u003d URI_PREFIX + \"/student\";"},{"lineNumber":342,"author":{"gitId":"-"},"content":"        public static final String STUDENT_KEY \u003d URI_PREFIX + \"/student/key\";"},{"lineNumber":343,"author":{"gitId":"-"},"content":"        public static final String NOTIFICATION \u003d URI_PREFIX + \"/notification\";"},{"lineNumber":344,"author":{"gitId":"-"},"content":"        public static final String NOTIFICATIONS \u003d URI_PREFIX + \"/notifications\";"},{"lineNumber":345,"author":{"gitId":"-"},"content":"        public static final String NOTIFICATION_READ \u003d URI_PREFIX + \"/notification/read\";"},{"lineNumber":346,"author":{"gitId":"-"},"content":"        public static final String SESSIONS_ONGOING \u003d URI_PREFIX + \"/sessions/ongoing\";"},{"lineNumber":347,"author":{"gitId":"-"},"content":"        public static final String SESSION \u003d URI_PREFIX + \"/session\";"},{"lineNumber":348,"author":{"gitId":"-"},"content":"        public static final String SESSION_PUBLISH \u003d URI_PREFIX + \"/session/publish\";"},{"lineNumber":349,"author":{"gitId":"-"},"content":"        public static final String SESSION_REMIND_SUBMISSION \u003d URI_PREFIX + \"/session/remind/submission\";"},{"lineNumber":350,"author":{"gitId":"-"},"content":"        public static final String SESSION_REMIND_RESULT \u003d URI_PREFIX + \"/session/remind/result\";"},{"lineNumber":351,"author":{"gitId":"-"},"content":"        public static final String SESSION_STATS \u003d URI_PREFIX + \"/session/stats\";"},{"lineNumber":352,"author":{"gitId":"-"},"content":"        public static final String SESSION_SUBMITTED_GIVER_SET \u003d URI_PREFIX + \"/session/submitted/giverset\";"},{"lineNumber":353,"author":{"gitId":"-"},"content":"        public static final String SESSIONS \u003d URI_PREFIX + \"/sessions\";"},{"lineNumber":354,"author":{"gitId":"-"},"content":"        public static final String SEARCH_ACCOUNT_REQUESTS \u003d URI_PREFIX + \"/search/accountrequests\";"},{"lineNumber":355,"author":{"gitId":"-"},"content":"        public static final String SEARCH_INSTRUCTORS \u003d URI_PREFIX + \"/search/instructors\";"},{"lineNumber":356,"author":{"gitId":"-"},"content":"        public static final String SEARCH_STUDENTS \u003d URI_PREFIX + \"/search/students\";"},{"lineNumber":357,"author":{"gitId":"-"},"content":"        public static final String BIN_SESSION \u003d URI_PREFIX + \"/bin/session\";"},{"lineNumber":358,"author":{"gitId":"-"},"content":"        public static final String QUESTIONS \u003d URI_PREFIX + \"/questions\";"},{"lineNumber":359,"author":{"gitId":"-"},"content":"        public static final String QUESTION \u003d URI_PREFIX + \"/question\";"},{"lineNumber":360,"author":{"gitId":"-"},"content":"        public static final String QUESTION_RECIPIENTS \u003d URI_PREFIX + \"/question/recipients\";"},{"lineNumber":361,"author":{"gitId":"-"},"content":"        public static final String RESPONSES \u003d URI_PREFIX + \"/responses\";"},{"lineNumber":362,"author":{"gitId":"-"},"content":"        public static final String USAGE_STATISTICS \u003d URI_PREFIX + \"/usagestats\";"},{"lineNumber":363,"author":{"gitId":"-"},"content":"        public static final String HAS_RESPONSES \u003d URI_PREFIX + \"/hasResponses\";"},{"lineNumber":364,"author":{"gitId":"-"},"content":"        public static final String JOIN \u003d URI_PREFIX + \"/join\";"},{"lineNumber":365,"author":{"gitId":"-"},"content":"        public static final String JOIN_REMIND \u003d URI_PREFIX + \"/join/remind\";"},{"lineNumber":366,"author":{"gitId":"-"},"content":"        public static final String TIMEZONE \u003d URI_PREFIX + \"/timezone\";"},{"lineNumber":367,"author":{"gitId":"-"},"content":"        public static final String SESSION_LINKS_RECOVERY \u003d URI_PREFIX + \"/sessionlinksrecovery\";"},{"lineNumber":368,"author":{"gitId":"-"},"content":"        public static final String EMAIL \u003d URI_PREFIX + \"/email\";"},{"lineNumber":369,"author":{"gitId":"-"},"content":"        public static final String SESSION_LOGS \u003d URI_PREFIX + \"/logs/session\";"},{"lineNumber":370,"author":{"gitId":"-"},"content":"        public static final String LOGS \u003d URI_PREFIX + \"/logs/query\";"},{"lineNumber":371,"author":{"gitId":"-"},"content":"        public static final String ACTION_CLASS \u003d URI_PREFIX + \"/actionclass\";"},{"lineNumber":372,"author":{"gitId":"-"},"content":"        public static final String USER_COOKIE \u003d URI_PREFIX + \"/cookie\";"},{"lineNumber":373,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":374,"author":{"gitId":"-"},"content":""},{"lineNumber":375,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":376,"author":{"gitId":"-"},"content":"     * Represents URIs of endpoints used by cron jobs."},{"lineNumber":377,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":378,"author":{"gitId":"-"},"content":"    public static class CronJobURIs {"},{"lineNumber":379,"author":{"gitId":"-"},"content":"        private static final String URI_PREFIX \u003d \"/auto\";"},{"lineNumber":380,"author":{"gitId":"-"},"content":""},{"lineNumber":381,"author":{"gitId":"-"},"content":"        public static final String AUTOMATED_LOG_COMPILATION \u003d URI_PREFIX + \"/compileLogs\";"},{"lineNumber":382,"author":{"gitId":"-"},"content":"        public static final String AUTOMATED_DATASTORE_BACKUP \u003d URI_PREFIX + \"/datastoreBackup\";"},{"lineNumber":383,"author":{"gitId":"-"},"content":"        public static final String AUTOMATED_FEEDBACK_OPENING_SOON_REMINDERS \u003d"},{"lineNumber":384,"author":{"gitId":"-"},"content":"                URI_PREFIX + \"/feedbackSessionOpeningSoonReminders\";"},{"lineNumber":385,"author":{"gitId":"-"},"content":"        public static final String AUTOMATED_FEEDBACK_OPENING_REMINDERS \u003d"},{"lineNumber":386,"author":{"gitId":"-"},"content":"                URI_PREFIX + \"/feedbackSessionOpeningReminders\";"},{"lineNumber":387,"author":{"gitId":"-"},"content":"        public static final String AUTOMATED_FEEDBACK_CLOSED_REMINDERS \u003d"},{"lineNumber":388,"author":{"gitId":"-"},"content":"                URI_PREFIX + \"/feedbackSessionClosedReminders\";"},{"lineNumber":389,"author":{"gitId":"-"},"content":"        public static final String AUTOMATED_FEEDBACK_CLOSING_REMINDERS \u003d"},{"lineNumber":390,"author":{"gitId":"-"},"content":"                URI_PREFIX + \"/feedbackSessionClosingReminders\";"},{"lineNumber":391,"author":{"gitId":"-"},"content":"        public static final String AUTOMATED_FEEDBACK_PUBLISHED_REMINDERS \u003d"},{"lineNumber":392,"author":{"gitId":"-"},"content":"                URI_PREFIX + \"/feedbackSessionPublishedReminders\";"},{"lineNumber":393,"author":{"gitId":"-"},"content":"        public static final String AUTOMATED_USAGE_STATISTICS_COLLECTION \u003d"},{"lineNumber":394,"author":{"gitId":"-"},"content":"                URI_PREFIX + \"/calculateUsageStatistics\";"},{"lineNumber":395,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":396,"author":{"gitId":"-"},"content":""},{"lineNumber":397,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":398,"author":{"gitId":"-"},"content":"     * Configurations for task queue."},{"lineNumber":399,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":400,"author":{"gitId":"-"},"content":"    public static class TaskQueue {"},{"lineNumber":401,"author":{"gitId":"-"},"content":"        public static final String URI_PREFIX \u003d \"/worker\";"},{"lineNumber":402,"author":{"gitId":"-"},"content":""},{"lineNumber":403,"author":{"gitId":"-"},"content":"        public static final String FEEDBACK_SESSION_PUBLISHED_EMAIL_QUEUE_NAME \u003d"},{"lineNumber":404,"author":{"gitId":"-"},"content":"                \"feedback-session-published-email-queue\";"},{"lineNumber":405,"author":{"gitId":"-"},"content":"        public static final String FEEDBACK_SESSION_PUBLISHED_EMAIL_WORKER_URL \u003d"},{"lineNumber":406,"author":{"gitId":"-"},"content":"                URI_PREFIX + \"/feedbackSessionPublishedEmail\";"},{"lineNumber":407,"author":{"gitId":"-"},"content":""},{"lineNumber":408,"author":{"gitId":"-"},"content":"        public static final String FEEDBACK_SESSION_RESEND_PUBLISHED_EMAIL_QUEUE_NAME \u003d"},{"lineNumber":409,"author":{"gitId":"-"},"content":"                \"feedback-session-resend-published-email-queue\";"},{"lineNumber":410,"author":{"gitId":"-"},"content":"        public static final String FEEDBACK_SESSION_RESEND_PUBLISHED_EMAIL_WORKER_URL \u003d"},{"lineNumber":411,"author":{"gitId":"-"},"content":"                URI_PREFIX + \"/feedbackSessionResendPublishedEmail\";"},{"lineNumber":412,"author":{"gitId":"-"},"content":""},{"lineNumber":413,"author":{"gitId":"-"},"content":"        public static final String FEEDBACK_SESSION_REMIND_EMAIL_QUEUE_NAME \u003d \"feedback-session-remind-email-queue\";"},{"lineNumber":414,"author":{"gitId":"-"},"content":"        public static final String FEEDBACK_SESSION_REMIND_EMAIL_WORKER_URL \u003d URI_PREFIX + \"/feedbackSessionRemindEmail\";"},{"lineNumber":415,"author":{"gitId":"-"},"content":""},{"lineNumber":416,"author":{"gitId":"-"},"content":"        public static final String FEEDBACK_SESSION_REMIND_PARTICULAR_USERS_EMAIL_QUEUE_NAME \u003d"},{"lineNumber":417,"author":{"gitId":"-"},"content":"                \"feedback-session-remind-particular-users-email-queue\";"},{"lineNumber":418,"author":{"gitId":"-"},"content":"        public static final String FEEDBACK_SESSION_REMIND_PARTICULAR_USERS_EMAIL_WORKER_URL \u003d"},{"lineNumber":419,"author":{"gitId":"-"},"content":"                URI_PREFIX + \"/feedbackSessionRemindParticularUsersEmail\";"},{"lineNumber":420,"author":{"gitId":"-"},"content":""},{"lineNumber":421,"author":{"gitId":"-"},"content":"        public static final String FEEDBACK_SESSION_UNPUBLISHED_EMAIL_QUEUE_NAME \u003d"},{"lineNumber":422,"author":{"gitId":"-"},"content":"                \"feedback-session-unpublished-email-queue\";"},{"lineNumber":423,"author":{"gitId":"-"},"content":"        public static final String FEEDBACK_SESSION_UNPUBLISHED_EMAIL_WORKER_URL \u003d"},{"lineNumber":424,"author":{"gitId":"-"},"content":"                URI_PREFIX + \"/feedbackSessionUnpublishedEmail\";"},{"lineNumber":425,"author":{"gitId":"-"},"content":""},{"lineNumber":426,"author":{"gitId":"-"},"content":"        public static final String INSTRUCTOR_COURSE_JOIN_EMAIL_QUEUE_NAME \u003d \"instructor-course-join-email-queue\";"},{"lineNumber":427,"author":{"gitId":"-"},"content":"        public static final String INSTRUCTOR_COURSE_JOIN_EMAIL_WORKER_URL \u003d URI_PREFIX + \"/instructorCourseJoinEmail\";"},{"lineNumber":428,"author":{"gitId":"-"},"content":""},{"lineNumber":429,"author":{"gitId":"-"},"content":"        public static final String SEND_EMAIL_QUEUE_NAME \u003d \"send-email-queue\";"},{"lineNumber":430,"author":{"gitId":"-"},"content":"        public static final String SEND_EMAIL_WORKER_URL \u003d URI_PREFIX + \"/sendEmail\";"},{"lineNumber":431,"author":{"gitId":"-"},"content":""},{"lineNumber":432,"author":{"gitId":"-"},"content":"        public static final String STUDENT_COURSE_JOIN_EMAIL_QUEUE_NAME \u003d \"student-course-join-email-queue\";"},{"lineNumber":433,"author":{"gitId":"-"},"content":"        public static final String STUDENT_COURSE_JOIN_EMAIL_WORKER_URL \u003d URI_PREFIX + \"/studentCourseJoinEmail\";"},{"lineNumber":434,"author":{"gitId":"-"},"content":""},{"lineNumber":435,"author":{"gitId":"-"},"content":"        public static final String SEARCH_INDEXING_QUEUE_NAME \u003d \"search-indexing-queue\";"},{"lineNumber":436,"author":{"gitId":"-"},"content":"        public static final String INSTRUCTOR_SEARCH_INDEXING_WORKER_URL \u003d URI_PREFIX + \"/instructorSearchIndexing\";"},{"lineNumber":437,"author":{"gitId":"-"},"content":"        public static final String ACCOUNT_REQUEST_SEARCH_INDEXING_WORKER_URL \u003d"},{"lineNumber":438,"author":{"gitId":"-"},"content":"                URI_PREFIX + \"/accountRequestSearchIndexing\";"},{"lineNumber":439,"author":{"gitId":"-"},"content":"        public static final String STUDENT_SEARCH_INDEXING_WORKER_URL \u003d URI_PREFIX + \"/studentSearchIndexing\";"},{"lineNumber":440,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":441,"author":{"gitId":"-"},"content":""},{"lineNumber":442,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"hhdqirui":3,"-":439}},{"path":"src/main/java/teammates/common/util/FieldValidator.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.common.util;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.time.Duration;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.time.Instant;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.time.LocalDateTime;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import java.time.ZoneId;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import java.util.Arrays;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import java.util.Collection;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import java.util.Collections;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import java.util.HashSet;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import java.util.LinkedList;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import java.util.Map;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import java.util.Set;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import java.util.function.BiPredicate;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"import java.util.stream.Collectors;"},{"lineNumber":17,"author":{"gitId":"-"},"content":""},{"lineNumber":18,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.FeedbackParticipantType;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.NotificationStyle;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.NotificationTargetUser;"},{"lineNumber":21,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.DeadlineExtension;"},{"lineNumber":22,"author":{"gitId":"-"},"content":""},{"lineNumber":23,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":24,"author":{"gitId":"-"},"content":" * Used to handle the data validation aspect e.g. validate emails, names, etc."},{"lineNumber":25,"author":{"gitId":"-"},"content":" */"},{"lineNumber":26,"author":{"gitId":"-"},"content":"public final class FieldValidator {"},{"lineNumber":27,"author":{"gitId":"-"},"content":""},{"lineNumber":28,"author":{"gitId":"-"},"content":"    /////////////////"},{"lineNumber":29,"author":{"gitId":"-"},"content":"    // FIELD TYPES //"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    /////////////////"},{"lineNumber":31,"author":{"gitId":"-"},"content":""},{"lineNumber":32,"author":{"gitId":"-"},"content":"    // name-related"},{"lineNumber":33,"author":{"gitId":"-"},"content":"    public static final String PERSON_NAME_FIELD_NAME \u003d \"person name\";"},{"lineNumber":34,"author":{"gitId":"-"},"content":"    public static final int PERSON_NAME_MAX_LENGTH \u003d 100;"},{"lineNumber":35,"author":{"gitId":"-"},"content":""},{"lineNumber":36,"author":{"gitId":"-"},"content":"    public static final String COURSE_NAME_FIELD_NAME \u003d \"course name\";"},{"lineNumber":37,"author":{"gitId":"-"},"content":"    public static final int COURSE_NAME_MAX_LENGTH \u003d 80;"},{"lineNumber":38,"author":{"gitId":"-"},"content":""},{"lineNumber":39,"author":{"gitId":"-"},"content":"    public static final String FEEDBACK_SESSION_NAME_FIELD_NAME \u003d \"feedback session name\";"},{"lineNumber":40,"author":{"gitId":"-"},"content":"    public static final int FEEDBACK_SESSION_NAME_MAX_LENGTH \u003d 64;"},{"lineNumber":41,"author":{"gitId":"-"},"content":""},{"lineNumber":42,"author":{"gitId":"-"},"content":"    public static final String TEAM_NAME_FIELD_NAME \u003d \"team name\";"},{"lineNumber":43,"author":{"gitId":"-"},"content":"    public static final int TEAM_NAME_MAX_LENGTH \u003d 60;"},{"lineNumber":44,"author":{"gitId":"-"},"content":""},{"lineNumber":45,"author":{"gitId":"-"},"content":"    public static final String SECTION_NAME_FIELD_NAME \u003d \"section name\";"},{"lineNumber":46,"author":{"gitId":"-"},"content":"    public static final int SECTION_NAME_MAX_LENGTH \u003d 60;"},{"lineNumber":47,"author":{"gitId":"-"},"content":""},{"lineNumber":48,"author":{"gitId":"-"},"content":"    public static final String INSTITUTE_NAME_FIELD_NAME \u003d \"institute name\";"},{"lineNumber":49,"author":{"gitId":"-"},"content":"    public static final int INSTITUTE_NAME_MAX_LENGTH \u003d 64;"},{"lineNumber":50,"author":{"gitId":"-"},"content":""},{"lineNumber":51,"author":{"gitId":"-"},"content":"    // email-related"},{"lineNumber":52,"author":{"gitId":"-"},"content":"    public static final String EMAIL_FIELD_NAME \u003d \"email\";"},{"lineNumber":53,"author":{"gitId":"-"},"content":"    public static final int EMAIL_MAX_LENGTH \u003d 254;"},{"lineNumber":54,"author":{"gitId":"-"},"content":""},{"lineNumber":55,"author":{"gitId":"-"},"content":"    // notification-related"},{"lineNumber":56,"author":{"gitId":"-"},"content":"    public static final String NOTIFICATION_TITLE_FIELD_NAME \u003d \"notification title\";"},{"lineNumber":57,"author":{"gitId":"-"},"content":"    public static final String NOTIFICATION_MESSAGE_FIELD_NAME \u003d \"notification message\";"},{"lineNumber":58,"author":{"gitId":"-"},"content":"    public static final String NOTIFICATION_NAME \u003d \"notification\";"},{"lineNumber":59,"author":{"gitId":"-"},"content":"    public static final String NOTIFICATION_VISIBLE_TIME_FIELD_NAME \u003d \"time when the notification will be visible\";"},{"lineNumber":60,"author":{"gitId":"-"},"content":"    public static final String NOTIFICATION_EXPIRY_TIME_FIELD_NAME \u003d \"time when the notification will expire\";"},{"lineNumber":61,"author":{"gitId":"-"},"content":"    public static final String NOTIFICATION_STYLE_FIELD_NAME \u003d \"notification style\";"},{"lineNumber":62,"author":{"gitId":"-"},"content":"    public static final String NOTIFICATION_TARGET_USER_FIELD_NAME \u003d \"notification target user\";"},{"lineNumber":63,"author":{"gitId":"-"},"content":"    public static final int NOTIFICATION_TITLE_MAX_LENGTH \u003d 80;"},{"lineNumber":64,"author":{"gitId":"-"},"content":""},{"lineNumber":65,"author":{"gitId":"-"},"content":"    public static final List\u003cString\u003e NOTIFICATION_STYLE_ACCEPTED_VALUES \u003d"},{"lineNumber":66,"author":{"gitId":"-"},"content":"            Collections.unmodifiableList("},{"lineNumber":67,"author":{"gitId":"-"},"content":"                    Arrays.stream("},{"lineNumber":68,"author":{"gitId":"-"},"content":"                            NotificationStyle.values())"},{"lineNumber":69,"author":{"gitId":"-"},"content":"                            .map(NotificationStyle::toString)"},{"lineNumber":70,"author":{"gitId":"-"},"content":"                            .collect(Collectors.toList())"},{"lineNumber":71,"author":{"gitId":"-"},"content":"            );"},{"lineNumber":72,"author":{"gitId":"-"},"content":""},{"lineNumber":73,"author":{"gitId":"-"},"content":"    public static final List\u003cString\u003e NOTIFICATION_TARGET_USER_ACCEPTED_VALUES \u003d"},{"lineNumber":74,"author":{"gitId":"-"},"content":"            Collections.unmodifiableList("},{"lineNumber":75,"author":{"gitId":"-"},"content":"                    Arrays.stream("},{"lineNumber":76,"author":{"gitId":"-"},"content":"                            NotificationTargetUser.values())"},{"lineNumber":77,"author":{"gitId":"-"},"content":"                            .map(NotificationTargetUser::toString)"},{"lineNumber":78,"author":{"gitId":"-"},"content":"                            .collect(Collectors.toList())"},{"lineNumber":79,"author":{"gitId":"-"},"content":"            );"},{"lineNumber":80,"author":{"gitId":"-"},"content":""},{"lineNumber":81,"author":{"gitId":"-"},"content":"    // others"},{"lineNumber":82,"author":{"gitId":"-"},"content":"    public static final String STUDENT_ROLE_COMMENTS_FIELD_NAME \u003d \"comments about a student enrolled in a course\";"},{"lineNumber":83,"author":{"gitId":"-"},"content":"    public static final int STUDENT_ROLE_COMMENTS_MAX_LENGTH \u003d 500;"},{"lineNumber":84,"author":{"gitId":"-"},"content":""},{"lineNumber":85,"author":{"gitId":"-"},"content":"    /*"},{"lineNumber":86,"author":{"gitId":"-"},"content":"     * \u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d"},{"lineNumber":87,"author":{"gitId":"-"},"content":"     * Field: Course ID"},{"lineNumber":88,"author":{"gitId":"-"},"content":"     * Unique: system-wide, not just among the course of that instructor."},{"lineNumber":89,"author":{"gitId":"-"},"content":"     * Technically, we can get rid of CourseID field and enforce users to use"},{"lineNumber":90,"author":{"gitId":"-"},"content":"     * CourseName as a unique ID. In that case, we have to enforce CourseName"},{"lineNumber":91,"author":{"gitId":"-"},"content":"     * must be unique across the full system. However, users expect names to be"},{"lineNumber":92,"author":{"gitId":"-"},"content":"     * non-unique and more tolerant of enforcing uniqueness on an ID. Whenever"},{"lineNumber":93,"author":{"gitId":"-"},"content":"     * possible, must be displayed in the same case as user entered. This is"},{"lineNumber":94,"author":{"gitId":"-"},"content":"     * because the case of the letters can mean something. Furthermore,"},{"lineNumber":95,"author":{"gitId":"-"},"content":"     * converting to same case can reduce readability."},{"lineNumber":96,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":97,"author":{"gitId":"-"},"content":"     * Course ID is necessary because the course name is not unique enough to"},{"lineNumber":98,"author":{"gitId":"-"},"content":"     * distinguish between courses because the same course can be offered"},{"lineNumber":99,"author":{"gitId":"-"},"content":"     * multiple times and courses can be shared between instructors and many"},{"lineNumber":100,"author":{"gitId":"-"},"content":"     * students. Allowing same Course ID among different instructors could be"},{"lineNumber":101,"author":{"gitId":"-"},"content":"     * problematic if we allow multiple instructors for a single course."},{"lineNumber":102,"author":{"gitId":"-"},"content":"     * TODO: make case insensitive"},{"lineNumber":103,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":104,"author":{"gitId":"-"},"content":"    public static final String COURSE_ID_FIELD_NAME \u003d \"course ID\";"},{"lineNumber":105,"author":{"gitId":"-"},"content":"    public static final int COURSE_ID_MAX_LENGTH \u003d 64;"},{"lineNumber":106,"author":{"gitId":"-"},"content":""},{"lineNumber":107,"author":{"gitId":"-"},"content":"    public static final String SESSION_NAME \u003d \"feedback session\";"},{"lineNumber":108,"author":{"gitId":"-"},"content":"    public static final String SESSION_START_TIME_FIELD_NAME \u003d \"start time\";"},{"lineNumber":109,"author":{"gitId":"-"},"content":"    public static final String SESSION_END_TIME_FIELD_NAME \u003d \"end time\";"},{"lineNumber":110,"author":{"gitId":"-"},"content":"    public static final String TIME_ZONE_FIELD_NAME \u003d \"time zone\";"},{"lineNumber":111,"author":{"gitId":"-"},"content":""},{"lineNumber":112,"author":{"gitId":"-"},"content":"    public static final String GOOGLE_ID_FIELD_NAME \u003d \"Google ID\";"},{"lineNumber":113,"author":{"gitId":"-"},"content":"    public static final int GOOGLE_ID_MAX_LENGTH \u003d 254;"},{"lineNumber":114,"author":{"gitId":"-"},"content":""},{"lineNumber":115,"author":{"gitId":"-"},"content":"    public static final String ROLE_FIELD_NAME \u003d \"access-level\";"},{"lineNumber":116,"author":{"gitId":"-"},"content":"    public static final List\u003cString\u003e ROLE_ACCEPTED_VALUES \u003d"},{"lineNumber":117,"author":{"gitId":"-"},"content":"            Collections.unmodifiableList("},{"lineNumber":118,"author":{"gitId":"-"},"content":"                    Arrays.asList(Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_COOWNER,"},{"lineNumber":119,"author":{"gitId":"-"},"content":"                            Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_MANAGER,"},{"lineNumber":120,"author":{"gitId":"-"},"content":"                            Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_OBSERVER,"},{"lineNumber":121,"author":{"gitId":"-"},"content":"                            Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_TUTOR,"},{"lineNumber":122,"author":{"gitId":"-"},"content":"                            Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_CUSTOM));"},{"lineNumber":123,"author":{"gitId":"-"},"content":""},{"lineNumber":124,"author":{"gitId":"-"},"content":"    public static final String GIVER_TYPE_NAME \u003d \"feedback giver\";"},{"lineNumber":125,"author":{"gitId":"-"},"content":"    public static final String RECIPIENT_TYPE_NAME \u003d \"feedback recipient\";"},{"lineNumber":126,"author":{"gitId":"-"},"content":"    public static final String VIEWER_TYPE_NAME \u003d \"feedback viewer\";"},{"lineNumber":127,"author":{"gitId":"-"},"content":""},{"lineNumber":128,"author":{"gitId":"-"},"content":"    public static final String EXTENDED_DEADLINES_FIELD_NAME \u003d \"extended deadlines\";"},{"lineNumber":129,"author":{"gitId":"-"},"content":""},{"lineNumber":130,"author":{"gitId":"-"},"content":"    ////////////////////"},{"lineNumber":131,"author":{"gitId":"-"},"content":"    // ERROR MESSAGES //"},{"lineNumber":132,"author":{"gitId":"-"},"content":"    ////////////////////"},{"lineNumber":133,"author":{"gitId":"-"},"content":""},{"lineNumber":134,"author":{"gitId":"-"},"content":"    public static final String REASON_TOO_LONG \u003d \"is too long\";"},{"lineNumber":135,"author":{"gitId":"-"},"content":"    public static final String REASON_INCORRECT_FORMAT \u003d \"is not in the correct format\";"},{"lineNumber":136,"author":{"gitId":"-"},"content":"    public static final String REASON_CONTAINS_INVALID_CHAR \u003d \"contains invalid characters\";"},{"lineNumber":137,"author":{"gitId":"-"},"content":"    public static final String REASON_START_WITH_NON_ALPHANUMERIC_CHAR \u003d \"starts with a non-alphanumeric character\";"},{"lineNumber":138,"author":{"gitId":"-"},"content":"    public static final String REASON_UNAVAILABLE_AS_CHOICE \u003d \"is not available as a choice\";"},{"lineNumber":139,"author":{"gitId":"-"},"content":""},{"lineNumber":140,"author":{"gitId":"-"},"content":"    // error message components"},{"lineNumber":141,"author":{"gitId":"-"},"content":"    public static final String EMPTY_STRING_ERROR_INFO \u003d"},{"lineNumber":142,"author":{"gitId":"-"},"content":"            \"The field \u0027${fieldName}\u0027 is empty.\";"},{"lineNumber":143,"author":{"gitId":"-"},"content":"    public static final String ERROR_INFO \u003d"},{"lineNumber":144,"author":{"gitId":"-"},"content":"            \"\\\"${userInput}\\\" is not acceptable to TEAMMATES as a/an ${fieldName} because it ${reason}.\";"},{"lineNumber":145,"author":{"gitId":"-"},"content":"    public static final String HINT_FOR_CORRECT_FORMAT_FOR_SIZE_CAPPED_POSSIBLY_EMPTY \u003d"},{"lineNumber":146,"author":{"gitId":"-"},"content":"            \"The value of a/an ${fieldName} should be no longer than ${maxLength} characters.\";"},{"lineNumber":147,"author":{"gitId":"-"},"content":"    public static final String HINT_FOR_CORRECT_FORMAT_FOR_SIZE_CAPPED_NON_EMPTY \u003d"},{"lineNumber":148,"author":{"gitId":"-"},"content":"            HINT_FOR_CORRECT_FORMAT_FOR_SIZE_CAPPED_POSSIBLY_EMPTY + \" It should not be empty.\";"},{"lineNumber":149,"author":{"gitId":"-"},"content":"    public static final String HINT_FOR_CORRECT_FORMAT_FOR_SIZE_CAPPED_NON_EMPTY_NO_SPACES \u003d"},{"lineNumber":150,"author":{"gitId":"-"},"content":"            \"It cannot be longer than ${maxLength} characters, cannot be empty and cannot contain spaces.\";"},{"lineNumber":151,"author":{"gitId":"-"},"content":"    public static final String HINT_FOR_CORRECT_FORMAT_FOR_INVALID_NAME \u003d"},{"lineNumber":152,"author":{"gitId":"-"},"content":"            \"A/An ${fieldName} must start with an alphanumeric character, and cannot contain any vertical bar \""},{"lineNumber":153,"author":{"gitId":"-"},"content":"            + \"(|) or percent sign (%).\";"},{"lineNumber":154,"author":{"gitId":"-"},"content":""},{"lineNumber":155,"author":{"gitId":"-"},"content":"    // generic (i.e., not specific to any field) error messages"},{"lineNumber":156,"author":{"gitId":"-"},"content":"    public static final String SIZE_CAPPED_NON_EMPTY_STRING_ERROR_MESSAGE \u003d"},{"lineNumber":157,"author":{"gitId":"-"},"content":"            ERROR_INFO + \" \" + HINT_FOR_CORRECT_FORMAT_FOR_SIZE_CAPPED_NON_EMPTY;"},{"lineNumber":158,"author":{"gitId":"-"},"content":"    public static final String SIZE_CAPPED_NON_EMPTY_STRING_ERROR_MESSAGE_EMPTY_STRING \u003d"},{"lineNumber":159,"author":{"gitId":"-"},"content":"            EMPTY_STRING_ERROR_INFO + \" \" + HINT_FOR_CORRECT_FORMAT_FOR_SIZE_CAPPED_NON_EMPTY;"},{"lineNumber":160,"author":{"gitId":"-"},"content":"    public static final String SIZE_CAPPED_POSSIBLY_EMPTY_STRING_ERROR_MESSAGE \u003d"},{"lineNumber":161,"author":{"gitId":"-"},"content":"            ERROR_INFO + \" \" + HINT_FOR_CORRECT_FORMAT_FOR_SIZE_CAPPED_POSSIBLY_EMPTY;"},{"lineNumber":162,"author":{"gitId":"-"},"content":"    public static final String SIZE_CAPPED_NON_EMPTY_STRING_ERROR_MESSAGE_EMPTY_STRING_FOR_SESSION_NAME \u003d"},{"lineNumber":163,"author":{"gitId":"-"},"content":"            \"The field \u0027${fieldName}\u0027 should not be empty.\" + \" \""},{"lineNumber":164,"author":{"gitId":"-"},"content":"            + \"The value of \u0027${fieldName}\u0027 field should be no longer than ${maxLength} characters.\";"},{"lineNumber":165,"author":{"gitId":"-"},"content":"    public static final String INVALID_NAME_ERROR_MESSAGE \u003d"},{"lineNumber":166,"author":{"gitId":"-"},"content":"            ERROR_INFO + \" \" + HINT_FOR_CORRECT_FORMAT_FOR_INVALID_NAME;"},{"lineNumber":167,"author":{"gitId":"-"},"content":"    public static final String TEAM_NAME_IS_VALID_EMAIL_ERROR_MESSAGE \u003d"},{"lineNumber":168,"author":{"gitId":"-"},"content":"            \"The field \" + TEAM_NAME_FIELD_NAME + \" is not acceptable to TEAMMATES as the suggested value for \""},{"lineNumber":169,"author":{"gitId":"-"},"content":"                    + TEAM_NAME_FIELD_NAME + \" can be mis-interpreted as an email.\";"},{"lineNumber":170,"author":{"gitId":"-"},"content":""},{"lineNumber":171,"author":{"gitId":"-"},"content":"    public static final String WHITESPACE_ONLY_OR_EXTRA_WHITESPACE_ERROR_MESSAGE \u003d"},{"lineNumber":172,"author":{"gitId":"-"},"content":"            \"The provided ${fieldName} is not acceptable to TEAMMATES as it contains only whitespace \""},{"lineNumber":173,"author":{"gitId":"-"},"content":"            + \"or contains extra spaces at the beginning or at the end of the text.\";"},{"lineNumber":174,"author":{"gitId":"-"},"content":"    public static final String NON_HTML_FIELD_ERROR_MESSAGE \u003d"},{"lineNumber":175,"author":{"gitId":"-"},"content":"            \"The provided ${fieldName} is not acceptable to TEAMMATES \""},{"lineNumber":176,"author":{"gitId":"-"},"content":"                    + \"as it cannot contain the following special html characters\""},{"lineNumber":177,"author":{"gitId":"-"},"content":"                    + \" in brackets: (\u003c \u003e \\\" / \u0027 \u0026)\";"},{"lineNumber":178,"author":{"gitId":"-"},"content":"    public static final String NON_NULL_FIELD_ERROR_MESSAGE \u003d"},{"lineNumber":179,"author":{"gitId":"-"},"content":"            \"The provided ${fieldName} is not acceptable to TEAMMATES as it cannot be empty.\";"},{"lineNumber":180,"author":{"gitId":"-"},"content":""},{"lineNumber":181,"author":{"gitId":"-"},"content":"    // field-specific error messages"},{"lineNumber":182,"author":{"gitId":"-"},"content":"    public static final String HINT_FOR_CORRECT_EMAIL \u003d"},{"lineNumber":183,"author":{"gitId":"-"},"content":"            \"An email address contains some text followed by one \u0027@\u0027 sign followed by some more text, and should end \""},{"lineNumber":184,"author":{"gitId":"-"},"content":"                    + \"with a top level domain address like .com. \""},{"lineNumber":185,"author":{"gitId":"-"},"content":"            + HINT_FOR_CORRECT_FORMAT_FOR_SIZE_CAPPED_NON_EMPTY_NO_SPACES;"},{"lineNumber":186,"author":{"gitId":"-"},"content":"    public static final String EMAIL_ERROR_MESSAGE \u003d"},{"lineNumber":187,"author":{"gitId":"-"},"content":"            ERROR_INFO + \" \" + HINT_FOR_CORRECT_EMAIL;"},{"lineNumber":188,"author":{"gitId":"-"},"content":"    public static final String EMAIL_ERROR_MESSAGE_EMPTY_STRING \u003d"},{"lineNumber":189,"author":{"gitId":"-"},"content":"            EMPTY_STRING_ERROR_INFO + \" \" + HINT_FOR_CORRECT_EMAIL;"},{"lineNumber":190,"author":{"gitId":"-"},"content":""},{"lineNumber":191,"author":{"gitId":"-"},"content":"    public static final String HINT_FOR_CORRECT_COURSE_ID \u003d"},{"lineNumber":192,"author":{"gitId":"-"},"content":"            \"A course ID can contain letters, numbers, fullstops, hyphens, underscores, and dollar signs. \""},{"lineNumber":193,"author":{"gitId":"-"},"content":"            + HINT_FOR_CORRECT_FORMAT_FOR_SIZE_CAPPED_NON_EMPTY_NO_SPACES;"},{"lineNumber":194,"author":{"gitId":"-"},"content":"    public static final String COURSE_ID_ERROR_MESSAGE \u003d"},{"lineNumber":195,"author":{"gitId":"-"},"content":"            ERROR_INFO + \" \" + HINT_FOR_CORRECT_COURSE_ID;"},{"lineNumber":196,"author":{"gitId":"-"},"content":"    public static final String COURSE_ID_ERROR_MESSAGE_EMPTY_STRING \u003d"},{"lineNumber":197,"author":{"gitId":"-"},"content":"            EMPTY_STRING_ERROR_INFO + \" \" + HINT_FOR_CORRECT_COURSE_ID;"},{"lineNumber":198,"author":{"gitId":"-"},"content":""},{"lineNumber":199,"author":{"gitId":"-"},"content":"    public static final String HINT_FOR_CORRECT_FORMAT_OF_GOOGLE_ID \u003d"},{"lineNumber":200,"author":{"gitId":"-"},"content":"            \"A Google ID must be a valid id already registered with Google. \""},{"lineNumber":201,"author":{"gitId":"-"},"content":"            + HINT_FOR_CORRECT_FORMAT_FOR_SIZE_CAPPED_NON_EMPTY_NO_SPACES;"},{"lineNumber":202,"author":{"gitId":"-"},"content":"    public static final String GOOGLE_ID_ERROR_MESSAGE \u003d"},{"lineNumber":203,"author":{"gitId":"-"},"content":"            ERROR_INFO + \" \" + HINT_FOR_CORRECT_FORMAT_OF_GOOGLE_ID;"},{"lineNumber":204,"author":{"gitId":"-"},"content":"    public static final String GOOGLE_ID_ERROR_MESSAGE_EMPTY_STRING \u003d"},{"lineNumber":205,"author":{"gitId":"-"},"content":"            EMPTY_STRING_ERROR_INFO + \" \" + HINT_FOR_CORRECT_FORMAT_OF_GOOGLE_ID;"},{"lineNumber":206,"author":{"gitId":"-"},"content":""},{"lineNumber":207,"author":{"gitId":"-"},"content":"    public static final String HINT_FOR_CORRECT_TIME_ZONE \u003d"},{"lineNumber":208,"author":{"gitId":"-"},"content":"            \"The value must be one of the values from the time zone dropdown selector.\";"},{"lineNumber":209,"author":{"gitId":"-"},"content":"    public static final String TIME_ZONE_ERROR_MESSAGE \u003d"},{"lineNumber":210,"author":{"gitId":"-"},"content":"            ERROR_INFO + \" \" + HINT_FOR_CORRECT_TIME_ZONE;"},{"lineNumber":211,"author":{"gitId":"-"},"content":""},{"lineNumber":212,"author":{"gitId":"-"},"content":"    public static final String HINT_FOR_CORRECT_GRACE_PERIOD \u003d"},{"lineNumber":213,"author":{"gitId":"-"},"content":"            \"The value must be one of the options in the grace period dropdown selector.\";"},{"lineNumber":214,"author":{"gitId":"-"},"content":"    public static final String GRACE_PERIOD_NEGATIVE_ERROR_MESSAGE \u003d \"Grace period should not be negative.\" + \" \""},{"lineNumber":215,"author":{"gitId":"-"},"content":"            + HINT_FOR_CORRECT_GRACE_PERIOD;"},{"lineNumber":216,"author":{"gitId":"-"},"content":""},{"lineNumber":217,"author":{"gitId":"-"},"content":"    public static final String ROLE_ERROR_MESSAGE \u003d"},{"lineNumber":218,"author":{"gitId":"-"},"content":"            \"\\\"%s\\\" is not an accepted \" + ROLE_FIELD_NAME + \" to TEAMMATES. \";"},{"lineNumber":219,"author":{"gitId":"-"},"content":""},{"lineNumber":220,"author":{"gitId":"-"},"content":"    public static final String NOTIFICATION_STYLE_ERROR_MESSAGE \u003d"},{"lineNumber":221,"author":{"gitId":"-"},"content":"            \"\\\"%s\\\" is not an accepted \" + NOTIFICATION_STYLE_FIELD_NAME + \" to TEAMMATES. \";"},{"lineNumber":222,"author":{"gitId":"-"},"content":""},{"lineNumber":223,"author":{"gitId":"-"},"content":"    public static final String NOTIFICATION_TARGET_USER_ERROR_MESSAGE \u003d"},{"lineNumber":224,"author":{"gitId":"-"},"content":"            \"\\\"%s\\\" is not an accepted \" + NOTIFICATION_TARGET_USER_FIELD_NAME + \" to TEAMMATES. \";"},{"lineNumber":225,"author":{"gitId":"-"},"content":""},{"lineNumber":226,"author":{"gitId":"-"},"content":"    public static final String SESSION_VISIBLE_TIME_FIELD_NAME \u003d \"time when the session will be visible\";"},{"lineNumber":227,"author":{"gitId":"-"},"content":"    public static final String RESULTS_VISIBLE_TIME_FIELD_NAME \u003d \"time when the results will be visible\";"},{"lineNumber":228,"author":{"gitId":"-"},"content":""},{"lineNumber":229,"author":{"gitId":"-"},"content":"    public static final String TIME_BEFORE_ERROR_MESSAGE \u003d"},{"lineNumber":230,"author":{"gitId":"-"},"content":"            \"The %s for this %s cannot be earlier than the %s.\";"},{"lineNumber":231,"author":{"gitId":"-"},"content":"    public static final String TIME_BEFORE_OR_EQUAL_ERROR_MESSAGE \u003d"},{"lineNumber":232,"author":{"gitId":"-"},"content":"            \"The %s for this %s cannot be earlier than or at the same time as the %s.\";"},{"lineNumber":233,"author":{"gitId":"-"},"content":""},{"lineNumber":234,"author":{"gitId":"-"},"content":"    public static final String PARTICIPANT_TYPE_ERROR_MESSAGE \u003d \"%s is not a valid %s.\";"},{"lineNumber":235,"author":{"gitId":"-"},"content":"    public static final String PARTICIPANT_TYPE_TEAM_ERROR_MESSAGE \u003d"},{"lineNumber":236,"author":{"gitId":"-"},"content":"            \"The feedback recipients cannot be \\\"%s\\\" when the feedback giver is \\\"%s\\\". \""},{"lineNumber":237,"author":{"gitId":"-"},"content":"            + \"Did you mean to use \\\"Self\\\" instead?\";"},{"lineNumber":238,"author":{"gitId":"-"},"content":""},{"lineNumber":239,"author":{"gitId":"-"},"content":"    public static final String NOT_EXACT_HOUR_ERROR_MESSAGE \u003d \"The %s for this feedback session must be at exact hour mark.\";"},{"lineNumber":240,"author":{"gitId":"-"},"content":""},{"lineNumber":241,"author":{"gitId":"-"},"content":"    ///////////////////////////////////////"},{"lineNumber":242,"author":{"gitId":"-"},"content":"    // VALIDATION REGEX FOR INTERNAL USE //"},{"lineNumber":243,"author":{"gitId":"-"},"content":"    ///////////////////////////////////////"},{"lineNumber":244,"author":{"gitId":"-"},"content":""},{"lineNumber":245,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":246,"author":{"gitId":"-"},"content":"     * Must start with alphanumeric character, cannot contain vertical bar(|) or percent sign(%)."},{"lineNumber":247,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":248,"author":{"gitId":"-"},"content":"    public static final String REGEX_NAME \u003d \"^[\\\\p{IsL}\\\\p{IsN}][^|%]*+$\";"},{"lineNumber":249,"author":{"gitId":"-"},"content":""},{"lineNumber":250,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":251,"author":{"gitId":"-"},"content":"     * Allows English alphabet, numbers, underscore,  dot, dollar sign and hyphen."},{"lineNumber":252,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":253,"author":{"gitId":"-"},"content":"    public static final String REGEX_COURSE_ID \u003d \"[a-zA-Z0-9_.$-]+\";"},{"lineNumber":254,"author":{"gitId":"-"},"content":""},{"lineNumber":255,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":256,"author":{"gitId":"-"},"content":"     * Local part:"},{"lineNumber":257,"author":{"gitId":"-"},"content":"     * \u003cli\u003eCan only start with letters, digits, hyphen or plus sign;"},{"lineNumber":258,"author":{"gitId":"-"},"content":"     * \u003cli\u003eSpecial characters allowed are ! # $ % \u0026 \u0027 * + - / \u003d ? ^ _ ` { } ~"},{"lineNumber":259,"author":{"gitId":"-"},"content":"     * \u003cli\u003eDot can only appear between any 2 characters and cannot appear continuously\u003cbr\u003e"},{"lineNumber":260,"author":{"gitId":"-"},"content":"     * Domain part:"},{"lineNumber":261,"author":{"gitId":"-"},"content":"     * \u003cli\u003eOnly allow letters, digits, hyphen and dot; Must end with letters; Must have TLD"},{"lineNumber":262,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":263,"author":{"gitId":"-"},"content":"    public static final String REGEX_EMAIL \u003d \"^[\\\\w+-][\\\\w+!#$%\u0026\u0027*/\u003d?^_`{}~-]*+(\\\\.[\\\\w+!#$%\u0026\u0027*/\u003d?^_`{}~-]+)*+\""},{"lineNumber":264,"author":{"gitId":"-"},"content":"                                            + \"@([A-Za-z0-9-]+\\\\.)+[A-Za-z]+$\";"},{"lineNumber":265,"author":{"gitId":"-"},"content":""},{"lineNumber":266,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":267,"author":{"gitId":"-"},"content":"     * Allows English alphabet, numbers, underscore,  dot and hyphen."},{"lineNumber":268,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":269,"author":{"gitId":"-"},"content":"    public static final String REGEX_GOOGLE_ID_NON_EMAIL \u003d \"[a-zA-Z0-9_.-]+\";"},{"lineNumber":270,"author":{"gitId":"-"},"content":""},{"lineNumber":271,"author":{"gitId":"-"},"content":"    private FieldValidator() {"},{"lineNumber":272,"author":{"gitId":"-"},"content":"        // utility class"},{"lineNumber":273,"author":{"gitId":"-"},"content":"        // Intentional private constructor to prevent instantiation."},{"lineNumber":274,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":275,"author":{"gitId":"-"},"content":""},{"lineNumber":276,"author":{"gitId":"-"},"content":"    /////////////////////////////////////////"},{"lineNumber":277,"author":{"gitId":"-"},"content":"    // VALIDATION METHODS FOR EXTERNAL USE //"},{"lineNumber":278,"author":{"gitId":"-"},"content":"    /////////////////////////////////////////"},{"lineNumber":279,"author":{"gitId":"-"},"content":""},{"lineNumber":280,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":281,"author":{"gitId":"-"},"content":"     * Checks if {@code email} is not null, not empty, not longer than {@code EMAIL_MAX_LENGTH}, and is a"},{"lineNumber":282,"author":{"gitId":"-"},"content":"     * valid email address according to {@code REGEX_EMAIL}."},{"lineNumber":283,"author":{"gitId":"-"},"content":"     * @return An explanation of why the {@code email} is not acceptable."},{"lineNumber":284,"author":{"gitId":"-"},"content":"     *         Returns an empty string if the {@code email} is acceptable."},{"lineNumber":285,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":286,"author":{"gitId":"-"},"content":"    public static String getInvalidityInfoForEmail(String email) {"},{"lineNumber":287,"author":{"gitId":"-"},"content":""},{"lineNumber":288,"author":{"gitId":"-"},"content":"        assert email !\u003d null;"},{"lineNumber":289,"author":{"gitId":"-"},"content":""},{"lineNumber":290,"author":{"gitId":"-"},"content":"        if (email.isEmpty()) {"},{"lineNumber":291,"author":{"gitId":"-"},"content":"            return getPopulatedEmptyStringErrorMessage(EMAIL_ERROR_MESSAGE_EMPTY_STRING, EMAIL_FIELD_NAME,"},{"lineNumber":292,"author":{"gitId":"-"},"content":"                                            EMAIL_MAX_LENGTH);"},{"lineNumber":293,"author":{"gitId":"-"},"content":"        } else if (isUntrimmed(email)) {"},{"lineNumber":294,"author":{"gitId":"-"},"content":"            return WHITESPACE_ONLY_OR_EXTRA_WHITESPACE_ERROR_MESSAGE.replace(\"${fieldName}\", EMAIL_FIELD_NAME);"},{"lineNumber":295,"author":{"gitId":"-"},"content":"        } else if (email.length() \u003e EMAIL_MAX_LENGTH) {"},{"lineNumber":296,"author":{"gitId":"-"},"content":"            return getPopulatedErrorMessage(EMAIL_ERROR_MESSAGE, email, EMAIL_FIELD_NAME,"},{"lineNumber":297,"author":{"gitId":"-"},"content":"                                            REASON_TOO_LONG, EMAIL_MAX_LENGTH);"},{"lineNumber":298,"author":{"gitId":"-"},"content":"        } else if (!isValidEmailAddress(email)) {"},{"lineNumber":299,"author":{"gitId":"-"},"content":"            return getPopulatedErrorMessage(EMAIL_ERROR_MESSAGE, email, EMAIL_FIELD_NAME,"},{"lineNumber":300,"author":{"gitId":"-"},"content":"                                            REASON_INCORRECT_FORMAT, EMAIL_MAX_LENGTH);"},{"lineNumber":301,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":302,"author":{"gitId":"-"},"content":"        return \"\";"},{"lineNumber":303,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":304,"author":{"gitId":"-"},"content":""},{"lineNumber":305,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":306,"author":{"gitId":"-"},"content":"     * Checks if {@code gracePeriod} is not negative."},{"lineNumber":307,"author":{"gitId":"-"},"content":"     * @return An explanation why the {@code gracePeriod} is not acceptable."},{"lineNumber":308,"author":{"gitId":"-"},"content":"     *         Returns an empty string if the {@code gracePeriod} is acceptable."},{"lineNumber":309,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":310,"author":{"gitId":"-"},"content":"    public static String getInvalidityInfoForGracePeriod(Duration gracePeriod) {"},{"lineNumber":311,"author":{"gitId":"-"},"content":"        if (gracePeriod.isNegative()) {"},{"lineNumber":312,"author":{"gitId":"-"},"content":"            return GRACE_PERIOD_NEGATIVE_ERROR_MESSAGE;"},{"lineNumber":313,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":314,"author":{"gitId":"-"},"content":"        return \"\";"},{"lineNumber":315,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":316,"author":{"gitId":"-"},"content":""},{"lineNumber":317,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":318,"author":{"gitId":"-"},"content":"     * Checks if {@code googleId} is not null, not empty, not longer than {@code GOOGLE_ID_MAX_LENGTH}, does"},{"lineNumber":319,"author":{"gitId":"-"},"content":"     * not contain any invalid characters (| or %), AND is either a Google username (without the \"@gmail.com\")"},{"lineNumber":320,"author":{"gitId":"-"},"content":"     * or a valid email address."},{"lineNumber":321,"author":{"gitId":"-"},"content":"     * @return An explanation of why the {@code googleId} is not acceptable."},{"lineNumber":322,"author":{"gitId":"-"},"content":"     *         Returns an empty string if the {@code googleId} is acceptable."},{"lineNumber":323,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":324,"author":{"gitId":"-"},"content":"    public static String getInvalidityInfoForGoogleId(String googleId) {"},{"lineNumber":325,"author":{"gitId":"-"},"content":""},{"lineNumber":326,"author":{"gitId":"-"},"content":"        assert googleId !\u003d null;"},{"lineNumber":327,"author":{"gitId":"-"},"content":""},{"lineNumber":328,"author":{"gitId":"-"},"content":"        boolean isValidFullEmail \u003d isValidEmailAddress(googleId);"},{"lineNumber":329,"author":{"gitId":"-"},"content":"        boolean isValidEmailWithoutDomain \u003d StringHelper.isMatching(googleId, REGEX_GOOGLE_ID_NON_EMAIL);"},{"lineNumber":330,"author":{"gitId":"-"},"content":""},{"lineNumber":331,"author":{"gitId":"-"},"content":"        if (googleId.isEmpty()) {"},{"lineNumber":332,"author":{"gitId":"-"},"content":"            return getPopulatedEmptyStringErrorMessage(GOOGLE_ID_ERROR_MESSAGE_EMPTY_STRING,"},{"lineNumber":333,"author":{"gitId":"-"},"content":"                                            GOOGLE_ID_FIELD_NAME, GOOGLE_ID_MAX_LENGTH);"},{"lineNumber":334,"author":{"gitId":"-"},"content":"        } else if (isUntrimmed(googleId)) {"},{"lineNumber":335,"author":{"gitId":"-"},"content":"            return WHITESPACE_ONLY_OR_EXTRA_WHITESPACE_ERROR_MESSAGE.replace(\"${fieldName}\", GOOGLE_ID_FIELD_NAME);"},{"lineNumber":336,"author":{"gitId":"-"},"content":"        } else if (googleId.length() \u003e GOOGLE_ID_MAX_LENGTH) {"},{"lineNumber":337,"author":{"gitId":"-"},"content":"            return getPopulatedErrorMessage(GOOGLE_ID_ERROR_MESSAGE, googleId, GOOGLE_ID_FIELD_NAME,"},{"lineNumber":338,"author":{"gitId":"-"},"content":"                                            REASON_TOO_LONG, GOOGLE_ID_MAX_LENGTH);"},{"lineNumber":339,"author":{"gitId":"-"},"content":"        } else if (!(isValidFullEmail || isValidEmailWithoutDomain)) {"},{"lineNumber":340,"author":{"gitId":"-"},"content":"            return getPopulatedErrorMessage(GOOGLE_ID_ERROR_MESSAGE, googleId, GOOGLE_ID_FIELD_NAME,"},{"lineNumber":341,"author":{"gitId":"-"},"content":"                                            REASON_INCORRECT_FORMAT, GOOGLE_ID_MAX_LENGTH);"},{"lineNumber":342,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":343,"author":{"gitId":"-"},"content":"        return \"\";"},{"lineNumber":344,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":345,"author":{"gitId":"-"},"content":""},{"lineNumber":346,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":347,"author":{"gitId":"-"},"content":"     * Checks if {@code courseId} is not null, not empty, has no surrounding whitespaces, not longer than"},{"lineNumber":348,"author":{"gitId":"-"},"content":"     * {@code COURSE_ID_MAX_LENGTH}, is sanitized for HTML, and match the REGEX {@code REGEX_COURSE_ID}."},{"lineNumber":349,"author":{"gitId":"-"},"content":"     * @return An explanation of why the {@code courseId} is not acceptable."},{"lineNumber":350,"author":{"gitId":"-"},"content":"     *         Returns an empty string if the {@code courseId} is acceptable."},{"lineNumber":351,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":352,"author":{"gitId":"-"},"content":"    public static String getInvalidityInfoForCourseId(String courseId) {"},{"lineNumber":353,"author":{"gitId":"-"},"content":""},{"lineNumber":354,"author":{"gitId":"-"},"content":"        assert courseId !\u003d null;"},{"lineNumber":355,"author":{"gitId":"-"},"content":""},{"lineNumber":356,"author":{"gitId":"-"},"content":"        if (courseId.isEmpty()) {"},{"lineNumber":357,"author":{"gitId":"-"},"content":"            return getPopulatedEmptyStringErrorMessage(COURSE_ID_ERROR_MESSAGE_EMPTY_STRING,"},{"lineNumber":358,"author":{"gitId":"-"},"content":"                                            COURSE_ID_FIELD_NAME, COURSE_ID_MAX_LENGTH);"},{"lineNumber":359,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":360,"author":{"gitId":"-"},"content":"        if (isUntrimmed(courseId)) {"},{"lineNumber":361,"author":{"gitId":"-"},"content":"            return WHITESPACE_ONLY_OR_EXTRA_WHITESPACE_ERROR_MESSAGE.replace(\"${fieldName}\","},{"lineNumber":362,"author":{"gitId":"-"},"content":"                    COURSE_ID_FIELD_NAME);"},{"lineNumber":363,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":364,"author":{"gitId":"-"},"content":"        if (courseId.length() \u003e COURSE_ID_MAX_LENGTH) {"},{"lineNumber":365,"author":{"gitId":"-"},"content":"            return getPopulatedErrorMessage(COURSE_ID_ERROR_MESSAGE, courseId, COURSE_ID_FIELD_NAME,"},{"lineNumber":366,"author":{"gitId":"-"},"content":"                                            REASON_TOO_LONG, COURSE_ID_MAX_LENGTH);"},{"lineNumber":367,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":368,"author":{"gitId":"-"},"content":"        if (!StringHelper.isMatching(courseId, REGEX_COURSE_ID)) {"},{"lineNumber":369,"author":{"gitId":"-"},"content":"            return getPopulatedErrorMessage(COURSE_ID_ERROR_MESSAGE, courseId, COURSE_ID_FIELD_NAME,"},{"lineNumber":370,"author":{"gitId":"-"},"content":"                                            REASON_INCORRECT_FORMAT, COURSE_ID_MAX_LENGTH);"},{"lineNumber":371,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":372,"author":{"gitId":"-"},"content":"        return \"\";"},{"lineNumber":373,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":374,"author":{"gitId":"-"},"content":""},{"lineNumber":375,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":376,"author":{"gitId":"-"},"content":"     * Checks if {@code sectionName} is a non-null non-empty string no longer than the specified length"},{"lineNumber":377,"author":{"gitId":"-"},"content":"     * {@code SECTION_NAME_MAX_LENGTH}, and also does not contain any invalid characters (| or %)."},{"lineNumber":378,"author":{"gitId":"-"},"content":"     * @return An explanation of why the {@code sectionName} is not acceptable."},{"lineNumber":379,"author":{"gitId":"-"},"content":"     *         Returns an empty string if the {@code sectionName} is acceptable."},{"lineNumber":380,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":381,"author":{"gitId":"-"},"content":"    public static String getInvalidityInfoForSectionName(String sectionName) {"},{"lineNumber":382,"author":{"gitId":"-"},"content":"        return getValidityInfoForAllowedName(SECTION_NAME_FIELD_NAME, SECTION_NAME_MAX_LENGTH, sectionName);"},{"lineNumber":383,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":384,"author":{"gitId":"-"},"content":""},{"lineNumber":385,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":386,"author":{"gitId":"-"},"content":"     * Checks if {@code teamName} is a non-null non-empty string no longer than the specified length"},{"lineNumber":387,"author":{"gitId":"-"},"content":"     * {@code TEAM_NAME_MAX_LENGTH}, does not contain any invalid characters (| or %) and is not a valid email."},{"lineNumber":388,"author":{"gitId":"-"},"content":"     * @return An explanation of why the {@code teamName} is not acceptable."},{"lineNumber":389,"author":{"gitId":"-"},"content":"     *         Returns an empty string if the {@code teamName} is acceptable."},{"lineNumber":390,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":391,"author":{"gitId":"-"},"content":"    public static String getInvalidityInfoForTeamName(String teamName) {"},{"lineNumber":392,"author":{"gitId":"-"},"content":"        boolean isValidEmail \u003d isValidEmailAddress(teamName);"},{"lineNumber":393,"author":{"gitId":"-"},"content":"        if (isValidEmail) {"},{"lineNumber":394,"author":{"gitId":"-"},"content":"            return TEAM_NAME_IS_VALID_EMAIL_ERROR_MESSAGE;"},{"lineNumber":395,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":396,"author":{"gitId":"-"},"content":"        return getValidityInfoForAllowedName(TEAM_NAME_FIELD_NAME, TEAM_NAME_MAX_LENGTH, teamName);"},{"lineNumber":397,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":398,"author":{"gitId":"-"},"content":""},{"lineNumber":399,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":400,"author":{"gitId":"-"},"content":"     * Checks if the given studentRoleComments is a non-null string no longer than"},{"lineNumber":401,"author":{"gitId":"-"},"content":"     * the specified length {@code STUDENT_ROLE_COMMENTS_MAX_LENGTH}. However, this string can be empty."},{"lineNumber":402,"author":{"gitId":"-"},"content":"     * @return An explanation of why the {@code studentRoleComments} is not acceptable."},{"lineNumber":403,"author":{"gitId":"-"},"content":"     *         Returns an empty string \"\" if the {@code studentRoleComments} is acceptable."},{"lineNumber":404,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":405,"author":{"gitId":"-"},"content":"    public static String getInvalidityInfoForStudentRoleComments(String studentRoleComments) {"},{"lineNumber":406,"author":{"gitId":"-"},"content":"        return getValidityInfoForSizeCappedPossiblyEmptyString(STUDENT_ROLE_COMMENTS_FIELD_NAME,"},{"lineNumber":407,"author":{"gitId":"-"},"content":"                                                               STUDENT_ROLE_COMMENTS_MAX_LENGTH,"},{"lineNumber":408,"author":{"gitId":"-"},"content":"                                                               studentRoleComments);"},{"lineNumber":409,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":410,"author":{"gitId":"-"},"content":""},{"lineNumber":411,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":412,"author":{"gitId":"-"},"content":"     * Checks if {@code feedbackSessionName} is a non-null non-empty string no longer than the specified length"},{"lineNumber":413,"author":{"gitId":"-"},"content":"     * {@code FEEDBACK_SESSION_NAME_MAX_LENGTH}, does not contain any invalid characters (| or %), and has no"},{"lineNumber":414,"author":{"gitId":"-"},"content":"     * unsanitized HTML characters."},{"lineNumber":415,"author":{"gitId":"-"},"content":"     * @return An explanation of why the {@code feedbackSessionName} is not acceptable."},{"lineNumber":416,"author":{"gitId":"-"},"content":"     *         Returns an empty string if the {@code feedbackSessionName} is acceptable."},{"lineNumber":417,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":418,"author":{"gitId":"-"},"content":"    public static String getInvalidityInfoForFeedbackSessionName(String feedbackSessionName) {"},{"lineNumber":419,"author":{"gitId":"-"},"content":"        String errorsFromAllowedNameValidation \u003d getValidityInfoForAllowedName("},{"lineNumber":420,"author":{"gitId":"-"},"content":"                FEEDBACK_SESSION_NAME_FIELD_NAME, FEEDBACK_SESSION_NAME_MAX_LENGTH, feedbackSessionName);"},{"lineNumber":421,"author":{"gitId":"-"},"content":""},{"lineNumber":422,"author":{"gitId":"-"},"content":"        // return early if error already exists because session name is too long etc."},{"lineNumber":423,"author":{"gitId":"-"},"content":"        if (!errorsFromAllowedNameValidation.isEmpty()) {"},{"lineNumber":424,"author":{"gitId":"-"},"content":"            return errorsFromAllowedNameValidation;"},{"lineNumber":425,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":426,"author":{"gitId":"-"},"content":""},{"lineNumber":427,"author":{"gitId":"-"},"content":"        // checks for unsanitized HTML characters"},{"lineNumber":428,"author":{"gitId":"-"},"content":"        return getValidityInfoForNonHtmlField(FEEDBACK_SESSION_NAME_FIELD_NAME, feedbackSessionName);"},{"lineNumber":429,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":430,"author":{"gitId":"-"},"content":""},{"lineNumber":431,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":432,"author":{"gitId":"-"},"content":"     * Checks if {@code courseName} is a non-null non-empty string no longer than the specified length"},{"lineNumber":433,"author":{"gitId":"-"},"content":"     * {@code COURSE_NAME_MAX_LENGTH}, and also does not contain any invalid characters (| or %)."},{"lineNumber":434,"author":{"gitId":"-"},"content":"     * @return An explanation of why the {@code courseName} is not acceptable."},{"lineNumber":435,"author":{"gitId":"-"},"content":"     *         Returns an empty string if the {@code courseName} is acceptable."},{"lineNumber":436,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":437,"author":{"gitId":"-"},"content":"    public static String getInvalidityInfoForCourseName(String courseName) {"},{"lineNumber":438,"author":{"gitId":"-"},"content":"        return getValidityInfoForAllowedName(COURSE_NAME_FIELD_NAME, COURSE_NAME_MAX_LENGTH, courseName);"},{"lineNumber":439,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":440,"author":{"gitId":"-"},"content":""},{"lineNumber":441,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":442,"author":{"gitId":"-"},"content":"     * Checks if {@code instituteName} is a non-null non-empty string no longer than the specified length"},{"lineNumber":443,"author":{"gitId":"-"},"content":"     * {@code INSTITUTE_NAME_MAX_LENGTH}, and also does not contain any invalid characters (| or %)."},{"lineNumber":444,"author":{"gitId":"-"},"content":"     * @return An explanation of why the {@code instituteName} is not acceptable."},{"lineNumber":445,"author":{"gitId":"-"},"content":"     *         Returns an empty string if the {@code instituteName} is acceptable."},{"lineNumber":446,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":447,"author":{"gitId":"-"},"content":"    public static String getInvalidityInfoForInstituteName(String instituteName) {"},{"lineNumber":448,"author":{"gitId":"-"},"content":"        return getValidityInfoForAllowedName(INSTITUTE_NAME_FIELD_NAME, INSTITUTE_NAME_MAX_LENGTH,"},{"lineNumber":449,"author":{"gitId":"-"},"content":"                                             instituteName);"},{"lineNumber":450,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":451,"author":{"gitId":"-"},"content":""},{"lineNumber":452,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":453,"author":{"gitId":"-"},"content":"     * Checks if {@code personName} is a non-null non-empty string no longer than the specified length"},{"lineNumber":454,"author":{"gitId":"-"},"content":"     * {@code PERSON_NAME_MAX_LENGTH}, and also does not contain any invalid characters (| or %)."},{"lineNumber":455,"author":{"gitId":"-"},"content":"     * @return An explanation of why the {@code personName} is not acceptable."},{"lineNumber":456,"author":{"gitId":"-"},"content":"     *         Returns an empty string if the {@code personName} is acceptable."},{"lineNumber":457,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":458,"author":{"gitId":"-"},"content":"    public static String getInvalidityInfoForPersonName(String personName) {"},{"lineNumber":459,"author":{"gitId":"-"},"content":"        return getValidityInfoForAllowedName(PERSON_NAME_FIELD_NAME, PERSON_NAME_MAX_LENGTH, personName);"},{"lineNumber":460,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":461,"author":{"gitId":"-"},"content":""},{"lineNumber":462,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":463,"author":{"gitId":"-"},"content":"     * Checks if the given string is a non-null string contained in Java\u0027s list of"},{"lineNumber":464,"author":{"gitId":"-"},"content":"     * regional time zone IDs."},{"lineNumber":465,"author":{"gitId":"-"},"content":"     * @return An explanation of why the {@code timeZoneValue} is not acceptable."},{"lineNumber":466,"author":{"gitId":"-"},"content":"     *         Returns an empty string if the {@code timeZoneValue} is acceptable."},{"lineNumber":467,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":468,"author":{"gitId":"-"},"content":"    public static String getInvalidityInfoForTimeZone(String timeZoneValue) {"},{"lineNumber":469,"author":{"gitId":"-"},"content":"        assert timeZoneValue !\u003d null;"},{"lineNumber":470,"author":{"gitId":"-"},"content":"        if (!ZoneId.getAvailableZoneIds().contains(timeZoneValue)) {"},{"lineNumber":471,"author":{"gitId":"-"},"content":"            return getPopulatedErrorMessage(TIME_ZONE_ERROR_MESSAGE,"},{"lineNumber":472,"author":{"gitId":"-"},"content":"                    timeZoneValue, TIME_ZONE_FIELD_NAME, REASON_UNAVAILABLE_AS_CHOICE);"},{"lineNumber":473,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":474,"author":{"gitId":"-"},"content":"        return \"\";"},{"lineNumber":475,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":476,"author":{"gitId":"-"},"content":""},{"lineNumber":477,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":478,"author":{"gitId":"-"},"content":"     * Checks if {@code role} is one of the recognized roles {@link #ROLE_ACCEPTED_VALUES}."},{"lineNumber":479,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":480,"author":{"gitId":"-"},"content":"     * @return An explanation of why the {@code role} is not acceptable."},{"lineNumber":481,"author":{"gitId":"-"},"content":"     *         Returns an empty string if the {@code role} is acceptable."},{"lineNumber":482,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":483,"author":{"gitId":"-"},"content":"    public static String getInvalidityInfoForRole(String role) {"},{"lineNumber":484,"author":{"gitId":"-"},"content":"        assert role !\u003d null;"},{"lineNumber":485,"author":{"gitId":"-"},"content":""},{"lineNumber":486,"author":{"gitId":"-"},"content":"        if (!ROLE_ACCEPTED_VALUES.contains(role)) {"},{"lineNumber":487,"author":{"gitId":"-"},"content":"            return String.format(ROLE_ERROR_MESSAGE, role);"},{"lineNumber":488,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":489,"author":{"gitId":"-"},"content":"        return \"\";"},{"lineNumber":490,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":491,"author":{"gitId":"-"},"content":""},{"lineNumber":492,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":493,"author":{"gitId":"-"},"content":"     * Checks if the given name (including person name, institute name, course name, feedback session and team name)"},{"lineNumber":494,"author":{"gitId":"-"},"content":"     * is a non-null non-empty string no longer than the specified length {@code maxLength},"},{"lineNumber":495,"author":{"gitId":"-"},"content":"     * and also does not contain any invalid characters (| or %)."},{"lineNumber":496,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":497,"author":{"gitId":"-"},"content":"     * @param fieldName"},{"lineNumber":498,"author":{"gitId":"-"},"content":"     *            A descriptive name of the field e.g., \"student name\", to be"},{"lineNumber":499,"author":{"gitId":"-"},"content":"     *            used in the return value to make the explanation more"},{"lineNumber":500,"author":{"gitId":"-"},"content":"     *            descriptive."},{"lineNumber":501,"author":{"gitId":"-"},"content":"     * @param value"},{"lineNumber":502,"author":{"gitId":"-"},"content":"     *            The string to be checked."},{"lineNumber":503,"author":{"gitId":"-"},"content":"     * @return An explanation of why the {@code value} is not acceptable."},{"lineNumber":504,"author":{"gitId":"-"},"content":"     *         Returns an empty string \"\" if the {@code value} is acceptable."},{"lineNumber":505,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":506,"author":{"gitId":"-"},"content":"    static String getValidityInfoForAllowedName(String fieldName, int maxLength, String value) {"},{"lineNumber":507,"author":{"gitId":"-"},"content":""},{"lineNumber":508,"author":{"gitId":"-"},"content":"        assert value !\u003d null : \"Non-null value expected for \" + fieldName;"},{"lineNumber":509,"author":{"gitId":"-"},"content":""},{"lineNumber":510,"author":{"gitId":"-"},"content":"        if (value.isEmpty()) {"},{"lineNumber":511,"author":{"gitId":"-"},"content":"            if (FEEDBACK_SESSION_NAME_FIELD_NAME.equals(fieldName)) {"},{"lineNumber":512,"author":{"gitId":"-"},"content":"                return getPopulatedEmptyStringErrorMessage("},{"lineNumber":513,"author":{"gitId":"-"},"content":"                        SIZE_CAPPED_NON_EMPTY_STRING_ERROR_MESSAGE_EMPTY_STRING_FOR_SESSION_NAME,"},{"lineNumber":514,"author":{"gitId":"-"},"content":"                        fieldName, maxLength);"},{"lineNumber":515,"author":{"gitId":"-"},"content":"            } else {"},{"lineNumber":516,"author":{"gitId":"-"},"content":"                return getPopulatedEmptyStringErrorMessage(SIZE_CAPPED_NON_EMPTY_STRING_ERROR_MESSAGE_EMPTY_STRING,"},{"lineNumber":517,"author":{"gitId":"-"},"content":"                        fieldName, maxLength);"},{"lineNumber":518,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":519,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":520,"author":{"gitId":"-"},"content":"        if (isUntrimmed(value)) {"},{"lineNumber":521,"author":{"gitId":"-"},"content":"            return WHITESPACE_ONLY_OR_EXTRA_WHITESPACE_ERROR_MESSAGE.replace(\"${fieldName}\", fieldName);"},{"lineNumber":522,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":523,"author":{"gitId":"-"},"content":"        if (value.length() \u003e maxLength) {"},{"lineNumber":524,"author":{"gitId":"-"},"content":"            return getPopulatedErrorMessage(SIZE_CAPPED_NON_EMPTY_STRING_ERROR_MESSAGE, value,"},{"lineNumber":525,"author":{"gitId":"-"},"content":"                                            fieldName, REASON_TOO_LONG, maxLength);"},{"lineNumber":526,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":527,"author":{"gitId":"-"},"content":"        if (!Character.isLetterOrDigit(value.codePointAt(0))) {"},{"lineNumber":528,"author":{"gitId":"-"},"content":"            boolean hasStartingBrace \u003d value.charAt(0) \u003d\u003d \u0027{\u0027 \u0026\u0026 value.contains(\"}\");"},{"lineNumber":529,"author":{"gitId":"-"},"content":"            if (!hasStartingBrace) {"},{"lineNumber":530,"author":{"gitId":"-"},"content":"                return getPopulatedErrorMessage(INVALID_NAME_ERROR_MESSAGE, value,"},{"lineNumber":531,"author":{"gitId":"-"},"content":"                                                fieldName, REASON_START_WITH_NON_ALPHANUMERIC_CHAR);"},{"lineNumber":532,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":533,"author":{"gitId":"-"},"content":"            if (!StringHelper.isMatching(value.substring(1), REGEX_NAME)) {"},{"lineNumber":534,"author":{"gitId":"-"},"content":"                return getPopulatedErrorMessage(INVALID_NAME_ERROR_MESSAGE, value, fieldName,"},{"lineNumber":535,"author":{"gitId":"-"},"content":"                                                REASON_CONTAINS_INVALID_CHAR);"},{"lineNumber":536,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":537,"author":{"gitId":"-"},"content":"            return \"\";"},{"lineNumber":538,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":539,"author":{"gitId":"-"},"content":"        if (!StringHelper.isMatching(value, REGEX_NAME)) {"},{"lineNumber":540,"author":{"gitId":"-"},"content":"            return getPopulatedErrorMessage(INVALID_NAME_ERROR_MESSAGE, value, fieldName,"},{"lineNumber":541,"author":{"gitId":"-"},"content":"                                            REASON_CONTAINS_INVALID_CHAR);"},{"lineNumber":542,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":543,"author":{"gitId":"-"},"content":"        return \"\";"},{"lineNumber":544,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":545,"author":{"gitId":"-"},"content":""},{"lineNumber":546,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":547,"author":{"gitId":"-"},"content":"     * Checks if the notification title is a non-null non-empty string."},{"lineNumber":548,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":549,"author":{"gitId":"-"},"content":"     * @param notificationTitle The title of the notification."},{"lineNumber":550,"author":{"gitId":"-"},"content":"     * @return An explanation of why the {@code notificationTitle} is not acceptable."},{"lineNumber":551,"author":{"gitId":"-"},"content":"     *         Returns an empty string \"\" if the {@code notificationTitle} is acceptable."},{"lineNumber":552,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":553,"author":{"gitId":"-"},"content":"    public static String getInvalidityInfoForNotificationTitle(String notificationTitle) {"},{"lineNumber":554,"author":{"gitId":"-"},"content":""},{"lineNumber":555,"author":{"gitId":"-"},"content":"        assert notificationTitle !\u003d null : \"Non-null value expected for notification title\";"},{"lineNumber":556,"author":{"gitId":"-"},"content":""},{"lineNumber":557,"author":{"gitId":"-"},"content":"        if (notificationTitle.isEmpty()) {"},{"lineNumber":558,"author":{"gitId":"-"},"content":"            return getPopulatedEmptyStringErrorMessage(EMPTY_STRING_ERROR_INFO,"},{"lineNumber":559,"author":{"gitId":"-"},"content":"                NOTIFICATION_TITLE_FIELD_NAME, NOTIFICATION_TITLE_MAX_LENGTH);"},{"lineNumber":560,"author":{"gitId":"-"},"content":"        } else if (notificationTitle.length() \u003e NOTIFICATION_TITLE_MAX_LENGTH) {"},{"lineNumber":561,"author":{"gitId":"-"},"content":"            return getPopulatedErrorMessage(SIZE_CAPPED_NON_EMPTY_STRING_ERROR_MESSAGE, notificationTitle,"},{"lineNumber":562,"author":{"gitId":"-"},"content":"                NOTIFICATION_TITLE_FIELD_NAME, REASON_TOO_LONG, NOTIFICATION_TITLE_MAX_LENGTH);"},{"lineNumber":563,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":564,"author":{"gitId":"-"},"content":""},{"lineNumber":565,"author":{"gitId":"-"},"content":"        return \"\";"},{"lineNumber":566,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":567,"author":{"gitId":"-"},"content":""},{"lineNumber":568,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":569,"author":{"gitId":"-"},"content":"     * Checks if the notification message is a non-null non-empty string."},{"lineNumber":570,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":571,"author":{"gitId":"-"},"content":"     * @param notificationMessage The notification message."},{"lineNumber":572,"author":{"gitId":"-"},"content":"     * @return An explanation of why the {@code notificationMessage} is not acceptable."},{"lineNumber":573,"author":{"gitId":"-"},"content":"     *         Returns an empty string \"\" if the {@code notificationMessage} is acceptable."},{"lineNumber":574,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":575,"author":{"gitId":"-"},"content":"    public static String getInvalidityInfoForNotificationBody(String notificationMessage) {"},{"lineNumber":576,"author":{"gitId":"-"},"content":""},{"lineNumber":577,"author":{"gitId":"-"},"content":"        assert notificationMessage !\u003d null : \"Non-null value expected for notification message\";"},{"lineNumber":578,"author":{"gitId":"-"},"content":""},{"lineNumber":579,"author":{"gitId":"-"},"content":"        if (notificationMessage.isEmpty()) {"},{"lineNumber":580,"author":{"gitId":"-"},"content":"            return getPopulatedEmptyStringErrorMessage(EMPTY_STRING_ERROR_INFO, NOTIFICATION_MESSAGE_FIELD_NAME, 0);"},{"lineNumber":581,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":582,"author":{"gitId":"-"},"content":""},{"lineNumber":583,"author":{"gitId":"-"},"content":"        return \"\";"},{"lineNumber":584,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":585,"author":{"gitId":"-"},"content":""},{"lineNumber":586,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":587,"author":{"gitId":"-"},"content":"     * Checks if {@code style} is one of the recognized notification style {@link #NOTIFICATION_STYLE_ACCEPTED_VALUES}."},{"lineNumber":588,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":589,"author":{"gitId":"-"},"content":"     * @return An explanation of why the {@code style} is not acceptable."},{"lineNumber":590,"author":{"gitId":"-"},"content":"     *         Returns an empty string if the {@code style} is acceptable."},{"lineNumber":591,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":592,"author":{"gitId":"-"},"content":"    public static String getInvalidityInfoForNotificationStyle(String style) {"},{"lineNumber":593,"author":{"gitId":"-"},"content":"        assert style !\u003d null;"},{"lineNumber":594,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":595,"author":{"gitId":"-"},"content":"            NotificationStyle.valueOf(style);"},{"lineNumber":596,"author":{"gitId":"-"},"content":"        } catch (IllegalArgumentException e) {"},{"lineNumber":597,"author":{"gitId":"-"},"content":"            return String.format(NOTIFICATION_STYLE_ERROR_MESSAGE, style);"},{"lineNumber":598,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":599,"author":{"gitId":"-"},"content":"        return \"\";"},{"lineNumber":600,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":601,"author":{"gitId":"-"},"content":""},{"lineNumber":602,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":603,"author":{"gitId":"-"},"content":"     * Checks if {@code targetUser} is one of the"},{"lineNumber":604,"author":{"gitId":"-"},"content":"     * recognized notification target user groups {@link #NOTIFICATION_TARGET_USER_ACCEPTED_VALUES}."},{"lineNumber":605,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":606,"author":{"gitId":"-"},"content":"     * @return An explanation of why the {@code targetUser} is not acceptable."},{"lineNumber":607,"author":{"gitId":"-"},"content":"     *         Returns an empty string if the {@code targetUser} is acceptable."},{"lineNumber":608,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":609,"author":{"gitId":"-"},"content":"    public static String getInvalidityInfoForNotificationTargetUser(String targetUser) {"},{"lineNumber":610,"author":{"gitId":"-"},"content":"        assert targetUser !\u003d null;"},{"lineNumber":611,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":612,"author":{"gitId":"-"},"content":"            NotificationTargetUser.valueOf(targetUser);"},{"lineNumber":613,"author":{"gitId":"-"},"content":"        } catch (IllegalArgumentException e) {"},{"lineNumber":614,"author":{"gitId":"-"},"content":"            return String.format(NOTIFICATION_TARGET_USER_ERROR_MESSAGE, targetUser);"},{"lineNumber":615,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":616,"author":{"gitId":"-"},"content":"        return \"\";"},{"lineNumber":617,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":618,"author":{"gitId":"-"},"content":""},{"lineNumber":619,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":620,"author":{"gitId":"-"},"content":"     * Checks if the given string is a non-null string no longer than"},{"lineNumber":621,"author":{"gitId":"-"},"content":"     * the specified length {@code maxLength}. However, this string can be empty."},{"lineNumber":622,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":623,"author":{"gitId":"-"},"content":"     * @param fieldName"},{"lineNumber":624,"author":{"gitId":"-"},"content":"     *            A descriptive name of the field e.g., \"student name\", to be"},{"lineNumber":625,"author":{"gitId":"-"},"content":"     *            used in the return value to make the explanation more"},{"lineNumber":626,"author":{"gitId":"-"},"content":"     *            descriptive."},{"lineNumber":627,"author":{"gitId":"-"},"content":"     * @param value"},{"lineNumber":628,"author":{"gitId":"-"},"content":"     *            The string to be checked."},{"lineNumber":629,"author":{"gitId":"-"},"content":"     * @return An explanation of why the {@code value} is not acceptable."},{"lineNumber":630,"author":{"gitId":"-"},"content":"     *         Returns an empty string \"\" if the {@code value} is acceptable."},{"lineNumber":631,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":632,"author":{"gitId":"-"},"content":"    static String getValidityInfoForSizeCappedPossiblyEmptyString(String fieldName, int maxLength, String value) {"},{"lineNumber":633,"author":{"gitId":"-"},"content":"        assert value !\u003d null : \"Non-null value expected for \" + fieldName;"},{"lineNumber":634,"author":{"gitId":"-"},"content":""},{"lineNumber":635,"author":{"gitId":"-"},"content":"        if (isUntrimmed(value)) {"},{"lineNumber":636,"author":{"gitId":"-"},"content":"            return WHITESPACE_ONLY_OR_EXTRA_WHITESPACE_ERROR_MESSAGE.replace(\"${fieldName}\", fieldName);"},{"lineNumber":637,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":638,"author":{"gitId":"-"},"content":"        if (value.length() \u003e maxLength) {"},{"lineNumber":639,"author":{"gitId":"-"},"content":"            return getPopulatedErrorMessage(SIZE_CAPPED_POSSIBLY_EMPTY_STRING_ERROR_MESSAGE, value,"},{"lineNumber":640,"author":{"gitId":"-"},"content":"                                            fieldName, REASON_TOO_LONG, maxLength);"},{"lineNumber":641,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":642,"author":{"gitId":"-"},"content":"        return \"\";"},{"lineNumber":643,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":644,"author":{"gitId":"-"},"content":""},{"lineNumber":645,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":646,"author":{"gitId":"-"},"content":"     * Checks if the {@code startTime} is valid to be used as a session start time."},{"lineNumber":647,"author":{"gitId":"-"},"content":"     * Returns an empty string if it is valid, or an error message otherwise."},{"lineNumber":648,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":649,"author":{"gitId":"-"},"content":"     * \u003cp\u003eThe {@code startTime} is valid if it is after 2 hours before now, before 90 days from now"},{"lineNumber":650,"author":{"gitId":"-"},"content":"     * and at exact hour mark."},{"lineNumber":651,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":652,"author":{"gitId":"-"},"content":"    public static String getInvalidityInfoForNewStartTime(Instant startTime, String timeZone) {"},{"lineNumber":653,"author":{"gitId":"-"},"content":"        Instant twoHoursBeforeNow \u003d TimeHelper.getInstantHoursOffsetFromNow(-2);"},{"lineNumber":654,"author":{"gitId":"-"},"content":"        String earlierThanThreeHoursBeforeNowError \u003d getInvalidityInfoForFirstTimeComparedToSecondTime("},{"lineNumber":655,"author":{"gitId":"-"},"content":"                twoHoursBeforeNow, startTime, SESSION_NAME,"},{"lineNumber":656,"author":{"gitId":"-"},"content":"                \"2 hours before now\", SESSION_START_TIME_FIELD_NAME,"},{"lineNumber":657,"author":{"gitId":"-"},"content":"                (firstTime, secondTime) -\u003e firstTime.isBefore(secondTime) || firstTime.equals(secondTime),"},{"lineNumber":658,"author":{"gitId":"-"},"content":"                \"The %s for this %s cannot be earlier than %s.\");"},{"lineNumber":659,"author":{"gitId":"-"},"content":"        if (!earlierThanThreeHoursBeforeNowError.isEmpty()) {"},{"lineNumber":660,"author":{"gitId":"-"},"content":"            return earlierThanThreeHoursBeforeNowError;"},{"lineNumber":661,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":662,"author":{"gitId":"-"},"content":""},{"lineNumber":663,"author":{"gitId":"-"},"content":"        Instant ninetyDaysFromNow \u003d TimeHelper.getInstantDaysOffsetFromNow(90);"},{"lineNumber":664,"author":{"gitId":"-"},"content":"        String laterThanNinetyDaysFromNowError \u003d getInvalidityInfoForFirstTimeComparedToSecondTime("},{"lineNumber":665,"author":{"gitId":"-"},"content":"                ninetyDaysFromNow, startTime, SESSION_NAME,"},{"lineNumber":666,"author":{"gitId":"-"},"content":"                \"90 days from now\", SESSION_START_TIME_FIELD_NAME,"},{"lineNumber":667,"author":{"gitId":"-"},"content":"                (firstTime, secondTime) -\u003e firstTime.isAfter(secondTime) || firstTime.equals(secondTime),"},{"lineNumber":668,"author":{"gitId":"-"},"content":"                \"The %s for this %s cannot be later than %s.\");"},{"lineNumber":669,"author":{"gitId":"-"},"content":"        if (!laterThanNinetyDaysFromNowError.isEmpty()) {"},{"lineNumber":670,"author":{"gitId":"-"},"content":"            return laterThanNinetyDaysFromNowError;"},{"lineNumber":671,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":672,"author":{"gitId":"-"},"content":""},{"lineNumber":673,"author":{"gitId":"-"},"content":"        String notExactHourError \u003d getInvalidityInfoForExactHourTime(startTime, timeZone, \"start time\");"},{"lineNumber":674,"author":{"gitId":"-"},"content":"        if (!notExactHourError.isEmpty()) {"},{"lineNumber":675,"author":{"gitId":"-"},"content":"            return notExactHourError;"},{"lineNumber":676,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":677,"author":{"gitId":"-"},"content":""},{"lineNumber":678,"author":{"gitId":"-"},"content":"        return \"\";"},{"lineNumber":679,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":680,"author":{"gitId":"-"},"content":""},{"lineNumber":681,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":682,"author":{"gitId":"-"},"content":"     * Checks if the {@code endTime} is valid to be used as a session end time."},{"lineNumber":683,"author":{"gitId":"-"},"content":"     * Returns an empty string if it is valid, or an error message otherwise."},{"lineNumber":684,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":685,"author":{"gitId":"-"},"content":"     * \u003cp\u003eThe {@code endTime} is valid if it is after 1 hour before now, before 180 days from now"},{"lineNumber":686,"author":{"gitId":"-"},"content":"     * and at exact hour mark."},{"lineNumber":687,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":688,"author":{"gitId":"-"},"content":"    public static String getInvalidityInfoForNewEndTime(Instant endTime, String timeZone) {"},{"lineNumber":689,"author":{"gitId":"-"},"content":"        Instant oneHourBeforeNow \u003d TimeHelper.getInstantHoursOffsetFromNow(-1);"},{"lineNumber":690,"author":{"gitId":"-"},"content":"        String earlierThanThreeHoursBeforeNowError \u003d getInvalidityInfoForFirstTimeComparedToSecondTime("},{"lineNumber":691,"author":{"gitId":"-"},"content":"                oneHourBeforeNow, endTime, SESSION_NAME,"},{"lineNumber":692,"author":{"gitId":"-"},"content":"                \"1 hour before now\", SESSION_END_TIME_FIELD_NAME,"},{"lineNumber":693,"author":{"gitId":"-"},"content":"                (firstTime, secondTime) -\u003e firstTime.isBefore(secondTime) || firstTime.equals(secondTime),"},{"lineNumber":694,"author":{"gitId":"-"},"content":"                \"The %s for this %s cannot be earlier than %s.\");"},{"lineNumber":695,"author":{"gitId":"-"},"content":"        if (!earlierThanThreeHoursBeforeNowError.isEmpty()) {"},{"lineNumber":696,"author":{"gitId":"-"},"content":"            return earlierThanThreeHoursBeforeNowError;"},{"lineNumber":697,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":698,"author":{"gitId":"-"},"content":""},{"lineNumber":699,"author":{"gitId":"-"},"content":"        Instant oneHundredEightyDaysFromNow \u003d TimeHelper.getInstantDaysOffsetFromNow(180);"},{"lineNumber":700,"author":{"gitId":"-"},"content":"        String laterThanOneHundredEightyDaysError \u003d getInvalidityInfoForFirstTimeComparedToSecondTime("},{"lineNumber":701,"author":{"gitId":"-"},"content":"                oneHundredEightyDaysFromNow, endTime, SESSION_NAME,"},{"lineNumber":702,"author":{"gitId":"-"},"content":"                \"180 days from now\", SESSION_END_TIME_FIELD_NAME,"},{"lineNumber":703,"author":{"gitId":"-"},"content":"                (firstTime, secondTime) -\u003e firstTime.isAfter(secondTime) || firstTime.equals(secondTime),"},{"lineNumber":704,"author":{"gitId":"-"},"content":"                \"The %s for this %s cannot be later than %s.\");"},{"lineNumber":705,"author":{"gitId":"-"},"content":"        if (!laterThanOneHundredEightyDaysError.isEmpty()) {"},{"lineNumber":706,"author":{"gitId":"-"},"content":"            return laterThanOneHundredEightyDaysError;"},{"lineNumber":707,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":708,"author":{"gitId":"-"},"content":""},{"lineNumber":709,"author":{"gitId":"-"},"content":"        String notExactHourError \u003d getInvalidityInfoForExactHourTime(endTime, timeZone, \"end time\");"},{"lineNumber":710,"author":{"gitId":"-"},"content":"        if (!notExactHourError.isEmpty()) {"},{"lineNumber":711,"author":{"gitId":"-"},"content":"            return notExactHourError;"},{"lineNumber":712,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":713,"author":{"gitId":"-"},"content":""},{"lineNumber":714,"author":{"gitId":"-"},"content":"        return \"\";"},{"lineNumber":715,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":716,"author":{"gitId":"-"},"content":""},{"lineNumber":717,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":718,"author":{"gitId":"-"},"content":"     * Checks if Session Start Time is before Session End Time."},{"lineNumber":719,"author":{"gitId":"-"},"content":"     * @return Error string if {@code sessionStart} is before {@code sessionEnd}"},{"lineNumber":720,"author":{"gitId":"-"},"content":"     *         Empty string if {@code sessionStart} is after {@code sessionEnd}"},{"lineNumber":721,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":722,"author":{"gitId":"-"},"content":"    public static String getInvalidityInfoForTimeForSessionStartAndEnd(Instant sessionStart, Instant sessionEnd) {"},{"lineNumber":723,"author":{"gitId":"-"},"content":"        return getInvalidityInfoForFirstTimeIsBeforeSecondTime("},{"lineNumber":724,"author":{"gitId":"-"},"content":"                sessionStart, sessionEnd, SESSION_NAME, SESSION_START_TIME_FIELD_NAME, SESSION_END_TIME_FIELD_NAME);"},{"lineNumber":725,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":726,"author":{"gitId":"-"},"content":""},{"lineNumber":727,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":728,"author":{"gitId":"-"},"content":"     * Checks if Session Visibility Start Time is before Session Start Time."},{"lineNumber":729,"author":{"gitId":"-"},"content":"     * @return Error string if {@code visibilityStart} is before {@code sessionStart}"},{"lineNumber":730,"author":{"gitId":"-"},"content":"     *         Empty string if {@code visibilityStart} is after {@code sessionStart}"},{"lineNumber":731,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":732,"author":{"gitId":"-"},"content":"    public static String getInvalidityInfoForTimeForVisibilityStartAndSessionStart("},{"lineNumber":733,"author":{"gitId":"-"},"content":"            Instant visibilityStart, Instant sessionStart) {"},{"lineNumber":734,"author":{"gitId":"-"},"content":"        return getInvalidityInfoForFirstTimeIsBeforeSecondTime(visibilityStart, sessionStart,"},{"lineNumber":735,"author":{"gitId":"-"},"content":"                SESSION_NAME, SESSION_VISIBLE_TIME_FIELD_NAME, SESSION_START_TIME_FIELD_NAME);"},{"lineNumber":736,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":737,"author":{"gitId":"-"},"content":""},{"lineNumber":738,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":739,"author":{"gitId":"-"},"content":"     * Checks if the {@code visibilityStart} is valid to be used as a session visible start time."},{"lineNumber":740,"author":{"gitId":"-"},"content":"     * Returns an empty string if it is valid, or an error message otherwise."},{"lineNumber":741,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":742,"author":{"gitId":"-"},"content":"     * \u003cp\u003eThe {@code visibilityStart} is valid if it is less than 30 days before {@code sessionStart}."},{"lineNumber":743,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":744,"author":{"gitId":"-"},"content":"    public static String getInvalidityInfoForTimeForNewVisibilityStart(Instant visibilityStart, Instant sessionStart) {"},{"lineNumber":745,"author":{"gitId":"-"},"content":"        Instant visibilityStartThirtyDaysBeforeSessionStart \u003d sessionStart.minus(Duration.ofDays(30));"},{"lineNumber":746,"author":{"gitId":"-"},"content":"        String visibilityStartMoreThanThirtyDaysBeforeSessionStartError \u003d"},{"lineNumber":747,"author":{"gitId":"-"},"content":"                getInvalidityInfoForFirstTimeComparedToSecondTime("},{"lineNumber":748,"author":{"gitId":"-"},"content":"                        visibilityStartThirtyDaysBeforeSessionStart, visibilityStart, SESSION_NAME,"},{"lineNumber":749,"author":{"gitId":"-"},"content":"                        \"30 days before start time\", SESSION_VISIBLE_TIME_FIELD_NAME,"},{"lineNumber":750,"author":{"gitId":"-"},"content":"                        (firstTime, secondTime) -\u003e firstTime.isBefore(secondTime) || firstTime.equals(secondTime),"},{"lineNumber":751,"author":{"gitId":"-"},"content":"                        \"The %s for this %s cannot be earlier than %s.\");"},{"lineNumber":752,"author":{"gitId":"-"},"content":"        if (!visibilityStartMoreThanThirtyDaysBeforeSessionStartError.isEmpty()) {"},{"lineNumber":753,"author":{"gitId":"-"},"content":"            return visibilityStartMoreThanThirtyDaysBeforeSessionStartError;"},{"lineNumber":754,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":755,"author":{"gitId":"-"},"content":"        return \"\";"},{"lineNumber":756,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":757,"author":{"gitId":"-"},"content":""},{"lineNumber":758,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":759,"author":{"gitId":"-"},"content":"     * Checks if Visibility Start Time is before Results Publish Time."},{"lineNumber":760,"author":{"gitId":"-"},"content":"     * @return Error string if {@code visibilityStart} is before {@code resultsPublish}"},{"lineNumber":761,"author":{"gitId":"-"},"content":"     *         Empty string if {@code visibilityStart} is after {@code resultsPublish}"},{"lineNumber":762,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":763,"author":{"gitId":"-"},"content":"    public static String getInvalidityInfoForTimeForVisibilityStartAndResultsPublish("},{"lineNumber":764,"author":{"gitId":"-"},"content":"            Instant visibilityStart, Instant resultsPublish) {"},{"lineNumber":765,"author":{"gitId":"-"},"content":"        return getInvalidityInfoForFirstTimeIsBeforeSecondTime(visibilityStart, resultsPublish,"},{"lineNumber":766,"author":{"gitId":"-"},"content":"                SESSION_NAME, SESSION_VISIBLE_TIME_FIELD_NAME, RESULTS_VISIBLE_TIME_FIELD_NAME);"},{"lineNumber":767,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":768,"author":{"gitId":"-"},"content":""},{"lineNumber":769,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":770,"author":{"gitId":"-"},"content":"     * Checks if the session end time is before all extended deadlines."},{"lineNumber":771,"author":{"gitId":"-"},"content":"     * @return Error string if any deadline in {@code deadlines} is before {@code sessionEnd}, an empty one otherwise."},{"lineNumber":772,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":773,"author":{"gitId":"-"},"content":"    public static String getInvalidityInfoForTimeForSessionEndAndExtendedDeadlines("},{"lineNumber":774,"author":{"gitId":"-"},"content":"            Instant sessionEnd, Map\u003cString, Instant\u003e deadlines) {"},{"lineNumber":775,"author":{"gitId":"-"},"content":"        return deadlines.entrySet()"},{"lineNumber":776,"author":{"gitId":"-"},"content":"                .stream()"},{"lineNumber":777,"author":{"gitId":"-"},"content":"                .map(entry -\u003e getInvalidityInfoForFirstTimeIsStrictlyBeforeSecondTime(sessionEnd, entry.getValue(),"},{"lineNumber":778,"author":{"gitId":"-"},"content":"                        SESSION_NAME, SESSION_END_TIME_FIELD_NAME, EXTENDED_DEADLINES_FIELD_NAME))"},{"lineNumber":779,"author":{"gitId":"-"},"content":"                .filter(invalidityInfo -\u003e !invalidityInfo.isEmpty())"},{"lineNumber":780,"author":{"gitId":"-"},"content":"                .findFirst()"},{"lineNumber":781,"author":{"gitId":"-"},"content":"                .orElse(\"\");"},{"lineNumber":782,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":783,"author":{"gitId":"-"},"content":""},{"lineNumber":784,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":785,"author":{"gitId":"EuniceSim142"},"content":"     * Checks if the session end time is before all extended deadlines."},{"lineNumber":786,"author":{"gitId":"EuniceSim142"},"content":"     * @return Error string if any deadline in {@code deadlines} is before {@code sessionEnd}, an empty one otherwise."},{"lineNumber":787,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":788,"author":{"gitId":"EuniceSim142"},"content":"    public static String getInvalidityInfoForTimeForSessionEndAndExtendedDeadlines("},{"lineNumber":789,"author":{"gitId":"EuniceSim142"},"content":"            Instant sessionEnd, List\u003cDeadlineExtension\u003e deadlineExtensions) {"},{"lineNumber":790,"author":{"gitId":"EuniceSim142"},"content":"        for (DeadlineExtension de : deadlineExtensions) {"},{"lineNumber":791,"author":{"gitId":"EuniceSim142"},"content":"            String err \u003d getInvalidityInfoForFirstTimeIsStrictlyBeforeSecondTime(sessionEnd, de.getEndTime(),"},{"lineNumber":792,"author":{"gitId":"EuniceSim142"},"content":"                    SESSION_NAME, SESSION_END_TIME_FIELD_NAME, EXTENDED_DEADLINES_FIELD_NAME);"},{"lineNumber":793,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":794,"author":{"gitId":"EuniceSim142"},"content":"            if (!err.isEmpty()) {"},{"lineNumber":795,"author":{"gitId":"EuniceSim142"},"content":"                return err;"},{"lineNumber":796,"author":{"gitId":"EuniceSim142"},"content":"            }"},{"lineNumber":797,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":798,"author":{"gitId":"EuniceSim142"},"content":"        return \"\";"},{"lineNumber":799,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":800,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":801,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":802,"author":{"gitId":"-"},"content":"     * Checks if Notification Start Time is before Notification End Time."},{"lineNumber":803,"author":{"gitId":"-"},"content":"     * @return Error string if {@code notificationStart} is before {@code notificationEnd}"},{"lineNumber":804,"author":{"gitId":"-"},"content":"     *         Empty string if {@code notificationStart} is after {@code notificationEnd}"},{"lineNumber":805,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":806,"author":{"gitId":"-"},"content":"    public static String getInvalidityInfoForTimeForNotificationStartAndEnd("},{"lineNumber":807,"author":{"gitId":"-"},"content":"            Instant notificationStart, Instant notificationExpiry) {"},{"lineNumber":808,"author":{"gitId":"-"},"content":"        return getInvalidityInfoForFirstTimeIsBeforeSecondTime(notificationStart, notificationExpiry,"},{"lineNumber":809,"author":{"gitId":"-"},"content":"                NOTIFICATION_NAME, NOTIFICATION_VISIBLE_TIME_FIELD_NAME, NOTIFICATION_EXPIRY_TIME_FIELD_NAME);"},{"lineNumber":810,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":811,"author":{"gitId":"-"},"content":""},{"lineNumber":812,"author":{"gitId":"-"},"content":"    private static String getInvalidityInfoForFirstTimeIsBeforeSecondTime(Instant earlierTime, Instant laterTime,"},{"lineNumber":813,"author":{"gitId":"-"},"content":"            String entityName, String earlierTimeFieldName, String laterTimeFieldName) {"},{"lineNumber":814,"author":{"gitId":"-"},"content":"        return getInvalidityInfoForFirstTimeComparedToSecondTime(earlierTime, laterTime, entityName,"},{"lineNumber":815,"author":{"gitId":"-"},"content":"                earlierTimeFieldName, laterTimeFieldName,"},{"lineNumber":816,"author":{"gitId":"-"},"content":"                (firstTime, secondTime) -\u003e firstTime.isBefore(secondTime) || firstTime.equals(secondTime),"},{"lineNumber":817,"author":{"gitId":"-"},"content":"                TIME_BEFORE_ERROR_MESSAGE);"},{"lineNumber":818,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":819,"author":{"gitId":"-"},"content":""},{"lineNumber":820,"author":{"gitId":"-"},"content":"    private static String getInvalidityInfoForFirstTimeIsStrictlyBeforeSecondTime("},{"lineNumber":821,"author":{"gitId":"-"},"content":"            Instant earlierTime, Instant laterTime, String entityName, String earlierTimeFieldName,"},{"lineNumber":822,"author":{"gitId":"-"},"content":"            String laterTimeFieldName) {"},{"lineNumber":823,"author":{"gitId":"-"},"content":"        return getInvalidityInfoForFirstTimeComparedToSecondTime(earlierTime, laterTime, entityName,"},{"lineNumber":824,"author":{"gitId":"-"},"content":"                earlierTimeFieldName, laterTimeFieldName, Instant::isBefore,"},{"lineNumber":825,"author":{"gitId":"-"},"content":"                TIME_BEFORE_OR_EQUAL_ERROR_MESSAGE);"},{"lineNumber":826,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":827,"author":{"gitId":"-"},"content":""},{"lineNumber":828,"author":{"gitId":"-"},"content":"    private static String getInvalidityInfoForFirstTimeComparedToSecondTime(Instant earlierTime, Instant laterTime,"},{"lineNumber":829,"author":{"gitId":"-"},"content":"            String entityName, String earlierTimeFieldName, String laterTimeFieldName,"},{"lineNumber":830,"author":{"gitId":"-"},"content":"            BiPredicate\u003cInstant, Instant\u003e validityChecker,"},{"lineNumber":831,"author":{"gitId":"-"},"content":"            String invalidityInfoTemplate) {"},{"lineNumber":832,"author":{"gitId":"-"},"content":""},{"lineNumber":833,"author":{"gitId":"-"},"content":"        assert earlierTime !\u003d null;"},{"lineNumber":834,"author":{"gitId":"-"},"content":"        assert laterTime !\u003d null;"},{"lineNumber":835,"author":{"gitId":"-"},"content":""},{"lineNumber":836,"author":{"gitId":"-"},"content":"        if (TimeHelper.isSpecialTime(earlierTime) || TimeHelper.isSpecialTime(laterTime)) {"},{"lineNumber":837,"author":{"gitId":"-"},"content":"            return \"\";"},{"lineNumber":838,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":839,"author":{"gitId":"-"},"content":""},{"lineNumber":840,"author":{"gitId":"-"},"content":"        if (!validityChecker.test(earlierTime, laterTime)) {"},{"lineNumber":841,"author":{"gitId":"-"},"content":"            return String.format(invalidityInfoTemplate, laterTimeFieldName, entityName, earlierTimeFieldName);"},{"lineNumber":842,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":843,"author":{"gitId":"-"},"content":""},{"lineNumber":844,"author":{"gitId":"-"},"content":"        return \"\";"},{"lineNumber":845,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":846,"author":{"gitId":"-"},"content":""},{"lineNumber":847,"author":{"gitId":"-"},"content":"    private static String getInvalidityInfoForExactHourTime(Instant time, String timeZone, String timeName) {"},{"lineNumber":848,"author":{"gitId":"-"},"content":"        // Timezone offsets are usually a whole number of hours, but a few zones are offset by"},{"lineNumber":849,"author":{"gitId":"-"},"content":"        // an additional 30 or 45 minutes, such as in India, South Australia and Nepal."},{"lineNumber":850,"author":{"gitId":"-"},"content":"        boolean isExactHour \u003d LocalDateTime.ofInstant(time, ZoneId.of(timeZone)).getMinute() \u003d\u003d 0;"},{"lineNumber":851,"author":{"gitId":"-"},"content":"        if (!isExactHour) {"},{"lineNumber":852,"author":{"gitId":"-"},"content":"            return String.format(NOT_EXACT_HOUR_ERROR_MESSAGE, timeName);"},{"lineNumber":853,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":854,"author":{"gitId":"-"},"content":"        return \"\";"},{"lineNumber":855,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":856,"author":{"gitId":"-"},"content":""},{"lineNumber":857,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":858,"author":{"gitId":"-"},"content":"     * Checks if both the giver type and recipient type for the feedback question is valid."},{"lineNumber":859,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":860,"author":{"gitId":"-"},"content":"     * @param giverType feedback question giver type to be checked."},{"lineNumber":861,"author":{"gitId":"-"},"content":"     * @param recipientType feedback question recipient type to be checked."},{"lineNumber":862,"author":{"gitId":"-"},"content":"     * @return Error string if either type is invalid, otherwise empty string."},{"lineNumber":863,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":864,"author":{"gitId":"-"},"content":"    public static List\u003cString\u003e getValidityInfoForFeedbackParticipantType("},{"lineNumber":865,"author":{"gitId":"-"},"content":"            FeedbackParticipantType giverType, FeedbackParticipantType recipientType) {"},{"lineNumber":866,"author":{"gitId":"-"},"content":""},{"lineNumber":867,"author":{"gitId":"-"},"content":"        assert giverType !\u003d null;"},{"lineNumber":868,"author":{"gitId":"-"},"content":"        assert recipientType !\u003d null;"},{"lineNumber":869,"author":{"gitId":"-"},"content":""},{"lineNumber":870,"author":{"gitId":"-"},"content":"        List\u003cString\u003e errors \u003d new LinkedList\u003c\u003e();"},{"lineNumber":871,"author":{"gitId":"-"},"content":"        if (!giverType.isValidGiver()) {"},{"lineNumber":872,"author":{"gitId":"-"},"content":"            errors.add(String.format(PARTICIPANT_TYPE_ERROR_MESSAGE, giverType.toString(), GIVER_TYPE_NAME));"},{"lineNumber":873,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":874,"author":{"gitId":"-"},"content":"        if (!recipientType.isValidRecipient()) {"},{"lineNumber":875,"author":{"gitId":"-"},"content":"            errors.add(String.format(PARTICIPANT_TYPE_ERROR_MESSAGE, recipientType.toString(), RECIPIENT_TYPE_NAME));"},{"lineNumber":876,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":877,"author":{"gitId":"-"},"content":"        if (giverType \u003d\u003d FeedbackParticipantType.TEAMS"},{"lineNumber":878,"author":{"gitId":"-"},"content":"                \u0026\u0026 (recipientType \u003d\u003d FeedbackParticipantType.OWN_TEAM"},{"lineNumber":879,"author":{"gitId":"-"},"content":"                        || recipientType \u003d\u003d FeedbackParticipantType.OWN_TEAM_MEMBERS)) {"},{"lineNumber":880,"author":{"gitId":"-"},"content":"            String displayRecipientName \u003d recipientType \u003d\u003d FeedbackParticipantType.OWN_TEAM"},{"lineNumber":881,"author":{"gitId":"-"},"content":"                    ? \"Giver\u0027s team\" : \"Giver\u0027s team members\";"},{"lineNumber":882,"author":{"gitId":"-"},"content":"            errors.add(String.format(PARTICIPANT_TYPE_TEAM_ERROR_MESSAGE,"},{"lineNumber":883,"author":{"gitId":"-"},"content":"                    displayRecipientName,"},{"lineNumber":884,"author":{"gitId":"-"},"content":"                    \"Teams in this course\"));"},{"lineNumber":885,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":886,"author":{"gitId":"-"},"content":""},{"lineNumber":887,"author":{"gitId":"-"},"content":"        return errors;"},{"lineNumber":888,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":889,"author":{"gitId":"-"},"content":""},{"lineNumber":890,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":891,"author":{"gitId":"-"},"content":"     * Checks if comment giver type is either instructor, student or team."},{"lineNumber":892,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":893,"author":{"gitId":"-"},"content":"     * @param commentGiverType comment giver type to be checked."},{"lineNumber":894,"author":{"gitId":"-"},"content":"     * @return Error string if type is invalid, otherwise empty string."},{"lineNumber":895,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":896,"author":{"gitId":"-"},"content":"    public static String getInvalidityInfoForCommentGiverType(FeedbackParticipantType commentGiverType) {"},{"lineNumber":897,"author":{"gitId":"-"},"content":"        assert commentGiverType !\u003d null;"},{"lineNumber":898,"author":{"gitId":"-"},"content":"        if (!commentGiverType.equals(FeedbackParticipantType.STUDENTS)"},{"lineNumber":899,"author":{"gitId":"-"},"content":"                   \u0026\u0026 !commentGiverType.equals(FeedbackParticipantType.INSTRUCTORS)"},{"lineNumber":900,"author":{"gitId":"-"},"content":"                   \u0026\u0026 !commentGiverType.equals(FeedbackParticipantType.TEAMS)) {"},{"lineNumber":901,"author":{"gitId":"-"},"content":"            return \"Invalid comment giver type: \" + commentGiverType;"},{"lineNumber":902,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":903,"author":{"gitId":"-"},"content":"        return \"\";"},{"lineNumber":904,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":905,"author":{"gitId":"-"},"content":""},{"lineNumber":906,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":907,"author":{"gitId":"-"},"content":"     * Checks if visibility of comment is following question when comment is from a feedback participant."},{"lineNumber":908,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":909,"author":{"gitId":"-"},"content":"     * @param isCommentFromFeedbackParticipant true if comment is from feedback participant."},{"lineNumber":910,"author":{"gitId":"-"},"content":"     * @param isVisibilityFollowingFeedbackQuestion true if visibility of comment follows question."},{"lineNumber":911,"author":{"gitId":"-"},"content":"     * @return Error string if condition is not met, otherwise empty string."},{"lineNumber":912,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":913,"author":{"gitId":"-"},"content":"    public static String getInvalidityInfoForVisibilityOfFeedbackParticipantComments("},{"lineNumber":914,"author":{"gitId":"-"},"content":"            boolean isCommentFromFeedbackParticipant,"},{"lineNumber":915,"author":{"gitId":"-"},"content":"            boolean isVisibilityFollowingFeedbackQuestion) {"},{"lineNumber":916,"author":{"gitId":"-"},"content":"        if (isCommentFromFeedbackParticipant \u0026\u0026 !isVisibilityFollowingFeedbackQuestion) {"},{"lineNumber":917,"author":{"gitId":"-"},"content":"            return \"Comment by feedback participant not following visibility setting of the question.\";"},{"lineNumber":918,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":919,"author":{"gitId":"-"},"content":"        return \"\";"},{"lineNumber":920,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":921,"author":{"gitId":"-"},"content":""},{"lineNumber":922,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":923,"author":{"gitId":"-"},"content":"     * Checks if all the given participant types are valid for the purpose of"},{"lineNumber":924,"author":{"gitId":"-"},"content":"     * showing different fields of a feedback response."},{"lineNumber":925,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":926,"author":{"gitId":"-"},"content":"     * @param showResponsesTo the list of participant types to whom responses can be shown"},{"lineNumber":927,"author":{"gitId":"-"},"content":"     * @param showGiverNameTo the list of participant types to whom giver name can be shown"},{"lineNumber":928,"author":{"gitId":"-"},"content":"     * @param showRecipientNameTo the list of participant types to whom recipient name can be shown"},{"lineNumber":929,"author":{"gitId":"-"},"content":"     * @return Error string if any type in any list is invalid, otherwise empty string."},{"lineNumber":930,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":931,"author":{"gitId":"-"},"content":"    public static List\u003cString\u003e getValidityInfoForFeedbackResponseVisibility("},{"lineNumber":932,"author":{"gitId":"-"},"content":"            List\u003cFeedbackParticipantType\u003e showResponsesTo,"},{"lineNumber":933,"author":{"gitId":"-"},"content":"            List\u003cFeedbackParticipantType\u003e showGiverNameTo,"},{"lineNumber":934,"author":{"gitId":"-"},"content":"            List\u003cFeedbackParticipantType\u003e showRecipientNameTo) {"},{"lineNumber":935,"author":{"gitId":"-"},"content":""},{"lineNumber":936,"author":{"gitId":"-"},"content":"        assert showResponsesTo !\u003d null;"},{"lineNumber":937,"author":{"gitId":"-"},"content":"        assert showGiverNameTo !\u003d null;"},{"lineNumber":938,"author":{"gitId":"-"},"content":"        assert showRecipientNameTo !\u003d null;"},{"lineNumber":939,"author":{"gitId":"-"},"content":"        assert !showResponsesTo.contains(null);"},{"lineNumber":940,"author":{"gitId":"-"},"content":"        assert !showGiverNameTo.contains(null);"},{"lineNumber":941,"author":{"gitId":"-"},"content":"        assert !showRecipientNameTo.contains(null);"},{"lineNumber":942,"author":{"gitId":"-"},"content":""},{"lineNumber":943,"author":{"gitId":"-"},"content":"        List\u003cString\u003e errors \u003d new LinkedList\u003c\u003e();"},{"lineNumber":944,"author":{"gitId":"-"},"content":""},{"lineNumber":945,"author":{"gitId":"-"},"content":"        for (FeedbackParticipantType type : showGiverNameTo) {"},{"lineNumber":946,"author":{"gitId":"-"},"content":"            if (!type.isValidViewer()) {"},{"lineNumber":947,"author":{"gitId":"-"},"content":"                errors.add(String.format(PARTICIPANT_TYPE_ERROR_MESSAGE,"},{"lineNumber":948,"author":{"gitId":"-"},"content":"                        type.toString(), VIEWER_TYPE_NAME));"},{"lineNumber":949,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":950,"author":{"gitId":"-"},"content":"            if (!showResponsesTo.contains(type)) {"},{"lineNumber":951,"author":{"gitId":"-"},"content":"                errors.add(\"Trying to show giver name to \""},{"lineNumber":952,"author":{"gitId":"-"},"content":"                        + type.toString()"},{"lineNumber":953,"author":{"gitId":"-"},"content":"                        + \" without showing response first.\");"},{"lineNumber":954,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":955,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":956,"author":{"gitId":"-"},"content":""},{"lineNumber":957,"author":{"gitId":"-"},"content":"        for (FeedbackParticipantType type : showRecipientNameTo) {"},{"lineNumber":958,"author":{"gitId":"-"},"content":"            if (!type.isValidViewer()) {"},{"lineNumber":959,"author":{"gitId":"-"},"content":"                errors.add(String.format(PARTICIPANT_TYPE_ERROR_MESSAGE,"},{"lineNumber":960,"author":{"gitId":"-"},"content":"                        type.toString(), VIEWER_TYPE_NAME));"},{"lineNumber":961,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":962,"author":{"gitId":"-"},"content":"            if (!showResponsesTo.contains(type)) {"},{"lineNumber":963,"author":{"gitId":"-"},"content":"                errors.add(\"Trying to show recipient name to \""},{"lineNumber":964,"author":{"gitId":"-"},"content":"                        + type.toString()"},{"lineNumber":965,"author":{"gitId":"-"},"content":"                        + \" without showing response first.\");"},{"lineNumber":966,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":967,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":968,"author":{"gitId":"-"},"content":""},{"lineNumber":969,"author":{"gitId":"-"},"content":"        for (FeedbackParticipantType type : showResponsesTo) {"},{"lineNumber":970,"author":{"gitId":"-"},"content":"            if (!type.isValidViewer()) {"},{"lineNumber":971,"author":{"gitId":"-"},"content":"                errors.add(String.format(PARTICIPANT_TYPE_ERROR_MESSAGE,"},{"lineNumber":972,"author":{"gitId":"-"},"content":"                        type.toString(), VIEWER_TYPE_NAME));"},{"lineNumber":973,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":974,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":975,"author":{"gitId":"-"},"content":""},{"lineNumber":976,"author":{"gitId":"-"},"content":"        return errors;"},{"lineNumber":977,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":978,"author":{"gitId":"-"},"content":""},{"lineNumber":979,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":980,"author":{"gitId":"-"},"content":"     * Checks if the given {@code value} has no HTML code."},{"lineNumber":981,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":982,"author":{"gitId":"-"},"content":"    static String getValidityInfoForNonHtmlField(String fieldName, String value) {"},{"lineNumber":983,"author":{"gitId":"-"},"content":"        String sanitizedValue \u003d SanitizationHelper.sanitizeForHtml(value);"},{"lineNumber":984,"author":{"gitId":"-"},"content":"        //Fails if sanitized value is not same as value"},{"lineNumber":985,"author":{"gitId":"-"},"content":"        return value.equals(sanitizedValue) ? \"\" : NON_HTML_FIELD_ERROR_MESSAGE.replace(\"${fieldName}\", fieldName);"},{"lineNumber":986,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":987,"author":{"gitId":"-"},"content":""},{"lineNumber":988,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":989,"author":{"gitId":"-"},"content":"     * Checks if the given {@code value} is not null."},{"lineNumber":990,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":991,"author":{"gitId":"-"},"content":"    public static String getValidityInfoForNonNullField(String fieldName, Object value) {"},{"lineNumber":992,"author":{"gitId":"-"},"content":"        return value \u003d\u003d null ? NON_NULL_FIELD_ERROR_MESSAGE.replace(\"${fieldName}\", fieldName) : \"\";"},{"lineNumber":993,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":994,"author":{"gitId":"-"},"content":""},{"lineNumber":995,"author":{"gitId":"-"},"content":"    private static boolean isUntrimmed(String value) {"},{"lineNumber":996,"author":{"gitId":"-"},"content":"        return value.length() !\u003d value.trim().length();"},{"lineNumber":997,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":998,"author":{"gitId":"-"},"content":""},{"lineNumber":999,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":1000,"author":{"gitId":"-"},"content":"     * Checks whether a given text input represents a format of a valid email address."},{"lineNumber":1001,"author":{"gitId":"-"},"content":"     * @param email text input which needs the validation"},{"lineNumber":1002,"author":{"gitId":"-"},"content":"     * @return true if it is a valid email address, else false."},{"lineNumber":1003,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":1004,"author":{"gitId":"-"},"content":"    private static boolean isValidEmailAddress(String email) {"},{"lineNumber":1005,"author":{"gitId":"-"},"content":"        return StringHelper.isMatching(email, REGEX_EMAIL);"},{"lineNumber":1006,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1007,"author":{"gitId":"-"},"content":""},{"lineNumber":1008,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":1009,"author":{"gitId":"-"},"content":"     * Checks whether all the elements in a Collection are unique."},{"lineNumber":1010,"author":{"gitId":"-"},"content":"     * @param elements The Collection of elements to be checked."},{"lineNumber":1011,"author":{"gitId":"-"},"content":"     * @return true if all elements are unique, else false."},{"lineNumber":1012,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":1013,"author":{"gitId":"-"},"content":"    public static \u003cT\u003e boolean areElementsUnique(Collection\u003cT\u003e elements) {"},{"lineNumber":1014,"author":{"gitId":"-"},"content":"        Set\u003cT\u003e uniqueElements \u003d new HashSet\u003c\u003e(elements);"},{"lineNumber":1015,"author":{"gitId":"-"},"content":"        return uniqueElements.size() \u003d\u003d elements.size();"},{"lineNumber":1016,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1017,"author":{"gitId":"-"},"content":""},{"lineNumber":1018,"author":{"gitId":"-"},"content":"    private static String getPopulatedErrorMessage("},{"lineNumber":1019,"author":{"gitId":"-"},"content":"            String messageTemplate, String userInput, String fieldName, String errorReason, int maxLength) {"},{"lineNumber":1020,"author":{"gitId":"-"},"content":"        return getPopulatedErrorMessage(messageTemplate, userInput, fieldName, errorReason)"},{"lineNumber":1021,"author":{"gitId":"-"},"content":"                   .replace(\"${maxLength}\", String.valueOf(maxLength));"},{"lineNumber":1022,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1023,"author":{"gitId":"-"},"content":""},{"lineNumber":1024,"author":{"gitId":"-"},"content":"    private static String getPopulatedErrorMessage("},{"lineNumber":1025,"author":{"gitId":"-"},"content":"            String messageTemplate, String userInput, String fieldName, String errorReason) {"},{"lineNumber":1026,"author":{"gitId":"-"},"content":"        return messageTemplate.replace(\"${userInput}\", userInput)"},{"lineNumber":1027,"author":{"gitId":"-"},"content":"                              .replace(\"${fieldName}\", fieldName)"},{"lineNumber":1028,"author":{"gitId":"-"},"content":"                              .replace(\"${reason}\", errorReason);"},{"lineNumber":1029,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1030,"author":{"gitId":"-"},"content":""},{"lineNumber":1031,"author":{"gitId":"-"},"content":"    private static String getPopulatedEmptyStringErrorMessage(String messageTemplate,"},{"lineNumber":1032,"author":{"gitId":"-"},"content":"            String fieldName, int maxLength) {"},{"lineNumber":1033,"author":{"gitId":"-"},"content":"        return messageTemplate.replace(\"${fieldName}\", fieldName)"},{"lineNumber":1034,"author":{"gitId":"-"},"content":"                              .replace(\"${maxLength}\", String.valueOf(maxLength));"},{"lineNumber":1035,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1036,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"EuniceSim142":18,"-":1018}},{"path":"src/main/java/teammates/common/util/HibernateUtil.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.common.util;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":4,"author":{"gitId":"-"},"content":""},{"lineNumber":5,"author":{"gitId":"-"},"content":"import org.hibernate.Session;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import org.hibernate.SessionFactory;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import org.hibernate.Transaction;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import org.hibernate.boot.model.naming.CamelCaseToUnderscoresNamingStrategy;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import org.hibernate.cfg.Configuration;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import org.hibernate.resource.transaction.spi.TransactionStatus;"},{"lineNumber":11,"author":{"gitId":"-"},"content":""},{"lineNumber":12,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Account;"},{"lineNumber":13,"author":{"gitId":"kevin9foong"},"content":"import teammates.storage.sqlentity.AccountRequest;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.BaseEntity;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Course;"},{"lineNumber":16,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.DeadlineExtension;"},{"lineNumber":17,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.FeedbackQuestion;"},{"lineNumber":18,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.FeedbackResponse;"},{"lineNumber":19,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.FeedbackResponseComment;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.FeedbackSession;"},{"lineNumber":21,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":22,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Notification;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.ReadNotification;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Section;"},{"lineNumber":25,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Student;"},{"lineNumber":26,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Team;"},{"lineNumber":27,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.UsageStatistics;"},{"lineNumber":28,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.User;"},{"lineNumber":29,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.questions.FeedbackConstantSumQuestion;"},{"lineNumber":30,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.questions.FeedbackContributionQuestion;"},{"lineNumber":31,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.questions.FeedbackMcqQuestion;"},{"lineNumber":32,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.questions.FeedbackMsqQuestion;"},{"lineNumber":33,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.questions.FeedbackNumericalScaleQuestion;"},{"lineNumber":34,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.questions.FeedbackRankOptionsQuestion;"},{"lineNumber":35,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.questions.FeedbackRankRecipientsQuestion;"},{"lineNumber":36,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.questions.FeedbackRubricQuestion;"},{"lineNumber":37,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.questions.FeedbackTextQuestion;"},{"lineNumber":38,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.responses.FeedbackConstantSumResponse;"},{"lineNumber":39,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.responses.FeedbackContributionResponse;"},{"lineNumber":40,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.responses.FeedbackMcqResponse;"},{"lineNumber":41,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.responses.FeedbackMsqResponse;"},{"lineNumber":42,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.responses.FeedbackRankOptionsResponse;"},{"lineNumber":43,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.responses.FeedbackRankRecipientsResponse;"},{"lineNumber":44,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.responses.FeedbackRubricResponse;"},{"lineNumber":45,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.responses.FeedbackTextResponse;"},{"lineNumber":46,"author":{"gitId":"-"},"content":""},{"lineNumber":47,"author":{"gitId":"domlimm"},"content":"import jakarta.persistence.TypedQuery;"},{"lineNumber":48,"author":{"gitId":"domlimm"},"content":"import jakarta.persistence.criteria.CriteriaBuilder;"},{"lineNumber":49,"author":{"gitId":"domlimm"},"content":"import jakarta.persistence.criteria.CriteriaQuery;"},{"lineNumber":50,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":51,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":52,"author":{"gitId":"-"},"content":" * Utility class for Hibernate related methods."},{"lineNumber":53,"author":{"gitId":"-"},"content":" */"},{"lineNumber":54,"author":{"gitId":"-"},"content":"public final class HibernateUtil {"},{"lineNumber":55,"author":{"gitId":"-"},"content":"    private static SessionFactory sessionFactory;"},{"lineNumber":56,"author":{"gitId":"-"},"content":""},{"lineNumber":57,"author":{"gitId":"-"},"content":"    private static final List\u003cClass\u003c? extends BaseEntity\u003e\u003e ANNOTATED_CLASSES \u003d List.of("},{"lineNumber":58,"author":{"gitId":"-"},"content":"            AccountRequest.class,"},{"lineNumber":59,"author":{"gitId":"-"},"content":"            Course.class,"},{"lineNumber":60,"author":{"gitId":"-"},"content":"            FeedbackSession.class,"},{"lineNumber":61,"author":{"gitId":"-"},"content":"            Account.class,"},{"lineNumber":62,"author":{"gitId":"-"},"content":"            Notification.class,"},{"lineNumber":63,"author":{"gitId":"-"},"content":"            ReadNotification.class,"},{"lineNumber":64,"author":{"gitId":"-"},"content":"            User.class,"},{"lineNumber":65,"author":{"gitId":"-"},"content":"            Instructor.class,"},{"lineNumber":66,"author":{"gitId":"-"},"content":"            Student.class,"},{"lineNumber":67,"author":{"gitId":"-"},"content":"            UsageStatistics.class,"},{"lineNumber":68,"author":{"gitId":"-"},"content":"            Section.class,"},{"lineNumber":69,"author":{"gitId":"cedricongjh"},"content":"            Team.class,"},{"lineNumber":70,"author":{"gitId":"cedricongjh"},"content":"            FeedbackQuestion.class,"},{"lineNumber":71,"author":{"gitId":"cedricongjh"},"content":"            FeedbackConstantSumQuestion.class,"},{"lineNumber":72,"author":{"gitId":"cedricongjh"},"content":"            FeedbackContributionQuestion.class,"},{"lineNumber":73,"author":{"gitId":"cedricongjh"},"content":"            FeedbackMcqQuestion.class,"},{"lineNumber":74,"author":{"gitId":"cedricongjh"},"content":"            FeedbackMsqQuestion.class,"},{"lineNumber":75,"author":{"gitId":"cedricongjh"},"content":"            FeedbackNumericalScaleQuestion.class,"},{"lineNumber":76,"author":{"gitId":"cedricongjh"},"content":"            FeedbackRankOptionsQuestion.class,"},{"lineNumber":77,"author":{"gitId":"cedricongjh"},"content":"            FeedbackRankRecipientsQuestion.class,"},{"lineNumber":78,"author":{"gitId":"cedricongjh"},"content":"            FeedbackRubricQuestion.class,"},{"lineNumber":79,"author":{"gitId":"EuniceSim142"},"content":"            FeedbackTextQuestion.class,"},{"lineNumber":80,"author":{"gitId":"cedricongjh"},"content":"            DeadlineExtension.class,"},{"lineNumber":81,"author":{"gitId":"cedricongjh"},"content":"            FeedbackResponse.class,"},{"lineNumber":82,"author":{"gitId":"cedricongjh"},"content":"            FeedbackConstantSumResponse.class,"},{"lineNumber":83,"author":{"gitId":"cedricongjh"},"content":"            FeedbackContributionResponse.class,"},{"lineNumber":84,"author":{"gitId":"cedricongjh"},"content":"            FeedbackMcqResponse.class,"},{"lineNumber":85,"author":{"gitId":"cedricongjh"},"content":"            FeedbackMsqResponse.class,"},{"lineNumber":86,"author":{"gitId":"cedricongjh"},"content":"            FeedbackNumericalScaleQuestion.class,"},{"lineNumber":87,"author":{"gitId":"cedricongjh"},"content":"            FeedbackRankOptionsResponse.class,"},{"lineNumber":88,"author":{"gitId":"cedricongjh"},"content":"            FeedbackRankRecipientsResponse.class,"},{"lineNumber":89,"author":{"gitId":"cedricongjh"},"content":"            FeedbackRubricResponse.class,"},{"lineNumber":90,"author":{"gitId":"cedricongjh"},"content":"            FeedbackTextResponse.class,"},{"lineNumber":91,"author":{"gitId":"cedricongjh"},"content":"            FeedbackResponseComment.class);"},{"lineNumber":92,"author":{"gitId":"-"},"content":""},{"lineNumber":93,"author":{"gitId":"-"},"content":"    private HibernateUtil() {"},{"lineNumber":94,"author":{"gitId":"-"},"content":"        // Utility class"},{"lineNumber":95,"author":{"gitId":"-"},"content":"        // Intentional private constructor to prevent instantiation."},{"lineNumber":96,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":97,"author":{"gitId":"-"},"content":""},{"lineNumber":98,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":99,"author":{"gitId":"-"},"content":"     * Builds a session factory if it does not already exist."},{"lineNumber":100,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":101,"author":{"gitId":"-"},"content":"    public static void buildSessionFactory(String dbUrl, String username, String password) {"},{"lineNumber":102,"author":{"gitId":"-"},"content":"        synchronized (HibernateUtil.class) {"},{"lineNumber":103,"author":{"gitId":"-"},"content":"            if (sessionFactory !\u003d null) {"},{"lineNumber":104,"author":{"gitId":"-"},"content":"                return;"},{"lineNumber":105,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":106,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":107,"author":{"gitId":"-"},"content":""},{"lineNumber":108,"author":{"gitId":"-"},"content":"        Configuration config \u003d new Configuration()"},{"lineNumber":109,"author":{"gitId":"-"},"content":"                .setProperty(\"hibernate.dialect\", \"org.hibernate.dialect.PostgreSQLDialect\")"},{"lineNumber":110,"author":{"gitId":"-"},"content":"                .setProperty(\"hibernate.connection.driver_class\", \"org.postgresql.Driver\")"},{"lineNumber":111,"author":{"gitId":"-"},"content":"                .setProperty(\"hibernate.connection.username\", username)"},{"lineNumber":112,"author":{"gitId":"-"},"content":"                .setProperty(\"hibernate.connection.password\", password)"},{"lineNumber":113,"author":{"gitId":"-"},"content":"                .setProperty(\"hibernate.connection.url\", dbUrl)"},{"lineNumber":114,"author":{"gitId":"-"},"content":"                .setProperty(\"hibernate.hbm2ddl.auto\", \"update\")"},{"lineNumber":115,"author":{"gitId":"-"},"content":"                .setProperty(\"show_sql\", \"true\")"},{"lineNumber":116,"author":{"gitId":"-"},"content":"                .setProperty(\"hibernate.current_session_context_class\", \"thread\")"},{"lineNumber":117,"author":{"gitId":"-"},"content":"                .addPackage(\"teammates.storage.sqlentity\");"},{"lineNumber":118,"author":{"gitId":"-"},"content":""},{"lineNumber":119,"author":{"gitId":"-"},"content":"        for (Class\u003c? extends BaseEntity\u003e cls : ANNOTATED_CLASSES) {"},{"lineNumber":120,"author":{"gitId":"-"},"content":"            config \u003d config.addAnnotatedClass(cls);"},{"lineNumber":121,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":122,"author":{"gitId":"-"},"content":"        config.setPhysicalNamingStrategy(new CamelCaseToUnderscoresNamingStrategy());"},{"lineNumber":123,"author":{"gitId":"-"},"content":""},{"lineNumber":124,"author":{"gitId":"-"},"content":"        setSessionFactory(config.buildSessionFactory());"},{"lineNumber":125,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":126,"author":{"gitId":"-"},"content":""},{"lineNumber":127,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":128,"author":{"gitId":"-"},"content":"     * Returns the SessionFactory."},{"lineNumber":129,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":130,"author":{"gitId":"domlimm"},"content":"    private static SessionFactory getSessionFactory() {"},{"lineNumber":131,"author":{"gitId":"-"},"content":"        assert sessionFactory !\u003d null;"},{"lineNumber":132,"author":{"gitId":"-"},"content":""},{"lineNumber":133,"author":{"gitId":"-"},"content":"        return sessionFactory;"},{"lineNumber":134,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":135,"author":{"gitId":"-"},"content":""},{"lineNumber":136,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":137,"author":{"gitId":"-"},"content":"     * Returns the current hibernate session."},{"lineNumber":138,"author":{"gitId":"-"},"content":"     * @see SessionFactory#getCurrentSession()"},{"lineNumber":139,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":140,"author":{"gitId":"domlimm"},"content":"    private static Session getCurrentSession() {"},{"lineNumber":141,"author":{"gitId":"-"},"content":"        return HibernateUtil.getSessionFactory().getCurrentSession();"},{"lineNumber":142,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":143,"author":{"gitId":"-"},"content":""},{"lineNumber":144,"author":{"gitId":"domlimm"},"content":"    /**"},{"lineNumber":145,"author":{"gitId":"domlimm"},"content":"     * Returns a CriteriaBuilder object."},{"lineNumber":146,"author":{"gitId":"domlimm"},"content":"     * @see SessionFactory#getCriteriaBuilder()"},{"lineNumber":147,"author":{"gitId":"domlimm"},"content":"     */"},{"lineNumber":148,"author":{"gitId":"domlimm"},"content":"    public static CriteriaBuilder getCriteriaBuilder() {"},{"lineNumber":149,"author":{"gitId":"domlimm"},"content":"        return getCurrentSession().getCriteriaBuilder();"},{"lineNumber":150,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":151,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":152,"author":{"gitId":"domlimm"},"content":"    /**"},{"lineNumber":153,"author":{"gitId":"domlimm"},"content":"     * Returns a generic typed TypedQuery object."},{"lineNumber":154,"author":{"gitId":"domlimm"},"content":"     * @see Session#createQuery(CriteriaQuery)"},{"lineNumber":155,"author":{"gitId":"domlimm"},"content":"     */"},{"lineNumber":156,"author":{"gitId":"domlimm"},"content":"    public static \u003cT\u003e TypedQuery\u003cT\u003e createQuery(CriteriaQuery\u003cT\u003e cr) {"},{"lineNumber":157,"author":{"gitId":"domlimm"},"content":"        return getCurrentSession().createQuery(cr);"},{"lineNumber":158,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":159,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":160,"author":{"gitId":"-"},"content":"    public static void setSessionFactory(SessionFactory sessionFactory) {"},{"lineNumber":161,"author":{"gitId":"-"},"content":"        HibernateUtil.sessionFactory \u003d sessionFactory;"},{"lineNumber":162,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":163,"author":{"gitId":"-"},"content":""},{"lineNumber":164,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":165,"author":{"gitId":"-"},"content":"     * Start a resource transaction."},{"lineNumber":166,"author":{"gitId":"-"},"content":"     * @see Transaction#begin()"},{"lineNumber":167,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":168,"author":{"gitId":"-"},"content":"    public static void beginTransaction() {"},{"lineNumber":169,"author":{"gitId":"-"},"content":"        Transaction transaction \u003d HibernateUtil.getCurrentSession().getTransaction();"},{"lineNumber":170,"author":{"gitId":"-"},"content":"        transaction.begin();"},{"lineNumber":171,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":172,"author":{"gitId":"-"},"content":""},{"lineNumber":173,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":174,"author":{"gitId":"-"},"content":"     * Roll back the current resource transaction if needed."},{"lineNumber":175,"author":{"gitId":"-"},"content":"     * @see Transaction#rollback()"},{"lineNumber":176,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":177,"author":{"gitId":"-"},"content":"    public static void rollbackTransaction() {"},{"lineNumber":178,"author":{"gitId":"-"},"content":"        Session session \u003d HibernateUtil.getCurrentSession();"},{"lineNumber":179,"author":{"gitId":"-"},"content":"        if (session.getTransaction().getStatus() \u003d\u003d TransactionStatus.ACTIVE"},{"lineNumber":180,"author":{"gitId":"-"},"content":"                || session.getTransaction().getStatus() \u003d\u003d TransactionStatus.MARKED_ROLLBACK) {"},{"lineNumber":181,"author":{"gitId":"-"},"content":"            session.getTransaction().rollback();"},{"lineNumber":182,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":183,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":184,"author":{"gitId":"-"},"content":""},{"lineNumber":185,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":186,"author":{"gitId":"-"},"content":"     * Commit the current resource transaction, writing any unflushed changes to the database."},{"lineNumber":187,"author":{"gitId":"-"},"content":"     * @see Session#commit()"},{"lineNumber":188,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":189,"author":{"gitId":"-"},"content":"    public static void commitTransaction() {"},{"lineNumber":190,"author":{"gitId":"-"},"content":"        Transaction transaction \u003d HibernateUtil.getCurrentSession().getTransaction();"},{"lineNumber":191,"author":{"gitId":"-"},"content":"        transaction.commit();"},{"lineNumber":192,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":193,"author":{"gitId":"-"},"content":""},{"lineNumber":194,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":195,"author":{"gitId":"-"},"content":"     * Force this session to flush. Must be called at the end of a unit of work, before the transaction is committed."},{"lineNumber":196,"author":{"gitId":"-"},"content":"     * @see Session#flush()"},{"lineNumber":197,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":198,"author":{"gitId":"-"},"content":"    public static void flushSession() {"},{"lineNumber":199,"author":{"gitId":"-"},"content":"        HibernateUtil.getCurrentSession().flush();"},{"lineNumber":200,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":201,"author":{"gitId":"-"},"content":""},{"lineNumber":202,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":203,"author":{"gitId":"-"},"content":"     * Return the persistent instance of the given entity class with the given identifier,"},{"lineNumber":204,"author":{"gitId":"-"},"content":"     * or null if there is no such persistent instance."},{"lineNumber":205,"author":{"gitId":"-"},"content":"     * @see Session#get(Class, Object)"},{"lineNumber":206,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":207,"author":{"gitId":"-"},"content":"    public static \u003cT extends BaseEntity\u003e T get(Class\u003cT\u003e entityType, Object id) {"},{"lineNumber":208,"author":{"gitId":"-"},"content":"        return HibernateUtil.getCurrentSession().get(entityType, id);"},{"lineNumber":209,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":210,"author":{"gitId":"-"},"content":""},{"lineNumber":211,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":212,"author":{"gitId":"-"},"content":"     * Return the persistent instance of the given entity class with the given natural id,"},{"lineNumber":213,"author":{"gitId":"-"},"content":"     * or null if there is no such persistent instance."},{"lineNumber":214,"author":{"gitId":"-"},"content":"     * @see Session#get(Class, Object)"},{"lineNumber":215,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":216,"author":{"gitId":"-"},"content":"    public static \u003cT extends BaseEntity\u003e T getBySimpleNaturalId(Class\u003cT\u003e entityType, Object id) {"},{"lineNumber":217,"author":{"gitId":"-"},"content":"        return HibernateUtil.getCurrentSession().bySimpleNaturalId(entityType).load(id);"},{"lineNumber":218,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":219,"author":{"gitId":"-"},"content":""},{"lineNumber":220,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":221,"author":{"gitId":"-"},"content":"     * Copy the state of the given object onto the persistent object with the same identifier."},{"lineNumber":222,"author":{"gitId":"-"},"content":"     * @see Session#merge(E)"},{"lineNumber":223,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":224,"author":{"gitId":"-"},"content":"    public static \u003cE\u003e E merge(E object) {"},{"lineNumber":225,"author":{"gitId":"-"},"content":"        return HibernateUtil.getCurrentSession().merge(object);"},{"lineNumber":226,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":227,"author":{"gitId":"-"},"content":""},{"lineNumber":228,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":229,"author":{"gitId":"-"},"content":"     * Make a transient instance persistent and mark it for later insertion in the database."},{"lineNumber":230,"author":{"gitId":"-"},"content":"     * @see Session#persist(Object)"},{"lineNumber":231,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":232,"author":{"gitId":"-"},"content":"    public static void persist(BaseEntity entity) {"},{"lineNumber":233,"author":{"gitId":"-"},"content":"        HibernateUtil.getCurrentSession().persist(entity);"},{"lineNumber":234,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":235,"author":{"gitId":"-"},"content":""},{"lineNumber":236,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":237,"author":{"gitId":"-"},"content":"     * Mark a persistence instance associated with this session for removal from the underlying database."},{"lineNumber":238,"author":{"gitId":"-"},"content":"     * @see Session#remove(Object)"},{"lineNumber":239,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":240,"author":{"gitId":"-"},"content":"    public static void remove(BaseEntity entity) {"},{"lineNumber":241,"author":{"gitId":"-"},"content":"        HibernateUtil.getCurrentSession().remove(entity);"},{"lineNumber":242,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":243,"author":{"gitId":"-"},"content":""},{"lineNumber":244,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"domlimm":25,"cedricongjh":42,"EuniceSim142":2,"-":174,"kevin9foong":1}},{"path":"src/main/java/teammates/common/util/JsonUtils.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.common.util;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.lang.reflect.Type;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.time.Duration;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.time.Instant;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import java.time.ZoneId;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import java.time.format.DateTimeFormatter;"},{"lineNumber":8,"author":{"gitId":"-"},"content":""},{"lineNumber":9,"author":{"gitId":"-"},"content":"import com.google.gson.ExclusionStrategy;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import com.google.gson.FieldAttributes;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import com.google.gson.Gson;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import com.google.gson.GsonBuilder;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import com.google.gson.JsonDeserializationContext;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import com.google.gson.JsonDeserializer;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import com.google.gson.JsonElement;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"import com.google.gson.JsonObject;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"import com.google.gson.JsonParser;"},{"lineNumber":18,"author":{"gitId":"-"},"content":"import com.google.gson.JsonPrimitive;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"import com.google.gson.JsonSerializationContext;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"import com.google.gson.JsonSerializer;"},{"lineNumber":21,"author":{"gitId":"-"},"content":""},{"lineNumber":22,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.logs.LogDetails;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.logs.LogEvent;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackQuestionDetails;"},{"lineNumber":25,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackQuestionType;"},{"lineNumber":26,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackResponseDetails;"},{"lineNumber":27,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.FeedbackQuestion;"},{"lineNumber":28,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":29,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Student;"},{"lineNumber":30,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.User;"},{"lineNumber":31,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.questions.FeedbackConstantSumQuestion;"},{"lineNumber":32,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.questions.FeedbackContributionQuestion;"},{"lineNumber":33,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.questions.FeedbackMcqQuestion;"},{"lineNumber":34,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.questions.FeedbackMsqQuestion;"},{"lineNumber":35,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.questions.FeedbackNumericalScaleQuestion;"},{"lineNumber":36,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.questions.FeedbackRankOptionsQuestion;"},{"lineNumber":37,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.questions.FeedbackRankRecipientsQuestion;"},{"lineNumber":38,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.questions.FeedbackRubricQuestion;"},{"lineNumber":39,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.questions.FeedbackTextQuestion;"},{"lineNumber":40,"author":{"gitId":"-"},"content":""},{"lineNumber":41,"author":{"gitId":"-"},"content":"import jakarta.persistence.OneToMany;"},{"lineNumber":42,"author":{"gitId":"-"},"content":""},{"lineNumber":43,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":44,"author":{"gitId":"-"},"content":" * Provides means to handle, manipulate, and convert JSON objects to/from strings."},{"lineNumber":45,"author":{"gitId":"-"},"content":" */"},{"lineNumber":46,"author":{"gitId":"-"},"content":"public final class JsonUtils {"},{"lineNumber":47,"author":{"gitId":"-"},"content":""},{"lineNumber":48,"author":{"gitId":"-"},"content":"    private JsonUtils() {"},{"lineNumber":49,"author":{"gitId":"-"},"content":"        // utility class"},{"lineNumber":50,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":51,"author":{"gitId":"-"},"content":""},{"lineNumber":52,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":53,"author":{"gitId":"-"},"content":"     * This creates a Gson object that can handle the Date format we use in the"},{"lineNumber":54,"author":{"gitId":"-"},"content":"     * Json file and also reformat the Json string in pretty-print format."},{"lineNumber":55,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":56,"author":{"gitId":"-"},"content":"    private static Gson getGsonInstance(boolean prettyPrint) {"},{"lineNumber":57,"author":{"gitId":"-"},"content":"        GsonBuilder builder \u003d new GsonBuilder()"},{"lineNumber":58,"author":{"gitId":"-"},"content":"                .setExclusionStrategies(new HibernateExclusionStrategy())"},{"lineNumber":59,"author":{"gitId":"-"},"content":"                .registerTypeAdapter(User.class, new UserAdapter())"},{"lineNumber":60,"author":{"gitId":"-"},"content":"                .registerTypeAdapter(Instant.class, new InstantAdapter())"},{"lineNumber":61,"author":{"gitId":"-"},"content":"                .registerTypeAdapter(ZoneId.class, new ZoneIdAdapter())"},{"lineNumber":62,"author":{"gitId":"-"},"content":"                .registerTypeAdapter(Duration.class, new DurationMinutesAdapter())"},{"lineNumber":63,"author":{"gitId":"hhdqirui"},"content":"                .registerTypeAdapter(FeedbackQuestion.class, new FeedbackQuestionAdapter())"},{"lineNumber":64,"author":{"gitId":"-"},"content":"                .registerTypeAdapter(FeedbackQuestionDetails.class, new FeedbackQuestionDetailsAdapter())"},{"lineNumber":65,"author":{"gitId":"-"},"content":"                .registerTypeAdapter(FeedbackResponseDetails.class, new FeedbackResponseDetailsAdapter())"},{"lineNumber":66,"author":{"gitId":"-"},"content":"                .registerTypeAdapter(LogDetails.class, new LogDetailsAdapter())"},{"lineNumber":67,"author":{"gitId":"-"},"content":"                .disableHtmlEscaping();"},{"lineNumber":68,"author":{"gitId":"-"},"content":"        if (prettyPrint) {"},{"lineNumber":69,"author":{"gitId":"-"},"content":"            builder.setPrettyPrinting();"},{"lineNumber":70,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":71,"author":{"gitId":"-"},"content":"        return builder.create();"},{"lineNumber":72,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":73,"author":{"gitId":"-"},"content":""},{"lineNumber":74,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":75,"author":{"gitId":"-"},"content":"     * Serializes and pretty-prints the specified object into its equivalent JSON string."},{"lineNumber":76,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":77,"author":{"gitId":"-"},"content":"     * @see Gson#toJson(Object, Type)"},{"lineNumber":78,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":79,"author":{"gitId":"-"},"content":"    public static String toJson(Object src, Type typeOfSrc) {"},{"lineNumber":80,"author":{"gitId":"-"},"content":"        return getGsonInstance(true).toJson(src, typeOfSrc);"},{"lineNumber":81,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":82,"author":{"gitId":"-"},"content":""},{"lineNumber":83,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":84,"author":{"gitId":"-"},"content":"     * Serializes and pretty-prints the specified object into its equivalent JSON string."},{"lineNumber":85,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":86,"author":{"gitId":"-"},"content":"     * @see Gson#toJson(Object)"},{"lineNumber":87,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":88,"author":{"gitId":"-"},"content":"    public static String toJson(Object src) {"},{"lineNumber":89,"author":{"gitId":"-"},"content":"        return getGsonInstance(true).toJson(src);"},{"lineNumber":90,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":91,"author":{"gitId":"-"},"content":""},{"lineNumber":92,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":93,"author":{"gitId":"-"},"content":"     * Serializes the specified object into its equivalent JSON string."},{"lineNumber":94,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":95,"author":{"gitId":"-"},"content":"     * @see Gson#toJson(Object)"},{"lineNumber":96,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":97,"author":{"gitId":"-"},"content":"    public static String toCompactJson(Object src) {"},{"lineNumber":98,"author":{"gitId":"-"},"content":"        return getGsonInstance(false).toJson(src);"},{"lineNumber":99,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":100,"author":{"gitId":"-"},"content":""},{"lineNumber":101,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":102,"author":{"gitId":"-"},"content":"     * Serializes the specified object into its equivalent JSON string and stream into a writer."},{"lineNumber":103,"author":{"gitId":"-"},"content":"     * This is done to reduce the memory consumption when creating object across call stack."},{"lineNumber":104,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":105,"author":{"gitId":"-"},"content":"     * @see Gson#toJson(Object, Appendable)"},{"lineNumber":106,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":107,"author":{"gitId":"-"},"content":"    public static void toCompactJson(Object src, Appendable writer) {"},{"lineNumber":108,"author":{"gitId":"-"},"content":"        getGsonInstance(false).toJson(src, writer);"},{"lineNumber":109,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":110,"author":{"gitId":"-"},"content":""},{"lineNumber":111,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":112,"author":{"gitId":"-"},"content":"     * Deserializes the specified JSON string into an object of the specified type."},{"lineNumber":113,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":114,"author":{"gitId":"-"},"content":"     * @see Gson#fromJson(String, Type)"},{"lineNumber":115,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":116,"author":{"gitId":"-"},"content":"    public static \u003cT\u003e T fromJson(String json, Type typeOfT) {"},{"lineNumber":117,"author":{"gitId":"-"},"content":"        return getGsonInstance(false).fromJson(json, typeOfT);"},{"lineNumber":118,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":119,"author":{"gitId":"-"},"content":""},{"lineNumber":120,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":121,"author":{"gitId":"-"},"content":"     * Deserializes the specified JSON string into an object of the specified class."},{"lineNumber":122,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":123,"author":{"gitId":"-"},"content":"     * @see Gson#fromJson(String, Class)"},{"lineNumber":124,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":125,"author":{"gitId":"-"},"content":"    public static \u003cT\u003e T fromJson(String json, Class\u003cT\u003e classOfT) {"},{"lineNumber":126,"author":{"gitId":"-"},"content":"        return getGsonInstance(false).fromJson(json, classOfT);"},{"lineNumber":127,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":128,"author":{"gitId":"-"},"content":""},{"lineNumber":129,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":130,"author":{"gitId":"-"},"content":"     * Parses the specified JSON string into a {@link JsonElement} object."},{"lineNumber":131,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":132,"author":{"gitId":"-"},"content":"     * @see JsonParser#parseString(String)"},{"lineNumber":133,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":134,"author":{"gitId":"-"},"content":"    public static JsonElement parse(String json) {"},{"lineNumber":135,"author":{"gitId":"-"},"content":"        return JsonParser.parseString(json);"},{"lineNumber":136,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":137,"author":{"gitId":"-"},"content":""},{"lineNumber":138,"author":{"gitId":"-"},"content":"    private static class HibernateExclusionStrategy implements ExclusionStrategy {"},{"lineNumber":139,"author":{"gitId":"-"},"content":""},{"lineNumber":140,"author":{"gitId":"-"},"content":"        @Override"},{"lineNumber":141,"author":{"gitId":"-"},"content":"        public boolean shouldSkipField(FieldAttributes f) {"},{"lineNumber":142,"author":{"gitId":"-"},"content":"            // Exclude certain fields to avoid circular references when serializing hibernate entities"},{"lineNumber":143,"author":{"gitId":"-"},"content":"            return f.getAnnotation(OneToMany.class) !\u003d null;"},{"lineNumber":144,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":145,"author":{"gitId":"-"},"content":""},{"lineNumber":146,"author":{"gitId":"-"},"content":"        @Override"},{"lineNumber":147,"author":{"gitId":"-"},"content":"        public boolean shouldSkipClass(Class\u003c?\u003e clazz) {"},{"lineNumber":148,"author":{"gitId":"-"},"content":"            return false;"},{"lineNumber":149,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":150,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":151,"author":{"gitId":"-"},"content":""},{"lineNumber":152,"author":{"gitId":"-"},"content":"    private static class UserAdapter implements JsonSerializer\u003cUser\u003e, JsonDeserializer\u003cUser\u003e {"},{"lineNumber":153,"author":{"gitId":"-"},"content":""},{"lineNumber":154,"author":{"gitId":"-"},"content":"        @Override"},{"lineNumber":155,"author":{"gitId":"-"},"content":"        public JsonElement serialize(User user, Type type, JsonSerializationContext context) {"},{"lineNumber":156,"author":{"gitId":"-"},"content":"            if (user instanceof Instructor) {"},{"lineNumber":157,"author":{"gitId":"-"},"content":"                JsonObject element \u003d (JsonObject) context.serialize(user, Instructor.class);"},{"lineNumber":158,"author":{"gitId":"-"},"content":"                element.addProperty(\"type\", \"instructor\");"},{"lineNumber":159,"author":{"gitId":"-"},"content":"                return element;"},{"lineNumber":160,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":161,"author":{"gitId":"-"},"content":""},{"lineNumber":162,"author":{"gitId":"-"},"content":"            // User is a Student"},{"lineNumber":163,"author":{"gitId":"-"},"content":"            JsonObject element \u003d (JsonObject) context.serialize(user, Student.class);"},{"lineNumber":164,"author":{"gitId":"-"},"content":"            element.addProperty(\"type\", \"student\");"},{"lineNumber":165,"author":{"gitId":"-"},"content":"            return element;"},{"lineNumber":166,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":167,"author":{"gitId":"-"},"content":""},{"lineNumber":168,"author":{"gitId":"-"},"content":"        @Override"},{"lineNumber":169,"author":{"gitId":"-"},"content":"        public User deserialize(JsonElement element, Type type, JsonDeserializationContext context) {"},{"lineNumber":170,"author":{"gitId":"-"},"content":"            JsonObject obj \u003d (JsonObject) element;"},{"lineNumber":171,"author":{"gitId":"-"},"content":""},{"lineNumber":172,"author":{"gitId":"-"},"content":"            if (\"instructor\".equals(obj.get(\"type\").getAsString())) {"},{"lineNumber":173,"author":{"gitId":"-"},"content":"                return context.deserialize(element, Instructor.class);"},{"lineNumber":174,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":175,"author":{"gitId":"-"},"content":""},{"lineNumber":176,"author":{"gitId":"-"},"content":"            // User is student"},{"lineNumber":177,"author":{"gitId":"-"},"content":"            return context.deserialize(obj, Student.class);"},{"lineNumber":178,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":179,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":180,"author":{"gitId":"-"},"content":""},{"lineNumber":181,"author":{"gitId":"-"},"content":"    private static class InstantAdapter implements JsonSerializer\u003cInstant\u003e, JsonDeserializer\u003cInstant\u003e {"},{"lineNumber":182,"author":{"gitId":"-"},"content":""},{"lineNumber":183,"author":{"gitId":"-"},"content":"        @Override"},{"lineNumber":184,"author":{"gitId":"-"},"content":"        public JsonElement serialize(Instant instant, Type type, JsonSerializationContext context) {"},{"lineNumber":185,"author":{"gitId":"-"},"content":"            synchronized (this) {"},{"lineNumber":186,"author":{"gitId":"-"},"content":"                return new JsonPrimitive(DateTimeFormatter.ISO_INSTANT.format(instant));"},{"lineNumber":187,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":188,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":189,"author":{"gitId":"-"},"content":""},{"lineNumber":190,"author":{"gitId":"-"},"content":"        @Override"},{"lineNumber":191,"author":{"gitId":"-"},"content":"        public Instant deserialize(JsonElement element, Type type, JsonDeserializationContext context) {"},{"lineNumber":192,"author":{"gitId":"-"},"content":"            synchronized (this) {"},{"lineNumber":193,"author":{"gitId":"-"},"content":"                return Instant.parse(element.getAsString());"},{"lineNumber":194,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":195,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":196,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":197,"author":{"gitId":"-"},"content":""},{"lineNumber":198,"author":{"gitId":"-"},"content":"    private static class ZoneIdAdapter implements JsonSerializer\u003cZoneId\u003e, JsonDeserializer\u003cZoneId\u003e {"},{"lineNumber":199,"author":{"gitId":"-"},"content":""},{"lineNumber":200,"author":{"gitId":"-"},"content":"        @Override"},{"lineNumber":201,"author":{"gitId":"-"},"content":"        public JsonElement serialize(ZoneId zoneId, Type type, JsonSerializationContext context) {"},{"lineNumber":202,"author":{"gitId":"-"},"content":"            synchronized (this) {"},{"lineNumber":203,"author":{"gitId":"-"},"content":"                return new JsonPrimitive(zoneId.getId());"},{"lineNumber":204,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":205,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":206,"author":{"gitId":"-"},"content":""},{"lineNumber":207,"author":{"gitId":"-"},"content":"        @Override"},{"lineNumber":208,"author":{"gitId":"-"},"content":"        public ZoneId deserialize(JsonElement element, Type type, JsonDeserializationContext context) {"},{"lineNumber":209,"author":{"gitId":"-"},"content":"            synchronized (this) {"},{"lineNumber":210,"author":{"gitId":"-"},"content":"                return ZoneId.of(element.getAsString());"},{"lineNumber":211,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":212,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":213,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":214,"author":{"gitId":"-"},"content":""},{"lineNumber":215,"author":{"gitId":"-"},"content":"    private static class DurationMinutesAdapter implements JsonSerializer\u003cDuration\u003e, JsonDeserializer\u003cDuration\u003e {"},{"lineNumber":216,"author":{"gitId":"-"},"content":""},{"lineNumber":217,"author":{"gitId":"-"},"content":"        @Override"},{"lineNumber":218,"author":{"gitId":"-"},"content":"        public JsonElement serialize(Duration duration, Type type, JsonSerializationContext context) {"},{"lineNumber":219,"author":{"gitId":"-"},"content":"            synchronized (this) {"},{"lineNumber":220,"author":{"gitId":"-"},"content":"                return new JsonPrimitive(duration.toMinutes());"},{"lineNumber":221,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":222,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":223,"author":{"gitId":"-"},"content":""},{"lineNumber":224,"author":{"gitId":"-"},"content":"        @Override"},{"lineNumber":225,"author":{"gitId":"-"},"content":"        public Duration deserialize(JsonElement element, Type type, JsonDeserializationContext context) {"},{"lineNumber":226,"author":{"gitId":"-"},"content":"            synchronized (this) {"},{"lineNumber":227,"author":{"gitId":"-"},"content":"                return Duration.ofMinutes(element.getAsLong());"},{"lineNumber":228,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":229,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":230,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":231,"author":{"gitId":"-"},"content":""},{"lineNumber":232,"author":{"gitId":"-"},"content":"    private static class FeedbackResponseDetailsAdapter implements JsonSerializer\u003cFeedbackResponseDetails\u003e,"},{"lineNumber":233,"author":{"gitId":"-"},"content":"            JsonDeserializer\u003cFeedbackResponseDetails\u003e {"},{"lineNumber":234,"author":{"gitId":"-"},"content":""},{"lineNumber":235,"author":{"gitId":"-"},"content":"        @Override"},{"lineNumber":236,"author":{"gitId":"-"},"content":"        public JsonElement serialize(FeedbackResponseDetails src, Type typeOfSrc, JsonSerializationContext context) {"},{"lineNumber":237,"author":{"gitId":"-"},"content":"            return context.serialize(src, src.getQuestionType().getResponseDetailsClass());"},{"lineNumber":238,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":239,"author":{"gitId":"-"},"content":""},{"lineNumber":240,"author":{"gitId":"-"},"content":"        @Override"},{"lineNumber":241,"author":{"gitId":"-"},"content":"        public FeedbackResponseDetails deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context) {"},{"lineNumber":242,"author":{"gitId":"-"},"content":"            FeedbackQuestionType questionType \u003d"},{"lineNumber":243,"author":{"gitId":"-"},"content":"                    FeedbackQuestionType.valueOf(json.getAsJsonObject().get(\"questionType\").getAsString());"},{"lineNumber":244,"author":{"gitId":"-"},"content":"            return context.deserialize(json, questionType.getResponseDetailsClass());"},{"lineNumber":245,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":246,"author":{"gitId":"-"},"content":""},{"lineNumber":247,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":248,"author":{"gitId":"-"},"content":""},{"lineNumber":249,"author":{"gitId":"hhdqirui"},"content":"    private static class FeedbackQuestionAdapter implements JsonSerializer\u003cFeedbackQuestion\u003e,"},{"lineNumber":250,"author":{"gitId":"hhdqirui"},"content":"            JsonDeserializer\u003cFeedbackQuestion\u003e {"},{"lineNumber":251,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":252,"author":{"gitId":"hhdqirui"},"content":"        @Override"},{"lineNumber":253,"author":{"gitId":"hhdqirui"},"content":"        public JsonElement serialize(FeedbackQuestion src, Type typeOfSrc, JsonSerializationContext context) {"},{"lineNumber":254,"author":{"gitId":"hhdqirui"},"content":"            if (src instanceof FeedbackMcqQuestion) {"},{"lineNumber":255,"author":{"gitId":"hhdqirui"},"content":"                return context.serialize(src, FeedbackMcqQuestion.class);"},{"lineNumber":256,"author":{"gitId":"hhdqirui"},"content":"            } else if (src instanceof FeedbackMsqQuestion) {"},{"lineNumber":257,"author":{"gitId":"hhdqirui"},"content":"                return context.serialize(src, FeedbackMsqQuestion.class);"},{"lineNumber":258,"author":{"gitId":"hhdqirui"},"content":"            } else if (src instanceof FeedbackTextQuestion) {"},{"lineNumber":259,"author":{"gitId":"hhdqirui"},"content":"                return context.serialize(src, FeedbackTextQuestion.class);"},{"lineNumber":260,"author":{"gitId":"hhdqirui"},"content":"            } else if (src instanceof FeedbackNumericalScaleQuestion) {"},{"lineNumber":261,"author":{"gitId":"hhdqirui"},"content":"                return context.serialize(src, FeedbackNumericalScaleQuestion.class);"},{"lineNumber":262,"author":{"gitId":"hhdqirui"},"content":"            } else if (src instanceof FeedbackConstantSumQuestion) {"},{"lineNumber":263,"author":{"gitId":"hhdqirui"},"content":"                return context.serialize(src, FeedbackConstantSumQuestion.class);"},{"lineNumber":264,"author":{"gitId":"hhdqirui"},"content":"            } else if (src instanceof FeedbackContributionQuestion) {"},{"lineNumber":265,"author":{"gitId":"hhdqirui"},"content":"                return context.serialize(src, FeedbackContributionQuestion.class);"},{"lineNumber":266,"author":{"gitId":"hhdqirui"},"content":"            } else if (src instanceof FeedbackRubricQuestion) {"},{"lineNumber":267,"author":{"gitId":"hhdqirui"},"content":"                return context.serialize(src, FeedbackRubricQuestion.class);"},{"lineNumber":268,"author":{"gitId":"hhdqirui"},"content":"            } else if (src instanceof FeedbackRankOptionsQuestion) {"},{"lineNumber":269,"author":{"gitId":"hhdqirui"},"content":"                return context.serialize(src, FeedbackRankOptionsQuestion.class);"},{"lineNumber":270,"author":{"gitId":"hhdqirui"},"content":"            } else if (src instanceof FeedbackRankRecipientsQuestion) {"},{"lineNumber":271,"author":{"gitId":"hhdqirui"},"content":"                return context.serialize(src, FeedbackRankRecipientsQuestion.class);"},{"lineNumber":272,"author":{"gitId":"hhdqirui"},"content":"            }"},{"lineNumber":273,"author":{"gitId":"hhdqirui"},"content":"            return null;"},{"lineNumber":274,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":275,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":276,"author":{"gitId":"hhdqirui"},"content":"        @Override"},{"lineNumber":277,"author":{"gitId":"hhdqirui"},"content":"        public FeedbackQuestion deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context) {"},{"lineNumber":278,"author":{"gitId":"hhdqirui"},"content":"            FeedbackQuestionType questionType \u003d"},{"lineNumber":279,"author":{"gitId":"hhdqirui"},"content":"                    FeedbackQuestionType.valueOf(json.getAsJsonObject().get(\"questionDetails\")"},{"lineNumber":280,"author":{"gitId":"hhdqirui"},"content":"                            .getAsJsonObject().get(\"questionType\").getAsString());"},{"lineNumber":281,"author":{"gitId":"hhdqirui"},"content":"            switch (questionType) {"},{"lineNumber":282,"author":{"gitId":"hhdqirui"},"content":"            case MCQ:"},{"lineNumber":283,"author":{"gitId":"hhdqirui"},"content":"                return context.deserialize(json, FeedbackMcqQuestion.class);"},{"lineNumber":284,"author":{"gitId":"hhdqirui"},"content":"            case MSQ:"},{"lineNumber":285,"author":{"gitId":"hhdqirui"},"content":"                return context.deserialize(json, FeedbackMsqQuestion.class);"},{"lineNumber":286,"author":{"gitId":"hhdqirui"},"content":"            case TEXT:"},{"lineNumber":287,"author":{"gitId":"hhdqirui"},"content":"                return context.deserialize(json, FeedbackTextQuestion.class);"},{"lineNumber":288,"author":{"gitId":"hhdqirui"},"content":"            case RUBRIC:"},{"lineNumber":289,"author":{"gitId":"hhdqirui"},"content":"                return context.deserialize(json, FeedbackRubricQuestion.class);"},{"lineNumber":290,"author":{"gitId":"hhdqirui"},"content":"            case CONTRIB:"},{"lineNumber":291,"author":{"gitId":"hhdqirui"},"content":"                return context.deserialize(json, FeedbackContributionQuestion.class);"},{"lineNumber":292,"author":{"gitId":"hhdqirui"},"content":"            case CONSTSUM:"},{"lineNumber":293,"author":{"gitId":"hhdqirui"},"content":"            case CONSTSUM_RECIPIENTS:"},{"lineNumber":294,"author":{"gitId":"hhdqirui"},"content":"            case CONSTSUM_OPTIONS:"},{"lineNumber":295,"author":{"gitId":"hhdqirui"},"content":"                return context.deserialize(json, FeedbackConstantSumQuestion.class);"},{"lineNumber":296,"author":{"gitId":"hhdqirui"},"content":"            case NUMSCALE:"},{"lineNumber":297,"author":{"gitId":"hhdqirui"},"content":"                return context.deserialize(json, FeedbackNumericalScaleQuestion.class);"},{"lineNumber":298,"author":{"gitId":"hhdqirui"},"content":"            case RANK_OPTIONS:"},{"lineNumber":299,"author":{"gitId":"hhdqirui"},"content":"                return context.deserialize(json, FeedbackRankOptionsQuestion.class);"},{"lineNumber":300,"author":{"gitId":"hhdqirui"},"content":"            case RANK_RECIPIENTS:"},{"lineNumber":301,"author":{"gitId":"hhdqirui"},"content":"                return context.deserialize(json, FeedbackRankRecipientsQuestion.class);"},{"lineNumber":302,"author":{"gitId":"hhdqirui"},"content":"            default:"},{"lineNumber":303,"author":{"gitId":"hhdqirui"},"content":"                return null;"},{"lineNumber":304,"author":{"gitId":"hhdqirui"},"content":"            }"},{"lineNumber":305,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":306,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":307,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":308,"author":{"gitId":"-"},"content":"    private static class FeedbackQuestionDetailsAdapter implements JsonSerializer\u003cFeedbackQuestionDetails\u003e,"},{"lineNumber":309,"author":{"gitId":"-"},"content":"            JsonDeserializer\u003cFeedbackQuestionDetails\u003e {"},{"lineNumber":310,"author":{"gitId":"-"},"content":""},{"lineNumber":311,"author":{"gitId":"-"},"content":"        @Override"},{"lineNumber":312,"author":{"gitId":"-"},"content":"        public JsonElement serialize(FeedbackQuestionDetails src, Type typeOfSrc, JsonSerializationContext context) {"},{"lineNumber":313,"author":{"gitId":"-"},"content":"            return context.serialize(src, src.getQuestionType().getQuestionDetailsClass());"},{"lineNumber":314,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":315,"author":{"gitId":"-"},"content":""},{"lineNumber":316,"author":{"gitId":"-"},"content":"        @Override"},{"lineNumber":317,"author":{"gitId":"-"},"content":"        public FeedbackQuestionDetails deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context) {"},{"lineNumber":318,"author":{"gitId":"-"},"content":"            FeedbackQuestionType questionType \u003d"},{"lineNumber":319,"author":{"gitId":"-"},"content":"                    FeedbackQuestionType.valueOf(json.getAsJsonObject().get(\"questionType\").getAsString());"},{"lineNumber":320,"author":{"gitId":"-"},"content":"            return context.deserialize(json, questionType.getQuestionDetailsClass());"},{"lineNumber":321,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":322,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":323,"author":{"gitId":"-"},"content":""},{"lineNumber":324,"author":{"gitId":"-"},"content":"    private static class LogDetailsAdapter implements JsonSerializer\u003cLogDetails\u003e, JsonDeserializer\u003cLogDetails\u003e {"},{"lineNumber":325,"author":{"gitId":"-"},"content":""},{"lineNumber":326,"author":{"gitId":"-"},"content":"        @Override"},{"lineNumber":327,"author":{"gitId":"-"},"content":"        public JsonElement serialize(LogDetails src, Type typeOfSrc, JsonSerializationContext context) {"},{"lineNumber":328,"author":{"gitId":"-"},"content":"            return context.serialize(src, src.getEvent().getDetailsClass());"},{"lineNumber":329,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":330,"author":{"gitId":"-"},"content":""},{"lineNumber":331,"author":{"gitId":"-"},"content":"        @Override"},{"lineNumber":332,"author":{"gitId":"-"},"content":"        public LogDetails deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context) {"},{"lineNumber":333,"author":{"gitId":"-"},"content":"            LogEvent event;"},{"lineNumber":334,"author":{"gitId":"-"},"content":"            if (json.getAsJsonObject().has(\"event\")) {"},{"lineNumber":335,"author":{"gitId":"-"},"content":"                try {"},{"lineNumber":336,"author":{"gitId":"-"},"content":"                    event \u003d LogEvent.valueOf(json.getAsJsonObject().get(\"event\").getAsString());"},{"lineNumber":337,"author":{"gitId":"-"},"content":"                } catch (IllegalArgumentException e) {"},{"lineNumber":338,"author":{"gitId":"-"},"content":"                    event \u003d LogEvent.DEFAULT_LOG;"},{"lineNumber":339,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":340,"author":{"gitId":"-"},"content":"            } else {"},{"lineNumber":341,"author":{"gitId":"-"},"content":"                event \u003d LogEvent.DEFAULT_LOG;"},{"lineNumber":342,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":343,"author":{"gitId":"-"},"content":"            return context.deserialize(json, event.getDetailsClass());"},{"lineNumber":344,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":345,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":346,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"hhdqirui":70,"-":276}},{"path":"src/main/java/teammates/logic/core/FeedbackResponsesLogic.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.logic.core;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.time.Instant;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.util.ArrayList;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.util.Collection;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import java.util.Collections;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import java.util.HashMap;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import java.util.HashSet;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import java.util.Map;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import java.util.Set;"},{"lineNumber":12,"author":{"gitId":"-"},"content":""},{"lineNumber":13,"author":{"gitId":"-"},"content":"import javax.annotation.Nullable;"},{"lineNumber":14,"author":{"gitId":"-"},"content":""},{"lineNumber":15,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.AttributesDeletionQuery;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.CourseRoster;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.FeedbackParticipantType;"},{"lineNumber":18,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.FeedbackResultFetchType;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.SessionResultsBundle;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;"},{"lineNumber":21,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackResponseAttributes;"},{"lineNumber":22,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackResponseCommentAttributes;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.InstructorAttributes;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.StudentAttributes;"},{"lineNumber":25,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackQuestionType;"},{"lineNumber":26,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackRankRecipientsResponseDetails;"},{"lineNumber":27,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackTextResponseDetails;"},{"lineNumber":28,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":29,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":30,"author":{"gitId":"-"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":31,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":32,"author":{"gitId":"-"},"content":"import teammates.common.util.RequestTracer;"},{"lineNumber":33,"author":{"gitId":"-"},"content":"import teammates.storage.api.FeedbackResponsesDb;"},{"lineNumber":34,"author":{"gitId":"-"},"content":""},{"lineNumber":35,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":36,"author":{"gitId":"-"},"content":" * Handles operations related to feedback responses."},{"lineNumber":37,"author":{"gitId":"-"},"content":" *"},{"lineNumber":38,"author":{"gitId":"-"},"content":" * @see FeedbackResponseAttributes"},{"lineNumber":39,"author":{"gitId":"-"},"content":" * @see FeedbackResponsesDb"},{"lineNumber":40,"author":{"gitId":"-"},"content":" */"},{"lineNumber":41,"author":{"gitId":"-"},"content":"public final class FeedbackResponsesLogic {"},{"lineNumber":42,"author":{"gitId":"-"},"content":""},{"lineNumber":43,"author":{"gitId":"-"},"content":"    private static final FeedbackResponsesLogic instance \u003d new FeedbackResponsesLogic();"},{"lineNumber":44,"author":{"gitId":"-"},"content":""},{"lineNumber":45,"author":{"gitId":"-"},"content":"    private final FeedbackResponsesDb frDb \u003d FeedbackResponsesDb.inst();"},{"lineNumber":46,"author":{"gitId":"-"},"content":""},{"lineNumber":47,"author":{"gitId":"-"},"content":"    private FeedbackQuestionsLogic fqLogic;"},{"lineNumber":48,"author":{"gitId":"-"},"content":"    private FeedbackResponseCommentsLogic frcLogic;"},{"lineNumber":49,"author":{"gitId":"-"},"content":"    private InstructorsLogic instructorsLogic;"},{"lineNumber":50,"author":{"gitId":"-"},"content":"    private StudentsLogic studentsLogic;"},{"lineNumber":51,"author":{"gitId":"-"},"content":""},{"lineNumber":52,"author":{"gitId":"-"},"content":"    private FeedbackResponsesLogic() {"},{"lineNumber":53,"author":{"gitId":"-"},"content":"        // prevent initialization"},{"lineNumber":54,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":55,"author":{"gitId":"-"},"content":""},{"lineNumber":56,"author":{"gitId":"-"},"content":"    public static FeedbackResponsesLogic inst() {"},{"lineNumber":57,"author":{"gitId":"-"},"content":"        return instance;"},{"lineNumber":58,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":59,"author":{"gitId":"-"},"content":""},{"lineNumber":60,"author":{"gitId":"-"},"content":"    void initLogicDependencies() {"},{"lineNumber":61,"author":{"gitId":"-"},"content":"        fqLogic \u003d FeedbackQuestionsLogic.inst();"},{"lineNumber":62,"author":{"gitId":"-"},"content":"        frcLogic \u003d FeedbackResponseCommentsLogic.inst();"},{"lineNumber":63,"author":{"gitId":"-"},"content":"        instructorsLogic \u003d InstructorsLogic.inst();"},{"lineNumber":64,"author":{"gitId":"-"},"content":"        studentsLogic \u003d StudentsLogic.inst();"},{"lineNumber":65,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":66,"author":{"gitId":"-"},"content":""},{"lineNumber":67,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":68,"author":{"gitId":"-"},"content":"     * Gets a set of giver identifiers that has at least one response under a feedback session."},{"lineNumber":69,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":70,"author":{"gitId":"-"},"content":"    public Set\u003cString\u003e getGiverSetThatAnswerFeedbackSession(String courseId, String feedbackSessionName) {"},{"lineNumber":71,"author":{"gitId":"-"},"content":"        return frDb.getGiverSetThatAnswerFeedbackSession(courseId, feedbackSessionName);"},{"lineNumber":72,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":73,"author":{"gitId":"-"},"content":""},{"lineNumber":74,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":75,"author":{"gitId":"-"},"content":"     * Creates a feedback response."},{"lineNumber":76,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":77,"author":{"gitId":"-"},"content":"     * @return created feedback response"},{"lineNumber":78,"author":{"gitId":"-"},"content":"     * @throws InvalidParametersException if the response is not valid"},{"lineNumber":79,"author":{"gitId":"-"},"content":"     * @throws EntityAlreadyExistsException if the response already exist"},{"lineNumber":80,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":81,"author":{"gitId":"-"},"content":"    public FeedbackResponseAttributes createFeedbackResponse(FeedbackResponseAttributes fra)"},{"lineNumber":82,"author":{"gitId":"-"},"content":"            throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":83,"author":{"gitId":"-"},"content":"        return frDb.createEntity(fra);"},{"lineNumber":84,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":85,"author":{"gitId":"-"},"content":""},{"lineNumber":86,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":87,"author":{"gitId":"-"},"content":"     * Gets a feedback response by its ID."},{"lineNumber":88,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":89,"author":{"gitId":"-"},"content":"    public FeedbackResponseAttributes getFeedbackResponse("},{"lineNumber":90,"author":{"gitId":"-"},"content":"            String feedbackResponseId) {"},{"lineNumber":91,"author":{"gitId":"-"},"content":"        return frDb.getFeedbackResponse(feedbackResponseId);"},{"lineNumber":92,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":93,"author":{"gitId":"-"},"content":""},{"lineNumber":94,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":95,"author":{"gitId":"-"},"content":"     * Gets a feedback response by its unique key."},{"lineNumber":96,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":97,"author":{"gitId":"-"},"content":"    public FeedbackResponseAttributes getFeedbackResponse("},{"lineNumber":98,"author":{"gitId":"-"},"content":"            String feedbackQuestionId, String giverEmail, String recipient) {"},{"lineNumber":99,"author":{"gitId":"-"},"content":"        return frDb.getFeedbackResponse(feedbackQuestionId, giverEmail, recipient);"},{"lineNumber":100,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":101,"author":{"gitId":"-"},"content":""},{"lineNumber":102,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":103,"author":{"gitId":"-"},"content":"     * Gets all responses for a session."},{"lineNumber":104,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":105,"author":{"gitId":"-"},"content":"    List\u003cFeedbackResponseAttributes\u003e getFeedbackResponsesForSession("},{"lineNumber":106,"author":{"gitId":"-"},"content":"            String feedbackSessionName, String courseId) {"},{"lineNumber":107,"author":{"gitId":"-"},"content":"        return frDb.getFeedbackResponsesForSession(feedbackSessionName, courseId);"},{"lineNumber":108,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":109,"author":{"gitId":"-"},"content":""},{"lineNumber":110,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":111,"author":{"gitId":"-"},"content":"     * Gets all responses given to/from a section in a feedback session in a course."},{"lineNumber":112,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":113,"author":{"gitId":"-"},"content":"     * @param feedbackSessionName the name if the session"},{"lineNumber":114,"author":{"gitId":"-"},"content":"     * @param courseId the course ID of the session"},{"lineNumber":115,"author":{"gitId":"-"},"content":"     * @param section if null, will retrieve all responses in the session"},{"lineNumber":116,"author":{"gitId":"-"},"content":"     * @param fetchType if not null, will retrieve responses by giver, receiver sections, or both"},{"lineNumber":117,"author":{"gitId":"-"},"content":"     * @return a list of responses"},{"lineNumber":118,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":119,"author":{"gitId":"-"},"content":"    public List\u003cFeedbackResponseAttributes\u003e getFeedbackResponsesForSessionInSection("},{"lineNumber":120,"author":{"gitId":"-"},"content":"            String feedbackSessionName, String courseId, @Nullable String section,"},{"lineNumber":121,"author":{"gitId":"-"},"content":"            @Nullable FeedbackResultFetchType fetchType) {"},{"lineNumber":122,"author":{"gitId":"-"},"content":"        if (section \u003d\u003d null) {"},{"lineNumber":123,"author":{"gitId":"-"},"content":"            return getFeedbackResponsesForSession(feedbackSessionName, courseId);"},{"lineNumber":124,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":125,"author":{"gitId":"-"},"content":"        return frDb.getFeedbackResponsesForSessionInSection(feedbackSessionName, courseId, section, fetchType);"},{"lineNumber":126,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":127,"author":{"gitId":"-"},"content":""},{"lineNumber":128,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":129,"author":{"gitId":"-"},"content":"     * Gets all responses for a question."},{"lineNumber":130,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":131,"author":{"gitId":"-"},"content":"    public List\u003cFeedbackResponseAttributes\u003e getFeedbackResponsesForQuestion(String feedbackQuestionId) {"},{"lineNumber":132,"author":{"gitId":"-"},"content":"        return frDb.getFeedbackResponsesForQuestion(feedbackQuestionId);"},{"lineNumber":133,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":134,"author":{"gitId":"-"},"content":""},{"lineNumber":135,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":136,"author":{"gitId":"-"},"content":"     * Checks whether there are responses for a question."},{"lineNumber":137,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":138,"author":{"gitId":"-"},"content":"    public boolean areThereResponsesForQuestion(String feedbackQuestionId) {"},{"lineNumber":139,"author":{"gitId":"-"},"content":"        return frDb.areThereResponsesForQuestion(feedbackQuestionId);"},{"lineNumber":140,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":141,"author":{"gitId":"-"},"content":""},{"lineNumber":142,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":143,"author":{"gitId":"-"},"content":"     * Gets all responses given to/from a section for a question."},{"lineNumber":144,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":145,"author":{"gitId":"-"},"content":"     * @param feedbackQuestionId the ID of the question"},{"lineNumber":146,"author":{"gitId":"-"},"content":"     * @param section if null, will retrieve all responses for the question"},{"lineNumber":147,"author":{"gitId":"-"},"content":"     * @return a list of responses"},{"lineNumber":148,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":149,"author":{"gitId":"-"},"content":"    public List\u003cFeedbackResponseAttributes\u003e getFeedbackResponsesForQuestionInSection("},{"lineNumber":150,"author":{"gitId":"-"},"content":"            String feedbackQuestionId, @Nullable String section, FeedbackResultFetchType fetchType) {"},{"lineNumber":151,"author":{"gitId":"-"},"content":"        if (section \u003d\u003d null) {"},{"lineNumber":152,"author":{"gitId":"-"},"content":"            return getFeedbackResponsesForQuestion(feedbackQuestionId);"},{"lineNumber":153,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":154,"author":{"gitId":"-"},"content":"        return frDb.getFeedbackResponsesForQuestionInSection(feedbackQuestionId, section, fetchType);"},{"lineNumber":155,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":156,"author":{"gitId":"-"},"content":""},{"lineNumber":157,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":158,"author":{"gitId":"-"},"content":"     * Gets all responses given by a user for a question."},{"lineNumber":159,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":160,"author":{"gitId":"-"},"content":"    public List\u003cFeedbackResponseAttributes\u003e getFeedbackResponsesFromGiverForQuestion("},{"lineNumber":161,"author":{"gitId":"-"},"content":"            String feedbackQuestionId, String userEmail) {"},{"lineNumber":162,"author":{"gitId":"-"},"content":"        return frDb.getFeedbackResponsesFromGiverForQuestion(feedbackQuestionId, userEmail);"},{"lineNumber":163,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":164,"author":{"gitId":"-"},"content":""},{"lineNumber":165,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":166,"author":{"gitId":"-"},"content":"     * Gets all responses received by a user for a question."},{"lineNumber":167,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":168,"author":{"gitId":"-"},"content":"    private List\u003cFeedbackResponseAttributes\u003e getFeedbackResponsesForReceiverForQuestion("},{"lineNumber":169,"author":{"gitId":"-"},"content":"            String feedbackQuestionId, String userEmail) {"},{"lineNumber":170,"author":{"gitId":"-"},"content":"        return frDb.getFeedbackResponsesForReceiverForQuestion(feedbackQuestionId, userEmail);"},{"lineNumber":171,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":172,"author":{"gitId":"-"},"content":""},{"lineNumber":173,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":174,"author":{"gitId":"-"},"content":"     * Checks whether a giver has responded a session."},{"lineNumber":175,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":176,"author":{"gitId":"-"},"content":"    public boolean hasGiverRespondedForSession(String giverIdentifier, String feedbackSessionName, String courseId) {"},{"lineNumber":177,"author":{"gitId":"-"},"content":""},{"lineNumber":178,"author":{"gitId":"-"},"content":"        return frDb.hasResponsesFromGiverInSession(giverIdentifier, feedbackSessionName, courseId);"},{"lineNumber":179,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":180,"author":{"gitId":"-"},"content":""},{"lineNumber":181,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":182,"author":{"gitId":"-"},"content":"     * Gets all responses received by an user for a course."},{"lineNumber":183,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":184,"author":{"gitId":"-"},"content":"    public List\u003cFeedbackResponseAttributes\u003e getFeedbackResponsesForReceiverForCourse("},{"lineNumber":185,"author":{"gitId":"-"},"content":"            String courseId, String userEmail) {"},{"lineNumber":186,"author":{"gitId":"-"},"content":"        return frDb.getFeedbackResponsesForReceiverForCourse(courseId, userEmail);"},{"lineNumber":187,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":188,"author":{"gitId":"-"},"content":""},{"lineNumber":189,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":190,"author":{"gitId":"-"},"content":"     * Gets all responses given by an user for a course."},{"lineNumber":191,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":192,"author":{"gitId":"-"},"content":"    public List\u003cFeedbackResponseAttributes\u003e getFeedbackResponsesFromGiverForCourse("},{"lineNumber":193,"author":{"gitId":"-"},"content":"            String courseId, String userEmail) {"},{"lineNumber":194,"author":{"gitId":"-"},"content":"        return frDb.getFeedbackResponsesFromGiverForCourse(courseId, userEmail);"},{"lineNumber":195,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":196,"author":{"gitId":"-"},"content":""},{"lineNumber":197,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":198,"author":{"gitId":"-"},"content":"     * Get existing feedback responses from student or his team for the given"},{"lineNumber":199,"author":{"gitId":"-"},"content":"     * question."},{"lineNumber":200,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":201,"author":{"gitId":"-"},"content":"    public List\u003cFeedbackResponseAttributes\u003e getFeedbackResponsesFromStudentOrTeamForQuestion("},{"lineNumber":202,"author":{"gitId":"-"},"content":"            FeedbackQuestionAttributes question, StudentAttributes student) {"},{"lineNumber":203,"author":{"gitId":"-"},"content":"        if (question.getGiverType() \u003d\u003d FeedbackParticipantType.TEAMS) {"},{"lineNumber":204,"author":{"gitId":"-"},"content":"            return getFeedbackResponsesFromTeamForQuestion("},{"lineNumber":205,"author":{"gitId":"-"},"content":"                    question.getId(), question.getCourseId(), student.getTeam(), null);"},{"lineNumber":206,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":207,"author":{"gitId":"-"},"content":"        return frDb.getFeedbackResponsesFromGiverForQuestion(question.getId(), student.getEmail());"},{"lineNumber":208,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":209,"author":{"gitId":"-"},"content":""},{"lineNumber":210,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":211,"author":{"gitId":"-"},"content":"     * Checks whether the giver name of a response is visible to an user."},{"lineNumber":212,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":213,"author":{"gitId":"-"},"content":"    public boolean isNameVisibleToUser("},{"lineNumber":214,"author":{"gitId":"-"},"content":"            FeedbackQuestionAttributes question,"},{"lineNumber":215,"author":{"gitId":"-"},"content":"            FeedbackResponseAttributes response,"},{"lineNumber":216,"author":{"gitId":"-"},"content":"            String userEmail,"},{"lineNumber":217,"author":{"gitId":"-"},"content":"            boolean isInstructor, boolean isGiverName, CourseRoster roster) {"},{"lineNumber":218,"author":{"gitId":"-"},"content":""},{"lineNumber":219,"author":{"gitId":"-"},"content":"        if (question \u003d\u003d null) {"},{"lineNumber":220,"author":{"gitId":"-"},"content":"            return false;"},{"lineNumber":221,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":222,"author":{"gitId":"-"},"content":""},{"lineNumber":223,"author":{"gitId":"-"},"content":"        // Early return if user is giver"},{"lineNumber":224,"author":{"gitId":"-"},"content":"        if (question.getGiverType() \u003d\u003d FeedbackParticipantType.TEAMS) {"},{"lineNumber":225,"author":{"gitId":"-"},"content":"            // if response is given by team, then anyone in the team can see the response"},{"lineNumber":226,"author":{"gitId":"-"},"content":"            if (roster.isStudentInTeam(userEmail, response.getGiver())) {"},{"lineNumber":227,"author":{"gitId":"-"},"content":"                return true;"},{"lineNumber":228,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":229,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":230,"author":{"gitId":"-"},"content":"            if (response.getGiver().equals(userEmail)) {"},{"lineNumber":231,"author":{"gitId":"-"},"content":"                return true;"},{"lineNumber":232,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":233,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":234,"author":{"gitId":"-"},"content":""},{"lineNumber":235,"author":{"gitId":"-"},"content":"        return isFeedbackParticipantNameVisibleToUser(question, response,"},{"lineNumber":236,"author":{"gitId":"-"},"content":"                userEmail, isInstructor, isGiverName, roster);"},{"lineNumber":237,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":238,"author":{"gitId":"-"},"content":""},{"lineNumber":239,"author":{"gitId":"-"},"content":"    private boolean isFeedbackParticipantNameVisibleToUser("},{"lineNumber":240,"author":{"gitId":"-"},"content":"            FeedbackQuestionAttributes question, FeedbackResponseAttributes response,"},{"lineNumber":241,"author":{"gitId":"-"},"content":"            String userEmail, boolean isInstructor, boolean isGiverName, CourseRoster roster) {"},{"lineNumber":242,"author":{"gitId":"-"},"content":"        List\u003cFeedbackParticipantType\u003e showNameTo \u003d isGiverName"},{"lineNumber":243,"author":{"gitId":"-"},"content":"                                                 ? question.getShowGiverNameTo()"},{"lineNumber":244,"author":{"gitId":"-"},"content":"                                                 : question.getShowRecipientNameTo();"},{"lineNumber":245,"author":{"gitId":"-"},"content":"        for (FeedbackParticipantType type : showNameTo) {"},{"lineNumber":246,"author":{"gitId":"-"},"content":"            switch (type) {"},{"lineNumber":247,"author":{"gitId":"-"},"content":"            case INSTRUCTORS:"},{"lineNumber":248,"author":{"gitId":"-"},"content":"                if (roster.getInstructorForEmail(userEmail) !\u003d null \u0026\u0026 isInstructor) {"},{"lineNumber":249,"author":{"gitId":"-"},"content":"                    return true;"},{"lineNumber":250,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":251,"author":{"gitId":"-"},"content":"                break;"},{"lineNumber":252,"author":{"gitId":"-"},"content":"            case OWN_TEAM_MEMBERS:"},{"lineNumber":253,"author":{"gitId":"-"},"content":"            case OWN_TEAM_MEMBERS_INCLUDING_SELF:"},{"lineNumber":254,"author":{"gitId":"-"},"content":"                // Refers to Giver\u0027s Team Members"},{"lineNumber":255,"author":{"gitId":"-"},"content":"                if (roster.isStudentsInSameTeam(response.getGiver(), userEmail)) {"},{"lineNumber":256,"author":{"gitId":"-"},"content":"                    return true;"},{"lineNumber":257,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":258,"author":{"gitId":"-"},"content":"                break;"},{"lineNumber":259,"author":{"gitId":"-"},"content":"            case RECEIVER:"},{"lineNumber":260,"author":{"gitId":"-"},"content":"                // Response to team"},{"lineNumber":261,"author":{"gitId":"-"},"content":"                if (question.getRecipientType().isTeam()) {"},{"lineNumber":262,"author":{"gitId":"-"},"content":"                    if (roster.isStudentInTeam(userEmail, response.getRecipient())) {"},{"lineNumber":263,"author":{"gitId":"-"},"content":"                        // this is a team name"},{"lineNumber":264,"author":{"gitId":"-"},"content":"                        return true;"},{"lineNumber":265,"author":{"gitId":"-"},"content":"                    }"},{"lineNumber":266,"author":{"gitId":"-"},"content":"                    break;"},{"lineNumber":267,"author":{"gitId":"-"},"content":"                    // Response to individual"},{"lineNumber":268,"author":{"gitId":"-"},"content":"                } else if (response.getRecipient().equals(userEmail)) {"},{"lineNumber":269,"author":{"gitId":"-"},"content":"                    return true;"},{"lineNumber":270,"author":{"gitId":"-"},"content":"                } else {"},{"lineNumber":271,"author":{"gitId":"-"},"content":"                    break;"},{"lineNumber":272,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":273,"author":{"gitId":"-"},"content":"            case RECEIVER_TEAM_MEMBERS:"},{"lineNumber":274,"author":{"gitId":"-"},"content":"                // Response to team; recipient \u003d teamName"},{"lineNumber":275,"author":{"gitId":"-"},"content":"                if (question.getRecipientType().isTeam()) {"},{"lineNumber":276,"author":{"gitId":"-"},"content":"                    if (roster.isStudentInTeam(userEmail, response.getRecipient())) {"},{"lineNumber":277,"author":{"gitId":"-"},"content":"                        // this is a team name"},{"lineNumber":278,"author":{"gitId":"-"},"content":"                        return true;"},{"lineNumber":279,"author":{"gitId":"-"},"content":"                    }"},{"lineNumber":280,"author":{"gitId":"-"},"content":"                    break;"},{"lineNumber":281,"author":{"gitId":"-"},"content":"                } else if (roster.isStudentsInSameTeam(response.getRecipient(), userEmail)) {"},{"lineNumber":282,"author":{"gitId":"-"},"content":"                    // Response to individual"},{"lineNumber":283,"author":{"gitId":"-"},"content":"                    return true;"},{"lineNumber":284,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":285,"author":{"gitId":"-"},"content":"                break;"},{"lineNumber":286,"author":{"gitId":"-"},"content":"            case STUDENTS:"},{"lineNumber":287,"author":{"gitId":"-"},"content":"                if (roster.isStudentInCourse(userEmail)) {"},{"lineNumber":288,"author":{"gitId":"-"},"content":"                    return true;"},{"lineNumber":289,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":290,"author":{"gitId":"-"},"content":"                break;"},{"lineNumber":291,"author":{"gitId":"-"},"content":"            default:"},{"lineNumber":292,"author":{"gitId":"-"},"content":"                assert false : \"Invalid FeedbackParticipantType for showNameTo in \""},{"lineNumber":293,"author":{"gitId":"-"},"content":"                        + \"FeedbackResponseLogic.isFeedbackParticipantNameVisibleToUser()\";"},{"lineNumber":294,"author":{"gitId":"-"},"content":"                break;"},{"lineNumber":295,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":296,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":297,"author":{"gitId":"-"},"content":"        return false;"},{"lineNumber":298,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":299,"author":{"gitId":"-"},"content":""},{"lineNumber":300,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":301,"author":{"gitId":"-"},"content":"     * Returns true if the responses of the question are visible to students."},{"lineNumber":302,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":303,"author":{"gitId":"-"},"content":"    public boolean isResponseOfFeedbackQuestionVisibleToStudent(FeedbackQuestionAttributes question) {"},{"lineNumber":304,"author":{"gitId":"-"},"content":"        if (question.isResponseVisibleTo(FeedbackParticipantType.STUDENTS)) {"},{"lineNumber":305,"author":{"gitId":"-"},"content":"            return true;"},{"lineNumber":306,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":307,"author":{"gitId":"-"},"content":"        boolean isStudentRecipientType \u003d"},{"lineNumber":308,"author":{"gitId":"-"},"content":"                   question.getRecipientType().equals(FeedbackParticipantType.STUDENTS)"},{"lineNumber":309,"author":{"gitId":"-"},"content":"                || question.getRecipientType().equals(FeedbackParticipantType.STUDENTS_EXCLUDING_SELF)"},{"lineNumber":310,"author":{"gitId":"-"},"content":"                || question.getRecipientType().equals(FeedbackParticipantType.STUDENTS_IN_SAME_SECTION)"},{"lineNumber":311,"author":{"gitId":"-"},"content":"                || question.getRecipientType().equals(FeedbackParticipantType.OWN_TEAM_MEMBERS)"},{"lineNumber":312,"author":{"gitId":"-"},"content":"                || question.getRecipientType().equals(FeedbackParticipantType.OWN_TEAM_MEMBERS_INCLUDING_SELF)"},{"lineNumber":313,"author":{"gitId":"-"},"content":"                || question.getRecipientType().equals(FeedbackParticipantType.GIVER)"},{"lineNumber":314,"author":{"gitId":"-"},"content":"                   \u0026\u0026 question.getGiverType().equals(FeedbackParticipantType.STUDENTS);"},{"lineNumber":315,"author":{"gitId":"-"},"content":""},{"lineNumber":316,"author":{"gitId":"-"},"content":"        if ((isStudentRecipientType || question.getRecipientType().isTeam())"},{"lineNumber":317,"author":{"gitId":"-"},"content":"                \u0026\u0026 question.isResponseVisibleTo(FeedbackParticipantType.RECEIVER)) {"},{"lineNumber":318,"author":{"gitId":"-"},"content":"            return true;"},{"lineNumber":319,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":320,"author":{"gitId":"-"},"content":"        if (question.getGiverType() \u003d\u003d FeedbackParticipantType.TEAMS"},{"lineNumber":321,"author":{"gitId":"-"},"content":"                || question.isResponseVisibleTo(FeedbackParticipantType.OWN_TEAM_MEMBERS)) {"},{"lineNumber":322,"author":{"gitId":"-"},"content":"            return true;"},{"lineNumber":323,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":324,"author":{"gitId":"-"},"content":"        return question.isResponseVisibleTo(FeedbackParticipantType.RECEIVER_TEAM_MEMBERS);"},{"lineNumber":325,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":326,"author":{"gitId":"-"},"content":""},{"lineNumber":327,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":328,"author":{"gitId":"-"},"content":"     * Returns true if the responses of the question are visible to instructors."},{"lineNumber":329,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":330,"author":{"gitId":"-"},"content":"    public boolean isResponseOfFeedbackQuestionVisibleToInstructor(FeedbackQuestionAttributes question) {"},{"lineNumber":331,"author":{"gitId":"-"},"content":"        return question.isResponseVisibleTo(FeedbackParticipantType.INSTRUCTORS);"},{"lineNumber":332,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":333,"author":{"gitId":"-"},"content":""},{"lineNumber":334,"author":{"gitId":"-"},"content":"    private List\u003cFeedbackQuestionAttributes\u003e getQuestionsForSession("},{"lineNumber":335,"author":{"gitId":"-"},"content":"            String feedbackSessionName, String courseId, @Nullable String questionId) {"},{"lineNumber":336,"author":{"gitId":"-"},"content":"        if (questionId \u003d\u003d null) {"},{"lineNumber":337,"author":{"gitId":"-"},"content":"            return fqLogic.getFeedbackQuestionsForSession(feedbackSessionName, courseId);"},{"lineNumber":338,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":339,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fqa \u003d fqLogic.getFeedbackQuestion(questionId);"},{"lineNumber":340,"author":{"gitId":"-"},"content":"        return fqa \u003d\u003d null ? Collections.emptyList() : Collections.singletonList(fqa);"},{"lineNumber":341,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":342,"author":{"gitId":"-"},"content":""},{"lineNumber":343,"author":{"gitId":"-"},"content":"    private SessionResultsBundle buildResultsBundle("},{"lineNumber":344,"author":{"gitId":"-"},"content":"            boolean isCourseWide, String feedbackSessionName, String courseId, String section, String questionId,"},{"lineNumber":345,"author":{"gitId":"-"},"content":"            boolean isInstructor, String userEmail, InstructorAttributes instructor, StudentAttributes student,"},{"lineNumber":346,"author":{"gitId":"-"},"content":"            CourseRoster roster, List\u003cFeedbackQuestionAttributes\u003e allQuestions,"},{"lineNumber":347,"author":{"gitId":"-"},"content":"            List\u003cFeedbackResponseAttributes\u003e allResponses) {"},{"lineNumber":348,"author":{"gitId":"-"},"content":"        Map\u003cString, FeedbackQuestionAttributes\u003e allQuestionsMap \u003d new HashMap\u003c\u003e();"},{"lineNumber":349,"author":{"gitId":"-"},"content":"        for (FeedbackQuestionAttributes qn : allQuestions) {"},{"lineNumber":350,"author":{"gitId":"-"},"content":"            allQuestionsMap.put(qn.getId(), qn);"},{"lineNumber":351,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":352,"author":{"gitId":"-"},"content":""},{"lineNumber":353,"author":{"gitId":"-"},"content":"        // load comment(s)"},{"lineNumber":354,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseCommentAttributes\u003e allComments;"},{"lineNumber":355,"author":{"gitId":"-"},"content":"        if (questionId \u003d\u003d null) {"},{"lineNumber":356,"author":{"gitId":"-"},"content":"            allComments \u003d frcLogic.getFeedbackResponseCommentForSessionInSection(courseId, feedbackSessionName, section);"},{"lineNumber":357,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":358,"author":{"gitId":"-"},"content":"            allComments \u003d frcLogic.getFeedbackResponseCommentForQuestionInSection(questionId, section);"},{"lineNumber":359,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":360,"author":{"gitId":"-"},"content":"        RequestTracer.checkRemainingTime();"},{"lineNumber":361,"author":{"gitId":"-"},"content":""},{"lineNumber":362,"author":{"gitId":"-"},"content":"        // related questions, responses, and comment"},{"lineNumber":363,"author":{"gitId":"-"},"content":"        Map\u003cString, FeedbackQuestionAttributes\u003e relatedQuestionsMap \u003d new HashMap\u003c\u003e();"},{"lineNumber":364,"author":{"gitId":"-"},"content":"        Map\u003cString, FeedbackResponseAttributes\u003e relatedResponsesMap \u003d new HashMap\u003c\u003e();"},{"lineNumber":365,"author":{"gitId":"-"},"content":"        Map\u003cString, List\u003cFeedbackResponseCommentAttributes\u003e\u003e relatedCommentsMap \u003d new HashMap\u003c\u003e();"},{"lineNumber":366,"author":{"gitId":"-"},"content":"        if (isCourseWide) {"},{"lineNumber":367,"author":{"gitId":"-"},"content":"            // all questions are related questions when viewing course-wide result"},{"lineNumber":368,"author":{"gitId":"-"},"content":"            for (FeedbackQuestionAttributes qn : allQuestions) {"},{"lineNumber":369,"author":{"gitId":"-"},"content":"                relatedQuestionsMap.put(qn.getId(), qn);"},{"lineNumber":370,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":371,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":372,"author":{"gitId":"-"},"content":""},{"lineNumber":373,"author":{"gitId":"-"},"content":"        Set\u003cString\u003e studentsEmailInTeam \u003d new HashSet\u003c\u003e();"},{"lineNumber":374,"author":{"gitId":"-"},"content":"        if (student !\u003d null) {"},{"lineNumber":375,"author":{"gitId":"-"},"content":"            for (StudentAttributes studentInTeam"},{"lineNumber":376,"author":{"gitId":"-"},"content":"                    : roster.getTeamToMembersTable().getOrDefault(student.getTeam(), Collections.emptyList())) {"},{"lineNumber":377,"author":{"gitId":"-"},"content":"                studentsEmailInTeam.add(studentInTeam.getEmail());"},{"lineNumber":378,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":379,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":380,"author":{"gitId":"-"},"content":""},{"lineNumber":381,"author":{"gitId":"-"},"content":"        // visibility table for each response and comment"},{"lineNumber":382,"author":{"gitId":"-"},"content":"        Map\u003cString, Boolean\u003e responseGiverVisibilityTable \u003d new HashMap\u003c\u003e();"},{"lineNumber":383,"author":{"gitId":"-"},"content":"        Map\u003cString, Boolean\u003e responseRecipientVisibilityTable \u003d new HashMap\u003c\u003e();"},{"lineNumber":384,"author":{"gitId":"-"},"content":"        Map\u003cLong, Boolean\u003e commentVisibilityTable \u003d new HashMap\u003c\u003e();"},{"lineNumber":385,"author":{"gitId":"-"},"content":""},{"lineNumber":386,"author":{"gitId":"-"},"content":"        // build response"},{"lineNumber":387,"author":{"gitId":"-"},"content":"        for (FeedbackResponseAttributes response : allResponses) {"},{"lineNumber":388,"author":{"gitId":"-"},"content":"            FeedbackQuestionAttributes correspondingQuestion \u003d allQuestionsMap.get(response.getFeedbackQuestionId());"},{"lineNumber":389,"author":{"gitId":"-"},"content":"            if (correspondingQuestion \u003d\u003d null) {"},{"lineNumber":390,"author":{"gitId":"-"},"content":"                // orphan response without corresponding question, ignore it"},{"lineNumber":391,"author":{"gitId":"-"},"content":"                continue;"},{"lineNumber":392,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":393,"author":{"gitId":"-"},"content":"            // check visibility of response"},{"lineNumber":394,"author":{"gitId":"-"},"content":"            boolean isVisibleResponse \u003d isResponseVisibleForUser("},{"lineNumber":395,"author":{"gitId":"-"},"content":"                    userEmail, isInstructor, student, studentsEmailInTeam, response, correspondingQuestion, instructor);"},{"lineNumber":396,"author":{"gitId":"-"},"content":"            if (!isVisibleResponse) {"},{"lineNumber":397,"author":{"gitId":"-"},"content":"                continue;"},{"lineNumber":398,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":399,"author":{"gitId":"-"},"content":""},{"lineNumber":400,"author":{"gitId":"-"},"content":"            // if there are viewable responses, the corresponding question becomes related"},{"lineNumber":401,"author":{"gitId":"-"},"content":"            relatedQuestionsMap.put(response.getFeedbackQuestionId(), correspondingQuestion);"},{"lineNumber":402,"author":{"gitId":"-"},"content":"            relatedResponsesMap.put(response.getId(), response);"},{"lineNumber":403,"author":{"gitId":"-"},"content":"            // generate giver/recipient name visibility table"},{"lineNumber":404,"author":{"gitId":"-"},"content":"            responseGiverVisibilityTable.put(response.getId(),"},{"lineNumber":405,"author":{"gitId":"-"},"content":"                    isNameVisibleToUser(correspondingQuestion, response, userEmail, isInstructor, true, roster));"},{"lineNumber":406,"author":{"gitId":"-"},"content":"            responseRecipientVisibilityTable.put(response.getId(),"},{"lineNumber":407,"author":{"gitId":"-"},"content":"                    isNameVisibleToUser(correspondingQuestion, response, userEmail, isInstructor, false, roster));"},{"lineNumber":408,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":409,"author":{"gitId":"-"},"content":"        RequestTracer.checkRemainingTime();"},{"lineNumber":410,"author":{"gitId":"-"},"content":""},{"lineNumber":411,"author":{"gitId":"-"},"content":"        // build comment"},{"lineNumber":412,"author":{"gitId":"-"},"content":"        for (FeedbackResponseCommentAttributes frc : allComments) {"},{"lineNumber":413,"author":{"gitId":"-"},"content":"            FeedbackResponseAttributes relatedResponse \u003d relatedResponsesMap.get(frc.getFeedbackResponseId());"},{"lineNumber":414,"author":{"gitId":"-"},"content":"            FeedbackQuestionAttributes relatedQuestion \u003d relatedQuestionsMap.get(frc.getFeedbackQuestionId());"},{"lineNumber":415,"author":{"gitId":"-"},"content":"            // the comment needs to be relevant to the question and response"},{"lineNumber":416,"author":{"gitId":"-"},"content":"            if (relatedQuestion \u003d\u003d null || relatedResponse \u003d\u003d null) {"},{"lineNumber":417,"author":{"gitId":"-"},"content":"                continue;"},{"lineNumber":418,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":419,"author":{"gitId":"-"},"content":"            // check visibility of comment"},{"lineNumber":420,"author":{"gitId":"-"},"content":"            boolean isVisibleResponseComment \u003d frcLogic.isResponseCommentVisibleForUser("},{"lineNumber":421,"author":{"gitId":"-"},"content":"                    userEmail, isInstructor, student, studentsEmailInTeam, relatedResponse, relatedQuestion, frc);"},{"lineNumber":422,"author":{"gitId":"-"},"content":"            if (!isVisibleResponseComment) {"},{"lineNumber":423,"author":{"gitId":"-"},"content":"                continue;"},{"lineNumber":424,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":425,"author":{"gitId":"-"},"content":""},{"lineNumber":426,"author":{"gitId":"-"},"content":"            relatedCommentsMap.computeIfAbsent(relatedResponse.getId(), key -\u003e new ArrayList\u003c\u003e()).add(frc);"},{"lineNumber":427,"author":{"gitId":"-"},"content":"            // generate comment giver name visibility table"},{"lineNumber":428,"author":{"gitId":"-"},"content":"            commentVisibilityTable.put(frc.getId(), frcLogic.isNameVisibleToUser(frc, relatedResponse, userEmail, roster));"},{"lineNumber":429,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":430,"author":{"gitId":"-"},"content":"        RequestTracer.checkRemainingTime();"},{"lineNumber":431,"author":{"gitId":"-"},"content":""},{"lineNumber":432,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e existingResponses \u003d new ArrayList\u003c\u003e(relatedResponsesMap.values());"},{"lineNumber":433,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e missingResponses \u003d Collections.emptyList();"},{"lineNumber":434,"author":{"gitId":"-"},"content":"        if (isCourseWide) {"},{"lineNumber":435,"author":{"gitId":"-"},"content":"            missingResponses \u003d buildMissingResponses("},{"lineNumber":436,"author":{"gitId":"-"},"content":"                    courseId, feedbackSessionName, instructor, responseGiverVisibilityTable,"},{"lineNumber":437,"author":{"gitId":"-"},"content":"                    responseRecipientVisibilityTable, relatedQuestionsMap, existingResponses, roster, section);"},{"lineNumber":438,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":439,"author":{"gitId":"-"},"content":"        RequestTracer.checkRemainingTime();"},{"lineNumber":440,"author":{"gitId":"-"},"content":""},{"lineNumber":441,"author":{"gitId":"-"},"content":"        return new SessionResultsBundle(relatedQuestionsMap, existingResponses, missingResponses,"},{"lineNumber":442,"author":{"gitId":"-"},"content":"                responseGiverVisibilityTable, responseRecipientVisibilityTable, relatedCommentsMap,"},{"lineNumber":443,"author":{"gitId":"-"},"content":"                commentVisibilityTable, roster);"},{"lineNumber":444,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":445,"author":{"gitId":"-"},"content":""},{"lineNumber":446,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":447,"author":{"gitId":"-"},"content":"     * Gets the session result for a feedback session."},{"lineNumber":448,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":449,"author":{"gitId":"-"},"content":"     * @param feedbackSessionName the feedback session name"},{"lineNumber":450,"author":{"gitId":"-"},"content":"     * @param courseId the ID of the course"},{"lineNumber":451,"author":{"gitId":"-"},"content":"     * @param instructorEmail the instructor viewing the feedback session"},{"lineNumber":452,"author":{"gitId":"-"},"content":"     * @param questionId if not null, will only return partial bundle for the question"},{"lineNumber":453,"author":{"gitId":"-"},"content":"     * @param section if not null, will only return partial bundle for the section"},{"lineNumber":454,"author":{"gitId":"-"},"content":"     * @param fetchType if not null, will fetch responses by giver, receiver sections, or both"},{"lineNumber":455,"author":{"gitId":"-"},"content":"     * @return the session result bundle"},{"lineNumber":456,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":457,"author":{"gitId":"-"},"content":"    public SessionResultsBundle getSessionResultsForCourse("},{"lineNumber":458,"author":{"gitId":"-"},"content":"            String feedbackSessionName, String courseId, String instructorEmail,"},{"lineNumber":459,"author":{"gitId":"-"},"content":"            @Nullable String questionId, @Nullable String section, @Nullable FeedbackResultFetchType fetchType) {"},{"lineNumber":460,"author":{"gitId":"-"},"content":"        CourseRoster roster \u003d new CourseRoster("},{"lineNumber":461,"author":{"gitId":"-"},"content":"                studentsLogic.getStudentsForCourse(courseId),"},{"lineNumber":462,"author":{"gitId":"-"},"content":"                instructorsLogic.getInstructorsForCourse(courseId));"},{"lineNumber":463,"author":{"gitId":"-"},"content":""},{"lineNumber":464,"author":{"gitId":"-"},"content":"        // load question(s)"},{"lineNumber":465,"author":{"gitId":"-"},"content":"        List\u003cFeedbackQuestionAttributes\u003e allQuestions \u003d getQuestionsForSession(feedbackSessionName, courseId, questionId);"},{"lineNumber":466,"author":{"gitId":"-"},"content":"        RequestTracer.checkRemainingTime();"},{"lineNumber":467,"author":{"gitId":"-"},"content":""},{"lineNumber":468,"author":{"gitId":"-"},"content":"        // load response(s)"},{"lineNumber":469,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e allResponses;"},{"lineNumber":470,"author":{"gitId":"-"},"content":"        // load all response for instructors and passively filter them later"},{"lineNumber":471,"author":{"gitId":"-"},"content":"        if (questionId \u003d\u003d null) {"},{"lineNumber":472,"author":{"gitId":"-"},"content":"            allResponses \u003d getFeedbackResponsesForSessionInSection(feedbackSessionName, courseId, section, fetchType);"},{"lineNumber":473,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":474,"author":{"gitId":"-"},"content":"            allResponses \u003d getFeedbackResponsesForQuestionInSection(questionId, section, fetchType);"},{"lineNumber":475,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":476,"author":{"gitId":"-"},"content":"        RequestTracer.checkRemainingTime();"},{"lineNumber":477,"author":{"gitId":"-"},"content":""},{"lineNumber":478,"author":{"gitId":"-"},"content":"        // consider the current viewing user"},{"lineNumber":479,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor \u003d instructorsLogic.getInstructorForEmail(courseId, instructorEmail);"},{"lineNumber":480,"author":{"gitId":"-"},"content":""},{"lineNumber":481,"author":{"gitId":"-"},"content":"        return buildResultsBundle(true, feedbackSessionName, courseId, section, questionId, true, instructorEmail,"},{"lineNumber":482,"author":{"gitId":"-"},"content":"                instructor, null, roster, allQuestions, allResponses);"},{"lineNumber":483,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":484,"author":{"gitId":"-"},"content":""},{"lineNumber":485,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":486,"author":{"gitId":"-"},"content":"     * Gets the session result for a feedback session for the given user."},{"lineNumber":487,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":488,"author":{"gitId":"-"},"content":"     * @param feedbackSessionName the feedback session name"},{"lineNumber":489,"author":{"gitId":"-"},"content":"     * @param courseId the ID of the course"},{"lineNumber":490,"author":{"gitId":"-"},"content":"     * @param userEmail the user viewing the feedback session"},{"lineNumber":491,"author":{"gitId":"-"},"content":"     * @param isInstructor true if the user is an instructor"},{"lineNumber":492,"author":{"gitId":"-"},"content":"     * @param questionId if not null, will only return partial bundle for the question"},{"lineNumber":493,"author":{"gitId":"-"},"content":"     * @return the session result bundle"},{"lineNumber":494,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":495,"author":{"gitId":"-"},"content":"    public SessionResultsBundle getSessionResultsForUser("},{"lineNumber":496,"author":{"gitId":"-"},"content":"            String feedbackSessionName, String courseId, String userEmail, boolean isInstructor,"},{"lineNumber":497,"author":{"gitId":"-"},"content":"            @Nullable String questionId) {"},{"lineNumber":498,"author":{"gitId":"-"},"content":"        CourseRoster roster \u003d new CourseRoster("},{"lineNumber":499,"author":{"gitId":"-"},"content":"                studentsLogic.getStudentsForCourse(courseId),"},{"lineNumber":500,"author":{"gitId":"-"},"content":"                instructorsLogic.getInstructorsForCourse(courseId));"},{"lineNumber":501,"author":{"gitId":"-"},"content":""},{"lineNumber":502,"author":{"gitId":"-"},"content":"        // load question(s)"},{"lineNumber":503,"author":{"gitId":"-"},"content":"        List\u003cFeedbackQuestionAttributes\u003e allQuestions \u003d getQuestionsForSession(feedbackSessionName, courseId, questionId);"},{"lineNumber":504,"author":{"gitId":"-"},"content":"        RequestTracer.checkRemainingTime();"},{"lineNumber":505,"author":{"gitId":"-"},"content":""},{"lineNumber":506,"author":{"gitId":"-"},"content":"        // load response(s)"},{"lineNumber":507,"author":{"gitId":"-"},"content":"        StudentAttributes student \u003d isInstructor ? null : studentsLogic.getStudentForEmail(courseId, userEmail);"},{"lineNumber":508,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor \u003d isInstructor ? instructorsLogic.getInstructorForEmail(courseId, userEmail) : null;"},{"lineNumber":509,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e allResponses \u003d new ArrayList\u003c\u003e();"},{"lineNumber":510,"author":{"gitId":"-"},"content":"        for (FeedbackQuestionAttributes question : allQuestions) {"},{"lineNumber":511,"author":{"gitId":"-"},"content":"            // load viewable responses for students/instructors proactively"},{"lineNumber":512,"author":{"gitId":"-"},"content":"            // this is cost-effective as in most of time responses for the whole session will not be viewable to individuals"},{"lineNumber":513,"author":{"gitId":"-"},"content":"            List\u003cFeedbackResponseAttributes\u003e viewableResponses \u003d isInstructor"},{"lineNumber":514,"author":{"gitId":"-"},"content":"                    ? getFeedbackResponsesToOrFromInstructorForQuestion(question, instructor)"},{"lineNumber":515,"author":{"gitId":"-"},"content":"                    : getViewableFeedbackResponsesForStudentForQuestion(question, student, roster);"},{"lineNumber":516,"author":{"gitId":"-"},"content":"            allResponses.addAll(viewableResponses);"},{"lineNumber":517,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":518,"author":{"gitId":"-"},"content":"        RequestTracer.checkRemainingTime();"},{"lineNumber":519,"author":{"gitId":"-"},"content":""},{"lineNumber":520,"author":{"gitId":"-"},"content":"        return buildResultsBundle(false, feedbackSessionName, courseId, null, questionId, isInstructor, userEmail,"},{"lineNumber":521,"author":{"gitId":"-"},"content":"                instructor, student, roster, allQuestions, allResponses);"},{"lineNumber":522,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":523,"author":{"gitId":"-"},"content":""},{"lineNumber":524,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":525,"author":{"gitId":"-"},"content":"     * Builds viewable missing responses for the session for instructor."},{"lineNumber":526,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":527,"author":{"gitId":"-"},"content":"     * @param instructor the instructor"},{"lineNumber":528,"author":{"gitId":"-"},"content":"     * @param responseGiverVisibilityTable"},{"lineNumber":529,"author":{"gitId":"-"},"content":"     *         the giver visibility table which will be updated with the visibility of missing responses"},{"lineNumber":530,"author":{"gitId":"-"},"content":"     * @param responseRecipientVisibilityTable"},{"lineNumber":531,"author":{"gitId":"-"},"content":"     *         the recipient visibility table which will be updated with the visibility of missing responses"},{"lineNumber":532,"author":{"gitId":"-"},"content":"     * @param relatedQuestionsMap the relevant questions"},{"lineNumber":533,"author":{"gitId":"-"},"content":"     * @param existingResponses existing responses"},{"lineNumber":534,"author":{"gitId":"-"},"content":"     * @param courseRoster the course roster"},{"lineNumber":535,"author":{"gitId":"-"},"content":"     * @param section if not null, will only build missing responses for the section"},{"lineNumber":536,"author":{"gitId":"-"},"content":"     * @return a list of missing responses for the session."},{"lineNumber":537,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":538,"author":{"gitId":"-"},"content":"    private List\u003cFeedbackResponseAttributes\u003e buildMissingResponses("},{"lineNumber":539,"author":{"gitId":"-"},"content":"            String courseId, String feedbackSessionName, InstructorAttributes instructor,"},{"lineNumber":540,"author":{"gitId":"-"},"content":"            Map\u003cString, Boolean\u003e responseGiverVisibilityTable, Map\u003cString, Boolean\u003e responseRecipientVisibilityTable,"},{"lineNumber":541,"author":{"gitId":"-"},"content":"            Map\u003cString, FeedbackQuestionAttributes\u003e relatedQuestionsMap,"},{"lineNumber":542,"author":{"gitId":"-"},"content":"            List\u003cFeedbackResponseAttributes\u003e existingResponses, CourseRoster courseRoster, @Nullable String section) {"},{"lineNumber":543,"author":{"gitId":"-"},"content":""},{"lineNumber":544,"author":{"gitId":"-"},"content":"        // first get all possible giver recipient pairs"},{"lineNumber":545,"author":{"gitId":"-"},"content":"        Map\u003cString, Map\u003cString, Set\u003cString\u003e\u003e\u003e questionCompleteGiverRecipientMap \u003d new HashMap\u003c\u003e();"},{"lineNumber":546,"author":{"gitId":"-"},"content":"        for (FeedbackQuestionAttributes feedbackQuestion : relatedQuestionsMap.values()) {"},{"lineNumber":547,"author":{"gitId":"-"},"content":"            if (feedbackQuestion.getQuestionDetailsCopy().shouldGenerateMissingResponses(feedbackQuestion)) {"},{"lineNumber":548,"author":{"gitId":"-"},"content":"                questionCompleteGiverRecipientMap.put(feedbackQuestion.getId(),"},{"lineNumber":549,"author":{"gitId":"-"},"content":"                        fqLogic.buildCompleteGiverRecipientMap(feedbackQuestion, courseRoster));"},{"lineNumber":550,"author":{"gitId":"-"},"content":"            } else {"},{"lineNumber":551,"author":{"gitId":"-"},"content":"                questionCompleteGiverRecipientMap.put(feedbackQuestion.getId(), new HashMap\u003c\u003e());"},{"lineNumber":552,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":553,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":554,"author":{"gitId":"-"},"content":""},{"lineNumber":555,"author":{"gitId":"-"},"content":"        // remove the existing responses in those pairs"},{"lineNumber":556,"author":{"gitId":"-"},"content":"        for (FeedbackResponseAttributes existingResponse : existingResponses) {"},{"lineNumber":557,"author":{"gitId":"-"},"content":"            Map\u003cString, Set\u003cString\u003e\u003e currGiverRecipientMap \u003d"},{"lineNumber":558,"author":{"gitId":"-"},"content":"                    questionCompleteGiverRecipientMap.get(existingResponse.getFeedbackQuestionId());"},{"lineNumber":559,"author":{"gitId":"-"},"content":"            if (!currGiverRecipientMap.containsKey(existingResponse.getGiver())) {"},{"lineNumber":560,"author":{"gitId":"-"},"content":"                continue;"},{"lineNumber":561,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":562,"author":{"gitId":"-"},"content":"            currGiverRecipientMap.get(existingResponse.getGiver()).remove(existingResponse.getRecipient());"},{"lineNumber":563,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":564,"author":{"gitId":"-"},"content":""},{"lineNumber":565,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e missingResponses \u003d new ArrayList\u003c\u003e();"},{"lineNumber":566,"author":{"gitId":"-"},"content":"        // build dummy responses"},{"lineNumber":567,"author":{"gitId":"-"},"content":"        for (Map.Entry\u003cString, Map\u003cString, Set\u003cString\u003e\u003e\u003e currGiverRecipientMapEntry"},{"lineNumber":568,"author":{"gitId":"-"},"content":"                : questionCompleteGiverRecipientMap.entrySet()) {"},{"lineNumber":569,"author":{"gitId":"-"},"content":"            FeedbackQuestionAttributes correspondingQuestion \u003d"},{"lineNumber":570,"author":{"gitId":"-"},"content":"                    relatedQuestionsMap.get(currGiverRecipientMapEntry.getKey());"},{"lineNumber":571,"author":{"gitId":"-"},"content":"            String questionId \u003d correspondingQuestion.getId();"},{"lineNumber":572,"author":{"gitId":"-"},"content":""},{"lineNumber":573,"author":{"gitId":"-"},"content":"            for (Map.Entry\u003cString, Set\u003cString\u003e\u003e giverRecipientEntry"},{"lineNumber":574,"author":{"gitId":"-"},"content":"                    : currGiverRecipientMapEntry.getValue().entrySet()) {"},{"lineNumber":575,"author":{"gitId":"-"},"content":"                // giver"},{"lineNumber":576,"author":{"gitId":"-"},"content":"                String giverIdentifier \u003d giverRecipientEntry.getKey();"},{"lineNumber":577,"author":{"gitId":"-"},"content":"                CourseRoster.ParticipantInfo giverInfo \u003d courseRoster.getInfoForIdentifier(giverIdentifier);"},{"lineNumber":578,"author":{"gitId":"-"},"content":""},{"lineNumber":579,"author":{"gitId":"-"},"content":"                for (String recipientIdentifier : giverRecipientEntry.getValue()) {"},{"lineNumber":580,"author":{"gitId":"-"},"content":"                    // recipient"},{"lineNumber":581,"author":{"gitId":"-"},"content":"                    CourseRoster.ParticipantInfo recipientInfo \u003d courseRoster.getInfoForIdentifier(recipientIdentifier);"},{"lineNumber":582,"author":{"gitId":"-"},"content":""},{"lineNumber":583,"author":{"gitId":"-"},"content":"                    // skip responses not in current section"},{"lineNumber":584,"author":{"gitId":"-"},"content":"                    if (section !\u003d null"},{"lineNumber":585,"author":{"gitId":"-"},"content":"                            \u0026\u0026 !giverInfo.getSectionName().equals(section)"},{"lineNumber":586,"author":{"gitId":"-"},"content":"                            \u0026\u0026 !recipientInfo.getSectionName().equals(section)) {"},{"lineNumber":587,"author":{"gitId":"-"},"content":"                        continue;"},{"lineNumber":588,"author":{"gitId":"-"},"content":"                    }"},{"lineNumber":589,"author":{"gitId":"-"},"content":""},{"lineNumber":590,"author":{"gitId":"-"},"content":"                    FeedbackResponseAttributes missingResponse \u003d"},{"lineNumber":591,"author":{"gitId":"-"},"content":"                            FeedbackResponseAttributes.builder(questionId, giverIdentifier, recipientIdentifier)"},{"lineNumber":592,"author":{"gitId":"-"},"content":"                                    .withCourseId(courseId)"},{"lineNumber":593,"author":{"gitId":"-"},"content":"                                    .withFeedbackSessionName(feedbackSessionName)"},{"lineNumber":594,"author":{"gitId":"-"},"content":"                                    .withGiverSection(giverInfo.getSectionName())"},{"lineNumber":595,"author":{"gitId":"-"},"content":"                                    .withRecipientSection(recipientInfo.getSectionName())"},{"lineNumber":596,"author":{"gitId":"-"},"content":"                                    .withResponseDetails(new FeedbackTextResponseDetails(\"No Response\"))"},{"lineNumber":597,"author":{"gitId":"-"},"content":"                                    .build();"},{"lineNumber":598,"author":{"gitId":"-"},"content":""},{"lineNumber":599,"author":{"gitId":"-"},"content":"                    // check visibility of the missing response"},{"lineNumber":600,"author":{"gitId":"-"},"content":"                    boolean isVisibleResponse \u003d isResponseVisibleForUser("},{"lineNumber":601,"author":{"gitId":"-"},"content":"                            instructor.getEmail(), true, null, Collections.emptySet(),"},{"lineNumber":602,"author":{"gitId":"-"},"content":"                            missingResponse, correspondingQuestion, instructor);"},{"lineNumber":603,"author":{"gitId":"-"},"content":"                    if (!isVisibleResponse) {"},{"lineNumber":604,"author":{"gitId":"-"},"content":"                        continue;"},{"lineNumber":605,"author":{"gitId":"-"},"content":"                    }"},{"lineNumber":606,"author":{"gitId":"-"},"content":""},{"lineNumber":607,"author":{"gitId":"-"},"content":"                    // generate giver/recipient name visibility table"},{"lineNumber":608,"author":{"gitId":"-"},"content":"                    responseGiverVisibilityTable.put(missingResponse.getId(),"},{"lineNumber":609,"author":{"gitId":"-"},"content":"                            isNameVisibleToUser(correspondingQuestion, missingResponse,"},{"lineNumber":610,"author":{"gitId":"-"},"content":"                                    instructor.getEmail(), true, true, courseRoster));"},{"lineNumber":611,"author":{"gitId":"-"},"content":"                    responseRecipientVisibilityTable.put(missingResponse.getId(),"},{"lineNumber":612,"author":{"gitId":"-"},"content":"                            isNameVisibleToUser(correspondingQuestion, missingResponse,"},{"lineNumber":613,"author":{"gitId":"-"},"content":"                                    instructor.getEmail(), true, false, courseRoster));"},{"lineNumber":614,"author":{"gitId":"-"},"content":"                    missingResponses.add(missingResponse);"},{"lineNumber":615,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":616,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":617,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":618,"author":{"gitId":"-"},"content":""},{"lineNumber":619,"author":{"gitId":"-"},"content":"        return missingResponses;"},{"lineNumber":620,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":621,"author":{"gitId":"-"},"content":""},{"lineNumber":622,"author":{"gitId":"-"},"content":"    boolean isResponseVisibleForUser("},{"lineNumber":623,"author":{"gitId":"-"},"content":"            String userEmail, boolean isInstructor, StudentAttributes student,"},{"lineNumber":624,"author":{"gitId":"-"},"content":"            Set\u003cString\u003e studentsEmailInTeam, FeedbackResponseAttributes response,"},{"lineNumber":625,"author":{"gitId":"-"},"content":"            FeedbackQuestionAttributes relatedQuestion, InstructorAttributes instructor) {"},{"lineNumber":626,"author":{"gitId":"-"},"content":""},{"lineNumber":627,"author":{"gitId":"-"},"content":"        boolean isVisibleResponse \u003d false;"},{"lineNumber":628,"author":{"gitId":"-"},"content":"        if (isInstructor \u0026\u0026 relatedQuestion.isResponseVisibleTo(FeedbackParticipantType.INSTRUCTORS)"},{"lineNumber":629,"author":{"gitId":"-"},"content":"                || response.getRecipient().equals(userEmail)"},{"lineNumber":630,"author":{"gitId":"-"},"content":"                \u0026\u0026 relatedQuestion.isResponseVisibleTo(FeedbackParticipantType.RECEIVER)"},{"lineNumber":631,"author":{"gitId":"-"},"content":"                || response.getGiver().equals(userEmail)"},{"lineNumber":632,"author":{"gitId":"-"},"content":"                || !isInstructor \u0026\u0026 relatedQuestion.isResponseVisibleTo(FeedbackParticipantType.STUDENTS)) {"},{"lineNumber":633,"author":{"gitId":"-"},"content":"            isVisibleResponse \u003d true;"},{"lineNumber":634,"author":{"gitId":"-"},"content":"        } else if (studentsEmailInTeam !\u003d null \u0026\u0026 !isInstructor) {"},{"lineNumber":635,"author":{"gitId":"hhdqirui"},"content":"            if ((relatedQuestion.getRecipientType() \u003d\u003d FeedbackParticipantType.TEAMS"},{"lineNumber":636,"author":{"gitId":"hhdqirui"},"content":"                    || relatedQuestion.getRecipientType() \u003d\u003d FeedbackParticipantType.TEAMS_IN_SAME_SECTION"},{"lineNumber":637,"author":{"gitId":"hhdqirui"},"content":"                    || relatedQuestion.getRecipientType() \u003d\u003d FeedbackParticipantType.TEAMS_EXCLUDING_SELF)"},{"lineNumber":638,"author":{"gitId":"-"},"content":"                    \u0026\u0026 relatedQuestion.isResponseVisibleTo(FeedbackParticipantType.RECEIVER)"},{"lineNumber":639,"author":{"gitId":"-"},"content":"                    \u0026\u0026 response.getRecipient().equals(student.getTeam())) {"},{"lineNumber":640,"author":{"gitId":"-"},"content":"                isVisibleResponse \u003d true;"},{"lineNumber":641,"author":{"gitId":"-"},"content":"            } else if (relatedQuestion.getGiverType() \u003d\u003d FeedbackParticipantType.TEAMS"},{"lineNumber":642,"author":{"gitId":"-"},"content":"                    \u0026\u0026 response.getGiver().equals(student.getTeam())) {"},{"lineNumber":643,"author":{"gitId":"-"},"content":"                isVisibleResponse \u003d true;"},{"lineNumber":644,"author":{"gitId":"-"},"content":"            } else if (relatedQuestion.isResponseVisibleTo(FeedbackParticipantType.OWN_TEAM_MEMBERS)"},{"lineNumber":645,"author":{"gitId":"-"},"content":"                    \u0026\u0026 studentsEmailInTeam.contains(response.getGiver())) {"},{"lineNumber":646,"author":{"gitId":"-"},"content":"                isVisibleResponse \u003d true;"},{"lineNumber":647,"author":{"gitId":"-"},"content":"            } else if (relatedQuestion.isResponseVisibleTo(FeedbackParticipantType.RECEIVER_TEAM_MEMBERS)"},{"lineNumber":648,"author":{"gitId":"-"},"content":"                    \u0026\u0026 studentsEmailInTeam.contains(response.getRecipient())) {"},{"lineNumber":649,"author":{"gitId":"-"},"content":"                isVisibleResponse \u003d true;"},{"lineNumber":650,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":651,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":652,"author":{"gitId":"-"},"content":"        if (isVisibleResponse \u0026\u0026 instructor !\u003d null) {"},{"lineNumber":653,"author":{"gitId":"-"},"content":"            boolean isGiverSectionRestricted \u003d"},{"lineNumber":654,"author":{"gitId":"-"},"content":"                    !instructor.isAllowedForPrivilege(response.getGiverSection(),"},{"lineNumber":655,"author":{"gitId":"-"},"content":"                            response.getFeedbackSessionName(),"},{"lineNumber":656,"author":{"gitId":"-"},"content":"                            Const.InstructorPermissions.CAN_VIEW_SESSION_IN_SECTIONS);"},{"lineNumber":657,"author":{"gitId":"-"},"content":"            // If instructors are not restricted to view the giver\u0027s section,"},{"lineNumber":658,"author":{"gitId":"-"},"content":"            // they are allowed to view responses to GENERAL, subject to visibility options"},{"lineNumber":659,"author":{"gitId":"-"},"content":"            boolean isRecipientSectionRestricted \u003d"},{"lineNumber":660,"author":{"gitId":"-"},"content":"                    relatedQuestion.getRecipientType() !\u003d FeedbackParticipantType.NONE"},{"lineNumber":661,"author":{"gitId":"-"},"content":"                            \u0026\u0026 !instructor.isAllowedForPrivilege(response.getRecipientSection(),"},{"lineNumber":662,"author":{"gitId":"-"},"content":"                            response.getFeedbackSessionName(),"},{"lineNumber":663,"author":{"gitId":"-"},"content":"                            Const.InstructorPermissions.CAN_VIEW_SESSION_IN_SECTIONS);"},{"lineNumber":664,"author":{"gitId":"-"},"content":""},{"lineNumber":665,"author":{"gitId":"-"},"content":"            boolean isNotAllowedForInstructor \u003d isGiverSectionRestricted || isRecipientSectionRestricted;"},{"lineNumber":666,"author":{"gitId":"-"},"content":"            if (isNotAllowedForInstructor) {"},{"lineNumber":667,"author":{"gitId":"-"},"content":"                isVisibleResponse \u003d false;"},{"lineNumber":668,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":669,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":670,"author":{"gitId":"-"},"content":"        return isVisibleResponse;"},{"lineNumber":671,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":672,"author":{"gitId":"-"},"content":""},{"lineNumber":673,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":674,"author":{"gitId":"-"},"content":"     * Checks whether there are responses for a course."},{"lineNumber":675,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":676,"author":{"gitId":"-"},"content":"    public boolean hasResponsesForCourse(String courseId) {"},{"lineNumber":677,"author":{"gitId":"-"},"content":"        return frDb.hasFeedbackResponseEntitiesForCourse(courseId);"},{"lineNumber":678,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":679,"author":{"gitId":"-"},"content":""},{"lineNumber":680,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":681,"author":{"gitId":"-"},"content":"     * Updates a feedback response by {@link FeedbackResponseAttributes.UpdateOptions}."},{"lineNumber":682,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":683,"author":{"gitId":"-"},"content":"     * \u003cp\u003eCascade updates its associated feedback response comment"},{"lineNumber":684,"author":{"gitId":"-"},"content":"     * (e.g. associated response ID, giverSection and recipientSection)."},{"lineNumber":685,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":686,"author":{"gitId":"-"},"content":"     * \u003cp\u003eIf the giver/recipient field is changed, the response is updated by recreating the response"},{"lineNumber":687,"author":{"gitId":"-"},"content":"     * as question-giver-recipient is the primary key."},{"lineNumber":688,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":689,"author":{"gitId":"-"},"content":"     * @return updated feedback response"},{"lineNumber":690,"author":{"gitId":"-"},"content":"     * @throws InvalidParametersException if attributes to update are not valid"},{"lineNumber":691,"author":{"gitId":"-"},"content":"     * @throws EntityDoesNotExistException if the comment cannot be found"},{"lineNumber":692,"author":{"gitId":"-"},"content":"     * @throws EntityAlreadyExistsException if the response cannot be updated"},{"lineNumber":693,"author":{"gitId":"-"},"content":"     *         by recreation because of an existent response"},{"lineNumber":694,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":695,"author":{"gitId":"-"},"content":"    public FeedbackResponseAttributes updateFeedbackResponseCascade(FeedbackResponseAttributes.UpdateOptions updateOptions)"},{"lineNumber":696,"author":{"gitId":"-"},"content":"            throws InvalidParametersException, EntityDoesNotExistException, EntityAlreadyExistsException {"},{"lineNumber":697,"author":{"gitId":"-"},"content":""},{"lineNumber":698,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes oldResponse \u003d frDb.getFeedbackResponse(updateOptions.getFeedbackResponseId());"},{"lineNumber":699,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes newResponse \u003d frDb.updateFeedbackResponse(updateOptions);"},{"lineNumber":700,"author":{"gitId":"-"},"content":""},{"lineNumber":701,"author":{"gitId":"-"},"content":"        boolean isResponseIdChanged \u003d !oldResponse.getId().equals(newResponse.getId());"},{"lineNumber":702,"author":{"gitId":"-"},"content":"        boolean isGiverSectionChanged \u003d !oldResponse.getGiverSection().equals(newResponse.getGiverSection());"},{"lineNumber":703,"author":{"gitId":"-"},"content":"        boolean isRecipientSectionChanged \u003d !oldResponse.getRecipientSection().equals(newResponse.getRecipientSection());"},{"lineNumber":704,"author":{"gitId":"-"},"content":""},{"lineNumber":705,"author":{"gitId":"-"},"content":"        if (isResponseIdChanged || isGiverSectionChanged || isRecipientSectionChanged) {"},{"lineNumber":706,"author":{"gitId":"-"},"content":"            List\u003cFeedbackResponseCommentAttributes\u003e responseComments \u003d"},{"lineNumber":707,"author":{"gitId":"-"},"content":"                    frcLogic.getFeedbackResponseCommentForResponse(oldResponse.getId());"},{"lineNumber":708,"author":{"gitId":"-"},"content":"            for (FeedbackResponseCommentAttributes responseComment : responseComments) {"},{"lineNumber":709,"author":{"gitId":"-"},"content":"                FeedbackResponseCommentAttributes.UpdateOptions.Builder updateOptionsBuilder \u003d"},{"lineNumber":710,"author":{"gitId":"-"},"content":"                        FeedbackResponseCommentAttributes.updateOptionsBuilder(responseComment.getId());"},{"lineNumber":711,"author":{"gitId":"-"},"content":""},{"lineNumber":712,"author":{"gitId":"-"},"content":"                if (isResponseIdChanged) {"},{"lineNumber":713,"author":{"gitId":"-"},"content":"                    updateOptionsBuilder.withFeedbackResponseId(newResponse.getId());"},{"lineNumber":714,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":715,"author":{"gitId":"-"},"content":""},{"lineNumber":716,"author":{"gitId":"-"},"content":"                if (isGiverSectionChanged) {"},{"lineNumber":717,"author":{"gitId":"-"},"content":"                    updateOptionsBuilder.withGiverSection(newResponse.getGiverSection());"},{"lineNumber":718,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":719,"author":{"gitId":"-"},"content":""},{"lineNumber":720,"author":{"gitId":"-"},"content":"                if (isRecipientSectionChanged) {"},{"lineNumber":721,"author":{"gitId":"-"},"content":"                    updateOptionsBuilder.withReceiverSection(newResponse.getRecipientSection());"},{"lineNumber":722,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":723,"author":{"gitId":"-"},"content":""},{"lineNumber":724,"author":{"gitId":"-"},"content":"                frcLogic.updateFeedbackResponseComment(updateOptionsBuilder.build());"},{"lineNumber":725,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":726,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":727,"author":{"gitId":"-"},"content":""},{"lineNumber":728,"author":{"gitId":"-"},"content":"        return newResponse;"},{"lineNumber":729,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":730,"author":{"gitId":"-"},"content":""},{"lineNumber":731,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":732,"author":{"gitId":"-"},"content":"     * Updates responses for a student when his team changes."},{"lineNumber":733,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":734,"author":{"gitId":"-"},"content":"     * \u003cp\u003eThis is done by deleting responses that are no longer relevant to him in his new team."},{"lineNumber":735,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":736,"author":{"gitId":"-"},"content":"    public void updateFeedbackResponsesForChangingTeam("},{"lineNumber":737,"author":{"gitId":"-"},"content":"            String courseId, String userEmail, String oldTeam, String newTeam) {"},{"lineNumber":738,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes question;"},{"lineNumber":739,"author":{"gitId":"-"},"content":"        // deletes all responses given by the user to team members or given by the user as a representative of a team."},{"lineNumber":740,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e responsesFromUser \u003d"},{"lineNumber":741,"author":{"gitId":"-"},"content":"                getFeedbackResponsesFromGiverForCourse(courseId, userEmail);"},{"lineNumber":742,"author":{"gitId":"-"},"content":"        for (FeedbackResponseAttributes response : responsesFromUser) {"},{"lineNumber":743,"author":{"gitId":"-"},"content":"            question \u003d fqLogic.getFeedbackQuestion(response.getFeedbackQuestionId());"},{"lineNumber":744,"author":{"gitId":"-"},"content":"            if (question.getGiverType() \u003d\u003d FeedbackParticipantType.TEAMS"},{"lineNumber":745,"author":{"gitId":"-"},"content":"                    || isRecipientTypeTeamMembers(question)) {"},{"lineNumber":746,"author":{"gitId":"-"},"content":"                deleteFeedbackResponseCascade(response.getId());"},{"lineNumber":747,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":748,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":749,"author":{"gitId":"-"},"content":""},{"lineNumber":750,"author":{"gitId":"-"},"content":"        // Deletes all responses given by other team members to the user."},{"lineNumber":751,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e responsesToUser \u003d"},{"lineNumber":752,"author":{"gitId":"-"},"content":"                getFeedbackResponsesForReceiverForCourse(courseId, userEmail);"},{"lineNumber":753,"author":{"gitId":"-"},"content":"        for (FeedbackResponseAttributes response : responsesToUser) {"},{"lineNumber":754,"author":{"gitId":"-"},"content":"            question \u003d fqLogic.getFeedbackQuestion(response.getFeedbackQuestionId());"},{"lineNumber":755,"author":{"gitId":"-"},"content":"            if (isRecipientTypeTeamMembers(question)) {"},{"lineNumber":756,"author":{"gitId":"-"},"content":"                deleteFeedbackResponseCascade(response.getId());"},{"lineNumber":757,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":758,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":759,"author":{"gitId":"-"},"content":""},{"lineNumber":760,"author":{"gitId":"-"},"content":"        boolean isOldTeamEmpty \u003d studentsLogic.getStudentsForTeam(oldTeam, courseId).isEmpty();"},{"lineNumber":761,"author":{"gitId":"-"},"content":"        if (isOldTeamEmpty) {"},{"lineNumber":762,"author":{"gitId":"-"},"content":"            deleteFeedbackResponsesInvolvedEntityOfCourseCascade(courseId, oldTeam);"},{"lineNumber":763,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":764,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":765,"author":{"gitId":"-"},"content":""},{"lineNumber":766,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":767,"author":{"gitId":"-"},"content":"     * Updates responses for a student when his section changes."},{"lineNumber":768,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":769,"author":{"gitId":"-"},"content":"    public void updateFeedbackResponsesForChangingSection("},{"lineNumber":770,"author":{"gitId":"-"},"content":"            String courseId, String userEmail, String oldSection, String newSection)"},{"lineNumber":771,"author":{"gitId":"-"},"content":"            throws EntityDoesNotExistException, InvalidParametersException {"},{"lineNumber":772,"author":{"gitId":"-"},"content":"        updateSectionOfResponsesFromUser(courseId, userEmail, newSection);"},{"lineNumber":773,"author":{"gitId":"-"},"content":"        updateSectionOfResponsesToUser(courseId, userEmail, newSection);"},{"lineNumber":774,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":775,"author":{"gitId":"-"},"content":""},{"lineNumber":776,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":777,"author":{"gitId":"-"},"content":"     * Updates the relevant responses before the deletion of a student."},{"lineNumber":778,"author":{"gitId":"-"},"content":"     * This method takes care of the following:"},{"lineNumber":779,"author":{"gitId":"-"},"content":"     * \u003cul\u003e"},{"lineNumber":780,"author":{"gitId":"-"},"content":"     *     \u003cli\u003e"},{"lineNumber":781,"author":{"gitId":"-"},"content":"     *         Making existing responses of \u0027rank recipient question\u0027 consistent."},{"lineNumber":782,"author":{"gitId":"-"},"content":"     *     \u003c/li\u003e"},{"lineNumber":783,"author":{"gitId":"-"},"content":"     * \u003c/ul\u003e"},{"lineNumber":784,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":785,"author":{"gitId":"-"},"content":"    public void updateFeedbackResponsesForDeletingStudent(String courseId) {"},{"lineNumber":786,"author":{"gitId":"-"},"content":"        updateRankRecipientQuestionResponsesAfterDeletingStudent(courseId);"},{"lineNumber":787,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":788,"author":{"gitId":"-"},"content":""},{"lineNumber":789,"author":{"gitId":"-"},"content":"    private void updateRankRecipientQuestionResponsesAfterDeletingStudent(String courseId) {"},{"lineNumber":790,"author":{"gitId":"-"},"content":"        List\u003cFeedbackQuestionAttributes\u003e filteredQuestions \u003d"},{"lineNumber":791,"author":{"gitId":"-"},"content":"                fqLogic.getFeedbackQuestionForCourseWithType(courseId, FeedbackQuestionType.RANK_RECIPIENTS);"},{"lineNumber":792,"author":{"gitId":"-"},"content":"        CourseRoster roster \u003d new CourseRoster("},{"lineNumber":793,"author":{"gitId":"-"},"content":"                studentsLogic.getStudentsForCourse(courseId),"},{"lineNumber":794,"author":{"gitId":"-"},"content":"                instructorsLogic.getInstructorsForCourse(courseId));"},{"lineNumber":795,"author":{"gitId":"-"},"content":"        for (FeedbackQuestionAttributes question : filteredQuestions) {"},{"lineNumber":796,"author":{"gitId":"-"},"content":"            makeRankRecipientQuestionResponsesConsistent(question, roster);"},{"lineNumber":797,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":798,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":799,"author":{"gitId":"-"},"content":""},{"lineNumber":800,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":801,"author":{"gitId":"-"},"content":"     * Makes the rankings by one giver in the response to a \u0027rank recipient question\u0027 consistent, after deleting a"},{"lineNumber":802,"author":{"gitId":"-"},"content":"     * student."},{"lineNumber":803,"author":{"gitId":"-"},"content":"     * \u003cp\u003e"},{"lineNumber":804,"author":{"gitId":"-"},"content":"     *     Fails silently if the question type is not \u0027rank recipient question\u0027."},{"lineNumber":805,"author":{"gitId":"-"},"content":"     * \u003c/p\u003e"},{"lineNumber":806,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":807,"author":{"gitId":"-"},"content":"    private void makeRankRecipientQuestionResponsesConsistent("},{"lineNumber":808,"author":{"gitId":"-"},"content":"            FeedbackQuestionAttributes question, CourseRoster roster) {"},{"lineNumber":809,"author":{"gitId":"-"},"content":"        if (!question.getQuestionType().equals(FeedbackQuestionType.RANK_RECIPIENTS)) {"},{"lineNumber":810,"author":{"gitId":"-"},"content":"            return;"},{"lineNumber":811,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":812,"author":{"gitId":"-"},"content":""},{"lineNumber":813,"author":{"gitId":"-"},"content":"        FeedbackParticipantType giverType \u003d question.getGiverType();"},{"lineNumber":814,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e responses;"},{"lineNumber":815,"author":{"gitId":"-"},"content":""},{"lineNumber":816,"author":{"gitId":"-"},"content":"        int numberOfRecipients;"},{"lineNumber":817,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes.UpdateOptions\u003e updates \u003d new ArrayList\u003c\u003e();"},{"lineNumber":818,"author":{"gitId":"-"},"content":""},{"lineNumber":819,"author":{"gitId":"-"},"content":"        switch (giverType) {"},{"lineNumber":820,"author":{"gitId":"-"},"content":"        case INSTRUCTORS:"},{"lineNumber":821,"author":{"gitId":"-"},"content":"        case SELF:"},{"lineNumber":822,"author":{"gitId":"-"},"content":"            for (InstructorAttributes instructor : roster.getInstructors()) {"},{"lineNumber":823,"author":{"gitId":"-"},"content":"                numberOfRecipients \u003d"},{"lineNumber":824,"author":{"gitId":"-"},"content":"                        fqLogic.getRecipientsOfQuestion(question, instructor, null, roster).size();"},{"lineNumber":825,"author":{"gitId":"-"},"content":"                responses \u003d getFeedbackResponsesFromGiverForQuestion(question.getId(), instructor.getEmail());"},{"lineNumber":826,"author":{"gitId":"-"},"content":"                updates.addAll(FeedbackRankRecipientsResponseDetails"},{"lineNumber":827,"author":{"gitId":"-"},"content":"                        .getUpdateOptionsForRankRecipientQuestions(responses, numberOfRecipients));"},{"lineNumber":828,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":829,"author":{"gitId":"-"},"content":"            break;"},{"lineNumber":830,"author":{"gitId":"-"},"content":"        case TEAMS:"},{"lineNumber":831,"author":{"gitId":"-"},"content":"        case TEAMS_IN_SAME_SECTION:"},{"lineNumber":832,"author":{"gitId":"-"},"content":"            StudentAttributes firstMemberOfTeam;"},{"lineNumber":833,"author":{"gitId":"-"},"content":"            String team;"},{"lineNumber":834,"author":{"gitId":"-"},"content":"            Map\u003cString, List\u003cStudentAttributes\u003e\u003e teams \u003d roster.getTeamToMembersTable();"},{"lineNumber":835,"author":{"gitId":"-"},"content":"            for (Map.Entry\u003cString, List\u003cStudentAttributes\u003e\u003e entry : teams.entrySet()) {"},{"lineNumber":836,"author":{"gitId":"-"},"content":"                team \u003d entry.getKey();"},{"lineNumber":837,"author":{"gitId":"-"},"content":"                firstMemberOfTeam \u003d entry.getValue().get(0);"},{"lineNumber":838,"author":{"gitId":"-"},"content":"                numberOfRecipients \u003d"},{"lineNumber":839,"author":{"gitId":"-"},"content":"                        fqLogic.getRecipientsOfQuestion(question, null, firstMemberOfTeam, roster).size();"},{"lineNumber":840,"author":{"gitId":"-"},"content":"                responses \u003d"},{"lineNumber":841,"author":{"gitId":"-"},"content":"                        getFeedbackResponsesFromTeamForQuestion(question.getId(), question.getCourseId(), team, roster);"},{"lineNumber":842,"author":{"gitId":"-"},"content":"                updates.addAll(FeedbackRankRecipientsResponseDetails"},{"lineNumber":843,"author":{"gitId":"-"},"content":"                        .getUpdateOptionsForRankRecipientQuestions(responses, numberOfRecipients));"},{"lineNumber":844,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":845,"author":{"gitId":"-"},"content":"            break;"},{"lineNumber":846,"author":{"gitId":"-"},"content":"        default:"},{"lineNumber":847,"author":{"gitId":"-"},"content":"            for (StudentAttributes student : roster.getStudents()) {"},{"lineNumber":848,"author":{"gitId":"-"},"content":"                numberOfRecipients \u003d"},{"lineNumber":849,"author":{"gitId":"-"},"content":"                        fqLogic.getRecipientsOfQuestion(question, null, student, roster).size();"},{"lineNumber":850,"author":{"gitId":"-"},"content":"                responses \u003d getFeedbackResponsesFromGiverForQuestion(question.getId(), student.getEmail());"},{"lineNumber":851,"author":{"gitId":"-"},"content":"                updates.addAll(FeedbackRankRecipientsResponseDetails"},{"lineNumber":852,"author":{"gitId":"-"},"content":"                        .getUpdateOptionsForRankRecipientQuestions(responses, numberOfRecipients));"},{"lineNumber":853,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":854,"author":{"gitId":"-"},"content":"            break;"},{"lineNumber":855,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":856,"author":{"gitId":"-"},"content":""},{"lineNumber":857,"author":{"gitId":"-"},"content":"        for (FeedbackResponseAttributes.UpdateOptions update : updates) {"},{"lineNumber":858,"author":{"gitId":"-"},"content":"            try {"},{"lineNumber":859,"author":{"gitId":"-"},"content":"                frDb.updateFeedbackResponse(update);"},{"lineNumber":860,"author":{"gitId":"-"},"content":"            } catch (EntityAlreadyExistsException | EntityDoesNotExistException | InvalidParametersException e) {"},{"lineNumber":861,"author":{"gitId":"-"},"content":"                assert false : \"Exception occurred when updating responses after deleting students.\";"},{"lineNumber":862,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":863,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":864,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":865,"author":{"gitId":"-"},"content":""},{"lineNumber":866,"author":{"gitId":"-"},"content":"    private void updateSectionOfResponsesToUser(String courseId, String userEmail, String newSection)"},{"lineNumber":867,"author":{"gitId":"-"},"content":"            throws InvalidParametersException, EntityDoesNotExistException {"},{"lineNumber":868,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e responsesToUser \u003d"},{"lineNumber":869,"author":{"gitId":"-"},"content":"                getFeedbackResponsesForReceiverForCourse(courseId, userEmail);"},{"lineNumber":870,"author":{"gitId":"-"},"content":""},{"lineNumber":871,"author":{"gitId":"-"},"content":"        for (FeedbackResponseAttributes response : responsesToUser) {"},{"lineNumber":872,"author":{"gitId":"-"},"content":"            try {"},{"lineNumber":873,"author":{"gitId":"-"},"content":"                frDb.updateFeedbackResponse("},{"lineNumber":874,"author":{"gitId":"-"},"content":"                        FeedbackResponseAttributes.updateOptionsBuilder(response.getId())"},{"lineNumber":875,"author":{"gitId":"-"},"content":"                                .withRecipientSection(newSection)"},{"lineNumber":876,"author":{"gitId":"-"},"content":"                                .build());"},{"lineNumber":877,"author":{"gitId":"-"},"content":"            } catch (EntityAlreadyExistsException e) {"},{"lineNumber":878,"author":{"gitId":"-"},"content":"                assert false : \"Not possible to trigger recreating of response\";"},{"lineNumber":879,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":880,"author":{"gitId":"-"},"content":"            frcLogic.updateFeedbackResponseCommentsForResponse(response.getId());"},{"lineNumber":881,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":882,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":883,"author":{"gitId":"-"},"content":""},{"lineNumber":884,"author":{"gitId":"-"},"content":"    private void updateSectionOfResponsesFromUser(String courseId, String userEmail, String newSection)"},{"lineNumber":885,"author":{"gitId":"-"},"content":"            throws InvalidParametersException, EntityDoesNotExistException {"},{"lineNumber":886,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e responsesFromUser \u003d"},{"lineNumber":887,"author":{"gitId":"-"},"content":"                getFeedbackResponsesFromGiverForCourse(courseId, userEmail);"},{"lineNumber":888,"author":{"gitId":"-"},"content":""},{"lineNumber":889,"author":{"gitId":"-"},"content":"        for (FeedbackResponseAttributes response : responsesFromUser) {"},{"lineNumber":890,"author":{"gitId":"-"},"content":"            try {"},{"lineNumber":891,"author":{"gitId":"-"},"content":"                frDb.updateFeedbackResponse("},{"lineNumber":892,"author":{"gitId":"-"},"content":"                        FeedbackResponseAttributes.updateOptionsBuilder(response.getId())"},{"lineNumber":893,"author":{"gitId":"-"},"content":"                                .withGiverSection(newSection)"},{"lineNumber":894,"author":{"gitId":"-"},"content":"                                .build());"},{"lineNumber":895,"author":{"gitId":"-"},"content":"            } catch (EntityAlreadyExistsException e) {"},{"lineNumber":896,"author":{"gitId":"-"},"content":"                assert false : \"Not possible to trigger recreating of response\";"},{"lineNumber":897,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":898,"author":{"gitId":"-"},"content":"            frcLogic.updateFeedbackResponseCommentsForResponse(response.getId());"},{"lineNumber":899,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":900,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":901,"author":{"gitId":"-"},"content":""},{"lineNumber":902,"author":{"gitId":"-"},"content":"    private boolean isRecipientTypeTeamMembers(FeedbackQuestionAttributes question) {"},{"lineNumber":903,"author":{"gitId":"-"},"content":"        return question.getRecipientType() \u003d\u003d FeedbackParticipantType.OWN_TEAM_MEMBERS"},{"lineNumber":904,"author":{"gitId":"-"},"content":"               || question.getRecipientType() \u003d\u003d FeedbackParticipantType.OWN_TEAM_MEMBERS_INCLUDING_SELF;"},{"lineNumber":905,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":906,"author":{"gitId":"-"},"content":""},{"lineNumber":907,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":908,"author":{"gitId":"-"},"content":"     * Updates responses for a student when his email changes."},{"lineNumber":909,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":910,"author":{"gitId":"-"},"content":"    public void updateFeedbackResponsesForChangingEmail("},{"lineNumber":911,"author":{"gitId":"-"},"content":"            String courseId, String oldEmail, String newEmail)"},{"lineNumber":912,"author":{"gitId":"-"},"content":"            throws InvalidParametersException, EntityDoesNotExistException {"},{"lineNumber":913,"author":{"gitId":"-"},"content":""},{"lineNumber":914,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e responsesFromUser \u003d"},{"lineNumber":915,"author":{"gitId":"-"},"content":"                getFeedbackResponsesFromGiverForCourse(courseId, oldEmail);"},{"lineNumber":916,"author":{"gitId":"-"},"content":""},{"lineNumber":917,"author":{"gitId":"-"},"content":"        for (FeedbackResponseAttributes response : responsesFromUser) {"},{"lineNumber":918,"author":{"gitId":"-"},"content":"            try {"},{"lineNumber":919,"author":{"gitId":"-"},"content":"                updateFeedbackResponseCascade("},{"lineNumber":920,"author":{"gitId":"-"},"content":"                        FeedbackResponseAttributes.updateOptionsBuilder(response.getId())"},{"lineNumber":921,"author":{"gitId":"-"},"content":"                                .withGiver(newEmail)"},{"lineNumber":922,"author":{"gitId":"-"},"content":"                                .build());"},{"lineNumber":923,"author":{"gitId":"-"},"content":"                frcLogic.updateFeedbackResponseCommentsEmails(courseId, oldEmail, newEmail);"},{"lineNumber":924,"author":{"gitId":"-"},"content":"            } catch (EntityAlreadyExistsException e) {"},{"lineNumber":925,"author":{"gitId":"-"},"content":"                assert false : \"Feedback response failed to update successfully as email was already in use.\";"},{"lineNumber":926,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":927,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":928,"author":{"gitId":"-"},"content":""},{"lineNumber":929,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e responsesToUser \u003d"},{"lineNumber":930,"author":{"gitId":"-"},"content":"                getFeedbackResponsesForReceiverForCourse(courseId, oldEmail);"},{"lineNumber":931,"author":{"gitId":"-"},"content":""},{"lineNumber":932,"author":{"gitId":"-"},"content":"        for (FeedbackResponseAttributes response : responsesToUser) {"},{"lineNumber":933,"author":{"gitId":"-"},"content":"            try {"},{"lineNumber":934,"author":{"gitId":"-"},"content":"                updateFeedbackResponseCascade("},{"lineNumber":935,"author":{"gitId":"-"},"content":"                        FeedbackResponseAttributes.updateOptionsBuilder(response.getId())"},{"lineNumber":936,"author":{"gitId":"-"},"content":"                                .withRecipient(newEmail)"},{"lineNumber":937,"author":{"gitId":"-"},"content":"                                .build());"},{"lineNumber":938,"author":{"gitId":"-"},"content":"            } catch (EntityAlreadyExistsException e) {"},{"lineNumber":939,"author":{"gitId":"-"},"content":"                assert false : \"Feedback response failed to update successfully as email was already in use.\";"},{"lineNumber":940,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":941,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":942,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":943,"author":{"gitId":"-"},"content":""},{"lineNumber":944,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":945,"author":{"gitId":"-"},"content":"     * Deletes responses using {@link AttributesDeletionQuery}."},{"lineNumber":946,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":947,"author":{"gitId":"-"},"content":"    public void deleteFeedbackResponses(AttributesDeletionQuery query) {"},{"lineNumber":948,"author":{"gitId":"-"},"content":"        frDb.deleteFeedbackResponses(query);"},{"lineNumber":949,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":950,"author":{"gitId":"-"},"content":""},{"lineNumber":951,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":952,"author":{"gitId":"-"},"content":"     * Deletes a feedback response cascade its associated comments."},{"lineNumber":953,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":954,"author":{"gitId":"-"},"content":"    public void deleteFeedbackResponseCascade(String responseId) {"},{"lineNumber":955,"author":{"gitId":"-"},"content":"        frcLogic.deleteFeedbackResponseComments("},{"lineNumber":956,"author":{"gitId":"-"},"content":"                AttributesDeletionQuery.builder()"},{"lineNumber":957,"author":{"gitId":"-"},"content":"                        .withResponseId(responseId)"},{"lineNumber":958,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":959,"author":{"gitId":"-"},"content":"        frDb.deleteFeedbackResponse(responseId);"},{"lineNumber":960,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":961,"author":{"gitId":"-"},"content":""},{"lineNumber":962,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":963,"author":{"gitId":"-"},"content":"     * Deletes all feedback responses of a question cascade its associated comments."},{"lineNumber":964,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":965,"author":{"gitId":"-"},"content":"    public void deleteFeedbackResponsesForQuestionCascade(String feedbackQuestionId) {"},{"lineNumber":966,"author":{"gitId":"-"},"content":"        // delete all responses, comments of the question"},{"lineNumber":967,"author":{"gitId":"-"},"content":"        AttributesDeletionQuery query \u003d AttributesDeletionQuery.builder()"},{"lineNumber":968,"author":{"gitId":"-"},"content":"                .withQuestionId(feedbackQuestionId)"},{"lineNumber":969,"author":{"gitId":"-"},"content":"                .build();"},{"lineNumber":970,"author":{"gitId":"-"},"content":"        deleteFeedbackResponses(query);"},{"lineNumber":971,"author":{"gitId":"-"},"content":"        frcLogic.deleteFeedbackResponseComments(query);"},{"lineNumber":972,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":973,"author":{"gitId":"-"},"content":""},{"lineNumber":974,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":975,"author":{"gitId":"-"},"content":"     * Deletes all feedback responses involved an entity cascade its associated comments."},{"lineNumber":976,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":977,"author":{"gitId":"-"},"content":"     * @param courseId the course id"},{"lineNumber":978,"author":{"gitId":"-"},"content":"     * @param entityEmail the entity email"},{"lineNumber":979,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":980,"author":{"gitId":"-"},"content":"    public void deleteFeedbackResponsesInvolvedEntityOfCourseCascade(String courseId, String entityEmail) {"},{"lineNumber":981,"author":{"gitId":"-"},"content":"        // delete responses from the entity"},{"lineNumber":982,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e responsesFromStudent \u003d"},{"lineNumber":983,"author":{"gitId":"-"},"content":"                getFeedbackResponsesFromGiverForCourse(courseId, entityEmail);"},{"lineNumber":984,"author":{"gitId":"-"},"content":"        for (FeedbackResponseAttributes response : responsesFromStudent) {"},{"lineNumber":985,"author":{"gitId":"-"},"content":"            deleteFeedbackResponseCascade(response.getId());"},{"lineNumber":986,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":987,"author":{"gitId":"-"},"content":""},{"lineNumber":988,"author":{"gitId":"-"},"content":"        // delete responses to the entity"},{"lineNumber":989,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e responsesToStudent \u003d"},{"lineNumber":990,"author":{"gitId":"-"},"content":"                getFeedbackResponsesForReceiverForCourse(courseId, entityEmail);"},{"lineNumber":991,"author":{"gitId":"-"},"content":"        for (FeedbackResponseAttributes response : responsesToStudent) {"},{"lineNumber":992,"author":{"gitId":"-"},"content":"            deleteFeedbackResponseCascade(response.getId());"},{"lineNumber":993,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":994,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":995,"author":{"gitId":"-"},"content":""},{"lineNumber":996,"author":{"gitId":"-"},"content":"    private List\u003cFeedbackResponseAttributes\u003e getFeedbackResponsesFromTeamForQuestion("},{"lineNumber":997,"author":{"gitId":"-"},"content":"            String feedbackQuestionId, String courseId, String teamName, @Nullable CourseRoster courseRoster) {"},{"lineNumber":998,"author":{"gitId":"-"},"content":""},{"lineNumber":999,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e responses \u003d new ArrayList\u003c\u003e();"},{"lineNumber":1000,"author":{"gitId":"-"},"content":"        List\u003cStudentAttributes\u003e studentsInTeam \u003d courseRoster \u003d\u003d null"},{"lineNumber":1001,"author":{"gitId":"-"},"content":"                ? studentsLogic.getStudentsForTeam(teamName, courseId) : courseRoster.getTeamToMembersTable().get(teamName);"},{"lineNumber":1002,"author":{"gitId":"-"},"content":""},{"lineNumber":1003,"author":{"gitId":"-"},"content":"        for (StudentAttributes student : studentsInTeam) {"},{"lineNumber":1004,"author":{"gitId":"-"},"content":"            responses.addAll(frDb.getFeedbackResponsesFromGiverForQuestion("},{"lineNumber":1005,"author":{"gitId":"-"},"content":"                    feedbackQuestionId, student.getEmail()));"},{"lineNumber":1006,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1007,"author":{"gitId":"-"},"content":""},{"lineNumber":1008,"author":{"gitId":"-"},"content":"        responses.addAll(frDb.getFeedbackResponsesFromGiverForQuestion("},{"lineNumber":1009,"author":{"gitId":"-"},"content":"                                        feedbackQuestionId, teamName));"},{"lineNumber":1010,"author":{"gitId":"-"},"content":""},{"lineNumber":1011,"author":{"gitId":"-"},"content":"        return responses;"},{"lineNumber":1012,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1013,"author":{"gitId":"-"},"content":""},{"lineNumber":1014,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":1015,"author":{"gitId":"-"},"content":"     * Returns feedback responses given/received by an instructor."},{"lineNumber":1016,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":1017,"author":{"gitId":"-"},"content":"    private List\u003cFeedbackResponseAttributes\u003e getFeedbackResponsesToOrFromInstructorForQuestion("},{"lineNumber":1018,"author":{"gitId":"-"},"content":"            FeedbackQuestionAttributes question, InstructorAttributes instructor) {"},{"lineNumber":1019,"author":{"gitId":"-"},"content":"        UniqueResponsesSet viewableResponses \u003d new UniqueResponsesSet();"},{"lineNumber":1020,"author":{"gitId":"-"},"content":""},{"lineNumber":1021,"author":{"gitId":"-"},"content":"        // Add responses that the instructor submitted him/herself"},{"lineNumber":1022,"author":{"gitId":"-"},"content":"        if (question.getGiverType() \u003d\u003d FeedbackParticipantType.INSTRUCTORS) {"},{"lineNumber":1023,"author":{"gitId":"-"},"content":"            viewableResponses.addNewResponses("},{"lineNumber":1024,"author":{"gitId":"-"},"content":"                    getFeedbackResponsesFromGiverForQuestion(question.getFeedbackQuestionId(), instructor.getEmail())"},{"lineNumber":1025,"author":{"gitId":"-"},"content":"            );"},{"lineNumber":1026,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1027,"author":{"gitId":"-"},"content":""},{"lineNumber":1028,"author":{"gitId":"-"},"content":"        // Add responses that user is a receiver of when response is visible to receiver or instructors"},{"lineNumber":1029,"author":{"gitId":"-"},"content":"        if (question.getRecipientType() \u003d\u003d FeedbackParticipantType.INSTRUCTORS"},{"lineNumber":1030,"author":{"gitId":"-"},"content":"                \u0026\u0026 (question.isResponseVisibleTo(FeedbackParticipantType.RECEIVER)"},{"lineNumber":1031,"author":{"gitId":"-"},"content":"                || question.isResponseVisibleTo(FeedbackParticipantType.INSTRUCTORS))) {"},{"lineNumber":1032,"author":{"gitId":"-"},"content":"            viewableResponses.addNewResponses("},{"lineNumber":1033,"author":{"gitId":"-"},"content":"                    getFeedbackResponsesForReceiverForQuestion(question.getFeedbackQuestionId(), instructor.getEmail())"},{"lineNumber":1034,"author":{"gitId":"-"},"content":"            );"},{"lineNumber":1035,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1036,"author":{"gitId":"-"},"content":""},{"lineNumber":1037,"author":{"gitId":"-"},"content":"        return viewableResponses.getResponses();"},{"lineNumber":1038,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1039,"author":{"gitId":"-"},"content":""},{"lineNumber":1040,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":1041,"author":{"gitId":"-"},"content":"     * Returns viewable feedback responses for a student."},{"lineNumber":1042,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":1043,"author":{"gitId":"-"},"content":"    private List\u003cFeedbackResponseAttributes\u003e getViewableFeedbackResponsesForStudentForQuestion("},{"lineNumber":1044,"author":{"gitId":"-"},"content":"            FeedbackQuestionAttributes question, StudentAttributes student, CourseRoster courseRoster) {"},{"lineNumber":1045,"author":{"gitId":"-"},"content":"        UniqueResponsesSet viewableResponses \u003d new UniqueResponsesSet();"},{"lineNumber":1046,"author":{"gitId":"-"},"content":""},{"lineNumber":1047,"author":{"gitId":"-"},"content":"        // Add responses that the student submitted him/herself"},{"lineNumber":1048,"author":{"gitId":"-"},"content":"        if (question.getGiverType() !\u003d FeedbackParticipantType.INSTRUCTORS) {"},{"lineNumber":1049,"author":{"gitId":"-"},"content":"            viewableResponses.addNewResponses("},{"lineNumber":1050,"author":{"gitId":"-"},"content":"                    getFeedbackResponsesFromGiverForQuestion(question.getFeedbackQuestionId(), student.getEmail())"},{"lineNumber":1051,"author":{"gitId":"-"},"content":"            );"},{"lineNumber":1052,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1053,"author":{"gitId":"-"},"content":""},{"lineNumber":1054,"author":{"gitId":"-"},"content":"        // Add responses that user is a receiver of when response is visible to receiver"},{"lineNumber":1055,"author":{"gitId":"-"},"content":"        if (question.getRecipientType() !\u003d FeedbackParticipantType.INSTRUCTORS"},{"lineNumber":1056,"author":{"gitId":"-"},"content":"                \u0026\u0026 question.isResponseVisibleTo(FeedbackParticipantType.RECEIVER)) {"},{"lineNumber":1057,"author":{"gitId":"-"},"content":"            viewableResponses.addNewResponses("},{"lineNumber":1058,"author":{"gitId":"-"},"content":"                    getFeedbackResponsesForReceiverForQuestion(question.getFeedbackQuestionId(), student.getEmail())"},{"lineNumber":1059,"author":{"gitId":"-"},"content":"            );"},{"lineNumber":1060,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1061,"author":{"gitId":"-"},"content":""},{"lineNumber":1062,"author":{"gitId":"-"},"content":"        if (question.isResponseVisibleTo(FeedbackParticipantType.STUDENTS)) {"},{"lineNumber":1063,"author":{"gitId":"-"},"content":"            viewableResponses.addNewResponses(getFeedbackResponsesForQuestion(question.getId()));"},{"lineNumber":1064,"author":{"gitId":"-"},"content":""},{"lineNumber":1065,"author":{"gitId":"-"},"content":"            // Early return as STUDENTS covers all cases below."},{"lineNumber":1066,"author":{"gitId":"-"},"content":"            return viewableResponses.getResponses();"},{"lineNumber":1067,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1068,"author":{"gitId":"-"},"content":""},{"lineNumber":1069,"author":{"gitId":"-"},"content":"        if (question.getRecipientType().isTeam()"},{"lineNumber":1070,"author":{"gitId":"-"},"content":"                \u0026\u0026 question.isResponseVisibleTo(FeedbackParticipantType.RECEIVER)) {"},{"lineNumber":1071,"author":{"gitId":"-"},"content":"            viewableResponses.addNewResponses("},{"lineNumber":1072,"author":{"gitId":"-"},"content":"                    getFeedbackResponsesForReceiverForQuestion(question.getId(), student.getTeam())"},{"lineNumber":1073,"author":{"gitId":"-"},"content":"            );"},{"lineNumber":1074,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1075,"author":{"gitId":"-"},"content":""},{"lineNumber":1076,"author":{"gitId":"-"},"content":"        if (question.getGiverType() \u003d\u003d FeedbackParticipantType.TEAMS"},{"lineNumber":1077,"author":{"gitId":"-"},"content":"                || question.isResponseVisibleTo(FeedbackParticipantType.OWN_TEAM_MEMBERS)) {"},{"lineNumber":1078,"author":{"gitId":"-"},"content":"            viewableResponses.addNewResponses("},{"lineNumber":1079,"author":{"gitId":"-"},"content":"                    getFeedbackResponsesFromTeamForQuestion("},{"lineNumber":1080,"author":{"gitId":"-"},"content":"                            question.getId(), question.getCourseId(), student.getTeam(), courseRoster));"},{"lineNumber":1081,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1082,"author":{"gitId":"-"},"content":""},{"lineNumber":1083,"author":{"gitId":"-"},"content":"        if (question.isResponseVisibleTo(FeedbackParticipantType.RECEIVER_TEAM_MEMBERS)) {"},{"lineNumber":1084,"author":{"gitId":"-"},"content":"            for (StudentAttributes studentInTeam : courseRoster.getTeamToMembersTable().get(student.getTeam())) {"},{"lineNumber":1085,"author":{"gitId":"-"},"content":"                if (studentInTeam.getEmail().equals(student.getEmail())) {"},{"lineNumber":1086,"author":{"gitId":"-"},"content":"                    continue;"},{"lineNumber":1087,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":1088,"author":{"gitId":"-"},"content":"                List\u003cFeedbackResponseAttributes\u003e responses \u003d"},{"lineNumber":1089,"author":{"gitId":"-"},"content":"                        frDb.getFeedbackResponsesForReceiverForQuestion(question.getId(), studentInTeam.getEmail());"},{"lineNumber":1090,"author":{"gitId":"-"},"content":"                viewableResponses.addNewResponses(responses);"},{"lineNumber":1091,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":1092,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1093,"author":{"gitId":"-"},"content":""},{"lineNumber":1094,"author":{"gitId":"-"},"content":"        return viewableResponses.getResponses();"},{"lineNumber":1095,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1096,"author":{"gitId":"-"},"content":""},{"lineNumber":1097,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":1098,"author":{"gitId":"-"},"content":"     * Gets the number of feedback responses created within a specified time range."},{"lineNumber":1099,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":1100,"author":{"gitId":"-"},"content":"    int getNumFeedbackResponsesByTimeRange(Instant startTime, Instant endTime) {"},{"lineNumber":1101,"author":{"gitId":"-"},"content":"        return frDb.getNumFeedbackResponsesByTimeRange(startTime, endTime);"},{"lineNumber":1102,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1103,"author":{"gitId":"-"},"content":""},{"lineNumber":1104,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":1105,"author":{"gitId":"-"},"content":"     * Set contains only unique response."},{"lineNumber":1106,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":1107,"author":{"gitId":"-"},"content":"    private static class UniqueResponsesSet {"},{"lineNumber":1108,"author":{"gitId":"-"},"content":""},{"lineNumber":1109,"author":{"gitId":"-"},"content":"        private final Set\u003cString\u003e responseIds;"},{"lineNumber":1110,"author":{"gitId":"-"},"content":"        private final List\u003cFeedbackResponseAttributes\u003e responses;"},{"lineNumber":1111,"author":{"gitId":"-"},"content":""},{"lineNumber":1112,"author":{"gitId":"-"},"content":"        private UniqueResponsesSet() {"},{"lineNumber":1113,"author":{"gitId":"-"},"content":"            responseIds \u003d new HashSet\u003c\u003e();"},{"lineNumber":1114,"author":{"gitId":"-"},"content":"            responses \u003d new ArrayList\u003c\u003e();"},{"lineNumber":1115,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1116,"author":{"gitId":"-"},"content":""},{"lineNumber":1117,"author":{"gitId":"-"},"content":"        private void addNewResponses(Collection\u003cFeedbackResponseAttributes\u003e newResponses) {"},{"lineNumber":1118,"author":{"gitId":"-"},"content":"            newResponses.forEach(this::addNewResponse);"},{"lineNumber":1119,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1120,"author":{"gitId":"-"},"content":""},{"lineNumber":1121,"author":{"gitId":"-"},"content":"        private void addNewResponse(FeedbackResponseAttributes newResponse) {"},{"lineNumber":1122,"author":{"gitId":"-"},"content":"            if (responseIds.contains(newResponse.getId())) {"},{"lineNumber":1123,"author":{"gitId":"-"},"content":"                return;"},{"lineNumber":1124,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":1125,"author":{"gitId":"-"},"content":"            responseIds.add(newResponse.getId());"},{"lineNumber":1126,"author":{"gitId":"-"},"content":"            responses.add(newResponse);"},{"lineNumber":1127,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1128,"author":{"gitId":"-"},"content":""},{"lineNumber":1129,"author":{"gitId":"-"},"content":"        private List\u003cFeedbackResponseAttributes\u003e getResponses() {"},{"lineNumber":1130,"author":{"gitId":"-"},"content":"            return responses;"},{"lineNumber":1131,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1132,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1133,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"hhdqirui":3,"-":1130}},{"path":"src/main/java/teammates/sqllogic/api/Logic.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.sqllogic.api;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.time.Instant;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":5,"author":{"gitId":"hhdqirui"},"content":"import java.util.UUID;"},{"lineNumber":6,"author":{"gitId":"-"},"content":""},{"lineNumber":7,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.NotificationStyle;"},{"lineNumber":8,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.NotificationTargetUser;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.SqlDataBundle;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":11,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":13,"author":{"gitId":"kevin9foong"},"content":"import teammates.sqllogic.core.AccountRequestsLogic;"},{"lineNumber":14,"author":{"gitId":"hhdqirui"},"content":"import teammates.sqllogic.core.AccountsLogic;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import teammates.sqllogic.core.CoursesLogic;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"import teammates.sqllogic.core.DataBundleLogic;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"import teammates.sqllogic.core.DeadlineExtensionsLogic;"},{"lineNumber":18,"author":{"gitId":"hhdqirui"},"content":"import teammates.sqllogic.core.FeedbackQuestionsLogic;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"import teammates.sqllogic.core.FeedbackSessionsLogic;"},{"lineNumber":20,"author":{"gitId":"hhdqirui"},"content":"import teammates.sqllogic.core.NotificationsLogic;"},{"lineNumber":21,"author":{"gitId":"-"},"content":"import teammates.sqllogic.core.UsageStatisticsLogic;"},{"lineNumber":22,"author":{"gitId":"-"},"content":"import teammates.sqllogic.core.UsersLogic;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Account;"},{"lineNumber":24,"author":{"gitId":"kevin9foong"},"content":"import teammates.storage.sqlentity.AccountRequest;"},{"lineNumber":25,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Course;"},{"lineNumber":26,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.DeadlineExtension;"},{"lineNumber":27,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.FeedbackQuestion;"},{"lineNumber":28,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.FeedbackSession;"},{"lineNumber":29,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":30,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.Notification;"},{"lineNumber":31,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Section;"},{"lineNumber":32,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Student;"},{"lineNumber":33,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.UsageStatistics;"},{"lineNumber":34,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.User;"},{"lineNumber":35,"author":{"gitId":"-"},"content":""},{"lineNumber":36,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":37,"author":{"gitId":"-"},"content":" * Provides the business logic for production usage of the system."},{"lineNumber":38,"author":{"gitId":"-"},"content":" *"},{"lineNumber":39,"author":{"gitId":"-"},"content":" * \u003cp\u003eThis is a Facade class which simply forwards the method to internal classes."},{"lineNumber":40,"author":{"gitId":"-"},"content":" */"},{"lineNumber":41,"author":{"gitId":"-"},"content":"public class Logic {"},{"lineNumber":42,"author":{"gitId":"-"},"content":"    private static final Logic instance \u003d new Logic();"},{"lineNumber":43,"author":{"gitId":"-"},"content":""},{"lineNumber":44,"author":{"gitId":"hhdqirui"},"content":"    final AccountsLogic accountsLogic \u003d AccountsLogic.inst();"},{"lineNumber":45,"author":{"gitId":"-"},"content":"    final AccountRequestsLogic accountRequestLogic \u003d AccountRequestsLogic.inst();"},{"lineNumber":46,"author":{"gitId":"-"},"content":"    final CoursesLogic coursesLogic \u003d CoursesLogic.inst();"},{"lineNumber":47,"author":{"gitId":"-"},"content":"    final DeadlineExtensionsLogic deadlineExtensionsLogic \u003d DeadlineExtensionsLogic.inst();"},{"lineNumber":48,"author":{"gitId":"hhdqirui"},"content":"    final FeedbackQuestionsLogic feedbackQuestionsLogic \u003d FeedbackQuestionsLogic.inst();"},{"lineNumber":49,"author":{"gitId":"-"},"content":"    final FeedbackSessionsLogic feedbackSessionsLogic \u003d FeedbackSessionsLogic.inst();"},{"lineNumber":50,"author":{"gitId":"-"},"content":"    final UsageStatisticsLogic usageStatisticsLogic \u003d UsageStatisticsLogic.inst();"},{"lineNumber":51,"author":{"gitId":"-"},"content":"    final UsersLogic usersLogic \u003d UsersLogic.inst();"},{"lineNumber":52,"author":{"gitId":"hhdqirui"},"content":"    final NotificationsLogic notificationsLogic \u003d NotificationsLogic.inst();"},{"lineNumber":53,"author":{"gitId":"-"},"content":"    final DataBundleLogic dataBundleLogic \u003d DataBundleLogic.inst();"},{"lineNumber":54,"author":{"gitId":"-"},"content":""},{"lineNumber":55,"author":{"gitId":"-"},"content":"    Logic() {"},{"lineNumber":56,"author":{"gitId":"-"},"content":"        // prevent initialization"},{"lineNumber":57,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":58,"author":{"gitId":"-"},"content":""},{"lineNumber":59,"author":{"gitId":"-"},"content":"    public static Logic inst() {"},{"lineNumber":60,"author":{"gitId":"-"},"content":"        return instance;"},{"lineNumber":61,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":62,"author":{"gitId":"-"},"content":""},{"lineNumber":63,"author":{"gitId":"kevin9foong"},"content":"    /**"},{"lineNumber":64,"author":{"gitId":"kevin9foong"},"content":"     * Creates an account request."},{"lineNumber":65,"author":{"gitId":"kevin9foong"},"content":"     *"},{"lineNumber":66,"author":{"gitId":"kevin9foong"},"content":"     * @return newly created account request."},{"lineNumber":67,"author":{"gitId":"kevin9foong"},"content":"     * @throws InvalidParametersException if the account request details are invalid."},{"lineNumber":68,"author":{"gitId":"kevin9foong"},"content":"     * @throws EntityAlreadyExistsException if the account request already exists."},{"lineNumber":69,"author":{"gitId":"kevin9foong"},"content":"     */"},{"lineNumber":70,"author":{"gitId":"kevin9foong"},"content":"    public AccountRequest createAccountRequest(String name, String email, String institute)"},{"lineNumber":71,"author":{"gitId":"kevin9foong"},"content":"            throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":72,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":73,"author":{"gitId":"kevin9foong"},"content":"        return accountRequestLogic.createAccountRequest(name, email, institute);"},{"lineNumber":74,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":75,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":76,"author":{"gitId":"kevin9foong"},"content":"    /**"},{"lineNumber":77,"author":{"gitId":"kevin9foong"},"content":"     * Gets the account request with the given email and institute."},{"lineNumber":78,"author":{"gitId":"kevin9foong"},"content":"     *"},{"lineNumber":79,"author":{"gitId":"kevin9foong"},"content":"     * @return account request with the given email and institute."},{"lineNumber":80,"author":{"gitId":"kevin9foong"},"content":"     */"},{"lineNumber":81,"author":{"gitId":"kevin9foong"},"content":"    public AccountRequest getAccountRequest(String email, String institute) {"},{"lineNumber":82,"author":{"gitId":"kevin9foong"},"content":"        return accountRequestLogic.getAccountRequest(email, institute);"},{"lineNumber":83,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":84,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":85,"author":{"gitId":"kevin9foong"},"content":"    /**"},{"lineNumber":86,"author":{"gitId":"kevin9foong"},"content":"     * Creates/Resets the account request with the given email and institute"},{"lineNumber":87,"author":{"gitId":"kevin9foong"},"content":"     * such that it is not registered."},{"lineNumber":88,"author":{"gitId":"kevin9foong"},"content":"     *"},{"lineNumber":89,"author":{"gitId":"kevin9foong"},"content":"     * @return account request that is unregistered with the"},{"lineNumber":90,"author":{"gitId":"kevin9foong"},"content":"     *         email and institute."},{"lineNumber":91,"author":{"gitId":"kevin9foong"},"content":"     */"},{"lineNumber":92,"author":{"gitId":"kevin9foong"},"content":"    public AccountRequest resetAccountRequest(String email, String institute)"},{"lineNumber":93,"author":{"gitId":"kevin9foong"},"content":"            throws EntityDoesNotExistException, InvalidParametersException {"},{"lineNumber":94,"author":{"gitId":"kevin9foong"},"content":"        return accountRequestLogic.resetAccountRequest(email, institute);"},{"lineNumber":95,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":96,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":97,"author":{"gitId":"kevin9foong"},"content":"    /**"},{"lineNumber":98,"author":{"gitId":"kevin9foong"},"content":"     * Deletes account request by email and institute."},{"lineNumber":99,"author":{"gitId":"kevin9foong"},"content":"     *"},{"lineNumber":100,"author":{"gitId":"kevin9foong"},"content":"     * \u003cul\u003e"},{"lineNumber":101,"author":{"gitId":"kevin9foong"},"content":"     * \u003cli\u003eFails silently if no such account request.\u003c/li\u003e"},{"lineNumber":102,"author":{"gitId":"kevin9foong"},"content":"     * \u003c/ul\u003e"},{"lineNumber":103,"author":{"gitId":"kevin9foong"},"content":"     *"},{"lineNumber":104,"author":{"gitId":"kevin9foong"},"content":"     * \u003cp\u003ePreconditions:\u003c/p\u003e"},{"lineNumber":105,"author":{"gitId":"kevin9foong"},"content":"     * All parameters are non-null."},{"lineNumber":106,"author":{"gitId":"kevin9foong"},"content":"     */"},{"lineNumber":107,"author":{"gitId":"kevin9foong"},"content":"    public void deleteAccountRequest(String email, String institute) {"},{"lineNumber":108,"author":{"gitId":"kevin9foong"},"content":"        accountRequestLogic.deleteAccountRequest(email, institute);"},{"lineNumber":109,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":110,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":111,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":112,"author":{"gitId":"-"},"content":"     * Gets an account."},{"lineNumber":113,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":114,"author":{"gitId":"-"},"content":"    public Account getAccount(UUID id) {"},{"lineNumber":115,"author":{"gitId":"-"},"content":"        return accountsLogic.getAccount(id);"},{"lineNumber":116,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":117,"author":{"gitId":"-"},"content":""},{"lineNumber":118,"author":{"gitId":"domlimm"},"content":"    /**"},{"lineNumber":119,"author":{"gitId":"domlimm"},"content":"     * Gets an account by googleId."},{"lineNumber":120,"author":{"gitId":"domlimm"},"content":"     */"},{"lineNumber":121,"author":{"gitId":"domlimm"},"content":"    public Account getAccountForGoogleId(String googleId) {"},{"lineNumber":122,"author":{"gitId":"domlimm"},"content":"        return accountsLogic.getAccountForGoogleId(googleId);"},{"lineNumber":123,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":124,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":125,"author":{"gitId":"domlimm"},"content":"    /**"},{"lineNumber":126,"author":{"gitId":"domlimm"},"content":"     * Get a list of accounts associated with email provided."},{"lineNumber":127,"author":{"gitId":"domlimm"},"content":"     */"},{"lineNumber":128,"author":{"gitId":"domlimm"},"content":"    public List\u003cAccount\u003e getAccountsForEmail(String email) {"},{"lineNumber":129,"author":{"gitId":"domlimm"},"content":"        return accountsLogic.getAccountsForEmail(email);"},{"lineNumber":130,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":131,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":132,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":133,"author":{"gitId":"-"},"content":"     * Creates an account."},{"lineNumber":134,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":135,"author":{"gitId":"-"},"content":"     * @return the created account"},{"lineNumber":136,"author":{"gitId":"-"},"content":"     * @throws InvalidParametersException if the account is not valid"},{"lineNumber":137,"author":{"gitId":"-"},"content":"     * @throws EntityAlreadyExistsException if the account already exists in the database."},{"lineNumber":138,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":139,"author":{"gitId":"-"},"content":"    public Account createAccount(Account account)"},{"lineNumber":140,"author":{"gitId":"-"},"content":"            throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":141,"author":{"gitId":"-"},"content":"        return accountsLogic.createAccount(account);"},{"lineNumber":142,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":143,"author":{"gitId":"-"},"content":""},{"lineNumber":144,"author":{"gitId":"domlimm"},"content":"    /**"},{"lineNumber":145,"author":{"gitId":"domlimm"},"content":"     * Deletes account by googleId."},{"lineNumber":146,"author":{"gitId":"domlimm"},"content":"     *"},{"lineNumber":147,"author":{"gitId":"domlimm"},"content":"     * \u003cul\u003e"},{"lineNumber":148,"author":{"gitId":"domlimm"},"content":"     * \u003cli\u003eFails silently if no such account.\u003c/li\u003e"},{"lineNumber":149,"author":{"gitId":"domlimm"},"content":"     * \u003c/ul\u003e"},{"lineNumber":150,"author":{"gitId":"domlimm"},"content":"     *"},{"lineNumber":151,"author":{"gitId":"domlimm"},"content":"     * \u003cp\u003ePreconditions:\u003c/p\u003e"},{"lineNumber":152,"author":{"gitId":"domlimm"},"content":"     * All parameters are non-null."},{"lineNumber":153,"author":{"gitId":"domlimm"},"content":"     */"},{"lineNumber":154,"author":{"gitId":"domlimm"},"content":"    public void deleteAccount(String googleId) {"},{"lineNumber":155,"author":{"gitId":"domlimm"},"content":"        accountsLogic.deleteAccount(googleId);"},{"lineNumber":156,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":157,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":158,"author":{"gitId":"domlimm"},"content":"    /**"},{"lineNumber":159,"author":{"gitId":"domlimm"},"content":"     * Deletes account and all users by googleId."},{"lineNumber":160,"author":{"gitId":"domlimm"},"content":"     *"},{"lineNumber":161,"author":{"gitId":"domlimm"},"content":"     * \u003cul\u003e"},{"lineNumber":162,"author":{"gitId":"domlimm"},"content":"     * \u003cli\u003eFails silently if no such account.\u003c/li\u003e"},{"lineNumber":163,"author":{"gitId":"domlimm"},"content":"     * \u003c/ul\u003e"},{"lineNumber":164,"author":{"gitId":"domlimm"},"content":"     *"},{"lineNumber":165,"author":{"gitId":"domlimm"},"content":"     * \u003cp\u003ePreconditions:\u003c/p\u003e"},{"lineNumber":166,"author":{"gitId":"domlimm"},"content":"     * All parameters are non-null."},{"lineNumber":167,"author":{"gitId":"domlimm"},"content":"     */"},{"lineNumber":168,"author":{"gitId":"domlimm"},"content":"    public void deleteAccountCascade(String googleId) {"},{"lineNumber":169,"author":{"gitId":"domlimm"},"content":"        accountsLogic.deleteAccountCascade(googleId);"},{"lineNumber":170,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":171,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":172,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":173,"author":{"gitId":"-"},"content":"     * Gets a course by course id."},{"lineNumber":174,"author":{"gitId":"-"},"content":"     * @param courseId courseId of the course."},{"lineNumber":175,"author":{"gitId":"-"},"content":"     * @return the specified course."},{"lineNumber":176,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":177,"author":{"gitId":"-"},"content":"    public Course getCourse(String courseId) {"},{"lineNumber":178,"author":{"gitId":"-"},"content":"        return coursesLogic.getCourse(courseId);"},{"lineNumber":179,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":180,"author":{"gitId":"-"},"content":""},{"lineNumber":181,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":182,"author":{"gitId":"-"},"content":"     * Creates a course."},{"lineNumber":183,"author":{"gitId":"-"},"content":"     * @param course the course to create."},{"lineNumber":184,"author":{"gitId":"-"},"content":"     * @return the created course."},{"lineNumber":185,"author":{"gitId":"-"},"content":"     * @throws InvalidParametersException if the course is not valid."},{"lineNumber":186,"author":{"gitId":"-"},"content":"     * @throws EntityAlreadyExistsException if the course already exists."},{"lineNumber":187,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":188,"author":{"gitId":"-"},"content":"    public Course createCourse(Course course) throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":189,"author":{"gitId":"-"},"content":"        return coursesLogic.createCourse(course);"},{"lineNumber":190,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":191,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":192,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":193,"author":{"gitId":"EuniceSim142"},"content":"     * Deletes a course by course id."},{"lineNumber":194,"author":{"gitId":"EuniceSim142"},"content":"     * @param courseId of course."},{"lineNumber":195,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":196,"author":{"gitId":"EuniceSim142"},"content":"    public void deleteCourseCascade(String courseId) {"},{"lineNumber":197,"author":{"gitId":"EuniceSim142"},"content":"        coursesLogic.deleteCourseCascade(courseId);"},{"lineNumber":198,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":199,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":200,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":201,"author":{"gitId":"EuniceSim142"},"content":"     * Moves a course to Recycle Bin by its given corresponding ID."},{"lineNumber":202,"author":{"gitId":"EuniceSim142"},"content":"     * @return the deletion timestamp assigned to the course."},{"lineNumber":203,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":204,"author":{"gitId":"EuniceSim142"},"content":"    public Course moveCourseToRecycleBin(String courseId) throws EntityDoesNotExistException {"},{"lineNumber":205,"author":{"gitId":"EuniceSim142"},"content":"        return coursesLogic.moveCourseToRecycleBin(courseId);"},{"lineNumber":206,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":207,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":208,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":209,"author":{"gitId":"EuniceSim142"},"content":"     * Restores a course and all data related to the course from Recycle Bin by"},{"lineNumber":210,"author":{"gitId":"EuniceSim142"},"content":"     * its given corresponding ID."},{"lineNumber":211,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":212,"author":{"gitId":"EuniceSim142"},"content":"    public void restoreCourseFromRecycleBin(String courseId) throws EntityDoesNotExistException {"},{"lineNumber":213,"author":{"gitId":"EuniceSim142"},"content":"        coursesLogic.restoreCourseFromRecycleBin(courseId);"},{"lineNumber":214,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":215,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":216,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":217,"author":{"gitId":"EuniceSim142"},"content":"     * Updates a course."},{"lineNumber":218,"author":{"gitId":"EuniceSim142"},"content":"     *"},{"lineNumber":219,"author":{"gitId":"EuniceSim142"},"content":"     * @return updated course"},{"lineNumber":220,"author":{"gitId":"EuniceSim142"},"content":"     * @throws InvalidParametersException if attributes to update are not valid"},{"lineNumber":221,"author":{"gitId":"EuniceSim142"},"content":"     * @throws EntityDoesNotExistException if the course cannot be found"},{"lineNumber":222,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":223,"author":{"gitId":"EuniceSim142"},"content":"    public Course updateCourse(String courseId, String name, String timezone)"},{"lineNumber":224,"author":{"gitId":"EuniceSim142"},"content":"            throws InvalidParametersException, EntityDoesNotExistException {"},{"lineNumber":225,"author":{"gitId":"EuniceSim142"},"content":"        return coursesLogic.updateCourse(courseId, name, timezone);"},{"lineNumber":226,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":227,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":228,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":229,"author":{"gitId":"EuniceSim142"},"content":"     * Gets a list of section names for the given {@code courseId}."},{"lineNumber":230,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":231,"author":{"gitId":"EuniceSim142"},"content":"    public List\u003cString\u003e getSectionNamesForCourse(String courseId)"},{"lineNumber":232,"author":{"gitId":"EuniceSim142"},"content":"            throws EntityDoesNotExistException {"},{"lineNumber":233,"author":{"gitId":"EuniceSim142"},"content":"        return coursesLogic.getSectionNamesForCourse(courseId);"},{"lineNumber":234,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":235,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":236,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":237,"author":{"gitId":"-"},"content":"     * Get section by {@code courseId} and {@code teamName}."},{"lineNumber":238,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":239,"author":{"gitId":"-"},"content":"    public Section getSectionByCourseIdAndTeam(String courseId, String teamName) {"},{"lineNumber":240,"author":{"gitId":"-"},"content":"        return coursesLogic.getSectionByCourseIdAndTeam(courseId, teamName);"},{"lineNumber":241,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":242,"author":{"gitId":"-"},"content":""},{"lineNumber":243,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":244,"author":{"gitId":"-"},"content":"     * Creates a deadline extension."},{"lineNumber":245,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":246,"author":{"gitId":"-"},"content":"     * @return created deadline extension"},{"lineNumber":247,"author":{"gitId":"-"},"content":"     * @throws InvalidParametersException if the deadline extension is not valid"},{"lineNumber":248,"author":{"gitId":"-"},"content":"     * @throws EntityAlreadyExistsException if the deadline extension already exist"},{"lineNumber":249,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":250,"author":{"gitId":"-"},"content":"    public DeadlineExtension createDeadlineExtension(DeadlineExtension deadlineExtension)"},{"lineNumber":251,"author":{"gitId":"-"},"content":"            throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":252,"author":{"gitId":"-"},"content":"        return deadlineExtensionsLogic.createDeadlineExtension(deadlineExtension);"},{"lineNumber":253,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":254,"author":{"gitId":"-"},"content":""},{"lineNumber":255,"author":{"gitId":"kevin9foong"},"content":"    /**"},{"lineNumber":256,"author":{"gitId":"kevin9foong"},"content":"     * Fetch the deadline extension for a given user and session feedback."},{"lineNumber":257,"author":{"gitId":"kevin9foong"},"content":"     *"},{"lineNumber":258,"author":{"gitId":"kevin9foong"},"content":"     * @return deadline extension instant if exists, else the default end time instant"},{"lineNumber":259,"author":{"gitId":"kevin9foong"},"content":"     *         for the session feedback."},{"lineNumber":260,"author":{"gitId":"kevin9foong"},"content":"     */"},{"lineNumber":261,"author":{"gitId":"kevin9foong"},"content":"    public Instant getDeadlineForUser(FeedbackSession session, User user) {"},{"lineNumber":262,"author":{"gitId":"kevin9foong"},"content":"        return deadlineExtensionsLogic.getDeadlineForUser(session, user);"},{"lineNumber":263,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":264,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":265,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":266,"author":{"gitId":"-"},"content":"     * Gets a feedback session."},{"lineNumber":267,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":268,"author":{"gitId":"-"},"content":"     * @return null if not found."},{"lineNumber":269,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":270,"author":{"gitId":"-"},"content":"    public FeedbackSession getFeedbackSession(UUID id) {"},{"lineNumber":271,"author":{"gitId":"-"},"content":"        return feedbackSessionsLogic.getFeedbackSession(id);"},{"lineNumber":272,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":273,"author":{"gitId":"-"},"content":""},{"lineNumber":274,"author":{"gitId":"hhdqirui"},"content":"    /**"},{"lineNumber":275,"author":{"gitId":"hhdqirui"},"content":"     * Gets a feedback session for {@code feedbackSessionName} and {@code courseId}."},{"lineNumber":276,"author":{"gitId":"hhdqirui"},"content":"     *"},{"lineNumber":277,"author":{"gitId":"hhdqirui"},"content":"     * @return null if not found."},{"lineNumber":278,"author":{"gitId":"hhdqirui"},"content":"     */"},{"lineNumber":279,"author":{"gitId":"hhdqirui"},"content":"    public FeedbackSession getFeedbackSession(String feedbackSessionName, String courseId) {"},{"lineNumber":280,"author":{"gitId":"hhdqirui"},"content":"        return feedbackSessionsLogic.getFeedbackSession(feedbackSessionName, courseId);"},{"lineNumber":281,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":282,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":283,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":284,"author":{"gitId":"-"},"content":"     * Creates a feedback session."},{"lineNumber":285,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":286,"author":{"gitId":"-"},"content":"     * @return created feedback session"},{"lineNumber":287,"author":{"gitId":"-"},"content":"     * @throws InvalidParametersException if the session is not valid"},{"lineNumber":288,"author":{"gitId":"-"},"content":"     * @throws EntityAlreadyExistsException if the session already exist"},{"lineNumber":289,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":290,"author":{"gitId":"-"},"content":"    public FeedbackSession createFeedbackSession(FeedbackSession session)"},{"lineNumber":291,"author":{"gitId":"-"},"content":"            throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":292,"author":{"gitId":"-"},"content":"        return feedbackSessionsLogic.createFeedbackSession(session);"},{"lineNumber":293,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":294,"author":{"gitId":"-"},"content":""},{"lineNumber":295,"author":{"gitId":"hhdqirui"},"content":"    /**"},{"lineNumber":296,"author":{"gitId":"hhdqirui"},"content":"     * Creates a new feedback question."},{"lineNumber":297,"author":{"gitId":"hhdqirui"},"content":"     *"},{"lineNumber":298,"author":{"gitId":"hhdqirui"},"content":"     * \u003cbr/\u003ePreconditions: \u003cbr/\u003e"},{"lineNumber":299,"author":{"gitId":"hhdqirui"},"content":"     * * All parameters are non-null."},{"lineNumber":300,"author":{"gitId":"hhdqirui"},"content":"     *"},{"lineNumber":301,"author":{"gitId":"hhdqirui"},"content":"     * @return the created question"},{"lineNumber":302,"author":{"gitId":"hhdqirui"},"content":"     * @throws InvalidParametersException if the question is invalid"},{"lineNumber":303,"author":{"gitId":"hhdqirui"},"content":"     */"},{"lineNumber":304,"author":{"gitId":"hhdqirui"},"content":"    public FeedbackQuestion createFeedbackQuestion(FeedbackQuestion feedbackQuestion) throws InvalidParametersException {"},{"lineNumber":305,"author":{"gitId":"hhdqirui"},"content":"        return feedbackQuestionsLogic.createFeedbackQuestion(feedbackQuestion);"},{"lineNumber":306,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":307,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":308,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":309,"author":{"gitId":"-"},"content":"     * Publishes a feedback session."},{"lineNumber":310,"author":{"gitId":"-"},"content":"     * @return the published feedback session"},{"lineNumber":311,"author":{"gitId":"-"},"content":"     * @throws EntityDoesNotExistException if the feedback session cannot be found"},{"lineNumber":312,"author":{"gitId":"-"},"content":"     * @throws InvalidParametersException if session is already published"},{"lineNumber":313,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":314,"author":{"gitId":"-"},"content":"    public FeedbackSession publishFeedbackSession(String feedbackSessionName, String courseId)"},{"lineNumber":315,"author":{"gitId":"-"},"content":"            throws EntityDoesNotExistException, InvalidParametersException {"},{"lineNumber":316,"author":{"gitId":"-"},"content":""},{"lineNumber":317,"author":{"gitId":"-"},"content":"        assert feedbackSessionName !\u003d null;"},{"lineNumber":318,"author":{"gitId":"-"},"content":"        assert courseId !\u003d null;"},{"lineNumber":319,"author":{"gitId":"-"},"content":""},{"lineNumber":320,"author":{"gitId":"-"},"content":"        return feedbackSessionsLogic.publishFeedbackSession(feedbackSessionName, courseId);"},{"lineNumber":321,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":322,"author":{"gitId":"-"},"content":""},{"lineNumber":323,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":324,"author":{"gitId":"-"},"content":"     * Get usage statistics within a time range."},{"lineNumber":325,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":326,"author":{"gitId":"-"},"content":"    public List\u003cUsageStatistics\u003e getUsageStatisticsForTimeRange(Instant startTime, Instant endTime) {"},{"lineNumber":327,"author":{"gitId":"-"},"content":"        return usageStatisticsLogic.getUsageStatisticsForTimeRange(startTime, endTime);"},{"lineNumber":328,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":329,"author":{"gitId":"-"},"content":""},{"lineNumber":330,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":331,"author":{"gitId":"-"},"content":"     * Calculate usage statistics within a time range."},{"lineNumber":332,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":333,"author":{"gitId":"-"},"content":"    public UsageStatistics calculateEntitiesStatisticsForTimeRange(Instant startTime, Instant endTime) {"},{"lineNumber":334,"author":{"gitId":"-"},"content":"        return usageStatisticsLogic.calculateEntitiesStatisticsForTimeRange(startTime, endTime);"},{"lineNumber":335,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":336,"author":{"gitId":"-"},"content":""},{"lineNumber":337,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":338,"author":{"gitId":"-"},"content":"     * Create usage statistics within a time range."},{"lineNumber":339,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":340,"author":{"gitId":"-"},"content":"    public void createUsageStatistics(UsageStatistics attributes)"},{"lineNumber":341,"author":{"gitId":"-"},"content":"            throws EntityAlreadyExistsException, InvalidParametersException {"},{"lineNumber":342,"author":{"gitId":"-"},"content":"        usageStatisticsLogic.createUsageStatistics(attributes);"},{"lineNumber":343,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":344,"author":{"gitId":"-"},"content":""},{"lineNumber":345,"author":{"gitId":"hhdqirui"},"content":"    /**"},{"lineNumber":346,"author":{"gitId":"hhdqirui"},"content":"     * Creates a notification."},{"lineNumber":347,"author":{"gitId":"hhdqirui"},"content":"     *"},{"lineNumber":348,"author":{"gitId":"hhdqirui"},"content":"     * \u003cp\u003ePreconditions:\u003c/p\u003e"},{"lineNumber":349,"author":{"gitId":"hhdqirui"},"content":"     * * All parameters are non-null."},{"lineNumber":350,"author":{"gitId":"hhdqirui"},"content":"     *"},{"lineNumber":351,"author":{"gitId":"hhdqirui"},"content":"     * @return created notification"},{"lineNumber":352,"author":{"gitId":"hhdqirui"},"content":"     * @throws InvalidParametersException if the notification is not valid"},{"lineNumber":353,"author":{"gitId":"hhdqirui"},"content":"     * @throws EntityAlreadyExistsException if the notification exists in the database"},{"lineNumber":354,"author":{"gitId":"hhdqirui"},"content":"     */"},{"lineNumber":355,"author":{"gitId":"hhdqirui"},"content":"    public Notification createNotification(Notification notification) throws"},{"lineNumber":356,"author":{"gitId":"hhdqirui"},"content":"            InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":357,"author":{"gitId":"hhdqirui"},"content":"        return notificationsLogic.createNotification(notification);"},{"lineNumber":358,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":359,"author":{"gitId":"-"},"content":""},{"lineNumber":360,"author":{"gitId":"hhdqirui"},"content":"    /**"},{"lineNumber":361,"author":{"gitId":"hhdqirui"},"content":"     * Gets a notification by ID."},{"lineNumber":362,"author":{"gitId":"hhdqirui"},"content":"     *"},{"lineNumber":363,"author":{"gitId":"hhdqirui"},"content":"     * \u003cp\u003ePreconditions:\u003c/p\u003e"},{"lineNumber":364,"author":{"gitId":"hhdqirui"},"content":"     * * All parameters are non-null."},{"lineNumber":365,"author":{"gitId":"hhdqirui"},"content":"     *"},{"lineNumber":366,"author":{"gitId":"hhdqirui"},"content":"     * @return Null if no match found."},{"lineNumber":367,"author":{"gitId":"hhdqirui"},"content":"     */"},{"lineNumber":368,"author":{"gitId":"hhdqirui"},"content":"    public Notification getNotification(UUID notificationId) {"},{"lineNumber":369,"author":{"gitId":"hhdqirui"},"content":"        return notificationsLogic.getNotification(notificationId);"},{"lineNumber":370,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":371,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":372,"author":{"gitId":"hhdqirui"},"content":"    /**"},{"lineNumber":373,"author":{"gitId":"hhdqirui"},"content":"     * Updates a notification."},{"lineNumber":374,"author":{"gitId":"hhdqirui"},"content":"     *"},{"lineNumber":375,"author":{"gitId":"hhdqirui"},"content":"     * \u003cp\u003ePreconditions:\u003c/p\u003e"},{"lineNumber":376,"author":{"gitId":"hhdqirui"},"content":"     * * All parameters are non-null."},{"lineNumber":377,"author":{"gitId":"hhdqirui"},"content":"     * @return updated notification"},{"lineNumber":378,"author":{"gitId":"hhdqirui"},"content":"     * @throws InvalidParametersException if the notification is not valid"},{"lineNumber":379,"author":{"gitId":"hhdqirui"},"content":"     * @throws EntityDoesNotExistException if the notification does not exist in the database"},{"lineNumber":380,"author":{"gitId":"hhdqirui"},"content":"     */"},{"lineNumber":381,"author":{"gitId":"hhdqirui"},"content":"    public Notification updateNotification(UUID notificationId, Instant startTime, Instant endTime,"},{"lineNumber":382,"author":{"gitId":"hhdqirui"},"content":"                                           NotificationStyle style, NotificationTargetUser targetUser, String title,"},{"lineNumber":383,"author":{"gitId":"hhdqirui"},"content":"                                           String message) throws"},{"lineNumber":384,"author":{"gitId":"hhdqirui"},"content":"            InvalidParametersException, EntityDoesNotExistException {"},{"lineNumber":385,"author":{"gitId":"hhdqirui"},"content":"        return notificationsLogic.updateNotification(notificationId, startTime, endTime, style, targetUser, title, message);"},{"lineNumber":386,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":387,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":388,"author":{"gitId":"hhdqirui"},"content":"    /**"},{"lineNumber":389,"author":{"gitId":"hhdqirui"},"content":"     * Deletes notification by ID."},{"lineNumber":390,"author":{"gitId":"hhdqirui"},"content":"     *"},{"lineNumber":391,"author":{"gitId":"hhdqirui"},"content":"     * \u003cul\u003e"},{"lineNumber":392,"author":{"gitId":"hhdqirui"},"content":"     * \u003cli\u003eFails silently if no such notification.\u003c/li\u003e"},{"lineNumber":393,"author":{"gitId":"hhdqirui"},"content":"     * \u003c/ul\u003e"},{"lineNumber":394,"author":{"gitId":"hhdqirui"},"content":"     *"},{"lineNumber":395,"author":{"gitId":"hhdqirui"},"content":"     * \u003cp\u003ePreconditions:\u003c/p\u003e"},{"lineNumber":396,"author":{"gitId":"hhdqirui"},"content":"     * * All parameters are non-null."},{"lineNumber":397,"author":{"gitId":"hhdqirui"},"content":"     */"},{"lineNumber":398,"author":{"gitId":"hhdqirui"},"content":"    public void deleteNotification(UUID notificationId) {"},{"lineNumber":399,"author":{"gitId":"hhdqirui"},"content":"        notificationsLogic.deleteNotification(notificationId);"},{"lineNumber":400,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":401,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":402,"author":{"gitId":"hhdqirui"},"content":"    /**"},{"lineNumber":403,"author":{"gitId":"hhdqirui"},"content":"     * Get a list of IDs of the read notifications of the account."},{"lineNumber":404,"author":{"gitId":"hhdqirui"},"content":"     */"},{"lineNumber":405,"author":{"gitId":"hhdqirui"},"content":"    public List\u003cUUID\u003e getReadNotificationsId(String id) {"},{"lineNumber":406,"author":{"gitId":"hhdqirui"},"content":"        return accountsLogic.getReadNotificationsId(id);"},{"lineNumber":407,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":408,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":409,"author":{"gitId":"hhdqirui"},"content":"    /**"},{"lineNumber":410,"author":{"gitId":"hhdqirui"},"content":"     * Updates user read status for notification with ID {@code notificationId} and expiry time {@code endTime}."},{"lineNumber":411,"author":{"gitId":"hhdqirui"},"content":"     *"},{"lineNumber":412,"author":{"gitId":"hhdqirui"},"content":"     * \u003cp\u003ePreconditions:\u003c/p\u003e"},{"lineNumber":413,"author":{"gitId":"hhdqirui"},"content":"     * * All parameters are non-null. {@code endTime} must be after current moment."},{"lineNumber":414,"author":{"gitId":"hhdqirui"},"content":"     */"},{"lineNumber":415,"author":{"gitId":"hhdqirui"},"content":"    public List\u003cUUID\u003e updateReadNotifications(String id, UUID notificationId, Instant endTime)"},{"lineNumber":416,"author":{"gitId":"hhdqirui"},"content":"            throws InvalidParametersException, EntityDoesNotExistException {"},{"lineNumber":417,"author":{"gitId":"hhdqirui"},"content":"        return accountsLogic.updateReadNotifications(id, notificationId, endTime);"},{"lineNumber":418,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":419,"author":{"gitId":"-"},"content":""},{"lineNumber":420,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":421,"author":{"gitId":"-"},"content":"     * Gets instructor associated with {@code id}."},{"lineNumber":422,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":423,"author":{"gitId":"-"},"content":"     * @param id    Id of Instructor."},{"lineNumber":424,"author":{"gitId":"-"},"content":"     * @return      Returns Instructor if found else null."},{"lineNumber":425,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":426,"author":{"gitId":"-"},"content":"    public Instructor getInstructor(UUID id) {"},{"lineNumber":427,"author":{"gitId":"-"},"content":"        return usersLogic.getInstructor(id);"},{"lineNumber":428,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":429,"author":{"gitId":"-"},"content":""},{"lineNumber":430,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":431,"author":{"gitId":"-"},"content":"     * Gets instructor associated with {@code courseId} and {@code email}."},{"lineNumber":432,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":433,"author":{"gitId":"EuniceSim142"},"content":"    public Instructor getInstructorForEmail(String courseId, String email) {"},{"lineNumber":434,"author":{"gitId":"EuniceSim142"},"content":"        return usersLogic.getInstructorForEmail(courseId, email);"},{"lineNumber":435,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":436,"author":{"gitId":"-"},"content":""},{"lineNumber":437,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":438,"author":{"gitId":"-"},"content":"     * Gets an instructor by associated {@code regkey}."},{"lineNumber":439,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":440,"author":{"gitId":"-"},"content":"    public Instructor getInstructorByRegistrationKey(String regKey) {"},{"lineNumber":441,"author":{"gitId":"-"},"content":"        return usersLogic.getInstructorByRegistrationKey(regKey);"},{"lineNumber":442,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":443,"author":{"gitId":"-"},"content":""},{"lineNumber":444,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":445,"author":{"gitId":"-"},"content":"     * Gets an instructor by associated {@code googleId}."},{"lineNumber":446,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":447,"author":{"gitId":"-"},"content":"    public Instructor getInstructorByGoogleId(String courseId, String googleId) {"},{"lineNumber":448,"author":{"gitId":"-"},"content":"        return usersLogic.getInstructorByGoogleId(courseId, googleId);"},{"lineNumber":449,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":450,"author":{"gitId":"-"},"content":""},{"lineNumber":451,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":452,"author":{"gitId":"EuniceSim142"},"content":"     * Gets list of instructors by {@code googleId}."},{"lineNumber":453,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":454,"author":{"gitId":"EuniceSim142"},"content":"    public List\u003cInstructor\u003e getInstructorsForGoogleId(String googleId) {"},{"lineNumber":455,"author":{"gitId":"EuniceSim142"},"content":"        return usersLogic.getInstructorsForGoogleId(googleId);"},{"lineNumber":456,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":457,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":458,"author":{"gitId":"domlimm"},"content":"    /**"},{"lineNumber":459,"author":{"gitId":"domlimm"},"content":"     * Gets instructors by associated {@code courseId}."},{"lineNumber":460,"author":{"gitId":"domlimm"},"content":"     */"},{"lineNumber":461,"author":{"gitId":"domlimm"},"content":"    public List\u003cInstructor\u003e getInstructorsByCourse(String courseId) {"},{"lineNumber":462,"author":{"gitId":"domlimm"},"content":"        return usersLogic.getInstructorsForCourse(courseId);"},{"lineNumber":463,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":464,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":465,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":466,"author":{"gitId":"-"},"content":"     * Creates an instructor."},{"lineNumber":467,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":468,"author":{"gitId":"-"},"content":"    public Instructor createInstructor(Instructor instructor)"},{"lineNumber":469,"author":{"gitId":"-"},"content":"            throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":470,"author":{"gitId":"-"},"content":"        return usersLogic.createInstructor(instructor);"},{"lineNumber":471,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":472,"author":{"gitId":"-"},"content":""},{"lineNumber":473,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":474,"author":{"gitId":"EuniceSim142"},"content":"     * Checks if an instructor with {@code googleId} can create a course with {@code institute}."},{"lineNumber":475,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":476,"author":{"gitId":"EuniceSim142"},"content":"    public boolean canInstructorCreateCourse(String googleId, String institute) {"},{"lineNumber":477,"author":{"gitId":"EuniceSim142"},"content":"        return usersLogic.canInstructorCreateCourse(googleId, institute);"},{"lineNumber":478,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":479,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":480,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":481,"author":{"gitId":"-"},"content":"     * Gets student associated with {@code id}."},{"lineNumber":482,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":483,"author":{"gitId":"-"},"content":"     * @param id    Id of Student."},{"lineNumber":484,"author":{"gitId":"-"},"content":"     * @return      Returns Student if found else null."},{"lineNumber":485,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":486,"author":{"gitId":"-"},"content":"    public Student getStudent(UUID id) {"},{"lineNumber":487,"author":{"gitId":"-"},"content":"        return usersLogic.getStudent(id);"},{"lineNumber":488,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":489,"author":{"gitId":"-"},"content":""},{"lineNumber":490,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":491,"author":{"gitId":"-"},"content":"     * Gets student associated with {@code courseId} and {@code email}."},{"lineNumber":492,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":493,"author":{"gitId":"EuniceSim142"},"content":"    public Student getStudentForEmail(String courseId, String email) {"},{"lineNumber":494,"author":{"gitId":"EuniceSim142"},"content":"        return usersLogic.getStudentForEmail(courseId, email);"},{"lineNumber":495,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":496,"author":{"gitId":"-"},"content":""},{"lineNumber":497,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":498,"author":{"gitId":"-"},"content":"     * Gets a student by associated {@code regkey}."},{"lineNumber":499,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":500,"author":{"gitId":"-"},"content":"    public Student getStudentByRegistrationKey(String regKey) {"},{"lineNumber":501,"author":{"gitId":"-"},"content":"        return usersLogic.getStudentByRegistrationKey(regKey);"},{"lineNumber":502,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":503,"author":{"gitId":"-"},"content":""},{"lineNumber":504,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":505,"author":{"gitId":"-"},"content":"     * Gets a student by associated {@code googleId}."},{"lineNumber":506,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":507,"author":{"gitId":"-"},"content":"    public Student getStudentByGoogleId(String courseId, String googleId) {"},{"lineNumber":508,"author":{"gitId":"-"},"content":"        return usersLogic.getStudentByGoogleId(courseId, googleId);"},{"lineNumber":509,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":510,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":511,"author":{"gitId":"domlimm"},"content":"    /**"},{"lineNumber":512,"author":{"gitId":"domlimm"},"content":"     * Gets students by associated {@code courseId}."},{"lineNumber":513,"author":{"gitId":"domlimm"},"content":"     */"},{"lineNumber":514,"author":{"gitId":"domlimm"},"content":"    public List\u003cStudent\u003e getStudentsForCourse(String courseId) {"},{"lineNumber":515,"author":{"gitId":"domlimm"},"content":"        return usersLogic.getStudentsForCourse(courseId);"},{"lineNumber":516,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":517,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":518,"author":{"gitId":"domlimm"},"content":"    /**"},{"lineNumber":519,"author":{"gitId":"domlimm"},"content":"     * Gets students by associated {@code teamName} and {@code courseId}."},{"lineNumber":520,"author":{"gitId":"domlimm"},"content":"     */"},{"lineNumber":521,"author":{"gitId":"domlimm"},"content":"    public List\u003cStudent\u003e getStudentsByTeamName(String teamName, String courseId) {"},{"lineNumber":522,"author":{"gitId":"domlimm"},"content":"        return usersLogic.getStudentsForTeam(teamName, courseId);"},{"lineNumber":523,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":524,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":525,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":526,"author":{"gitId":"-"},"content":"     * Creates a student."},{"lineNumber":527,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":528,"author":{"gitId":"-"},"content":"     * @return the created student"},{"lineNumber":529,"author":{"gitId":"-"},"content":"     * @throws InvalidParametersException if the student is not valid"},{"lineNumber":530,"author":{"gitId":"-"},"content":"     * @throws EntityAlreadyExistsException if the student already exists in the database."},{"lineNumber":531,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":532,"author":{"gitId":"-"},"content":"    public Student createStudent(Student student) throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":533,"author":{"gitId":"-"},"content":"        return usersLogic.createStudent(student);"},{"lineNumber":534,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":535,"author":{"gitId":"-"},"content":""},{"lineNumber":536,"author":{"gitId":"domlimm"},"content":"    /**"},{"lineNumber":537,"author":{"gitId":"domlimm"},"content":"     * Gets all instructors and students by associated {@code googleId}."},{"lineNumber":538,"author":{"gitId":"domlimm"},"content":"     */"},{"lineNumber":539,"author":{"gitId":"domlimm"},"content":"    public List\u003cUser\u003e getAllUsersByGoogleId(String googleId) {"},{"lineNumber":540,"author":{"gitId":"domlimm"},"content":"        return usersLogic.getAllUsersByGoogleId(googleId);"},{"lineNumber":541,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":542,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":543,"author":{"gitId":"domlimm"},"content":"    /**"},{"lineNumber":544,"author":{"gitId":"domlimm"},"content":"     * Deletes a user."},{"lineNumber":545,"author":{"gitId":"domlimm"},"content":"     *"},{"lineNumber":546,"author":{"gitId":"domlimm"},"content":"     * \u003cp\u003eFails silently if the user does not exist.\u003c/p\u003e"},{"lineNumber":547,"author":{"gitId":"domlimm"},"content":"     */"},{"lineNumber":548,"author":{"gitId":"domlimm"},"content":"    public \u003cT extends User\u003e void deleteUser(T user) {"},{"lineNumber":549,"author":{"gitId":"domlimm"},"content":"        usersLogic.deleteUser(user);"},{"lineNumber":550,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":551,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":552,"author":{"gitId":"hhdqirui"},"content":"    public List\u003cNotification\u003e getAllNotifications() {"},{"lineNumber":553,"author":{"gitId":"hhdqirui"},"content":"        return notificationsLogic.getAllNotifications();"},{"lineNumber":554,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":555,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":556,"author":{"gitId":"domlimm"},"content":"    /**"},{"lineNumber":557,"author":{"gitId":"domlimm"},"content":"     * Resets the googleId associated with the instructor."},{"lineNumber":558,"author":{"gitId":"domlimm"},"content":"     *"},{"lineNumber":559,"author":{"gitId":"domlimm"},"content":"     * \u003cbr/\u003ePreconditions: \u003cbr/\u003e"},{"lineNumber":560,"author":{"gitId":"domlimm"},"content":"     * * All parameters are non-null."},{"lineNumber":561,"author":{"gitId":"domlimm"},"content":"     *"},{"lineNumber":562,"author":{"gitId":"domlimm"},"content":"     * @throws EntityDoesNotExistException If instructor cannot be found with given email and courseId."},{"lineNumber":563,"author":{"gitId":"domlimm"},"content":"     */"},{"lineNumber":564,"author":{"gitId":"domlimm"},"content":"    public void resetInstructorGoogleId(String email, String courseId, String googleId)"},{"lineNumber":565,"author":{"gitId":"domlimm"},"content":"            throws EntityDoesNotExistException {"},{"lineNumber":566,"author":{"gitId":"domlimm"},"content":"        usersLogic.resetInstructorGoogleId(email, courseId, googleId);"},{"lineNumber":567,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":568,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":569,"author":{"gitId":"domlimm"},"content":"    /**"},{"lineNumber":570,"author":{"gitId":"domlimm"},"content":"     * Resets the googleId associated with the student."},{"lineNumber":571,"author":{"gitId":"domlimm"},"content":"     *"},{"lineNumber":572,"author":{"gitId":"domlimm"},"content":"     * \u003cbr/\u003ePreconditions: \u003cbr/\u003e"},{"lineNumber":573,"author":{"gitId":"domlimm"},"content":"     * * All parameters are non-null."},{"lineNumber":574,"author":{"gitId":"domlimm"},"content":"     *"},{"lineNumber":575,"author":{"gitId":"domlimm"},"content":"     * @throws EntityDoesNotExistException If student cannot be found with given email and courseId."},{"lineNumber":576,"author":{"gitId":"domlimm"},"content":"     */"},{"lineNumber":577,"author":{"gitId":"domlimm"},"content":"    public void resetStudentGoogleId(String email, String courseId, String googleId)"},{"lineNumber":578,"author":{"gitId":"domlimm"},"content":"            throws EntityDoesNotExistException {"},{"lineNumber":579,"author":{"gitId":"domlimm"},"content":"        usersLogic.resetStudentGoogleId(email, courseId, googleId);"},{"lineNumber":580,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":581,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":582,"author":{"gitId":"hhdqirui"},"content":"    /**"},{"lineNumber":583,"author":{"gitId":"hhdqirui"},"content":"     * Returns active notification for general users and the specified {@code targetUser}."},{"lineNumber":584,"author":{"gitId":"hhdqirui"},"content":"     */"},{"lineNumber":585,"author":{"gitId":"hhdqirui"},"content":"    public List\u003cNotification\u003e getActiveNotificationsByTargetUser(NotificationTargetUser targetUser) {"},{"lineNumber":586,"author":{"gitId":"hhdqirui"},"content":"        return notificationsLogic.getActiveNotificationsByTargetUser(targetUser);"},{"lineNumber":587,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":588,"author":{"gitId":"-"},"content":""},{"lineNumber":589,"author":{"gitId":"cedricongjh"},"content":"    /**"},{"lineNumber":590,"author":{"gitId":"cedricongjh"},"content":"     * Gets all questions for a feedback session.\u003cbr\u003e"},{"lineNumber":591,"author":{"gitId":"cedricongjh"},"content":"     * Returns an empty list if they are no questions"},{"lineNumber":592,"author":{"gitId":"cedricongjh"},"content":"     * for the session."},{"lineNumber":593,"author":{"gitId":"cedricongjh"},"content":"     * Preconditions: \u003cbr\u003e"},{"lineNumber":594,"author":{"gitId":"cedricongjh"},"content":"     * * All parameters are non-null."},{"lineNumber":595,"author":{"gitId":"cedricongjh"},"content":"     */"},{"lineNumber":596,"author":{"gitId":"cedricongjh"},"content":"    public List\u003cFeedbackQuestion\u003e getFeedbackQuestionsForSession(FeedbackSession feedbackSession) {"},{"lineNumber":597,"author":{"gitId":"cedricongjh"},"content":"        assert feedbackSession !\u003d null;"},{"lineNumber":598,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":599,"author":{"gitId":"cedricongjh"},"content":"        return feedbackQuestionsLogic.getFeedbackQuestionsForSession(feedbackSession);"},{"lineNumber":600,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":601,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":602,"author":{"gitId":"cedricongjh"},"content":"    /**"},{"lineNumber":603,"author":{"gitId":"cedricongjh"},"content":"     * Gets a list of all questions for the given session that"},{"lineNumber":604,"author":{"gitId":"cedricongjh"},"content":"     * students can view/submit."},{"lineNumber":605,"author":{"gitId":"cedricongjh"},"content":"     */"},{"lineNumber":606,"author":{"gitId":"cedricongjh"},"content":"    public List\u003cFeedbackQuestion\u003e getFeedbackQuestionsForStudents(FeedbackSession feedbackSession) {"},{"lineNumber":607,"author":{"gitId":"cedricongjh"},"content":"        assert feedbackSession !\u003d null;"},{"lineNumber":608,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":609,"author":{"gitId":"cedricongjh"},"content":"        return feedbackQuestionsLogic.getFeedbackQuestionsForStudents(feedbackSession);"},{"lineNumber":610,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":611,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":612,"author":{"gitId":"cedricongjh"},"content":"    /**"},{"lineNumber":613,"author":{"gitId":"cedricongjh"},"content":"     * Gets a {@code List} of all questions for the given session that"},{"lineNumber":614,"author":{"gitId":"cedricongjh"},"content":"     * instructor can view/submit."},{"lineNumber":615,"author":{"gitId":"cedricongjh"},"content":"     */"},{"lineNumber":616,"author":{"gitId":"cedricongjh"},"content":"    public List\u003cFeedbackQuestion\u003e getFeedbackQuestionsForInstructors("},{"lineNumber":617,"author":{"gitId":"cedricongjh"},"content":"            FeedbackSession feedbackSession, String instructorEmail) {"},{"lineNumber":618,"author":{"gitId":"cedricongjh"},"content":"        assert feedbackSession !\u003d null;"},{"lineNumber":619,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":620,"author":{"gitId":"cedricongjh"},"content":"        return feedbackQuestionsLogic.getFeedbackQuestionsForInstructors(feedbackSession, instructorEmail);"},{"lineNumber":621,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":622,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":623,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":624,"author":{"gitId":"-"},"content":"     * Persists the given data bundle to the database."},{"lineNumber":625,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":626,"author":{"gitId":"-"},"content":"    public SqlDataBundle persistDataBundle(SqlDataBundle dataBundle)"},{"lineNumber":627,"author":{"gitId":"-"},"content":"            throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":628,"author":{"gitId":"-"},"content":"        return dataBundleLogic.persistDataBundle(dataBundle);"},{"lineNumber":629,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":630,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":631,"author":{"gitId":"cedricongjh"},"content":"    /**"},{"lineNumber":632,"author":{"gitId":"cedricongjh"},"content":"     * Populates fields that need dynamic generation in a question."},{"lineNumber":633,"author":{"gitId":"cedricongjh"},"content":"     *"},{"lineNumber":634,"author":{"gitId":"cedricongjh"},"content":"     * \u003cp\u003eCurrently, only MCQ/MSQ needs to generate choices dynamically.\u003c/p\u003e"},{"lineNumber":635,"author":{"gitId":"cedricongjh"},"content":"     *"},{"lineNumber":636,"author":{"gitId":"cedricongjh"},"content":"     * @param feedbackQuestion the question to populate"},{"lineNumber":637,"author":{"gitId":"cedricongjh"},"content":"     * @param courseId the ID of the course"},{"lineNumber":638,"author":{"gitId":"cedricongjh"},"content":"     * @param emailOfEntityDoingQuestion the email of the entity doing the question"},{"lineNumber":639,"author":{"gitId":"cedricongjh"},"content":"     * @param teamOfEntityDoingQuestion the team of the entity doing the question. If the entity is an instructor,"},{"lineNumber":640,"author":{"gitId":"cedricongjh"},"content":"     *                                  it can be {@code null}."},{"lineNumber":641,"author":{"gitId":"cedricongjh"},"content":"     */"},{"lineNumber":642,"author":{"gitId":"cedricongjh"},"content":"    public void populateFieldsToGenerateInQuestion(FeedbackQuestion feedbackQuestion,"},{"lineNumber":643,"author":{"gitId":"cedricongjh"},"content":"            String courseId, String emailOfEntityDoingQuestion,"},{"lineNumber":644,"author":{"gitId":"cedricongjh"},"content":"            String teamOfEntityDoingQuestion) {"},{"lineNumber":645,"author":{"gitId":"cedricongjh"},"content":"        assert feedbackQuestion !\u003d null;"},{"lineNumber":646,"author":{"gitId":"cedricongjh"},"content":"        assert courseId !\u003d null;"},{"lineNumber":647,"author":{"gitId":"cedricongjh"},"content":"        assert emailOfEntityDoingQuestion !\u003d null;"},{"lineNumber":648,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":649,"author":{"gitId":"cedricongjh"},"content":"        feedbackQuestionsLogic.populateFieldsToGenerateInQuestion("},{"lineNumber":650,"author":{"gitId":"cedricongjh"},"content":"                feedbackQuestion, courseId, emailOfEntityDoingQuestion, teamOfEntityDoingQuestion);"},{"lineNumber":651,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":652,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"domlimm":106,"cedricongjh":56,"EuniceSim142":62,"hhdqirui":119,"-":249,"kevin9foong":60}},{"path":"src/main/java/teammates/sqllogic/api/SqlEmailGenerator.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"EuniceSim142"},"content":"package teammates.sqllogic.api;"},{"lineNumber":2,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":3,"author":{"gitId":"EuniceSim142"},"content":"import java.time.Instant;"},{"lineNumber":4,"author":{"gitId":"EuniceSim142"},"content":"import java.util.ArrayList;"},{"lineNumber":5,"author":{"gitId":"EuniceSim142"},"content":"import java.util.Collections;"},{"lineNumber":6,"author":{"gitId":"EuniceSim142"},"content":"import java.util.HashMap;"},{"lineNumber":7,"author":{"gitId":"EuniceSim142"},"content":"import java.util.List;"},{"lineNumber":8,"author":{"gitId":"EuniceSim142"},"content":"import java.util.Map;"},{"lineNumber":9,"author":{"gitId":"EuniceSim142"},"content":"import java.util.Set;"},{"lineNumber":10,"author":{"gitId":"EuniceSim142"},"content":"import java.util.UUID;"},{"lineNumber":11,"author":{"gitId":"EuniceSim142"},"content":"import java.util.stream.Collectors;"},{"lineNumber":12,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":13,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.datatransfer.ErrorLogEntry;"},{"lineNumber":14,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.util.Config;"},{"lineNumber":15,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.util.Const;"},{"lineNumber":16,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.util.EmailType;"},{"lineNumber":17,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.util.EmailWrapper;"},{"lineNumber":18,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.util.RequestTracer;"},{"lineNumber":19,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.util.SanitizationHelper;"},{"lineNumber":20,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.util.Templates;"},{"lineNumber":21,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.util.Templates.EmailTemplates;"},{"lineNumber":22,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.util.TimeHelper;"},{"lineNumber":23,"author":{"gitId":"EuniceSim142"},"content":"import teammates.sqllogic.core.CoursesLogic;"},{"lineNumber":24,"author":{"gitId":"EuniceSim142"},"content":"import teammates.sqllogic.core.DeadlineExtensionsLogic;"},{"lineNumber":25,"author":{"gitId":"EuniceSim142"},"content":"import teammates.sqllogic.core.FeedbackSessionsLogic;"},{"lineNumber":26,"author":{"gitId":"EuniceSim142"},"content":"import teammates.sqllogic.core.UsersLogic;"},{"lineNumber":27,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.Account;"},{"lineNumber":28,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.Course;"},{"lineNumber":29,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.DeadlineExtension;"},{"lineNumber":30,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.FeedbackSession;"},{"lineNumber":31,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":32,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.Student;"},{"lineNumber":33,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":34,"author":{"gitId":"EuniceSim142"},"content":"/**"},{"lineNumber":35,"author":{"gitId":"EuniceSim142"},"content":" * Handles operations related to generating emails to be sent from provided templates."},{"lineNumber":36,"author":{"gitId":"EuniceSim142"},"content":" *"},{"lineNumber":37,"author":{"gitId":"EuniceSim142"},"content":" * @see EmailTemplates"},{"lineNumber":38,"author":{"gitId":"EuniceSim142"},"content":" * @see EmailType"},{"lineNumber":39,"author":{"gitId":"EuniceSim142"},"content":" * @see EmailWrapper"},{"lineNumber":40,"author":{"gitId":"EuniceSim142"},"content":" */"},{"lineNumber":41,"author":{"gitId":"EuniceSim142"},"content":"public final class SqlEmailGenerator {"},{"lineNumber":42,"author":{"gitId":"EuniceSim142"},"content":"    // feedback action strings"},{"lineNumber":43,"author":{"gitId":"EuniceSim142"},"content":"    private static final String FEEDBACK_ACTION_SUBMIT_EDIT_OR_VIEW \u003d \"submit, edit or view\";"},{"lineNumber":44,"author":{"gitId":"EuniceSim142"},"content":"    private static final String FEEDBACK_ACTION_VIEW \u003d \"view\";"},{"lineNumber":45,"author":{"gitId":"EuniceSim142"},"content":"    private static final String FEEDBACK_ACTION_SUBMIT_OR_UPDATE \u003d"},{"lineNumber":46,"author":{"gitId":"EuniceSim142"},"content":"                            \", in case you have not submitted yet or wish to update your submission. \";"},{"lineNumber":47,"author":{"gitId":"EuniceSim142"},"content":"    private static final String HTML_NO_ACTION_REQUIRED \u003d \"\u003cmark\u003eNo action is required if you have already submitted\u003c/mark\u003e\";"},{"lineNumber":48,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":49,"author":{"gitId":"EuniceSim142"},"content":"    // status-related strings"},{"lineNumber":50,"author":{"gitId":"EuniceSim142"},"content":"    private static final String FEEDBACK_STATUS_SESSION_OPEN \u003d \"is still open for submissions\""},{"lineNumber":51,"author":{"gitId":"EuniceSim142"},"content":"                                            + FEEDBACK_ACTION_SUBMIT_OR_UPDATE + HTML_NO_ACTION_REQUIRED;"},{"lineNumber":52,"author":{"gitId":"EuniceSim142"},"content":"    private static final String FEEDBACK_STATUS_SESSION_OPENING \u003d \"is now open\";"},{"lineNumber":53,"author":{"gitId":"EuniceSim142"},"content":"    private static final String FEEDBACK_STATUS_SESSION_CLOSING \u003d \"is closing soon\""},{"lineNumber":54,"author":{"gitId":"EuniceSim142"},"content":"                                            + FEEDBACK_ACTION_SUBMIT_OR_UPDATE + HTML_NO_ACTION_REQUIRED;"},{"lineNumber":55,"author":{"gitId":"EuniceSim142"},"content":"    private static final String FEEDBACK_STATUS_SESSION_CLOSED \u003d \"is now closed for submission\";"},{"lineNumber":56,"author":{"gitId":"EuniceSim142"},"content":"    private static final String FEEDBACK_STATUS_SESSION_OPENING_SOON \u003d \"is due to open soon\";"},{"lineNumber":57,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":58,"author":{"gitId":"EuniceSim142"},"content":"    private static final String DATETIME_DISPLAY_FORMAT \u003d \"EEE, dd MMM yyyy, hh:mm a z\";"},{"lineNumber":59,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":60,"author":{"gitId":"EuniceSim142"},"content":"    private static final long SESSION_LINK_RECOVERY_DURATION_IN_DAYS \u003d 90;"},{"lineNumber":61,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":62,"author":{"gitId":"EuniceSim142"},"content":"    private static final SqlEmailGenerator instance \u003d new SqlEmailGenerator();"},{"lineNumber":63,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":64,"author":{"gitId":"EuniceSim142"},"content":"    private final CoursesLogic coursesLogic \u003d CoursesLogic.inst();"},{"lineNumber":65,"author":{"gitId":"EuniceSim142"},"content":"    private final DeadlineExtensionsLogic deLogic \u003d DeadlineExtensionsLogic.inst();"},{"lineNumber":66,"author":{"gitId":"EuniceSim142"},"content":"    private final FeedbackSessionsLogic fsLogic \u003d FeedbackSessionsLogic.inst();"},{"lineNumber":67,"author":{"gitId":"EuniceSim142"},"content":"    private final UsersLogic usersLogic \u003d UsersLogic.inst();"},{"lineNumber":68,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":69,"author":{"gitId":"EuniceSim142"},"content":"    private SqlEmailGenerator() {"},{"lineNumber":70,"author":{"gitId":"EuniceSim142"},"content":"        // prevent initialization"},{"lineNumber":71,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":72,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":73,"author":{"gitId":"EuniceSim142"},"content":"    public static SqlEmailGenerator inst() {"},{"lineNumber":74,"author":{"gitId":"EuniceSim142"},"content":"        return instance;"},{"lineNumber":75,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":76,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":77,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":78,"author":{"gitId":"EuniceSim142"},"content":"     * Generate Feedback Session Opening emails."},{"lineNumber":79,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":80,"author":{"gitId":"EuniceSim142"},"content":"    public List\u003cEmailWrapper\u003e generateFeedbackSessionOpeningEmails(FeedbackSession session) {"},{"lineNumber":81,"author":{"gitId":"EuniceSim142"},"content":"        return generateFeedbackSessionOpeningOrClosingEmails(session, EmailType.FEEDBACK_OPENING);"},{"lineNumber":82,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":83,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":84,"author":{"gitId":"EuniceSim142"},"content":"    private List\u003cEmailWrapper\u003e generateFeedbackSessionOpeningOrClosingEmails("},{"lineNumber":85,"author":{"gitId":"EuniceSim142"},"content":"            FeedbackSession session, EmailType emailType) {"},{"lineNumber":86,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d session.getCourse();"},{"lineNumber":87,"author":{"gitId":"EuniceSim142"},"content":"        boolean isEmailNeededForStudents \u003d fsLogic.isFeedbackSessionForUserTypeToAnswer(session, false);"},{"lineNumber":88,"author":{"gitId":"EuniceSim142"},"content":"        boolean isEmailNeededForInstructors \u003d fsLogic.isFeedbackSessionForUserTypeToAnswer(session, true);"},{"lineNumber":89,"author":{"gitId":"EuniceSim142"},"content":"        List\u003cInstructor\u003e instructorsToNotify \u003d isEmailNeededForStudents"},{"lineNumber":90,"author":{"gitId":"EuniceSim142"},"content":"                ? usersLogic.getCoOwnersForCourse(course.getId())"},{"lineNumber":91,"author":{"gitId":"EuniceSim142"},"content":"                : new ArrayList\u003c\u003e();"},{"lineNumber":92,"author":{"gitId":"EuniceSim142"},"content":"        List\u003cStudent\u003e students \u003d isEmailNeededForStudents"},{"lineNumber":93,"author":{"gitId":"EuniceSim142"},"content":"                ? usersLogic.getStudentsForCourse(course.getId())"},{"lineNumber":94,"author":{"gitId":"EuniceSim142"},"content":"                : new ArrayList\u003c\u003e();"},{"lineNumber":95,"author":{"gitId":"EuniceSim142"},"content":"        List\u003cInstructor\u003e instructors \u003d isEmailNeededForInstructors"},{"lineNumber":96,"author":{"gitId":"EuniceSim142"},"content":"                ? usersLogic.getInstructorsForCourse(course.getId())"},{"lineNumber":97,"author":{"gitId":"EuniceSim142"},"content":"                : new ArrayList\u003c\u003e();"},{"lineNumber":98,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":99,"author":{"gitId":"EuniceSim142"},"content":"        if (emailType \u003d\u003d EmailType.FEEDBACK_CLOSING) {"},{"lineNumber":100,"author":{"gitId":"EuniceSim142"},"content":"            List\u003cDeadlineExtension\u003e deadlines \u003d session.getDeadlineExtensions();"},{"lineNumber":101,"author":{"gitId":"EuniceSim142"},"content":"            Set\u003cUUID\u003e userIds \u003d deadlines.stream()"},{"lineNumber":102,"author":{"gitId":"EuniceSim142"},"content":"                    .map(d -\u003e d.getUser().getId())"},{"lineNumber":103,"author":{"gitId":"EuniceSim142"},"content":"                    .collect(Collectors.toSet());"},{"lineNumber":104,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":105,"author":{"gitId":"EuniceSim142"},"content":"            // student."},{"lineNumber":106,"author":{"gitId":"EuniceSim142"},"content":"            students \u003d students.stream()"},{"lineNumber":107,"author":{"gitId":"EuniceSim142"},"content":"                    .filter(x -\u003e userIds.contains(x.getId()))"},{"lineNumber":108,"author":{"gitId":"EuniceSim142"},"content":"                    .collect(Collectors.toList());"},{"lineNumber":109,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":110,"author":{"gitId":"EuniceSim142"},"content":"            // instructor."},{"lineNumber":111,"author":{"gitId":"EuniceSim142"},"content":"            instructors \u003d instructors.stream()"},{"lineNumber":112,"author":{"gitId":"EuniceSim142"},"content":"                    .filter(x -\u003e userIds.contains(x.getId()))"},{"lineNumber":113,"author":{"gitId":"EuniceSim142"},"content":"                    .collect(Collectors.toList());"},{"lineNumber":114,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":115,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":116,"author":{"gitId":"EuniceSim142"},"content":"        String status \u003d emailType \u003d\u003d EmailType.FEEDBACK_OPENING"},{"lineNumber":117,"author":{"gitId":"EuniceSim142"},"content":"                ? FEEDBACK_STATUS_SESSION_OPENING"},{"lineNumber":118,"author":{"gitId":"EuniceSim142"},"content":"                : FEEDBACK_STATUS_SESSION_CLOSING;"},{"lineNumber":119,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":120,"author":{"gitId":"EuniceSim142"},"content":"        String template \u003d emailType \u003d\u003d EmailType.FEEDBACK_OPENING"},{"lineNumber":121,"author":{"gitId":"EuniceSim142"},"content":"                ? EmailTemplates.USER_FEEDBACK_SESSION_OPENING.replace(\"${status}\", status)"},{"lineNumber":122,"author":{"gitId":"EuniceSim142"},"content":"                : EmailTemplates.USER_FEEDBACK_SESSION.replace(\"${status}\", status);"},{"lineNumber":123,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":124,"author":{"gitId":"EuniceSim142"},"content":"        return generateFeedbackSessionEmailBases(course, session, students, instructors, instructorsToNotify, template,"},{"lineNumber":125,"author":{"gitId":"EuniceSim142"},"content":"                emailType, FEEDBACK_ACTION_SUBMIT_EDIT_OR_VIEW);"},{"lineNumber":126,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":127,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":128,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":129,"author":{"gitId":"EuniceSim142"},"content":"     * Generates the feedback session opening soon emails for the given {@code session}."},{"lineNumber":130,"author":{"gitId":"EuniceSim142"},"content":"     *"},{"lineNumber":131,"author":{"gitId":"EuniceSim142"},"content":"     * \u003cp\u003eThis is useful for e.g. in case the feedback session opening info was set wrongly."},{"lineNumber":132,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":133,"author":{"gitId":"EuniceSim142"},"content":"    public List\u003cEmailWrapper\u003e generateFeedbackSessionOpeningSoonEmails(FeedbackSession session) {"},{"lineNumber":134,"author":{"gitId":"EuniceSim142"},"content":"        return generateFeedbackSessionOpeningSoonOrClosedEmails(session, EmailType.FEEDBACK_OPENING_SOON);"},{"lineNumber":135,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":136,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":137,"author":{"gitId":"EuniceSim142"},"content":"    private List\u003cEmailWrapper\u003e generateFeedbackSessionOpeningSoonOrClosedEmails("},{"lineNumber":138,"author":{"gitId":"EuniceSim142"},"content":"            FeedbackSession session, EmailType emailType) {"},{"lineNumber":139,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d session.getCourse();"},{"lineNumber":140,"author":{"gitId":"EuniceSim142"},"content":"        // Notify only course co-owners"},{"lineNumber":141,"author":{"gitId":"EuniceSim142"},"content":"        List\u003cInstructor\u003e coOwners \u003d usersLogic.getCoOwnersForCourse(course.getId());"},{"lineNumber":142,"author":{"gitId":"EuniceSim142"},"content":"        return coOwners.stream()"},{"lineNumber":143,"author":{"gitId":"EuniceSim142"},"content":"                .map(coOwner -\u003e generateFeedbackSessionEmailBaseForCoowner(course, session, coOwner, emailType))"},{"lineNumber":144,"author":{"gitId":"EuniceSim142"},"content":"                .collect(Collectors.toList());"},{"lineNumber":145,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":146,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":147,"author":{"gitId":"EuniceSim142"},"content":"    private EmailWrapper generateFeedbackSessionEmailBaseForCoowner("},{"lineNumber":148,"author":{"gitId":"EuniceSim142"},"content":"            Course course, FeedbackSession session, Instructor coOwner, EmailType emailType) {"},{"lineNumber":149,"author":{"gitId":"EuniceSim142"},"content":"        String additionalNotes;"},{"lineNumber":150,"author":{"gitId":"EuniceSim142"},"content":"        String status;"},{"lineNumber":151,"author":{"gitId":"EuniceSim142"},"content":"        if (emailType \u003d\u003d EmailType.FEEDBACK_OPENING_SOON) {"},{"lineNumber":152,"author":{"gitId":"EuniceSim142"},"content":"            String editUrl \u003d Config.getFrontEndAppUrl(Const.WebPageURIs.INSTRUCTOR_SESSION_EDIT_PAGE)"},{"lineNumber":153,"author":{"gitId":"EuniceSim142"},"content":"                    .withCourseId(course.getId())"},{"lineNumber":154,"author":{"gitId":"EuniceSim142"},"content":"                    .withSessionName(session.getName())"},{"lineNumber":155,"author":{"gitId":"EuniceSim142"},"content":"                    .toAbsoluteString();"},{"lineNumber":156,"author":{"gitId":"EuniceSim142"},"content":"            // If instructor has not joined the course, populate additional notes with information to join course."},{"lineNumber":157,"author":{"gitId":"EuniceSim142"},"content":"            if (coOwner.isRegistered()) {"},{"lineNumber":158,"author":{"gitId":"EuniceSim142"},"content":"                additionalNotes \u003d fillUpEditFeedbackSessionDetailsFragment(editUrl);"},{"lineNumber":159,"author":{"gitId":"EuniceSim142"},"content":"            } else {"},{"lineNumber":160,"author":{"gitId":"EuniceSim142"},"content":"                additionalNotes \u003d fillUpJoinCourseBeforeEditFeedbackSessionDetailsFragment(editUrl,"},{"lineNumber":161,"author":{"gitId":"EuniceSim142"},"content":"                        getInstructorCourseJoinUrl(coOwner));"},{"lineNumber":162,"author":{"gitId":"EuniceSim142"},"content":"            }"},{"lineNumber":163,"author":{"gitId":"EuniceSim142"},"content":"            status \u003d FEEDBACK_STATUS_SESSION_OPENING_SOON;"},{"lineNumber":164,"author":{"gitId":"EuniceSim142"},"content":"        } else {"},{"lineNumber":165,"author":{"gitId":"EuniceSim142"},"content":"            String reportUrl \u003d Config.getFrontEndAppUrl(Const.WebPageURIs.INSTRUCTOR_SESSION_REPORT_PAGE)"},{"lineNumber":166,"author":{"gitId":"EuniceSim142"},"content":"                    .withCourseId(course.getId())"},{"lineNumber":167,"author":{"gitId":"EuniceSim142"},"content":"                    .withSessionName(session.getName())"},{"lineNumber":168,"author":{"gitId":"EuniceSim142"},"content":"                    .toAbsoluteString();"},{"lineNumber":169,"author":{"gitId":"EuniceSim142"},"content":"            additionalNotes \u003d fillUpViewResponsesDetailsFragment(reportUrl);"},{"lineNumber":170,"author":{"gitId":"EuniceSim142"},"content":"            status \u003d FEEDBACK_STATUS_SESSION_CLOSED;"},{"lineNumber":171,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":172,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":173,"author":{"gitId":"EuniceSim142"},"content":"        Instant startTime \u003d TimeHelper.getMidnightAdjustedInstantBasedOnZone("},{"lineNumber":174,"author":{"gitId":"EuniceSim142"},"content":"                session.getStartTime(), session.getCourse().getTimeZone(), false);"},{"lineNumber":175,"author":{"gitId":"EuniceSim142"},"content":"        Instant endTime \u003d TimeHelper.getMidnightAdjustedInstantBasedOnZone("},{"lineNumber":176,"author":{"gitId":"EuniceSim142"},"content":"                session.getEndTime(), session.getCourse().getTimeZone(), false);"},{"lineNumber":177,"author":{"gitId":"EuniceSim142"},"content":"        String emailBody \u003d Templates.populateTemplate(EmailTemplates.OWNER_FEEDBACK_SESSION,"},{"lineNumber":178,"author":{"gitId":"EuniceSim142"},"content":"                \"${status}\", status,"},{"lineNumber":179,"author":{"gitId":"EuniceSim142"},"content":"                \"${userName}\", SanitizationHelper.sanitizeForHtml(coOwner.getName()),"},{"lineNumber":180,"author":{"gitId":"EuniceSim142"},"content":"                \"${courseName}\", SanitizationHelper.sanitizeForHtml(course.getName()),"},{"lineNumber":181,"author":{"gitId":"EuniceSim142"},"content":"                \"${courseId}\", SanitizationHelper.sanitizeForHtml(course.getId()),"},{"lineNumber":182,"author":{"gitId":"EuniceSim142"},"content":"                \"${feedbackSessionName}\", SanitizationHelper.sanitizeForHtml(session.getName()),"},{"lineNumber":183,"author":{"gitId":"EuniceSim142"},"content":"                \"${deadline}\", SanitizationHelper.sanitizeForHtml("},{"lineNumber":184,"author":{"gitId":"EuniceSim142"},"content":"                        TimeHelper.formatInstant(endTime, session.getCourse().getTimeZone(), DATETIME_DISPLAY_FORMAT)),"},{"lineNumber":185,"author":{"gitId":"EuniceSim142"},"content":"                \"${sessionInstructions}\", session.getInstructionsString(),"},{"lineNumber":186,"author":{"gitId":"EuniceSim142"},"content":"                \"${startTime}\", SanitizationHelper.sanitizeForHtml("},{"lineNumber":187,"author":{"gitId":"EuniceSim142"},"content":"                        TimeHelper.formatInstant(startTime, session.getCourse().getTimeZone(), DATETIME_DISPLAY_FORMAT)),"},{"lineNumber":188,"author":{"gitId":"EuniceSim142"},"content":"                \"${additionalNotes}\", additionalNotes);"},{"lineNumber":189,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":190,"author":{"gitId":"EuniceSim142"},"content":"        EmailWrapper email \u003d getEmptyEmailAddressedToEmail(coOwner.getEmail());"},{"lineNumber":191,"author":{"gitId":"EuniceSim142"},"content":"        email.setType(emailType);"},{"lineNumber":192,"author":{"gitId":"EuniceSim142"},"content":"        email.setSubjectFromType(course.getName(), session.getName());"},{"lineNumber":193,"author":{"gitId":"EuniceSim142"},"content":"        email.setContent(emailBody);"},{"lineNumber":194,"author":{"gitId":"EuniceSim142"},"content":"        return email;"},{"lineNumber":195,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":196,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":197,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":198,"author":{"gitId":"EuniceSim142"},"content":"     * Generates the fragment for instructions on how to edit details for feedback session at {@code editUrl}."},{"lineNumber":199,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":200,"author":{"gitId":"EuniceSim142"},"content":"    private String fillUpEditFeedbackSessionDetailsFragment(String editUrl) {"},{"lineNumber":201,"author":{"gitId":"EuniceSim142"},"content":"        return Templates.populateTemplate(EmailTemplates.FRAGMENT_OPENING_SOON_EDIT_DETAILS,"},{"lineNumber":202,"author":{"gitId":"EuniceSim142"},"content":"                \"${sessionEditUrl}\", editUrl);"},{"lineNumber":203,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":204,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":205,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":206,"author":{"gitId":"EuniceSim142"},"content":"     * Generates the fragment for instructions on how to view responses for feedback session at {@code reportUrl}."},{"lineNumber":207,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":208,"author":{"gitId":"EuniceSim142"},"content":"    private String fillUpViewResponsesDetailsFragment(String reportUrl) {"},{"lineNumber":209,"author":{"gitId":"EuniceSim142"},"content":"        return Templates.populateTemplate(EmailTemplates.FRAGMENT_CLOSED_VIEW_RESPONSES,"},{"lineNumber":210,"author":{"gitId":"EuniceSim142"},"content":"                \"${reportUrl}\", reportUrl);"},{"lineNumber":211,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":212,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":213,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":214,"author":{"gitId":"EuniceSim142"},"content":"     * Generates the fragment for instructions on how to edit details for feedback session at {@code editUrl} and"},{"lineNumber":215,"author":{"gitId":"EuniceSim142"},"content":"     * how to join the course at {@code joinUrl}."},{"lineNumber":216,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":217,"author":{"gitId":"EuniceSim142"},"content":"    private String fillUpJoinCourseBeforeEditFeedbackSessionDetailsFragment(String editUrl, String joinUrl) {"},{"lineNumber":218,"author":{"gitId":"EuniceSim142"},"content":"        return Templates.populateTemplate(EmailTemplates.FRAGMENT_OPENING_SOON_JOIN_COURSE_BEFORE_EDIT_DETAILS,"},{"lineNumber":219,"author":{"gitId":"EuniceSim142"},"content":"                \"${sessionEditUrl}\", editUrl,"},{"lineNumber":220,"author":{"gitId":"EuniceSim142"},"content":"                \"${joinUrl}\", joinUrl"},{"lineNumber":221,"author":{"gitId":"EuniceSim142"},"content":"        );"},{"lineNumber":222,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":223,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":224,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":225,"author":{"gitId":"EuniceSim142"},"content":"     * Generates the feedback session reminder emails for the given {@code session} for {@code students}"},{"lineNumber":226,"author":{"gitId":"EuniceSim142"},"content":"     * and {@code instructorsToRemind}. In addition, the emails will also be forwarded to {@code instructorsToNotify}."},{"lineNumber":227,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":228,"author":{"gitId":"EuniceSim142"},"content":"    public List\u003cEmailWrapper\u003e generateFeedbackSessionReminderEmails("},{"lineNumber":229,"author":{"gitId":"EuniceSim142"},"content":"            FeedbackSession session, List\u003cStudent\u003e students,"},{"lineNumber":230,"author":{"gitId":"EuniceSim142"},"content":"            List\u003cInstructor\u003e instructorsToRemind, Instructor instructorToNotify) {"},{"lineNumber":231,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":232,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d session.getCourse();"},{"lineNumber":233,"author":{"gitId":"EuniceSim142"},"content":"        String template \u003d EmailTemplates.USER_FEEDBACK_SESSION.replace(\"${status}\", FEEDBACK_STATUS_SESSION_OPEN);"},{"lineNumber":234,"author":{"gitId":"EuniceSim142"},"content":"        List\u003cInstructor\u003e instructorToNotifyAsList \u003d new ArrayList\u003c\u003e();"},{"lineNumber":235,"author":{"gitId":"EuniceSim142"},"content":"        if (instructorToNotify !\u003d null) {"},{"lineNumber":236,"author":{"gitId":"EuniceSim142"},"content":"            instructorToNotifyAsList.add(instructorToNotify);"},{"lineNumber":237,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":238,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":239,"author":{"gitId":"EuniceSim142"},"content":"        return generateFeedbackSessionEmailBases(course, session, students, instructorsToRemind, instructorToNotifyAsList,"},{"lineNumber":240,"author":{"gitId":"EuniceSim142"},"content":"                template, EmailType.FEEDBACK_SESSION_REMINDER, FEEDBACK_ACTION_SUBMIT_EDIT_OR_VIEW);"},{"lineNumber":241,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":242,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":243,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":244,"author":{"gitId":"EuniceSim142"},"content":"     * Generates the email containing the summary of the feedback sessions"},{"lineNumber":245,"author":{"gitId":"EuniceSim142"},"content":"     * email for the given {@code courseId} for {@code userEmail}."},{"lineNumber":246,"author":{"gitId":"EuniceSim142"},"content":"     * @param courseId - ID of the course"},{"lineNumber":247,"author":{"gitId":"EuniceSim142"},"content":"     * @param userEmail - Email of student to send feedback session summary to"},{"lineNumber":248,"author":{"gitId":"EuniceSim142"},"content":"     * @param emailType - The email type which corresponds to the reason behind why the links are being resent"},{"lineNumber":249,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":250,"author":{"gitId":"EuniceSim142"},"content":"    public EmailWrapper generateFeedbackSessionSummaryOfCourse("},{"lineNumber":251,"author":{"gitId":"EuniceSim142"},"content":"            String courseId, String userEmail, EmailType emailType) {"},{"lineNumber":252,"author":{"gitId":"EuniceSim142"},"content":"        assert emailType \u003d\u003d EmailType.STUDENT_EMAIL_CHANGED"},{"lineNumber":253,"author":{"gitId":"EuniceSim142"},"content":"                || emailType \u003d\u003d EmailType.STUDENT_COURSE_LINKS_REGENERATED"},{"lineNumber":254,"author":{"gitId":"EuniceSim142"},"content":"                || emailType \u003d\u003d EmailType.INSTRUCTOR_COURSE_LINKS_REGENERATED;"},{"lineNumber":255,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":256,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d coursesLogic.getCourse(courseId);"},{"lineNumber":257,"author":{"gitId":"EuniceSim142"},"content":"        boolean isInstructor \u003d emailType \u003d\u003d EmailType.INSTRUCTOR_COURSE_LINKS_REGENERATED;"},{"lineNumber":258,"author":{"gitId":"EuniceSim142"},"content":"        Student student \u003d null;"},{"lineNumber":259,"author":{"gitId":"EuniceSim142"},"content":"        Instructor instructor \u003d null;"},{"lineNumber":260,"author":{"gitId":"EuniceSim142"},"content":"        if (isInstructor) {"},{"lineNumber":261,"author":{"gitId":"EuniceSim142"},"content":"            instructor \u003d usersLogic.getInstructorForEmail(courseId, userEmail);"},{"lineNumber":262,"author":{"gitId":"EuniceSim142"},"content":"        } else {"},{"lineNumber":263,"author":{"gitId":"EuniceSim142"},"content":"            student \u003d usersLogic.getStudentForEmail(courseId, userEmail);"},{"lineNumber":264,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":265,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":266,"author":{"gitId":"EuniceSim142"},"content":"        List\u003cFeedbackSession\u003e sessions \u003d new ArrayList\u003c\u003e();"},{"lineNumber":267,"author":{"gitId":"EuniceSim142"},"content":"        List\u003cFeedbackSession\u003e fsInCourse \u003d fsLogic.getFeedbackSessionsForCourse(courseId);"},{"lineNumber":268,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":269,"author":{"gitId":"EuniceSim142"},"content":"        for (FeedbackSession fs : fsInCourse) {"},{"lineNumber":270,"author":{"gitId":"EuniceSim142"},"content":"            if (fs.isOpened() || fs.isPublished()) {"},{"lineNumber":271,"author":{"gitId":"EuniceSim142"},"content":"                sessions.add(fs);"},{"lineNumber":272,"author":{"gitId":"EuniceSim142"},"content":"            }"},{"lineNumber":273,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":274,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":275,"author":{"gitId":"EuniceSim142"},"content":"        StringBuilder linksFragmentValue \u003d new StringBuilder(1000);"},{"lineNumber":276,"author":{"gitId":"EuniceSim142"},"content":"        String joinUrl \u003d Config.getFrontEndAppUrl("},{"lineNumber":277,"author":{"gitId":"EuniceSim142"},"content":"                isInstructor ? instructor.getRegistrationUrl() : student.getRegistrationUrl()).toAbsoluteString();"},{"lineNumber":278,"author":{"gitId":"EuniceSim142"},"content":"        boolean isYetToJoinCourse \u003d isInstructor ? isYetToJoinCourse(instructor) : isYetToJoinCourse(student);"},{"lineNumber":279,"author":{"gitId":"EuniceSim142"},"content":"        String joinFragmentTemplate \u003d isInstructor"},{"lineNumber":280,"author":{"gitId":"EuniceSim142"},"content":"                ? EmailTemplates.FRAGMENT_INSTRUCTOR_COURSE_REJOIN_AFTER_REGKEY_RESET"},{"lineNumber":281,"author":{"gitId":"EuniceSim142"},"content":"                : emailType \u003d\u003d EmailType.STUDENT_EMAIL_CHANGED"},{"lineNumber":282,"author":{"gitId":"EuniceSim142"},"content":"                        ? EmailTemplates.FRAGMENT_STUDENT_COURSE_JOIN"},{"lineNumber":283,"author":{"gitId":"EuniceSim142"},"content":"                        : EmailTemplates.FRAGMENT_STUDENT_COURSE_REJOIN_AFTER_REGKEY_RESET;"},{"lineNumber":284,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":285,"author":{"gitId":"EuniceSim142"},"content":"        String joinFragmentValue \u003d isYetToJoinCourse"},{"lineNumber":286,"author":{"gitId":"EuniceSim142"},"content":"                ? Templates.populateTemplate(joinFragmentTemplate,"},{"lineNumber":287,"author":{"gitId":"EuniceSim142"},"content":"                        \"${joinUrl}\", joinUrl,"},{"lineNumber":288,"author":{"gitId":"EuniceSim142"},"content":"                        \"${courseName}\", SanitizationHelper.sanitizeForHtml(course.getName()),"},{"lineNumber":289,"author":{"gitId":"EuniceSim142"},"content":"                        \"${coOwnersEmails}\", generateCoOwnersEmailsLine(course.getId()),"},{"lineNumber":290,"author":{"gitId":"EuniceSim142"},"content":"                        \"${supportEmail}\", Config.SUPPORT_EMAIL)"},{"lineNumber":291,"author":{"gitId":"EuniceSim142"},"content":"                : \"\";"},{"lineNumber":292,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":293,"author":{"gitId":"EuniceSim142"},"content":"        for (FeedbackSession fs : sessions) {"},{"lineNumber":294,"author":{"gitId":"EuniceSim142"},"content":"            String submitUrlHtml \u003d \"(Feedback session is not yet opened)\";"},{"lineNumber":295,"author":{"gitId":"EuniceSim142"},"content":"            String reportUrlHtml \u003d \"(Feedback session is not yet published)\";"},{"lineNumber":296,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":297,"author":{"gitId":"EuniceSim142"},"content":"            String userKey \u003d isInstructor ? instructor.getRegKey() : student.getRegKey();"},{"lineNumber":298,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":299,"author":{"gitId":"EuniceSim142"},"content":"            if (fs.isOpened() || fs.isClosed()) {"},{"lineNumber":300,"author":{"gitId":"EuniceSim142"},"content":"                String submitUrl \u003d Config.getFrontEndAppUrl(Const.WebPageURIs.SESSION_SUBMISSION_PAGE)"},{"lineNumber":301,"author":{"gitId":"EuniceSim142"},"content":"                        .withCourseId(course.getId())"},{"lineNumber":302,"author":{"gitId":"EuniceSim142"},"content":"                        .withSessionName(fs.getName())"},{"lineNumber":303,"author":{"gitId":"EuniceSim142"},"content":"                        .withRegistrationKey(userKey)"},{"lineNumber":304,"author":{"gitId":"EuniceSim142"},"content":"                        .withEntityType(isInstructor ? Const.EntityType.INSTRUCTOR : \"\")"},{"lineNumber":305,"author":{"gitId":"EuniceSim142"},"content":"                        .toAbsoluteString();"},{"lineNumber":306,"author":{"gitId":"EuniceSim142"},"content":"                submitUrlHtml \u003d \"\u003ca href\u003d\\\"\" + submitUrl + \"\\\"\u003e\" + submitUrl + \"\u003c/a\u003e\";"},{"lineNumber":307,"author":{"gitId":"EuniceSim142"},"content":"            }"},{"lineNumber":308,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":309,"author":{"gitId":"EuniceSim142"},"content":"            if (fs.isPublished()) {"},{"lineNumber":310,"author":{"gitId":"EuniceSim142"},"content":"                String reportUrl \u003d Config.getFrontEndAppUrl(Const.WebPageURIs.SESSION_RESULTS_PAGE)"},{"lineNumber":311,"author":{"gitId":"EuniceSim142"},"content":"                        .withCourseId(course.getId())"},{"lineNumber":312,"author":{"gitId":"EuniceSim142"},"content":"                        .withSessionName(fs.getName())"},{"lineNumber":313,"author":{"gitId":"EuniceSim142"},"content":"                        .withRegistrationKey(userKey)"},{"lineNumber":314,"author":{"gitId":"EuniceSim142"},"content":"                        .withEntityType(isInstructor ? Const.EntityType.INSTRUCTOR : \"\")"},{"lineNumber":315,"author":{"gitId":"EuniceSim142"},"content":"                        .toAbsoluteString();"},{"lineNumber":316,"author":{"gitId":"EuniceSim142"},"content":"                reportUrlHtml \u003d \"\u003ca href\u003d\\\"\" + reportUrl + \"\\\"\u003e\" + reportUrl + \"\u003c/a\u003e\";"},{"lineNumber":317,"author":{"gitId":"EuniceSim142"},"content":"            }"},{"lineNumber":318,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":319,"author":{"gitId":"EuniceSim142"},"content":"            Instant endTime \u003d TimeHelper.getMidnightAdjustedInstantBasedOnZone("},{"lineNumber":320,"author":{"gitId":"EuniceSim142"},"content":"                    fs.getEndTime(), fs.getCourse().getTimeZone(), false);"},{"lineNumber":321,"author":{"gitId":"EuniceSim142"},"content":"            linksFragmentValue.append(Templates.populateTemplate("},{"lineNumber":322,"author":{"gitId":"EuniceSim142"},"content":"                    EmailTemplates.FRAGMENT_SINGLE_FEEDBACK_SESSION_LINKS,"},{"lineNumber":323,"author":{"gitId":"EuniceSim142"},"content":"                    \"${feedbackSessionName}\", fs.getName(),"},{"lineNumber":324,"author":{"gitId":"EuniceSim142"},"content":"                    \"${deadline}\", TimeHelper.formatInstant(endTime, fs.getCourse().getTimeZone(), DATETIME_DISPLAY_FORMAT)"},{"lineNumber":325,"author":{"gitId":"EuniceSim142"},"content":"                            + (fs.isClosed() ? \" (Passed)\" : \"\"),"},{"lineNumber":326,"author":{"gitId":"EuniceSim142"},"content":"                    \"${submitUrl}\", submitUrlHtml,"},{"lineNumber":327,"author":{"gitId":"EuniceSim142"},"content":"                    \"${reportUrl}\", reportUrlHtml));"},{"lineNumber":328,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":329,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":330,"author":{"gitId":"EuniceSim142"},"content":"        if (linksFragmentValue.length() \u003d\u003d 0) {"},{"lineNumber":331,"author":{"gitId":"EuniceSim142"},"content":"            linksFragmentValue.append(\"No links found.\");"},{"lineNumber":332,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":333,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":334,"author":{"gitId":"EuniceSim142"},"content":"        String additionalContactInformation \u003d getAdditionalContactInformationFragment(course, isInstructor);"},{"lineNumber":335,"author":{"gitId":"EuniceSim142"},"content":"        String resendLinksTemplate \u003d emailType \u003d\u003d EmailType.STUDENT_EMAIL_CHANGED"},{"lineNumber":336,"author":{"gitId":"EuniceSim142"},"content":"                ? Templates.EmailTemplates.USER_FEEDBACK_SESSION_RESEND_ALL_LINKS"},{"lineNumber":337,"author":{"gitId":"EuniceSim142"},"content":"                : Templates.EmailTemplates.USER_REGKEY_REGENERATION_RESEND_ALL_COURSE_LINKS;"},{"lineNumber":338,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":339,"author":{"gitId":"EuniceSim142"},"content":"        String userName \u003d isInstructor ? instructor.getName() : student.getName();"},{"lineNumber":340,"author":{"gitId":"EuniceSim142"},"content":"        String emailBody \u003d Templates.populateTemplate(resendLinksTemplate,"},{"lineNumber":341,"author":{"gitId":"EuniceSim142"},"content":"                \"${userName}\", SanitizationHelper.sanitizeForHtml(userName),"},{"lineNumber":342,"author":{"gitId":"EuniceSim142"},"content":"                \"${userEmail}\", userEmail,"},{"lineNumber":343,"author":{"gitId":"EuniceSim142"},"content":"                \"${courseName}\", SanitizationHelper.sanitizeForHtml(course.getName()),"},{"lineNumber":344,"author":{"gitId":"EuniceSim142"},"content":"                \"${courseId}\", course.getId(),"},{"lineNumber":345,"author":{"gitId":"EuniceSim142"},"content":"                \"${joinFragment}\", joinFragmentValue,"},{"lineNumber":346,"author":{"gitId":"EuniceSim142"},"content":"                \"${linksFragment}\", linksFragmentValue.toString(),"},{"lineNumber":347,"author":{"gitId":"EuniceSim142"},"content":"                \"${additionalContactInformation}\", additionalContactInformation);"},{"lineNumber":348,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":349,"author":{"gitId":"EuniceSim142"},"content":"        EmailWrapper email \u003d getEmptyEmailAddressedToEmail(userEmail);"},{"lineNumber":350,"author":{"gitId":"EuniceSim142"},"content":"        email.setContent(emailBody);"},{"lineNumber":351,"author":{"gitId":"EuniceSim142"},"content":"        email.setType(emailType);"},{"lineNumber":352,"author":{"gitId":"EuniceSim142"},"content":"        email.setSubjectFromType(course.getName(), course.getId());"},{"lineNumber":353,"author":{"gitId":"EuniceSim142"},"content":"        return email;"},{"lineNumber":354,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":355,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":356,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":357,"author":{"gitId":"EuniceSim142"},"content":"     * Generates for the student an recovery email listing the links to submit/view responses for all feedback sessions"},{"lineNumber":358,"author":{"gitId":"EuniceSim142"},"content":"     * under {@code recoveryEmailAddress} in the past 180 days. If no student with {@code recoveryEmailAddress} is"},{"lineNumber":359,"author":{"gitId":"EuniceSim142"},"content":"     * found, generate an email stating that there is no such student in the system. If no feedback sessions are found,"},{"lineNumber":360,"author":{"gitId":"EuniceSim142"},"content":"     * generate an email stating no feedback sessions found."},{"lineNumber":361,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":362,"author":{"gitId":"EuniceSim142"},"content":"    public EmailWrapper generateSessionLinksRecoveryEmailForStudent(String recoveryEmailAddress) {"},{"lineNumber":363,"author":{"gitId":"EuniceSim142"},"content":"        List\u003cStudent\u003e studentsForEmail \u003d usersLogic.getAllStudentsForEmail(recoveryEmailAddress);"},{"lineNumber":364,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":365,"author":{"gitId":"EuniceSim142"},"content":"        if (studentsForEmail.isEmpty()) {"},{"lineNumber":366,"author":{"gitId":"EuniceSim142"},"content":"            return generateSessionLinksRecoveryEmailForNonExistentStudent(recoveryEmailAddress);"},{"lineNumber":367,"author":{"gitId":"EuniceSim142"},"content":"        } else {"},{"lineNumber":368,"author":{"gitId":"EuniceSim142"},"content":"            return generateSessionLinksRecoveryEmailForExistingStudent(recoveryEmailAddress, studentsForEmail);"},{"lineNumber":369,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":370,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":371,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":372,"author":{"gitId":"EuniceSim142"},"content":"    private EmailWrapper generateSessionLinksRecoveryEmailForNonExistentStudent(String recoveryEmailAddress) {"},{"lineNumber":373,"author":{"gitId":"EuniceSim142"},"content":"        String recoveryUrl \u003d Config.getFrontEndAppUrl(Const.WebPageURIs.SESSIONS_LINK_RECOVERY_PAGE).toAbsoluteString();"},{"lineNumber":374,"author":{"gitId":"EuniceSim142"},"content":"        String emailBody \u003d Templates.populateTemplate("},{"lineNumber":375,"author":{"gitId":"EuniceSim142"},"content":"                EmailTemplates.SESSION_LINKS_RECOVERY_EMAIL_NOT_FOUND,"},{"lineNumber":376,"author":{"gitId":"EuniceSim142"},"content":"                \"${userEmail}\", SanitizationHelper.sanitizeForHtml(recoveryEmailAddress),"},{"lineNumber":377,"author":{"gitId":"EuniceSim142"},"content":"                \"${supportEmail}\", Config.SUPPORT_EMAIL,"},{"lineNumber":378,"author":{"gitId":"EuniceSim142"},"content":"                \"${teammateHomePageLink}\", Config.getFrontEndAppUrl(\"/\").toAbsoluteString(),"},{"lineNumber":379,"author":{"gitId":"EuniceSim142"},"content":"                \"${sessionsRecoveryLink}\", recoveryUrl);"},{"lineNumber":380,"author":{"gitId":"EuniceSim142"},"content":"        EmailWrapper email \u003d getEmptyEmailAddressedToEmail(recoveryEmailAddress);"},{"lineNumber":381,"author":{"gitId":"EuniceSim142"},"content":"        email.setType(EmailType.SESSION_LINKS_RECOVERY);"},{"lineNumber":382,"author":{"gitId":"EuniceSim142"},"content":"        email.setSubjectFromType();"},{"lineNumber":383,"author":{"gitId":"EuniceSim142"},"content":"        email.setContent(emailBody);"},{"lineNumber":384,"author":{"gitId":"EuniceSim142"},"content":"        return email;"},{"lineNumber":385,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":386,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":387,"author":{"gitId":"EuniceSim142"},"content":"    private EmailWrapper generateSessionLinksRecoveryEmailForExistingStudent(String recoveryEmailAddress,"},{"lineNumber":388,"author":{"gitId":"EuniceSim142"},"content":"            List\u003cStudent\u003e studentsForEmail) {"},{"lineNumber":389,"author":{"gitId":"EuniceSim142"},"content":"        String emailBody;"},{"lineNumber":390,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":391,"author":{"gitId":"EuniceSim142"},"content":"        Instant searchStartTime \u003d TimeHelper.getInstantDaysOffsetBeforeNow(SESSION_LINK_RECOVERY_DURATION_IN_DAYS);"},{"lineNumber":392,"author":{"gitId":"EuniceSim142"},"content":"        Map\u003cString, StringBuilder\u003e linkFragmentsMap \u003d new HashMap\u003c\u003e();"},{"lineNumber":393,"author":{"gitId":"EuniceSim142"},"content":"        String studentName \u003d null;"},{"lineNumber":394,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":395,"author":{"gitId":"EuniceSim142"},"content":"        for (var student : studentsForEmail) {"},{"lineNumber":396,"author":{"gitId":"EuniceSim142"},"content":"            RequestTracer.checkRemainingTime();"},{"lineNumber":397,"author":{"gitId":"EuniceSim142"},"content":"            // Query students\u0027 courses first"},{"lineNumber":398,"author":{"gitId":"EuniceSim142"},"content":"            // as a student will likely be in only a small number of courses."},{"lineNumber":399,"author":{"gitId":"EuniceSim142"},"content":"            var course \u003d student.getCourse();"},{"lineNumber":400,"author":{"gitId":"EuniceSim142"},"content":"            var courseId \u003d course.getId();"},{"lineNumber":401,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":402,"author":{"gitId":"EuniceSim142"},"content":"            StringBuilder linksFragmentValue;"},{"lineNumber":403,"author":{"gitId":"EuniceSim142"},"content":"            if (linkFragmentsMap.containsKey(courseId)) {"},{"lineNumber":404,"author":{"gitId":"EuniceSim142"},"content":"                linksFragmentValue \u003d linkFragmentsMap.get(courseId);"},{"lineNumber":405,"author":{"gitId":"EuniceSim142"},"content":"            } else {"},{"lineNumber":406,"author":{"gitId":"EuniceSim142"},"content":"                linksFragmentValue \u003d new StringBuilder(5000);"},{"lineNumber":407,"author":{"gitId":"EuniceSim142"},"content":"            }"},{"lineNumber":408,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":409,"author":{"gitId":"EuniceSim142"},"content":"            studentName \u003d student.getName();"},{"lineNumber":410,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":411,"author":{"gitId":"EuniceSim142"},"content":"            for (var session : fsLogic.getFeedbackSessionsForCourseStartingAfter(courseId, searchStartTime)) {"},{"lineNumber":412,"author":{"gitId":"EuniceSim142"},"content":"                RequestTracer.checkRemainingTime();"},{"lineNumber":413,"author":{"gitId":"EuniceSim142"},"content":"                var submitUrlHtml \u003d \"\";"},{"lineNumber":414,"author":{"gitId":"EuniceSim142"},"content":"                var reportUrlHtml \u003d \"\";"},{"lineNumber":415,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":416,"author":{"gitId":"EuniceSim142"},"content":"                if (session.isOpened() || session.isClosed()) {"},{"lineNumber":417,"author":{"gitId":"EuniceSim142"},"content":"                    var submitUrl \u003d Config.getFrontEndAppUrl(Const.WebPageURIs.SESSION_SUBMISSION_PAGE)"},{"lineNumber":418,"author":{"gitId":"EuniceSim142"},"content":"                            .withCourseId(course.getId())"},{"lineNumber":419,"author":{"gitId":"EuniceSim142"},"content":"                            .withSessionName(session.getName())"},{"lineNumber":420,"author":{"gitId":"EuniceSim142"},"content":"                            .withRegistrationKey(student.getRegKey())"},{"lineNumber":421,"author":{"gitId":"EuniceSim142"},"content":"                            .toAbsoluteString();"},{"lineNumber":422,"author":{"gitId":"EuniceSim142"},"content":"                    submitUrlHtml \u003d \"[\u003ca href\u003d\\\"\" + submitUrl + \"\\\"\u003esubmission link\u003c/a\u003e]\";"},{"lineNumber":423,"author":{"gitId":"EuniceSim142"},"content":"                }"},{"lineNumber":424,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":425,"author":{"gitId":"EuniceSim142"},"content":"                if (session.isPublished()) {"},{"lineNumber":426,"author":{"gitId":"EuniceSim142"},"content":"                    var reportUrl \u003d Config.getFrontEndAppUrl(Const.WebPageURIs.SESSION_RESULTS_PAGE)"},{"lineNumber":427,"author":{"gitId":"EuniceSim142"},"content":"                            .withCourseId(course.getId())"},{"lineNumber":428,"author":{"gitId":"EuniceSim142"},"content":"                            .withSessionName(session.getName())"},{"lineNumber":429,"author":{"gitId":"EuniceSim142"},"content":"                            .withRegistrationKey(student.getRegKey())"},{"lineNumber":430,"author":{"gitId":"EuniceSim142"},"content":"                            .toAbsoluteString();"},{"lineNumber":431,"author":{"gitId":"EuniceSim142"},"content":"                    reportUrlHtml \u003d \"[\u003ca href\u003d\\\"\" + reportUrl + \"\\\"\u003eresult link\u003c/a\u003e]\";"},{"lineNumber":432,"author":{"gitId":"EuniceSim142"},"content":"                }"},{"lineNumber":433,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":434,"author":{"gitId":"EuniceSim142"},"content":"                if (submitUrlHtml.isEmpty() \u0026\u0026 reportUrlHtml.isEmpty()) {"},{"lineNumber":435,"author":{"gitId":"EuniceSim142"},"content":"                    continue;"},{"lineNumber":436,"author":{"gitId":"EuniceSim142"},"content":"                }"},{"lineNumber":437,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":438,"author":{"gitId":"EuniceSim142"},"content":"                linksFragmentValue.append(Templates.populateTemplate("},{"lineNumber":439,"author":{"gitId":"EuniceSim142"},"content":"                        EmailTemplates.FRAGMENT_SESSION_LINKS_RECOVERY_ACCESS_LINKS_BY_SESSION,"},{"lineNumber":440,"author":{"gitId":"EuniceSim142"},"content":"                        \"${sessionName}\", session.getName(),"},{"lineNumber":441,"author":{"gitId":"EuniceSim142"},"content":"                        \"${submitUrl}\", submitUrlHtml,"},{"lineNumber":442,"author":{"gitId":"EuniceSim142"},"content":"                        \"${reportUrl}\", reportUrlHtml));"},{"lineNumber":443,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":444,"author":{"gitId":"EuniceSim142"},"content":"                linkFragmentsMap.putIfAbsent(courseId, linksFragmentValue);"},{"lineNumber":445,"author":{"gitId":"EuniceSim142"},"content":"            }"},{"lineNumber":446,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":447,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":448,"author":{"gitId":"EuniceSim142"},"content":"        var recoveryUrl \u003d Config.getFrontEndAppUrl(Const.WebPageURIs.SESSIONS_LINK_RECOVERY_PAGE).toAbsoluteString();"},{"lineNumber":449,"author":{"gitId":"EuniceSim142"},"content":"        if (linkFragmentsMap.isEmpty()) {"},{"lineNumber":450,"author":{"gitId":"EuniceSim142"},"content":"            emailBody \u003d Templates.populateTemplate("},{"lineNumber":451,"author":{"gitId":"EuniceSim142"},"content":"                    EmailTemplates.SESSION_LINKS_RECOVERY_ACCESS_LINKS_NONE,"},{"lineNumber":452,"author":{"gitId":"EuniceSim142"},"content":"                    \"${teammateHomePageLink}\", Config.getFrontEndAppUrl(\"/\").toAbsoluteString(),"},{"lineNumber":453,"author":{"gitId":"EuniceSim142"},"content":"                    \"${userEmail}\", SanitizationHelper.sanitizeForHtml(recoveryEmailAddress),"},{"lineNumber":454,"author":{"gitId":"EuniceSim142"},"content":"                    \"${supportEmail}\", Config.SUPPORT_EMAIL,"},{"lineNumber":455,"author":{"gitId":"EuniceSim142"},"content":"                    \"${sessionsRecoveryLink}\", recoveryUrl);"},{"lineNumber":456,"author":{"gitId":"EuniceSim142"},"content":"        } else {"},{"lineNumber":457,"author":{"gitId":"EuniceSim142"},"content":"            var courseFragments \u003d new StringBuilder(10000);"},{"lineNumber":458,"author":{"gitId":"EuniceSim142"},"content":"            linkFragmentsMap.forEach((courseId, linksFragments) -\u003e {"},{"lineNumber":459,"author":{"gitId":"EuniceSim142"},"content":"                String courseBody \u003d Templates.populateTemplate("},{"lineNumber":460,"author":{"gitId":"EuniceSim142"},"content":"                        EmailTemplates.FRAGMENT_SESSION_LINKS_RECOVERY_ACCESS_LINKS_BY_COURSE,"},{"lineNumber":461,"author":{"gitId":"EuniceSim142"},"content":"                        \"${sessionFragment}\", linksFragments.toString(),"},{"lineNumber":462,"author":{"gitId":"EuniceSim142"},"content":"                        \"${courseName}\", coursesLogic.getCourse(courseId).getName());"},{"lineNumber":463,"author":{"gitId":"EuniceSim142"},"content":"                courseFragments.append(courseBody);"},{"lineNumber":464,"author":{"gitId":"EuniceSim142"},"content":"            });"},{"lineNumber":465,"author":{"gitId":"EuniceSim142"},"content":"            emailBody \u003d Templates.populateTemplate("},{"lineNumber":466,"author":{"gitId":"EuniceSim142"},"content":"                    EmailTemplates.SESSION_LINKS_RECOVERY_ACCESS_LINKS,"},{"lineNumber":467,"author":{"gitId":"EuniceSim142"},"content":"                    \"${userName}\", SanitizationHelper.sanitizeForHtml(studentName),"},{"lineNumber":468,"author":{"gitId":"EuniceSim142"},"content":"                    \"${linksFragment}\", courseFragments.toString(),"},{"lineNumber":469,"author":{"gitId":"EuniceSim142"},"content":"                    \"${userEmail}\", SanitizationHelper.sanitizeForHtml(recoveryEmailAddress),"},{"lineNumber":470,"author":{"gitId":"EuniceSim142"},"content":"                    \"${teammateHomePageLink}\", Config.getFrontEndAppUrl(\"/\").toAbsoluteString(),"},{"lineNumber":471,"author":{"gitId":"EuniceSim142"},"content":"                    \"${supportEmail}\", Config.SUPPORT_EMAIL,"},{"lineNumber":472,"author":{"gitId":"EuniceSim142"},"content":"                    \"${sessionsRecoveryLink}\", recoveryUrl);"},{"lineNumber":473,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":474,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":475,"author":{"gitId":"EuniceSim142"},"content":"        var email \u003d getEmptyEmailAddressedToEmail(recoveryEmailAddress);"},{"lineNumber":476,"author":{"gitId":"EuniceSim142"},"content":"        email.setType(EmailType.SESSION_LINKS_RECOVERY);"},{"lineNumber":477,"author":{"gitId":"EuniceSim142"},"content":"        email.setSubjectFromType();"},{"lineNumber":478,"author":{"gitId":"EuniceSim142"},"content":"        email.setContent(emailBody);"},{"lineNumber":479,"author":{"gitId":"EuniceSim142"},"content":"        return email;"},{"lineNumber":480,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":481,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":482,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":483,"author":{"gitId":"EuniceSim142"},"content":"     * Generates the feedback session closing emails for the given {@code session}."},{"lineNumber":484,"author":{"gitId":"EuniceSim142"},"content":"     *"},{"lineNumber":485,"author":{"gitId":"EuniceSim142"},"content":"     * \u003cp\u003eStudents and instructors with deadline extensions are not notified."},{"lineNumber":486,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":487,"author":{"gitId":"EuniceSim142"},"content":"    public List\u003cEmailWrapper\u003e generateFeedbackSessionClosingEmails(FeedbackSession session) {"},{"lineNumber":488,"author":{"gitId":"EuniceSim142"},"content":"        return generateFeedbackSessionOpeningOrClosingEmails(session, EmailType.FEEDBACK_CLOSING);"},{"lineNumber":489,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":490,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":491,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":492,"author":{"gitId":"EuniceSim142"},"content":"     * Generates the feedback session closed emails for the given {@code session}."},{"lineNumber":493,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":494,"author":{"gitId":"EuniceSim142"},"content":"    public List\u003cEmailWrapper\u003e generateFeedbackSessionClosedEmails(FeedbackSession session) {"},{"lineNumber":495,"author":{"gitId":"EuniceSim142"},"content":"        return generateFeedbackSessionOpeningSoonOrClosedEmails(session, EmailType.FEEDBACK_CLOSED);"},{"lineNumber":496,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":497,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":498,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":499,"author":{"gitId":"EuniceSim142"},"content":"     * Generates the feedback session closing emails for users with deadline extensions."},{"lineNumber":500,"author":{"gitId":"EuniceSim142"},"content":"    */"},{"lineNumber":501,"author":{"gitId":"EuniceSim142"},"content":"    public List\u003cEmailWrapper\u003e generateFeedbackSessionClosingWithExtensionEmails("},{"lineNumber":502,"author":{"gitId":"EuniceSim142"},"content":"            FeedbackSession session, List\u003cDeadlineExtension\u003e deadlineExtensions) {"},{"lineNumber":503,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d session.getCourse();"},{"lineNumber":504,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":505,"author":{"gitId":"EuniceSim142"},"content":"        boolean isEmailNeededForStudents \u003d"},{"lineNumber":506,"author":{"gitId":"EuniceSim142"},"content":"                !deadlineExtensions.isEmpty() \u0026\u0026 fsLogic.isFeedbackSessionForUserTypeToAnswer(session, false);"},{"lineNumber":507,"author":{"gitId":"EuniceSim142"},"content":"        boolean isEmailNeededForInstructors \u003d"},{"lineNumber":508,"author":{"gitId":"EuniceSim142"},"content":"                !deadlineExtensions.isEmpty() \u0026\u0026 fsLogic.isFeedbackSessionForUserTypeToAnswer(session, true);"},{"lineNumber":509,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":510,"author":{"gitId":"EuniceSim142"},"content":"        List\u003cStudent\u003e students \u003d new ArrayList\u003c\u003e();"},{"lineNumber":511,"author":{"gitId":"EuniceSim142"},"content":"        if (isEmailNeededForStudents) {"},{"lineNumber":512,"author":{"gitId":"EuniceSim142"},"content":"            for (DeadlineExtension de : deadlineExtensions) {"},{"lineNumber":513,"author":{"gitId":"EuniceSim142"},"content":"                Student student \u003d usersLogic.getStudentForEmail(course.getId(), de.getUser().getEmail());"},{"lineNumber":514,"author":{"gitId":"EuniceSim142"},"content":"                if (student !\u003d null) {"},{"lineNumber":515,"author":{"gitId":"EuniceSim142"},"content":"                    students.add(student);"},{"lineNumber":516,"author":{"gitId":"EuniceSim142"},"content":"                }"},{"lineNumber":517,"author":{"gitId":"EuniceSim142"},"content":"            }"},{"lineNumber":518,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":519,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":520,"author":{"gitId":"EuniceSim142"},"content":"        List\u003cInstructor\u003e instructors \u003d new ArrayList\u003c\u003e();"},{"lineNumber":521,"author":{"gitId":"EuniceSim142"},"content":"        if (isEmailNeededForInstructors) {"},{"lineNumber":522,"author":{"gitId":"EuniceSim142"},"content":"            for (DeadlineExtension de : deadlineExtensions) {"},{"lineNumber":523,"author":{"gitId":"EuniceSim142"},"content":"                Instructor instructor \u003d"},{"lineNumber":524,"author":{"gitId":"EuniceSim142"},"content":"                        usersLogic.getInstructorForEmail(course.getId(), de.getUser().getEmail());"},{"lineNumber":525,"author":{"gitId":"EuniceSim142"},"content":"                if (instructor !\u003d null) {"},{"lineNumber":526,"author":{"gitId":"EuniceSim142"},"content":"                    instructors.add(instructor);"},{"lineNumber":527,"author":{"gitId":"EuniceSim142"},"content":"                }"},{"lineNumber":528,"author":{"gitId":"EuniceSim142"},"content":"            }"},{"lineNumber":529,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":530,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":531,"author":{"gitId":"EuniceSim142"},"content":"        String template \u003d EmailTemplates.USER_FEEDBACK_SESSION.replace(\"${status}\", FEEDBACK_STATUS_SESSION_CLOSING);"},{"lineNumber":532,"author":{"gitId":"EuniceSim142"},"content":"        EmailType type \u003d EmailType.FEEDBACK_CLOSING;"},{"lineNumber":533,"author":{"gitId":"EuniceSim142"},"content":"        String feedbackAction \u003d FEEDBACK_ACTION_SUBMIT_EDIT_OR_VIEW;"},{"lineNumber":534,"author":{"gitId":"EuniceSim142"},"content":"        List\u003cEmailWrapper\u003e emails \u003d new ArrayList\u003c\u003e();"},{"lineNumber":535,"author":{"gitId":"EuniceSim142"},"content":"        for (Student student : students) {"},{"lineNumber":536,"author":{"gitId":"EuniceSim142"},"content":"            emails.addAll(generateFeedbackSessionEmailBases(course, session, Collections.singletonList(student),"},{"lineNumber":537,"author":{"gitId":"EuniceSim142"},"content":"                    Collections.emptyList(), Collections.emptyList(), template, type, feedbackAction));"},{"lineNumber":538,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":539,"author":{"gitId":"EuniceSim142"},"content":"        for (Instructor instructor : instructors) {"},{"lineNumber":540,"author":{"gitId":"EuniceSim142"},"content":"            emails.addAll(generateFeedbackSessionEmailBases(course, session, Collections.emptyList(),"},{"lineNumber":541,"author":{"gitId":"EuniceSim142"},"content":"                    Collections.singletonList(instructor), Collections.emptyList(), template, type, feedbackAction));"},{"lineNumber":542,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":543,"author":{"gitId":"EuniceSim142"},"content":"        return emails;"},{"lineNumber":544,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":545,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":546,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":547,"author":{"gitId":"EuniceSim142"},"content":"     * Generates the feedback session published emails for the given {@code session}."},{"lineNumber":548,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":549,"author":{"gitId":"EuniceSim142"},"content":"    public List\u003cEmailWrapper\u003e generateFeedbackSessionPublishedEmails(FeedbackSession session) {"},{"lineNumber":550,"author":{"gitId":"EuniceSim142"},"content":"        return generateFeedbackSessionPublishedOrUnpublishedEmails(session, EmailType.FEEDBACK_PUBLISHED);"},{"lineNumber":551,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":552,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":553,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":554,"author":{"gitId":"EuniceSim142"},"content":"     * Generates the feedback session published emails for the given {@code students} and"},{"lineNumber":555,"author":{"gitId":"EuniceSim142"},"content":"     * {@code instructors} in {@code session}."},{"lineNumber":556,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":557,"author":{"gitId":"EuniceSim142"},"content":"    public List\u003cEmailWrapper\u003e generateFeedbackSessionPublishedEmails(FeedbackSession session,"},{"lineNumber":558,"author":{"gitId":"EuniceSim142"},"content":"            List\u003cStudent\u003e students, List\u003cInstructor\u003e instructors,"},{"lineNumber":559,"author":{"gitId":"EuniceSim142"},"content":"            List\u003cInstructor\u003e instructorsToNotify) {"},{"lineNumber":560,"author":{"gitId":"EuniceSim142"},"content":"        return generateFeedbackSessionPublishedOrUnpublishedEmails("},{"lineNumber":561,"author":{"gitId":"EuniceSim142"},"content":"                session, students, instructors, instructorsToNotify, EmailType.FEEDBACK_PUBLISHED);"},{"lineNumber":562,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":563,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":564,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":565,"author":{"gitId":"EuniceSim142"},"content":"     * Generates the feedback session unpublished emails for the given {@code session}."},{"lineNumber":566,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":567,"author":{"gitId":"EuniceSim142"},"content":"    public List\u003cEmailWrapper\u003e generateFeedbackSessionUnpublishedEmails(FeedbackSession session) {"},{"lineNumber":568,"author":{"gitId":"EuniceSim142"},"content":"        return generateFeedbackSessionPublishedOrUnpublishedEmails(session, EmailType.FEEDBACK_UNPUBLISHED);"},{"lineNumber":569,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":570,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":571,"author":{"gitId":"EuniceSim142"},"content":"    private List\u003cEmailWrapper\u003e generateFeedbackSessionPublishedOrUnpublishedEmails("},{"lineNumber":572,"author":{"gitId":"EuniceSim142"},"content":"            FeedbackSession session, EmailType emailType) {"},{"lineNumber":573,"author":{"gitId":"EuniceSim142"},"content":"        boolean isEmailNeededForStudents \u003d fsLogic.isFeedbackSessionViewableToUserType(session, false);"},{"lineNumber":574,"author":{"gitId":"EuniceSim142"},"content":"        boolean isEmailNeededForInstructors \u003d fsLogic.isFeedbackSessionViewableToUserType(session, true);"},{"lineNumber":575,"author":{"gitId":"EuniceSim142"},"content":"        List\u003cInstructor\u003e instructorsToNotify \u003d isEmailNeededForStudents"},{"lineNumber":576,"author":{"gitId":"EuniceSim142"},"content":"                ? usersLogic.getCoOwnersForCourse(session.getCourse().getId())"},{"lineNumber":577,"author":{"gitId":"EuniceSim142"},"content":"                : new ArrayList\u003c\u003e();"},{"lineNumber":578,"author":{"gitId":"EuniceSim142"},"content":"        List\u003cStudent\u003e students \u003d isEmailNeededForStudents"},{"lineNumber":579,"author":{"gitId":"EuniceSim142"},"content":"                ? usersLogic.getStudentsForCourse(session.getCourse().getId())"},{"lineNumber":580,"author":{"gitId":"EuniceSim142"},"content":"                : new ArrayList\u003c\u003e();"},{"lineNumber":581,"author":{"gitId":"EuniceSim142"},"content":"        List\u003cInstructor\u003e instructors \u003d isEmailNeededForInstructors"},{"lineNumber":582,"author":{"gitId":"EuniceSim142"},"content":"                ? usersLogic.getInstructorsForCourse(session.getCourse().getId())"},{"lineNumber":583,"author":{"gitId":"EuniceSim142"},"content":"                : new ArrayList\u003c\u003e();"},{"lineNumber":584,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":585,"author":{"gitId":"EuniceSim142"},"content":"        return generateFeedbackSessionPublishedOrUnpublishedEmails("},{"lineNumber":586,"author":{"gitId":"EuniceSim142"},"content":"                session, students, instructors, instructorsToNotify, emailType);"},{"lineNumber":587,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":588,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":589,"author":{"gitId":"EuniceSim142"},"content":"    private List\u003cEmailWrapper\u003e generateFeedbackSessionPublishedOrUnpublishedEmails("},{"lineNumber":590,"author":{"gitId":"EuniceSim142"},"content":"            FeedbackSession session, List\u003cStudent\u003e students,"},{"lineNumber":591,"author":{"gitId":"EuniceSim142"},"content":"            List\u003cInstructor\u003e instructors, List\u003cInstructor\u003e instructorsToNotify, EmailType emailType) {"},{"lineNumber":592,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d session.getCourse();"},{"lineNumber":593,"author":{"gitId":"EuniceSim142"},"content":"        String template;"},{"lineNumber":594,"author":{"gitId":"EuniceSim142"},"content":"        String action;"},{"lineNumber":595,"author":{"gitId":"EuniceSim142"},"content":"        if (emailType \u003d\u003d EmailType.FEEDBACK_PUBLISHED) {"},{"lineNumber":596,"author":{"gitId":"EuniceSim142"},"content":"            template \u003d EmailTemplates.USER_FEEDBACK_SESSION_PUBLISHED;"},{"lineNumber":597,"author":{"gitId":"EuniceSim142"},"content":"            action \u003d FEEDBACK_ACTION_VIEW;"},{"lineNumber":598,"author":{"gitId":"EuniceSim142"},"content":"        } else {"},{"lineNumber":599,"author":{"gitId":"EuniceSim142"},"content":"            template \u003d EmailTemplates.USER_FEEDBACK_SESSION_UNPUBLISHED;"},{"lineNumber":600,"author":{"gitId":"EuniceSim142"},"content":"            action \u003d FEEDBACK_ACTION_SUBMIT_EDIT_OR_VIEW;"},{"lineNumber":601,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":602,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":603,"author":{"gitId":"EuniceSim142"},"content":"        return generateFeedbackSessionEmailBases(course, session, students, instructors, instructorsToNotify, template,"},{"lineNumber":604,"author":{"gitId":"EuniceSim142"},"content":"                emailType, action);"},{"lineNumber":605,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":606,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":607,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":608,"author":{"gitId":"EuniceSim142"},"content":"     * Generates deadline extension granted emails."},{"lineNumber":609,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":610,"author":{"gitId":"EuniceSim142"},"content":"    public List\u003cEmailWrapper\u003e generateDeadlineGrantedEmails(Course course,"},{"lineNumber":611,"author":{"gitId":"EuniceSim142"},"content":"            FeedbackSession session, Map\u003cString, Instant\u003e createdDeadlines, boolean areInstructors) {"},{"lineNumber":612,"author":{"gitId":"EuniceSim142"},"content":"        return createdDeadlines.entrySet()"},{"lineNumber":613,"author":{"gitId":"EuniceSim142"},"content":"                .stream()"},{"lineNumber":614,"author":{"gitId":"EuniceSim142"},"content":"                .map(entry -\u003e"},{"lineNumber":615,"author":{"gitId":"EuniceSim142"},"content":"                        generateDeadlineExtensionEmail(course, session,"},{"lineNumber":616,"author":{"gitId":"EuniceSim142"},"content":"                                session.getEndTime(), entry.getValue(), EmailType.DEADLINE_EXTENSION_GRANTED,"},{"lineNumber":617,"author":{"gitId":"EuniceSim142"},"content":"                                entry.getKey(), areInstructors))"},{"lineNumber":618,"author":{"gitId":"EuniceSim142"},"content":"                .collect(Collectors.toList());"},{"lineNumber":619,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":620,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":621,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":622,"author":{"gitId":"EuniceSim142"},"content":"     * Generates deadline extension updated emails."},{"lineNumber":623,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":624,"author":{"gitId":"EuniceSim142"},"content":"    public List\u003cEmailWrapper\u003e generateDeadlineUpdatedEmails(Course course, FeedbackSession session,"},{"lineNumber":625,"author":{"gitId":"EuniceSim142"},"content":"            Map\u003cString, Instant\u003e updatedDeadlines, Map\u003cString, Instant\u003e oldDeadlines, boolean areInstructors) {"},{"lineNumber":626,"author":{"gitId":"EuniceSim142"},"content":"        return updatedDeadlines.entrySet()"},{"lineNumber":627,"author":{"gitId":"EuniceSim142"},"content":"                .stream()"},{"lineNumber":628,"author":{"gitId":"EuniceSim142"},"content":"                .map(entry -\u003e"},{"lineNumber":629,"author":{"gitId":"EuniceSim142"},"content":"                        generateDeadlineExtensionEmail(course, session,"},{"lineNumber":630,"author":{"gitId":"EuniceSim142"},"content":"                                oldDeadlines.get(entry.getKey()), entry.getValue(), EmailType.DEADLINE_EXTENSION_UPDATED,"},{"lineNumber":631,"author":{"gitId":"EuniceSim142"},"content":"                                entry.getKey(), areInstructors))"},{"lineNumber":632,"author":{"gitId":"EuniceSim142"},"content":"                .collect(Collectors.toList());"},{"lineNumber":633,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":634,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":635,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":636,"author":{"gitId":"EuniceSim142"},"content":"     * Generates deadline extension revoked emails."},{"lineNumber":637,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":638,"author":{"gitId":"EuniceSim142"},"content":"    public List\u003cEmailWrapper\u003e generateDeadlineRevokedEmails(Course course,"},{"lineNumber":639,"author":{"gitId":"EuniceSim142"},"content":"            FeedbackSession session, Map\u003cString, Instant\u003e revokedDeadlines, boolean areInstructors) {"},{"lineNumber":640,"author":{"gitId":"EuniceSim142"},"content":"        return revokedDeadlines.entrySet()"},{"lineNumber":641,"author":{"gitId":"EuniceSim142"},"content":"                .stream()"},{"lineNumber":642,"author":{"gitId":"EuniceSim142"},"content":"                .map(entry -\u003e"},{"lineNumber":643,"author":{"gitId":"EuniceSim142"},"content":"                        generateDeadlineExtensionEmail(course, session,"},{"lineNumber":644,"author":{"gitId":"EuniceSim142"},"content":"                                entry.getValue(), session.getEndTime(), EmailType.DEADLINE_EXTENSION_REVOKED,"},{"lineNumber":645,"author":{"gitId":"EuniceSim142"},"content":"                                entry.getKey(), areInstructors))"},{"lineNumber":646,"author":{"gitId":"EuniceSim142"},"content":"                .collect(Collectors.toList());"},{"lineNumber":647,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":648,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":649,"author":{"gitId":"EuniceSim142"},"content":"    private EmailWrapper generateDeadlineExtensionEmail("},{"lineNumber":650,"author":{"gitId":"EuniceSim142"},"content":"            Course course, FeedbackSession session, Instant oldEndTime, Instant endTime,"},{"lineNumber":651,"author":{"gitId":"EuniceSim142"},"content":"            EmailType emailType, String userEmail, boolean isInstructor) {"},{"lineNumber":652,"author":{"gitId":"EuniceSim142"},"content":"        String status;"},{"lineNumber":653,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":654,"author":{"gitId":"EuniceSim142"},"content":"        switch (emailType) {"},{"lineNumber":655,"author":{"gitId":"EuniceSim142"},"content":"        case DEADLINE_EXTENSION_GRANTED:"},{"lineNumber":656,"author":{"gitId":"EuniceSim142"},"content":"            status \u003d \"You have been granted a deadline extension for the following feedback session.\";"},{"lineNumber":657,"author":{"gitId":"EuniceSim142"},"content":"            break;"},{"lineNumber":658,"author":{"gitId":"EuniceSim142"},"content":"        case DEADLINE_EXTENSION_UPDATED:"},{"lineNumber":659,"author":{"gitId":"EuniceSim142"},"content":"            status \u003d \"Your deadline for the following feedback session has been updated.\";"},{"lineNumber":660,"author":{"gitId":"EuniceSim142"},"content":"            break;"},{"lineNumber":661,"author":{"gitId":"EuniceSim142"},"content":"        case DEADLINE_EXTENSION_REVOKED:"},{"lineNumber":662,"author":{"gitId":"EuniceSim142"},"content":"            status \u003d \"Your deadline extension for the following feedback session has been revoked.\";"},{"lineNumber":663,"author":{"gitId":"EuniceSim142"},"content":"            break;"},{"lineNumber":664,"author":{"gitId":"EuniceSim142"},"content":"        default:"},{"lineNumber":665,"author":{"gitId":"EuniceSim142"},"content":"            throw new AssertionError(\"Invalid email type: \" + emailType);"},{"lineNumber":666,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":667,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":668,"author":{"gitId":"EuniceSim142"},"content":"        String additionalContactInformation \u003d getAdditionalContactInformationFragment(course, isInstructor);"},{"lineNumber":669,"author":{"gitId":"EuniceSim142"},"content":"        Instant oldEndTimeFormatted \u003d"},{"lineNumber":670,"author":{"gitId":"EuniceSim142"},"content":"                TimeHelper.getMidnightAdjustedInstantBasedOnZone(oldEndTime, session.getCourse().getTimeZone(), false);"},{"lineNumber":671,"author":{"gitId":"EuniceSim142"},"content":"        Instant newEndTimeFormatted \u003d"},{"lineNumber":672,"author":{"gitId":"EuniceSim142"},"content":"                TimeHelper.getMidnightAdjustedInstantBasedOnZone(endTime, session.getCourse().getTimeZone(), false);"},{"lineNumber":673,"author":{"gitId":"EuniceSim142"},"content":"        String template \u003d EmailTemplates.USER_DEADLINE_EXTENSION"},{"lineNumber":674,"author":{"gitId":"EuniceSim142"},"content":"                .replace(\"${status}\", status)"},{"lineNumber":675,"author":{"gitId":"EuniceSim142"},"content":"                .replace(\"${oldEndTime}\", SanitizationHelper.sanitizeForHtml("},{"lineNumber":676,"author":{"gitId":"EuniceSim142"},"content":"                        TimeHelper.formatInstant(oldEndTimeFormatted,"},{"lineNumber":677,"author":{"gitId":"EuniceSim142"},"content":"                                session.getCourse().getTimeZone(), DATETIME_DISPLAY_FORMAT)))"},{"lineNumber":678,"author":{"gitId":"EuniceSim142"},"content":"                .replace(\"${newEndTime}\", SanitizationHelper.sanitizeForHtml("},{"lineNumber":679,"author":{"gitId":"EuniceSim142"},"content":"                        TimeHelper.formatInstant(newEndTimeFormatted,"},{"lineNumber":680,"author":{"gitId":"EuniceSim142"},"content":"                                session.getCourse().getTimeZone(), DATETIME_DISPLAY_FORMAT)));"},{"lineNumber":681,"author":{"gitId":"EuniceSim142"},"content":"        String feedbackAction \u003d FEEDBACK_ACTION_SUBMIT_EDIT_OR_VIEW;"},{"lineNumber":682,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":683,"author":{"gitId":"EuniceSim142"},"content":"        if (isInstructor) {"},{"lineNumber":684,"author":{"gitId":"EuniceSim142"},"content":"            Instructor instructor \u003d usersLogic.getInstructorForEmail(course.getId(), userEmail);"},{"lineNumber":685,"author":{"gitId":"EuniceSim142"},"content":"            if (instructor \u003d\u003d null) {"},{"lineNumber":686,"author":{"gitId":"EuniceSim142"},"content":"                return null;"},{"lineNumber":687,"author":{"gitId":"EuniceSim142"},"content":"            }"},{"lineNumber":688,"author":{"gitId":"EuniceSim142"},"content":"            return generateFeedbackSessionEmailBaseForInstructors("},{"lineNumber":689,"author":{"gitId":"EuniceSim142"},"content":"                    course, session, instructor, template, emailType, feedbackAction, additionalContactInformation);"},{"lineNumber":690,"author":{"gitId":"EuniceSim142"},"content":"        } else {"},{"lineNumber":691,"author":{"gitId":"EuniceSim142"},"content":"            Student student \u003d usersLogic.getStudentForEmail(course.getId(), userEmail);"},{"lineNumber":692,"author":{"gitId":"EuniceSim142"},"content":"            if (student \u003d\u003d null) {"},{"lineNumber":693,"author":{"gitId":"EuniceSim142"},"content":"                return null;"},{"lineNumber":694,"author":{"gitId":"EuniceSim142"},"content":"            }"},{"lineNumber":695,"author":{"gitId":"EuniceSim142"},"content":"            return generateFeedbackSessionEmailBaseForStudents("},{"lineNumber":696,"author":{"gitId":"EuniceSim142"},"content":"                    course, session, student, template, emailType, feedbackAction, additionalContactInformation);"},{"lineNumber":697,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":698,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":699,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":700,"author":{"gitId":"EuniceSim142"},"content":"    private List\u003cEmailWrapper\u003e generateFeedbackSessionEmailBases("},{"lineNumber":701,"author":{"gitId":"EuniceSim142"},"content":"            Course course, FeedbackSession session, List\u003cStudent\u003e students,"},{"lineNumber":702,"author":{"gitId":"EuniceSim142"},"content":"            List\u003cInstructor\u003e instructors, List\u003cInstructor\u003e instructorsToNotify, String template,"},{"lineNumber":703,"author":{"gitId":"EuniceSim142"},"content":"            EmailType type, String feedbackAction) {"},{"lineNumber":704,"author":{"gitId":"EuniceSim142"},"content":"        StringBuilder studentAdditionalContactBuilder \u003d new StringBuilder();"},{"lineNumber":705,"author":{"gitId":"EuniceSim142"},"content":"        StringBuilder instructorAdditionalContactBuilder \u003d new StringBuilder();"},{"lineNumber":706,"author":{"gitId":"EuniceSim142"},"content":"        studentAdditionalContactBuilder.append(getAdditionalContactInformationFragment(course, false));"},{"lineNumber":707,"author":{"gitId":"EuniceSim142"},"content":"        instructorAdditionalContactBuilder.append(getAdditionalContactInformationFragment(course, true));"},{"lineNumber":708,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":709,"author":{"gitId":"EuniceSim142"},"content":"        List\u003cEmailWrapper\u003e emails \u003d new ArrayList\u003c\u003e();"},{"lineNumber":710,"author":{"gitId":"EuniceSim142"},"content":"        for (Student student : students) {"},{"lineNumber":711,"author":{"gitId":"EuniceSim142"},"content":"            emails.add(generateFeedbackSessionEmailBaseForStudents(course, session, student,"},{"lineNumber":712,"author":{"gitId":"EuniceSim142"},"content":"                    template, type, feedbackAction, studentAdditionalContactBuilder.toString()));"},{"lineNumber":713,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":714,"author":{"gitId":"EuniceSim142"},"content":"        for (Instructor instructor : instructors) {"},{"lineNumber":715,"author":{"gitId":"EuniceSim142"},"content":"            emails.add(generateFeedbackSessionEmailBaseForInstructors(course, session, instructor,"},{"lineNumber":716,"author":{"gitId":"EuniceSim142"},"content":"                    template, type, feedbackAction, instructorAdditionalContactBuilder.toString()));"},{"lineNumber":717,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":718,"author":{"gitId":"EuniceSim142"},"content":"        for (Instructor instructor : instructorsToNotify) {"},{"lineNumber":719,"author":{"gitId":"EuniceSim142"},"content":"            emails.add(generateFeedbackSessionEmailBaseForNotifiedInstructors(course, session, instructor,"},{"lineNumber":720,"author":{"gitId":"EuniceSim142"},"content":"                    template, type, feedbackAction, studentAdditionalContactBuilder.toString()));"},{"lineNumber":721,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":722,"author":{"gitId":"EuniceSim142"},"content":"        return emails;"},{"lineNumber":723,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":724,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":725,"author":{"gitId":"EuniceSim142"},"content":"    private EmailWrapper generateFeedbackSessionEmailBaseForStudents("},{"lineNumber":726,"author":{"gitId":"EuniceSim142"},"content":"            Course course, FeedbackSession session, Student student, String template,"},{"lineNumber":727,"author":{"gitId":"EuniceSim142"},"content":"            EmailType type, String feedbackAction, String additionalContactInformation) {"},{"lineNumber":728,"author":{"gitId":"EuniceSim142"},"content":"        String submitUrl \u003d Config.getFrontEndAppUrl(Const.WebPageURIs.SESSION_SUBMISSION_PAGE)"},{"lineNumber":729,"author":{"gitId":"EuniceSim142"},"content":"                .withCourseId(course.getId())"},{"lineNumber":730,"author":{"gitId":"EuniceSim142"},"content":"                .withSessionName(session.getName())"},{"lineNumber":731,"author":{"gitId":"EuniceSim142"},"content":"                .withRegistrationKey(student.getRegKey())"},{"lineNumber":732,"author":{"gitId":"EuniceSim142"},"content":"                .toAbsoluteString();"},{"lineNumber":733,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":734,"author":{"gitId":"EuniceSim142"},"content":"        String reportUrl \u003d Config.getFrontEndAppUrl(Const.WebPageURIs.SESSION_RESULTS_PAGE)"},{"lineNumber":735,"author":{"gitId":"EuniceSim142"},"content":"                .withCourseId(course.getId())"},{"lineNumber":736,"author":{"gitId":"EuniceSim142"},"content":"                .withSessionName(session.getName())"},{"lineNumber":737,"author":{"gitId":"EuniceSim142"},"content":"                .withRegistrationKey(student.getRegKey())"},{"lineNumber":738,"author":{"gitId":"EuniceSim142"},"content":"                .toAbsoluteString();"},{"lineNumber":739,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":740,"author":{"gitId":"EuniceSim142"},"content":"        Instant deadline \u003d deLogic.getDeadlineForUser(session, student);"},{"lineNumber":741,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":742,"author":{"gitId":"EuniceSim142"},"content":"        Instant endTime \u003d TimeHelper.getMidnightAdjustedInstantBasedOnZone("},{"lineNumber":743,"author":{"gitId":"EuniceSim142"},"content":"                deadline, session.getCourse().getTimeZone(), false);"},{"lineNumber":744,"author":{"gitId":"EuniceSim142"},"content":"        String emailBody \u003d Templates.populateTemplate(template,"},{"lineNumber":745,"author":{"gitId":"EuniceSim142"},"content":"                \"${userName}\", SanitizationHelper.sanitizeForHtml(student.getName()),"},{"lineNumber":746,"author":{"gitId":"EuniceSim142"},"content":"                \"${courseName}\", SanitizationHelper.sanitizeForHtml(course.getName()),"},{"lineNumber":747,"author":{"gitId":"EuniceSim142"},"content":"                \"${courseId}\", SanitizationHelper.sanitizeForHtml(course.getId()),"},{"lineNumber":748,"author":{"gitId":"EuniceSim142"},"content":"                \"${feedbackSessionName}\", SanitizationHelper.sanitizeForHtml(session.getName()),"},{"lineNumber":749,"author":{"gitId":"EuniceSim142"},"content":"                \"${deadline}\", SanitizationHelper.sanitizeForHtml("},{"lineNumber":750,"author":{"gitId":"EuniceSim142"},"content":"                        TimeHelper.formatInstant(endTime, session.getCourse().getTimeZone(), DATETIME_DISPLAY_FORMAT))"},{"lineNumber":751,"author":{"gitId":"EuniceSim142"},"content":"                        + (session.getEndTime().equals(deadline) ? \"\" : \" (after extension)\"),"},{"lineNumber":752,"author":{"gitId":"EuniceSim142"},"content":"                \"${instructorPreamble}\", \"\","},{"lineNumber":753,"author":{"gitId":"EuniceSim142"},"content":"                \"${sessionInstructions}\", session.getInstructionsString(),"},{"lineNumber":754,"author":{"gitId":"EuniceSim142"},"content":"                \"${submitUrl}\", submitUrl,"},{"lineNumber":755,"author":{"gitId":"EuniceSim142"},"content":"                \"${reportUrl}\", reportUrl,"},{"lineNumber":756,"author":{"gitId":"EuniceSim142"},"content":"                \"${feedbackAction}\", feedbackAction,"},{"lineNumber":757,"author":{"gitId":"EuniceSim142"},"content":"                \"${additionalContactInformation}\", additionalContactInformation);"},{"lineNumber":758,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":759,"author":{"gitId":"EuniceSim142"},"content":"        EmailWrapper email \u003d getEmptyEmailAddressedToEmail(student.getEmail());"},{"lineNumber":760,"author":{"gitId":"EuniceSim142"},"content":"        email.setType(type);"},{"lineNumber":761,"author":{"gitId":"EuniceSim142"},"content":"        email.setSubjectFromType(course.getName(), session.getName());"},{"lineNumber":762,"author":{"gitId":"EuniceSim142"},"content":"        email.setContent(emailBody);"},{"lineNumber":763,"author":{"gitId":"EuniceSim142"},"content":"        return email;"},{"lineNumber":764,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":765,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":766,"author":{"gitId":"EuniceSim142"},"content":"    private EmailWrapper generateFeedbackSessionEmailBaseForInstructors("},{"lineNumber":767,"author":{"gitId":"EuniceSim142"},"content":"            Course course, FeedbackSession session, Instructor instructor,"},{"lineNumber":768,"author":{"gitId":"EuniceSim142"},"content":"            String template, EmailType type, String feedbackAction, String additionalContactInformation) {"},{"lineNumber":769,"author":{"gitId":"EuniceSim142"},"content":"        String submitUrl \u003d Config.getFrontEndAppUrl(Const.WebPageURIs.SESSION_SUBMISSION_PAGE)"},{"lineNumber":770,"author":{"gitId":"EuniceSim142"},"content":"                .withCourseId(course.getId())"},{"lineNumber":771,"author":{"gitId":"EuniceSim142"},"content":"                .withSessionName(session.getName())"},{"lineNumber":772,"author":{"gitId":"EuniceSim142"},"content":"                .withRegistrationKey(instructor.getRegKey())"},{"lineNumber":773,"author":{"gitId":"EuniceSim142"},"content":"                .withEntityType(Const.EntityType.INSTRUCTOR)"},{"lineNumber":774,"author":{"gitId":"EuniceSim142"},"content":"                .toAbsoluteString();"},{"lineNumber":775,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":776,"author":{"gitId":"EuniceSim142"},"content":"        String reportUrl \u003d Config.getFrontEndAppUrl(Const.WebPageURIs.SESSION_RESULTS_PAGE)"},{"lineNumber":777,"author":{"gitId":"EuniceSim142"},"content":"                .withCourseId(course.getId())"},{"lineNumber":778,"author":{"gitId":"EuniceSim142"},"content":"                .withSessionName(session.getName())"},{"lineNumber":779,"author":{"gitId":"EuniceSim142"},"content":"                .withRegistrationKey(instructor.getRegKey())"},{"lineNumber":780,"author":{"gitId":"EuniceSim142"},"content":"                .withEntityType(Const.EntityType.INSTRUCTOR)"},{"lineNumber":781,"author":{"gitId":"EuniceSim142"},"content":"                .toAbsoluteString();"},{"lineNumber":782,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":783,"author":{"gitId":"EuniceSim142"},"content":"        Instant deadline \u003d deLogic.getDeadlineForUser(session, instructor);"},{"lineNumber":784,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":785,"author":{"gitId":"EuniceSim142"},"content":"        Instant endTime \u003d TimeHelper.getMidnightAdjustedInstantBasedOnZone("},{"lineNumber":786,"author":{"gitId":"EuniceSim142"},"content":"                deadline, session.getCourse().getTimeZone(), false);"},{"lineNumber":787,"author":{"gitId":"EuniceSim142"},"content":"        String emailBody \u003d Templates.populateTemplate(template,"},{"lineNumber":788,"author":{"gitId":"EuniceSim142"},"content":"                \"${userName}\", SanitizationHelper.sanitizeForHtml(instructor.getName()),"},{"lineNumber":789,"author":{"gitId":"EuniceSim142"},"content":"                \"${courseName}\", SanitizationHelper.sanitizeForHtml(course.getName()),"},{"lineNumber":790,"author":{"gitId":"EuniceSim142"},"content":"                \"${courseId}\", SanitizationHelper.sanitizeForHtml(course.getId()),"},{"lineNumber":791,"author":{"gitId":"EuniceSim142"},"content":"                \"${feedbackSessionName}\", SanitizationHelper.sanitizeForHtml(session.getName()),"},{"lineNumber":792,"author":{"gitId":"EuniceSim142"},"content":"                \"${deadline}\", SanitizationHelper.sanitizeForHtml("},{"lineNumber":793,"author":{"gitId":"EuniceSim142"},"content":"                        TimeHelper.formatInstant(endTime, session.getCourse().getTimeZone(), DATETIME_DISPLAY_FORMAT))"},{"lineNumber":794,"author":{"gitId":"EuniceSim142"},"content":"                        + (session.getEndTime().equals(deadline) ? \"\" : \" (after extension)\"),"},{"lineNumber":795,"author":{"gitId":"EuniceSim142"},"content":"                \"${instructorPreamble}\", \"\","},{"lineNumber":796,"author":{"gitId":"EuniceSim142"},"content":"                \"${sessionInstructions}\", session.getInstructionsString(),"},{"lineNumber":797,"author":{"gitId":"EuniceSim142"},"content":"                \"${submitUrl}\", submitUrl,"},{"lineNumber":798,"author":{"gitId":"EuniceSim142"},"content":"                \"${reportUrl}\", reportUrl,"},{"lineNumber":799,"author":{"gitId":"EuniceSim142"},"content":"                \"${feedbackAction}\", feedbackAction,"},{"lineNumber":800,"author":{"gitId":"EuniceSim142"},"content":"                \"${additionalContactInformation}\", additionalContactInformation);"},{"lineNumber":801,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":802,"author":{"gitId":"EuniceSim142"},"content":"        EmailWrapper email \u003d getEmptyEmailAddressedToEmail(instructor.getEmail());"},{"lineNumber":803,"author":{"gitId":"EuniceSim142"},"content":"        email.setType(type);"},{"lineNumber":804,"author":{"gitId":"EuniceSim142"},"content":"        email.setSubjectFromType(course.getName(), session.getName());"},{"lineNumber":805,"author":{"gitId":"EuniceSim142"},"content":"        email.setContent(emailBody);"},{"lineNumber":806,"author":{"gitId":"EuniceSim142"},"content":"        return email;"},{"lineNumber":807,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":808,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":809,"author":{"gitId":"EuniceSim142"},"content":"    private EmailWrapper generateFeedbackSessionEmailBaseForNotifiedInstructors("},{"lineNumber":810,"author":{"gitId":"EuniceSim142"},"content":"            Course course, FeedbackSession session, Instructor instructor,"},{"lineNumber":811,"author":{"gitId":"EuniceSim142"},"content":"            String template, EmailType type, String feedbackAction, String additionalContactInformation) {"},{"lineNumber":812,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":813,"author":{"gitId":"EuniceSim142"},"content":"        Instant endTime \u003d TimeHelper.getMidnightAdjustedInstantBasedOnZone("},{"lineNumber":814,"author":{"gitId":"EuniceSim142"},"content":"                session.getEndTime(), session.getCourse().getTimeZone(), false);"},{"lineNumber":815,"author":{"gitId":"EuniceSim142"},"content":"        String emailBody \u003d Templates.populateTemplate(template,"},{"lineNumber":816,"author":{"gitId":"EuniceSim142"},"content":"                \"${userName}\", SanitizationHelper.sanitizeForHtml(instructor.getName()),"},{"lineNumber":817,"author":{"gitId":"EuniceSim142"},"content":"                \"${courseName}\", SanitizationHelper.sanitizeForHtml(course.getName()),"},{"lineNumber":818,"author":{"gitId":"EuniceSim142"},"content":"                \"${courseId}\", SanitizationHelper.sanitizeForHtml(course.getId()),"},{"lineNumber":819,"author":{"gitId":"EuniceSim142"},"content":"                \"${feedbackSessionName}\", SanitizationHelper.sanitizeForHtml(session.getName()),"},{"lineNumber":820,"author":{"gitId":"EuniceSim142"},"content":"                \"${deadline}\", SanitizationHelper.sanitizeForHtml("},{"lineNumber":821,"author":{"gitId":"EuniceSim142"},"content":"                        TimeHelper.formatInstant(endTime, session.getCourse().getTimeZone(), DATETIME_DISPLAY_FORMAT)),"},{"lineNumber":822,"author":{"gitId":"EuniceSim142"},"content":"                \"${instructorPreamble}\", fillUpInstructorPreamble(course),"},{"lineNumber":823,"author":{"gitId":"EuniceSim142"},"content":"                \"${sessionInstructions}\", session.getInstructionsString(),"},{"lineNumber":824,"author":{"gitId":"EuniceSim142"},"content":"                \"${submitUrl}\", \"{in the actual email sent to the students, this will be the unique link}\","},{"lineNumber":825,"author":{"gitId":"EuniceSim142"},"content":"                \"${reportUrl}\", \"{in the actual email sent to the students, this will be the unique link}\","},{"lineNumber":826,"author":{"gitId":"EuniceSim142"},"content":"                \"${feedbackAction}\", feedbackAction,"},{"lineNumber":827,"author":{"gitId":"EuniceSim142"},"content":"                \"${additionalContactInformation}\", additionalContactInformation);"},{"lineNumber":828,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":829,"author":{"gitId":"EuniceSim142"},"content":"        EmailWrapper email \u003d getEmptyEmailAddressedToEmail(instructor.getEmail());"},{"lineNumber":830,"author":{"gitId":"EuniceSim142"},"content":"        email.setType(type);"},{"lineNumber":831,"author":{"gitId":"EuniceSim142"},"content":"        email.setIsCopy(true);"},{"lineNumber":832,"author":{"gitId":"EuniceSim142"},"content":"        email.setSubjectFromType(course.getName(), session.getName());"},{"lineNumber":833,"author":{"gitId":"EuniceSim142"},"content":"        email.setContent(emailBody);"},{"lineNumber":834,"author":{"gitId":"EuniceSim142"},"content":"        return email;"},{"lineNumber":835,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":836,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":837,"author":{"gitId":"EuniceSim142"},"content":"    private boolean isYetToJoinCourse(Student student) {"},{"lineNumber":838,"author":{"gitId":"EuniceSim142"},"content":"        return student.getAccount().getGoogleId() \u003d\u003d null || student.getAccount().getGoogleId().isEmpty();"},{"lineNumber":839,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":840,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":841,"author":{"gitId":"EuniceSim142"},"content":"    private boolean isYetToJoinCourse(Instructor instructor) {"},{"lineNumber":842,"author":{"gitId":"EuniceSim142"},"content":"        return instructor.getAccount().getGoogleId() \u003d\u003d null || instructor.getAccount().getGoogleId().isEmpty();"},{"lineNumber":843,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":844,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":845,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":846,"author":{"gitId":"EuniceSim142"},"content":"     * Generates the new instructor account join email for the given {@code instructor}."},{"lineNumber":847,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":848,"author":{"gitId":"EuniceSim142"},"content":"    public EmailWrapper generateNewInstructorAccountJoinEmail("},{"lineNumber":849,"author":{"gitId":"EuniceSim142"},"content":"            String instructorEmail, String instructorName, String joinUrl) {"},{"lineNumber":850,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":851,"author":{"gitId":"EuniceSim142"},"content":"        String emailBody \u003d Templates.populateTemplate(EmailTemplates.NEW_INSTRUCTOR_ACCOUNT_WELCOME,"},{"lineNumber":852,"author":{"gitId":"EuniceSim142"},"content":"                \"${userName}\", SanitizationHelper.sanitizeForHtml(instructorName),"},{"lineNumber":853,"author":{"gitId":"EuniceSim142"},"content":"                \"${joinUrl}\", joinUrl);"},{"lineNumber":854,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":855,"author":{"gitId":"EuniceSim142"},"content":"        EmailWrapper email \u003d getEmptyEmailAddressedToEmail(instructorEmail);"},{"lineNumber":856,"author":{"gitId":"EuniceSim142"},"content":"        email.setBcc(Config.SUPPORT_EMAIL);"},{"lineNumber":857,"author":{"gitId":"EuniceSim142"},"content":"        email.setType(EmailType.NEW_INSTRUCTOR_ACCOUNT);"},{"lineNumber":858,"author":{"gitId":"EuniceSim142"},"content":"        email.setSubjectFromType(SanitizationHelper.sanitizeForHtml(instructorName));"},{"lineNumber":859,"author":{"gitId":"EuniceSim142"},"content":"        email.setContent(emailBody);"},{"lineNumber":860,"author":{"gitId":"EuniceSim142"},"content":"        return email;"},{"lineNumber":861,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":862,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":863,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":864,"author":{"gitId":"EuniceSim142"},"content":"     * Generates the course join email for the given {@code student} in {@code course}."},{"lineNumber":865,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":866,"author":{"gitId":"EuniceSim142"},"content":"    public EmailWrapper generateStudentCourseJoinEmail(Course course, Student student) {"},{"lineNumber":867,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":868,"author":{"gitId":"EuniceSim142"},"content":"        String emailBody \u003d Templates.populateTemplate("},{"lineNumber":869,"author":{"gitId":"EuniceSim142"},"content":"                fillUpStudentJoinFragment(student),"},{"lineNumber":870,"author":{"gitId":"EuniceSim142"},"content":"                \"${userName}\", SanitizationHelper.sanitizeForHtml(student.getName()),"},{"lineNumber":871,"author":{"gitId":"EuniceSim142"},"content":"                \"${courseName}\", SanitizationHelper.sanitizeForHtml(course.getName()),"},{"lineNumber":872,"author":{"gitId":"EuniceSim142"},"content":"                \"${coOwnersEmails}\", generateCoOwnersEmailsLine(course.getId()),"},{"lineNumber":873,"author":{"gitId":"EuniceSim142"},"content":"                \"${supportEmail}\", Config.SUPPORT_EMAIL);"},{"lineNumber":874,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":875,"author":{"gitId":"EuniceSim142"},"content":"        EmailWrapper email \u003d getEmptyEmailAddressedToEmail(student.getEmail());"},{"lineNumber":876,"author":{"gitId":"EuniceSim142"},"content":"        email.setType(EmailType.STUDENT_COURSE_JOIN);"},{"lineNumber":877,"author":{"gitId":"EuniceSim142"},"content":"        email.setSubjectFromType(course.getName(), course.getId());"},{"lineNumber":878,"author":{"gitId":"EuniceSim142"},"content":"        email.setContent(emailBody);"},{"lineNumber":879,"author":{"gitId":"EuniceSim142"},"content":"        return email;"},{"lineNumber":880,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":881,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":882,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":883,"author":{"gitId":"EuniceSim142"},"content":"     * Generates the course re-join email for the given {@code student} in {@code course}."},{"lineNumber":884,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":885,"author":{"gitId":"EuniceSim142"},"content":"    public EmailWrapper generateStudentCourseRejoinEmailAfterGoogleIdReset("},{"lineNumber":886,"author":{"gitId":"EuniceSim142"},"content":"            Course course, Student student) {"},{"lineNumber":887,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":888,"author":{"gitId":"EuniceSim142"},"content":"        String emailBody \u003d Templates.populateTemplate("},{"lineNumber":889,"author":{"gitId":"EuniceSim142"},"content":"                fillUpStudentRejoinAfterGoogleIdResetFragment(student),"},{"lineNumber":890,"author":{"gitId":"EuniceSim142"},"content":"                \"${userName}\", SanitizationHelper.sanitizeForHtml(student.getName()),"},{"lineNumber":891,"author":{"gitId":"EuniceSim142"},"content":"                \"${courseName}\", SanitizationHelper.sanitizeForHtml(course.getName()),"},{"lineNumber":892,"author":{"gitId":"EuniceSim142"},"content":"                \"${coOwnersEmails}\", generateCoOwnersEmailsLine(course.getId()),"},{"lineNumber":893,"author":{"gitId":"EuniceSim142"},"content":"                \"${supportEmail}\", Config.SUPPORT_EMAIL);"},{"lineNumber":894,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":895,"author":{"gitId":"EuniceSim142"},"content":"        EmailWrapper email \u003d getEmptyEmailAddressedToEmail(student.getEmail());"},{"lineNumber":896,"author":{"gitId":"EuniceSim142"},"content":"        email.setType(EmailType.STUDENT_COURSE_REJOIN_AFTER_GOOGLE_ID_RESET);"},{"lineNumber":897,"author":{"gitId":"EuniceSim142"},"content":"        email.setSubjectFromType(course.getName(), course.getId());"},{"lineNumber":898,"author":{"gitId":"EuniceSim142"},"content":"        email.setContent(emailBody);"},{"lineNumber":899,"author":{"gitId":"EuniceSim142"},"content":"        return email;"},{"lineNumber":900,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":901,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":902,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":903,"author":{"gitId":"EuniceSim142"},"content":"     * Generates the course join email for the given {@code instructor} in {@code course}."},{"lineNumber":904,"author":{"gitId":"EuniceSim142"},"content":"     * Also specifies contact information of {@code inviter}."},{"lineNumber":905,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":906,"author":{"gitId":"EuniceSim142"},"content":"    public EmailWrapper generateInstructorCourseJoinEmail(Account inviter,"},{"lineNumber":907,"author":{"gitId":"EuniceSim142"},"content":"            Instructor instructor, Course course) {"},{"lineNumber":908,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":909,"author":{"gitId":"EuniceSim142"},"content":"        String emailBody \u003d Templates.populateTemplate("},{"lineNumber":910,"author":{"gitId":"EuniceSim142"},"content":"                fillUpInstructorJoinFragment(instructor),"},{"lineNumber":911,"author":{"gitId":"EuniceSim142"},"content":"                \"${userName}\", SanitizationHelper.sanitizeForHtml(instructor.getName()),"},{"lineNumber":912,"author":{"gitId":"EuniceSim142"},"content":"                \"${courseName}\", SanitizationHelper.sanitizeForHtml(course.getName()),"},{"lineNumber":913,"author":{"gitId":"EuniceSim142"},"content":"                \"${inviterName}\", SanitizationHelper.sanitizeForHtml(inviter.getName()),"},{"lineNumber":914,"author":{"gitId":"EuniceSim142"},"content":"                \"${inviterEmail}\", SanitizationHelper.sanitizeForHtml(inviter.getEmail()),"},{"lineNumber":915,"author":{"gitId":"EuniceSim142"},"content":"                \"${supportEmail}\", Config.SUPPORT_EMAIL);"},{"lineNumber":916,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":917,"author":{"gitId":"EuniceSim142"},"content":"        EmailWrapper email \u003d getEmptyEmailAddressedToEmail(instructor.getEmail());"},{"lineNumber":918,"author":{"gitId":"EuniceSim142"},"content":"        email.setType(EmailType.INSTRUCTOR_COURSE_JOIN);"},{"lineNumber":919,"author":{"gitId":"EuniceSim142"},"content":"        email.setSubjectFromType(course.getName(), course.getId());"},{"lineNumber":920,"author":{"gitId":"EuniceSim142"},"content":"        email.setContent(emailBody);"},{"lineNumber":921,"author":{"gitId":"EuniceSim142"},"content":"        return email;"},{"lineNumber":922,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":923,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":924,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":925,"author":{"gitId":"EuniceSim142"},"content":"     * Generates the course re-join email for the given {@code instructor} in {@code course}."},{"lineNumber":926,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":927,"author":{"gitId":"EuniceSim142"},"content":"    public EmailWrapper generateInstructorCourseRejoinEmailAfterGoogleIdReset("},{"lineNumber":928,"author":{"gitId":"EuniceSim142"},"content":"            Instructor instructor, Course course) {"},{"lineNumber":929,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":930,"author":{"gitId":"EuniceSim142"},"content":"        String emailBody \u003d Templates.populateTemplate("},{"lineNumber":931,"author":{"gitId":"EuniceSim142"},"content":"                fillUpInstructorRejoinAfterGoogleIdResetFragment(instructor),"},{"lineNumber":932,"author":{"gitId":"EuniceSim142"},"content":"                \"${userName}\", SanitizationHelper.sanitizeForHtml(instructor.getName()),"},{"lineNumber":933,"author":{"gitId":"EuniceSim142"},"content":"                \"${courseName}\", SanitizationHelper.sanitizeForHtml(course.getName()),"},{"lineNumber":934,"author":{"gitId":"EuniceSim142"},"content":"                \"${supportEmail}\", Config.SUPPORT_EMAIL);"},{"lineNumber":935,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":936,"author":{"gitId":"EuniceSim142"},"content":"        EmailWrapper email \u003d getEmptyEmailAddressedToEmail(instructor.getEmail());"},{"lineNumber":937,"author":{"gitId":"EuniceSim142"},"content":"        email.setType(EmailType.INSTRUCTOR_COURSE_REJOIN_AFTER_GOOGLE_ID_RESET);"},{"lineNumber":938,"author":{"gitId":"EuniceSim142"},"content":"        email.setSubjectFromType(course.getName(), course.getId());"},{"lineNumber":939,"author":{"gitId":"EuniceSim142"},"content":"        email.setContent(emailBody);"},{"lineNumber":940,"author":{"gitId":"EuniceSim142"},"content":"        return email;"},{"lineNumber":941,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":942,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":943,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":944,"author":{"gitId":"EuniceSim142"},"content":"     * Generates the course registered email for the user with the given details in {@code course}."},{"lineNumber":945,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":946,"author":{"gitId":"EuniceSim142"},"content":"    public EmailWrapper generateUserCourseRegisteredEmail("},{"lineNumber":947,"author":{"gitId":"EuniceSim142"},"content":"            String name, String emailAddress, String googleId, boolean isInstructor, Course course) {"},{"lineNumber":948,"author":{"gitId":"EuniceSim142"},"content":"        String emailBody \u003d Templates.populateTemplate(EmailTemplates.USER_COURSE_REGISTER,"},{"lineNumber":949,"author":{"gitId":"EuniceSim142"},"content":"                \"${userName}\", SanitizationHelper.sanitizeForHtml(name),"},{"lineNumber":950,"author":{"gitId":"EuniceSim142"},"content":"                \"${userType}\", isInstructor ? \"an instructor\" : \"a student\","},{"lineNumber":951,"author":{"gitId":"EuniceSim142"},"content":"                \"${courseId}\", SanitizationHelper.sanitizeForHtml(course.getId()),"},{"lineNumber":952,"author":{"gitId":"EuniceSim142"},"content":"                \"${courseName}\", SanitizationHelper.sanitizeForHtml(course.getName()),"},{"lineNumber":953,"author":{"gitId":"EuniceSim142"},"content":"                \"${googleId}\", SanitizationHelper.sanitizeForHtml(googleId),"},{"lineNumber":954,"author":{"gitId":"EuniceSim142"},"content":"                \"${appUrl}\", isInstructor"},{"lineNumber":955,"author":{"gitId":"EuniceSim142"},"content":"                        ? Config.getFrontEndAppUrl(Const.WebPageURIs.INSTRUCTOR_HOME_PAGE).toAbsoluteString()"},{"lineNumber":956,"author":{"gitId":"EuniceSim142"},"content":"                        : Config.getFrontEndAppUrl(Const.WebPageURIs.STUDENT_HOME_PAGE).toAbsoluteString(),"},{"lineNumber":957,"author":{"gitId":"EuniceSim142"},"content":"                \"${supportEmail}\", Config.SUPPORT_EMAIL);"},{"lineNumber":958,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":959,"author":{"gitId":"EuniceSim142"},"content":"        EmailWrapper email \u003d getEmptyEmailAddressedToEmail(emailAddress);"},{"lineNumber":960,"author":{"gitId":"EuniceSim142"},"content":"        email.setType(EmailType.USER_COURSE_REGISTER);"},{"lineNumber":961,"author":{"gitId":"EuniceSim142"},"content":"        email.setSubjectFromType(course.getName(), course.getId());"},{"lineNumber":962,"author":{"gitId":"EuniceSim142"},"content":"        email.setContent(emailBody);"},{"lineNumber":963,"author":{"gitId":"EuniceSim142"},"content":"        return email;"},{"lineNumber":964,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":965,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":966,"author":{"gitId":"EuniceSim142"},"content":"    private String fillUpStudentJoinFragment(Student student) {"},{"lineNumber":967,"author":{"gitId":"EuniceSim142"},"content":"        String joinUrl \u003d Config.getFrontEndAppUrl(student.getRegistrationUrl()).toAbsoluteString();"},{"lineNumber":968,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":969,"author":{"gitId":"EuniceSim142"},"content":"        return Templates.populateTemplate(EmailTemplates.USER_COURSE_JOIN,"},{"lineNumber":970,"author":{"gitId":"EuniceSim142"},"content":"            \"${joinFragment}\", EmailTemplates.FRAGMENT_STUDENT_COURSE_JOIN,"},{"lineNumber":971,"author":{"gitId":"EuniceSim142"},"content":"            \"${joinUrl}\", joinUrl);"},{"lineNumber":972,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":973,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":974,"author":{"gitId":"EuniceSim142"},"content":"    private String fillUpStudentRejoinAfterGoogleIdResetFragment(Student student) {"},{"lineNumber":975,"author":{"gitId":"EuniceSim142"},"content":"        String joinUrl \u003d Config.getFrontEndAppUrl(student.getRegistrationUrl()).toAbsoluteString();"},{"lineNumber":976,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":977,"author":{"gitId":"EuniceSim142"},"content":"        return Templates.populateTemplate(EmailTemplates.USER_COURSE_JOIN,"},{"lineNumber":978,"author":{"gitId":"EuniceSim142"},"content":"            \"${joinFragment}\", EmailTemplates.FRAGMENT_STUDENT_COURSE_REJOIN_AFTER_GOOGLE_ID_RESET,"},{"lineNumber":979,"author":{"gitId":"EuniceSim142"},"content":"            \"${joinUrl}\", joinUrl,"},{"lineNumber":980,"author":{"gitId":"EuniceSim142"},"content":"            \"${supportEmail}\", Config.SUPPORT_EMAIL);"},{"lineNumber":981,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":982,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":983,"author":{"gitId":"EuniceSim142"},"content":"    private String getInstructorCourseJoinUrl(Instructor instructor) {"},{"lineNumber":984,"author":{"gitId":"EuniceSim142"},"content":"        return Config.getFrontEndAppUrl(instructor.getRegistrationUrl()).toAbsoluteString();"},{"lineNumber":985,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":986,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":987,"author":{"gitId":"EuniceSim142"},"content":"    private String fillUpInstructorJoinFragment(Instructor instructor) {"},{"lineNumber":988,"author":{"gitId":"EuniceSim142"},"content":"        return Templates.populateTemplate(EmailTemplates.USER_COURSE_JOIN,"},{"lineNumber":989,"author":{"gitId":"EuniceSim142"},"content":"            \"${joinFragment}\", EmailTemplates.FRAGMENT_INSTRUCTOR_COURSE_JOIN,"},{"lineNumber":990,"author":{"gitId":"EuniceSim142"},"content":"            \"${joinUrl}\", getInstructorCourseJoinUrl(instructor));"},{"lineNumber":991,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":992,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":993,"author":{"gitId":"EuniceSim142"},"content":"    private String fillUpInstructorRejoinAfterGoogleIdResetFragment(Instructor instructor) {"},{"lineNumber":994,"author":{"gitId":"EuniceSim142"},"content":"        String joinUrl \u003d Config.getFrontEndAppUrl(instructor.getRegistrationUrl()).toAbsoluteString();"},{"lineNumber":995,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":996,"author":{"gitId":"EuniceSim142"},"content":"        return Templates.populateTemplate(EmailTemplates.USER_COURSE_JOIN,"},{"lineNumber":997,"author":{"gitId":"EuniceSim142"},"content":"            \"${joinFragment}\", EmailTemplates.FRAGMENT_INSTRUCTOR_COURSE_REJOIN_AFTER_GOOGLE_ID_RESET,"},{"lineNumber":998,"author":{"gitId":"EuniceSim142"},"content":"            \"${joinUrl}\", joinUrl,"},{"lineNumber":999,"author":{"gitId":"EuniceSim142"},"content":"            \"${supportEmail}\", Config.SUPPORT_EMAIL);"},{"lineNumber":1000,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":1001,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":1002,"author":{"gitId":"EuniceSim142"},"content":"    private String fillUpInstructorPreamble(Course course) {"},{"lineNumber":1003,"author":{"gitId":"EuniceSim142"},"content":"        return Templates.populateTemplate(EmailTemplates.FRAGMENT_INSTRUCTOR_COPY_PREAMBLE,"},{"lineNumber":1004,"author":{"gitId":"EuniceSim142"},"content":"            \"${courseId}\", SanitizationHelper.sanitizeForHtml(course.getId()),"},{"lineNumber":1005,"author":{"gitId":"EuniceSim142"},"content":"            \"${courseName}\", SanitizationHelper.sanitizeForHtml(course.getName()));"},{"lineNumber":1006,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":1007,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":1008,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":1009,"author":{"gitId":"EuniceSim142"},"content":"     * Generates the logs compilation email for the given {@code logs}."},{"lineNumber":1010,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":1011,"author":{"gitId":"EuniceSim142"},"content":"    public EmailWrapper generateCompiledLogsEmail(List\u003cErrorLogEntry\u003e logs) {"},{"lineNumber":1012,"author":{"gitId":"EuniceSim142"},"content":"        StringBuilder emailBody \u003d new StringBuilder();"},{"lineNumber":1013,"author":{"gitId":"EuniceSim142"},"content":"        for (int i \u003d 0; i \u003c logs.size(); i++) {"},{"lineNumber":1014,"author":{"gitId":"EuniceSim142"},"content":"            emailBody.append(generateSevereErrorLogLine(i, logs.get(i).getMessage(),"},{"lineNumber":1015,"author":{"gitId":"EuniceSim142"},"content":"                    logs.get(i).getSeverity(), logs.get(i).getTraceId()));"},{"lineNumber":1016,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":1017,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":1018,"author":{"gitId":"EuniceSim142"},"content":"        EmailWrapper email \u003d getEmptyEmailAddressedToEmail(Config.SUPPORT_EMAIL);"},{"lineNumber":1019,"author":{"gitId":"EuniceSim142"},"content":"        email.setType(EmailType.SEVERE_LOGS_COMPILATION);"},{"lineNumber":1020,"author":{"gitId":"EuniceSim142"},"content":"        email.setSubjectFromType(Config.APP_VERSION);"},{"lineNumber":1021,"author":{"gitId":"EuniceSim142"},"content":"        email.setContent(emailBody.toString());"},{"lineNumber":1022,"author":{"gitId":"EuniceSim142"},"content":"        return email;"},{"lineNumber":1023,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":1024,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":1025,"author":{"gitId":"EuniceSim142"},"content":"    private String generateSevereErrorLogLine(int index, String logMessage, String logLevel, String traceId) {"},{"lineNumber":1026,"author":{"gitId":"EuniceSim142"},"content":"        return Templates.populateTemplate("},{"lineNumber":1027,"author":{"gitId":"EuniceSim142"},"content":"            EmailTemplates.SEVERE_ERROR_LOG_LINE,"},{"lineNumber":1028,"author":{"gitId":"EuniceSim142"},"content":"            \"${index}\", String.valueOf(index),"},{"lineNumber":1029,"author":{"gitId":"EuniceSim142"},"content":"            \"${errorType}\", logLevel,"},{"lineNumber":1030,"author":{"gitId":"EuniceSim142"},"content":"            \"${errorMessage}\", logMessage.replaceAll(\"\\n\", \"\\n\u003cbr\u003e\"),"},{"lineNumber":1031,"author":{"gitId":"EuniceSim142"},"content":"            \"${traceId}\", traceId);"},{"lineNumber":1032,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":1033,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":1034,"author":{"gitId":"EuniceSim142"},"content":"    private EmailWrapper getEmptyEmailAddressedToEmail(String recipient) {"},{"lineNumber":1035,"author":{"gitId":"EuniceSim142"},"content":"        EmailWrapper email \u003d new EmailWrapper();"},{"lineNumber":1036,"author":{"gitId":"EuniceSim142"},"content":"        email.setRecipient(recipient);"},{"lineNumber":1037,"author":{"gitId":"EuniceSim142"},"content":"        email.setSenderEmail(Config.EMAIL_SENDEREMAIL);"},{"lineNumber":1038,"author":{"gitId":"EuniceSim142"},"content":"        email.setSenderName(Config.EMAIL_SENDERNAME);"},{"lineNumber":1039,"author":{"gitId":"EuniceSim142"},"content":"        email.setReplyTo(Config.EMAIL_REPLYTO);"},{"lineNumber":1040,"author":{"gitId":"EuniceSim142"},"content":"        return email;"},{"lineNumber":1041,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":1042,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":1043,"author":{"gitId":"EuniceSim142"},"content":"    private String generateCoOwnersEmailsLine(String courseId) {"},{"lineNumber":1044,"author":{"gitId":"EuniceSim142"},"content":"        List\u003cInstructor\u003e coOwners \u003d usersLogic.getCoOwnersForCourse(courseId);"},{"lineNumber":1045,"author":{"gitId":"EuniceSim142"},"content":"        if (coOwners.isEmpty()) {"},{"lineNumber":1046,"author":{"gitId":"EuniceSim142"},"content":"            return \"(No contactable instructors found)\";"},{"lineNumber":1047,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":1048,"author":{"gitId":"EuniceSim142"},"content":"        StringBuilder coOwnersEmailsLine \u003d new StringBuilder();"},{"lineNumber":1049,"author":{"gitId":"EuniceSim142"},"content":"        for (Instructor coOwner : coOwners) {"},{"lineNumber":1050,"author":{"gitId":"EuniceSim142"},"content":"            coOwnersEmailsLine"},{"lineNumber":1051,"author":{"gitId":"EuniceSim142"},"content":"                    .append(SanitizationHelper.sanitizeForHtml(coOwner.getName()))"},{"lineNumber":1052,"author":{"gitId":"EuniceSim142"},"content":"                    .append(\" (\")"},{"lineNumber":1053,"author":{"gitId":"EuniceSim142"},"content":"                    .append(coOwner.getEmail())"},{"lineNumber":1054,"author":{"gitId":"EuniceSim142"},"content":"                    .append(\"), \");"},{"lineNumber":1055,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":1056,"author":{"gitId":"EuniceSim142"},"content":"        return coOwnersEmailsLine.substring(0, coOwnersEmailsLine.length() - 2);"},{"lineNumber":1057,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":1058,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":1059,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":1060,"author":{"gitId":"EuniceSim142"},"content":"     * Generates additional contact information for User Email Templates."},{"lineNumber":1061,"author":{"gitId":"EuniceSim142"},"content":"     * @return The contact information after replacing the placeholders."},{"lineNumber":1062,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":1063,"author":{"gitId":"EuniceSim142"},"content":"    private String getAdditionalContactInformationFragment(Course course, boolean isInstructor) {"},{"lineNumber":1064,"author":{"gitId":"EuniceSim142"},"content":"        String particulars \u003d isInstructor ? \"instructor data (e.g. wrong permission, misspelled name)\""},{"lineNumber":1065,"author":{"gitId":"EuniceSim142"},"content":"                : \"team/student data (e.g. wrong team, misspelled name)\";"},{"lineNumber":1066,"author":{"gitId":"EuniceSim142"},"content":"        return Templates.populateTemplate(EmailTemplates.FRAGMENT_SESSION_ADDITIONAL_CONTACT_INFORMATION,"},{"lineNumber":1067,"author":{"gitId":"EuniceSim142"},"content":"                \"${particulars}\", particulars,"},{"lineNumber":1068,"author":{"gitId":"EuniceSim142"},"content":"                \"${coOwnersEmails}\", generateCoOwnersEmailsLine(course.getId()),"},{"lineNumber":1069,"author":{"gitId":"EuniceSim142"},"content":"                \"${supportEmail}\", Config.SUPPORT_EMAIL);"},{"lineNumber":1070,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":1071,"author":{"gitId":"EuniceSim142"},"content":"}"}],"authorContributionMap":{"EuniceSim142":1071}},{"path":"src/main/java/teammates/sqllogic/core/AccountRequestsLogic.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"kevin9foong"},"content":"package teammates.sqllogic.core;"},{"lineNumber":2,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":3,"author":{"gitId":"kevin9foong"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":4,"author":{"gitId":"kevin9foong"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":5,"author":{"gitId":"kevin9foong"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":6,"author":{"gitId":"kevin9foong"},"content":"import teammates.storage.sqlapi.AccountRequestsDb;"},{"lineNumber":7,"author":{"gitId":"kevin9foong"},"content":"import teammates.storage.sqlentity.AccountRequest;"},{"lineNumber":8,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":9,"author":{"gitId":"kevin9foong"},"content":"/**"},{"lineNumber":10,"author":{"gitId":"kevin9foong"},"content":" * Handles operations related to account requests."},{"lineNumber":11,"author":{"gitId":"kevin9foong"},"content":" *"},{"lineNumber":12,"author":{"gitId":"kevin9foong"},"content":" * @see AccountRequest"},{"lineNumber":13,"author":{"gitId":"kevin9foong"},"content":" * @see AccountRequestsDb"},{"lineNumber":14,"author":{"gitId":"kevin9foong"},"content":" */"},{"lineNumber":15,"author":{"gitId":"kevin9foong"},"content":"public final class AccountRequestsLogic {"},{"lineNumber":16,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":17,"author":{"gitId":"kevin9foong"},"content":"    private static final AccountRequestsLogic instance \u003d new AccountRequestsLogic();"},{"lineNumber":18,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":19,"author":{"gitId":"kevin9foong"},"content":"    private AccountRequestsDb accountRequestDb;"},{"lineNumber":20,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":21,"author":{"gitId":"kevin9foong"},"content":"    private AccountRequestsLogic() {"},{"lineNumber":22,"author":{"gitId":"kevin9foong"},"content":"        // prevent notification"},{"lineNumber":23,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":24,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":25,"author":{"gitId":"kevin9foong"},"content":"    public static AccountRequestsLogic inst() {"},{"lineNumber":26,"author":{"gitId":"kevin9foong"},"content":"        return instance;"},{"lineNumber":27,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":28,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":29,"author":{"gitId":"kevin9foong"},"content":"    /**"},{"lineNumber":30,"author":{"gitId":"kevin9foong"},"content":"     * Initialise dependencies for {@code AccountRequestLogic} object."},{"lineNumber":31,"author":{"gitId":"kevin9foong"},"content":"     */"},{"lineNumber":32,"author":{"gitId":"kevin9foong"},"content":"    public void initLogicDependencies(AccountRequestsDb accountRequestDb) {"},{"lineNumber":33,"author":{"gitId":"kevin9foong"},"content":"        this.accountRequestDb \u003d accountRequestDb;"},{"lineNumber":34,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":35,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":36,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":37,"author":{"gitId":"-"},"content":"     * Creates an account request."},{"lineNumber":38,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":39,"author":{"gitId":"-"},"content":"    public AccountRequest createAccountRequest(AccountRequest accountRequest)"},{"lineNumber":40,"author":{"gitId":"-"},"content":"            throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":41,"author":{"gitId":"-"},"content":"        return accountRequestDb.createAccountRequest(accountRequest);"},{"lineNumber":42,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":43,"author":{"gitId":"-"},"content":""},{"lineNumber":44,"author":{"gitId":"kevin9foong"},"content":"    /**"},{"lineNumber":45,"author":{"gitId":"kevin9foong"},"content":"     * Creates an account request."},{"lineNumber":46,"author":{"gitId":"kevin9foong"},"content":"     */"},{"lineNumber":47,"author":{"gitId":"kevin9foong"},"content":"    public AccountRequest createAccountRequest(String name, String email, String institute)"},{"lineNumber":48,"author":{"gitId":"kevin9foong"},"content":"            throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":49,"author":{"gitId":"kevin9foong"},"content":"        AccountRequest toCreate \u003d new AccountRequest(email, name, institute);"},{"lineNumber":50,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":51,"author":{"gitId":"kevin9foong"},"content":"        return accountRequestDb.createAccountRequest(toCreate);"},{"lineNumber":52,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":53,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":54,"author":{"gitId":"kevin9foong"},"content":"    /**"},{"lineNumber":55,"author":{"gitId":"kevin9foong"},"content":"     * Gets account request associated with the {@code }."},{"lineNumber":56,"author":{"gitId":"kevin9foong"},"content":"     */"},{"lineNumber":57,"author":{"gitId":"kevin9foong"},"content":"    public AccountRequest getAccountRequest(String email, String institute) {"},{"lineNumber":58,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":59,"author":{"gitId":"kevin9foong"},"content":"        return accountRequestDb.getAccountRequest(email, institute);"},{"lineNumber":60,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":61,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":62,"author":{"gitId":"kevin9foong"},"content":"    /**"},{"lineNumber":63,"author":{"gitId":"kevin9foong"},"content":"     * Creates/resets the account request with the given email and institute such that it is not registered."},{"lineNumber":64,"author":{"gitId":"kevin9foong"},"content":"     */"},{"lineNumber":65,"author":{"gitId":"kevin9foong"},"content":"    public AccountRequest resetAccountRequest(String email, String institute)"},{"lineNumber":66,"author":{"gitId":"kevin9foong"},"content":"            throws EntityDoesNotExistException, InvalidParametersException {"},{"lineNumber":67,"author":{"gitId":"kevin9foong"},"content":"        AccountRequest accountRequest \u003d accountRequestDb.getAccountRequest(email, institute);"},{"lineNumber":68,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":69,"author":{"gitId":"kevin9foong"},"content":"        if (accountRequest \u003d\u003d null) {"},{"lineNumber":70,"author":{"gitId":"kevin9foong"},"content":"            throw new EntityDoesNotExistException(\"Failed to reset since AccountRequest with \""},{"lineNumber":71,"author":{"gitId":"kevin9foong"},"content":"                + \"the given email and institute cannot be found.\");"},{"lineNumber":72,"author":{"gitId":"kevin9foong"},"content":"        }"},{"lineNumber":73,"author":{"gitId":"kevin9foong"},"content":"        accountRequest.setRegisteredAt(null);"},{"lineNumber":74,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":75,"author":{"gitId":"kevin9foong"},"content":"        return accountRequestDb.updateAccountRequest(accountRequest);"},{"lineNumber":76,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":77,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":78,"author":{"gitId":"kevin9foong"},"content":"    /**"},{"lineNumber":79,"author":{"gitId":"kevin9foong"},"content":"     * Deletes account request associated with the {@code email} and {@code institute}."},{"lineNumber":80,"author":{"gitId":"kevin9foong"},"content":"     *"},{"lineNumber":81,"author":{"gitId":"kevin9foong"},"content":"     * \u003cp\u003eFails silently if no account requests with the given email and institute to delete can be found.\u003c/p\u003e"},{"lineNumber":82,"author":{"gitId":"kevin9foong"},"content":"     *"},{"lineNumber":83,"author":{"gitId":"kevin9foong"},"content":"     */"},{"lineNumber":84,"author":{"gitId":"kevin9foong"},"content":"    public void deleteAccountRequest(String email, String institute) {"},{"lineNumber":85,"author":{"gitId":"kevin9foong"},"content":"        AccountRequest toDelete \u003d accountRequestDb.getAccountRequest(email, institute);"},{"lineNumber":86,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":87,"author":{"gitId":"kevin9foong"},"content":"        accountRequestDb.deleteAccountRequest(toDelete);"},{"lineNumber":88,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":89,"author":{"gitId":"kevin9foong"},"content":"}"}],"authorContributionMap":{"kevin9foong":81,"-":8}},{"path":"src/main/java/teammates/sqllogic/core/AccountsLogic.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"hhdqirui"},"content":"package teammates.sqllogic.core;"},{"lineNumber":2,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":3,"author":{"gitId":"hhdqirui"},"content":"import java.time.Instant;"},{"lineNumber":4,"author":{"gitId":"hhdqirui"},"content":"import java.util.List;"},{"lineNumber":5,"author":{"gitId":"hhdqirui"},"content":"import java.util.UUID;"},{"lineNumber":6,"author":{"gitId":"hhdqirui"},"content":"import java.util.stream.Collectors;"},{"lineNumber":7,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":9,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":10,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":11,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlapi.AccountsDb;"},{"lineNumber":12,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.Account;"},{"lineNumber":13,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.Notification;"},{"lineNumber":14,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.ReadNotification;"},{"lineNumber":15,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.User;"},{"lineNumber":16,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":17,"author":{"gitId":"hhdqirui"},"content":"/**"},{"lineNumber":18,"author":{"gitId":"hhdqirui"},"content":" * Handles operations related to accounts."},{"lineNumber":19,"author":{"gitId":"hhdqirui"},"content":" *"},{"lineNumber":20,"author":{"gitId":"hhdqirui"},"content":" * @see Account"},{"lineNumber":21,"author":{"gitId":"hhdqirui"},"content":" * @see AccountsDb"},{"lineNumber":22,"author":{"gitId":"hhdqirui"},"content":" */"},{"lineNumber":23,"author":{"gitId":"hhdqirui"},"content":"public final class AccountsLogic {"},{"lineNumber":24,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":25,"author":{"gitId":"hhdqirui"},"content":"    private static final AccountsLogic instance \u003d new AccountsLogic();"},{"lineNumber":26,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":27,"author":{"gitId":"hhdqirui"},"content":"    private AccountsDb accountsDb;"},{"lineNumber":28,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":29,"author":{"gitId":"hhdqirui"},"content":"    private NotificationsLogic notificationsLogic;"},{"lineNumber":30,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":31,"author":{"gitId":"domlimm"},"content":"    private UsersLogic usersLogic;"},{"lineNumber":32,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":33,"author":{"gitId":"hhdqirui"},"content":"    private AccountsLogic() {"},{"lineNumber":34,"author":{"gitId":"hhdqirui"},"content":"        // prevent initialization"},{"lineNumber":35,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":36,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":37,"author":{"gitId":"domlimm"},"content":"    void initLogicDependencies(AccountsDb accountsDb, NotificationsLogic notificationsLogic, UsersLogic usersLogic) {"},{"lineNumber":38,"author":{"gitId":"hhdqirui"},"content":"        this.accountsDb \u003d accountsDb;"},{"lineNumber":39,"author":{"gitId":"hhdqirui"},"content":"        this.notificationsLogic \u003d notificationsLogic;"},{"lineNumber":40,"author":{"gitId":"domlimm"},"content":"        this.usersLogic \u003d usersLogic;"},{"lineNumber":41,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":42,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":43,"author":{"gitId":"hhdqirui"},"content":"    public static AccountsLogic inst() {"},{"lineNumber":44,"author":{"gitId":"hhdqirui"},"content":"        return instance;"},{"lineNumber":45,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":46,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":47,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":48,"author":{"gitId":"-"},"content":"     * Gets an account."},{"lineNumber":49,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":50,"author":{"gitId":"-"},"content":"    public Account getAccount(UUID id) {"},{"lineNumber":51,"author":{"gitId":"-"},"content":"        assert id !\u003d null;"},{"lineNumber":52,"author":{"gitId":"-"},"content":"        return accountsDb.getAccount(id);"},{"lineNumber":53,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":54,"author":{"gitId":"-"},"content":""},{"lineNumber":55,"author":{"gitId":"domlimm"},"content":"    /**"},{"lineNumber":56,"author":{"gitId":"domlimm"},"content":"     * Gets an account by googleId."},{"lineNumber":57,"author":{"gitId":"domlimm"},"content":"     */"},{"lineNumber":58,"author":{"gitId":"domlimm"},"content":"    public Account getAccountForGoogleId(String googleId) {"},{"lineNumber":59,"author":{"gitId":"domlimm"},"content":"        assert googleId !\u003d null;"},{"lineNumber":60,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":61,"author":{"gitId":"domlimm"},"content":"        return accountsDb.getAccountByGoogleId(googleId);"},{"lineNumber":62,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":63,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":64,"author":{"gitId":"domlimm"},"content":"    /**"},{"lineNumber":65,"author":{"gitId":"domlimm"},"content":"     * Gets accounts associated with email."},{"lineNumber":66,"author":{"gitId":"domlimm"},"content":"     */"},{"lineNumber":67,"author":{"gitId":"domlimm"},"content":"    public List\u003cAccount\u003e getAccountsForEmail(String email) {"},{"lineNumber":68,"author":{"gitId":"domlimm"},"content":"        assert email !\u003d null;"},{"lineNumber":69,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":70,"author":{"gitId":"domlimm"},"content":"        return accountsDb.getAccountsByEmail(email);"},{"lineNumber":71,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":72,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":73,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":74,"author":{"gitId":"-"},"content":"     * Creates an account."},{"lineNumber":75,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":76,"author":{"gitId":"-"},"content":"     * @return the created account"},{"lineNumber":77,"author":{"gitId":"-"},"content":"     * @throws InvalidParametersException   if the account is not valid"},{"lineNumber":78,"author":{"gitId":"-"},"content":"     * @throws EntityAlreadyExistsException if the account already exists in the"},{"lineNumber":79,"author":{"gitId":"-"},"content":"     *                                      database."},{"lineNumber":80,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":81,"author":{"gitId":"-"},"content":"    public Account createAccount(Account account)"},{"lineNumber":82,"author":{"gitId":"-"},"content":"            throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":83,"author":{"gitId":"-"},"content":"        assert account !\u003d null;"},{"lineNumber":84,"author":{"gitId":"-"},"content":"        return accountsDb.createAccount(account);"},{"lineNumber":85,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":86,"author":{"gitId":"-"},"content":""},{"lineNumber":87,"author":{"gitId":"domlimm"},"content":"    /**"},{"lineNumber":88,"author":{"gitId":"domlimm"},"content":"     * Deletes account associated with the {@code googleId}."},{"lineNumber":89,"author":{"gitId":"domlimm"},"content":"     *"},{"lineNumber":90,"author":{"gitId":"domlimm"},"content":"     * \u003cp\u003eFails silently if the account doesn\u0027t exist.\u003c/p\u003e"},{"lineNumber":91,"author":{"gitId":"domlimm"},"content":"     */"},{"lineNumber":92,"author":{"gitId":"domlimm"},"content":"    public void deleteAccount(String googleId) {"},{"lineNumber":93,"author":{"gitId":"domlimm"},"content":"        assert googleId !\u003d null;"},{"lineNumber":94,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":95,"author":{"gitId":"domlimm"},"content":"        Account account \u003d getAccountForGoogleId(googleId);"},{"lineNumber":96,"author":{"gitId":"domlimm"},"content":"        accountsDb.deleteAccount(account);"},{"lineNumber":97,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":98,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":99,"author":{"gitId":"domlimm"},"content":"    /**"},{"lineNumber":100,"author":{"gitId":"domlimm"},"content":"     * Deletes account and all users associated with the {@code googleId}."},{"lineNumber":101,"author":{"gitId":"domlimm"},"content":"     *"},{"lineNumber":102,"author":{"gitId":"domlimm"},"content":"     * \u003cp\u003eFails silently if the account doesn\u0027t exist.\u003c/p\u003e"},{"lineNumber":103,"author":{"gitId":"domlimm"},"content":"     */"},{"lineNumber":104,"author":{"gitId":"domlimm"},"content":"    public void deleteAccountCascade(String googleId) {"},{"lineNumber":105,"author":{"gitId":"domlimm"},"content":"        assert googleId !\u003d null;"},{"lineNumber":106,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":107,"author":{"gitId":"domlimm"},"content":"        List\u003cUser\u003e usersToDelete \u003d usersLogic.getAllUsersByGoogleId(googleId);"},{"lineNumber":108,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":109,"author":{"gitId":"domlimm"},"content":"        for (User user : usersToDelete) {"},{"lineNumber":110,"author":{"gitId":"domlimm"},"content":"            usersLogic.deleteUser(user);"},{"lineNumber":111,"author":{"gitId":"domlimm"},"content":"        }"},{"lineNumber":112,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":113,"author":{"gitId":"domlimm"},"content":"        deleteAccount(googleId);"},{"lineNumber":114,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":115,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":116,"author":{"gitId":"hhdqirui"},"content":"    /**"},{"lineNumber":117,"author":{"gitId":"hhdqirui"},"content":"     * Updates the readNotifications of an account."},{"lineNumber":118,"author":{"gitId":"hhdqirui"},"content":"     *"},{"lineNumber":119,"author":{"gitId":"hhdqirui"},"content":"     * @param googleId       google ID of the user who read the notification."},{"lineNumber":120,"author":{"gitId":"hhdqirui"},"content":"     * @param notificationId ID of notification to be marked as read."},{"lineNumber":121,"author":{"gitId":"-"},"content":"     * @param endTime        the expiry time of the notification, i.e. notification"},{"lineNumber":122,"author":{"gitId":"-"},"content":"     *                       will not be shown after this time."},{"lineNumber":123,"author":{"gitId":"hhdqirui"},"content":"     * @return the account with updated read notifications."},{"lineNumber":124,"author":{"gitId":"hhdqirui"},"content":"     * @throws InvalidParametersException  if the notification has expired."},{"lineNumber":125,"author":{"gitId":"-"},"content":"     * @throws EntityDoesNotExistException if account or notification does not"},{"lineNumber":126,"author":{"gitId":"-"},"content":"     *                                     exist."},{"lineNumber":127,"author":{"gitId":"hhdqirui"},"content":"     */"},{"lineNumber":128,"author":{"gitId":"hhdqirui"},"content":"    public List\u003cUUID\u003e updateReadNotifications(String googleId, UUID notificationId, Instant endTime)"},{"lineNumber":129,"author":{"gitId":"hhdqirui"},"content":"            throws InvalidParametersException, EntityDoesNotExistException {"},{"lineNumber":130,"author":{"gitId":"hhdqirui"},"content":"        Account account \u003d accountsDb.getAccountByGoogleId(googleId);"},{"lineNumber":131,"author":{"gitId":"hhdqirui"},"content":"        if (account \u003d\u003d null) {"},{"lineNumber":132,"author":{"gitId":"hhdqirui"},"content":"            throw new EntityDoesNotExistException(\"Trying to update the read notifications of a non-existent account.\");"},{"lineNumber":133,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":134,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":135,"author":{"gitId":"hhdqirui"},"content":"        Notification notification \u003d notificationsLogic.getNotification(notificationId);"},{"lineNumber":136,"author":{"gitId":"hhdqirui"},"content":"        if (notification \u003d\u003d null) {"},{"lineNumber":137,"author":{"gitId":"hhdqirui"},"content":"            throw new EntityDoesNotExistException(\"Trying to mark as read a notification that does not exist.\");"},{"lineNumber":138,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":139,"author":{"gitId":"hhdqirui"},"content":"        if (endTime.isBefore(Instant.now())) {"},{"lineNumber":140,"author":{"gitId":"hhdqirui"},"content":"            throw new InvalidParametersException(\"Trying to mark an expired notification as read.\");"},{"lineNumber":141,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":142,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":143,"author":{"gitId":"hhdqirui"},"content":"        ReadNotification readNotification \u003d new ReadNotification(account, notification);"},{"lineNumber":144,"author":{"gitId":"hhdqirui"},"content":"        account.addReadNotification(readNotification);"},{"lineNumber":145,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":146,"author":{"gitId":"hhdqirui"},"content":"        return account.getReadNotifications().stream()"},{"lineNumber":147,"author":{"gitId":"hhdqirui"},"content":"                .map(n -\u003e n.getNotification().getId())"},{"lineNumber":148,"author":{"gitId":"hhdqirui"},"content":"                .collect(Collectors.toList());"},{"lineNumber":149,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":150,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":151,"author":{"gitId":"hhdqirui"},"content":"    /**"},{"lineNumber":152,"author":{"gitId":"hhdqirui"},"content":"     * Gets ids of read notifications in an account."},{"lineNumber":153,"author":{"gitId":"hhdqirui"},"content":"     */"},{"lineNumber":154,"author":{"gitId":"hhdqirui"},"content":"    public List\u003cUUID\u003e getReadNotificationsId(String googleId) {"},{"lineNumber":155,"author":{"gitId":"hhdqirui"},"content":"        return accountsDb.getAccountByGoogleId(googleId).getReadNotifications().stream()"},{"lineNumber":156,"author":{"gitId":"hhdqirui"},"content":"                .map(n -\u003e n.getNotification().getId())"},{"lineNumber":157,"author":{"gitId":"hhdqirui"},"content":"                .collect(Collectors.toList());"},{"lineNumber":158,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":159,"author":{"gitId":"hhdqirui"},"content":"}"}],"authorContributionMap":{"domlimm":52,"hhdqirui":80,"-":27}},{"path":"src/main/java/teammates/sqllogic/core/CoursesLogic.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.sqllogic.core;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"EuniceSim142"},"content":"import static teammates.common.util.Const.ERROR_UPDATE_NON_EXISTENT;"},{"lineNumber":4,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":5,"author":{"gitId":"EuniceSim142"},"content":"import java.time.Instant;"},{"lineNumber":6,"author":{"gitId":"EuniceSim142"},"content":"import java.util.List;"},{"lineNumber":7,"author":{"gitId":"EuniceSim142"},"content":"import java.util.stream.Collectors;"},{"lineNumber":8,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":10,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import teammates.storage.sqlapi.CoursesDb;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Course;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Section;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Team;"},{"lineNumber":16,"author":{"gitId":"-"},"content":""},{"lineNumber":17,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":18,"author":{"gitId":"-"},"content":" * Handles operations related to courses."},{"lineNumber":19,"author":{"gitId":"-"},"content":" *"},{"lineNumber":20,"author":{"gitId":"-"},"content":" * @see Course"},{"lineNumber":21,"author":{"gitId":"-"},"content":" * @see CoursesDb"},{"lineNumber":22,"author":{"gitId":"-"},"content":" */"},{"lineNumber":23,"author":{"gitId":"-"},"content":"public final class CoursesLogic {"},{"lineNumber":24,"author":{"gitId":"-"},"content":""},{"lineNumber":25,"author":{"gitId":"-"},"content":"    private static final CoursesLogic instance \u003d new CoursesLogic();"},{"lineNumber":26,"author":{"gitId":"-"},"content":""},{"lineNumber":27,"author":{"gitId":"-"},"content":"    private CoursesDb coursesDb;"},{"lineNumber":28,"author":{"gitId":"-"},"content":""},{"lineNumber":29,"author":{"gitId":"-"},"content":"    // private FeedbackSessionsLogic fsLogic;"},{"lineNumber":30,"author":{"gitId":"-"},"content":""},{"lineNumber":31,"author":{"gitId":"-"},"content":"    private CoursesLogic() {"},{"lineNumber":32,"author":{"gitId":"-"},"content":"        // prevent initialization"},{"lineNumber":33,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":34,"author":{"gitId":"-"},"content":""},{"lineNumber":35,"author":{"gitId":"-"},"content":"    public static CoursesLogic inst() {"},{"lineNumber":36,"author":{"gitId":"-"},"content":"        return instance;"},{"lineNumber":37,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":38,"author":{"gitId":"-"},"content":""},{"lineNumber":39,"author":{"gitId":"-"},"content":"    void initLogicDependencies(CoursesDb coursesDb, FeedbackSessionsLogic fsLogic) {"},{"lineNumber":40,"author":{"gitId":"-"},"content":"        this.coursesDb \u003d coursesDb;"},{"lineNumber":41,"author":{"gitId":"-"},"content":"        // this.fsLogic \u003d fsLogic;"},{"lineNumber":42,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":43,"author":{"gitId":"-"},"content":""},{"lineNumber":44,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":45,"author":{"gitId":"-"},"content":"     * Creates a course."},{"lineNumber":46,"author":{"gitId":"-"},"content":"     * @return the created course"},{"lineNumber":47,"author":{"gitId":"-"},"content":"     * @throws InvalidParametersException if the course is not valid"},{"lineNumber":48,"author":{"gitId":"-"},"content":"     * @throws EntityAlreadyExistsException if the course already exists in the database."},{"lineNumber":49,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":50,"author":{"gitId":"-"},"content":"    public Course createCourse(Course course) throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":51,"author":{"gitId":"-"},"content":"        return coursesDb.createCourse(course);"},{"lineNumber":52,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":53,"author":{"gitId":"-"},"content":""},{"lineNumber":54,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":55,"author":{"gitId":"-"},"content":"     * Gets a course by course id."},{"lineNumber":56,"author":{"gitId":"-"},"content":"     * @param courseId of course."},{"lineNumber":57,"author":{"gitId":"-"},"content":"     * @return the specified course."},{"lineNumber":58,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":59,"author":{"gitId":"-"},"content":"    public Course getCourse(String courseId) {"},{"lineNumber":60,"author":{"gitId":"-"},"content":"        return coursesDb.getCourse(courseId);"},{"lineNumber":61,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":62,"author":{"gitId":"-"},"content":""},{"lineNumber":63,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":64,"author":{"gitId":"EuniceSim142"},"content":"     * Deletes a course and cascade its students, instructors, sessions, responses, deadline extensions and comments."},{"lineNumber":65,"author":{"gitId":"EuniceSim142"},"content":"     * Fails silently if no such course."},{"lineNumber":66,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":67,"author":{"gitId":"EuniceSim142"},"content":"    public void deleteCourseCascade(String courseId) {"},{"lineNumber":68,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d coursesDb.getCourse(courseId);"},{"lineNumber":69,"author":{"gitId":"EuniceSim142"},"content":"        if (course \u003d\u003d null) {"},{"lineNumber":70,"author":{"gitId":"EuniceSim142"},"content":"            return;"},{"lineNumber":71,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":72,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":73,"author":{"gitId":"EuniceSim142"},"content":"        // TODO: Migrate after other Logic classes have been migrated."},{"lineNumber":74,"author":{"gitId":"EuniceSim142"},"content":"        // AttributesDeletionQuery query \u003d AttributesDeletionQuery.builder()"},{"lineNumber":75,"author":{"gitId":"EuniceSim142"},"content":"        //         .withCourseId(courseId)"},{"lineNumber":76,"author":{"gitId":"EuniceSim142"},"content":"        //         .build();"},{"lineNumber":77,"author":{"gitId":"EuniceSim142"},"content":"        // frcLogic.deleteFeedbackResponseComments(query);"},{"lineNumber":78,"author":{"gitId":"EuniceSim142"},"content":"        // frLogic.deleteFeedbackResponses(query);"},{"lineNumber":79,"author":{"gitId":"EuniceSim142"},"content":"        // fqLogic.deleteFeedbackQuestions(query);"},{"lineNumber":80,"author":{"gitId":"EuniceSim142"},"content":"        // feedbackSessionsLogic.deleteFeedbackSessions(query);"},{"lineNumber":81,"author":{"gitId":"EuniceSim142"},"content":"        // studentsLogic.deleteStudents(query);"},{"lineNumber":82,"author":{"gitId":"EuniceSim142"},"content":"        // instructorsLogic.deleteInstructors(query);"},{"lineNumber":83,"author":{"gitId":"EuniceSim142"},"content":"        // deadlineExtensionsLogic.deleteDeadlineExtensions(query);"},{"lineNumber":84,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":85,"author":{"gitId":"EuniceSim142"},"content":"        coursesDb.deleteCourse(course);"},{"lineNumber":86,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":87,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":88,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":89,"author":{"gitId":"EuniceSim142"},"content":"     * Moves a course to Recycle Bin by its given corresponding ID."},{"lineNumber":90,"author":{"gitId":"EuniceSim142"},"content":"     * @return the time when the course is moved to the recycle bin."},{"lineNumber":91,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":92,"author":{"gitId":"EuniceSim142"},"content":"    public Course moveCourseToRecycleBin(String courseId) throws EntityDoesNotExistException {"},{"lineNumber":93,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d coursesDb.getCourse(courseId);"},{"lineNumber":94,"author":{"gitId":"EuniceSim142"},"content":"        if (course \u003d\u003d null) {"},{"lineNumber":95,"author":{"gitId":"EuniceSim142"},"content":"            throw new EntityDoesNotExistException(\"Trying to move a non-existent course to recycling bin.\");"},{"lineNumber":96,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":97,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":98,"author":{"gitId":"EuniceSim142"},"content":"        Instant now \u003d Instant.now();"},{"lineNumber":99,"author":{"gitId":"EuniceSim142"},"content":"        course.setDeletedAt(now);"},{"lineNumber":100,"author":{"gitId":"EuniceSim142"},"content":"        return course;"},{"lineNumber":101,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":102,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":103,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":104,"author":{"gitId":"EuniceSim142"},"content":"     * Restores a course from Recycle Bin by its given corresponding ID."},{"lineNumber":105,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":106,"author":{"gitId":"EuniceSim142"},"content":"    public void restoreCourseFromRecycleBin(String courseId) throws EntityDoesNotExistException {"},{"lineNumber":107,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d coursesDb.getCourse(courseId);"},{"lineNumber":108,"author":{"gitId":"EuniceSim142"},"content":"        if (course \u003d\u003d null) {"},{"lineNumber":109,"author":{"gitId":"EuniceSim142"},"content":"            throw new EntityDoesNotExistException(\"Trying to restore a non-existent course from recycling bin.\");"},{"lineNumber":110,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":111,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":112,"author":{"gitId":"EuniceSim142"},"content":"        course.setDeletedAt(null);"},{"lineNumber":113,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":114,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":115,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":116,"author":{"gitId":"EuniceSim142"},"content":"     * Updates a course."},{"lineNumber":117,"author":{"gitId":"EuniceSim142"},"content":"     *"},{"lineNumber":118,"author":{"gitId":"EuniceSim142"},"content":"     * @return updated course"},{"lineNumber":119,"author":{"gitId":"EuniceSim142"},"content":"     * @throws InvalidParametersException if attributes to update are not valid"},{"lineNumber":120,"author":{"gitId":"EuniceSim142"},"content":"     * @throws EntityDoesNotExistException if the course cannot be found"},{"lineNumber":121,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":122,"author":{"gitId":"EuniceSim142"},"content":"    public Course updateCourse(String courseId, String name, String timezone)"},{"lineNumber":123,"author":{"gitId":"EuniceSim142"},"content":"            throws InvalidParametersException, EntityDoesNotExistException {"},{"lineNumber":124,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d getCourse(courseId);"},{"lineNumber":125,"author":{"gitId":"EuniceSim142"},"content":"        if (course \u003d\u003d null) {"},{"lineNumber":126,"author":{"gitId":"EuniceSim142"},"content":"            throw new EntityDoesNotExistException(ERROR_UPDATE_NON_EXISTENT + Course.class);"},{"lineNumber":127,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":128,"author":{"gitId":"EuniceSim142"},"content":"        course.setName(name);"},{"lineNumber":129,"author":{"gitId":"EuniceSim142"},"content":"        course.setTimeZone(timezone);"},{"lineNumber":130,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":131,"author":{"gitId":"EuniceSim142"},"content":"        if (!course.isValid()) {"},{"lineNumber":132,"author":{"gitId":"EuniceSim142"},"content":"            throw new InvalidParametersException(course.getInvalidityInfo());"},{"lineNumber":133,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":134,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":135,"author":{"gitId":"EuniceSim142"},"content":"        return course;"},{"lineNumber":136,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":137,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":138,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":139,"author":{"gitId":"-"},"content":"     * Creates a section."},{"lineNumber":140,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":141,"author":{"gitId":"-"},"content":"    public Section createSection(Section section) throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":142,"author":{"gitId":"-"},"content":"        return coursesDb.createSection(section);"},{"lineNumber":143,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":144,"author":{"gitId":"-"},"content":""},{"lineNumber":145,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":146,"author":{"gitId":"-"},"content":"     * Get section by {@code courseId} and {@code teamName}."},{"lineNumber":147,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":148,"author":{"gitId":"-"},"content":"    public Section getSectionByCourseIdAndTeam(String courseId, String teamName) {"},{"lineNumber":149,"author":{"gitId":"-"},"content":"        assert courseId !\u003d null;"},{"lineNumber":150,"author":{"gitId":"-"},"content":"        assert teamName !\u003d null;"},{"lineNumber":151,"author":{"gitId":"-"},"content":""},{"lineNumber":152,"author":{"gitId":"-"},"content":"        return coursesDb.getSectionByCourseIdAndTeam(courseId, teamName);"},{"lineNumber":153,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":154,"author":{"gitId":"-"},"content":""},{"lineNumber":155,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":156,"author":{"gitId":"EuniceSim142"},"content":"     * Gets a list of section names for the given {@code courseId}."},{"lineNumber":157,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":158,"author":{"gitId":"EuniceSim142"},"content":"    public List\u003cString\u003e getSectionNamesForCourse(String courseId) throws EntityDoesNotExistException {"},{"lineNumber":159,"author":{"gitId":"EuniceSim142"},"content":"        assert courseId !\u003d null;"},{"lineNumber":160,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d getCourse(courseId);"},{"lineNumber":161,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":162,"author":{"gitId":"EuniceSim142"},"content":"        if (course \u003d\u003d null) {"},{"lineNumber":163,"author":{"gitId":"EuniceSim142"},"content":"            throw new EntityDoesNotExistException(\"Trying to get section names for a non-existent course.\");"},{"lineNumber":164,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":165,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":166,"author":{"gitId":"EuniceSim142"},"content":"        return course.getSections()"},{"lineNumber":167,"author":{"gitId":"EuniceSim142"},"content":"                .stream()"},{"lineNumber":168,"author":{"gitId":"EuniceSim142"},"content":"                .map(section -\u003e section.getName())"},{"lineNumber":169,"author":{"gitId":"EuniceSim142"},"content":"                .collect(Collectors.toList());"},{"lineNumber":170,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":171,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":172,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":173,"author":{"gitId":"-"},"content":"     * Creates a team."},{"lineNumber":174,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":175,"author":{"gitId":"-"},"content":"    public Team createTeam(Team team) throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":176,"author":{"gitId":"-"},"content":"        return coursesDb.createTeam(team);"},{"lineNumber":177,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":178,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":179,"author":{"gitId":"cedricongjh"},"content":"    /**"},{"lineNumber":180,"author":{"gitId":"cedricongjh"},"content":"     * Returns teams for a particular section."},{"lineNumber":181,"author":{"gitId":"cedricongjh"},"content":"     */"},{"lineNumber":182,"author":{"gitId":"cedricongjh"},"content":"    public List\u003cTeam\u003e getTeamsForSection(Section section) {"},{"lineNumber":183,"author":{"gitId":"cedricongjh"},"content":"        return coursesDb.getTeamsForSection(section);"},{"lineNumber":184,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":185,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":186,"author":{"gitId":"cedricongjh"},"content":"    /**"},{"lineNumber":187,"author":{"gitId":"cedricongjh"},"content":"     * Returns teams for a course."},{"lineNumber":188,"author":{"gitId":"cedricongjh"},"content":"     */"},{"lineNumber":189,"author":{"gitId":"cedricongjh"},"content":"    public List\u003cTeam\u003e getTeamsForCourse(String courseId) {"},{"lineNumber":190,"author":{"gitId":"cedricongjh"},"content":"        return coursesDb.getTeamsForCourse(courseId);"},{"lineNumber":191,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":192,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"cedricongjh":14,"EuniceSim142":99,"-":79}},{"path":"src/main/java/teammates/sqllogic/core/DataBundleLogic.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.sqllogic.core;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.util.Collection;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.util.HashMap;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.util.Map;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import java.util.UUID;"},{"lineNumber":7,"author":{"gitId":"-"},"content":""},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.SqlDataBundle;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import teammates.common.util.JsonUtils;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Account;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.AccountRequest;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Course;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.DeadlineExtension;"},{"lineNumber":16,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.FeedbackQuestion;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.FeedbackSession;"},{"lineNumber":18,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Notification;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.ReadNotification;"},{"lineNumber":21,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Section;"},{"lineNumber":22,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Student;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Team;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.User;"},{"lineNumber":25,"author":{"gitId":"-"},"content":""},{"lineNumber":26,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":27,"author":{"gitId":"-"},"content":" * Handles operations related to data bundles."},{"lineNumber":28,"author":{"gitId":"-"},"content":" *"},{"lineNumber":29,"author":{"gitId":"-"},"content":" * @see DataBundle"},{"lineNumber":30,"author":{"gitId":"-"},"content":" */"},{"lineNumber":31,"author":{"gitId":"-"},"content":"public final class DataBundleLogic {"},{"lineNumber":32,"author":{"gitId":"-"},"content":""},{"lineNumber":33,"author":{"gitId":"-"},"content":"    private static final DataBundleLogic instance \u003d new DataBundleLogic();"},{"lineNumber":34,"author":{"gitId":"-"},"content":""},{"lineNumber":35,"author":{"gitId":"-"},"content":"    private AccountsLogic accountsLogic;"},{"lineNumber":36,"author":{"gitId":"-"},"content":"    private AccountRequestsLogic accountRequestsLogic;"},{"lineNumber":37,"author":{"gitId":"-"},"content":"    private CoursesLogic coursesLogic;"},{"lineNumber":38,"author":{"gitId":"-"},"content":"    private DeadlineExtensionsLogic deadlineExtensionsLogic;"},{"lineNumber":39,"author":{"gitId":"-"},"content":"    private FeedbackSessionsLogic fsLogic;"},{"lineNumber":40,"author":{"gitId":"hhdqirui"},"content":"    private FeedbackQuestionsLogic fqLogic;"},{"lineNumber":41,"author":{"gitId":"-"},"content":"    private NotificationsLogic notificationsLogic;"},{"lineNumber":42,"author":{"gitId":"-"},"content":"    private UsersLogic usersLogic;"},{"lineNumber":43,"author":{"gitId":"-"},"content":""},{"lineNumber":44,"author":{"gitId":"-"},"content":"    private DataBundleLogic() {"},{"lineNumber":45,"author":{"gitId":"-"},"content":"        // prevent initialization"},{"lineNumber":46,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":47,"author":{"gitId":"-"},"content":""},{"lineNumber":48,"author":{"gitId":"-"},"content":"    public static DataBundleLogic inst() {"},{"lineNumber":49,"author":{"gitId":"-"},"content":"        return instance;"},{"lineNumber":50,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":51,"author":{"gitId":"-"},"content":""},{"lineNumber":52,"author":{"gitId":"-"},"content":"    void initLogicDependencies(AccountsLogic accountsLogic, AccountRequestsLogic accountRequestsLogic,"},{"lineNumber":53,"author":{"gitId":"-"},"content":"            CoursesLogic coursesLogic,"},{"lineNumber":54,"author":{"gitId":"-"},"content":"            DeadlineExtensionsLogic deadlineExtensionsLogic, FeedbackSessionsLogic fsLogic,"},{"lineNumber":55,"author":{"gitId":"hhdqirui"},"content":"            FeedbackQuestionsLogic fqLogic,"},{"lineNumber":56,"author":{"gitId":"-"},"content":"            NotificationsLogic notificationsLogic, UsersLogic usersLogic) {"},{"lineNumber":57,"author":{"gitId":"-"},"content":"        this.accountsLogic \u003d accountsLogic;"},{"lineNumber":58,"author":{"gitId":"-"},"content":"        this.accountRequestsLogic \u003d accountRequestsLogic;"},{"lineNumber":59,"author":{"gitId":"-"},"content":"        this.coursesLogic \u003d coursesLogic;"},{"lineNumber":60,"author":{"gitId":"-"},"content":"        this.deadlineExtensionsLogic \u003d deadlineExtensionsLogic;"},{"lineNumber":61,"author":{"gitId":"-"},"content":"        this.fsLogic \u003d fsLogic;"},{"lineNumber":62,"author":{"gitId":"hhdqirui"},"content":"        this.fqLogic \u003d fqLogic;"},{"lineNumber":63,"author":{"gitId":"-"},"content":"        this.notificationsLogic \u003d notificationsLogic;"},{"lineNumber":64,"author":{"gitId":"-"},"content":"        this.usersLogic \u003d usersLogic;"},{"lineNumber":65,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":66,"author":{"gitId":"-"},"content":""},{"lineNumber":67,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":68,"author":{"gitId":"-"},"content":"     * Deserialize JSON into a data bundle. Replaces placeholder IDs with actual"},{"lineNumber":69,"author":{"gitId":"-"},"content":"     * IDs."},{"lineNumber":70,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":71,"author":{"gitId":"-"},"content":"     * @param jsonString serialized data bundle"},{"lineNumber":72,"author":{"gitId":"-"},"content":"     * @return newly created DataBundle"},{"lineNumber":73,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":74,"author":{"gitId":"-"},"content":"    public static SqlDataBundle deserializeDataBundle(String jsonString) {"},{"lineNumber":75,"author":{"gitId":"-"},"content":"        SqlDataBundle dataBundle \u003d JsonUtils.fromJson(jsonString, SqlDataBundle.class);"},{"lineNumber":76,"author":{"gitId":"-"},"content":""},{"lineNumber":77,"author":{"gitId":"-"},"content":"        Collection\u003cAccount\u003e accounts \u003d dataBundle.accounts.values();"},{"lineNumber":78,"author":{"gitId":"-"},"content":"        Collection\u003cAccountRequest\u003e accountRequests \u003d dataBundle.accountRequests.values();"},{"lineNumber":79,"author":{"gitId":"-"},"content":"        Collection\u003cCourse\u003e courses \u003d dataBundle.courses.values();"},{"lineNumber":80,"author":{"gitId":"-"},"content":"        Collection\u003cSection\u003e sections \u003d dataBundle.sections.values();"},{"lineNumber":81,"author":{"gitId":"-"},"content":"        Collection\u003cTeam\u003e teams \u003d dataBundle.teams.values();"},{"lineNumber":82,"author":{"gitId":"-"},"content":"        Collection\u003cInstructor\u003e instructors \u003d dataBundle.instructors.values();"},{"lineNumber":83,"author":{"gitId":"-"},"content":"        Collection\u003cStudent\u003e students \u003d dataBundle.students.values();"},{"lineNumber":84,"author":{"gitId":"-"},"content":"        Collection\u003cFeedbackSession\u003e sessions \u003d dataBundle.feedbackSessions.values();"},{"lineNumber":85,"author":{"gitId":"hhdqirui"},"content":"        Collection\u003cFeedbackQuestion\u003e questions \u003d dataBundle.feedbackQuestions.values();"},{"lineNumber":86,"author":{"gitId":"-"},"content":"        // Collection\u003cFeedbackResponse\u003e responses \u003d"},{"lineNumber":87,"author":{"gitId":"-"},"content":"        // dataBundle.feedbackResponses.values();"},{"lineNumber":88,"author":{"gitId":"-"},"content":"        // Collection\u003cFeedbackResponseComment\u003e responseComments \u003d"},{"lineNumber":89,"author":{"gitId":"-"},"content":"        // dataBundle.feedbackResponseComments.values();"},{"lineNumber":90,"author":{"gitId":"-"},"content":"        Collection\u003cDeadlineExtension\u003e deadlineExtensions \u003d dataBundle.deadlineExtensions.values();"},{"lineNumber":91,"author":{"gitId":"-"},"content":"        Collection\u003cNotification\u003e notifications \u003d dataBundle.notifications.values();"},{"lineNumber":92,"author":{"gitId":"-"},"content":"        Collection\u003cReadNotification\u003e readNotifications \u003d dataBundle.readNotifications.values();"},{"lineNumber":93,"author":{"gitId":"-"},"content":""},{"lineNumber":94,"author":{"gitId":"-"},"content":"        // Mapping of IDs or placeholder IDs to actual entity"},{"lineNumber":95,"author":{"gitId":"-"},"content":"        Map\u003cString, Course\u003e coursesMap \u003d new HashMap\u003c\u003e();"},{"lineNumber":96,"author":{"gitId":"-"},"content":"        Map\u003cUUID, Section\u003e sectionsMap \u003d new HashMap\u003c\u003e();"},{"lineNumber":97,"author":{"gitId":"-"},"content":"        Map\u003cUUID, Team\u003e teamsMap \u003d new HashMap\u003c\u003e();"},{"lineNumber":98,"author":{"gitId":"-"},"content":"        Map\u003cUUID, FeedbackSession\u003e sessionsMap \u003d new HashMap\u003c\u003e();"},{"lineNumber":99,"author":{"gitId":"hhdqirui"},"content":"        // Map\u003cUUID, FeedbackQuestion\u003e questionMap \u003d new HashMap\u003c\u003e();"},{"lineNumber":100,"author":{"gitId":"-"},"content":"        Map\u003cUUID, Account\u003e accountsMap \u003d new HashMap\u003c\u003e();"},{"lineNumber":101,"author":{"gitId":"-"},"content":"        Map\u003cUUID, User\u003e usersMap \u003d new HashMap\u003c\u003e();"},{"lineNumber":102,"author":{"gitId":"-"},"content":"        Map\u003cUUID, Notification\u003e notificationsMap \u003d new HashMap\u003c\u003e();"},{"lineNumber":103,"author":{"gitId":"-"},"content":""},{"lineNumber":104,"author":{"gitId":"-"},"content":"        // Replace any placeholder IDs with newly generated UUIDs"},{"lineNumber":105,"author":{"gitId":"-"},"content":"        // Store mapping of placeholder ID to actual entity to keep track of"},{"lineNumber":106,"author":{"gitId":"-"},"content":"        // associations between entities"},{"lineNumber":107,"author":{"gitId":"-"},"content":"        for (AccountRequest accountRequest : accountRequests) {"},{"lineNumber":108,"author":{"gitId":"-"},"content":"            accountRequest.setId(UUID.randomUUID());"},{"lineNumber":109,"author":{"gitId":"-"},"content":"            accountRequest.generateNewRegistrationKey();"},{"lineNumber":110,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":111,"author":{"gitId":"-"},"content":""},{"lineNumber":112,"author":{"gitId":"-"},"content":"        for (Course course : courses) {"},{"lineNumber":113,"author":{"gitId":"-"},"content":"            coursesMap.put(course.getId(), course);"},{"lineNumber":114,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":115,"author":{"gitId":"-"},"content":""},{"lineNumber":116,"author":{"gitId":"-"},"content":"        for (Section section : sections) {"},{"lineNumber":117,"author":{"gitId":"-"},"content":"            UUID placeholderId \u003d section.getId();"},{"lineNumber":118,"author":{"gitId":"-"},"content":"            section.setId(UUID.randomUUID());"},{"lineNumber":119,"author":{"gitId":"-"},"content":"            sectionsMap.put(placeholderId, section);"},{"lineNumber":120,"author":{"gitId":"-"},"content":"            Course course \u003d coursesMap.get(section.getCourse().getId());"},{"lineNumber":121,"author":{"gitId":"-"},"content":"            section.setCourse(course);"},{"lineNumber":122,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":123,"author":{"gitId":"-"},"content":""},{"lineNumber":124,"author":{"gitId":"-"},"content":"        for (Team team : teams) {"},{"lineNumber":125,"author":{"gitId":"-"},"content":"            UUID placeholderId \u003d team.getId();"},{"lineNumber":126,"author":{"gitId":"-"},"content":"            team.setId(UUID.randomUUID());"},{"lineNumber":127,"author":{"gitId":"-"},"content":"            teamsMap.put(placeholderId, team);"},{"lineNumber":128,"author":{"gitId":"-"},"content":"            Section section \u003d sectionsMap.get(team.getSection().getId());"},{"lineNumber":129,"author":{"gitId":"-"},"content":"            team.setSection(section);"},{"lineNumber":130,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":131,"author":{"gitId":"-"},"content":""},{"lineNumber":132,"author":{"gitId":"-"},"content":"        for (FeedbackSession session : sessions) {"},{"lineNumber":133,"author":{"gitId":"-"},"content":"            UUID placeholderId \u003d session.getId();"},{"lineNumber":134,"author":{"gitId":"-"},"content":"            session.setId(UUID.randomUUID());"},{"lineNumber":135,"author":{"gitId":"-"},"content":"            sessionsMap.put(placeholderId, session);"},{"lineNumber":136,"author":{"gitId":"-"},"content":"            Course course \u003d coursesMap.get(session.getCourse().getId());"},{"lineNumber":137,"author":{"gitId":"-"},"content":"            session.setCourse(course);"},{"lineNumber":138,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":139,"author":{"gitId":"-"},"content":""},{"lineNumber":140,"author":{"gitId":"hhdqirui"},"content":"        for (FeedbackQuestion question : questions) {"},{"lineNumber":141,"author":{"gitId":"hhdqirui"},"content":"            // UUID placeholderId \u003d question.getId();"},{"lineNumber":142,"author":{"gitId":"hhdqirui"},"content":"            question.setId(UUID.randomUUID());"},{"lineNumber":143,"author":{"gitId":"hhdqirui"},"content":"            // questionMap.put(placeholderId, question);"},{"lineNumber":144,"author":{"gitId":"hhdqirui"},"content":"            FeedbackSession fs \u003d sessionsMap.get(question.getFeedbackSession().getId());"},{"lineNumber":145,"author":{"gitId":"hhdqirui"},"content":"            question.setFeedbackSession(fs);"},{"lineNumber":146,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":147,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":148,"author":{"gitId":"-"},"content":"        for (Account account : accounts) {"},{"lineNumber":149,"author":{"gitId":"-"},"content":"            UUID placeholderId \u003d account.getId();"},{"lineNumber":150,"author":{"gitId":"-"},"content":"            account.setId(UUID.randomUUID());"},{"lineNumber":151,"author":{"gitId":"-"},"content":"            accountsMap.put(placeholderId, account);"},{"lineNumber":152,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":153,"author":{"gitId":"-"},"content":""},{"lineNumber":154,"author":{"gitId":"-"},"content":"        for (Instructor instructor : instructors) {"},{"lineNumber":155,"author":{"gitId":"-"},"content":"            UUID placeholderId \u003d instructor.getId();"},{"lineNumber":156,"author":{"gitId":"-"},"content":"            instructor.setId(UUID.randomUUID());"},{"lineNumber":157,"author":{"gitId":"-"},"content":"            usersMap.put(placeholderId, instructor);"},{"lineNumber":158,"author":{"gitId":"-"},"content":"            Course course \u003d coursesMap.get(instructor.getCourse().getId());"},{"lineNumber":159,"author":{"gitId":"-"},"content":"            instructor.setCourse(course);"},{"lineNumber":160,"author":{"gitId":"-"},"content":"            if (instructor.getAccount() !\u003d null) {"},{"lineNumber":161,"author":{"gitId":"-"},"content":"                Account account \u003d accountsMap.get(instructor.getAccount().getId());"},{"lineNumber":162,"author":{"gitId":"-"},"content":"                instructor.setAccount(account);"},{"lineNumber":163,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":164,"author":{"gitId":"-"},"content":"            instructor.generateNewRegistrationKey();"},{"lineNumber":165,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":166,"author":{"gitId":"-"},"content":""},{"lineNumber":167,"author":{"gitId":"-"},"content":"        for (Student student : students) {"},{"lineNumber":168,"author":{"gitId":"-"},"content":"            UUID placeholderId \u003d student.getId();"},{"lineNumber":169,"author":{"gitId":"-"},"content":"            student.setId(UUID.randomUUID());"},{"lineNumber":170,"author":{"gitId":"-"},"content":"            usersMap.put(placeholderId, student);"},{"lineNumber":171,"author":{"gitId":"-"},"content":"            Course course \u003d coursesMap.get(student.getCourse().getId());"},{"lineNumber":172,"author":{"gitId":"-"},"content":"            student.setCourse(course);"},{"lineNumber":173,"author":{"gitId":"-"},"content":"            Team team \u003d teamsMap.get(student.getTeam().getId());"},{"lineNumber":174,"author":{"gitId":"-"},"content":"            student.setTeam(team);"},{"lineNumber":175,"author":{"gitId":"-"},"content":"            if (student.getAccount() !\u003d null) {"},{"lineNumber":176,"author":{"gitId":"-"},"content":"                Account account \u003d accountsMap.get(student.getAccount().getId());"},{"lineNumber":177,"author":{"gitId":"-"},"content":"                student.setAccount(account);"},{"lineNumber":178,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":179,"author":{"gitId":"-"},"content":"            student.generateNewRegistrationKey();"},{"lineNumber":180,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":181,"author":{"gitId":"-"},"content":""},{"lineNumber":182,"author":{"gitId":"-"},"content":"        for (Notification notification : notifications) {"},{"lineNumber":183,"author":{"gitId":"-"},"content":"            UUID placeholderId \u003d notification.getId();"},{"lineNumber":184,"author":{"gitId":"-"},"content":"            notification.setId(UUID.randomUUID());"},{"lineNumber":185,"author":{"gitId":"-"},"content":"            notificationsMap.put(placeholderId, notification);"},{"lineNumber":186,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":187,"author":{"gitId":"-"},"content":""},{"lineNumber":188,"author":{"gitId":"-"},"content":"        for (ReadNotification readNotification : readNotifications) {"},{"lineNumber":189,"author":{"gitId":"-"},"content":"            readNotification.setId(UUID.randomUUID());"},{"lineNumber":190,"author":{"gitId":"-"},"content":"            Account account \u003d accountsMap.get(readNotification.getAccount().getId());"},{"lineNumber":191,"author":{"gitId":"-"},"content":"            readNotification.setAccount(account);"},{"lineNumber":192,"author":{"gitId":"-"},"content":"            account.addReadNotification(readNotification);"},{"lineNumber":193,"author":{"gitId":"-"},"content":"            Notification notification \u003d notificationsMap.get(readNotification.getNotification().getId());"},{"lineNumber":194,"author":{"gitId":"-"},"content":"            readNotification.setNotification(notification);"},{"lineNumber":195,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":196,"author":{"gitId":"-"},"content":""},{"lineNumber":197,"author":{"gitId":"-"},"content":"        for (DeadlineExtension deadlineExtension : deadlineExtensions) {"},{"lineNumber":198,"author":{"gitId":"-"},"content":"            deadlineExtension.setId(UUID.randomUUID());"},{"lineNumber":199,"author":{"gitId":"-"},"content":"            FeedbackSession session \u003d sessionsMap.get(deadlineExtension.getFeedbackSession().getId());"},{"lineNumber":200,"author":{"gitId":"-"},"content":"            deadlineExtension.setFeedbackSession(session);"},{"lineNumber":201,"author":{"gitId":"-"},"content":"            User user \u003d usersMap.get(deadlineExtension.getUser().getId());"},{"lineNumber":202,"author":{"gitId":"-"},"content":"            deadlineExtension.setUser(user);"},{"lineNumber":203,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":204,"author":{"gitId":"-"},"content":""},{"lineNumber":205,"author":{"gitId":"-"},"content":"        return dataBundle;"},{"lineNumber":206,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":207,"author":{"gitId":"-"},"content":""},{"lineNumber":208,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":209,"author":{"gitId":"-"},"content":"     * Persists data in the given {@link DataBundle} to the database."},{"lineNumber":210,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":211,"author":{"gitId":"-"},"content":"     * @throws InvalidParametersException if invalid data is encountered."},{"lineNumber":212,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":213,"author":{"gitId":"-"},"content":"    public SqlDataBundle persistDataBundle(SqlDataBundle dataBundle)"},{"lineNumber":214,"author":{"gitId":"-"},"content":"            throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":215,"author":{"gitId":"-"},"content":"        if (dataBundle \u003d\u003d null) {"},{"lineNumber":216,"author":{"gitId":"-"},"content":"            throw new InvalidParametersException(\"Null data bundle\");"},{"lineNumber":217,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":218,"author":{"gitId":"-"},"content":""},{"lineNumber":219,"author":{"gitId":"-"},"content":"        Collection\u003cAccount\u003e accounts \u003d dataBundle.accounts.values();"},{"lineNumber":220,"author":{"gitId":"-"},"content":"        Collection\u003cAccountRequest\u003e accountRequests \u003d dataBundle.accountRequests.values();"},{"lineNumber":221,"author":{"gitId":"-"},"content":"        Collection\u003cCourse\u003e courses \u003d dataBundle.courses.values();"},{"lineNumber":222,"author":{"gitId":"-"},"content":"        Collection\u003cSection\u003e sections \u003d dataBundle.sections.values();"},{"lineNumber":223,"author":{"gitId":"-"},"content":"        Collection\u003cTeam\u003e teams \u003d dataBundle.teams.values();"},{"lineNumber":224,"author":{"gitId":"-"},"content":"        Collection\u003cInstructor\u003e instructors \u003d dataBundle.instructors.values();"},{"lineNumber":225,"author":{"gitId":"-"},"content":"        Collection\u003cStudent\u003e students \u003d dataBundle.students.values();"},{"lineNumber":226,"author":{"gitId":"-"},"content":"        Collection\u003cFeedbackSession\u003e sessions \u003d dataBundle.feedbackSessions.values();"},{"lineNumber":227,"author":{"gitId":"hhdqirui"},"content":"        Collection\u003cFeedbackQuestion\u003e questions \u003d dataBundle.feedbackQuestions.values();"},{"lineNumber":228,"author":{"gitId":"-"},"content":"        // Collection\u003cFeedbackResponse\u003e responses \u003d"},{"lineNumber":229,"author":{"gitId":"-"},"content":"        // dataBundle.feedbackResponses.values();"},{"lineNumber":230,"author":{"gitId":"-"},"content":"        // Collection\u003cFeedbackResponseComment\u003e responseComments \u003d"},{"lineNumber":231,"author":{"gitId":"-"},"content":"        // dataBundle.feedbackResponseComments.values();"},{"lineNumber":232,"author":{"gitId":"-"},"content":"        Collection\u003cDeadlineExtension\u003e deadlineExtensions \u003d dataBundle.deadlineExtensions.values();"},{"lineNumber":233,"author":{"gitId":"-"},"content":"        Collection\u003cNotification\u003e notifications \u003d dataBundle.notifications.values();"},{"lineNumber":234,"author":{"gitId":"-"},"content":""},{"lineNumber":235,"author":{"gitId":"-"},"content":"        for (AccountRequest accountRequest : accountRequests) {"},{"lineNumber":236,"author":{"gitId":"-"},"content":"            accountRequestsLogic.createAccountRequest(accountRequest);"},{"lineNumber":237,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":238,"author":{"gitId":"-"},"content":""},{"lineNumber":239,"author":{"gitId":"-"},"content":"        for (Notification notification : notifications) {"},{"lineNumber":240,"author":{"gitId":"-"},"content":"            notificationsLogic.createNotification(notification);"},{"lineNumber":241,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":242,"author":{"gitId":"-"},"content":""},{"lineNumber":243,"author":{"gitId":"-"},"content":"        for (Course course : courses) {"},{"lineNumber":244,"author":{"gitId":"-"},"content":"            coursesLogic.createCourse(course);"},{"lineNumber":245,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":246,"author":{"gitId":"-"},"content":""},{"lineNumber":247,"author":{"gitId":"-"},"content":"        for (Section section : sections) {"},{"lineNumber":248,"author":{"gitId":"-"},"content":"            coursesLogic.createSection(section);"},{"lineNumber":249,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":250,"author":{"gitId":"-"},"content":""},{"lineNumber":251,"author":{"gitId":"-"},"content":"        for (Team team : teams) {"},{"lineNumber":252,"author":{"gitId":"-"},"content":"            coursesLogic.createTeam(team);"},{"lineNumber":253,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":254,"author":{"gitId":"-"},"content":""},{"lineNumber":255,"author":{"gitId":"-"},"content":"        for (FeedbackSession session : sessions) {"},{"lineNumber":256,"author":{"gitId":"-"},"content":"            fsLogic.createFeedbackSession(session);"},{"lineNumber":257,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":258,"author":{"gitId":"-"},"content":""},{"lineNumber":259,"author":{"gitId":"hhdqirui"},"content":"        for (FeedbackQuestion question : questions) {"},{"lineNumber":260,"author":{"gitId":"hhdqirui"},"content":"            fqLogic.createFeedbackQuestion(question);"},{"lineNumber":261,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":262,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":263,"author":{"gitId":"-"},"content":"        for (Account account : accounts) {"},{"lineNumber":264,"author":{"gitId":"-"},"content":"            accountsLogic.createAccount(account);"},{"lineNumber":265,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":266,"author":{"gitId":"-"},"content":""},{"lineNumber":267,"author":{"gitId":"-"},"content":"        for (Instructor instructor : instructors) {"},{"lineNumber":268,"author":{"gitId":"-"},"content":"            usersLogic.createInstructor(instructor);"},{"lineNumber":269,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":270,"author":{"gitId":"-"},"content":""},{"lineNumber":271,"author":{"gitId":"-"},"content":"        for (Student student : students) {"},{"lineNumber":272,"author":{"gitId":"-"},"content":"            usersLogic.createStudent(student);"},{"lineNumber":273,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":274,"author":{"gitId":"-"},"content":""},{"lineNumber":275,"author":{"gitId":"-"},"content":"        for (DeadlineExtension deadlineExtension : deadlineExtensions) {"},{"lineNumber":276,"author":{"gitId":"-"},"content":"            deadlineExtensionsLogic.createDeadlineExtension(deadlineExtension);"},{"lineNumber":277,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":278,"author":{"gitId":"-"},"content":""},{"lineNumber":279,"author":{"gitId":"-"},"content":"        return dataBundle;"},{"lineNumber":280,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":281,"author":{"gitId":"-"},"content":""},{"lineNumber":282,"author":{"gitId":"-"},"content":"    // TODO: Incomplete"},{"lineNumber":283,"author":{"gitId":"-"},"content":"    // private void removeDataBundle(SqlDataBundle dataBundle) throws"},{"lineNumber":284,"author":{"gitId":"-"},"content":"    // InvalidParametersException {"},{"lineNumber":285,"author":{"gitId":"-"},"content":"    // // Cannot rely on generated IDs, might not be the same as the actual ID in"},{"lineNumber":286,"author":{"gitId":"-"},"content":"    // the db."},{"lineNumber":287,"author":{"gitId":"-"},"content":"    // if (dataBundle \u003d\u003d null) {"},{"lineNumber":288,"author":{"gitId":"-"},"content":"    // throw new InvalidParametersException(\"Null data bundle\");"},{"lineNumber":289,"author":{"gitId":"-"},"content":"    // }"},{"lineNumber":290,"author":{"gitId":"-"},"content":"    // }"},{"lineNumber":291,"author":{"gitId":"-"},"content":""},{"lineNumber":292,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"hhdqirui":19,"-":273}},{"path":"src/main/java/teammates/sqllogic/core/DeadlineExtensionsLogic.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.sqllogic.core;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"EuniceSim142"},"content":"import java.time.Instant;"},{"lineNumber":4,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":5,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import teammates.storage.sqlapi.DeadlineExtensionsDb;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.DeadlineExtension;"},{"lineNumber":9,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.FeedbackSession;"},{"lineNumber":10,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.User;"},{"lineNumber":11,"author":{"gitId":"-"},"content":""},{"lineNumber":12,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":13,"author":{"gitId":"-"},"content":" * Handles operations related to deadline extensions."},{"lineNumber":14,"author":{"gitId":"-"},"content":" *"},{"lineNumber":15,"author":{"gitId":"-"},"content":" * @see DeadlineExtension"},{"lineNumber":16,"author":{"gitId":"-"},"content":" * @see DeadlineExtensionsDb"},{"lineNumber":17,"author":{"gitId":"-"},"content":" */"},{"lineNumber":18,"author":{"gitId":"-"},"content":"public final class DeadlineExtensionsLogic {"},{"lineNumber":19,"author":{"gitId":"-"},"content":""},{"lineNumber":20,"author":{"gitId":"-"},"content":"    private static final DeadlineExtensionsLogic instance \u003d new DeadlineExtensionsLogic();"},{"lineNumber":21,"author":{"gitId":"-"},"content":""},{"lineNumber":22,"author":{"gitId":"-"},"content":"    private DeadlineExtensionsDb deadlineExtensionsDb;"},{"lineNumber":23,"author":{"gitId":"-"},"content":""},{"lineNumber":24,"author":{"gitId":"-"},"content":"    private DeadlineExtensionsLogic() {"},{"lineNumber":25,"author":{"gitId":"-"},"content":"        // prevent initialization"},{"lineNumber":26,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":27,"author":{"gitId":"-"},"content":""},{"lineNumber":28,"author":{"gitId":"-"},"content":"    public static DeadlineExtensionsLogic inst() {"},{"lineNumber":29,"author":{"gitId":"-"},"content":"        return instance;"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":31,"author":{"gitId":"-"},"content":""},{"lineNumber":32,"author":{"gitId":"-"},"content":"    void initLogicDependencies(DeadlineExtensionsDb deadlineExtensionsDb) {"},{"lineNumber":33,"author":{"gitId":"-"},"content":"        this.deadlineExtensionsDb \u003d deadlineExtensionsDb;"},{"lineNumber":34,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":35,"author":{"gitId":"-"},"content":""},{"lineNumber":36,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":37,"author":{"gitId":"EuniceSim142"},"content":"     * Get extended deadline for this session and user if it exists, otherwise get the deadline of the session."},{"lineNumber":38,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":39,"author":{"gitId":"EuniceSim142"},"content":"    public Instant getDeadlineForUser(FeedbackSession session, User user) {"},{"lineNumber":40,"author":{"gitId":"EuniceSim142"},"content":"        DeadlineExtension deadlineExtension \u003d"},{"lineNumber":41,"author":{"gitId":"EuniceSim142"},"content":"                deadlineExtensionsDb.getDeadlineExtensionForUser(session.getId(), user.getId());"},{"lineNumber":42,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":43,"author":{"gitId":"EuniceSim142"},"content":"        if (deadlineExtension \u003d\u003d null) {"},{"lineNumber":44,"author":{"gitId":"EuniceSim142"},"content":"            return session.getEndTime();"},{"lineNumber":45,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":46,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":47,"author":{"gitId":"EuniceSim142"},"content":"        return deadlineExtension.getEndTime();"},{"lineNumber":48,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":49,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":50,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":51,"author":{"gitId":"-"},"content":"     * Creates a deadline extension."},{"lineNumber":52,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":53,"author":{"gitId":"-"},"content":"     * @return created deadline extension"},{"lineNumber":54,"author":{"gitId":"-"},"content":"     * @throws InvalidParametersException if the deadline extension is not valid"},{"lineNumber":55,"author":{"gitId":"-"},"content":"     * @throws EntityAlreadyExistsException if the deadline extension already exist"},{"lineNumber":56,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":57,"author":{"gitId":"-"},"content":"    public DeadlineExtension createDeadlineExtension(DeadlineExtension deadlineExtension)"},{"lineNumber":58,"author":{"gitId":"-"},"content":"            throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":59,"author":{"gitId":"-"},"content":"        assert deadlineExtension !\u003d null;"},{"lineNumber":60,"author":{"gitId":"-"},"content":"        return deadlineExtensionsDb.createDeadlineExtension(deadlineExtension);"},{"lineNumber":61,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":62,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"EuniceSim142":18,"-":44}},{"path":"src/main/java/teammates/sqllogic/core/FeedbackQuestionsLogic.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"EuniceSim142"},"content":"package teammates.sqllogic.core;"},{"lineNumber":2,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":3,"author":{"gitId":"cedricongjh"},"content":"import java.util.ArrayList;"},{"lineNumber":4,"author":{"gitId":"hhdqirui"},"content":"import java.util.HashSet;"},{"lineNumber":5,"author":{"gitId":"EuniceSim142"},"content":"import java.util.List;"},{"lineNumber":6,"author":{"gitId":"hhdqirui"},"content":"import java.util.Set;"},{"lineNumber":7,"author":{"gitId":"EuniceSim142"},"content":"import java.util.UUID;"},{"lineNumber":8,"author":{"gitId":"cedricongjh"},"content":"import java.util.stream.Collectors;"},{"lineNumber":9,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":10,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.datatransfer.FeedbackParticipantType;"},{"lineNumber":11,"author":{"gitId":"cedricongjh"},"content":"import teammates.common.datatransfer.questions.FeedbackMcqQuestionDetails;"},{"lineNumber":12,"author":{"gitId":"cedricongjh"},"content":"import teammates.common.datatransfer.questions.FeedbackMsqQuestionDetails;"},{"lineNumber":13,"author":{"gitId":"cedricongjh"},"content":"import teammates.common.datatransfer.questions.FeedbackQuestionType;"},{"lineNumber":14,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":15,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.util.Logger;"},{"lineNumber":16,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlapi.FeedbackQuestionsDb;"},{"lineNumber":17,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.FeedbackQuestion;"},{"lineNumber":18,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.FeedbackSession;"},{"lineNumber":19,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":20,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.Student;"},{"lineNumber":21,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.questions.FeedbackMcqQuestion;"},{"lineNumber":22,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.questions.FeedbackMsqQuestion;"},{"lineNumber":23,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":24,"author":{"gitId":"EuniceSim142"},"content":"/**"},{"lineNumber":25,"author":{"gitId":"EuniceSim142"},"content":" * Handles operations related to feedback questions."},{"lineNumber":26,"author":{"gitId":"EuniceSim142"},"content":" *"},{"lineNumber":27,"author":{"gitId":"EuniceSim142"},"content":" * @see FeedbackQuestion"},{"lineNumber":28,"author":{"gitId":"EuniceSim142"},"content":" * @see FeedbackQuestionsDb"},{"lineNumber":29,"author":{"gitId":"EuniceSim142"},"content":" */"},{"lineNumber":30,"author":{"gitId":"EuniceSim142"},"content":"public final class FeedbackQuestionsLogic {"},{"lineNumber":31,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":32,"author":{"gitId":"hhdqirui"},"content":"    private static final Logger log \u003d Logger.getLogger();"},{"lineNumber":33,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":34,"author":{"gitId":"EuniceSim142"},"content":"    private static final FeedbackQuestionsLogic instance \u003d new FeedbackQuestionsLogic();"},{"lineNumber":35,"author":{"gitId":"EuniceSim142"},"content":"    private FeedbackQuestionsDb fqDb;"},{"lineNumber":36,"author":{"gitId":"cedricongjh"},"content":"    private CoursesLogic coursesLogic;"},{"lineNumber":37,"author":{"gitId":"cedricongjh"},"content":"    private UsersLogic usersLogic;"},{"lineNumber":38,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":39,"author":{"gitId":"EuniceSim142"},"content":"    private FeedbackQuestionsLogic() {"},{"lineNumber":40,"author":{"gitId":"EuniceSim142"},"content":"        // prevent initialization"},{"lineNumber":41,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":42,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":43,"author":{"gitId":"EuniceSim142"},"content":"    public static FeedbackQuestionsLogic inst() {"},{"lineNumber":44,"author":{"gitId":"EuniceSim142"},"content":"        return instance;"},{"lineNumber":45,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":46,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":47,"author":{"gitId":"cedricongjh"},"content":"    void initLogicDependencies(FeedbackQuestionsDb fqDb, CoursesLogic coursesLogic, UsersLogic usersLogic) {"},{"lineNumber":48,"author":{"gitId":"EuniceSim142"},"content":"        this.fqDb \u003d fqDb;"},{"lineNumber":49,"author":{"gitId":"cedricongjh"},"content":"        this.coursesLogic \u003d coursesLogic;"},{"lineNumber":50,"author":{"gitId":"cedricongjh"},"content":"        this.usersLogic \u003d usersLogic;"},{"lineNumber":51,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":52,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":53,"author":{"gitId":"hhdqirui"},"content":"    /**"},{"lineNumber":54,"author":{"gitId":"hhdqirui"},"content":"     * Creates a new feedback question."},{"lineNumber":55,"author":{"gitId":"hhdqirui"},"content":"     *"},{"lineNumber":56,"author":{"gitId":"hhdqirui"},"content":"     * @return the created question"},{"lineNumber":57,"author":{"gitId":"hhdqirui"},"content":"     * @throws InvalidParametersException if the question is invalid"},{"lineNumber":58,"author":{"gitId":"hhdqirui"},"content":"     */"},{"lineNumber":59,"author":{"gitId":"hhdqirui"},"content":"    public FeedbackQuestion createFeedbackQuestion(FeedbackQuestion feedbackQuestion) throws InvalidParametersException {"},{"lineNumber":60,"author":{"gitId":"hhdqirui"},"content":"        assert feedbackQuestion !\u003d null;"},{"lineNumber":61,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":62,"author":{"gitId":"hhdqirui"},"content":"        if (!feedbackQuestion.isValid()) {"},{"lineNumber":63,"author":{"gitId":"hhdqirui"},"content":"            throw new InvalidParametersException(feedbackQuestion.getInvalidityInfo());"},{"lineNumber":64,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":65,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":66,"author":{"gitId":"hhdqirui"},"content":"        List\u003cFeedbackQuestion\u003e questionsBefore \u003d getFeedbackQuestionsForSession(feedbackQuestion.getFeedbackSession());"},{"lineNumber":67,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":68,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion createdQuestion \u003d fqDb.createFeedbackQuestion(feedbackQuestion);"},{"lineNumber":69,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":70,"author":{"gitId":"hhdqirui"},"content":"        adjustQuestionNumbers(questionsBefore.size() + 1, createdQuestion.getQuestionNumber(), questionsBefore);"},{"lineNumber":71,"author":{"gitId":"hhdqirui"},"content":"        return createdQuestion;"},{"lineNumber":72,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":73,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":74,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":75,"author":{"gitId":"EuniceSim142"},"content":"     * Gets an feedback question by feedback question id."},{"lineNumber":76,"author":{"gitId":"EuniceSim142"},"content":"     * @param id of feedback question."},{"lineNumber":77,"author":{"gitId":"EuniceSim142"},"content":"     * @return the specified feedback question."},{"lineNumber":78,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":79,"author":{"gitId":"EuniceSim142"},"content":"    public FeedbackQuestion getFeedbackQuestion(UUID id) {"},{"lineNumber":80,"author":{"gitId":"EuniceSim142"},"content":"        return fqDb.getFeedbackQuestion(id);"},{"lineNumber":81,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":82,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":83,"author":{"gitId":"hhdqirui"},"content":"    /**"},{"lineNumber":84,"author":{"gitId":"hhdqirui"},"content":"     * Gets a {@link List} of every FeedbackQuestion in the given session."},{"lineNumber":85,"author":{"gitId":"hhdqirui"},"content":"     */"},{"lineNumber":86,"author":{"gitId":"hhdqirui"},"content":"    public List\u003cFeedbackQuestion\u003e getFeedbackQuestionsForSession(FeedbackSession feedbackSession) {"},{"lineNumber":87,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":88,"author":{"gitId":"hhdqirui"},"content":"        List\u003cFeedbackQuestion\u003e questions \u003d fqDb.getFeedbackQuestionsForSession(feedbackSession.getId());"},{"lineNumber":89,"author":{"gitId":"hhdqirui"},"content":"        questions.sort(null);"},{"lineNumber":90,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":91,"author":{"gitId":"hhdqirui"},"content":"        // check whether the question numbers are consistent"},{"lineNumber":92,"author":{"gitId":"hhdqirui"},"content":"        if (questions.size() \u003e 1 \u0026\u0026 !areQuestionNumbersConsistent(questions)) {"},{"lineNumber":93,"author":{"gitId":"hhdqirui"},"content":"            log.severe(feedbackSession.getCourse().getId() + \": \" + feedbackSession.getName()"},{"lineNumber":94,"author":{"gitId":"hhdqirui"},"content":"                    + \" has invalid question numbers\");"},{"lineNumber":95,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":96,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":97,"author":{"gitId":"hhdqirui"},"content":"        return questions;"},{"lineNumber":98,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":99,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":100,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":101,"author":{"gitId":"EuniceSim142"},"content":"     * Checks if there are any questions for the given session that instructors can view/submit."},{"lineNumber":102,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":103,"author":{"gitId":"EuniceSim142"},"content":"    public boolean hasFeedbackQuestionsForInstructors(List\u003cFeedbackQuestion\u003e fqs, boolean isCreator) {"},{"lineNumber":104,"author":{"gitId":"EuniceSim142"},"content":"        boolean hasQuestions \u003d hasFeedbackQuestionsForGiverType(fqs, FeedbackParticipantType.INSTRUCTORS);"},{"lineNumber":105,"author":{"gitId":"EuniceSim142"},"content":"        if (hasQuestions) {"},{"lineNumber":106,"author":{"gitId":"EuniceSim142"},"content":"            return true;"},{"lineNumber":107,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":108,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":109,"author":{"gitId":"EuniceSim142"},"content":"        if (isCreator) {"},{"lineNumber":110,"author":{"gitId":"EuniceSim142"},"content":"            hasQuestions \u003d hasFeedbackQuestionsForGiverType(fqs, FeedbackParticipantType.SELF);"},{"lineNumber":111,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":112,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":113,"author":{"gitId":"EuniceSim142"},"content":"        return hasQuestions;"},{"lineNumber":114,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":115,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":116,"author":{"gitId":"cedricongjh"},"content":"    /**"},{"lineNumber":117,"author":{"gitId":"cedricongjh"},"content":"     * Gets a {@code List} of all questions for the given session that instructors can view/submit."},{"lineNumber":118,"author":{"gitId":"cedricongjh"},"content":"     */"},{"lineNumber":119,"author":{"gitId":"cedricongjh"},"content":"    public List\u003cFeedbackQuestion\u003e getFeedbackQuestionsForInstructors("},{"lineNumber":120,"author":{"gitId":"cedricongjh"},"content":"            FeedbackSession feedbackSession, String userEmail) {"},{"lineNumber":121,"author":{"gitId":"cedricongjh"},"content":"        List\u003cFeedbackQuestion\u003e questions \u003d new ArrayList\u003c\u003e();"},{"lineNumber":122,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":123,"author":{"gitId":"cedricongjh"},"content":"        questions.addAll("},{"lineNumber":124,"author":{"gitId":"cedricongjh"},"content":"                fqDb.getFeedbackQuestionsForGiverType("},{"lineNumber":125,"author":{"gitId":"cedricongjh"},"content":"                    feedbackSession, FeedbackParticipantType.INSTRUCTORS));"},{"lineNumber":126,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":127,"author":{"gitId":"cedricongjh"},"content":"        if (feedbackSession.getCreatorEmail().equals(userEmail)) {"},{"lineNumber":128,"author":{"gitId":"cedricongjh"},"content":"            questions.addAll("},{"lineNumber":129,"author":{"gitId":"cedricongjh"},"content":"                    fqDb.getFeedbackQuestionsForGiverType("},{"lineNumber":130,"author":{"gitId":"cedricongjh"},"content":"                        feedbackSession, FeedbackParticipantType.SELF));"},{"lineNumber":131,"author":{"gitId":"cedricongjh"},"content":"        }"},{"lineNumber":132,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":133,"author":{"gitId":"cedricongjh"},"content":"        return questions;"},{"lineNumber":134,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":135,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":136,"author":{"gitId":"cedricongjh"},"content":"    /**"},{"lineNumber":137,"author":{"gitId":"cedricongjh"},"content":"     * Gets a {@code List} of all questions for the given session that students can view/submit."},{"lineNumber":138,"author":{"gitId":"cedricongjh"},"content":"     */"},{"lineNumber":139,"author":{"gitId":"cedricongjh"},"content":"    public List\u003cFeedbackQuestion\u003e getFeedbackQuestionsForStudents(FeedbackSession feedbackSession) {"},{"lineNumber":140,"author":{"gitId":"cedricongjh"},"content":"        List\u003cFeedbackQuestion\u003e questions \u003d new ArrayList\u003c\u003e();"},{"lineNumber":141,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":142,"author":{"gitId":"cedricongjh"},"content":"        questions.addAll(fqDb.getFeedbackQuestionsForGiverType(feedbackSession, FeedbackParticipantType.STUDENTS));"},{"lineNumber":143,"author":{"gitId":"cedricongjh"},"content":"        questions.addAll(fqDb.getFeedbackQuestionsForGiverType(feedbackSession, FeedbackParticipantType.SELF));"},{"lineNumber":144,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":145,"author":{"gitId":"cedricongjh"},"content":"        return questions;"},{"lineNumber":146,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":147,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":148,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":149,"author":{"gitId":"EuniceSim142"},"content":"     * Checks if there are any questions for the given session that students can view/submit."},{"lineNumber":150,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":151,"author":{"gitId":"EuniceSim142"},"content":"    public boolean hasFeedbackQuestionsForStudents(List\u003cFeedbackQuestion\u003e fqs) {"},{"lineNumber":152,"author":{"gitId":"EuniceSim142"},"content":"        return hasFeedbackQuestionsForGiverType(fqs, FeedbackParticipantType.STUDENTS)"},{"lineNumber":153,"author":{"gitId":"EuniceSim142"},"content":"                || hasFeedbackQuestionsForGiverType(fqs, FeedbackParticipantType.TEAMS);"},{"lineNumber":154,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":155,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":156,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":157,"author":{"gitId":"EuniceSim142"},"content":"     * Checks if there is any feedback questions in a session in a course for the given giver type."},{"lineNumber":158,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":159,"author":{"gitId":"EuniceSim142"},"content":"    public boolean hasFeedbackQuestionsForGiverType("},{"lineNumber":160,"author":{"gitId":"EuniceSim142"},"content":"            List\u003cFeedbackQuestion\u003e feedbackQuestions, FeedbackParticipantType giverType) {"},{"lineNumber":161,"author":{"gitId":"EuniceSim142"},"content":"        assert feedbackQuestions !\u003d null;"},{"lineNumber":162,"author":{"gitId":"EuniceSim142"},"content":"        assert giverType !\u003d null;"},{"lineNumber":163,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":164,"author":{"gitId":"EuniceSim142"},"content":"        for (FeedbackQuestion fq : feedbackQuestions) {"},{"lineNumber":165,"author":{"gitId":"EuniceSim142"},"content":"            if (fq.getGiverType() \u003d\u003d giverType) {"},{"lineNumber":166,"author":{"gitId":"EuniceSim142"},"content":"                return true;"},{"lineNumber":167,"author":{"gitId":"EuniceSim142"},"content":"            }"},{"lineNumber":168,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":169,"author":{"gitId":"EuniceSim142"},"content":"        return false;"},{"lineNumber":170,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":171,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":172,"author":{"gitId":"hhdqirui"},"content":"    // TODO can be removed once we are sure that question numbers will be consistent"},{"lineNumber":173,"author":{"gitId":"hhdqirui"},"content":"    private boolean areQuestionNumbersConsistent(List\u003cFeedbackQuestion\u003e questions) {"},{"lineNumber":174,"author":{"gitId":"hhdqirui"},"content":"        Set\u003cInteger\u003e questionNumbersInSession \u003d new HashSet\u003c\u003e();"},{"lineNumber":175,"author":{"gitId":"hhdqirui"},"content":"        for (FeedbackQuestion question : questions) {"},{"lineNumber":176,"author":{"gitId":"hhdqirui"},"content":"            if (!questionNumbersInSession.add(question.getQuestionNumber())) {"},{"lineNumber":177,"author":{"gitId":"hhdqirui"},"content":"                return false;"},{"lineNumber":178,"author":{"gitId":"hhdqirui"},"content":"            }"},{"lineNumber":179,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":180,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":181,"author":{"gitId":"hhdqirui"},"content":"        for (int i \u003d 1; i \u003c\u003d questions.size(); i++) {"},{"lineNumber":182,"author":{"gitId":"hhdqirui"},"content":"            if (!questionNumbersInSession.contains(i)) {"},{"lineNumber":183,"author":{"gitId":"hhdqirui"},"content":"                return false;"},{"lineNumber":184,"author":{"gitId":"hhdqirui"},"content":"            }"},{"lineNumber":185,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":186,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":187,"author":{"gitId":"hhdqirui"},"content":"        return true;"},{"lineNumber":188,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":189,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":190,"author":{"gitId":"hhdqirui"},"content":"    /**"},{"lineNumber":191,"author":{"gitId":"hhdqirui"},"content":"     * Adjust questions between the old and new number,"},{"lineNumber":192,"author":{"gitId":"hhdqirui"},"content":"     * if the new number is smaller, then shift up (increase qn#) all questions in between."},{"lineNumber":193,"author":{"gitId":"hhdqirui"},"content":"     * if the new number is bigger, then shift down(decrease qn#) all questions in between."},{"lineNumber":194,"author":{"gitId":"hhdqirui"},"content":"     */"},{"lineNumber":195,"author":{"gitId":"hhdqirui"},"content":"    private void adjustQuestionNumbers(int oldQuestionNumber, int newQuestionNumber, List\u003cFeedbackQuestion\u003e questions) {"},{"lineNumber":196,"author":{"gitId":"hhdqirui"},"content":"        if (oldQuestionNumber \u003e newQuestionNumber \u0026\u0026 oldQuestionNumber \u003e\u003d 1) {"},{"lineNumber":197,"author":{"gitId":"hhdqirui"},"content":"            for (int i \u003d oldQuestionNumber - 1; i \u003e\u003d newQuestionNumber; i--) {"},{"lineNumber":198,"author":{"gitId":"hhdqirui"},"content":"                FeedbackQuestion question \u003d questions.get(i - 1);"},{"lineNumber":199,"author":{"gitId":"hhdqirui"},"content":"                question.setQuestionNumber(question.getQuestionNumber() + 1);"},{"lineNumber":200,"author":{"gitId":"hhdqirui"},"content":"            }"},{"lineNumber":201,"author":{"gitId":"hhdqirui"},"content":"        } else if (oldQuestionNumber \u003c newQuestionNumber \u0026\u0026 oldQuestionNumber \u003c questions.size()) {"},{"lineNumber":202,"author":{"gitId":"hhdqirui"},"content":"            for (int i \u003d oldQuestionNumber + 1; i \u003c\u003d newQuestionNumber; i++) {"},{"lineNumber":203,"author":{"gitId":"hhdqirui"},"content":"                FeedbackQuestion question \u003d questions.get(i - 1);"},{"lineNumber":204,"author":{"gitId":"hhdqirui"},"content":"                question.setQuestionNumber(question.getQuestionNumber() - 1);"},{"lineNumber":205,"author":{"gitId":"hhdqirui"},"content":"            }"},{"lineNumber":206,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":207,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":208,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":209,"author":{"gitId":"cedricongjh"},"content":"    /**"},{"lineNumber":210,"author":{"gitId":"cedricongjh"},"content":"     * Populates fields that need dynamic generation in a question."},{"lineNumber":211,"author":{"gitId":"cedricongjh"},"content":"     *"},{"lineNumber":212,"author":{"gitId":"cedricongjh"},"content":"     * \u003cp\u003eCurrently, only MCQ/MSQ needs to generate choices dynamically.\u003c/p\u003e"},{"lineNumber":213,"author":{"gitId":"cedricongjh"},"content":"     *"},{"lineNumber":214,"author":{"gitId":"cedricongjh"},"content":"     * @param feedbackQuestion the question to populate"},{"lineNumber":215,"author":{"gitId":"cedricongjh"},"content":"     * @param courseId the ID of the course"},{"lineNumber":216,"author":{"gitId":"cedricongjh"},"content":"     * @param emailOfEntityDoingQuestion the email of the entity doing the question"},{"lineNumber":217,"author":{"gitId":"cedricongjh"},"content":"     * @param teamOfEntityDoingQuestion the team of the entity doing the question. If the entity is an instructor,"},{"lineNumber":218,"author":{"gitId":"cedricongjh"},"content":"     *                                  it can be {@code null}."},{"lineNumber":219,"author":{"gitId":"cedricongjh"},"content":"     */"},{"lineNumber":220,"author":{"gitId":"cedricongjh"},"content":"    public void populateFieldsToGenerateInQuestion(FeedbackQuestion feedbackQuestion,"},{"lineNumber":221,"author":{"gitId":"cedricongjh"},"content":"            String courseId, String emailOfEntityDoingQuestion, String teamOfEntityDoingQuestion) {"},{"lineNumber":222,"author":{"gitId":"cedricongjh"},"content":"        List\u003cString\u003e optionList;"},{"lineNumber":223,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":224,"author":{"gitId":"cedricongjh"},"content":"        FeedbackParticipantType generateOptionsFor;"},{"lineNumber":225,"author":{"gitId":"cedricongjh"},"content":"        FeedbackQuestionType questionType \u003d feedbackQuestion.getQuestionDetailsCopy().getQuestionType();"},{"lineNumber":226,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":227,"author":{"gitId":"cedricongjh"},"content":"        if (questionType \u003d\u003d FeedbackQuestionType.MCQ) {"},{"lineNumber":228,"author":{"gitId":"cedricongjh"},"content":"            FeedbackMcqQuestionDetails feedbackMcqQuestionDetails \u003d"},{"lineNumber":229,"author":{"gitId":"cedricongjh"},"content":"                    (FeedbackMcqQuestionDetails) feedbackQuestion.getQuestionDetailsCopy();"},{"lineNumber":230,"author":{"gitId":"cedricongjh"},"content":"            optionList \u003d feedbackMcqQuestionDetails.getMcqChoices();"},{"lineNumber":231,"author":{"gitId":"cedricongjh"},"content":"            generateOptionsFor \u003d feedbackMcqQuestionDetails.getGenerateOptionsFor();"},{"lineNumber":232,"author":{"gitId":"cedricongjh"},"content":"        } else if (questionType \u003d\u003d FeedbackQuestionType.MSQ) {"},{"lineNumber":233,"author":{"gitId":"cedricongjh"},"content":"            FeedbackMsqQuestionDetails feedbackMsqQuestionDetails \u003d"},{"lineNumber":234,"author":{"gitId":"cedricongjh"},"content":"                    (FeedbackMsqQuestionDetails) feedbackQuestion.getQuestionDetailsCopy();"},{"lineNumber":235,"author":{"gitId":"cedricongjh"},"content":"            optionList \u003d feedbackMsqQuestionDetails.getMsqChoices();"},{"lineNumber":236,"author":{"gitId":"cedricongjh"},"content":"            generateOptionsFor \u003d feedbackMsqQuestionDetails.getGenerateOptionsFor();"},{"lineNumber":237,"author":{"gitId":"cedricongjh"},"content":"        } else {"},{"lineNumber":238,"author":{"gitId":"cedricongjh"},"content":"            // other question types"},{"lineNumber":239,"author":{"gitId":"cedricongjh"},"content":"            return;"},{"lineNumber":240,"author":{"gitId":"cedricongjh"},"content":"        }"},{"lineNumber":241,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":242,"author":{"gitId":"cedricongjh"},"content":"        switch (generateOptionsFor) {"},{"lineNumber":243,"author":{"gitId":"cedricongjh"},"content":"        case NONE:"},{"lineNumber":244,"author":{"gitId":"cedricongjh"},"content":"            break;"},{"lineNumber":245,"author":{"gitId":"cedricongjh"},"content":"        case STUDENTS:"},{"lineNumber":246,"author":{"gitId":"cedricongjh"},"content":"        case STUDENTS_IN_SAME_SECTION:"},{"lineNumber":247,"author":{"gitId":"cedricongjh"},"content":"        case STUDENTS_EXCLUDING_SELF:"},{"lineNumber":248,"author":{"gitId":"cedricongjh"},"content":"            List\u003cStudent\u003e studentList;"},{"lineNumber":249,"author":{"gitId":"cedricongjh"},"content":"            if (generateOptionsFor \u003d\u003d FeedbackParticipantType.STUDENTS_IN_SAME_SECTION) {"},{"lineNumber":250,"author":{"gitId":"cedricongjh"},"content":"                Student student \u003d"},{"lineNumber":251,"author":{"gitId":"cedricongjh"},"content":"                        usersLogic.getStudentForEmail(courseId, emailOfEntityDoingQuestion);"},{"lineNumber":252,"author":{"gitId":"cedricongjh"},"content":"                studentList \u003d usersLogic.getStudentsForSection(student.getTeam().getSection(), courseId);"},{"lineNumber":253,"author":{"gitId":"cedricongjh"},"content":"            } else {"},{"lineNumber":254,"author":{"gitId":"cedricongjh"},"content":"                studentList \u003d usersLogic.getStudentsForCourse(courseId);"},{"lineNumber":255,"author":{"gitId":"cedricongjh"},"content":"            }"},{"lineNumber":256,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":257,"author":{"gitId":"cedricongjh"},"content":"            if (generateOptionsFor \u003d\u003d FeedbackParticipantType.STUDENTS_EXCLUDING_SELF) {"},{"lineNumber":258,"author":{"gitId":"cedricongjh"},"content":"                studentList.removeIf(studentInList -\u003e studentInList.getEmail().equals(emailOfEntityDoingQuestion));"},{"lineNumber":259,"author":{"gitId":"cedricongjh"},"content":"            }"},{"lineNumber":260,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":261,"author":{"gitId":"cedricongjh"},"content":"            for (Student student : studentList) {"},{"lineNumber":262,"author":{"gitId":"cedricongjh"},"content":"                optionList.add(student.getName() + \" (\" + student.getTeam() + \")\");"},{"lineNumber":263,"author":{"gitId":"cedricongjh"},"content":"            }"},{"lineNumber":264,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":265,"author":{"gitId":"cedricongjh"},"content":"            optionList.sort(null);"},{"lineNumber":266,"author":{"gitId":"cedricongjh"},"content":"            break;"},{"lineNumber":267,"author":{"gitId":"cedricongjh"},"content":"        case TEAMS:"},{"lineNumber":268,"author":{"gitId":"cedricongjh"},"content":"        case TEAMS_IN_SAME_SECTION:"},{"lineNumber":269,"author":{"gitId":"cedricongjh"},"content":"        case TEAMS_EXCLUDING_SELF:"},{"lineNumber":270,"author":{"gitId":"cedricongjh"},"content":"            List\u003cString\u003e teams;"},{"lineNumber":271,"author":{"gitId":"cedricongjh"},"content":"            if (generateOptionsFor \u003d\u003d FeedbackParticipantType.TEAMS_IN_SAME_SECTION) {"},{"lineNumber":272,"author":{"gitId":"cedricongjh"},"content":"                Student student \u003d"},{"lineNumber":273,"author":{"gitId":"cedricongjh"},"content":"                        usersLogic.getStudentForEmail(courseId, emailOfEntityDoingQuestion);"},{"lineNumber":274,"author":{"gitId":"cedricongjh"},"content":"                teams \u003d coursesLogic.getTeamsForSection(student.getTeam().getSection())"},{"lineNumber":275,"author":{"gitId":"cedricongjh"},"content":"                                    .stream()"},{"lineNumber":276,"author":{"gitId":"cedricongjh"},"content":"                                    .map(team -\u003e { return team.getName(); })"},{"lineNumber":277,"author":{"gitId":"cedricongjh"},"content":"                                    .collect(Collectors.toList());"},{"lineNumber":278,"author":{"gitId":"cedricongjh"},"content":"            } else {"},{"lineNumber":279,"author":{"gitId":"cedricongjh"},"content":"                teams \u003d coursesLogic.getTeamsForCourse(courseId)"},{"lineNumber":280,"author":{"gitId":"cedricongjh"},"content":"                                    .stream()"},{"lineNumber":281,"author":{"gitId":"cedricongjh"},"content":"                                    .map(team -\u003e { return team.getName(); })"},{"lineNumber":282,"author":{"gitId":"cedricongjh"},"content":"                                    .collect(Collectors.toList());"},{"lineNumber":283,"author":{"gitId":"cedricongjh"},"content":"            }"},{"lineNumber":284,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":285,"author":{"gitId":"cedricongjh"},"content":"            if (generateOptionsFor \u003d\u003d FeedbackParticipantType.TEAMS_EXCLUDING_SELF) {"},{"lineNumber":286,"author":{"gitId":"cedricongjh"},"content":"                teams.removeIf(team -\u003e team.equals(teamOfEntityDoingQuestion));"},{"lineNumber":287,"author":{"gitId":"cedricongjh"},"content":"            }"},{"lineNumber":288,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":289,"author":{"gitId":"cedricongjh"},"content":"            for (String team : teams) {"},{"lineNumber":290,"author":{"gitId":"cedricongjh"},"content":"                optionList.add(team);"},{"lineNumber":291,"author":{"gitId":"cedricongjh"},"content":"            }"},{"lineNumber":292,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":293,"author":{"gitId":"cedricongjh"},"content":"            optionList.sort(null);"},{"lineNumber":294,"author":{"gitId":"cedricongjh"},"content":"            break;"},{"lineNumber":295,"author":{"gitId":"cedricongjh"},"content":"        case OWN_TEAM_MEMBERS_INCLUDING_SELF:"},{"lineNumber":296,"author":{"gitId":"cedricongjh"},"content":"        case OWN_TEAM_MEMBERS:"},{"lineNumber":297,"author":{"gitId":"cedricongjh"},"content":"            if (teamOfEntityDoingQuestion !\u003d null) {"},{"lineNumber":298,"author":{"gitId":"cedricongjh"},"content":"                List\u003cStudent\u003e teamMembers \u003d usersLogic.getStudentsForTeam(teamOfEntityDoingQuestion,"},{"lineNumber":299,"author":{"gitId":"cedricongjh"},"content":"                        courseId);"},{"lineNumber":300,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":301,"author":{"gitId":"cedricongjh"},"content":"                if (generateOptionsFor \u003d\u003d FeedbackParticipantType.OWN_TEAM_MEMBERS) {"},{"lineNumber":302,"author":{"gitId":"cedricongjh"},"content":"                    teamMembers.removeIf(teamMember -\u003e teamMember.getEmail().equals(emailOfEntityDoingQuestion));"},{"lineNumber":303,"author":{"gitId":"cedricongjh"},"content":"                }"},{"lineNumber":304,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":305,"author":{"gitId":"cedricongjh"},"content":"                teamMembers.forEach(teamMember -\u003e optionList.add(teamMember.getName()));"},{"lineNumber":306,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":307,"author":{"gitId":"cedricongjh"},"content":"                optionList.sort(null);"},{"lineNumber":308,"author":{"gitId":"cedricongjh"},"content":"            }"},{"lineNumber":309,"author":{"gitId":"cedricongjh"},"content":"            break;"},{"lineNumber":310,"author":{"gitId":"cedricongjh"},"content":"        case INSTRUCTORS:"},{"lineNumber":311,"author":{"gitId":"cedricongjh"},"content":"            List\u003cInstructor\u003e instructorList \u003d"},{"lineNumber":312,"author":{"gitId":"cedricongjh"},"content":"                    usersLogic.getInstructorsForCourse(courseId);"},{"lineNumber":313,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":314,"author":{"gitId":"cedricongjh"},"content":"            for (Instructor instructor : instructorList) {"},{"lineNumber":315,"author":{"gitId":"cedricongjh"},"content":"                optionList.add(instructor.getName());"},{"lineNumber":316,"author":{"gitId":"cedricongjh"},"content":"            }"},{"lineNumber":317,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":318,"author":{"gitId":"cedricongjh"},"content":"            optionList.sort(null);"},{"lineNumber":319,"author":{"gitId":"cedricongjh"},"content":"            break;"},{"lineNumber":320,"author":{"gitId":"cedricongjh"},"content":"        default:"},{"lineNumber":321,"author":{"gitId":"cedricongjh"},"content":"            assert false : \"Trying to generate options for neither students, teams nor instructors\";"},{"lineNumber":322,"author":{"gitId":"cedricongjh"},"content":"            break;"},{"lineNumber":323,"author":{"gitId":"cedricongjh"},"content":"        }"},{"lineNumber":324,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":325,"author":{"gitId":"cedricongjh"},"content":"        if (questionType \u003d\u003d FeedbackQuestionType.MCQ) {"},{"lineNumber":326,"author":{"gitId":"cedricongjh"},"content":"            FeedbackMcqQuestionDetails feedbackMcqQuestionDetails \u003d"},{"lineNumber":327,"author":{"gitId":"cedricongjh"},"content":"                    (FeedbackMcqQuestionDetails) feedbackQuestion.getQuestionDetailsCopy();"},{"lineNumber":328,"author":{"gitId":"cedricongjh"},"content":"            feedbackMcqQuestionDetails.setMcqChoices(optionList);"},{"lineNumber":329,"author":{"gitId":"cedricongjh"},"content":"            ((FeedbackMcqQuestion) feedbackQuestion).setFeedBackQuestionDetails(feedbackMcqQuestionDetails);"},{"lineNumber":330,"author":{"gitId":"cedricongjh"},"content":"        } else if (questionType \u003d\u003d FeedbackQuestionType.MSQ) {"},{"lineNumber":331,"author":{"gitId":"cedricongjh"},"content":"            FeedbackMsqQuestionDetails feedbackMsqQuestionDetails \u003d"},{"lineNumber":332,"author":{"gitId":"cedricongjh"},"content":"                    (FeedbackMsqQuestionDetails) feedbackQuestion.getQuestionDetailsCopy();"},{"lineNumber":333,"author":{"gitId":"cedricongjh"},"content":"            feedbackMsqQuestionDetails.setMsqChoices(optionList);"},{"lineNumber":334,"author":{"gitId":"cedricongjh"},"content":"            ((FeedbackMsqQuestion) feedbackQuestion).setFeedBackQuestionDetails(feedbackMsqQuestionDetails);"},{"lineNumber":335,"author":{"gitId":"cedricongjh"},"content":"        }"},{"lineNumber":336,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":337,"author":{"gitId":"EuniceSim142"},"content":"}"}],"authorContributionMap":{"cedricongjh":175,"EuniceSim142":80,"hhdqirui":82}},{"path":"src/main/java/teammates/sqllogic/core/FeedbackResponseCommentsLogic.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"cedricongjh"},"content":"package teammates.sqllogic.core;"},{"lineNumber":2,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":3,"author":{"gitId":"cedricongjh"},"content":"import java.util.UUID;"},{"lineNumber":4,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":5,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlapi.FeedbackResponseCommentsDb;"},{"lineNumber":6,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.FeedbackResponseComment;"},{"lineNumber":7,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":8,"author":{"gitId":"cedricongjh"},"content":"/**"},{"lineNumber":9,"author":{"gitId":"cedricongjh"},"content":" * Handles operations related to feedback response comments."},{"lineNumber":10,"author":{"gitId":"cedricongjh"},"content":" *"},{"lineNumber":11,"author":{"gitId":"cedricongjh"},"content":" * @see FeedbackResponseComment"},{"lineNumber":12,"author":{"gitId":"cedricongjh"},"content":" * @see FeedbackResponseCommentsDb"},{"lineNumber":13,"author":{"gitId":"cedricongjh"},"content":" */"},{"lineNumber":14,"author":{"gitId":"cedricongjh"},"content":"public final class FeedbackResponseCommentsLogic {"},{"lineNumber":15,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":16,"author":{"gitId":"cedricongjh"},"content":"    private static final FeedbackResponseCommentsLogic instance \u003d new FeedbackResponseCommentsLogic();"},{"lineNumber":17,"author":{"gitId":"cedricongjh"},"content":"    private FeedbackResponseCommentsDb frcDb;"},{"lineNumber":18,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":19,"author":{"gitId":"cedricongjh"},"content":"    private FeedbackResponseCommentsLogic() {"},{"lineNumber":20,"author":{"gitId":"cedricongjh"},"content":"        // prevent initialization"},{"lineNumber":21,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":22,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":23,"author":{"gitId":"cedricongjh"},"content":"    public static FeedbackResponseCommentsLogic inst() {"},{"lineNumber":24,"author":{"gitId":"cedricongjh"},"content":"        return instance;"},{"lineNumber":25,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":26,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":27,"author":{"gitId":"cedricongjh"},"content":"    /**"},{"lineNumber":28,"author":{"gitId":"cedricongjh"},"content":"     * Initialize dependencies for {@code FeedbackResponseCommentsLogic}."},{"lineNumber":29,"author":{"gitId":"cedricongjh"},"content":"     */"},{"lineNumber":30,"author":{"gitId":"cedricongjh"},"content":"    void initLogicDependencies(FeedbackResponseCommentsDb frcDb) {"},{"lineNumber":31,"author":{"gitId":"cedricongjh"},"content":"        this.frcDb \u003d frcDb;"},{"lineNumber":32,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":33,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":34,"author":{"gitId":"cedricongjh"},"content":"    /**"},{"lineNumber":35,"author":{"gitId":"cedricongjh"},"content":"     * Gets an feedback response comment by feedback response comment id."},{"lineNumber":36,"author":{"gitId":"cedricongjh"},"content":"     * @param id of feedback response comment."},{"lineNumber":37,"author":{"gitId":"cedricongjh"},"content":"     * @return the specified feedback response comment."},{"lineNumber":38,"author":{"gitId":"cedricongjh"},"content":"     */"},{"lineNumber":39,"author":{"gitId":"cedricongjh"},"content":"    public FeedbackResponseComment getFeedbackQuestion(UUID id) {"},{"lineNumber":40,"author":{"gitId":"cedricongjh"},"content":"        return frcDb.getFeedbackResponseComment(id);"},{"lineNumber":41,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":42,"author":{"gitId":"cedricongjh"},"content":"}"}],"authorContributionMap":{"cedricongjh":42}},{"path":"src/main/java/teammates/sqllogic/core/FeedbackResponsesLogic.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"EuniceSim142"},"content":"package teammates.sqllogic.core;"},{"lineNumber":2,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":3,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.datatransfer.FeedbackParticipantType;"},{"lineNumber":4,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlapi.FeedbackResponsesDb;"},{"lineNumber":5,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.FeedbackQuestion;"},{"lineNumber":6,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":7,"author":{"gitId":"EuniceSim142"},"content":"/**"},{"lineNumber":8,"author":{"gitId":"EuniceSim142"},"content":" * Handles operations related to feedback sessions."},{"lineNumber":9,"author":{"gitId":"EuniceSim142"},"content":" *"},{"lineNumber":10,"author":{"gitId":"EuniceSim142"},"content":" * @see FeedbackResponse"},{"lineNumber":11,"author":{"gitId":"EuniceSim142"},"content":" * @see FeedbackResponsesDb"},{"lineNumber":12,"author":{"gitId":"EuniceSim142"},"content":" */"},{"lineNumber":13,"author":{"gitId":"EuniceSim142"},"content":"public final class FeedbackResponsesLogic {"},{"lineNumber":14,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":15,"author":{"gitId":"EuniceSim142"},"content":"    private static final FeedbackResponsesLogic instance \u003d new FeedbackResponsesLogic();"},{"lineNumber":16,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":17,"author":{"gitId":"EuniceSim142"},"content":"    // private FeedbackResponsesDb frDb;"},{"lineNumber":18,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":19,"author":{"gitId":"EuniceSim142"},"content":"    private FeedbackResponsesLogic() {"},{"lineNumber":20,"author":{"gitId":"EuniceSim142"},"content":"        // prevent initialization"},{"lineNumber":21,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":22,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":23,"author":{"gitId":"EuniceSim142"},"content":"    public static FeedbackResponsesLogic inst() {"},{"lineNumber":24,"author":{"gitId":"EuniceSim142"},"content":"        return instance;"},{"lineNumber":25,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":26,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":27,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":28,"author":{"gitId":"EuniceSim142"},"content":"     * Initialize dependencies for {@code FeedbackResponsesLogic}."},{"lineNumber":29,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":30,"author":{"gitId":"EuniceSim142"},"content":"    void initLogicDependencies(FeedbackResponsesDb frDb) {"},{"lineNumber":31,"author":{"gitId":"EuniceSim142"},"content":"        // this.frDb \u003d frDb;"},{"lineNumber":32,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":33,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":34,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":35,"author":{"gitId":"EuniceSim142"},"content":"     * Returns true if the responses of the question are visible to students."},{"lineNumber":36,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":37,"author":{"gitId":"EuniceSim142"},"content":"    public boolean isResponseOfFeedbackQuestionVisibleToStudent(FeedbackQuestion question) {"},{"lineNumber":38,"author":{"gitId":"EuniceSim142"},"content":"        if (question.isResponseVisibleTo(FeedbackParticipantType.STUDENTS)) {"},{"lineNumber":39,"author":{"gitId":"EuniceSim142"},"content":"            return true;"},{"lineNumber":40,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":41,"author":{"gitId":"EuniceSim142"},"content":"        boolean isStudentRecipientType \u003d"},{"lineNumber":42,"author":{"gitId":"EuniceSim142"},"content":"                   question.getRecipientType().equals(FeedbackParticipantType.STUDENTS)"},{"lineNumber":43,"author":{"gitId":"EuniceSim142"},"content":"                || question.getRecipientType().equals(FeedbackParticipantType.STUDENTS_EXCLUDING_SELF)"},{"lineNumber":44,"author":{"gitId":"EuniceSim142"},"content":"                || question.getRecipientType().equals(FeedbackParticipantType.STUDENTS_IN_SAME_SECTION)"},{"lineNumber":45,"author":{"gitId":"EuniceSim142"},"content":"                || question.getRecipientType().equals(FeedbackParticipantType.OWN_TEAM_MEMBERS)"},{"lineNumber":46,"author":{"gitId":"EuniceSim142"},"content":"                || question.getRecipientType().equals(FeedbackParticipantType.OWN_TEAM_MEMBERS_INCLUDING_SELF)"},{"lineNumber":47,"author":{"gitId":"EuniceSim142"},"content":"                || question.getRecipientType().equals(FeedbackParticipantType.GIVER)"},{"lineNumber":48,"author":{"gitId":"EuniceSim142"},"content":"                   \u0026\u0026 question.getGiverType().equals(FeedbackParticipantType.STUDENTS);"},{"lineNumber":49,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":50,"author":{"gitId":"EuniceSim142"},"content":"        if ((isStudentRecipientType || question.getRecipientType().isTeam())"},{"lineNumber":51,"author":{"gitId":"EuniceSim142"},"content":"                \u0026\u0026 question.isResponseVisibleTo(FeedbackParticipantType.RECEIVER)) {"},{"lineNumber":52,"author":{"gitId":"EuniceSim142"},"content":"            return true;"},{"lineNumber":53,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":54,"author":{"gitId":"EuniceSim142"},"content":"        if (question.getGiverType() \u003d\u003d FeedbackParticipantType.TEAMS"},{"lineNumber":55,"author":{"gitId":"EuniceSim142"},"content":"                || question.isResponseVisibleTo(FeedbackParticipantType.OWN_TEAM_MEMBERS)) {"},{"lineNumber":56,"author":{"gitId":"EuniceSim142"},"content":"            return true;"},{"lineNumber":57,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":58,"author":{"gitId":"EuniceSim142"},"content":"        return question.isResponseVisibleTo(FeedbackParticipantType.RECEIVER_TEAM_MEMBERS);"},{"lineNumber":59,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":60,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":61,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":62,"author":{"gitId":"EuniceSim142"},"content":"     * Returns true if the responses of the question are visible to instructors."},{"lineNumber":63,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":64,"author":{"gitId":"EuniceSim142"},"content":"    public boolean isResponseOfFeedbackQuestionVisibleToInstructor(FeedbackQuestion question) {"},{"lineNumber":65,"author":{"gitId":"EuniceSim142"},"content":"        return question.isResponseVisibleTo(FeedbackParticipantType.INSTRUCTORS);"},{"lineNumber":66,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":67,"author":{"gitId":"EuniceSim142"},"content":"}"}],"authorContributionMap":{"EuniceSim142":67}},{"path":"src/main/java/teammates/sqllogic/core/FeedbackSessionsLogic.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.sqllogic.core;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"EuniceSim142"},"content":"import java.time.Instant;"},{"lineNumber":4,"author":{"gitId":"EuniceSim142"},"content":"import java.util.ArrayList;"},{"lineNumber":5,"author":{"gitId":"EuniceSim142"},"content":"import java.util.List;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import java.util.UUID;"},{"lineNumber":7,"author":{"gitId":"EuniceSim142"},"content":"import java.util.stream.Collectors;"},{"lineNumber":8,"author":{"gitId":"-"},"content":""},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import teammates.storage.sqlapi.FeedbackSessionsDb;"},{"lineNumber":13,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.FeedbackQuestion;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.FeedbackSession;"},{"lineNumber":15,"author":{"gitId":"-"},"content":""},{"lineNumber":16,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":17,"author":{"gitId":"-"},"content":" * Handles operations related to feedback sessions."},{"lineNumber":18,"author":{"gitId":"-"},"content":" *"},{"lineNumber":19,"author":{"gitId":"-"},"content":" * @see FeedbackSession"},{"lineNumber":20,"author":{"gitId":"-"},"content":" * @see FeedbackSessionsDb"},{"lineNumber":21,"author":{"gitId":"-"},"content":" */"},{"lineNumber":22,"author":{"gitId":"-"},"content":"public final class FeedbackSessionsLogic {"},{"lineNumber":23,"author":{"gitId":"-"},"content":""},{"lineNumber":24,"author":{"gitId":"-"},"content":"    private static final String ERROR_NON_EXISTENT_FS_STRING_FORMAT \u003d \"Trying to %s a non-existent feedback session: \";"},{"lineNumber":25,"author":{"gitId":"-"},"content":"    private static final String ERROR_NON_EXISTENT_FS_UPDATE \u003d String.format(ERROR_NON_EXISTENT_FS_STRING_FORMAT, \"update\");"},{"lineNumber":26,"author":{"gitId":"-"},"content":"    private static final String ERROR_FS_ALREADY_PUBLISH \u003d \"Error publishing feedback session: \""},{"lineNumber":27,"author":{"gitId":"-"},"content":"            + \"Session has already been published.\";"},{"lineNumber":28,"author":{"gitId":"-"},"content":""},{"lineNumber":29,"author":{"gitId":"-"},"content":"    private static final FeedbackSessionsLogic instance \u003d new FeedbackSessionsLogic();"},{"lineNumber":30,"author":{"gitId":"-"},"content":""},{"lineNumber":31,"author":{"gitId":"-"},"content":"    private FeedbackSessionsDb fsDb;"},{"lineNumber":32,"author":{"gitId":"EuniceSim142"},"content":"    private FeedbackQuestionsLogic fqLogic;"},{"lineNumber":33,"author":{"gitId":"EuniceSim142"},"content":"    private FeedbackResponsesLogic frLogic;"},{"lineNumber":34,"author":{"gitId":"-"},"content":""},{"lineNumber":35,"author":{"gitId":"-"},"content":"    private FeedbackSessionsLogic() {"},{"lineNumber":36,"author":{"gitId":"-"},"content":"        // prevent initialization"},{"lineNumber":37,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":38,"author":{"gitId":"-"},"content":""},{"lineNumber":39,"author":{"gitId":"-"},"content":"    public static FeedbackSessionsLogic inst() {"},{"lineNumber":40,"author":{"gitId":"-"},"content":"        return instance;"},{"lineNumber":41,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":42,"author":{"gitId":"-"},"content":""},{"lineNumber":43,"author":{"gitId":"EuniceSim142"},"content":"    void initLogicDependencies(FeedbackSessionsDb fsDb, CoursesLogic coursesLogic,"},{"lineNumber":44,"author":{"gitId":"EuniceSim142"},"content":"            FeedbackResponsesLogic frLogic, FeedbackQuestionsLogic fqLogic) {"},{"lineNumber":45,"author":{"gitId":"-"},"content":"        this.fsDb \u003d fsDb;"},{"lineNumber":46,"author":{"gitId":"EuniceSim142"},"content":"        this.frLogic \u003d frLogic;"},{"lineNumber":47,"author":{"gitId":"EuniceSim142"},"content":"        this.fqLogic \u003d fqLogic;"},{"lineNumber":48,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":49,"author":{"gitId":"-"},"content":""},{"lineNumber":50,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":51,"author":{"gitId":"-"},"content":"     * Gets a feedback session."},{"lineNumber":52,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":53,"author":{"gitId":"-"},"content":"     * @return null if not found."},{"lineNumber":54,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":55,"author":{"gitId":"-"},"content":"    public FeedbackSession getFeedbackSession(UUID id) {"},{"lineNumber":56,"author":{"gitId":"-"},"content":"        assert id !\u003d null;"},{"lineNumber":57,"author":{"gitId":"-"},"content":"        return fsDb.getFeedbackSession(id);"},{"lineNumber":58,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":59,"author":{"gitId":"-"},"content":""},{"lineNumber":60,"author":{"gitId":"hhdqirui"},"content":"    /**"},{"lineNumber":61,"author":{"gitId":"hhdqirui"},"content":"     * Gets a feedback session for {@code feedbackSessionName} and {@code courseId}."},{"lineNumber":62,"author":{"gitId":"hhdqirui"},"content":"     *"},{"lineNumber":63,"author":{"gitId":"hhdqirui"},"content":"     * @return null if not found."},{"lineNumber":64,"author":{"gitId":"hhdqirui"},"content":"     */"},{"lineNumber":65,"author":{"gitId":"hhdqirui"},"content":"    public FeedbackSession getFeedbackSession(String feedbackSessionName, String courseId) {"},{"lineNumber":66,"author":{"gitId":"hhdqirui"},"content":"        assert feedbackSessionName !\u003d null;"},{"lineNumber":67,"author":{"gitId":"hhdqirui"},"content":"        assert courseId !\u003d null;"},{"lineNumber":68,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":69,"author":{"gitId":"hhdqirui"},"content":"        return fsDb.getFeedbackSession(feedbackSessionName, courseId);"},{"lineNumber":70,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":71,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":72,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":73,"author":{"gitId":"EuniceSim142"},"content":"     * Gets all feedback sessions of a course, except those that are soft-deleted."},{"lineNumber":74,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":75,"author":{"gitId":"EuniceSim142"},"content":"    public List\u003cFeedbackSession\u003e getFeedbackSessionsForCourse(String courseId) {"},{"lineNumber":76,"author":{"gitId":"EuniceSim142"},"content":"        return fsDb.getFeedbackSessionEntitiesForCourse(courseId).stream()"},{"lineNumber":77,"author":{"gitId":"EuniceSim142"},"content":"                .filter(fs -\u003e fs.getDeletedAt() \u003d\u003d null)"},{"lineNumber":78,"author":{"gitId":"EuniceSim142"},"content":"                .collect(Collectors.toList());"},{"lineNumber":79,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":80,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":81,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":82,"author":{"gitId":"EuniceSim142"},"content":"     * Gets all feedback sessions of a course started after time, except those that are soft-deleted."},{"lineNumber":83,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":84,"author":{"gitId":"EuniceSim142"},"content":"    public List\u003cFeedbackSession\u003e getFeedbackSessionsForCourseStartingAfter(String courseId, Instant after) {"},{"lineNumber":85,"author":{"gitId":"EuniceSim142"},"content":"        return fsDb.getFeedbackSessionEntitiesForCourseStartingAfter(courseId, after).stream()"},{"lineNumber":86,"author":{"gitId":"EuniceSim142"},"content":"                .filter(session -\u003e session.getDeletedAt() \u003d\u003d null)"},{"lineNumber":87,"author":{"gitId":"EuniceSim142"},"content":"                .collect(Collectors.toList());"},{"lineNumber":88,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":89,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":90,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":91,"author":{"gitId":"-"},"content":"     * Creates a feedback session."},{"lineNumber":92,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":93,"author":{"gitId":"-"},"content":"     * @return created feedback session"},{"lineNumber":94,"author":{"gitId":"-"},"content":"     * @throws InvalidParametersException if the session is not valid"},{"lineNumber":95,"author":{"gitId":"-"},"content":"     * @throws EntityAlreadyExistsException if the session already exist"},{"lineNumber":96,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":97,"author":{"gitId":"-"},"content":"    public FeedbackSession createFeedbackSession(FeedbackSession session)"},{"lineNumber":98,"author":{"gitId":"-"},"content":"            throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":99,"author":{"gitId":"-"},"content":"        assert session !\u003d null;"},{"lineNumber":100,"author":{"gitId":"-"},"content":"        return fsDb.createFeedbackSession(session);"},{"lineNumber":101,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":102,"author":{"gitId":"-"},"content":""},{"lineNumber":103,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":104,"author":{"gitId":"-"},"content":"     * Publishes a feedback session."},{"lineNumber":105,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":106,"author":{"gitId":"-"},"content":"     * @return the published feedback session"},{"lineNumber":107,"author":{"gitId":"-"},"content":"     * @throws InvalidParametersException if session is already published"},{"lineNumber":108,"author":{"gitId":"-"},"content":"     * @throws EntityDoesNotExistException if the feedback session cannot be found"},{"lineNumber":109,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":110,"author":{"gitId":"-"},"content":"    public FeedbackSession publishFeedbackSession(String feedbackSessionName, String courseId)"},{"lineNumber":111,"author":{"gitId":"-"},"content":"            throws EntityDoesNotExistException, InvalidParametersException {"},{"lineNumber":112,"author":{"gitId":"-"},"content":""},{"lineNumber":113,"author":{"gitId":"-"},"content":"        FeedbackSession sessionToPublish \u003d getFeedbackSession(feedbackSessionName, courseId);"},{"lineNumber":114,"author":{"gitId":"-"},"content":""},{"lineNumber":115,"author":{"gitId":"-"},"content":"        if (sessionToPublish \u003d\u003d null) {"},{"lineNumber":116,"author":{"gitId":"-"},"content":"            throw new EntityDoesNotExistException(ERROR_NON_EXISTENT_FS_UPDATE + courseId + \"/\" + feedbackSessionName);"},{"lineNumber":117,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":118,"author":{"gitId":"-"},"content":"        if (sessionToPublish.isPublished()) {"},{"lineNumber":119,"author":{"gitId":"-"},"content":"            throw new InvalidParametersException(ERROR_FS_ALREADY_PUBLISH);"},{"lineNumber":120,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":121,"author":{"gitId":"-"},"content":""},{"lineNumber":122,"author":{"gitId":"-"},"content":"        sessionToPublish.setResultsVisibleFromTime(Instant.now());"},{"lineNumber":123,"author":{"gitId":"-"},"content":""},{"lineNumber":124,"author":{"gitId":"-"},"content":"        return sessionToPublish;"},{"lineNumber":125,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":126,"author":{"gitId":"-"},"content":""},{"lineNumber":127,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":128,"author":{"gitId":"EuniceSim142"},"content":"     * Returns true if there are any questions for the specified user type (students/instructors) to answer."},{"lineNumber":129,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":130,"author":{"gitId":"EuniceSim142"},"content":"    public boolean isFeedbackSessionForUserTypeToAnswer(FeedbackSession session, boolean isInstructor) {"},{"lineNumber":131,"author":{"gitId":"EuniceSim142"},"content":"        if (!session.isVisible()) {"},{"lineNumber":132,"author":{"gitId":"EuniceSim142"},"content":"            return false;"},{"lineNumber":133,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":134,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":135,"author":{"gitId":"EuniceSim142"},"content":"        return isInstructor"},{"lineNumber":136,"author":{"gitId":"EuniceSim142"},"content":"                ? fqLogic.hasFeedbackQuestionsForInstructors(session.getFeedbackQuestions(), false)"},{"lineNumber":137,"author":{"gitId":"EuniceSim142"},"content":"                : fqLogic.hasFeedbackQuestionsForStudents(session.getFeedbackQuestions());"},{"lineNumber":138,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":139,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":140,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":141,"author":{"gitId":"EuniceSim142"},"content":"     * Returns true if the feedback session is viewable by the given user type (students/instructors)."},{"lineNumber":142,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":143,"author":{"gitId":"EuniceSim142"},"content":"    public boolean isFeedbackSessionViewableToUserType(FeedbackSession session, boolean isInstructor) {"},{"lineNumber":144,"author":{"gitId":"EuniceSim142"},"content":"        // Allow user to view the feedback session if there are questions for them"},{"lineNumber":145,"author":{"gitId":"EuniceSim142"},"content":"        if (isFeedbackSessionForUserTypeToAnswer(session, isInstructor)) {"},{"lineNumber":146,"author":{"gitId":"EuniceSim142"},"content":"            return true;"},{"lineNumber":147,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":148,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":149,"author":{"gitId":"EuniceSim142"},"content":"        // Allow user to view the feedback session if there are any question whose responses are visible to the user"},{"lineNumber":150,"author":{"gitId":"EuniceSim142"},"content":"        List\u003cFeedbackQuestion\u003e questionsWithVisibleResponses \u003d new ArrayList\u003c\u003e();"},{"lineNumber":151,"author":{"gitId":"EuniceSim142"},"content":"        List\u003cFeedbackQuestion\u003e questionsForUser \u003d session.getFeedbackQuestions();"},{"lineNumber":152,"author":{"gitId":"EuniceSim142"},"content":"        for (FeedbackQuestion question : questionsForUser) {"},{"lineNumber":153,"author":{"gitId":"EuniceSim142"},"content":"            if (!isInstructor \u0026\u0026 frLogic.isResponseOfFeedbackQuestionVisibleToStudent(question)"},{"lineNumber":154,"author":{"gitId":"EuniceSim142"},"content":"                    || isInstructor \u0026\u0026 frLogic.isResponseOfFeedbackQuestionVisibleToInstructor(question)) {"},{"lineNumber":155,"author":{"gitId":"EuniceSim142"},"content":"                // We only need one question with visible responses for the entire session to be visible"},{"lineNumber":156,"author":{"gitId":"EuniceSim142"},"content":"                questionsWithVisibleResponses.add(question);"},{"lineNumber":157,"author":{"gitId":"EuniceSim142"},"content":"                break;"},{"lineNumber":158,"author":{"gitId":"EuniceSim142"},"content":"            }"},{"lineNumber":159,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":160,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":161,"author":{"gitId":"EuniceSim142"},"content":"        return session.isVisible() \u0026\u0026 !questionsWithVisibleResponses.isEmpty();"},{"lineNumber":162,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":163,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"EuniceSim142":65,"hhdqirui":12,"-":86}},{"path":"src/main/java/teammates/sqllogic/core/LogicStarter.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.sqllogic.core;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import javax.servlet.ServletContextEvent;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import javax.servlet.ServletContextListener;"},{"lineNumber":5,"author":{"gitId":"-"},"content":""},{"lineNumber":6,"author":{"gitId":"-"},"content":"import teammates.common.util.Logger;"},{"lineNumber":7,"author":{"gitId":"kevin9foong"},"content":"import teammates.storage.sqlapi.AccountRequestsDb;"},{"lineNumber":8,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlapi.AccountsDb;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.storage.sqlapi.CoursesDb;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import teammates.storage.sqlapi.DeadlineExtensionsDb;"},{"lineNumber":11,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlapi.FeedbackQuestionsDb;"},{"lineNumber":12,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlapi.FeedbackResponseCommentsDb;"},{"lineNumber":13,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlapi.FeedbackResponsesDb;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import teammates.storage.sqlapi.FeedbackSessionsDb;"},{"lineNumber":15,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlapi.NotificationsDb;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"import teammates.storage.sqlapi.UsageStatisticsDb;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"import teammates.storage.sqlapi.UsersDb;"},{"lineNumber":18,"author":{"gitId":"-"},"content":""},{"lineNumber":19,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":20,"author":{"gitId":"-"},"content":" * Setup in web.xml to register logic classes at application startup."},{"lineNumber":21,"author":{"gitId":"-"},"content":" */"},{"lineNumber":22,"author":{"gitId":"-"},"content":"public class LogicStarter implements ServletContextListener {"},{"lineNumber":23,"author":{"gitId":"-"},"content":""},{"lineNumber":24,"author":{"gitId":"-"},"content":"    private static final Logger log \u003d Logger.getLogger();"},{"lineNumber":25,"author":{"gitId":"-"},"content":""},{"lineNumber":26,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":27,"author":{"gitId":"-"},"content":"     * Registers dependencies between different logic classes."},{"lineNumber":28,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":29,"author":{"gitId":"-"},"content":"    public static void initializeDependencies() {"},{"lineNumber":30,"author":{"gitId":"hhdqirui"},"content":"        AccountsLogic accountsLogic \u003d AccountsLogic.inst();"},{"lineNumber":31,"author":{"gitId":"-"},"content":"        AccountRequestsLogic accountRequestsLogic \u003d AccountRequestsLogic.inst();"},{"lineNumber":32,"author":{"gitId":"-"},"content":"        CoursesLogic coursesLogic \u003d CoursesLogic.inst();"},{"lineNumber":33,"author":{"gitId":"-"},"content":"        DataBundleLogic dataBundleLogic \u003d DataBundleLogic.inst();"},{"lineNumber":34,"author":{"gitId":"-"},"content":"        DeadlineExtensionsLogic deadlineExtensionsLogic \u003d DeadlineExtensionsLogic.inst();"},{"lineNumber":35,"author":{"gitId":"-"},"content":"        FeedbackSessionsLogic fsLogic \u003d FeedbackSessionsLogic.inst();"},{"lineNumber":36,"author":{"gitId":"EuniceSim142"},"content":"        FeedbackResponsesLogic frLogic \u003d FeedbackResponsesLogic.inst();"},{"lineNumber":37,"author":{"gitId":"cedricongjh"},"content":"        FeedbackResponseCommentsLogic frcLogic \u003d FeedbackResponseCommentsLogic.inst();"},{"lineNumber":38,"author":{"gitId":"EuniceSim142"},"content":"        FeedbackQuestionsLogic fqLogic \u003d FeedbackQuestionsLogic.inst();"},{"lineNumber":39,"author":{"gitId":"hhdqirui"},"content":"        NotificationsLogic notificationsLogic \u003d NotificationsLogic.inst();"},{"lineNumber":40,"author":{"gitId":"-"},"content":"        UsageStatisticsLogic usageStatisticsLogic \u003d UsageStatisticsLogic.inst();"},{"lineNumber":41,"author":{"gitId":"-"},"content":"        UsersLogic usersLogic \u003d UsersLogic.inst();"},{"lineNumber":42,"author":{"gitId":"-"},"content":""},{"lineNumber":43,"author":{"gitId":"kevin9foong"},"content":"        accountRequestsLogic.initLogicDependencies(AccountRequestsDb.inst());"},{"lineNumber":44,"author":{"gitId":"domlimm"},"content":"        accountsLogic.initLogicDependencies(AccountsDb.inst(), notificationsLogic, usersLogic);"},{"lineNumber":45,"author":{"gitId":"-"},"content":"        coursesLogic.initLogicDependencies(CoursesDb.inst(), fsLogic);"},{"lineNumber":46,"author":{"gitId":"-"},"content":"        dataBundleLogic.initLogicDependencies(accountsLogic, accountRequestsLogic, coursesLogic,"},{"lineNumber":47,"author":{"gitId":"hhdqirui"},"content":"                deadlineExtensionsLogic, fsLogic, fqLogic,"},{"lineNumber":48,"author":{"gitId":"-"},"content":"                notificationsLogic, usersLogic);"},{"lineNumber":49,"author":{"gitId":"-"},"content":"        deadlineExtensionsLogic.initLogicDependencies(DeadlineExtensionsDb.inst());"},{"lineNumber":50,"author":{"gitId":"EuniceSim142"},"content":"        fsLogic.initLogicDependencies(FeedbackSessionsDb.inst(), coursesLogic, frLogic, fqLogic);"},{"lineNumber":51,"author":{"gitId":"EuniceSim142"},"content":"        frLogic.initLogicDependencies(FeedbackResponsesDb.inst());"},{"lineNumber":52,"author":{"gitId":"cedricongjh"},"content":"        frcLogic.initLogicDependencies(FeedbackResponseCommentsDb.inst());"},{"lineNumber":53,"author":{"gitId":"cedricongjh"},"content":"        fqLogic.initLogicDependencies(FeedbackQuestionsDb.inst(), coursesLogic, usersLogic);"},{"lineNumber":54,"author":{"gitId":"hhdqirui"},"content":"        notificationsLogic.initLogicDependencies(NotificationsDb.inst());"},{"lineNumber":55,"author":{"gitId":"-"},"content":"        usageStatisticsLogic.initLogicDependencies(UsageStatisticsDb.inst());"},{"lineNumber":56,"author":{"gitId":"domlimm"},"content":"        usersLogic.initLogicDependencies(UsersDb.inst(), accountsLogic);"},{"lineNumber":57,"author":{"gitId":"-"},"content":"        log.info(\"Initialized dependencies between logic classes\");"},{"lineNumber":58,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":59,"author":{"gitId":"-"},"content":""},{"lineNumber":60,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":61,"author":{"gitId":"-"},"content":"    public void contextInitialized(ServletContextEvent event) {"},{"lineNumber":62,"author":{"gitId":"-"},"content":"        // Invoked by Jetty at application startup."},{"lineNumber":63,"author":{"gitId":"-"},"content":"        initializeDependencies();"},{"lineNumber":64,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":65,"author":{"gitId":"-"},"content":""},{"lineNumber":66,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":67,"author":{"gitId":"-"},"content":"    public void contextDestroyed(ServletContextEvent event) {"},{"lineNumber":68,"author":{"gitId":"-"},"content":"        // Nothing to do"},{"lineNumber":69,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":70,"author":{"gitId":"-"},"content":""},{"lineNumber":71,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"domlimm":2,"cedricongjh":4,"EuniceSim142":6,"hhdqirui":6,"-":51,"kevin9foong":2}},{"path":"src/main/java/teammates/sqllogic/core/NotificationsLogic.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"hhdqirui"},"content":"package teammates.sqllogic.core;"},{"lineNumber":2,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":3,"author":{"gitId":"hhdqirui"},"content":"import static teammates.common.util.Const.ERROR_UPDATE_NON_EXISTENT;"},{"lineNumber":4,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":5,"author":{"gitId":"hhdqirui"},"content":"import java.time.Instant;"},{"lineNumber":6,"author":{"gitId":"hhdqirui"},"content":"import java.util.List;"},{"lineNumber":7,"author":{"gitId":"hhdqirui"},"content":"import java.util.UUID;"},{"lineNumber":8,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":9,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.NotificationStyle;"},{"lineNumber":10,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.NotificationTargetUser;"},{"lineNumber":11,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":12,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":13,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":14,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlapi.NotificationsDb;"},{"lineNumber":15,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.Notification;"},{"lineNumber":16,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":17,"author":{"gitId":"hhdqirui"},"content":"/**"},{"lineNumber":18,"author":{"gitId":"hhdqirui"},"content":" * Handles the logic related to notifications."},{"lineNumber":19,"author":{"gitId":"hhdqirui"},"content":" */"},{"lineNumber":20,"author":{"gitId":"hhdqirui"},"content":"public final class NotificationsLogic {"},{"lineNumber":21,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":22,"author":{"gitId":"hhdqirui"},"content":"    private static final NotificationsLogic instance \u003d new NotificationsLogic();"},{"lineNumber":23,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":24,"author":{"gitId":"hhdqirui"},"content":"    private NotificationsDb notificationsDb;"},{"lineNumber":25,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":26,"author":{"gitId":"hhdqirui"},"content":"    private NotificationsLogic() {"},{"lineNumber":27,"author":{"gitId":"hhdqirui"},"content":"        // prevent initialization"},{"lineNumber":28,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":29,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":30,"author":{"gitId":"hhdqirui"},"content":"    public static NotificationsLogic inst() {"},{"lineNumber":31,"author":{"gitId":"hhdqirui"},"content":"        return instance;"},{"lineNumber":32,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":33,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":34,"author":{"gitId":"hhdqirui"},"content":"    /**"},{"lineNumber":35,"author":{"gitId":"hhdqirui"},"content":"     * Initialise dependencies for {@code NotificationLogic} object."},{"lineNumber":36,"author":{"gitId":"hhdqirui"},"content":"     */"},{"lineNumber":37,"author":{"gitId":"hhdqirui"},"content":"    public void initLogicDependencies(NotificationsDb notificationsDb) {"},{"lineNumber":38,"author":{"gitId":"hhdqirui"},"content":"        this.notificationsDb \u003d notificationsDb;"},{"lineNumber":39,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":40,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":41,"author":{"gitId":"hhdqirui"},"content":"    /**"},{"lineNumber":42,"author":{"gitId":"hhdqirui"},"content":"     * Creates a notification."},{"lineNumber":43,"author":{"gitId":"hhdqirui"},"content":"     *"},{"lineNumber":44,"author":{"gitId":"hhdqirui"},"content":"     * @return the created notification"},{"lineNumber":45,"author":{"gitId":"hhdqirui"},"content":"     * @throws InvalidParametersException if the notification is not valid"},{"lineNumber":46,"author":{"gitId":"hhdqirui"},"content":"     * @throws EntityAlreadyExistsException if the notification already exists in the database."},{"lineNumber":47,"author":{"gitId":"hhdqirui"},"content":"     */"},{"lineNumber":48,"author":{"gitId":"hhdqirui"},"content":"    public Notification createNotification(Notification notification)"},{"lineNumber":49,"author":{"gitId":"hhdqirui"},"content":"            throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":50,"author":{"gitId":"hhdqirui"},"content":"        return notificationsDb.createNotification(notification);"},{"lineNumber":51,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":52,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":53,"author":{"gitId":"hhdqirui"},"content":"    /**"},{"lineNumber":54,"author":{"gitId":"hhdqirui"},"content":"     * Gets notification associated with the {@code notificationId}."},{"lineNumber":55,"author":{"gitId":"hhdqirui"},"content":"     *"},{"lineNumber":56,"author":{"gitId":"hhdqirui"},"content":"     * @return null if no match found."},{"lineNumber":57,"author":{"gitId":"hhdqirui"},"content":"     */"},{"lineNumber":58,"author":{"gitId":"hhdqirui"},"content":"    public Notification getNotification(UUID notificationId) {"},{"lineNumber":59,"author":{"gitId":"hhdqirui"},"content":"        assert notificationId !\u003d null;"},{"lineNumber":60,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":61,"author":{"gitId":"hhdqirui"},"content":"        return notificationsDb.getNotification(notificationId);"},{"lineNumber":62,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":63,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":64,"author":{"gitId":"hhdqirui"},"content":"    /**"},{"lineNumber":65,"author":{"gitId":"hhdqirui"},"content":"     * Updates/Creates the notification using {@link Notification}."},{"lineNumber":66,"author":{"gitId":"hhdqirui"},"content":"     *"},{"lineNumber":67,"author":{"gitId":"hhdqirui"},"content":"     * @return updated notification"},{"lineNumber":68,"author":{"gitId":"hhdqirui"},"content":"     * @throws InvalidParametersException if attributes to update are not valid"},{"lineNumber":69,"author":{"gitId":"hhdqirui"},"content":"     * @throws EntityDoesNotExistException if notification cannot be found with given Id"},{"lineNumber":70,"author":{"gitId":"hhdqirui"},"content":"     */"},{"lineNumber":71,"author":{"gitId":"hhdqirui"},"content":"    public Notification updateNotification(UUID notificationId, Instant startTime, Instant endTime,"},{"lineNumber":72,"author":{"gitId":"hhdqirui"},"content":"                                           NotificationStyle style, NotificationTargetUser targetUser, String title,"},{"lineNumber":73,"author":{"gitId":"hhdqirui"},"content":"                                           String message)"},{"lineNumber":74,"author":{"gitId":"hhdqirui"},"content":"            throws InvalidParametersException, EntityDoesNotExistException {"},{"lineNumber":75,"author":{"gitId":"hhdqirui"},"content":"        Notification notification \u003d notificationsDb.getNotification(notificationId);"},{"lineNumber":76,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":77,"author":{"gitId":"hhdqirui"},"content":"        if (notification \u003d\u003d null) {"},{"lineNumber":78,"author":{"gitId":"hhdqirui"},"content":"            throw new EntityDoesNotExistException(ERROR_UPDATE_NON_EXISTENT + Notification.class);"},{"lineNumber":79,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":80,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":81,"author":{"gitId":"hhdqirui"},"content":"        notification.setStartTime(startTime);"},{"lineNumber":82,"author":{"gitId":"hhdqirui"},"content":"        notification.setEndTime(endTime);"},{"lineNumber":83,"author":{"gitId":"hhdqirui"},"content":"        notification.setStyle(style);"},{"lineNumber":84,"author":{"gitId":"hhdqirui"},"content":"        notification.setTargetUser(targetUser);"},{"lineNumber":85,"author":{"gitId":"hhdqirui"},"content":"        notification.setTitle(title);"},{"lineNumber":86,"author":{"gitId":"hhdqirui"},"content":"        notification.setMessage(message);"},{"lineNumber":87,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":88,"author":{"gitId":"hhdqirui"},"content":"        if (!notification.isValid()) {"},{"lineNumber":89,"author":{"gitId":"hhdqirui"},"content":"            throw new InvalidParametersException(notification.getInvalidityInfo());"},{"lineNumber":90,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":91,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":92,"author":{"gitId":"hhdqirui"},"content":"        return notification;"},{"lineNumber":93,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":94,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":95,"author":{"gitId":"hhdqirui"},"content":"    /**"},{"lineNumber":96,"author":{"gitId":"hhdqirui"},"content":"     * Deletes notification associated with the {@code notificationId}."},{"lineNumber":97,"author":{"gitId":"hhdqirui"},"content":"     *"},{"lineNumber":98,"author":{"gitId":"hhdqirui"},"content":"     * \u003cp\u003eFails silently if the notification doesn\u0027t exist.\u003c/p\u003e"},{"lineNumber":99,"author":{"gitId":"hhdqirui"},"content":"     */"},{"lineNumber":100,"author":{"gitId":"hhdqirui"},"content":"    public void deleteNotification(UUID notificationId) {"},{"lineNumber":101,"author":{"gitId":"hhdqirui"},"content":"        assert notificationId !\u003d null;"},{"lineNumber":102,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":103,"author":{"gitId":"hhdqirui"},"content":"        Notification notification \u003d getNotification(notificationId);"},{"lineNumber":104,"author":{"gitId":"hhdqirui"},"content":"        notificationsDb.deleteNotification(notification);"},{"lineNumber":105,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":106,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":107,"author":{"gitId":"hhdqirui"},"content":"    /**"},{"lineNumber":108,"author":{"gitId":"hhdqirui"},"content":"     * Gets all notifications."},{"lineNumber":109,"author":{"gitId":"hhdqirui"},"content":"     */"},{"lineNumber":110,"author":{"gitId":"hhdqirui"},"content":"    public List\u003cNotification\u003e getAllNotifications() {"},{"lineNumber":111,"author":{"gitId":"hhdqirui"},"content":"        return notificationsDb.getAllNotifications();"},{"lineNumber":112,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":113,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":114,"author":{"gitId":"hhdqirui"},"content":"    /**"},{"lineNumber":115,"author":{"gitId":"hhdqirui"},"content":"     * Gets a list of notifications."},{"lineNumber":116,"author":{"gitId":"hhdqirui"},"content":"     *"},{"lineNumber":117,"author":{"gitId":"hhdqirui"},"content":"     * @return a list of notifications with the specified {@code targetUser}."},{"lineNumber":118,"author":{"gitId":"hhdqirui"},"content":"     */"},{"lineNumber":119,"author":{"gitId":"hhdqirui"},"content":"    public List\u003cNotification\u003e getActiveNotificationsByTargetUser(NotificationTargetUser targetUser) {"},{"lineNumber":120,"author":{"gitId":"hhdqirui"},"content":"        assert targetUser !\u003d null;"},{"lineNumber":121,"author":{"gitId":"hhdqirui"},"content":"        return notificationsDb.getActiveNotificationsByTargetUser(targetUser);"},{"lineNumber":122,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":123,"author":{"gitId":"hhdqirui"},"content":"}"}],"authorContributionMap":{"hhdqirui":123}},{"path":"src/main/java/teammates/sqllogic/core/UsersLogic.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"domlimm"},"content":"package teammates.sqllogic.core;"},{"lineNumber":2,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":3,"author":{"gitId":"domlimm"},"content":"import static teammates.common.util.Const.ERROR_UPDATE_NON_EXISTENT;"},{"lineNumber":4,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":5,"author":{"gitId":"EuniceSim142"},"content":"import java.util.ArrayList;"},{"lineNumber":6,"author":{"gitId":"EuniceSim142"},"content":"import java.util.Comparator;"},{"lineNumber":7,"author":{"gitId":"EuniceSim142"},"content":"import java.util.List;"},{"lineNumber":8,"author":{"gitId":"domlimm"},"content":"import java.util.UUID;"},{"lineNumber":9,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":10,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":11,"author":{"gitId":"domlimm"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":12,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":13,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlapi.UsersDb;"},{"lineNumber":14,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":15,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.Section;"},{"lineNumber":16,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Student;"},{"lineNumber":17,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.User;"},{"lineNumber":18,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":19,"author":{"gitId":"domlimm"},"content":"/**"},{"lineNumber":20,"author":{"gitId":"domlimm"},"content":" * Handles operations related to user (instructor \u0026 student)."},{"lineNumber":21,"author":{"gitId":"domlimm"},"content":" *"},{"lineNumber":22,"author":{"gitId":"domlimm"},"content":" * @see User"},{"lineNumber":23,"author":{"gitId":"domlimm"},"content":" * @see UsersDb"},{"lineNumber":24,"author":{"gitId":"domlimm"},"content":" */"},{"lineNumber":25,"author":{"gitId":"domlimm"},"content":"public final class UsersLogic {"},{"lineNumber":26,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":27,"author":{"gitId":"domlimm"},"content":"    private static final UsersLogic instance \u003d new UsersLogic();"},{"lineNumber":28,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":29,"author":{"gitId":"domlimm"},"content":"    private UsersDb usersDb;"},{"lineNumber":30,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":31,"author":{"gitId":"domlimm"},"content":"    private AccountsLogic accountsLogic;"},{"lineNumber":32,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":33,"author":{"gitId":"domlimm"},"content":"    private UsersLogic() {"},{"lineNumber":34,"author":{"gitId":"domlimm"},"content":"        // prevent initialization"},{"lineNumber":35,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":36,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":37,"author":{"gitId":"domlimm"},"content":"    public static UsersLogic inst() {"},{"lineNumber":38,"author":{"gitId":"domlimm"},"content":"        return instance;"},{"lineNumber":39,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":40,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":41,"author":{"gitId":"domlimm"},"content":"    void initLogicDependencies(UsersDb usersDb, AccountsLogic accountsLogic) {"},{"lineNumber":42,"author":{"gitId":"domlimm"},"content":"        this.usersDb \u003d usersDb;"},{"lineNumber":43,"author":{"gitId":"domlimm"},"content":"        this.accountsLogic \u003d accountsLogic;"},{"lineNumber":44,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":45,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":46,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":47,"author":{"gitId":"EuniceSim142"},"content":"     * Create an instructor."},{"lineNumber":48,"author":{"gitId":"EuniceSim142"},"content":"     * @return the created instructor"},{"lineNumber":49,"author":{"gitId":"EuniceSim142"},"content":"     * @throws InvalidParametersException if the instructor is not valid"},{"lineNumber":50,"author":{"gitId":"EuniceSim142"},"content":"     * @throws EntityAlreadyExistsException if the instructor already exists in the database."},{"lineNumber":51,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":52,"author":{"gitId":"EuniceSim142"},"content":"    public Instructor createInstructor(Instructor instructor)"},{"lineNumber":53,"author":{"gitId":"EuniceSim142"},"content":"            throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":54,"author":{"gitId":"EuniceSim142"},"content":"        return usersDb.createInstructor(instructor);"},{"lineNumber":55,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":56,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":57,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":58,"author":{"gitId":"-"},"content":"     * Creates a student."},{"lineNumber":59,"author":{"gitId":"EuniceSim142"},"content":"     * @return the created student"},{"lineNumber":60,"author":{"gitId":"EuniceSim142"},"content":"     * @throws InvalidParametersException if the student is not valid"},{"lineNumber":61,"author":{"gitId":"EuniceSim142"},"content":"     * @throws EntityAlreadyExistsException if the student already exists in the database."},{"lineNumber":62,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":63,"author":{"gitId":"EuniceSim142"},"content":"    public Student createStudent(Student student) throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":64,"author":{"gitId":"EuniceSim142"},"content":"        return usersDb.createStudent(student);"},{"lineNumber":65,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":66,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":67,"author":{"gitId":"domlimm"},"content":"    /**"},{"lineNumber":68,"author":{"gitId":"domlimm"},"content":"     * Gets instructor associated with {@code id}."},{"lineNumber":69,"author":{"gitId":"domlimm"},"content":"     *"},{"lineNumber":70,"author":{"gitId":"domlimm"},"content":"     * @param id Id of Instructor."},{"lineNumber":71,"author":{"gitId":"domlimm"},"content":"     * @return Returns Instructor if found else null."},{"lineNumber":72,"author":{"gitId":"domlimm"},"content":"     */"},{"lineNumber":73,"author":{"gitId":"domlimm"},"content":"    public Instructor getInstructor(UUID id) {"},{"lineNumber":74,"author":{"gitId":"domlimm"},"content":"        assert id !\u003d null;"},{"lineNumber":75,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":76,"author":{"gitId":"domlimm"},"content":"        return usersDb.getInstructor(id);"},{"lineNumber":77,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":78,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":79,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":80,"author":{"gitId":"EuniceSim142"},"content":"     * Gets the instructor with the specified email."},{"lineNumber":81,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":82,"author":{"gitId":"EuniceSim142"},"content":"    public Instructor getInstructorForEmail(String courseId, String userEmail) {"},{"lineNumber":83,"author":{"gitId":"EuniceSim142"},"content":"        return usersDb.getInstructorForEmail(courseId, userEmail);"},{"lineNumber":84,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":85,"author":{"gitId":"-"},"content":""},{"lineNumber":86,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":87,"author":{"gitId":"-"},"content":"     * Gets an instructor by associated {@code regkey}."},{"lineNumber":88,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":89,"author":{"gitId":"-"},"content":"    public Instructor getInstructorByRegistrationKey(String regKey) {"},{"lineNumber":90,"author":{"gitId":"-"},"content":"        assert regKey !\u003d null;"},{"lineNumber":91,"author":{"gitId":"-"},"content":""},{"lineNumber":92,"author":{"gitId":"-"},"content":"        return usersDb.getInstructorByRegKey(regKey);"},{"lineNumber":93,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":94,"author":{"gitId":"-"},"content":""},{"lineNumber":95,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":96,"author":{"gitId":"-"},"content":"     * Gets an instructor by associated {@code googleId}."},{"lineNumber":97,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":98,"author":{"gitId":"-"},"content":"    public Instructor getInstructorByGoogleId(String courseId, String googleId) {"},{"lineNumber":99,"author":{"gitId":"-"},"content":"        assert courseId !\u003d null;"},{"lineNumber":100,"author":{"gitId":"-"},"content":"        assert googleId !\u003d null;"},{"lineNumber":101,"author":{"gitId":"-"},"content":""},{"lineNumber":102,"author":{"gitId":"-"},"content":"        return usersDb.getInstructorByGoogleId(courseId, googleId);"},{"lineNumber":103,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":104,"author":{"gitId":"-"},"content":""},{"lineNumber":105,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":106,"author":{"gitId":"EuniceSim142"},"content":"     * Deletes an instructor or student."},{"lineNumber":107,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":108,"author":{"gitId":"EuniceSim142"},"content":"    public \u003cT extends User\u003e void deleteUser(T user) {"},{"lineNumber":109,"author":{"gitId":"EuniceSim142"},"content":"        usersDb.deleteUser(user);"},{"lineNumber":110,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":111,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":112,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":113,"author":{"gitId":"EuniceSim142"},"content":"     * Gets the list of instructors with co-owner privileges in a course."},{"lineNumber":114,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":115,"author":{"gitId":"EuniceSim142"},"content":"    public List\u003cInstructor\u003e getCoOwnersForCourse(String courseId) {"},{"lineNumber":116,"author":{"gitId":"EuniceSim142"},"content":"        List\u003cInstructor\u003e instructors \u003d getInstructorsForCourse(courseId);"},{"lineNumber":117,"author":{"gitId":"EuniceSim142"},"content":"        List\u003cInstructor\u003e instructorsWithCoOwnerPrivileges \u003d new ArrayList\u003c\u003e();"},{"lineNumber":118,"author":{"gitId":"EuniceSim142"},"content":"        for (Instructor instructor : instructors) {"},{"lineNumber":119,"author":{"gitId":"EuniceSim142"},"content":"            if (!instructor.hasCoownerPrivileges()) {"},{"lineNumber":120,"author":{"gitId":"EuniceSim142"},"content":"                continue;"},{"lineNumber":121,"author":{"gitId":"EuniceSim142"},"content":"            }"},{"lineNumber":122,"author":{"gitId":"EuniceSim142"},"content":"            instructorsWithCoOwnerPrivileges.add(instructor);"},{"lineNumber":123,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":124,"author":{"gitId":"EuniceSim142"},"content":"        return instructorsWithCoOwnerPrivileges;"},{"lineNumber":125,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":126,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":127,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":128,"author":{"gitId":"EuniceSim142"},"content":"     * Gets a list of instructors for the specified course."},{"lineNumber":129,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":130,"author":{"gitId":"EuniceSim142"},"content":"    public List\u003cInstructor\u003e getInstructorsForCourse(String courseId) {"},{"lineNumber":131,"author":{"gitId":"EuniceSim142"},"content":"        List\u003cInstructor\u003e instructorReturnList \u003d usersDb.getInstructorsForCourse(courseId);"},{"lineNumber":132,"author":{"gitId":"EuniceSim142"},"content":"        sortByName(instructorReturnList);"},{"lineNumber":133,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":134,"author":{"gitId":"EuniceSim142"},"content":"        return instructorReturnList;"},{"lineNumber":135,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":136,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":137,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":138,"author":{"gitId":"EuniceSim142"},"content":"     * Gets all instructors associated with a googleId."},{"lineNumber":139,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":140,"author":{"gitId":"EuniceSim142"},"content":"    public List\u003cInstructor\u003e getInstructorsForGoogleId(String googleId) {"},{"lineNumber":141,"author":{"gitId":"EuniceSim142"},"content":"        assert googleId !\u003d null;"},{"lineNumber":142,"author":{"gitId":"EuniceSim142"},"content":"        return usersDb.getInstructorsForGoogleId(googleId);"},{"lineNumber":143,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":144,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":145,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":146,"author":{"gitId":"-"},"content":"     * Returns true if the user associated with the googleId is an instructor in any course in the system."},{"lineNumber":147,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":148,"author":{"gitId":"-"},"content":"    public boolean isInstructorInAnyCourse(String googleId) {"},{"lineNumber":149,"author":{"gitId":"-"},"content":"        return !usersDb.getAllInstructorsByGoogleId(googleId).isEmpty();"},{"lineNumber":150,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":151,"author":{"gitId":"-"},"content":""},{"lineNumber":152,"author":{"gitId":"domlimm"},"content":"    /**"},{"lineNumber":153,"author":{"gitId":"domlimm"},"content":"     * Gets student associated with {@code id}."},{"lineNumber":154,"author":{"gitId":"domlimm"},"content":"     *"},{"lineNumber":155,"author":{"gitId":"domlimm"},"content":"     * @param id Id of Student."},{"lineNumber":156,"author":{"gitId":"domlimm"},"content":"     * @return Returns Student if found else null."},{"lineNumber":157,"author":{"gitId":"domlimm"},"content":"     */"},{"lineNumber":158,"author":{"gitId":"domlimm"},"content":"    public Student getStudent(UUID id) {"},{"lineNumber":159,"author":{"gitId":"domlimm"},"content":"        assert id !\u003d null;"},{"lineNumber":160,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":161,"author":{"gitId":"domlimm"},"content":"        return usersDb.getStudent(id);"},{"lineNumber":162,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":163,"author":{"gitId":"-"},"content":""},{"lineNumber":164,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":165,"author":{"gitId":"EuniceSim142"},"content":"     * Gets the student with the specified email."},{"lineNumber":166,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":167,"author":{"gitId":"EuniceSim142"},"content":"    public Student getStudentForEmail(String courseId, String userEmail) {"},{"lineNumber":168,"author":{"gitId":"EuniceSim142"},"content":"        return usersDb.getStudentForEmail(courseId, userEmail);"},{"lineNumber":169,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":170,"author":{"gitId":"-"},"content":""},{"lineNumber":171,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":172,"author":{"gitId":"EuniceSim142"},"content":"     * Gets a list of students with the specified email."},{"lineNumber":173,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":174,"author":{"gitId":"EuniceSim142"},"content":"    public List\u003cStudent\u003e getAllStudentsForEmail(String email) {"},{"lineNumber":175,"author":{"gitId":"EuniceSim142"},"content":"        return usersDb.getAllStudentsForEmail(email);"},{"lineNumber":176,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":177,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":178,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":179,"author":{"gitId":"EuniceSim142"},"content":"     * Gets a list of students for the specified course."},{"lineNumber":180,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":181,"author":{"gitId":"EuniceSim142"},"content":"    public List\u003cStudent\u003e getStudentsForCourse(String courseId) {"},{"lineNumber":182,"author":{"gitId":"EuniceSim142"},"content":"        List\u003cStudent\u003e studentReturnList \u003d usersDb.getStudentsForCourse(courseId);"},{"lineNumber":183,"author":{"gitId":"EuniceSim142"},"content":"        sortByName(studentReturnList);"},{"lineNumber":184,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":185,"author":{"gitId":"EuniceSim142"},"content":"        return studentReturnList;"},{"lineNumber":186,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":187,"author":{"gitId":"-"},"content":""},{"lineNumber":188,"author":{"gitId":"cedricongjh"},"content":"    /**"},{"lineNumber":189,"author":{"gitId":"cedricongjh"},"content":"     * Gets all students of a section."},{"lineNumber":190,"author":{"gitId":"cedricongjh"},"content":"     */"},{"lineNumber":191,"author":{"gitId":"cedricongjh"},"content":"    public List\u003cStudent\u003e getStudentsForSection(Section section, String courseId) {"},{"lineNumber":192,"author":{"gitId":"cedricongjh"},"content":"        return usersDb.getStudentsForSection(section, courseId);"},{"lineNumber":193,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":194,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":195,"author":{"gitId":"cedricongjh"},"content":"    /**"},{"lineNumber":196,"author":{"gitId":"cedricongjh"},"content":"     * Gets all students of a team."},{"lineNumber":197,"author":{"gitId":"cedricongjh"},"content":"     */"},{"lineNumber":198,"author":{"gitId":"cedricongjh"},"content":"    public List\u003cStudent\u003e getStudentsForTeam(String teamName, String courseId) {"},{"lineNumber":199,"author":{"gitId":"cedricongjh"},"content":"        return usersDb.getStudentsForTeam(teamName, courseId);"},{"lineNumber":200,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":201,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":202,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":203,"author":{"gitId":"-"},"content":"     * Gets a student by associated {@code regkey}."},{"lineNumber":204,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":205,"author":{"gitId":"-"},"content":"    public Student getStudentByRegistrationKey(String regKey) {"},{"lineNumber":206,"author":{"gitId":"-"},"content":"        assert regKey !\u003d null;"},{"lineNumber":207,"author":{"gitId":"-"},"content":""},{"lineNumber":208,"author":{"gitId":"-"},"content":"        return usersDb.getStudentByRegKey(regKey);"},{"lineNumber":209,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":210,"author":{"gitId":"-"},"content":""},{"lineNumber":211,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":212,"author":{"gitId":"-"},"content":"     * Gets a student by associated {@code googleId}."},{"lineNumber":213,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":214,"author":{"gitId":"-"},"content":"    public Student getStudentByGoogleId(String courseId, String googleId) {"},{"lineNumber":215,"author":{"gitId":"-"},"content":"        assert courseId !\u003d null;"},{"lineNumber":216,"author":{"gitId":"-"},"content":"        assert googleId !\u003d null;"},{"lineNumber":217,"author":{"gitId":"-"},"content":""},{"lineNumber":218,"author":{"gitId":"-"},"content":"        return usersDb.getStudentByGoogleId(courseId, googleId);"},{"lineNumber":219,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":220,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":221,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":222,"author":{"gitId":"-"},"content":"     * Returns true if the user associated with the googleId is a student in any course in the system."},{"lineNumber":223,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":224,"author":{"gitId":"-"},"content":"    public boolean isStudentInAnyCourse(String googleId) {"},{"lineNumber":225,"author":{"gitId":"-"},"content":"        return !usersDb.getAllStudentsByGoogleId(googleId).isEmpty();"},{"lineNumber":226,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":227,"author":{"gitId":"-"},"content":""},{"lineNumber":228,"author":{"gitId":"domlimm"},"content":"    /**"},{"lineNumber":229,"author":{"gitId":"domlimm"},"content":"     * Gets all instructors and students by {@code googleId}."},{"lineNumber":230,"author":{"gitId":"domlimm"},"content":"     */"},{"lineNumber":231,"author":{"gitId":"domlimm"},"content":"    public List\u003cUser\u003e getAllUsersByGoogleId(String googleId) {"},{"lineNumber":232,"author":{"gitId":"domlimm"},"content":"        assert googleId !\u003d null;"},{"lineNumber":233,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":234,"author":{"gitId":"domlimm"},"content":"        return usersDb.getAllUsersByGoogleId(googleId);"},{"lineNumber":235,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":236,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":237,"author":{"gitId":"domlimm"},"content":"    /**"},{"lineNumber":238,"author":{"gitId":"domlimm"},"content":"     * Resets the googleId associated with the instructor."},{"lineNumber":239,"author":{"gitId":"domlimm"},"content":"     */"},{"lineNumber":240,"author":{"gitId":"domlimm"},"content":"    public void resetInstructorGoogleId(String email, String courseId, String googleId)"},{"lineNumber":241,"author":{"gitId":"domlimm"},"content":"            throws EntityDoesNotExistException {"},{"lineNumber":242,"author":{"gitId":"domlimm"},"content":"        assert email !\u003d null;"},{"lineNumber":243,"author":{"gitId":"domlimm"},"content":"        assert courseId !\u003d null;"},{"lineNumber":244,"author":{"gitId":"domlimm"},"content":"        assert googleId !\u003d null;"},{"lineNumber":245,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":246,"author":{"gitId":"domlimm"},"content":"        Instructor instructor \u003d getInstructorForEmail(courseId, email);"},{"lineNumber":247,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":248,"author":{"gitId":"domlimm"},"content":"        if (instructor \u003d\u003d null) {"},{"lineNumber":249,"author":{"gitId":"domlimm"},"content":"            throw new EntityDoesNotExistException(ERROR_UPDATE_NON_EXISTENT"},{"lineNumber":250,"author":{"gitId":"domlimm"},"content":"                    + \"Instructor [courseId\u003d\" + courseId + \", email\u003d\" + email + \"]\");"},{"lineNumber":251,"author":{"gitId":"domlimm"},"content":"        }"},{"lineNumber":252,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":253,"author":{"gitId":"domlimm"},"content":"        instructor.setAccount(null);"},{"lineNumber":254,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":255,"author":{"gitId":"domlimm"},"content":"        if (usersDb.getAllUsersByGoogleId(googleId).isEmpty()) {"},{"lineNumber":256,"author":{"gitId":"domlimm"},"content":"            accountsLogic.deleteAccountCascade(googleId);"},{"lineNumber":257,"author":{"gitId":"domlimm"},"content":"        }"},{"lineNumber":258,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":259,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":260,"author":{"gitId":"domlimm"},"content":"    /**"},{"lineNumber":261,"author":{"gitId":"domlimm"},"content":"     * Resets the googleId associated with the student."},{"lineNumber":262,"author":{"gitId":"domlimm"},"content":"     */"},{"lineNumber":263,"author":{"gitId":"domlimm"},"content":"    public void resetStudentGoogleId(String email, String courseId, String googleId)"},{"lineNumber":264,"author":{"gitId":"domlimm"},"content":"            throws EntityDoesNotExistException {"},{"lineNumber":265,"author":{"gitId":"domlimm"},"content":"        assert email !\u003d null;"},{"lineNumber":266,"author":{"gitId":"domlimm"},"content":"        assert courseId !\u003d null;"},{"lineNumber":267,"author":{"gitId":"domlimm"},"content":"        assert googleId !\u003d null;"},{"lineNumber":268,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":269,"author":{"gitId":"domlimm"},"content":"        Student student \u003d getStudentForEmail(courseId, email);"},{"lineNumber":270,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":271,"author":{"gitId":"domlimm"},"content":"        if (student \u003d\u003d null) {"},{"lineNumber":272,"author":{"gitId":"domlimm"},"content":"            throw new EntityDoesNotExistException(ERROR_UPDATE_NON_EXISTENT"},{"lineNumber":273,"author":{"gitId":"domlimm"},"content":"                    + \"Student [courseId\u003d\" + courseId + \", email\u003d\" + email + \"]\");"},{"lineNumber":274,"author":{"gitId":"domlimm"},"content":"        }"},{"lineNumber":275,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":276,"author":{"gitId":"domlimm"},"content":"        student.setAccount(null);"},{"lineNumber":277,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":278,"author":{"gitId":"domlimm"},"content":"        if (usersDb.getAllUsersByGoogleId(googleId).isEmpty()) {"},{"lineNumber":279,"author":{"gitId":"domlimm"},"content":"            accountsLogic.deleteAccountCascade(googleId);"},{"lineNumber":280,"author":{"gitId":"domlimm"},"content":"        }"},{"lineNumber":281,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":282,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":283,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":284,"author":{"gitId":"EuniceSim142"},"content":"     * Sorts the instructors list alphabetically by name."},{"lineNumber":285,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":286,"author":{"gitId":"EuniceSim142"},"content":"    public static \u003cT extends User\u003e void sortByName(List\u003cT\u003e users) {"},{"lineNumber":287,"author":{"gitId":"EuniceSim142"},"content":"        users.sort(Comparator.comparing(user -\u003e user.getName().toLowerCase()));"},{"lineNumber":288,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":289,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":290,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":291,"author":{"gitId":"EuniceSim142"},"content":"     * Checks if an instructor with {@code googleId} can create a course with {@code institute}"},{"lineNumber":292,"author":{"gitId":"EuniceSim142"},"content":"     * (ie. has an existing course(s) with the same {@code institute})."},{"lineNumber":293,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":294,"author":{"gitId":"EuniceSim142"},"content":"    public boolean canInstructorCreateCourse(String googleId, String institute) {"},{"lineNumber":295,"author":{"gitId":"EuniceSim142"},"content":"        assert googleId !\u003d null;"},{"lineNumber":296,"author":{"gitId":"EuniceSim142"},"content":"        assert institute !\u003d null;"},{"lineNumber":297,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":298,"author":{"gitId":"EuniceSim142"},"content":"        List\u003cInstructor\u003e existingInstructors \u003d getInstructorsForGoogleId(googleId);"},{"lineNumber":299,"author":{"gitId":"EuniceSim142"},"content":"        return existingInstructors"},{"lineNumber":300,"author":{"gitId":"EuniceSim142"},"content":"                .stream()"},{"lineNumber":301,"author":{"gitId":"EuniceSim142"},"content":"                .filter(Instructor::hasCoownerPrivileges)"},{"lineNumber":302,"author":{"gitId":"EuniceSim142"},"content":"                .map(instructor -\u003e instructor.getCourse())"},{"lineNumber":303,"author":{"gitId":"EuniceSim142"},"content":"                .anyMatch(course -\u003e institute.equals(course.getInstitute()));"},{"lineNumber":304,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":305,"author":{"gitId":"domlimm"},"content":"}"}],"authorContributionMap":{"domlimm":117,"cedricongjh":15,"EuniceSim142":111,"-":62}},{"path":"src/main/java/teammates/storage/sqlapi/AccountRequestsDb.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"kevin9foong"},"content":"package teammates.storage.sqlapi;"},{"lineNumber":2,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":3,"author":{"gitId":"hhdqirui"},"content":"import static teammates.common.util.Const.ERROR_CREATE_ENTITY_ALREADY_EXISTS;"},{"lineNumber":4,"author":{"gitId":"kevin9foong"},"content":"import static teammates.common.util.Const.ERROR_UPDATE_NON_EXISTENT;"},{"lineNumber":5,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":6,"author":{"gitId":"kevin9foong"},"content":"import java.time.Instant;"},{"lineNumber":7,"author":{"gitId":"kevin9foong"},"content":"import java.util.List;"},{"lineNumber":8,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":9,"author":{"gitId":"kevin9foong"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":10,"author":{"gitId":"kevin9foong"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":11,"author":{"gitId":"kevin9foong"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":12,"author":{"gitId":"kevin9foong"},"content":"import teammates.common.util.HibernateUtil;"},{"lineNumber":13,"author":{"gitId":"kevin9foong"},"content":"import teammates.storage.sqlentity.AccountRequest;"},{"lineNumber":14,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":15,"author":{"gitId":"kevin9foong"},"content":"import jakarta.persistence.TypedQuery;"},{"lineNumber":16,"author":{"gitId":"kevin9foong"},"content":"import jakarta.persistence.criteria.CriteriaBuilder;"},{"lineNumber":17,"author":{"gitId":"kevin9foong"},"content":"import jakarta.persistence.criteria.CriteriaQuery;"},{"lineNumber":18,"author":{"gitId":"kevin9foong"},"content":"import jakarta.persistence.criteria.Root;"},{"lineNumber":19,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":20,"author":{"gitId":"kevin9foong"},"content":"/**"},{"lineNumber":21,"author":{"gitId":"kevin9foong"},"content":" * Generates CRUD operations for AccountRequest."},{"lineNumber":22,"author":{"gitId":"kevin9foong"},"content":" *"},{"lineNumber":23,"author":{"gitId":"kevin9foong"},"content":" * @see AccountRequest"},{"lineNumber":24,"author":{"gitId":"kevin9foong"},"content":" */"},{"lineNumber":25,"author":{"gitId":"-"},"content":"public final class AccountRequestsDb extends EntitiesDb {"},{"lineNumber":26,"author":{"gitId":"kevin9foong"},"content":"    private static final AccountRequestsDb instance \u003d new AccountRequestsDb();"},{"lineNumber":27,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":28,"author":{"gitId":"kevin9foong"},"content":"    private AccountRequestsDb() {"},{"lineNumber":29,"author":{"gitId":"kevin9foong"},"content":"        // prevent instantiation"},{"lineNumber":30,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":31,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":32,"author":{"gitId":"kevin9foong"},"content":"    public static AccountRequestsDb inst() {"},{"lineNumber":33,"author":{"gitId":"kevin9foong"},"content":"        return instance;"},{"lineNumber":34,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":35,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":36,"author":{"gitId":"kevin9foong"},"content":"    /**"},{"lineNumber":37,"author":{"gitId":"kevin9foong"},"content":"     * Creates an AccountRequest in the database."},{"lineNumber":38,"author":{"gitId":"kevin9foong"},"content":"     */"},{"lineNumber":39,"author":{"gitId":"kevin9foong"},"content":"    public AccountRequest createAccountRequest(AccountRequest accountRequest)"},{"lineNumber":40,"author":{"gitId":"kevin9foong"},"content":"            throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":41,"author":{"gitId":"kevin9foong"},"content":"        assert accountRequest !\u003d null;"},{"lineNumber":42,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":43,"author":{"gitId":"kevin9foong"},"content":"        if (!accountRequest.isValid()) {"},{"lineNumber":44,"author":{"gitId":"kevin9foong"},"content":"            throw new InvalidParametersException(accountRequest.getInvalidityInfo());"},{"lineNumber":45,"author":{"gitId":"kevin9foong"},"content":"        }"},{"lineNumber":46,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":47,"author":{"gitId":"kevin9foong"},"content":"        // don\u0027t need to check registrationKey for uniqueness since it is generated using email + institute"},{"lineNumber":48,"author":{"gitId":"kevin9foong"},"content":"        if (getAccountRequest(accountRequest.getEmail(), accountRequest.getInstitute()) !\u003d null) {"},{"lineNumber":49,"author":{"gitId":"kevin9foong"},"content":"            throw new EntityAlreadyExistsException("},{"lineNumber":50,"author":{"gitId":"kevin9foong"},"content":"                String.format(ERROR_CREATE_ENTITY_ALREADY_EXISTS, accountRequest.toString()));"},{"lineNumber":51,"author":{"gitId":"kevin9foong"},"content":"        }"},{"lineNumber":52,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":53,"author":{"gitId":"kevin9foong"},"content":"        persist(accountRequest);"},{"lineNumber":54,"author":{"gitId":"kevin9foong"},"content":"        return accountRequest;"},{"lineNumber":55,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":56,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":57,"author":{"gitId":"kevin9foong"},"content":"    /**"},{"lineNumber":58,"author":{"gitId":"kevin9foong"},"content":"     * Get AccountRequest by {@code email} and {@code institute} from database."},{"lineNumber":59,"author":{"gitId":"kevin9foong"},"content":"     */"},{"lineNumber":60,"author":{"gitId":"kevin9foong"},"content":"    public AccountRequest getAccountRequest(String email, String institute) {"},{"lineNumber":61,"author":{"gitId":"domlimm"},"content":"        CriteriaBuilder cb \u003d HibernateUtil.getCriteriaBuilder();"},{"lineNumber":62,"author":{"gitId":"kevin9foong"},"content":"        CriteriaQuery\u003cAccountRequest\u003e cr \u003d cb.createQuery(AccountRequest.class);"},{"lineNumber":63,"author":{"gitId":"kevin9foong"},"content":"        Root\u003cAccountRequest\u003e root \u003d cr.from(AccountRequest.class);"},{"lineNumber":64,"author":{"gitId":"kevin9foong"},"content":"        cr.select(root).where(cb.and(cb.equal("},{"lineNumber":65,"author":{"gitId":"kevin9foong"},"content":"                root.get(\"email\"), email), cb.equal(root.get(\"institute\"), institute)));"},{"lineNumber":66,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":67,"author":{"gitId":"domlimm"},"content":"        TypedQuery\u003cAccountRequest\u003e query \u003d HibernateUtil.createQuery(cr);"},{"lineNumber":68,"author":{"gitId":"kevin9foong"},"content":"        return query.getResultStream().findFirst().orElse(null);"},{"lineNumber":69,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":70,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":71,"author":{"gitId":"kevin9foong"},"content":"    /**"},{"lineNumber":72,"author":{"gitId":"kevin9foong"},"content":"     * Get AccountRequest by {@code registrationKey} from database."},{"lineNumber":73,"author":{"gitId":"kevin9foong"},"content":"     */"},{"lineNumber":74,"author":{"gitId":"kevin9foong"},"content":"    public AccountRequest getAccountRequest(String registrationKey) {"},{"lineNumber":75,"author":{"gitId":"domlimm"},"content":"        CriteriaBuilder cb \u003d HibernateUtil.getCriteriaBuilder();"},{"lineNumber":76,"author":{"gitId":"kevin9foong"},"content":"        CriteriaQuery\u003cAccountRequest\u003e cr \u003d cb.createQuery(AccountRequest.class);"},{"lineNumber":77,"author":{"gitId":"kevin9foong"},"content":"        Root\u003cAccountRequest\u003e root \u003d cr.from(AccountRequest.class);"},{"lineNumber":78,"author":{"gitId":"kevin9foong"},"content":"        cr.select(root).where(cb.equal(root.get(\"registrationKey\"), registrationKey));"},{"lineNumber":79,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":80,"author":{"gitId":"domlimm"},"content":"        TypedQuery\u003cAccountRequest\u003e query \u003d HibernateUtil.createQuery(cr);"},{"lineNumber":81,"author":{"gitId":"kevin9foong"},"content":"        return query.getResultStream().findFirst().orElse(null);"},{"lineNumber":82,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":83,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":84,"author":{"gitId":"kevin9foong"},"content":"    /**"},{"lineNumber":85,"author":{"gitId":"kevin9foong"},"content":"     * Get AccountRequest with {@code createdTime} within the times {@code startTime} and {@code endTime}."},{"lineNumber":86,"author":{"gitId":"kevin9foong"},"content":"     */"},{"lineNumber":87,"author":{"gitId":"kevin9foong"},"content":"    public List\u003cAccountRequest\u003e getAccountRequests(Instant startTime, Instant endTime) {"},{"lineNumber":88,"author":{"gitId":"domlimm"},"content":"        CriteriaBuilder cb \u003d HibernateUtil.getCriteriaBuilder();"},{"lineNumber":89,"author":{"gitId":"kevin9foong"},"content":"        CriteriaQuery\u003cAccountRequest\u003e cr \u003d cb.createQuery(AccountRequest.class);"},{"lineNumber":90,"author":{"gitId":"kevin9foong"},"content":"        Root\u003cAccountRequest\u003e root \u003d cr.from(AccountRequest.class);"},{"lineNumber":91,"author":{"gitId":"kevin9foong"},"content":"        cr.select(root).where(cb.and(cb.greaterThanOrEqualTo(root.get(\"createdAt\"), startTime),"},{"lineNumber":92,"author":{"gitId":"kevin9foong"},"content":"                cb.lessThanOrEqualTo(root.get(\"createdAt\"), endTime)));"},{"lineNumber":93,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":94,"author":{"gitId":"domlimm"},"content":"        TypedQuery\u003cAccountRequest\u003e query \u003d HibernateUtil.createQuery(cr);"},{"lineNumber":95,"author":{"gitId":"kevin9foong"},"content":"        return query.getResultList();"},{"lineNumber":96,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":97,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":98,"author":{"gitId":"kevin9foong"},"content":"    /**"},{"lineNumber":99,"author":{"gitId":"kevin9foong"},"content":"     * Updates or creates (if does not exist) the AccountRequest in the database."},{"lineNumber":100,"author":{"gitId":"kevin9foong"},"content":"     */"},{"lineNumber":101,"author":{"gitId":"kevin9foong"},"content":"    public AccountRequest updateAccountRequest(AccountRequest accountRequest)"},{"lineNumber":102,"author":{"gitId":"kevin9foong"},"content":"            throws InvalidParametersException, EntityDoesNotExistException {"},{"lineNumber":103,"author":{"gitId":"kevin9foong"},"content":"        assert accountRequest !\u003d null;"},{"lineNumber":104,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":105,"author":{"gitId":"kevin9foong"},"content":"        if (!accountRequest.isValid()) {"},{"lineNumber":106,"author":{"gitId":"kevin9foong"},"content":"            throw new InvalidParametersException(accountRequest.getInvalidityInfo());"},{"lineNumber":107,"author":{"gitId":"kevin9foong"},"content":"        }"},{"lineNumber":108,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":109,"author":{"gitId":"kevin9foong"},"content":"        if (getAccountRequest(accountRequest.getEmail(), accountRequest.getInstitute()) \u003d\u003d null) {"},{"lineNumber":110,"author":{"gitId":"kevin9foong"},"content":"            throw new EntityDoesNotExistException("},{"lineNumber":111,"author":{"gitId":"kevin9foong"},"content":"                String.format(ERROR_UPDATE_NON_EXISTENT, accountRequest.toString()));"},{"lineNumber":112,"author":{"gitId":"kevin9foong"},"content":"        }"},{"lineNumber":113,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":114,"author":{"gitId":"kevin9foong"},"content":"        merge(accountRequest);"},{"lineNumber":115,"author":{"gitId":"kevin9foong"},"content":"        return accountRequest;"},{"lineNumber":116,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":117,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":118,"author":{"gitId":"kevin9foong"},"content":"    /**"},{"lineNumber":119,"author":{"gitId":"-"},"content":"     * Deletes an AccountRequest."},{"lineNumber":120,"author":{"gitId":"kevin9foong"},"content":"     */"},{"lineNumber":121,"author":{"gitId":"-"},"content":"    public void deleteAccountRequest(AccountRequest accountRequest) {"},{"lineNumber":122,"author":{"gitId":"-"},"content":"        if (accountRequest !\u003d null) {"},{"lineNumber":123,"author":{"gitId":"-"},"content":"            delete(accountRequest);"},{"lineNumber":124,"author":{"gitId":"kevin9foong"},"content":"        }"},{"lineNumber":125,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":126,"author":{"gitId":"kevin9foong"},"content":"}"}],"authorContributionMap":{"domlimm":6,"hhdqirui":2,"kevin9foong":113,"-":5}},{"path":"src/main/java/teammates/storage/sqlapi/AccountsDb.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.storage.sqlapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"hhdqirui"},"content":"import static teammates.common.util.Const.ERROR_CREATE_ENTITY_ALREADY_EXISTS;"},{"lineNumber":4,"author":{"gitId":"hhdqirui"},"content":"import static teammates.common.util.Const.ERROR_UPDATE_NON_EXISTENT;"},{"lineNumber":5,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":6,"author":{"gitId":"domlimm"},"content":"import java.util.List;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import java.util.UUID;"},{"lineNumber":8,"author":{"gitId":"-"},"content":""},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import teammates.common.util.HibernateUtil;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Account;"},{"lineNumber":14,"author":{"gitId":"-"},"content":""},{"lineNumber":15,"author":{"gitId":"domlimm"},"content":"import jakarta.persistence.criteria.CriteriaBuilder;"},{"lineNumber":16,"author":{"gitId":"domlimm"},"content":"import jakarta.persistence.criteria.CriteriaQuery;"},{"lineNumber":17,"author":{"gitId":"domlimm"},"content":"import jakarta.persistence.criteria.Root;"},{"lineNumber":18,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":19,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":20,"author":{"gitId":"-"},"content":" * Handles CRUD operations for accounts."},{"lineNumber":21,"author":{"gitId":"-"},"content":" *"},{"lineNumber":22,"author":{"gitId":"-"},"content":" * @see Account"},{"lineNumber":23,"author":{"gitId":"-"},"content":" */"},{"lineNumber":24,"author":{"gitId":"-"},"content":"public final class AccountsDb extends EntitiesDb {"},{"lineNumber":25,"author":{"gitId":"-"},"content":""},{"lineNumber":26,"author":{"gitId":"-"},"content":"    private static final AccountsDb instance \u003d new AccountsDb();"},{"lineNumber":27,"author":{"gitId":"-"},"content":""},{"lineNumber":28,"author":{"gitId":"-"},"content":"    private AccountsDb() {"},{"lineNumber":29,"author":{"gitId":"-"},"content":"        // prevent initialization"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":31,"author":{"gitId":"-"},"content":""},{"lineNumber":32,"author":{"gitId":"-"},"content":"    public static AccountsDb inst() {"},{"lineNumber":33,"author":{"gitId":"-"},"content":"        return instance;"},{"lineNumber":34,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":35,"author":{"gitId":"-"},"content":""},{"lineNumber":36,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":37,"author":{"gitId":"-"},"content":"     * Returns an Account with the {@code id} or null if it does not exist."},{"lineNumber":38,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":39,"author":{"gitId":"-"},"content":"    public Account getAccount(UUID id) {"},{"lineNumber":40,"author":{"gitId":"-"},"content":"        assert id !\u003d null;"},{"lineNumber":41,"author":{"gitId":"-"},"content":""},{"lineNumber":42,"author":{"gitId":"-"},"content":"        return HibernateUtil.get(Account.class, id);"},{"lineNumber":43,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":44,"author":{"gitId":"-"},"content":""},{"lineNumber":45,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":46,"author":{"gitId":"-"},"content":"     * Returns an Account with the {@code googleId} or null if it does not exist."},{"lineNumber":47,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":48,"author":{"gitId":"-"},"content":"    public Account getAccountByGoogleId(String googleId) {"},{"lineNumber":49,"author":{"gitId":"-"},"content":"        assert googleId !\u003d null;"},{"lineNumber":50,"author":{"gitId":"-"},"content":""},{"lineNumber":51,"author":{"gitId":"-"},"content":"        return HibernateUtil.getBySimpleNaturalId(Account.class, googleId);"},{"lineNumber":52,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":53,"author":{"gitId":"-"},"content":""},{"lineNumber":54,"author":{"gitId":"domlimm"},"content":"    /**"},{"lineNumber":55,"author":{"gitId":"domlimm"},"content":"     * Gets accounts based on email."},{"lineNumber":56,"author":{"gitId":"domlimm"},"content":"     */"},{"lineNumber":57,"author":{"gitId":"domlimm"},"content":"    public List\u003cAccount\u003e getAccountsByEmail(String email) {"},{"lineNumber":58,"author":{"gitId":"domlimm"},"content":"        assert email !\u003d null;"},{"lineNumber":59,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":60,"author":{"gitId":"domlimm"},"content":"        CriteriaBuilder cb \u003d HibernateUtil.getCriteriaBuilder();"},{"lineNumber":61,"author":{"gitId":"domlimm"},"content":"        CriteriaQuery\u003cAccount\u003e cr \u003d cb.createQuery(Account.class);"},{"lineNumber":62,"author":{"gitId":"domlimm"},"content":"        Root\u003cAccount\u003e accountRoot \u003d cr.from(Account.class);"},{"lineNumber":63,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":64,"author":{"gitId":"domlimm"},"content":"        cr.select(accountRoot).where(cb.equal(accountRoot.get(\"email\"), email));"},{"lineNumber":65,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":66,"author":{"gitId":"domlimm"},"content":"        return HibernateUtil.createQuery(cr).getResultList();"},{"lineNumber":67,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":68,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":69,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":70,"author":{"gitId":"-"},"content":"     * Creates an Account."},{"lineNumber":71,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":72,"author":{"gitId":"-"},"content":"    public Account createAccount(Account account) throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":73,"author":{"gitId":"-"},"content":"        assert account !\u003d null;"},{"lineNumber":74,"author":{"gitId":"-"},"content":""},{"lineNumber":75,"author":{"gitId":"-"},"content":"        if (!account.isValid()) {"},{"lineNumber":76,"author":{"gitId":"-"},"content":"            throw new InvalidParametersException(account.getInvalidityInfo());"},{"lineNumber":77,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":78,"author":{"gitId":"-"},"content":""},{"lineNumber":79,"author":{"gitId":"-"},"content":"        if (getAccountByGoogleId(account.getGoogleId()) !\u003d null) {"},{"lineNumber":80,"author":{"gitId":"-"},"content":"            throw new EntityAlreadyExistsException(String.format(ERROR_CREATE_ENTITY_ALREADY_EXISTS, account.toString()));"},{"lineNumber":81,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":82,"author":{"gitId":"-"},"content":""},{"lineNumber":83,"author":{"gitId":"-"},"content":"        persist(account);"},{"lineNumber":84,"author":{"gitId":"-"},"content":"        return account;"},{"lineNumber":85,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":86,"author":{"gitId":"-"},"content":""},{"lineNumber":87,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":88,"author":{"gitId":"-"},"content":"     * Saves an updated {@code Account} to the db."},{"lineNumber":89,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":90,"author":{"gitId":"-"},"content":"    public Account updateAccount(Account account) throws InvalidParametersException, EntityDoesNotExistException {"},{"lineNumber":91,"author":{"gitId":"-"},"content":"        assert account !\u003d null;"},{"lineNumber":92,"author":{"gitId":"-"},"content":""},{"lineNumber":93,"author":{"gitId":"-"},"content":"        if (!account.isValid()) {"},{"lineNumber":94,"author":{"gitId":"-"},"content":"            throw new InvalidParametersException(account.getInvalidityInfo());"},{"lineNumber":95,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":96,"author":{"gitId":"-"},"content":""},{"lineNumber":97,"author":{"gitId":"-"},"content":"        if (getAccount(account.getId()) \u003d\u003d null) {"},{"lineNumber":98,"author":{"gitId":"-"},"content":"            throw new EntityDoesNotExistException(ERROR_UPDATE_NON_EXISTENT + account.toString());"},{"lineNumber":99,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":100,"author":{"gitId":"-"},"content":""},{"lineNumber":101,"author":{"gitId":"-"},"content":"        return merge(account);"},{"lineNumber":102,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":103,"author":{"gitId":"-"},"content":""},{"lineNumber":104,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":105,"author":{"gitId":"-"},"content":"     * Deletes an Account."},{"lineNumber":106,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":107,"author":{"gitId":"-"},"content":"    public void deleteAccount(Account account) {"},{"lineNumber":108,"author":{"gitId":"-"},"content":"        if (account !\u003d null) {"},{"lineNumber":109,"author":{"gitId":"-"},"content":"            delete(account);"},{"lineNumber":110,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":111,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":112,"author":{"gitId":"-"},"content":""},{"lineNumber":113,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"domlimm":20,"hhdqirui":3,"-":90}},{"path":"src/main/java/teammates/storage/sqlapi/CoursesDb.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.storage.sqlapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"hhdqirui"},"content":"import static teammates.common.util.Const.ERROR_CREATE_ENTITY_ALREADY_EXISTS;"},{"lineNumber":4,"author":{"gitId":"hhdqirui"},"content":"import static teammates.common.util.Const.ERROR_UPDATE_NON_EXISTENT;"},{"lineNumber":5,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":6,"author":{"gitId":"cedricongjh"},"content":"import java.util.List;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import java.util.UUID;"},{"lineNumber":8,"author":{"gitId":"-"},"content":""},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import teammates.common.util.HibernateUtil;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Course;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Section;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Team;"},{"lineNumber":16,"author":{"gitId":"-"},"content":""},{"lineNumber":17,"author":{"gitId":"-"},"content":"import jakarta.persistence.criteria.CriteriaBuilder;"},{"lineNumber":18,"author":{"gitId":"-"},"content":"import jakarta.persistence.criteria.CriteriaQuery;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"import jakarta.persistence.criteria.Join;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"import jakarta.persistence.criteria.Root;"},{"lineNumber":21,"author":{"gitId":"-"},"content":""},{"lineNumber":22,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":23,"author":{"gitId":"-"},"content":" * Handles CRUD operations for courses."},{"lineNumber":24,"author":{"gitId":"-"},"content":" *"},{"lineNumber":25,"author":{"gitId":"-"},"content":" * @see Course"},{"lineNumber":26,"author":{"gitId":"-"},"content":" */"},{"lineNumber":27,"author":{"gitId":"-"},"content":"public final class CoursesDb extends EntitiesDb {"},{"lineNumber":28,"author":{"gitId":"-"},"content":""},{"lineNumber":29,"author":{"gitId":"-"},"content":"    private static final CoursesDb instance \u003d new CoursesDb();"},{"lineNumber":30,"author":{"gitId":"-"},"content":""},{"lineNumber":31,"author":{"gitId":"-"},"content":"    private CoursesDb() {"},{"lineNumber":32,"author":{"gitId":"-"},"content":"        // prevent initialization"},{"lineNumber":33,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":34,"author":{"gitId":"-"},"content":""},{"lineNumber":35,"author":{"gitId":"-"},"content":"    public static CoursesDb inst() {"},{"lineNumber":36,"author":{"gitId":"-"},"content":"        return instance;"},{"lineNumber":37,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":38,"author":{"gitId":"-"},"content":""},{"lineNumber":39,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":40,"author":{"gitId":"-"},"content":"     * Returns a course with the {@code courseID} or null if it does not exist."},{"lineNumber":41,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":42,"author":{"gitId":"-"},"content":"    public Course getCourse(String courseId) {"},{"lineNumber":43,"author":{"gitId":"-"},"content":"        assert courseId !\u003d null;"},{"lineNumber":44,"author":{"gitId":"-"},"content":""},{"lineNumber":45,"author":{"gitId":"-"},"content":"        return HibernateUtil.get(Course.class, courseId);"},{"lineNumber":46,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":47,"author":{"gitId":"-"},"content":""},{"lineNumber":48,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":49,"author":{"gitId":"-"},"content":"     * Creates a course."},{"lineNumber":50,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":51,"author":{"gitId":"-"},"content":"    public Course createCourse(Course course) throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":52,"author":{"gitId":"-"},"content":"        assert course !\u003d null;"},{"lineNumber":53,"author":{"gitId":"-"},"content":""},{"lineNumber":54,"author":{"gitId":"-"},"content":"        if (!course.isValid()) {"},{"lineNumber":55,"author":{"gitId":"-"},"content":"            throw new InvalidParametersException(course.getInvalidityInfo());"},{"lineNumber":56,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":57,"author":{"gitId":"-"},"content":""},{"lineNumber":58,"author":{"gitId":"-"},"content":"        if (getCourse(course.getId()) !\u003d null) {"},{"lineNumber":59,"author":{"gitId":"-"},"content":"            throw new EntityAlreadyExistsException(String.format(ERROR_CREATE_ENTITY_ALREADY_EXISTS, course.toString()));"},{"lineNumber":60,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":61,"author":{"gitId":"-"},"content":""},{"lineNumber":62,"author":{"gitId":"-"},"content":"        persist(course);"},{"lineNumber":63,"author":{"gitId":"-"},"content":"        return course;"},{"lineNumber":64,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":65,"author":{"gitId":"-"},"content":""},{"lineNumber":66,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":67,"author":{"gitId":"-"},"content":"     * Saves an updated {@code Course} to the db."},{"lineNumber":68,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":69,"author":{"gitId":"-"},"content":"    public Course updateCourse(Course course) throws InvalidParametersException, EntityDoesNotExistException {"},{"lineNumber":70,"author":{"gitId":"-"},"content":"        assert course !\u003d null;"},{"lineNumber":71,"author":{"gitId":"-"},"content":""},{"lineNumber":72,"author":{"gitId":"-"},"content":"        if (!course.isValid()) {"},{"lineNumber":73,"author":{"gitId":"-"},"content":"            throw new InvalidParametersException(course.getInvalidityInfo());"},{"lineNumber":74,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":75,"author":{"gitId":"-"},"content":""},{"lineNumber":76,"author":{"gitId":"-"},"content":"        if (getCourse(course.getId()) \u003d\u003d null) {"},{"lineNumber":77,"author":{"gitId":"-"},"content":"            throw new EntityDoesNotExistException(ERROR_UPDATE_NON_EXISTENT);"},{"lineNumber":78,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":79,"author":{"gitId":"-"},"content":""},{"lineNumber":80,"author":{"gitId":"-"},"content":"        return merge(course);"},{"lineNumber":81,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":82,"author":{"gitId":"-"},"content":""},{"lineNumber":83,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":84,"author":{"gitId":"-"},"content":"     * Deletes a course."},{"lineNumber":85,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":86,"author":{"gitId":"-"},"content":"    public void deleteCourse(Course course) {"},{"lineNumber":87,"author":{"gitId":"-"},"content":"        if (course !\u003d null) {"},{"lineNumber":88,"author":{"gitId":"-"},"content":"            delete(course);"},{"lineNumber":89,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":90,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":91,"author":{"gitId":"-"},"content":""},{"lineNumber":92,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":93,"author":{"gitId":"-"},"content":"     * Creates a section."},{"lineNumber":94,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":95,"author":{"gitId":"-"},"content":"    public Section createSection(Section section) throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":96,"author":{"gitId":"-"},"content":"        assert section !\u003d null;"},{"lineNumber":97,"author":{"gitId":"-"},"content":""},{"lineNumber":98,"author":{"gitId":"-"},"content":"        if (!section.isValid()) {"},{"lineNumber":99,"author":{"gitId":"-"},"content":"            throw new InvalidParametersException(section.getInvalidityInfo());"},{"lineNumber":100,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":101,"author":{"gitId":"-"},"content":""},{"lineNumber":102,"author":{"gitId":"-"},"content":"        if (getSectionByName(section.getCourse().getId(), section.getName()) !\u003d null) {"},{"lineNumber":103,"author":{"gitId":"-"},"content":"            throw new EntityAlreadyExistsException(String.format(ERROR_CREATE_ENTITY_ALREADY_EXISTS, section.toString()));"},{"lineNumber":104,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":105,"author":{"gitId":"-"},"content":""},{"lineNumber":106,"author":{"gitId":"-"},"content":"        persist(section);"},{"lineNumber":107,"author":{"gitId":"-"},"content":"        return section;"},{"lineNumber":108,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":109,"author":{"gitId":"-"},"content":""},{"lineNumber":110,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":111,"author":{"gitId":"-"},"content":"     * Get section by name."},{"lineNumber":112,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":113,"author":{"gitId":"-"},"content":"    public Section getSectionByName(String courseId, String sectionName) {"},{"lineNumber":114,"author":{"gitId":"-"},"content":"        assert courseId !\u003d null;"},{"lineNumber":115,"author":{"gitId":"-"},"content":"        assert sectionName !\u003d null;"},{"lineNumber":116,"author":{"gitId":"-"},"content":""},{"lineNumber":117,"author":{"gitId":"-"},"content":"        CriteriaBuilder cb \u003d HibernateUtil.getCriteriaBuilder();"},{"lineNumber":118,"author":{"gitId":"-"},"content":"        CriteriaQuery\u003cSection\u003e cr \u003d cb.createQuery(Section.class);"},{"lineNumber":119,"author":{"gitId":"-"},"content":"        Root\u003cSection\u003e sectionRoot \u003d cr.from(Section.class);"},{"lineNumber":120,"author":{"gitId":"-"},"content":"        Join\u003cSection, Course\u003e courseJoin \u003d sectionRoot.join(\"course\");"},{"lineNumber":121,"author":{"gitId":"-"},"content":""},{"lineNumber":122,"author":{"gitId":"-"},"content":"        cr.select(sectionRoot).where(cb.and("},{"lineNumber":123,"author":{"gitId":"-"},"content":"                cb.equal(courseJoin.get(\"id\"), courseId),"},{"lineNumber":124,"author":{"gitId":"-"},"content":"                cb.equal(sectionRoot.get(\"name\"), sectionName)));"},{"lineNumber":125,"author":{"gitId":"-"},"content":""},{"lineNumber":126,"author":{"gitId":"-"},"content":"        return HibernateUtil.createQuery(cr).getResultStream().findFirst().orElse(null);"},{"lineNumber":127,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":128,"author":{"gitId":"-"},"content":""},{"lineNumber":129,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":130,"author":{"gitId":"-"},"content":"     * Get section by {@code courseId} and {@code teamName}."},{"lineNumber":131,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":132,"author":{"gitId":"-"},"content":"    public Section getSectionByCourseIdAndTeam(String courseId, String teamName) {"},{"lineNumber":133,"author":{"gitId":"-"},"content":"        assert courseId !\u003d null;"},{"lineNumber":134,"author":{"gitId":"-"},"content":"        assert teamName !\u003d null;"},{"lineNumber":135,"author":{"gitId":"-"},"content":""},{"lineNumber":136,"author":{"gitId":"-"},"content":"        CriteriaBuilder cb \u003d HibernateUtil.getCriteriaBuilder();"},{"lineNumber":137,"author":{"gitId":"-"},"content":"        CriteriaQuery\u003cSection\u003e cr \u003d cb.createQuery(Section.class);"},{"lineNumber":138,"author":{"gitId":"-"},"content":"        Root\u003cSection\u003e sectionRoot \u003d cr.from(Section.class);"},{"lineNumber":139,"author":{"gitId":"-"},"content":"        Join\u003cSection, Course\u003e courseJoin \u003d sectionRoot.join(\"course\");"},{"lineNumber":140,"author":{"gitId":"-"},"content":"        Join\u003cSection, Team\u003e teamJoin \u003d sectionRoot.join(\"teams\");"},{"lineNumber":141,"author":{"gitId":"-"},"content":""},{"lineNumber":142,"author":{"gitId":"-"},"content":"        cr.select(sectionRoot).where(cb.and("},{"lineNumber":143,"author":{"gitId":"-"},"content":"                cb.equal(courseJoin.get(\"id\"), courseId),"},{"lineNumber":144,"author":{"gitId":"-"},"content":"                cb.equal(teamJoin.get(\"name\"), teamName)));"},{"lineNumber":145,"author":{"gitId":"-"},"content":""},{"lineNumber":146,"author":{"gitId":"-"},"content":"        return HibernateUtil.createQuery(cr).getResultStream().findFirst().orElse(null);"},{"lineNumber":147,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":148,"author":{"gitId":"-"},"content":""},{"lineNumber":149,"author":{"gitId":"cedricongjh"},"content":"    /**"},{"lineNumber":150,"author":{"gitId":"cedricongjh"},"content":"     * Get teams by {@code section}."},{"lineNumber":151,"author":{"gitId":"cedricongjh"},"content":"     */"},{"lineNumber":152,"author":{"gitId":"cedricongjh"},"content":"    public List\u003cTeam\u003e getTeamsForSection(Section section) {"},{"lineNumber":153,"author":{"gitId":"cedricongjh"},"content":"        assert section !\u003d null;"},{"lineNumber":154,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":155,"author":{"gitId":"cedricongjh"},"content":"        CriteriaBuilder cb \u003d HibernateUtil.getCriteriaBuilder();"},{"lineNumber":156,"author":{"gitId":"cedricongjh"},"content":"        CriteriaQuery\u003cTeam\u003e cr \u003d cb.createQuery(Team.class);"},{"lineNumber":157,"author":{"gitId":"cedricongjh"},"content":"        Root\u003cTeam\u003e teamRoot \u003d cr.from(Team.class);"},{"lineNumber":158,"author":{"gitId":"cedricongjh"},"content":"        Join\u003cTeam, Section\u003e teamJoin \u003d teamRoot.join(\"section\");"},{"lineNumber":159,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":160,"author":{"gitId":"cedricongjh"},"content":"        cr.select(teamRoot).where("},{"lineNumber":161,"author":{"gitId":"cedricongjh"},"content":"                cb.equal(teamJoin.get(\"id\"), section.getId()));"},{"lineNumber":162,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":163,"author":{"gitId":"cedricongjh"},"content":"        return HibernateUtil.createQuery(cr).getResultList();"},{"lineNumber":164,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":165,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":166,"author":{"gitId":"cedricongjh"},"content":"    /**"},{"lineNumber":167,"author":{"gitId":"cedricongjh"},"content":"     * Get teams by {@code course}."},{"lineNumber":168,"author":{"gitId":"cedricongjh"},"content":"     */"},{"lineNumber":169,"author":{"gitId":"cedricongjh"},"content":"    public List\u003cTeam\u003e getTeamsForCourse(String courseId) {"},{"lineNumber":170,"author":{"gitId":"cedricongjh"},"content":"        assert courseId !\u003d null;"},{"lineNumber":171,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":172,"author":{"gitId":"cedricongjh"},"content":"        CriteriaBuilder cb \u003d HibernateUtil.getCriteriaBuilder();"},{"lineNumber":173,"author":{"gitId":"cedricongjh"},"content":"        CriteriaQuery\u003cTeam\u003e cr \u003d cb.createQuery(Team.class);"},{"lineNumber":174,"author":{"gitId":"cedricongjh"},"content":"        Root\u003cTeam\u003e teamRoot \u003d cr.from(Team.class);"},{"lineNumber":175,"author":{"gitId":"cedricongjh"},"content":"        Join\u003cTeam, Section\u003e sectionJoin \u003d teamRoot.join(\"section\");"},{"lineNumber":176,"author":{"gitId":"cedricongjh"},"content":"        Join\u003cSection, Course\u003e courseJoin \u003d sectionJoin.join(\"course\");"},{"lineNumber":177,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":178,"author":{"gitId":"cedricongjh"},"content":"        cr.select(teamRoot).where("},{"lineNumber":179,"author":{"gitId":"cedricongjh"},"content":"                cb.equal(courseJoin.get(\"id\"), courseId));"},{"lineNumber":180,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":181,"author":{"gitId":"cedricongjh"},"content":"        return HibernateUtil.createQuery(cr).getResultList();"},{"lineNumber":182,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":183,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":184,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":185,"author":{"gitId":"-"},"content":"     * Creates a team."},{"lineNumber":186,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":187,"author":{"gitId":"-"},"content":"    public Team createTeam(Team team) throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":188,"author":{"gitId":"-"},"content":"        assert team !\u003d null;"},{"lineNumber":189,"author":{"gitId":"-"},"content":""},{"lineNumber":190,"author":{"gitId":"-"},"content":"        if (!team.isValid()) {"},{"lineNumber":191,"author":{"gitId":"-"},"content":"            throw new InvalidParametersException(team.getInvalidityInfo());"},{"lineNumber":192,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":193,"author":{"gitId":"-"},"content":""},{"lineNumber":194,"author":{"gitId":"-"},"content":"        if (getTeamByName(team.getSection().getId(), team.getName()) !\u003d null) {"},{"lineNumber":195,"author":{"gitId":"-"},"content":"            throw new EntityAlreadyExistsException(String.format(ERROR_CREATE_ENTITY_ALREADY_EXISTS, team.toString()));"},{"lineNumber":196,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":197,"author":{"gitId":"-"},"content":""},{"lineNumber":198,"author":{"gitId":"-"},"content":"        persist(team);"},{"lineNumber":199,"author":{"gitId":"-"},"content":"        return team;"},{"lineNumber":200,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":201,"author":{"gitId":"-"},"content":""},{"lineNumber":202,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":203,"author":{"gitId":"-"},"content":"     * Gets a team by name."},{"lineNumber":204,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":205,"author":{"gitId":"-"},"content":"    public Team getTeamByName(UUID sectionId, String teamName) {"},{"lineNumber":206,"author":{"gitId":"-"},"content":"        assert sectionId !\u003d null;"},{"lineNumber":207,"author":{"gitId":"-"},"content":"        assert teamName !\u003d null;"},{"lineNumber":208,"author":{"gitId":"-"},"content":""},{"lineNumber":209,"author":{"gitId":"-"},"content":"        CriteriaBuilder cb \u003d HibernateUtil.getCriteriaBuilder();"},{"lineNumber":210,"author":{"gitId":"-"},"content":"        CriteriaQuery\u003cTeam\u003e cr \u003d cb.createQuery(Team.class);"},{"lineNumber":211,"author":{"gitId":"-"},"content":"        Root\u003cTeam\u003e teamRoot \u003d cr.from(Team.class);"},{"lineNumber":212,"author":{"gitId":"-"},"content":"        Join\u003cTeam, Section\u003e sectionJoin \u003d teamRoot.join(\"section\");"},{"lineNumber":213,"author":{"gitId":"-"},"content":""},{"lineNumber":214,"author":{"gitId":"-"},"content":"        cr.select(teamRoot).where(cb.and("},{"lineNumber":215,"author":{"gitId":"-"},"content":"                cb.equal(sectionJoin.get(\"id\"), sectionId),"},{"lineNumber":216,"author":{"gitId":"-"},"content":"                cb.equal(teamRoot.get(\"name\"), teamName)));"},{"lineNumber":217,"author":{"gitId":"-"},"content":""},{"lineNumber":218,"author":{"gitId":"-"},"content":"        return HibernateUtil.createQuery(cr).getResultStream().findFirst().orElse(null);"},{"lineNumber":219,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":220,"author":{"gitId":"-"},"content":""},{"lineNumber":221,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"cedricongjh":36,"hhdqirui":3,"-":182}},{"path":"src/main/java/teammates/storage/sqlapi/DeadlineExtensionsDb.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"EuniceSim142"},"content":"package teammates.storage.sqlapi;"},{"lineNumber":2,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":3,"author":{"gitId":"hhdqirui"},"content":"import static teammates.common.util.Const.ERROR_CREATE_ENTITY_ALREADY_EXISTS;"},{"lineNumber":4,"author":{"gitId":"hhdqirui"},"content":"import static teammates.common.util.Const.ERROR_UPDATE_NON_EXISTENT;"},{"lineNumber":5,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":6,"author":{"gitId":"-"},"content":"import java.util.UUID;"},{"lineNumber":7,"author":{"gitId":"-"},"content":""},{"lineNumber":8,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":9,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":10,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":11,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.util.HibernateUtil;"},{"lineNumber":12,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.DeadlineExtension;"},{"lineNumber":13,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.FeedbackSession;"},{"lineNumber":14,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.User;"},{"lineNumber":15,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":16,"author":{"gitId":"EuniceSim142"},"content":"import jakarta.persistence.TypedQuery;"},{"lineNumber":17,"author":{"gitId":"EuniceSim142"},"content":"import jakarta.persistence.criteria.CriteriaBuilder;"},{"lineNumber":18,"author":{"gitId":"EuniceSim142"},"content":"import jakarta.persistence.criteria.CriteriaQuery;"},{"lineNumber":19,"author":{"gitId":"EuniceSim142"},"content":"import jakarta.persistence.criteria.Join;"},{"lineNumber":20,"author":{"gitId":"EuniceSim142"},"content":"import jakarta.persistence.criteria.Root;"},{"lineNumber":21,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":22,"author":{"gitId":"EuniceSim142"},"content":"/**"},{"lineNumber":23,"author":{"gitId":"EuniceSim142"},"content":" * Handles CRUD operations for deadline extensions."},{"lineNumber":24,"author":{"gitId":"EuniceSim142"},"content":" *"},{"lineNumber":25,"author":{"gitId":"EuniceSim142"},"content":" * @see DeadlineExtension"},{"lineNumber":26,"author":{"gitId":"EuniceSim142"},"content":" */"},{"lineNumber":27,"author":{"gitId":"-"},"content":"public final class DeadlineExtensionsDb extends EntitiesDb {"},{"lineNumber":28,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":29,"author":{"gitId":"EuniceSim142"},"content":"    private static final DeadlineExtensionsDb instance \u003d new DeadlineExtensionsDb();"},{"lineNumber":30,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":31,"author":{"gitId":"EuniceSim142"},"content":"    private DeadlineExtensionsDb() {"},{"lineNumber":32,"author":{"gitId":"EuniceSim142"},"content":"        // prevent initialization"},{"lineNumber":33,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":34,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":35,"author":{"gitId":"EuniceSim142"},"content":"    public static DeadlineExtensionsDb inst() {"},{"lineNumber":36,"author":{"gitId":"EuniceSim142"},"content":"        return instance;"},{"lineNumber":37,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":38,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":39,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":40,"author":{"gitId":"EuniceSim142"},"content":"     * Creates a deadline extension."},{"lineNumber":41,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":42,"author":{"gitId":"EuniceSim142"},"content":"    public DeadlineExtension createDeadlineExtension(DeadlineExtension de)"},{"lineNumber":43,"author":{"gitId":"EuniceSim142"},"content":"            throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":44,"author":{"gitId":"EuniceSim142"},"content":"        assert de !\u003d null;"},{"lineNumber":45,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":46,"author":{"gitId":"EuniceSim142"},"content":"        if (!de.isValid()) {"},{"lineNumber":47,"author":{"gitId":"EuniceSim142"},"content":"            throw new InvalidParametersException(de.getInvalidityInfo());"},{"lineNumber":48,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":49,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":50,"author":{"gitId":"-"},"content":"        if (getDeadlineExtension(de.getId()) !\u003d null) {"},{"lineNumber":51,"author":{"gitId":"EuniceSim142"},"content":"            throw new EntityAlreadyExistsException("},{"lineNumber":52,"author":{"gitId":"EuniceSim142"},"content":"                    String.format(ERROR_CREATE_ENTITY_ALREADY_EXISTS, de.toString()));"},{"lineNumber":53,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":54,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":55,"author":{"gitId":"EuniceSim142"},"content":"        persist(de);"},{"lineNumber":56,"author":{"gitId":"EuniceSim142"},"content":"        return de;"},{"lineNumber":57,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":58,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":59,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":60,"author":{"gitId":"EuniceSim142"},"content":"     * Gets a deadline extension by {@code id}."},{"lineNumber":61,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":62,"author":{"gitId":"-"},"content":"    public DeadlineExtension getDeadlineExtension(UUID id) {"},{"lineNumber":63,"author":{"gitId":"EuniceSim142"},"content":"        assert id !\u003d null;"},{"lineNumber":64,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":65,"author":{"gitId":"-"},"content":"        return HibernateUtil.get(DeadlineExtension.class, id);"},{"lineNumber":66,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":67,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":68,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":69,"author":{"gitId":"EuniceSim142"},"content":"     * Get DeadlineExtension by {@code userId} and {@code feedbackSessionId}."},{"lineNumber":70,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":71,"author":{"gitId":"-"},"content":"    public DeadlineExtension getDeadlineExtension(UUID userId, UUID feedbackSessionId) {"},{"lineNumber":72,"author":{"gitId":"domlimm"},"content":"        CriteriaBuilder cb \u003d HibernateUtil.getCriteriaBuilder();"},{"lineNumber":73,"author":{"gitId":"EuniceSim142"},"content":"        CriteriaQuery\u003cDeadlineExtension\u003e cr \u003d cb.createQuery(DeadlineExtension.class);"},{"lineNumber":74,"author":{"gitId":"EuniceSim142"},"content":"        Root\u003cDeadlineExtension\u003e root \u003d cr.from(DeadlineExtension.class);"},{"lineNumber":75,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":76,"author":{"gitId":"EuniceSim142"},"content":"        cr.select(root).where(cb.and("},{"lineNumber":77,"author":{"gitId":"EuniceSim142"},"content":"                cb.equal(root.get(\"sessionId\"), feedbackSessionId),"},{"lineNumber":78,"author":{"gitId":"EuniceSim142"},"content":"                cb.equal(root.get(\"userId\"), userId)));"},{"lineNumber":79,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":80,"author":{"gitId":"domlimm"},"content":"        TypedQuery\u003cDeadlineExtension\u003e query \u003d HibernateUtil.createQuery(cr);"},{"lineNumber":81,"author":{"gitId":"EuniceSim142"},"content":"        return query.getResultStream().findFirst().orElse(null);"},{"lineNumber":82,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":83,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":84,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":85,"author":{"gitId":"EuniceSim142"},"content":"     * Saves an updated {@code DeadlineExtension} to the db."},{"lineNumber":86,"author":{"gitId":"EuniceSim142"},"content":"     *"},{"lineNumber":87,"author":{"gitId":"EuniceSim142"},"content":"     * @return updated deadline extension"},{"lineNumber":88,"author":{"gitId":"EuniceSim142"},"content":"     * @throws InvalidParametersException  if attributes to update are not valid"},{"lineNumber":89,"author":{"gitId":"EuniceSim142"},"content":"     * @throws EntityDoesNotExistException if the deadline extension cannot be found"},{"lineNumber":90,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":91,"author":{"gitId":"EuniceSim142"},"content":"    public DeadlineExtension updateDeadlineExtension(DeadlineExtension deadlineExtension)"},{"lineNumber":92,"author":{"gitId":"EuniceSim142"},"content":"            throws InvalidParametersException, EntityDoesNotExistException {"},{"lineNumber":93,"author":{"gitId":"EuniceSim142"},"content":"        assert deadlineExtension !\u003d null;"},{"lineNumber":94,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":95,"author":{"gitId":"EuniceSim142"},"content":"        if (!deadlineExtension.isValid()) {"},{"lineNumber":96,"author":{"gitId":"EuniceSim142"},"content":"            throw new InvalidParametersException(deadlineExtension.getInvalidityInfo());"},{"lineNumber":97,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":98,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":99,"author":{"gitId":"EuniceSim142"},"content":"        if (getDeadlineExtension(deadlineExtension.getId()) \u003d\u003d null) {"},{"lineNumber":100,"author":{"gitId":"EuniceSim142"},"content":"            throw new EntityDoesNotExistException(ERROR_UPDATE_NON_EXISTENT);"},{"lineNumber":101,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":102,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":103,"author":{"gitId":"EuniceSim142"},"content":"        return merge(deadlineExtension);"},{"lineNumber":104,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":105,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":106,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":107,"author":{"gitId":"EuniceSim142"},"content":"     * Deletes a deadline extension."},{"lineNumber":108,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":109,"author":{"gitId":"EuniceSim142"},"content":"    public void deleteDeadlineExtension(DeadlineExtension de) {"},{"lineNumber":110,"author":{"gitId":"EuniceSim142"},"content":"        if (de !\u003d null) {"},{"lineNumber":111,"author":{"gitId":"EuniceSim142"},"content":"            delete(de);"},{"lineNumber":112,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":113,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":114,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":115,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":116,"author":{"gitId":"EuniceSim142"},"content":"     * Gets the DeadlineExtension with the specified {@code feedbackSessionId} and {@code userId} if it exists."},{"lineNumber":117,"author":{"gitId":"EuniceSim142"},"content":"     * Otherwise, return null."},{"lineNumber":118,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":119,"author":{"gitId":"EuniceSim142"},"content":"    public DeadlineExtension getDeadlineExtensionForUser(UUID feedbackSessionId, UUID userId) {"},{"lineNumber":120,"author":{"gitId":"EuniceSim142"},"content":"        assert feedbackSessionId !\u003d null;"},{"lineNumber":121,"author":{"gitId":"EuniceSim142"},"content":"        assert userId !\u003d null;"},{"lineNumber":122,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":123,"author":{"gitId":"EuniceSim142"},"content":"        CriteriaBuilder cb \u003d HibernateUtil.getCriteriaBuilder();"},{"lineNumber":124,"author":{"gitId":"EuniceSim142"},"content":"        CriteriaQuery\u003cDeadlineExtension\u003e cr \u003d cb.createQuery(DeadlineExtension.class);"},{"lineNumber":125,"author":{"gitId":"EuniceSim142"},"content":"        Root\u003cDeadlineExtension\u003e deadlineExtensionRoot \u003d cr.from(DeadlineExtension.class);"},{"lineNumber":126,"author":{"gitId":"EuniceSim142"},"content":"        Join\u003cDeadlineExtension, User\u003e userJoin \u003d deadlineExtensionRoot.join(\"user\");"},{"lineNumber":127,"author":{"gitId":"EuniceSim142"},"content":"        Join\u003cDeadlineExtension, FeedbackSession\u003e sessionJoin \u003d deadlineExtensionRoot.join(\"feedbackSession\");"},{"lineNumber":128,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":129,"author":{"gitId":"EuniceSim142"},"content":"        cr.select(deadlineExtensionRoot).where(cb.and("},{"lineNumber":130,"author":{"gitId":"EuniceSim142"},"content":"                cb.equal(sessionJoin.get(\"id\"), feedbackSessionId),"},{"lineNumber":131,"author":{"gitId":"EuniceSim142"},"content":"                cb.equal(userJoin.get(\"id\"), userId)));"},{"lineNumber":132,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":133,"author":{"gitId":"EuniceSim142"},"content":"        return HibernateUtil.createQuery(cr).getResultStream().findFirst().orElse(null);"},{"lineNumber":134,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":135,"author":{"gitId":"EuniceSim142"},"content":"}"}],"authorContributionMap":{"domlimm":2,"EuniceSim142":123,"hhdqirui":3,"-":7}},{"path":"src/main/java/teammates/storage/sqlapi/EntitiesDb.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":""},{"lineNumber":2,"author":{"gitId":"-"},"content":"package teammates.storage.sqlapi;"},{"lineNumber":3,"author":{"gitId":"-"},"content":""},{"lineNumber":4,"author":{"gitId":"-"},"content":"import teammates.common.util.HibernateUtil;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import teammates.common.util.Logger;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.BaseEntity;"},{"lineNumber":7,"author":{"gitId":"-"},"content":""},{"lineNumber":8,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":9,"author":{"gitId":"-"},"content":" * Base class for all classes performing CRUD operations against the database."},{"lineNumber":10,"author":{"gitId":"-"},"content":" */"},{"lineNumber":11,"author":{"gitId":"-"},"content":"class EntitiesDb {"},{"lineNumber":12,"author":{"gitId":"-"},"content":""},{"lineNumber":13,"author":{"gitId":"-"},"content":"    static final Logger log \u003d Logger.getLogger();"},{"lineNumber":14,"author":{"gitId":"-"},"content":""},{"lineNumber":15,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":16,"author":{"gitId":"-"},"content":"     * Copy the state of the given object onto the persistent object with the same identifier."},{"lineNumber":17,"author":{"gitId":"-"},"content":"     * If there is no persistent instance currently associated with the session, it will be loaded."},{"lineNumber":18,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":19,"author":{"gitId":"-"},"content":"    protected \u003cT extends BaseEntity\u003e T merge(T entity) {"},{"lineNumber":20,"author":{"gitId":"-"},"content":"        assert entity !\u003d null;"},{"lineNumber":21,"author":{"gitId":"-"},"content":""},{"lineNumber":22,"author":{"gitId":"domlimm"},"content":"        T newEntity \u003d HibernateUtil.merge(entity);"},{"lineNumber":23,"author":{"gitId":"-"},"content":"        log.info(\"Entity saved: \" + entity.toString());"},{"lineNumber":24,"author":{"gitId":"-"},"content":"        return newEntity;"},{"lineNumber":25,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":26,"author":{"gitId":"-"},"content":""},{"lineNumber":27,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":28,"author":{"gitId":"-"},"content":"     * Associate {@code entity} with the persistence context."},{"lineNumber":29,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    protected void persist(BaseEntity entity) {"},{"lineNumber":31,"author":{"gitId":"-"},"content":"        assert entity !\u003d null;"},{"lineNumber":32,"author":{"gitId":"-"},"content":""},{"lineNumber":33,"author":{"gitId":"-"},"content":"        HibernateUtil.persist(entity);"},{"lineNumber":34,"author":{"gitId":"-"},"content":"        log.info(\"Entity persisted: \" + entity.toString());"},{"lineNumber":35,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":36,"author":{"gitId":"-"},"content":""},{"lineNumber":37,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":38,"author":{"gitId":"-"},"content":"     * Deletes {@code entity} from persistence context."},{"lineNumber":39,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":40,"author":{"gitId":"-"},"content":"    protected void delete(BaseEntity entity) {"},{"lineNumber":41,"author":{"gitId":"-"},"content":"        assert entity !\u003d null;"},{"lineNumber":42,"author":{"gitId":"-"},"content":""},{"lineNumber":43,"author":{"gitId":"-"},"content":"        HibernateUtil.remove(entity);"},{"lineNumber":44,"author":{"gitId":"-"},"content":"        log.info(\"Entity deleted: \" + entity.toString());"},{"lineNumber":45,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":46,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"domlimm":1,"-":45}},{"path":"src/main/java/teammates/storage/sqlapi/FeedbackQuestionsDb.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"EuniceSim142"},"content":"package teammates.storage.sqlapi;"},{"lineNumber":2,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":3,"author":{"gitId":"hhdqirui"},"content":"import java.util.List;"},{"lineNumber":4,"author":{"gitId":"EuniceSim142"},"content":"import java.util.UUID;"},{"lineNumber":5,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":6,"author":{"gitId":"cedricongjh"},"content":"import teammates.common.datatransfer.FeedbackParticipantType;"},{"lineNumber":7,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.util.HibernateUtil;"},{"lineNumber":8,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.FeedbackQuestion;"},{"lineNumber":9,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.FeedbackSession;"},{"lineNumber":10,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":11,"author":{"gitId":"hhdqirui"},"content":"import jakarta.persistence.criteria.CriteriaBuilder;"},{"lineNumber":12,"author":{"gitId":"hhdqirui"},"content":"import jakarta.persistence.criteria.CriteriaQuery;"},{"lineNumber":13,"author":{"gitId":"hhdqirui"},"content":"import jakarta.persistence.criteria.Join;"},{"lineNumber":14,"author":{"gitId":"hhdqirui"},"content":"import jakarta.persistence.criteria.Root;"},{"lineNumber":15,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":16,"author":{"gitId":"EuniceSim142"},"content":"/**"},{"lineNumber":17,"author":{"gitId":"EuniceSim142"},"content":" * Handles CRUD operations for feedback questions."},{"lineNumber":18,"author":{"gitId":"EuniceSim142"},"content":" *"},{"lineNumber":19,"author":{"gitId":"EuniceSim142"},"content":" * @see FeedbackQuestion"},{"lineNumber":20,"author":{"gitId":"EuniceSim142"},"content":" */"},{"lineNumber":21,"author":{"gitId":"-"},"content":"public final class FeedbackQuestionsDb extends EntitiesDb {"},{"lineNumber":22,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":23,"author":{"gitId":"EuniceSim142"},"content":"    private static final FeedbackQuestionsDb instance \u003d new FeedbackQuestionsDb();"},{"lineNumber":24,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":25,"author":{"gitId":"EuniceSim142"},"content":"    private FeedbackQuestionsDb() {"},{"lineNumber":26,"author":{"gitId":"EuniceSim142"},"content":"        // prevent initialization"},{"lineNumber":27,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":28,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":29,"author":{"gitId":"EuniceSim142"},"content":"    public static FeedbackQuestionsDb inst() {"},{"lineNumber":30,"author":{"gitId":"EuniceSim142"},"content":"        return instance;"},{"lineNumber":31,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":32,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":33,"author":{"gitId":"hhdqirui"},"content":"    /**"},{"lineNumber":34,"author":{"gitId":"hhdqirui"},"content":"     * Creates a new feedback question."},{"lineNumber":35,"author":{"gitId":"hhdqirui"},"content":"     *"},{"lineNumber":36,"author":{"gitId":"hhdqirui"},"content":"     * @return the created question"},{"lineNumber":37,"author":{"gitId":"hhdqirui"},"content":"     */"},{"lineNumber":38,"author":{"gitId":"hhdqirui"},"content":"    public FeedbackQuestion createFeedbackQuestion(FeedbackQuestion feedbackQuestion) {"},{"lineNumber":39,"author":{"gitId":"hhdqirui"},"content":"        persist(feedbackQuestion);"},{"lineNumber":40,"author":{"gitId":"hhdqirui"},"content":"        return feedbackQuestion;"},{"lineNumber":41,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":42,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":43,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":44,"author":{"gitId":"EuniceSim142"},"content":"     * Gets a feedback question."},{"lineNumber":45,"author":{"gitId":"EuniceSim142"},"content":"     *"},{"lineNumber":46,"author":{"gitId":"EuniceSim142"},"content":"     * @return null if not found"},{"lineNumber":47,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":48,"author":{"gitId":"EuniceSim142"},"content":"    public FeedbackQuestion getFeedbackQuestion(UUID fqId) {"},{"lineNumber":49,"author":{"gitId":"EuniceSim142"},"content":"        assert fqId !\u003d null;"},{"lineNumber":50,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":51,"author":{"gitId":"EuniceSim142"},"content":"        return HibernateUtil.get(FeedbackQuestion.class, fqId);"},{"lineNumber":52,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":53,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":54,"author":{"gitId":"hhdqirui"},"content":"    /**"},{"lineNumber":55,"author":{"gitId":"hhdqirui"},"content":"     * Gets all feedback questions of a session."},{"lineNumber":56,"author":{"gitId":"hhdqirui"},"content":"     */"},{"lineNumber":57,"author":{"gitId":"hhdqirui"},"content":"    public List\u003cFeedbackQuestion\u003e getFeedbackQuestionsForSession(UUID fdId) {"},{"lineNumber":58,"author":{"gitId":"hhdqirui"},"content":"        CriteriaBuilder cb \u003d HibernateUtil.getCriteriaBuilder();"},{"lineNumber":59,"author":{"gitId":"hhdqirui"},"content":"        CriteriaQuery\u003cFeedbackQuestion\u003e cq \u003d cb.createQuery(FeedbackQuestion.class);"},{"lineNumber":60,"author":{"gitId":"hhdqirui"},"content":"        Root\u003cFeedbackQuestion\u003e fqRoot \u003d cq.from(FeedbackQuestion.class);"},{"lineNumber":61,"author":{"gitId":"hhdqirui"},"content":"        Join\u003cFeedbackQuestion, FeedbackSession\u003e fqJoin \u003d fqRoot.join(\"feedbackSession\");"},{"lineNumber":62,"author":{"gitId":"hhdqirui"},"content":"        cq.select(fqRoot).where(cb.equal(fqJoin.get(\"id\"), fdId));"},{"lineNumber":63,"author":{"gitId":"hhdqirui"},"content":"        return HibernateUtil.createQuery(cq).getResultList();"},{"lineNumber":64,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":65,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":66,"author":{"gitId":"cedricongjh"},"content":"    /**"},{"lineNumber":67,"author":{"gitId":"cedricongjh"},"content":"     * Gets a list of feedback questions by {@code feedbackSession} and {@code giverType}."},{"lineNumber":68,"author":{"gitId":"cedricongjh"},"content":"     *"},{"lineNumber":69,"author":{"gitId":"cedricongjh"},"content":"     * @return null if not found"},{"lineNumber":70,"author":{"gitId":"cedricongjh"},"content":"     */"},{"lineNumber":71,"author":{"gitId":"cedricongjh"},"content":"    public List\u003cFeedbackQuestion\u003e getFeedbackQuestionsForGiverType("},{"lineNumber":72,"author":{"gitId":"cedricongjh"},"content":"            FeedbackSession feedbackSession, FeedbackParticipantType giverType) {"},{"lineNumber":73,"author":{"gitId":"cedricongjh"},"content":"        assert feedbackSession !\u003d null;"},{"lineNumber":74,"author":{"gitId":"cedricongjh"},"content":"        assert giverType !\u003d null;"},{"lineNumber":75,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":76,"author":{"gitId":"cedricongjh"},"content":"        CriteriaBuilder cb \u003d HibernateUtil.getCriteriaBuilder();"},{"lineNumber":77,"author":{"gitId":"cedricongjh"},"content":"        CriteriaQuery\u003cFeedbackQuestion\u003e cq \u003d cb.createQuery(FeedbackQuestion.class);"},{"lineNumber":78,"author":{"gitId":"cedricongjh"},"content":"        Root\u003cFeedbackQuestion\u003e root \u003d cq.from(FeedbackQuestion.class);"},{"lineNumber":79,"author":{"gitId":"cedricongjh"},"content":"        Join\u003cFeedbackQuestion, FeedbackSession\u003e fqJoin \u003d root.join(\"feedbackSession\");"},{"lineNumber":80,"author":{"gitId":"cedricongjh"},"content":"        cq.select(root)"},{"lineNumber":81,"author":{"gitId":"cedricongjh"},"content":"                .where(cb.and("},{"lineNumber":82,"author":{"gitId":"cedricongjh"},"content":"                        cb.equal(fqJoin.get(\"id\"), feedbackSession.getId()),"},{"lineNumber":83,"author":{"gitId":"cedricongjh"},"content":"                        cb.equal(root.get(\"giverType\"), giverType)));"},{"lineNumber":84,"author":{"gitId":"cedricongjh"},"content":"        return HibernateUtil.createQuery(cq).getResultList();"},{"lineNumber":85,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":86,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":87,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":88,"author":{"gitId":"EuniceSim142"},"content":"     * Deletes a feedback question."},{"lineNumber":89,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":90,"author":{"gitId":"EuniceSim142"},"content":"    public void deleteFeedbackQuestion(UUID fqId) {"},{"lineNumber":91,"author":{"gitId":"EuniceSim142"},"content":"        assert fqId !\u003d null;"},{"lineNumber":92,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":93,"author":{"gitId":"EuniceSim142"},"content":"        FeedbackQuestion fq \u003d getFeedbackQuestion(fqId);"},{"lineNumber":94,"author":{"gitId":"EuniceSim142"},"content":"        if (fq !\u003d null) {"},{"lineNumber":95,"author":{"gitId":"EuniceSim142"},"content":"            delete(fq);"},{"lineNumber":96,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":97,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":98,"author":{"gitId":"EuniceSim142"},"content":"}"}],"authorContributionMap":{"cedricongjh":22,"EuniceSim142":46,"hhdqirui":29,"-":1}},{"path":"src/main/java/teammates/storage/sqlapi/FeedbackResponseCommentsDb.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"cedricongjh"},"content":"package teammates.storage.sqlapi;"},{"lineNumber":2,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":3,"author":{"gitId":"cedricongjh"},"content":"import static teammates.common.util.Const.ERROR_CREATE_ENTITY_ALREADY_EXISTS;"},{"lineNumber":4,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":5,"author":{"gitId":"cedricongjh"},"content":"import java.util.UUID;"},{"lineNumber":6,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":7,"author":{"gitId":"cedricongjh"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":8,"author":{"gitId":"cedricongjh"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":9,"author":{"gitId":"cedricongjh"},"content":"import teammates.common.util.HibernateUtil;"},{"lineNumber":10,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.FeedbackResponseComment;"},{"lineNumber":11,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":12,"author":{"gitId":"cedricongjh"},"content":"/**"},{"lineNumber":13,"author":{"gitId":"cedricongjh"},"content":" * Handles CRUD operations for feedbackResponseComments."},{"lineNumber":14,"author":{"gitId":"cedricongjh"},"content":" *"},{"lineNumber":15,"author":{"gitId":"cedricongjh"},"content":" * @see FeedbackResponseComment"},{"lineNumber":16,"author":{"gitId":"cedricongjh"},"content":" */"},{"lineNumber":17,"author":{"gitId":"-"},"content":"public final class FeedbackResponseCommentsDb extends EntitiesDb {"},{"lineNumber":18,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":19,"author":{"gitId":"cedricongjh"},"content":"    private static final FeedbackResponseCommentsDb instance \u003d new FeedbackResponseCommentsDb();"},{"lineNumber":20,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":21,"author":{"gitId":"cedricongjh"},"content":"    private FeedbackResponseCommentsDb() {"},{"lineNumber":22,"author":{"gitId":"cedricongjh"},"content":"        // prevent initialization"},{"lineNumber":23,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":24,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":25,"author":{"gitId":"cedricongjh"},"content":"    public static FeedbackResponseCommentsDb inst() {"},{"lineNumber":26,"author":{"gitId":"cedricongjh"},"content":"        return instance;"},{"lineNumber":27,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":28,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":29,"author":{"gitId":"cedricongjh"},"content":"    /**"},{"lineNumber":30,"author":{"gitId":"cedricongjh"},"content":"     * Gets a feedbackResponseComment or null if it does not exist."},{"lineNumber":31,"author":{"gitId":"cedricongjh"},"content":"     */"},{"lineNumber":32,"author":{"gitId":"cedricongjh"},"content":"    public FeedbackResponseComment getFeedbackResponseComment(UUID frId) {"},{"lineNumber":33,"author":{"gitId":"cedricongjh"},"content":"        assert frId !\u003d null;"},{"lineNumber":34,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":35,"author":{"gitId":"cedricongjh"},"content":"        return HibernateUtil.get(FeedbackResponseComment.class, frId);"},{"lineNumber":36,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":37,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":38,"author":{"gitId":"cedricongjh"},"content":"    /**"},{"lineNumber":39,"author":{"gitId":"cedricongjh"},"content":"     * Creates a feedbackResponseComment."},{"lineNumber":40,"author":{"gitId":"cedricongjh"},"content":"     */"},{"lineNumber":41,"author":{"gitId":"cedricongjh"},"content":"    public FeedbackResponseComment createFeedbackResponseComment(FeedbackResponseComment feedbackResponseComment)"},{"lineNumber":42,"author":{"gitId":"cedricongjh"},"content":"            throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":43,"author":{"gitId":"cedricongjh"},"content":"        assert feedbackResponseComment !\u003d null;"},{"lineNumber":44,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":45,"author":{"gitId":"cedricongjh"},"content":"        if (!feedbackResponseComment.isValid()) {"},{"lineNumber":46,"author":{"gitId":"cedricongjh"},"content":"            throw new InvalidParametersException(feedbackResponseComment.getInvalidityInfo());"},{"lineNumber":47,"author":{"gitId":"cedricongjh"},"content":"        }"},{"lineNumber":48,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":49,"author":{"gitId":"cedricongjh"},"content":"        if (getFeedbackResponseComment(feedbackResponseComment.getId()) !\u003d null) {"},{"lineNumber":50,"author":{"gitId":"cedricongjh"},"content":"            throw new EntityAlreadyExistsException("},{"lineNumber":51,"author":{"gitId":"cedricongjh"},"content":"                    String.format(ERROR_CREATE_ENTITY_ALREADY_EXISTS, feedbackResponseComment.toString()));"},{"lineNumber":52,"author":{"gitId":"cedricongjh"},"content":"        }"},{"lineNumber":53,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":54,"author":{"gitId":"cedricongjh"},"content":"        persist(feedbackResponseComment);"},{"lineNumber":55,"author":{"gitId":"cedricongjh"},"content":"        return feedbackResponseComment;"},{"lineNumber":56,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":57,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":58,"author":{"gitId":"cedricongjh"},"content":"    /**"},{"lineNumber":59,"author":{"gitId":"cedricongjh"},"content":"     * Deletes a feedbackResponseComment."},{"lineNumber":60,"author":{"gitId":"cedricongjh"},"content":"     */"},{"lineNumber":61,"author":{"gitId":"cedricongjh"},"content":"    public void deleteFeedbackResponseComment(FeedbackResponseComment feedbackResponseComment) {"},{"lineNumber":62,"author":{"gitId":"cedricongjh"},"content":"        if (feedbackResponseComment !\u003d null) {"},{"lineNumber":63,"author":{"gitId":"cedricongjh"},"content":"            delete(feedbackResponseComment);"},{"lineNumber":64,"author":{"gitId":"cedricongjh"},"content":"        }"},{"lineNumber":65,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":66,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":67,"author":{"gitId":"cedricongjh"},"content":"}"}],"authorContributionMap":{"cedricongjh":66,"-":1}},{"path":"src/main/java/teammates/storage/sqlapi/FeedbackResponsesDb.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"EuniceSim142"},"content":"package teammates.storage.sqlapi;"},{"lineNumber":2,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":3,"author":{"gitId":"EuniceSim142"},"content":"import static teammates.common.util.Const.ERROR_CREATE_ENTITY_ALREADY_EXISTS;"},{"lineNumber":4,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":5,"author":{"gitId":"EuniceSim142"},"content":"import java.util.UUID;"},{"lineNumber":6,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":7,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":8,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":9,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.util.HibernateUtil;"},{"lineNumber":10,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.FeedbackResponse;"},{"lineNumber":11,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":12,"author":{"gitId":"EuniceSim142"},"content":"/**"},{"lineNumber":13,"author":{"gitId":"EuniceSim142"},"content":" * Handles CRUD operations for feedbackResponses."},{"lineNumber":14,"author":{"gitId":"EuniceSim142"},"content":" *"},{"lineNumber":15,"author":{"gitId":"EuniceSim142"},"content":" * @see FeedbackResponse"},{"lineNumber":16,"author":{"gitId":"EuniceSim142"},"content":" */"},{"lineNumber":17,"author":{"gitId":"-"},"content":"public final class FeedbackResponsesDb extends EntitiesDb {"},{"lineNumber":18,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":19,"author":{"gitId":"EuniceSim142"},"content":"    private static final FeedbackResponsesDb instance \u003d new FeedbackResponsesDb();"},{"lineNumber":20,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":21,"author":{"gitId":"EuniceSim142"},"content":"    private FeedbackResponsesDb() {"},{"lineNumber":22,"author":{"gitId":"EuniceSim142"},"content":"        // prevent initialization"},{"lineNumber":23,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":24,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":25,"author":{"gitId":"EuniceSim142"},"content":"    public static FeedbackResponsesDb inst() {"},{"lineNumber":26,"author":{"gitId":"EuniceSim142"},"content":"        return instance;"},{"lineNumber":27,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":28,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":29,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":30,"author":{"gitId":"EuniceSim142"},"content":"     * Gets a feedbackResponse or null if it does not exist."},{"lineNumber":31,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":32,"author":{"gitId":"EuniceSim142"},"content":"    public FeedbackResponse getFeedbackResponse(UUID frId) {"},{"lineNumber":33,"author":{"gitId":"EuniceSim142"},"content":"        assert frId !\u003d null;"},{"lineNumber":34,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":35,"author":{"gitId":"EuniceSim142"},"content":"        return HibernateUtil.get(FeedbackResponse.class, frId);"},{"lineNumber":36,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":37,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":38,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":39,"author":{"gitId":"EuniceSim142"},"content":"     * Creates a feedbackResponse."},{"lineNumber":40,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":41,"author":{"gitId":"EuniceSim142"},"content":"    public FeedbackResponse createFeedbackResponse(FeedbackResponse feedbackResponse)"},{"lineNumber":42,"author":{"gitId":"EuniceSim142"},"content":"            throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":43,"author":{"gitId":"EuniceSim142"},"content":"        assert feedbackResponse !\u003d null;"},{"lineNumber":44,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":45,"author":{"gitId":"EuniceSim142"},"content":"        if (!feedbackResponse.isValid()) {"},{"lineNumber":46,"author":{"gitId":"EuniceSim142"},"content":"            throw new InvalidParametersException(feedbackResponse.getInvalidityInfo());"},{"lineNumber":47,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":48,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":49,"author":{"gitId":"EuniceSim142"},"content":"        if (getFeedbackResponse(feedbackResponse.getId()) !\u003d null) {"},{"lineNumber":50,"author":{"gitId":"EuniceSim142"},"content":"            throw new EntityAlreadyExistsException("},{"lineNumber":51,"author":{"gitId":"EuniceSim142"},"content":"                    String.format(ERROR_CREATE_ENTITY_ALREADY_EXISTS, feedbackResponse.toString()));"},{"lineNumber":52,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":53,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":54,"author":{"gitId":"EuniceSim142"},"content":"        persist(feedbackResponse);"},{"lineNumber":55,"author":{"gitId":"EuniceSim142"},"content":"        return feedbackResponse;"},{"lineNumber":56,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":57,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":58,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":59,"author":{"gitId":"EuniceSim142"},"content":"     * Deletes a feedbackResponse."},{"lineNumber":60,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":61,"author":{"gitId":"EuniceSim142"},"content":"    public void deleteFeedbackResponse(FeedbackResponse feedbackResponse) {"},{"lineNumber":62,"author":{"gitId":"EuniceSim142"},"content":"        if (feedbackResponse !\u003d null) {"},{"lineNumber":63,"author":{"gitId":"EuniceSim142"},"content":"            delete(feedbackResponse);"},{"lineNumber":64,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":65,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":66,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":67,"author":{"gitId":"EuniceSim142"},"content":"}"}],"authorContributionMap":{"EuniceSim142":66,"-":1}},{"path":"src/main/java/teammates/storage/sqlapi/FeedbackSessionsDb.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.storage.sqlapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import static teammates.common.util.Const.ERROR_CREATE_ENTITY_ALREADY_EXISTS;"},{"lineNumber":4,"author":{"gitId":"hhdqirui"},"content":"import static teammates.common.util.Const.ERROR_UPDATE_NON_EXISTENT;"},{"lineNumber":5,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":6,"author":{"gitId":"EuniceSim142"},"content":"import java.time.Instant;"},{"lineNumber":7,"author":{"gitId":"EuniceSim142"},"content":"import java.util.List;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import java.util.UUID;"},{"lineNumber":9,"author":{"gitId":"-"},"content":""},{"lineNumber":10,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import teammates.common.util.HibernateUtil;"},{"lineNumber":14,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.Course;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.FeedbackSession;"},{"lineNumber":16,"author":{"gitId":"-"},"content":""},{"lineNumber":17,"author":{"gitId":"EuniceSim142"},"content":"import jakarta.persistence.criteria.CriteriaBuilder;"},{"lineNumber":18,"author":{"gitId":"EuniceSim142"},"content":"import jakarta.persistence.criteria.CriteriaQuery;"},{"lineNumber":19,"author":{"gitId":"hhdqirui"},"content":"import jakarta.persistence.criteria.Join;"},{"lineNumber":20,"author":{"gitId":"EuniceSim142"},"content":"import jakarta.persistence.criteria.Root;"},{"lineNumber":21,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":22,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":23,"author":{"gitId":"-"},"content":" * Handles CRUD operations for feedback sessions."},{"lineNumber":24,"author":{"gitId":"-"},"content":" *"},{"lineNumber":25,"author":{"gitId":"-"},"content":" * @see FeedbackSession"},{"lineNumber":26,"author":{"gitId":"-"},"content":" */"},{"lineNumber":27,"author":{"gitId":"-"},"content":"public final class FeedbackSessionsDb extends EntitiesDb {"},{"lineNumber":28,"author":{"gitId":"-"},"content":""},{"lineNumber":29,"author":{"gitId":"-"},"content":"    private static final FeedbackSessionsDb instance \u003d new FeedbackSessionsDb();"},{"lineNumber":30,"author":{"gitId":"-"},"content":""},{"lineNumber":31,"author":{"gitId":"-"},"content":"    private FeedbackSessionsDb() {"},{"lineNumber":32,"author":{"gitId":"-"},"content":"        // prevent initialization"},{"lineNumber":33,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":34,"author":{"gitId":"-"},"content":""},{"lineNumber":35,"author":{"gitId":"-"},"content":"    public static FeedbackSessionsDb inst() {"},{"lineNumber":36,"author":{"gitId":"-"},"content":"        return instance;"},{"lineNumber":37,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":38,"author":{"gitId":"-"},"content":""},{"lineNumber":39,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":40,"author":{"gitId":"-"},"content":"     * Gets a feedback session."},{"lineNumber":41,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":42,"author":{"gitId":"-"},"content":"     * @return null if not found"},{"lineNumber":43,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":44,"author":{"gitId":"-"},"content":"    public FeedbackSession getFeedbackSession(UUID fsId) {"},{"lineNumber":45,"author":{"gitId":"-"},"content":"        assert fsId !\u003d null;"},{"lineNumber":46,"author":{"gitId":"-"},"content":""},{"lineNumber":47,"author":{"gitId":"-"},"content":"        return HibernateUtil.get(FeedbackSession.class, fsId);"},{"lineNumber":48,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":49,"author":{"gitId":"-"},"content":""},{"lineNumber":50,"author":{"gitId":"hhdqirui"},"content":"    /**"},{"lineNumber":51,"author":{"gitId":"hhdqirui"},"content":"     * Gets a feedback session for {@code feedbackSessionName} and {@code courseId}."},{"lineNumber":52,"author":{"gitId":"hhdqirui"},"content":"     *"},{"lineNumber":53,"author":{"gitId":"hhdqirui"},"content":"     * @return null if not found"},{"lineNumber":54,"author":{"gitId":"hhdqirui"},"content":"     */"},{"lineNumber":55,"author":{"gitId":"hhdqirui"},"content":"    public FeedbackSession getFeedbackSession(String feedbackSessionName, String courseId) {"},{"lineNumber":56,"author":{"gitId":"hhdqirui"},"content":"        CriteriaBuilder cb \u003d HibernateUtil.getCriteriaBuilder();"},{"lineNumber":57,"author":{"gitId":"hhdqirui"},"content":"        CriteriaQuery\u003cFeedbackSession\u003e cq \u003d cb.createQuery(FeedbackSession.class);"},{"lineNumber":58,"author":{"gitId":"hhdqirui"},"content":"        Root\u003cFeedbackSession\u003e fsRoot \u003d cq.from(FeedbackSession.class);"},{"lineNumber":59,"author":{"gitId":"hhdqirui"},"content":"        Join\u003cFeedbackSession, Course\u003e fsJoin \u003d fsRoot.join(\"course\");"},{"lineNumber":60,"author":{"gitId":"hhdqirui"},"content":"        cq.select(fsRoot).where(cb.and("},{"lineNumber":61,"author":{"gitId":"hhdqirui"},"content":"                cb.equal(fsRoot.get(\"name\"), feedbackSessionName),"},{"lineNumber":62,"author":{"gitId":"hhdqirui"},"content":"                cb.equal(fsJoin.get(\"id\"), courseId)));"},{"lineNumber":63,"author":{"gitId":"hhdqirui"},"content":"        return HibernateUtil.createQuery(cq).getResultStream().findFirst().orElse(null);"},{"lineNumber":64,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":65,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":66,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":67,"author":{"gitId":"-"},"content":"     * Creates a feedback session."},{"lineNumber":68,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":69,"author":{"gitId":"-"},"content":"    public FeedbackSession createFeedbackSession(FeedbackSession session)"},{"lineNumber":70,"author":{"gitId":"-"},"content":"            throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":71,"author":{"gitId":"-"},"content":"        assert session !\u003d null;"},{"lineNumber":72,"author":{"gitId":"-"},"content":""},{"lineNumber":73,"author":{"gitId":"-"},"content":"        if (!session.isValid()) {"},{"lineNumber":74,"author":{"gitId":"-"},"content":"            throw new InvalidParametersException(session.getInvalidityInfo());"},{"lineNumber":75,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":76,"author":{"gitId":"-"},"content":""},{"lineNumber":77,"author":{"gitId":"-"},"content":"        if (getFeedbackSession(session.getId()) !\u003d null) {"},{"lineNumber":78,"author":{"gitId":"-"},"content":"            throw new EntityAlreadyExistsException(String.format(ERROR_CREATE_ENTITY_ALREADY_EXISTS, session.toString()));"},{"lineNumber":79,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":80,"author":{"gitId":"-"},"content":""},{"lineNumber":81,"author":{"gitId":"-"},"content":"        persist(session);"},{"lineNumber":82,"author":{"gitId":"-"},"content":"        return session;"},{"lineNumber":83,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":84,"author":{"gitId":"-"},"content":""},{"lineNumber":85,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":86,"author":{"gitId":"-"},"content":"     * Saves an updated {@code FeedbackSession} to the db."},{"lineNumber":87,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":88,"author":{"gitId":"-"},"content":"     * @return updated feedback session"},{"lineNumber":89,"author":{"gitId":"-"},"content":"     * @throws InvalidParametersException  if attributes to update are not valid"},{"lineNumber":90,"author":{"gitId":"-"},"content":"     * @throws EntityDoesNotExistException if the feedback session cannot be found"},{"lineNumber":91,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":92,"author":{"gitId":"-"},"content":"    public FeedbackSession updateFeedbackSession(FeedbackSession feedbackSession)"},{"lineNumber":93,"author":{"gitId":"-"},"content":"            throws InvalidParametersException, EntityDoesNotExistException {"},{"lineNumber":94,"author":{"gitId":"-"},"content":"        assert feedbackSession !\u003d null;"},{"lineNumber":95,"author":{"gitId":"-"},"content":""},{"lineNumber":96,"author":{"gitId":"-"},"content":"        if (!feedbackSession.isValid()) {"},{"lineNumber":97,"author":{"gitId":"-"},"content":"            throw new InvalidParametersException(feedbackSession.getInvalidityInfo());"},{"lineNumber":98,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":99,"author":{"gitId":"-"},"content":""},{"lineNumber":100,"author":{"gitId":"-"},"content":"        if (getFeedbackSession(feedbackSession.getId()) \u003d\u003d null) {"},{"lineNumber":101,"author":{"gitId":"-"},"content":"            throw new EntityDoesNotExistException(ERROR_UPDATE_NON_EXISTENT);"},{"lineNumber":102,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":103,"author":{"gitId":"-"},"content":""},{"lineNumber":104,"author":{"gitId":"-"},"content":"        return merge(feedbackSession);"},{"lineNumber":105,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":106,"author":{"gitId":"-"},"content":""},{"lineNumber":107,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":108,"author":{"gitId":"-"},"content":"     * Deletes a feedback session."},{"lineNumber":109,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":110,"author":{"gitId":"-"},"content":"    public void deleteFeedbackSession(FeedbackSession feedbackSession) {"},{"lineNumber":111,"author":{"gitId":"-"},"content":"        if (feedbackSession !\u003d null) {"},{"lineNumber":112,"author":{"gitId":"-"},"content":"            delete(feedbackSession);"},{"lineNumber":113,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":114,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":115,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":116,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":117,"author":{"gitId":"EuniceSim142"},"content":"     * Gets feedback sessions for a given {@code courseId}."},{"lineNumber":118,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":119,"author":{"gitId":"EuniceSim142"},"content":"    public List\u003cFeedbackSession\u003e getFeedbackSessionEntitiesForCourse(String courseId) {"},{"lineNumber":120,"author":{"gitId":"EuniceSim142"},"content":"        assert courseId !\u003d null;"},{"lineNumber":121,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":122,"author":{"gitId":"EuniceSim142"},"content":"        CriteriaBuilder cb \u003d HibernateUtil.getCriteriaBuilder();"},{"lineNumber":123,"author":{"gitId":"EuniceSim142"},"content":"        CriteriaQuery\u003cFeedbackSession\u003e cr \u003d cb.createQuery(FeedbackSession.class);"},{"lineNumber":124,"author":{"gitId":"EuniceSim142"},"content":"        Root\u003cFeedbackSession\u003e root \u003d cr.from(FeedbackSession.class);"},{"lineNumber":125,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":126,"author":{"gitId":"EuniceSim142"},"content":"        cr.select(root).where(cb.equal(root.get(\"courseId\"), courseId));"},{"lineNumber":127,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":128,"author":{"gitId":"EuniceSim142"},"content":"        return HibernateUtil.createQuery(cr).getResultList();"},{"lineNumber":129,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":130,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":131,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":132,"author":{"gitId":"EuniceSim142"},"content":"     * Gets feedback sessions for a given {@code courseId} that start after {@code after}."},{"lineNumber":133,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":134,"author":{"gitId":"EuniceSim142"},"content":"    public List\u003cFeedbackSession\u003e getFeedbackSessionEntitiesForCourseStartingAfter(String courseId, Instant after) {"},{"lineNumber":135,"author":{"gitId":"EuniceSim142"},"content":"        assert courseId !\u003d null;"},{"lineNumber":136,"author":{"gitId":"EuniceSim142"},"content":"        assert after !\u003d null;"},{"lineNumber":137,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":138,"author":{"gitId":"EuniceSim142"},"content":"        CriteriaBuilder cb \u003d HibernateUtil.getCriteriaBuilder();"},{"lineNumber":139,"author":{"gitId":"EuniceSim142"},"content":"        CriteriaQuery\u003cFeedbackSession\u003e cr \u003d cb.createQuery(FeedbackSession.class);"},{"lineNumber":140,"author":{"gitId":"EuniceSim142"},"content":"        Root\u003cFeedbackSession\u003e root \u003d cr.from(FeedbackSession.class);"},{"lineNumber":141,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":142,"author":{"gitId":"EuniceSim142"},"content":"        cr.select(root)"},{"lineNumber":143,"author":{"gitId":"EuniceSim142"},"content":"                .where(cb.and("},{"lineNumber":144,"author":{"gitId":"EuniceSim142"},"content":"                    cb.greaterThanOrEqualTo(root.get(\"startTime\"), after),"},{"lineNumber":145,"author":{"gitId":"EuniceSim142"},"content":"                    cb.equal(root.get(\"courseId\"), courseId)));"},{"lineNumber":146,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":147,"author":{"gitId":"EuniceSim142"},"content":"        return HibernateUtil.createQuery(cr).getResultList();"},{"lineNumber":148,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":149,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"EuniceSim142":40,"hhdqirui":20,"-":89}},{"path":"src/main/java/teammates/storage/sqlapi/NotificationsDb.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"hhdqirui"},"content":"package teammates.storage.sqlapi;"},{"lineNumber":2,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":3,"author":{"gitId":"hhdqirui"},"content":"import java.time.Instant;"},{"lineNumber":4,"author":{"gitId":"hhdqirui"},"content":"import java.util.List;"},{"lineNumber":5,"author":{"gitId":"hhdqirui"},"content":"import java.util.UUID;"},{"lineNumber":6,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":7,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.NotificationTargetUser;"},{"lineNumber":8,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":9,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":10,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.util.HibernateUtil;"},{"lineNumber":11,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.Notification;"},{"lineNumber":12,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":13,"author":{"gitId":"hhdqirui"},"content":"import jakarta.persistence.TypedQuery;"},{"lineNumber":14,"author":{"gitId":"hhdqirui"},"content":"import jakarta.persistence.criteria.CriteriaBuilder;"},{"lineNumber":15,"author":{"gitId":"hhdqirui"},"content":"import jakarta.persistence.criteria.CriteriaQuery;"},{"lineNumber":16,"author":{"gitId":"hhdqirui"},"content":"import jakarta.persistence.criteria.Root;"},{"lineNumber":17,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":18,"author":{"gitId":"hhdqirui"},"content":"/**"},{"lineNumber":19,"author":{"gitId":"hhdqirui"},"content":" * Handles CRUD operations for notifications."},{"lineNumber":20,"author":{"gitId":"hhdqirui"},"content":" *"},{"lineNumber":21,"author":{"gitId":"hhdqirui"},"content":" * @see Notification"},{"lineNumber":22,"author":{"gitId":"hhdqirui"},"content":" */"},{"lineNumber":23,"author":{"gitId":"-"},"content":"public final class NotificationsDb extends EntitiesDb {"},{"lineNumber":24,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":25,"author":{"gitId":"hhdqirui"},"content":"    private static final NotificationsDb instance \u003d new NotificationsDb();"},{"lineNumber":26,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":27,"author":{"gitId":"hhdqirui"},"content":"    private NotificationsDb() {"},{"lineNumber":28,"author":{"gitId":"hhdqirui"},"content":"        // prevent initialization"},{"lineNumber":29,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":30,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":31,"author":{"gitId":"hhdqirui"},"content":"    public static NotificationsDb inst() {"},{"lineNumber":32,"author":{"gitId":"hhdqirui"},"content":"        return instance;"},{"lineNumber":33,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":34,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":35,"author":{"gitId":"hhdqirui"},"content":"    /**"},{"lineNumber":36,"author":{"gitId":"hhdqirui"},"content":"     * Creates a notification."},{"lineNumber":37,"author":{"gitId":"hhdqirui"},"content":"     */"},{"lineNumber":38,"author":{"gitId":"hhdqirui"},"content":"    public Notification createNotification(Notification notification)"},{"lineNumber":39,"author":{"gitId":"hhdqirui"},"content":"            throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":40,"author":{"gitId":"hhdqirui"},"content":"        assert notification !\u003d null;"},{"lineNumber":41,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":42,"author":{"gitId":"hhdqirui"},"content":"        if (!notification.isValid()) {"},{"lineNumber":43,"author":{"gitId":"hhdqirui"},"content":"            throw new InvalidParametersException(notification.getInvalidityInfo());"},{"lineNumber":44,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":45,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":46,"author":{"gitId":"hhdqirui"},"content":"        persist(notification);"},{"lineNumber":47,"author":{"gitId":"hhdqirui"},"content":"        return notification;"},{"lineNumber":48,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":49,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":50,"author":{"gitId":"hhdqirui"},"content":"    /**"},{"lineNumber":51,"author":{"gitId":"hhdqirui"},"content":"     * Gets a notification by its unique ID."},{"lineNumber":52,"author":{"gitId":"hhdqirui"},"content":"     */"},{"lineNumber":53,"author":{"gitId":"hhdqirui"},"content":"    public Notification getNotification(UUID notificationId) {"},{"lineNumber":54,"author":{"gitId":"hhdqirui"},"content":"        assert notificationId !\u003d null;"},{"lineNumber":55,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":56,"author":{"gitId":"-"},"content":"        return HibernateUtil.get(Notification.class, notificationId);"},{"lineNumber":57,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":58,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":59,"author":{"gitId":"hhdqirui"},"content":"    /**"},{"lineNumber":60,"author":{"gitId":"-"},"content":"     * Deletes a notification."},{"lineNumber":61,"author":{"gitId":"hhdqirui"},"content":"     *"},{"lineNumber":62,"author":{"gitId":"-"},"content":"     * \u003cp\u003eFails silently if notification is null."},{"lineNumber":63,"author":{"gitId":"hhdqirui"},"content":"     */"},{"lineNumber":64,"author":{"gitId":"-"},"content":"    public void deleteNotification(Notification notification) {"},{"lineNumber":65,"author":{"gitId":"hhdqirui"},"content":"        if (notification !\u003d null) {"},{"lineNumber":66,"author":{"gitId":"hhdqirui"},"content":"            delete(notification);"},{"lineNumber":67,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":68,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":69,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":70,"author":{"gitId":"hhdqirui"},"content":"    /**"},{"lineNumber":71,"author":{"gitId":"hhdqirui"},"content":"     * Gets all notifications."},{"lineNumber":72,"author":{"gitId":"hhdqirui"},"content":"     */"},{"lineNumber":73,"author":{"gitId":"hhdqirui"},"content":"    public List\u003cNotification\u003e getAllNotifications() {"},{"lineNumber":74,"author":{"gitId":"hhdqirui"},"content":"        CriteriaBuilder cb \u003d HibernateUtil.getCriteriaBuilder();"},{"lineNumber":75,"author":{"gitId":"hhdqirui"},"content":"        CriteriaQuery\u003cNotification\u003e cq \u003d cb.createQuery(Notification.class);"},{"lineNumber":76,"author":{"gitId":"hhdqirui"},"content":"        Root\u003cNotification\u003e root \u003d cq.from(Notification.class);"},{"lineNumber":77,"author":{"gitId":"hhdqirui"},"content":"        CriteriaQuery\u003cNotification\u003e all \u003d cq.select(root);"},{"lineNumber":78,"author":{"gitId":"hhdqirui"},"content":"        TypedQuery\u003cNotification\u003e allQuery \u003d HibernateUtil.createQuery(all);"},{"lineNumber":79,"author":{"gitId":"hhdqirui"},"content":"        return allQuery.getResultList();"},{"lineNumber":80,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":81,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":82,"author":{"gitId":"hhdqirui"},"content":"    /**"},{"lineNumber":83,"author":{"gitId":"hhdqirui"},"content":"     * Gets notifications by {@code targetUser}."},{"lineNumber":84,"author":{"gitId":"hhdqirui"},"content":"     *"},{"lineNumber":85,"author":{"gitId":"hhdqirui"},"content":"     * @return a list of notifications for the specified targetUser."},{"lineNumber":86,"author":{"gitId":"hhdqirui"},"content":"     */"},{"lineNumber":87,"author":{"gitId":"hhdqirui"},"content":"    public List\u003cNotification\u003e getActiveNotificationsByTargetUser(NotificationTargetUser targetUser) {"},{"lineNumber":88,"author":{"gitId":"hhdqirui"},"content":"        CriteriaBuilder cb \u003d HibernateUtil.getCriteriaBuilder();"},{"lineNumber":89,"author":{"gitId":"hhdqirui"},"content":"        CriteriaQuery\u003cNotification\u003e cq \u003d cb.createQuery(Notification.class);"},{"lineNumber":90,"author":{"gitId":"hhdqirui"},"content":"        Root\u003cNotification\u003e root \u003d cq.from(Notification.class);"},{"lineNumber":91,"author":{"gitId":"hhdqirui"},"content":"        cq.select(root)"},{"lineNumber":92,"author":{"gitId":"hhdqirui"},"content":"                .where(cb.and("},{"lineNumber":93,"author":{"gitId":"hhdqirui"},"content":"                        cb.or(cb.equal(root.get(\"targetUser\"), targetUser),"},{"lineNumber":94,"author":{"gitId":"hhdqirui"},"content":"                                cb.equal(root.get(\"targetUser\"), NotificationTargetUser.GENERAL)),"},{"lineNumber":95,"author":{"gitId":"hhdqirui"},"content":"                        cb.lessThanOrEqualTo(root.get(\"startTime\"), Instant.now()),"},{"lineNumber":96,"author":{"gitId":"hhdqirui"},"content":"                        cb.greaterThanOrEqualTo(root.get(\"endTime\"), Instant.now())))"},{"lineNumber":97,"author":{"gitId":"hhdqirui"},"content":"                .orderBy(cb.asc(root.get(\"startTime\")));"},{"lineNumber":98,"author":{"gitId":"hhdqirui"},"content":"        TypedQuery\u003cNotification\u003e query \u003d HibernateUtil.createQuery(cq);"},{"lineNumber":99,"author":{"gitId":"hhdqirui"},"content":"        return query.getResultList();"},{"lineNumber":100,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":101,"author":{"gitId":"hhdqirui"},"content":"}"}],"authorContributionMap":{"hhdqirui":96,"-":5}},{"path":"src/main/java/teammates/storage/sqlapi/UsageStatisticsDb.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.storage.sqlapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.time.Instant;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":5,"author":{"gitId":"-"},"content":""},{"lineNumber":6,"author":{"gitId":"-"},"content":"import teammates.common.util.HibernateUtil;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.UsageStatistics;"},{"lineNumber":8,"author":{"gitId":"-"},"content":""},{"lineNumber":9,"author":{"gitId":"-"},"content":"import jakarta.persistence.criteria.CriteriaBuilder;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import jakarta.persistence.criteria.CriteriaQuery;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import jakarta.persistence.criteria.Root;"},{"lineNumber":12,"author":{"gitId":"-"},"content":""},{"lineNumber":13,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":14,"author":{"gitId":"-"},"content":" * Handles CRUD operations for usage statistics."},{"lineNumber":15,"author":{"gitId":"-"},"content":" *"},{"lineNumber":16,"author":{"gitId":"-"},"content":" * @see UsageStatistics"},{"lineNumber":17,"author":{"gitId":"-"},"content":" */"},{"lineNumber":18,"author":{"gitId":"-"},"content":"public final class UsageStatisticsDb extends EntitiesDb {"},{"lineNumber":19,"author":{"gitId":"-"},"content":""},{"lineNumber":20,"author":{"gitId":"-"},"content":"    private static final UsageStatisticsDb instance \u003d new UsageStatisticsDb();"},{"lineNumber":21,"author":{"gitId":"-"},"content":""},{"lineNumber":22,"author":{"gitId":"-"},"content":"    private UsageStatisticsDb() {"},{"lineNumber":23,"author":{"gitId":"-"},"content":"        // prevent initialization"},{"lineNumber":24,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":25,"author":{"gitId":"-"},"content":""},{"lineNumber":26,"author":{"gitId":"-"},"content":"    public static UsageStatisticsDb inst() {"},{"lineNumber":27,"author":{"gitId":"-"},"content":"        return instance;"},{"lineNumber":28,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":29,"author":{"gitId":"-"},"content":""},{"lineNumber":30,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":31,"author":{"gitId":"-"},"content":"     * Gets a list of statistics objects between start time and end time."},{"lineNumber":32,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":33,"author":{"gitId":"-"},"content":"    public List\u003cUsageStatistics\u003e getUsageStatisticsForTimeRange(Instant startTime, Instant endTime) {"},{"lineNumber":34,"author":{"gitId":"domlimm"},"content":"        CriteriaBuilder cb \u003d HibernateUtil.getCriteriaBuilder();"},{"lineNumber":35,"author":{"gitId":"-"},"content":"        CriteriaQuery\u003cUsageStatistics\u003e cr \u003d cb.createQuery(UsageStatistics.class);"},{"lineNumber":36,"author":{"gitId":"-"},"content":"        Root\u003cUsageStatistics\u003e root \u003d cr.from(UsageStatistics.class);"},{"lineNumber":37,"author":{"gitId":"-"},"content":""},{"lineNumber":38,"author":{"gitId":"-"},"content":"        cr.select(root).where(cb.and("},{"lineNumber":39,"author":{"gitId":"-"},"content":"                cb.greaterThanOrEqualTo(root.get(\"startTime\"), startTime),"},{"lineNumber":40,"author":{"gitId":"-"},"content":"                cb.lessThan(root.get(\"startTime\"), endTime)));"},{"lineNumber":41,"author":{"gitId":"-"},"content":""},{"lineNumber":42,"author":{"gitId":"domlimm"},"content":"        return HibernateUtil.createQuery(cr).getResultList();"},{"lineNumber":43,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":44,"author":{"gitId":"-"},"content":""},{"lineNumber":45,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":46,"author":{"gitId":"-"},"content":"     * Creates a usage statistics object."},{"lineNumber":47,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":48,"author":{"gitId":"-"},"content":"    public UsageStatistics createUsageStatistics(UsageStatistics usageStatistics) {"},{"lineNumber":49,"author":{"gitId":"-"},"content":"        assert usageStatistics !\u003d null;"},{"lineNumber":50,"author":{"gitId":"-"},"content":""},{"lineNumber":51,"author":{"gitId":"-"},"content":"        persist(usageStatistics);"},{"lineNumber":52,"author":{"gitId":"-"},"content":""},{"lineNumber":53,"author":{"gitId":"-"},"content":"        return usageStatistics;"},{"lineNumber":54,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":55,"author":{"gitId":"-"},"content":""},{"lineNumber":56,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"domlimm":2,"-":54}},{"path":"src/main/java/teammates/storage/sqlapi/UsersDb.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"domlimm"},"content":"package teammates.storage.sqlapi;"},{"lineNumber":2,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":3,"author":{"gitId":"domlimm"},"content":"import java.time.Instant;"},{"lineNumber":4,"author":{"gitId":"EuniceSim142"},"content":"import java.util.List;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.util.UUID;"},{"lineNumber":6,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":7,"author":{"gitId":"domlimm"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":8,"author":{"gitId":"domlimm"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":9,"author":{"gitId":"domlimm"},"content":"import teammates.common.util.HibernateUtil;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Account;"},{"lineNumber":11,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.Course;"},{"lineNumber":12,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":13,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.Section;"},{"lineNumber":14,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Student;"},{"lineNumber":15,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.Team;"},{"lineNumber":16,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.User;"},{"lineNumber":17,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":18,"author":{"gitId":"domlimm"},"content":"import jakarta.persistence.criteria.CriteriaBuilder;"},{"lineNumber":19,"author":{"gitId":"domlimm"},"content":"import jakarta.persistence.criteria.CriteriaQuery;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"import jakarta.persistence.criteria.Join;"},{"lineNumber":21,"author":{"gitId":"domlimm"},"content":"import jakarta.persistence.criteria.Root;"},{"lineNumber":22,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":23,"author":{"gitId":"domlimm"},"content":"/**"},{"lineNumber":24,"author":{"gitId":"domlimm"},"content":" * Handles CRUD operations for users."},{"lineNumber":25,"author":{"gitId":"domlimm"},"content":" *"},{"lineNumber":26,"author":{"gitId":"domlimm"},"content":" * @see User"},{"lineNumber":27,"author":{"gitId":"domlimm"},"content":" */"},{"lineNumber":28,"author":{"gitId":"-"},"content":"public final class UsersDb extends EntitiesDb {"},{"lineNumber":29,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":30,"author":{"gitId":"domlimm"},"content":"    private static final UsersDb instance \u003d new UsersDb();"},{"lineNumber":31,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":32,"author":{"gitId":"domlimm"},"content":"    private UsersDb() {"},{"lineNumber":33,"author":{"gitId":"domlimm"},"content":"        // prevent initialization"},{"lineNumber":34,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":35,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":36,"author":{"gitId":"domlimm"},"content":"    public static UsersDb inst() {"},{"lineNumber":37,"author":{"gitId":"domlimm"},"content":"        return instance;"},{"lineNumber":38,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":39,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":40,"author":{"gitId":"domlimm"},"content":"    /**"},{"lineNumber":41,"author":{"gitId":"domlimm"},"content":"     * Creates an instructor."},{"lineNumber":42,"author":{"gitId":"domlimm"},"content":"     */"},{"lineNumber":43,"author":{"gitId":"domlimm"},"content":"    public Instructor createInstructor(Instructor instructor)"},{"lineNumber":44,"author":{"gitId":"domlimm"},"content":"            throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":45,"author":{"gitId":"domlimm"},"content":"        assert instructor !\u003d null;"},{"lineNumber":46,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":47,"author":{"gitId":"domlimm"},"content":"        if (!instructor.isValid()) {"},{"lineNumber":48,"author":{"gitId":"domlimm"},"content":"            throw new InvalidParametersException(instructor.getInvalidityInfo());"},{"lineNumber":49,"author":{"gitId":"domlimm"},"content":"        }"},{"lineNumber":50,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":51,"author":{"gitId":"domlimm"},"content":"        persist(instructor);"},{"lineNumber":52,"author":{"gitId":"domlimm"},"content":"        return instructor;"},{"lineNumber":53,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":54,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":55,"author":{"gitId":"domlimm"},"content":"    /**"},{"lineNumber":56,"author":{"gitId":"domlimm"},"content":"     * Creates a student."},{"lineNumber":57,"author":{"gitId":"domlimm"},"content":"     */"},{"lineNumber":58,"author":{"gitId":"domlimm"},"content":"    public Student createStudent(Student student)"},{"lineNumber":59,"author":{"gitId":"domlimm"},"content":"            throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":60,"author":{"gitId":"domlimm"},"content":"        assert student !\u003d null;"},{"lineNumber":61,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":62,"author":{"gitId":"domlimm"},"content":"        if (!student.isValid()) {"},{"lineNumber":63,"author":{"gitId":"domlimm"},"content":"            throw new InvalidParametersException(student.getInvalidityInfo());"},{"lineNumber":64,"author":{"gitId":"domlimm"},"content":"        }"},{"lineNumber":65,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":66,"author":{"gitId":"domlimm"},"content":"        persist(student);"},{"lineNumber":67,"author":{"gitId":"domlimm"},"content":"        return student;"},{"lineNumber":68,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":69,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":70,"author":{"gitId":"domlimm"},"content":"    /**"},{"lineNumber":71,"author":{"gitId":"domlimm"},"content":"     * Gets an instructor by its {@code id}."},{"lineNumber":72,"author":{"gitId":"domlimm"},"content":"     */"},{"lineNumber":73,"author":{"gitId":"domlimm"},"content":"    public Instructor getInstructor(UUID id) {"},{"lineNumber":74,"author":{"gitId":"domlimm"},"content":"        assert id !\u003d null;"},{"lineNumber":75,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":76,"author":{"gitId":"domlimm"},"content":"        return HibernateUtil.get(Instructor.class, id);"},{"lineNumber":77,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":78,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":79,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":80,"author":{"gitId":"-"},"content":"     * Gets an instructor by {@code regKey}."},{"lineNumber":81,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":82,"author":{"gitId":"-"},"content":"    public Instructor getInstructorByRegKey(String regKey) {"},{"lineNumber":83,"author":{"gitId":"-"},"content":"        CriteriaBuilder cb \u003d HibernateUtil.getCriteriaBuilder();"},{"lineNumber":84,"author":{"gitId":"-"},"content":"        CriteriaQuery\u003cInstructor\u003e cr \u003d cb.createQuery(Instructor.class);"},{"lineNumber":85,"author":{"gitId":"-"},"content":"        Root\u003cInstructor\u003e instructorRoot \u003d cr.from(Instructor.class);"},{"lineNumber":86,"author":{"gitId":"-"},"content":""},{"lineNumber":87,"author":{"gitId":"-"},"content":"        cr.select(instructorRoot).where(cb.equal(instructorRoot.get(\"regKey\"), regKey));"},{"lineNumber":88,"author":{"gitId":"-"},"content":""},{"lineNumber":89,"author":{"gitId":"-"},"content":"        return HibernateUtil.createQuery(cr).getResultStream().findFirst().orElse(null);"},{"lineNumber":90,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":91,"author":{"gitId":"-"},"content":""},{"lineNumber":92,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":93,"author":{"gitId":"-"},"content":"     * Gets an instructor by {@code googleId}."},{"lineNumber":94,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":95,"author":{"gitId":"-"},"content":"    public Instructor getInstructorByGoogleId(String courseId, String googleId) {"},{"lineNumber":96,"author":{"gitId":"-"},"content":"        CriteriaBuilder cb \u003d HibernateUtil.getCriteriaBuilder();"},{"lineNumber":97,"author":{"gitId":"-"},"content":"        CriteriaQuery\u003cInstructor\u003e cr \u003d cb.createQuery(Instructor.class);"},{"lineNumber":98,"author":{"gitId":"-"},"content":"        Root\u003cInstructor\u003e instructorRoot \u003d cr.from(Instructor.class);"},{"lineNumber":99,"author":{"gitId":"-"},"content":"        Join\u003cInstructor, Account\u003e accountsJoin \u003d instructorRoot.join(\"account\");"},{"lineNumber":100,"author":{"gitId":"-"},"content":""},{"lineNumber":101,"author":{"gitId":"-"},"content":"        cr.select(instructorRoot).where(cb.and("},{"lineNumber":102,"author":{"gitId":"-"},"content":"                cb.equal(instructorRoot.get(\"courseId\"), courseId),"},{"lineNumber":103,"author":{"gitId":"-"},"content":"                cb.equal(accountsJoin.get(\"googleId\"), googleId)));"},{"lineNumber":104,"author":{"gitId":"-"},"content":""},{"lineNumber":105,"author":{"gitId":"-"},"content":"        return HibernateUtil.createQuery(cr).getResultStream().findFirst().orElse(null);"},{"lineNumber":106,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":107,"author":{"gitId":"-"},"content":""},{"lineNumber":108,"author":{"gitId":"domlimm"},"content":"    /**"},{"lineNumber":109,"author":{"gitId":"domlimm"},"content":"     * Gets a student by its {@code id}."},{"lineNumber":110,"author":{"gitId":"domlimm"},"content":"     */"},{"lineNumber":111,"author":{"gitId":"domlimm"},"content":"    public Student getStudent(UUID id) {"},{"lineNumber":112,"author":{"gitId":"domlimm"},"content":"        assert id !\u003d null;"},{"lineNumber":113,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":114,"author":{"gitId":"domlimm"},"content":"        return HibernateUtil.get(Student.class, id);"},{"lineNumber":115,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":116,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":117,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":118,"author":{"gitId":"-"},"content":"     * Gets a student by {@code regKey}."},{"lineNumber":119,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":120,"author":{"gitId":"-"},"content":"    public Student getStudentByRegKey(String regKey) {"},{"lineNumber":121,"author":{"gitId":"-"},"content":"        CriteriaBuilder cb \u003d HibernateUtil.getCriteriaBuilder();"},{"lineNumber":122,"author":{"gitId":"-"},"content":"        CriteriaQuery\u003cStudent\u003e cr \u003d cb.createQuery(Student.class);"},{"lineNumber":123,"author":{"gitId":"-"},"content":"        Root\u003cStudent\u003e studentRoot \u003d cr.from(Student.class);"},{"lineNumber":124,"author":{"gitId":"-"},"content":""},{"lineNumber":125,"author":{"gitId":"-"},"content":"        cr.select(studentRoot).where(cb.equal(studentRoot.get(\"regKey\"), regKey));"},{"lineNumber":126,"author":{"gitId":"-"},"content":""},{"lineNumber":127,"author":{"gitId":"-"},"content":"        return HibernateUtil.createQuery(cr).getResultStream().findFirst().orElse(null);"},{"lineNumber":128,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":129,"author":{"gitId":"-"},"content":""},{"lineNumber":130,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":131,"author":{"gitId":"-"},"content":"     * Gets a student by {@code googleId}."},{"lineNumber":132,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":133,"author":{"gitId":"-"},"content":"    public Student getStudentByGoogleId(String courseId, String googleId) {"},{"lineNumber":134,"author":{"gitId":"-"},"content":"        CriteriaBuilder cb \u003d HibernateUtil.getCriteriaBuilder();"},{"lineNumber":135,"author":{"gitId":"-"},"content":"        CriteriaQuery\u003cStudent\u003e cr \u003d cb.createQuery(Student.class);"},{"lineNumber":136,"author":{"gitId":"-"},"content":"        Root\u003cStudent\u003e studentRoot \u003d cr.from(Student.class);"},{"lineNumber":137,"author":{"gitId":"-"},"content":"        Join\u003cStudent, Account\u003e accountsJoin \u003d studentRoot.join(\"account\");"},{"lineNumber":138,"author":{"gitId":"-"},"content":""},{"lineNumber":139,"author":{"gitId":"-"},"content":"        cr.select(studentRoot).where(cb.and("},{"lineNumber":140,"author":{"gitId":"-"},"content":"                cb.equal(studentRoot.get(\"courseId\"), courseId),"},{"lineNumber":141,"author":{"gitId":"-"},"content":"                cb.equal(accountsJoin.get(\"googleId\"), googleId)));"},{"lineNumber":142,"author":{"gitId":"-"},"content":""},{"lineNumber":143,"author":{"gitId":"-"},"content":"        return HibernateUtil.createQuery(cr).getResultStream().findFirst().orElse(null);"},{"lineNumber":144,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":145,"author":{"gitId":"-"},"content":""},{"lineNumber":146,"author":{"gitId":"domlimm"},"content":"    /**"},{"lineNumber":147,"author":{"gitId":"domlimm"},"content":"     * Gets a list of students by {@code teamName} and {@code courseId}."},{"lineNumber":148,"author":{"gitId":"domlimm"},"content":"     */"},{"lineNumber":149,"author":{"gitId":"domlimm"},"content":"    public List\u003cStudent\u003e getStudentsByTeamName(String teamName, String courseId) {"},{"lineNumber":150,"author":{"gitId":"domlimm"},"content":"        CriteriaBuilder cb \u003d HibernateUtil.getCriteriaBuilder();"},{"lineNumber":151,"author":{"gitId":"domlimm"},"content":"        CriteriaQuery\u003cStudent\u003e cr \u003d cb.createQuery(Student.class);"},{"lineNumber":152,"author":{"gitId":"domlimm"},"content":"        Root\u003cStudent\u003e studentRoot \u003d cr.from(Student.class);"},{"lineNumber":153,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":154,"author":{"gitId":"domlimm"},"content":"        studentRoot.alias(\"student\");"},{"lineNumber":155,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":156,"author":{"gitId":"domlimm"},"content":"        Join\u003cStudent, Team\u003e teamsJoin \u003d studentRoot.join(\"team\");"},{"lineNumber":157,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":158,"author":{"gitId":"domlimm"},"content":"        cr.select(studentRoot).where(cb.and("},{"lineNumber":159,"author":{"gitId":"domlimm"},"content":"                cb.equal(studentRoot.get(\"courseId\"), courseId),"},{"lineNumber":160,"author":{"gitId":"domlimm"},"content":"                cb.equal(teamsJoin.get(\"name\"), teamName)));"},{"lineNumber":161,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":162,"author":{"gitId":"domlimm"},"content":"        return HibernateUtil.createQuery(cr).getResultList();"},{"lineNumber":163,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":164,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":165,"author":{"gitId":"domlimm"},"content":"    /**"},{"lineNumber":166,"author":{"gitId":"domlimm"},"content":"     * Gets all instructors and students by {@code googleId}."},{"lineNumber":167,"author":{"gitId":"domlimm"},"content":"     */"},{"lineNumber":168,"author":{"gitId":"domlimm"},"content":"    public List\u003cUser\u003e getAllUsersByGoogleId(String googleId) {"},{"lineNumber":169,"author":{"gitId":"domlimm"},"content":"        CriteriaBuilder cb \u003d HibernateUtil.getCriteriaBuilder();"},{"lineNumber":170,"author":{"gitId":"domlimm"},"content":"        CriteriaQuery\u003cUser\u003e usersCr \u003d cb.createQuery(User.class);"},{"lineNumber":171,"author":{"gitId":"domlimm"},"content":"        Root\u003cUser\u003e usersRoot \u003d usersCr.from(User.class);"},{"lineNumber":172,"author":{"gitId":"domlimm"},"content":"        Join\u003cUser, Account\u003e accountsJoin \u003d usersRoot.join(\"account\");"},{"lineNumber":173,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":174,"author":{"gitId":"domlimm"},"content":"        usersCr.select(usersRoot).where(cb.equal(accountsJoin.get(\"googleId\"), googleId));"},{"lineNumber":175,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":176,"author":{"gitId":"domlimm"},"content":"        return HibernateUtil.createQuery(usersCr).getResultList();"},{"lineNumber":177,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":178,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":179,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":180,"author":{"gitId":"-"},"content":"     * Gets all instructors and students by {@code googleId}."},{"lineNumber":181,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":182,"author":{"gitId":"-"},"content":"    public List\u003cInstructor\u003e getAllInstructorsByGoogleId(String googleId) {"},{"lineNumber":183,"author":{"gitId":"-"},"content":"        CriteriaBuilder cb \u003d HibernateUtil.getCriteriaBuilder();"},{"lineNumber":184,"author":{"gitId":"-"},"content":"        CriteriaQuery\u003cInstructor\u003e instructorsCr \u003d cb.createQuery(Instructor.class);"},{"lineNumber":185,"author":{"gitId":"-"},"content":"        Root\u003cInstructor\u003e instructorsRoot \u003d instructorsCr.from(Instructor.class);"},{"lineNumber":186,"author":{"gitId":"-"},"content":"        Join\u003cInstructor, Account\u003e accountsJoin \u003d instructorsRoot.join(\"account\");"},{"lineNumber":187,"author":{"gitId":"-"},"content":""},{"lineNumber":188,"author":{"gitId":"-"},"content":"        instructorsCr.select(instructorsRoot).where(cb.equal(accountsJoin.get(\"googleId\"), googleId));"},{"lineNumber":189,"author":{"gitId":"-"},"content":""},{"lineNumber":190,"author":{"gitId":"-"},"content":"        return HibernateUtil.createQuery(instructorsCr).getResultList();"},{"lineNumber":191,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":192,"author":{"gitId":"-"},"content":""},{"lineNumber":193,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":194,"author":{"gitId":"-"},"content":"     * Gets all instructors and students by {@code googleId}."},{"lineNumber":195,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":196,"author":{"gitId":"-"},"content":"    public List\u003cStudent\u003e getAllStudentsByGoogleId(String googleId) {"},{"lineNumber":197,"author":{"gitId":"-"},"content":"        CriteriaBuilder cb \u003d HibernateUtil.getCriteriaBuilder();"},{"lineNumber":198,"author":{"gitId":"-"},"content":"        CriteriaQuery\u003cStudent\u003e studentsCr \u003d cb.createQuery(Student.class);"},{"lineNumber":199,"author":{"gitId":"-"},"content":"        Root\u003cStudent\u003e studentsRoot \u003d studentsCr.from(Student.class);"},{"lineNumber":200,"author":{"gitId":"-"},"content":"        Join\u003cStudent, Account\u003e accountsJoin \u003d studentsRoot.join(\"account\");"},{"lineNumber":201,"author":{"gitId":"-"},"content":""},{"lineNumber":202,"author":{"gitId":"-"},"content":"        studentsCr.select(studentsRoot).where(cb.equal(accountsJoin.get(\"googleId\"), googleId));"},{"lineNumber":203,"author":{"gitId":"-"},"content":""},{"lineNumber":204,"author":{"gitId":"-"},"content":"        return HibernateUtil.createQuery(studentsCr).getResultList();"},{"lineNumber":205,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":206,"author":{"gitId":"-"},"content":""},{"lineNumber":207,"author":{"gitId":"domlimm"},"content":"    /**"},{"lineNumber":208,"author":{"gitId":"domlimm"},"content":"     * Deletes a user."},{"lineNumber":209,"author":{"gitId":"domlimm"},"content":"     */"},{"lineNumber":210,"author":{"gitId":"domlimm"},"content":"    public \u003cT extends User\u003e void deleteUser(T user) {"},{"lineNumber":211,"author":{"gitId":"domlimm"},"content":"        if (user !\u003d null) {"},{"lineNumber":212,"author":{"gitId":"domlimm"},"content":"            delete(user);"},{"lineNumber":213,"author":{"gitId":"domlimm"},"content":"        }"},{"lineNumber":214,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":215,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":216,"author":{"gitId":"domlimm"},"content":"    /**"},{"lineNumber":217,"author":{"gitId":"domlimm"},"content":"     * Gets the number of instructors created within a specified time range."},{"lineNumber":218,"author":{"gitId":"domlimm"},"content":"     */"},{"lineNumber":219,"author":{"gitId":"domlimm"},"content":"    public long getNumInstructorsByTimeRange(Instant startTime, Instant endTime) {"},{"lineNumber":220,"author":{"gitId":"domlimm"},"content":"        CriteriaBuilder cb \u003d HibernateUtil.getCriteriaBuilder();"},{"lineNumber":221,"author":{"gitId":"domlimm"},"content":"        CriteriaQuery\u003cLong\u003e cr \u003d cb.createQuery(Long.class);"},{"lineNumber":222,"author":{"gitId":"domlimm"},"content":"        Root\u003cInstructor\u003e root \u003d cr.from(Instructor.class);"},{"lineNumber":223,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":224,"author":{"gitId":"domlimm"},"content":"        cr.select(cb.count(root.get(\"id\"))).where(cb.and("},{"lineNumber":225,"author":{"gitId":"domlimm"},"content":"                cb.greaterThanOrEqualTo(root.get(\"createdAt\"), startTime),"},{"lineNumber":226,"author":{"gitId":"domlimm"},"content":"                cb.lessThan(root.get(\"createdAt\"), endTime)));"},{"lineNumber":227,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":228,"author":{"gitId":"domlimm"},"content":"        return HibernateUtil.createQuery(cr).getSingleResult();"},{"lineNumber":229,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":230,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":231,"author":{"gitId":"domlimm"},"content":"    /**"},{"lineNumber":232,"author":{"gitId":"domlimm"},"content":"     * Gets the number of students created within a specified time range."},{"lineNumber":233,"author":{"gitId":"domlimm"},"content":"     */"},{"lineNumber":234,"author":{"gitId":"domlimm"},"content":"    public long getNumStudentsByTimeRange(Instant startTime, Instant endTime) {"},{"lineNumber":235,"author":{"gitId":"domlimm"},"content":"        CriteriaBuilder cb \u003d HibernateUtil.getCriteriaBuilder();"},{"lineNumber":236,"author":{"gitId":"domlimm"},"content":"        CriteriaQuery\u003cLong\u003e cr \u003d cb.createQuery(Long.class);"},{"lineNumber":237,"author":{"gitId":"domlimm"},"content":"        Root\u003cStudent\u003e root \u003d cr.from(Student.class);"},{"lineNumber":238,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":239,"author":{"gitId":"domlimm"},"content":"        cr.select(cb.count(root.get(\"id\"))).where(cb.and("},{"lineNumber":240,"author":{"gitId":"domlimm"},"content":"                cb.greaterThanOrEqualTo(root.get(\"createdAt\"), startTime),"},{"lineNumber":241,"author":{"gitId":"domlimm"},"content":"                cb.lessThan(root.get(\"createdAt\"), endTime)));"},{"lineNumber":242,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":243,"author":{"gitId":"domlimm"},"content":"        return HibernateUtil.createQuery(cr).getSingleResult();"},{"lineNumber":244,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":245,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":246,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":247,"author":{"gitId":"EuniceSim142"},"content":"     * Gets the list of instructors for the specified {@code courseId}."},{"lineNumber":248,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":249,"author":{"gitId":"EuniceSim142"},"content":"    public List\u003cInstructor\u003e getInstructorsForCourse(String courseId) {"},{"lineNumber":250,"author":{"gitId":"EuniceSim142"},"content":"        assert courseId !\u003d null;"},{"lineNumber":251,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":252,"author":{"gitId":"EuniceSim142"},"content":"        CriteriaBuilder cb \u003d HibernateUtil.getCriteriaBuilder();"},{"lineNumber":253,"author":{"gitId":"EuniceSim142"},"content":"        CriteriaQuery\u003cInstructor\u003e cr \u003d cb.createQuery(Instructor.class);"},{"lineNumber":254,"author":{"gitId":"EuniceSim142"},"content":"        Root\u003cInstructor\u003e root \u003d cr.from(Instructor.class);"},{"lineNumber":255,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":256,"author":{"gitId":"EuniceSim142"},"content":"        cr.select(root).where(cb.equal(root.get(\"courseId\"), courseId));"},{"lineNumber":257,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":258,"author":{"gitId":"EuniceSim142"},"content":"        return HibernateUtil.createQuery(cr).getResultList();"},{"lineNumber":259,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":260,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":261,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":262,"author":{"gitId":"EuniceSim142"},"content":"     * Gets the list of students for the specified {@code courseId}."},{"lineNumber":263,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":264,"author":{"gitId":"EuniceSim142"},"content":"    public List\u003cStudent\u003e getStudentsForCourse(String courseId) {"},{"lineNumber":265,"author":{"gitId":"EuniceSim142"},"content":"        assert courseId !\u003d null;"},{"lineNumber":266,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":267,"author":{"gitId":"EuniceSim142"},"content":"        CriteriaBuilder cb \u003d HibernateUtil.getCriteriaBuilder();"},{"lineNumber":268,"author":{"gitId":"EuniceSim142"},"content":"        CriteriaQuery\u003cStudent\u003e cr \u003d cb.createQuery(Student.class);"},{"lineNumber":269,"author":{"gitId":"EuniceSim142"},"content":"        Root\u003cStudent\u003e root \u003d cr.from(Student.class);"},{"lineNumber":270,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":271,"author":{"gitId":"EuniceSim142"},"content":"        cr.select(root).where(cb.equal(root.get(\"courseId\"), courseId));"},{"lineNumber":272,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":273,"author":{"gitId":"EuniceSim142"},"content":"        return HibernateUtil.createQuery(cr).getResultList();"},{"lineNumber":274,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":275,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":276,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":277,"author":{"gitId":"EuniceSim142"},"content":"     * Gets the instructor with the specified {@code userEmail}."},{"lineNumber":278,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":279,"author":{"gitId":"EuniceSim142"},"content":"    public Instructor getInstructorForEmail(String courseId, String userEmail) {"},{"lineNumber":280,"author":{"gitId":"EuniceSim142"},"content":"        assert courseId !\u003d null;"},{"lineNumber":281,"author":{"gitId":"EuniceSim142"},"content":"        assert userEmail !\u003d null;"},{"lineNumber":282,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":283,"author":{"gitId":"EuniceSim142"},"content":"        CriteriaBuilder cb \u003d HibernateUtil.getCriteriaBuilder();"},{"lineNumber":284,"author":{"gitId":"EuniceSim142"},"content":"        CriteriaQuery\u003cInstructor\u003e cr \u003d cb.createQuery(Instructor.class);"},{"lineNumber":285,"author":{"gitId":"EuniceSim142"},"content":"        Root\u003cInstructor\u003e instructorRoot \u003d cr.from(Instructor.class);"},{"lineNumber":286,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":287,"author":{"gitId":"EuniceSim142"},"content":"        cr.select(instructorRoot)"},{"lineNumber":288,"author":{"gitId":"EuniceSim142"},"content":"                .where(cb.and("},{"lineNumber":289,"author":{"gitId":"EuniceSim142"},"content":"                    cb.equal(instructorRoot.get(\"courseId\"), courseId),"},{"lineNumber":290,"author":{"gitId":"EuniceSim142"},"content":"                    cb.equal(instructorRoot.get(\"email\"), userEmail)));"},{"lineNumber":291,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":292,"author":{"gitId":"EuniceSim142"},"content":"        return HibernateUtil.createQuery(cr).getResultStream().findFirst().orElse(null);"},{"lineNumber":293,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":294,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":295,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":296,"author":{"gitId":"EuniceSim142"},"content":"     * Gets the student with the specified {@code userEmail}."},{"lineNumber":297,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":298,"author":{"gitId":"EuniceSim142"},"content":"    public Student getStudentForEmail(String courseId, String userEmail) {"},{"lineNumber":299,"author":{"gitId":"EuniceSim142"},"content":"        assert courseId !\u003d null;"},{"lineNumber":300,"author":{"gitId":"EuniceSim142"},"content":"        assert userEmail !\u003d null;"},{"lineNumber":301,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":302,"author":{"gitId":"EuniceSim142"},"content":"        CriteriaBuilder cb \u003d HibernateUtil.getCriteriaBuilder();"},{"lineNumber":303,"author":{"gitId":"EuniceSim142"},"content":"        CriteriaQuery\u003cStudent\u003e cr \u003d cb.createQuery(Student.class);"},{"lineNumber":304,"author":{"gitId":"EuniceSim142"},"content":"        Root\u003cStudent\u003e studentRoot \u003d cr.from(Student.class);"},{"lineNumber":305,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":306,"author":{"gitId":"EuniceSim142"},"content":"        cr.select(studentRoot)"},{"lineNumber":307,"author":{"gitId":"EuniceSim142"},"content":"                .where(cb.and("},{"lineNumber":308,"author":{"gitId":"EuniceSim142"},"content":"                    cb.equal(studentRoot.get(\"courseId\"), courseId),"},{"lineNumber":309,"author":{"gitId":"EuniceSim142"},"content":"                    cb.equal(studentRoot.get(\"email\"), userEmail)));"},{"lineNumber":310,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":311,"author":{"gitId":"EuniceSim142"},"content":"        return HibernateUtil.createQuery(cr).getResultStream().findFirst().orElse(null);"},{"lineNumber":312,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":313,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":314,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":315,"author":{"gitId":"EuniceSim142"},"content":"     * Gets list of students by email."},{"lineNumber":316,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":317,"author":{"gitId":"EuniceSim142"},"content":"    public List\u003cStudent\u003e getAllStudentsForEmail(String email) {"},{"lineNumber":318,"author":{"gitId":"EuniceSim142"},"content":"        assert email !\u003d null;"},{"lineNumber":319,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":320,"author":{"gitId":"EuniceSim142"},"content":"        CriteriaBuilder cb \u003d HibernateUtil.getCriteriaBuilder();"},{"lineNumber":321,"author":{"gitId":"EuniceSim142"},"content":"        CriteriaQuery\u003cStudent\u003e cr \u003d cb.createQuery(Student.class);"},{"lineNumber":322,"author":{"gitId":"EuniceSim142"},"content":"        Root\u003cStudent\u003e studentRoot \u003d cr.from(Student.class);"},{"lineNumber":323,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":324,"author":{"gitId":"EuniceSim142"},"content":"        cr.select(studentRoot)"},{"lineNumber":325,"author":{"gitId":"EuniceSim142"},"content":"                .where(cb.equal(studentRoot.get(\"email\"), email));"},{"lineNumber":326,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":327,"author":{"gitId":"EuniceSim142"},"content":"        return HibernateUtil.createQuery(cr).getResultList();"},{"lineNumber":328,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":329,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":330,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":331,"author":{"gitId":"EuniceSim142"},"content":"     * Gets all instructors associated with a googleId."},{"lineNumber":332,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":333,"author":{"gitId":"EuniceSim142"},"content":"    public List\u003cInstructor\u003e getInstructorsForGoogleId(String googleId) {"},{"lineNumber":334,"author":{"gitId":"EuniceSim142"},"content":"        assert googleId !\u003d null;"},{"lineNumber":335,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":336,"author":{"gitId":"EuniceSim142"},"content":"        CriteriaBuilder cb \u003d HibernateUtil.getCriteriaBuilder();"},{"lineNumber":337,"author":{"gitId":"EuniceSim142"},"content":"        CriteriaQuery\u003cInstructor\u003e cr \u003d cb.createQuery(Instructor.class);"},{"lineNumber":338,"author":{"gitId":"EuniceSim142"},"content":"        Root\u003cInstructor\u003e instructorRoot \u003d cr.from(Instructor.class);"},{"lineNumber":339,"author":{"gitId":"EuniceSim142"},"content":"        Join\u003cInstructor, Account\u003e accountsJoin \u003d instructorRoot.join(\"account\");"},{"lineNumber":340,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":341,"author":{"gitId":"EuniceSim142"},"content":"        cr.select(instructorRoot).where(cb.equal(accountsJoin.get(\"googleId\"), googleId));"},{"lineNumber":342,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":343,"author":{"gitId":"EuniceSim142"},"content":"        return HibernateUtil.createQuery(cr).getResultList();"},{"lineNumber":344,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":345,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":346,"author":{"gitId":"cedricongjh"},"content":"    /**"},{"lineNumber":347,"author":{"gitId":"cedricongjh"},"content":"     * Gets all students of a section of a course."},{"lineNumber":348,"author":{"gitId":"cedricongjh"},"content":"     */"},{"lineNumber":349,"author":{"gitId":"cedricongjh"},"content":"    public List\u003cStudent\u003e getStudentsForSection(Section section, String courseId) {"},{"lineNumber":350,"author":{"gitId":"cedricongjh"},"content":"        assert section !\u003d null;"},{"lineNumber":351,"author":{"gitId":"cedricongjh"},"content":"        assert courseId !\u003d null;"},{"lineNumber":352,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":353,"author":{"gitId":"cedricongjh"},"content":"        CriteriaBuilder cb \u003d HibernateUtil.getCriteriaBuilder();"},{"lineNumber":354,"author":{"gitId":"cedricongjh"},"content":"        CriteriaQuery\u003cStudent\u003e cr \u003d cb.createQuery(Student.class);"},{"lineNumber":355,"author":{"gitId":"cedricongjh"},"content":"        Root\u003cStudent\u003e studentRoot \u003d cr.from(Student.class);"},{"lineNumber":356,"author":{"gitId":"cedricongjh"},"content":"        Join\u003cStudent, Course\u003e courseJoin \u003d studentRoot.join(\"course\");"},{"lineNumber":357,"author":{"gitId":"cedricongjh"},"content":"        Join\u003cStudent, Team\u003e teamsJoin \u003d studentRoot.join(\"team\");"},{"lineNumber":358,"author":{"gitId":"cedricongjh"},"content":"        Join\u003cTeam, Section\u003e sectionJoin \u003d teamsJoin.join(\"section\");"},{"lineNumber":359,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":360,"author":{"gitId":"cedricongjh"},"content":"        cr.select(studentRoot)"},{"lineNumber":361,"author":{"gitId":"cedricongjh"},"content":"                .where(cb.and("},{"lineNumber":362,"author":{"gitId":"cedricongjh"},"content":"                    cb.equal(courseJoin.get(\"id\"), courseId),"},{"lineNumber":363,"author":{"gitId":"cedricongjh"},"content":"                    cb.equal(sectionJoin.get(\"id\"), section.getId())));"},{"lineNumber":364,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":365,"author":{"gitId":"cedricongjh"},"content":"        return HibernateUtil.createQuery(cr).getResultList();"},{"lineNumber":366,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":367,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":368,"author":{"gitId":"cedricongjh"},"content":"    /**"},{"lineNumber":369,"author":{"gitId":"cedricongjh"},"content":"     * Gets all students of a team of a course."},{"lineNumber":370,"author":{"gitId":"cedricongjh"},"content":"     */"},{"lineNumber":371,"author":{"gitId":"cedricongjh"},"content":"    public List\u003cStudent\u003e getStudentsForTeam(String teamName, String courseId) {"},{"lineNumber":372,"author":{"gitId":"cedricongjh"},"content":"        assert teamName !\u003d null;"},{"lineNumber":373,"author":{"gitId":"cedricongjh"},"content":"        assert courseId !\u003d null;"},{"lineNumber":374,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":375,"author":{"gitId":"cedricongjh"},"content":"        CriteriaBuilder cb \u003d HibernateUtil.getCriteriaBuilder();"},{"lineNumber":376,"author":{"gitId":"cedricongjh"},"content":"        CriteriaQuery\u003cStudent\u003e cr \u003d cb.createQuery(Student.class);"},{"lineNumber":377,"author":{"gitId":"cedricongjh"},"content":"        Root\u003cStudent\u003e studentRoot \u003d cr.from(Student.class);"},{"lineNumber":378,"author":{"gitId":"cedricongjh"},"content":"        Join\u003cStudent, Course\u003e courseJoin \u003d studentRoot.join(\"course\");"},{"lineNumber":379,"author":{"gitId":"cedricongjh"},"content":"        Join\u003cStudent, Team\u003e teamsJoin \u003d studentRoot.join(\"team\");"},{"lineNumber":380,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":381,"author":{"gitId":"cedricongjh"},"content":"        cr.select(studentRoot)"},{"lineNumber":382,"author":{"gitId":"cedricongjh"},"content":"                .where(cb.and("},{"lineNumber":383,"author":{"gitId":"cedricongjh"},"content":"                    cb.equal(courseJoin.get(\"id\"), courseId),"},{"lineNumber":384,"author":{"gitId":"cedricongjh"},"content":"                    cb.equal(teamsJoin.get(\"name\"), teamName)));"},{"lineNumber":385,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":386,"author":{"gitId":"cedricongjh"},"content":"        return HibernateUtil.createQuery(cr).getResultList();"},{"lineNumber":387,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":388,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":389,"author":{"gitId":"domlimm"},"content":"}"}],"authorContributionMap":{"domlimm":152,"cedricongjh":47,"EuniceSim142":100,"-":90}},{"path":"src/main/java/teammates/storage/sqlentity/Account.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.storage.sqlentity;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.time.Instant;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.util.ArrayList;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import java.util.Objects;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import java.util.UUID;"},{"lineNumber":8,"author":{"gitId":"-"},"content":""},{"lineNumber":9,"author":{"gitId":"-"},"content":"import org.hibernate.annotations.NaturalId;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import org.hibernate.annotations.UpdateTimestamp;"},{"lineNumber":11,"author":{"gitId":"-"},"content":""},{"lineNumber":12,"author":{"gitId":"-"},"content":"import teammates.common.util.FieldValidator;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import teammates.common.util.SanitizationHelper;"},{"lineNumber":14,"author":{"gitId":"-"},"content":""},{"lineNumber":15,"author":{"gitId":"hhdqirui"},"content":"import jakarta.persistence.CascadeType;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"import jakarta.persistence.Column;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"import jakarta.persistence.Entity;"},{"lineNumber":18,"author":{"gitId":"-"},"content":"import jakarta.persistence.Id;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"import jakarta.persistence.OneToMany;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"import jakarta.persistence.Table;"},{"lineNumber":21,"author":{"gitId":"-"},"content":""},{"lineNumber":22,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":23,"author":{"gitId":"-"},"content":" * Represents a unique account in the system."},{"lineNumber":24,"author":{"gitId":"-"},"content":" */"},{"lineNumber":25,"author":{"gitId":"-"},"content":"@Entity"},{"lineNumber":26,"author":{"gitId":"-"},"content":"@Table(name \u003d \"Accounts\")"},{"lineNumber":27,"author":{"gitId":"-"},"content":"public class Account extends BaseEntity {"},{"lineNumber":28,"author":{"gitId":"-"},"content":"    @Id"},{"lineNumber":29,"author":{"gitId":"-"},"content":"    private UUID id;"},{"lineNumber":30,"author":{"gitId":"-"},"content":""},{"lineNumber":31,"author":{"gitId":"-"},"content":"    @NaturalId"},{"lineNumber":32,"author":{"gitId":"-"},"content":"    private String googleId;"},{"lineNumber":33,"author":{"gitId":"-"},"content":""},{"lineNumber":34,"author":{"gitId":"-"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":35,"author":{"gitId":"-"},"content":"    private String name;"},{"lineNumber":36,"author":{"gitId":"-"},"content":""},{"lineNumber":37,"author":{"gitId":"-"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":38,"author":{"gitId":"-"},"content":"    private String email;"},{"lineNumber":39,"author":{"gitId":"-"},"content":""},{"lineNumber":40,"author":{"gitId":"hhdqirui"},"content":"    @OneToMany(mappedBy \u003d \"account\", cascade \u003d CascadeType.ALL)"},{"lineNumber":41,"author":{"gitId":"-"},"content":"    private List\u003cReadNotification\u003e readNotifications \u003d new ArrayList\u003c\u003e();"},{"lineNumber":42,"author":{"gitId":"-"},"content":""},{"lineNumber":43,"author":{"gitId":"-"},"content":"    @UpdateTimestamp"},{"lineNumber":44,"author":{"gitId":"-"},"content":"    private Instant updatedAt;"},{"lineNumber":45,"author":{"gitId":"-"},"content":""},{"lineNumber":46,"author":{"gitId":"-"},"content":"    protected Account() {"},{"lineNumber":47,"author":{"gitId":"-"},"content":"        // required by Hibernate"},{"lineNumber":48,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":49,"author":{"gitId":"-"},"content":""},{"lineNumber":50,"author":{"gitId":"-"},"content":"    public Account(String googleId, String name, String email) {"},{"lineNumber":51,"author":{"gitId":"-"},"content":"        this.setId(UUID.randomUUID());"},{"lineNumber":52,"author":{"gitId":"-"},"content":"        this.setGoogleId(googleId);"},{"lineNumber":53,"author":{"gitId":"-"},"content":"        this.setName(name);"},{"lineNumber":54,"author":{"gitId":"-"},"content":"        this.setEmail(email);"},{"lineNumber":55,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":56,"author":{"gitId":"-"},"content":""},{"lineNumber":57,"author":{"gitId":"hhdqirui"},"content":"    /**"},{"lineNumber":58,"author":{"gitId":"hhdqirui"},"content":"     * Add a read notification to this account."},{"lineNumber":59,"author":{"gitId":"hhdqirui"},"content":"     */"},{"lineNumber":60,"author":{"gitId":"hhdqirui"},"content":"    public void addReadNotification(ReadNotification readNotification) {"},{"lineNumber":61,"author":{"gitId":"hhdqirui"},"content":"        readNotifications.add(readNotification);"},{"lineNumber":62,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":63,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":64,"author":{"gitId":"-"},"content":"    public UUID getId() {"},{"lineNumber":65,"author":{"gitId":"-"},"content":"        return id;"},{"lineNumber":66,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":67,"author":{"gitId":"-"},"content":""},{"lineNumber":68,"author":{"gitId":"-"},"content":"    public void setId(UUID id) {"},{"lineNumber":69,"author":{"gitId":"-"},"content":"        this.id \u003d id;"},{"lineNumber":70,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":71,"author":{"gitId":"-"},"content":""},{"lineNumber":72,"author":{"gitId":"-"},"content":"    public String getGoogleId() {"},{"lineNumber":73,"author":{"gitId":"-"},"content":"        return googleId;"},{"lineNumber":74,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":75,"author":{"gitId":"-"},"content":""},{"lineNumber":76,"author":{"gitId":"-"},"content":"    public void setGoogleId(String googleId) {"},{"lineNumber":77,"author":{"gitId":"-"},"content":"        this.googleId \u003d SanitizationHelper.sanitizeGoogleId(googleId);"},{"lineNumber":78,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":79,"author":{"gitId":"-"},"content":""},{"lineNumber":80,"author":{"gitId":"-"},"content":"    public String getName() {"},{"lineNumber":81,"author":{"gitId":"-"},"content":"        return name;"},{"lineNumber":82,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":83,"author":{"gitId":"-"},"content":""},{"lineNumber":84,"author":{"gitId":"-"},"content":"    public void setName(String name) {"},{"lineNumber":85,"author":{"gitId":"-"},"content":"        this.name \u003d SanitizationHelper.sanitizeName(name);"},{"lineNumber":86,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":87,"author":{"gitId":"-"},"content":""},{"lineNumber":88,"author":{"gitId":"-"},"content":"    public String getEmail() {"},{"lineNumber":89,"author":{"gitId":"-"},"content":"        return email;"},{"lineNumber":90,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":91,"author":{"gitId":"-"},"content":""},{"lineNumber":92,"author":{"gitId":"-"},"content":"    public void setEmail(String email) {"},{"lineNumber":93,"author":{"gitId":"-"},"content":"        this.email \u003d SanitizationHelper.sanitizeEmail(email);"},{"lineNumber":94,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":95,"author":{"gitId":"-"},"content":""},{"lineNumber":96,"author":{"gitId":"-"},"content":"    public List\u003cReadNotification\u003e getReadNotifications() {"},{"lineNumber":97,"author":{"gitId":"-"},"content":"        return readNotifications;"},{"lineNumber":98,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":99,"author":{"gitId":"-"},"content":""},{"lineNumber":100,"author":{"gitId":"-"},"content":"    public void setReadNotifications(List\u003cReadNotification\u003e readNotifications) {"},{"lineNumber":101,"author":{"gitId":"-"},"content":"        this.readNotifications \u003d readNotifications;"},{"lineNumber":102,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":103,"author":{"gitId":"-"},"content":""},{"lineNumber":104,"author":{"gitId":"-"},"content":"    public Instant getUpdatedAt() {"},{"lineNumber":105,"author":{"gitId":"-"},"content":"        return updatedAt;"},{"lineNumber":106,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":107,"author":{"gitId":"-"},"content":""},{"lineNumber":108,"author":{"gitId":"-"},"content":"    public void setUpdatedAt(Instant updatedAt) {"},{"lineNumber":109,"author":{"gitId":"-"},"content":"        this.updatedAt \u003d updatedAt;"},{"lineNumber":110,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":111,"author":{"gitId":"-"},"content":""},{"lineNumber":112,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":113,"author":{"gitId":"-"},"content":"    public List\u003cString\u003e getInvalidityInfo() {"},{"lineNumber":114,"author":{"gitId":"-"},"content":"        List\u003cString\u003e errors \u003d new ArrayList\u003c\u003e();"},{"lineNumber":115,"author":{"gitId":"-"},"content":""},{"lineNumber":116,"author":{"gitId":"-"},"content":"        addNonEmptyError(FieldValidator.getInvalidityInfoForGoogleId(googleId), errors);"},{"lineNumber":117,"author":{"gitId":"-"},"content":"        addNonEmptyError(FieldValidator.getInvalidityInfoForPersonName(name), errors);"},{"lineNumber":118,"author":{"gitId":"-"},"content":"        addNonEmptyError(FieldValidator.getInvalidityInfoForEmail(email), errors);"},{"lineNumber":119,"author":{"gitId":"-"},"content":""},{"lineNumber":120,"author":{"gitId":"-"},"content":"        return errors;"},{"lineNumber":121,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":122,"author":{"gitId":"-"},"content":""},{"lineNumber":123,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":124,"author":{"gitId":"-"},"content":"    public boolean equals(Object other) {"},{"lineNumber":125,"author":{"gitId":"-"},"content":"        if (other \u003d\u003d null) {"},{"lineNumber":126,"author":{"gitId":"-"},"content":"            return false;"},{"lineNumber":127,"author":{"gitId":"-"},"content":"        } else if (this \u003d\u003d other) {"},{"lineNumber":128,"author":{"gitId":"-"},"content":"            return true;"},{"lineNumber":129,"author":{"gitId":"-"},"content":"        } else if (this.getClass() \u003d\u003d other.getClass()) {"},{"lineNumber":130,"author":{"gitId":"-"},"content":"            Account otherAccount \u003d (Account) other;"},{"lineNumber":131,"author":{"gitId":"-"},"content":"            return Objects.equals(this.getId(), otherAccount.getId());"},{"lineNumber":132,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":133,"author":{"gitId":"-"},"content":"            return false;"},{"lineNumber":134,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":135,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":136,"author":{"gitId":"-"},"content":""},{"lineNumber":137,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":138,"author":{"gitId":"-"},"content":"    public int hashCode() {"},{"lineNumber":139,"author":{"gitId":"-"},"content":"        return this.getId().hashCode();"},{"lineNumber":140,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":141,"author":{"gitId":"-"},"content":""},{"lineNumber":142,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":143,"author":{"gitId":"-"},"content":"    public String toString() {"},{"lineNumber":144,"author":{"gitId":"-"},"content":"        return \"Account [id\u003d\" + id + \", googleId\u003d\" + googleId + \", name\u003d\" + name + \", email\u003d\" + email"},{"lineNumber":145,"author":{"gitId":"-"},"content":"                + \", readNotifications\u003d\" + readNotifications + \", createdAt\u003d\" + getCreatedAt()"},{"lineNumber":146,"author":{"gitId":"-"},"content":"                + \",updatedAt\u003d\" + updatedAt + \"]\";"},{"lineNumber":147,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":148,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"hhdqirui":9,"-":139}},{"path":"src/main/java/teammates/storage/sqlentity/AccountRequest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"kevin9foong"},"content":"package teammates.storage.sqlentity;"},{"lineNumber":2,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":3,"author":{"gitId":"kevin9foong"},"content":"import java.security.SecureRandom;"},{"lineNumber":4,"author":{"gitId":"kevin9foong"},"content":"import java.time.Instant;"},{"lineNumber":5,"author":{"gitId":"kevin9foong"},"content":"import java.util.ArrayList;"},{"lineNumber":6,"author":{"gitId":"kevin9foong"},"content":"import java.util.List;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import java.util.Objects;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import java.util.UUID;"},{"lineNumber":9,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":10,"author":{"gitId":"kevin9foong"},"content":"import org.hibernate.annotations.UpdateTimestamp;"},{"lineNumber":11,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":12,"author":{"gitId":"kevin9foong"},"content":"import teammates.common.util.Config;"},{"lineNumber":13,"author":{"gitId":"kevin9foong"},"content":"import teammates.common.util.Const;"},{"lineNumber":14,"author":{"gitId":"kevin9foong"},"content":"import teammates.common.util.FieldValidator;"},{"lineNumber":15,"author":{"gitId":"kevin9foong"},"content":"import teammates.common.util.SanitizationHelper;"},{"lineNumber":16,"author":{"gitId":"kevin9foong"},"content":"import teammates.common.util.StringHelper;"},{"lineNumber":17,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":18,"author":{"gitId":"kevin9foong"},"content":"import jakarta.persistence.Entity;"},{"lineNumber":19,"author":{"gitId":"kevin9foong"},"content":"import jakarta.persistence.Id;"},{"lineNumber":20,"author":{"gitId":"kevin9foong"},"content":"import jakarta.persistence.Table;"},{"lineNumber":21,"author":{"gitId":"kevin9foong"},"content":"import jakarta.persistence.UniqueConstraint;"},{"lineNumber":22,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":23,"author":{"gitId":"kevin9foong"},"content":"/**"},{"lineNumber":24,"author":{"gitId":"kevin9foong"},"content":" * Entity for AccountRequests."},{"lineNumber":25,"author":{"gitId":"kevin9foong"},"content":" */"},{"lineNumber":26,"author":{"gitId":"kevin9foong"},"content":"@Entity"},{"lineNumber":27,"author":{"gitId":"kevin9foong"},"content":"@Table(name \u003d \"AccountRequests\","},{"lineNumber":28,"author":{"gitId":"kevin9foong"},"content":"        uniqueConstraints \u003d {"},{"lineNumber":29,"author":{"gitId":"kevin9foong"},"content":"                @UniqueConstraint(name \u003d \"Unique registration key\", columnNames \u003d \"registrationKey\"),"},{"lineNumber":30,"author":{"gitId":"kevin9foong"},"content":"                @UniqueConstraint(name \u003d \"Unique name and institute\", columnNames \u003d {\"email\", \"institute\"})"},{"lineNumber":31,"author":{"gitId":"kevin9foong"},"content":"        })"},{"lineNumber":32,"author":{"gitId":"kevin9foong"},"content":"public class AccountRequest extends BaseEntity {"},{"lineNumber":33,"author":{"gitId":"kevin9foong"},"content":"    @Id"},{"lineNumber":34,"author":{"gitId":"-"},"content":"    private UUID id;"},{"lineNumber":35,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":36,"author":{"gitId":"kevin9foong"},"content":"    private String registrationKey;"},{"lineNumber":37,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":38,"author":{"gitId":"kevin9foong"},"content":"    private String name;"},{"lineNumber":39,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":40,"author":{"gitId":"kevin9foong"},"content":"    private String email;"},{"lineNumber":41,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":42,"author":{"gitId":"kevin9foong"},"content":"    private String institute;"},{"lineNumber":43,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":44,"author":{"gitId":"kevin9foong"},"content":"    private Instant registeredAt;"},{"lineNumber":45,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":46,"author":{"gitId":"kevin9foong"},"content":"    @UpdateTimestamp"},{"lineNumber":47,"author":{"gitId":"kevin9foong"},"content":"    private Instant updatedAt;"},{"lineNumber":48,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":49,"author":{"gitId":"kevin9foong"},"content":"    protected AccountRequest() {"},{"lineNumber":50,"author":{"gitId":"kevin9foong"},"content":"        // required by Hibernate"},{"lineNumber":51,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":52,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":53,"author":{"gitId":"kevin9foong"},"content":"    public AccountRequest(String email, String name, String institute) {"},{"lineNumber":54,"author":{"gitId":"-"},"content":"        this.setId(UUID.randomUUID());"},{"lineNumber":55,"author":{"gitId":"kevin9foong"},"content":"        this.setEmail(email);"},{"lineNumber":56,"author":{"gitId":"kevin9foong"},"content":"        this.setName(name);"},{"lineNumber":57,"author":{"gitId":"kevin9foong"},"content":"        this.setInstitute(institute);"},{"lineNumber":58,"author":{"gitId":"-"},"content":"        this.generateNewRegistrationKey();"},{"lineNumber":59,"author":{"gitId":"kevin9foong"},"content":"        this.setCreatedAt(Instant.now());"},{"lineNumber":60,"author":{"gitId":"kevin9foong"},"content":"        this.setRegisteredAt(null);"},{"lineNumber":61,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":62,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":63,"author":{"gitId":"kevin9foong"},"content":"    @Override"},{"lineNumber":64,"author":{"gitId":"kevin9foong"},"content":"    public List\u003cString\u003e getInvalidityInfo() {"},{"lineNumber":65,"author":{"gitId":"kevin9foong"},"content":"        List\u003cString\u003e errors \u003d new ArrayList\u003c\u003e();"},{"lineNumber":66,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":67,"author":{"gitId":"kevin9foong"},"content":"        addNonEmptyError(FieldValidator.getInvalidityInfoForEmail(getEmail()), errors);"},{"lineNumber":68,"author":{"gitId":"kevin9foong"},"content":"        addNonEmptyError(FieldValidator.getInvalidityInfoForPersonName(getName()), errors);"},{"lineNumber":69,"author":{"gitId":"kevin9foong"},"content":"        addNonEmptyError(FieldValidator.getInvalidityInfoForInstituteName(getInstitute()), errors);"},{"lineNumber":70,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":71,"author":{"gitId":"kevin9foong"},"content":"        return errors;"},{"lineNumber":72,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":73,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":74,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":75,"author":{"gitId":"-"},"content":"     * Generates a new registration key for the account request."},{"lineNumber":76,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":77,"author":{"gitId":"-"},"content":"    public void generateNewRegistrationKey() {"},{"lineNumber":78,"author":{"gitId":"-"},"content":"        this.setRegistrationKey(generateRegistrationKey());"},{"lineNumber":79,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":80,"author":{"gitId":"-"},"content":""},{"lineNumber":81,"author":{"gitId":"kevin9foong"},"content":"    /**"},{"lineNumber":82,"author":{"gitId":"kevin9foong"},"content":"     * Generate unique registration key for the account request."},{"lineNumber":83,"author":{"gitId":"kevin9foong"},"content":"     * The key contains random elements to avoid being guessed."},{"lineNumber":84,"author":{"gitId":"kevin9foong"},"content":"     */"},{"lineNumber":85,"author":{"gitId":"kevin9foong"},"content":"    private String generateRegistrationKey() {"},{"lineNumber":86,"author":{"gitId":"kevin9foong"},"content":"        String uniqueId \u003d String.valueOf(getId());"},{"lineNumber":87,"author":{"gitId":"kevin9foong"},"content":"        SecureRandom prng \u003d new SecureRandom();"},{"lineNumber":88,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":89,"author":{"gitId":"kevin9foong"},"content":"        return StringHelper.encrypt(uniqueId + prng.nextInt());"},{"lineNumber":90,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":91,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":92,"author":{"gitId":"-"},"content":"    public UUID getId() {"},{"lineNumber":93,"author":{"gitId":"kevin9foong"},"content":"        return this.id;"},{"lineNumber":94,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":95,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":96,"author":{"gitId":"-"},"content":"    public void setId(UUID id) {"},{"lineNumber":97,"author":{"gitId":"kevin9foong"},"content":"        this.id \u003d id;"},{"lineNumber":98,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":99,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":100,"author":{"gitId":"kevin9foong"},"content":"    public String getRegistrationKey() {"},{"lineNumber":101,"author":{"gitId":"kevin9foong"},"content":"        return this.registrationKey;"},{"lineNumber":102,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":103,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":104,"author":{"gitId":"kevin9foong"},"content":"    public void setRegistrationKey(String registrationKey) {"},{"lineNumber":105,"author":{"gitId":"kevin9foong"},"content":"        this.registrationKey \u003d registrationKey;"},{"lineNumber":106,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":107,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":108,"author":{"gitId":"kevin9foong"},"content":"    public String getName() {"},{"lineNumber":109,"author":{"gitId":"kevin9foong"},"content":"        return this.name;"},{"lineNumber":110,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":111,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":112,"author":{"gitId":"kevin9foong"},"content":"    public void setName(String name) {"},{"lineNumber":113,"author":{"gitId":"kevin9foong"},"content":"        this.name \u003d SanitizationHelper.sanitizeName(name);"},{"lineNumber":114,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":115,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":116,"author":{"gitId":"kevin9foong"},"content":"    public String getEmail() {"},{"lineNumber":117,"author":{"gitId":"kevin9foong"},"content":"        return this.email;"},{"lineNumber":118,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":119,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":120,"author":{"gitId":"kevin9foong"},"content":"    public void setEmail(String email) {"},{"lineNumber":121,"author":{"gitId":"kevin9foong"},"content":"        this.email \u003d SanitizationHelper.sanitizeEmail(email);"},{"lineNumber":122,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":123,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":124,"author":{"gitId":"kevin9foong"},"content":"    public String getInstitute() {"},{"lineNumber":125,"author":{"gitId":"kevin9foong"},"content":"        return this.institute;"},{"lineNumber":126,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":127,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":128,"author":{"gitId":"kevin9foong"},"content":"    public void setInstitute(String institute) {"},{"lineNumber":129,"author":{"gitId":"kevin9foong"},"content":"        this.institute \u003d SanitizationHelper.sanitizeTitle(institute);"},{"lineNumber":130,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":131,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":132,"author":{"gitId":"kevin9foong"},"content":"    public Instant getRegisteredAt() {"},{"lineNumber":133,"author":{"gitId":"kevin9foong"},"content":"        return this.registeredAt;"},{"lineNumber":134,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":135,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":136,"author":{"gitId":"kevin9foong"},"content":"    public void setRegisteredAt(Instant registeredAt) {"},{"lineNumber":137,"author":{"gitId":"kevin9foong"},"content":"        this.registeredAt \u003d registeredAt;"},{"lineNumber":138,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":139,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":140,"author":{"gitId":"kevin9foong"},"content":"    public Instant getUpdatedAt() {"},{"lineNumber":141,"author":{"gitId":"kevin9foong"},"content":"        return this.updatedAt;"},{"lineNumber":142,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":143,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":144,"author":{"gitId":"kevin9foong"},"content":"    public void setUpdatedAt(Instant updatedAt) {"},{"lineNumber":145,"author":{"gitId":"kevin9foong"},"content":"        this.updatedAt \u003d updatedAt;"},{"lineNumber":146,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":147,"author":{"gitId":"-"},"content":""},{"lineNumber":148,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":149,"author":{"gitId":"-"},"content":"    public boolean equals(Object other) {"},{"lineNumber":150,"author":{"gitId":"-"},"content":"        if (other \u003d\u003d null) {"},{"lineNumber":151,"author":{"gitId":"-"},"content":"            return false;"},{"lineNumber":152,"author":{"gitId":"-"},"content":"        } else if (this \u003d\u003d other) {"},{"lineNumber":153,"author":{"gitId":"-"},"content":"            return true;"},{"lineNumber":154,"author":{"gitId":"-"},"content":"        } else if (this.getClass() \u003d\u003d other.getClass()) {"},{"lineNumber":155,"author":{"gitId":"-"},"content":"            AccountRequest otherAccountRequest \u003d (AccountRequest) other;"},{"lineNumber":156,"author":{"gitId":"-"},"content":"            return Objects.equals(this.getId(), otherAccountRequest.getId());"},{"lineNumber":157,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":158,"author":{"gitId":"-"},"content":"            return false;"},{"lineNumber":159,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":160,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":161,"author":{"gitId":"-"},"content":""},{"lineNumber":162,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":163,"author":{"gitId":"-"},"content":"    public int hashCode() {"},{"lineNumber":164,"author":{"gitId":"-"},"content":"        return this.getId().hashCode();"},{"lineNumber":165,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":166,"author":{"gitId":"-"},"content":""},{"lineNumber":167,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":168,"author":{"gitId":"-"},"content":"    public String toString() {"},{"lineNumber":169,"author":{"gitId":"-"},"content":"        return \"AccountRequest [id\u003d\" + id + \", registrationKey\u003d\" + registrationKey + \", name\u003d\" + name + \", email\u003d\""},{"lineNumber":170,"author":{"gitId":"-"},"content":"                + email + \", institute\u003d\" + institute + \", registeredAt\u003d\" + registeredAt + \", createdAt\u003d\" + getCreatedAt()"},{"lineNumber":171,"author":{"gitId":"-"},"content":"                + \", updatedAt\u003d\" + updatedAt + \"]\";"},{"lineNumber":172,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":173,"author":{"gitId":"-"},"content":""},{"lineNumber":174,"author":{"gitId":"kevin9foong"},"content":"    public String getRegistrationUrl() {"},{"lineNumber":175,"author":{"gitId":"kevin9foong"},"content":"        return Config.getFrontEndAppUrl(Const.WebPageURIs.JOIN_PAGE)"},{"lineNumber":176,"author":{"gitId":"kevin9foong"},"content":"                .withIsCreatingAccount(\"true\")"},{"lineNumber":177,"author":{"gitId":"kevin9foong"},"content":"                .withRegistrationKey(this.getRegistrationKey())"},{"lineNumber":178,"author":{"gitId":"kevin9foong"},"content":"                .toAbsoluteString();"},{"lineNumber":179,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":180,"author":{"gitId":"kevin9foong"},"content":"}"}],"authorContributionMap":{"kevin9foong":139,"-":41}},{"path":"src/main/java/teammates/storage/sqlentity/BaseEntity.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.storage.sqlentity;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.time.Duration;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.time.Instant;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":6,"author":{"gitId":"-"},"content":""},{"lineNumber":7,"author":{"gitId":"-"},"content":"import org.hibernate.annotations.CreationTimestamp;"},{"lineNumber":8,"author":{"gitId":"-"},"content":""},{"lineNumber":9,"author":{"gitId":"cedricongjh"},"content":"import com.google.common.reflect.TypeToken;"},{"lineNumber":10,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":11,"author":{"gitId":"cedricongjh"},"content":"import teammates.common.datatransfer.FeedbackParticipantType;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.InstructorPrivileges;"},{"lineNumber":13,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.questions.FeedbackQuestionDetails;"},{"lineNumber":14,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.questions.FeedbackQuestionType;"},{"lineNumber":15,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.questions.FeedbackResponseDetails;"},{"lineNumber":16,"author":{"gitId":"cedricongjh"},"content":"import teammates.common.util.JsonUtils;"},{"lineNumber":17,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":18,"author":{"gitId":"-"},"content":"import jakarta.persistence.AttributeConverter;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"import jakarta.persistence.Column;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"import jakarta.persistence.Converter;"},{"lineNumber":21,"author":{"gitId":"-"},"content":"import jakarta.persistence.MappedSuperclass;"},{"lineNumber":22,"author":{"gitId":"-"},"content":""},{"lineNumber":23,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":24,"author":{"gitId":"-"},"content":" * Base class for all entities."},{"lineNumber":25,"author":{"gitId":"-"},"content":" */"},{"lineNumber":26,"author":{"gitId":"-"},"content":"@MappedSuperclass"},{"lineNumber":27,"author":{"gitId":"-"},"content":"public abstract class BaseEntity {"},{"lineNumber":28,"author":{"gitId":"-"},"content":""},{"lineNumber":29,"author":{"gitId":"-"},"content":"    @CreationTimestamp"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    @Column(updatable \u003d false)"},{"lineNumber":31,"author":{"gitId":"-"},"content":"    private Instant createdAt;"},{"lineNumber":32,"author":{"gitId":"-"},"content":""},{"lineNumber":33,"author":{"gitId":"-"},"content":"    BaseEntity() {"},{"lineNumber":34,"author":{"gitId":"-"},"content":"        // instantiate as child classes"},{"lineNumber":35,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":36,"author":{"gitId":"-"},"content":""},{"lineNumber":37,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":38,"author":{"gitId":"-"},"content":"     * Returns a {@code List} of strings, one string for each attribute whose"},{"lineNumber":39,"author":{"gitId":"-"},"content":"     * value is invalid, or an empty {@code List} if all attributes are valid."},{"lineNumber":40,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":41,"author":{"gitId":"-"},"content":"     * \u003cp\u003eThe string explains why the value is invalid"},{"lineNumber":42,"author":{"gitId":"-"},"content":"     * and what should values are acceptable. These explanations are"},{"lineNumber":43,"author":{"gitId":"-"},"content":"     * good enough to show to the user."},{"lineNumber":44,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":45,"author":{"gitId":"-"},"content":"    public abstract List\u003cString\u003e getInvalidityInfo();"},{"lineNumber":46,"author":{"gitId":"-"},"content":""},{"lineNumber":47,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":48,"author":{"gitId":"-"},"content":"     * Returns true if the attributes represent a valid state for the entity."},{"lineNumber":49,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":50,"author":{"gitId":"-"},"content":"    public boolean isValid() {"},{"lineNumber":51,"author":{"gitId":"-"},"content":"        return getInvalidityInfo().isEmpty();"},{"lineNumber":52,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":53,"author":{"gitId":"-"},"content":""},{"lineNumber":54,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":55,"author":{"gitId":"-"},"content":"     * Adds {@code error} to {@code errors} if {@code error} is a non-empty string."},{"lineNumber":56,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":57,"author":{"gitId":"-"},"content":"     * @param error  An error message, possibly empty."},{"lineNumber":58,"author":{"gitId":"-"},"content":"     * @param errors A List of errors, to add {@code error} to."},{"lineNumber":59,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":60,"author":{"gitId":"-"},"content":"    void addNonEmptyError(String error, List\u003cString\u003e errors) {"},{"lineNumber":61,"author":{"gitId":"-"},"content":"        if (error.isEmpty()) {"},{"lineNumber":62,"author":{"gitId":"-"},"content":"            return;"},{"lineNumber":63,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":64,"author":{"gitId":"-"},"content":""},{"lineNumber":65,"author":{"gitId":"-"},"content":"        errors.add(error);"},{"lineNumber":66,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":67,"author":{"gitId":"-"},"content":""},{"lineNumber":68,"author":{"gitId":"-"},"content":"    public Instant getCreatedAt() {"},{"lineNumber":69,"author":{"gitId":"-"},"content":"        return createdAt;"},{"lineNumber":70,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":71,"author":{"gitId":"-"},"content":""},{"lineNumber":72,"author":{"gitId":"-"},"content":"    public void setCreatedAt(Instant createdAt) {"},{"lineNumber":73,"author":{"gitId":"-"},"content":"        this.createdAt \u003d createdAt;"},{"lineNumber":74,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":75,"author":{"gitId":"-"},"content":""},{"lineNumber":76,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":77,"author":{"gitId":"-"},"content":"     * Attribute converter between Duration and Long types."},{"lineNumber":78,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":79,"author":{"gitId":"-"},"content":"    @Converter"},{"lineNumber":80,"author":{"gitId":"-"},"content":"    public static class DurationLongConverter implements AttributeConverter\u003cDuration, Long\u003e {"},{"lineNumber":81,"author":{"gitId":"-"},"content":"        @Override"},{"lineNumber":82,"author":{"gitId":"-"},"content":"        public Long convertToDatabaseColumn(Duration duration) {"},{"lineNumber":83,"author":{"gitId":"-"},"content":"            return duration.toMinutes();"},{"lineNumber":84,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":85,"author":{"gitId":"-"},"content":""},{"lineNumber":86,"author":{"gitId":"-"},"content":"        @Override"},{"lineNumber":87,"author":{"gitId":"-"},"content":"        public Duration convertToEntityAttribute(Long minutes) {"},{"lineNumber":88,"author":{"gitId":"-"},"content":"            return Duration.ofMinutes(minutes);"},{"lineNumber":89,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":90,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":91,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":92,"author":{"gitId":"cedricongjh"},"content":"    /**"},{"lineNumber":93,"author":{"gitId":"hhdqirui"},"content":"     * Converter for {@code FeedbackQuestionDetails} stored in JSON."},{"lineNumber":94,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":95,"author":{"gitId":"cedricongjh"},"content":"     */"},{"lineNumber":96,"author":{"gitId":"cedricongjh"},"content":"    @Converter"},{"lineNumber":97,"author":{"gitId":"hhdqirui"},"content":"    public static class FeedbackQuestionDetailsConverter implements AttributeConverter\u003cFeedbackQuestionDetails, String\u003e {"},{"lineNumber":98,"author":{"gitId":"cedricongjh"},"content":"        @Override"},{"lineNumber":99,"author":{"gitId":"hhdqirui"},"content":"        public String convertToDatabaseColumn(FeedbackQuestionDetails entity) {"},{"lineNumber":100,"author":{"gitId":"domlimm"},"content":"            return JsonUtils.toJson(entity);"},{"lineNumber":101,"author":{"gitId":"cedricongjh"},"content":"        }"},{"lineNumber":102,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":103,"author":{"gitId":"cedricongjh"},"content":"        @Override"},{"lineNumber":104,"author":{"gitId":"hhdqirui"},"content":"        public FeedbackQuestionDetails convertToEntityAttribute(String dbData) {"},{"lineNumber":105,"author":{"gitId":"hhdqirui"},"content":"            return JsonUtils.fromJson(dbData, new TypeToken\u003cFeedbackQuestionDetails\u003e() {"},{"lineNumber":106,"author":{"gitId":"hhdqirui"},"content":"            }.getType());"},{"lineNumber":107,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":108,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":109,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":110,"author":{"gitId":"hhdqirui"},"content":"    /**"},{"lineNumber":111,"author":{"gitId":"hhdqirui"},"content":"     * Converter for {@code FeedbackResponseDetails} stored in JSON."},{"lineNumber":112,"author":{"gitId":"hhdqirui"},"content":"     *"},{"lineNumber":113,"author":{"gitId":"hhdqirui"},"content":"     */"},{"lineNumber":114,"author":{"gitId":"hhdqirui"},"content":"    @Converter"},{"lineNumber":115,"author":{"gitId":"hhdqirui"},"content":"    public static class FeedbackResponseDetailsConverter implements AttributeConverter\u003cFeedbackResponseDetails, String\u003e {"},{"lineNumber":116,"author":{"gitId":"hhdqirui"},"content":"        @Override"},{"lineNumber":117,"author":{"gitId":"hhdqirui"},"content":"        public String convertToDatabaseColumn(FeedbackResponseDetails entity) {"},{"lineNumber":118,"author":{"gitId":"hhdqirui"},"content":"            return JsonUtils.toJson(entity);"},{"lineNumber":119,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":120,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":121,"author":{"gitId":"hhdqirui"},"content":"        @Override"},{"lineNumber":122,"author":{"gitId":"hhdqirui"},"content":"        public FeedbackResponseDetails convertToEntityAttribute(String dbData) {"},{"lineNumber":123,"author":{"gitId":"hhdqirui"},"content":"            return JsonUtils.fromJson(dbData, new TypeToken\u003cFeedbackResponseDetails\u003e() {"},{"lineNumber":124,"author":{"gitId":"hhdqirui"},"content":"            }.getType());"},{"lineNumber":125,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":126,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":127,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":128,"author":{"gitId":"hhdqirui"},"content":"    /**"},{"lineNumber":129,"author":{"gitId":"hhdqirui"},"content":"     * Converter for {@code FeedbackQuestionType} stored in JSON."},{"lineNumber":130,"author":{"gitId":"hhdqirui"},"content":"     *"},{"lineNumber":131,"author":{"gitId":"hhdqirui"},"content":"     */"},{"lineNumber":132,"author":{"gitId":"hhdqirui"},"content":"    @Converter"},{"lineNumber":133,"author":{"gitId":"hhdqirui"},"content":"    public static class FeedbackQuestionTypeConverter implements AttributeConverter\u003cFeedbackQuestionType, String\u003e {"},{"lineNumber":134,"author":{"gitId":"hhdqirui"},"content":"        @Override"},{"lineNumber":135,"author":{"gitId":"hhdqirui"},"content":"        public String convertToDatabaseColumn(FeedbackQuestionType entity) {"},{"lineNumber":136,"author":{"gitId":"hhdqirui"},"content":"            return JsonUtils.toJson(entity);"},{"lineNumber":137,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":138,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":139,"author":{"gitId":"hhdqirui"},"content":"        @Override"},{"lineNumber":140,"author":{"gitId":"hhdqirui"},"content":"        public FeedbackQuestionType convertToEntityAttribute(String dbData) {"},{"lineNumber":141,"author":{"gitId":"hhdqirui"},"content":"            return JsonUtils.fromJson(dbData, new TypeToken\u003cFeedbackQuestionType\u003e() {"},{"lineNumber":142,"author":{"gitId":"-"},"content":"            }.getType());"},{"lineNumber":143,"author":{"gitId":"cedricongjh"},"content":"        }"},{"lineNumber":144,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":145,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":146,"author":{"gitId":"cedricongjh"},"content":"    /**"},{"lineNumber":147,"author":{"gitId":"cedricongjh"},"content":"     * Attribute converter between FeedbackParticipantType and JSON."},{"lineNumber":148,"author":{"gitId":"cedricongjh"},"content":"     */"},{"lineNumber":149,"author":{"gitId":"cedricongjh"},"content":"    @Converter"},{"lineNumber":150,"author":{"gitId":"hhdqirui"},"content":"    public static class FeedbackParticipantTypeConverter implements AttributeConverter\u003cFeedbackParticipantType, String\u003e {"},{"lineNumber":151,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":152,"author":{"gitId":"hhdqirui"},"content":"        @Override"},{"lineNumber":153,"author":{"gitId":"hhdqirui"},"content":"        public String convertToDatabaseColumn(FeedbackParticipantType attribute) {"},{"lineNumber":154,"author":{"gitId":"hhdqirui"},"content":"            return JsonUtils.toJson(attribute);"},{"lineNumber":155,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":156,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":157,"author":{"gitId":"hhdqirui"},"content":"        @Override"},{"lineNumber":158,"author":{"gitId":"hhdqirui"},"content":"        public FeedbackParticipantType convertToEntityAttribute(String dbData) {"},{"lineNumber":159,"author":{"gitId":"hhdqirui"},"content":"            return JsonUtils.fromJson(dbData, new TypeToken\u003cFeedbackParticipantType\u003e() {"},{"lineNumber":160,"author":{"gitId":"hhdqirui"},"content":"            }.getType());"},{"lineNumber":161,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":162,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":163,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":164,"author":{"gitId":"cedricongjh"},"content":"    /**"},{"lineNumber":165,"author":{"gitId":"cedricongjh"},"content":"     * Attribute converter between a list of FeedbackParticipantTypes and JSON."},{"lineNumber":166,"author":{"gitId":"cedricongjh"},"content":"     */"},{"lineNumber":167,"author":{"gitId":"cedricongjh"},"content":"    @Converter"},{"lineNumber":168,"author":{"gitId":"cedricongjh"},"content":"    public static class FeedbackParticipantTypeListConverter"},{"lineNumber":169,"author":{"gitId":"hhdqirui"},"content":"            implements AttributeConverter\u003cList\u003cFeedbackParticipantType\u003e, String\u003e {"},{"lineNumber":170,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":171,"author":{"gitId":"hhdqirui"},"content":"        @Override"},{"lineNumber":172,"author":{"gitId":"hhdqirui"},"content":"        public String convertToDatabaseColumn(List\u003cFeedbackParticipantType\u003e attribute) {"},{"lineNumber":173,"author":{"gitId":"hhdqirui"},"content":"            return JsonUtils.toJson(attribute);"},{"lineNumber":174,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":175,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":176,"author":{"gitId":"hhdqirui"},"content":"        @Override"},{"lineNumber":177,"author":{"gitId":"hhdqirui"},"content":"        public List\u003cFeedbackParticipantType\u003e convertToEntityAttribute(String dbData) {"},{"lineNumber":178,"author":{"gitId":"hhdqirui"},"content":"            return JsonUtils.fromJson(dbData, new TypeToken\u003cList\u003cFeedbackParticipantType\u003e\u003e() {"},{"lineNumber":179,"author":{"gitId":"hhdqirui"},"content":"            }.getType());"},{"lineNumber":180,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":181,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":182,"author":{"gitId":"-"},"content":""},{"lineNumber":183,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":184,"author":{"gitId":"-"},"content":"     * Converter for InstructorPrivileges."},{"lineNumber":185,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":186,"author":{"gitId":"-"},"content":"    @Converter"},{"lineNumber":187,"author":{"gitId":"-"},"content":"    public static class InstructorPrivilegesConverter implements AttributeConverter\u003cInstructorPrivileges, String\u003e {"},{"lineNumber":188,"author":{"gitId":"-"},"content":"        @Override"},{"lineNumber":189,"author":{"gitId":"-"},"content":"        public String convertToDatabaseColumn(InstructorPrivileges entity) {"},{"lineNumber":190,"author":{"gitId":"-"},"content":"            return JsonUtils.toJson(entity);"},{"lineNumber":191,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":192,"author":{"gitId":"-"},"content":""},{"lineNumber":193,"author":{"gitId":"-"},"content":"        @Override"},{"lineNumber":194,"author":{"gitId":"-"},"content":"        public InstructorPrivileges convertToEntityAttribute(String dbData) {"},{"lineNumber":195,"author":{"gitId":"-"},"content":"            return JsonUtils.fromJson(dbData, InstructorPrivileges.class);"},{"lineNumber":196,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":197,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":198,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"domlimm":1,"cedricongjh":30,"hhdqirui":66,"-":101}},{"path":"src/main/java/teammates/storage/sqlentity/Course.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.storage.sqlentity;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.time.Instant;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.util.ArrayList;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import java.util.Objects;"},{"lineNumber":7,"author":{"gitId":"-"},"content":""},{"lineNumber":8,"author":{"gitId":"-"},"content":"import org.apache.commons.lang.StringUtils;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import org.hibernate.annotations.UpdateTimestamp;"},{"lineNumber":10,"author":{"gitId":"-"},"content":""},{"lineNumber":11,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import teammates.common.util.FieldValidator;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import teammates.common.util.SanitizationHelper;"},{"lineNumber":14,"author":{"gitId":"-"},"content":""},{"lineNumber":15,"author":{"gitId":"-"},"content":"import jakarta.persistence.CascadeType;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"import jakarta.persistence.Column;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"import jakarta.persistence.Entity;"},{"lineNumber":18,"author":{"gitId":"-"},"content":"import jakarta.persistence.Id;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"import jakarta.persistence.OneToMany;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"import jakarta.persistence.Table;"},{"lineNumber":21,"author":{"gitId":"-"},"content":""},{"lineNumber":22,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":23,"author":{"gitId":"-"},"content":" * Represents a course."},{"lineNumber":24,"author":{"gitId":"-"},"content":" */"},{"lineNumber":25,"author":{"gitId":"-"},"content":"@Entity"},{"lineNumber":26,"author":{"gitId":"-"},"content":"@Table(name \u003d \"Courses\")"},{"lineNumber":27,"author":{"gitId":"-"},"content":"public class Course extends BaseEntity {"},{"lineNumber":28,"author":{"gitId":"-"},"content":"    @Id"},{"lineNumber":29,"author":{"gitId":"-"},"content":"    private String id;"},{"lineNumber":30,"author":{"gitId":"-"},"content":""},{"lineNumber":31,"author":{"gitId":"-"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":32,"author":{"gitId":"-"},"content":"    private String name;"},{"lineNumber":33,"author":{"gitId":"-"},"content":""},{"lineNumber":34,"author":{"gitId":"-"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":35,"author":{"gitId":"-"},"content":"    private String timeZone;"},{"lineNumber":36,"author":{"gitId":"-"},"content":""},{"lineNumber":37,"author":{"gitId":"-"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":38,"author":{"gitId":"-"},"content":"    private String institute;"},{"lineNumber":39,"author":{"gitId":"-"},"content":""},{"lineNumber":40,"author":{"gitId":"-"},"content":"    @OneToMany(mappedBy \u003d \"course\")"},{"lineNumber":41,"author":{"gitId":"-"},"content":"    private List\u003cFeedbackSession\u003e feedbackSessions \u003d new ArrayList\u003c\u003e();"},{"lineNumber":42,"author":{"gitId":"-"},"content":""},{"lineNumber":43,"author":{"gitId":"-"},"content":"    @OneToMany(mappedBy \u003d \"course\", cascade \u003d CascadeType.ALL)"},{"lineNumber":44,"author":{"gitId":"-"},"content":"    private List\u003cSection\u003e sections \u003d new ArrayList\u003c\u003e();"},{"lineNumber":45,"author":{"gitId":"-"},"content":""},{"lineNumber":46,"author":{"gitId":"-"},"content":"    @UpdateTimestamp"},{"lineNumber":47,"author":{"gitId":"-"},"content":"    private Instant updatedAt;"},{"lineNumber":48,"author":{"gitId":"-"},"content":""},{"lineNumber":49,"author":{"gitId":"-"},"content":"    private Instant deletedAt;"},{"lineNumber":50,"author":{"gitId":"-"},"content":""},{"lineNumber":51,"author":{"gitId":"-"},"content":"    protected Course() {"},{"lineNumber":52,"author":{"gitId":"-"},"content":"        // required by Hibernate"},{"lineNumber":53,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":54,"author":{"gitId":"-"},"content":""},{"lineNumber":55,"author":{"gitId":"-"},"content":"    public Course(String id, String name, String timeZone, String institute) {"},{"lineNumber":56,"author":{"gitId":"-"},"content":"        this.setId(id);"},{"lineNumber":57,"author":{"gitId":"-"},"content":"        this.setName(name);"},{"lineNumber":58,"author":{"gitId":"-"},"content":"        this.setTimeZone(StringUtils.defaultIfEmpty(timeZone, Const.DEFAULT_TIME_ZONE));"},{"lineNumber":59,"author":{"gitId":"-"},"content":"        this.setInstitute(institute);"},{"lineNumber":60,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":61,"author":{"gitId":"-"},"content":""},{"lineNumber":62,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":63,"author":{"gitId":"-"},"content":"    public List\u003cString\u003e getInvalidityInfo() {"},{"lineNumber":64,"author":{"gitId":"-"},"content":"        List\u003cString\u003e errors \u003d new ArrayList\u003c\u003e();"},{"lineNumber":65,"author":{"gitId":"-"},"content":""},{"lineNumber":66,"author":{"gitId":"-"},"content":"        addNonEmptyError(FieldValidator.getInvalidityInfoForCourseId(getId()), errors);"},{"lineNumber":67,"author":{"gitId":"-"},"content":"        addNonEmptyError(FieldValidator.getInvalidityInfoForCourseName(getName()), errors);"},{"lineNumber":68,"author":{"gitId":"-"},"content":"        addNonEmptyError(FieldValidator.getInvalidityInfoForInstituteName(getInstitute()), errors);"},{"lineNumber":69,"author":{"gitId":"-"},"content":""},{"lineNumber":70,"author":{"gitId":"-"},"content":"        return errors;"},{"lineNumber":71,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":72,"author":{"gitId":"-"},"content":""},{"lineNumber":73,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":74,"author":{"gitId":"-"},"content":"     * Adds a section to the Course."},{"lineNumber":75,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":76,"author":{"gitId":"-"},"content":"    public void addSection(Section section) {"},{"lineNumber":77,"author":{"gitId":"-"},"content":"        this.sections.add(section);"},{"lineNumber":78,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":79,"author":{"gitId":"-"},"content":""},{"lineNumber":80,"author":{"gitId":"-"},"content":"    public String getId() {"},{"lineNumber":81,"author":{"gitId":"-"},"content":"        return id;"},{"lineNumber":82,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":83,"author":{"gitId":"-"},"content":""},{"lineNumber":84,"author":{"gitId":"-"},"content":"    public void setId(String id) {"},{"lineNumber":85,"author":{"gitId":"-"},"content":"        this.id \u003d SanitizationHelper.sanitizeTitle(id);"},{"lineNumber":86,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":87,"author":{"gitId":"-"},"content":""},{"lineNumber":88,"author":{"gitId":"-"},"content":"    public String getName() {"},{"lineNumber":89,"author":{"gitId":"-"},"content":"        return name;"},{"lineNumber":90,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":91,"author":{"gitId":"-"},"content":""},{"lineNumber":92,"author":{"gitId":"-"},"content":"    public void setName(String name) {"},{"lineNumber":93,"author":{"gitId":"-"},"content":"        this.name \u003d SanitizationHelper.sanitizeName(name);"},{"lineNumber":94,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":95,"author":{"gitId":"-"},"content":""},{"lineNumber":96,"author":{"gitId":"-"},"content":"    public String getTimeZone() {"},{"lineNumber":97,"author":{"gitId":"-"},"content":"        return timeZone;"},{"lineNumber":98,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":99,"author":{"gitId":"-"},"content":""},{"lineNumber":100,"author":{"gitId":"-"},"content":"    public void setTimeZone(String timeZone) {"},{"lineNumber":101,"author":{"gitId":"-"},"content":"        this.timeZone \u003d timeZone;"},{"lineNumber":102,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":103,"author":{"gitId":"-"},"content":""},{"lineNumber":104,"author":{"gitId":"-"},"content":"    public String getInstitute() {"},{"lineNumber":105,"author":{"gitId":"-"},"content":"        return institute;"},{"lineNumber":106,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":107,"author":{"gitId":"-"},"content":""},{"lineNumber":108,"author":{"gitId":"-"},"content":"    public void setInstitute(String institute) {"},{"lineNumber":109,"author":{"gitId":"-"},"content":"        this.institute \u003d SanitizationHelper.sanitizeTitle(institute);"},{"lineNumber":110,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":111,"author":{"gitId":"-"},"content":""},{"lineNumber":112,"author":{"gitId":"-"},"content":"    public List\u003cFeedbackSession\u003e getFeedbackSessions() {"},{"lineNumber":113,"author":{"gitId":"-"},"content":"        return feedbackSessions;"},{"lineNumber":114,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":115,"author":{"gitId":"-"},"content":""},{"lineNumber":116,"author":{"gitId":"EuniceSim142"},"content":"    public void setFeedbackSessions(List\u003cFeedbackSession\u003e feedbackSessions) {"},{"lineNumber":117,"author":{"gitId":"EuniceSim142"},"content":"        this.feedbackSessions \u003d feedbackSessions;"},{"lineNumber":118,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":119,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":120,"author":{"gitId":"EuniceSim142"},"content":"    public List\u003cSection\u003e getSections() {"},{"lineNumber":121,"author":{"gitId":"EuniceSim142"},"content":"        return sections;"},{"lineNumber":122,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":123,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":124,"author":{"gitId":"EuniceSim142"},"content":"    public void setSections(List\u003cSection\u003e sections) {"},{"lineNumber":125,"author":{"gitId":"EuniceSim142"},"content":"        this.sections \u003d sections;"},{"lineNumber":126,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":127,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":128,"author":{"gitId":"-"},"content":"    public Instant getUpdatedAt() {"},{"lineNumber":129,"author":{"gitId":"-"},"content":"        return updatedAt;"},{"lineNumber":130,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":131,"author":{"gitId":"-"},"content":""},{"lineNumber":132,"author":{"gitId":"-"},"content":"    public void setUpdatedAt(Instant updatedAt) {"},{"lineNumber":133,"author":{"gitId":"-"},"content":"        this.updatedAt \u003d updatedAt;"},{"lineNumber":134,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":135,"author":{"gitId":"-"},"content":""},{"lineNumber":136,"author":{"gitId":"-"},"content":"    public Instant getDeletedAt() {"},{"lineNumber":137,"author":{"gitId":"-"},"content":"        return deletedAt;"},{"lineNumber":138,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":139,"author":{"gitId":"-"},"content":""},{"lineNumber":140,"author":{"gitId":"-"},"content":"    public void setDeletedAt(Instant deletedAt) {"},{"lineNumber":141,"author":{"gitId":"-"},"content":"        this.deletedAt \u003d deletedAt;"},{"lineNumber":142,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":143,"author":{"gitId":"-"},"content":""},{"lineNumber":144,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":145,"author":{"gitId":"-"},"content":"    public String toString() {"},{"lineNumber":146,"author":{"gitId":"-"},"content":"        return \"Course [id\u003d\" + id + \", name\u003d\" + name + \", timeZone\u003d\" + timeZone + \", institute\u003d\" + institute"},{"lineNumber":147,"author":{"gitId":"-"},"content":"                + \", feedbackSessions\u003d\" + feedbackSessions + \", createdAt\u003d\" + getCreatedAt()"},{"lineNumber":148,"author":{"gitId":"-"},"content":"                + \", updatedAt\u003d\" + updatedAt + \", deletedAt\u003d\" + deletedAt + \"]\";"},{"lineNumber":149,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":150,"author":{"gitId":"-"},"content":""},{"lineNumber":151,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":152,"author":{"gitId":"-"},"content":"    public int hashCode() {"},{"lineNumber":153,"author":{"gitId":"-"},"content":"        return this.id.hashCode();"},{"lineNumber":154,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":155,"author":{"gitId":"-"},"content":""},{"lineNumber":156,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":157,"author":{"gitId":"-"},"content":"    public boolean equals(Object other) {"},{"lineNumber":158,"author":{"gitId":"-"},"content":"        if (other \u003d\u003d null) {"},{"lineNumber":159,"author":{"gitId":"-"},"content":"            return false;"},{"lineNumber":160,"author":{"gitId":"-"},"content":"        } else if (this \u003d\u003d other) {"},{"lineNumber":161,"author":{"gitId":"-"},"content":"            return true;"},{"lineNumber":162,"author":{"gitId":"-"},"content":"        } else if (this.getClass() \u003d\u003d other.getClass()) {"},{"lineNumber":163,"author":{"gitId":"-"},"content":"            Course otherCourse \u003d (Course) other;"},{"lineNumber":164,"author":{"gitId":"-"},"content":"            return Objects.equals(this.id, otherCourse.id);"},{"lineNumber":165,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":166,"author":{"gitId":"-"},"content":"            return false;"},{"lineNumber":167,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":168,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":169,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"EuniceSim142":12,"-":157}},{"path":"src/main/java/teammates/storage/sqlentity/DeadlineExtension.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"EuniceSim142"},"content":"package teammates.storage.sqlentity;"},{"lineNumber":2,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":3,"author":{"gitId":"EuniceSim142"},"content":"import java.time.Instant;"},{"lineNumber":4,"author":{"gitId":"EuniceSim142"},"content":"import java.util.ArrayList;"},{"lineNumber":5,"author":{"gitId":"EuniceSim142"},"content":"import java.util.List;"},{"lineNumber":6,"author":{"gitId":"EuniceSim142"},"content":"import java.util.Objects;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import java.util.UUID;"},{"lineNumber":8,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":9,"author":{"gitId":"EuniceSim142"},"content":"import org.hibernate.annotations.UpdateTimestamp;"},{"lineNumber":10,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":11,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.util.FieldValidator;"},{"lineNumber":12,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":13,"author":{"gitId":"EuniceSim142"},"content":"import jakarta.persistence.Column;"},{"lineNumber":14,"author":{"gitId":"EuniceSim142"},"content":"import jakarta.persistence.Entity;"},{"lineNumber":15,"author":{"gitId":"EuniceSim142"},"content":"import jakarta.persistence.Id;"},{"lineNumber":16,"author":{"gitId":"EuniceSim142"},"content":"import jakarta.persistence.JoinColumn;"},{"lineNumber":17,"author":{"gitId":"EuniceSim142"},"content":"import jakarta.persistence.ManyToOne;"},{"lineNumber":18,"author":{"gitId":"EuniceSim142"},"content":"import jakarta.persistence.Table;"},{"lineNumber":19,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":20,"author":{"gitId":"EuniceSim142"},"content":"/**"},{"lineNumber":21,"author":{"gitId":"EuniceSim142"},"content":" * Represents a deadline extension entity."},{"lineNumber":22,"author":{"gitId":"EuniceSim142"},"content":" */"},{"lineNumber":23,"author":{"gitId":"EuniceSim142"},"content":"@Entity"},{"lineNumber":24,"author":{"gitId":"EuniceSim142"},"content":"@Table(name \u003d \"DeadlineExtensions\")"},{"lineNumber":25,"author":{"gitId":"EuniceSim142"},"content":"public class DeadlineExtension extends BaseEntity {"},{"lineNumber":26,"author":{"gitId":"EuniceSim142"},"content":"    @Id"},{"lineNumber":27,"author":{"gitId":"-"},"content":"    private UUID id;"},{"lineNumber":28,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":29,"author":{"gitId":"EuniceSim142"},"content":"    @ManyToOne"},{"lineNumber":30,"author":{"gitId":"EuniceSim142"},"content":"    @JoinColumn(name \u003d \"userId\", nullable \u003d false)"},{"lineNumber":31,"author":{"gitId":"EuniceSim142"},"content":"    private User user;"},{"lineNumber":32,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":33,"author":{"gitId":"EuniceSim142"},"content":"    @ManyToOne"},{"lineNumber":34,"author":{"gitId":"EuniceSim142"},"content":"    @JoinColumn(name \u003d \"sessionId\", nullable \u003d false)"},{"lineNumber":35,"author":{"gitId":"EuniceSim142"},"content":"    private FeedbackSession feedbackSession;"},{"lineNumber":36,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":37,"author":{"gitId":"EuniceSim142"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":38,"author":{"gitId":"EuniceSim142"},"content":"    private Instant endTime;"},{"lineNumber":39,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":40,"author":{"gitId":"EuniceSim142"},"content":"    @UpdateTimestamp"},{"lineNumber":41,"author":{"gitId":"EuniceSim142"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":42,"author":{"gitId":"EuniceSim142"},"content":"    private Instant updatedAt;"},{"lineNumber":43,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":44,"author":{"gitId":"EuniceSim142"},"content":"    protected DeadlineExtension() {"},{"lineNumber":45,"author":{"gitId":"EuniceSim142"},"content":"        // required by Hibernate"},{"lineNumber":46,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":47,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":48,"author":{"gitId":"EuniceSim142"},"content":"    public DeadlineExtension(User user, FeedbackSession feedbackSession, Instant endTime) {"},{"lineNumber":49,"author":{"gitId":"-"},"content":"        this.setId(UUID.randomUUID());"},{"lineNumber":50,"author":{"gitId":"EuniceSim142"},"content":"        this.setUser(user);"},{"lineNumber":51,"author":{"gitId":"EuniceSim142"},"content":"        this.setFeedbackSession(feedbackSession);"},{"lineNumber":52,"author":{"gitId":"EuniceSim142"},"content":"        this.setEndTime(endTime);"},{"lineNumber":53,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":54,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":55,"author":{"gitId":"-"},"content":"    public UUID getId() {"},{"lineNumber":56,"author":{"gitId":"EuniceSim142"},"content":"        return id;"},{"lineNumber":57,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":58,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":59,"author":{"gitId":"-"},"content":"    public void setId(UUID id) {"},{"lineNumber":60,"author":{"gitId":"EuniceSim142"},"content":"        this.id \u003d id;"},{"lineNumber":61,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":62,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":63,"author":{"gitId":"EuniceSim142"},"content":"    public User getUser() {"},{"lineNumber":64,"author":{"gitId":"EuniceSim142"},"content":"        return user;"},{"lineNumber":65,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":66,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":67,"author":{"gitId":"EuniceSim142"},"content":"    public void setUser(User user) {"},{"lineNumber":68,"author":{"gitId":"EuniceSim142"},"content":"        this.user \u003d user;"},{"lineNumber":69,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":70,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":71,"author":{"gitId":"EuniceSim142"},"content":"    public FeedbackSession getFeedbackSession() {"},{"lineNumber":72,"author":{"gitId":"EuniceSim142"},"content":"        return feedbackSession;"},{"lineNumber":73,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":74,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":75,"author":{"gitId":"EuniceSim142"},"content":"    public void setFeedbackSession(FeedbackSession feedbackSession) {"},{"lineNumber":76,"author":{"gitId":"EuniceSim142"},"content":"        this.feedbackSession \u003d feedbackSession;"},{"lineNumber":77,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":78,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":79,"author":{"gitId":"EuniceSim142"},"content":"    public Instant getEndTime() {"},{"lineNumber":80,"author":{"gitId":"EuniceSim142"},"content":"        return endTime;"},{"lineNumber":81,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":82,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":83,"author":{"gitId":"EuniceSim142"},"content":"    public void setEndTime(Instant endTime) {"},{"lineNumber":84,"author":{"gitId":"EuniceSim142"},"content":"        this.endTime \u003d endTime;"},{"lineNumber":85,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":86,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":87,"author":{"gitId":"EuniceSim142"},"content":"    public Instant getUpdatedAt() {"},{"lineNumber":88,"author":{"gitId":"EuniceSim142"},"content":"        return updatedAt;"},{"lineNumber":89,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":90,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":91,"author":{"gitId":"EuniceSim142"},"content":"    public void setUpdatedAt(Instant updatedAt) {"},{"lineNumber":92,"author":{"gitId":"EuniceSim142"},"content":"        this.updatedAt \u003d updatedAt;"},{"lineNumber":93,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":94,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":95,"author":{"gitId":"EuniceSim142"},"content":"    @Override"},{"lineNumber":96,"author":{"gitId":"EuniceSim142"},"content":"    public String toString() {"},{"lineNumber":97,"author":{"gitId":"EuniceSim142"},"content":"        return \"DeadlineExtension [id\u003d\" + id + \", user\u003d\" + user + \", feedbackSession\u003d\" + feedbackSession"},{"lineNumber":98,"author":{"gitId":"EuniceSim142"},"content":"                + \", endTime\u003d\" + endTime + \", createdAt\u003d\" + getCreatedAt() + \", updatedAt\u003d\" + updatedAt + \"]\";"},{"lineNumber":99,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":100,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":101,"author":{"gitId":"EuniceSim142"},"content":"    @Override"},{"lineNumber":102,"author":{"gitId":"EuniceSim142"},"content":"    public int hashCode() {"},{"lineNumber":103,"author":{"gitId":"-"},"content":"        return this.getId().hashCode();"},{"lineNumber":104,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":105,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":106,"author":{"gitId":"EuniceSim142"},"content":"    @Override"},{"lineNumber":107,"author":{"gitId":"EuniceSim142"},"content":"    public boolean equals(Object other) {"},{"lineNumber":108,"author":{"gitId":"EuniceSim142"},"content":"        if (other \u003d\u003d null) {"},{"lineNumber":109,"author":{"gitId":"EuniceSim142"},"content":"            return false;"},{"lineNumber":110,"author":{"gitId":"EuniceSim142"},"content":"        } else if (this \u003d\u003d other) {"},{"lineNumber":111,"author":{"gitId":"EuniceSim142"},"content":"            return true;"},{"lineNumber":112,"author":{"gitId":"EuniceSim142"},"content":"        } else if (this.getClass() \u003d\u003d other.getClass()) {"},{"lineNumber":113,"author":{"gitId":"EuniceSim142"},"content":"            DeadlineExtension otherDe \u003d (DeadlineExtension) other;"},{"lineNumber":114,"author":{"gitId":"-"},"content":"            return Objects.equals(this.getId(), otherDe.getId());"},{"lineNumber":115,"author":{"gitId":"EuniceSim142"},"content":"        } else {"},{"lineNumber":116,"author":{"gitId":"EuniceSim142"},"content":"            return false;"},{"lineNumber":117,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":118,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":119,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":120,"author":{"gitId":"EuniceSim142"},"content":"    @Override"},{"lineNumber":121,"author":{"gitId":"EuniceSim142"},"content":"    public List\u003cString\u003e getInvalidityInfo() {"},{"lineNumber":122,"author":{"gitId":"EuniceSim142"},"content":"        List\u003cString\u003e errors \u003d new ArrayList\u003c\u003e();"},{"lineNumber":123,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":124,"author":{"gitId":"EuniceSim142"},"content":"        addNonEmptyError(FieldValidator.getInvalidityInfoForTimeForSessionEndAndExtendedDeadlines("},{"lineNumber":125,"author":{"gitId":"-"},"content":"                feedbackSession.getEndTime(), List.of(this)), errors);"},{"lineNumber":126,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":127,"author":{"gitId":"EuniceSim142"},"content":"        return errors;"},{"lineNumber":128,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":129,"author":{"gitId":"EuniceSim142"},"content":"}"}],"authorContributionMap":{"EuniceSim142":121,"-":8}},{"path":"src/main/java/teammates/storage/sqlentity/FeedbackQuestion.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"cedricongjh"},"content":"package teammates.storage.sqlentity;"},{"lineNumber":2,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":3,"author":{"gitId":"cedricongjh"},"content":"import java.time.Instant;"},{"lineNumber":4,"author":{"gitId":"cedricongjh"},"content":"import java.util.ArrayList;"},{"lineNumber":5,"author":{"gitId":"cedricongjh"},"content":"import java.util.List;"},{"lineNumber":6,"author":{"gitId":"cedricongjh"},"content":"import java.util.Objects;"},{"lineNumber":7,"author":{"gitId":"cedricongjh"},"content":"import java.util.UUID;"},{"lineNumber":8,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":9,"author":{"gitId":"cedricongjh"},"content":"import org.hibernate.annotations.UpdateTimestamp;"},{"lineNumber":10,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":11,"author":{"gitId":"cedricongjh"},"content":"import teammates.common.datatransfer.FeedbackParticipantType;"},{"lineNumber":12,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.questions.FeedbackQuestionDetails;"},{"lineNumber":13,"author":{"gitId":"cedricongjh"},"content":"import teammates.common.util.FieldValidator;"},{"lineNumber":14,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.questions.FeedbackConstantSumQuestion;"},{"lineNumber":15,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.questions.FeedbackContributionQuestion;"},{"lineNumber":16,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.questions.FeedbackMcqQuestion;"},{"lineNumber":17,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.questions.FeedbackMsqQuestion;"},{"lineNumber":18,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.questions.FeedbackNumericalScaleQuestion;"},{"lineNumber":19,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.questions.FeedbackRankOptionsQuestion;"},{"lineNumber":20,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.questions.FeedbackRankRecipientsQuestion;"},{"lineNumber":21,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.questions.FeedbackRubricQuestion;"},{"lineNumber":22,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.questions.FeedbackTextQuestion;"},{"lineNumber":23,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":24,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Column;"},{"lineNumber":25,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Convert;"},{"lineNumber":26,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Entity;"},{"lineNumber":27,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.EnumType;"},{"lineNumber":28,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Enumerated;"},{"lineNumber":29,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Id;"},{"lineNumber":30,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Inheritance;"},{"lineNumber":31,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.InheritanceType;"},{"lineNumber":32,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.JoinColumn;"},{"lineNumber":33,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.ManyToOne;"},{"lineNumber":34,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.OneToMany;"},{"lineNumber":35,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Table;"},{"lineNumber":36,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":37,"author":{"gitId":"cedricongjh"},"content":"/**"},{"lineNumber":38,"author":{"gitId":"cedricongjh"},"content":" * Represents a feedback question."},{"lineNumber":39,"author":{"gitId":"cedricongjh"},"content":" */"},{"lineNumber":40,"author":{"gitId":"cedricongjh"},"content":"@Entity"},{"lineNumber":41,"author":{"gitId":"cedricongjh"},"content":"@Table(name \u003d \"FeedbackQuestions\")"},{"lineNumber":42,"author":{"gitId":"cedricongjh"},"content":"@Inheritance(strategy \u003d InheritanceType.SINGLE_TABLE)"},{"lineNumber":43,"author":{"gitId":"hhdqirui"},"content":"public abstract class FeedbackQuestion extends BaseEntity implements Comparable\u003cFeedbackQuestion\u003e {"},{"lineNumber":44,"author":{"gitId":"cedricongjh"},"content":"    @Id"},{"lineNumber":45,"author":{"gitId":"cedricongjh"},"content":"    private UUID id;"},{"lineNumber":46,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":47,"author":{"gitId":"cedricongjh"},"content":"    @ManyToOne"},{"lineNumber":48,"author":{"gitId":"cedricongjh"},"content":"    @JoinColumn(name \u003d \"sessionId\")"},{"lineNumber":49,"author":{"gitId":"cedricongjh"},"content":"    private FeedbackSession feedbackSession;"},{"lineNumber":50,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":51,"author":{"gitId":"cedricongjh"},"content":"    @OneToMany(mappedBy \u003d \"feedbackQuestion\")"},{"lineNumber":52,"author":{"gitId":"cedricongjh"},"content":"    private List\u003cFeedbackResponse\u003e feedbackResponses \u003d new ArrayList\u003c\u003e();"},{"lineNumber":53,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":54,"author":{"gitId":"cedricongjh"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":55,"author":{"gitId":"cedricongjh"},"content":"    private Integer questionNumber;"},{"lineNumber":56,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":57,"author":{"gitId":"cedricongjh"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":58,"author":{"gitId":"cedricongjh"},"content":"    private String description;"},{"lineNumber":59,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":60,"author":{"gitId":"cedricongjh"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":61,"author":{"gitId":"cedricongjh"},"content":"    @Enumerated(EnumType.STRING)"},{"lineNumber":62,"author":{"gitId":"cedricongjh"},"content":"    private FeedbackParticipantType giverType;"},{"lineNumber":63,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":64,"author":{"gitId":"cedricongjh"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":65,"author":{"gitId":"cedricongjh"},"content":"    @Enumerated(EnumType.STRING)"},{"lineNumber":66,"author":{"gitId":"cedricongjh"},"content":"    private FeedbackParticipantType recipientType;"},{"lineNumber":67,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":68,"author":{"gitId":"cedricongjh"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":69,"author":{"gitId":"cedricongjh"},"content":"    private Integer numOfEntitiesToGiveFeedbackTo;"},{"lineNumber":70,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":71,"author":{"gitId":"cedricongjh"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":72,"author":{"gitId":"cedricongjh"},"content":"    @Convert(converter \u003d FeedbackParticipantTypeListConverter.class)"},{"lineNumber":73,"author":{"gitId":"cedricongjh"},"content":"    private List\u003cFeedbackParticipantType\u003e showResponsesTo;"},{"lineNumber":74,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":75,"author":{"gitId":"cedricongjh"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":76,"author":{"gitId":"cedricongjh"},"content":"    @Convert(converter \u003d FeedbackParticipantTypeListConverter.class)"},{"lineNumber":77,"author":{"gitId":"cedricongjh"},"content":"    private List\u003cFeedbackParticipantType\u003e showGiverNameTo;"},{"lineNumber":78,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":79,"author":{"gitId":"cedricongjh"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":80,"author":{"gitId":"cedricongjh"},"content":"    @Convert(converter \u003d FeedbackParticipantTypeListConverter.class)"},{"lineNumber":81,"author":{"gitId":"cedricongjh"},"content":"    private List\u003cFeedbackParticipantType\u003e showRecipientNameTo;"},{"lineNumber":82,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":83,"author":{"gitId":"cedricongjh"},"content":"    @UpdateTimestamp"},{"lineNumber":84,"author":{"gitId":"cedricongjh"},"content":"    @Column"},{"lineNumber":85,"author":{"gitId":"cedricongjh"},"content":"    private Instant updatedAt;"},{"lineNumber":86,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":87,"author":{"gitId":"cedricongjh"},"content":"    protected FeedbackQuestion() {"},{"lineNumber":88,"author":{"gitId":"cedricongjh"},"content":"        // required by Hibernate"},{"lineNumber":89,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":90,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":91,"author":{"gitId":"cedricongjh"},"content":"    public FeedbackQuestion("},{"lineNumber":92,"author":{"gitId":"cedricongjh"},"content":"            FeedbackSession feedbackSession, Integer questionNumber,"},{"lineNumber":93,"author":{"gitId":"hhdqirui"},"content":"            String description, FeedbackParticipantType giverType, FeedbackParticipantType recipientType,"},{"lineNumber":94,"author":{"gitId":"cedricongjh"},"content":"            Integer numOfEntitiesToGiveFeedbackTo, List\u003cFeedbackParticipantType\u003e showResponsesTo,"},{"lineNumber":95,"author":{"gitId":"cedricongjh"},"content":"            List\u003cFeedbackParticipantType\u003e showGiverNameTo, List\u003cFeedbackParticipantType\u003e showRecipientNameTo"},{"lineNumber":96,"author":{"gitId":"cedricongjh"},"content":"    ) {"},{"lineNumber":97,"author":{"gitId":"-"},"content":"        this.setId(UUID.randomUUID());"},{"lineNumber":98,"author":{"gitId":"cedricongjh"},"content":"        this.setFeedbackSession(feedbackSession);"},{"lineNumber":99,"author":{"gitId":"cedricongjh"},"content":"        this.setQuestionNumber(questionNumber);"},{"lineNumber":100,"author":{"gitId":"cedricongjh"},"content":"        this.setDescription(description);"},{"lineNumber":101,"author":{"gitId":"cedricongjh"},"content":"        this.setGiverType(giverType);"},{"lineNumber":102,"author":{"gitId":"cedricongjh"},"content":"        this.setRecipientType(recipientType);"},{"lineNumber":103,"author":{"gitId":"cedricongjh"},"content":"        this.setNumOfEntitiesToGiveFeedbackTo(numOfEntitiesToGiveFeedbackTo);"},{"lineNumber":104,"author":{"gitId":"cedricongjh"},"content":"        this.setShowResponsesTo(showResponsesTo);"},{"lineNumber":105,"author":{"gitId":"cedricongjh"},"content":"        this.setShowGiverNameTo(showGiverNameTo);"},{"lineNumber":106,"author":{"gitId":"cedricongjh"},"content":"        this.setShowRecipientNameTo(showRecipientNameTo);"},{"lineNumber":107,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":108,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":109,"author":{"gitId":"hhdqirui"},"content":"    /**"},{"lineNumber":110,"author":{"gitId":"hhdqirui"},"content":"     * Gets a copy of the question details of the feedback question."},{"lineNumber":111,"author":{"gitId":"hhdqirui"},"content":"     */"},{"lineNumber":112,"author":{"gitId":"hhdqirui"},"content":"    public abstract FeedbackQuestionDetails getQuestionDetailsCopy();"},{"lineNumber":113,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":114,"author":{"gitId":"hhdqirui"},"content":"    /**"},{"lineNumber":115,"author":{"gitId":"hhdqirui"},"content":"     * Creates a feedback question according to its {@code FeedbackQuestionType}."},{"lineNumber":116,"author":{"gitId":"hhdqirui"},"content":"     */"},{"lineNumber":117,"author":{"gitId":"hhdqirui"},"content":"    public static FeedbackQuestion makeQuestion("},{"lineNumber":118,"author":{"gitId":"hhdqirui"},"content":"            FeedbackSession feedbackSession, Integer questionNumber,"},{"lineNumber":119,"author":{"gitId":"hhdqirui"},"content":"            String description, FeedbackParticipantType giverType, FeedbackParticipantType recipientType,"},{"lineNumber":120,"author":{"gitId":"hhdqirui"},"content":"            Integer numOfEntitiesToGiveFeedbackTo, List\u003cFeedbackParticipantType\u003e showResponsesTo,"},{"lineNumber":121,"author":{"gitId":"hhdqirui"},"content":"            List\u003cFeedbackParticipantType\u003e showGiverNameTo, List\u003cFeedbackParticipantType\u003e showRecipientNameTo,"},{"lineNumber":122,"author":{"gitId":"hhdqirui"},"content":"            FeedbackQuestionDetails feedbackQuestionDetails"},{"lineNumber":123,"author":{"gitId":"hhdqirui"},"content":"    ) {"},{"lineNumber":124,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion feedbackQuestion \u003d null;"},{"lineNumber":125,"author":{"gitId":"hhdqirui"},"content":"        switch (feedbackQuestionDetails.getQuestionType()) {"},{"lineNumber":126,"author":{"gitId":"hhdqirui"},"content":"        case TEXT:"},{"lineNumber":127,"author":{"gitId":"hhdqirui"},"content":"            feedbackQuestion \u003d new FeedbackTextQuestion("},{"lineNumber":128,"author":{"gitId":"hhdqirui"},"content":"                    feedbackSession, questionNumber, description, giverType, recipientType,"},{"lineNumber":129,"author":{"gitId":"hhdqirui"},"content":"                    numOfEntitiesToGiveFeedbackTo, showResponsesTo, showGiverNameTo, showRecipientNameTo,"},{"lineNumber":130,"author":{"gitId":"hhdqirui"},"content":"                    feedbackQuestionDetails"},{"lineNumber":131,"author":{"gitId":"hhdqirui"},"content":"            );"},{"lineNumber":132,"author":{"gitId":"hhdqirui"},"content":"            break;"},{"lineNumber":133,"author":{"gitId":"hhdqirui"},"content":"        case MCQ:"},{"lineNumber":134,"author":{"gitId":"hhdqirui"},"content":"            feedbackQuestion \u003d new FeedbackMcqQuestion("},{"lineNumber":135,"author":{"gitId":"hhdqirui"},"content":"                    feedbackSession, questionNumber, description, giverType, recipientType,"},{"lineNumber":136,"author":{"gitId":"hhdqirui"},"content":"                    numOfEntitiesToGiveFeedbackTo, showResponsesTo, showGiverNameTo, showRecipientNameTo,"},{"lineNumber":137,"author":{"gitId":"hhdqirui"},"content":"                    feedbackQuestionDetails"},{"lineNumber":138,"author":{"gitId":"hhdqirui"},"content":"            );"},{"lineNumber":139,"author":{"gitId":"hhdqirui"},"content":"            break;"},{"lineNumber":140,"author":{"gitId":"hhdqirui"},"content":"        case MSQ:"},{"lineNumber":141,"author":{"gitId":"hhdqirui"},"content":"            feedbackQuestion \u003d new FeedbackMsqQuestion("},{"lineNumber":142,"author":{"gitId":"hhdqirui"},"content":"                    feedbackSession, questionNumber, description, giverType, recipientType,"},{"lineNumber":143,"author":{"gitId":"hhdqirui"},"content":"                    numOfEntitiesToGiveFeedbackTo, showResponsesTo, showGiverNameTo, showRecipientNameTo,"},{"lineNumber":144,"author":{"gitId":"hhdqirui"},"content":"                    feedbackQuestionDetails"},{"lineNumber":145,"author":{"gitId":"hhdqirui"},"content":"            );"},{"lineNumber":146,"author":{"gitId":"hhdqirui"},"content":"            break;"},{"lineNumber":147,"author":{"gitId":"hhdqirui"},"content":"        case NUMSCALE:"},{"lineNumber":148,"author":{"gitId":"hhdqirui"},"content":"            feedbackQuestion \u003d new FeedbackNumericalScaleQuestion("},{"lineNumber":149,"author":{"gitId":"hhdqirui"},"content":"                    feedbackSession, questionNumber, description, giverType, recipientType,"},{"lineNumber":150,"author":{"gitId":"hhdqirui"},"content":"                    numOfEntitiesToGiveFeedbackTo, showResponsesTo, showGiverNameTo, showRecipientNameTo,"},{"lineNumber":151,"author":{"gitId":"hhdqirui"},"content":"                    feedbackQuestionDetails"},{"lineNumber":152,"author":{"gitId":"hhdqirui"},"content":"            );"},{"lineNumber":153,"author":{"gitId":"hhdqirui"},"content":"            break;"},{"lineNumber":154,"author":{"gitId":"hhdqirui"},"content":"        case CONSTSUM:"},{"lineNumber":155,"author":{"gitId":"hhdqirui"},"content":"        case CONSTSUM_OPTIONS:"},{"lineNumber":156,"author":{"gitId":"hhdqirui"},"content":"        case CONSTSUM_RECIPIENTS:"},{"lineNumber":157,"author":{"gitId":"hhdqirui"},"content":"            feedbackQuestion \u003d new FeedbackConstantSumQuestion("},{"lineNumber":158,"author":{"gitId":"hhdqirui"},"content":"                    feedbackSession, questionNumber, description, giverType, recipientType,"},{"lineNumber":159,"author":{"gitId":"hhdqirui"},"content":"                    numOfEntitiesToGiveFeedbackTo, showResponsesTo, showGiverNameTo, showRecipientNameTo,"},{"lineNumber":160,"author":{"gitId":"hhdqirui"},"content":"                    feedbackQuestionDetails"},{"lineNumber":161,"author":{"gitId":"hhdqirui"},"content":"            );"},{"lineNumber":162,"author":{"gitId":"hhdqirui"},"content":"            break;"},{"lineNumber":163,"author":{"gitId":"hhdqirui"},"content":"        case CONTRIB:"},{"lineNumber":164,"author":{"gitId":"hhdqirui"},"content":"            feedbackQuestion \u003d new FeedbackContributionQuestion("},{"lineNumber":165,"author":{"gitId":"hhdqirui"},"content":"                    feedbackSession, questionNumber, description, giverType, recipientType,"},{"lineNumber":166,"author":{"gitId":"hhdqirui"},"content":"                    numOfEntitiesToGiveFeedbackTo, showResponsesTo, showGiverNameTo, showRecipientNameTo,"},{"lineNumber":167,"author":{"gitId":"hhdqirui"},"content":"                    feedbackQuestionDetails"},{"lineNumber":168,"author":{"gitId":"hhdqirui"},"content":"            );"},{"lineNumber":169,"author":{"gitId":"hhdqirui"},"content":"            break;"},{"lineNumber":170,"author":{"gitId":"hhdqirui"},"content":"        case RUBRIC:"},{"lineNumber":171,"author":{"gitId":"hhdqirui"},"content":"            feedbackQuestion \u003d new FeedbackRubricQuestion("},{"lineNumber":172,"author":{"gitId":"hhdqirui"},"content":"                    feedbackSession, questionNumber, description, giverType, recipientType,"},{"lineNumber":173,"author":{"gitId":"hhdqirui"},"content":"                    numOfEntitiesToGiveFeedbackTo, showResponsesTo, showGiverNameTo, showRecipientNameTo,"},{"lineNumber":174,"author":{"gitId":"hhdqirui"},"content":"                    feedbackQuestionDetails"},{"lineNumber":175,"author":{"gitId":"hhdqirui"},"content":"            );"},{"lineNumber":176,"author":{"gitId":"hhdqirui"},"content":"            break;"},{"lineNumber":177,"author":{"gitId":"hhdqirui"},"content":"        case RANK_OPTIONS:"},{"lineNumber":178,"author":{"gitId":"hhdqirui"},"content":"            feedbackQuestion \u003d new FeedbackRankOptionsQuestion("},{"lineNumber":179,"author":{"gitId":"hhdqirui"},"content":"                    feedbackSession, questionNumber, description, giverType, recipientType,"},{"lineNumber":180,"author":{"gitId":"hhdqirui"},"content":"                    numOfEntitiesToGiveFeedbackTo, showResponsesTo, showGiverNameTo, showRecipientNameTo,"},{"lineNumber":181,"author":{"gitId":"hhdqirui"},"content":"                    feedbackQuestionDetails"},{"lineNumber":182,"author":{"gitId":"hhdqirui"},"content":"            );"},{"lineNumber":183,"author":{"gitId":"hhdqirui"},"content":"            break;"},{"lineNumber":184,"author":{"gitId":"hhdqirui"},"content":"        case RANK_RECIPIENTS:"},{"lineNumber":185,"author":{"gitId":"hhdqirui"},"content":"            feedbackQuestion \u003d new FeedbackRankRecipientsQuestion("},{"lineNumber":186,"author":{"gitId":"hhdqirui"},"content":"                    feedbackSession, questionNumber, description, giverType, recipientType,"},{"lineNumber":187,"author":{"gitId":"hhdqirui"},"content":"                    numOfEntitiesToGiveFeedbackTo, showResponsesTo, showGiverNameTo, showRecipientNameTo,"},{"lineNumber":188,"author":{"gitId":"hhdqirui"},"content":"                    feedbackQuestionDetails"},{"lineNumber":189,"author":{"gitId":"hhdqirui"},"content":"            );"},{"lineNumber":190,"author":{"gitId":"hhdqirui"},"content":"            break;"},{"lineNumber":191,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":192,"author":{"gitId":"hhdqirui"},"content":"        return feedbackQuestion;"},{"lineNumber":193,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":194,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":195,"author":{"gitId":"cedricongjh"},"content":"    @Override"},{"lineNumber":196,"author":{"gitId":"cedricongjh"},"content":"    public List\u003cString\u003e getInvalidityInfo() {"},{"lineNumber":197,"author":{"gitId":"cedricongjh"},"content":"        List\u003cString\u003e errors \u003d new ArrayList\u003c\u003e();"},{"lineNumber":198,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":199,"author":{"gitId":"cedricongjh"},"content":"        errors.addAll(FieldValidator.getValidityInfoForFeedbackParticipantType(giverType, recipientType));"},{"lineNumber":200,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":201,"author":{"gitId":"cedricongjh"},"content":"        errors.addAll(FieldValidator.getValidityInfoForFeedbackResponseVisibility(showResponsesTo,"},{"lineNumber":202,"author":{"gitId":"cedricongjh"},"content":"                showGiverNameTo,"},{"lineNumber":203,"author":{"gitId":"cedricongjh"},"content":"                showRecipientNameTo));"},{"lineNumber":204,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":205,"author":{"gitId":"cedricongjh"},"content":"        return errors;"},{"lineNumber":206,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":207,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":208,"author":{"gitId":"cedricongjh"},"content":"    public UUID getId() {"},{"lineNumber":209,"author":{"gitId":"cedricongjh"},"content":"        return id;"},{"lineNumber":210,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":211,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":212,"author":{"gitId":"cedricongjh"},"content":"    public void setId(UUID id) {"},{"lineNumber":213,"author":{"gitId":"cedricongjh"},"content":"        this.id \u003d id;"},{"lineNumber":214,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":215,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":216,"author":{"gitId":"cedricongjh"},"content":"    public FeedbackSession getFeedbackSession() {"},{"lineNumber":217,"author":{"gitId":"cedricongjh"},"content":"        return feedbackSession;"},{"lineNumber":218,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":219,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":220,"author":{"gitId":"cedricongjh"},"content":"    public void setFeedbackSession(FeedbackSession feedbackSession) {"},{"lineNumber":221,"author":{"gitId":"cedricongjh"},"content":"        this.feedbackSession \u003d feedbackSession;"},{"lineNumber":222,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":223,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":224,"author":{"gitId":"cedricongjh"},"content":"    public List\u003cFeedbackResponse\u003e getFeedbackResponses() {"},{"lineNumber":225,"author":{"gitId":"cedricongjh"},"content":"        return feedbackResponses;"},{"lineNumber":226,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":227,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":228,"author":{"gitId":"cedricongjh"},"content":"    public void setFeedbackResponses(List\u003cFeedbackResponse\u003e feedbackResponses) {"},{"lineNumber":229,"author":{"gitId":"cedricongjh"},"content":"        this.feedbackResponses \u003d feedbackResponses;"},{"lineNumber":230,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":231,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":232,"author":{"gitId":"cedricongjh"},"content":"    public Integer getQuestionNumber() {"},{"lineNumber":233,"author":{"gitId":"cedricongjh"},"content":"        return questionNumber;"},{"lineNumber":234,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":235,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":236,"author":{"gitId":"cedricongjh"},"content":"    public void setQuestionNumber(Integer questionNumber) {"},{"lineNumber":237,"author":{"gitId":"cedricongjh"},"content":"        this.questionNumber \u003d questionNumber;"},{"lineNumber":238,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":239,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":240,"author":{"gitId":"cedricongjh"},"content":"    public String getDescription() {"},{"lineNumber":241,"author":{"gitId":"cedricongjh"},"content":"        return description;"},{"lineNumber":242,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":243,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":244,"author":{"gitId":"cedricongjh"},"content":"    public void setDescription(String description) {"},{"lineNumber":245,"author":{"gitId":"cedricongjh"},"content":"        this.description \u003d description;"},{"lineNumber":246,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":247,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":248,"author":{"gitId":"cedricongjh"},"content":"    public FeedbackParticipantType getGiverType() {"},{"lineNumber":249,"author":{"gitId":"cedricongjh"},"content":"        return giverType;"},{"lineNumber":250,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":251,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":252,"author":{"gitId":"cedricongjh"},"content":"    public void setGiverType(FeedbackParticipantType giverType) {"},{"lineNumber":253,"author":{"gitId":"cedricongjh"},"content":"        this.giverType \u003d giverType;"},{"lineNumber":254,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":255,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":256,"author":{"gitId":"cedricongjh"},"content":"    public FeedbackParticipantType getRecipientType() {"},{"lineNumber":257,"author":{"gitId":"cedricongjh"},"content":"        return recipientType;"},{"lineNumber":258,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":259,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":260,"author":{"gitId":"cedricongjh"},"content":"    public void setRecipientType(FeedbackParticipantType recipientType) {"},{"lineNumber":261,"author":{"gitId":"cedricongjh"},"content":"        this.recipientType \u003d recipientType;"},{"lineNumber":262,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":263,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":264,"author":{"gitId":"cedricongjh"},"content":"    public Integer getNumOfEntitiesToGiveFeedbackTo() {"},{"lineNumber":265,"author":{"gitId":"cedricongjh"},"content":"        return numOfEntitiesToGiveFeedbackTo;"},{"lineNumber":266,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":267,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":268,"author":{"gitId":"cedricongjh"},"content":"    public void setNumOfEntitiesToGiveFeedbackTo(Integer numOfEntitiesToGiveFeedbackTo) {"},{"lineNumber":269,"author":{"gitId":"cedricongjh"},"content":"        this.numOfEntitiesToGiveFeedbackTo \u003d numOfEntitiesToGiveFeedbackTo;"},{"lineNumber":270,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":271,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":272,"author":{"gitId":"cedricongjh"},"content":"    public List\u003cFeedbackParticipantType\u003e getShowResponsesTo() {"},{"lineNumber":273,"author":{"gitId":"cedricongjh"},"content":"        return showResponsesTo;"},{"lineNumber":274,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":275,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":276,"author":{"gitId":"cedricongjh"},"content":"    public void setShowResponsesTo(List\u003cFeedbackParticipantType\u003e showResponsesTo) {"},{"lineNumber":277,"author":{"gitId":"cedricongjh"},"content":"        this.showResponsesTo \u003d showResponsesTo;"},{"lineNumber":278,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":279,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":280,"author":{"gitId":"cedricongjh"},"content":"    public List\u003cFeedbackParticipantType\u003e getShowGiverNameTo() {"},{"lineNumber":281,"author":{"gitId":"cedricongjh"},"content":"        return showGiverNameTo;"},{"lineNumber":282,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":283,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":284,"author":{"gitId":"cedricongjh"},"content":"    public void setShowGiverNameTo(List\u003cFeedbackParticipantType\u003e showGiverNameTo) {"},{"lineNumber":285,"author":{"gitId":"cedricongjh"},"content":"        this.showGiverNameTo \u003d showGiverNameTo;"},{"lineNumber":286,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":287,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":288,"author":{"gitId":"cedricongjh"},"content":"    public List\u003cFeedbackParticipantType\u003e getShowRecipientNameTo() {"},{"lineNumber":289,"author":{"gitId":"cedricongjh"},"content":"        return showRecipientNameTo;"},{"lineNumber":290,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":291,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":292,"author":{"gitId":"cedricongjh"},"content":"    public void setShowRecipientNameTo(List\u003cFeedbackParticipantType\u003e showRecipientNameTo) {"},{"lineNumber":293,"author":{"gitId":"cedricongjh"},"content":"        this.showRecipientNameTo \u003d showRecipientNameTo;"},{"lineNumber":294,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":295,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":296,"author":{"gitId":"cedricongjh"},"content":"    public Instant getUpdatedAt() {"},{"lineNumber":297,"author":{"gitId":"cedricongjh"},"content":"        return updatedAt;"},{"lineNumber":298,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":299,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":300,"author":{"gitId":"cedricongjh"},"content":"    public void setUpdatedAt(Instant updatedAt) {"},{"lineNumber":301,"author":{"gitId":"cedricongjh"},"content":"        this.updatedAt \u003d updatedAt;"},{"lineNumber":302,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":303,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":304,"author":{"gitId":"cedricongjh"},"content":"    @Override"},{"lineNumber":305,"author":{"gitId":"cedricongjh"},"content":"    public String toString() {"},{"lineNumber":306,"author":{"gitId":"cedricongjh"},"content":"        return \"Question [id\u003d\" + id + \", questionNumber\u003d\" + questionNumber + \", description\u003d\" + description"},{"lineNumber":307,"author":{"gitId":"hhdqirui"},"content":"                + \", giverType\u003d\" + giverType + \", recipientType\u003d\" + recipientType"},{"lineNumber":308,"author":{"gitId":"cedricongjh"},"content":"                + \", numOfEntitiesToGiveFeedbackTo\u003d\" + numOfEntitiesToGiveFeedbackTo + \", showResponsesTo\u003d\""},{"lineNumber":309,"author":{"gitId":"cedricongjh"},"content":"                + showResponsesTo + \", showGiverNameTo\u003d\" + showGiverNameTo + \", showRecipientNameTo\u003d\""},{"lineNumber":310,"author":{"gitId":"-"},"content":"                + showRecipientNameTo + \", isClosingEmailEnabled\u003d\" + \", createdAt\u003d\" + getCreatedAt() + \", updatedAt\u003d\""},{"lineNumber":311,"author":{"gitId":"cedricongjh"},"content":"                + updatedAt + \"]\";"},{"lineNumber":312,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":313,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":314,"author":{"gitId":"hhdqirui"},"content":"    @Override"},{"lineNumber":315,"author":{"gitId":"hhdqirui"},"content":"    public int compareTo(FeedbackQuestion o) {"},{"lineNumber":316,"author":{"gitId":"hhdqirui"},"content":"        if (o \u003d\u003d null) {"},{"lineNumber":317,"author":{"gitId":"hhdqirui"},"content":"            return 1;"},{"lineNumber":318,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":319,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":320,"author":{"gitId":"hhdqirui"},"content":"        if (!this.questionNumber.equals(o.questionNumber)) {"},{"lineNumber":321,"author":{"gitId":"hhdqirui"},"content":"            return Integer.compare(this.questionNumber, o.questionNumber);"},{"lineNumber":322,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":323,"author":{"gitId":"hhdqirui"},"content":"        // Although question numbers ought to be unique in a feedback session,"},{"lineNumber":324,"author":{"gitId":"hhdqirui"},"content":"        // eventual consistency can result in duplicate questions numbers."},{"lineNumber":325,"author":{"gitId":"hhdqirui"},"content":"        // Therefore, to ensure that the question order is always consistent to the user,"},{"lineNumber":326,"author":{"gitId":"hhdqirui"},"content":"        // compare feedbackQuestionId, which is guaranteed to be unique,"},{"lineNumber":327,"author":{"gitId":"hhdqirui"},"content":"        // when the questionNumbers are the same."},{"lineNumber":328,"author":{"gitId":"hhdqirui"},"content":"        return this.id.compareTo(o.id);"},{"lineNumber":329,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":330,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":331,"author":{"gitId":"cedricongjh"},"content":"    @Override"},{"lineNumber":332,"author":{"gitId":"cedricongjh"},"content":"    public int hashCode() {"},{"lineNumber":333,"author":{"gitId":"cedricongjh"},"content":"        // FeedbackQuestion ID uniquely identifies a FeedbackQuestion."},{"lineNumber":334,"author":{"gitId":"cedricongjh"},"content":"        return this.getId().hashCode();"},{"lineNumber":335,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":336,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":337,"author":{"gitId":"cedricongjh"},"content":"    @Override"},{"lineNumber":338,"author":{"gitId":"cedricongjh"},"content":"    public boolean equals(Object other) {"},{"lineNumber":339,"author":{"gitId":"cedricongjh"},"content":"        if (other \u003d\u003d null) {"},{"lineNumber":340,"author":{"gitId":"cedricongjh"},"content":"            return false;"},{"lineNumber":341,"author":{"gitId":"cedricongjh"},"content":"        } else if (this \u003d\u003d other) {"},{"lineNumber":342,"author":{"gitId":"cedricongjh"},"content":"            return true;"},{"lineNumber":343,"author":{"gitId":"cedricongjh"},"content":"        } else if (this.getClass() \u003d\u003d other.getClass()) {"},{"lineNumber":344,"author":{"gitId":"cedricongjh"},"content":"            FeedbackQuestion otherQuestion \u003d (FeedbackQuestion) other;"},{"lineNumber":345,"author":{"gitId":"-"},"content":"            return Objects.equals(this.getId(), otherQuestion.getId());"},{"lineNumber":346,"author":{"gitId":"cedricongjh"},"content":"        } else {"},{"lineNumber":347,"author":{"gitId":"cedricongjh"},"content":"            return false;"},{"lineNumber":348,"author":{"gitId":"cedricongjh"},"content":"        }"},{"lineNumber":349,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":350,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":351,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":352,"author":{"gitId":"EuniceSim142"},"content":"     * Returns true if the response is visible to the given participant type."},{"lineNumber":353,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":354,"author":{"gitId":"EuniceSim142"},"content":"    public boolean isResponseVisibleTo(FeedbackParticipantType userType) {"},{"lineNumber":355,"author":{"gitId":"EuniceSim142"},"content":"        return showResponsesTo.contains(userType);"},{"lineNumber":356,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":357,"author":{"gitId":"cedricongjh"},"content":"}"},{"lineNumber":358,"author":{"gitId":"cedricongjh"},"content":""}],"authorContributionMap":{"cedricongjh":232,"EuniceSim142":7,"hhdqirui":116,"-":3}},{"path":"src/main/java/teammates/storage/sqlentity/FeedbackResponse.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"cedricongjh"},"content":"package teammates.storage.sqlentity;"},{"lineNumber":2,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":3,"author":{"gitId":"cedricongjh"},"content":"import java.time.Instant;"},{"lineNumber":4,"author":{"gitId":"cedricongjh"},"content":"import java.util.ArrayList;"},{"lineNumber":5,"author":{"gitId":"cedricongjh"},"content":"import java.util.List;"},{"lineNumber":6,"author":{"gitId":"cedricongjh"},"content":"import java.util.Objects;"},{"lineNumber":7,"author":{"gitId":"cedricongjh"},"content":"import java.util.UUID;"},{"lineNumber":8,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":9,"author":{"gitId":"cedricongjh"},"content":"import org.hibernate.annotations.UpdateTimestamp;"},{"lineNumber":10,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":11,"author":{"gitId":"cedricongjh"},"content":"import teammates.common.datatransfer.questions.FeedbackQuestionType;"},{"lineNumber":12,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":13,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Column;"},{"lineNumber":14,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Convert;"},{"lineNumber":15,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Entity;"},{"lineNumber":16,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Id;"},{"lineNumber":17,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Inheritance;"},{"lineNumber":18,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.InheritanceType;"},{"lineNumber":19,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.JoinColumn;"},{"lineNumber":20,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.ManyToOne;"},{"lineNumber":21,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.OneToMany;"},{"lineNumber":22,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Table;"},{"lineNumber":23,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":24,"author":{"gitId":"cedricongjh"},"content":"/**"},{"lineNumber":25,"author":{"gitId":"cedricongjh"},"content":" * Represents a Feedback Response."},{"lineNumber":26,"author":{"gitId":"cedricongjh"},"content":" */"},{"lineNumber":27,"author":{"gitId":"cedricongjh"},"content":"@Entity"},{"lineNumber":28,"author":{"gitId":"domlimm"},"content":"@Table(name \u003d \"FeedbackResponses\")"},{"lineNumber":29,"author":{"gitId":"cedricongjh"},"content":"@Inheritance(strategy \u003d InheritanceType.SINGLE_TABLE)"},{"lineNumber":30,"author":{"gitId":"cedricongjh"},"content":"public abstract class FeedbackResponse extends BaseEntity {"},{"lineNumber":31,"author":{"gitId":"cedricongjh"},"content":"    @Id"},{"lineNumber":32,"author":{"gitId":"cedricongjh"},"content":"    private UUID id;"},{"lineNumber":33,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":34,"author":{"gitId":"cedricongjh"},"content":"    @ManyToOne"},{"lineNumber":35,"author":{"gitId":"cedricongjh"},"content":"    @JoinColumn(name \u003d \"questionId\")"},{"lineNumber":36,"author":{"gitId":"cedricongjh"},"content":"    private FeedbackQuestion feedbackQuestion;"},{"lineNumber":37,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":38,"author":{"gitId":"cedricongjh"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":39,"author":{"gitId":"hhdqirui"},"content":"    @Convert(converter \u003d FeedbackQuestionTypeConverter.class)"},{"lineNumber":40,"author":{"gitId":"cedricongjh"},"content":"    private FeedbackQuestionType type;"},{"lineNumber":41,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":42,"author":{"gitId":"cedricongjh"},"content":"    @OneToMany(mappedBy \u003d \"feedbackResponse\")"},{"lineNumber":43,"author":{"gitId":"cedricongjh"},"content":"    private List\u003cFeedbackResponseComment\u003e feedbackResponseComments \u003d new ArrayList\u003c\u003e();"},{"lineNumber":44,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":45,"author":{"gitId":"cedricongjh"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":46,"author":{"gitId":"cedricongjh"},"content":"    private String giver;"},{"lineNumber":47,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":48,"author":{"gitId":"cedricongjh"},"content":"    @ManyToOne"},{"lineNumber":49,"author":{"gitId":"cedricongjh"},"content":"    @JoinColumn(name \u003d \"giverSectionId\")"},{"lineNumber":50,"author":{"gitId":"cedricongjh"},"content":"    private Section giverSection;"},{"lineNumber":51,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":52,"author":{"gitId":"cedricongjh"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":53,"author":{"gitId":"cedricongjh"},"content":"    private String receiver;"},{"lineNumber":54,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":55,"author":{"gitId":"cedricongjh"},"content":"    @ManyToOne"},{"lineNumber":56,"author":{"gitId":"cedricongjh"},"content":"    @JoinColumn(name \u003d \"receiverSectionId\")"},{"lineNumber":57,"author":{"gitId":"cedricongjh"},"content":"    private Section receiverSection;"},{"lineNumber":58,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":59,"author":{"gitId":"cedricongjh"},"content":"    @UpdateTimestamp"},{"lineNumber":60,"author":{"gitId":"cedricongjh"},"content":"    private Instant updatedAt;"},{"lineNumber":61,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":62,"author":{"gitId":"cedricongjh"},"content":"    protected FeedbackResponse() {"},{"lineNumber":63,"author":{"gitId":"cedricongjh"},"content":"        // required by Hibernate"},{"lineNumber":64,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":65,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":66,"author":{"gitId":"cedricongjh"},"content":"    public FeedbackResponse("},{"lineNumber":67,"author":{"gitId":"cedricongjh"},"content":"            FeedbackQuestion feedbackQuestion, FeedbackQuestionType type, String giver,"},{"lineNumber":68,"author":{"gitId":"cedricongjh"},"content":"            Section giverSection, String receiver, Section receiverSection"},{"lineNumber":69,"author":{"gitId":"cedricongjh"},"content":"    ) {"},{"lineNumber":70,"author":{"gitId":"-"},"content":"        this.setId(UUID.randomUUID());"},{"lineNumber":71,"author":{"gitId":"cedricongjh"},"content":"        this.setFeedbackQuestion(feedbackQuestion);"},{"lineNumber":72,"author":{"gitId":"cedricongjh"},"content":"        this.setFeedbackQuestionType(type);"},{"lineNumber":73,"author":{"gitId":"cedricongjh"},"content":"        this.setGiver(giver);"},{"lineNumber":74,"author":{"gitId":"cedricongjh"},"content":"        this.setGiverSection(giverSection);"},{"lineNumber":75,"author":{"gitId":"cedricongjh"},"content":"        this.setReceiver(receiver);"},{"lineNumber":76,"author":{"gitId":"cedricongjh"},"content":"        this.setReceiverSection(receiverSection);"},{"lineNumber":77,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":78,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":79,"author":{"gitId":"cedricongjh"},"content":"    public UUID getId() {"},{"lineNumber":80,"author":{"gitId":"cedricongjh"},"content":"        return id;"},{"lineNumber":81,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":82,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":83,"author":{"gitId":"cedricongjh"},"content":"    public void setId(UUID id) {"},{"lineNumber":84,"author":{"gitId":"cedricongjh"},"content":"        this.id \u003d id;"},{"lineNumber":85,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":86,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":87,"author":{"gitId":"cedricongjh"},"content":"    public FeedbackQuestion getFeedbackQuestion() {"},{"lineNumber":88,"author":{"gitId":"cedricongjh"},"content":"        return feedbackQuestion;"},{"lineNumber":89,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":90,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":91,"author":{"gitId":"cedricongjh"},"content":"    public void setFeedbackQuestion(FeedbackQuestion feedbackQuestion) {"},{"lineNumber":92,"author":{"gitId":"cedricongjh"},"content":"        this.feedbackQuestion \u003d feedbackQuestion;"},{"lineNumber":93,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":94,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":95,"author":{"gitId":"cedricongjh"},"content":"    public FeedbackQuestionType getFeedbackQuestionType() {"},{"lineNumber":96,"author":{"gitId":"cedricongjh"},"content":"        return type;"},{"lineNumber":97,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":98,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":99,"author":{"gitId":"cedricongjh"},"content":"    public void setFeedbackQuestionType(FeedbackQuestionType type) {"},{"lineNumber":100,"author":{"gitId":"cedricongjh"},"content":"        this.type \u003d type;"},{"lineNumber":101,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":102,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":103,"author":{"gitId":"cedricongjh"},"content":"    public List\u003cFeedbackResponseComment\u003e getFeedbackResponseComments() {"},{"lineNumber":104,"author":{"gitId":"cedricongjh"},"content":"        return feedbackResponseComments;"},{"lineNumber":105,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":106,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":107,"author":{"gitId":"cedricongjh"},"content":"    public void setFeedbackResponseComments(List\u003cFeedbackResponseComment\u003e feedbackResponseComments) {"},{"lineNumber":108,"author":{"gitId":"cedricongjh"},"content":"        this.feedbackResponseComments \u003d feedbackResponseComments;"},{"lineNumber":109,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":110,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":111,"author":{"gitId":"cedricongjh"},"content":"    public String getGiver() {"},{"lineNumber":112,"author":{"gitId":"cedricongjh"},"content":"        return giver;"},{"lineNumber":113,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":114,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":115,"author":{"gitId":"cedricongjh"},"content":"    public void setGiver(String giver) {"},{"lineNumber":116,"author":{"gitId":"cedricongjh"},"content":"        this.giver \u003d giver;"},{"lineNumber":117,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":118,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":119,"author":{"gitId":"cedricongjh"},"content":"    public Section getGiverSection() {"},{"lineNumber":120,"author":{"gitId":"cedricongjh"},"content":"        return giverSection;"},{"lineNumber":121,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":122,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":123,"author":{"gitId":"cedricongjh"},"content":"    public void setGiverSection(Section giverSection) {"},{"lineNumber":124,"author":{"gitId":"cedricongjh"},"content":"        this.giverSection \u003d giverSection;"},{"lineNumber":125,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":126,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":127,"author":{"gitId":"cedricongjh"},"content":"    public String getReceiver() {"},{"lineNumber":128,"author":{"gitId":"cedricongjh"},"content":"        return receiver;"},{"lineNumber":129,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":130,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":131,"author":{"gitId":"cedricongjh"},"content":"    public void setReceiver(String receiver) {"},{"lineNumber":132,"author":{"gitId":"cedricongjh"},"content":"        this.receiver \u003d receiver;"},{"lineNumber":133,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":134,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":135,"author":{"gitId":"cedricongjh"},"content":"    public Section getReceiverSection() {"},{"lineNumber":136,"author":{"gitId":"cedricongjh"},"content":"        return receiverSection;"},{"lineNumber":137,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":138,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":139,"author":{"gitId":"cedricongjh"},"content":"    public void setReceiverSection(Section receiverSection) {"},{"lineNumber":140,"author":{"gitId":"cedricongjh"},"content":"        this.receiverSection \u003d receiverSection;"},{"lineNumber":141,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":142,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":143,"author":{"gitId":"cedricongjh"},"content":"    public Instant getUpdatedAt() {"},{"lineNumber":144,"author":{"gitId":"cedricongjh"},"content":"        return updatedAt;"},{"lineNumber":145,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":146,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":147,"author":{"gitId":"cedricongjh"},"content":"    public void setUpdatedAt(Instant updatedAt) {"},{"lineNumber":148,"author":{"gitId":"cedricongjh"},"content":"        this.updatedAt \u003d updatedAt;"},{"lineNumber":149,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":150,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":151,"author":{"gitId":"cedricongjh"},"content":"    @Override"},{"lineNumber":152,"author":{"gitId":"cedricongjh"},"content":"    public List\u003cString\u003e getInvalidityInfo() {"},{"lineNumber":153,"author":{"gitId":"cedricongjh"},"content":"        return new ArrayList\u003c\u003e();"},{"lineNumber":154,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":155,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":156,"author":{"gitId":"cedricongjh"},"content":"    @Override"},{"lineNumber":157,"author":{"gitId":"cedricongjh"},"content":"    public String toString() {"},{"lineNumber":158,"author":{"gitId":"cedricongjh"},"content":"        return \"FeedbackResponse [id\u003d\" + id + \", giver\u003d\" + giver + \", receiver\u003d\" + receiver"},{"lineNumber":159,"author":{"gitId":"cedricongjh"},"content":"                + \", createdAt\u003d\" + getCreatedAt() + \", updatedAt\u003d\" + updatedAt + \"]\";"},{"lineNumber":160,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":161,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":162,"author":{"gitId":"cedricongjh"},"content":"    @Override"},{"lineNumber":163,"author":{"gitId":"cedricongjh"},"content":"    public int hashCode() {"},{"lineNumber":164,"author":{"gitId":"cedricongjh"},"content":"        return this.getId().hashCode();"},{"lineNumber":165,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":166,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":167,"author":{"gitId":"cedricongjh"},"content":"    @Override"},{"lineNumber":168,"author":{"gitId":"cedricongjh"},"content":"    public boolean equals(Object other) {"},{"lineNumber":169,"author":{"gitId":"cedricongjh"},"content":"        if (other \u003d\u003d null) {"},{"lineNumber":170,"author":{"gitId":"cedricongjh"},"content":"            return false;"},{"lineNumber":171,"author":{"gitId":"cedricongjh"},"content":"        } else if (this \u003d\u003d other) {"},{"lineNumber":172,"author":{"gitId":"cedricongjh"},"content":"            return true;"},{"lineNumber":173,"author":{"gitId":"cedricongjh"},"content":"        } else if (this.getClass() \u003d\u003d other.getClass()) {"},{"lineNumber":174,"author":{"gitId":"cedricongjh"},"content":"            FeedbackResponse otherResponse \u003d (FeedbackResponse) other;"},{"lineNumber":175,"author":{"gitId":"-"},"content":"            return Objects.equals(this.getId(), otherResponse.getId());"},{"lineNumber":176,"author":{"gitId":"cedricongjh"},"content":"        } else {"},{"lineNumber":177,"author":{"gitId":"cedricongjh"},"content":"            return false;"},{"lineNumber":178,"author":{"gitId":"cedricongjh"},"content":"        }"},{"lineNumber":179,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":180,"author":{"gitId":"cedricongjh"},"content":"}"}],"authorContributionMap":{"domlimm":1,"cedricongjh":176,"hhdqirui":1,"-":2}},{"path":"src/main/java/teammates/storage/sqlentity/FeedbackResponseComment.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"cedricongjh"},"content":"package teammates.storage.sqlentity;"},{"lineNumber":2,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":3,"author":{"gitId":"cedricongjh"},"content":"import java.time.Instant;"},{"lineNumber":4,"author":{"gitId":"cedricongjh"},"content":"import java.util.ArrayList;"},{"lineNumber":5,"author":{"gitId":"cedricongjh"},"content":"import java.util.List;"},{"lineNumber":6,"author":{"gitId":"cedricongjh"},"content":"import java.util.Objects;"},{"lineNumber":7,"author":{"gitId":"cedricongjh"},"content":"import java.util.UUID;"},{"lineNumber":8,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":9,"author":{"gitId":"cedricongjh"},"content":"import org.hibernate.annotations.UpdateTimestamp;"},{"lineNumber":10,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":11,"author":{"gitId":"cedricongjh"},"content":"import teammates.common.datatransfer.FeedbackParticipantType;"},{"lineNumber":12,"author":{"gitId":"cedricongjh"},"content":"import teammates.common.util.FieldValidator;"},{"lineNumber":13,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":14,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Column;"},{"lineNumber":15,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Convert;"},{"lineNumber":16,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Entity;"},{"lineNumber":17,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Id;"},{"lineNumber":18,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.JoinColumn;"},{"lineNumber":19,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.ManyToOne;"},{"lineNumber":20,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Table;"},{"lineNumber":21,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":22,"author":{"gitId":"cedricongjh"},"content":"/**"},{"lineNumber":23,"author":{"gitId":"cedricongjh"},"content":" * Represents a feedback response comment."},{"lineNumber":24,"author":{"gitId":"cedricongjh"},"content":" */"},{"lineNumber":25,"author":{"gitId":"cedricongjh"},"content":"@Entity"},{"lineNumber":26,"author":{"gitId":"domlimm"},"content":"@Table(name \u003d \"FeedbackResponseComments\")"},{"lineNumber":27,"author":{"gitId":"cedricongjh"},"content":"public class FeedbackResponseComment extends BaseEntity {"},{"lineNumber":28,"author":{"gitId":"cedricongjh"},"content":"    @Id"},{"lineNumber":29,"author":{"gitId":"cedricongjh"},"content":"    private UUID id;"},{"lineNumber":30,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":31,"author":{"gitId":"cedricongjh"},"content":"    @ManyToOne"},{"lineNumber":32,"author":{"gitId":"cedricongjh"},"content":"    @JoinColumn(name \u003d \"responseId\")"},{"lineNumber":33,"author":{"gitId":"cedricongjh"},"content":"    private FeedbackResponse feedbackResponse;"},{"lineNumber":34,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":35,"author":{"gitId":"cedricongjh"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":36,"author":{"gitId":"cedricongjh"},"content":"    private String giver;"},{"lineNumber":37,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":38,"author":{"gitId":"cedricongjh"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":39,"author":{"gitId":"cedricongjh"},"content":"    @Convert(converter \u003d FeedbackParticipantTypeConverter.class)"},{"lineNumber":40,"author":{"gitId":"cedricongjh"},"content":"    private FeedbackParticipantType giverType;"},{"lineNumber":41,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":42,"author":{"gitId":"cedricongjh"},"content":"    @ManyToOne"},{"lineNumber":43,"author":{"gitId":"cedricongjh"},"content":"    @JoinColumn(name \u003d \"giverSectionId\")"},{"lineNumber":44,"author":{"gitId":"cedricongjh"},"content":"    private Section giverSection;"},{"lineNumber":45,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":46,"author":{"gitId":"cedricongjh"},"content":"    @ManyToOne"},{"lineNumber":47,"author":{"gitId":"cedricongjh"},"content":"    @JoinColumn(name \u003d \"receiverSectionId\")"},{"lineNumber":48,"author":{"gitId":"cedricongjh"},"content":"    private Section receiverSection;"},{"lineNumber":49,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":50,"author":{"gitId":"cedricongjh"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":51,"author":{"gitId":"cedricongjh"},"content":"    private String commentText;"},{"lineNumber":52,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":53,"author":{"gitId":"cedricongjh"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":54,"author":{"gitId":"cedricongjh"},"content":"    private boolean isVisibilityFollowingFeedbackQuestion;"},{"lineNumber":55,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":56,"author":{"gitId":"cedricongjh"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":57,"author":{"gitId":"cedricongjh"},"content":"    private boolean isCommentFromFeedbackParticipant;"},{"lineNumber":58,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":59,"author":{"gitId":"cedricongjh"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":60,"author":{"gitId":"cedricongjh"},"content":"    @Convert(converter \u003d FeedbackParticipantTypeListConverter.class)"},{"lineNumber":61,"author":{"gitId":"cedricongjh"},"content":"    private List\u003cFeedbackParticipantType\u003e showCommentTo;"},{"lineNumber":62,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":63,"author":{"gitId":"cedricongjh"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":64,"author":{"gitId":"cedricongjh"},"content":"    @Convert(converter \u003d FeedbackParticipantTypeListConverter.class)"},{"lineNumber":65,"author":{"gitId":"cedricongjh"},"content":"    private List\u003cFeedbackParticipantType\u003e showGiverNameTo;"},{"lineNumber":66,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":67,"author":{"gitId":"cedricongjh"},"content":"    @UpdateTimestamp"},{"lineNumber":68,"author":{"gitId":"cedricongjh"},"content":"    private Instant updatedAt;"},{"lineNumber":69,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":70,"author":{"gitId":"cedricongjh"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":71,"author":{"gitId":"cedricongjh"},"content":"    private String lastEditorEmail;"},{"lineNumber":72,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":73,"author":{"gitId":"cedricongjh"},"content":"    protected FeedbackResponseComment() {"},{"lineNumber":74,"author":{"gitId":"cedricongjh"},"content":"        // required by Hibernate"},{"lineNumber":75,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":76,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":77,"author":{"gitId":"cedricongjh"},"content":"    public FeedbackResponseComment("},{"lineNumber":78,"author":{"gitId":"cedricongjh"},"content":"            FeedbackResponse feedbackResponse, String giver, FeedbackParticipantType giverType,"},{"lineNumber":79,"author":{"gitId":"cedricongjh"},"content":"            Section giverSection, Section receiverSection, String commentText,"},{"lineNumber":80,"author":{"gitId":"cedricongjh"},"content":"            boolean isVisibilityFollowingFeedbackQuestion, boolean isCommentFromFeedbackParticipant,"},{"lineNumber":81,"author":{"gitId":"cedricongjh"},"content":"            List\u003cFeedbackParticipantType\u003e showCommentTo, List\u003cFeedbackParticipantType\u003e showGiverNameTo,"},{"lineNumber":82,"author":{"gitId":"cedricongjh"},"content":"            String lastEditorEmail"},{"lineNumber":83,"author":{"gitId":"cedricongjh"},"content":"    ) {"},{"lineNumber":84,"author":{"gitId":"-"},"content":"        this.setId(UUID.randomUUID());"},{"lineNumber":85,"author":{"gitId":"cedricongjh"},"content":"        this.setFeedbackResponse(feedbackResponse);"},{"lineNumber":86,"author":{"gitId":"cedricongjh"},"content":"        this.setGiver(giver);"},{"lineNumber":87,"author":{"gitId":"cedricongjh"},"content":"        this.setGiverType(giverType);"},{"lineNumber":88,"author":{"gitId":"cedricongjh"},"content":"        this.setGiverSection(giverSection);"},{"lineNumber":89,"author":{"gitId":"cedricongjh"},"content":"        this.setReceiverSection(receiverSection);"},{"lineNumber":90,"author":{"gitId":"cedricongjh"},"content":"        this.setCommentText(commentText);"},{"lineNumber":91,"author":{"gitId":"cedricongjh"},"content":"        this.setIsVisibilityFollowingFeedbackQuestion(isVisibilityFollowingFeedbackQuestion);"},{"lineNumber":92,"author":{"gitId":"cedricongjh"},"content":"        this.setIsCommentFromFeedbackParticipant(isCommentFromFeedbackParticipant);"},{"lineNumber":93,"author":{"gitId":"cedricongjh"},"content":"        this.setShowCommentTo(showCommentTo);"},{"lineNumber":94,"author":{"gitId":"cedricongjh"},"content":"        this.setShowGiverNameTo(showGiverNameTo);"},{"lineNumber":95,"author":{"gitId":"cedricongjh"},"content":"        this.setLastEditorEmail(lastEditorEmail);"},{"lineNumber":96,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":97,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":98,"author":{"gitId":"cedricongjh"},"content":"    public UUID getId() {"},{"lineNumber":99,"author":{"gitId":"cedricongjh"},"content":"        return id;"},{"lineNumber":100,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":101,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":102,"author":{"gitId":"cedricongjh"},"content":"    public void setId(UUID id) {"},{"lineNumber":103,"author":{"gitId":"cedricongjh"},"content":"        this.id \u003d id;"},{"lineNumber":104,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":105,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":106,"author":{"gitId":"cedricongjh"},"content":"    public FeedbackResponse getFeedbackResponse() {"},{"lineNumber":107,"author":{"gitId":"cedricongjh"},"content":"        return feedbackResponse;"},{"lineNumber":108,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":109,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":110,"author":{"gitId":"cedricongjh"},"content":"    public void setFeedbackResponse(FeedbackResponse feedbackResponse) {"},{"lineNumber":111,"author":{"gitId":"cedricongjh"},"content":"        this.feedbackResponse \u003d feedbackResponse;"},{"lineNumber":112,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":113,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":114,"author":{"gitId":"cedricongjh"},"content":"    public String getGiver() {"},{"lineNumber":115,"author":{"gitId":"cedricongjh"},"content":"        return giver;"},{"lineNumber":116,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":117,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":118,"author":{"gitId":"cedricongjh"},"content":"    public void setGiver(String giver) {"},{"lineNumber":119,"author":{"gitId":"cedricongjh"},"content":"        this.giver \u003d giver;"},{"lineNumber":120,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":121,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":122,"author":{"gitId":"cedricongjh"},"content":"    public FeedbackParticipantType getGiverType() {"},{"lineNumber":123,"author":{"gitId":"cedricongjh"},"content":"        return giverType;"},{"lineNumber":124,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":125,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":126,"author":{"gitId":"cedricongjh"},"content":"    public void setGiverType(FeedbackParticipantType giverType) {"},{"lineNumber":127,"author":{"gitId":"cedricongjh"},"content":"        this.giverType \u003d giverType;"},{"lineNumber":128,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":129,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":130,"author":{"gitId":"cedricongjh"},"content":"    public Section getGiverSection() {"},{"lineNumber":131,"author":{"gitId":"cedricongjh"},"content":"        return giverSection;"},{"lineNumber":132,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":133,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":134,"author":{"gitId":"cedricongjh"},"content":"    public void setGiverSection(Section giverSection) {"},{"lineNumber":135,"author":{"gitId":"cedricongjh"},"content":"        this.giverSection \u003d giverSection;"},{"lineNumber":136,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":137,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":138,"author":{"gitId":"cedricongjh"},"content":"    public Section getReceiverSection() {"},{"lineNumber":139,"author":{"gitId":"cedricongjh"},"content":"        return receiverSection;"},{"lineNumber":140,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":141,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":142,"author":{"gitId":"cedricongjh"},"content":"    public void setReceiverSection(Section receiverSection) {"},{"lineNumber":143,"author":{"gitId":"cedricongjh"},"content":"        this.receiverSection \u003d receiverSection;"},{"lineNumber":144,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":145,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":146,"author":{"gitId":"cedricongjh"},"content":"    public String getCommentText() {"},{"lineNumber":147,"author":{"gitId":"cedricongjh"},"content":"        return commentText;"},{"lineNumber":148,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":149,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":150,"author":{"gitId":"cedricongjh"},"content":"    public void setCommentText(String commentText) {"},{"lineNumber":151,"author":{"gitId":"cedricongjh"},"content":"        this.commentText \u003d commentText;"},{"lineNumber":152,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":153,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":154,"author":{"gitId":"cedricongjh"},"content":"    public boolean getIsVisibilityFollowingFeedbackQuestion() {"},{"lineNumber":155,"author":{"gitId":"cedricongjh"},"content":"        return this.isVisibilityFollowingFeedbackQuestion;"},{"lineNumber":156,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":157,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":158,"author":{"gitId":"cedricongjh"},"content":"    public void setIsVisibilityFollowingFeedbackQuestion(boolean isVisibilityFollowingFeedbackQuestion) {"},{"lineNumber":159,"author":{"gitId":"cedricongjh"},"content":"        this.isVisibilityFollowingFeedbackQuestion \u003d isVisibilityFollowingFeedbackQuestion;"},{"lineNumber":160,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":161,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":162,"author":{"gitId":"cedricongjh"},"content":"    public boolean getIsCommentFromFeedbackParticipant() {"},{"lineNumber":163,"author":{"gitId":"cedricongjh"},"content":"        return this.isCommentFromFeedbackParticipant;"},{"lineNumber":164,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":165,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":166,"author":{"gitId":"cedricongjh"},"content":"    public void setIsCommentFromFeedbackParticipant(boolean isCommentFromFeedbackParticipant) {"},{"lineNumber":167,"author":{"gitId":"cedricongjh"},"content":"        this.isCommentFromFeedbackParticipant \u003d isCommentFromFeedbackParticipant;"},{"lineNumber":168,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":169,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":170,"author":{"gitId":"cedricongjh"},"content":"    public List\u003cFeedbackParticipantType\u003e getShowCommentTo() {"},{"lineNumber":171,"author":{"gitId":"cedricongjh"},"content":"        return showCommentTo;"},{"lineNumber":172,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":173,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":174,"author":{"gitId":"cedricongjh"},"content":"    public void setShowCommentTo(List\u003cFeedbackParticipantType\u003e showCommentTo) {"},{"lineNumber":175,"author":{"gitId":"cedricongjh"},"content":"        this.showCommentTo \u003d showCommentTo;"},{"lineNumber":176,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":177,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":178,"author":{"gitId":"cedricongjh"},"content":"    public List\u003cFeedbackParticipantType\u003e getShowGiverNameTo() {"},{"lineNumber":179,"author":{"gitId":"cedricongjh"},"content":"        return showGiverNameTo;"},{"lineNumber":180,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":181,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":182,"author":{"gitId":"cedricongjh"},"content":"    public void setShowGiverNameTo(List\u003cFeedbackParticipantType\u003e showGiverNameTo) {"},{"lineNumber":183,"author":{"gitId":"cedricongjh"},"content":"        this.showGiverNameTo \u003d showGiverNameTo;"},{"lineNumber":184,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":185,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":186,"author":{"gitId":"cedricongjh"},"content":"    public Instant getUpdatedAt() {"},{"lineNumber":187,"author":{"gitId":"cedricongjh"},"content":"        return updatedAt;"},{"lineNumber":188,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":189,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":190,"author":{"gitId":"cedricongjh"},"content":"    public void setUpdatedAt(Instant updatedAt) {"},{"lineNumber":191,"author":{"gitId":"cedricongjh"},"content":"        this.updatedAt \u003d updatedAt;"},{"lineNumber":192,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":193,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":194,"author":{"gitId":"cedricongjh"},"content":"    public String getLastEditorEmail() {"},{"lineNumber":195,"author":{"gitId":"cedricongjh"},"content":"        return lastEditorEmail;"},{"lineNumber":196,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":197,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":198,"author":{"gitId":"cedricongjh"},"content":"    public void setLastEditorEmail(String lastEditorEmail) {"},{"lineNumber":199,"author":{"gitId":"cedricongjh"},"content":"        this.lastEditorEmail \u003d lastEditorEmail;"},{"lineNumber":200,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":201,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":202,"author":{"gitId":"cedricongjh"},"content":"    @Override"},{"lineNumber":203,"author":{"gitId":"cedricongjh"},"content":"    public List\u003cString\u003e getInvalidityInfo() {"},{"lineNumber":204,"author":{"gitId":"cedricongjh"},"content":"        List\u003cString\u003e errors \u003d new ArrayList\u003c\u003e();"},{"lineNumber":205,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":206,"author":{"gitId":"cedricongjh"},"content":"        addNonEmptyError(FieldValidator.getInvalidityInfoForCommentGiverType(giverType), errors);"},{"lineNumber":207,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":208,"author":{"gitId":"cedricongjh"},"content":"        addNonEmptyError(FieldValidator.getInvalidityInfoForVisibilityOfFeedbackParticipantComments("},{"lineNumber":209,"author":{"gitId":"cedricongjh"},"content":"                isCommentFromFeedbackParticipant, isVisibilityFollowingFeedbackQuestion), errors);"},{"lineNumber":210,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":211,"author":{"gitId":"cedricongjh"},"content":"        return errors;"},{"lineNumber":212,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":213,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":214,"author":{"gitId":"cedricongjh"},"content":"    @Override"},{"lineNumber":215,"author":{"gitId":"cedricongjh"},"content":"    public String toString() {"},{"lineNumber":216,"author":{"gitId":"cedricongjh"},"content":"        return \"FeedbackResponse [id\u003d\" + id + \", giver\u003d\" + giver + \", commentText\u003d\" + commentText"},{"lineNumber":217,"author":{"gitId":"cedricongjh"},"content":"                + \", isVisibilityFollowingFeedbackQuestion\u003d\" + isVisibilityFollowingFeedbackQuestion"},{"lineNumber":218,"author":{"gitId":"cedricongjh"},"content":"                + \", isCommentFromFeedbackParticipant\u003d\" + isCommentFromFeedbackParticipant"},{"lineNumber":219,"author":{"gitId":"cedricongjh"},"content":"                + \", lastEditorEmail\u003d\" + lastEditorEmail + \", createdAt\u003d\" + getCreatedAt()"},{"lineNumber":220,"author":{"gitId":"cedricongjh"},"content":"                + \", updatedAt\u003d\" + updatedAt + \"]\";"},{"lineNumber":221,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":222,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":223,"author":{"gitId":"cedricongjh"},"content":"    @Override"},{"lineNumber":224,"author":{"gitId":"cedricongjh"},"content":"    public int hashCode() {"},{"lineNumber":225,"author":{"gitId":"cedricongjh"},"content":"        return this.getId().hashCode();"},{"lineNumber":226,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":227,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":228,"author":{"gitId":"cedricongjh"},"content":"    @Override"},{"lineNumber":229,"author":{"gitId":"cedricongjh"},"content":"    public boolean equals(Object other) {"},{"lineNumber":230,"author":{"gitId":"cedricongjh"},"content":"        if (other \u003d\u003d null) {"},{"lineNumber":231,"author":{"gitId":"cedricongjh"},"content":"            return false;"},{"lineNumber":232,"author":{"gitId":"cedricongjh"},"content":"        } else if (this \u003d\u003d other) {"},{"lineNumber":233,"author":{"gitId":"cedricongjh"},"content":"            return true;"},{"lineNumber":234,"author":{"gitId":"cedricongjh"},"content":"        } else if (this.getClass() \u003d\u003d other.getClass()) {"},{"lineNumber":235,"author":{"gitId":"cedricongjh"},"content":"            FeedbackResponseComment otherResponse \u003d (FeedbackResponseComment) other;"},{"lineNumber":236,"author":{"gitId":"-"},"content":"            return Objects.equals(this.getId(), otherResponse.getId());"},{"lineNumber":237,"author":{"gitId":"cedricongjh"},"content":"        } else {"},{"lineNumber":238,"author":{"gitId":"cedricongjh"},"content":"            return false;"},{"lineNumber":239,"author":{"gitId":"cedricongjh"},"content":"        }"},{"lineNumber":240,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":241,"author":{"gitId":"cedricongjh"},"content":"}"}],"authorContributionMap":{"domlimm":1,"cedricongjh":238,"-":2}},{"path":"src/main/java/teammates/storage/sqlentity/FeedbackSession.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.storage.sqlentity;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.time.Duration;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.time.Instant;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.util.ArrayList;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import java.util.Objects;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import java.util.UUID;"},{"lineNumber":9,"author":{"gitId":"-"},"content":""},{"lineNumber":10,"author":{"gitId":"-"},"content":"import org.apache.commons.lang.StringUtils;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import org.hibernate.annotations.UpdateTimestamp;"},{"lineNumber":12,"author":{"gitId":"-"},"content":""},{"lineNumber":13,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import teammates.common.util.FieldValidator;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import teammates.common.util.SanitizationHelper;"},{"lineNumber":16,"author":{"gitId":"-"},"content":""},{"lineNumber":17,"author":{"gitId":"-"},"content":"import jakarta.persistence.Column;"},{"lineNumber":18,"author":{"gitId":"-"},"content":"import jakarta.persistence.Convert;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"import jakarta.persistence.Entity;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"import jakarta.persistence.Id;"},{"lineNumber":21,"author":{"gitId":"-"},"content":"import jakarta.persistence.JoinColumn;"},{"lineNumber":22,"author":{"gitId":"-"},"content":"import jakarta.persistence.ManyToOne;"},{"lineNumber":23,"author":{"gitId":"EuniceSim142"},"content":"import jakarta.persistence.OneToMany;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"import jakarta.persistence.Table;"},{"lineNumber":25,"author":{"gitId":"hhdqirui"},"content":"import jakarta.persistence.UniqueConstraint;"},{"lineNumber":26,"author":{"gitId":"-"},"content":""},{"lineNumber":27,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":28,"author":{"gitId":"-"},"content":" * Represents a course entity."},{"lineNumber":29,"author":{"gitId":"-"},"content":" */"},{"lineNumber":30,"author":{"gitId":"-"},"content":"@Entity"},{"lineNumber":31,"author":{"gitId":"hhdqirui"},"content":"@Table(name \u003d \"FeedbackSessions\", uniqueConstraints \u003d @UniqueConstraint(columnNames \u003d {\"courseId\", \"name\"}))"},{"lineNumber":32,"author":{"gitId":"-"},"content":"public class FeedbackSession extends BaseEntity {"},{"lineNumber":33,"author":{"gitId":"-"},"content":"    @Id"},{"lineNumber":34,"author":{"gitId":"-"},"content":"    private UUID id;"},{"lineNumber":35,"author":{"gitId":"-"},"content":""},{"lineNumber":36,"author":{"gitId":"-"},"content":"    @ManyToOne"},{"lineNumber":37,"author":{"gitId":"-"},"content":"    @JoinColumn(name \u003d \"courseId\")"},{"lineNumber":38,"author":{"gitId":"-"},"content":"    private Course course;"},{"lineNumber":39,"author":{"gitId":"-"},"content":""},{"lineNumber":40,"author":{"gitId":"-"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":41,"author":{"gitId":"-"},"content":"    private String name;"},{"lineNumber":42,"author":{"gitId":"-"},"content":""},{"lineNumber":43,"author":{"gitId":"-"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":44,"author":{"gitId":"-"},"content":"    private String creatorEmail;"},{"lineNumber":45,"author":{"gitId":"-"},"content":""},{"lineNumber":46,"author":{"gitId":"-"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":47,"author":{"gitId":"-"},"content":"    private String instructions;"},{"lineNumber":48,"author":{"gitId":"-"},"content":""},{"lineNumber":49,"author":{"gitId":"-"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":50,"author":{"gitId":"-"},"content":"    private Instant startTime;"},{"lineNumber":51,"author":{"gitId":"-"},"content":""},{"lineNumber":52,"author":{"gitId":"-"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":53,"author":{"gitId":"-"},"content":"    private Instant endTime;"},{"lineNumber":54,"author":{"gitId":"-"},"content":""},{"lineNumber":55,"author":{"gitId":"-"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":56,"author":{"gitId":"-"},"content":"    private Instant sessionVisibleFromTime;"},{"lineNumber":57,"author":{"gitId":"-"},"content":""},{"lineNumber":58,"author":{"gitId":"-"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":59,"author":{"gitId":"-"},"content":"    private Instant resultsVisibleFromTime;"},{"lineNumber":60,"author":{"gitId":"-"},"content":""},{"lineNumber":61,"author":{"gitId":"-"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":62,"author":{"gitId":"-"},"content":"    @Convert(converter \u003d DurationLongConverter.class)"},{"lineNumber":63,"author":{"gitId":"-"},"content":"    private Duration gracePeriod;"},{"lineNumber":64,"author":{"gitId":"-"},"content":""},{"lineNumber":65,"author":{"gitId":"-"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":66,"author":{"gitId":"-"},"content":"    private boolean isOpeningEmailEnabled;"},{"lineNumber":67,"author":{"gitId":"-"},"content":""},{"lineNumber":68,"author":{"gitId":"-"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":69,"author":{"gitId":"-"},"content":"    private boolean isClosingEmailEnabled;"},{"lineNumber":70,"author":{"gitId":"-"},"content":""},{"lineNumber":71,"author":{"gitId":"-"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":72,"author":{"gitId":"-"},"content":"    private boolean isPublishedEmailEnabled;"},{"lineNumber":73,"author":{"gitId":"-"},"content":""},{"lineNumber":74,"author":{"gitId":"EuniceSim142"},"content":"    @OneToMany(mappedBy \u003d \"feedbackSession\")"},{"lineNumber":75,"author":{"gitId":"EuniceSim142"},"content":"    private List\u003cDeadlineExtension\u003e deadlineExtensions \u003d new ArrayList\u003c\u003e();"},{"lineNumber":76,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":77,"author":{"gitId":"EuniceSim142"},"content":"    @OneToMany(mappedBy \u003d \"feedbackSession\")"},{"lineNumber":78,"author":{"gitId":"EuniceSim142"},"content":"    private List\u003cFeedbackQuestion\u003e feedbackQuestions \u003d new ArrayList\u003c\u003e();"},{"lineNumber":79,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":80,"author":{"gitId":"-"},"content":"    @UpdateTimestamp"},{"lineNumber":81,"author":{"gitId":"-"},"content":"    private Instant updatedAt;"},{"lineNumber":82,"author":{"gitId":"-"},"content":""},{"lineNumber":83,"author":{"gitId":"-"},"content":"    private Instant deletedAt;"},{"lineNumber":84,"author":{"gitId":"-"},"content":""},{"lineNumber":85,"author":{"gitId":"-"},"content":"    protected FeedbackSession() {"},{"lineNumber":86,"author":{"gitId":"-"},"content":"        // required by Hibernate"},{"lineNumber":87,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":88,"author":{"gitId":"-"},"content":""},{"lineNumber":89,"author":{"gitId":"-"},"content":"    public FeedbackSession(String name, Course course, String creatorEmail, String instructions, Instant startTime,"},{"lineNumber":90,"author":{"gitId":"-"},"content":"            Instant endTime, Instant sessionVisibleFromTime, Instant resultsVisibleFromTime, Duration gracePeriod,"},{"lineNumber":91,"author":{"gitId":"-"},"content":"            boolean isOpeningEmailEnabled, boolean isClosingEmailEnabled, boolean isPublishedEmailEnabled) {"},{"lineNumber":92,"author":{"gitId":"-"},"content":"        this.setId(UUID.randomUUID());"},{"lineNumber":93,"author":{"gitId":"-"},"content":"        this.setName(name);"},{"lineNumber":94,"author":{"gitId":"-"},"content":"        this.setCourse(course);"},{"lineNumber":95,"author":{"gitId":"-"},"content":"        this.setCreatorEmail(creatorEmail);"},{"lineNumber":96,"author":{"gitId":"-"},"content":"        this.setInstructions(StringUtils.defaultString(instructions));"},{"lineNumber":97,"author":{"gitId":"-"},"content":"        this.setStartTime(startTime);"},{"lineNumber":98,"author":{"gitId":"-"},"content":"        this.setEndTime(endTime);"},{"lineNumber":99,"author":{"gitId":"-"},"content":"        this.setSessionVisibleFromTime(sessionVisibleFromTime);"},{"lineNumber":100,"author":{"gitId":"-"},"content":"        this.setResultsVisibleFromTime(resultsVisibleFromTime);"},{"lineNumber":101,"author":{"gitId":"kevin9foong"},"content":"        this.setGracePeriod(gracePeriod);"},{"lineNumber":102,"author":{"gitId":"-"},"content":"        this.setOpeningEmailEnabled(isOpeningEmailEnabled);"},{"lineNumber":103,"author":{"gitId":"-"},"content":"        this.setClosingEmailEnabled(isClosingEmailEnabled);"},{"lineNumber":104,"author":{"gitId":"-"},"content":"        this.setPublishedEmailEnabled(isPublishedEmailEnabled);"},{"lineNumber":105,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":106,"author":{"gitId":"-"},"content":""},{"lineNumber":107,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":108,"author":{"gitId":"-"},"content":"    public List\u003cString\u003e getInvalidityInfo() {"},{"lineNumber":109,"author":{"gitId":"-"},"content":"        List\u003cString\u003e errors \u003d new ArrayList\u003c\u003e();"},{"lineNumber":110,"author":{"gitId":"-"},"content":""},{"lineNumber":111,"author":{"gitId":"-"},"content":"        // Check for null fields."},{"lineNumber":112,"author":{"gitId":"-"},"content":"        addNonEmptyError(FieldValidator.getValidityInfoForNonNullField("},{"lineNumber":113,"author":{"gitId":"-"},"content":"                FieldValidator.FEEDBACK_SESSION_NAME_FIELD_NAME, name), errors);"},{"lineNumber":114,"author":{"gitId":"-"},"content":""},{"lineNumber":115,"author":{"gitId":"-"},"content":"        addNonEmptyError(FieldValidator.getValidityInfoForNonNullField(\"instructions to students\", instructions),"},{"lineNumber":116,"author":{"gitId":"-"},"content":"                errors);"},{"lineNumber":117,"author":{"gitId":"-"},"content":""},{"lineNumber":118,"author":{"gitId":"-"},"content":"        addNonEmptyError(FieldValidator.getValidityInfoForNonNullField("},{"lineNumber":119,"author":{"gitId":"-"},"content":"                \"time for the session to become visible\", sessionVisibleFromTime), errors);"},{"lineNumber":120,"author":{"gitId":"-"},"content":""},{"lineNumber":121,"author":{"gitId":"-"},"content":"        addNonEmptyError(FieldValidator.getValidityInfoForNonNullField(\"creator\u0027s email\", creatorEmail), errors);"},{"lineNumber":122,"author":{"gitId":"-"},"content":""},{"lineNumber":123,"author":{"gitId":"-"},"content":"        // Early return if any null fields"},{"lineNumber":124,"author":{"gitId":"-"},"content":"        if (!errors.isEmpty()) {"},{"lineNumber":125,"author":{"gitId":"-"},"content":"            return errors;"},{"lineNumber":126,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":127,"author":{"gitId":"-"},"content":""},{"lineNumber":128,"author":{"gitId":"-"},"content":"        addNonEmptyError(FieldValidator.getInvalidityInfoForFeedbackSessionName(name), errors);"},{"lineNumber":129,"author":{"gitId":"-"},"content":""},{"lineNumber":130,"author":{"gitId":"-"},"content":"        addNonEmptyError(FieldValidator.getInvalidityInfoForEmail(creatorEmail), errors);"},{"lineNumber":131,"author":{"gitId":"-"},"content":""},{"lineNumber":132,"author":{"gitId":"-"},"content":"        addNonEmptyError(FieldValidator.getInvalidityInfoForGracePeriod(gracePeriod), errors);"},{"lineNumber":133,"author":{"gitId":"-"},"content":""},{"lineNumber":134,"author":{"gitId":"-"},"content":"        addNonEmptyError(FieldValidator.getValidityInfoForNonNullField(\"submission opening time\", startTime), errors);"},{"lineNumber":135,"author":{"gitId":"-"},"content":""},{"lineNumber":136,"author":{"gitId":"-"},"content":"        addNonEmptyError(FieldValidator.getValidityInfoForNonNullField(\"submission closing time\", endTime), errors);"},{"lineNumber":137,"author":{"gitId":"-"},"content":""},{"lineNumber":138,"author":{"gitId":"-"},"content":"        addNonEmptyError(FieldValidator.getValidityInfoForNonNullField("},{"lineNumber":139,"author":{"gitId":"-"},"content":"                \"time for the responses to become visible\", resultsVisibleFromTime), errors);"},{"lineNumber":140,"author":{"gitId":"-"},"content":""},{"lineNumber":141,"author":{"gitId":"-"},"content":"        // Early return if any null fields"},{"lineNumber":142,"author":{"gitId":"-"},"content":"        if (!errors.isEmpty()) {"},{"lineNumber":143,"author":{"gitId":"-"},"content":"            return errors;"},{"lineNumber":144,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":145,"author":{"gitId":"-"},"content":""},{"lineNumber":146,"author":{"gitId":"-"},"content":"        addNonEmptyError(FieldValidator.getInvalidityInfoForTimeForSessionStartAndEnd(startTime, endTime), errors);"},{"lineNumber":147,"author":{"gitId":"-"},"content":""},{"lineNumber":148,"author":{"gitId":"-"},"content":"        addNonEmptyError(FieldValidator.getInvalidityInfoForTimeForVisibilityStartAndSessionStart("},{"lineNumber":149,"author":{"gitId":"-"},"content":"                sessionVisibleFromTime, startTime), errors);"},{"lineNumber":150,"author":{"gitId":"-"},"content":""},{"lineNumber":151,"author":{"gitId":"-"},"content":"        Instant actualSessionVisibleFromTime \u003d sessionVisibleFromTime;"},{"lineNumber":152,"author":{"gitId":"-"},"content":""},{"lineNumber":153,"author":{"gitId":"-"},"content":"        if (actualSessionVisibleFromTime.equals(Const.TIME_REPRESENTS_FOLLOW_OPENING)) {"},{"lineNumber":154,"author":{"gitId":"-"},"content":"            actualSessionVisibleFromTime \u003d startTime;"},{"lineNumber":155,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":156,"author":{"gitId":"-"},"content":""},{"lineNumber":157,"author":{"gitId":"-"},"content":"        addNonEmptyError(FieldValidator.getInvalidityInfoForTimeForVisibilityStartAndResultsPublish("},{"lineNumber":158,"author":{"gitId":"-"},"content":"                actualSessionVisibleFromTime, resultsVisibleFromTime), errors);"},{"lineNumber":159,"author":{"gitId":"-"},"content":""},{"lineNumber":160,"author":{"gitId":"EuniceSim142"},"content":"        addNonEmptyError(FieldValidator.getInvalidityInfoForTimeForSessionEndAndExtendedDeadlines("},{"lineNumber":161,"author":{"gitId":"EuniceSim142"},"content":"                endTime, deadlineExtensions), errors);"},{"lineNumber":162,"author":{"gitId":"-"},"content":""},{"lineNumber":163,"author":{"gitId":"-"},"content":"        return errors;"},{"lineNumber":164,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":165,"author":{"gitId":"-"},"content":""},{"lineNumber":166,"author":{"gitId":"-"},"content":"    public UUID getId() {"},{"lineNumber":167,"author":{"gitId":"-"},"content":"        return id;"},{"lineNumber":168,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":169,"author":{"gitId":"-"},"content":""},{"lineNumber":170,"author":{"gitId":"-"},"content":"    public void setId(UUID id) {"},{"lineNumber":171,"author":{"gitId":"-"},"content":"        this.id \u003d id;"},{"lineNumber":172,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":173,"author":{"gitId":"-"},"content":""},{"lineNumber":174,"author":{"gitId":"-"},"content":"    public Course getCourse() {"},{"lineNumber":175,"author":{"gitId":"-"},"content":"        return course;"},{"lineNumber":176,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":177,"author":{"gitId":"-"},"content":""},{"lineNumber":178,"author":{"gitId":"-"},"content":"    public void setCourse(Course course) {"},{"lineNumber":179,"author":{"gitId":"-"},"content":"        this.course \u003d course;"},{"lineNumber":180,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":181,"author":{"gitId":"-"},"content":""},{"lineNumber":182,"author":{"gitId":"-"},"content":"    public String getName() {"},{"lineNumber":183,"author":{"gitId":"-"},"content":"        return name;"},{"lineNumber":184,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":185,"author":{"gitId":"-"},"content":""},{"lineNumber":186,"author":{"gitId":"-"},"content":"    public void setName(String name) {"},{"lineNumber":187,"author":{"gitId":"-"},"content":"        this.name \u003d name;"},{"lineNumber":188,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":189,"author":{"gitId":"-"},"content":""},{"lineNumber":190,"author":{"gitId":"-"},"content":"    public String getCreatorEmail() {"},{"lineNumber":191,"author":{"gitId":"-"},"content":"        return creatorEmail;"},{"lineNumber":192,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":193,"author":{"gitId":"-"},"content":""},{"lineNumber":194,"author":{"gitId":"-"},"content":"    public void setCreatorEmail(String creatorEmail) {"},{"lineNumber":195,"author":{"gitId":"-"},"content":"        this.creatorEmail \u003d creatorEmail;"},{"lineNumber":196,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":197,"author":{"gitId":"-"},"content":""},{"lineNumber":198,"author":{"gitId":"-"},"content":"    public String getInstructions() {"},{"lineNumber":199,"author":{"gitId":"-"},"content":"        return instructions;"},{"lineNumber":200,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":201,"author":{"gitId":"-"},"content":""},{"lineNumber":202,"author":{"gitId":"-"},"content":"    public void setInstructions(String instructions) {"},{"lineNumber":203,"author":{"gitId":"-"},"content":"        this.instructions \u003d SanitizationHelper.sanitizeForRichText(instructions);"},{"lineNumber":204,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":205,"author":{"gitId":"-"},"content":""},{"lineNumber":206,"author":{"gitId":"-"},"content":"    public Instant getStartTime() {"},{"lineNumber":207,"author":{"gitId":"-"},"content":"        return startTime;"},{"lineNumber":208,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":209,"author":{"gitId":"-"},"content":""},{"lineNumber":210,"author":{"gitId":"-"},"content":"    public void setStartTime(Instant startTime) {"},{"lineNumber":211,"author":{"gitId":"-"},"content":"        this.startTime \u003d startTime;"},{"lineNumber":212,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":213,"author":{"gitId":"-"},"content":""},{"lineNumber":214,"author":{"gitId":"-"},"content":"    public Instant getEndTime() {"},{"lineNumber":215,"author":{"gitId":"-"},"content":"        return endTime;"},{"lineNumber":216,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":217,"author":{"gitId":"-"},"content":""},{"lineNumber":218,"author":{"gitId":"-"},"content":"    public void setEndTime(Instant endTime) {"},{"lineNumber":219,"author":{"gitId":"-"},"content":"        this.endTime \u003d endTime;"},{"lineNumber":220,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":221,"author":{"gitId":"-"},"content":""},{"lineNumber":222,"author":{"gitId":"-"},"content":"    public Instant getSessionVisibleFromTime() {"},{"lineNumber":223,"author":{"gitId":"-"},"content":"        return sessionVisibleFromTime;"},{"lineNumber":224,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":225,"author":{"gitId":"-"},"content":""},{"lineNumber":226,"author":{"gitId":"-"},"content":"    public void setSessionVisibleFromTime(Instant sessionVisibleFromTime) {"},{"lineNumber":227,"author":{"gitId":"-"},"content":"        this.sessionVisibleFromTime \u003d sessionVisibleFromTime;"},{"lineNumber":228,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":229,"author":{"gitId":"-"},"content":""},{"lineNumber":230,"author":{"gitId":"-"},"content":"    public Instant getResultsVisibleFromTime() {"},{"lineNumber":231,"author":{"gitId":"-"},"content":"        return resultsVisibleFromTime;"},{"lineNumber":232,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":233,"author":{"gitId":"-"},"content":""},{"lineNumber":234,"author":{"gitId":"-"},"content":"    public void setResultsVisibleFromTime(Instant resultsVisibleFromTime) {"},{"lineNumber":235,"author":{"gitId":"-"},"content":"        this.resultsVisibleFromTime \u003d resultsVisibleFromTime;"},{"lineNumber":236,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":237,"author":{"gitId":"-"},"content":""},{"lineNumber":238,"author":{"gitId":"-"},"content":"    public Duration getGracePeriod() {"},{"lineNumber":239,"author":{"gitId":"-"},"content":"        return gracePeriod;"},{"lineNumber":240,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":241,"author":{"gitId":"-"},"content":""},{"lineNumber":242,"author":{"gitId":"-"},"content":"    public void setGracePeriod(Duration gracePeriod) {"},{"lineNumber":243,"author":{"gitId":"kevin9foong"},"content":"        this.gracePeriod \u003d Objects.requireNonNullElse(gracePeriod, Duration.ZERO);"},{"lineNumber":244,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":245,"author":{"gitId":"-"},"content":""},{"lineNumber":246,"author":{"gitId":"-"},"content":"    public boolean isOpeningEmailEnabled() {"},{"lineNumber":247,"author":{"gitId":"-"},"content":"        return isOpeningEmailEnabled;"},{"lineNumber":248,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":249,"author":{"gitId":"-"},"content":""},{"lineNumber":250,"author":{"gitId":"-"},"content":"    public void setOpeningEmailEnabled(boolean isOpeningEmailEnabled) {"},{"lineNumber":251,"author":{"gitId":"-"},"content":"        this.isOpeningEmailEnabled \u003d isOpeningEmailEnabled;"},{"lineNumber":252,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":253,"author":{"gitId":"-"},"content":""},{"lineNumber":254,"author":{"gitId":"-"},"content":"    public boolean isClosingEmailEnabled() {"},{"lineNumber":255,"author":{"gitId":"-"},"content":"        return isClosingEmailEnabled;"},{"lineNumber":256,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":257,"author":{"gitId":"-"},"content":""},{"lineNumber":258,"author":{"gitId":"-"},"content":"    public void setClosingEmailEnabled(boolean isClosingEmailEnabled) {"},{"lineNumber":259,"author":{"gitId":"-"},"content":"        this.isClosingEmailEnabled \u003d isClosingEmailEnabled;"},{"lineNumber":260,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":261,"author":{"gitId":"-"},"content":""},{"lineNumber":262,"author":{"gitId":"-"},"content":"    public boolean isPublishedEmailEnabled() {"},{"lineNumber":263,"author":{"gitId":"-"},"content":"        return isPublishedEmailEnabled;"},{"lineNumber":264,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":265,"author":{"gitId":"-"},"content":""},{"lineNumber":266,"author":{"gitId":"-"},"content":"    public void setPublishedEmailEnabled(boolean isPublishedEmailEnabled) {"},{"lineNumber":267,"author":{"gitId":"-"},"content":"        this.isPublishedEmailEnabled \u003d isPublishedEmailEnabled;"},{"lineNumber":268,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":269,"author":{"gitId":"-"},"content":""},{"lineNumber":270,"author":{"gitId":"EuniceSim142"},"content":"    public List\u003cDeadlineExtension\u003e getDeadlineExtensions() {"},{"lineNumber":271,"author":{"gitId":"EuniceSim142"},"content":"        return deadlineExtensions;"},{"lineNumber":272,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":273,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":274,"author":{"gitId":"EuniceSim142"},"content":"    public void setDeadlineExtensions(List\u003cDeadlineExtension\u003e deadlineExtensions) {"},{"lineNumber":275,"author":{"gitId":"EuniceSim142"},"content":"        this.deadlineExtensions \u003d deadlineExtensions;"},{"lineNumber":276,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":277,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":278,"author":{"gitId":"EuniceSim142"},"content":"    public List\u003cFeedbackQuestion\u003e getFeedbackQuestions() {"},{"lineNumber":279,"author":{"gitId":"EuniceSim142"},"content":"        return feedbackQuestions;"},{"lineNumber":280,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":281,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":282,"author":{"gitId":"EuniceSim142"},"content":"    public void setFeedbackQuestions(List\u003cFeedbackQuestion\u003e feedbackQuestions) {"},{"lineNumber":283,"author":{"gitId":"EuniceSim142"},"content":"        this.feedbackQuestions \u003d feedbackQuestions;"},{"lineNumber":284,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":285,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":286,"author":{"gitId":"-"},"content":"    public Instant getUpdatedAt() {"},{"lineNumber":287,"author":{"gitId":"-"},"content":"        return updatedAt;"},{"lineNumber":288,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":289,"author":{"gitId":"-"},"content":""},{"lineNumber":290,"author":{"gitId":"-"},"content":"    public void setUpdatedAt(Instant updatedAt) {"},{"lineNumber":291,"author":{"gitId":"-"},"content":"        this.updatedAt \u003d updatedAt;"},{"lineNumber":292,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":293,"author":{"gitId":"-"},"content":""},{"lineNumber":294,"author":{"gitId":"-"},"content":"    public Instant getDeletedAt() {"},{"lineNumber":295,"author":{"gitId":"-"},"content":"        return deletedAt;"},{"lineNumber":296,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":297,"author":{"gitId":"-"},"content":""},{"lineNumber":298,"author":{"gitId":"-"},"content":"    public void setDeletedAt(Instant deletedAt) {"},{"lineNumber":299,"author":{"gitId":"-"},"content":"        this.deletedAt \u003d deletedAt;"},{"lineNumber":300,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":301,"author":{"gitId":"-"},"content":""},{"lineNumber":302,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":303,"author":{"gitId":"-"},"content":"    public String toString() {"},{"lineNumber":304,"author":{"gitId":"-"},"content":"        return \"FeedbackSession [id\u003d\" + id + \", course\u003d\" + course + \", name\u003d\" + name + \", creatorEmail\u003d\" + creatorEmail"},{"lineNumber":305,"author":{"gitId":"-"},"content":"                + \", instructions\u003d\" + instructions + \", startTime\u003d\" + startTime + \", endTime\u003d\" + endTime"},{"lineNumber":306,"author":{"gitId":"-"},"content":"                + \", sessionVisibleFromTime\u003d\" + sessionVisibleFromTime + \", resultsVisibleFromTime\u003d\""},{"lineNumber":307,"author":{"gitId":"-"},"content":"                + resultsVisibleFromTime + \", gracePeriod\u003d\" + gracePeriod + \", isOpeningEmailEnabled\u003d\""},{"lineNumber":308,"author":{"gitId":"-"},"content":"                + isOpeningEmailEnabled + \", isClosingEmailEnabled\u003d\" + isClosingEmailEnabled"},{"lineNumber":309,"author":{"gitId":"EuniceSim142"},"content":"                + \", isPublishedEmailEnabled\u003d\" + isPublishedEmailEnabled + \", deadlineExtensions\u003d\" + deadlineExtensions"},{"lineNumber":310,"author":{"gitId":"EuniceSim142"},"content":"                + \", feedbackQuestions\u003d\" + feedbackQuestions + \", createdAt\u003d\" + getCreatedAt()"},{"lineNumber":311,"author":{"gitId":"EuniceSim142"},"content":"                + \", updatedAt\u003d\" + updatedAt + \", deletedAt\u003d\" + deletedAt + \"]\";"},{"lineNumber":312,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":313,"author":{"gitId":"-"},"content":""},{"lineNumber":314,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":315,"author":{"gitId":"-"},"content":"    public int hashCode() {"},{"lineNumber":316,"author":{"gitId":"-"},"content":"        return this.getId().hashCode();"},{"lineNumber":317,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":318,"author":{"gitId":"-"},"content":""},{"lineNumber":319,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":320,"author":{"gitId":"-"},"content":"    public boolean equals(Object other) {"},{"lineNumber":321,"author":{"gitId":"-"},"content":"        if (other \u003d\u003d null) {"},{"lineNumber":322,"author":{"gitId":"-"},"content":"            return false;"},{"lineNumber":323,"author":{"gitId":"-"},"content":"        } else if (this \u003d\u003d other) {"},{"lineNumber":324,"author":{"gitId":"-"},"content":"            return true;"},{"lineNumber":325,"author":{"gitId":"-"},"content":"        } else if (this.getClass() \u003d\u003d other.getClass()) {"},{"lineNumber":326,"author":{"gitId":"-"},"content":"            FeedbackSession otherFs \u003d (FeedbackSession) other;"},{"lineNumber":327,"author":{"gitId":"-"},"content":"            return Objects.equals(this.getId(), otherFs.getId());"},{"lineNumber":328,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":329,"author":{"gitId":"-"},"content":"            return false;"},{"lineNumber":330,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":331,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":332,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":333,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":334,"author":{"gitId":"EuniceSim142"},"content":"     * Returns {@code true} if the session is visible; {@code false} if not."},{"lineNumber":335,"author":{"gitId":"EuniceSim142"},"content":"     *         Does not care if the session has started or not."},{"lineNumber":336,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":337,"author":{"gitId":"EuniceSim142"},"content":"    public boolean isVisible() {"},{"lineNumber":338,"author":{"gitId":"EuniceSim142"},"content":"        Instant visibleTime \u003d this.sessionVisibleFromTime;"},{"lineNumber":339,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":340,"author":{"gitId":"EuniceSim142"},"content":"        if (visibleTime.equals(Const.TIME_REPRESENTS_FOLLOW_OPENING)) {"},{"lineNumber":341,"author":{"gitId":"EuniceSim142"},"content":"            visibleTime \u003d this.startTime;"},{"lineNumber":342,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":343,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":344,"author":{"gitId":"EuniceSim142"},"content":"        Instant now \u003d Instant.now();"},{"lineNumber":345,"author":{"gitId":"EuniceSim142"},"content":"        return now.isAfter(visibleTime) || now.equals(visibleTime);"},{"lineNumber":346,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":347,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":348,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":349,"author":{"gitId":"EuniceSim142"},"content":"     * Gets the instructions of the feedback session."},{"lineNumber":350,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":351,"author":{"gitId":"EuniceSim142"},"content":"    public String getInstructionsString() {"},{"lineNumber":352,"author":{"gitId":"EuniceSim142"},"content":"        return SanitizationHelper.sanitizeForRichText(instructions);"},{"lineNumber":353,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":354,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":355,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":356,"author":{"gitId":"EuniceSim142"},"content":"     * Checks if the feedback session is closed."},{"lineNumber":357,"author":{"gitId":"kevin9foong"},"content":"     * This occurs only when the current time is after both the deadline and the grace period."},{"lineNumber":358,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":359,"author":{"gitId":"EuniceSim142"},"content":"    public boolean isClosed() {"},{"lineNumber":360,"author":{"gitId":"kevin9foong"},"content":"        return !isOpened() \u0026\u0026 Instant.now().isAfter(endTime);"},{"lineNumber":361,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":362,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":363,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":364,"author":{"gitId":"EuniceSim142"},"content":"     * Checks if the feedback session is open."},{"lineNumber":365,"author":{"gitId":"EuniceSim142"},"content":"     * This occurs when the current time is either the start time or later but before the deadline."},{"lineNumber":366,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":367,"author":{"gitId":"EuniceSim142"},"content":"    public boolean isOpened() {"},{"lineNumber":368,"author":{"gitId":"EuniceSim142"},"content":"        Instant now \u003d Instant.now();"},{"lineNumber":369,"author":{"gitId":"EuniceSim142"},"content":"        return (now.isAfter(startTime) || now.equals(startTime)) \u0026\u0026 now.isBefore(endTime);"},{"lineNumber":370,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":371,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":372,"author":{"gitId":"kevin9foong"},"content":"    /**"},{"lineNumber":373,"author":{"gitId":"kevin9foong"},"content":"     * Checks if the feedback session is during the grace period."},{"lineNumber":374,"author":{"gitId":"kevin9foong"},"content":"     * This occurs when the current time is after end time, but before the end of the grace period."},{"lineNumber":375,"author":{"gitId":"kevin9foong"},"content":"     */"},{"lineNumber":376,"author":{"gitId":"kevin9foong"},"content":"    public boolean isInGracePeriod() {"},{"lineNumber":377,"author":{"gitId":"kevin9foong"},"content":"        return Instant.now().isAfter(endTime) \u0026\u0026 !isClosed();"},{"lineNumber":378,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":379,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":380,"author":{"gitId":"kevin9foong"},"content":"    /**"},{"lineNumber":381,"author":{"gitId":"kevin9foong"},"content":"     * Checks if the feedback session is opened given the extendedDeadline and grace period."},{"lineNumber":382,"author":{"gitId":"kevin9foong"},"content":"     */"},{"lineNumber":383,"author":{"gitId":"kevin9foong"},"content":"    public boolean isOpenedGivenExtendedDeadline(Instant extendedDeadline) {"},{"lineNumber":384,"author":{"gitId":"kevin9foong"},"content":"        Instant now \u003d Instant.now();"},{"lineNumber":385,"author":{"gitId":"kevin9foong"},"content":"        return (now.isAfter(startTime) || now.equals(startTime))"},{"lineNumber":386,"author":{"gitId":"kevin9foong"},"content":"                \u0026\u0026 now.isBefore(extendedDeadline.plus(gracePeriod)) || now.isBefore(endTime.plus(gracePeriod));"},{"lineNumber":387,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":388,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":389,"author":{"gitId":"kevin9foong"},"content":"    /**"},{"lineNumber":390,"author":{"gitId":"kevin9foong"},"content":"     * Checks if the feedback session is closed given the extendedDeadline and grace period."},{"lineNumber":391,"author":{"gitId":"kevin9foong"},"content":"     * This occurs only when it is after the extended deadline or end time plus grace period."},{"lineNumber":392,"author":{"gitId":"kevin9foong"},"content":"     */"},{"lineNumber":393,"author":{"gitId":"kevin9foong"},"content":"    public boolean isClosedGivenExtendedDeadline(Instant extendedDeadline) {"},{"lineNumber":394,"author":{"gitId":"kevin9foong"},"content":"        Instant now \u003d Instant.now();"},{"lineNumber":395,"author":{"gitId":"kevin9foong"},"content":"        return !isOpenedGivenExtendedDeadline(extendedDeadline)"},{"lineNumber":396,"author":{"gitId":"kevin9foong"},"content":"                \u0026\u0026 now.isAfter(endTime.plus(gracePeriod)) \u0026\u0026 now.isAfter(extendedDeadline.plus(gracePeriod));"},{"lineNumber":397,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":398,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":399,"author":{"gitId":"kevin9foong"},"content":"    /**"},{"lineNumber":400,"author":{"gitId":"kevin9foong"},"content":"     * Checks if the feedback session is during the grace period given the extendedDeadline."},{"lineNumber":401,"author":{"gitId":"kevin9foong"},"content":"     */"},{"lineNumber":402,"author":{"gitId":"kevin9foong"},"content":"    public boolean isInGracePeriodGivenExtendedDeadline(Instant extendedDeadline) {"},{"lineNumber":403,"author":{"gitId":"kevin9foong"},"content":"        Instant now \u003d Instant.now();"},{"lineNumber":404,"author":{"gitId":"kevin9foong"},"content":"        return now.isAfter(endTime) \u0026\u0026 now.isAfter(extendedDeadline) \u0026\u0026 !isClosedGivenExtendedDeadline(extendedDeadline);"},{"lineNumber":405,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":406,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":407,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":408,"author":{"gitId":"EuniceSim142"},"content":"     * Returns {@code true} if the results of the feedback session is visible; {@code false} if not."},{"lineNumber":409,"author":{"gitId":"EuniceSim142"},"content":"     *         Does not care if the session has ended or not."},{"lineNumber":410,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":411,"author":{"gitId":"EuniceSim142"},"content":"    public boolean isPublished() {"},{"lineNumber":412,"author":{"gitId":"EuniceSim142"},"content":"        Instant publishTime \u003d this.resultsVisibleFromTime;"},{"lineNumber":413,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":414,"author":{"gitId":"EuniceSim142"},"content":"        if (publishTime.equals(Const.TIME_REPRESENTS_FOLLOW_VISIBLE)) {"},{"lineNumber":415,"author":{"gitId":"EuniceSim142"},"content":"            return isVisible();"},{"lineNumber":416,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":417,"author":{"gitId":"EuniceSim142"},"content":"        if (publishTime.equals(Const.TIME_REPRESENTS_LATER)) {"},{"lineNumber":418,"author":{"gitId":"EuniceSim142"},"content":"            return false;"},{"lineNumber":419,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":420,"author":{"gitId":"EuniceSim142"},"content":"        if (publishTime.equals(Const.TIME_REPRESENTS_NOW)) {"},{"lineNumber":421,"author":{"gitId":"EuniceSim142"},"content":"            return true;"},{"lineNumber":422,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":423,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":424,"author":{"gitId":"EuniceSim142"},"content":"        Instant now \u003d Instant.now();"},{"lineNumber":425,"author":{"gitId":"EuniceSim142"},"content":"        return now.isAfter(publishTime) || now.equals(publishTime);"},{"lineNumber":426,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":427,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":428,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"EuniceSim142":86,"hhdqirui":2,"-":300,"kevin9foong":40}},{"path":"src/main/java/teammates/storage/sqlentity/Instructor.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"domlimm"},"content":"package teammates.storage.sqlentity;"},{"lineNumber":2,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":3,"author":{"gitId":"domlimm"},"content":"import java.util.ArrayList;"},{"lineNumber":4,"author":{"gitId":"domlimm"},"content":"import java.util.List;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.util.Map;"},{"lineNumber":6,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":7,"author":{"gitId":"domlimm"},"content":"import teammates.common.datatransfer.InstructorPermissionRole;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.InstructorPermissionSet;"},{"lineNumber":9,"author":{"gitId":"domlimm"},"content":"import teammates.common.datatransfer.InstructorPrivileges;"},{"lineNumber":10,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.util.Config;"},{"lineNumber":11,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.util.Const;"},{"lineNumber":12,"author":{"gitId":"domlimm"},"content":"import teammates.common.util.FieldValidator;"},{"lineNumber":13,"author":{"gitId":"domlimm"},"content":"import teammates.common.util.SanitizationHelper;"},{"lineNumber":14,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":15,"author":{"gitId":"domlimm"},"content":"import jakarta.persistence.Column;"},{"lineNumber":16,"author":{"gitId":"domlimm"},"content":"import jakarta.persistence.Convert;"},{"lineNumber":17,"author":{"gitId":"domlimm"},"content":"import jakarta.persistence.Entity;"},{"lineNumber":18,"author":{"gitId":"domlimm"},"content":"import jakarta.persistence.EnumType;"},{"lineNumber":19,"author":{"gitId":"domlimm"},"content":"import jakarta.persistence.Enumerated;"},{"lineNumber":20,"author":{"gitId":"domlimm"},"content":"import jakarta.persistence.Table;"},{"lineNumber":21,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":22,"author":{"gitId":"domlimm"},"content":"/**"},{"lineNumber":23,"author":{"gitId":"domlimm"},"content":" * Represents an Instructor."},{"lineNumber":24,"author":{"gitId":"domlimm"},"content":" */"},{"lineNumber":25,"author":{"gitId":"domlimm"},"content":"@Entity"},{"lineNumber":26,"author":{"gitId":"domlimm"},"content":"@Table(name \u003d \"Instructors\")"},{"lineNumber":27,"author":{"gitId":"domlimm"},"content":"public class Instructor extends User {"},{"lineNumber":28,"author":{"gitId":"domlimm"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":29,"author":{"gitId":"domlimm"},"content":"    private boolean isDisplayedToStudents;"},{"lineNumber":30,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":31,"author":{"gitId":"domlimm"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":32,"author":{"gitId":"domlimm"},"content":"    private String displayName;"},{"lineNumber":33,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":34,"author":{"gitId":"domlimm"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":35,"author":{"gitId":"domlimm"},"content":"    @Enumerated(EnumType.STRING)"},{"lineNumber":36,"author":{"gitId":"domlimm"},"content":"    private InstructorPermissionRole role;"},{"lineNumber":37,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":38,"author":{"gitId":"domlimm"},"content":"    @Column(nullable \u003d false, columnDefinition \u003d \"TEXT\")"},{"lineNumber":39,"author":{"gitId":"domlimm"},"content":"    @Convert(converter \u003d InstructorPrivilegesConverter.class)"},{"lineNumber":40,"author":{"gitId":"-"},"content":"    private InstructorPrivileges privileges;"},{"lineNumber":41,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":42,"author":{"gitId":"domlimm"},"content":"    protected Instructor() {"},{"lineNumber":43,"author":{"gitId":"domlimm"},"content":"        // required by Hibernate"},{"lineNumber":44,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":45,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":46,"author":{"gitId":"domlimm"},"content":"    public Instructor(Course course, String name, String email, boolean isDisplayedToStudents,"},{"lineNumber":47,"author":{"gitId":"-"},"content":"            String displayName, InstructorPermissionRole role, InstructorPrivileges privileges) {"},{"lineNumber":48,"author":{"gitId":"domlimm"},"content":"        super(course, name, email);"},{"lineNumber":49,"author":{"gitId":"domlimm"},"content":"        this.setDisplayedToStudents(isDisplayedToStudents);"},{"lineNumber":50,"author":{"gitId":"domlimm"},"content":"        this.setDisplayName(displayName);"},{"lineNumber":51,"author":{"gitId":"domlimm"},"content":"        this.setRole(role);"},{"lineNumber":52,"author":{"gitId":"-"},"content":"        this.setPrivileges(privileges);"},{"lineNumber":53,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":54,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":55,"author":{"gitId":"domlimm"},"content":"    public boolean isDisplayedToStudents() {"},{"lineNumber":56,"author":{"gitId":"domlimm"},"content":"        return isDisplayedToStudents;"},{"lineNumber":57,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":58,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":59,"author":{"gitId":"domlimm"},"content":"    public void setDisplayedToStudents(boolean displayedToStudents) {"},{"lineNumber":60,"author":{"gitId":"domlimm"},"content":"        isDisplayedToStudents \u003d displayedToStudents;"},{"lineNumber":61,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":62,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":63,"author":{"gitId":"domlimm"},"content":"    public String getDisplayName() {"},{"lineNumber":64,"author":{"gitId":"domlimm"},"content":"        return displayName;"},{"lineNumber":65,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":66,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":67,"author":{"gitId":"domlimm"},"content":"    public void setDisplayName(String displayName) {"},{"lineNumber":68,"author":{"gitId":"-"},"content":"        this.displayName \u003d SanitizationHelper.sanitizeName(displayName);"},{"lineNumber":69,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":70,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":71,"author":{"gitId":"domlimm"},"content":"    public InstructorPermissionRole getRole() {"},{"lineNumber":72,"author":{"gitId":"domlimm"},"content":"        return role;"},{"lineNumber":73,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":74,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":75,"author":{"gitId":"domlimm"},"content":"    public void setRole(InstructorPermissionRole role) {"},{"lineNumber":76,"author":{"gitId":"domlimm"},"content":"        this.role \u003d role;"},{"lineNumber":77,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":78,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":79,"author":{"gitId":"-"},"content":"    public InstructorPrivileges getPrivileges() {"},{"lineNumber":80,"author":{"gitId":"-"},"content":"        return privileges;"},{"lineNumber":81,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":82,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":83,"author":{"gitId":"-"},"content":"    public void setPrivileges(InstructorPrivileges instructorPrivileges) {"},{"lineNumber":84,"author":{"gitId":"-"},"content":"        this.privileges \u003d instructorPrivileges;"},{"lineNumber":85,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":86,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":87,"author":{"gitId":"domlimm"},"content":"    @Override"},{"lineNumber":88,"author":{"gitId":"domlimm"},"content":"    public String toString() {"},{"lineNumber":89,"author":{"gitId":"domlimm"},"content":"        return \"Instructor [id\u003d\" + super.getId() + \", isDisplayedToStudents\u003d\" + isDisplayedToStudents"},{"lineNumber":90,"author":{"gitId":"-"},"content":"                + \", displayName\u003d\" + displayName + \", role\u003d\" + role + \", instructorPrivileges\u003d\" + privileges"},{"lineNumber":91,"author":{"gitId":"domlimm"},"content":"                + \", createdAt\u003d\" + super.getCreatedAt() + \", updatedAt\u003d\" + super.getUpdatedAt() + \"]\";"},{"lineNumber":92,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":93,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":94,"author":{"gitId":"domlimm"},"content":"    @Override"},{"lineNumber":95,"author":{"gitId":"domlimm"},"content":"    public List\u003cString\u003e getInvalidityInfo() {"},{"lineNumber":96,"author":{"gitId":"domlimm"},"content":"        List\u003cString\u003e errors \u003d new ArrayList\u003c\u003e();"},{"lineNumber":97,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":98,"author":{"gitId":"domlimm"},"content":"        addNonEmptyError(FieldValidator.getInvalidityInfoForPersonName(super.getName()), errors);"},{"lineNumber":99,"author":{"gitId":"domlimm"},"content":"        addNonEmptyError(FieldValidator.getInvalidityInfoForEmail(super.getEmail()), errors);"},{"lineNumber":100,"author":{"gitId":"domlimm"},"content":"        addNonEmptyError(FieldValidator.getInvalidityInfoForPersonName(displayName), errors);"},{"lineNumber":101,"author":{"gitId":"domlimm"},"content":"        addNonEmptyError(FieldValidator.getInvalidityInfoForRole(role.getRoleName()), errors);"},{"lineNumber":102,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":103,"author":{"gitId":"domlimm"},"content":"        return errors;"},{"lineNumber":104,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":105,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":106,"author":{"gitId":"EuniceSim142"},"content":"    public String getRegistrationUrl() {"},{"lineNumber":107,"author":{"gitId":"EuniceSim142"},"content":"        return Config.getFrontEndAppUrl(Const.WebPageURIs.JOIN_PAGE)"},{"lineNumber":108,"author":{"gitId":"EuniceSim142"},"content":"                .withRegistrationKey(getRegKey())"},{"lineNumber":109,"author":{"gitId":"EuniceSim142"},"content":"                .withEntityType(Const.EntityType.INSTRUCTOR)"},{"lineNumber":110,"author":{"gitId":"EuniceSim142"},"content":"                .toString();"},{"lineNumber":111,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":112,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":113,"author":{"gitId":"EuniceSim142"},"content":"    /**"},{"lineNumber":114,"author":{"gitId":"EuniceSim142"},"content":"     * Returns true if the instructor has co-owner privilege."},{"lineNumber":115,"author":{"gitId":"EuniceSim142"},"content":"     */"},{"lineNumber":116,"author":{"gitId":"EuniceSim142"},"content":"    public boolean hasCoownerPrivileges() {"},{"lineNumber":117,"author":{"gitId":"-"},"content":"        return privileges.hasCoownerPrivileges();"},{"lineNumber":118,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":119,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":120,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":121,"author":{"gitId":"-"},"content":"     * Returns a list of sections this instructor has the specified privilege."},{"lineNumber":122,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":123,"author":{"gitId":"-"},"content":"    public Map\u003cString, InstructorPermissionSet\u003e getSectionsWithPrivilege(String privilegeName) {"},{"lineNumber":124,"author":{"gitId":"-"},"content":"        return this.privileges.getSectionsWithPrivilege(privilegeName);"},{"lineNumber":125,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":126,"author":{"gitId":"-"},"content":""},{"lineNumber":127,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":128,"author":{"gitId":"-"},"content":"     * Returns true if the instructor has the given privilege in the course."},{"lineNumber":129,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":130,"author":{"gitId":"-"},"content":"    public boolean isAllowedForPrivilege(String privilegeName) {"},{"lineNumber":131,"author":{"gitId":"-"},"content":"        return this.privileges.isAllowedForPrivilege(privilegeName);"},{"lineNumber":132,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":133,"author":{"gitId":"-"},"content":""},{"lineNumber":134,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":135,"author":{"gitId":"-"},"content":"     * Returns true if the instructor has the given privilege in the given section for the given feedback session."},{"lineNumber":136,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":137,"author":{"gitId":"-"},"content":"    public boolean isAllowedForPrivilege(String sectionName, String sessionName, String privilegeName) {"},{"lineNumber":138,"author":{"gitId":"-"},"content":"        return privileges.isAllowedForPrivilege(sectionName, sessionName, privilegeName);"},{"lineNumber":139,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":140,"author":{"gitId":"-"},"content":""},{"lineNumber":141,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":142,"author":{"gitId":"-"},"content":"     * Returns true if the instructor has the given privilege in the given section."},{"lineNumber":143,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":144,"author":{"gitId":"-"},"content":"    public boolean isAllowedForPrivilege(String sectionName, String privilegeName) {"},{"lineNumber":145,"author":{"gitId":"-"},"content":"        return privileges.isAllowedForPrivilege(sectionName, privilegeName);"},{"lineNumber":146,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":147,"author":{"gitId":"-"},"content":""},{"lineNumber":148,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":149,"author":{"gitId":"-"},"content":"     * Returns true if privilege for session is present for any section."},{"lineNumber":150,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":151,"author":{"gitId":"-"},"content":"    public boolean isAllowedForPrivilegeAnySection(String sessionName, String privilegeName) {"},{"lineNumber":152,"author":{"gitId":"-"},"content":"        return privileges.isAllowedForPrivilegeAnySection(sessionName, privilegeName);"},{"lineNumber":153,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":154,"author":{"gitId":"domlimm"},"content":"}"}],"authorContributionMap":{"domlimm":94,"EuniceSim142":15,"-":45}},{"path":"src/main/java/teammates/storage/sqlentity/Notification.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"hhdqirui"},"content":"package teammates.storage.sqlentity;"},{"lineNumber":2,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":3,"author":{"gitId":"hhdqirui"},"content":"import java.time.Instant;"},{"lineNumber":4,"author":{"gitId":"hhdqirui"},"content":"import java.util.ArrayList;"},{"lineNumber":5,"author":{"gitId":"hhdqirui"},"content":"import java.util.List;"},{"lineNumber":6,"author":{"gitId":"hhdqirui"},"content":"import java.util.Objects;"},{"lineNumber":7,"author":{"gitId":"hhdqirui"},"content":"import java.util.UUID;"},{"lineNumber":8,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":9,"author":{"gitId":"hhdqirui"},"content":"import org.hibernate.annotations.UpdateTimestamp;"},{"lineNumber":10,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":11,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.NotificationStyle;"},{"lineNumber":12,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.NotificationTargetUser;"},{"lineNumber":13,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.util.FieldValidator;"},{"lineNumber":14,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.util.SanitizationHelper;"},{"lineNumber":15,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":16,"author":{"gitId":"hhdqirui"},"content":"import jakarta.persistence.Column;"},{"lineNumber":17,"author":{"gitId":"hhdqirui"},"content":"import jakarta.persistence.Entity;"},{"lineNumber":18,"author":{"gitId":"hhdqirui"},"content":"import jakarta.persistence.EnumType;"},{"lineNumber":19,"author":{"gitId":"hhdqirui"},"content":"import jakarta.persistence.Enumerated;"},{"lineNumber":20,"author":{"gitId":"hhdqirui"},"content":"import jakarta.persistence.Id;"},{"lineNumber":21,"author":{"gitId":"hhdqirui"},"content":"import jakarta.persistence.Table;"},{"lineNumber":22,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":23,"author":{"gitId":"hhdqirui"},"content":"/**"},{"lineNumber":24,"author":{"gitId":"hhdqirui"},"content":" * Represents a unique notification in the system."},{"lineNumber":25,"author":{"gitId":"hhdqirui"},"content":" */"},{"lineNumber":26,"author":{"gitId":"hhdqirui"},"content":"@Entity"},{"lineNumber":27,"author":{"gitId":"hhdqirui"},"content":"@Table(name \u003d \"Notifications\")"},{"lineNumber":28,"author":{"gitId":"hhdqirui"},"content":"public class Notification extends BaseEntity {"},{"lineNumber":29,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":30,"author":{"gitId":"hhdqirui"},"content":"    @Id"},{"lineNumber":31,"author":{"gitId":"-"},"content":"    private UUID id;"},{"lineNumber":32,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":33,"author":{"gitId":"hhdqirui"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":34,"author":{"gitId":"hhdqirui"},"content":"    private Instant startTime;"},{"lineNumber":35,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":36,"author":{"gitId":"hhdqirui"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":37,"author":{"gitId":"hhdqirui"},"content":"    private Instant endTime;"},{"lineNumber":38,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":39,"author":{"gitId":"hhdqirui"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":40,"author":{"gitId":"hhdqirui"},"content":"    @Enumerated(EnumType.STRING)"},{"lineNumber":41,"author":{"gitId":"hhdqirui"},"content":"    private NotificationStyle style;"},{"lineNumber":42,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":43,"author":{"gitId":"hhdqirui"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":44,"author":{"gitId":"hhdqirui"},"content":"    @Enumerated(EnumType.STRING)"},{"lineNumber":45,"author":{"gitId":"hhdqirui"},"content":"    private NotificationTargetUser targetUser;"},{"lineNumber":46,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":47,"author":{"gitId":"hhdqirui"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":48,"author":{"gitId":"hhdqirui"},"content":"    private String title;"},{"lineNumber":49,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":50,"author":{"gitId":"hhdqirui"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":51,"author":{"gitId":"hhdqirui"},"content":"    private String message;"},{"lineNumber":52,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":53,"author":{"gitId":"hhdqirui"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":54,"author":{"gitId":"hhdqirui"},"content":"    private boolean shown;"},{"lineNumber":55,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":56,"author":{"gitId":"hhdqirui"},"content":"    @UpdateTimestamp"},{"lineNumber":57,"author":{"gitId":"hhdqirui"},"content":"    private Instant updatedAt;"},{"lineNumber":58,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":59,"author":{"gitId":"hhdqirui"},"content":"    /**"},{"lineNumber":60,"author":{"gitId":"-"},"content":"     * Instantiates a new notification."},{"lineNumber":61,"author":{"gitId":"hhdqirui"},"content":"     */"},{"lineNumber":62,"author":{"gitId":"-"},"content":"    public Notification(Instant startTime, Instant endTime, NotificationStyle style,"},{"lineNumber":63,"author":{"gitId":"-"},"content":"            NotificationTargetUser targetUser, String title, String message) {"},{"lineNumber":64,"author":{"gitId":"-"},"content":"        this.setStartTime(startTime);"},{"lineNumber":65,"author":{"gitId":"-"},"content":"        this.setEndTime(endTime);"},{"lineNumber":66,"author":{"gitId":"-"},"content":"        this.setStyle(style);"},{"lineNumber":67,"author":{"gitId":"-"},"content":"        this.setTargetUser(targetUser);"},{"lineNumber":68,"author":{"gitId":"-"},"content":"        this.setTitle(title);"},{"lineNumber":69,"author":{"gitId":"-"},"content":"        this.setMessage(message);"},{"lineNumber":70,"author":{"gitId":"-"},"content":"        this.setId(UUID.randomUUID());"},{"lineNumber":71,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":72,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":73,"author":{"gitId":"hhdqirui"},"content":"    protected Notification() {"},{"lineNumber":74,"author":{"gitId":"hhdqirui"},"content":"        // required by Hibernate"},{"lineNumber":75,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":76,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":77,"author":{"gitId":"hhdqirui"},"content":"    @Override"},{"lineNumber":78,"author":{"gitId":"hhdqirui"},"content":"    public List\u003cString\u003e getInvalidityInfo() {"},{"lineNumber":79,"author":{"gitId":"hhdqirui"},"content":"        List\u003cString\u003e errors \u003d new ArrayList\u003c\u003e();"},{"lineNumber":80,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":81,"author":{"gitId":"hhdqirui"},"content":"        addNonEmptyError(FieldValidator.getValidityInfoForNonNullField(\"notification visible time\", startTime), errors);"},{"lineNumber":82,"author":{"gitId":"hhdqirui"},"content":"        addNonEmptyError(FieldValidator.getValidityInfoForNonNullField(\"notification expiry time\", endTime), errors);"},{"lineNumber":83,"author":{"gitId":"hhdqirui"},"content":"        addNonEmptyError(FieldValidator.getInvalidityInfoForTimeForNotificationStartAndEnd(startTime, endTime), errors);"},{"lineNumber":84,"author":{"gitId":"hhdqirui"},"content":"        addNonEmptyError(FieldValidator.getInvalidityInfoForNotificationStyle(style.name()), errors);"},{"lineNumber":85,"author":{"gitId":"hhdqirui"},"content":"        addNonEmptyError(FieldValidator.getInvalidityInfoForNotificationTargetUser(targetUser.name()), errors);"},{"lineNumber":86,"author":{"gitId":"hhdqirui"},"content":"        addNonEmptyError(FieldValidator.getInvalidityInfoForNotificationTitle(title), errors);"},{"lineNumber":87,"author":{"gitId":"hhdqirui"},"content":"        addNonEmptyError(FieldValidator.getInvalidityInfoForNotificationBody(message), errors);"},{"lineNumber":88,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":89,"author":{"gitId":"hhdqirui"},"content":"        return errors;"},{"lineNumber":90,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":91,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":92,"author":{"gitId":"-"},"content":"    public UUID getId() {"},{"lineNumber":93,"author":{"gitId":"-"},"content":"        return id;"},{"lineNumber":94,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":95,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":96,"author":{"gitId":"-"},"content":"    public void setId(UUID id) {"},{"lineNumber":97,"author":{"gitId":"-"},"content":"        this.id \u003d id;"},{"lineNumber":98,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":99,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":100,"author":{"gitId":"hhdqirui"},"content":"    public Instant getStartTime() {"},{"lineNumber":101,"author":{"gitId":"hhdqirui"},"content":"        return startTime;"},{"lineNumber":102,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":103,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":104,"author":{"gitId":"hhdqirui"},"content":"    public void setStartTime(Instant startTime) {"},{"lineNumber":105,"author":{"gitId":"hhdqirui"},"content":"        this.startTime \u003d startTime;"},{"lineNumber":106,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":107,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":108,"author":{"gitId":"hhdqirui"},"content":"    public Instant getEndTime() {"},{"lineNumber":109,"author":{"gitId":"hhdqirui"},"content":"        return endTime;"},{"lineNumber":110,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":111,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":112,"author":{"gitId":"hhdqirui"},"content":"    public void setEndTime(Instant endTime) {"},{"lineNumber":113,"author":{"gitId":"hhdqirui"},"content":"        this.endTime \u003d endTime;"},{"lineNumber":114,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":115,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":116,"author":{"gitId":"hhdqirui"},"content":"    public NotificationStyle getStyle() {"},{"lineNumber":117,"author":{"gitId":"hhdqirui"},"content":"        return style;"},{"lineNumber":118,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":119,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":120,"author":{"gitId":"hhdqirui"},"content":"    public void setStyle(NotificationStyle style) {"},{"lineNumber":121,"author":{"gitId":"hhdqirui"},"content":"        this.style \u003d style;"},{"lineNumber":122,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":123,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":124,"author":{"gitId":"hhdqirui"},"content":"    public NotificationTargetUser getTargetUser() {"},{"lineNumber":125,"author":{"gitId":"hhdqirui"},"content":"        return targetUser;"},{"lineNumber":126,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":127,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":128,"author":{"gitId":"hhdqirui"},"content":"    public void setTargetUser(NotificationTargetUser targetUser) {"},{"lineNumber":129,"author":{"gitId":"hhdqirui"},"content":"        this.targetUser \u003d targetUser;"},{"lineNumber":130,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":131,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":132,"author":{"gitId":"hhdqirui"},"content":"    public String getTitle() {"},{"lineNumber":133,"author":{"gitId":"hhdqirui"},"content":"        return title;"},{"lineNumber":134,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":135,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":136,"author":{"gitId":"hhdqirui"},"content":"    public void setTitle(String title) {"},{"lineNumber":137,"author":{"gitId":"-"},"content":"        this.title \u003d SanitizationHelper.sanitizeTitle(title);"},{"lineNumber":138,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":139,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":140,"author":{"gitId":"hhdqirui"},"content":"    public String getMessage() {"},{"lineNumber":141,"author":{"gitId":"hhdqirui"},"content":"        return message;"},{"lineNumber":142,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":143,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":144,"author":{"gitId":"hhdqirui"},"content":"    public void setMessage(String message) {"},{"lineNumber":145,"author":{"gitId":"-"},"content":"        this.message \u003d SanitizationHelper.sanitizeForRichText(message);"},{"lineNumber":146,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":147,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":148,"author":{"gitId":"hhdqirui"},"content":"    public boolean isShown() {"},{"lineNumber":149,"author":{"gitId":"hhdqirui"},"content":"        return shown;"},{"lineNumber":150,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":151,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":152,"author":{"gitId":"hhdqirui"},"content":"    /**"},{"lineNumber":153,"author":{"gitId":"hhdqirui"},"content":"     * Sets the notification as shown to the user."},{"lineNumber":154,"author":{"gitId":"hhdqirui"},"content":"     * Only allowed to change value from false to true."},{"lineNumber":155,"author":{"gitId":"hhdqirui"},"content":"     */"},{"lineNumber":156,"author":{"gitId":"hhdqirui"},"content":"    public void setShown() {"},{"lineNumber":157,"author":{"gitId":"hhdqirui"},"content":"        this.shown \u003d true;"},{"lineNumber":158,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":159,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":160,"author":{"gitId":"hhdqirui"},"content":"    public Instant getUpdatedAt() {"},{"lineNumber":161,"author":{"gitId":"hhdqirui"},"content":"        return updatedAt;"},{"lineNumber":162,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":163,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":164,"author":{"gitId":"hhdqirui"},"content":"    public void setUpdatedAt(Instant updatedAt) {"},{"lineNumber":165,"author":{"gitId":"hhdqirui"},"content":"        this.updatedAt \u003d updatedAt;"},{"lineNumber":166,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":167,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":168,"author":{"gitId":"hhdqirui"},"content":"    @Override"},{"lineNumber":169,"author":{"gitId":"hhdqirui"},"content":"    public String toString() {"},{"lineNumber":170,"author":{"gitId":"-"},"content":"        return \"Notification [notificationId\u003d\" + id + \", startTime\u003d\" + startTime + \", endTime\u003d\" + endTime"},{"lineNumber":171,"author":{"gitId":"-"},"content":"                + \", style\u003d\" + style + \", targetUser\u003d\" + targetUser + \", title\u003d\" + title + \", message\u003d\" + message"},{"lineNumber":172,"author":{"gitId":"hhdqirui"},"content":"                + \", shown\u003d\" + shown + \", createdAt\u003d\" + getCreatedAt() + \", updatedAt\u003d\" + updatedAt + \"]\";"},{"lineNumber":173,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":174,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":175,"author":{"gitId":"hhdqirui"},"content":"    @Override"},{"lineNumber":176,"author":{"gitId":"hhdqirui"},"content":"    public int hashCode() {"},{"lineNumber":177,"author":{"gitId":"-"},"content":"        return this.getId().hashCode();"},{"lineNumber":178,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":179,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":180,"author":{"gitId":"hhdqirui"},"content":"    @Override"},{"lineNumber":181,"author":{"gitId":"hhdqirui"},"content":"    public boolean equals(Object other) {"},{"lineNumber":182,"author":{"gitId":"hhdqirui"},"content":"        if (other \u003d\u003d null) {"},{"lineNumber":183,"author":{"gitId":"hhdqirui"},"content":"            return false;"},{"lineNumber":184,"author":{"gitId":"hhdqirui"},"content":"        } else if (this \u003d\u003d other) {"},{"lineNumber":185,"author":{"gitId":"hhdqirui"},"content":"            return true;"},{"lineNumber":186,"author":{"gitId":"hhdqirui"},"content":"        } else if (this.getClass() \u003d\u003d other.getClass()) {"},{"lineNumber":187,"author":{"gitId":"hhdqirui"},"content":"            Notification otherNotification \u003d (Notification) other;"},{"lineNumber":188,"author":{"gitId":"-"},"content":"            return Objects.equals(this.getId(), otherNotification.getId());"},{"lineNumber":189,"author":{"gitId":"hhdqirui"},"content":"        } else {"},{"lineNumber":190,"author":{"gitId":"hhdqirui"},"content":"            return false;"},{"lineNumber":191,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":192,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":193,"author":{"gitId":"hhdqirui"},"content":"}"}],"authorContributionMap":{"hhdqirui":172,"-":21}},{"path":"src/main/java/teammates/storage/sqlentity/Student.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"domlimm"},"content":"package teammates.storage.sqlentity;"},{"lineNumber":2,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":3,"author":{"gitId":"domlimm"},"content":"import java.util.ArrayList;"},{"lineNumber":4,"author":{"gitId":"domlimm"},"content":"import java.util.List;"},{"lineNumber":5,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":6,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.util.Config;"},{"lineNumber":7,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.util.Const;"},{"lineNumber":8,"author":{"gitId":"domlimm"},"content":"import teammates.common.util.FieldValidator;"},{"lineNumber":9,"author":{"gitId":"domlimm"},"content":"import teammates.common.util.SanitizationHelper;"},{"lineNumber":10,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":11,"author":{"gitId":"domlimm"},"content":"import jakarta.persistence.Column;"},{"lineNumber":12,"author":{"gitId":"domlimm"},"content":"import jakarta.persistence.Entity;"},{"lineNumber":13,"author":{"gitId":"domlimm"},"content":"import jakarta.persistence.Table;"},{"lineNumber":14,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":15,"author":{"gitId":"domlimm"},"content":"/**"},{"lineNumber":16,"author":{"gitId":"domlimm"},"content":" * Represents a Student."},{"lineNumber":17,"author":{"gitId":"domlimm"},"content":" */"},{"lineNumber":18,"author":{"gitId":"domlimm"},"content":"@Entity"},{"lineNumber":19,"author":{"gitId":"domlimm"},"content":"@Table(name \u003d \"Students\")"},{"lineNumber":20,"author":{"gitId":"domlimm"},"content":"public class Student extends User {"},{"lineNumber":21,"author":{"gitId":"domlimm"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":22,"author":{"gitId":"domlimm"},"content":"    private String comments;"},{"lineNumber":23,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":24,"author":{"gitId":"domlimm"},"content":"    protected Student() {"},{"lineNumber":25,"author":{"gitId":"domlimm"},"content":"        // required by Hibernate"},{"lineNumber":26,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":27,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":28,"author":{"gitId":"domlimm"},"content":"    public Student(Course course, String name, String email, String comments) {"},{"lineNumber":29,"author":{"gitId":"domlimm"},"content":"        super(course, name, email);"},{"lineNumber":30,"author":{"gitId":"domlimm"},"content":"        this.setComments(comments);"},{"lineNumber":31,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":32,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":33,"author":{"gitId":"domlimm"},"content":"    public String getComments() {"},{"lineNumber":34,"author":{"gitId":"domlimm"},"content":"        return comments;"},{"lineNumber":35,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":36,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":37,"author":{"gitId":"domlimm"},"content":"    public void setComments(String comments) {"},{"lineNumber":38,"author":{"gitId":"-"},"content":"        this.comments \u003d SanitizationHelper.sanitizeTextField(comments);"},{"lineNumber":39,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":40,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":41,"author":{"gitId":"domlimm"},"content":"    @Override"},{"lineNumber":42,"author":{"gitId":"domlimm"},"content":"    public String toString() {"},{"lineNumber":43,"author":{"gitId":"domlimm"},"content":"        return \"Student [id\u003d\" + super.getId() + \", comments\u003d\" + comments"},{"lineNumber":44,"author":{"gitId":"domlimm"},"content":"                + \", createdAt\u003d\" + super.getCreatedAt() + \", updatedAt\u003d\" + super.getUpdatedAt() + \"]\";"},{"lineNumber":45,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":46,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":47,"author":{"gitId":"domlimm"},"content":"    @Override"},{"lineNumber":48,"author":{"gitId":"domlimm"},"content":"    public List\u003cString\u003e getInvalidityInfo() {"},{"lineNumber":49,"author":{"gitId":"domlimm"},"content":"        assert comments !\u003d null;"},{"lineNumber":50,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":51,"author":{"gitId":"domlimm"},"content":"        List\u003cString\u003e errors \u003d new ArrayList\u003c\u003e();"},{"lineNumber":52,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":53,"author":{"gitId":"domlimm"},"content":"        addNonEmptyError(FieldValidator.getInvalidityInfoForEmail(super.getEmail()), errors);"},{"lineNumber":54,"author":{"gitId":"domlimm"},"content":"        addNonEmptyError(FieldValidator.getInvalidityInfoForStudentRoleComments(comments), errors);"},{"lineNumber":55,"author":{"gitId":"domlimm"},"content":"        addNonEmptyError(FieldValidator.getInvalidityInfoForPersonName(super.getName()), errors);"},{"lineNumber":56,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":57,"author":{"gitId":"domlimm"},"content":"        return errors;"},{"lineNumber":58,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":59,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":60,"author":{"gitId":"EuniceSim142"},"content":"    public String getRegistrationUrl() {"},{"lineNumber":61,"author":{"gitId":"EuniceSim142"},"content":"        return Config.getFrontEndAppUrl(Const.WebPageURIs.JOIN_PAGE)"},{"lineNumber":62,"author":{"gitId":"EuniceSim142"},"content":"                .withRegistrationKey(getRegKey())"},{"lineNumber":63,"author":{"gitId":"EuniceSim142"},"content":"                .withEntityType(Const.EntityType.STUDENT)"},{"lineNumber":64,"author":{"gitId":"EuniceSim142"},"content":"                .toString();"},{"lineNumber":65,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":66,"author":{"gitId":"domlimm"},"content":"}"}],"authorContributionMap":{"domlimm":56,"EuniceSim142":9,"-":1}},{"path":"src/main/java/teammates/storage/sqlentity/User.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"domlimm"},"content":"package teammates.storage.sqlentity;"},{"lineNumber":2,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":3,"author":{"gitId":"domlimm"},"content":"import java.security.SecureRandom;"},{"lineNumber":4,"author":{"gitId":"domlimm"},"content":"import java.time.Instant;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.util.Objects;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import java.util.UUID;"},{"lineNumber":7,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":8,"author":{"gitId":"domlimm"},"content":"import org.hibernate.annotations.UpdateTimestamp;"},{"lineNumber":9,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":10,"author":{"gitId":"-"},"content":"import teammates.common.util.SanitizationHelper;"},{"lineNumber":11,"author":{"gitId":"domlimm"},"content":"import teammates.common.util.StringHelper;"},{"lineNumber":12,"author":{"gitId":"-"},"content":""},{"lineNumber":13,"author":{"gitId":"domlimm"},"content":"import jakarta.persistence.Column;"},{"lineNumber":14,"author":{"gitId":"domlimm"},"content":"import jakarta.persistence.Entity;"},{"lineNumber":15,"author":{"gitId":"domlimm"},"content":"import jakarta.persistence.Id;"},{"lineNumber":16,"author":{"gitId":"domlimm"},"content":"import jakarta.persistence.Inheritance;"},{"lineNumber":17,"author":{"gitId":"domlimm"},"content":"import jakarta.persistence.InheritanceType;"},{"lineNumber":18,"author":{"gitId":"domlimm"},"content":"import jakarta.persistence.JoinColumn;"},{"lineNumber":19,"author":{"gitId":"domlimm"},"content":"import jakarta.persistence.ManyToOne;"},{"lineNumber":20,"author":{"gitId":"domlimm"},"content":"import jakarta.persistence.Table;"},{"lineNumber":21,"author":{"gitId":"domlimm"},"content":"import jakarta.persistence.UniqueConstraint;"},{"lineNumber":22,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":23,"author":{"gitId":"domlimm"},"content":"/**"},{"lineNumber":24,"author":{"gitId":"-"},"content":" * Represents a User."},{"lineNumber":25,"author":{"gitId":"domlimm"},"content":" */"},{"lineNumber":26,"author":{"gitId":"domlimm"},"content":"@Entity"},{"lineNumber":27,"author":{"gitId":"domlimm"},"content":"@Table(name \u003d \"Users\", uniqueConstraints \u003d {"},{"lineNumber":28,"author":{"gitId":"domlimm"},"content":"        @UniqueConstraint(name \u003d \"Unique email and courseId\", columnNames \u003d { \"email\", \"courseId\" })"},{"lineNumber":29,"author":{"gitId":"domlimm"},"content":"})"},{"lineNumber":30,"author":{"gitId":"domlimm"},"content":"@Inheritance(strategy \u003d InheritanceType.JOINED)"},{"lineNumber":31,"author":{"gitId":"domlimm"},"content":"public abstract class User extends BaseEntity {"},{"lineNumber":32,"author":{"gitId":"domlimm"},"content":"    @Id"},{"lineNumber":33,"author":{"gitId":"-"},"content":"    private UUID id;"},{"lineNumber":34,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":35,"author":{"gitId":"domlimm"},"content":"    @ManyToOne"},{"lineNumber":36,"author":{"gitId":"domlimm"},"content":"    @JoinColumn(name \u003d \"accountId\")"},{"lineNumber":37,"author":{"gitId":"domlimm"},"content":"    private Account account;"},{"lineNumber":38,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":39,"author":{"gitId":"domlimm"},"content":"    @Column(nullable \u003d false, insertable \u003d false, updatable \u003d false)"},{"lineNumber":40,"author":{"gitId":"domlimm"},"content":"    private String courseId;"},{"lineNumber":41,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":42,"author":{"gitId":"domlimm"},"content":"    @ManyToOne"},{"lineNumber":43,"author":{"gitId":"domlimm"},"content":"    @JoinColumn(name \u003d \"courseId\", nullable \u003d false)"},{"lineNumber":44,"author":{"gitId":"domlimm"},"content":"    private Course course;"},{"lineNumber":45,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":46,"author":{"gitId":"domlimm"},"content":"    @ManyToOne"},{"lineNumber":47,"author":{"gitId":"domlimm"},"content":"    @JoinColumn(name \u003d \"teamId\")"},{"lineNumber":48,"author":{"gitId":"-"},"content":"    private Team team;"},{"lineNumber":49,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":50,"author":{"gitId":"domlimm"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":51,"author":{"gitId":"domlimm"},"content":"    private String name;"},{"lineNumber":52,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":53,"author":{"gitId":"domlimm"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":54,"author":{"gitId":"domlimm"},"content":"    private String email;"},{"lineNumber":55,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":56,"author":{"gitId":"domlimm"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":57,"author":{"gitId":"domlimm"},"content":"    private String regKey;"},{"lineNumber":58,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":59,"author":{"gitId":"domlimm"},"content":"    @UpdateTimestamp"},{"lineNumber":60,"author":{"gitId":"domlimm"},"content":"    private Instant updatedAt;"},{"lineNumber":61,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":62,"author":{"gitId":"domlimm"},"content":"    protected User() {"},{"lineNumber":63,"author":{"gitId":"domlimm"},"content":"        // required by Hibernate"},{"lineNumber":64,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":65,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":66,"author":{"gitId":"-"},"content":"    protected User(Course course, String name, String email) {"},{"lineNumber":67,"author":{"gitId":"-"},"content":"        this.setId(UUID.randomUUID());"},{"lineNumber":68,"author":{"gitId":"domlimm"},"content":"        this.setCourse(course);"},{"lineNumber":69,"author":{"gitId":"domlimm"},"content":"        this.setName(name);"},{"lineNumber":70,"author":{"gitId":"domlimm"},"content":"        this.setEmail(email);"},{"lineNumber":71,"author":{"gitId":"-"},"content":"        this.generateNewRegistrationKey();"},{"lineNumber":72,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":73,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":74,"author":{"gitId":"-"},"content":"    public UUID getId() {"},{"lineNumber":75,"author":{"gitId":"domlimm"},"content":"        return id;"},{"lineNumber":76,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":77,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":78,"author":{"gitId":"-"},"content":"    public void setId(UUID id) {"},{"lineNumber":79,"author":{"gitId":"domlimm"},"content":"        this.id \u003d id;"},{"lineNumber":80,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":81,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":82,"author":{"gitId":"domlimm"},"content":"    public Account getAccount() {"},{"lineNumber":83,"author":{"gitId":"domlimm"},"content":"        return account;"},{"lineNumber":84,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":85,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":86,"author":{"gitId":"domlimm"},"content":"    public void setAccount(Account account) {"},{"lineNumber":87,"author":{"gitId":"domlimm"},"content":"        this.account \u003d account;"},{"lineNumber":88,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":89,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":90,"author":{"gitId":"domlimm"},"content":"    public String getCourseId() {"},{"lineNumber":91,"author":{"gitId":"domlimm"},"content":"        return courseId;"},{"lineNumber":92,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":93,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":94,"author":{"gitId":"domlimm"},"content":"    public Course getCourse() {"},{"lineNumber":95,"author":{"gitId":"domlimm"},"content":"        return course;"},{"lineNumber":96,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":97,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":98,"author":{"gitId":"domlimm"},"content":"    /**"},{"lineNumber":99,"author":{"gitId":"domlimm"},"content":"     * Sets a course as well as the courseId."},{"lineNumber":100,"author":{"gitId":"domlimm"},"content":"     */"},{"lineNumber":101,"author":{"gitId":"domlimm"},"content":"    public void setCourse(Course course) {"},{"lineNumber":102,"author":{"gitId":"domlimm"},"content":"        this.course \u003d course;"},{"lineNumber":103,"author":{"gitId":"domlimm"},"content":"        this.courseId \u003d course.getId();"},{"lineNumber":104,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":105,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":106,"author":{"gitId":"-"},"content":"    public Team getTeam() {"},{"lineNumber":107,"author":{"gitId":"domlimm"},"content":"        return team;"},{"lineNumber":108,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":109,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":110,"author":{"gitId":"-"},"content":"    public void setTeam(Team team) {"},{"lineNumber":111,"author":{"gitId":"domlimm"},"content":"        this.team \u003d team;"},{"lineNumber":112,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":113,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":114,"author":{"gitId":"domlimm"},"content":"    public String getName() {"},{"lineNumber":115,"author":{"gitId":"domlimm"},"content":"        return name;"},{"lineNumber":116,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":117,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":118,"author":{"gitId":"domlimm"},"content":"    public void setName(String name) {"},{"lineNumber":119,"author":{"gitId":"-"},"content":"        this.name \u003d SanitizationHelper.sanitizeName(name);"},{"lineNumber":120,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":121,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":122,"author":{"gitId":"domlimm"},"content":"    public String getEmail() {"},{"lineNumber":123,"author":{"gitId":"domlimm"},"content":"        return email;"},{"lineNumber":124,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":125,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":126,"author":{"gitId":"domlimm"},"content":"    public void setEmail(String email) {"},{"lineNumber":127,"author":{"gitId":"-"},"content":"        this.email \u003d SanitizationHelper.sanitizeEmail(email);"},{"lineNumber":128,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":129,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":130,"author":{"gitId":"domlimm"},"content":"    public Instant getUpdatedAt() {"},{"lineNumber":131,"author":{"gitId":"domlimm"},"content":"        return updatedAt;"},{"lineNumber":132,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":133,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":134,"author":{"gitId":"domlimm"},"content":"    public void setUpdatedAt(Instant updatedAt) {"},{"lineNumber":135,"author":{"gitId":"domlimm"},"content":"        this.updatedAt \u003d updatedAt;"},{"lineNumber":136,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":137,"author":{"gitId":"-"},"content":""},{"lineNumber":138,"author":{"gitId":"domlimm"},"content":"    public String getRegKey() {"},{"lineNumber":139,"author":{"gitId":"domlimm"},"content":"        return this.regKey;"},{"lineNumber":140,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":141,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":142,"author":{"gitId":"domlimm"},"content":"    public void setRegKey(String regKey) {"},{"lineNumber":143,"author":{"gitId":"domlimm"},"content":"        this.regKey \u003d regKey;"},{"lineNumber":144,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":145,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":146,"author":{"gitId":"domlimm"},"content":"    /**"},{"lineNumber":147,"author":{"gitId":"-"},"content":"     * Generates a new registration key for the user."},{"lineNumber":148,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":149,"author":{"gitId":"-"},"content":"    public void generateNewRegistrationKey() {"},{"lineNumber":150,"author":{"gitId":"-"},"content":"        this.setRegKey(generateRegistrationKey());"},{"lineNumber":151,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":152,"author":{"gitId":"-"},"content":""},{"lineNumber":153,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":154,"author":{"gitId":"-"},"content":"     * Returns unique registration key for the user."},{"lineNumber":155,"author":{"gitId":"domlimm"},"content":"     */"},{"lineNumber":156,"author":{"gitId":"domlimm"},"content":"    private String generateRegistrationKey() {"},{"lineNumber":157,"author":{"gitId":"domlimm"},"content":"        String uniqueId \u003d this.email + \u0027%\u0027 + this.course.getId();"},{"lineNumber":158,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":159,"author":{"gitId":"domlimm"},"content":"        SecureRandom prng \u003d new SecureRandom();"},{"lineNumber":160,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":161,"author":{"gitId":"domlimm"},"content":"        return StringHelper.encrypt(uniqueId + \"%\" + prng.nextInt());"},{"lineNumber":162,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":163,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":164,"author":{"gitId":"domlimm"},"content":"    /**"},{"lineNumber":165,"author":{"gitId":"domlimm"},"content":"     * Returns google id of the user if account is not null."},{"lineNumber":166,"author":{"gitId":"domlimm"},"content":"     */"},{"lineNumber":167,"author":{"gitId":"domlimm"},"content":"    public String getGoogleId() {"},{"lineNumber":168,"author":{"gitId":"domlimm"},"content":"        if (getAccount() !\u003d null) {"},{"lineNumber":169,"author":{"gitId":"domlimm"},"content":"            return getAccount().getGoogleId();"},{"lineNumber":170,"author":{"gitId":"domlimm"},"content":"        }"},{"lineNumber":171,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":172,"author":{"gitId":"domlimm"},"content":"        return null;"},{"lineNumber":173,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":174,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":175,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":176,"author":{"gitId":"-"},"content":"    public boolean equals(Object other) {"},{"lineNumber":177,"author":{"gitId":"-"},"content":"        if (other \u003d\u003d null) {"},{"lineNumber":178,"author":{"gitId":"-"},"content":"            return false;"},{"lineNumber":179,"author":{"gitId":"-"},"content":"        } else if (this \u003d\u003d other) {"},{"lineNumber":180,"author":{"gitId":"-"},"content":"            return true;"},{"lineNumber":181,"author":{"gitId":"-"},"content":"        } else if (this.getClass() \u003d\u003d other.getClass()) {"},{"lineNumber":182,"author":{"gitId":"-"},"content":"            User otherUser \u003d (User) other;"},{"lineNumber":183,"author":{"gitId":"-"},"content":"            return Objects.equals(this.getId(), otherUser.getId());"},{"lineNumber":184,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":185,"author":{"gitId":"-"},"content":"            return false;"},{"lineNumber":186,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":187,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":188,"author":{"gitId":"-"},"content":""},{"lineNumber":189,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":190,"author":{"gitId":"-"},"content":"    public int hashCode() {"},{"lineNumber":191,"author":{"gitId":"-"},"content":"        return this.getId().hashCode();"},{"lineNumber":192,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":193,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":194,"author":{"gitId":"EuniceSim142"},"content":"    public boolean isRegistered() {"},{"lineNumber":195,"author":{"gitId":"EuniceSim142"},"content":"        return this.account !\u003d null;"},{"lineNumber":196,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":197,"author":{"gitId":"domlimm"},"content":"}"}],"authorContributionMap":{"domlimm":150,"EuniceSim142":4,"-":43}},{"path":"src/main/java/teammates/storage/sqlentity/questions/FeedbackConstantSumQuestion.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"cedricongjh"},"content":"package teammates.storage.sqlentity.questions;"},{"lineNumber":2,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":3,"author":{"gitId":"hhdqirui"},"content":"import java.util.List;"},{"lineNumber":4,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":5,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.FeedbackParticipantType;"},{"lineNumber":6,"author":{"gitId":"cedricongjh"},"content":"import teammates.common.datatransfer.questions.FeedbackConstantSumQuestionDetails;"},{"lineNumber":7,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.questions.FeedbackQuestionDetails;"},{"lineNumber":8,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.FeedbackQuestion;"},{"lineNumber":9,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.FeedbackSession;"},{"lineNumber":10,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":11,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Column;"},{"lineNumber":12,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Convert;"},{"lineNumber":13,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Converter;"},{"lineNumber":14,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Entity;"},{"lineNumber":15,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":16,"author":{"gitId":"cedricongjh"},"content":"/**"},{"lineNumber":17,"author":{"gitId":"cedricongjh"},"content":" * Represents a constant sum question."},{"lineNumber":18,"author":{"gitId":"cedricongjh"},"content":" */"},{"lineNumber":19,"author":{"gitId":"cedricongjh"},"content":"@Entity"},{"lineNumber":20,"author":{"gitId":"cedricongjh"},"content":"public class FeedbackConstantSumQuestion extends FeedbackQuestion {"},{"lineNumber":21,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":22,"author":{"gitId":"cedricongjh"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":23,"author":{"gitId":"cedricongjh"},"content":"    @Convert(converter \u003d FeedbackConstantSumQuestionDetailsConverter.class)"},{"lineNumber":24,"author":{"gitId":"cedricongjh"},"content":"    private FeedbackConstantSumQuestionDetails questionDetails;"},{"lineNumber":25,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":26,"author":{"gitId":"cedricongjh"},"content":"    protected FeedbackConstantSumQuestion() {"},{"lineNumber":27,"author":{"gitId":"cedricongjh"},"content":"        // required by Hibernate"},{"lineNumber":28,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":29,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":30,"author":{"gitId":"hhdqirui"},"content":"    public FeedbackConstantSumQuestion("},{"lineNumber":31,"author":{"gitId":"hhdqirui"},"content":"            FeedbackSession feedbackSession, Integer questionNumber,"},{"lineNumber":32,"author":{"gitId":"hhdqirui"},"content":"            String description, FeedbackParticipantType giverType, FeedbackParticipantType recipientType,"},{"lineNumber":33,"author":{"gitId":"hhdqirui"},"content":"            Integer numOfEntitiesToGiveFeedbackTo, List\u003cFeedbackParticipantType\u003e showResponsesTo,"},{"lineNumber":34,"author":{"gitId":"hhdqirui"},"content":"            List\u003cFeedbackParticipantType\u003e showGiverNameTo, List\u003cFeedbackParticipantType\u003e showRecipientNameTo,"},{"lineNumber":35,"author":{"gitId":"hhdqirui"},"content":"            FeedbackQuestionDetails feedbackQuestionDetails"},{"lineNumber":36,"author":{"gitId":"hhdqirui"},"content":"    ) {"},{"lineNumber":37,"author":{"gitId":"hhdqirui"},"content":"        super(feedbackSession, questionNumber, description, giverType, recipientType,"},{"lineNumber":38,"author":{"gitId":"hhdqirui"},"content":"                numOfEntitiesToGiveFeedbackTo, showResponsesTo, showGiverNameTo, showRecipientNameTo);"},{"lineNumber":39,"author":{"gitId":"hhdqirui"},"content":"        setFeedBackQuestionDetails((FeedbackConstantSumQuestionDetails) feedbackQuestionDetails);"},{"lineNumber":40,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":41,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":42,"author":{"gitId":"hhdqirui"},"content":"    @Override"},{"lineNumber":43,"author":{"gitId":"hhdqirui"},"content":"    public FeedbackQuestionDetails getQuestionDetailsCopy() {"},{"lineNumber":44,"author":{"gitId":"hhdqirui"},"content":"        return questionDetails.getDeepCopy();"},{"lineNumber":45,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":46,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":47,"author":{"gitId":"cedricongjh"},"content":"    @Override"},{"lineNumber":48,"author":{"gitId":"cedricongjh"},"content":"    public String toString() {"},{"lineNumber":49,"author":{"gitId":"cedricongjh"},"content":"        return \"FeedbackConstantSumQuestion [id\u003d\" + super.getId()"},{"lineNumber":50,"author":{"gitId":"cedricongjh"},"content":"                + \", createdAt\u003d\" + super.getCreatedAt() + \", updatedAt\u003d\" + super.getUpdatedAt() + \"]\";"},{"lineNumber":51,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":52,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":53,"author":{"gitId":"cedricongjh"},"content":"    public void setFeedBackQuestionDetails(FeedbackConstantSumQuestionDetails questionDetails) {"},{"lineNumber":54,"author":{"gitId":"cedricongjh"},"content":"        this.questionDetails \u003d questionDetails;"},{"lineNumber":55,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":56,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":57,"author":{"gitId":"cedricongjh"},"content":"    public FeedbackConstantSumQuestionDetails getFeedbackQuestionDetails() {"},{"lineNumber":58,"author":{"gitId":"cedricongjh"},"content":"        return questionDetails;"},{"lineNumber":59,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":60,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":61,"author":{"gitId":"cedricongjh"},"content":"    /**"},{"lineNumber":62,"author":{"gitId":"cedricongjh"},"content":"     * Converter for FeedbackConstantSumQuestion specific attributes."},{"lineNumber":63,"author":{"gitId":"cedricongjh"},"content":"     */"},{"lineNumber":64,"author":{"gitId":"cedricongjh"},"content":"    @Converter"},{"lineNumber":65,"author":{"gitId":"cedricongjh"},"content":"    public static class FeedbackConstantSumQuestionDetailsConverter"},{"lineNumber":66,"author":{"gitId":"hhdqirui"},"content":"            extends FeedbackQuestionDetailsConverter {"},{"lineNumber":67,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":68,"author":{"gitId":"cedricongjh"},"content":"}"}],"authorContributionMap":{"cedricongjh":45,"hhdqirui":23}},{"path":"src/main/java/teammates/storage/sqlentity/questions/FeedbackContributionQuestion.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"cedricongjh"},"content":"package teammates.storage.sqlentity.questions;"},{"lineNumber":2,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":3,"author":{"gitId":"hhdqirui"},"content":"import java.util.List;"},{"lineNumber":4,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":5,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.FeedbackParticipantType;"},{"lineNumber":6,"author":{"gitId":"cedricongjh"},"content":"import teammates.common.datatransfer.questions.FeedbackContributionQuestionDetails;"},{"lineNumber":7,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.questions.FeedbackQuestionDetails;"},{"lineNumber":8,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.FeedbackQuestion;"},{"lineNumber":9,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.FeedbackSession;"},{"lineNumber":10,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":11,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Column;"},{"lineNumber":12,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Convert;"},{"lineNumber":13,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Converter;"},{"lineNumber":14,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Entity;"},{"lineNumber":15,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":16,"author":{"gitId":"cedricongjh"},"content":"/**"},{"lineNumber":17,"author":{"gitId":"cedricongjh"},"content":" * Represents a contribution question."},{"lineNumber":18,"author":{"gitId":"cedricongjh"},"content":" */"},{"lineNumber":19,"author":{"gitId":"cedricongjh"},"content":"@Entity"},{"lineNumber":20,"author":{"gitId":"cedricongjh"},"content":"public class FeedbackContributionQuestion extends FeedbackQuestion {"},{"lineNumber":21,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":22,"author":{"gitId":"cedricongjh"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":23,"author":{"gitId":"cedricongjh"},"content":"    @Convert(converter \u003d FeedbackContributionQuestionDetailsConverter.class)"},{"lineNumber":24,"author":{"gitId":"cedricongjh"},"content":"    private FeedbackContributionQuestionDetails questionDetails;"},{"lineNumber":25,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":26,"author":{"gitId":"cedricongjh"},"content":"    protected FeedbackContributionQuestion() {"},{"lineNumber":27,"author":{"gitId":"cedricongjh"},"content":"        // required by Hibernate"},{"lineNumber":28,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":29,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":30,"author":{"gitId":"hhdqirui"},"content":"    public FeedbackContributionQuestion("},{"lineNumber":31,"author":{"gitId":"hhdqirui"},"content":"            FeedbackSession feedbackSession, Integer questionNumber,"},{"lineNumber":32,"author":{"gitId":"hhdqirui"},"content":"            String description, FeedbackParticipantType giverType, FeedbackParticipantType recipientType,"},{"lineNumber":33,"author":{"gitId":"hhdqirui"},"content":"            Integer numOfEntitiesToGiveFeedbackTo, List\u003cFeedbackParticipantType\u003e showResponsesTo,"},{"lineNumber":34,"author":{"gitId":"hhdqirui"},"content":"            List\u003cFeedbackParticipantType\u003e showGiverNameTo, List\u003cFeedbackParticipantType\u003e showRecipientNameTo,"},{"lineNumber":35,"author":{"gitId":"hhdqirui"},"content":"            FeedbackQuestionDetails feedbackQuestionDetails"},{"lineNumber":36,"author":{"gitId":"hhdqirui"},"content":"    ) {"},{"lineNumber":37,"author":{"gitId":"hhdqirui"},"content":"        super(feedbackSession, questionNumber, description, giverType, recipientType,"},{"lineNumber":38,"author":{"gitId":"hhdqirui"},"content":"                numOfEntitiesToGiveFeedbackTo, showResponsesTo, showGiverNameTo, showRecipientNameTo);"},{"lineNumber":39,"author":{"gitId":"hhdqirui"},"content":"        setFeedBackQuestionDetails((FeedbackContributionQuestionDetails) feedbackQuestionDetails);"},{"lineNumber":40,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":41,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":42,"author":{"gitId":"hhdqirui"},"content":"    @Override"},{"lineNumber":43,"author":{"gitId":"hhdqirui"},"content":"    public FeedbackQuestionDetails getQuestionDetailsCopy() {"},{"lineNumber":44,"author":{"gitId":"hhdqirui"},"content":"        return questionDetails.getDeepCopy();"},{"lineNumber":45,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":46,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":47,"author":{"gitId":"cedricongjh"},"content":"    @Override"},{"lineNumber":48,"author":{"gitId":"cedricongjh"},"content":"    public String toString() {"},{"lineNumber":49,"author":{"gitId":"cedricongjh"},"content":"        return \"FeedbackContributionQuestion [id\u003d\" + super.getId()"},{"lineNumber":50,"author":{"gitId":"cedricongjh"},"content":"                + \", createdAt\u003d\" + super.getCreatedAt() + \", updatedAt\u003d\" + super.getUpdatedAt() + \"]\";"},{"lineNumber":51,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":52,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":53,"author":{"gitId":"cedricongjh"},"content":"    public void setFeedBackQuestionDetails(FeedbackContributionQuestionDetails questionDetails) {"},{"lineNumber":54,"author":{"gitId":"cedricongjh"},"content":"        this.questionDetails \u003d questionDetails;"},{"lineNumber":55,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":56,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":57,"author":{"gitId":"cedricongjh"},"content":"    public FeedbackContributionQuestionDetails getFeedbackQuestionDetails() {"},{"lineNumber":58,"author":{"gitId":"cedricongjh"},"content":"        return questionDetails;"},{"lineNumber":59,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":60,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":61,"author":{"gitId":"cedricongjh"},"content":"    /**"},{"lineNumber":62,"author":{"gitId":"cedricongjh"},"content":"     * Converter for FeedbackContributionQuestion specific attributes."},{"lineNumber":63,"author":{"gitId":"cedricongjh"},"content":"     */"},{"lineNumber":64,"author":{"gitId":"cedricongjh"},"content":"    @Converter"},{"lineNumber":65,"author":{"gitId":"cedricongjh"},"content":"    public static class FeedbackContributionQuestionDetailsConverter"},{"lineNumber":66,"author":{"gitId":"hhdqirui"},"content":"            extends FeedbackQuestionDetailsConverter {"},{"lineNumber":67,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":68,"author":{"gitId":"cedricongjh"},"content":"}"}],"authorContributionMap":{"cedricongjh":45,"hhdqirui":23}},{"path":"src/main/java/teammates/storage/sqlentity/questions/FeedbackMcqQuestion.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"cedricongjh"},"content":"package teammates.storage.sqlentity.questions;"},{"lineNumber":2,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":3,"author":{"gitId":"hhdqirui"},"content":"import java.util.List;"},{"lineNumber":4,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":5,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.FeedbackParticipantType;"},{"lineNumber":6,"author":{"gitId":"cedricongjh"},"content":"import teammates.common.datatransfer.questions.FeedbackMcqQuestionDetails;"},{"lineNumber":7,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.questions.FeedbackQuestionDetails;"},{"lineNumber":8,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.FeedbackQuestion;"},{"lineNumber":9,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.FeedbackSession;"},{"lineNumber":10,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":11,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Column;"},{"lineNumber":12,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Convert;"},{"lineNumber":13,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Converter;"},{"lineNumber":14,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Entity;"},{"lineNumber":15,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":16,"author":{"gitId":"cedricongjh"},"content":"/**"},{"lineNumber":17,"author":{"gitId":"cedricongjh"},"content":" * Represents an mcq question."},{"lineNumber":18,"author":{"gitId":"cedricongjh"},"content":" */"},{"lineNumber":19,"author":{"gitId":"cedricongjh"},"content":"@Entity"},{"lineNumber":20,"author":{"gitId":"cedricongjh"},"content":"public class FeedbackMcqQuestion extends FeedbackQuestion {"},{"lineNumber":21,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":22,"author":{"gitId":"cedricongjh"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":23,"author":{"gitId":"cedricongjh"},"content":"    @Convert(converter \u003d FeedbackMcqQuestionDetailsConverter.class)"},{"lineNumber":24,"author":{"gitId":"cedricongjh"},"content":"    private FeedbackMcqQuestionDetails questionDetails;"},{"lineNumber":25,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":26,"author":{"gitId":"cedricongjh"},"content":"    protected FeedbackMcqQuestion() {"},{"lineNumber":27,"author":{"gitId":"cedricongjh"},"content":"        // required by Hibernate"},{"lineNumber":28,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":29,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":30,"author":{"gitId":"hhdqirui"},"content":"    public FeedbackMcqQuestion("},{"lineNumber":31,"author":{"gitId":"hhdqirui"},"content":"            FeedbackSession feedbackSession, Integer questionNumber,"},{"lineNumber":32,"author":{"gitId":"hhdqirui"},"content":"            String description, FeedbackParticipantType giverType, FeedbackParticipantType recipientType,"},{"lineNumber":33,"author":{"gitId":"hhdqirui"},"content":"            Integer numOfEntitiesToGiveFeedbackTo, List\u003cFeedbackParticipantType\u003e showResponsesTo,"},{"lineNumber":34,"author":{"gitId":"hhdqirui"},"content":"            List\u003cFeedbackParticipantType\u003e showGiverNameTo, List\u003cFeedbackParticipantType\u003e showRecipientNameTo,"},{"lineNumber":35,"author":{"gitId":"hhdqirui"},"content":"            FeedbackQuestionDetails feedbackQuestionDetails"},{"lineNumber":36,"author":{"gitId":"hhdqirui"},"content":"    ) {"},{"lineNumber":37,"author":{"gitId":"hhdqirui"},"content":"        super(feedbackSession, questionNumber, description, giverType, recipientType,"},{"lineNumber":38,"author":{"gitId":"hhdqirui"},"content":"                numOfEntitiesToGiveFeedbackTo, showResponsesTo, showGiverNameTo, showRecipientNameTo);"},{"lineNumber":39,"author":{"gitId":"hhdqirui"},"content":"        setFeedBackQuestionDetails((FeedbackMcqQuestionDetails) feedbackQuestionDetails);"},{"lineNumber":40,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":41,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":42,"author":{"gitId":"hhdqirui"},"content":"    @Override"},{"lineNumber":43,"author":{"gitId":"hhdqirui"},"content":"    public FeedbackQuestionDetails getQuestionDetailsCopy() {"},{"lineNumber":44,"author":{"gitId":"hhdqirui"},"content":"        return questionDetails.getDeepCopy();"},{"lineNumber":45,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":46,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":47,"author":{"gitId":"cedricongjh"},"content":"    @Override"},{"lineNumber":48,"author":{"gitId":"cedricongjh"},"content":"    public String toString() {"},{"lineNumber":49,"author":{"gitId":"cedricongjh"},"content":"        return \"FeedbackMcqQuestion [id\u003d\" + super.getId()"},{"lineNumber":50,"author":{"gitId":"cedricongjh"},"content":"                + \", createdAt\u003d\" + super.getCreatedAt() + \", updatedAt\u003d\" + super.getUpdatedAt() + \"]\";"},{"lineNumber":51,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":52,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":53,"author":{"gitId":"cedricongjh"},"content":"    public void setFeedBackQuestionDetails(FeedbackMcqQuestionDetails questionDetails) {"},{"lineNumber":54,"author":{"gitId":"cedricongjh"},"content":"        this.questionDetails \u003d questionDetails;"},{"lineNumber":55,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":56,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":57,"author":{"gitId":"cedricongjh"},"content":"    public FeedbackMcqQuestionDetails getFeedbackQuestionDetails() {"},{"lineNumber":58,"author":{"gitId":"cedricongjh"},"content":"        return questionDetails;"},{"lineNumber":59,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":60,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":61,"author":{"gitId":"cedricongjh"},"content":"    /**"},{"lineNumber":62,"author":{"gitId":"cedricongjh"},"content":"     * Converter for FeedbackMcqQuestion specific attributes."},{"lineNumber":63,"author":{"gitId":"cedricongjh"},"content":"     */"},{"lineNumber":64,"author":{"gitId":"cedricongjh"},"content":"    @Converter"},{"lineNumber":65,"author":{"gitId":"cedricongjh"},"content":"    public static class FeedbackMcqQuestionDetailsConverter"},{"lineNumber":66,"author":{"gitId":"hhdqirui"},"content":"            extends FeedbackQuestionDetailsConverter {"},{"lineNumber":67,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":68,"author":{"gitId":"cedricongjh"},"content":"}"}],"authorContributionMap":{"cedricongjh":45,"hhdqirui":23}},{"path":"src/main/java/teammates/storage/sqlentity/questions/FeedbackMsqQuestion.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"cedricongjh"},"content":"package teammates.storage.sqlentity.questions;"},{"lineNumber":2,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":3,"author":{"gitId":"hhdqirui"},"content":"import java.util.List;"},{"lineNumber":4,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":5,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.FeedbackParticipantType;"},{"lineNumber":6,"author":{"gitId":"cedricongjh"},"content":"import teammates.common.datatransfer.questions.FeedbackMsqQuestionDetails;"},{"lineNumber":7,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.questions.FeedbackQuestionDetails;"},{"lineNumber":8,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.FeedbackQuestion;"},{"lineNumber":9,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.FeedbackSession;"},{"lineNumber":10,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":11,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Column;"},{"lineNumber":12,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Convert;"},{"lineNumber":13,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Converter;"},{"lineNumber":14,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Entity;"},{"lineNumber":15,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":16,"author":{"gitId":"cedricongjh"},"content":"/**"},{"lineNumber":17,"author":{"gitId":"cedricongjh"},"content":" * Represents an msq question."},{"lineNumber":18,"author":{"gitId":"cedricongjh"},"content":" */"},{"lineNumber":19,"author":{"gitId":"cedricongjh"},"content":"@Entity"},{"lineNumber":20,"author":{"gitId":"cedricongjh"},"content":"public class FeedbackMsqQuestion extends FeedbackQuestion {"},{"lineNumber":21,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":22,"author":{"gitId":"cedricongjh"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":23,"author":{"gitId":"cedricongjh"},"content":"    @Convert(converter \u003d FeedbackMsqQuestionDetailsConverter.class)"},{"lineNumber":24,"author":{"gitId":"cedricongjh"},"content":"    private FeedbackMsqQuestionDetails questionDetails;"},{"lineNumber":25,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":26,"author":{"gitId":"cedricongjh"},"content":"    protected FeedbackMsqQuestion() {"},{"lineNumber":27,"author":{"gitId":"cedricongjh"},"content":"        // required by Hibernate"},{"lineNumber":28,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":29,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":30,"author":{"gitId":"hhdqirui"},"content":"    public FeedbackMsqQuestion("},{"lineNumber":31,"author":{"gitId":"hhdqirui"},"content":"            FeedbackSession feedbackSession, Integer questionNumber,"},{"lineNumber":32,"author":{"gitId":"hhdqirui"},"content":"            String description, FeedbackParticipantType giverType, FeedbackParticipantType recipientType,"},{"lineNumber":33,"author":{"gitId":"hhdqirui"},"content":"            Integer numOfEntitiesToGiveFeedbackTo, List\u003cFeedbackParticipantType\u003e showResponsesTo,"},{"lineNumber":34,"author":{"gitId":"hhdqirui"},"content":"            List\u003cFeedbackParticipantType\u003e showGiverNameTo, List\u003cFeedbackParticipantType\u003e showRecipientNameTo,"},{"lineNumber":35,"author":{"gitId":"hhdqirui"},"content":"            FeedbackQuestionDetails feedbackQuestionDetails"},{"lineNumber":36,"author":{"gitId":"hhdqirui"},"content":"    ) {"},{"lineNumber":37,"author":{"gitId":"hhdqirui"},"content":"        super(feedbackSession, questionNumber, description, giverType, recipientType,"},{"lineNumber":38,"author":{"gitId":"hhdqirui"},"content":"                numOfEntitiesToGiveFeedbackTo, showResponsesTo, showGiverNameTo, showRecipientNameTo);"},{"lineNumber":39,"author":{"gitId":"hhdqirui"},"content":"        setFeedBackQuestionDetails((FeedbackMsqQuestionDetails) feedbackQuestionDetails);"},{"lineNumber":40,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":41,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":42,"author":{"gitId":"hhdqirui"},"content":"    @Override"},{"lineNumber":43,"author":{"gitId":"hhdqirui"},"content":"    public FeedbackQuestionDetails getQuestionDetailsCopy() {"},{"lineNumber":44,"author":{"gitId":"hhdqirui"},"content":"        return questionDetails.getDeepCopy();"},{"lineNumber":45,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":46,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":47,"author":{"gitId":"cedricongjh"},"content":"    @Override"},{"lineNumber":48,"author":{"gitId":"cedricongjh"},"content":"    public String toString() {"},{"lineNumber":49,"author":{"gitId":"cedricongjh"},"content":"        return \"FeedbackMsqQuestion [id\u003d\" + super.getId()"},{"lineNumber":50,"author":{"gitId":"cedricongjh"},"content":"                + \", createdAt\u003d\" + super.getCreatedAt() + \", updatedAt\u003d\" + super.getUpdatedAt() + \"]\";"},{"lineNumber":51,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":52,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":53,"author":{"gitId":"cedricongjh"},"content":"    public void setFeedBackQuestionDetails(FeedbackMsqQuestionDetails questionDetails) {"},{"lineNumber":54,"author":{"gitId":"cedricongjh"},"content":"        this.questionDetails \u003d questionDetails;"},{"lineNumber":55,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":56,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":57,"author":{"gitId":"cedricongjh"},"content":"    public FeedbackMsqQuestionDetails getFeedbackQuestionDetails() {"},{"lineNumber":58,"author":{"gitId":"cedricongjh"},"content":"        return questionDetails;"},{"lineNumber":59,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":60,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":61,"author":{"gitId":"cedricongjh"},"content":"    /**"},{"lineNumber":62,"author":{"gitId":"cedricongjh"},"content":"     * Converter for FeedbackMsqQuestion specific attributes."},{"lineNumber":63,"author":{"gitId":"cedricongjh"},"content":"     */"},{"lineNumber":64,"author":{"gitId":"cedricongjh"},"content":"    @Converter"},{"lineNumber":65,"author":{"gitId":"cedricongjh"},"content":"    public static class FeedbackMsqQuestionDetailsConverter"},{"lineNumber":66,"author":{"gitId":"hhdqirui"},"content":"            extends FeedbackQuestionDetailsConverter {"},{"lineNumber":67,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":68,"author":{"gitId":"cedricongjh"},"content":"}"}],"authorContributionMap":{"cedricongjh":45,"hhdqirui":23}},{"path":"src/main/java/teammates/storage/sqlentity/questions/FeedbackNumericalScaleQuestion.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"cedricongjh"},"content":"package teammates.storage.sqlentity.questions;"},{"lineNumber":2,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":3,"author":{"gitId":"hhdqirui"},"content":"import java.util.List;"},{"lineNumber":4,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":5,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.FeedbackParticipantType;"},{"lineNumber":6,"author":{"gitId":"cedricongjh"},"content":"import teammates.common.datatransfer.questions.FeedbackNumericalScaleQuestionDetails;"},{"lineNumber":7,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.questions.FeedbackQuestionDetails;"},{"lineNumber":8,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.FeedbackQuestion;"},{"lineNumber":9,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.FeedbackSession;"},{"lineNumber":10,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":11,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Column;"},{"lineNumber":12,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Convert;"},{"lineNumber":13,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Converter;"},{"lineNumber":14,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Entity;"},{"lineNumber":15,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":16,"author":{"gitId":"cedricongjh"},"content":"/**"},{"lineNumber":17,"author":{"gitId":"cedricongjh"},"content":" * Represents a numerical scale question."},{"lineNumber":18,"author":{"gitId":"cedricongjh"},"content":" */"},{"lineNumber":19,"author":{"gitId":"cedricongjh"},"content":"@Entity"},{"lineNumber":20,"author":{"gitId":"cedricongjh"},"content":"public class FeedbackNumericalScaleQuestion extends FeedbackQuestion {"},{"lineNumber":21,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":22,"author":{"gitId":"cedricongjh"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":23,"author":{"gitId":"cedricongjh"},"content":"    @Convert(converter \u003d FeedbackNumericalScaleQuestionDetailsConverter.class)"},{"lineNumber":24,"author":{"gitId":"cedricongjh"},"content":"    private FeedbackNumericalScaleQuestionDetails questionDetails;"},{"lineNumber":25,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":26,"author":{"gitId":"cedricongjh"},"content":"    protected FeedbackNumericalScaleQuestion() {"},{"lineNumber":27,"author":{"gitId":"cedricongjh"},"content":"        // required by Hibernate"},{"lineNumber":28,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":29,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":30,"author":{"gitId":"hhdqirui"},"content":"    public FeedbackNumericalScaleQuestion("},{"lineNumber":31,"author":{"gitId":"hhdqirui"},"content":"            FeedbackSession feedbackSession, Integer questionNumber,"},{"lineNumber":32,"author":{"gitId":"hhdqirui"},"content":"            String description, FeedbackParticipantType giverType, FeedbackParticipantType recipientType,"},{"lineNumber":33,"author":{"gitId":"hhdqirui"},"content":"            Integer numOfEntitiesToGiveFeedbackTo, List\u003cFeedbackParticipantType\u003e showResponsesTo,"},{"lineNumber":34,"author":{"gitId":"hhdqirui"},"content":"            List\u003cFeedbackParticipantType\u003e showGiverNameTo, List\u003cFeedbackParticipantType\u003e showRecipientNameTo,"},{"lineNumber":35,"author":{"gitId":"hhdqirui"},"content":"            FeedbackQuestionDetails feedbackQuestionDetails"},{"lineNumber":36,"author":{"gitId":"hhdqirui"},"content":"    ) {"},{"lineNumber":37,"author":{"gitId":"hhdqirui"},"content":"        super(feedbackSession, questionNumber, description, giverType, recipientType,"},{"lineNumber":38,"author":{"gitId":"hhdqirui"},"content":"                numOfEntitiesToGiveFeedbackTo, showResponsesTo, showGiverNameTo, showRecipientNameTo);"},{"lineNumber":39,"author":{"gitId":"hhdqirui"},"content":"        setFeedBackQuestionDetails((FeedbackNumericalScaleQuestionDetails) feedbackQuestionDetails);"},{"lineNumber":40,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":41,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":42,"author":{"gitId":"hhdqirui"},"content":"    @Override"},{"lineNumber":43,"author":{"gitId":"hhdqirui"},"content":"    public FeedbackQuestionDetails getQuestionDetailsCopy() {"},{"lineNumber":44,"author":{"gitId":"hhdqirui"},"content":"        return questionDetails.getDeepCopy();"},{"lineNumber":45,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":46,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":47,"author":{"gitId":"cedricongjh"},"content":"    @Override"},{"lineNumber":48,"author":{"gitId":"cedricongjh"},"content":"    public String toString() {"},{"lineNumber":49,"author":{"gitId":"cedricongjh"},"content":"        return \"FeedbackNumericalScaleQuestion [id\u003d\" + super.getId()"},{"lineNumber":50,"author":{"gitId":"cedricongjh"},"content":"                + \", createdAt\u003d\" + super.getCreatedAt() + \", updatedAt\u003d\" + super.getUpdatedAt() + \"]\";"},{"lineNumber":51,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":52,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":53,"author":{"gitId":"cedricongjh"},"content":"    public void setFeedBackQuestionDetails(FeedbackNumericalScaleQuestionDetails questionDetails) {"},{"lineNumber":54,"author":{"gitId":"cedricongjh"},"content":"        this.questionDetails \u003d questionDetails;"},{"lineNumber":55,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":56,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":57,"author":{"gitId":"cedricongjh"},"content":"    public FeedbackNumericalScaleQuestionDetails getFeedbackQuestionDetails() {"},{"lineNumber":58,"author":{"gitId":"cedricongjh"},"content":"        return questionDetails;"},{"lineNumber":59,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":60,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":61,"author":{"gitId":"cedricongjh"},"content":"    /**"},{"lineNumber":62,"author":{"gitId":"cedricongjh"},"content":"     * Converter for FeedbackNumericalScaleQuestion specific attributes."},{"lineNumber":63,"author":{"gitId":"cedricongjh"},"content":"     */"},{"lineNumber":64,"author":{"gitId":"cedricongjh"},"content":"    @Converter"},{"lineNumber":65,"author":{"gitId":"cedricongjh"},"content":"    public static class FeedbackNumericalScaleQuestionDetailsConverter"},{"lineNumber":66,"author":{"gitId":"hhdqirui"},"content":"            extends FeedbackQuestionDetailsConverter {"},{"lineNumber":67,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":68,"author":{"gitId":"cedricongjh"},"content":"}"}],"authorContributionMap":{"cedricongjh":45,"hhdqirui":23}},{"path":"src/main/java/teammates/storage/sqlentity/questions/FeedbackRankOptionsQuestion.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"cedricongjh"},"content":"package teammates.storage.sqlentity.questions;"},{"lineNumber":2,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":3,"author":{"gitId":"hhdqirui"},"content":"import java.util.List;"},{"lineNumber":4,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":5,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.FeedbackParticipantType;"},{"lineNumber":6,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.questions.FeedbackQuestionDetails;"},{"lineNumber":7,"author":{"gitId":"cedricongjh"},"content":"import teammates.common.datatransfer.questions.FeedbackRankOptionsQuestionDetails;"},{"lineNumber":8,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.FeedbackQuestion;"},{"lineNumber":9,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.FeedbackSession;"},{"lineNumber":10,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":11,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Column;"},{"lineNumber":12,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Convert;"},{"lineNumber":13,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Converter;"},{"lineNumber":14,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Entity;"},{"lineNumber":15,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":16,"author":{"gitId":"cedricongjh"},"content":"/**"},{"lineNumber":17,"author":{"gitId":"cedricongjh"},"content":" * Represents a rank options question."},{"lineNumber":18,"author":{"gitId":"cedricongjh"},"content":" */"},{"lineNumber":19,"author":{"gitId":"cedricongjh"},"content":"@Entity"},{"lineNumber":20,"author":{"gitId":"cedricongjh"},"content":"public class FeedbackRankOptionsQuestion extends FeedbackQuestion {"},{"lineNumber":21,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":22,"author":{"gitId":"cedricongjh"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":23,"author":{"gitId":"cedricongjh"},"content":"    @Convert(converter \u003d FeedbackRankOptionsQuestionDetailsConverter.class)"},{"lineNumber":24,"author":{"gitId":"cedricongjh"},"content":"    private FeedbackRankOptionsQuestionDetails questionDetails;"},{"lineNumber":25,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":26,"author":{"gitId":"cedricongjh"},"content":"    protected FeedbackRankOptionsQuestion() {"},{"lineNumber":27,"author":{"gitId":"cedricongjh"},"content":"        // required by Hibernate"},{"lineNumber":28,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":29,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":30,"author":{"gitId":"hhdqirui"},"content":"    public FeedbackRankOptionsQuestion("},{"lineNumber":31,"author":{"gitId":"hhdqirui"},"content":"            FeedbackSession feedbackSession, Integer questionNumber,"},{"lineNumber":32,"author":{"gitId":"hhdqirui"},"content":"            String description, FeedbackParticipantType giverType, FeedbackParticipantType recipientType,"},{"lineNumber":33,"author":{"gitId":"hhdqirui"},"content":"            Integer numOfEntitiesToGiveFeedbackTo, List\u003cFeedbackParticipantType\u003e showResponsesTo,"},{"lineNumber":34,"author":{"gitId":"hhdqirui"},"content":"            List\u003cFeedbackParticipantType\u003e showGiverNameTo, List\u003cFeedbackParticipantType\u003e showRecipientNameTo,"},{"lineNumber":35,"author":{"gitId":"hhdqirui"},"content":"            FeedbackQuestionDetails feedbackQuestionDetails"},{"lineNumber":36,"author":{"gitId":"hhdqirui"},"content":"    ) {"},{"lineNumber":37,"author":{"gitId":"hhdqirui"},"content":"        super(feedbackSession, questionNumber, description, giverType, recipientType,"},{"lineNumber":38,"author":{"gitId":"hhdqirui"},"content":"                numOfEntitiesToGiveFeedbackTo, showResponsesTo, showGiverNameTo, showRecipientNameTo);"},{"lineNumber":39,"author":{"gitId":"hhdqirui"},"content":"        setFeedBackQuestionDetails((FeedbackRankOptionsQuestionDetails) feedbackQuestionDetails);"},{"lineNumber":40,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":41,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":42,"author":{"gitId":"hhdqirui"},"content":"    @Override"},{"lineNumber":43,"author":{"gitId":"hhdqirui"},"content":"    public FeedbackQuestionDetails getQuestionDetailsCopy() {"},{"lineNumber":44,"author":{"gitId":"hhdqirui"},"content":"        return questionDetails.getDeepCopy();"},{"lineNumber":45,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":46,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":47,"author":{"gitId":"cedricongjh"},"content":"    @Override"},{"lineNumber":48,"author":{"gitId":"cedricongjh"},"content":"    public String toString() {"},{"lineNumber":49,"author":{"gitId":"cedricongjh"},"content":"        return \"FeedbackRankOptionsQuestion [id\u003d\" + super.getId()"},{"lineNumber":50,"author":{"gitId":"cedricongjh"},"content":"                + \", createdAt\u003d\" + super.getCreatedAt() + \", updatedAt\u003d\" + super.getUpdatedAt() + \"]\";"},{"lineNumber":51,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":52,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":53,"author":{"gitId":"cedricongjh"},"content":"    public void setFeedBackQuestionDetails(FeedbackRankOptionsQuestionDetails questionDetails) {"},{"lineNumber":54,"author":{"gitId":"cedricongjh"},"content":"        this.questionDetails \u003d questionDetails;"},{"lineNumber":55,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":56,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":57,"author":{"gitId":"cedricongjh"},"content":"    public FeedbackRankOptionsQuestionDetails getFeedbackQuestionDetails() {"},{"lineNumber":58,"author":{"gitId":"cedricongjh"},"content":"        return questionDetails;"},{"lineNumber":59,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":60,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":61,"author":{"gitId":"cedricongjh"},"content":"    /**"},{"lineNumber":62,"author":{"gitId":"cedricongjh"},"content":"     * Converter for FeedbackRankOptionsQuestion specific attributes."},{"lineNumber":63,"author":{"gitId":"cedricongjh"},"content":"     */"},{"lineNumber":64,"author":{"gitId":"cedricongjh"},"content":"    @Converter"},{"lineNumber":65,"author":{"gitId":"cedricongjh"},"content":"    public static class FeedbackRankOptionsQuestionDetailsConverter"},{"lineNumber":66,"author":{"gitId":"hhdqirui"},"content":"            extends FeedbackQuestionDetailsConverter {"},{"lineNumber":67,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":68,"author":{"gitId":"cedricongjh"},"content":"}"}],"authorContributionMap":{"cedricongjh":45,"hhdqirui":23}},{"path":"src/main/java/teammates/storage/sqlentity/questions/FeedbackRankRecipientsQuestion.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"cedricongjh"},"content":"package teammates.storage.sqlentity.questions;"},{"lineNumber":2,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":3,"author":{"gitId":"hhdqirui"},"content":"import java.util.List;"},{"lineNumber":4,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":5,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.FeedbackParticipantType;"},{"lineNumber":6,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.questions.FeedbackQuestionDetails;"},{"lineNumber":7,"author":{"gitId":"cedricongjh"},"content":"import teammates.common.datatransfer.questions.FeedbackRankRecipientsQuestionDetails;"},{"lineNumber":8,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.FeedbackQuestion;"},{"lineNumber":9,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.FeedbackSession;"},{"lineNumber":10,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":11,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Column;"},{"lineNumber":12,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Convert;"},{"lineNumber":13,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Converter;"},{"lineNumber":14,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Entity;"},{"lineNumber":15,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":16,"author":{"gitId":"cedricongjh"},"content":"/**"},{"lineNumber":17,"author":{"gitId":"cedricongjh"},"content":" * Represents a rank recipients question."},{"lineNumber":18,"author":{"gitId":"cedricongjh"},"content":" */"},{"lineNumber":19,"author":{"gitId":"cedricongjh"},"content":"@Entity"},{"lineNumber":20,"author":{"gitId":"cedricongjh"},"content":"public class FeedbackRankRecipientsQuestion extends FeedbackQuestion {"},{"lineNumber":21,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":22,"author":{"gitId":"cedricongjh"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":23,"author":{"gitId":"cedricongjh"},"content":"    @Convert(converter \u003d FeedbackRankRecipientsQuestionDetailsConverter.class)"},{"lineNumber":24,"author":{"gitId":"cedricongjh"},"content":"    private FeedbackRankRecipientsQuestionDetails questionDetails;"},{"lineNumber":25,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":26,"author":{"gitId":"cedricongjh"},"content":"    protected FeedbackRankRecipientsQuestion() {"},{"lineNumber":27,"author":{"gitId":"cedricongjh"},"content":"        // required by Hibernate"},{"lineNumber":28,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":29,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":30,"author":{"gitId":"hhdqirui"},"content":"    public FeedbackRankRecipientsQuestion("},{"lineNumber":31,"author":{"gitId":"hhdqirui"},"content":"            FeedbackSession feedbackSession, Integer questionNumber,"},{"lineNumber":32,"author":{"gitId":"hhdqirui"},"content":"            String description, FeedbackParticipantType giverType, FeedbackParticipantType recipientType,"},{"lineNumber":33,"author":{"gitId":"hhdqirui"},"content":"            Integer numOfEntitiesToGiveFeedbackTo, List\u003cFeedbackParticipantType\u003e showResponsesTo,"},{"lineNumber":34,"author":{"gitId":"hhdqirui"},"content":"            List\u003cFeedbackParticipantType\u003e showGiverNameTo, List\u003cFeedbackParticipantType\u003e showRecipientNameTo,"},{"lineNumber":35,"author":{"gitId":"hhdqirui"},"content":"            FeedbackQuestionDetails feedbackQuestionDetails"},{"lineNumber":36,"author":{"gitId":"hhdqirui"},"content":"    ) {"},{"lineNumber":37,"author":{"gitId":"hhdqirui"},"content":"        super(feedbackSession, questionNumber, description, giverType, recipientType,"},{"lineNumber":38,"author":{"gitId":"hhdqirui"},"content":"                numOfEntitiesToGiveFeedbackTo, showResponsesTo, showGiverNameTo, showRecipientNameTo);"},{"lineNumber":39,"author":{"gitId":"hhdqirui"},"content":"        setFeedBackQuestionDetails((FeedbackRankRecipientsQuestionDetails) feedbackQuestionDetails);"},{"lineNumber":40,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":41,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":42,"author":{"gitId":"hhdqirui"},"content":"    @Override"},{"lineNumber":43,"author":{"gitId":"hhdqirui"},"content":"    public FeedbackQuestionDetails getQuestionDetailsCopy() {"},{"lineNumber":44,"author":{"gitId":"hhdqirui"},"content":"        return questionDetails.getDeepCopy();"},{"lineNumber":45,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":46,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":47,"author":{"gitId":"cedricongjh"},"content":"    @Override"},{"lineNumber":48,"author":{"gitId":"cedricongjh"},"content":"    public String toString() {"},{"lineNumber":49,"author":{"gitId":"cedricongjh"},"content":"        return \"FeedbackRankRecipientsQuestion [id\u003d\" + super.getId()"},{"lineNumber":50,"author":{"gitId":"cedricongjh"},"content":"                + \", createdAt\u003d\" + super.getCreatedAt() + \", updatedAt\u003d\" + super.getUpdatedAt() + \"]\";"},{"lineNumber":51,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":52,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":53,"author":{"gitId":"cedricongjh"},"content":"    public void setFeedBackQuestionDetails(FeedbackRankRecipientsQuestionDetails questionDetails) {"},{"lineNumber":54,"author":{"gitId":"cedricongjh"},"content":"        this.questionDetails \u003d questionDetails;"},{"lineNumber":55,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":56,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":57,"author":{"gitId":"cedricongjh"},"content":"    public FeedbackRankRecipientsQuestionDetails getFeedbackQuestionDetails() {"},{"lineNumber":58,"author":{"gitId":"cedricongjh"},"content":"        return questionDetails;"},{"lineNumber":59,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":60,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":61,"author":{"gitId":"cedricongjh"},"content":"    /**"},{"lineNumber":62,"author":{"gitId":"cedricongjh"},"content":"     * Converter for FeedbackRankaRecipientsQuestion specific attributes."},{"lineNumber":63,"author":{"gitId":"cedricongjh"},"content":"     */"},{"lineNumber":64,"author":{"gitId":"cedricongjh"},"content":"    @Converter"},{"lineNumber":65,"author":{"gitId":"cedricongjh"},"content":"    public static class FeedbackRankRecipientsQuestionDetailsConverter"},{"lineNumber":66,"author":{"gitId":"hhdqirui"},"content":"            extends FeedbackQuestionDetailsConverter {"},{"lineNumber":67,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":68,"author":{"gitId":"cedricongjh"},"content":"}"}],"authorContributionMap":{"cedricongjh":45,"hhdqirui":23}},{"path":"src/main/java/teammates/storage/sqlentity/questions/FeedbackRubricQuestion.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"cedricongjh"},"content":"package teammates.storage.sqlentity.questions;"},{"lineNumber":2,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":3,"author":{"gitId":"hhdqirui"},"content":"import java.util.List;"},{"lineNumber":4,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":5,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.FeedbackParticipantType;"},{"lineNumber":6,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.questions.FeedbackQuestionDetails;"},{"lineNumber":7,"author":{"gitId":"cedricongjh"},"content":"import teammates.common.datatransfer.questions.FeedbackRubricQuestionDetails;"},{"lineNumber":8,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.FeedbackQuestion;"},{"lineNumber":9,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.FeedbackSession;"},{"lineNumber":10,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":11,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Column;"},{"lineNumber":12,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Convert;"},{"lineNumber":13,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Converter;"},{"lineNumber":14,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Entity;"},{"lineNumber":15,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":16,"author":{"gitId":"cedricongjh"},"content":"/**"},{"lineNumber":17,"author":{"gitId":"cedricongjh"},"content":" * Represents a rubric question."},{"lineNumber":18,"author":{"gitId":"cedricongjh"},"content":" */"},{"lineNumber":19,"author":{"gitId":"cedricongjh"},"content":"@Entity"},{"lineNumber":20,"author":{"gitId":"cedricongjh"},"content":"public class FeedbackRubricQuestion extends FeedbackQuestion {"},{"lineNumber":21,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":22,"author":{"gitId":"cedricongjh"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":23,"author":{"gitId":"cedricongjh"},"content":"    @Convert(converter \u003d FeedbackRubricQuestionDetailsConverter.class)"},{"lineNumber":24,"author":{"gitId":"cedricongjh"},"content":"    private FeedbackRubricQuestionDetails questionDetails;"},{"lineNumber":25,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":26,"author":{"gitId":"cedricongjh"},"content":"    protected FeedbackRubricQuestion() {"},{"lineNumber":27,"author":{"gitId":"cedricongjh"},"content":"        // required by Hibernate"},{"lineNumber":28,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":29,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":30,"author":{"gitId":"hhdqirui"},"content":"    public FeedbackRubricQuestion("},{"lineNumber":31,"author":{"gitId":"hhdqirui"},"content":"            FeedbackSession feedbackSession, Integer questionNumber,"},{"lineNumber":32,"author":{"gitId":"hhdqirui"},"content":"            String description, FeedbackParticipantType giverType, FeedbackParticipantType recipientType,"},{"lineNumber":33,"author":{"gitId":"hhdqirui"},"content":"            Integer numOfEntitiesToGiveFeedbackTo, List\u003cFeedbackParticipantType\u003e showResponsesTo,"},{"lineNumber":34,"author":{"gitId":"hhdqirui"},"content":"            List\u003cFeedbackParticipantType\u003e showGiverNameTo, List\u003cFeedbackParticipantType\u003e showRecipientNameTo,"},{"lineNumber":35,"author":{"gitId":"hhdqirui"},"content":"            FeedbackQuestionDetails feedbackQuestionDetails"},{"lineNumber":36,"author":{"gitId":"hhdqirui"},"content":"    ) {"},{"lineNumber":37,"author":{"gitId":"hhdqirui"},"content":"        super(feedbackSession, questionNumber, description, giverType, recipientType,"},{"lineNumber":38,"author":{"gitId":"hhdqirui"},"content":"                numOfEntitiesToGiveFeedbackTo, showResponsesTo, showGiverNameTo, showRecipientNameTo);"},{"lineNumber":39,"author":{"gitId":"hhdqirui"},"content":"        setFeedBackQuestionDetails((FeedbackRubricQuestionDetails) feedbackQuestionDetails);"},{"lineNumber":40,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":41,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":42,"author":{"gitId":"hhdqirui"},"content":"    @Override"},{"lineNumber":43,"author":{"gitId":"hhdqirui"},"content":"    public FeedbackQuestionDetails getQuestionDetailsCopy() {"},{"lineNumber":44,"author":{"gitId":"hhdqirui"},"content":"        return questionDetails.getDeepCopy();"},{"lineNumber":45,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":46,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":47,"author":{"gitId":"cedricongjh"},"content":"    @Override"},{"lineNumber":48,"author":{"gitId":"cedricongjh"},"content":"    public String toString() {"},{"lineNumber":49,"author":{"gitId":"cedricongjh"},"content":"        return \"FeedbackRubricQuestion [id\u003d\" + super.getId()"},{"lineNumber":50,"author":{"gitId":"cedricongjh"},"content":"                + \", createdAt\u003d\" + super.getCreatedAt() + \", updatedAt\u003d\" + super.getUpdatedAt() + \"]\";"},{"lineNumber":51,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":52,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":53,"author":{"gitId":"cedricongjh"},"content":"    public void setFeedBackQuestionDetails(FeedbackRubricQuestionDetails questionDetails) {"},{"lineNumber":54,"author":{"gitId":"cedricongjh"},"content":"        this.questionDetails \u003d questionDetails;"},{"lineNumber":55,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":56,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":57,"author":{"gitId":"cedricongjh"},"content":"    public FeedbackRubricQuestionDetails getFeedbackQuestionDetails() {"},{"lineNumber":58,"author":{"gitId":"cedricongjh"},"content":"        return questionDetails;"},{"lineNumber":59,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":60,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":61,"author":{"gitId":"cedricongjh"},"content":"    /**"},{"lineNumber":62,"author":{"gitId":"cedricongjh"},"content":"     * Converter for FeedbackRubricQuestion specific attributes."},{"lineNumber":63,"author":{"gitId":"cedricongjh"},"content":"     */"},{"lineNumber":64,"author":{"gitId":"cedricongjh"},"content":"    @Converter"},{"lineNumber":65,"author":{"gitId":"cedricongjh"},"content":"    public static class FeedbackRubricQuestionDetailsConverter"},{"lineNumber":66,"author":{"gitId":"hhdqirui"},"content":"            extends FeedbackQuestionDetailsConverter {"},{"lineNumber":67,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":68,"author":{"gitId":"cedricongjh"},"content":"}"}],"authorContributionMap":{"cedricongjh":45,"hhdqirui":23}},{"path":"src/main/java/teammates/storage/sqlentity/questions/FeedbackTextQuestion.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"cedricongjh"},"content":"package teammates.storage.sqlentity.questions;"},{"lineNumber":2,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":3,"author":{"gitId":"hhdqirui"},"content":"import java.util.List;"},{"lineNumber":4,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":5,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.FeedbackParticipantType;"},{"lineNumber":6,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.questions.FeedbackQuestionDetails;"},{"lineNumber":7,"author":{"gitId":"cedricongjh"},"content":"import teammates.common.datatransfer.questions.FeedbackTextQuestionDetails;"},{"lineNumber":8,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.FeedbackQuestion;"},{"lineNumber":9,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.FeedbackSession;"},{"lineNumber":10,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":11,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Column;"},{"lineNumber":12,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Convert;"},{"lineNumber":13,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Converter;"},{"lineNumber":14,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Entity;"},{"lineNumber":15,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":16,"author":{"gitId":"cedricongjh"},"content":"/**"},{"lineNumber":17,"author":{"gitId":"cedricongjh"},"content":" * Represents a text question."},{"lineNumber":18,"author":{"gitId":"cedricongjh"},"content":" */"},{"lineNumber":19,"author":{"gitId":"cedricongjh"},"content":"@Entity"},{"lineNumber":20,"author":{"gitId":"cedricongjh"},"content":"public class FeedbackTextQuestion extends FeedbackQuestion {"},{"lineNumber":21,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":22,"author":{"gitId":"cedricongjh"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":23,"author":{"gitId":"cedricongjh"},"content":"    @Convert(converter \u003d FeedbackTextQuestionDetailsConverter.class)"},{"lineNumber":24,"author":{"gitId":"cedricongjh"},"content":"    private FeedbackTextQuestionDetails questionDetails;"},{"lineNumber":25,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":26,"author":{"gitId":"cedricongjh"},"content":"    protected FeedbackTextQuestion() {"},{"lineNumber":27,"author":{"gitId":"cedricongjh"},"content":"        // required by Hibernate"},{"lineNumber":28,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":29,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":30,"author":{"gitId":"hhdqirui"},"content":"    public FeedbackTextQuestion("},{"lineNumber":31,"author":{"gitId":"hhdqirui"},"content":"            FeedbackSession feedbackSession, Integer questionNumber,"},{"lineNumber":32,"author":{"gitId":"hhdqirui"},"content":"            String description, FeedbackParticipantType giverType, FeedbackParticipantType recipientType,"},{"lineNumber":33,"author":{"gitId":"hhdqirui"},"content":"            Integer numOfEntitiesToGiveFeedbackTo, List\u003cFeedbackParticipantType\u003e showResponsesTo,"},{"lineNumber":34,"author":{"gitId":"hhdqirui"},"content":"            List\u003cFeedbackParticipantType\u003e showGiverNameTo, List\u003cFeedbackParticipantType\u003e showRecipientNameTo,"},{"lineNumber":35,"author":{"gitId":"hhdqirui"},"content":"            FeedbackQuestionDetails feedbackQuestionDetails"},{"lineNumber":36,"author":{"gitId":"hhdqirui"},"content":"    ) {"},{"lineNumber":37,"author":{"gitId":"hhdqirui"},"content":"        super(feedbackSession, questionNumber, description, giverType, recipientType,"},{"lineNumber":38,"author":{"gitId":"hhdqirui"},"content":"                numOfEntitiesToGiveFeedbackTo, showResponsesTo, showGiverNameTo, showRecipientNameTo);"},{"lineNumber":39,"author":{"gitId":"hhdqirui"},"content":"        setFeedBackQuestionDetails((FeedbackTextQuestionDetails) feedbackQuestionDetails);"},{"lineNumber":40,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":41,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":42,"author":{"gitId":"hhdqirui"},"content":"    @Override"},{"lineNumber":43,"author":{"gitId":"hhdqirui"},"content":"    public FeedbackQuestionDetails getQuestionDetailsCopy() {"},{"lineNumber":44,"author":{"gitId":"hhdqirui"},"content":"        return questionDetails.getDeepCopy();"},{"lineNumber":45,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":46,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":47,"author":{"gitId":"cedricongjh"},"content":"    @Override"},{"lineNumber":48,"author":{"gitId":"cedricongjh"},"content":"    public String toString() {"},{"lineNumber":49,"author":{"gitId":"cedricongjh"},"content":"        return \"FeedbackTextQuestion [id\u003d\" + super.getId() + \", createdAt\u003d\" + super.getCreatedAt()"},{"lineNumber":50,"author":{"gitId":"cedricongjh"},"content":"                + \", updatedAt\u003d\" + super.getUpdatedAt() + \"]\";"},{"lineNumber":51,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":52,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":53,"author":{"gitId":"cedricongjh"},"content":"    public void setFeedBackQuestionDetails(FeedbackTextQuestionDetails questionDetails) {"},{"lineNumber":54,"author":{"gitId":"cedricongjh"},"content":"        this.questionDetails \u003d questionDetails;"},{"lineNumber":55,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":56,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":57,"author":{"gitId":"cedricongjh"},"content":"    public FeedbackTextQuestionDetails getFeedbackQuestionDetails() {"},{"lineNumber":58,"author":{"gitId":"cedricongjh"},"content":"        return questionDetails;"},{"lineNumber":59,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":60,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":61,"author":{"gitId":"cedricongjh"},"content":"    /**"},{"lineNumber":62,"author":{"gitId":"cedricongjh"},"content":"     * Converter for FeedbackTextQuestion specific attributes."},{"lineNumber":63,"author":{"gitId":"cedricongjh"},"content":"     */"},{"lineNumber":64,"author":{"gitId":"cedricongjh"},"content":"    @Converter"},{"lineNumber":65,"author":{"gitId":"cedricongjh"},"content":"    public static class FeedbackTextQuestionDetailsConverter"},{"lineNumber":66,"author":{"gitId":"hhdqirui"},"content":"            extends FeedbackQuestionDetailsConverter {"},{"lineNumber":67,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":68,"author":{"gitId":"cedricongjh"},"content":"}"}],"authorContributionMap":{"cedricongjh":45,"hhdqirui":23}},{"path":"src/main/java/teammates/storage/sqlentity/questions/package-info.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"cedricongjh"},"content":"/**"},{"lineNumber":2,"author":{"gitId":"cedricongjh"},"content":" * Contains FeedbackQuestion subclass entities."},{"lineNumber":3,"author":{"gitId":"cedricongjh"},"content":" */"},{"lineNumber":4,"author":{"gitId":"cedricongjh"},"content":"package teammates.storage.sqlentity.questions;"}],"authorContributionMap":{"cedricongjh":4}},{"path":"src/main/java/teammates/storage/sqlentity/responses/FeedbackConstantSumResponse.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"cedricongjh"},"content":"package teammates.storage.sqlentity.responses;"},{"lineNumber":2,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":3,"author":{"gitId":"cedricongjh"},"content":"import teammates.common.datatransfer.questions.FeedbackConstantSumResponseDetails;"},{"lineNumber":4,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.FeedbackResponse;"},{"lineNumber":5,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":6,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Column;"},{"lineNumber":7,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Convert;"},{"lineNumber":8,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Converter;"},{"lineNumber":9,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Entity;"},{"lineNumber":10,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":11,"author":{"gitId":"cedricongjh"},"content":"/**"},{"lineNumber":12,"author":{"gitId":"cedricongjh"},"content":" * Represents a feedback constant sum response."},{"lineNumber":13,"author":{"gitId":"cedricongjh"},"content":" */"},{"lineNumber":14,"author":{"gitId":"cedricongjh"},"content":"@Entity"},{"lineNumber":15,"author":{"gitId":"cedricongjh"},"content":"public class FeedbackConstantSumResponse extends FeedbackResponse {"},{"lineNumber":16,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":17,"author":{"gitId":"cedricongjh"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":18,"author":{"gitId":"cedricongjh"},"content":"    @Convert(converter \u003d FeedbackConstantSumResponseDetailsConverter.class)"},{"lineNumber":19,"author":{"gitId":"cedricongjh"},"content":"    private FeedbackConstantSumResponseDetails answer;"},{"lineNumber":20,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":21,"author":{"gitId":"cedricongjh"},"content":"    protected FeedbackConstantSumResponse() {"},{"lineNumber":22,"author":{"gitId":"cedricongjh"},"content":"        // required by Hibernate"},{"lineNumber":23,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":24,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":25,"author":{"gitId":"cedricongjh"},"content":"    public FeedbackConstantSumResponseDetails getAnswer() {"},{"lineNumber":26,"author":{"gitId":"cedricongjh"},"content":"        return answer;"},{"lineNumber":27,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":28,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":29,"author":{"gitId":"cedricongjh"},"content":"    public void setAnswer(FeedbackConstantSumResponseDetails answer) {"},{"lineNumber":30,"author":{"gitId":"cedricongjh"},"content":"        this.answer \u003d answer;"},{"lineNumber":31,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":32,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":33,"author":{"gitId":"cedricongjh"},"content":"    @Override"},{"lineNumber":34,"author":{"gitId":"cedricongjh"},"content":"    public String toString() {"},{"lineNumber":35,"author":{"gitId":"cedricongjh"},"content":"        return \"FeedbackConstantSumResponse [id\u003d\" + super.getId()"},{"lineNumber":36,"author":{"gitId":"cedricongjh"},"content":"            + \", createdAt\u003d\" + super.getCreatedAt() + \", updatedAt\u003d\" + super.getUpdatedAt() + \"]\";"},{"lineNumber":37,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":38,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":39,"author":{"gitId":"cedricongjh"},"content":"    /**"},{"lineNumber":40,"author":{"gitId":"cedricongjh"},"content":"     * Converter for FeedbackConstantSumResponse specific attributes."},{"lineNumber":41,"author":{"gitId":"cedricongjh"},"content":"     */"},{"lineNumber":42,"author":{"gitId":"cedricongjh"},"content":"    @Converter"},{"lineNumber":43,"author":{"gitId":"cedricongjh"},"content":"    public static class FeedbackConstantSumResponseDetailsConverter"},{"lineNumber":44,"author":{"gitId":"hhdqirui"},"content":"            extends FeedbackResponseDetailsConverter {"},{"lineNumber":45,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":46,"author":{"gitId":"cedricongjh"},"content":"}"}],"authorContributionMap":{"cedricongjh":45,"hhdqirui":1}},{"path":"src/main/java/teammates/storage/sqlentity/responses/FeedbackContributionResponse.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"cedricongjh"},"content":"package teammates.storage.sqlentity.responses;"},{"lineNumber":2,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":3,"author":{"gitId":"cedricongjh"},"content":"import teammates.common.datatransfer.questions.FeedbackContributionResponseDetails;"},{"lineNumber":4,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.FeedbackResponse;"},{"lineNumber":5,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":6,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Column;"},{"lineNumber":7,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Convert;"},{"lineNumber":8,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Converter;"},{"lineNumber":9,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Entity;"},{"lineNumber":10,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":11,"author":{"gitId":"cedricongjh"},"content":"/**"},{"lineNumber":12,"author":{"gitId":"cedricongjh"},"content":" * Represents a feedback contribution response."},{"lineNumber":13,"author":{"gitId":"cedricongjh"},"content":" */"},{"lineNumber":14,"author":{"gitId":"cedricongjh"},"content":"@Entity"},{"lineNumber":15,"author":{"gitId":"cedricongjh"},"content":"public class FeedbackContributionResponse extends FeedbackResponse {"},{"lineNumber":16,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":17,"author":{"gitId":"cedricongjh"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":18,"author":{"gitId":"cedricongjh"},"content":"    @Convert(converter \u003d FeedbackContributionResponseDetailsConverter.class)"},{"lineNumber":19,"author":{"gitId":"cedricongjh"},"content":"    private FeedbackContributionResponseDetails answer;"},{"lineNumber":20,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":21,"author":{"gitId":"cedricongjh"},"content":"    protected FeedbackContributionResponse() {"},{"lineNumber":22,"author":{"gitId":"cedricongjh"},"content":"        // required by Hibernate"},{"lineNumber":23,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":24,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":25,"author":{"gitId":"cedricongjh"},"content":"    public FeedbackContributionResponseDetails getAnswer() {"},{"lineNumber":26,"author":{"gitId":"cedricongjh"},"content":"        return answer;"},{"lineNumber":27,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":28,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":29,"author":{"gitId":"cedricongjh"},"content":"    public void setAnswer(FeedbackContributionResponseDetails answer) {"},{"lineNumber":30,"author":{"gitId":"cedricongjh"},"content":"        this.answer \u003d answer;"},{"lineNumber":31,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":32,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":33,"author":{"gitId":"cedricongjh"},"content":"    @Override"},{"lineNumber":34,"author":{"gitId":"cedricongjh"},"content":"    public String toString() {"},{"lineNumber":35,"author":{"gitId":"cedricongjh"},"content":"        return \"FeedbackContributionResponse [id\u003d\" + super.getId()"},{"lineNumber":36,"author":{"gitId":"cedricongjh"},"content":"            + \", createdAt\u003d\" + super.getCreatedAt() + \", updatedAt\u003d\" + super.getUpdatedAt() + \"]\";"},{"lineNumber":37,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":38,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":39,"author":{"gitId":"cedricongjh"},"content":"    /**"},{"lineNumber":40,"author":{"gitId":"cedricongjh"},"content":"     * Converter for FeedbackContributionResponse specific attributes."},{"lineNumber":41,"author":{"gitId":"cedricongjh"},"content":"     */"},{"lineNumber":42,"author":{"gitId":"cedricongjh"},"content":"    @Converter"},{"lineNumber":43,"author":{"gitId":"cedricongjh"},"content":"    public static class FeedbackContributionResponseDetailsConverter"},{"lineNumber":44,"author":{"gitId":"hhdqirui"},"content":"            extends FeedbackResponseDetailsConverter {"},{"lineNumber":45,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":46,"author":{"gitId":"cedricongjh"},"content":"}"}],"authorContributionMap":{"cedricongjh":45,"hhdqirui":1}},{"path":"src/main/java/teammates/storage/sqlentity/responses/FeedbackMcqResponse.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"cedricongjh"},"content":"package teammates.storage.sqlentity.responses;"},{"lineNumber":2,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":3,"author":{"gitId":"cedricongjh"},"content":"import teammates.common.datatransfer.questions.FeedbackMcqResponseDetails;"},{"lineNumber":4,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.FeedbackResponse;"},{"lineNumber":5,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":6,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Column;"},{"lineNumber":7,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Convert;"},{"lineNumber":8,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Converter;"},{"lineNumber":9,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Entity;"},{"lineNumber":10,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":11,"author":{"gitId":"cedricongjh"},"content":"/**"},{"lineNumber":12,"author":{"gitId":"cedricongjh"},"content":" * Represents a feedback mcq response."},{"lineNumber":13,"author":{"gitId":"cedricongjh"},"content":" */"},{"lineNumber":14,"author":{"gitId":"cedricongjh"},"content":"@Entity"},{"lineNumber":15,"author":{"gitId":"cedricongjh"},"content":"public class FeedbackMcqResponse extends FeedbackResponse {"},{"lineNumber":16,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":17,"author":{"gitId":"cedricongjh"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":18,"author":{"gitId":"cedricongjh"},"content":"    @Convert(converter \u003d FeedbackMcqResponseDetailsConverter.class)"},{"lineNumber":19,"author":{"gitId":"cedricongjh"},"content":"    private FeedbackMcqResponseDetails answer;"},{"lineNumber":20,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":21,"author":{"gitId":"cedricongjh"},"content":"    protected FeedbackMcqResponse() {"},{"lineNumber":22,"author":{"gitId":"cedricongjh"},"content":"        // required by Hibernate"},{"lineNumber":23,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":24,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":25,"author":{"gitId":"cedricongjh"},"content":"    public FeedbackMcqResponseDetails getAnswer() {"},{"lineNumber":26,"author":{"gitId":"cedricongjh"},"content":"        return answer;"},{"lineNumber":27,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":28,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":29,"author":{"gitId":"cedricongjh"},"content":"    public void setAnswer(FeedbackMcqResponseDetails answer) {"},{"lineNumber":30,"author":{"gitId":"cedricongjh"},"content":"        this.answer \u003d answer;"},{"lineNumber":31,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":32,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":33,"author":{"gitId":"cedricongjh"},"content":"    @Override"},{"lineNumber":34,"author":{"gitId":"cedricongjh"},"content":"    public String toString() {"},{"lineNumber":35,"author":{"gitId":"cedricongjh"},"content":"        return \"FeedbackMcqResponse [id\u003d\" + super.getId()"},{"lineNumber":36,"author":{"gitId":"cedricongjh"},"content":"            + \", createdAt\u003d\" + super.getCreatedAt() + \", updatedAt\u003d\" + super.getUpdatedAt() + \"]\";"},{"lineNumber":37,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":38,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":39,"author":{"gitId":"cedricongjh"},"content":"    /**"},{"lineNumber":40,"author":{"gitId":"cedricongjh"},"content":"     * Converter for FeedbackMcqResponse specific attributes."},{"lineNumber":41,"author":{"gitId":"cedricongjh"},"content":"     */"},{"lineNumber":42,"author":{"gitId":"cedricongjh"},"content":"    @Converter"},{"lineNumber":43,"author":{"gitId":"cedricongjh"},"content":"    public static class FeedbackMcqResponseDetailsConverter"},{"lineNumber":44,"author":{"gitId":"hhdqirui"},"content":"            extends FeedbackResponseDetailsConverter {"},{"lineNumber":45,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":46,"author":{"gitId":"cedricongjh"},"content":"}"}],"authorContributionMap":{"cedricongjh":45,"hhdqirui":1}},{"path":"src/main/java/teammates/storage/sqlentity/responses/FeedbackMsqResponse.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"cedricongjh"},"content":"package teammates.storage.sqlentity.responses;"},{"lineNumber":2,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":3,"author":{"gitId":"cedricongjh"},"content":"import teammates.common.datatransfer.questions.FeedbackMsqResponseDetails;"},{"lineNumber":4,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.FeedbackResponse;"},{"lineNumber":5,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":6,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Column;"},{"lineNumber":7,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Convert;"},{"lineNumber":8,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Converter;"},{"lineNumber":9,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Entity;"},{"lineNumber":10,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":11,"author":{"gitId":"cedricongjh"},"content":"/**"},{"lineNumber":12,"author":{"gitId":"cedricongjh"},"content":" * Represents a feedback msq response."},{"lineNumber":13,"author":{"gitId":"cedricongjh"},"content":" */"},{"lineNumber":14,"author":{"gitId":"cedricongjh"},"content":"@Entity"},{"lineNumber":15,"author":{"gitId":"cedricongjh"},"content":"public class FeedbackMsqResponse extends FeedbackResponse {"},{"lineNumber":16,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":17,"author":{"gitId":"cedricongjh"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":18,"author":{"gitId":"cedricongjh"},"content":"    @Convert(converter \u003d FeedbackMsqResponseDetailsConverter.class)"},{"lineNumber":19,"author":{"gitId":"cedricongjh"},"content":"    private FeedbackMsqResponseDetails answer;"},{"lineNumber":20,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":21,"author":{"gitId":"cedricongjh"},"content":"    protected FeedbackMsqResponse() {"},{"lineNumber":22,"author":{"gitId":"cedricongjh"},"content":"        // required by Hibernate"},{"lineNumber":23,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":24,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":25,"author":{"gitId":"cedricongjh"},"content":"    public FeedbackMsqResponseDetails getAnswer() {"},{"lineNumber":26,"author":{"gitId":"cedricongjh"},"content":"        return answer;"},{"lineNumber":27,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":28,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":29,"author":{"gitId":"cedricongjh"},"content":"    public void setAnswer(FeedbackMsqResponseDetails answer) {"},{"lineNumber":30,"author":{"gitId":"cedricongjh"},"content":"        this.answer \u003d answer;"},{"lineNumber":31,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":32,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":33,"author":{"gitId":"cedricongjh"},"content":"    @Override"},{"lineNumber":34,"author":{"gitId":"cedricongjh"},"content":"    public String toString() {"},{"lineNumber":35,"author":{"gitId":"cedricongjh"},"content":"        return \"FeedbackMsqResponse [id\u003d\" + super.getId()"},{"lineNumber":36,"author":{"gitId":"cedricongjh"},"content":"            + \", createdAt\u003d\" + super.getCreatedAt() + \", updatedAt\u003d\" + super.getUpdatedAt() + \"]\";"},{"lineNumber":37,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":38,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":39,"author":{"gitId":"cedricongjh"},"content":"    /**"},{"lineNumber":40,"author":{"gitId":"cedricongjh"},"content":"     * Converter for FeedbackMsqResponse specific attributes."},{"lineNumber":41,"author":{"gitId":"cedricongjh"},"content":"     */"},{"lineNumber":42,"author":{"gitId":"cedricongjh"},"content":"    @Converter"},{"lineNumber":43,"author":{"gitId":"cedricongjh"},"content":"    public static class FeedbackMsqResponseDetailsConverter"},{"lineNumber":44,"author":{"gitId":"hhdqirui"},"content":"            extends FeedbackResponseDetailsConverter {"},{"lineNumber":45,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":46,"author":{"gitId":"cedricongjh"},"content":"}"}],"authorContributionMap":{"cedricongjh":45,"hhdqirui":1}},{"path":"src/main/java/teammates/storage/sqlentity/responses/FeedbackNumericalScaleResponse.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"cedricongjh"},"content":"package teammates.storage.sqlentity.responses;"},{"lineNumber":2,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":3,"author":{"gitId":"cedricongjh"},"content":"import teammates.common.datatransfer.questions.FeedbackNumericalScaleResponseDetails;"},{"lineNumber":4,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.FeedbackResponse;"},{"lineNumber":5,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":6,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Column;"},{"lineNumber":7,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Convert;"},{"lineNumber":8,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Converter;"},{"lineNumber":9,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Entity;"},{"lineNumber":10,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":11,"author":{"gitId":"cedricongjh"},"content":"/**"},{"lineNumber":12,"author":{"gitId":"cedricongjh"},"content":" * Represents a feedback numerical scale response."},{"lineNumber":13,"author":{"gitId":"cedricongjh"},"content":" */"},{"lineNumber":14,"author":{"gitId":"cedricongjh"},"content":"@Entity"},{"lineNumber":15,"author":{"gitId":"cedricongjh"},"content":"public class FeedbackNumericalScaleResponse extends FeedbackResponse {"},{"lineNumber":16,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":17,"author":{"gitId":"cedricongjh"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":18,"author":{"gitId":"cedricongjh"},"content":"    @Convert(converter \u003d FeedbackNumericalScaleResponseDetailsConverter.class)"},{"lineNumber":19,"author":{"gitId":"cedricongjh"},"content":"    private FeedbackNumericalScaleResponseDetails answer;"},{"lineNumber":20,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":21,"author":{"gitId":"cedricongjh"},"content":"    protected FeedbackNumericalScaleResponse() {"},{"lineNumber":22,"author":{"gitId":"cedricongjh"},"content":"        // required by Hibernate"},{"lineNumber":23,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":24,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":25,"author":{"gitId":"cedricongjh"},"content":"    public FeedbackNumericalScaleResponseDetails getAnswer() {"},{"lineNumber":26,"author":{"gitId":"cedricongjh"},"content":"        return answer;"},{"lineNumber":27,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":28,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":29,"author":{"gitId":"cedricongjh"},"content":"    public void setAnswer(FeedbackNumericalScaleResponseDetails answer) {"},{"lineNumber":30,"author":{"gitId":"cedricongjh"},"content":"        this.answer \u003d answer;"},{"lineNumber":31,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":32,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":33,"author":{"gitId":"cedricongjh"},"content":"    @Override"},{"lineNumber":34,"author":{"gitId":"cedricongjh"},"content":"    public String toString() {"},{"lineNumber":35,"author":{"gitId":"cedricongjh"},"content":"        return \"FeedbackTextResponse [id\u003d\" + super.getId()"},{"lineNumber":36,"author":{"gitId":"cedricongjh"},"content":"            + \", createdAt\u003d\" + super.getCreatedAt() + \", updatedAt\u003d\" + super.getUpdatedAt() + \"]\";"},{"lineNumber":37,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":38,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":39,"author":{"gitId":"cedricongjh"},"content":"    /**"},{"lineNumber":40,"author":{"gitId":"cedricongjh"},"content":"     * Converter for FeedbackNumericalScaleQuestion specific attributes."},{"lineNumber":41,"author":{"gitId":"cedricongjh"},"content":"     */"},{"lineNumber":42,"author":{"gitId":"cedricongjh"},"content":"    @Converter"},{"lineNumber":43,"author":{"gitId":"cedricongjh"},"content":"    public static class FeedbackNumericalScaleResponseDetailsConverter"},{"lineNumber":44,"author":{"gitId":"hhdqirui"},"content":"            extends FeedbackResponseDetailsConverter {"},{"lineNumber":45,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":46,"author":{"gitId":"cedricongjh"},"content":"}"}],"authorContributionMap":{"cedricongjh":45,"hhdqirui":1}},{"path":"src/main/java/teammates/storage/sqlentity/responses/FeedbackRankOptionsResponse.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"cedricongjh"},"content":"package teammates.storage.sqlentity.responses;"},{"lineNumber":2,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":3,"author":{"gitId":"cedricongjh"},"content":"import teammates.common.datatransfer.questions.FeedbackRankOptionsResponseDetails;"},{"lineNumber":4,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.FeedbackResponse;"},{"lineNumber":5,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":6,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Column;"},{"lineNumber":7,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Convert;"},{"lineNumber":8,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Converter;"},{"lineNumber":9,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Entity;"},{"lineNumber":10,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":11,"author":{"gitId":"cedricongjh"},"content":"/**"},{"lineNumber":12,"author":{"gitId":"cedricongjh"},"content":" * Represents a feedback rank options response."},{"lineNumber":13,"author":{"gitId":"cedricongjh"},"content":" */"},{"lineNumber":14,"author":{"gitId":"cedricongjh"},"content":"@Entity"},{"lineNumber":15,"author":{"gitId":"cedricongjh"},"content":"public class FeedbackRankOptionsResponse extends FeedbackResponse {"},{"lineNumber":16,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":17,"author":{"gitId":"cedricongjh"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":18,"author":{"gitId":"cedricongjh"},"content":"    @Convert(converter \u003d FeedbackRankOptionsResponseDetailsConverter.class)"},{"lineNumber":19,"author":{"gitId":"cedricongjh"},"content":"    private FeedbackRankOptionsResponseDetails answer;"},{"lineNumber":20,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":21,"author":{"gitId":"cedricongjh"},"content":"    protected FeedbackRankOptionsResponse() {"},{"lineNumber":22,"author":{"gitId":"cedricongjh"},"content":"        // required by Hibernate"},{"lineNumber":23,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":24,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":25,"author":{"gitId":"cedricongjh"},"content":"    public FeedbackRankOptionsResponseDetails getAnswer() {"},{"lineNumber":26,"author":{"gitId":"cedricongjh"},"content":"        return answer;"},{"lineNumber":27,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":28,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":29,"author":{"gitId":"cedricongjh"},"content":"    public void setAnswer(FeedbackRankOptionsResponseDetails answer) {"},{"lineNumber":30,"author":{"gitId":"cedricongjh"},"content":"        this.answer \u003d answer;"},{"lineNumber":31,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":32,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":33,"author":{"gitId":"cedricongjh"},"content":"    @Override"},{"lineNumber":34,"author":{"gitId":"cedricongjh"},"content":"    public String toString() {"},{"lineNumber":35,"author":{"gitId":"cedricongjh"},"content":"        return \"FeedbackRankOptionsResponse [id\u003d\" + super.getId()"},{"lineNumber":36,"author":{"gitId":"cedricongjh"},"content":"            + \", createdAt\u003d\" + super.getCreatedAt() + \", updatedAt\u003d\" + super.getUpdatedAt() + \"]\";"},{"lineNumber":37,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":38,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":39,"author":{"gitId":"cedricongjh"},"content":"    /**"},{"lineNumber":40,"author":{"gitId":"cedricongjh"},"content":"     * Converter for FeedbackRankOptionsResponse specific attributes."},{"lineNumber":41,"author":{"gitId":"cedricongjh"},"content":"     */"},{"lineNumber":42,"author":{"gitId":"cedricongjh"},"content":"    @Converter"},{"lineNumber":43,"author":{"gitId":"cedricongjh"},"content":"    public static class FeedbackRankOptionsResponseDetailsConverter"},{"lineNumber":44,"author":{"gitId":"hhdqirui"},"content":"            extends FeedbackResponseDetailsConverter {"},{"lineNumber":45,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":46,"author":{"gitId":"cedricongjh"},"content":"}"}],"authorContributionMap":{"cedricongjh":45,"hhdqirui":1}},{"path":"src/main/java/teammates/storage/sqlentity/responses/FeedbackRankRecipientsResponse.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"cedricongjh"},"content":"package teammates.storage.sqlentity.responses;"},{"lineNumber":2,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":3,"author":{"gitId":"cedricongjh"},"content":"import teammates.common.datatransfer.questions.FeedbackRankRecipientsResponseDetails;"},{"lineNumber":4,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.FeedbackResponse;"},{"lineNumber":5,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":6,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Column;"},{"lineNumber":7,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Convert;"},{"lineNumber":8,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Converter;"},{"lineNumber":9,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Entity;"},{"lineNumber":10,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":11,"author":{"gitId":"cedricongjh"},"content":"/**"},{"lineNumber":12,"author":{"gitId":"cedricongjh"},"content":" * Represents a feedback rank recipients response."},{"lineNumber":13,"author":{"gitId":"cedricongjh"},"content":" */"},{"lineNumber":14,"author":{"gitId":"cedricongjh"},"content":"@Entity"},{"lineNumber":15,"author":{"gitId":"cedricongjh"},"content":"public class FeedbackRankRecipientsResponse extends FeedbackResponse {"},{"lineNumber":16,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":17,"author":{"gitId":"cedricongjh"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":18,"author":{"gitId":"cedricongjh"},"content":"    @Convert(converter \u003d FeedbackRankRecipientsResponseDetailsConverter.class)"},{"lineNumber":19,"author":{"gitId":"cedricongjh"},"content":"    private FeedbackRankRecipientsResponseDetails answer;"},{"lineNumber":20,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":21,"author":{"gitId":"cedricongjh"},"content":"    protected FeedbackRankRecipientsResponse() {"},{"lineNumber":22,"author":{"gitId":"cedricongjh"},"content":"        // required by Hibernate"},{"lineNumber":23,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":24,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":25,"author":{"gitId":"cedricongjh"},"content":"    public FeedbackRankRecipientsResponseDetails getAnswer() {"},{"lineNumber":26,"author":{"gitId":"cedricongjh"},"content":"        return answer;"},{"lineNumber":27,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":28,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":29,"author":{"gitId":"cedricongjh"},"content":"    public void setAnswer(FeedbackRankRecipientsResponseDetails answer) {"},{"lineNumber":30,"author":{"gitId":"cedricongjh"},"content":"        this.answer \u003d answer;"},{"lineNumber":31,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":32,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":33,"author":{"gitId":"cedricongjh"},"content":"    @Override"},{"lineNumber":34,"author":{"gitId":"cedricongjh"},"content":"    public String toString() {"},{"lineNumber":35,"author":{"gitId":"cedricongjh"},"content":"        return \"FeedbackRankRecipientsResponse [id\u003d\" + super.getId()"},{"lineNumber":36,"author":{"gitId":"cedricongjh"},"content":"            + \", createdAt\u003d\" + super.getCreatedAt() + \", updatedAt\u003d\" + super.getUpdatedAt() + \"]\";"},{"lineNumber":37,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":38,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":39,"author":{"gitId":"cedricongjh"},"content":"    /**"},{"lineNumber":40,"author":{"gitId":"cedricongjh"},"content":"     * Converter for FeedbackRankRecipientsResponse specific attributes."},{"lineNumber":41,"author":{"gitId":"cedricongjh"},"content":"     */"},{"lineNumber":42,"author":{"gitId":"cedricongjh"},"content":"    @Converter"},{"lineNumber":43,"author":{"gitId":"cedricongjh"},"content":"    public static class FeedbackRankRecipientsResponseDetailsConverter"},{"lineNumber":44,"author":{"gitId":"hhdqirui"},"content":"            extends FeedbackResponseDetailsConverter {"},{"lineNumber":45,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":46,"author":{"gitId":"cedricongjh"},"content":"}"}],"authorContributionMap":{"cedricongjh":45,"hhdqirui":1}},{"path":"src/main/java/teammates/storage/sqlentity/responses/FeedbackRubricResponse.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"cedricongjh"},"content":"package teammates.storage.sqlentity.responses;"},{"lineNumber":2,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":3,"author":{"gitId":"cedricongjh"},"content":"import teammates.common.datatransfer.questions.FeedbackRubricResponseDetails;"},{"lineNumber":4,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.FeedbackResponse;"},{"lineNumber":5,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":6,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Column;"},{"lineNumber":7,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Convert;"},{"lineNumber":8,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Converter;"},{"lineNumber":9,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Entity;"},{"lineNumber":10,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":11,"author":{"gitId":"cedricongjh"},"content":"/**"},{"lineNumber":12,"author":{"gitId":"cedricongjh"},"content":" * Represents a feedback rubric response."},{"lineNumber":13,"author":{"gitId":"cedricongjh"},"content":" */"},{"lineNumber":14,"author":{"gitId":"cedricongjh"},"content":"@Entity"},{"lineNumber":15,"author":{"gitId":"cedricongjh"},"content":"public class FeedbackRubricResponse extends FeedbackResponse {"},{"lineNumber":16,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":17,"author":{"gitId":"cedricongjh"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":18,"author":{"gitId":"cedricongjh"},"content":"    @Convert(converter \u003d FeedbackRubricResponseDetailsConverter.class)"},{"lineNumber":19,"author":{"gitId":"cedricongjh"},"content":"    private FeedbackRubricResponseDetails answer;"},{"lineNumber":20,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":21,"author":{"gitId":"cedricongjh"},"content":"    protected FeedbackRubricResponse() {"},{"lineNumber":22,"author":{"gitId":"cedricongjh"},"content":"        // required by Hibernate"},{"lineNumber":23,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":24,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":25,"author":{"gitId":"cedricongjh"},"content":"    public FeedbackRubricResponseDetails getAnswer() {"},{"lineNumber":26,"author":{"gitId":"cedricongjh"},"content":"        return answer;"},{"lineNumber":27,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":28,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":29,"author":{"gitId":"cedricongjh"},"content":"    public void setAnswer(FeedbackRubricResponseDetails answer) {"},{"lineNumber":30,"author":{"gitId":"cedricongjh"},"content":"        this.answer \u003d answer;"},{"lineNumber":31,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":32,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":33,"author":{"gitId":"cedricongjh"},"content":"    @Override"},{"lineNumber":34,"author":{"gitId":"cedricongjh"},"content":"    public String toString() {"},{"lineNumber":35,"author":{"gitId":"cedricongjh"},"content":"        return \"FeedbackRubricResponse [id\u003d\" + super.getId()"},{"lineNumber":36,"author":{"gitId":"cedricongjh"},"content":"            + \", createdAt\u003d\" + super.getCreatedAt() + \", updatedAt\u003d\" + super.getUpdatedAt() + \"]\";"},{"lineNumber":37,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":38,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":39,"author":{"gitId":"cedricongjh"},"content":"    /**"},{"lineNumber":40,"author":{"gitId":"cedricongjh"},"content":"     * Converter for FeedbackRubricResponse specific attributes."},{"lineNumber":41,"author":{"gitId":"cedricongjh"},"content":"     */"},{"lineNumber":42,"author":{"gitId":"cedricongjh"},"content":"    @Converter"},{"lineNumber":43,"author":{"gitId":"cedricongjh"},"content":"    public static class FeedbackRubricResponseDetailsConverter"},{"lineNumber":44,"author":{"gitId":"hhdqirui"},"content":"            extends FeedbackResponseDetailsConverter {"},{"lineNumber":45,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":46,"author":{"gitId":"cedricongjh"},"content":"}"}],"authorContributionMap":{"cedricongjh":45,"hhdqirui":1}},{"path":"src/main/java/teammates/storage/sqlentity/responses/FeedbackTextResponse.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"cedricongjh"},"content":"package teammates.storage.sqlentity.responses;"},{"lineNumber":2,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":3,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.FeedbackResponse;"},{"lineNumber":4,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":5,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Column;"},{"lineNumber":6,"author":{"gitId":"cedricongjh"},"content":"import jakarta.persistence.Entity;"},{"lineNumber":7,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":8,"author":{"gitId":"cedricongjh"},"content":"/**"},{"lineNumber":9,"author":{"gitId":"cedricongjh"},"content":" * Represents a text response."},{"lineNumber":10,"author":{"gitId":"cedricongjh"},"content":" */"},{"lineNumber":11,"author":{"gitId":"cedricongjh"},"content":"@Entity"},{"lineNumber":12,"author":{"gitId":"cedricongjh"},"content":"public class FeedbackTextResponse extends FeedbackResponse {"},{"lineNumber":13,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":14,"author":{"gitId":"cedricongjh"},"content":"    @Column(nullable \u003d false)"},{"lineNumber":15,"author":{"gitId":"cedricongjh"},"content":"    private String answer;"},{"lineNumber":16,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":17,"author":{"gitId":"cedricongjh"},"content":"    protected FeedbackTextResponse() {"},{"lineNumber":18,"author":{"gitId":"cedricongjh"},"content":"        // required by Hibernate"},{"lineNumber":19,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":20,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":21,"author":{"gitId":"cedricongjh"},"content":"    public String getAnswer() {"},{"lineNumber":22,"author":{"gitId":"cedricongjh"},"content":"        return answer;"},{"lineNumber":23,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":24,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":25,"author":{"gitId":"cedricongjh"},"content":"    public void setAnswer(String answer) {"},{"lineNumber":26,"author":{"gitId":"cedricongjh"},"content":"        this.answer \u003d answer;"},{"lineNumber":27,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":28,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":29,"author":{"gitId":"cedricongjh"},"content":"    @Override"},{"lineNumber":30,"author":{"gitId":"cedricongjh"},"content":"    public String toString() {"},{"lineNumber":31,"author":{"gitId":"cedricongjh"},"content":"        return \"FeedbackTextResponse [id\u003d\" + super.getId()"},{"lineNumber":32,"author":{"gitId":"cedricongjh"},"content":"            + \", createdAt\u003d\" + super.getCreatedAt() + \", updatedAt\u003d\" + super.getUpdatedAt() + \"]\";"},{"lineNumber":33,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":34,"author":{"gitId":"cedricongjh"},"content":"}"}],"authorContributionMap":{"cedricongjh":34}},{"path":"src/main/java/teammates/storage/sqlentity/responses/package-info.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"cedricongjh"},"content":"/**"},{"lineNumber":2,"author":{"gitId":"cedricongjh"},"content":" * Contains FeedbackResponse subclass entities."},{"lineNumber":3,"author":{"gitId":"cedricongjh"},"content":" */"},{"lineNumber":4,"author":{"gitId":"cedricongjh"},"content":"package teammates.storage.sqlentity.responses;"}],"authorContributionMap":{"cedricongjh":4}},{"path":"src/main/java/teammates/ui/output/AccountData.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.output;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.util.Map;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.util.stream.Collectors;"},{"lineNumber":5,"author":{"gitId":"-"},"content":""},{"lineNumber":6,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.AccountAttributes;"},{"lineNumber":7,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Account;"},{"lineNumber":8,"author":{"gitId":"-"},"content":""},{"lineNumber":9,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":10,"author":{"gitId":"-"},"content":" * Output format of account data."},{"lineNumber":11,"author":{"gitId":"-"},"content":" */"},{"lineNumber":12,"author":{"gitId":"-"},"content":"public class AccountData extends ApiOutput {"},{"lineNumber":13,"author":{"gitId":"-"},"content":""},{"lineNumber":14,"author":{"gitId":"-"},"content":"    private final String googleId;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"    private final String name;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"    private final String email;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"    private final Map\u003cString, Long\u003e readNotifications;"},{"lineNumber":18,"author":{"gitId":"-"},"content":""},{"lineNumber":19,"author":{"gitId":"-"},"content":"    public AccountData(AccountAttributes accountInfo) {"},{"lineNumber":20,"author":{"gitId":"-"},"content":"        this.googleId \u003d accountInfo.getGoogleId();"},{"lineNumber":21,"author":{"gitId":"-"},"content":"        this.name \u003d accountInfo.getName();"},{"lineNumber":22,"author":{"gitId":"-"},"content":"        this.email \u003d accountInfo.getEmail();"},{"lineNumber":23,"author":{"gitId":"-"},"content":"        this.readNotifications \u003d accountInfo.getReadNotifications()"},{"lineNumber":24,"author":{"gitId":"-"},"content":"            .entrySet()"},{"lineNumber":25,"author":{"gitId":"-"},"content":"            .stream()"},{"lineNumber":26,"author":{"gitId":"-"},"content":"            .collect(Collectors.toMap("},{"lineNumber":27,"author":{"gitId":"-"},"content":"                e -\u003e e.getKey(),"},{"lineNumber":28,"author":{"gitId":"-"},"content":"                e -\u003e e.getValue().toEpochMilli()"},{"lineNumber":29,"author":{"gitId":"-"},"content":"            ));"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":31,"author":{"gitId":"-"},"content":""},{"lineNumber":32,"author":{"gitId":"domlimm"},"content":"    public AccountData(Account account) {"},{"lineNumber":33,"author":{"gitId":"domlimm"},"content":"        this.googleId \u003d account.getGoogleId();"},{"lineNumber":34,"author":{"gitId":"domlimm"},"content":"        this.name \u003d account.getName();"},{"lineNumber":35,"author":{"gitId":"domlimm"},"content":"        this.email \u003d account.getEmail();"},{"lineNumber":36,"author":{"gitId":"domlimm"},"content":"        this.readNotifications \u003d account.getReadNotifications()"},{"lineNumber":37,"author":{"gitId":"domlimm"},"content":"                .stream()"},{"lineNumber":38,"author":{"gitId":"domlimm"},"content":"                .collect(Collectors.toMap("},{"lineNumber":39,"author":{"gitId":"domlimm"},"content":"                        readNotification -\u003e readNotification.getId().toString(),"},{"lineNumber":40,"author":{"gitId":"domlimm"},"content":"                        readNotification -\u003e"},{"lineNumber":41,"author":{"gitId":"domlimm"},"content":"                                readNotification.getNotification().getEndTime().toEpochMilli()));"},{"lineNumber":42,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":43,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":44,"author":{"gitId":"-"},"content":"    public String getEmail() {"},{"lineNumber":45,"author":{"gitId":"-"},"content":"        return email;"},{"lineNumber":46,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":47,"author":{"gitId":"-"},"content":""},{"lineNumber":48,"author":{"gitId":"-"},"content":"    public String getGoogleId() {"},{"lineNumber":49,"author":{"gitId":"-"},"content":"        return googleId;"},{"lineNumber":50,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":51,"author":{"gitId":"-"},"content":""},{"lineNumber":52,"author":{"gitId":"-"},"content":"    public String getName() {"},{"lineNumber":53,"author":{"gitId":"-"},"content":"        return name;"},{"lineNumber":54,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":55,"author":{"gitId":"-"},"content":""},{"lineNumber":56,"author":{"gitId":"-"},"content":"    public Map\u003cString, Long\u003e getReadNotifications() {"},{"lineNumber":57,"author":{"gitId":"-"},"content":"        return this.readNotifications;"},{"lineNumber":58,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":59,"author":{"gitId":"-"},"content":""},{"lineNumber":60,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"domlimm":13,"-":47}},{"path":"src/main/java/teammates/ui/output/AccountRequestData.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.output;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import javax.annotation.Nullable;"},{"lineNumber":4,"author":{"gitId":"-"},"content":""},{"lineNumber":5,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.AccountRequestAttributes;"},{"lineNumber":6,"author":{"gitId":"kevin9foong"},"content":"import teammates.storage.sqlentity.AccountRequest;"},{"lineNumber":7,"author":{"gitId":"-"},"content":""},{"lineNumber":8,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":9,"author":{"gitId":"-"},"content":" * Output format of account request data."},{"lineNumber":10,"author":{"gitId":"-"},"content":" */"},{"lineNumber":11,"author":{"gitId":"-"},"content":"public class AccountRequestData extends ApiOutput {"},{"lineNumber":12,"author":{"gitId":"-"},"content":""},{"lineNumber":13,"author":{"gitId":"-"},"content":"    private final String email;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"    private final String name;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"    private final String institute;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"    private final String registrationKey;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"    @Nullable"},{"lineNumber":18,"author":{"gitId":"-"},"content":"    private final Long registeredAt;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"    private final long createdAt;"},{"lineNumber":20,"author":{"gitId":"-"},"content":""},{"lineNumber":21,"author":{"gitId":"-"},"content":"    public AccountRequestData(AccountRequestAttributes accountRequestInfo) {"},{"lineNumber":22,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":23,"author":{"gitId":"-"},"content":"        this.name \u003d accountRequestInfo.getName();"},{"lineNumber":24,"author":{"gitId":"-"},"content":"        this.email \u003d accountRequestInfo.getEmail();"},{"lineNumber":25,"author":{"gitId":"-"},"content":"        this.institute \u003d accountRequestInfo.getInstitute();"},{"lineNumber":26,"author":{"gitId":"-"},"content":"        this.registrationKey \u003d accountRequestInfo.getRegistrationKey();"},{"lineNumber":27,"author":{"gitId":"-"},"content":"        this.createdAt \u003d accountRequestInfo.getCreatedAt().toEpochMilli();"},{"lineNumber":28,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":29,"author":{"gitId":"-"},"content":"        if (accountRequestInfo.getRegisteredAt() \u003d\u003d null) {"},{"lineNumber":30,"author":{"gitId":"-"},"content":"            this.registeredAt \u003d null;"},{"lineNumber":31,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":32,"author":{"gitId":"-"},"content":"            this.registeredAt \u003d accountRequestInfo.getRegisteredAt().toEpochMilli();"},{"lineNumber":33,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":34,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":35,"author":{"gitId":"-"},"content":""},{"lineNumber":36,"author":{"gitId":"kevin9foong"},"content":"    public AccountRequestData(AccountRequest accountRequest) {"},{"lineNumber":37,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":38,"author":{"gitId":"kevin9foong"},"content":"        this.name \u003d accountRequest.getName();"},{"lineNumber":39,"author":{"gitId":"kevin9foong"},"content":"        this.email \u003d accountRequest.getEmail();"},{"lineNumber":40,"author":{"gitId":"kevin9foong"},"content":"        this.institute \u003d accountRequest.getInstitute();"},{"lineNumber":41,"author":{"gitId":"kevin9foong"},"content":"        this.registrationKey \u003d accountRequest.getRegistrationKey();"},{"lineNumber":42,"author":{"gitId":"kevin9foong"},"content":"        this.createdAt \u003d accountRequest.getCreatedAt().toEpochMilli();"},{"lineNumber":43,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":44,"author":{"gitId":"kevin9foong"},"content":"        if (accountRequest.getRegisteredAt() \u003d\u003d null) {"},{"lineNumber":45,"author":{"gitId":"kevin9foong"},"content":"            this.registeredAt \u003d null;"},{"lineNumber":46,"author":{"gitId":"kevin9foong"},"content":"        } else {"},{"lineNumber":47,"author":{"gitId":"kevin9foong"},"content":"            this.registeredAt \u003d accountRequest.getRegisteredAt().toEpochMilli();"},{"lineNumber":48,"author":{"gitId":"kevin9foong"},"content":"        }"},{"lineNumber":49,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":50,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":51,"author":{"gitId":"-"},"content":"    public String getInstitute() {"},{"lineNumber":52,"author":{"gitId":"-"},"content":"        return institute;"},{"lineNumber":53,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":54,"author":{"gitId":"-"},"content":""},{"lineNumber":55,"author":{"gitId":"-"},"content":"    public String getEmail() {"},{"lineNumber":56,"author":{"gitId":"-"},"content":"        return email;"},{"lineNumber":57,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":58,"author":{"gitId":"-"},"content":""},{"lineNumber":59,"author":{"gitId":"-"},"content":"    public String getName() {"},{"lineNumber":60,"author":{"gitId":"-"},"content":"        return name;"},{"lineNumber":61,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":62,"author":{"gitId":"-"},"content":""},{"lineNumber":63,"author":{"gitId":"-"},"content":"    public String getRegistrationKey() {"},{"lineNumber":64,"author":{"gitId":"-"},"content":"        return registrationKey;"},{"lineNumber":65,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":66,"author":{"gitId":"-"},"content":""},{"lineNumber":67,"author":{"gitId":"-"},"content":"    public Long getRegisteredAt() {"},{"lineNumber":68,"author":{"gitId":"-"},"content":"        return registeredAt;"},{"lineNumber":69,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":70,"author":{"gitId":"-"},"content":""},{"lineNumber":71,"author":{"gitId":"-"},"content":"    public long getCreatedAt() {"},{"lineNumber":72,"author":{"gitId":"-"},"content":"        return createdAt;"},{"lineNumber":73,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":74,"author":{"gitId":"-"},"content":""},{"lineNumber":75,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"-":57,"kevin9foong":18}},{"path":"src/main/java/teammates/ui/output/AccountsData.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.output;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":4,"author":{"gitId":"-"},"content":""},{"lineNumber":5,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":6,"author":{"gitId":"-"},"content":" * The API output format of a list of accounts."},{"lineNumber":7,"author":{"gitId":"-"},"content":" */"},{"lineNumber":8,"author":{"gitId":"-"},"content":"public class AccountsData extends ApiOutput {"},{"lineNumber":9,"author":{"gitId":"-"},"content":""},{"lineNumber":10,"author":{"gitId":"-"},"content":"    private List\u003cAccountData\u003e accounts;"},{"lineNumber":11,"author":{"gitId":"-"},"content":""},{"lineNumber":12,"author":{"gitId":"domlimm"},"content":"    public AccountsData(List\u003cAccountData\u003e accounts) {"},{"lineNumber":13,"author":{"gitId":"domlimm"},"content":"        this.accounts \u003d accounts;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":15,"author":{"gitId":"-"},"content":""},{"lineNumber":16,"author":{"gitId":"-"},"content":"    public List\u003cAccountData\u003e getAccounts() {"},{"lineNumber":17,"author":{"gitId":"-"},"content":"        return accounts;"},{"lineNumber":18,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":19,"author":{"gitId":"-"},"content":""},{"lineNumber":20,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"domlimm":2,"-":18}},{"path":"src/main/java/teammates/ui/output/FeedbackQuestionData.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.output;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.util.Collections;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.util.stream.Collectors;"},{"lineNumber":6,"author":{"gitId":"-"},"content":""},{"lineNumber":7,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.FeedbackParticipantType;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackConstantSumQuestionDetails;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackMcqQuestionDetails;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackMsqQuestionDetails;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackQuestionDetails;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackQuestionType;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackRubricQuestionDetails;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":16,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.FeedbackQuestion;"},{"lineNumber":17,"author":{"gitId":"-"},"content":""},{"lineNumber":18,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":19,"author":{"gitId":"-"},"content":" * The API output format of {@link FeedbackQuestionAttributes}."},{"lineNumber":20,"author":{"gitId":"-"},"content":" */"},{"lineNumber":21,"author":{"gitId":"-"},"content":"public class FeedbackQuestionData extends ApiOutput {"},{"lineNumber":22,"author":{"gitId":"-"},"content":"    private final String feedbackQuestionId;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"    private int questionNumber;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"    private final String questionBrief;"},{"lineNumber":25,"author":{"gitId":"-"},"content":"    private final String questionDescription;"},{"lineNumber":26,"author":{"gitId":"-"},"content":""},{"lineNumber":27,"author":{"gitId":"-"},"content":"    private final FeedbackQuestionDetails questionDetails;"},{"lineNumber":28,"author":{"gitId":"-"},"content":""},{"lineNumber":29,"author":{"gitId":"-"},"content":"    private FeedbackQuestionType questionType;"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    private final FeedbackParticipantType giverType;"},{"lineNumber":31,"author":{"gitId":"-"},"content":"    private final FeedbackParticipantType recipientType;"},{"lineNumber":32,"author":{"gitId":"-"},"content":""},{"lineNumber":33,"author":{"gitId":"-"},"content":"    private final NumberOfEntitiesToGiveFeedbackToSetting numberOfEntitiesToGiveFeedbackToSetting;"},{"lineNumber":34,"author":{"gitId":"-"},"content":"    private final Integer customNumberOfEntitiesToGiveFeedbackTo;"},{"lineNumber":35,"author":{"gitId":"-"},"content":""},{"lineNumber":36,"author":{"gitId":"-"},"content":"    private List\u003cFeedbackVisibilityType\u003e showResponsesTo;"},{"lineNumber":37,"author":{"gitId":"-"},"content":"    private List\u003cFeedbackVisibilityType\u003e showGiverNameTo;"},{"lineNumber":38,"author":{"gitId":"-"},"content":"    private List\u003cFeedbackVisibilityType\u003e showRecipientNameTo;"},{"lineNumber":39,"author":{"gitId":"-"},"content":""},{"lineNumber":40,"author":{"gitId":"-"},"content":"    public FeedbackQuestionData(FeedbackQuestionAttributes feedbackQuestionAttributes) {"},{"lineNumber":41,"author":{"gitId":"-"},"content":"        FeedbackQuestionDetails feedbackQuestionDetails \u003d feedbackQuestionAttributes.getQuestionDetailsCopy();"},{"lineNumber":42,"author":{"gitId":"-"},"content":""},{"lineNumber":43,"author":{"gitId":"-"},"content":"        this.feedbackQuestionId \u003d feedbackQuestionAttributes.getFeedbackQuestionId();"},{"lineNumber":44,"author":{"gitId":"-"},"content":"        this.questionNumber \u003d feedbackQuestionAttributes.getQuestionNumber();"},{"lineNumber":45,"author":{"gitId":"-"},"content":"        this.questionBrief \u003d feedbackQuestionDetails.getQuestionText();"},{"lineNumber":46,"author":{"gitId":"-"},"content":"        this.questionDescription \u003d feedbackQuestionAttributes.getQuestionDescription();"},{"lineNumber":47,"author":{"gitId":"-"},"content":""},{"lineNumber":48,"author":{"gitId":"-"},"content":"        this.questionDetails \u003d feedbackQuestionDetails;"},{"lineNumber":49,"author":{"gitId":"-"},"content":""},{"lineNumber":50,"author":{"gitId":"-"},"content":"        this.questionType \u003d feedbackQuestionAttributes.getQuestionType();"},{"lineNumber":51,"author":{"gitId":"-"},"content":"        this.giverType \u003d feedbackQuestionAttributes.getGiverType();"},{"lineNumber":52,"author":{"gitId":"-"},"content":"        this.recipientType \u003d feedbackQuestionAttributes.getRecipientType();"},{"lineNumber":53,"author":{"gitId":"-"},"content":""},{"lineNumber":54,"author":{"gitId":"-"},"content":"        if (feedbackQuestionAttributes.getNumberOfEntitiesToGiveFeedbackTo() \u003d\u003d Const.MAX_POSSIBLE_RECIPIENTS) {"},{"lineNumber":55,"author":{"gitId":"-"},"content":"            this.numberOfEntitiesToGiveFeedbackToSetting \u003d NumberOfEntitiesToGiveFeedbackToSetting.UNLIMITED;"},{"lineNumber":56,"author":{"gitId":"-"},"content":"            this.customNumberOfEntitiesToGiveFeedbackTo \u003d null;"},{"lineNumber":57,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":58,"author":{"gitId":"-"},"content":"            this.numberOfEntitiesToGiveFeedbackToSetting \u003d NumberOfEntitiesToGiveFeedbackToSetting.CUSTOM;"},{"lineNumber":59,"author":{"gitId":"-"},"content":"            this.customNumberOfEntitiesToGiveFeedbackTo \u003d"},{"lineNumber":60,"author":{"gitId":"-"},"content":"                    feedbackQuestionAttributes.getNumberOfEntitiesToGiveFeedbackTo();"},{"lineNumber":61,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":62,"author":{"gitId":"-"},"content":""},{"lineNumber":63,"author":{"gitId":"-"},"content":"        // the visibility types are mixed in feedback participant type"},{"lineNumber":64,"author":{"gitId":"-"},"content":"        // therefore, we convert them to visibility types"},{"lineNumber":65,"author":{"gitId":"-"},"content":"        this.showResponsesTo \u003d convertToFeedbackVisibilityType(feedbackQuestionAttributes.getShowResponsesTo());"},{"lineNumber":66,"author":{"gitId":"-"},"content":"        this.showGiverNameTo \u003d convertToFeedbackVisibilityType(feedbackQuestionAttributes.getShowGiverNameTo());"},{"lineNumber":67,"author":{"gitId":"-"},"content":"        this.showRecipientNameTo \u003d"},{"lineNumber":68,"author":{"gitId":"-"},"content":"                convertToFeedbackVisibilityType(feedbackQuestionAttributes.getShowRecipientNameTo());"},{"lineNumber":69,"author":{"gitId":"-"},"content":""},{"lineNumber":70,"author":{"gitId":"-"},"content":"        // specially handling for contribution questions"},{"lineNumber":71,"author":{"gitId":"-"},"content":"        // TODO: remove the hack"},{"lineNumber":72,"author":{"gitId":"-"},"content":"        if (this.questionType \u003d\u003d FeedbackQuestionType.CONTRIB"},{"lineNumber":73,"author":{"gitId":"-"},"content":"                \u0026\u0026 this.giverType \u003d\u003d FeedbackParticipantType.STUDENTS"},{"lineNumber":74,"author":{"gitId":"-"},"content":"                \u0026\u0026 this.recipientType \u003d\u003d FeedbackParticipantType.OWN_TEAM_MEMBERS_INCLUDING_SELF"},{"lineNumber":75,"author":{"gitId":"-"},"content":"                \u0026\u0026 this.showResponsesTo.contains(FeedbackVisibilityType.GIVER_TEAM_MEMBERS)) {"},{"lineNumber":76,"author":{"gitId":"-"},"content":"            // remove the redundant visibility type as GIVER_TEAM_MEMBERS is just RECIPIENT_TEAM_MEMBERS"},{"lineNumber":77,"author":{"gitId":"hhdqirui"},"content":"            // contribution question keep the redundancy for legacy reason"},{"lineNumber":78,"author":{"gitId":"hhdqirui"},"content":"            this.showResponsesTo.remove(FeedbackVisibilityType.RECIPIENT_TEAM_MEMBERS);"},{"lineNumber":79,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":80,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":81,"author":{"gitId":"hhdqirui"},"content":"        if (this.questionType \u003d\u003d FeedbackQuestionType.CONSTSUM) {"},{"lineNumber":82,"author":{"gitId":"hhdqirui"},"content":"            FeedbackConstantSumQuestionDetails constantSumQuestionDetails \u003d"},{"lineNumber":83,"author":{"gitId":"hhdqirui"},"content":"                    (FeedbackConstantSumQuestionDetails) this.questionDetails;"},{"lineNumber":84,"author":{"gitId":"hhdqirui"},"content":"            this.questionType \u003d constantSumQuestionDetails.isDistributeToRecipients()"},{"lineNumber":85,"author":{"gitId":"hhdqirui"},"content":"                    ? FeedbackQuestionType.CONSTSUM_RECIPIENTS : FeedbackQuestionType.CONSTSUM_OPTIONS;"},{"lineNumber":86,"author":{"gitId":"hhdqirui"},"content":"            this.questionDetails.setQuestionType(this.questionType);"},{"lineNumber":87,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":88,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":89,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":90,"author":{"gitId":"hhdqirui"},"content":"    public FeedbackQuestionData(FeedbackQuestion feedbackQuestion) {"},{"lineNumber":91,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestionDetails feedbackQuestionDetails \u003d feedbackQuestion.getQuestionDetailsCopy();"},{"lineNumber":92,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":93,"author":{"gitId":"hhdqirui"},"content":"        this.feedbackQuestionId \u003d feedbackQuestion.getId().toString();"},{"lineNumber":94,"author":{"gitId":"hhdqirui"},"content":"        this.questionNumber \u003d feedbackQuestion.getQuestionNumber();"},{"lineNumber":95,"author":{"gitId":"hhdqirui"},"content":"        this.questionBrief \u003d feedbackQuestionDetails.getQuestionText();"},{"lineNumber":96,"author":{"gitId":"hhdqirui"},"content":"        this.questionDescription \u003d feedbackQuestion.getDescription();"},{"lineNumber":97,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":98,"author":{"gitId":"hhdqirui"},"content":"        this.questionDetails \u003d feedbackQuestionDetails;"},{"lineNumber":99,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":100,"author":{"gitId":"hhdqirui"},"content":"        this.questionType \u003d feedbackQuestion.getQuestionDetailsCopy().getQuestionType();"},{"lineNumber":101,"author":{"gitId":"hhdqirui"},"content":"        this.giverType \u003d feedbackQuestion.getGiverType();"},{"lineNumber":102,"author":{"gitId":"hhdqirui"},"content":"        this.recipientType \u003d feedbackQuestion.getRecipientType();"},{"lineNumber":103,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":104,"author":{"gitId":"hhdqirui"},"content":"        if (feedbackQuestion.getNumOfEntitiesToGiveFeedbackTo() \u003d\u003d Const.MAX_POSSIBLE_RECIPIENTS) {"},{"lineNumber":105,"author":{"gitId":"hhdqirui"},"content":"            this.numberOfEntitiesToGiveFeedbackToSetting \u003d NumberOfEntitiesToGiveFeedbackToSetting.UNLIMITED;"},{"lineNumber":106,"author":{"gitId":"hhdqirui"},"content":"            this.customNumberOfEntitiesToGiveFeedbackTo \u003d null;"},{"lineNumber":107,"author":{"gitId":"hhdqirui"},"content":"        } else {"},{"lineNumber":108,"author":{"gitId":"hhdqirui"},"content":"            this.numberOfEntitiesToGiveFeedbackToSetting \u003d NumberOfEntitiesToGiveFeedbackToSetting.CUSTOM;"},{"lineNumber":109,"author":{"gitId":"hhdqirui"},"content":"            this.customNumberOfEntitiesToGiveFeedbackTo \u003d"},{"lineNumber":110,"author":{"gitId":"hhdqirui"},"content":"                    feedbackQuestion.getNumOfEntitiesToGiveFeedbackTo();"},{"lineNumber":111,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":112,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":113,"author":{"gitId":"hhdqirui"},"content":"        // the visibility types are mixed in feedback participant type"},{"lineNumber":114,"author":{"gitId":"hhdqirui"},"content":"        // therefore, we convert them to visibility types"},{"lineNumber":115,"author":{"gitId":"hhdqirui"},"content":"        this.showResponsesTo \u003d convertToFeedbackVisibilityType(feedbackQuestion.getShowResponsesTo());"},{"lineNumber":116,"author":{"gitId":"hhdqirui"},"content":"        this.showGiverNameTo \u003d convertToFeedbackVisibilityType(feedbackQuestion.getShowGiverNameTo());"},{"lineNumber":117,"author":{"gitId":"hhdqirui"},"content":"        this.showRecipientNameTo \u003d"},{"lineNumber":118,"author":{"gitId":"hhdqirui"},"content":"                convertToFeedbackVisibilityType(feedbackQuestion.getShowRecipientNameTo());"},{"lineNumber":119,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":120,"author":{"gitId":"hhdqirui"},"content":"        // specially handling for contribution questions"},{"lineNumber":121,"author":{"gitId":"hhdqirui"},"content":"        // TODO: remove the hack"},{"lineNumber":122,"author":{"gitId":"hhdqirui"},"content":"        if (this.questionType \u003d\u003d FeedbackQuestionType.CONTRIB"},{"lineNumber":123,"author":{"gitId":"hhdqirui"},"content":"                \u0026\u0026 this.giverType \u003d\u003d FeedbackParticipantType.STUDENTS"},{"lineNumber":124,"author":{"gitId":"hhdqirui"},"content":"                \u0026\u0026 this.recipientType \u003d\u003d FeedbackParticipantType.OWN_TEAM_MEMBERS_INCLUDING_SELF"},{"lineNumber":125,"author":{"gitId":"hhdqirui"},"content":"                \u0026\u0026 this.showResponsesTo.contains(FeedbackVisibilityType.GIVER_TEAM_MEMBERS)) {"},{"lineNumber":126,"author":{"gitId":"hhdqirui"},"content":"            // remove the redundant visibility type as GIVER_TEAM_MEMBERS is just RECIPIENT_TEAM_MEMBERS"},{"lineNumber":127,"author":{"gitId":"-"},"content":"            // contribution question keep the redundancy for legacy reason"},{"lineNumber":128,"author":{"gitId":"-"},"content":"            this.showResponsesTo.remove(FeedbackVisibilityType.RECIPIENT_TEAM_MEMBERS);"},{"lineNumber":129,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":130,"author":{"gitId":"-"},"content":""},{"lineNumber":131,"author":{"gitId":"-"},"content":"        if (this.questionType \u003d\u003d FeedbackQuestionType.CONSTSUM) {"},{"lineNumber":132,"author":{"gitId":"-"},"content":"            FeedbackConstantSumQuestionDetails constantSumQuestionDetails \u003d"},{"lineNumber":133,"author":{"gitId":"-"},"content":"                    (FeedbackConstantSumQuestionDetails) this.questionDetails;"},{"lineNumber":134,"author":{"gitId":"-"},"content":"            this.questionType \u003d constantSumQuestionDetails.isDistributeToRecipients()"},{"lineNumber":135,"author":{"gitId":"-"},"content":"                    ? FeedbackQuestionType.CONSTSUM_RECIPIENTS : FeedbackQuestionType.CONSTSUM_OPTIONS;"},{"lineNumber":136,"author":{"gitId":"-"},"content":"            this.questionDetails.setQuestionType(this.questionType);"},{"lineNumber":137,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":138,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":139,"author":{"gitId":"-"},"content":""},{"lineNumber":140,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":141,"author":{"gitId":"-"},"content":"     * Converts a list of feedback participant type to a list of visibility type."},{"lineNumber":142,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":143,"author":{"gitId":"-"},"content":"    private List\u003cFeedbackVisibilityType\u003e convertToFeedbackVisibilityType("},{"lineNumber":144,"author":{"gitId":"-"},"content":"            List\u003cFeedbackParticipantType\u003e feedbackParticipantTypeList) {"},{"lineNumber":145,"author":{"gitId":"-"},"content":"        return feedbackParticipantTypeList.stream().map(feedbackParticipantType -\u003e {"},{"lineNumber":146,"author":{"gitId":"-"},"content":"            switch (feedbackParticipantType) {"},{"lineNumber":147,"author":{"gitId":"-"},"content":"            case STUDENTS:"},{"lineNumber":148,"author":{"gitId":"-"},"content":"                return FeedbackVisibilityType.STUDENTS;"},{"lineNumber":149,"author":{"gitId":"-"},"content":"            case INSTRUCTORS:"},{"lineNumber":150,"author":{"gitId":"-"},"content":"                return FeedbackVisibilityType.INSTRUCTORS;"},{"lineNumber":151,"author":{"gitId":"-"},"content":"            case RECEIVER:"},{"lineNumber":152,"author":{"gitId":"-"},"content":"                return FeedbackVisibilityType.RECIPIENT;"},{"lineNumber":153,"author":{"gitId":"-"},"content":"            case OWN_TEAM_MEMBERS:"},{"lineNumber":154,"author":{"gitId":"-"},"content":"                return FeedbackVisibilityType.GIVER_TEAM_MEMBERS;"},{"lineNumber":155,"author":{"gitId":"-"},"content":"            case RECEIVER_TEAM_MEMBERS:"},{"lineNumber":156,"author":{"gitId":"-"},"content":"                return FeedbackVisibilityType.RECIPIENT_TEAM_MEMBERS;"},{"lineNumber":157,"author":{"gitId":"-"},"content":"            default:"},{"lineNumber":158,"author":{"gitId":"-"},"content":"                assert false : \"Unknown feedbackParticipantType\" + feedbackParticipantType;"},{"lineNumber":159,"author":{"gitId":"-"},"content":"                break;"},{"lineNumber":160,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":161,"author":{"gitId":"-"},"content":"            return null;"},{"lineNumber":162,"author":{"gitId":"-"},"content":"        }).collect(Collectors.toList());"},{"lineNumber":163,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":164,"author":{"gitId":"-"},"content":""},{"lineNumber":165,"author":{"gitId":"-"},"content":"    public String getFeedbackQuestionId() {"},{"lineNumber":166,"author":{"gitId":"-"},"content":"        return feedbackQuestionId;"},{"lineNumber":167,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":168,"author":{"gitId":"-"},"content":""},{"lineNumber":169,"author":{"gitId":"-"},"content":"    public int getQuestionNumber() {"},{"lineNumber":170,"author":{"gitId":"-"},"content":"        return questionNumber;"},{"lineNumber":171,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":172,"author":{"gitId":"-"},"content":""},{"lineNumber":173,"author":{"gitId":"-"},"content":"    public void setQuestionNumber(int questionNumber) {"},{"lineNumber":174,"author":{"gitId":"-"},"content":"        this.questionNumber \u003d questionNumber;"},{"lineNumber":175,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":176,"author":{"gitId":"-"},"content":""},{"lineNumber":177,"author":{"gitId":"-"},"content":"    public String getQuestionBrief() {"},{"lineNumber":178,"author":{"gitId":"-"},"content":"        return questionBrief;"},{"lineNumber":179,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":180,"author":{"gitId":"-"},"content":""},{"lineNumber":181,"author":{"gitId":"-"},"content":"    public String getQuestionDescription() {"},{"lineNumber":182,"author":{"gitId":"-"},"content":"        return questionDescription;"},{"lineNumber":183,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":184,"author":{"gitId":"-"},"content":""},{"lineNumber":185,"author":{"gitId":"-"},"content":"    public FeedbackQuestionDetails getQuestionDetails() {"},{"lineNumber":186,"author":{"gitId":"-"},"content":"        return questionDetails;"},{"lineNumber":187,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":188,"author":{"gitId":"-"},"content":""},{"lineNumber":189,"author":{"gitId":"-"},"content":"    public FeedbackQuestionType getQuestionType() {"},{"lineNumber":190,"author":{"gitId":"-"},"content":"        return questionType;"},{"lineNumber":191,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":192,"author":{"gitId":"-"},"content":""},{"lineNumber":193,"author":{"gitId":"-"},"content":"    public FeedbackParticipantType getGiverType() {"},{"lineNumber":194,"author":{"gitId":"-"},"content":"        return giverType;"},{"lineNumber":195,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":196,"author":{"gitId":"-"},"content":""},{"lineNumber":197,"author":{"gitId":"-"},"content":"    public FeedbackParticipantType getRecipientType() {"},{"lineNumber":198,"author":{"gitId":"-"},"content":"        return recipientType;"},{"lineNumber":199,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":200,"author":{"gitId":"-"},"content":""},{"lineNumber":201,"author":{"gitId":"-"},"content":"    public NumberOfEntitiesToGiveFeedbackToSetting getNumberOfEntitiesToGiveFeedbackToSetting() {"},{"lineNumber":202,"author":{"gitId":"-"},"content":"        return numberOfEntitiesToGiveFeedbackToSetting;"},{"lineNumber":203,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":204,"author":{"gitId":"-"},"content":""},{"lineNumber":205,"author":{"gitId":"-"},"content":"    public Integer getCustomNumberOfEntitiesToGiveFeedbackTo() {"},{"lineNumber":206,"author":{"gitId":"-"},"content":"        return customNumberOfEntitiesToGiveFeedbackTo;"},{"lineNumber":207,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":208,"author":{"gitId":"-"},"content":""},{"lineNumber":209,"author":{"gitId":"-"},"content":"    public List\u003cFeedbackVisibilityType\u003e getShowResponsesTo() {"},{"lineNumber":210,"author":{"gitId":"-"},"content":"        return showResponsesTo;"},{"lineNumber":211,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":212,"author":{"gitId":"-"},"content":""},{"lineNumber":213,"author":{"gitId":"-"},"content":"    public List\u003cFeedbackVisibilityType\u003e getShowGiverNameTo() {"},{"lineNumber":214,"author":{"gitId":"-"},"content":"        return showGiverNameTo;"},{"lineNumber":215,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":216,"author":{"gitId":"-"},"content":""},{"lineNumber":217,"author":{"gitId":"-"},"content":"    public List\u003cFeedbackVisibilityType\u003e getShowRecipientNameTo() {"},{"lineNumber":218,"author":{"gitId":"-"},"content":"        return showRecipientNameTo;"},{"lineNumber":219,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":220,"author":{"gitId":"-"},"content":""},{"lineNumber":221,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":222,"author":{"gitId":"-"},"content":"     * Hides some attributes to a student."},{"lineNumber":223,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":224,"author":{"gitId":"-"},"content":"    public void hideInformationForStudent() {"},{"lineNumber":225,"author":{"gitId":"-"},"content":"        if (questionDetails instanceof FeedbackMcqQuestionDetails) {"},{"lineNumber":226,"author":{"gitId":"-"},"content":"            ((FeedbackMcqQuestionDetails) questionDetails).setMcqWeights(Collections.emptyList());"},{"lineNumber":227,"author":{"gitId":"-"},"content":"            ((FeedbackMcqQuestionDetails) questionDetails).setMcqOtherWeight(0);"},{"lineNumber":228,"author":{"gitId":"-"},"content":"        } else if (questionDetails instanceof FeedbackMsqQuestionDetails) {"},{"lineNumber":229,"author":{"gitId":"-"},"content":"            ((FeedbackMsqQuestionDetails) questionDetails).setMsqWeights(Collections.emptyList());"},{"lineNumber":230,"author":{"gitId":"-"},"content":"            ((FeedbackMsqQuestionDetails) questionDetails).setMsqOtherWeight(0);"},{"lineNumber":231,"author":{"gitId":"-"},"content":"        } else if (questionDetails instanceof FeedbackRubricQuestionDetails) {"},{"lineNumber":232,"author":{"gitId":"-"},"content":"            ((FeedbackRubricQuestionDetails) questionDetails)"},{"lineNumber":233,"author":{"gitId":"-"},"content":"                    .setRubricWeightsForEachCell(Collections.singletonList(Collections.emptyList()));"},{"lineNumber":234,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":235,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":236,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"hhdqirui":51,"-":185}},{"path":"src/main/java/teammates/ui/output/FeedbackQuestionsData.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.output;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.util.stream.Collectors;"},{"lineNumber":5,"author":{"gitId":"-"},"content":""},{"lineNumber":6,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;"},{"lineNumber":7,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.FeedbackQuestion;"},{"lineNumber":8,"author":{"gitId":"-"},"content":""},{"lineNumber":9,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":10,"author":{"gitId":"-"},"content":" * The API output format of a list of {@link FeedbackQuestionAttributes}."},{"lineNumber":11,"author":{"gitId":"-"},"content":" */"},{"lineNumber":12,"author":{"gitId":"-"},"content":"public class FeedbackQuestionsData extends ApiOutput {"},{"lineNumber":13,"author":{"gitId":"-"},"content":"    private List\u003cFeedbackQuestionData\u003e questions;"},{"lineNumber":14,"author":{"gitId":"-"},"content":""},{"lineNumber":15,"author":{"gitId":"-"},"content":"    public FeedbackQuestionsData(List\u003cFeedbackQuestionAttributes\u003e questionAttributesList) {"},{"lineNumber":16,"author":{"gitId":"-"},"content":"        questions \u003d questionAttributesList.stream().map(FeedbackQuestionData::new).collect(Collectors.toList());"},{"lineNumber":17,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":18,"author":{"gitId":"-"},"content":""},{"lineNumber":19,"author":{"gitId":"cedricongjh"},"content":"    private FeedbackQuestionsData() {"},{"lineNumber":20,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":21,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":22,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":23,"author":{"gitId":"cedricongjh"},"content":"    /**"},{"lineNumber":24,"author":{"gitId":"cedricongjh"},"content":"     * Generates FeedbackQuestionsData for a list of FeedbackQuestions."},{"lineNumber":25,"author":{"gitId":"cedricongjh"},"content":"     */"},{"lineNumber":26,"author":{"gitId":"cedricongjh"},"content":"    public static FeedbackQuestionsData makeFeedbackQuestionsData(List\u003cFeedbackQuestion\u003e feedbackQuestions) {"},{"lineNumber":27,"author":{"gitId":"cedricongjh"},"content":"        FeedbackQuestionsData feedbackQuestionsData \u003d new FeedbackQuestionsData();"},{"lineNumber":28,"author":{"gitId":"cedricongjh"},"content":"        List\u003cFeedbackQuestionData\u003e questions \u003d"},{"lineNumber":29,"author":{"gitId":"cedricongjh"},"content":"                feedbackQuestions.stream().map(FeedbackQuestionData::new).collect(Collectors.toList());"},{"lineNumber":30,"author":{"gitId":"cedricongjh"},"content":"        feedbackQuestionsData.setQuestions(questions);"},{"lineNumber":31,"author":{"gitId":"cedricongjh"},"content":"        return feedbackQuestionsData;"},{"lineNumber":32,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":33,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":34,"author":{"gitId":"-"},"content":"    public List\u003cFeedbackQuestionData\u003e getQuestions() {"},{"lineNumber":35,"author":{"gitId":"-"},"content":"        return questions;"},{"lineNumber":36,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":37,"author":{"gitId":"-"},"content":""},{"lineNumber":38,"author":{"gitId":"cedricongjh"},"content":"    public void setQuestions(List\u003cFeedbackQuestionData\u003e questions) {"},{"lineNumber":39,"author":{"gitId":"cedricongjh"},"content":"        this.questions \u003d questions;"},{"lineNumber":40,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":41,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":42,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":43,"author":{"gitId":"-"},"content":"     * Normalizes question number in questions by setting question number in sequence (i.e. 1, 2, 3, 4 ...)."},{"lineNumber":44,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":45,"author":{"gitId":"-"},"content":"    public void normalizeQuestionNumber() {"},{"lineNumber":46,"author":{"gitId":"-"},"content":"        for (int i \u003d 1; i \u003c\u003d questions.size(); i++) {"},{"lineNumber":47,"author":{"gitId":"-"},"content":"            questions.get(i - 1).setQuestionNumber(i);"},{"lineNumber":48,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":49,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":50,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"cedricongjh":20,"-":30}},{"path":"src/main/java/teammates/ui/output/FeedbackSessionData.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.output;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.time.Instant;"},{"lineNumber":4,"author":{"gitId":"kevin9foong"},"content":"import java.util.HashMap;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.util.Map;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import java.util.stream.Collectors;"},{"lineNumber":7,"author":{"gitId":"-"},"content":""},{"lineNumber":8,"author":{"gitId":"-"},"content":"import javax.annotation.Nullable;"},{"lineNumber":9,"author":{"gitId":"-"},"content":""},{"lineNumber":10,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.InstructorPermissionSet;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackSessionAttributes;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import teammates.common.util.TimeHelper;"},{"lineNumber":14,"author":{"gitId":"kevin9foong"},"content":"import teammates.storage.sqlentity.DeadlineExtension;"},{"lineNumber":15,"author":{"gitId":"kevin9foong"},"content":"import teammates.storage.sqlentity.FeedbackSession;"},{"lineNumber":16,"author":{"gitId":"kevin9foong"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":17,"author":{"gitId":"kevin9foong"},"content":"import teammates.storage.sqlentity.Student;"},{"lineNumber":18,"author":{"gitId":"-"},"content":""},{"lineNumber":19,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":20,"author":{"gitId":"-"},"content":" * The API output format of {@link FeedbackSessionAttributes}."},{"lineNumber":21,"author":{"gitId":"-"},"content":" */"},{"lineNumber":22,"author":{"gitId":"-"},"content":"public class FeedbackSessionData extends ApiOutput {"},{"lineNumber":23,"author":{"gitId":"-"},"content":"    private final String courseId;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"    private final String timeZone;"},{"lineNumber":25,"author":{"gitId":"-"},"content":"    private final String feedbackSessionName;"},{"lineNumber":26,"author":{"gitId":"-"},"content":"    private final String instructions;"},{"lineNumber":27,"author":{"gitId":"-"},"content":""},{"lineNumber":28,"author":{"gitId":"-"},"content":"    private final Long submissionStartTimestamp;"},{"lineNumber":29,"author":{"gitId":"-"},"content":"    private final Long submissionEndTimestamp;"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    @Nullable"},{"lineNumber":31,"author":{"gitId":"kevin9foong"},"content":"    private Long submissionEndWithExtensionTimestamp;"},{"lineNumber":32,"author":{"gitId":"-"},"content":"    @Nullable"},{"lineNumber":33,"author":{"gitId":"-"},"content":"    private Long sessionVisibleFromTimestamp;"},{"lineNumber":34,"author":{"gitId":"-"},"content":"    @Nullable"},{"lineNumber":35,"author":{"gitId":"-"},"content":"    private Long resultVisibleFromTimestamp;"},{"lineNumber":36,"author":{"gitId":"-"},"content":"    private Long gracePeriod;"},{"lineNumber":37,"author":{"gitId":"-"},"content":""},{"lineNumber":38,"author":{"gitId":"-"},"content":"    private SessionVisibleSetting sessionVisibleSetting;"},{"lineNumber":39,"author":{"gitId":"-"},"content":"    @Nullable"},{"lineNumber":40,"author":{"gitId":"-"},"content":"    private Long customSessionVisibleTimestamp;"},{"lineNumber":41,"author":{"gitId":"-"},"content":""},{"lineNumber":42,"author":{"gitId":"-"},"content":"    private ResponseVisibleSetting responseVisibleSetting;"},{"lineNumber":43,"author":{"gitId":"-"},"content":"    @Nullable"},{"lineNumber":44,"author":{"gitId":"-"},"content":"    private Long customResponseVisibleTimestamp;"},{"lineNumber":45,"author":{"gitId":"-"},"content":""},{"lineNumber":46,"author":{"gitId":"-"},"content":"    private FeedbackSessionSubmissionStatus submissionStatus;"},{"lineNumber":47,"author":{"gitId":"-"},"content":"    private FeedbackSessionPublishStatus publishStatus;"},{"lineNumber":48,"author":{"gitId":"-"},"content":""},{"lineNumber":49,"author":{"gitId":"-"},"content":"    private Boolean isClosingEmailEnabled;"},{"lineNumber":50,"author":{"gitId":"-"},"content":"    private Boolean isPublishedEmailEnabled;"},{"lineNumber":51,"author":{"gitId":"-"},"content":""},{"lineNumber":52,"author":{"gitId":"-"},"content":"    private long createdAtTimestamp;"},{"lineNumber":53,"author":{"gitId":"-"},"content":"    @Nullable"},{"lineNumber":54,"author":{"gitId":"-"},"content":"    private final Long deletedAtTimestamp;"},{"lineNumber":55,"author":{"gitId":"-"},"content":"    @Nullable"},{"lineNumber":56,"author":{"gitId":"-"},"content":"    private InstructorPermissionSet privileges;"},{"lineNumber":57,"author":{"gitId":"-"},"content":""},{"lineNumber":58,"author":{"gitId":"-"},"content":"    private Map\u003cString, Long\u003e studentDeadlines;"},{"lineNumber":59,"author":{"gitId":"-"},"content":"    private Map\u003cString, Long\u003e instructorDeadlines;"},{"lineNumber":60,"author":{"gitId":"-"},"content":""},{"lineNumber":61,"author":{"gitId":"-"},"content":"    public FeedbackSessionData(FeedbackSessionAttributes feedbackSessionAttributes) {"},{"lineNumber":62,"author":{"gitId":"-"},"content":"        String timeZone \u003d feedbackSessionAttributes.getTimeZone();"},{"lineNumber":63,"author":{"gitId":"-"},"content":"        this.courseId \u003d feedbackSessionAttributes.getCourseId();"},{"lineNumber":64,"author":{"gitId":"-"},"content":"        this.timeZone \u003d timeZone;"},{"lineNumber":65,"author":{"gitId":"-"},"content":"        this.feedbackSessionName \u003d feedbackSessionAttributes.getFeedbackSessionName();"},{"lineNumber":66,"author":{"gitId":"-"},"content":"        this.instructions \u003d feedbackSessionAttributes.getInstructions();"},{"lineNumber":67,"author":{"gitId":"-"},"content":"        this.submissionStartTimestamp \u003d TimeHelper.getMidnightAdjustedInstantBasedOnZone("},{"lineNumber":68,"author":{"gitId":"-"},"content":"                feedbackSessionAttributes.getStartTime(), timeZone, true).toEpochMilli();"},{"lineNumber":69,"author":{"gitId":"-"},"content":"        this.submissionEndTimestamp \u003d TimeHelper.getMidnightAdjustedInstantBasedOnZone("},{"lineNumber":70,"author":{"gitId":"-"},"content":"                feedbackSessionAttributes.getEndTime(), timeZone, true).toEpochMilli();"},{"lineNumber":71,"author":{"gitId":"-"},"content":"        this.submissionEndWithExtensionTimestamp \u003d TimeHelper.getMidnightAdjustedInstantBasedOnZone("},{"lineNumber":72,"author":{"gitId":"-"},"content":"                feedbackSessionAttributes.getDeadline(), timeZone, true).toEpochMilli();"},{"lineNumber":73,"author":{"gitId":"-"},"content":"        this.gracePeriod \u003d feedbackSessionAttributes.getGracePeriodMinutes();"},{"lineNumber":74,"author":{"gitId":"-"},"content":""},{"lineNumber":75,"author":{"gitId":"-"},"content":"        Instant sessionVisibleTime \u003d feedbackSessionAttributes.getSessionVisibleFromTime();"},{"lineNumber":76,"author":{"gitId":"-"},"content":"        this.sessionVisibleFromTimestamp \u003d TimeHelper.getMidnightAdjustedInstantBasedOnZone("},{"lineNumber":77,"author":{"gitId":"-"},"content":"                sessionVisibleTime, timeZone, true).toEpochMilli();"},{"lineNumber":78,"author":{"gitId":"-"},"content":"        if (sessionVisibleTime.equals(Const.TIME_REPRESENTS_FOLLOW_OPENING)) {"},{"lineNumber":79,"author":{"gitId":"-"},"content":"            this.sessionVisibleSetting \u003d SessionVisibleSetting.AT_OPEN;"},{"lineNumber":80,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":81,"author":{"gitId":"-"},"content":"            this.sessionVisibleSetting \u003d SessionVisibleSetting.CUSTOM;"},{"lineNumber":82,"author":{"gitId":"-"},"content":"            this.customSessionVisibleTimestamp \u003d this.sessionVisibleFromTimestamp;"},{"lineNumber":83,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":84,"author":{"gitId":"-"},"content":""},{"lineNumber":85,"author":{"gitId":"-"},"content":"        Instant responseVisibleTime \u003d feedbackSessionAttributes.getResultsVisibleFromTime();"},{"lineNumber":86,"author":{"gitId":"-"},"content":"        this.resultVisibleFromTimestamp \u003d TimeHelper.getMidnightAdjustedInstantBasedOnZone("},{"lineNumber":87,"author":{"gitId":"-"},"content":"                responseVisibleTime, timeZone, true).toEpochMilli();"},{"lineNumber":88,"author":{"gitId":"-"},"content":"        if (responseVisibleTime.equals(Const.TIME_REPRESENTS_FOLLOW_VISIBLE)) {"},{"lineNumber":89,"author":{"gitId":"-"},"content":"            this.responseVisibleSetting \u003d ResponseVisibleSetting.AT_VISIBLE;"},{"lineNumber":90,"author":{"gitId":"-"},"content":"        } else if (responseVisibleTime.equals(Const.TIME_REPRESENTS_LATER)) {"},{"lineNumber":91,"author":{"gitId":"-"},"content":"            this.responseVisibleSetting \u003d ResponseVisibleSetting.LATER;"},{"lineNumber":92,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":93,"author":{"gitId":"-"},"content":"            this.responseVisibleSetting \u003d ResponseVisibleSetting.CUSTOM;"},{"lineNumber":94,"author":{"gitId":"-"},"content":"            this.customResponseVisibleTimestamp \u003d this.resultVisibleFromTimestamp;"},{"lineNumber":95,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":96,"author":{"gitId":"-"},"content":""},{"lineNumber":97,"author":{"gitId":"-"},"content":"        if (!feedbackSessionAttributes.isVisible()) {"},{"lineNumber":98,"author":{"gitId":"-"},"content":"            this.submissionStatus \u003d FeedbackSessionSubmissionStatus.NOT_VISIBLE;"},{"lineNumber":99,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":100,"author":{"gitId":"-"},"content":"        if (feedbackSessionAttributes.isVisible() \u0026\u0026 !feedbackSessionAttributes.isOpened()) {"},{"lineNumber":101,"author":{"gitId":"-"},"content":"            this.submissionStatus \u003d FeedbackSessionSubmissionStatus.VISIBLE_NOT_OPEN;"},{"lineNumber":102,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":103,"author":{"gitId":"-"},"content":"        if (feedbackSessionAttributes.isOpened()) {"},{"lineNumber":104,"author":{"gitId":"-"},"content":"            this.submissionStatus \u003d FeedbackSessionSubmissionStatus.OPEN;"},{"lineNumber":105,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":106,"author":{"gitId":"-"},"content":"        if (feedbackSessionAttributes.isInGracePeriod()) {"},{"lineNumber":107,"author":{"gitId":"-"},"content":"            this.submissionStatus \u003d FeedbackSessionSubmissionStatus.GRACE_PERIOD;"},{"lineNumber":108,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":109,"author":{"gitId":"-"},"content":"        if (feedbackSessionAttributes.isClosed()) {"},{"lineNumber":110,"author":{"gitId":"-"},"content":"            this.submissionStatus \u003d FeedbackSessionSubmissionStatus.CLOSED;"},{"lineNumber":111,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":112,"author":{"gitId":"-"},"content":""},{"lineNumber":113,"author":{"gitId":"-"},"content":"        if (feedbackSessionAttributes.isPublished()) {"},{"lineNumber":114,"author":{"gitId":"-"},"content":"            this.publishStatus \u003d FeedbackSessionPublishStatus.PUBLISHED;"},{"lineNumber":115,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":116,"author":{"gitId":"-"},"content":"            this.publishStatus \u003d FeedbackSessionPublishStatus.NOT_PUBLISHED;"},{"lineNumber":117,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":118,"author":{"gitId":"-"},"content":""},{"lineNumber":119,"author":{"gitId":"-"},"content":"        this.isClosingEmailEnabled \u003d feedbackSessionAttributes.isClosingEmailEnabled();"},{"lineNumber":120,"author":{"gitId":"-"},"content":"        this.isPublishedEmailEnabled \u003d feedbackSessionAttributes.isPublishedEmailEnabled();"},{"lineNumber":121,"author":{"gitId":"-"},"content":""},{"lineNumber":122,"author":{"gitId":"-"},"content":"        this.createdAtTimestamp \u003d feedbackSessionAttributes.getCreatedTime().toEpochMilli();"},{"lineNumber":123,"author":{"gitId":"-"},"content":"        if (feedbackSessionAttributes.getDeletedTime() \u003d\u003d null) {"},{"lineNumber":124,"author":{"gitId":"-"},"content":"            this.deletedAtTimestamp \u003d null;"},{"lineNumber":125,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":126,"author":{"gitId":"-"},"content":"            this.deletedAtTimestamp \u003d feedbackSessionAttributes.getDeletedTime().toEpochMilli();"},{"lineNumber":127,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":128,"author":{"gitId":"-"},"content":""},{"lineNumber":129,"author":{"gitId":"-"},"content":"        String userEmail \u003d feedbackSessionAttributes.getUserEmail();"},{"lineNumber":130,"author":{"gitId":"-"},"content":"        this.studentDeadlines \u003d feedbackSessionAttributes.getStudentDeadlines()"},{"lineNumber":131,"author":{"gitId":"-"},"content":"                .entrySet()"},{"lineNumber":132,"author":{"gitId":"-"},"content":"                .stream()"},{"lineNumber":133,"author":{"gitId":"-"},"content":"                .filter(entry -\u003e userEmail \u003d\u003d null || userEmail.equals(entry.getKey()))"},{"lineNumber":134,"author":{"gitId":"-"},"content":"                .collect(Collectors.toMap(Map.Entry::getKey, entry -\u003e"},{"lineNumber":135,"author":{"gitId":"-"},"content":"                        TimeHelper.getMidnightAdjustedInstantBasedOnZone(entry.getValue(), timeZone, true)"},{"lineNumber":136,"author":{"gitId":"-"},"content":"                                .toEpochMilli()));"},{"lineNumber":137,"author":{"gitId":"-"},"content":""},{"lineNumber":138,"author":{"gitId":"-"},"content":"        this.instructorDeadlines \u003d feedbackSessionAttributes.getInstructorDeadlines()"},{"lineNumber":139,"author":{"gitId":"-"},"content":"                .entrySet()"},{"lineNumber":140,"author":{"gitId":"-"},"content":"                .stream()"},{"lineNumber":141,"author":{"gitId":"-"},"content":"                .filter(entry -\u003e userEmail \u003d\u003d null || userEmail.equals(entry.getKey()))"},{"lineNumber":142,"author":{"gitId":"-"},"content":"                .collect(Collectors.toMap(Map.Entry::getKey, entry -\u003e"},{"lineNumber":143,"author":{"gitId":"-"},"content":"                        TimeHelper.getMidnightAdjustedInstantBasedOnZone(entry.getValue(), timeZone, true)"},{"lineNumber":144,"author":{"gitId":"-"},"content":"                                .toEpochMilli()));"},{"lineNumber":145,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":146,"author":{"gitId":"-"},"content":""},{"lineNumber":147,"author":{"gitId":"kevin9foong"},"content":"    public FeedbackSessionData(FeedbackSession feedbackSession) {"},{"lineNumber":148,"author":{"gitId":"kevin9foong"},"content":"        String timeZone \u003d feedbackSession.getCourse().getTimeZone();"},{"lineNumber":149,"author":{"gitId":"kevin9foong"},"content":"        this.courseId \u003d feedbackSession.getCourse().getId();"},{"lineNumber":150,"author":{"gitId":"kevin9foong"},"content":"        this.timeZone \u003d timeZone;"},{"lineNumber":151,"author":{"gitId":"kevin9foong"},"content":"        this.feedbackSessionName \u003d feedbackSession.getName();"},{"lineNumber":152,"author":{"gitId":"kevin9foong"},"content":"        this.instructions \u003d feedbackSession.getInstructions();"},{"lineNumber":153,"author":{"gitId":"kevin9foong"},"content":"        this.submissionStartTimestamp \u003d TimeHelper.getMidnightAdjustedInstantBasedOnZone("},{"lineNumber":154,"author":{"gitId":"kevin9foong"},"content":"                feedbackSession.getStartTime(), timeZone, true).toEpochMilli();"},{"lineNumber":155,"author":{"gitId":"kevin9foong"},"content":"        this.submissionEndTimestamp \u003d TimeHelper.getMidnightAdjustedInstantBasedOnZone("},{"lineNumber":156,"author":{"gitId":"kevin9foong"},"content":"                feedbackSession.getEndTime(), timeZone, true).toEpochMilli();"},{"lineNumber":157,"author":{"gitId":"kevin9foong"},"content":"        // If no deadline extension time is provided, then the end time with extension is assumed to be"},{"lineNumber":158,"author":{"gitId":"kevin9foong"},"content":"        // just the end time."},{"lineNumber":159,"author":{"gitId":"kevin9foong"},"content":"        this.submissionEndWithExtensionTimestamp \u003d TimeHelper.getMidnightAdjustedInstantBasedOnZone("},{"lineNumber":160,"author":{"gitId":"kevin9foong"},"content":"            feedbackSession.getEndTime(), timeZone, true).toEpochMilli();"},{"lineNumber":161,"author":{"gitId":"kevin9foong"},"content":"        this.gracePeriod \u003d feedbackSession.getGracePeriod().toMinutes();"},{"lineNumber":162,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":163,"author":{"gitId":"kevin9foong"},"content":"        Instant sessionVisibleTime \u003d feedbackSession.getSessionVisibleFromTime();"},{"lineNumber":164,"author":{"gitId":"kevin9foong"},"content":"        this.sessionVisibleFromTimestamp \u003d TimeHelper.getMidnightAdjustedInstantBasedOnZone("},{"lineNumber":165,"author":{"gitId":"kevin9foong"},"content":"                sessionVisibleTime, timeZone, true).toEpochMilli();"},{"lineNumber":166,"author":{"gitId":"kevin9foong"},"content":"        if (sessionVisibleTime.equals(Const.TIME_REPRESENTS_FOLLOW_OPENING)) {"},{"lineNumber":167,"author":{"gitId":"kevin9foong"},"content":"            this.sessionVisibleSetting \u003d SessionVisibleSetting.AT_OPEN;"},{"lineNumber":168,"author":{"gitId":"kevin9foong"},"content":"        } else {"},{"lineNumber":169,"author":{"gitId":"kevin9foong"},"content":"            this.sessionVisibleSetting \u003d SessionVisibleSetting.CUSTOM;"},{"lineNumber":170,"author":{"gitId":"kevin9foong"},"content":"            this.customSessionVisibleTimestamp \u003d this.sessionVisibleFromTimestamp;"},{"lineNumber":171,"author":{"gitId":"kevin9foong"},"content":"        }"},{"lineNumber":172,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":173,"author":{"gitId":"kevin9foong"},"content":"        Instant responseVisibleTime \u003d feedbackSession.getResultsVisibleFromTime();"},{"lineNumber":174,"author":{"gitId":"kevin9foong"},"content":"        this.resultVisibleFromTimestamp \u003d TimeHelper.getMidnightAdjustedInstantBasedOnZone("},{"lineNumber":175,"author":{"gitId":"kevin9foong"},"content":"                responseVisibleTime, timeZone, true).toEpochMilli();"},{"lineNumber":176,"author":{"gitId":"kevin9foong"},"content":"        if (responseVisibleTime.equals(Const.TIME_REPRESENTS_FOLLOW_VISIBLE)) {"},{"lineNumber":177,"author":{"gitId":"kevin9foong"},"content":"            this.responseVisibleSetting \u003d ResponseVisibleSetting.AT_VISIBLE;"},{"lineNumber":178,"author":{"gitId":"kevin9foong"},"content":"        } else if (responseVisibleTime.equals(Const.TIME_REPRESENTS_LATER)) {"},{"lineNumber":179,"author":{"gitId":"kevin9foong"},"content":"            this.responseVisibleSetting \u003d ResponseVisibleSetting.LATER;"},{"lineNumber":180,"author":{"gitId":"kevin9foong"},"content":"        } else {"},{"lineNumber":181,"author":{"gitId":"kevin9foong"},"content":"            this.responseVisibleSetting \u003d ResponseVisibleSetting.CUSTOM;"},{"lineNumber":182,"author":{"gitId":"kevin9foong"},"content":"            this.customResponseVisibleTimestamp \u003d this.resultVisibleFromTimestamp;"},{"lineNumber":183,"author":{"gitId":"kevin9foong"},"content":"        }"},{"lineNumber":184,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":185,"author":{"gitId":"kevin9foong"},"content":"        if (!feedbackSession.isVisible()) {"},{"lineNumber":186,"author":{"gitId":"kevin9foong"},"content":"            this.submissionStatus \u003d FeedbackSessionSubmissionStatus.NOT_VISIBLE;"},{"lineNumber":187,"author":{"gitId":"kevin9foong"},"content":"        } else if (feedbackSession.isVisible() \u0026\u0026 !feedbackSession.isOpened()"},{"lineNumber":188,"author":{"gitId":"kevin9foong"},"content":"                \u0026\u0026 !feedbackSession.isClosed()) {"},{"lineNumber":189,"author":{"gitId":"kevin9foong"},"content":"            this.submissionStatus \u003d FeedbackSessionSubmissionStatus.VISIBLE_NOT_OPEN;"},{"lineNumber":190,"author":{"gitId":"kevin9foong"},"content":"        } else if (feedbackSession.isInGracePeriod()) {"},{"lineNumber":191,"author":{"gitId":"kevin9foong"},"content":"            this.submissionStatus \u003d FeedbackSessionSubmissionStatus.GRACE_PERIOD;"},{"lineNumber":192,"author":{"gitId":"kevin9foong"},"content":"        } else if (feedbackSession.isOpened()) {"},{"lineNumber":193,"author":{"gitId":"kevin9foong"},"content":"            this.submissionStatus \u003d FeedbackSessionSubmissionStatus.OPEN;"},{"lineNumber":194,"author":{"gitId":"kevin9foong"},"content":"        } else if (feedbackSession.isClosed()) {"},{"lineNumber":195,"author":{"gitId":"kevin9foong"},"content":"            this.submissionStatus \u003d FeedbackSessionSubmissionStatus.CLOSED;"},{"lineNumber":196,"author":{"gitId":"kevin9foong"},"content":"        }"},{"lineNumber":197,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":198,"author":{"gitId":"kevin9foong"},"content":"        if (feedbackSession.isPublished()) {"},{"lineNumber":199,"author":{"gitId":"kevin9foong"},"content":"            this.publishStatus \u003d FeedbackSessionPublishStatus.PUBLISHED;"},{"lineNumber":200,"author":{"gitId":"kevin9foong"},"content":"        } else {"},{"lineNumber":201,"author":{"gitId":"kevin9foong"},"content":"            this.publishStatus \u003d FeedbackSessionPublishStatus.NOT_PUBLISHED;"},{"lineNumber":202,"author":{"gitId":"kevin9foong"},"content":"        }"},{"lineNumber":203,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":204,"author":{"gitId":"kevin9foong"},"content":"        this.isClosingEmailEnabled \u003d feedbackSession.isClosingEmailEnabled();"},{"lineNumber":205,"author":{"gitId":"kevin9foong"},"content":"        this.isPublishedEmailEnabled \u003d feedbackSession.isPublishedEmailEnabled();"},{"lineNumber":206,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":207,"author":{"gitId":"kevin9foong"},"content":"        this.createdAtTimestamp \u003d feedbackSession.getCreatedAt().toEpochMilli();"},{"lineNumber":208,"author":{"gitId":"kevin9foong"},"content":"        if (feedbackSession.getDeletedAt() \u003d\u003d null) {"},{"lineNumber":209,"author":{"gitId":"kevin9foong"},"content":"            this.deletedAtTimestamp \u003d null;"},{"lineNumber":210,"author":{"gitId":"kevin9foong"},"content":"        } else {"},{"lineNumber":211,"author":{"gitId":"kevin9foong"},"content":"            this.deletedAtTimestamp \u003d feedbackSession.getDeletedAt().toEpochMilli();"},{"lineNumber":212,"author":{"gitId":"kevin9foong"},"content":"        }"},{"lineNumber":213,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":214,"author":{"gitId":"kevin9foong"},"content":"        this.studentDeadlines \u003d new HashMap\u003c\u003e();"},{"lineNumber":215,"author":{"gitId":"kevin9foong"},"content":"        this.instructorDeadlines \u003d new HashMap\u003c\u003e();"},{"lineNumber":216,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":217,"author":{"gitId":"kevin9foong"},"content":"        // place deadline extensions into appropriate student and instructor deadline maps"},{"lineNumber":218,"author":{"gitId":"kevin9foong"},"content":"        for (DeadlineExtension de : feedbackSession.getDeadlineExtensions()) {"},{"lineNumber":219,"author":{"gitId":"kevin9foong"},"content":"            if (de.getUser() instanceof Student) {"},{"lineNumber":220,"author":{"gitId":"kevin9foong"},"content":"                this.studentDeadlines.put(de.getUser().getEmail(),"},{"lineNumber":221,"author":{"gitId":"kevin9foong"},"content":"                        TimeHelper.getMidnightAdjustedInstantBasedOnZone(de.getEndTime(), timeZone, true).toEpochMilli());"},{"lineNumber":222,"author":{"gitId":"kevin9foong"},"content":"            }"},{"lineNumber":223,"author":{"gitId":"kevin9foong"},"content":"            if (de.getUser() instanceof Instructor) {"},{"lineNumber":224,"author":{"gitId":"kevin9foong"},"content":"                this.instructorDeadlines.put(de.getUser().getEmail(),"},{"lineNumber":225,"author":{"gitId":"kevin9foong"},"content":"                        TimeHelper.getMidnightAdjustedInstantBasedOnZone(de.getEndTime(), timeZone, true).toEpochMilli());"},{"lineNumber":226,"author":{"gitId":"kevin9foong"},"content":"            }"},{"lineNumber":227,"author":{"gitId":"kevin9foong"},"content":"        }"},{"lineNumber":228,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":229,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":230,"author":{"gitId":"kevin9foong"},"content":"    /**"},{"lineNumber":231,"author":{"gitId":"kevin9foong"},"content":"     * Constructs FeedbackSessionData for a given user deadline."},{"lineNumber":232,"author":{"gitId":"kevin9foong"},"content":"     */"},{"lineNumber":233,"author":{"gitId":"kevin9foong"},"content":"    public FeedbackSessionData(FeedbackSession feedbackSession, Instant extendedDeadline) {"},{"lineNumber":234,"author":{"gitId":"kevin9foong"},"content":"        this(feedbackSession);"},{"lineNumber":235,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":236,"author":{"gitId":"kevin9foong"},"content":"        this.submissionEndWithExtensionTimestamp \u003d TimeHelper.getMidnightAdjustedInstantBasedOnZone("},{"lineNumber":237,"author":{"gitId":"kevin9foong"},"content":"            extendedDeadline, timeZone, true).toEpochMilli();"},{"lineNumber":238,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":239,"author":{"gitId":"kevin9foong"},"content":"        if (!feedbackSession.isVisible()) {"},{"lineNumber":240,"author":{"gitId":"kevin9foong"},"content":"            this.submissionStatus \u003d FeedbackSessionSubmissionStatus.NOT_VISIBLE;"},{"lineNumber":241,"author":{"gitId":"kevin9foong"},"content":"        } else if (feedbackSession.isVisible() \u0026\u0026 !feedbackSession.isOpenedGivenExtendedDeadline(extendedDeadline)"},{"lineNumber":242,"author":{"gitId":"kevin9foong"},"content":"                \u0026\u0026 !feedbackSession.isClosedGivenExtendedDeadline(extendedDeadline)) {"},{"lineNumber":243,"author":{"gitId":"kevin9foong"},"content":"            this.submissionStatus \u003d FeedbackSessionSubmissionStatus.VISIBLE_NOT_OPEN;"},{"lineNumber":244,"author":{"gitId":"kevin9foong"},"content":"        } else if (feedbackSession.isInGracePeriodGivenExtendedDeadline(extendedDeadline)) {"},{"lineNumber":245,"author":{"gitId":"kevin9foong"},"content":"            this.submissionStatus \u003d FeedbackSessionSubmissionStatus.GRACE_PERIOD;"},{"lineNumber":246,"author":{"gitId":"kevin9foong"},"content":"        } else if (feedbackSession.isOpenedGivenExtendedDeadline(extendedDeadline)) {"},{"lineNumber":247,"author":{"gitId":"kevin9foong"},"content":"            this.submissionStatus \u003d FeedbackSessionSubmissionStatus.OPEN;"},{"lineNumber":248,"author":{"gitId":"kevin9foong"},"content":"        } else if (feedbackSession.isClosedGivenExtendedDeadline(extendedDeadline)) {"},{"lineNumber":249,"author":{"gitId":"kevin9foong"},"content":"            this.submissionStatus \u003d FeedbackSessionSubmissionStatus.CLOSED;"},{"lineNumber":250,"author":{"gitId":"kevin9foong"},"content":"        }"},{"lineNumber":251,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":252,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":253,"author":{"gitId":"-"},"content":"    public String getCourseId() {"},{"lineNumber":254,"author":{"gitId":"-"},"content":"        return courseId;"},{"lineNumber":255,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":256,"author":{"gitId":"-"},"content":""},{"lineNumber":257,"author":{"gitId":"-"},"content":"    public String getTimeZone() {"},{"lineNumber":258,"author":{"gitId":"-"},"content":"        return timeZone;"},{"lineNumber":259,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":260,"author":{"gitId":"-"},"content":""},{"lineNumber":261,"author":{"gitId":"-"},"content":"    public String getFeedbackSessionName() {"},{"lineNumber":262,"author":{"gitId":"-"},"content":"        return feedbackSessionName;"},{"lineNumber":263,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":264,"author":{"gitId":"-"},"content":""},{"lineNumber":265,"author":{"gitId":"-"},"content":"    public String getInstructions() {"},{"lineNumber":266,"author":{"gitId":"-"},"content":"        return instructions;"},{"lineNumber":267,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":268,"author":{"gitId":"-"},"content":""},{"lineNumber":269,"author":{"gitId":"-"},"content":"    public long getSubmissionStartTimestamp() {"},{"lineNumber":270,"author":{"gitId":"-"},"content":"        return submissionStartTimestamp;"},{"lineNumber":271,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":272,"author":{"gitId":"-"},"content":""},{"lineNumber":273,"author":{"gitId":"-"},"content":"    public long getSubmissionEndTimestamp() {"},{"lineNumber":274,"author":{"gitId":"-"},"content":"        return submissionEndTimestamp;"},{"lineNumber":275,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":276,"author":{"gitId":"-"},"content":""},{"lineNumber":277,"author":{"gitId":"-"},"content":"    public long getSubmissionEndWithExtensionTimestamp() {"},{"lineNumber":278,"author":{"gitId":"-"},"content":"        return submissionEndWithExtensionTimestamp;"},{"lineNumber":279,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":280,"author":{"gitId":"-"},"content":""},{"lineNumber":281,"author":{"gitId":"-"},"content":"    public Long getSessionVisibleFromTimestamp() {"},{"lineNumber":282,"author":{"gitId":"-"},"content":"        return sessionVisibleFromTimestamp;"},{"lineNumber":283,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":284,"author":{"gitId":"-"},"content":""},{"lineNumber":285,"author":{"gitId":"-"},"content":"    public Long getResultVisibleFromTimestamp() {"},{"lineNumber":286,"author":{"gitId":"-"},"content":"        return resultVisibleFromTimestamp;"},{"lineNumber":287,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":288,"author":{"gitId":"-"},"content":""},{"lineNumber":289,"author":{"gitId":"-"},"content":"    public Long getGracePeriod() {"},{"lineNumber":290,"author":{"gitId":"-"},"content":"        return gracePeriod;"},{"lineNumber":291,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":292,"author":{"gitId":"-"},"content":""},{"lineNumber":293,"author":{"gitId":"-"},"content":"    public SessionVisibleSetting getSessionVisibleSetting() {"},{"lineNumber":294,"author":{"gitId":"-"},"content":"        return sessionVisibleSetting;"},{"lineNumber":295,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":296,"author":{"gitId":"-"},"content":""},{"lineNumber":297,"author":{"gitId":"-"},"content":"    public Long getCustomSessionVisibleTimestamp() {"},{"lineNumber":298,"author":{"gitId":"-"},"content":"        return customSessionVisibleTimestamp;"},{"lineNumber":299,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":300,"author":{"gitId":"-"},"content":""},{"lineNumber":301,"author":{"gitId":"-"},"content":"    public ResponseVisibleSetting getResponseVisibleSetting() {"},{"lineNumber":302,"author":{"gitId":"-"},"content":"        return responseVisibleSetting;"},{"lineNumber":303,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":304,"author":{"gitId":"-"},"content":""},{"lineNumber":305,"author":{"gitId":"-"},"content":"    public Long getCustomResponseVisibleTimestamp() {"},{"lineNumber":306,"author":{"gitId":"-"},"content":"        return customResponseVisibleTimestamp;"},{"lineNumber":307,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":308,"author":{"gitId":"-"},"content":""},{"lineNumber":309,"author":{"gitId":"-"},"content":"    public FeedbackSessionSubmissionStatus getSubmissionStatus() {"},{"lineNumber":310,"author":{"gitId":"-"},"content":"        return submissionStatus;"},{"lineNumber":311,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":312,"author":{"gitId":"-"},"content":""},{"lineNumber":313,"author":{"gitId":"-"},"content":"    public FeedbackSessionPublishStatus getPublishStatus() {"},{"lineNumber":314,"author":{"gitId":"-"},"content":"        return publishStatus;"},{"lineNumber":315,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":316,"author":{"gitId":"-"},"content":""},{"lineNumber":317,"author":{"gitId":"-"},"content":"    public Boolean getIsClosingEmailEnabled() {"},{"lineNumber":318,"author":{"gitId":"-"},"content":"        return isClosingEmailEnabled;"},{"lineNumber":319,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":320,"author":{"gitId":"-"},"content":""},{"lineNumber":321,"author":{"gitId":"-"},"content":"    public Boolean getIsPublishedEmailEnabled() {"},{"lineNumber":322,"author":{"gitId":"-"},"content":"        return isPublishedEmailEnabled;"},{"lineNumber":323,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":324,"author":{"gitId":"-"},"content":""},{"lineNumber":325,"author":{"gitId":"-"},"content":"    public Map\u003cString, Long\u003e getStudentDeadlines() {"},{"lineNumber":326,"author":{"gitId":"-"},"content":"        return studentDeadlines;"},{"lineNumber":327,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":328,"author":{"gitId":"-"},"content":""},{"lineNumber":329,"author":{"gitId":"-"},"content":"    public Map\u003cString, Long\u003e getInstructorDeadlines() {"},{"lineNumber":330,"author":{"gitId":"-"},"content":"        return instructorDeadlines;"},{"lineNumber":331,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":332,"author":{"gitId":"-"},"content":""},{"lineNumber":333,"author":{"gitId":"-"},"content":"    public void setSessionVisibleFromTimestamp(Long sessionVisibleFromTimestamp) {"},{"lineNumber":334,"author":{"gitId":"-"},"content":"        this.sessionVisibleFromTimestamp \u003d sessionVisibleFromTimestamp;"},{"lineNumber":335,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":336,"author":{"gitId":"-"},"content":""},{"lineNumber":337,"author":{"gitId":"-"},"content":"    public void setResultVisibleFromTimestamp(Long resultVisibleFromTimestamp) {"},{"lineNumber":338,"author":{"gitId":"-"},"content":"        this.resultVisibleFromTimestamp \u003d resultVisibleFromTimestamp;"},{"lineNumber":339,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":340,"author":{"gitId":"-"},"content":""},{"lineNumber":341,"author":{"gitId":"-"},"content":"    public void setGracePeriod(Long gracePeriod) {"},{"lineNumber":342,"author":{"gitId":"-"},"content":"        this.gracePeriod \u003d gracePeriod;"},{"lineNumber":343,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":344,"author":{"gitId":"-"},"content":""},{"lineNumber":345,"author":{"gitId":"-"},"content":"    public void setSessionVisibleSetting(SessionVisibleSetting sessionVisibleSetting) {"},{"lineNumber":346,"author":{"gitId":"-"},"content":"        this.sessionVisibleSetting \u003d sessionVisibleSetting;"},{"lineNumber":347,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":348,"author":{"gitId":"-"},"content":""},{"lineNumber":349,"author":{"gitId":"-"},"content":"    public void setCustomSessionVisibleTimestamp(Long customSessionVisibleTimestamp) {"},{"lineNumber":350,"author":{"gitId":"-"},"content":"        this.customSessionVisibleTimestamp \u003d customSessionVisibleTimestamp;"},{"lineNumber":351,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":352,"author":{"gitId":"-"},"content":""},{"lineNumber":353,"author":{"gitId":"-"},"content":"    public void setResponseVisibleSetting(ResponseVisibleSetting responseVisibleSetting) {"},{"lineNumber":354,"author":{"gitId":"-"},"content":"        this.responseVisibleSetting \u003d responseVisibleSetting;"},{"lineNumber":355,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":356,"author":{"gitId":"-"},"content":""},{"lineNumber":357,"author":{"gitId":"-"},"content":"    public void setCustomResponseVisibleTimestamp(Long customResponseVisibleTimestamp) {"},{"lineNumber":358,"author":{"gitId":"-"},"content":"        this.customResponseVisibleTimestamp \u003d customResponseVisibleTimestamp;"},{"lineNumber":359,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":360,"author":{"gitId":"-"},"content":""},{"lineNumber":361,"author":{"gitId":"-"},"content":"    public void setPublishStatus(FeedbackSessionPublishStatus publishStatus) {"},{"lineNumber":362,"author":{"gitId":"-"},"content":"        this.publishStatus \u003d publishStatus;"},{"lineNumber":363,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":364,"author":{"gitId":"-"},"content":""},{"lineNumber":365,"author":{"gitId":"-"},"content":"    public void setClosingEmailEnabled(Boolean closingEmailEnabled) {"},{"lineNumber":366,"author":{"gitId":"-"},"content":"        isClosingEmailEnabled \u003d closingEmailEnabled;"},{"lineNumber":367,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":368,"author":{"gitId":"-"},"content":""},{"lineNumber":369,"author":{"gitId":"-"},"content":"    public void setPublishedEmailEnabled(Boolean publishedEmailEnabled) {"},{"lineNumber":370,"author":{"gitId":"-"},"content":"        isPublishedEmailEnabled \u003d publishedEmailEnabled;"},{"lineNumber":371,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":372,"author":{"gitId":"-"},"content":""},{"lineNumber":373,"author":{"gitId":"-"},"content":"    public long getCreatedAtTimestamp() {"},{"lineNumber":374,"author":{"gitId":"-"},"content":"        return createdAtTimestamp;"},{"lineNumber":375,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":376,"author":{"gitId":"-"},"content":""},{"lineNumber":377,"author":{"gitId":"-"},"content":"    public void setCreatedAtTimestamp(long timestamp) {"},{"lineNumber":378,"author":{"gitId":"-"},"content":"        createdAtTimestamp \u003d timestamp;"},{"lineNumber":379,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":380,"author":{"gitId":"-"},"content":""},{"lineNumber":381,"author":{"gitId":"-"},"content":"    public Long getDeletedAtTimestamp() {"},{"lineNumber":382,"author":{"gitId":"-"},"content":"        return deletedAtTimestamp;"},{"lineNumber":383,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":384,"author":{"gitId":"-"},"content":""},{"lineNumber":385,"author":{"gitId":"-"},"content":"    public InstructorPermissionSet getPrivileges() {"},{"lineNumber":386,"author":{"gitId":"-"},"content":"        return privileges;"},{"lineNumber":387,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":388,"author":{"gitId":"-"},"content":""},{"lineNumber":389,"author":{"gitId":"-"},"content":"    public void setPrivileges(InstructorPermissionSet privileges) {"},{"lineNumber":390,"author":{"gitId":"-"},"content":"        this.privileges \u003d privileges;"},{"lineNumber":391,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":392,"author":{"gitId":"-"},"content":""},{"lineNumber":393,"author":{"gitId":"-"},"content":"    public void setStudentDeadlines(Map\u003cString, Long\u003e studentDeadlines) {"},{"lineNumber":394,"author":{"gitId":"-"},"content":"        this.studentDeadlines \u003d studentDeadlines;"},{"lineNumber":395,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":396,"author":{"gitId":"-"},"content":""},{"lineNumber":397,"author":{"gitId":"-"},"content":"    public void setInstructorDeadlines(Map\u003cString, Long\u003e instructorDeadlines) {"},{"lineNumber":398,"author":{"gitId":"-"},"content":"        this.instructorDeadlines \u003d instructorDeadlines;"},{"lineNumber":399,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":400,"author":{"gitId":"-"},"content":""},{"lineNumber":401,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":402,"author":{"gitId":"-"},"content":"     * Hides some attributes to student."},{"lineNumber":403,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":404,"author":{"gitId":"-"},"content":"    public void hideInformationForStudent() {"},{"lineNumber":405,"author":{"gitId":"-"},"content":"        hideInformationForStudentAndInstructor();"},{"lineNumber":406,"author":{"gitId":"-"},"content":"        hideSessionVisibilityTimestamps();"},{"lineNumber":407,"author":{"gitId":"-"},"content":"        instructorDeadlines.clear();"},{"lineNumber":408,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":409,"author":{"gitId":"-"},"content":""},{"lineNumber":410,"author":{"gitId":"kevin9foong"},"content":"    /**"},{"lineNumber":411,"author":{"gitId":"kevin9foong"},"content":"     * Hides some attributes to student."},{"lineNumber":412,"author":{"gitId":"kevin9foong"},"content":"     */"},{"lineNumber":413,"author":{"gitId":"kevin9foong"},"content":"    public void hideInformationForStudent(String studentEmail) {"},{"lineNumber":414,"author":{"gitId":"kevin9foong"},"content":"        hideInformationForStudentAndInstructor();"},{"lineNumber":415,"author":{"gitId":"kevin9foong"},"content":"        hideSessionVisibilityTimestamps();"},{"lineNumber":416,"author":{"gitId":"kevin9foong"},"content":"        studentDeadlines.keySet().removeIf(email -\u003e !(email.equals(studentEmail)));"},{"lineNumber":417,"author":{"gitId":"kevin9foong"},"content":"        instructorDeadlines.clear();"},{"lineNumber":418,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":419,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":420,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":421,"author":{"gitId":"-"},"content":"     * Hides some attributes to instructor without appropriate privilege."},{"lineNumber":422,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":423,"author":{"gitId":"-"},"content":"    public void hideInformationForInstructor() {"},{"lineNumber":424,"author":{"gitId":"-"},"content":"        hideInformationForStudentAndInstructor();"},{"lineNumber":425,"author":{"gitId":"-"},"content":"        studentDeadlines.clear();"},{"lineNumber":426,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":427,"author":{"gitId":"-"},"content":""},{"lineNumber":428,"author":{"gitId":"kevin9foong"},"content":"    /**"},{"lineNumber":429,"author":{"gitId":"kevin9foong"},"content":"     * Hides some attributes to instructor without appropriate privilege."},{"lineNumber":430,"author":{"gitId":"kevin9foong"},"content":"     */"},{"lineNumber":431,"author":{"gitId":"kevin9foong"},"content":"    public void hideInformationForInstructor(String instructorEmail) {"},{"lineNumber":432,"author":{"gitId":"kevin9foong"},"content":"        hideInformationForStudentAndInstructor();"},{"lineNumber":433,"author":{"gitId":"kevin9foong"},"content":"        instructorDeadlines.keySet().removeIf(email -\u003e !(email.equals(instructorEmail)));"},{"lineNumber":434,"author":{"gitId":"kevin9foong"},"content":"        studentDeadlines.clear();"},{"lineNumber":435,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":436,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":437,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":438,"author":{"gitId":"-"},"content":"     * Hides some attributes for instructor who is submitting feedback session."},{"lineNumber":439,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":440,"author":{"gitId":"-"},"content":"    public void hideInformationForInstructorSubmission() {"},{"lineNumber":441,"author":{"gitId":"-"},"content":"        hideInformationForInstructor();"},{"lineNumber":442,"author":{"gitId":"-"},"content":"        hideSessionVisibilityTimestamps();"},{"lineNumber":443,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":444,"author":{"gitId":"-"},"content":""},{"lineNumber":445,"author":{"gitId":"kevin9foong"},"content":"    /**"},{"lineNumber":446,"author":{"gitId":"kevin9foong"},"content":"     * Hides some attributes for instructor who is submitting feedback session."},{"lineNumber":447,"author":{"gitId":"kevin9foong"},"content":"     */"},{"lineNumber":448,"author":{"gitId":"kevin9foong"},"content":"    public void hideInformationForInstructorSubmission(String userEmail) {"},{"lineNumber":449,"author":{"gitId":"kevin9foong"},"content":"        hideInformationForInstructor(userEmail);"},{"lineNumber":450,"author":{"gitId":"kevin9foong"},"content":"        hideSessionVisibilityTimestamps();"},{"lineNumber":451,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":452,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":453,"author":{"gitId":"-"},"content":"    private void hideSessionVisibilityTimestamps() {"},{"lineNumber":454,"author":{"gitId":"-"},"content":"        setSessionVisibleFromTimestamp(null);"},{"lineNumber":455,"author":{"gitId":"-"},"content":"        setResultVisibleFromTimestamp(null);"},{"lineNumber":456,"author":{"gitId":"-"},"content":"        setSessionVisibleSetting(null);"},{"lineNumber":457,"author":{"gitId":"-"},"content":"        setCustomSessionVisibleTimestamp(null);"},{"lineNumber":458,"author":{"gitId":"-"},"content":"        setResponseVisibleSetting(null);"},{"lineNumber":459,"author":{"gitId":"-"},"content":"        setCustomResponseVisibleTimestamp(null);"},{"lineNumber":460,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":461,"author":{"gitId":"-"},"content":""},{"lineNumber":462,"author":{"gitId":"-"},"content":"    private void hideInformationForStudentAndInstructor() {"},{"lineNumber":463,"author":{"gitId":"-"},"content":"        setClosingEmailEnabled(null);"},{"lineNumber":464,"author":{"gitId":"-"},"content":"        setPublishedEmailEnabled(null);"},{"lineNumber":465,"author":{"gitId":"-"},"content":"        setGracePeriod(null);"},{"lineNumber":466,"author":{"gitId":"-"},"content":"        setCreatedAtTimestamp(0);"},{"lineNumber":467,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":468,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"-":329,"kevin9foong":139}},{"path":"src/main/java/teammates/ui/output/FeedbackSessionSubmissionStatus.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.output;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":4,"author":{"gitId":"-"},"content":" * The submission status of a feedback session."},{"lineNumber":5,"author":{"gitId":"-"},"content":" */"},{"lineNumber":6,"author":{"gitId":"-"},"content":"public enum FeedbackSessionSubmissionStatus {"},{"lineNumber":7,"author":{"gitId":"-"},"content":""},{"lineNumber":8,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":9,"author":{"gitId":"-"},"content":"     * Feedback session is not visible."},{"lineNumber":10,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":11,"author":{"gitId":"-"},"content":"    NOT_VISIBLE,"},{"lineNumber":12,"author":{"gitId":"-"},"content":""},{"lineNumber":13,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":14,"author":{"gitId":"kevin9foong"},"content":"     * Feedback session is visible to view but not yet open for submission."},{"lineNumber":15,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":16,"author":{"gitId":"-"},"content":"    VISIBLE_NOT_OPEN,"},{"lineNumber":17,"author":{"gitId":"-"},"content":""},{"lineNumber":18,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":19,"author":{"gitId":"-"},"content":"     * Feedback session is open for submission."},{"lineNumber":20,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":21,"author":{"gitId":"-"},"content":"    OPEN,"},{"lineNumber":22,"author":{"gitId":"-"},"content":""},{"lineNumber":23,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":24,"author":{"gitId":"-"},"content":"     * Feedback session is in grace period."},{"lineNumber":25,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":26,"author":{"gitId":"-"},"content":"    GRACE_PERIOD,"},{"lineNumber":27,"author":{"gitId":"-"},"content":""},{"lineNumber":28,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":29,"author":{"gitId":"-"},"content":"     * Feedback session is closed for submission."},{"lineNumber":30,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":31,"author":{"gitId":"-"},"content":"    CLOSED"},{"lineNumber":32,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"-":31,"kevin9foong":1}},{"path":"src/main/java/teammates/ui/output/InstructorsData.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.output;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.util.ArrayList;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.util.stream.Collectors;"},{"lineNumber":6,"author":{"gitId":"-"},"content":""},{"lineNumber":7,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":8,"author":{"gitId":"-"},"content":""},{"lineNumber":9,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":10,"author":{"gitId":"-"},"content":" * The API output format of a list of instructors."},{"lineNumber":11,"author":{"gitId":"-"},"content":" */"},{"lineNumber":12,"author":{"gitId":"-"},"content":"public class InstructorsData extends ApiOutput {"},{"lineNumber":13,"author":{"gitId":"-"},"content":""},{"lineNumber":14,"author":{"gitId":"-"},"content":"    private List\u003cInstructorData\u003e instructors;"},{"lineNumber":15,"author":{"gitId":"-"},"content":""},{"lineNumber":16,"author":{"gitId":"-"},"content":"    public InstructorsData() {"},{"lineNumber":17,"author":{"gitId":"-"},"content":"        this.instructors \u003d new ArrayList\u003c\u003e();"},{"lineNumber":18,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":19,"author":{"gitId":"-"},"content":""},{"lineNumber":20,"author":{"gitId":"domlimm"},"content":"    public InstructorsData(List\u003cInstructor\u003e instructorsList) {"},{"lineNumber":21,"author":{"gitId":"domlimm"},"content":"        this.instructors \u003d instructorsList.stream().map(InstructorData::new).collect(Collectors.toList());"},{"lineNumber":22,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":23,"author":{"gitId":"-"},"content":""},{"lineNumber":24,"author":{"gitId":"-"},"content":"    public List\u003cInstructorData\u003e getInstructors() {"},{"lineNumber":25,"author":{"gitId":"-"},"content":"        return instructors;"},{"lineNumber":26,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":27,"author":{"gitId":"-"},"content":""},{"lineNumber":28,"author":{"gitId":"-"},"content":"    public void setInstructors(List\u003cInstructorData\u003e instructors) {"},{"lineNumber":29,"author":{"gitId":"-"},"content":"        this.instructors \u003d instructors;"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":31,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"domlimm":3,"-":28}},{"path":"src/main/java/teammates/ui/output/NotificationData.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.output;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.NotificationStyle;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.NotificationTargetUser;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.NotificationAttributes;"},{"lineNumber":6,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.Notification;"},{"lineNumber":7,"author":{"gitId":"-"},"content":""},{"lineNumber":8,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":9,"author":{"gitId":"-"},"content":" * The API output format of a notification."},{"lineNumber":10,"author":{"gitId":"-"},"content":" */"},{"lineNumber":11,"author":{"gitId":"-"},"content":"public class NotificationData extends ApiOutput {"},{"lineNumber":12,"author":{"gitId":"-"},"content":""},{"lineNumber":13,"author":{"gitId":"-"},"content":"    private String notificationId;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"    private long startTimestamp;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"    private long endTimestamp;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"    private long createdAt;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"    private NotificationStyle style;"},{"lineNumber":18,"author":{"gitId":"-"},"content":"    private NotificationTargetUser targetUser;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"    private String title;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"    private String message;"},{"lineNumber":21,"author":{"gitId":"-"},"content":"    private boolean shown;"},{"lineNumber":22,"author":{"gitId":"-"},"content":""},{"lineNumber":23,"author":{"gitId":"-"},"content":"    public NotificationData(NotificationAttributes notificationAttributes) {"},{"lineNumber":24,"author":{"gitId":"-"},"content":"        this.notificationId \u003d notificationAttributes.getNotificationId();"},{"lineNumber":25,"author":{"gitId":"-"},"content":"        this.startTimestamp \u003d notificationAttributes.getStartTime().toEpochMilli();"},{"lineNumber":26,"author":{"gitId":"-"},"content":"        this.endTimestamp \u003d notificationAttributes.getEndTime().toEpochMilli();"},{"lineNumber":27,"author":{"gitId":"-"},"content":"        this.createdAt \u003d notificationAttributes.getCreatedAt().toEpochMilli();"},{"lineNumber":28,"author":{"gitId":"-"},"content":"        this.style \u003d notificationAttributes.getStyle();"},{"lineNumber":29,"author":{"gitId":"-"},"content":"        this.targetUser \u003d notificationAttributes.getTargetUser();"},{"lineNumber":30,"author":{"gitId":"-"},"content":"        this.title \u003d notificationAttributes.getTitle();"},{"lineNumber":31,"author":{"gitId":"-"},"content":"        this.message \u003d notificationAttributes.getMessage();"},{"lineNumber":32,"author":{"gitId":"-"},"content":"        this.shown \u003d notificationAttributes.isShown();"},{"lineNumber":33,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":34,"author":{"gitId":"-"},"content":""},{"lineNumber":35,"author":{"gitId":"hhdqirui"},"content":"    public NotificationData(Notification notification) {"},{"lineNumber":36,"author":{"gitId":"-"},"content":"        this.notificationId \u003d notification.getId().toString();"},{"lineNumber":37,"author":{"gitId":"hhdqirui"},"content":"        this.startTimestamp \u003d notification.getStartTime().toEpochMilli();"},{"lineNumber":38,"author":{"gitId":"hhdqirui"},"content":"        this.endTimestamp \u003d notification.getEndTime().toEpochMilli();"},{"lineNumber":39,"author":{"gitId":"hhdqirui"},"content":"        this.createdAt \u003d notification.getCreatedAt().toEpochMilli();"},{"lineNumber":40,"author":{"gitId":"hhdqirui"},"content":"        this.style \u003d notification.getStyle();"},{"lineNumber":41,"author":{"gitId":"hhdqirui"},"content":"        this.targetUser \u003d notification.getTargetUser();"},{"lineNumber":42,"author":{"gitId":"hhdqirui"},"content":"        this.title \u003d notification.getTitle();"},{"lineNumber":43,"author":{"gitId":"hhdqirui"},"content":"        this.message \u003d notification.getMessage();"},{"lineNumber":44,"author":{"gitId":"hhdqirui"},"content":"        this.shown \u003d notification.isShown();"},{"lineNumber":45,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":46,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":47,"author":{"gitId":"-"},"content":"    public String getNotificationId() {"},{"lineNumber":48,"author":{"gitId":"-"},"content":"        return this.notificationId;"},{"lineNumber":49,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":50,"author":{"gitId":"-"},"content":""},{"lineNumber":51,"author":{"gitId":"-"},"content":"    public long getStartTimestamp() {"},{"lineNumber":52,"author":{"gitId":"-"},"content":"        return this.startTimestamp;"},{"lineNumber":53,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":54,"author":{"gitId":"-"},"content":""},{"lineNumber":55,"author":{"gitId":"-"},"content":"    public long getEndTimestamp() {"},{"lineNumber":56,"author":{"gitId":"-"},"content":"        return this.endTimestamp;"},{"lineNumber":57,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":58,"author":{"gitId":"-"},"content":""},{"lineNumber":59,"author":{"gitId":"-"},"content":"    public long getCreatedAt() {"},{"lineNumber":60,"author":{"gitId":"-"},"content":"        return this.createdAt;"},{"lineNumber":61,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":62,"author":{"gitId":"-"},"content":""},{"lineNumber":63,"author":{"gitId":"-"},"content":"    public NotificationStyle getStyle() {"},{"lineNumber":64,"author":{"gitId":"-"},"content":"        return this.style;"},{"lineNumber":65,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":66,"author":{"gitId":"-"},"content":""},{"lineNumber":67,"author":{"gitId":"-"},"content":"    public NotificationTargetUser getTargetUser() {"},{"lineNumber":68,"author":{"gitId":"-"},"content":"        return this.targetUser;"},{"lineNumber":69,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":70,"author":{"gitId":"-"},"content":""},{"lineNumber":71,"author":{"gitId":"-"},"content":"    public String getTitle() {"},{"lineNumber":72,"author":{"gitId":"-"},"content":"        return this.title;"},{"lineNumber":73,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":74,"author":{"gitId":"-"},"content":""},{"lineNumber":75,"author":{"gitId":"-"},"content":"    public String getMessage() {"},{"lineNumber":76,"author":{"gitId":"-"},"content":"        return this.message;"},{"lineNumber":77,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":78,"author":{"gitId":"-"},"content":""},{"lineNumber":79,"author":{"gitId":"-"},"content":"    public boolean isShown() {"},{"lineNumber":80,"author":{"gitId":"-"},"content":"        return this.shown;"},{"lineNumber":81,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":82,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"hhdqirui":12,"-":70}},{"path":"src/main/java/teammates/ui/output/NotificationsData.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.output;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.util.stream.Collectors;"},{"lineNumber":5,"author":{"gitId":"-"},"content":""},{"lineNumber":6,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.Notification;"},{"lineNumber":7,"author":{"gitId":"-"},"content":""},{"lineNumber":8,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":9,"author":{"gitId":"-"},"content":" * The API output for a list of notifications."},{"lineNumber":10,"author":{"gitId":"-"},"content":" */"},{"lineNumber":11,"author":{"gitId":"-"},"content":"public class NotificationsData extends ApiOutput {"},{"lineNumber":12,"author":{"gitId":"-"},"content":"    private final List\u003cNotificationData\u003e notifications;"},{"lineNumber":13,"author":{"gitId":"-"},"content":""},{"lineNumber":14,"author":{"gitId":"hhdqirui"},"content":"    public NotificationsData(List\u003cNotification\u003e notifications) {"},{"lineNumber":15,"author":{"gitId":"hhdqirui"},"content":"        this.notifications \u003d notifications.stream().map(NotificationData::new).collect(Collectors.toList());"},{"lineNumber":16,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":17,"author":{"gitId":"-"},"content":""},{"lineNumber":18,"author":{"gitId":"-"},"content":"    public List\u003cNotificationData\u003e getNotifications() {"},{"lineNumber":19,"author":{"gitId":"-"},"content":"        return notifications;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":21,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"hhdqirui":3,"-":18}},{"path":"src/main/java/teammates/ui/output/StudentData.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.output;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import javax.annotation.Nullable;"},{"lineNumber":4,"author":{"gitId":"-"},"content":""},{"lineNumber":5,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.StudentAttributes;"},{"lineNumber":6,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Student;"},{"lineNumber":7,"author":{"gitId":"-"},"content":""},{"lineNumber":8,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":9,"author":{"gitId":"-"},"content":" * The API output format of {@link StudentAttributes}."},{"lineNumber":10,"author":{"gitId":"-"},"content":" */"},{"lineNumber":11,"author":{"gitId":"-"},"content":"public class StudentData extends ApiOutput {"},{"lineNumber":12,"author":{"gitId":"-"},"content":""},{"lineNumber":13,"author":{"gitId":"-"},"content":"    private final String email;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"    private final String courseId;"},{"lineNumber":15,"author":{"gitId":"-"},"content":""},{"lineNumber":16,"author":{"gitId":"-"},"content":"    private final String name;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"    @Nullable"},{"lineNumber":18,"author":{"gitId":"-"},"content":"    private String googleId;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"    @Nullable"},{"lineNumber":20,"author":{"gitId":"-"},"content":"    private String comments;"},{"lineNumber":21,"author":{"gitId":"-"},"content":"    @Nullable"},{"lineNumber":22,"author":{"gitId":"-"},"content":"    private String key;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"    @Nullable"},{"lineNumber":24,"author":{"gitId":"-"},"content":"    private String institute;"},{"lineNumber":25,"author":{"gitId":"-"},"content":"    @Nullable"},{"lineNumber":26,"author":{"gitId":"-"},"content":"    private JoinState joinState;"},{"lineNumber":27,"author":{"gitId":"-"},"content":""},{"lineNumber":28,"author":{"gitId":"-"},"content":"    private final String teamName;"},{"lineNumber":29,"author":{"gitId":"-"},"content":"    private final String sectionName;"},{"lineNumber":30,"author":{"gitId":"-"},"content":""},{"lineNumber":31,"author":{"gitId":"-"},"content":"    public StudentData(StudentAttributes studentAttributes) {"},{"lineNumber":32,"author":{"gitId":"-"},"content":"        this.email \u003d studentAttributes.getEmail();"},{"lineNumber":33,"author":{"gitId":"-"},"content":"        this.courseId \u003d studentAttributes.getCourse();"},{"lineNumber":34,"author":{"gitId":"-"},"content":"        this.name \u003d studentAttributes.getName();"},{"lineNumber":35,"author":{"gitId":"-"},"content":"        this.joinState \u003d studentAttributes.isRegistered() ? JoinState.JOINED : JoinState.NOT_JOINED;"},{"lineNumber":36,"author":{"gitId":"-"},"content":"        this.comments \u003d studentAttributes.getComments();"},{"lineNumber":37,"author":{"gitId":"-"},"content":"        this.teamName \u003d studentAttributes.getTeam();"},{"lineNumber":38,"author":{"gitId":"-"},"content":"        this.sectionName \u003d studentAttributes.getSection();"},{"lineNumber":39,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":40,"author":{"gitId":"-"},"content":""},{"lineNumber":41,"author":{"gitId":"domlimm"},"content":"    public StudentData(Student student) {"},{"lineNumber":42,"author":{"gitId":"domlimm"},"content":"        this.email \u003d student.getEmail();"},{"lineNumber":43,"author":{"gitId":"domlimm"},"content":"        this.courseId \u003d student.getCourseId();"},{"lineNumber":44,"author":{"gitId":"domlimm"},"content":"        this.name \u003d student.getName();"},{"lineNumber":45,"author":{"gitId":"domlimm"},"content":"        this.joinState \u003d student.isRegistered() ? JoinState.JOINED : JoinState.NOT_JOINED;"},{"lineNumber":46,"author":{"gitId":"domlimm"},"content":"        this.comments \u003d student.getComments();"},{"lineNumber":47,"author":{"gitId":"domlimm"},"content":"        this.teamName \u003d student.getTeam().getName();"},{"lineNumber":48,"author":{"gitId":"domlimm"},"content":"        this.sectionName \u003d student.getTeam().getSection().getName();"},{"lineNumber":49,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":50,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":51,"author":{"gitId":"-"},"content":"    public String getEmail() {"},{"lineNumber":52,"author":{"gitId":"-"},"content":"        return email;"},{"lineNumber":53,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":54,"author":{"gitId":"-"},"content":""},{"lineNumber":55,"author":{"gitId":"-"},"content":"    public String getCourseId() {"},{"lineNumber":56,"author":{"gitId":"-"},"content":"        return courseId;"},{"lineNumber":57,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":58,"author":{"gitId":"-"},"content":""},{"lineNumber":59,"author":{"gitId":"-"},"content":"    public String getName() {"},{"lineNumber":60,"author":{"gitId":"-"},"content":"        return name;"},{"lineNumber":61,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":62,"author":{"gitId":"-"},"content":""},{"lineNumber":63,"author":{"gitId":"-"},"content":"    public String getGoogleId() {"},{"lineNumber":64,"author":{"gitId":"-"},"content":"        return googleId;"},{"lineNumber":65,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":66,"author":{"gitId":"-"},"content":""},{"lineNumber":67,"author":{"gitId":"-"},"content":"    public String getComments() {"},{"lineNumber":68,"author":{"gitId":"-"},"content":"        return comments;"},{"lineNumber":69,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":70,"author":{"gitId":"-"},"content":""},{"lineNumber":71,"author":{"gitId":"-"},"content":"    public JoinState getJoinState() {"},{"lineNumber":72,"author":{"gitId":"-"},"content":"        return joinState;"},{"lineNumber":73,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":74,"author":{"gitId":"-"},"content":""},{"lineNumber":75,"author":{"gitId":"-"},"content":"    public String getTeamName() {"},{"lineNumber":76,"author":{"gitId":"-"},"content":"        return teamName;"},{"lineNumber":77,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":78,"author":{"gitId":"-"},"content":""},{"lineNumber":79,"author":{"gitId":"-"},"content":"    public String getSectionName() {"},{"lineNumber":80,"author":{"gitId":"-"},"content":"        return sectionName;"},{"lineNumber":81,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":82,"author":{"gitId":"-"},"content":""},{"lineNumber":83,"author":{"gitId":"-"},"content":"    public String getKey() {"},{"lineNumber":84,"author":{"gitId":"-"},"content":"        return key;"},{"lineNumber":85,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":86,"author":{"gitId":"-"},"content":""},{"lineNumber":87,"author":{"gitId":"-"},"content":"    public String getInstitute() {"},{"lineNumber":88,"author":{"gitId":"-"},"content":"        return institute;"},{"lineNumber":89,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":90,"author":{"gitId":"-"},"content":""},{"lineNumber":91,"author":{"gitId":"-"},"content":"    public void setGoogleId(String googleId) {"},{"lineNumber":92,"author":{"gitId":"-"},"content":"        this.googleId \u003d googleId;"},{"lineNumber":93,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":94,"author":{"gitId":"-"},"content":""},{"lineNumber":95,"author":{"gitId":"-"},"content":"    public void setComments(String comments) {"},{"lineNumber":96,"author":{"gitId":"-"},"content":"        this.comments \u003d comments;"},{"lineNumber":97,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":98,"author":{"gitId":"-"},"content":""},{"lineNumber":99,"author":{"gitId":"-"},"content":"    public void setJoinState(JoinState joinState) {"},{"lineNumber":100,"author":{"gitId":"-"},"content":"        this.joinState \u003d joinState;"},{"lineNumber":101,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":102,"author":{"gitId":"-"},"content":""},{"lineNumber":103,"author":{"gitId":"-"},"content":"    public void setKey(String key) {"},{"lineNumber":104,"author":{"gitId":"-"},"content":"        this.key \u003d key;"},{"lineNumber":105,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":106,"author":{"gitId":"-"},"content":""},{"lineNumber":107,"author":{"gitId":"-"},"content":"    public void setInstitute(String institute) {"},{"lineNumber":108,"author":{"gitId":"-"},"content":"        this.institute \u003d institute;"},{"lineNumber":109,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":110,"author":{"gitId":"-"},"content":""},{"lineNumber":111,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":112,"author":{"gitId":"-"},"content":"     * Hides some attributes to student."},{"lineNumber":113,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":114,"author":{"gitId":"-"},"content":"    public void hideInformationForStudent() {"},{"lineNumber":115,"author":{"gitId":"-"},"content":"        setComments(null);"},{"lineNumber":116,"author":{"gitId":"-"},"content":"        setJoinState(null);"},{"lineNumber":117,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":118,"author":{"gitId":"-"},"content":""},{"lineNumber":119,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":120,"author":{"gitId":"-"},"content":"     * Adds additional information only for search result for admin."},{"lineNumber":121,"author":{"gitId":"-"},"content":"     * @param key The registration key"},{"lineNumber":122,"author":{"gitId":"-"},"content":"     * @param institute The institute of the student"},{"lineNumber":123,"author":{"gitId":"-"},"content":"     * @param googleId The googleId of the student"},{"lineNumber":124,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":125,"author":{"gitId":"-"},"content":"    public void addAdditionalInformationForAdminSearch(String key, String institute, String googleId) {"},{"lineNumber":126,"author":{"gitId":"-"},"content":"        this.setKey(key);"},{"lineNumber":127,"author":{"gitId":"-"},"content":"        this.setInstitute(institute);"},{"lineNumber":128,"author":{"gitId":"-"},"content":"        this.setGoogleId(googleId);"},{"lineNumber":129,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":130,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"domlimm":11,"-":119}},{"path":"src/main/java/teammates/ui/output/StudentsData.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.output;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.util.ArrayList;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.util.stream.Collectors;"},{"lineNumber":6,"author":{"gitId":"-"},"content":""},{"lineNumber":7,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Student;"},{"lineNumber":8,"author":{"gitId":"-"},"content":""},{"lineNumber":9,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":10,"author":{"gitId":"domlimm"},"content":" * The API output format of a list of {@link StudentData}."},{"lineNumber":11,"author":{"gitId":"-"},"content":" */"},{"lineNumber":12,"author":{"gitId":"-"},"content":"public class StudentsData extends ApiOutput {"},{"lineNumber":13,"author":{"gitId":"-"},"content":""},{"lineNumber":14,"author":{"gitId":"-"},"content":"    private List\u003cStudentData\u003e students;"},{"lineNumber":15,"author":{"gitId":"-"},"content":""},{"lineNumber":16,"author":{"gitId":"-"},"content":"    public StudentsData() {"},{"lineNumber":17,"author":{"gitId":"-"},"content":"        this.students \u003d new ArrayList\u003c\u003e();"},{"lineNumber":18,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":19,"author":{"gitId":"-"},"content":""},{"lineNumber":20,"author":{"gitId":"domlimm"},"content":"    public StudentsData(List\u003cStudent\u003e students) {"},{"lineNumber":21,"author":{"gitId":"-"},"content":"        this.students \u003d students.stream().map(StudentData::new).collect(Collectors.toList());"},{"lineNumber":22,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":23,"author":{"gitId":"-"},"content":""},{"lineNumber":24,"author":{"gitId":"-"},"content":"    public List\u003cStudentData\u003e getStudents() {"},{"lineNumber":25,"author":{"gitId":"-"},"content":"        return students;"},{"lineNumber":26,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":27,"author":{"gitId":"-"},"content":""},{"lineNumber":28,"author":{"gitId":"-"},"content":"    public void setStudents(List\u003cStudentData\u003e students) {"},{"lineNumber":29,"author":{"gitId":"-"},"content":"        this.students \u003d students;"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":31,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"domlimm":3,"-":28}},{"path":"src/main/java/teammates/ui/webapi/Action.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.lang.reflect.Type;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.util.Optional;"},{"lineNumber":5,"author":{"gitId":"hhdqirui"},"content":"import java.util.UUID;"},{"lineNumber":6,"author":{"gitId":"-"},"content":""},{"lineNumber":7,"author":{"gitId":"-"},"content":"import javax.servlet.http.HttpServletRequest;"},{"lineNumber":8,"author":{"gitId":"-"},"content":""},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.InstructorPermissionSet;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.UserInfo;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.UserInfoCookie;"},{"lineNumber":12,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.attributes.AccountAttributes;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.CourseAttributes;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackSessionAttributes;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.InstructorAttributes;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.StudentAttributes;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.logs.RequestLogUser;"},{"lineNumber":18,"author":{"gitId":"-"},"content":"import teammates.common.util.Config;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"import teammates.common.util.HttpRequestHelper;"},{"lineNumber":21,"author":{"gitId":"-"},"content":"import teammates.common.util.JsonUtils;"},{"lineNumber":22,"author":{"gitId":"-"},"content":"import teammates.common.util.StringHelper;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"import teammates.logic.api.EmailGenerator;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"import teammates.logic.api.EmailSender;"},{"lineNumber":25,"author":{"gitId":"-"},"content":"import teammates.logic.api.LogsProcessor;"},{"lineNumber":26,"author":{"gitId":"-"},"content":"import teammates.logic.api.RecaptchaVerifier;"},{"lineNumber":27,"author":{"gitId":"-"},"content":"import teammates.logic.api.TaskQueuer;"},{"lineNumber":28,"author":{"gitId":"-"},"content":"import teammates.logic.api.UserProvision;"},{"lineNumber":29,"author":{"gitId":"-"},"content":"import teammates.sqllogic.api.Logic;"},{"lineNumber":30,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.FeedbackSession;"},{"lineNumber":31,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":32,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Student;"},{"lineNumber":33,"author":{"gitId":"-"},"content":"import teammates.ui.request.BasicRequest;"},{"lineNumber":34,"author":{"gitId":"-"},"content":"import teammates.ui.request.InvalidHttpRequestBodyException;"},{"lineNumber":35,"author":{"gitId":"-"},"content":""},{"lineNumber":36,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":37,"author":{"gitId":"-"},"content":" * An \"action\" to be performed by the system."},{"lineNumber":38,"author":{"gitId":"-"},"content":" * If the requesting user is allowed to perform the requested action,"},{"lineNumber":39,"author":{"gitId":"-"},"content":" * this object can talk to the back end to perform that action."},{"lineNumber":40,"author":{"gitId":"-"},"content":" */"},{"lineNumber":41,"author":{"gitId":"-"},"content":"public abstract class Action {"},{"lineNumber":42,"author":{"gitId":"-"},"content":""},{"lineNumber":43,"author":{"gitId":"-"},"content":"    teammates.logic.api.Logic logic \u003d teammates.logic.api.Logic.inst();"},{"lineNumber":44,"author":{"gitId":"-"},"content":"    Logic sqlLogic \u003d Logic.inst();"},{"lineNumber":45,"author":{"gitId":"-"},"content":"    UserProvision userProvision \u003d UserProvision.inst();"},{"lineNumber":46,"author":{"gitId":"-"},"content":"    GateKeeper gateKeeper \u003d GateKeeper.inst();"},{"lineNumber":47,"author":{"gitId":"-"},"content":"    EmailGenerator emailGenerator \u003d EmailGenerator.inst();"},{"lineNumber":48,"author":{"gitId":"-"},"content":"    TaskQueuer taskQueuer \u003d TaskQueuer.inst();"},{"lineNumber":49,"author":{"gitId":"-"},"content":"    EmailSender emailSender \u003d EmailSender.inst();"},{"lineNumber":50,"author":{"gitId":"-"},"content":"    RecaptchaVerifier recaptchaVerifier \u003d RecaptchaVerifier.inst();"},{"lineNumber":51,"author":{"gitId":"-"},"content":"    LogsProcessor logsProcessor \u003d LogsProcessor.inst();"},{"lineNumber":52,"author":{"gitId":"-"},"content":""},{"lineNumber":53,"author":{"gitId":"-"},"content":"    HttpServletRequest req;"},{"lineNumber":54,"author":{"gitId":"-"},"content":"    UserInfo userInfo;"},{"lineNumber":55,"author":{"gitId":"-"},"content":"    AuthType authType;"},{"lineNumber":56,"author":{"gitId":"-"},"content":""},{"lineNumber":57,"author":{"gitId":"hhdqirui"},"content":"    // TODO: unregisteredStudent. Instructor, isCourseMigrated, isAccountMigrated can be removed after migration"},{"lineNumber":58,"author":{"gitId":"-"},"content":"    private StudentAttributes unregisteredStudent;"},{"lineNumber":59,"author":{"gitId":"-"},"content":"    private InstructorAttributes unregisteredInstructor;"},{"lineNumber":60,"author":{"gitId":"-"},"content":"    private Boolean isCourseMigrated;"},{"lineNumber":61,"author":{"gitId":"hhdqirui"},"content":"    private Boolean isAccountMigrated;"},{"lineNumber":62,"author":{"gitId":"-"},"content":""},{"lineNumber":63,"author":{"gitId":"-"},"content":"    private Student unregisteredSqlStudent;"},{"lineNumber":64,"author":{"gitId":"-"},"content":"    private Instructor unregisteredSqlInstructor;"},{"lineNumber":65,"author":{"gitId":"-"},"content":""},{"lineNumber":66,"author":{"gitId":"-"},"content":"    // buffer to store the request body"},{"lineNumber":67,"author":{"gitId":"-"},"content":"    private String requestBody;"},{"lineNumber":68,"author":{"gitId":"-"},"content":""},{"lineNumber":69,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":70,"author":{"gitId":"-"},"content":"     * Initializes the action object based on the HTTP request."},{"lineNumber":71,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":72,"author":{"gitId":"-"},"content":"    public void init(HttpServletRequest req) {"},{"lineNumber":73,"author":{"gitId":"-"},"content":"        this.req \u003d req;"},{"lineNumber":74,"author":{"gitId":"-"},"content":"        initAuthInfo();"},{"lineNumber":75,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":76,"author":{"gitId":"-"},"content":""},{"lineNumber":77,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":78,"author":{"gitId":"-"},"content":"     * Inject logic class for use in tests."},{"lineNumber":79,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":80,"author":{"gitId":"-"},"content":"    public void setLogic(Logic logic) {"},{"lineNumber":81,"author":{"gitId":"-"},"content":"        this.sqlLogic \u003d logic;"},{"lineNumber":82,"author":{"gitId":"-"},"content":"        // TODO: remove these temporary hacks after migration"},{"lineNumber":83,"author":{"gitId":"-"},"content":"        this.isCourseMigrated \u003d true;"},{"lineNumber":84,"author":{"gitId":"-"},"content":"        this.isAccountMigrated \u003d true;"},{"lineNumber":85,"author":{"gitId":"-"},"content":""},{"lineNumber":86,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":87,"author":{"gitId":"-"},"content":""},{"lineNumber":88,"author":{"gitId":"-"},"content":"    public void setUserProvision(UserProvision userProvision) {"},{"lineNumber":89,"author":{"gitId":"-"},"content":"        this.userProvision \u003d userProvision;"},{"lineNumber":90,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":91,"author":{"gitId":"-"},"content":""},{"lineNumber":92,"author":{"gitId":"-"},"content":"    public void setTaskQueuer(TaskQueuer taskQueuer) {"},{"lineNumber":93,"author":{"gitId":"-"},"content":"        this.taskQueuer \u003d taskQueuer;"},{"lineNumber":94,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":95,"author":{"gitId":"-"},"content":""},{"lineNumber":96,"author":{"gitId":"-"},"content":"    public void setEmailSender(EmailSender emailSender) {"},{"lineNumber":97,"author":{"gitId":"-"},"content":"        this.emailSender \u003d emailSender;"},{"lineNumber":98,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":99,"author":{"gitId":"-"},"content":""},{"lineNumber":100,"author":{"gitId":"-"},"content":"    public void setRecaptchaVerifier(RecaptchaVerifier recaptchaVerifier) {"},{"lineNumber":101,"author":{"gitId":"-"},"content":"        this.recaptchaVerifier \u003d recaptchaVerifier;"},{"lineNumber":102,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":103,"author":{"gitId":"-"},"content":""},{"lineNumber":104,"author":{"gitId":"-"},"content":"    public void setLogsProcessor(LogsProcessor logsProcessor) {"},{"lineNumber":105,"author":{"gitId":"-"},"content":"        this.logsProcessor \u003d logsProcessor;"},{"lineNumber":106,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":107,"author":{"gitId":"-"},"content":""},{"lineNumber":108,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":109,"author":{"gitId":"-"},"content":"     * Returns true if course has been migrated or does not exist in the datastore."},{"lineNumber":110,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":111,"author":{"gitId":"-"},"content":"    protected boolean isCourseMigrated(String courseId) {"},{"lineNumber":112,"author":{"gitId":"-"},"content":"        if (isCourseMigrated \u003d\u003d null) {"},{"lineNumber":113,"author":{"gitId":"-"},"content":"            CourseAttributes course \u003d logic.getCourse(courseId);"},{"lineNumber":114,"author":{"gitId":"-"},"content":"            isCourseMigrated \u003d course \u003d\u003d null || course.isMigrated();"},{"lineNumber":115,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":116,"author":{"gitId":"-"},"content":"        return isCourseMigrated;"},{"lineNumber":117,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":118,"author":{"gitId":"-"},"content":""},{"lineNumber":119,"author":{"gitId":"hhdqirui"},"content":"    /**"},{"lineNumber":120,"author":{"gitId":"hhdqirui"},"content":"     * Returns true if course has been migrated or does not exist in the datastore."},{"lineNumber":121,"author":{"gitId":"hhdqirui"},"content":"     */"},{"lineNumber":122,"author":{"gitId":"hhdqirui"},"content":"    protected boolean isAccountMigrated(String googleId) {"},{"lineNumber":123,"author":{"gitId":"hhdqirui"},"content":"        if (isAccountMigrated \u003d\u003d null) {"},{"lineNumber":124,"author":{"gitId":"hhdqirui"},"content":"            AccountAttributes account \u003d logic.getAccount(googleId);"},{"lineNumber":125,"author":{"gitId":"hhdqirui"},"content":"            isAccountMigrated \u003d account \u003d\u003d null || account.isMigrated();"},{"lineNumber":126,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":127,"author":{"gitId":"hhdqirui"},"content":"        return isAccountMigrated;"},{"lineNumber":128,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":129,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":130,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":131,"author":{"gitId":"-"},"content":"     * Checks if the requesting user has sufficient authority to access the resource."},{"lineNumber":132,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":133,"author":{"gitId":"-"},"content":"    public void checkAccessControl() throws UnauthorizedAccessException {"},{"lineNumber":134,"author":{"gitId":"-"},"content":"        String userParam \u003d getRequestParamValue(Const.ParamsNames.USER_ID);"},{"lineNumber":135,"author":{"gitId":"-"},"content":"        if (userInfo !\u003d null \u0026\u0026 userParam !\u003d null \u0026\u0026 !userInfo.isAdmin \u0026\u0026 !userInfo.id.equals(userParam)) {"},{"lineNumber":136,"author":{"gitId":"-"},"content":"            throw new UnauthorizedAccessException(\"User \" + userInfo.id"},{"lineNumber":137,"author":{"gitId":"-"},"content":"                    + \" is trying to masquerade as \" + userParam + \" without admin permission.\");"},{"lineNumber":138,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":139,"author":{"gitId":"-"},"content":""},{"lineNumber":140,"author":{"gitId":"-"},"content":"        if (authType.getLevel() \u003c getMinAuthLevel().getLevel()) {"},{"lineNumber":141,"author":{"gitId":"-"},"content":"            // Access control level lower than required"},{"lineNumber":142,"author":{"gitId":"-"},"content":"            throw new UnauthorizedAccessException(\"Not authorized to access this resource.\");"},{"lineNumber":143,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":144,"author":{"gitId":"-"},"content":""},{"lineNumber":145,"author":{"gitId":"-"},"content":"        if (authType \u003d\u003d AuthType.ALL_ACCESS) {"},{"lineNumber":146,"author":{"gitId":"-"},"content":"            // All-access pass granted"},{"lineNumber":147,"author":{"gitId":"-"},"content":"            return;"},{"lineNumber":148,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":149,"author":{"gitId":"-"},"content":""},{"lineNumber":150,"author":{"gitId":"-"},"content":"        // All other cases: to be dealt in case-by-case basis"},{"lineNumber":151,"author":{"gitId":"-"},"content":"        checkSpecificAccessControl();"},{"lineNumber":152,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":153,"author":{"gitId":"-"},"content":""},{"lineNumber":154,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":155,"author":{"gitId":"-"},"content":"     * Gets the user information of the current user."},{"lineNumber":156,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":157,"author":{"gitId":"-"},"content":"    public RequestLogUser getUserInfoForLogging() {"},{"lineNumber":158,"author":{"gitId":"-"},"content":"        RequestLogUser user \u003d new RequestLogUser();"},{"lineNumber":159,"author":{"gitId":"-"},"content":""},{"lineNumber":160,"author":{"gitId":"-"},"content":"        String googleId \u003d userInfo \u003d\u003d null ? null : userInfo.getId();"},{"lineNumber":161,"author":{"gitId":"-"},"content":""},{"lineNumber":162,"author":{"gitId":"-"},"content":"        user.setGoogleId(googleId);"},{"lineNumber":163,"author":{"gitId":"-"},"content":"        if (unregisteredStudent \u003d\u003d null \u0026\u0026 unregisteredInstructor \u003d\u003d null"},{"lineNumber":164,"author":{"gitId":"-"},"content":"                \u0026\u0026 unregisteredSqlStudent \u003d\u003d null \u0026\u0026 unregisteredSqlInstructor \u003d\u003d null) {"},{"lineNumber":165,"author":{"gitId":"-"},"content":"            user.setRegkey(getRequestParamValue(Const.ParamsNames.REGKEY));"},{"lineNumber":166,"author":{"gitId":"-"},"content":"        } else if (unregisteredStudent !\u003d null) {"},{"lineNumber":167,"author":{"gitId":"-"},"content":"            user.setRegkey(unregisteredStudent.getKey());"},{"lineNumber":168,"author":{"gitId":"-"},"content":"            user.setEmail(unregisteredStudent.getEmail());"},{"lineNumber":169,"author":{"gitId":"-"},"content":"        } else if (unregisteredInstructor !\u003d null) {"},{"lineNumber":170,"author":{"gitId":"-"},"content":"            user.setRegkey(unregisteredInstructor.getKey());"},{"lineNumber":171,"author":{"gitId":"-"},"content":"            user.setEmail(unregisteredInstructor.getEmail());"},{"lineNumber":172,"author":{"gitId":"-"},"content":"        } else if (unregisteredSqlStudent !\u003d null) {"},{"lineNumber":173,"author":{"gitId":"-"},"content":"            user.setRegkey(unregisteredSqlStudent.getRegKey());"},{"lineNumber":174,"author":{"gitId":"-"},"content":"            user.setEmail(unregisteredSqlStudent.getEmail());"},{"lineNumber":175,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":176,"author":{"gitId":"-"},"content":"            user.setRegkey(unregisteredSqlInstructor.getRegKey());"},{"lineNumber":177,"author":{"gitId":"-"},"content":"            user.setEmail(unregisteredSqlInstructor.getEmail());"},{"lineNumber":178,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":179,"author":{"gitId":"-"},"content":"        return user;"},{"lineNumber":180,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":181,"author":{"gitId":"-"},"content":""},{"lineNumber":182,"author":{"gitId":"-"},"content":"    private void initAuthInfo() {"},{"lineNumber":183,"author":{"gitId":"-"},"content":"        if (Config.BACKDOOR_KEY.equals(req.getHeader(Const.HeaderNames.BACKDOOR_KEY))) {"},{"lineNumber":184,"author":{"gitId":"-"},"content":"            authType \u003d AuthType.ALL_ACCESS;"},{"lineNumber":185,"author":{"gitId":"-"},"content":"            userInfo \u003d userProvision.getAdminOnlyUser(getRequestParamValue(Const.ParamsNames.USER_ID));"},{"lineNumber":186,"author":{"gitId":"-"},"content":"            userInfo.isStudent \u003d true;"},{"lineNumber":187,"author":{"gitId":"-"},"content":"            userInfo.isInstructor \u003d true;"},{"lineNumber":188,"author":{"gitId":"-"},"content":"            return;"},{"lineNumber":189,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":190,"author":{"gitId":"-"},"content":""},{"lineNumber":191,"author":{"gitId":"-"},"content":"        // The header X-AppEngine-QueueName cannot be spoofed as GAE will strip any user-sent X-AppEngine-QueueName headers."},{"lineNumber":192,"author":{"gitId":"-"},"content":"        // Reference: https://cloud.google.com/tasks/docs/creating-appengine-handlers#reading_app_engine_task_request_headers"},{"lineNumber":193,"author":{"gitId":"-"},"content":"        String queueNameHeader \u003d req.getHeader(\"X-AppEngine-QueueName\");"},{"lineNumber":194,"author":{"gitId":"-"},"content":"        boolean isRequestFromAppEngineQueue \u003d queueNameHeader !\u003d null;"},{"lineNumber":195,"author":{"gitId":"-"},"content":"        if (isRequestFromAppEngineQueue) {"},{"lineNumber":196,"author":{"gitId":"-"},"content":"            userInfo \u003d userProvision.getAdminOnlyUser(\"AppEngine-\" + queueNameHeader);"},{"lineNumber":197,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":198,"author":{"gitId":"-"},"content":"            String cookie \u003d HttpRequestHelper.getCookieValueFromRequest(req, Const.SecurityConfig.AUTH_COOKIE_NAME);"},{"lineNumber":199,"author":{"gitId":"-"},"content":"            UserInfoCookie uic \u003d UserInfoCookie.fromCookie(cookie);"},{"lineNumber":200,"author":{"gitId":"-"},"content":"            userInfo \u003d userProvision.getCurrentUser(uic);"},{"lineNumber":201,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":202,"author":{"gitId":"-"},"content":""},{"lineNumber":203,"author":{"gitId":"-"},"content":"        authType \u003d userInfo \u003d\u003d null ? AuthType.PUBLIC : AuthType.LOGGED_IN;"},{"lineNumber":204,"author":{"gitId":"-"},"content":""},{"lineNumber":205,"author":{"gitId":"-"},"content":"        String userParam \u003d getRequestParamValue(Const.ParamsNames.USER_ID);"},{"lineNumber":206,"author":{"gitId":"-"},"content":"        if (userInfo !\u003d null \u0026\u0026 userParam !\u003d null \u0026\u0026 userInfo.isAdmin) {"},{"lineNumber":207,"author":{"gitId":"-"},"content":"            userInfo \u003d userProvision.getMasqueradeUser(userParam);"},{"lineNumber":208,"author":{"gitId":"-"},"content":"            authType \u003d AuthType.MASQUERADE;"},{"lineNumber":209,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":210,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":211,"author":{"gitId":"-"},"content":""},{"lineNumber":212,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":213,"author":{"gitId":"-"},"content":"     * Returns the first value for the specified parameter in the HTTP request, or null if such parameter is not found."},{"lineNumber":214,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":215,"author":{"gitId":"-"},"content":"    String getRequestParamValue(String paramName) {"},{"lineNumber":216,"author":{"gitId":"-"},"content":"        return req.getParameter(paramName);"},{"lineNumber":217,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":218,"author":{"gitId":"-"},"content":""},{"lineNumber":219,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":220,"author":{"gitId":"-"},"content":"     * Returns the first value for the specified parameter expected to be present in the HTTP request."},{"lineNumber":221,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":222,"author":{"gitId":"-"},"content":"    String getNonNullRequestParamValue(String paramName) {"},{"lineNumber":223,"author":{"gitId":"-"},"content":"        String value \u003d req.getParameter(paramName);"},{"lineNumber":224,"author":{"gitId":"-"},"content":"        if (value \u003d\u003d null) {"},{"lineNumber":225,"author":{"gitId":"-"},"content":"            throw new InvalidHttpParameterException(String.format(\"The [%s] HTTP parameter is null.\", paramName));"},{"lineNumber":226,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":227,"author":{"gitId":"-"},"content":"        return value;"},{"lineNumber":228,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":229,"author":{"gitId":"-"},"content":""},{"lineNumber":230,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":231,"author":{"gitId":"-"},"content":"     * Returns the first value for the specified parameter expected to be present in the HTTP request as boolean."},{"lineNumber":232,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":233,"author":{"gitId":"-"},"content":"    boolean getBooleanRequestParamValue(String paramName) {"},{"lineNumber":234,"author":{"gitId":"-"},"content":"        String value \u003d getNonNullRequestParamValue(paramName);"},{"lineNumber":235,"author":{"gitId":"-"},"content":"        if (\"true\".equalsIgnoreCase(value) || \"false\".equalsIgnoreCase(value)) {"},{"lineNumber":236,"author":{"gitId":"-"},"content":"            return Boolean.parseBoolean(value);"},{"lineNumber":237,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":238,"author":{"gitId":"-"},"content":"            throw new InvalidHttpParameterException("},{"lineNumber":239,"author":{"gitId":"-"},"content":"                    \"Expected boolean value for \" + paramName + \" parameter, but found: [\" + value + \"]\");"},{"lineNumber":240,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":241,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":242,"author":{"gitId":"-"},"content":""},{"lineNumber":243,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":244,"author":{"gitId":"-"},"content":"     * Returns the first value for the specified parameter expected to be present in the HTTP request as long."},{"lineNumber":245,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":246,"author":{"gitId":"-"},"content":"    long getLongRequestParamValue(String paramName) {"},{"lineNumber":247,"author":{"gitId":"-"},"content":"        String value \u003d getNonNullRequestParamValue(paramName);"},{"lineNumber":248,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":249,"author":{"gitId":"-"},"content":"            return Long.parseLong(value);"},{"lineNumber":250,"author":{"gitId":"-"},"content":"        } catch (IllegalArgumentException e) {"},{"lineNumber":251,"author":{"gitId":"-"},"content":"            throw new InvalidHttpParameterException("},{"lineNumber":252,"author":{"gitId":"-"},"content":"                    \"Expected long value for \" + paramName + \" parameter, but found: [\" + value + \"]\", e);"},{"lineNumber":253,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":254,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":255,"author":{"gitId":"-"},"content":""},{"lineNumber":256,"author":{"gitId":"hhdqirui"},"content":"    /**"},{"lineNumber":257,"author":{"gitId":"hhdqirui"},"content":"     * Returns the first value for the specified parameter expected to be present in the HTTP request as UUID."},{"lineNumber":258,"author":{"gitId":"hhdqirui"},"content":"     */"},{"lineNumber":259,"author":{"gitId":"hhdqirui"},"content":"    UUID getUuidRequestParamValue(String paramName) {"},{"lineNumber":260,"author":{"gitId":"hhdqirui"},"content":"        String value \u003d getNonNullRequestParamValue(paramName);"},{"lineNumber":261,"author":{"gitId":"hhdqirui"},"content":"        try {"},{"lineNumber":262,"author":{"gitId":"hhdqirui"},"content":"            return UUID.fromString(value);"},{"lineNumber":263,"author":{"gitId":"hhdqirui"},"content":"        } catch (IllegalArgumentException e) {"},{"lineNumber":264,"author":{"gitId":"hhdqirui"},"content":"            throw new InvalidHttpParameterException("},{"lineNumber":265,"author":{"gitId":"hhdqirui"},"content":"                    \"Expected UUID value for \" + paramName + \" parameter, but found: [\" + value + \"]\", e);"},{"lineNumber":266,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":267,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":268,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":269,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":270,"author":{"gitId":"-"},"content":"     * Returns the request body payload."},{"lineNumber":271,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":272,"author":{"gitId":"-"},"content":"    public String getRequestBody() {"},{"lineNumber":273,"author":{"gitId":"-"},"content":"        if (!hasDefinedRequestBody()) {"},{"lineNumber":274,"author":{"gitId":"-"},"content":"            requestBody \u003d HttpRequestHelper.getRequestBody(req);"},{"lineNumber":275,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":276,"author":{"gitId":"-"},"content":"        return requestBody;"},{"lineNumber":277,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":278,"author":{"gitId":"-"},"content":""},{"lineNumber":279,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":280,"author":{"gitId":"-"},"content":"     * Returns true if the action has a request body already defined in it."},{"lineNumber":281,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":282,"author":{"gitId":"-"},"content":"    public boolean hasDefinedRequestBody() {"},{"lineNumber":283,"author":{"gitId":"-"},"content":"        return requestBody !\u003d null;"},{"lineNumber":284,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":285,"author":{"gitId":"-"},"content":""},{"lineNumber":286,"author":{"gitId":"-"},"content":"    FeedbackSessionAttributes getNonNullFeedbackSession(String feedbackSessionName, String courseId) {"},{"lineNumber":287,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes feedbackSession \u003d logic.getFeedbackSession(feedbackSessionName, courseId);"},{"lineNumber":288,"author":{"gitId":"-"},"content":"        if (feedbackSession \u003d\u003d null) {"},{"lineNumber":289,"author":{"gitId":"-"},"content":"            throw new EntityNotFoundException(\"Feedback session not found\");"},{"lineNumber":290,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":291,"author":{"gitId":"-"},"content":"        return feedbackSession;"},{"lineNumber":292,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":293,"author":{"gitId":"-"},"content":""},{"lineNumber":294,"author":{"gitId":"hhdqirui"},"content":"    // TODO: Remove Sql from method name after migration"},{"lineNumber":295,"author":{"gitId":"hhdqirui"},"content":"    FeedbackSession getNonNullSqlFeedbackSession(String feedbackSessionName, String courseId) {"},{"lineNumber":296,"author":{"gitId":"hhdqirui"},"content":"        FeedbackSession feedbackSession \u003d sqlLogic.getFeedbackSession(feedbackSessionName, courseId);"},{"lineNumber":297,"author":{"gitId":"hhdqirui"},"content":"        if (feedbackSession \u003d\u003d null) {"},{"lineNumber":298,"author":{"gitId":"hhdqirui"},"content":"            throw new EntityNotFoundException(\"Feedback session not found\");"},{"lineNumber":299,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":300,"author":{"gitId":"hhdqirui"},"content":"        return feedbackSession;"},{"lineNumber":301,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":302,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":303,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":304,"author":{"gitId":"-"},"content":"     * Deserializes and validates the request body payload."},{"lineNumber":305,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":306,"author":{"gitId":"-"},"content":"    \u003cT extends BasicRequest\u003e T getAndValidateRequestBody(Type typeOfBody) throws InvalidHttpRequestBodyException {"},{"lineNumber":307,"author":{"gitId":"-"},"content":"        T requestBody \u003d JsonUtils.fromJson(getRequestBody(), typeOfBody);"},{"lineNumber":308,"author":{"gitId":"-"},"content":"        if (requestBody \u003d\u003d null) {"},{"lineNumber":309,"author":{"gitId":"-"},"content":"            throw new InvalidHttpRequestBodyException(\"The request body is null\");"},{"lineNumber":310,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":311,"author":{"gitId":"-"},"content":"        requestBody.validate();"},{"lineNumber":312,"author":{"gitId":"-"},"content":"        return requestBody;"},{"lineNumber":313,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":314,"author":{"gitId":"-"},"content":""},{"lineNumber":315,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":316,"author":{"gitId":"-"},"content":"     * Gets the unregistered student by the HTTP param."},{"lineNumber":317,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":318,"author":{"gitId":"-"},"content":"    Optional\u003cStudentAttributes\u003e getUnregisteredStudent() {"},{"lineNumber":319,"author":{"gitId":"-"},"content":"        String key \u003d getRequestParamValue(Const.ParamsNames.REGKEY);"},{"lineNumber":320,"author":{"gitId":"-"},"content":"        if (!StringHelper.isEmpty(key)) {"},{"lineNumber":321,"author":{"gitId":"-"},"content":"            StudentAttributes studentAttributes \u003d logic.getStudentForRegistrationKey(key);"},{"lineNumber":322,"author":{"gitId":"-"},"content":"            if (studentAttributes \u003d\u003d null) {"},{"lineNumber":323,"author":{"gitId":"-"},"content":"                return Optional.empty();"},{"lineNumber":324,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":325,"author":{"gitId":"-"},"content":"            unregisteredStudent \u003d studentAttributes;"},{"lineNumber":326,"author":{"gitId":"-"},"content":"            return Optional.of(studentAttributes);"},{"lineNumber":327,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":328,"author":{"gitId":"-"},"content":"        return Optional.empty();"},{"lineNumber":329,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":330,"author":{"gitId":"-"},"content":""},{"lineNumber":331,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":332,"author":{"gitId":"-"},"content":"     * Gets the unregistered student by the HTTP param."},{"lineNumber":333,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":334,"author":{"gitId":"-"},"content":"    Optional\u003cStudent\u003e getUnregisteredSqlStudent() {"},{"lineNumber":335,"author":{"gitId":"-"},"content":"        // TODO: Remove Sql from method name after migration"},{"lineNumber":336,"author":{"gitId":"-"},"content":"        String key \u003d getRequestParamValue(Const.ParamsNames.REGKEY);"},{"lineNumber":337,"author":{"gitId":"-"},"content":"        if (!StringHelper.isEmpty(key)) {"},{"lineNumber":338,"author":{"gitId":"-"},"content":"            Student student \u003d sqlLogic.getStudentByRegistrationKey(key);"},{"lineNumber":339,"author":{"gitId":"-"},"content":"            if (student \u003d\u003d null) {"},{"lineNumber":340,"author":{"gitId":"-"},"content":"                return Optional.empty();"},{"lineNumber":341,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":342,"author":{"gitId":"-"},"content":"            unregisteredSqlStudent \u003d student;"},{"lineNumber":343,"author":{"gitId":"-"},"content":"            return Optional.of(student);"},{"lineNumber":344,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":345,"author":{"gitId":"-"},"content":"        return Optional.empty();"},{"lineNumber":346,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":347,"author":{"gitId":"-"},"content":""},{"lineNumber":348,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":349,"author":{"gitId":"-"},"content":"     * Gets the unregistered instructor by the HTTP param."},{"lineNumber":350,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":351,"author":{"gitId":"-"},"content":"    Optional\u003cInstructorAttributes\u003e getUnregisteredInstructor() {"},{"lineNumber":352,"author":{"gitId":"-"},"content":"        String key \u003d getRequestParamValue(Const.ParamsNames.REGKEY);"},{"lineNumber":353,"author":{"gitId":"-"},"content":"        if (!StringHelper.isEmpty(key)) {"},{"lineNumber":354,"author":{"gitId":"-"},"content":"            InstructorAttributes instructorAttributes \u003d logic.getInstructorForRegistrationKey(key);"},{"lineNumber":355,"author":{"gitId":"-"},"content":"            if (instructorAttributes \u003d\u003d null) {"},{"lineNumber":356,"author":{"gitId":"-"},"content":"                return Optional.empty();"},{"lineNumber":357,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":358,"author":{"gitId":"-"},"content":"            unregisteredInstructor \u003d instructorAttributes;"},{"lineNumber":359,"author":{"gitId":"-"},"content":"            return Optional.of(instructorAttributes);"},{"lineNumber":360,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":361,"author":{"gitId":"-"},"content":"        return Optional.empty();"},{"lineNumber":362,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":363,"author":{"gitId":"-"},"content":""},{"lineNumber":364,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":365,"author":{"gitId":"-"},"content":"     * Gets the unregistered instructor by the HTTP param."},{"lineNumber":366,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":367,"author":{"gitId":"-"},"content":"    Optional\u003cInstructor\u003e getUnregisteredSqlInstructor() {"},{"lineNumber":368,"author":{"gitId":"-"},"content":"        // TODO: Remove Sql from method name after migration"},{"lineNumber":369,"author":{"gitId":"-"},"content":"        String key \u003d getRequestParamValue(Const.ParamsNames.REGKEY);"},{"lineNumber":370,"author":{"gitId":"-"},"content":"        if (!StringHelper.isEmpty(key)) {"},{"lineNumber":371,"author":{"gitId":"-"},"content":"            Instructor instructor \u003d sqlLogic.getInstructorByRegistrationKey(key);"},{"lineNumber":372,"author":{"gitId":"-"},"content":"            if (instructor \u003d\u003d null) {"},{"lineNumber":373,"author":{"gitId":"-"},"content":"                return Optional.empty();"},{"lineNumber":374,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":375,"author":{"gitId":"-"},"content":"            unregisteredSqlInstructor \u003d instructor;"},{"lineNumber":376,"author":{"gitId":"-"},"content":"            return Optional.of(instructor);"},{"lineNumber":377,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":378,"author":{"gitId":"-"},"content":"        return Optional.empty();"},{"lineNumber":379,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":380,"author":{"gitId":"-"},"content":""},{"lineNumber":381,"author":{"gitId":"-"},"content":"    InstructorAttributes getPossiblyUnregisteredInstructor(String courseId) {"},{"lineNumber":382,"author":{"gitId":"-"},"content":"        return getUnregisteredInstructor().orElseGet(() -\u003e {"},{"lineNumber":383,"author":{"gitId":"-"},"content":"            if (userInfo \u003d\u003d null) {"},{"lineNumber":384,"author":{"gitId":"-"},"content":"                return null;"},{"lineNumber":385,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":386,"author":{"gitId":"-"},"content":"            return logic.getInstructorForGoogleId(courseId, userInfo.getId());"},{"lineNumber":387,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":388,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":389,"author":{"gitId":"-"},"content":""},{"lineNumber":390,"author":{"gitId":"-"},"content":"    Instructor getPossiblyUnregisteredSqlInstructor(String courseId) {"},{"lineNumber":391,"author":{"gitId":"-"},"content":"        return getUnregisteredSqlInstructor().orElseGet(() -\u003e {"},{"lineNumber":392,"author":{"gitId":"-"},"content":"            if (userInfo \u003d\u003d null) {"},{"lineNumber":393,"author":{"gitId":"-"},"content":"                return null;"},{"lineNumber":394,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":395,"author":{"gitId":"-"},"content":"            return sqlLogic.getInstructorByGoogleId(courseId, userInfo.getId());"},{"lineNumber":396,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":397,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":398,"author":{"gitId":"-"},"content":""},{"lineNumber":399,"author":{"gitId":"-"},"content":"    StudentAttributes getPossiblyUnregisteredStudent(String courseId) {"},{"lineNumber":400,"author":{"gitId":"-"},"content":"        return getUnregisteredStudent().orElseGet(() -\u003e {"},{"lineNumber":401,"author":{"gitId":"-"},"content":"            if (userInfo \u003d\u003d null) {"},{"lineNumber":402,"author":{"gitId":"-"},"content":"                return null;"},{"lineNumber":403,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":404,"author":{"gitId":"-"},"content":"            return logic.getStudentForGoogleId(courseId, userInfo.getId());"},{"lineNumber":405,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":406,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":407,"author":{"gitId":"-"},"content":""},{"lineNumber":408,"author":{"gitId":"-"},"content":"    Student getPossiblyUnregisteredSqlStudent(String courseId) {"},{"lineNumber":409,"author":{"gitId":"-"},"content":"        return getUnregisteredSqlStudent().orElseGet(() -\u003e {"},{"lineNumber":410,"author":{"gitId":"-"},"content":"            if (userInfo \u003d\u003d null) {"},{"lineNumber":411,"author":{"gitId":"-"},"content":"                return null;"},{"lineNumber":412,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":413,"author":{"gitId":"-"},"content":"            return sqlLogic.getStudentByGoogleId(courseId, userInfo.getId());"},{"lineNumber":414,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":415,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":416,"author":{"gitId":"-"},"content":""},{"lineNumber":417,"author":{"gitId":"-"},"content":"    InstructorPermissionSet constructInstructorPrivileges(InstructorAttributes instructor, String feedbackSessionName) {"},{"lineNumber":418,"author":{"gitId":"-"},"content":"        InstructorPermissionSet privilege \u003d instructor.getPrivileges().getCourseLevelPrivileges();"},{"lineNumber":419,"author":{"gitId":"-"},"content":"        if (feedbackSessionName !\u003d null) {"},{"lineNumber":420,"author":{"gitId":"-"},"content":"            privilege.setCanSubmitSessionInSections("},{"lineNumber":421,"author":{"gitId":"-"},"content":"                    instructor.isAllowedForPrivilege(Const.InstructorPermissions.CAN_SUBMIT_SESSION_IN_SECTIONS)"},{"lineNumber":422,"author":{"gitId":"-"},"content":"                            || instructor.isAllowedForPrivilegeAnySection("},{"lineNumber":423,"author":{"gitId":"-"},"content":"                            feedbackSessionName, Const.InstructorPermissions.CAN_SUBMIT_SESSION_IN_SECTIONS));"},{"lineNumber":424,"author":{"gitId":"-"},"content":"            privilege.setCanViewSessionInSections("},{"lineNumber":425,"author":{"gitId":"-"},"content":"                    instructor.isAllowedForPrivilege(Const.InstructorPermissions.CAN_VIEW_SESSION_IN_SECTIONS)"},{"lineNumber":426,"author":{"gitId":"-"},"content":"                            || instructor.isAllowedForPrivilegeAnySection("},{"lineNumber":427,"author":{"gitId":"-"},"content":"                            feedbackSessionName, Const.InstructorPermissions.CAN_VIEW_SESSION_IN_SECTIONS));"},{"lineNumber":428,"author":{"gitId":"-"},"content":"            privilege.setCanModifySessionCommentsInSections("},{"lineNumber":429,"author":{"gitId":"-"},"content":"                    instructor.isAllowedForPrivilege("},{"lineNumber":430,"author":{"gitId":"-"},"content":"                            Const.InstructorPermissions.CAN_MODIFY_SESSION_COMMENT_IN_SECTIONS)"},{"lineNumber":431,"author":{"gitId":"-"},"content":"                            || instructor.isAllowedForPrivilegeAnySection(feedbackSessionName,"},{"lineNumber":432,"author":{"gitId":"-"},"content":"                            Const.InstructorPermissions.CAN_MODIFY_SESSION_COMMENT_IN_SECTIONS));"},{"lineNumber":433,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":434,"author":{"gitId":"-"},"content":"        return privilege;"},{"lineNumber":435,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":436,"author":{"gitId":"-"},"content":""},{"lineNumber":437,"author":{"gitId":"-"},"content":"    InstructorPermissionSet constructInstructorPrivileges(Instructor instructor, String feedbackSessionName) {"},{"lineNumber":438,"author":{"gitId":"-"},"content":"        InstructorPermissionSet privilege \u003d instructor.getPrivileges().getCourseLevelPrivileges();"},{"lineNumber":439,"author":{"gitId":"-"},"content":"        if (feedbackSessionName !\u003d null) {"},{"lineNumber":440,"author":{"gitId":"-"},"content":"            privilege.setCanSubmitSessionInSections("},{"lineNumber":441,"author":{"gitId":"-"},"content":"                    instructor.isAllowedForPrivilege(Const.InstructorPermissions.CAN_SUBMIT_SESSION_IN_SECTIONS)"},{"lineNumber":442,"author":{"gitId":"-"},"content":"                            || instructor.isAllowedForPrivilegeAnySection("},{"lineNumber":443,"author":{"gitId":"-"},"content":"                            feedbackSessionName, Const.InstructorPermissions.CAN_SUBMIT_SESSION_IN_SECTIONS));"},{"lineNumber":444,"author":{"gitId":"-"},"content":"            privilege.setCanViewSessionInSections("},{"lineNumber":445,"author":{"gitId":"-"},"content":"                    instructor.isAllowedForPrivilege(Const.InstructorPermissions.CAN_VIEW_SESSION_IN_SECTIONS)"},{"lineNumber":446,"author":{"gitId":"-"},"content":"                            || instructor.isAllowedForPrivilegeAnySection("},{"lineNumber":447,"author":{"gitId":"-"},"content":"                            feedbackSessionName, Const.InstructorPermissions.CAN_VIEW_SESSION_IN_SECTIONS));"},{"lineNumber":448,"author":{"gitId":"-"},"content":"            privilege.setCanModifySessionCommentsInSections("},{"lineNumber":449,"author":{"gitId":"-"},"content":"                    instructor.isAllowedForPrivilege("},{"lineNumber":450,"author":{"gitId":"-"},"content":"                            Const.InstructorPermissions.CAN_MODIFY_SESSION_COMMENT_IN_SECTIONS)"},{"lineNumber":451,"author":{"gitId":"-"},"content":"                            || instructor.isAllowedForPrivilegeAnySection(feedbackSessionName,"},{"lineNumber":452,"author":{"gitId":"-"},"content":"                            Const.InstructorPermissions.CAN_MODIFY_SESSION_COMMENT_IN_SECTIONS));"},{"lineNumber":453,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":454,"author":{"gitId":"-"},"content":"        return privilege;"},{"lineNumber":455,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":456,"author":{"gitId":"-"},"content":""},{"lineNumber":457,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":458,"author":{"gitId":"-"},"content":"     * Gets the minimum access control level required to access the resource."},{"lineNumber":459,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":460,"author":{"gitId":"-"},"content":"    abstract AuthType getMinAuthLevel();"},{"lineNumber":461,"author":{"gitId":"-"},"content":""},{"lineNumber":462,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":463,"author":{"gitId":"-"},"content":"     * Checks the specific access control needs for the resource."},{"lineNumber":464,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":465,"author":{"gitId":"-"},"content":"    abstract void checkSpecificAccessControl() throws UnauthorizedAccessException;"},{"lineNumber":466,"author":{"gitId":"-"},"content":""},{"lineNumber":467,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":468,"author":{"gitId":"-"},"content":"     * Executes the action."},{"lineNumber":469,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":470,"author":{"gitId":"-"},"content":"    public abstract ActionResult execute() throws InvalidHttpRequestBodyException, InvalidOperationException;"},{"lineNumber":471,"author":{"gitId":"-"},"content":""},{"lineNumber":472,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"hhdqirui":38,"-":434}},{"path":"src/main/java/teammates/ui/webapi/BasicFeedbackSubmissionAction.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.FeedbackParticipantType;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackSessionAttributes;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.InstructorAttributes;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.StudentAttributes;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.common.util.StringHelper;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.FeedbackQuestion;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.FeedbackSession;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Section;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Student;"},{"lineNumber":15,"author":{"gitId":"-"},"content":""},{"lineNumber":16,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":17,"author":{"gitId":"-"},"content":" * The basic action for feedback submission."},{"lineNumber":18,"author":{"gitId":"-"},"content":" */"},{"lineNumber":19,"author":{"gitId":"-"},"content":"abstract class BasicFeedbackSubmissionAction extends Action {"},{"lineNumber":20,"author":{"gitId":"-"},"content":""},{"lineNumber":21,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":22,"author":{"gitId":"-"},"content":"     * Checks whether instructors can see the question."},{"lineNumber":23,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":24,"author":{"gitId":"-"},"content":"    boolean canInstructorSeeQuestion(FeedbackQuestionAttributes feedbackQuestion) {"},{"lineNumber":25,"author":{"gitId":"-"},"content":"        boolean isGiverVisibleToInstructor \u003d"},{"lineNumber":26,"author":{"gitId":"-"},"content":"                feedbackQuestion.getShowGiverNameTo().contains(FeedbackParticipantType.INSTRUCTORS);"},{"lineNumber":27,"author":{"gitId":"-"},"content":"        boolean isRecipientVisibleToInstructor \u003d"},{"lineNumber":28,"author":{"gitId":"-"},"content":"                feedbackQuestion.getShowRecipientNameTo().contains(FeedbackParticipantType.INSTRUCTORS);"},{"lineNumber":29,"author":{"gitId":"-"},"content":"        boolean isResponseVisibleToInstructor \u003d"},{"lineNumber":30,"author":{"gitId":"-"},"content":"                feedbackQuestion.getShowResponsesTo().contains(FeedbackParticipantType.INSTRUCTORS);"},{"lineNumber":31,"author":{"gitId":"-"},"content":"        return isResponseVisibleToInstructor \u0026\u0026 isGiverVisibleToInstructor \u0026\u0026 isRecipientVisibleToInstructor;"},{"lineNumber":32,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":33,"author":{"gitId":"-"},"content":""},{"lineNumber":34,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":35,"author":{"gitId":"-"},"content":"     * Checks whether instructors can see the question."},{"lineNumber":36,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":37,"author":{"gitId":"-"},"content":"    boolean canInstructorSeeQuestion(FeedbackQuestion feedbackQuestion) {"},{"lineNumber":38,"author":{"gitId":"-"},"content":"        boolean isGiverVisibleToInstructor \u003d"},{"lineNumber":39,"author":{"gitId":"-"},"content":"                feedbackQuestion.getShowGiverNameTo().contains(FeedbackParticipantType.INSTRUCTORS);"},{"lineNumber":40,"author":{"gitId":"-"},"content":"        boolean isRecipientVisibleToInstructor \u003d"},{"lineNumber":41,"author":{"gitId":"-"},"content":"                feedbackQuestion.getShowRecipientNameTo().contains(FeedbackParticipantType.INSTRUCTORS);"},{"lineNumber":42,"author":{"gitId":"-"},"content":"        boolean isResponseVisibleToInstructor \u003d"},{"lineNumber":43,"author":{"gitId":"-"},"content":"                feedbackQuestion.getShowResponsesTo().contains(FeedbackParticipantType.INSTRUCTORS);"},{"lineNumber":44,"author":{"gitId":"-"},"content":"        return isResponseVisibleToInstructor \u0026\u0026 isGiverVisibleToInstructor \u0026\u0026 isRecipientVisibleToInstructor;"},{"lineNumber":45,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":46,"author":{"gitId":"-"},"content":""},{"lineNumber":47,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":48,"author":{"gitId":"-"},"content":"     * Verifies that instructor can see the moderated question in moderation request."},{"lineNumber":49,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":50,"author":{"gitId":"-"},"content":"    void verifyInstructorCanSeeQuestionIfInModeration(FeedbackQuestionAttributes feedbackQuestion)"},{"lineNumber":51,"author":{"gitId":"-"},"content":"            throws UnauthorizedAccessException {"},{"lineNumber":52,"author":{"gitId":"-"},"content":"        String moderatedPerson \u003d getRequestParamValue(Const.ParamsNames.FEEDBACK_SESSION_MODERATED_PERSON);"},{"lineNumber":53,"author":{"gitId":"-"},"content":""},{"lineNumber":54,"author":{"gitId":"-"},"content":"        if (!StringHelper.isEmpty(moderatedPerson) \u0026\u0026 !canInstructorSeeQuestion(feedbackQuestion)) {"},{"lineNumber":55,"author":{"gitId":"-"},"content":"            // should not moderate question which instructors cannot see"},{"lineNumber":56,"author":{"gitId":"-"},"content":"            throw new UnauthorizedAccessException(\"The question is not applicable for moderation\", true);"},{"lineNumber":57,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":58,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":59,"author":{"gitId":"-"},"content":""},{"lineNumber":60,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":61,"author":{"gitId":"-"},"content":"     * Verifies that instructor can see the moderated question in moderation request."},{"lineNumber":62,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":63,"author":{"gitId":"-"},"content":"    void verifyInstructorCanSeeQuestionIfInModeration(FeedbackQuestion feedbackQuestion)"},{"lineNumber":64,"author":{"gitId":"-"},"content":"            throws UnauthorizedAccessException {"},{"lineNumber":65,"author":{"gitId":"-"},"content":"        String moderatedPerson \u003d getRequestParamValue(Const.ParamsNames.FEEDBACK_SESSION_MODERATED_PERSON);"},{"lineNumber":66,"author":{"gitId":"-"},"content":""},{"lineNumber":67,"author":{"gitId":"-"},"content":"        if (!StringHelper.isEmpty(moderatedPerson) \u0026\u0026 !canInstructorSeeQuestion(feedbackQuestion)) {"},{"lineNumber":68,"author":{"gitId":"-"},"content":"            // should not moderate question which instructors cannot see"},{"lineNumber":69,"author":{"gitId":"-"},"content":"            throw new UnauthorizedAccessException(\"The question is not applicable for moderation\", true);"},{"lineNumber":70,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":71,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":72,"author":{"gitId":"-"},"content":""},{"lineNumber":73,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":74,"author":{"gitId":"-"},"content":"     * Gets the student involved in the submission process."},{"lineNumber":75,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":76,"author":{"gitId":"-"},"content":"    StudentAttributes getStudentOfCourseFromRequest(String courseId) {"},{"lineNumber":77,"author":{"gitId":"-"},"content":"        String moderatedPerson \u003d getRequestParamValue(Const.ParamsNames.FEEDBACK_SESSION_MODERATED_PERSON);"},{"lineNumber":78,"author":{"gitId":"-"},"content":"        String previewAsPerson \u003d getRequestParamValue(Const.ParamsNames.PREVIEWAS);"},{"lineNumber":79,"author":{"gitId":"-"},"content":""},{"lineNumber":80,"author":{"gitId":"-"},"content":"        if (!StringHelper.isEmpty(moderatedPerson)) {"},{"lineNumber":81,"author":{"gitId":"-"},"content":"            return logic.getStudentForEmail(courseId, moderatedPerson);"},{"lineNumber":82,"author":{"gitId":"-"},"content":"        } else if (!StringHelper.isEmpty(previewAsPerson)) {"},{"lineNumber":83,"author":{"gitId":"-"},"content":"            return logic.getStudentForEmail(courseId, previewAsPerson);"},{"lineNumber":84,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":85,"author":{"gitId":"-"},"content":"            return getPossiblyUnregisteredStudent(courseId);"},{"lineNumber":86,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":87,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":88,"author":{"gitId":"-"},"content":""},{"lineNumber":89,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":90,"author":{"gitId":"-"},"content":"     * Gets the student involved in the submission process."},{"lineNumber":91,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":92,"author":{"gitId":"-"},"content":"    Student getSqlStudentOfCourseFromRequest(String courseId) {"},{"lineNumber":93,"author":{"gitId":"-"},"content":"        // TODO: Rename method to remove Sql after migration."},{"lineNumber":94,"author":{"gitId":"-"},"content":"        String moderatedPerson \u003d getRequestParamValue(Const.ParamsNames.FEEDBACK_SESSION_MODERATED_PERSON);"},{"lineNumber":95,"author":{"gitId":"-"},"content":"        String previewAsPerson \u003d getRequestParamValue(Const.ParamsNames.PREVIEWAS);"},{"lineNumber":96,"author":{"gitId":"-"},"content":""},{"lineNumber":97,"author":{"gitId":"-"},"content":"        if (!StringHelper.isEmpty(moderatedPerson)) {"},{"lineNumber":98,"author":{"gitId":"EuniceSim142"},"content":"            return sqlLogic.getStudentForEmail(courseId, moderatedPerson);"},{"lineNumber":99,"author":{"gitId":"-"},"content":"        } else if (!StringHelper.isEmpty(previewAsPerson)) {"},{"lineNumber":100,"author":{"gitId":"EuniceSim142"},"content":"            return sqlLogic.getStudentForEmail(courseId, previewAsPerson);"},{"lineNumber":101,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":102,"author":{"gitId":"-"},"content":"            return getPossiblyUnregisteredSqlStudent(courseId);"},{"lineNumber":103,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":104,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":105,"author":{"gitId":"-"},"content":""},{"lineNumber":106,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":107,"author":{"gitId":"-"},"content":"     * Checks the access control for student feedback submission."},{"lineNumber":108,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":109,"author":{"gitId":"-"},"content":"    void checkAccessControlForStudentFeedbackSubmission("},{"lineNumber":110,"author":{"gitId":"-"},"content":"            StudentAttributes student, FeedbackSessionAttributes feedbackSession) throws UnauthorizedAccessException {"},{"lineNumber":111,"author":{"gitId":"-"},"content":"        if (student \u003d\u003d null) {"},{"lineNumber":112,"author":{"gitId":"-"},"content":"            throw new UnauthorizedAccessException(\"Trying to access system using a non-existent student entity\");"},{"lineNumber":113,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":114,"author":{"gitId":"-"},"content":""},{"lineNumber":115,"author":{"gitId":"-"},"content":"        String moderatedPerson \u003d getRequestParamValue(Const.ParamsNames.FEEDBACK_SESSION_MODERATED_PERSON);"},{"lineNumber":116,"author":{"gitId":"-"},"content":"        String previewAsPerson \u003d getRequestParamValue(Const.ParamsNames.PREVIEWAS);"},{"lineNumber":117,"author":{"gitId":"-"},"content":""},{"lineNumber":118,"author":{"gitId":"-"},"content":"        if (!StringHelper.isEmpty(moderatedPerson)) {"},{"lineNumber":119,"author":{"gitId":"-"},"content":"            gateKeeper.verifyLoggedInUserPrivileges(userInfo);"},{"lineNumber":120,"author":{"gitId":"-"},"content":"            gateKeeper.verifyAccessible("},{"lineNumber":121,"author":{"gitId":"-"},"content":"                    logic.getInstructorForGoogleId(feedbackSession.getCourseId(), userInfo.getId()), feedbackSession,"},{"lineNumber":122,"author":{"gitId":"-"},"content":"                    student.getSection(),"},{"lineNumber":123,"author":{"gitId":"-"},"content":"                    Const.InstructorPermissions.CAN_MODIFY_SESSION_COMMENT_IN_SECTIONS);"},{"lineNumber":124,"author":{"gitId":"-"},"content":"        } else if (!StringHelper.isEmpty(previewAsPerson)) {"},{"lineNumber":125,"author":{"gitId":"-"},"content":"            gateKeeper.verifyLoggedInUserPrivileges(userInfo);"},{"lineNumber":126,"author":{"gitId":"-"},"content":"            gateKeeper.verifyAccessible("},{"lineNumber":127,"author":{"gitId":"-"},"content":"                    logic.getInstructorForGoogleId(feedbackSession.getCourseId(), userInfo.getId()), feedbackSession,"},{"lineNumber":128,"author":{"gitId":"-"},"content":"                    Const.InstructorPermissions.CAN_MODIFY_SESSION);"},{"lineNumber":129,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":130,"author":{"gitId":"-"},"content":"            gateKeeper.verifyAccessible(student, feedbackSession);"},{"lineNumber":131,"author":{"gitId":"-"},"content":"            if (!StringHelper.isEmpty(student.getGoogleId())) {"},{"lineNumber":132,"author":{"gitId":"-"},"content":"                if (userInfo \u003d\u003d null) {"},{"lineNumber":133,"author":{"gitId":"-"},"content":"                    // Student is associated to a google ID; even if registration key is passed, do not allow access"},{"lineNumber":134,"author":{"gitId":"-"},"content":"                    throw new UnauthorizedAccessException(\"Login is required to access this feedback session\");"},{"lineNumber":135,"author":{"gitId":"-"},"content":"                } else if (!userInfo.id.equals(student.getGoogleId())) {"},{"lineNumber":136,"author":{"gitId":"-"},"content":"                    // Logged in student is not the same as the student registered for the given key, do not allow access"},{"lineNumber":137,"author":{"gitId":"-"},"content":"                    throw new UnauthorizedAccessException(\"You are not authorized to access this feedback session\");"},{"lineNumber":138,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":139,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":140,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":141,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":142,"author":{"gitId":"-"},"content":""},{"lineNumber":143,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":144,"author":{"gitId":"-"},"content":"     * Checks the access control for student feedback submission."},{"lineNumber":145,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":146,"author":{"gitId":"-"},"content":"    void checkAccessControlForStudentFeedbackSubmission(Student student, FeedbackSession feedbackSession)"},{"lineNumber":147,"author":{"gitId":"-"},"content":"            throws UnauthorizedAccessException {"},{"lineNumber":148,"author":{"gitId":"-"},"content":"        if (student \u003d\u003d null) {"},{"lineNumber":149,"author":{"gitId":"-"},"content":"            throw new UnauthorizedAccessException(\"Trying to access system using a non-existent student entity\");"},{"lineNumber":150,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":151,"author":{"gitId":"-"},"content":""},{"lineNumber":152,"author":{"gitId":"-"},"content":"        String moderatedPerson \u003d getRequestParamValue(Const.ParamsNames.FEEDBACK_SESSION_MODERATED_PERSON);"},{"lineNumber":153,"author":{"gitId":"-"},"content":"        String previewAsPerson \u003d getRequestParamValue(Const.ParamsNames.PREVIEWAS);"},{"lineNumber":154,"author":{"gitId":"-"},"content":""},{"lineNumber":155,"author":{"gitId":"-"},"content":"        if (!StringHelper.isEmpty(moderatedPerson)) {"},{"lineNumber":156,"author":{"gitId":"-"},"content":"            gateKeeper.verifyLoggedInUserPrivileges(userInfo);"},{"lineNumber":157,"author":{"gitId":"-"},"content":"            gateKeeper.verifyAccessible("},{"lineNumber":158,"author":{"gitId":"-"},"content":"                    sqlLogic.getInstructorByGoogleId(feedbackSession.getCourse().getId(), userInfo.getId()), feedbackSession,"},{"lineNumber":159,"author":{"gitId":"-"},"content":"                    student.getTeam().getSection().getName(),"},{"lineNumber":160,"author":{"gitId":"-"},"content":"                    Const.InstructorPermissions.CAN_MODIFY_SESSION_COMMENT_IN_SECTIONS);"},{"lineNumber":161,"author":{"gitId":"-"},"content":"        } else if (!StringHelper.isEmpty(previewAsPerson)) {"},{"lineNumber":162,"author":{"gitId":"-"},"content":"            gateKeeper.verifyLoggedInUserPrivileges(userInfo);"},{"lineNumber":163,"author":{"gitId":"-"},"content":"            gateKeeper.verifyAccessible("},{"lineNumber":164,"author":{"gitId":"-"},"content":"                    sqlLogic.getInstructorByGoogleId(feedbackSession.getCourse().getId(), userInfo.getId()), feedbackSession,"},{"lineNumber":165,"author":{"gitId":"-"},"content":"                    Const.InstructorPermissions.CAN_MODIFY_SESSION);"},{"lineNumber":166,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":167,"author":{"gitId":"-"},"content":"            gateKeeper.verifyAccessible(student, feedbackSession);"},{"lineNumber":168,"author":{"gitId":"-"},"content":"            if (student.getAccount() !\u003d null) {"},{"lineNumber":169,"author":{"gitId":"-"},"content":"                if (userInfo \u003d\u003d null) {"},{"lineNumber":170,"author":{"gitId":"-"},"content":"                    // Student is associated with an account; even if registration key is passed, do not allow access"},{"lineNumber":171,"author":{"gitId":"-"},"content":"                    throw new UnauthorizedAccessException(\"Login is required to access this feedback session\");"},{"lineNumber":172,"author":{"gitId":"-"},"content":"                } else if (!userInfo.id.equals(student.getAccount().getGoogleId())) {"},{"lineNumber":173,"author":{"gitId":"-"},"content":"                    // Logged in student is not the same as the student registered for the given key, do not allow access"},{"lineNumber":174,"author":{"gitId":"-"},"content":"                    throw new UnauthorizedAccessException(\"You are not authorized to access this feedback session\");"},{"lineNumber":175,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":176,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":177,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":178,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":179,"author":{"gitId":"-"},"content":""},{"lineNumber":180,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":181,"author":{"gitId":"-"},"content":"     * Gets the instructor involved in the submission process."},{"lineNumber":182,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":183,"author":{"gitId":"-"},"content":"    InstructorAttributes getInstructorOfCourseFromRequest(String courseId) {"},{"lineNumber":184,"author":{"gitId":"-"},"content":"        String moderatedPerson \u003d getRequestParamValue(Const.ParamsNames.FEEDBACK_SESSION_MODERATED_PERSON);"},{"lineNumber":185,"author":{"gitId":"-"},"content":"        String previewAsPerson \u003d getRequestParamValue(Const.ParamsNames.PREVIEWAS);"},{"lineNumber":186,"author":{"gitId":"-"},"content":""},{"lineNumber":187,"author":{"gitId":"-"},"content":"        if (!StringHelper.isEmpty(moderatedPerson)) {"},{"lineNumber":188,"author":{"gitId":"-"},"content":"            return logic.getInstructorForEmail(courseId, moderatedPerson);"},{"lineNumber":189,"author":{"gitId":"-"},"content":"        } else if (!StringHelper.isEmpty(previewAsPerson)) {"},{"lineNumber":190,"author":{"gitId":"-"},"content":"            return logic.getInstructorForEmail(courseId, previewAsPerson);"},{"lineNumber":191,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":192,"author":{"gitId":"-"},"content":"            return getPossiblyUnregisteredInstructor(courseId);"},{"lineNumber":193,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":194,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":195,"author":{"gitId":"-"},"content":""},{"lineNumber":196,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":197,"author":{"gitId":"-"},"content":"     * Gets the instructor involved in the submission process."},{"lineNumber":198,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":199,"author":{"gitId":"-"},"content":"    Instructor getSqlInstructorOfCourseFromRequest(String courseId) {"},{"lineNumber":200,"author":{"gitId":"-"},"content":"        String moderatedPerson \u003d getRequestParamValue(Const.ParamsNames.FEEDBACK_SESSION_MODERATED_PERSON);"},{"lineNumber":201,"author":{"gitId":"-"},"content":"        String previewAsPerson \u003d getRequestParamValue(Const.ParamsNames.PREVIEWAS);"},{"lineNumber":202,"author":{"gitId":"-"},"content":""},{"lineNumber":203,"author":{"gitId":"-"},"content":"        if (!StringHelper.isEmpty(moderatedPerson)) {"},{"lineNumber":204,"author":{"gitId":"EuniceSim142"},"content":"            return sqlLogic.getInstructorForEmail(courseId, moderatedPerson);"},{"lineNumber":205,"author":{"gitId":"-"},"content":"        } else if (!StringHelper.isEmpty(previewAsPerson)) {"},{"lineNumber":206,"author":{"gitId":"EuniceSim142"},"content":"            return sqlLogic.getInstructorForEmail(courseId, previewAsPerson);"},{"lineNumber":207,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":208,"author":{"gitId":"-"},"content":"            return getPossiblyUnregisteredSqlInstructor(courseId);"},{"lineNumber":209,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":210,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":211,"author":{"gitId":"-"},"content":""},{"lineNumber":212,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":213,"author":{"gitId":"-"},"content":"     * Checks the access control for instructor feedback submission."},{"lineNumber":214,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":215,"author":{"gitId":"-"},"content":"    void checkAccessControlForInstructorFeedbackSubmission("},{"lineNumber":216,"author":{"gitId":"-"},"content":"            InstructorAttributes instructor, FeedbackSessionAttributes feedbackSession) throws UnauthorizedAccessException {"},{"lineNumber":217,"author":{"gitId":"-"},"content":"        if (instructor \u003d\u003d null) {"},{"lineNumber":218,"author":{"gitId":"-"},"content":"            throw new UnauthorizedAccessException(\"Trying to access system using a non-existent instructor entity\");"},{"lineNumber":219,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":220,"author":{"gitId":"-"},"content":""},{"lineNumber":221,"author":{"gitId":"-"},"content":"        String moderatedPerson \u003d getRequestParamValue(Const.ParamsNames.FEEDBACK_SESSION_MODERATED_PERSON);"},{"lineNumber":222,"author":{"gitId":"-"},"content":"        String previewAsPerson \u003d getRequestParamValue(Const.ParamsNames.PREVIEWAS);"},{"lineNumber":223,"author":{"gitId":"-"},"content":""},{"lineNumber":224,"author":{"gitId":"-"},"content":"        if (!StringHelper.isEmpty(moderatedPerson)) {"},{"lineNumber":225,"author":{"gitId":"-"},"content":"            gateKeeper.verifyLoggedInUserPrivileges(userInfo);"},{"lineNumber":226,"author":{"gitId":"-"},"content":"            gateKeeper.verifyAccessible(logic.getInstructorForGoogleId(feedbackSession.getCourseId(), userInfo.getId()),"},{"lineNumber":227,"author":{"gitId":"-"},"content":"                    feedbackSession, Const.InstructorPermissions.CAN_MODIFY_SESSION_COMMENT_IN_SECTIONS);"},{"lineNumber":228,"author":{"gitId":"-"},"content":"        } else if (!StringHelper.isEmpty(previewAsPerson)) {"},{"lineNumber":229,"author":{"gitId":"-"},"content":"            gateKeeper.verifyLoggedInUserPrivileges(userInfo);"},{"lineNumber":230,"author":{"gitId":"-"},"content":"            gateKeeper.verifyAccessible(logic.getInstructorForGoogleId(feedbackSession.getCourseId(), userInfo.getId()),"},{"lineNumber":231,"author":{"gitId":"-"},"content":"                    feedbackSession, Const.InstructorPermissions.CAN_MODIFY_SESSION);"},{"lineNumber":232,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":233,"author":{"gitId":"-"},"content":"            gateKeeper.verifySessionSubmissionPrivilegeForInstructor(feedbackSession, instructor);"},{"lineNumber":234,"author":{"gitId":"-"},"content":"            if (!StringHelper.isEmpty(instructor.getGoogleId())) {"},{"lineNumber":235,"author":{"gitId":"-"},"content":"                if (userInfo \u003d\u003d null) {"},{"lineNumber":236,"author":{"gitId":"-"},"content":"                    // Instructor is associated to a google ID; even if registration key is passed, do not allow access"},{"lineNumber":237,"author":{"gitId":"-"},"content":"                    throw new UnauthorizedAccessException(\"Login is required to access this feedback session\");"},{"lineNumber":238,"author":{"gitId":"-"},"content":"                } else if (!userInfo.id.equals(instructor.getGoogleId())) {"},{"lineNumber":239,"author":{"gitId":"-"},"content":"                    // Logged in instructor is not the same as the instructor registered for the given key,"},{"lineNumber":240,"author":{"gitId":"-"},"content":"                    // do not allow access"},{"lineNumber":241,"author":{"gitId":"-"},"content":"                    throw new UnauthorizedAccessException(\"You are not authorized to access this feedback session\");"},{"lineNumber":242,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":243,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":244,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":245,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":246,"author":{"gitId":"-"},"content":""},{"lineNumber":247,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":248,"author":{"gitId":"-"},"content":"     * Checks the access control for instructor feedback submission."},{"lineNumber":249,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":250,"author":{"gitId":"-"},"content":"    void checkAccessControlForInstructorFeedbackSubmission("},{"lineNumber":251,"author":{"gitId":"-"},"content":"            Instructor instructor, FeedbackSession feedbackSession) throws UnauthorizedAccessException {"},{"lineNumber":252,"author":{"gitId":"-"},"content":"        if (instructor \u003d\u003d null) {"},{"lineNumber":253,"author":{"gitId":"-"},"content":"            throw new UnauthorizedAccessException(\"Trying to access system using a non-existent instructor entity\");"},{"lineNumber":254,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":255,"author":{"gitId":"-"},"content":""},{"lineNumber":256,"author":{"gitId":"-"},"content":"        String moderatedPerson \u003d getRequestParamValue(Const.ParamsNames.FEEDBACK_SESSION_MODERATED_PERSON);"},{"lineNumber":257,"author":{"gitId":"-"},"content":"        String previewAsPerson \u003d getRequestParamValue(Const.ParamsNames.PREVIEWAS);"},{"lineNumber":258,"author":{"gitId":"-"},"content":""},{"lineNumber":259,"author":{"gitId":"-"},"content":"        if (!StringHelper.isEmpty(moderatedPerson)) {"},{"lineNumber":260,"author":{"gitId":"-"},"content":"            gateKeeper.verifyLoggedInUserPrivileges(userInfo);"},{"lineNumber":261,"author":{"gitId":"-"},"content":"            gateKeeper.verifyAccessible("},{"lineNumber":262,"author":{"gitId":"-"},"content":"                    sqlLogic.getInstructorByGoogleId(feedbackSession.getCourse().getId(), userInfo.getId()),"},{"lineNumber":263,"author":{"gitId":"-"},"content":"                    feedbackSession, Const.InstructorPermissions.CAN_MODIFY_SESSION_COMMENT_IN_SECTIONS);"},{"lineNumber":264,"author":{"gitId":"-"},"content":"        } else if (!StringHelper.isEmpty(previewAsPerson)) {"},{"lineNumber":265,"author":{"gitId":"-"},"content":"            gateKeeper.verifyLoggedInUserPrivileges(userInfo);"},{"lineNumber":266,"author":{"gitId":"-"},"content":"            gateKeeper.verifyAccessible("},{"lineNumber":267,"author":{"gitId":"-"},"content":"                    sqlLogic.getInstructorByGoogleId(feedbackSession.getCourse().getId(), userInfo.getId()),"},{"lineNumber":268,"author":{"gitId":"-"},"content":"                    feedbackSession, Const.InstructorPermissions.CAN_MODIFY_SESSION);"},{"lineNumber":269,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":270,"author":{"gitId":"-"},"content":"            gateKeeper.verifySessionSubmissionPrivilegeForInstructor(feedbackSession, instructor);"},{"lineNumber":271,"author":{"gitId":"-"},"content":"            if (instructor.getAccount() !\u003d null) {"},{"lineNumber":272,"author":{"gitId":"-"},"content":"                if (userInfo \u003d\u003d null) {"},{"lineNumber":273,"author":{"gitId":"-"},"content":"                    // Instructor is associated to an account; even if registration key is passed, do not allow access"},{"lineNumber":274,"author":{"gitId":"-"},"content":"                    throw new UnauthorizedAccessException(\"Login is required to access this feedback session\");"},{"lineNumber":275,"author":{"gitId":"-"},"content":"                } else if (!userInfo.id.equals(instructor.getAccount().getGoogleId())) {"},{"lineNumber":276,"author":{"gitId":"-"},"content":"                    // Logged in instructor is not the same as the instructor registered for the given key,"},{"lineNumber":277,"author":{"gitId":"-"},"content":"                    // do not allow access"},{"lineNumber":278,"author":{"gitId":"-"},"content":"                    throw new UnauthorizedAccessException(\"You are not authorized to access this feedback session\");"},{"lineNumber":279,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":280,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":281,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":282,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":283,"author":{"gitId":"-"},"content":""},{"lineNumber":284,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":285,"author":{"gitId":"-"},"content":"     * Verifies that it is not a preview request."},{"lineNumber":286,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":287,"author":{"gitId":"-"},"content":"    void verifyNotPreview() throws UnauthorizedAccessException {"},{"lineNumber":288,"author":{"gitId":"-"},"content":"        String previewAsPerson \u003d getRequestParamValue(Const.ParamsNames.PREVIEWAS);"},{"lineNumber":289,"author":{"gitId":"-"},"content":"        if (!StringHelper.isEmpty(previewAsPerson)) {"},{"lineNumber":290,"author":{"gitId":"-"},"content":"            // should not view response under preview mode"},{"lineNumber":291,"author":{"gitId":"-"},"content":"            throw new UnauthorizedAccessException(\"You are not allowed to see responses when previewing\", true);"},{"lineNumber":292,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":293,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":294,"author":{"gitId":"-"},"content":""},{"lineNumber":295,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":296,"author":{"gitId":"-"},"content":"     * Verifies that the session is open for submission."},{"lineNumber":297,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":298,"author":{"gitId":"-"},"content":"     * \u003cp\u003eIf it is moderation request, omit the check."},{"lineNumber":299,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":300,"author":{"gitId":"-"},"content":"    void verifySessionOpenExceptForModeration(FeedbackSessionAttributes feedbackSession) throws UnauthorizedAccessException {"},{"lineNumber":301,"author":{"gitId":"-"},"content":"        String moderatedPerson \u003d getRequestParamValue(Const.ParamsNames.FEEDBACK_SESSION_MODERATED_PERSON);"},{"lineNumber":302,"author":{"gitId":"-"},"content":""},{"lineNumber":303,"author":{"gitId":"-"},"content":"        if (StringHelper.isEmpty(moderatedPerson) \u0026\u0026 !(feedbackSession.isOpened() || feedbackSession.isInGracePeriod())) {"},{"lineNumber":304,"author":{"gitId":"-"},"content":"            throw new UnauthorizedAccessException(\"The feedback session is not available for submission\", true);"},{"lineNumber":305,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":306,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":307,"author":{"gitId":"-"},"content":""},{"lineNumber":308,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":309,"author":{"gitId":"-"},"content":"     * Gets the section of a recipient."},{"lineNumber":310,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":311,"author":{"gitId":"-"},"content":"    String getRecipientSection("},{"lineNumber":312,"author":{"gitId":"-"},"content":"            String courseId, FeedbackParticipantType giverType, FeedbackParticipantType recipientType,"},{"lineNumber":313,"author":{"gitId":"-"},"content":"            String recipientIdentifier) {"},{"lineNumber":314,"author":{"gitId":"-"},"content":"        if (!isCourseMigrated(courseId)) {"},{"lineNumber":315,"author":{"gitId":"-"},"content":"            return getDatastoreRecipientSection(courseId, giverType, recipientType, recipientIdentifier);"},{"lineNumber":316,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":317,"author":{"gitId":"-"},"content":""},{"lineNumber":318,"author":{"gitId":"-"},"content":"        switch (recipientType) {"},{"lineNumber":319,"author":{"gitId":"-"},"content":"        case SELF:"},{"lineNumber":320,"author":{"gitId":"-"},"content":"            switch (giverType) {"},{"lineNumber":321,"author":{"gitId":"-"},"content":"            case INSTRUCTORS:"},{"lineNumber":322,"author":{"gitId":"-"},"content":"            case SELF:"},{"lineNumber":323,"author":{"gitId":"-"},"content":"                return Const.DEFAULT_SECTION;"},{"lineNumber":324,"author":{"gitId":"-"},"content":"            case TEAMS:"},{"lineNumber":325,"author":{"gitId":"-"},"content":"            case TEAMS_IN_SAME_SECTION:"},{"lineNumber":326,"author":{"gitId":"-"},"content":"                Section section \u003d sqlLogic.getSectionByCourseIdAndTeam(courseId, recipientIdentifier);"},{"lineNumber":327,"author":{"gitId":"-"},"content":"                return section \u003d\u003d null ? Const.DEFAULT_SECTION : section.getName();"},{"lineNumber":328,"author":{"gitId":"-"},"content":"            case STUDENTS:"},{"lineNumber":329,"author":{"gitId":"-"},"content":"            case STUDENTS_IN_SAME_SECTION:"},{"lineNumber":330,"author":{"gitId":"EuniceSim142"},"content":"                Student student \u003d sqlLogic.getStudentForEmail(courseId, recipientIdentifier);"},{"lineNumber":331,"author":{"gitId":"-"},"content":"                return student \u003d\u003d null ? Const.DEFAULT_SECTION : student.getTeam().getSection().getName();"},{"lineNumber":332,"author":{"gitId":"-"},"content":"            default:"},{"lineNumber":333,"author":{"gitId":"-"},"content":"                assert false : \"Invalid giver type \" + giverType + \" for recipient type \" + recipientType;"},{"lineNumber":334,"author":{"gitId":"-"},"content":"                return null;"},{"lineNumber":335,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":336,"author":{"gitId":"-"},"content":"        case INSTRUCTORS:"},{"lineNumber":337,"author":{"gitId":"-"},"content":"        case NONE:"},{"lineNumber":338,"author":{"gitId":"-"},"content":"            return Const.DEFAULT_SECTION;"},{"lineNumber":339,"author":{"gitId":"-"},"content":"        case TEAMS:"},{"lineNumber":340,"author":{"gitId":"-"},"content":"        case TEAMS_EXCLUDING_SELF:"},{"lineNumber":341,"author":{"gitId":"-"},"content":"        case TEAMS_IN_SAME_SECTION:"},{"lineNumber":342,"author":{"gitId":"-"},"content":"        case OWN_TEAM:"},{"lineNumber":343,"author":{"gitId":"-"},"content":"            Section section \u003d sqlLogic.getSectionByCourseIdAndTeam(courseId, recipientIdentifier);"},{"lineNumber":344,"author":{"gitId":"-"},"content":"            return section \u003d\u003d null ? Const.DEFAULT_SECTION : section.getName();"},{"lineNumber":345,"author":{"gitId":"-"},"content":"        case STUDENTS:"},{"lineNumber":346,"author":{"gitId":"-"},"content":"        case STUDENTS_EXCLUDING_SELF:"},{"lineNumber":347,"author":{"gitId":"-"},"content":"        case STUDENTS_IN_SAME_SECTION:"},{"lineNumber":348,"author":{"gitId":"-"},"content":"        case OWN_TEAM_MEMBERS:"},{"lineNumber":349,"author":{"gitId":"-"},"content":"        case OWN_TEAM_MEMBERS_INCLUDING_SELF:"},{"lineNumber":350,"author":{"gitId":"EuniceSim142"},"content":"            Student student \u003d sqlLogic.getStudentForEmail(courseId, recipientIdentifier);"},{"lineNumber":351,"author":{"gitId":"-"},"content":"            return student \u003d\u003d null ? Const.DEFAULT_SECTION : student.getTeam().getSection().getName();"},{"lineNumber":352,"author":{"gitId":"-"},"content":"        default:"},{"lineNumber":353,"author":{"gitId":"-"},"content":"            assert false : \"Unknown recipient type \" + recipientType;"},{"lineNumber":354,"author":{"gitId":"-"},"content":"            return null;"},{"lineNumber":355,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":356,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":357,"author":{"gitId":"-"},"content":""},{"lineNumber":358,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":359,"author":{"gitId":"-"},"content":"     * Gets the section of a recipient."},{"lineNumber":360,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":361,"author":{"gitId":"-"},"content":"    String getDatastoreRecipientSection("},{"lineNumber":362,"author":{"gitId":"-"},"content":"            String courseId, FeedbackParticipantType giverType, FeedbackParticipantType recipientType,"},{"lineNumber":363,"author":{"gitId":"-"},"content":"            String recipientIdentifier) {"},{"lineNumber":364,"author":{"gitId":"-"},"content":"        switch (recipientType) {"},{"lineNumber":365,"author":{"gitId":"-"},"content":"        case SELF:"},{"lineNumber":366,"author":{"gitId":"-"},"content":"            switch (giverType) {"},{"lineNumber":367,"author":{"gitId":"-"},"content":"            case INSTRUCTORS:"},{"lineNumber":368,"author":{"gitId":"-"},"content":"            case SELF:"},{"lineNumber":369,"author":{"gitId":"-"},"content":"                return Const.DEFAULT_SECTION;"},{"lineNumber":370,"author":{"gitId":"-"},"content":"            case TEAMS:"},{"lineNumber":371,"author":{"gitId":"-"},"content":"            case TEAMS_IN_SAME_SECTION:"},{"lineNumber":372,"author":{"gitId":"-"},"content":"                return logic.getSectionForTeam(courseId, recipientIdentifier);"},{"lineNumber":373,"author":{"gitId":"-"},"content":"            case STUDENTS:"},{"lineNumber":374,"author":{"gitId":"-"},"content":"            case STUDENTS_IN_SAME_SECTION:"},{"lineNumber":375,"author":{"gitId":"-"},"content":"                StudentAttributes student \u003d logic.getStudentForEmail(courseId, recipientIdentifier);"},{"lineNumber":376,"author":{"gitId":"-"},"content":"                return student \u003d\u003d null ? Const.DEFAULT_SECTION : student.getSection();"},{"lineNumber":377,"author":{"gitId":"-"},"content":"            default:"},{"lineNumber":378,"author":{"gitId":"-"},"content":"                assert false : \"Invalid giver type \" + giverType + \" for recipient type \" + recipientType;"},{"lineNumber":379,"author":{"gitId":"-"},"content":"                return null;"},{"lineNumber":380,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":381,"author":{"gitId":"-"},"content":"        case INSTRUCTORS:"},{"lineNumber":382,"author":{"gitId":"-"},"content":"        case NONE:"},{"lineNumber":383,"author":{"gitId":"-"},"content":"            return Const.DEFAULT_SECTION;"},{"lineNumber":384,"author":{"gitId":"-"},"content":"        case TEAMS:"},{"lineNumber":385,"author":{"gitId":"-"},"content":"        case TEAMS_EXCLUDING_SELF:"},{"lineNumber":386,"author":{"gitId":"-"},"content":"        case TEAMS_IN_SAME_SECTION:"},{"lineNumber":387,"author":{"gitId":"-"},"content":"        case OWN_TEAM:"},{"lineNumber":388,"author":{"gitId":"-"},"content":"            return logic.getSectionForTeam(courseId, recipientIdentifier);"},{"lineNumber":389,"author":{"gitId":"-"},"content":"        case STUDENTS:"},{"lineNumber":390,"author":{"gitId":"-"},"content":"        case STUDENTS_EXCLUDING_SELF:"},{"lineNumber":391,"author":{"gitId":"-"},"content":"        case STUDENTS_IN_SAME_SECTION:"},{"lineNumber":392,"author":{"gitId":"-"},"content":"        case OWN_TEAM_MEMBERS:"},{"lineNumber":393,"author":{"gitId":"-"},"content":"        case OWN_TEAM_MEMBERS_INCLUDING_SELF:"},{"lineNumber":394,"author":{"gitId":"-"},"content":"            StudentAttributes student \u003d logic.getStudentForEmail(courseId, recipientIdentifier);"},{"lineNumber":395,"author":{"gitId":"-"},"content":"            return student \u003d\u003d null ? Const.DEFAULT_SECTION : student.getSection();"},{"lineNumber":396,"author":{"gitId":"-"},"content":"        default:"},{"lineNumber":397,"author":{"gitId":"-"},"content":"            assert false : \"Unknown recipient type \" + recipientType;"},{"lineNumber":398,"author":{"gitId":"-"},"content":"            return null;"},{"lineNumber":399,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":400,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":401,"author":{"gitId":"-"},"content":""},{"lineNumber":402,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"EuniceSim142":6,"-":396}},{"path":"src/main/java/teammates/ui/webapi/BinCourseAction.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.CourseAttributes;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":6,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.Course;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import teammates.ui.output.CourseData;"},{"lineNumber":8,"author":{"gitId":"-"},"content":""},{"lineNumber":9,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":10,"author":{"gitId":"-"},"content":" * Move a course to the recycle bin."},{"lineNumber":11,"author":{"gitId":"-"},"content":" */"},{"lineNumber":12,"author":{"gitId":"EuniceSim142"},"content":"public class BinCourseAction extends Action {"},{"lineNumber":13,"author":{"gitId":"-"},"content":""},{"lineNumber":14,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":15,"author":{"gitId":"-"},"content":"    AuthType getMinAuthLevel() {"},{"lineNumber":16,"author":{"gitId":"-"},"content":"        return AuthType.LOGGED_IN;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":18,"author":{"gitId":"-"},"content":""},{"lineNumber":19,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":20,"author":{"gitId":"-"},"content":"    void checkSpecificAccessControl() throws UnauthorizedAccessException {"},{"lineNumber":21,"author":{"gitId":"-"},"content":"        if (!userInfo.isInstructor) {"},{"lineNumber":22,"author":{"gitId":"-"},"content":"            throw new UnauthorizedAccessException(\"Instructor privilege is required to access this resource.\");"},{"lineNumber":23,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":24,"author":{"gitId":"-"},"content":""},{"lineNumber":25,"author":{"gitId":"-"},"content":"        String idOfCourseToBin \u003d getNonNullRequestParamValue(Const.ParamsNames.COURSE_ID);"},{"lineNumber":26,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":27,"author":{"gitId":"EuniceSim142"},"content":"        if (!isCourseMigrated(idOfCourseToBin)) {"},{"lineNumber":28,"author":{"gitId":"EuniceSim142"},"content":"            CourseAttributes courseAttributes \u003d logic.getCourse(idOfCourseToBin);"},{"lineNumber":29,"author":{"gitId":"-"},"content":"            gateKeeper.verifyAccessible(logic.getInstructorForGoogleId(idOfCourseToBin, userInfo.id),"},{"lineNumber":30,"author":{"gitId":"EuniceSim142"},"content":"                    courseAttributes, Const.InstructorPermissions.CAN_MODIFY_COURSE);"},{"lineNumber":31,"author":{"gitId":"EuniceSim142"},"content":"            return;"},{"lineNumber":32,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":33,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":34,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d sqlLogic.getCourse(idOfCourseToBin);"},{"lineNumber":35,"author":{"gitId":"EuniceSim142"},"content":"        gateKeeper.verifyAccessible(sqlLogic.getInstructorByGoogleId(idOfCourseToBin, userInfo.id),"},{"lineNumber":36,"author":{"gitId":"EuniceSim142"},"content":"                course, Const.InstructorPermissions.CAN_MODIFY_COURSE);"},{"lineNumber":37,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":38,"author":{"gitId":"-"},"content":""},{"lineNumber":39,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":40,"author":{"gitId":"-"},"content":"    public JsonResult execute() {"},{"lineNumber":41,"author":{"gitId":"-"},"content":"        String idOfCourseToBin \u003d getNonNullRequestParamValue(Const.ParamsNames.COURSE_ID);"},{"lineNumber":42,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":43,"author":{"gitId":"EuniceSim142"},"content":"            if (!isCourseMigrated(idOfCourseToBin)) {"},{"lineNumber":44,"author":{"gitId":"-"},"content":"                CourseAttributes courseAttributes \u003d logic.getCourse(idOfCourseToBin);"},{"lineNumber":45,"author":{"gitId":"-"},"content":"                courseAttributes.setDeletedAt(logic.moveCourseToRecycleBin(idOfCourseToBin));"},{"lineNumber":46,"author":{"gitId":"-"},"content":"                return new JsonResult(new CourseData(courseAttributes));"},{"lineNumber":47,"author":{"gitId":"EuniceSim142"},"content":"            }"},{"lineNumber":48,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":49,"author":{"gitId":"EuniceSim142"},"content":"            Course binnedCourse \u003d sqlLogic.moveCourseToRecycleBin(idOfCourseToBin);"},{"lineNumber":50,"author":{"gitId":"EuniceSim142"},"content":"            return new JsonResult(new CourseData(binnedCourse));"},{"lineNumber":51,"author":{"gitId":"-"},"content":"        } catch (EntityDoesNotExistException e) {"},{"lineNumber":52,"author":{"gitId":"-"},"content":"            throw new EntityNotFoundException(e);"},{"lineNumber":53,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":54,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":55,"author":{"gitId":"-"},"content":""},{"lineNumber":56,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"EuniceSim142":17,"-":39}},{"path":"src/main/java/teammates/ui/webapi/CreateAccountRequestAction.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import teammates.common.util.EmailWrapper;"},{"lineNumber":6,"author":{"gitId":"kevin9foong"},"content":"import teammates.storage.sqlentity.AccountRequest;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import teammates.ui.output.JoinLinkData;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.ui.request.AccountCreateRequest;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.ui.request.InvalidHttpRequestBodyException;"},{"lineNumber":10,"author":{"gitId":"-"},"content":""},{"lineNumber":11,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":12,"author":{"gitId":"-"},"content":" * Creates a new account request."},{"lineNumber":13,"author":{"gitId":"-"},"content":" */"},{"lineNumber":14,"author":{"gitId":"-"},"content":"class CreateAccountRequestAction extends AdminOnlyAction {"},{"lineNumber":15,"author":{"gitId":"-"},"content":""},{"lineNumber":16,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":17,"author":{"gitId":"kevin9foong"},"content":"    public JsonResult execute()"},{"lineNumber":18,"author":{"gitId":"kevin9foong"},"content":"            throws InvalidHttpRequestBodyException, InvalidOperationException {"},{"lineNumber":19,"author":{"gitId":"-"},"content":"        AccountCreateRequest createRequest \u003d getAndValidateRequestBody(AccountCreateRequest.class);"},{"lineNumber":20,"author":{"gitId":"-"},"content":""},{"lineNumber":21,"author":{"gitId":"-"},"content":"        String instructorName \u003d createRequest.getInstructorName().trim();"},{"lineNumber":22,"author":{"gitId":"-"},"content":"        String instructorEmail \u003d createRequest.getInstructorEmail().trim();"},{"lineNumber":23,"author":{"gitId":"-"},"content":"        String instructorInstitution \u003d createRequest.getInstructorInstitution().trim();"},{"lineNumber":24,"author":{"gitId":"-"},"content":""},{"lineNumber":25,"author":{"gitId":"kevin9foong"},"content":"        AccountRequest accountRequest;"},{"lineNumber":26,"author":{"gitId":"-"},"content":""},{"lineNumber":27,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":28,"author":{"gitId":"kevin9foong"},"content":"            accountRequest \u003d sqlLogic.createAccountRequest(instructorName, instructorEmail, instructorInstitution);"},{"lineNumber":29,"author":{"gitId":"-"},"content":"        } catch (InvalidParametersException ipe) {"},{"lineNumber":30,"author":{"gitId":"-"},"content":"            throw new InvalidHttpRequestBodyException(ipe);"},{"lineNumber":31,"author":{"gitId":"-"},"content":"        } catch (EntityAlreadyExistsException eaee) {"},{"lineNumber":32,"author":{"gitId":"-"},"content":"            // Use existing account request"},{"lineNumber":33,"author":{"gitId":"kevin9foong"},"content":"            accountRequest \u003d sqlLogic.getAccountRequest(instructorEmail, instructorInstitution);"},{"lineNumber":34,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":35,"author":{"gitId":"-"},"content":""},{"lineNumber":36,"author":{"gitId":"kevin9foong"},"content":"        assert accountRequest !\u003d null;"},{"lineNumber":37,"author":{"gitId":"-"},"content":""},{"lineNumber":38,"author":{"gitId":"kevin9foong"},"content":"        if (accountRequest.getRegisteredAt() !\u003d null) {"},{"lineNumber":39,"author":{"gitId":"-"},"content":"            throw new InvalidOperationException(\"Cannot create account request as instructor has already registered.\");"},{"lineNumber":40,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":41,"author":{"gitId":"-"},"content":""},{"lineNumber":42,"author":{"gitId":"kevin9foong"},"content":"        String joinLink \u003d accountRequest.getRegistrationUrl();"},{"lineNumber":43,"author":{"gitId":"-"},"content":""},{"lineNumber":44,"author":{"gitId":"-"},"content":"        EmailWrapper email \u003d emailGenerator.generateNewInstructorAccountJoinEmail("},{"lineNumber":45,"author":{"gitId":"-"},"content":"                instructorEmail, instructorName, joinLink);"},{"lineNumber":46,"author":{"gitId":"-"},"content":"        emailSender.sendEmail(email);"},{"lineNumber":47,"author":{"gitId":"-"},"content":""},{"lineNumber":48,"author":{"gitId":"-"},"content":"        JoinLinkData output \u003d new JoinLinkData(joinLink);"},{"lineNumber":49,"author":{"gitId":"-"},"content":"        return new JsonResult(output);"},{"lineNumber":50,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":51,"author":{"gitId":"-"},"content":""},{"lineNumber":52,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"-":43,"kevin9foong":9}},{"path":"src/main/java/teammates/ui/webapi/CreateCourseAction.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import teammates.common.util.FieldValidator;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import teammates.common.util.HibernateUtil;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Course;"},{"lineNumber":9,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import teammates.ui.output.CourseData;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import teammates.ui.request.CourseCreateRequest;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import teammates.ui.request.InvalidHttpRequestBodyException;"},{"lineNumber":13,"author":{"gitId":"-"},"content":""},{"lineNumber":14,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":15,"author":{"gitId":"-"},"content":" * Create a new course for an instructor."},{"lineNumber":16,"author":{"gitId":"-"},"content":" */"},{"lineNumber":17,"author":{"gitId":"EuniceSim142"},"content":"public class CreateCourseAction extends Action {"},{"lineNumber":18,"author":{"gitId":"-"},"content":""},{"lineNumber":19,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":20,"author":{"gitId":"-"},"content":"    AuthType getMinAuthLevel() {"},{"lineNumber":21,"author":{"gitId":"-"},"content":"        return AuthType.LOGGED_IN;"},{"lineNumber":22,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":23,"author":{"gitId":"-"},"content":""},{"lineNumber":24,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":25,"author":{"gitId":"-"},"content":"    void checkSpecificAccessControl() throws UnauthorizedAccessException {"},{"lineNumber":26,"author":{"gitId":"-"},"content":"        if (!userInfo.isInstructor) {"},{"lineNumber":27,"author":{"gitId":"-"},"content":"            throw new UnauthorizedAccessException(\"Instructor privilege is required to access this resource.\");"},{"lineNumber":28,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":29,"author":{"gitId":"-"},"content":""},{"lineNumber":30,"author":{"gitId":"-"},"content":"        String institute \u003d getNonNullRequestParamValue(Const.ParamsNames.INSTRUCTOR_INSTITUTION);"},{"lineNumber":31,"author":{"gitId":"-"},"content":""},{"lineNumber":32,"author":{"gitId":"EuniceSim142"},"content":"        boolean canCreateCourse \u003d sqlLogic.canInstructorCreateCourse(userInfo.getId(), institute);"},{"lineNumber":33,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":34,"author":{"gitId":"-"},"content":"        if (!canCreateCourse) {"},{"lineNumber":35,"author":{"gitId":"-"},"content":"            throw new UnauthorizedAccessException(\"You are not allowed to create a course under this institute. \""},{"lineNumber":36,"author":{"gitId":"-"},"content":"                    + \"If you wish to do so, please request for an account under the institute.\", true);"},{"lineNumber":37,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":38,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":39,"author":{"gitId":"-"},"content":""},{"lineNumber":40,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":41,"author":{"gitId":"-"},"content":"    public JsonResult execute() throws InvalidHttpRequestBodyException, InvalidOperationException {"},{"lineNumber":42,"author":{"gitId":"-"},"content":"        CourseCreateRequest courseCreateRequest \u003d getAndValidateRequestBody(CourseCreateRequest.class);"},{"lineNumber":43,"author":{"gitId":"-"},"content":"        courseCreateRequest.setCourseId(courseCreateRequest.getCourseId().trim());"},{"lineNumber":44,"author":{"gitId":"-"},"content":""},{"lineNumber":45,"author":{"gitId":"-"},"content":"        String newCourseTimeZone \u003d courseCreateRequest.getTimeZone();"},{"lineNumber":46,"author":{"gitId":"-"},"content":""},{"lineNumber":47,"author":{"gitId":"-"},"content":"        String timeZoneErrorMessage \u003d FieldValidator.getInvalidityInfoForTimeZone(newCourseTimeZone);"},{"lineNumber":48,"author":{"gitId":"-"},"content":"        if (!timeZoneErrorMessage.isEmpty()) {"},{"lineNumber":49,"author":{"gitId":"-"},"content":"            throw new InvalidHttpRequestBodyException(timeZoneErrorMessage);"},{"lineNumber":50,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":51,"author":{"gitId":"-"},"content":""},{"lineNumber":52,"author":{"gitId":"-"},"content":"        String newCourseId \u003d courseCreateRequest.getCourseId();"},{"lineNumber":53,"author":{"gitId":"-"},"content":"        String newCourseName \u003d courseCreateRequest.getCourseName();"},{"lineNumber":54,"author":{"gitId":"-"},"content":"        String institute \u003d getNonNullRequestParamValue(Const.ParamsNames.INSTRUCTOR_INSTITUTION);"},{"lineNumber":55,"author":{"gitId":"-"},"content":""},{"lineNumber":56,"author":{"gitId":"-"},"content":"        Course course \u003d new Course(newCourseId, newCourseName, newCourseTimeZone, institute);"},{"lineNumber":57,"author":{"gitId":"-"},"content":""},{"lineNumber":58,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":59,"author":{"gitId":"EuniceSim142"},"content":"            course \u003d sqlLogic.createCourse(course);"},{"lineNumber":60,"author":{"gitId":"-"},"content":""},{"lineNumber":61,"author":{"gitId":"EuniceSim142"},"content":"            Instructor instructorCreatedForCourse \u003d sqlLogic.getInstructorByGoogleId(newCourseId, userInfo.getId());"},{"lineNumber":62,"author":{"gitId":"-"},"content":"            taskQueuer.scheduleInstructorForSearchIndexing(instructorCreatedForCourse.getCourseId(),"},{"lineNumber":63,"author":{"gitId":"-"},"content":"                    instructorCreatedForCourse.getEmail());"},{"lineNumber":64,"author":{"gitId":"-"},"content":"        } catch (EntityAlreadyExistsException e) {"},{"lineNumber":65,"author":{"gitId":"-"},"content":"            throw new InvalidOperationException(\"The course ID \" + course.getId()"},{"lineNumber":66,"author":{"gitId":"-"},"content":"                    + \" has been used by another course, possibly by some other user.\""},{"lineNumber":67,"author":{"gitId":"-"},"content":"                    + \" Please try again with a different course ID.\", e);"},{"lineNumber":68,"author":{"gitId":"-"},"content":"        } catch (InvalidParametersException e) {"},{"lineNumber":69,"author":{"gitId":"-"},"content":"            throw new InvalidHttpRequestBodyException(e);"},{"lineNumber":70,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":71,"author":{"gitId":"-"},"content":""},{"lineNumber":72,"author":{"gitId":"-"},"content":"        HibernateUtil.flushSession();"},{"lineNumber":73,"author":{"gitId":"-"},"content":"        CourseData courseData \u003d new CourseData(course);"},{"lineNumber":74,"author":{"gitId":"-"},"content":"        return new JsonResult(courseData);"},{"lineNumber":75,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":76,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"EuniceSim142":6,"-":70}},{"path":"src/main/java/teammates/ui/webapi/CreateFeedbackQuestionAction.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":4,"author":{"gitId":"-"},"content":""},{"lineNumber":5,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.InstructorAttributes;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackQuestionDetails;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":9,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.FeedbackQuestion;"},{"lineNumber":10,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import teammates.ui.output.FeedbackQuestionData;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import teammates.ui.request.FeedbackQuestionCreateRequest;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import teammates.ui.request.InvalidHttpRequestBodyException;"},{"lineNumber":14,"author":{"gitId":"-"},"content":""},{"lineNumber":15,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":16,"author":{"gitId":"-"},"content":" * Creates a feedback question."},{"lineNumber":17,"author":{"gitId":"-"},"content":" */"},{"lineNumber":18,"author":{"gitId":"hhdqirui"},"content":"public class CreateFeedbackQuestionAction extends Action {"},{"lineNumber":19,"author":{"gitId":"-"},"content":""},{"lineNumber":20,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":21,"author":{"gitId":"-"},"content":"    AuthType getMinAuthLevel() {"},{"lineNumber":22,"author":{"gitId":"-"},"content":"        return AuthType.LOGGED_IN;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":24,"author":{"gitId":"-"},"content":""},{"lineNumber":25,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":26,"author":{"gitId":"-"},"content":"    void checkSpecificAccessControl() throws UnauthorizedAccessException {"},{"lineNumber":27,"author":{"gitId":"-"},"content":"        String courseId \u003d getNonNullRequestParamValue(Const.ParamsNames.COURSE_ID);"},{"lineNumber":28,"author":{"gitId":"-"},"content":"        String feedbackSessionName \u003d getNonNullRequestParamValue(Const.ParamsNames.FEEDBACK_SESSION_NAME);"},{"lineNumber":29,"author":{"gitId":"-"},"content":"        InstructorAttributes instructorDetailForCourse \u003d logic.getInstructorForGoogleId(courseId, userInfo.getId());"},{"lineNumber":30,"author":{"gitId":"hhdqirui"},"content":"        if (!isCourseMigrated(courseId)) {"},{"lineNumber":31,"author":{"gitId":"-"},"content":"            gateKeeper.verifyAccessible(instructorDetailForCourse,"},{"lineNumber":32,"author":{"gitId":"-"},"content":"                    getNonNullFeedbackSession(feedbackSessionName, courseId),"},{"lineNumber":33,"author":{"gitId":"-"},"content":"                    Const.InstructorPermissions.CAN_MODIFY_SESSION);"},{"lineNumber":34,"author":{"gitId":"hhdqirui"},"content":"            return;"},{"lineNumber":35,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":36,"author":{"gitId":"-"},"content":""},{"lineNumber":37,"author":{"gitId":"hhdqirui"},"content":"        // TODO: Remove sql from variable name after migration"},{"lineNumber":38,"author":{"gitId":"hhdqirui"},"content":"        Instructor sqlInstructorDetailForCourse \u003d sqlLogic.getInstructorByGoogleId(courseId, userInfo.getId());"},{"lineNumber":39,"author":{"gitId":"hhdqirui"},"content":"        gateKeeper.verifyAccessible(sqlInstructorDetailForCourse,"},{"lineNumber":40,"author":{"gitId":"hhdqirui"},"content":"                getNonNullSqlFeedbackSession(feedbackSessionName, courseId),"},{"lineNumber":41,"author":{"gitId":"-"},"content":"                Const.InstructorPermissions.CAN_MODIFY_SESSION);"},{"lineNumber":42,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":43,"author":{"gitId":"-"},"content":""},{"lineNumber":44,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":45,"author":{"gitId":"-"},"content":"    public JsonResult execute() throws InvalidHttpRequestBodyException {"},{"lineNumber":46,"author":{"gitId":"-"},"content":"        String courseId \u003d getNonNullRequestParamValue(Const.ParamsNames.COURSE_ID);"},{"lineNumber":47,"author":{"gitId":"-"},"content":"        String feedbackSessionName \u003d getNonNullRequestParamValue(Const.ParamsNames.FEEDBACK_SESSION_NAME);"},{"lineNumber":48,"author":{"gitId":"-"},"content":""},{"lineNumber":49,"author":{"gitId":"-"},"content":"        FeedbackQuestionCreateRequest request \u003d getAndValidateRequestBody(FeedbackQuestionCreateRequest.class);"},{"lineNumber":50,"author":{"gitId":"-"},"content":""},{"lineNumber":51,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion feedbackQuestion \u003d FeedbackQuestion.makeQuestion("},{"lineNumber":52,"author":{"gitId":"hhdqirui"},"content":"                getNonNullSqlFeedbackSession(feedbackSessionName, courseId),"},{"lineNumber":53,"author":{"gitId":"hhdqirui"},"content":"                request.getQuestionNumber(),"},{"lineNumber":54,"author":{"gitId":"hhdqirui"},"content":"                request.getQuestionDescription(),"},{"lineNumber":55,"author":{"gitId":"hhdqirui"},"content":"                request.getGiverType(),"},{"lineNumber":56,"author":{"gitId":"hhdqirui"},"content":"                request.getRecipientType(),"},{"lineNumber":57,"author":{"gitId":"hhdqirui"},"content":"                request.getNumberOfEntitiesToGiveFeedbackTo(),"},{"lineNumber":58,"author":{"gitId":"hhdqirui"},"content":"                request.getShowResponsesTo(),"},{"lineNumber":59,"author":{"gitId":"hhdqirui"},"content":"                request.getShowGiverNameTo(),"},{"lineNumber":60,"author":{"gitId":"hhdqirui"},"content":"                request.getShowRecipientNameTo(),"},{"lineNumber":61,"author":{"gitId":"hhdqirui"},"content":"                request.getQuestionDetails()"},{"lineNumber":62,"author":{"gitId":"hhdqirui"},"content":"        );"},{"lineNumber":63,"author":{"gitId":"-"},"content":""},{"lineNumber":64,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":65,"author":{"gitId":"-"},"content":"            // validate questions (giver \u0026 recipient)"},{"lineNumber":66,"author":{"gitId":"hhdqirui"},"content":"            String err \u003d feedbackQuestion.getQuestionDetailsCopy().validateGiverRecipientVisibility(feedbackQuestion);"},{"lineNumber":67,"author":{"gitId":"-"},"content":""},{"lineNumber":68,"author":{"gitId":"-"},"content":"            if (!err.isEmpty()) {"},{"lineNumber":69,"author":{"gitId":"-"},"content":"                throw new InvalidHttpRequestBodyException(err);"},{"lineNumber":70,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":71,"author":{"gitId":"-"},"content":"            // validate questions (question details)"},{"lineNumber":72,"author":{"gitId":"hhdqirui"},"content":"            FeedbackQuestionDetails questionDetails \u003d feedbackQuestion.getQuestionDetailsCopy();"},{"lineNumber":73,"author":{"gitId":"-"},"content":"            List\u003cString\u003e questionDetailsErrors \u003d questionDetails.validateQuestionDetails();"},{"lineNumber":74,"author":{"gitId":"-"},"content":"            if (!questionDetailsErrors.isEmpty()) {"},{"lineNumber":75,"author":{"gitId":"-"},"content":"                throw new InvalidHttpRequestBodyException(questionDetailsErrors.toString());"},{"lineNumber":76,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":77,"author":{"gitId":"hhdqirui"},"content":"            feedbackQuestion \u003d sqlLogic.createFeedbackQuestion(feedbackQuestion);"},{"lineNumber":78,"author":{"gitId":"hhdqirui"},"content":"            return new JsonResult(new FeedbackQuestionData(feedbackQuestion));"},{"lineNumber":79,"author":{"gitId":"hhdqirui"},"content":"        } catch (InvalidParametersException ex) {"},{"lineNumber":80,"author":{"gitId":"hhdqirui"},"content":"            throw new InvalidHttpRequestBodyException(ex);"},{"lineNumber":81,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":82,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":83,"author":{"gitId":"-"},"content":""},{"lineNumber":84,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"hhdqirui":28,"-":56}},{"path":"src/main/java/teammates/ui/webapi/CreateNotificationAction.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.time.Instant;"},{"lineNumber":4,"author":{"gitId":"-"},"content":""},{"lineNumber":5,"author":{"gitId":"-"},"content":"import org.apache.http.HttpStatus;"},{"lineNumber":6,"author":{"gitId":"-"},"content":""},{"lineNumber":7,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.common.util.Logger;"},{"lineNumber":10,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.Notification;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import teammates.ui.output.NotificationData;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import teammates.ui.request.InvalidHttpRequestBodyException;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import teammates.ui.request.NotificationCreateRequest;"},{"lineNumber":14,"author":{"gitId":"-"},"content":""},{"lineNumber":15,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":16,"author":{"gitId":"-"},"content":" * Action: Creates a new notification banner."},{"lineNumber":17,"author":{"gitId":"-"},"content":" */"},{"lineNumber":18,"author":{"gitId":"-"},"content":"public class CreateNotificationAction extends AdminOnlyAction {"},{"lineNumber":19,"author":{"gitId":"-"},"content":"    private static final Logger log \u003d Logger.getLogger();"},{"lineNumber":20,"author":{"gitId":"-"},"content":""},{"lineNumber":21,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":22,"author":{"gitId":"-"},"content":"    public JsonResult execute() throws InvalidHttpRequestBodyException, InvalidOperationException {"},{"lineNumber":23,"author":{"gitId":"-"},"content":"        NotificationCreateRequest notificationRequest \u003d getAndValidateRequestBody(NotificationCreateRequest.class);"},{"lineNumber":24,"author":{"gitId":"-"},"content":""},{"lineNumber":25,"author":{"gitId":"-"},"content":"        Instant startTime \u003d Instant.ofEpochMilli(notificationRequest.getStartTimestamp());"},{"lineNumber":26,"author":{"gitId":"-"},"content":"        Instant endTime \u003d Instant.ofEpochMilli(notificationRequest.getEndTimestamp());"},{"lineNumber":27,"author":{"gitId":"-"},"content":""},{"lineNumber":28,"author":{"gitId":"-"},"content":"        Notification newNotification \u003d new Notification(startTime, endTime, notificationRequest.getStyle(),"},{"lineNumber":29,"author":{"gitId":"-"},"content":"                notificationRequest.getTargetUser(), notificationRequest.getTitle(), notificationRequest.getMessage());"},{"lineNumber":30,"author":{"gitId":"-"},"content":""},{"lineNumber":31,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":32,"author":{"gitId":"hhdqirui"},"content":"            return new JsonResult(new NotificationData(sqlLogic.createNotification(newNotification)));"},{"lineNumber":33,"author":{"gitId":"-"},"content":"        } catch (InvalidParametersException e) {"},{"lineNumber":34,"author":{"gitId":"-"},"content":"            throw new InvalidHttpRequestBodyException(e);"},{"lineNumber":35,"author":{"gitId":"-"},"content":"        } catch (EntityAlreadyExistsException e) {"},{"lineNumber":36,"author":{"gitId":"-"},"content":"            // Should not happen since UUID is usually unique"},{"lineNumber":37,"author":{"gitId":"-"},"content":"            log.severe(\"Unexpected error\", e);"},{"lineNumber":38,"author":{"gitId":"-"},"content":"            return new JsonResult(e.getMessage(), HttpStatus.SC_INTERNAL_SERVER_ERROR);"},{"lineNumber":39,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":40,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":41,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"hhdqirui":2,"-":39}},{"path":"src/main/java/teammates/ui/webapi/DeleteAccountAction.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"domlimm"},"content":"import teammates.common.datatransfer.attributes.AccountAttributes;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":5,"author":{"gitId":"-"},"content":""},{"lineNumber":6,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":7,"author":{"gitId":"-"},"content":" * Action: deletes an existing account (either student or instructor)."},{"lineNumber":8,"author":{"gitId":"-"},"content":" */"},{"lineNumber":9,"author":{"gitId":"-"},"content":"class DeleteAccountAction extends AdminOnlyAction {"},{"lineNumber":10,"author":{"gitId":"-"},"content":""},{"lineNumber":11,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":12,"author":{"gitId":"-"},"content":"    public JsonResult execute() {"},{"lineNumber":13,"author":{"gitId":"-"},"content":"        String googleId \u003d getNonNullRequestParamValue(Const.ParamsNames.INSTRUCTOR_ID);"},{"lineNumber":14,"author":{"gitId":"domlimm"},"content":"        AccountAttributes accountInfo \u003d logic.getAccount(googleId);"},{"lineNumber":15,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":16,"author":{"gitId":"domlimm"},"content":"        if (accountInfo \u003d\u003d null || accountInfo.isMigrated()) {"},{"lineNumber":17,"author":{"gitId":"domlimm"},"content":"            sqlLogic.deleteAccountCascade(googleId);"},{"lineNumber":18,"author":{"gitId":"domlimm"},"content":"        } else {"},{"lineNumber":19,"author":{"gitId":"-"},"content":"            logic.deleteAccountCascade(googleId);"},{"lineNumber":20,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":21,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":22,"author":{"gitId":"-"},"content":"        return new JsonResult(\"Account is successfully deleted.\");"},{"lineNumber":23,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":24,"author":{"gitId":"-"},"content":""},{"lineNumber":25,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"domlimm":7,"-":18}},{"path":"src/main/java/teammates/ui/webapi/DeleteAccountRequestAction.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":4,"author":{"gitId":"kevin9foong"},"content":"import teammates.storage.sqlentity.AccountRequest;"},{"lineNumber":5,"author":{"gitId":"-"},"content":""},{"lineNumber":6,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":7,"author":{"gitId":"-"},"content":" * Deletes an existing account request."},{"lineNumber":8,"author":{"gitId":"-"},"content":" */"},{"lineNumber":9,"author":{"gitId":"-"},"content":"class DeleteAccountRequestAction extends AdminOnlyAction {"},{"lineNumber":10,"author":{"gitId":"-"},"content":""},{"lineNumber":11,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":12,"author":{"gitId":"-"},"content":"    public JsonResult execute() throws InvalidOperationException {"},{"lineNumber":13,"author":{"gitId":"-"},"content":"        String email \u003d getNonNullRequestParamValue(Const.ParamsNames.INSTRUCTOR_EMAIL);"},{"lineNumber":14,"author":{"gitId":"-"},"content":"        String institute \u003d getNonNullRequestParamValue(Const.ParamsNames.INSTRUCTOR_INSTITUTION);"},{"lineNumber":15,"author":{"gitId":"-"},"content":""},{"lineNumber":16,"author":{"gitId":"kevin9foong"},"content":"        AccountRequest toDelete \u003d sqlLogic.getAccountRequest(email, institute);"},{"lineNumber":17,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":18,"author":{"gitId":"kevin9foong"},"content":"        if (toDelete !\u003d null \u0026\u0026 toDelete.getRegisteredAt() !\u003d null) {"},{"lineNumber":19,"author":{"gitId":"kevin9foong"},"content":"            // instructor is already registered and cannot be deleted"},{"lineNumber":20,"author":{"gitId":"-"},"content":"            throw new InvalidOperationException(\"Account request of a registered instructor cannot be deleted.\");"},{"lineNumber":21,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":22,"author":{"gitId":"-"},"content":""},{"lineNumber":23,"author":{"gitId":"kevin9foong"},"content":"        sqlLogic.deleteAccountRequest(email, institute);"},{"lineNumber":24,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":25,"author":{"gitId":"-"},"content":"        return new JsonResult(\"Account request successfully deleted.\");"},{"lineNumber":26,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":27,"author":{"gitId":"-"},"content":""},{"lineNumber":28,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"-":21,"kevin9foong":7}},{"path":"src/main/java/teammates/ui/webapi/DeleteCourseAction.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.datatransfer.attributes.CourseAttributes;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":5,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.Course;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import teammates.ui.output.MessageOutput;"},{"lineNumber":7,"author":{"gitId":"-"},"content":""},{"lineNumber":8,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":9,"author":{"gitId":"-"},"content":" * Delete a course."},{"lineNumber":10,"author":{"gitId":"-"},"content":" */"},{"lineNumber":11,"author":{"gitId":"EuniceSim142"},"content":"public class DeleteCourseAction extends Action {"},{"lineNumber":12,"author":{"gitId":"-"},"content":""},{"lineNumber":13,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":14,"author":{"gitId":"-"},"content":"    AuthType getMinAuthLevel() {"},{"lineNumber":15,"author":{"gitId":"-"},"content":"        return AuthType.LOGGED_IN;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":17,"author":{"gitId":"-"},"content":""},{"lineNumber":18,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":19,"author":{"gitId":"-"},"content":"    void checkSpecificAccessControl() throws UnauthorizedAccessException {"},{"lineNumber":20,"author":{"gitId":"-"},"content":"        if (!userInfo.isInstructor) {"},{"lineNumber":21,"author":{"gitId":"-"},"content":"            throw new UnauthorizedAccessException(\"Instructor privilege is required to access this resource.\");"},{"lineNumber":22,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":23,"author":{"gitId":"-"},"content":"        String idOfCourseToDelete \u003d getNonNullRequestParamValue(Const.ParamsNames.COURSE_ID);"},{"lineNumber":24,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":25,"author":{"gitId":"EuniceSim142"},"content":"        if (!isCourseMigrated(idOfCourseToDelete)) {"},{"lineNumber":26,"author":{"gitId":"EuniceSim142"},"content":"            CourseAttributes courseAttributes \u003d logic.getCourse(idOfCourseToDelete);"},{"lineNumber":27,"author":{"gitId":"-"},"content":"            gateKeeper.verifyAccessible(logic.getInstructorForGoogleId(idOfCourseToDelete, userInfo.id),"},{"lineNumber":28,"author":{"gitId":"EuniceSim142"},"content":"                    courseAttributes,"},{"lineNumber":29,"author":{"gitId":"-"},"content":"                    Const.InstructorPermissions.CAN_MODIFY_COURSE);"},{"lineNumber":30,"author":{"gitId":"EuniceSim142"},"content":"            return;"},{"lineNumber":31,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":32,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":33,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d sqlLogic.getCourse(idOfCourseToDelete);"},{"lineNumber":34,"author":{"gitId":"EuniceSim142"},"content":"        gateKeeper.verifyAccessible(sqlLogic.getInstructorByGoogleId(idOfCourseToDelete, userInfo.id),"},{"lineNumber":35,"author":{"gitId":"EuniceSim142"},"content":"                course, Const.InstructorPermissions.CAN_MODIFY_COURSE);"},{"lineNumber":36,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":37,"author":{"gitId":"-"},"content":""},{"lineNumber":38,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":39,"author":{"gitId":"-"},"content":"    public JsonResult execute() {"},{"lineNumber":40,"author":{"gitId":"-"},"content":"        String idOfCourseToDelete \u003d getNonNullRequestParamValue(Const.ParamsNames.COURSE_ID);"},{"lineNumber":41,"author":{"gitId":"-"},"content":""},{"lineNumber":42,"author":{"gitId":"EuniceSim142"},"content":"        if (!isCourseMigrated(idOfCourseToDelete)) {"},{"lineNumber":43,"author":{"gitId":"-"},"content":"            logic.deleteCourseCascade(idOfCourseToDelete);"},{"lineNumber":44,"author":{"gitId":"EuniceSim142"},"content":"            return new JsonResult(new MessageOutput(\"OK\"));"},{"lineNumber":45,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":46,"author":{"gitId":"-"},"content":""},{"lineNumber":47,"author":{"gitId":"EuniceSim142"},"content":"        sqlLogic.deleteCourseCascade(idOfCourseToDelete);"},{"lineNumber":48,"author":{"gitId":"-"},"content":"        return new JsonResult(new MessageOutput(\"OK\"));"},{"lineNumber":49,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":50,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"EuniceSim142":17,"-":33}},{"path":"src/main/java/teammates/ui/webapi/DeleteNotificationAction.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"hhdqirui"},"content":"import java.util.UUID;"},{"lineNumber":4,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":5,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":6,"author":{"gitId":"-"},"content":""},{"lineNumber":7,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":8,"author":{"gitId":"-"},"content":" * Action: Deletes a notification by its ID."},{"lineNumber":9,"author":{"gitId":"-"},"content":" */"},{"lineNumber":10,"author":{"gitId":"-"},"content":"public class DeleteNotificationAction extends AdminOnlyAction {"},{"lineNumber":11,"author":{"gitId":"-"},"content":""},{"lineNumber":12,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":13,"author":{"gitId":"-"},"content":"    public JsonResult execute() {"},{"lineNumber":14,"author":{"gitId":"hhdqirui"},"content":"        UUID notificationId \u003d getUuidRequestParamValue(Const.ParamsNames.NOTIFICATION_ID);"},{"lineNumber":15,"author":{"gitId":"hhdqirui"},"content":"        sqlLogic.deleteNotification(notificationId);"},{"lineNumber":16,"author":{"gitId":"-"},"content":"        return new JsonResult(\"Notification has been deleted.\");"},{"lineNumber":17,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":18,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"hhdqirui":4,"-":14}},{"path":"src/main/java/teammates/ui/webapi/EnrollStudentsAction.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.util.ArrayList;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.util.Set;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import java.util.stream.Collectors;"},{"lineNumber":7,"author":{"gitId":"-"},"content":""},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.InstructorAttributes;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.StudentAttributes;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import teammates.common.exception.EnrollException;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import teammates.common.util.RequestTracer;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"import teammates.ui.output.EnrollStudentsData;"},{"lineNumber":17,"author":{"gitId":"domlimm"},"content":"import teammates.ui.output.StudentData;"},{"lineNumber":18,"author":{"gitId":"-"},"content":"import teammates.ui.output.StudentsData;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"import teammates.ui.request.InvalidHttpRequestBodyException;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"import teammates.ui.request.StudentsEnrollRequest;"},{"lineNumber":21,"author":{"gitId":"-"},"content":""},{"lineNumber":22,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":23,"author":{"gitId":"-"},"content":" * Enroll a list of students."},{"lineNumber":24,"author":{"gitId":"-"},"content":" *"},{"lineNumber":25,"author":{"gitId":"-"},"content":" * \u003cp\u003eCreate the students who are not in the course."},{"lineNumber":26,"author":{"gitId":"-"},"content":" *"},{"lineNumber":27,"author":{"gitId":"-"},"content":" * \u003cp\u003eUpdate the students who are already existed."},{"lineNumber":28,"author":{"gitId":"-"},"content":" *"},{"lineNumber":29,"author":{"gitId":"-"},"content":" * \u003cp\u003eReturn all students who are successfully enrolled."},{"lineNumber":30,"author":{"gitId":"-"},"content":" */"},{"lineNumber":31,"author":{"gitId":"-"},"content":"class EnrollStudentsAction extends Action {"},{"lineNumber":32,"author":{"gitId":"-"},"content":""},{"lineNumber":33,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":34,"author":{"gitId":"-"},"content":"    AuthType getMinAuthLevel() {"},{"lineNumber":35,"author":{"gitId":"-"},"content":"        return AuthType.LOGGED_IN;"},{"lineNumber":36,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":37,"author":{"gitId":"-"},"content":""},{"lineNumber":38,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":39,"author":{"gitId":"-"},"content":"    void checkSpecificAccessControl() throws UnauthorizedAccessException {"},{"lineNumber":40,"author":{"gitId":"-"},"content":"        if (!userInfo.isInstructor) {"},{"lineNumber":41,"author":{"gitId":"-"},"content":"            throw new UnauthorizedAccessException(\"Instructor privilege is required to access this resource.\");"},{"lineNumber":42,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":43,"author":{"gitId":"-"},"content":"        String courseId \u003d getRequestParamValue(Const.ParamsNames.COURSE_ID);"},{"lineNumber":44,"author":{"gitId":"-"},"content":""},{"lineNumber":45,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor \u003d logic.getInstructorForGoogleId(courseId, userInfo.id);"},{"lineNumber":46,"author":{"gitId":"-"},"content":"        gateKeeper.verifyAccessible("},{"lineNumber":47,"author":{"gitId":"-"},"content":"                instructor, logic.getCourse(courseId), Const.InstructorPermissions.CAN_MODIFY_STUDENT);"},{"lineNumber":48,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":49,"author":{"gitId":"-"},"content":""},{"lineNumber":50,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":51,"author":{"gitId":"-"},"content":"    public JsonResult execute() throws InvalidHttpRequestBodyException, InvalidOperationException {"},{"lineNumber":52,"author":{"gitId":"-"},"content":""},{"lineNumber":53,"author":{"gitId":"-"},"content":"        String courseId \u003d getNonNullRequestParamValue(Const.ParamsNames.COURSE_ID);"},{"lineNumber":54,"author":{"gitId":"-"},"content":"        StudentsEnrollRequest enrollRequests \u003d getAndValidateRequestBody(StudentsEnrollRequest.class);"},{"lineNumber":55,"author":{"gitId":"-"},"content":"        List\u003cStudentAttributes\u003e studentsToEnroll \u003d new ArrayList\u003c\u003e();"},{"lineNumber":56,"author":{"gitId":"-"},"content":"        enrollRequests.getStudentEnrollRequests().forEach(studentEnrollRequest -\u003e {"},{"lineNumber":57,"author":{"gitId":"-"},"content":"            studentsToEnroll.add(StudentAttributes.builder(courseId, studentEnrollRequest.getEmail())"},{"lineNumber":58,"author":{"gitId":"-"},"content":"                    .withName(studentEnrollRequest.getName())"},{"lineNumber":59,"author":{"gitId":"-"},"content":"                    .withSectionName(studentEnrollRequest.getSection())"},{"lineNumber":60,"author":{"gitId":"-"},"content":"                    .withTeamName(studentEnrollRequest.getTeam())"},{"lineNumber":61,"author":{"gitId":"-"},"content":"                    .withComment(studentEnrollRequest.getComments())"},{"lineNumber":62,"author":{"gitId":"-"},"content":"                    .build());"},{"lineNumber":63,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":64,"author":{"gitId":"-"},"content":""},{"lineNumber":65,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":66,"author":{"gitId":"-"},"content":"            logic.validateSectionsAndTeams(studentsToEnroll, courseId);"},{"lineNumber":67,"author":{"gitId":"-"},"content":"        } catch (EnrollException e) {"},{"lineNumber":68,"author":{"gitId":"-"},"content":"            throw new InvalidOperationException(e);"},{"lineNumber":69,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":70,"author":{"gitId":"-"},"content":""},{"lineNumber":71,"author":{"gitId":"-"},"content":"        List\u003cStudentAttributes\u003e existingStudents \u003d logic.getStudentsForCourse(courseId);"},{"lineNumber":72,"author":{"gitId":"-"},"content":""},{"lineNumber":73,"author":{"gitId":"-"},"content":"        Set\u003cString\u003e existingStudentsEmail \u003d"},{"lineNumber":74,"author":{"gitId":"-"},"content":"                existingStudents.stream().map(StudentAttributes::getEmail).collect(Collectors.toSet());"},{"lineNumber":75,"author":{"gitId":"-"},"content":"        List\u003cStudentAttributes\u003e enrolledStudents \u003d new ArrayList\u003c\u003e();"},{"lineNumber":76,"author":{"gitId":"-"},"content":"        List\u003cEnrollStudentsData.EnrollErrorResults\u003e failToEnrollStudents \u003d new ArrayList\u003c\u003e();"},{"lineNumber":77,"author":{"gitId":"-"},"content":"        for (StudentAttributes student : studentsToEnroll) {"},{"lineNumber":78,"author":{"gitId":"-"},"content":"            RequestTracer.checkRemainingTime();"},{"lineNumber":79,"author":{"gitId":"-"},"content":"            if (existingStudentsEmail.contains(student.getEmail())) {"},{"lineNumber":80,"author":{"gitId":"-"},"content":"                // The student has been enrolled in the course."},{"lineNumber":81,"author":{"gitId":"-"},"content":"                StudentAttributes.UpdateOptions updateOptions \u003d"},{"lineNumber":82,"author":{"gitId":"-"},"content":"                        StudentAttributes.updateOptionsBuilder(student.getCourse(), student.getEmail())"},{"lineNumber":83,"author":{"gitId":"-"},"content":"                                .withName(student.getName())"},{"lineNumber":84,"author":{"gitId":"-"},"content":"                                .withSectionName(student.getSection())"},{"lineNumber":85,"author":{"gitId":"-"},"content":"                                .withTeamName(student.getTeam())"},{"lineNumber":86,"author":{"gitId":"-"},"content":"                                .withComment(student.getComments())"},{"lineNumber":87,"author":{"gitId":"-"},"content":"                                .build();"},{"lineNumber":88,"author":{"gitId":"-"},"content":"                try {"},{"lineNumber":89,"author":{"gitId":"-"},"content":"                    StudentAttributes updatedStudent \u003d logic.updateStudentCascade(updateOptions);"},{"lineNumber":90,"author":{"gitId":"-"},"content":"                    taskQueuer.scheduleStudentForSearchIndexing(updatedStudent.getCourse(), updatedStudent.getEmail());"},{"lineNumber":91,"author":{"gitId":"-"},"content":"                    enrolledStudents.add(updatedStudent);"},{"lineNumber":92,"author":{"gitId":"-"},"content":"                } catch (InvalidParametersException | EntityDoesNotExistException"},{"lineNumber":93,"author":{"gitId":"-"},"content":"                        | EntityAlreadyExistsException exception) {"},{"lineNumber":94,"author":{"gitId":"-"},"content":"                    // Unsuccessfully enrolled students will not be returned."},{"lineNumber":95,"author":{"gitId":"-"},"content":"                    failToEnrollStudents.add(new EnrollStudentsData.EnrollErrorResults(student.getEmail(),"},{"lineNumber":96,"author":{"gitId":"-"},"content":"                            exception.getMessage()));"},{"lineNumber":97,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":98,"author":{"gitId":"-"},"content":"            } else {"},{"lineNumber":99,"author":{"gitId":"-"},"content":"                // The student is new."},{"lineNumber":100,"author":{"gitId":"-"},"content":"                try {"},{"lineNumber":101,"author":{"gitId":"-"},"content":"                    StudentAttributes newStudent \u003d logic.createStudent(student);"},{"lineNumber":102,"author":{"gitId":"-"},"content":"                    taskQueuer.scheduleStudentForSearchIndexing(newStudent.getCourse(), newStudent.getEmail());"},{"lineNumber":103,"author":{"gitId":"-"},"content":"                    enrolledStudents.add(newStudent);"},{"lineNumber":104,"author":{"gitId":"-"},"content":"                } catch (InvalidParametersException | EntityAlreadyExistsException exception) {"},{"lineNumber":105,"author":{"gitId":"-"},"content":"                    // Unsuccessfully enrolled students will not be returned."},{"lineNumber":106,"author":{"gitId":"-"},"content":"                    failToEnrollStudents.add(new EnrollStudentsData.EnrollErrorResults(student.getEmail(),"},{"lineNumber":107,"author":{"gitId":"-"},"content":"                            exception.getMessage()));"},{"lineNumber":108,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":109,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":110,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":111,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":112,"author":{"gitId":"domlimm"},"content":"        List\u003cStudentData\u003e studentDataList \u003d enrolledStudents"},{"lineNumber":113,"author":{"gitId":"domlimm"},"content":"                .stream()"},{"lineNumber":114,"author":{"gitId":"domlimm"},"content":"                .map(StudentData::new)"},{"lineNumber":115,"author":{"gitId":"domlimm"},"content":"                .collect(Collectors.toList());"},{"lineNumber":116,"author":{"gitId":"domlimm"},"content":"        StudentsData data \u003d new StudentsData();"},{"lineNumber":117,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":118,"author":{"gitId":"domlimm"},"content":"        data.setStudents(studentDataList);"},{"lineNumber":119,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":120,"author":{"gitId":"domlimm"},"content":"        return new JsonResult(new EnrollStudentsData(data, failToEnrollStudents));"},{"lineNumber":121,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":122,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"domlimm":11,"-":111}},{"path":"src/main/java/teammates/ui/webapi/GetAccountAction.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.AccountAttributes;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":5,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Account;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import teammates.ui.output.AccountData;"},{"lineNumber":7,"author":{"gitId":"-"},"content":""},{"lineNumber":8,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":9,"author":{"gitId":"-"},"content":" * Gets account\u0027s information."},{"lineNumber":10,"author":{"gitId":"-"},"content":" */"},{"lineNumber":11,"author":{"gitId":"-"},"content":"class GetAccountAction extends AdminOnlyAction {"},{"lineNumber":12,"author":{"gitId":"-"},"content":""},{"lineNumber":13,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":14,"author":{"gitId":"-"},"content":"    public JsonResult execute() {"},{"lineNumber":15,"author":{"gitId":"-"},"content":"        String googleId \u003d getNonNullRequestParamValue(Const.ParamsNames.INSTRUCTOR_ID);"},{"lineNumber":16,"author":{"gitId":"-"},"content":""},{"lineNumber":17,"author":{"gitId":"-"},"content":"        AccountAttributes accountInfo \u003d logic.getAccount(googleId);"},{"lineNumber":18,"author":{"gitId":"-"},"content":""},{"lineNumber":19,"author":{"gitId":"domlimm"},"content":"        if (accountInfo \u003d\u003d null || accountInfo.isMigrated()) {"},{"lineNumber":20,"author":{"gitId":"domlimm"},"content":"            Account account \u003d sqlLogic.getAccountForGoogleId(googleId);"},{"lineNumber":21,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":22,"author":{"gitId":"domlimm"},"content":"            if (account \u003d\u003d null) {"},{"lineNumber":23,"author":{"gitId":"-"},"content":"                throw new EntityNotFoundException(\"Account does not exist.\");"},{"lineNumber":24,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":25,"author":{"gitId":"-"},"content":""},{"lineNumber":26,"author":{"gitId":"domlimm"},"content":"            AccountData output \u003d new AccountData(account);"},{"lineNumber":27,"author":{"gitId":"domlimm"},"content":"            return new JsonResult(output);"},{"lineNumber":28,"author":{"gitId":"domlimm"},"content":"        } else {"},{"lineNumber":29,"author":{"gitId":"-"},"content":"            AccountData output \u003d new AccountData(accountInfo);"},{"lineNumber":30,"author":{"gitId":"-"},"content":"            return new JsonResult(output);"},{"lineNumber":31,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":32,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":33,"author":{"gitId":"-"},"content":""},{"lineNumber":34,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"domlimm":8,"-":26}},{"path":"src/main/java/teammates/ui/webapi/GetAccountRequestAction.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":4,"author":{"gitId":"kevin9foong"},"content":"import teammates.storage.sqlentity.AccountRequest;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import teammates.ui.output.AccountRequestData;"},{"lineNumber":6,"author":{"gitId":"-"},"content":""},{"lineNumber":7,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":8,"author":{"gitId":"-"},"content":" * Gets account request information."},{"lineNumber":9,"author":{"gitId":"-"},"content":" */"},{"lineNumber":10,"author":{"gitId":"-"},"content":"class GetAccountRequestAction extends AdminOnlyAction {"},{"lineNumber":11,"author":{"gitId":"-"},"content":""},{"lineNumber":12,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":13,"author":{"gitId":"-"},"content":"    public JsonResult execute() {"},{"lineNumber":14,"author":{"gitId":"-"},"content":"        String email \u003d getNonNullRequestParamValue(Const.ParamsNames.INSTRUCTOR_EMAIL);"},{"lineNumber":15,"author":{"gitId":"-"},"content":"        String institute \u003d getNonNullRequestParamValue(Const.ParamsNames.INSTRUCTOR_INSTITUTION);"},{"lineNumber":16,"author":{"gitId":"-"},"content":""},{"lineNumber":17,"author":{"gitId":"kevin9foong"},"content":"        AccountRequest accountRequest \u003d sqlLogic.getAccountRequest(email, institute);"},{"lineNumber":18,"author":{"gitId":"-"},"content":""},{"lineNumber":19,"author":{"gitId":"kevin9foong"},"content":"        if (accountRequest \u003d\u003d null) {"},{"lineNumber":20,"author":{"gitId":"-"},"content":"            throw new EntityNotFoundException(\"Account request for email: \""},{"lineNumber":21,"author":{"gitId":"-"},"content":"                    + email + \" and institute: \" + institute + \" not found.\");"},{"lineNumber":22,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":23,"author":{"gitId":"-"},"content":""},{"lineNumber":24,"author":{"gitId":"kevin9foong"},"content":"        AccountRequestData output \u003d new AccountRequestData(accountRequest);"},{"lineNumber":25,"author":{"gitId":"-"},"content":"        return new JsonResult(output);"},{"lineNumber":26,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":27,"author":{"gitId":"-"},"content":""},{"lineNumber":28,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"-":24,"kevin9foong":4}},{"path":"src/main/java/teammates/ui/webapi/GetAccountsAction.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"domlimm"},"content":"import java.util.ArrayList;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":5,"author":{"gitId":"-"},"content":""},{"lineNumber":6,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.AccountAttributes;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.util.SanitizationHelper;"},{"lineNumber":9,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Account;"},{"lineNumber":10,"author":{"gitId":"domlimm"},"content":"import teammates.ui.output.AccountData;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import teammates.ui.output.AccountsData;"},{"lineNumber":12,"author":{"gitId":"-"},"content":""},{"lineNumber":13,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":14,"author":{"gitId":"-"},"content":" * Gets all accounts with the given email."},{"lineNumber":15,"author":{"gitId":"-"},"content":" */"},{"lineNumber":16,"author":{"gitId":"-"},"content":"class GetAccountsAction extends AdminOnlyAction {"},{"lineNumber":17,"author":{"gitId":"-"},"content":""},{"lineNumber":18,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":19,"author":{"gitId":"-"},"content":"    public JsonResult execute() {"},{"lineNumber":20,"author":{"gitId":"-"},"content":"        String email \u003d getNonNullRequestParamValue(Const.ParamsNames.USER_EMAIL);"},{"lineNumber":21,"author":{"gitId":"-"},"content":"        email \u003d SanitizationHelper.sanitizeEmail(email);"},{"lineNumber":22,"author":{"gitId":"-"},"content":""},{"lineNumber":23,"author":{"gitId":"domlimm"},"content":"        List\u003cAccountAttributes\u003e premigratedAccounts \u003d logic.getAccountsForEmail(email);"},{"lineNumber":24,"author":{"gitId":"domlimm"},"content":"        List\u003cAccount\u003e migratedAccounts \u003d sqlLogic.getAccountsForEmail(email);"},{"lineNumber":25,"author":{"gitId":"domlimm"},"content":"        List\u003cAccountData\u003e accounts \u003d new ArrayList\u003c\u003e();"},{"lineNumber":26,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":27,"author":{"gitId":"domlimm"},"content":"        for (AccountAttributes accountAttribute : premigratedAccounts) {"},{"lineNumber":28,"author":{"gitId":"domlimm"},"content":"            accounts.add(new AccountData(accountAttribute));"},{"lineNumber":29,"author":{"gitId":"domlimm"},"content":"        }"},{"lineNumber":30,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":31,"author":{"gitId":"domlimm"},"content":"        for (Account account : migratedAccounts) {"},{"lineNumber":32,"author":{"gitId":"domlimm"},"content":"            accounts.add(new AccountData(account));"},{"lineNumber":33,"author":{"gitId":"domlimm"},"content":"        }"},{"lineNumber":34,"author":{"gitId":"-"},"content":""},{"lineNumber":35,"author":{"gitId":"-"},"content":"        return new JsonResult(new AccountsData(accounts));"},{"lineNumber":36,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":37,"author":{"gitId":"-"},"content":""},{"lineNumber":38,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"domlimm":14,"-":24}},{"path":"src/main/java/teammates/ui/webapi/GetCourseAction.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.InstructorPermissionSet;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.CourseAttributes;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.InstructorAttributes;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":7,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.Course;"},{"lineNumber":8,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.ui.output.CourseData;"},{"lineNumber":10,"author":{"gitId":"-"},"content":""},{"lineNumber":11,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":12,"author":{"gitId":"-"},"content":" * Get a course for an instructor or student."},{"lineNumber":13,"author":{"gitId":"-"},"content":" */"},{"lineNumber":14,"author":{"gitId":"EuniceSim142"},"content":"public class GetCourseAction extends Action {"},{"lineNumber":15,"author":{"gitId":"-"},"content":""},{"lineNumber":16,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":17,"author":{"gitId":"-"},"content":"    AuthType getMinAuthLevel() {"},{"lineNumber":18,"author":{"gitId":"-"},"content":"        return AuthType.PUBLIC;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":20,"author":{"gitId":"-"},"content":""},{"lineNumber":21,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":22,"author":{"gitId":"-"},"content":"    void checkSpecificAccessControl() throws UnauthorizedAccessException {"},{"lineNumber":23,"author":{"gitId":"-"},"content":"        if (userInfo !\u003d null \u0026\u0026 userInfo.isAdmin) {"},{"lineNumber":24,"author":{"gitId":"-"},"content":"            return;"},{"lineNumber":25,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":26,"author":{"gitId":"-"},"content":""},{"lineNumber":27,"author":{"gitId":"-"},"content":"        String courseId \u003d getNonNullRequestParamValue(Const.ParamsNames.COURSE_ID);"},{"lineNumber":28,"author":{"gitId":"-"},"content":"        String entityType \u003d getNonNullRequestParamValue(Const.ParamsNames.ENTITY_TYPE);"},{"lineNumber":29,"author":{"gitId":"-"},"content":""},{"lineNumber":30,"author":{"gitId":"EuniceSim142"},"content":"        if (!isCourseMigrated(courseId)) {"},{"lineNumber":31,"author":{"gitId":"EuniceSim142"},"content":"            CourseAttributes courseAttributes \u003d logic.getCourse(courseId);"},{"lineNumber":32,"author":{"gitId":"EuniceSim142"},"content":"            if (Const.EntityType.INSTRUCTOR.equals(entityType)) {"},{"lineNumber":33,"author":{"gitId":"EuniceSim142"},"content":"                gateKeeper.verifyAccessible(getPossiblyUnregisteredInstructor(courseId), courseAttributes);"},{"lineNumber":34,"author":{"gitId":"EuniceSim142"},"content":"                return;"},{"lineNumber":35,"author":{"gitId":"EuniceSim142"},"content":"            }"},{"lineNumber":36,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":37,"author":{"gitId":"EuniceSim142"},"content":"            if (Const.EntityType.STUDENT.equals(entityType)) {"},{"lineNumber":38,"author":{"gitId":"EuniceSim142"},"content":"                gateKeeper.verifyAccessible(getPossiblyUnregisteredStudent(courseId), courseAttributes);"},{"lineNumber":39,"author":{"gitId":"EuniceSim142"},"content":"                return;"},{"lineNumber":40,"author":{"gitId":"EuniceSim142"},"content":"            }"},{"lineNumber":41,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":42,"author":{"gitId":"EuniceSim142"},"content":"            throw new UnauthorizedAccessException(\"Student or instructor account is required to access this resource.\");"},{"lineNumber":43,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":44,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":45,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d sqlLogic.getCourse(courseId);"},{"lineNumber":46,"author":{"gitId":"-"},"content":"        if (Const.EntityType.INSTRUCTOR.equals(entityType)) {"},{"lineNumber":47,"author":{"gitId":"EuniceSim142"},"content":"            gateKeeper.verifyAccessible(getPossiblyUnregisteredSqlInstructor(courseId), course);"},{"lineNumber":48,"author":{"gitId":"-"},"content":"            return;"},{"lineNumber":49,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":50,"author":{"gitId":"-"},"content":""},{"lineNumber":51,"author":{"gitId":"-"},"content":"        if (Const.EntityType.STUDENT.equals(entityType)) {"},{"lineNumber":52,"author":{"gitId":"EuniceSim142"},"content":"            gateKeeper.verifyAccessible(getPossiblyUnregisteredSqlStudent(courseId), course);"},{"lineNumber":53,"author":{"gitId":"-"},"content":"            return;"},{"lineNumber":54,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":55,"author":{"gitId":"-"},"content":""},{"lineNumber":56,"author":{"gitId":"-"},"content":"        throw new UnauthorizedAccessException(\"Student or instructor account is required to access this resource.\");"},{"lineNumber":57,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":58,"author":{"gitId":"-"},"content":""},{"lineNumber":59,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":60,"author":{"gitId":"-"},"content":"    public JsonResult execute() {"},{"lineNumber":61,"author":{"gitId":"-"},"content":"        String courseId \u003d getNonNullRequestParamValue(Const.ParamsNames.COURSE_ID);"},{"lineNumber":62,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":63,"author":{"gitId":"EuniceSim142"},"content":"        if (!isCourseMigrated(courseId)) {"},{"lineNumber":64,"author":{"gitId":"EuniceSim142"},"content":"            return this.getFromDatastore(courseId);"},{"lineNumber":65,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":66,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":67,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d sqlLogic.getCourse(courseId);"},{"lineNumber":68,"author":{"gitId":"EuniceSim142"},"content":"        if (course \u003d\u003d null) {"},{"lineNumber":69,"author":{"gitId":"EuniceSim142"},"content":"            throw new EntityNotFoundException(\"No course with id: \" + courseId);"},{"lineNumber":70,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":71,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":72,"author":{"gitId":"EuniceSim142"},"content":"        CourseData output \u003d new CourseData(course);"},{"lineNumber":73,"author":{"gitId":"EuniceSim142"},"content":"        String entityType \u003d getRequestParamValue(Const.ParamsNames.ENTITY_TYPE);"},{"lineNumber":74,"author":{"gitId":"EuniceSim142"},"content":"        if (Const.EntityType.INSTRUCTOR.equals(entityType)) {"},{"lineNumber":75,"author":{"gitId":"EuniceSim142"},"content":"            Instructor instructor \u003d getPossiblyUnregisteredSqlInstructor(courseId);"},{"lineNumber":76,"author":{"gitId":"EuniceSim142"},"content":"            if (instructor !\u003d null) {"},{"lineNumber":77,"author":{"gitId":"EuniceSim142"},"content":"                InstructorPermissionSet privilege \u003d constructInstructorPrivileges(instructor, null);"},{"lineNumber":78,"author":{"gitId":"EuniceSim142"},"content":"                output.setPrivileges(privilege);"},{"lineNumber":79,"author":{"gitId":"EuniceSim142"},"content":"            }"},{"lineNumber":80,"author":{"gitId":"EuniceSim142"},"content":"        } else if (Const.EntityType.STUDENT.equals(entityType)) {"},{"lineNumber":81,"author":{"gitId":"EuniceSim142"},"content":"            output.hideInformationForStudent();"},{"lineNumber":82,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":83,"author":{"gitId":"EuniceSim142"},"content":"        return new JsonResult(output);"},{"lineNumber":84,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":85,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":86,"author":{"gitId":"EuniceSim142"},"content":"    private JsonResult getFromDatastore(String courseId) {"},{"lineNumber":87,"author":{"gitId":"-"},"content":"        CourseAttributes courseAttributes \u003d logic.getCourse(courseId);"},{"lineNumber":88,"author":{"gitId":"-"},"content":"        if (courseAttributes \u003d\u003d null) {"},{"lineNumber":89,"author":{"gitId":"-"},"content":"            throw new EntityNotFoundException(\"No course with id: \" + courseId);"},{"lineNumber":90,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":91,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":92,"author":{"gitId":"-"},"content":"        CourseData output \u003d new CourseData(courseAttributes);"},{"lineNumber":93,"author":{"gitId":"-"},"content":"        String entityType \u003d getRequestParamValue(Const.ParamsNames.ENTITY_TYPE);"},{"lineNumber":94,"author":{"gitId":"-"},"content":"        if (Const.EntityType.INSTRUCTOR.equals(entityType)) {"},{"lineNumber":95,"author":{"gitId":"-"},"content":"            InstructorAttributes instructor \u003d getPossiblyUnregisteredInstructor(courseId);"},{"lineNumber":96,"author":{"gitId":"-"},"content":"            if (instructor !\u003d null) {"},{"lineNumber":97,"author":{"gitId":"-"},"content":"                InstructorPermissionSet privilege \u003d constructInstructorPrivileges(instructor, null);"},{"lineNumber":98,"author":{"gitId":"-"},"content":"                output.setPrivileges(privilege);"},{"lineNumber":99,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":100,"author":{"gitId":"-"},"content":"        } else if (Const.EntityType.STUDENT.equals(entityType)) {"},{"lineNumber":101,"author":{"gitId":"-"},"content":"            output.hideInformationForStudent();"},{"lineNumber":102,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":103,"author":{"gitId":"-"},"content":"        return new JsonResult(output);"},{"lineNumber":104,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":105,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"EuniceSim142":47,"-":58}},{"path":"src/main/java/teammates/ui/webapi/GetCourseSectionNamesAction.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":4,"author":{"gitId":"-"},"content":""},{"lineNumber":5,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.CourseAttributes;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.InstructorAttributes;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":9,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.Course;"},{"lineNumber":10,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import teammates.ui.output.CourseSectionNamesData;"},{"lineNumber":12,"author":{"gitId":"-"},"content":""},{"lineNumber":13,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":14,"author":{"gitId":"-"},"content":" * Gets the section names of a course."},{"lineNumber":15,"author":{"gitId":"-"},"content":" */"},{"lineNumber":16,"author":{"gitId":"EuniceSim142"},"content":"public class GetCourseSectionNamesAction extends Action {"},{"lineNumber":17,"author":{"gitId":"-"},"content":""},{"lineNumber":18,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":19,"author":{"gitId":"-"},"content":"    AuthType getMinAuthLevel() {"},{"lineNumber":20,"author":{"gitId":"-"},"content":"        return AuthType.LOGGED_IN;"},{"lineNumber":21,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":22,"author":{"gitId":"-"},"content":""},{"lineNumber":23,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":24,"author":{"gitId":"-"},"content":"    void checkSpecificAccessControl() throws UnauthorizedAccessException {"},{"lineNumber":25,"author":{"gitId":"-"},"content":"        String courseId \u003d getNonNullRequestParamValue(Const.ParamsNames.COURSE_ID);"},{"lineNumber":26,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":27,"author":{"gitId":"EuniceSim142"},"content":"        if (!isCourseMigrated(courseId)) {"},{"lineNumber":28,"author":{"gitId":"EuniceSim142"},"content":"            CourseAttributes courseAttributes \u003d logic.getCourse(courseId);"},{"lineNumber":29,"author":{"gitId":"-"},"content":"            InstructorAttributes instructor \u003d logic.getInstructorForGoogleId(courseId, userInfo.id);"},{"lineNumber":30,"author":{"gitId":"EuniceSim142"},"content":"            gateKeeper.verifyAccessible(instructor, courseAttributes);"},{"lineNumber":31,"author":{"gitId":"EuniceSim142"},"content":"            return;"},{"lineNumber":32,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":33,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":34,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d sqlLogic.getCourse(courseId);"},{"lineNumber":35,"author":{"gitId":"EuniceSim142"},"content":"        Instructor instructor \u003d sqlLogic.getInstructorByGoogleId(courseId, userInfo.id);"},{"lineNumber":36,"author":{"gitId":"-"},"content":"        gateKeeper.verifyAccessible(instructor, course);"},{"lineNumber":37,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":38,"author":{"gitId":"-"},"content":""},{"lineNumber":39,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":40,"author":{"gitId":"-"},"content":"    public JsonResult execute() {"},{"lineNumber":41,"author":{"gitId":"-"},"content":"        String courseId \u003d getNonNullRequestParamValue(Const.ParamsNames.COURSE_ID);"},{"lineNumber":42,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":43,"author":{"gitId":"EuniceSim142"},"content":"            if (!isCourseMigrated(courseId)) {"},{"lineNumber":44,"author":{"gitId":"-"},"content":"                List\u003cString\u003e sectionNames \u003d logic.getSectionNamesForCourse(courseId);"},{"lineNumber":45,"author":{"gitId":"-"},"content":"                return new JsonResult(new CourseSectionNamesData(sectionNames));"},{"lineNumber":46,"author":{"gitId":"EuniceSim142"},"content":"            }"},{"lineNumber":47,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":48,"author":{"gitId":"EuniceSim142"},"content":"            List\u003cString\u003e sectionNames \u003d sqlLogic.getSectionNamesForCourse(courseId);"},{"lineNumber":49,"author":{"gitId":"-"},"content":"            return new JsonResult(new CourseSectionNamesData(sectionNames));"},{"lineNumber":50,"author":{"gitId":"-"},"content":"        } catch (EntityDoesNotExistException e) {"},{"lineNumber":51,"author":{"gitId":"-"},"content":"            throw new EntityNotFoundException(e);"},{"lineNumber":52,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":53,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":54,"author":{"gitId":"-"},"content":""},{"lineNumber":55,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"EuniceSim142":16,"-":39}},{"path":"src/main/java/teammates/ui/webapi/GetFeedbackQuestionsAction.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":4,"author":{"gitId":"-"},"content":""},{"lineNumber":5,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackSessionAttributes;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.InstructorAttributes;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.StudentAttributes;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import teammates.common.util.StringHelper;"},{"lineNumber":11,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.FeedbackQuestion;"},{"lineNumber":12,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.FeedbackSession;"},{"lineNumber":13,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":14,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.Student;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import teammates.ui.output.FeedbackQuestionData;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"import teammates.ui.output.FeedbackQuestionsData;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"import teammates.ui.request.Intent;"},{"lineNumber":18,"author":{"gitId":"-"},"content":""},{"lineNumber":19,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":20,"author":{"gitId":"-"},"content":" * Get a list of feedback questions for a feedback session."},{"lineNumber":21,"author":{"gitId":"-"},"content":" */"},{"lineNumber":22,"author":{"gitId":"cedricongjh"},"content":"public class GetFeedbackQuestionsAction extends BasicFeedbackSubmissionAction {"},{"lineNumber":23,"author":{"gitId":"-"},"content":""},{"lineNumber":24,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":25,"author":{"gitId":"-"},"content":"    AuthType getMinAuthLevel() {"},{"lineNumber":26,"author":{"gitId":"-"},"content":"        return AuthType.PUBLIC;"},{"lineNumber":27,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":28,"author":{"gitId":"-"},"content":""},{"lineNumber":29,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    void checkSpecificAccessControl() throws UnauthorizedAccessException {"},{"lineNumber":31,"author":{"gitId":"-"},"content":"        String courseId \u003d getNonNullRequestParamValue(Const.ParamsNames.COURSE_ID);"},{"lineNumber":32,"author":{"gitId":"-"},"content":"        String feedbackSessionName \u003d getNonNullRequestParamValue(Const.ParamsNames.FEEDBACK_SESSION_NAME);"},{"lineNumber":33,"author":{"gitId":"-"},"content":"        Intent intent \u003d Intent.valueOf(getNonNullRequestParamValue(Const.ParamsNames.INTENT));"},{"lineNumber":34,"author":{"gitId":"-"},"content":""},{"lineNumber":35,"author":{"gitId":"cedricongjh"},"content":"        if (isCourseMigrated(courseId)) {"},{"lineNumber":36,"author":{"gitId":"cedricongjh"},"content":"            FeedbackSession feedbackSession \u003d getNonNullSqlFeedbackSession(feedbackSessionName, courseId);"},{"lineNumber":37,"author":{"gitId":"cedricongjh"},"content":"            switch (intent) {"},{"lineNumber":38,"author":{"gitId":"cedricongjh"},"content":"            case STUDENT_SUBMISSION:"},{"lineNumber":39,"author":{"gitId":"cedricongjh"},"content":"                Student student \u003d getSqlStudentOfCourseFromRequest(courseId);"},{"lineNumber":40,"author":{"gitId":"cedricongjh"},"content":"                checkAccessControlForStudentFeedbackSubmission(student, feedbackSession);"},{"lineNumber":41,"author":{"gitId":"cedricongjh"},"content":"                break;"},{"lineNumber":42,"author":{"gitId":"cedricongjh"},"content":"            case FULL_DETAIL:"},{"lineNumber":43,"author":{"gitId":"cedricongjh"},"content":"                gateKeeper.verifyLoggedInUserPrivileges(userInfo);"},{"lineNumber":44,"author":{"gitId":"cedricongjh"},"content":"                gateKeeper.verifyAccessible(sqlLogic.getInstructorByGoogleId(courseId, userInfo.getId()),"},{"lineNumber":45,"author":{"gitId":"cedricongjh"},"content":"                                                feedbackSession);"},{"lineNumber":46,"author":{"gitId":"cedricongjh"},"content":"                break;"},{"lineNumber":47,"author":{"gitId":"cedricongjh"},"content":"            case INSTRUCTOR_SUBMISSION:"},{"lineNumber":48,"author":{"gitId":"cedricongjh"},"content":"                Instructor instructor \u003d getSqlInstructorOfCourseFromRequest(courseId);"},{"lineNumber":49,"author":{"gitId":"cedricongjh"},"content":"                checkAccessControlForInstructorFeedbackSubmission(instructor, feedbackSession);"},{"lineNumber":50,"author":{"gitId":"cedricongjh"},"content":"                break;"},{"lineNumber":51,"author":{"gitId":"cedricongjh"},"content":"            case INSTRUCTOR_RESULT:"},{"lineNumber":52,"author":{"gitId":"cedricongjh"},"content":"                gateKeeper.verifyLoggedInUserPrivileges(userInfo);"},{"lineNumber":53,"author":{"gitId":"cedricongjh"},"content":"                gateKeeper.verifyAccessible(sqlLogic.getInstructorByGoogleId(courseId, userInfo.getId()),"},{"lineNumber":54,"author":{"gitId":"cedricongjh"},"content":"                        feedbackSession, Const.InstructorPermissions.CAN_VIEW_SESSION_IN_SECTIONS);"},{"lineNumber":55,"author":{"gitId":"cedricongjh"},"content":"                break;"},{"lineNumber":56,"author":{"gitId":"cedricongjh"},"content":"            case STUDENT_RESULT:"},{"lineNumber":57,"author":{"gitId":"cedricongjh"},"content":"                gateKeeper.verifyAccessible(getSqlStudentOfCourseFromRequest(courseId), feedbackSession);"},{"lineNumber":58,"author":{"gitId":"cedricongjh"},"content":"                break;"},{"lineNumber":59,"author":{"gitId":"cedricongjh"},"content":"            default:"},{"lineNumber":60,"author":{"gitId":"cedricongjh"},"content":"                throw new InvalidHttpParameterException(\"Unknown intent \" + intent);"},{"lineNumber":61,"author":{"gitId":"cedricongjh"},"content":"            }"},{"lineNumber":62,"author":{"gitId":"cedricongjh"},"content":"        } else {"},{"lineNumber":63,"author":{"gitId":"cedricongjh"},"content":"            FeedbackSessionAttributes feedbackSession \u003d getNonNullFeedbackSession(feedbackSessionName, courseId);"},{"lineNumber":64,"author":{"gitId":"-"},"content":"            switch (intent) {"},{"lineNumber":65,"author":{"gitId":"-"},"content":"            case STUDENT_SUBMISSION:"},{"lineNumber":66,"author":{"gitId":"-"},"content":"                StudentAttributes studentAttributes \u003d getStudentOfCourseFromRequest(courseId);"},{"lineNumber":67,"author":{"gitId":"-"},"content":"                checkAccessControlForStudentFeedbackSubmission(studentAttributes, feedbackSession);"},{"lineNumber":68,"author":{"gitId":"-"},"content":"                break;"},{"lineNumber":69,"author":{"gitId":"-"},"content":"            case FULL_DETAIL:"},{"lineNumber":70,"author":{"gitId":"-"},"content":"                gateKeeper.verifyLoggedInUserPrivileges(userInfo);"},{"lineNumber":71,"author":{"gitId":"-"},"content":"                gateKeeper.verifyAccessible(logic.getInstructorForGoogleId(courseId, userInfo.getId()), feedbackSession);"},{"lineNumber":72,"author":{"gitId":"-"},"content":"                break;"},{"lineNumber":73,"author":{"gitId":"-"},"content":"            case INSTRUCTOR_SUBMISSION:"},{"lineNumber":74,"author":{"gitId":"-"},"content":"                InstructorAttributes instructorAttributes \u003d getInstructorOfCourseFromRequest(courseId);"},{"lineNumber":75,"author":{"gitId":"-"},"content":"                checkAccessControlForInstructorFeedbackSubmission(instructorAttributes, feedbackSession);"},{"lineNumber":76,"author":{"gitId":"-"},"content":"                break;"},{"lineNumber":77,"author":{"gitId":"-"},"content":"            case INSTRUCTOR_RESULT:"},{"lineNumber":78,"author":{"gitId":"-"},"content":"                gateKeeper.verifyLoggedInUserPrivileges(userInfo);"},{"lineNumber":79,"author":{"gitId":"-"},"content":"                gateKeeper.verifyAccessible(logic.getInstructorForGoogleId(courseId, userInfo.getId()),"},{"lineNumber":80,"author":{"gitId":"-"},"content":"                        feedbackSession, Const.InstructorPermissions.CAN_VIEW_SESSION_IN_SECTIONS);"},{"lineNumber":81,"author":{"gitId":"-"},"content":"                break;"},{"lineNumber":82,"author":{"gitId":"-"},"content":"            case STUDENT_RESULT:"},{"lineNumber":83,"author":{"gitId":"-"},"content":"                gateKeeper.verifyAccessible(getStudentOfCourseFromRequest(courseId), feedbackSession);"},{"lineNumber":84,"author":{"gitId":"-"},"content":"                break;"},{"lineNumber":85,"author":{"gitId":"-"},"content":"            default:"},{"lineNumber":86,"author":{"gitId":"-"},"content":"                throw new InvalidHttpParameterException(\"Unknown intent \" + intent);"},{"lineNumber":87,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":88,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":89,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":90,"author":{"gitId":"-"},"content":""},{"lineNumber":91,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":92,"author":{"gitId":"-"},"content":"    public JsonResult execute() {"},{"lineNumber":93,"author":{"gitId":"-"},"content":"        String courseId \u003d getNonNullRequestParamValue(Const.ParamsNames.COURSE_ID);"},{"lineNumber":94,"author":{"gitId":"-"},"content":"        String feedbackSessionName \u003d getNonNullRequestParamValue(Const.ParamsNames.FEEDBACK_SESSION_NAME);"},{"lineNumber":95,"author":{"gitId":"-"},"content":"        Intent intent \u003d Intent.valueOf(getNonNullRequestParamValue(Const.ParamsNames.INTENT));"},{"lineNumber":96,"author":{"gitId":"-"},"content":""},{"lineNumber":97,"author":{"gitId":"cedricongjh"},"content":"        if (!isCourseMigrated(courseId)) {"},{"lineNumber":98,"author":{"gitId":"-"},"content":"            List\u003cFeedbackQuestionAttributes\u003e questions;"},{"lineNumber":99,"author":{"gitId":"-"},"content":"            switch (intent) {"},{"lineNumber":100,"author":{"gitId":"-"},"content":"            case STUDENT_SUBMISSION:"},{"lineNumber":101,"author":{"gitId":"-"},"content":"                questions \u003d logic.getFeedbackQuestionsForStudents(feedbackSessionName, courseId);"},{"lineNumber":102,"author":{"gitId":"-"},"content":"                StudentAttributes studentAttributes \u003d getStudentOfCourseFromRequest(courseId);"},{"lineNumber":103,"author":{"gitId":"-"},"content":"                questions.forEach(question -\u003e"},{"lineNumber":104,"author":{"gitId":"-"},"content":"                        logic.populateFieldsToGenerateInQuestion(question,"},{"lineNumber":105,"author":{"gitId":"-"},"content":"                                studentAttributes.getEmail(), studentAttributes.getTeam()));"},{"lineNumber":106,"author":{"gitId":"-"},"content":"                break;"},{"lineNumber":107,"author":{"gitId":"-"},"content":"            case INSTRUCTOR_SUBMISSION:"},{"lineNumber":108,"author":{"gitId":"-"},"content":"                InstructorAttributes instructor \u003d getInstructorOfCourseFromRequest(courseId);"},{"lineNumber":109,"author":{"gitId":"-"},"content":"                questions \u003d logic.getFeedbackQuestionsForInstructors(feedbackSessionName, courseId, instructor.getEmail());"},{"lineNumber":110,"author":{"gitId":"-"},"content":"                questions.forEach(question -\u003e"},{"lineNumber":111,"author":{"gitId":"-"},"content":"                        logic.populateFieldsToGenerateInQuestion(question,"},{"lineNumber":112,"author":{"gitId":"-"},"content":"                                instructor.getEmail(), null));"},{"lineNumber":113,"author":{"gitId":"-"},"content":"                break;"},{"lineNumber":114,"author":{"gitId":"-"},"content":"            case FULL_DETAIL:"},{"lineNumber":115,"author":{"gitId":"-"},"content":"            case INSTRUCTOR_RESULT:"},{"lineNumber":116,"author":{"gitId":"-"},"content":"            case STUDENT_RESULT:"},{"lineNumber":117,"author":{"gitId":"-"},"content":"                questions \u003d logic.getFeedbackQuestionsForSession(feedbackSessionName, courseId);"},{"lineNumber":118,"author":{"gitId":"-"},"content":"                break;"},{"lineNumber":119,"author":{"gitId":"-"},"content":"            default:"},{"lineNumber":120,"author":{"gitId":"-"},"content":"                throw new InvalidHttpParameterException(\"Unknown intent \" + intent);"},{"lineNumber":121,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":122,"author":{"gitId":"-"},"content":""},{"lineNumber":123,"author":{"gitId":"-"},"content":"            String moderatedPerson \u003d getRequestParamValue(Const.ParamsNames.FEEDBACK_SESSION_MODERATED_PERSON);"},{"lineNumber":124,"author":{"gitId":"-"},"content":"            if (!StringHelper.isEmpty(moderatedPerson)) {"},{"lineNumber":125,"author":{"gitId":"-"},"content":"                // filter out unmodifiable questions"},{"lineNumber":126,"author":{"gitId":"-"},"content":"                questions.removeIf(question -\u003e !canInstructorSeeQuestion(question));"},{"lineNumber":127,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":128,"author":{"gitId":"-"},"content":""},{"lineNumber":129,"author":{"gitId":"-"},"content":"            FeedbackQuestionsData response \u003d new FeedbackQuestionsData(questions);"},{"lineNumber":130,"author":{"gitId":"-"},"content":"            response.normalizeQuestionNumber();"},{"lineNumber":131,"author":{"gitId":"-"},"content":"            if (intent.equals(Intent.STUDENT_SUBMISSION) || intent.equals(Intent.STUDENT_RESULT)) {"},{"lineNumber":132,"author":{"gitId":"-"},"content":"                for (FeedbackQuestionData questionData : response.getQuestions()) {"},{"lineNumber":133,"author":{"gitId":"-"},"content":"                    questionData.hideInformationForStudent();"},{"lineNumber":134,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":135,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":136,"author":{"gitId":"-"},"content":"            return new JsonResult(response);"},{"lineNumber":137,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":138,"author":{"gitId":"-"},"content":""},{"lineNumber":139,"author":{"gitId":"cedricongjh"},"content":"        FeedbackSession feedbackSession \u003d sqlLogic.getFeedbackSession(feedbackSessionName, courseId);"},{"lineNumber":140,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":141,"author":{"gitId":"cedricongjh"},"content":"        List\u003cFeedbackQuestion\u003e questions;"},{"lineNumber":142,"author":{"gitId":"-"},"content":"        switch (intent) {"},{"lineNumber":143,"author":{"gitId":"-"},"content":"        case STUDENT_SUBMISSION:"},{"lineNumber":144,"author":{"gitId":"cedricongjh"},"content":"            questions \u003d sqlLogic.getFeedbackQuestionsForStudents(feedbackSession);"},{"lineNumber":145,"author":{"gitId":"-"},"content":"            StudentAttributes studentAttributes \u003d getStudentOfCourseFromRequest(courseId);"},{"lineNumber":146,"author":{"gitId":"-"},"content":"            questions.forEach(question -\u003e"},{"lineNumber":147,"author":{"gitId":"cedricongjh"},"content":"                    sqlLogic.populateFieldsToGenerateInQuestion(question, courseId,"},{"lineNumber":148,"author":{"gitId":"-"},"content":"                            studentAttributes.getEmail(), studentAttributes.getTeam()));"},{"lineNumber":149,"author":{"gitId":"-"},"content":"            break;"},{"lineNumber":150,"author":{"gitId":"-"},"content":"        case INSTRUCTOR_SUBMISSION:"},{"lineNumber":151,"author":{"gitId":"-"},"content":"            InstructorAttributes instructor \u003d getInstructorOfCourseFromRequest(courseId);"},{"lineNumber":152,"author":{"gitId":"cedricongjh"},"content":"            questions \u003d sqlLogic.getFeedbackQuestionsForInstructors(feedbackSession, instructor.getEmail());"},{"lineNumber":153,"author":{"gitId":"-"},"content":"            questions.forEach(question -\u003e"},{"lineNumber":154,"author":{"gitId":"cedricongjh"},"content":"                    sqlLogic.populateFieldsToGenerateInQuestion(question, courseId,"},{"lineNumber":155,"author":{"gitId":"-"},"content":"                            instructor.getEmail(), null));"},{"lineNumber":156,"author":{"gitId":"-"},"content":"            break;"},{"lineNumber":157,"author":{"gitId":"-"},"content":"        case FULL_DETAIL:"},{"lineNumber":158,"author":{"gitId":"-"},"content":"        case INSTRUCTOR_RESULT:"},{"lineNumber":159,"author":{"gitId":"-"},"content":"        case STUDENT_RESULT:"},{"lineNumber":160,"author":{"gitId":"cedricongjh"},"content":"            questions \u003d sqlLogic.getFeedbackQuestionsForSession(feedbackSession);"},{"lineNumber":161,"author":{"gitId":"-"},"content":"            break;"},{"lineNumber":162,"author":{"gitId":"-"},"content":"        default:"},{"lineNumber":163,"author":{"gitId":"-"},"content":"            throw new InvalidHttpParameterException(\"Unknown intent \" + intent);"},{"lineNumber":164,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":165,"author":{"gitId":"-"},"content":""},{"lineNumber":166,"author":{"gitId":"-"},"content":"        String moderatedPerson \u003d getRequestParamValue(Const.ParamsNames.FEEDBACK_SESSION_MODERATED_PERSON);"},{"lineNumber":167,"author":{"gitId":"-"},"content":"        if (!StringHelper.isEmpty(moderatedPerson)) {"},{"lineNumber":168,"author":{"gitId":"-"},"content":"            // filter out unmodifiable questions"},{"lineNumber":169,"author":{"gitId":"-"},"content":"            questions.removeIf(question -\u003e !canInstructorSeeQuestion(question));"},{"lineNumber":170,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":171,"author":{"gitId":"-"},"content":""},{"lineNumber":172,"author":{"gitId":"cedricongjh"},"content":"        FeedbackQuestionsData response \u003d FeedbackQuestionsData.makeFeedbackQuestionsData(questions);"},{"lineNumber":173,"author":{"gitId":"-"},"content":"        response.normalizeQuestionNumber();"},{"lineNumber":174,"author":{"gitId":"-"},"content":"        if (intent.equals(Intent.STUDENT_SUBMISSION) || intent.equals(Intent.STUDENT_RESULT)) {"},{"lineNumber":175,"author":{"gitId":"-"},"content":"            for (FeedbackQuestionData questionData : response.getQuestions()) {"},{"lineNumber":176,"author":{"gitId":"-"},"content":"                questionData.hideInformationForStudent();"},{"lineNumber":177,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":178,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":179,"author":{"gitId":"-"},"content":"        return new JsonResult(response);"},{"lineNumber":180,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":181,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"cedricongjh":44,"-":137}},{"path":"src/main/java/teammates/ui/webapi/GetFeedbackSessionAction.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"kevin9foong"},"content":"import java.time.Instant;"},{"lineNumber":4,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":5,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackSessionAttributes;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.InstructorAttributes;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.StudentAttributes;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":9,"author":{"gitId":"kevin9foong"},"content":"import teammates.storage.sqlentity.FeedbackSession;"},{"lineNumber":10,"author":{"gitId":"kevin9foong"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":11,"author":{"gitId":"kevin9foong"},"content":"import teammates.storage.sqlentity.Student;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import teammates.ui.output.FeedbackSessionData;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import teammates.ui.request.Intent;"},{"lineNumber":14,"author":{"gitId":"-"},"content":""},{"lineNumber":15,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":16,"author":{"gitId":"-"},"content":" * Get a feedback session."},{"lineNumber":17,"author":{"gitId":"-"},"content":" */"},{"lineNumber":18,"author":{"gitId":"kevin9foong"},"content":"public class GetFeedbackSessionAction extends BasicFeedbackSubmissionAction {"},{"lineNumber":19,"author":{"gitId":"-"},"content":""},{"lineNumber":20,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":21,"author":{"gitId":"-"},"content":"    AuthType getMinAuthLevel() {"},{"lineNumber":22,"author":{"gitId":"-"},"content":"        return AuthType.PUBLIC;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":24,"author":{"gitId":"-"},"content":""},{"lineNumber":25,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":26,"author":{"gitId":"-"},"content":"    void checkSpecificAccessControl() throws UnauthorizedAccessException {"},{"lineNumber":27,"author":{"gitId":"-"},"content":"        String courseId \u003d getNonNullRequestParamValue(Const.ParamsNames.COURSE_ID);"},{"lineNumber":28,"author":{"gitId":"-"},"content":"        String feedbackSessionName \u003d getNonNullRequestParamValue(Const.ParamsNames.FEEDBACK_SESSION_NAME);"},{"lineNumber":29,"author":{"gitId":"-"},"content":"        Intent intent \u003d Intent.valueOf(getNonNullRequestParamValue(Const.ParamsNames.INTENT));"},{"lineNumber":30,"author":{"gitId":"-"},"content":""},{"lineNumber":31,"author":{"gitId":"kevin9foong"},"content":"        if (isCourseMigrated(courseId)) {"},{"lineNumber":32,"author":{"gitId":"kevin9foong"},"content":"            FeedbackSession feedbackSession \u003d getNonNullSqlFeedbackSession(feedbackSessionName, courseId);"},{"lineNumber":33,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":34,"author":{"gitId":"kevin9foong"},"content":"            switch (intent) {"},{"lineNumber":35,"author":{"gitId":"kevin9foong"},"content":"            case STUDENT_SUBMISSION:"},{"lineNumber":36,"author":{"gitId":"kevin9foong"},"content":"            case STUDENT_RESULT:"},{"lineNumber":37,"author":{"gitId":"kevin9foong"},"content":"                Student student \u003d getSqlStudentOfCourseFromRequest(courseId);"},{"lineNumber":38,"author":{"gitId":"kevin9foong"},"content":"                checkAccessControlForStudentFeedbackSubmission(student, feedbackSession);"},{"lineNumber":39,"author":{"gitId":"kevin9foong"},"content":"                break;"},{"lineNumber":40,"author":{"gitId":"kevin9foong"},"content":"            case INSTRUCTOR_SUBMISSION:"},{"lineNumber":41,"author":{"gitId":"kevin9foong"},"content":"            case INSTRUCTOR_RESULT:"},{"lineNumber":42,"author":{"gitId":"kevin9foong"},"content":"                Instructor instructor \u003d getSqlInstructorOfCourseFromRequest(courseId);"},{"lineNumber":43,"author":{"gitId":"kevin9foong"},"content":"                checkAccessControlForInstructorFeedbackSubmission(instructor, feedbackSession);"},{"lineNumber":44,"author":{"gitId":"kevin9foong"},"content":"                break;"},{"lineNumber":45,"author":{"gitId":"kevin9foong"},"content":"            case FULL_DETAIL:"},{"lineNumber":46,"author":{"gitId":"kevin9foong"},"content":"                gateKeeper.verifyLoggedInUserPrivileges(userInfo);"},{"lineNumber":47,"author":{"gitId":"kevin9foong"},"content":"                gateKeeper.verifyAccessible(sqlLogic.getInstructorByGoogleId(courseId, userInfo.getId()),"},{"lineNumber":48,"author":{"gitId":"kevin9foong"},"content":"                        feedbackSession, Const.InstructorPermissions.CAN_VIEW_SESSION_IN_SECTIONS);"},{"lineNumber":49,"author":{"gitId":"kevin9foong"},"content":"                break;"},{"lineNumber":50,"author":{"gitId":"kevin9foong"},"content":"            default:"},{"lineNumber":51,"author":{"gitId":"kevin9foong"},"content":"                throw new InvalidHttpParameterException(\"Unknown intent \" + intent);"},{"lineNumber":52,"author":{"gitId":"kevin9foong"},"content":"            }"},{"lineNumber":53,"author":{"gitId":"kevin9foong"},"content":"        } else {"},{"lineNumber":54,"author":{"gitId":"kevin9foong"},"content":"            FeedbackSessionAttributes feedbackSessionAttributes \u003d getNonNullFeedbackSession(feedbackSessionName, courseId);"},{"lineNumber":55,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":56,"author":{"gitId":"-"},"content":"            switch (intent) {"},{"lineNumber":57,"author":{"gitId":"-"},"content":"            case STUDENT_SUBMISSION:"},{"lineNumber":58,"author":{"gitId":"-"},"content":"            case STUDENT_RESULT:"},{"lineNumber":59,"author":{"gitId":"-"},"content":"                StudentAttributes studentAttributes \u003d getStudentOfCourseFromRequest(courseId);"},{"lineNumber":60,"author":{"gitId":"kevin9foong"},"content":"                checkAccessControlForStudentFeedbackSubmission(studentAttributes, feedbackSessionAttributes);"},{"lineNumber":61,"author":{"gitId":"-"},"content":"                break;"},{"lineNumber":62,"author":{"gitId":"-"},"content":"            case INSTRUCTOR_SUBMISSION:"},{"lineNumber":63,"author":{"gitId":"-"},"content":"            case INSTRUCTOR_RESULT:"},{"lineNumber":64,"author":{"gitId":"-"},"content":"                InstructorAttributes instructorAttributes \u003d getInstructorOfCourseFromRequest(courseId);"},{"lineNumber":65,"author":{"gitId":"kevin9foong"},"content":"                checkAccessControlForInstructorFeedbackSubmission(instructorAttributes, feedbackSessionAttributes);"},{"lineNumber":66,"author":{"gitId":"-"},"content":"                break;"},{"lineNumber":67,"author":{"gitId":"-"},"content":"            case FULL_DETAIL:"},{"lineNumber":68,"author":{"gitId":"-"},"content":"                gateKeeper.verifyLoggedInUserPrivileges(userInfo);"},{"lineNumber":69,"author":{"gitId":"-"},"content":"                gateKeeper.verifyAccessible(logic.getInstructorForGoogleId(courseId, userInfo.getId()),"},{"lineNumber":70,"author":{"gitId":"kevin9foong"},"content":"                        feedbackSessionAttributes, Const.InstructorPermissions.CAN_VIEW_SESSION_IN_SECTIONS);"},{"lineNumber":71,"author":{"gitId":"-"},"content":"                break;"},{"lineNumber":72,"author":{"gitId":"-"},"content":"            default:"},{"lineNumber":73,"author":{"gitId":"-"},"content":"                throw new InvalidHttpParameterException(\"Unknown intent \" + intent);"},{"lineNumber":74,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":75,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":76,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":77,"author":{"gitId":"-"},"content":""},{"lineNumber":78,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":79,"author":{"gitId":"-"},"content":"    public JsonResult execute() {"},{"lineNumber":80,"author":{"gitId":"-"},"content":"        String courseId \u003d getNonNullRequestParamValue(Const.ParamsNames.COURSE_ID);"},{"lineNumber":81,"author":{"gitId":"-"},"content":"        String feedbackSessionName \u003d getNonNullRequestParamValue(Const.ParamsNames.FEEDBACK_SESSION_NAME);"},{"lineNumber":82,"author":{"gitId":"-"},"content":"        Intent intent \u003d Intent.valueOf(getNonNullRequestParamValue(Const.ParamsNames.INTENT));"},{"lineNumber":83,"author":{"gitId":"-"},"content":"        FeedbackSessionData response;"},{"lineNumber":84,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":85,"author":{"gitId":"kevin9foong"},"content":"        if (isCourseMigrated(courseId)) {"},{"lineNumber":86,"author":{"gitId":"kevin9foong"},"content":"            FeedbackSession feedbackSession \u003d getNonNullSqlFeedbackSession(feedbackSessionName, courseId);"},{"lineNumber":87,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":88,"author":{"gitId":"kevin9foong"},"content":"            switch (intent) {"},{"lineNumber":89,"author":{"gitId":"kevin9foong"},"content":"            case STUDENT_SUBMISSION:"},{"lineNumber":90,"author":{"gitId":"kevin9foong"},"content":"            case STUDENT_RESULT:"},{"lineNumber":91,"author":{"gitId":"kevin9foong"},"content":"                Student student \u003d getSqlStudentOfCourseFromRequest(courseId);"},{"lineNumber":92,"author":{"gitId":"kevin9foong"},"content":"                Instant studentDeadline \u003d sqlLogic.getDeadlineForUser(feedbackSession, student);"},{"lineNumber":93,"author":{"gitId":"kevin9foong"},"content":"                response \u003d new FeedbackSessionData(feedbackSession, studentDeadline);"},{"lineNumber":94,"author":{"gitId":"kevin9foong"},"content":"                response.hideInformationForStudent(student.getEmail());"},{"lineNumber":95,"author":{"gitId":"kevin9foong"},"content":"                break;"},{"lineNumber":96,"author":{"gitId":"kevin9foong"},"content":"            case INSTRUCTOR_SUBMISSION:"},{"lineNumber":97,"author":{"gitId":"kevin9foong"},"content":"                Instructor instructorSubmission \u003d getSqlInstructorOfCourseFromRequest(courseId);"},{"lineNumber":98,"author":{"gitId":"kevin9foong"},"content":"                response \u003d new FeedbackSessionData(feedbackSession,"},{"lineNumber":99,"author":{"gitId":"kevin9foong"},"content":"                        sqlLogic.getDeadlineForUser(feedbackSession,"},{"lineNumber":100,"author":{"gitId":"kevin9foong"},"content":"                        instructorSubmission));"},{"lineNumber":101,"author":{"gitId":"kevin9foong"},"content":"                response.hideInformationForInstructorSubmission(instructorSubmission.getEmail());"},{"lineNumber":102,"author":{"gitId":"kevin9foong"},"content":"                break;"},{"lineNumber":103,"author":{"gitId":"kevin9foong"},"content":"            case INSTRUCTOR_RESULT:"},{"lineNumber":104,"author":{"gitId":"kevin9foong"},"content":"                Instructor instructorResult \u003d getSqlInstructorOfCourseFromRequest(courseId);"},{"lineNumber":105,"author":{"gitId":"kevin9foong"},"content":"                response \u003d new FeedbackSessionData(feedbackSession,"},{"lineNumber":106,"author":{"gitId":"kevin9foong"},"content":"                        sqlLogic.getDeadlineForUser(feedbackSession,"},{"lineNumber":107,"author":{"gitId":"kevin9foong"},"content":"                        instructorResult));"},{"lineNumber":108,"author":{"gitId":"kevin9foong"},"content":"                response.hideInformationForInstructor(instructorResult.getEmail());"},{"lineNumber":109,"author":{"gitId":"kevin9foong"},"content":"                break;"},{"lineNumber":110,"author":{"gitId":"kevin9foong"},"content":"            case FULL_DETAIL:"},{"lineNumber":111,"author":{"gitId":"kevin9foong"},"content":"                response \u003d new FeedbackSessionData(feedbackSession);"},{"lineNumber":112,"author":{"gitId":"kevin9foong"},"content":"                break;"},{"lineNumber":113,"author":{"gitId":"kevin9foong"},"content":"            default:"},{"lineNumber":114,"author":{"gitId":"kevin9foong"},"content":"                throw new InvalidHttpParameterException(\"Unknown intent \" + intent);"},{"lineNumber":115,"author":{"gitId":"kevin9foong"},"content":"            }"},{"lineNumber":116,"author":{"gitId":"kevin9foong"},"content":"            return new JsonResult(response);"},{"lineNumber":117,"author":{"gitId":"kevin9foong"},"content":"        } else {"},{"lineNumber":118,"author":{"gitId":"kevin9foong"},"content":"            FeedbackSessionAttributes feedbackSession \u003d getNonNullFeedbackSession(feedbackSessionName, courseId);"},{"lineNumber":119,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":120,"author":{"gitId":"-"},"content":"            switch (intent) {"},{"lineNumber":121,"author":{"gitId":"-"},"content":"            case STUDENT_SUBMISSION:"},{"lineNumber":122,"author":{"gitId":"-"},"content":"            case STUDENT_RESULT:"},{"lineNumber":123,"author":{"gitId":"-"},"content":"                response \u003d getStudentFeedbackSessionData(feedbackSession);"},{"lineNumber":124,"author":{"gitId":"-"},"content":"                response.hideInformationForStudent();"},{"lineNumber":125,"author":{"gitId":"-"},"content":"                break;"},{"lineNumber":126,"author":{"gitId":"-"},"content":"            case INSTRUCTOR_SUBMISSION:"},{"lineNumber":127,"author":{"gitId":"-"},"content":"                response \u003d getInstructorFeedbackSessionData(feedbackSession);"},{"lineNumber":128,"author":{"gitId":"-"},"content":"                response.hideInformationForInstructorSubmission();"},{"lineNumber":129,"author":{"gitId":"-"},"content":"                break;"},{"lineNumber":130,"author":{"gitId":"-"},"content":"            case INSTRUCTOR_RESULT:"},{"lineNumber":131,"author":{"gitId":"-"},"content":"                response \u003d getInstructorFeedbackSessionData(feedbackSession);"},{"lineNumber":132,"author":{"gitId":"-"},"content":"                response.hideInformationForInstructor();"},{"lineNumber":133,"author":{"gitId":"-"},"content":"                break;"},{"lineNumber":134,"author":{"gitId":"-"},"content":"            case FULL_DETAIL:"},{"lineNumber":135,"author":{"gitId":"-"},"content":"                response \u003d new FeedbackSessionData(feedbackSession);"},{"lineNumber":136,"author":{"gitId":"-"},"content":"                break;"},{"lineNumber":137,"author":{"gitId":"-"},"content":"            default:"},{"lineNumber":138,"author":{"gitId":"-"},"content":"                throw new InvalidHttpParameterException(\"Unknown intent \" + intent);"},{"lineNumber":139,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":140,"author":{"gitId":"-"},"content":"            return new JsonResult(response);"},{"lineNumber":141,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":142,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":143,"author":{"gitId":"-"},"content":""},{"lineNumber":144,"author":{"gitId":"-"},"content":"    private FeedbackSessionData getStudentFeedbackSessionData(FeedbackSessionAttributes session) {"},{"lineNumber":145,"author":{"gitId":"-"},"content":"        StudentAttributes student \u003d getStudentOfCourseFromRequest(session.getCourseId());"},{"lineNumber":146,"author":{"gitId":"-"},"content":"        String email \u003d student.getEmail();"},{"lineNumber":147,"author":{"gitId":"-"},"content":"        return new FeedbackSessionData(session.getCopyForStudent(email));"},{"lineNumber":148,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":149,"author":{"gitId":"-"},"content":""},{"lineNumber":150,"author":{"gitId":"-"},"content":"    private FeedbackSessionData getInstructorFeedbackSessionData(FeedbackSessionAttributes session) {"},{"lineNumber":151,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor \u003d getInstructorOfCourseFromRequest(session.getCourseId());"},{"lineNumber":152,"author":{"gitId":"-"},"content":"        String email \u003d instructor.getEmail();"},{"lineNumber":153,"author":{"gitId":"-"},"content":"        return new FeedbackSessionData(session.getCopyForInstructor(email));"},{"lineNumber":154,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":155,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"-":85,"kevin9foong":70}},{"path":"src/main/java/teammates/ui/webapi/GetInstructorAction.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.InstructorAttributes;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import teammates.ui.output.InstructorData;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import teammates.ui.request.Intent;"},{"lineNumber":8,"author":{"gitId":"-"},"content":""},{"lineNumber":9,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":10,"author":{"gitId":"-"},"content":" * Get the information of an instructor inside a course."},{"lineNumber":11,"author":{"gitId":"-"},"content":" */"},{"lineNumber":12,"author":{"gitId":"-"},"content":"public class GetInstructorAction extends BasicFeedbackSubmissionAction {"},{"lineNumber":13,"author":{"gitId":"-"},"content":""},{"lineNumber":14,"author":{"gitId":"-"},"content":"    private static final String UNAUTHORIZED_ACCESS \u003d \"You are not allowed to view this resource!\";"},{"lineNumber":15,"author":{"gitId":"-"},"content":""},{"lineNumber":16,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":17,"author":{"gitId":"-"},"content":"    AuthType getMinAuthLevel() {"},{"lineNumber":18,"author":{"gitId":"-"},"content":"        return AuthType.PUBLIC;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":20,"author":{"gitId":"-"},"content":""},{"lineNumber":21,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":22,"author":{"gitId":"-"},"content":"    void checkSpecificAccessControl() throws UnauthorizedAccessException {"},{"lineNumber":23,"author":{"gitId":"-"},"content":"        Intent intent \u003d Intent.valueOf(getNonNullRequestParamValue(Const.ParamsNames.INTENT));"},{"lineNumber":24,"author":{"gitId":"-"},"content":"        switch (intent) {"},{"lineNumber":25,"author":{"gitId":"-"},"content":"        case INSTRUCTOR_SUBMISSION:"},{"lineNumber":26,"author":{"gitId":"-"},"content":"        case INSTRUCTOR_RESULT:"},{"lineNumber":27,"author":{"gitId":"-"},"content":"            String courseId \u003d getNonNullRequestParamValue(Const.ParamsNames.COURSE_ID);"},{"lineNumber":28,"author":{"gitId":"-"},"content":"            if (isCourseMigrated(courseId)) {"},{"lineNumber":29,"author":{"gitId":"-"},"content":"                Instructor instructor \u003d getSqlInstructorOfCourseFromRequest(courseId);"},{"lineNumber":30,"author":{"gitId":"-"},"content":"                if (instructor \u003d\u003d null) {"},{"lineNumber":31,"author":{"gitId":"-"},"content":"                    throw new UnauthorizedAccessException(UNAUTHORIZED_ACCESS);"},{"lineNumber":32,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":33,"author":{"gitId":"-"},"content":"            } else {"},{"lineNumber":34,"author":{"gitId":"-"},"content":"                InstructorAttributes instructorAttributes \u003d getInstructorOfCourseFromRequest(courseId);"},{"lineNumber":35,"author":{"gitId":"-"},"content":"                if (instructorAttributes \u003d\u003d null) {"},{"lineNumber":36,"author":{"gitId":"-"},"content":"                    throw new UnauthorizedAccessException(UNAUTHORIZED_ACCESS);"},{"lineNumber":37,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":38,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":39,"author":{"gitId":"-"},"content":"            break;"},{"lineNumber":40,"author":{"gitId":"-"},"content":"        case FULL_DETAIL:"},{"lineNumber":41,"author":{"gitId":"-"},"content":"            gateKeeper.verifyLoggedInUserPrivileges(userInfo);"},{"lineNumber":42,"author":{"gitId":"-"},"content":"            break;"},{"lineNumber":43,"author":{"gitId":"-"},"content":"        default:"},{"lineNumber":44,"author":{"gitId":"-"},"content":"            throw new InvalidHttpParameterException(\"Unknown intent \" + intent);"},{"lineNumber":45,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":46,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":47,"author":{"gitId":"-"},"content":""},{"lineNumber":48,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":49,"author":{"gitId":"-"},"content":"    public JsonResult execute() {"},{"lineNumber":50,"author":{"gitId":"-"},"content":"        String intentString \u003d getNonNullRequestParamValue(Const.ParamsNames.INTENT);"},{"lineNumber":51,"author":{"gitId":"-"},"content":"        Intent intent;"},{"lineNumber":52,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":53,"author":{"gitId":"-"},"content":"            intent \u003d Intent.valueOf(intentString);"},{"lineNumber":54,"author":{"gitId":"-"},"content":"        } catch (IllegalArgumentException e) {"},{"lineNumber":55,"author":{"gitId":"-"},"content":"            throw new InvalidHttpParameterException(\"Invalid intent: \" + intentString, e);"},{"lineNumber":56,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":57,"author":{"gitId":"-"},"content":""},{"lineNumber":58,"author":{"gitId":"-"},"content":"        String courseId \u003d getNonNullRequestParamValue(Const.ParamsNames.COURSE_ID);"},{"lineNumber":59,"author":{"gitId":"-"},"content":""},{"lineNumber":60,"author":{"gitId":"-"},"content":"        if (!isCourseMigrated(courseId)) {"},{"lineNumber":61,"author":{"gitId":"-"},"content":"            InstructorAttributes instructorAttributes;"},{"lineNumber":62,"author":{"gitId":"-"},"content":""},{"lineNumber":63,"author":{"gitId":"-"},"content":"            switch (intent) {"},{"lineNumber":64,"author":{"gitId":"-"},"content":"            case INSTRUCTOR_SUBMISSION:"},{"lineNumber":65,"author":{"gitId":"-"},"content":"            case INSTRUCTOR_RESULT:"},{"lineNumber":66,"author":{"gitId":"-"},"content":"                instructorAttributes \u003d getInstructorOfCourseFromRequest(courseId);"},{"lineNumber":67,"author":{"gitId":"-"},"content":"                break;"},{"lineNumber":68,"author":{"gitId":"-"},"content":"            case FULL_DETAIL:"},{"lineNumber":69,"author":{"gitId":"-"},"content":"                instructorAttributes \u003d logic.getInstructorForGoogleId(courseId, userInfo.getId());"},{"lineNumber":70,"author":{"gitId":"-"},"content":"                break;"},{"lineNumber":71,"author":{"gitId":"-"},"content":"            default:"},{"lineNumber":72,"author":{"gitId":"-"},"content":"                throw new InvalidHttpParameterException(\"Unknown intent \" + intent);"},{"lineNumber":73,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":74,"author":{"gitId":"-"},"content":""},{"lineNumber":75,"author":{"gitId":"-"},"content":"            if (instructorAttributes \u003d\u003d null) {"},{"lineNumber":76,"author":{"gitId":"-"},"content":"                throw new EntityNotFoundException(\"Instructor could not be found for this course\");"},{"lineNumber":77,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":78,"author":{"gitId":"-"},"content":""},{"lineNumber":79,"author":{"gitId":"-"},"content":"            InstructorData instructorData \u003d new InstructorData(instructorAttributes);"},{"lineNumber":80,"author":{"gitId":"-"},"content":"            instructorData.setInstitute(logic.getCourseInstitute(courseId));"},{"lineNumber":81,"author":{"gitId":"-"},"content":"            if (intent \u003d\u003d Intent.FULL_DETAIL) {"},{"lineNumber":82,"author":{"gitId":"-"},"content":"                instructorData.setGoogleId(instructorAttributes.getGoogleId());"},{"lineNumber":83,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":84,"author":{"gitId":"-"},"content":""},{"lineNumber":85,"author":{"gitId":"-"},"content":"            return new JsonResult(instructorData);"},{"lineNumber":86,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":87,"author":{"gitId":"-"},"content":""},{"lineNumber":88,"author":{"gitId":"-"},"content":"        Instructor instructor;"},{"lineNumber":89,"author":{"gitId":"-"},"content":""},{"lineNumber":90,"author":{"gitId":"-"},"content":"        switch (intent) {"},{"lineNumber":91,"author":{"gitId":"-"},"content":"        case INSTRUCTOR_SUBMISSION:"},{"lineNumber":92,"author":{"gitId":"-"},"content":"        case INSTRUCTOR_RESULT:"},{"lineNumber":93,"author":{"gitId":"-"},"content":"            instructor \u003d getSqlInstructorOfCourseFromRequest(courseId);"},{"lineNumber":94,"author":{"gitId":"-"},"content":"            break;"},{"lineNumber":95,"author":{"gitId":"-"},"content":"        case FULL_DETAIL:"},{"lineNumber":96,"author":{"gitId":"-"},"content":"            instructor \u003d sqlLogic.getInstructorByGoogleId(courseId, userInfo.getId());"},{"lineNumber":97,"author":{"gitId":"-"},"content":"            break;"},{"lineNumber":98,"author":{"gitId":"-"},"content":"        default:"},{"lineNumber":99,"author":{"gitId":"-"},"content":"            throw new InvalidHttpParameterException(\"Unknown intent \" + intent);"},{"lineNumber":100,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":101,"author":{"gitId":"-"},"content":""},{"lineNumber":102,"author":{"gitId":"-"},"content":"        if (instructor \u003d\u003d null) {"},{"lineNumber":103,"author":{"gitId":"-"},"content":"            throw new EntityNotFoundException(\"Instructor could not be found for this course\");"},{"lineNumber":104,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":105,"author":{"gitId":"-"},"content":""},{"lineNumber":106,"author":{"gitId":"-"},"content":"        InstructorData instructorData \u003d new InstructorData(instructor);"},{"lineNumber":107,"author":{"gitId":"-"},"content":"        if (intent \u003d\u003d Intent.FULL_DETAIL) {"},{"lineNumber":108,"author":{"gitId":"domlimm"},"content":"            instructorData.setGoogleId(instructor.getGoogleId());"},{"lineNumber":109,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":110,"author":{"gitId":"-"},"content":""},{"lineNumber":111,"author":{"gitId":"-"},"content":"        return new JsonResult(instructorData);"},{"lineNumber":112,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":113,"author":{"gitId":"-"},"content":""},{"lineNumber":114,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"domlimm":1,"-":113}},{"path":"src/main/java/teammates/ui/webapi/GetInstructorsAction.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.util.stream.Collectors;"},{"lineNumber":5,"author":{"gitId":"-"},"content":""},{"lineNumber":6,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.CourseAttributes;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.InstructorAttributes;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.StudentAttributes;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":10,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Course;"},{"lineNumber":11,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":12,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Student;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import teammates.ui.output.InstructorData;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import teammates.ui.output.InstructorsData;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import teammates.ui.request.Intent;"},{"lineNumber":16,"author":{"gitId":"-"},"content":""},{"lineNumber":17,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":18,"author":{"gitId":"-"},"content":" * Get a list of instructors of a course."},{"lineNumber":19,"author":{"gitId":"-"},"content":" */"},{"lineNumber":20,"author":{"gitId":"domlimm"},"content":"public class GetInstructorsAction extends Action {"},{"lineNumber":21,"author":{"gitId":"-"},"content":""},{"lineNumber":22,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":23,"author":{"gitId":"-"},"content":"    AuthType getMinAuthLevel() {"},{"lineNumber":24,"author":{"gitId":"-"},"content":"        return AuthType.LOGGED_IN;"},{"lineNumber":25,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":26,"author":{"gitId":"-"},"content":""},{"lineNumber":27,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":28,"author":{"gitId":"-"},"content":"    void checkSpecificAccessControl() throws UnauthorizedAccessException {"},{"lineNumber":29,"author":{"gitId":"-"},"content":"        if (userInfo.isAdmin) {"},{"lineNumber":30,"author":{"gitId":"-"},"content":"            return;"},{"lineNumber":31,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":32,"author":{"gitId":"-"},"content":""},{"lineNumber":33,"author":{"gitId":"-"},"content":"        String courseId \u003d getNonNullRequestParamValue(Const.ParamsNames.COURSE_ID);"},{"lineNumber":34,"author":{"gitId":"-"},"content":""},{"lineNumber":35,"author":{"gitId":"domlimm"},"content":"        if (isCourseMigrated(courseId)) {"},{"lineNumber":36,"author":{"gitId":"domlimm"},"content":"            Course course \u003d sqlLogic.getCourse(courseId);"},{"lineNumber":37,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":38,"author":{"gitId":"domlimm"},"content":"            if (course \u003d\u003d null) {"},{"lineNumber":39,"author":{"gitId":"domlimm"},"content":"                throw new EntityNotFoundException(\"course not found\");"},{"lineNumber":40,"author":{"gitId":"domlimm"},"content":"            }"},{"lineNumber":41,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":42,"author":{"gitId":"domlimm"},"content":"            String intentStr \u003d getRequestParamValue(Const.ParamsNames.INTENT);"},{"lineNumber":43,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":44,"author":{"gitId":"domlimm"},"content":"            if (intentStr \u003d\u003d null) {"},{"lineNumber":45,"author":{"gitId":"domlimm"},"content":"                // get partial details of instructors with information hiding"},{"lineNumber":46,"author":{"gitId":"domlimm"},"content":"                // student should belong to the course"},{"lineNumber":47,"author":{"gitId":"domlimm"},"content":"                Student student \u003d sqlLogic.getStudentByGoogleId(courseId, userInfo.getId());"},{"lineNumber":48,"author":{"gitId":"domlimm"},"content":"                gateKeeper.verifyAccessible(student, course);"},{"lineNumber":49,"author":{"gitId":"domlimm"},"content":"            } else if (intentStr.equals(Intent.FULL_DETAIL.toString())) {"},{"lineNumber":50,"author":{"gitId":"domlimm"},"content":"                // get all instructors of a course without information hiding"},{"lineNumber":51,"author":{"gitId":"domlimm"},"content":"                // this need instructor privileges"},{"lineNumber":52,"author":{"gitId":"domlimm"},"content":"                Instructor instructor \u003d sqlLogic.getInstructorByGoogleId(courseId, userInfo.getId());"},{"lineNumber":53,"author":{"gitId":"domlimm"},"content":"                gateKeeper.verifyAccessible(instructor, course);"},{"lineNumber":54,"author":{"gitId":"domlimm"},"content":"            } else {"},{"lineNumber":55,"author":{"gitId":"domlimm"},"content":"                throw new InvalidHttpParameterException(\"unknown intent\");"},{"lineNumber":56,"author":{"gitId":"domlimm"},"content":"            }"},{"lineNumber":57,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":58,"author":{"gitId":"-"},"content":"            CourseAttributes course \u003d logic.getCourse(courseId);"},{"lineNumber":59,"author":{"gitId":"-"},"content":"            if (course \u003d\u003d null) {"},{"lineNumber":60,"author":{"gitId":"-"},"content":"                throw new EntityNotFoundException(\"course not found\");"},{"lineNumber":61,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":62,"author":{"gitId":"-"},"content":""},{"lineNumber":63,"author":{"gitId":"-"},"content":"            String intentStr \u003d getRequestParamValue(Const.ParamsNames.INTENT);"},{"lineNumber":64,"author":{"gitId":"-"},"content":"            if (intentStr \u003d\u003d null) {"},{"lineNumber":65,"author":{"gitId":"-"},"content":"                // get partial details of instructors with information hiding"},{"lineNumber":66,"author":{"gitId":"-"},"content":"                // student should belong to the course"},{"lineNumber":67,"author":{"gitId":"-"},"content":"                StudentAttributes student \u003d logic.getStudentForGoogleId(courseId, userInfo.getId());"},{"lineNumber":68,"author":{"gitId":"-"},"content":"                gateKeeper.verifyAccessible(student, course);"},{"lineNumber":69,"author":{"gitId":"-"},"content":"            } else if (intentStr.equals(Intent.FULL_DETAIL.toString())) {"},{"lineNumber":70,"author":{"gitId":"-"},"content":"                // get all instructors of a course without information hiding"},{"lineNumber":71,"author":{"gitId":"-"},"content":"                // this need instructor privileges"},{"lineNumber":72,"author":{"gitId":"-"},"content":"                InstructorAttributes instructor \u003d logic.getInstructorForGoogleId(courseId, userInfo.getId());"},{"lineNumber":73,"author":{"gitId":"-"},"content":"                gateKeeper.verifyAccessible(instructor, course);"},{"lineNumber":74,"author":{"gitId":"-"},"content":"            } else {"},{"lineNumber":75,"author":{"gitId":"-"},"content":"                throw new InvalidHttpParameterException(\"unknown intent\");"},{"lineNumber":76,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":77,"author":{"gitId":"domlimm"},"content":"        }"},{"lineNumber":78,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":79,"author":{"gitId":"-"},"content":""},{"lineNumber":80,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":81,"author":{"gitId":"-"},"content":"    public JsonResult execute() {"},{"lineNumber":82,"author":{"gitId":"-"},"content":"        String courseId \u003d getNonNullRequestParamValue(Const.ParamsNames.COURSE_ID);"},{"lineNumber":83,"author":{"gitId":"domlimm"},"content":"        String intentStr \u003d getRequestParamValue(Const.ParamsNames.INTENT);"},{"lineNumber":84,"author":{"gitId":"-"},"content":"        InstructorsData data;"},{"lineNumber":85,"author":{"gitId":"-"},"content":""},{"lineNumber":86,"author":{"gitId":"domlimm"},"content":"        if (!isCourseMigrated(courseId)) {"},{"lineNumber":87,"author":{"gitId":"domlimm"},"content":"            List\u003cInstructorAttributes\u003e instructorsOfCourse \u003d logic.getInstructorsForCourse(courseId);"},{"lineNumber":88,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":89,"author":{"gitId":"-"},"content":"            if (intentStr \u003d\u003d null) {"},{"lineNumber":90,"author":{"gitId":"domlimm"},"content":"                data \u003d new InstructorsData();"},{"lineNumber":91,"author":{"gitId":"-"},"content":"                instructorsOfCourse \u003d"},{"lineNumber":92,"author":{"gitId":"-"},"content":"                        instructorsOfCourse.stream()"},{"lineNumber":93,"author":{"gitId":"-"},"content":"                                .filter(InstructorAttributes::isDisplayedToStudents)"},{"lineNumber":94,"author":{"gitId":"-"},"content":"                                .collect(Collectors.toList());"},{"lineNumber":95,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":96,"author":{"gitId":"domlimm"},"content":"                List\u003cInstructorData\u003e instructorDataList \u003d instructorsOfCourse"},{"lineNumber":97,"author":{"gitId":"domlimm"},"content":"                        .stream()"},{"lineNumber":98,"author":{"gitId":"domlimm"},"content":"                        .map(InstructorData::new)"},{"lineNumber":99,"author":{"gitId":"domlimm"},"content":"                        .collect(Collectors.toList());"},{"lineNumber":100,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":101,"author":{"gitId":"domlimm"},"content":"                data.setInstructors(instructorDataList);"},{"lineNumber":102,"author":{"gitId":"-"},"content":""},{"lineNumber":103,"author":{"gitId":"-"},"content":"                // hide information"},{"lineNumber":104,"author":{"gitId":"-"},"content":"                data.getInstructors().forEach(i -\u003e {"},{"lineNumber":105,"author":{"gitId":"-"},"content":"                    i.setGoogleId(null);"},{"lineNumber":106,"author":{"gitId":"-"},"content":"                    i.setJoinState(null);"},{"lineNumber":107,"author":{"gitId":"-"},"content":"                    i.setIsDisplayedToStudents(null);"},{"lineNumber":108,"author":{"gitId":"-"},"content":"                    i.setRole(null);"},{"lineNumber":109,"author":{"gitId":"-"},"content":"                });"},{"lineNumber":110,"author":{"gitId":"-"},"content":"            } else if (intentStr.equals(Intent.FULL_DETAIL.toString())) {"},{"lineNumber":111,"author":{"gitId":"-"},"content":"                // get all instructors of a course without information hiding"},{"lineNumber":112,"author":{"gitId":"-"},"content":"                // adds googleId if caller is admin or has the appropriate privilege to modify instructor"},{"lineNumber":113,"author":{"gitId":"-"},"content":"                if (userInfo.isAdmin || logic.getInstructorForGoogleId(courseId, userInfo.getId()).getPrivileges()"},{"lineNumber":114,"author":{"gitId":"-"},"content":"                        .isAllowedForPrivilege(Const.InstructorPermissions.CAN_MODIFY_INSTRUCTOR)) {"},{"lineNumber":115,"author":{"gitId":"-"},"content":"                    data \u003d new InstructorsData();"},{"lineNumber":116,"author":{"gitId":"-"},"content":"                    for (InstructorAttributes instructor : instructorsOfCourse) {"},{"lineNumber":117,"author":{"gitId":"-"},"content":"                        InstructorData instructorData \u003d new InstructorData(instructor);"},{"lineNumber":118,"author":{"gitId":"-"},"content":"                        instructorData.setGoogleId(instructor.getGoogleId());"},{"lineNumber":119,"author":{"gitId":"-"},"content":"                        if (userInfo.isAdmin) {"},{"lineNumber":120,"author":{"gitId":"-"},"content":"                            instructorData.setKey(instructor.getKey());"},{"lineNumber":121,"author":{"gitId":"-"},"content":"                        }"},{"lineNumber":122,"author":{"gitId":"-"},"content":"                        data.getInstructors().add(instructorData);"},{"lineNumber":123,"author":{"gitId":"-"},"content":"                    }"},{"lineNumber":124,"author":{"gitId":"domlimm"},"content":"                } else {"},{"lineNumber":125,"author":{"gitId":"domlimm"},"content":"                    data \u003d new InstructorsData();"},{"lineNumber":126,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":127,"author":{"gitId":"domlimm"},"content":"                    List\u003cInstructorData\u003e instructorDataList \u003d instructorsOfCourse"},{"lineNumber":128,"author":{"gitId":"domlimm"},"content":"                            .stream()"},{"lineNumber":129,"author":{"gitId":"domlimm"},"content":"                            .map(InstructorData::new)"},{"lineNumber":130,"author":{"gitId":"-"},"content":"                            .collect(Collectors.toList());"},{"lineNumber":131,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":132,"author":{"gitId":"domlimm"},"content":"                    data.setInstructors(instructorDataList);"},{"lineNumber":133,"author":{"gitId":"domlimm"},"content":"                }"},{"lineNumber":134,"author":{"gitId":"domlimm"},"content":"            } else {"},{"lineNumber":135,"author":{"gitId":"domlimm"},"content":"                throw new InvalidHttpParameterException(\"unknown intent\");"},{"lineNumber":136,"author":{"gitId":"domlimm"},"content":"            }"},{"lineNumber":137,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":138,"author":{"gitId":"domlimm"},"content":"            return new JsonResult(data);"},{"lineNumber":139,"author":{"gitId":"domlimm"},"content":"        }"},{"lineNumber":140,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":141,"author":{"gitId":"domlimm"},"content":"        List\u003cInstructor\u003e instructorsOfCourse \u003d sqlLogic.getInstructorsByCourse(courseId);"},{"lineNumber":142,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":143,"author":{"gitId":"domlimm"},"content":"        if (intentStr \u003d\u003d null) {"},{"lineNumber":144,"author":{"gitId":"domlimm"},"content":"            instructorsOfCourse \u003d instructorsOfCourse"},{"lineNumber":145,"author":{"gitId":"domlimm"},"content":"                    .stream()"},{"lineNumber":146,"author":{"gitId":"domlimm"},"content":"                    .filter(Instructor::isDisplayedToStudents)"},{"lineNumber":147,"author":{"gitId":"domlimm"},"content":"                    .collect(Collectors.toList());"},{"lineNumber":148,"author":{"gitId":"-"},"content":"            data \u003d new InstructorsData(instructorsOfCourse);"},{"lineNumber":149,"author":{"gitId":"-"},"content":""},{"lineNumber":150,"author":{"gitId":"-"},"content":"            // hide information"},{"lineNumber":151,"author":{"gitId":"-"},"content":"            data.getInstructors().forEach(i -\u003e {"},{"lineNumber":152,"author":{"gitId":"-"},"content":"                i.setGoogleId(null);"},{"lineNumber":153,"author":{"gitId":"-"},"content":"                i.setJoinState(null);"},{"lineNumber":154,"author":{"gitId":"-"},"content":"                i.setIsDisplayedToStudents(null);"},{"lineNumber":155,"author":{"gitId":"-"},"content":"                i.setRole(null);"},{"lineNumber":156,"author":{"gitId":"-"},"content":"            });"},{"lineNumber":157,"author":{"gitId":"-"},"content":"        } else if (intentStr.equals(Intent.FULL_DETAIL.toString())) {"},{"lineNumber":158,"author":{"gitId":"-"},"content":"            // get all instructors of a course without information hiding"},{"lineNumber":159,"author":{"gitId":"-"},"content":"            // adds googleId if caller is admin or has the appropriate privilege to modify instructor"},{"lineNumber":160,"author":{"gitId":"domlimm"},"content":"            if (userInfo.isAdmin || sqlLogic.getInstructorByGoogleId(courseId, userInfo.getId()).getPrivileges()"},{"lineNumber":161,"author":{"gitId":"-"},"content":"                    .isAllowedForPrivilege(Const.InstructorPermissions.CAN_MODIFY_INSTRUCTOR)) {"},{"lineNumber":162,"author":{"gitId":"-"},"content":"                data \u003d new InstructorsData();"},{"lineNumber":163,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":164,"author":{"gitId":"domlimm"},"content":"                for (Instructor instructor : instructorsOfCourse) {"},{"lineNumber":165,"author":{"gitId":"-"},"content":"                    InstructorData instructorData \u003d new InstructorData(instructor);"},{"lineNumber":166,"author":{"gitId":"-"},"content":"                    instructorData.setGoogleId(instructor.getGoogleId());"},{"lineNumber":167,"author":{"gitId":"-"},"content":"                    if (userInfo.isAdmin) {"},{"lineNumber":168,"author":{"gitId":"domlimm"},"content":"                        instructorData.setKey(instructor.getRegKey());"},{"lineNumber":169,"author":{"gitId":"-"},"content":"                    }"},{"lineNumber":170,"author":{"gitId":"-"},"content":"                    data.getInstructors().add(instructorData);"},{"lineNumber":171,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":172,"author":{"gitId":"-"},"content":"            } else {"},{"lineNumber":173,"author":{"gitId":"-"},"content":"                data \u003d new InstructorsData(instructorsOfCourse);"},{"lineNumber":174,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":175,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":176,"author":{"gitId":"-"},"content":"            throw new InvalidHttpParameterException(\"unknown intent\");"},{"lineNumber":177,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":178,"author":{"gitId":"-"},"content":""},{"lineNumber":179,"author":{"gitId":"-"},"content":"        return new JsonResult(data);"},{"lineNumber":180,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":181,"author":{"gitId":"-"},"content":""},{"lineNumber":182,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"domlimm":66,"-":116}},{"path":"src/main/java/teammates/ui/webapi/GetNotificationAction.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"hhdqirui"},"content":"import java.util.UUID;"},{"lineNumber":4,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":5,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":6,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.Notification;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import teammates.ui.output.NotificationData;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.ui.request.InvalidHttpRequestBodyException;"},{"lineNumber":9,"author":{"gitId":"-"},"content":""},{"lineNumber":10,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":11,"author":{"gitId":"-"},"content":" * Action: Gets a notification by ID."},{"lineNumber":12,"author":{"gitId":"-"},"content":" */"},{"lineNumber":13,"author":{"gitId":"-"},"content":"public class GetNotificationAction extends AdminOnlyAction {"},{"lineNumber":14,"author":{"gitId":"-"},"content":""},{"lineNumber":15,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":16,"author":{"gitId":"-"},"content":"    public JsonResult execute() throws InvalidHttpRequestBodyException {"},{"lineNumber":17,"author":{"gitId":"hhdqirui"},"content":"        UUID notificationId \u003d getUuidRequestParamValue(Const.ParamsNames.NOTIFICATION_ID);"},{"lineNumber":18,"author":{"gitId":"-"},"content":""},{"lineNumber":19,"author":{"gitId":"hhdqirui"},"content":"        Notification notification \u003d sqlLogic.getNotification(notificationId);"},{"lineNumber":20,"author":{"gitId":"-"},"content":""},{"lineNumber":21,"author":{"gitId":"-"},"content":"        if (notification \u003d\u003d null) {"},{"lineNumber":22,"author":{"gitId":"-"},"content":"            throw new EntityNotFoundException(\"Notification does not exist.\");"},{"lineNumber":23,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":24,"author":{"gitId":"-"},"content":""},{"lineNumber":25,"author":{"gitId":"-"},"content":"        return new JsonResult(new NotificationData(notification));"},{"lineNumber":26,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":27,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"hhdqirui":5,"-":22}},{"path":"src/main/java/teammates/ui/webapi/GetNotificationsAction.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":4,"author":{"gitId":"hhdqirui"},"content":"import java.util.UUID;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.util.stream.Collectors;"},{"lineNumber":6,"author":{"gitId":"-"},"content":""},{"lineNumber":7,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.NotificationTargetUser;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.common.util.FieldValidator;"},{"lineNumber":10,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.Notification;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import teammates.ui.output.NotificationsData;"},{"lineNumber":12,"author":{"gitId":"-"},"content":""},{"lineNumber":13,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":14,"author":{"gitId":"-"},"content":" * Action: Gets a list of notifications."},{"lineNumber":15,"author":{"gitId":"-"},"content":" */"},{"lineNumber":16,"author":{"gitId":"-"},"content":"public class GetNotificationsAction extends Action {"},{"lineNumber":17,"author":{"gitId":"-"},"content":""},{"lineNumber":18,"author":{"gitId":"-"},"content":"    private static final String INVALID_TARGET_USER \u003d \"Target user can only be STUDENT or INSTRUCTOR.\";"},{"lineNumber":19,"author":{"gitId":"-"},"content":"    private static final String UNAUTHORIZED_ACCESS \u003d \"You are not allowed to view this resource!\";"},{"lineNumber":20,"author":{"gitId":"-"},"content":""},{"lineNumber":21,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":22,"author":{"gitId":"-"},"content":"    AuthType getMinAuthLevel() {"},{"lineNumber":23,"author":{"gitId":"-"},"content":"        return AuthType.LOGGED_IN;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":25,"author":{"gitId":"-"},"content":""},{"lineNumber":26,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":27,"author":{"gitId":"-"},"content":"    void checkSpecificAccessControl() throws UnauthorizedAccessException {"},{"lineNumber":28,"author":{"gitId":"-"},"content":"        if (userInfo.isAdmin) {"},{"lineNumber":29,"author":{"gitId":"-"},"content":"            return;"},{"lineNumber":30,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":31,"author":{"gitId":"-"},"content":"        String targetUserString \u003d getRequestParamValue(Const.ParamsNames.NOTIFICATION_TARGET_USER);"},{"lineNumber":32,"author":{"gitId":"-"},"content":"        String targetUserErrorMessage \u003d FieldValidator.getInvalidityInfoForNotificationTargetUser(targetUserString);"},{"lineNumber":33,"author":{"gitId":"-"},"content":"        if (!targetUserErrorMessage.isEmpty()) {"},{"lineNumber":34,"author":{"gitId":"-"},"content":"            throw new InvalidHttpParameterException(targetUserErrorMessage);"},{"lineNumber":35,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":36,"author":{"gitId":"-"},"content":"        NotificationTargetUser targetUser \u003d NotificationTargetUser.valueOf(targetUserString);"},{"lineNumber":37,"author":{"gitId":"-"},"content":"        if (targetUser \u003d\u003d NotificationTargetUser.INSTRUCTOR \u0026\u0026 !userInfo.isInstructor"},{"lineNumber":38,"author":{"gitId":"-"},"content":"                || targetUser \u003d\u003d NotificationTargetUser.STUDENT \u0026\u0026 !userInfo.isStudent) {"},{"lineNumber":39,"author":{"gitId":"-"},"content":"            throw new UnauthorizedAccessException(UNAUTHORIZED_ACCESS);"},{"lineNumber":40,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":41,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":42,"author":{"gitId":"-"},"content":""},{"lineNumber":43,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":44,"author":{"gitId":"-"},"content":"    public JsonResult execute() {"},{"lineNumber":45,"author":{"gitId":"-"},"content":"        String targetUserString \u003d getRequestParamValue(Const.ParamsNames.NOTIFICATION_TARGET_USER);"},{"lineNumber":46,"author":{"gitId":"hhdqirui"},"content":"        List\u003cNotification\u003e notifications;"},{"lineNumber":47,"author":{"gitId":"-"},"content":""},{"lineNumber":48,"author":{"gitId":"-"},"content":"        if (targetUserString \u003d\u003d null \u0026\u0026 userInfo.isAdmin) {"},{"lineNumber":49,"author":{"gitId":"-"},"content":"            // if request is from admin and targetUser is not specified, retrieve all notifications"},{"lineNumber":50,"author":{"gitId":"hhdqirui"},"content":"            notifications \u003d sqlLogic.getAllNotifications();"},{"lineNumber":51,"author":{"gitId":"hhdqirui"},"content":"            return new JsonResult(new NotificationsData(notifications));"},{"lineNumber":52,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":53,"author":{"gitId":"-"},"content":"            // retrieve active notification for specified target user"},{"lineNumber":54,"author":{"gitId":"-"},"content":"            String targetUserErrorMessage \u003d FieldValidator.getInvalidityInfoForNotificationTargetUser(targetUserString);"},{"lineNumber":55,"author":{"gitId":"-"},"content":"            if (!targetUserErrorMessage.isEmpty()) {"},{"lineNumber":56,"author":{"gitId":"-"},"content":"                throw new InvalidHttpParameterException(targetUserErrorMessage);"},{"lineNumber":57,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":58,"author":{"gitId":"-"},"content":"            NotificationTargetUser targetUser \u003d NotificationTargetUser.valueOf(targetUserString);"},{"lineNumber":59,"author":{"gitId":"-"},"content":"            if (targetUser \u003d\u003d NotificationTargetUser.GENERAL) {"},{"lineNumber":60,"author":{"gitId":"-"},"content":"                throw new InvalidHttpParameterException(INVALID_TARGET_USER);"},{"lineNumber":61,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":62,"author":{"gitId":"hhdqirui"},"content":"            notifications \u003d"},{"lineNumber":63,"author":{"gitId":"hhdqirui"},"content":"                    sqlLogic.getActiveNotificationsByTargetUser(targetUser);"},{"lineNumber":64,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":65,"author":{"gitId":"-"},"content":""},{"lineNumber":66,"author":{"gitId":"-"},"content":"        boolean isFetchingAll \u003d false;"},{"lineNumber":67,"author":{"gitId":"-"},"content":"        if (getRequestParamValue(Const.ParamsNames.NOTIFICATION_IS_FETCHING_ALL) !\u003d null) {"},{"lineNumber":68,"author":{"gitId":"-"},"content":"            isFetchingAll \u003d getBooleanRequestParamValue(Const.ParamsNames.NOTIFICATION_IS_FETCHING_ALL);"},{"lineNumber":69,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":70,"author":{"gitId":"-"},"content":""},{"lineNumber":71,"author":{"gitId":"-"},"content":"        if (isFetchingAll) {"},{"lineNumber":72,"author":{"gitId":"hhdqirui"},"content":"            return new JsonResult(new NotificationsData(notifications));"},{"lineNumber":73,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":74,"author":{"gitId":"-"},"content":""},{"lineNumber":75,"author":{"gitId":"-"},"content":"        // Filter unread notifications"},{"lineNumber":76,"author":{"gitId":"hhdqirui"},"content":"        List\u003cUUID\u003e readNotifications \u003d sqlLogic.getReadNotificationsId(userInfo.getId());"},{"lineNumber":77,"author":{"gitId":"hhdqirui"},"content":"        notifications \u003d notifications"},{"lineNumber":78,"author":{"gitId":"-"},"content":"                .stream()"},{"lineNumber":79,"author":{"gitId":"hhdqirui"},"content":"                .filter(n -\u003e !readNotifications.contains(n.getId()))"},{"lineNumber":80,"author":{"gitId":"-"},"content":"                .collect(Collectors.toList());"},{"lineNumber":81,"author":{"gitId":"-"},"content":""},{"lineNumber":82,"author":{"gitId":"-"},"content":"        if (userInfo.isAdmin) {"},{"lineNumber":83,"author":{"gitId":"hhdqirui"},"content":"            return new JsonResult(new NotificationsData(notifications));"},{"lineNumber":84,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":85,"author":{"gitId":"-"},"content":""},{"lineNumber":86,"author":{"gitId":"-"},"content":"        // Update shown attribute once a non-admin user fetches unread notifications"},{"lineNumber":87,"author":{"gitId":"hhdqirui"},"content":"        for (Notification n : notifications) {"},{"lineNumber":88,"author":{"gitId":"-"},"content":"            if (n.isShown()) {"},{"lineNumber":89,"author":{"gitId":"-"},"content":"                continue;"},{"lineNumber":90,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":91,"author":{"gitId":"hhdqirui"},"content":"            n.setShown();"},{"lineNumber":92,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":93,"author":{"gitId":"hhdqirui"},"content":"        return new JsonResult(new NotificationsData(notifications));"},{"lineNumber":94,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":95,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"hhdqirui":15,"-":80}},{"path":"src/main/java/teammates/ui/webapi/GetReadNotificationsAction.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":4,"author":{"gitId":"hhdqirui"},"content":"import java.util.UUID;"},{"lineNumber":5,"author":{"gitId":"hhdqirui"},"content":"import java.util.stream.Collectors;"},{"lineNumber":6,"author":{"gitId":"-"},"content":""},{"lineNumber":7,"author":{"gitId":"-"},"content":"import teammates.ui.output.ReadNotificationsData;"},{"lineNumber":8,"author":{"gitId":"-"},"content":""},{"lineNumber":9,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":10,"author":{"gitId":"-"},"content":" * Action: Gets read notifications from account entity."},{"lineNumber":11,"author":{"gitId":"-"},"content":" */"},{"lineNumber":12,"author":{"gitId":"-"},"content":"public class GetReadNotificationsAction extends Action {"},{"lineNumber":13,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":14,"author":{"gitId":"-"},"content":"    AuthType getMinAuthLevel() {"},{"lineNumber":15,"author":{"gitId":"-"},"content":"        return AuthType.LOGGED_IN;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":17,"author":{"gitId":"-"},"content":""},{"lineNumber":18,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":19,"author":{"gitId":"-"},"content":"    void checkSpecificAccessControl() throws UnauthorizedAccessException {"},{"lineNumber":20,"author":{"gitId":"-"},"content":"        // Any user can get the read notifications for their account."},{"lineNumber":21,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":22,"author":{"gitId":"-"},"content":""},{"lineNumber":23,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":24,"author":{"gitId":"-"},"content":"    public ActionResult execute() {"},{"lineNumber":25,"author":{"gitId":"hhdqirui"},"content":"        List\u003cUUID\u003e readNotifications \u003d"},{"lineNumber":26,"author":{"gitId":"hhdqirui"},"content":"                sqlLogic.getReadNotificationsId(userInfo.getId());"},{"lineNumber":27,"author":{"gitId":"hhdqirui"},"content":"        ReadNotificationsData output \u003d new ReadNotificationsData("},{"lineNumber":28,"author":{"gitId":"hhdqirui"},"content":"                readNotifications.stream().map(UUID::toString).collect(Collectors.toList()));"},{"lineNumber":29,"author":{"gitId":"-"},"content":"        return new JsonResult(output);"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":31,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"hhdqirui":6,"-":25}},{"path":"src/main/java/teammates/ui/webapi/GetStudentAction.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.CourseAttributes;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.InstructorAttributes;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.StudentAttributes;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":7,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Course;"},{"lineNumber":8,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":9,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Student;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import teammates.ui.output.StudentData;"},{"lineNumber":11,"author":{"gitId":"-"},"content":""},{"lineNumber":12,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":13,"author":{"gitId":"-"},"content":" * Get the information of a student inside a course."},{"lineNumber":14,"author":{"gitId":"-"},"content":" */"},{"lineNumber":15,"author":{"gitId":"domlimm"},"content":"public class GetStudentAction extends Action {"},{"lineNumber":16,"author":{"gitId":"-"},"content":""},{"lineNumber":17,"author":{"gitId":"-"},"content":"    /** Message indicating that a student not found. */"},{"lineNumber":18,"author":{"gitId":"-"},"content":"    static final String STUDENT_NOT_FOUND \u003d \"No student found\";"},{"lineNumber":19,"author":{"gitId":"-"},"content":""},{"lineNumber":20,"author":{"gitId":"-"},"content":"    /** String indicating ACCESS is not given. */"},{"lineNumber":21,"author":{"gitId":"-"},"content":"    private static final String UNAUTHORIZED_ACCESS \u003d \"You are not allowed to view this resource!\";"},{"lineNumber":22,"author":{"gitId":"-"},"content":""},{"lineNumber":23,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":24,"author":{"gitId":"-"},"content":"    AuthType getMinAuthLevel() {"},{"lineNumber":25,"author":{"gitId":"-"},"content":"        return AuthType.PUBLIC;"},{"lineNumber":26,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":27,"author":{"gitId":"-"},"content":""},{"lineNumber":28,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":29,"author":{"gitId":"-"},"content":"    void checkSpecificAccessControl() throws UnauthorizedAccessException {"},{"lineNumber":30,"author":{"gitId":"-"},"content":"        String courseId \u003d getNonNullRequestParamValue(Const.ParamsNames.COURSE_ID);"},{"lineNumber":31,"author":{"gitId":"-"},"content":""},{"lineNumber":32,"author":{"gitId":"domlimm"},"content":"        if (isCourseMigrated(courseId)) {"},{"lineNumber":33,"author":{"gitId":"domlimm"},"content":"            Course course \u003d sqlLogic.getCourse(courseId);"},{"lineNumber":34,"author":{"gitId":"-"},"content":""},{"lineNumber":35,"author":{"gitId":"domlimm"},"content":"            Student student;"},{"lineNumber":36,"author":{"gitId":"-"},"content":""},{"lineNumber":37,"author":{"gitId":"domlimm"},"content":"            String studentEmail \u003d getRequestParamValue(Const.ParamsNames.STUDENT_EMAIL);"},{"lineNumber":38,"author":{"gitId":"domlimm"},"content":"            String regKey \u003d getRequestParamValue(Const.ParamsNames.REGKEY);"},{"lineNumber":39,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":40,"author":{"gitId":"domlimm"},"content":"            if (studentEmail !\u003d null) {"},{"lineNumber":41,"author":{"gitId":"domlimm"},"content":"                student \u003d sqlLogic.getStudentForEmail(courseId, studentEmail);"},{"lineNumber":42,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":43,"author":{"gitId":"domlimm"},"content":"                if (student \u003d\u003d null || userInfo \u003d\u003d null || !userInfo.isInstructor) {"},{"lineNumber":44,"author":{"gitId":"domlimm"},"content":"                    throw new UnauthorizedAccessException(UNAUTHORIZED_ACCESS);"},{"lineNumber":45,"author":{"gitId":"domlimm"},"content":"                }"},{"lineNumber":46,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":47,"author":{"gitId":"domlimm"},"content":"                Instructor instructor \u003d sqlLogic.getInstructorByGoogleId(courseId, userInfo.id);"},{"lineNumber":48,"author":{"gitId":"-"},"content":""},{"lineNumber":49,"author":{"gitId":"domlimm"},"content":"                gateKeeper.verifyAccessible(instructor, sqlLogic.getCourse(courseId),"},{"lineNumber":50,"author":{"gitId":"domlimm"},"content":"                        student.getTeam().getSection().getName(),"},{"lineNumber":51,"author":{"gitId":"domlimm"},"content":"                        Const.InstructorPermissions.CAN_VIEW_STUDENT_IN_SECTIONS);"},{"lineNumber":52,"author":{"gitId":"domlimm"},"content":"            } else if (regKey !\u003d null) {"},{"lineNumber":53,"author":{"gitId":"domlimm"},"content":"                getUnregisteredSqlStudent().orElseThrow(() -\u003e new UnauthorizedAccessException(UNAUTHORIZED_ACCESS));"},{"lineNumber":54,"author":{"gitId":"domlimm"},"content":"            } else {"},{"lineNumber":55,"author":{"gitId":"domlimm"},"content":"                if (userInfo \u003d\u003d null || !userInfo.isStudent) {"},{"lineNumber":56,"author":{"gitId":"domlimm"},"content":"                    throw new UnauthorizedAccessException(UNAUTHORIZED_ACCESS);"},{"lineNumber":57,"author":{"gitId":"domlimm"},"content":"                }"},{"lineNumber":58,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":59,"author":{"gitId":"domlimm"},"content":"                student \u003d sqlLogic.getStudentByGoogleId(courseId, userInfo.id);"},{"lineNumber":60,"author":{"gitId":"domlimm"},"content":"                gateKeeper.verifyAccessible(student, course);"},{"lineNumber":61,"author":{"gitId":"domlimm"},"content":"            }"},{"lineNumber":62,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":63,"author":{"gitId":"-"},"content":"            CourseAttributes course \u003d logic.getCourse(courseId);"},{"lineNumber":64,"author":{"gitId":"-"},"content":""},{"lineNumber":65,"author":{"gitId":"-"},"content":"            StudentAttributes student;"},{"lineNumber":66,"author":{"gitId":"-"},"content":""},{"lineNumber":67,"author":{"gitId":"-"},"content":"            String studentEmail \u003d getRequestParamValue(Const.ParamsNames.STUDENT_EMAIL);"},{"lineNumber":68,"author":{"gitId":"-"},"content":"            String regKey \u003d getRequestParamValue(Const.ParamsNames.REGKEY);"},{"lineNumber":69,"author":{"gitId":"-"},"content":""},{"lineNumber":70,"author":{"gitId":"-"},"content":"            if (studentEmail !\u003d null) {"},{"lineNumber":71,"author":{"gitId":"-"},"content":"                student \u003d logic.getStudentForEmail(courseId, studentEmail);"},{"lineNumber":72,"author":{"gitId":"-"},"content":"                if (student \u003d\u003d null || userInfo \u003d\u003d null || !userInfo.isInstructor) {"},{"lineNumber":73,"author":{"gitId":"-"},"content":"                    throw new UnauthorizedAccessException(UNAUTHORIZED_ACCESS);"},{"lineNumber":74,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":75,"author":{"gitId":"-"},"content":""},{"lineNumber":76,"author":{"gitId":"-"},"content":"                InstructorAttributes instructor \u003d logic.getInstructorForGoogleId(courseId, userInfo.id);"},{"lineNumber":77,"author":{"gitId":"-"},"content":"                gateKeeper.verifyAccessible(instructor, logic.getCourse(courseId), student.getSection(),"},{"lineNumber":78,"author":{"gitId":"-"},"content":"                        Const.InstructorPermissions.CAN_VIEW_STUDENT_IN_SECTIONS);"},{"lineNumber":79,"author":{"gitId":"-"},"content":"            } else if (regKey !\u003d null) {"},{"lineNumber":80,"author":{"gitId":"-"},"content":"                getUnregisteredStudent().orElseThrow(() -\u003e new UnauthorizedAccessException(UNAUTHORIZED_ACCESS));"},{"lineNumber":81,"author":{"gitId":"-"},"content":"            } else {"},{"lineNumber":82,"author":{"gitId":"-"},"content":"                if (userInfo \u003d\u003d null || !userInfo.isStudent) {"},{"lineNumber":83,"author":{"gitId":"-"},"content":"                    throw new UnauthorizedAccessException(UNAUTHORIZED_ACCESS);"},{"lineNumber":84,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":85,"author":{"gitId":"-"},"content":""},{"lineNumber":86,"author":{"gitId":"-"},"content":"                student \u003d logic.getStudentForGoogleId(courseId, userInfo.id);"},{"lineNumber":87,"author":{"gitId":"-"},"content":"                gateKeeper.verifyAccessible(student, course);"},{"lineNumber":88,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":89,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":90,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":91,"author":{"gitId":"-"},"content":""},{"lineNumber":92,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":93,"author":{"gitId":"-"},"content":"    public JsonResult execute() {"},{"lineNumber":94,"author":{"gitId":"-"},"content":"        String courseId \u003d getNonNullRequestParamValue(Const.ParamsNames.COURSE_ID);"},{"lineNumber":95,"author":{"gitId":"-"},"content":""},{"lineNumber":96,"author":{"gitId":"domlimm"},"content":"        if (isCourseMigrated(courseId)) {"},{"lineNumber":97,"author":{"gitId":"domlimm"},"content":"            Student student;"},{"lineNumber":98,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":99,"author":{"gitId":"domlimm"},"content":"            String studentEmail \u003d getRequestParamValue(Const.ParamsNames.STUDENT_EMAIL);"},{"lineNumber":100,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":101,"author":{"gitId":"domlimm"},"content":"            if (studentEmail \u003d\u003d null) {"},{"lineNumber":102,"author":{"gitId":"domlimm"},"content":"                student \u003d getPossiblyUnregisteredSqlStudent(courseId);"},{"lineNumber":103,"author":{"gitId":"domlimm"},"content":"            } else {"},{"lineNumber":104,"author":{"gitId":"domlimm"},"content":"                student \u003d sqlLogic.getStudentForEmail(courseId, studentEmail);"},{"lineNumber":105,"author":{"gitId":"domlimm"},"content":"            }"},{"lineNumber":106,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":107,"author":{"gitId":"domlimm"},"content":"            if (student \u003d\u003d null) {"},{"lineNumber":108,"author":{"gitId":"domlimm"},"content":"                throw new EntityNotFoundException(STUDENT_NOT_FOUND);"},{"lineNumber":109,"author":{"gitId":"domlimm"},"content":"            }"},{"lineNumber":110,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":111,"author":{"gitId":"domlimm"},"content":"            StudentData studentData \u003d new StudentData(student);"},{"lineNumber":112,"author":{"gitId":"domlimm"},"content":"            if (userInfo !\u003d null \u0026\u0026 userInfo.isAdmin) {"},{"lineNumber":113,"author":{"gitId":"domlimm"},"content":"                studentData.setKey(student.getRegKey());"},{"lineNumber":114,"author":{"gitId":"domlimm"},"content":"                studentData.setGoogleId(student.getAccount().getGoogleId());"},{"lineNumber":115,"author":{"gitId":"domlimm"},"content":"            }"},{"lineNumber":116,"author":{"gitId":"-"},"content":""},{"lineNumber":117,"author":{"gitId":"domlimm"},"content":"            if (studentEmail \u003d\u003d null) {"},{"lineNumber":118,"author":{"gitId":"domlimm"},"content":"                // hide information if not an instructor"},{"lineNumber":119,"author":{"gitId":"domlimm"},"content":"                studentData.hideInformationForStudent();"},{"lineNumber":120,"author":{"gitId":"domlimm"},"content":"                // add student institute"},{"lineNumber":121,"author":{"gitId":"domlimm"},"content":"                studentData.setInstitute(student.getCourse().getInstitute());"},{"lineNumber":122,"author":{"gitId":"domlimm"},"content":"            }"},{"lineNumber":123,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":124,"author":{"gitId":"domlimm"},"content":"            return new JsonResult(studentData);"},{"lineNumber":125,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":126,"author":{"gitId":"-"},"content":"            StudentAttributes student;"},{"lineNumber":127,"author":{"gitId":"-"},"content":""},{"lineNumber":128,"author":{"gitId":"-"},"content":"            String studentEmail \u003d getRequestParamValue(Const.ParamsNames.STUDENT_EMAIL);"},{"lineNumber":129,"author":{"gitId":"-"},"content":""},{"lineNumber":130,"author":{"gitId":"-"},"content":"            if (studentEmail \u003d\u003d null) {"},{"lineNumber":131,"author":{"gitId":"-"},"content":"                student \u003d getPossiblyUnregisteredStudent(courseId);"},{"lineNumber":132,"author":{"gitId":"-"},"content":"            } else {"},{"lineNumber":133,"author":{"gitId":"-"},"content":"                student \u003d logic.getStudentForEmail(courseId, studentEmail);"},{"lineNumber":134,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":135,"author":{"gitId":"-"},"content":""},{"lineNumber":136,"author":{"gitId":"-"},"content":"            if (student \u003d\u003d null) {"},{"lineNumber":137,"author":{"gitId":"-"},"content":"                throw new EntityNotFoundException(STUDENT_NOT_FOUND);"},{"lineNumber":138,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":139,"author":{"gitId":"-"},"content":""},{"lineNumber":140,"author":{"gitId":"-"},"content":"            StudentData studentData \u003d new StudentData(student);"},{"lineNumber":141,"author":{"gitId":"-"},"content":"            if (userInfo !\u003d null \u0026\u0026 userInfo.isAdmin) {"},{"lineNumber":142,"author":{"gitId":"-"},"content":"                studentData.setKey(student.getKey());"},{"lineNumber":143,"author":{"gitId":"-"},"content":"                studentData.setGoogleId(student.getGoogleId());"},{"lineNumber":144,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":145,"author":{"gitId":"-"},"content":""},{"lineNumber":146,"author":{"gitId":"-"},"content":"            if (studentEmail \u003d\u003d null) {"},{"lineNumber":147,"author":{"gitId":"-"},"content":"                // hide information if not an instructor"},{"lineNumber":148,"author":{"gitId":"-"},"content":"                studentData.hideInformationForStudent();"},{"lineNumber":149,"author":{"gitId":"-"},"content":"                // add student institute"},{"lineNumber":150,"author":{"gitId":"-"},"content":"                studentData.setInstitute(logic.getCourseInstitute(courseId));"},{"lineNumber":151,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":152,"author":{"gitId":"-"},"content":""},{"lineNumber":153,"author":{"gitId":"-"},"content":"            return new JsonResult(studentData);"},{"lineNumber":154,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":155,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":156,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"domlimm":59,"-":97}},{"path":"src/main/java/teammates/ui/webapi/GetStudentsAction.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.util.LinkedList;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.util.Set;"},{"lineNumber":6,"author":{"gitId":"domlimm"},"content":"import java.util.stream.Collectors;"},{"lineNumber":7,"author":{"gitId":"-"},"content":""},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.InstructorAttributes;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.StudentAttributes;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":11,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":12,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Student;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import teammates.ui.output.StudentData;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import teammates.ui.output.StudentsData;"},{"lineNumber":15,"author":{"gitId":"-"},"content":""},{"lineNumber":16,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":17,"author":{"gitId":"-"},"content":" * Get a list of students."},{"lineNumber":18,"author":{"gitId":"-"},"content":" */"},{"lineNumber":19,"author":{"gitId":"domlimm"},"content":"public class GetStudentsAction extends Action {"},{"lineNumber":20,"author":{"gitId":"-"},"content":""},{"lineNumber":21,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":22,"author":{"gitId":"-"},"content":"    AuthType getMinAuthLevel() {"},{"lineNumber":23,"author":{"gitId":"-"},"content":"        return AuthType.LOGGED_IN;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":25,"author":{"gitId":"-"},"content":""},{"lineNumber":26,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":27,"author":{"gitId":"-"},"content":"    void checkSpecificAccessControl() throws UnauthorizedAccessException {"},{"lineNumber":28,"author":{"gitId":"-"},"content":"        String courseId \u003d getNonNullRequestParamValue(Const.ParamsNames.COURSE_ID);"},{"lineNumber":29,"author":{"gitId":"-"},"content":"        String teamName \u003d getRequestParamValue(Const.ParamsNames.TEAM_NAME);"},{"lineNumber":30,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":31,"author":{"gitId":"domlimm"},"content":"        if (isCourseMigrated(courseId)) {"},{"lineNumber":32,"author":{"gitId":"domlimm"},"content":"            if (teamName \u003d\u003d null) {"},{"lineNumber":33,"author":{"gitId":"domlimm"},"content":"                // request to get all students of a course by instructor"},{"lineNumber":34,"author":{"gitId":"domlimm"},"content":"                Instructor instructor \u003d sqlLogic.getInstructorByGoogleId(courseId, userInfo.id);"},{"lineNumber":35,"author":{"gitId":"domlimm"},"content":"                gateKeeper.verifyAccessible(instructor, sqlLogic.getCourse(courseId),"},{"lineNumber":36,"author":{"gitId":"domlimm"},"content":"                        Const.InstructorPermissions.CAN_VIEW_STUDENT_IN_SECTIONS);"},{"lineNumber":37,"author":{"gitId":"domlimm"},"content":"            } else {"},{"lineNumber":38,"author":{"gitId":"domlimm"},"content":"                // request to get team member by current student"},{"lineNumber":39,"author":{"gitId":"domlimm"},"content":"                Student student \u003d sqlLogic.getStudentByGoogleId(courseId, userInfo.id);"},{"lineNumber":40,"author":{"gitId":"domlimm"},"content":"                if (student \u003d\u003d null || !teamName.equals(student.getTeam().getName())) {"},{"lineNumber":41,"author":{"gitId":"domlimm"},"content":"                    throw new UnauthorizedAccessException(\"You are not part of the team\");"},{"lineNumber":42,"author":{"gitId":"domlimm"},"content":"                }"},{"lineNumber":43,"author":{"gitId":"domlimm"},"content":"            }"},{"lineNumber":44,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":45,"author":{"gitId":"-"},"content":"            if (teamName \u003d\u003d null) {"},{"lineNumber":46,"author":{"gitId":"-"},"content":"                // request to get all students of a course by instructor"},{"lineNumber":47,"author":{"gitId":"-"},"content":"                InstructorAttributes instructor \u003d logic.getInstructorForGoogleId(courseId, userInfo.id);"},{"lineNumber":48,"author":{"gitId":"-"},"content":"                gateKeeper.verifyAccessible(instructor, logic.getCourse(courseId),"},{"lineNumber":49,"author":{"gitId":"-"},"content":"                        Const.InstructorPermissions.CAN_VIEW_STUDENT_IN_SECTIONS);"},{"lineNumber":50,"author":{"gitId":"-"},"content":"            } else {"},{"lineNumber":51,"author":{"gitId":"-"},"content":"                // request to get team member by current student"},{"lineNumber":52,"author":{"gitId":"-"},"content":"                StudentAttributes student \u003d logic.getStudentForGoogleId(courseId, userInfo.id);"},{"lineNumber":53,"author":{"gitId":"-"},"content":"                if (student \u003d\u003d null || !teamName.equals(student.getTeam())) {"},{"lineNumber":54,"author":{"gitId":"-"},"content":"                    throw new UnauthorizedAccessException(\"You are not part of the team\");"},{"lineNumber":55,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":56,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":57,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":58,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":59,"author":{"gitId":"-"},"content":""},{"lineNumber":60,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":61,"author":{"gitId":"-"},"content":"    public JsonResult execute() {"},{"lineNumber":62,"author":{"gitId":"-"},"content":"        String courseId \u003d getNonNullRequestParamValue(Const.ParamsNames.COURSE_ID);"},{"lineNumber":63,"author":{"gitId":"-"},"content":"        String teamName \u003d getRequestParamValue(Const.ParamsNames.TEAM_NAME);"},{"lineNumber":64,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":65,"author":{"gitId":"domlimm"},"content":"        if (isCourseMigrated(courseId)) {"},{"lineNumber":66,"author":{"gitId":"domlimm"},"content":"            Instructor instructor \u003d sqlLogic.getInstructorByGoogleId(courseId, userInfo.id);"},{"lineNumber":67,"author":{"gitId":"domlimm"},"content":"            String privilegeName \u003d Const.InstructorPermissions.CAN_VIEW_STUDENT_IN_SECTIONS;"},{"lineNumber":68,"author":{"gitId":"domlimm"},"content":"            boolean hasCoursePrivilege \u003d instructor !\u003d null"},{"lineNumber":69,"author":{"gitId":"domlimm"},"content":"                    \u0026\u0026 instructor.isAllowedForPrivilege(privilegeName);"},{"lineNumber":70,"author":{"gitId":"domlimm"},"content":"            boolean hasSectionPrivilege \u003d instructor !\u003d null"},{"lineNumber":71,"author":{"gitId":"domlimm"},"content":"                    \u0026\u0026 instructor.getSectionsWithPrivilege(privilegeName).size() !\u003d 0;"},{"lineNumber":72,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":73,"author":{"gitId":"domlimm"},"content":"            if (teamName \u003d\u003d null \u0026\u0026 hasCoursePrivilege) {"},{"lineNumber":74,"author":{"gitId":"domlimm"},"content":"                // request to get all course students by instructor with course privilege"},{"lineNumber":75,"author":{"gitId":"domlimm"},"content":"                List\u003cStudent\u003e studentsForCourse \u003d sqlLogic.getStudentsForCourse(courseId);"},{"lineNumber":76,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":77,"author":{"gitId":"domlimm"},"content":"                return new JsonResult(new StudentsData(studentsForCourse));"},{"lineNumber":78,"author":{"gitId":"domlimm"},"content":"            } else if (teamName \u003d\u003d null \u0026\u0026 hasSectionPrivilege) {"},{"lineNumber":79,"author":{"gitId":"domlimm"},"content":"                // request to get students by instructor with section privilege"},{"lineNumber":80,"author":{"gitId":"domlimm"},"content":"                List\u003cStudent\u003e studentsForCourse \u003d sqlLogic.getStudentsForCourse(courseId);"},{"lineNumber":81,"author":{"gitId":"domlimm"},"content":"                List\u003cStudent\u003e studentsToReturn \u003d new LinkedList\u003c\u003e();"},{"lineNumber":82,"author":{"gitId":"domlimm"},"content":"                Set\u003cString\u003e sectionsWithViewPrivileges \u003d instructor"},{"lineNumber":83,"author":{"gitId":"domlimm"},"content":"                        .getSectionsWithPrivilege(privilegeName).keySet();"},{"lineNumber":84,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":85,"author":{"gitId":"domlimm"},"content":"                studentsForCourse.forEach(student -\u003e {"},{"lineNumber":86,"author":{"gitId":"domlimm"},"content":"                    if (sectionsWithViewPrivileges.contains(student.getTeam().getSection().getName())) {"},{"lineNumber":87,"author":{"gitId":"domlimm"},"content":"                        studentsToReturn.add(student);"},{"lineNumber":88,"author":{"gitId":"domlimm"},"content":"                    }"},{"lineNumber":89,"author":{"gitId":"domlimm"},"content":"                });"},{"lineNumber":90,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":91,"author":{"gitId":"domlimm"},"content":"                return new JsonResult(new StudentsData(studentsToReturn));"},{"lineNumber":92,"author":{"gitId":"domlimm"},"content":"            } else {"},{"lineNumber":93,"author":{"gitId":"domlimm"},"content":"                // request to get team members by current student"},{"lineNumber":94,"author":{"gitId":"domlimm"},"content":"                List\u003cStudent\u003e studentsForTeam \u003d sqlLogic.getStudentsByTeamName(teamName, courseId);"},{"lineNumber":95,"author":{"gitId":"domlimm"},"content":"                StudentsData data \u003d new StudentsData(studentsForTeam);"},{"lineNumber":96,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":97,"author":{"gitId":"domlimm"},"content":"                data.getStudents().forEach(StudentData::hideInformationForStudent);"},{"lineNumber":98,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":99,"author":{"gitId":"domlimm"},"content":"                return new JsonResult(data);"},{"lineNumber":100,"author":{"gitId":"domlimm"},"content":"            }"},{"lineNumber":101,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":102,"author":{"gitId":"-"},"content":"            InstructorAttributes instructor \u003d logic.getInstructorForGoogleId(courseId, userInfo.id);"},{"lineNumber":103,"author":{"gitId":"-"},"content":"            String privilegeName \u003d Const.InstructorPermissions.CAN_VIEW_STUDENT_IN_SECTIONS;"},{"lineNumber":104,"author":{"gitId":"-"},"content":"            boolean hasCoursePrivilege \u003d instructor !\u003d null"},{"lineNumber":105,"author":{"gitId":"-"},"content":"                    \u0026\u0026 instructor.isAllowedForPrivilege(privilegeName);"},{"lineNumber":106,"author":{"gitId":"-"},"content":"            boolean hasSectionPrivilege \u003d instructor !\u003d null"},{"lineNumber":107,"author":{"gitId":"-"},"content":"                    \u0026\u0026 instructor.getSectionsWithPrivilege(privilegeName).size() !\u003d 0;"},{"lineNumber":108,"author":{"gitId":"-"},"content":""},{"lineNumber":109,"author":{"gitId":"-"},"content":"            if (teamName \u003d\u003d null \u0026\u0026 hasCoursePrivilege) {"},{"lineNumber":110,"author":{"gitId":"-"},"content":"                // request to get all course students by instructor with course privilege"},{"lineNumber":111,"author":{"gitId":"-"},"content":"                List\u003cStudentAttributes\u003e studentsForCourse \u003d logic.getStudentsForCourse(courseId);"},{"lineNumber":112,"author":{"gitId":"domlimm"},"content":"                StudentsData data \u003d new StudentsData();"},{"lineNumber":113,"author":{"gitId":"domlimm"},"content":"                List\u003cStudentData\u003e studentDataList \u003d studentsForCourse"},{"lineNumber":114,"author":{"gitId":"domlimm"},"content":"                        .stream()"},{"lineNumber":115,"author":{"gitId":"domlimm"},"content":"                        .map(StudentData::new)"},{"lineNumber":116,"author":{"gitId":"domlimm"},"content":"                        .collect(Collectors.toList());"},{"lineNumber":117,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":118,"author":{"gitId":"domlimm"},"content":"                data.setStudents(studentDataList);"},{"lineNumber":119,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":120,"author":{"gitId":"domlimm"},"content":"                return new JsonResult(data);"},{"lineNumber":121,"author":{"gitId":"-"},"content":"            } else if (teamName \u003d\u003d null \u0026\u0026 hasSectionPrivilege) {"},{"lineNumber":122,"author":{"gitId":"-"},"content":"                // request to get students by instructor with section privilege"},{"lineNumber":123,"author":{"gitId":"-"},"content":"                List\u003cStudentAttributes\u003e studentsForCourse \u003d logic.getStudentsForCourse(courseId);"},{"lineNumber":124,"author":{"gitId":"-"},"content":"                List\u003cStudentAttributes\u003e studentsToReturn \u003d new LinkedList\u003c\u003e();"},{"lineNumber":125,"author":{"gitId":"-"},"content":"                Set\u003cString\u003e sectionsWithViewPrivileges \u003d instructor.getSectionsWithPrivilege(privilegeName).keySet();"},{"lineNumber":126,"author":{"gitId":"-"},"content":"                studentsForCourse.forEach(student -\u003e {"},{"lineNumber":127,"author":{"gitId":"-"},"content":"                    if (sectionsWithViewPrivileges.contains(student.getSection())) {"},{"lineNumber":128,"author":{"gitId":"-"},"content":"                        studentsToReturn.add(student);"},{"lineNumber":129,"author":{"gitId":"-"},"content":"                    }"},{"lineNumber":130,"author":{"gitId":"-"},"content":"                });"},{"lineNumber":131,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":132,"author":{"gitId":"domlimm"},"content":"                StudentsData data \u003d new StudentsData();"},{"lineNumber":133,"author":{"gitId":"domlimm"},"content":"                List\u003cStudentData\u003e studentDataList \u003d studentsToReturn"},{"lineNumber":134,"author":{"gitId":"domlimm"},"content":"                        .stream()"},{"lineNumber":135,"author":{"gitId":"domlimm"},"content":"                        .map(StudentData::new)"},{"lineNumber":136,"author":{"gitId":"domlimm"},"content":"                        .collect(Collectors.toList());"},{"lineNumber":137,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":138,"author":{"gitId":"domlimm"},"content":"                data.setStudents(studentDataList);"},{"lineNumber":139,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":140,"author":{"gitId":"domlimm"},"content":"                return new JsonResult(data);"},{"lineNumber":141,"author":{"gitId":"-"},"content":"            } else {"},{"lineNumber":142,"author":{"gitId":"-"},"content":"                // request to get team members by current student"},{"lineNumber":143,"author":{"gitId":"-"},"content":"                List\u003cStudentAttributes\u003e studentsForTeam \u003d logic.getStudentsForTeam(teamName, courseId);"},{"lineNumber":144,"author":{"gitId":"domlimm"},"content":"                StudentsData data \u003d new StudentsData();"},{"lineNumber":145,"author":{"gitId":"domlimm"},"content":"                List\u003cStudentData\u003e studentDataList \u003d studentsForTeam"},{"lineNumber":146,"author":{"gitId":"domlimm"},"content":"                        .stream()"},{"lineNumber":147,"author":{"gitId":"domlimm"},"content":"                        .map(StudentData::new)"},{"lineNumber":148,"author":{"gitId":"domlimm"},"content":"                        .collect(Collectors.toList());"},{"lineNumber":149,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":150,"author":{"gitId":"domlimm"},"content":"                studentDataList.forEach(StudentData::hideInformationForStudent);"},{"lineNumber":151,"author":{"gitId":"domlimm"},"content":"                data.setStudents(studentDataList);"},{"lineNumber":152,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":153,"author":{"gitId":"domlimm"},"content":"                return new JsonResult(data);"},{"lineNumber":154,"author":{"gitId":"domlimm"},"content":"            }"},{"lineNumber":155,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":156,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":157,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"domlimm":85,"-":72}},{"path":"src/main/java/teammates/ui/webapi/MarkNotificationAsReadAction.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.time.Instant;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":5,"author":{"gitId":"hhdqirui"},"content":"import java.util.UUID;"},{"lineNumber":6,"author":{"gitId":"hhdqirui"},"content":"import java.util.stream.Collectors;"},{"lineNumber":7,"author":{"gitId":"-"},"content":""},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import teammates.ui.output.ReadNotificationsData;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import teammates.ui.request.InvalidHttpRequestBodyException;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import teammates.ui.request.MarkNotificationAsReadRequest;"},{"lineNumber":13,"author":{"gitId":"-"},"content":""},{"lineNumber":14,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":15,"author":{"gitId":"-"},"content":" * Action: Marks a notification as read in account entity."},{"lineNumber":16,"author":{"gitId":"-"},"content":" */"},{"lineNumber":17,"author":{"gitId":"-"},"content":"public class MarkNotificationAsReadAction extends Action {"},{"lineNumber":18,"author":{"gitId":"-"},"content":""},{"lineNumber":19,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":20,"author":{"gitId":"-"},"content":"    AuthType getMinAuthLevel() {"},{"lineNumber":21,"author":{"gitId":"-"},"content":"        return AuthType.LOGGED_IN;"},{"lineNumber":22,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":23,"author":{"gitId":"-"},"content":""},{"lineNumber":24,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":25,"author":{"gitId":"-"},"content":"    void checkSpecificAccessControl() throws UnauthorizedAccessException {"},{"lineNumber":26,"author":{"gitId":"-"},"content":"        // Any user can create a read status for notification."},{"lineNumber":27,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":28,"author":{"gitId":"-"},"content":""},{"lineNumber":29,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    public ActionResult execute() throws InvalidHttpRequestBodyException, InvalidOperationException {"},{"lineNumber":31,"author":{"gitId":"-"},"content":"        MarkNotificationAsReadRequest readNotificationCreateRequest \u003d"},{"lineNumber":32,"author":{"gitId":"-"},"content":"                getAndValidateRequestBody(MarkNotificationAsReadRequest.class);"},{"lineNumber":33,"author":{"gitId":"hhdqirui"},"content":"        UUID notificationId \u003d UUID.fromString(readNotificationCreateRequest.getNotificationId());"},{"lineNumber":34,"author":{"gitId":"-"},"content":"        Instant endTime \u003d Instant.ofEpochMilli(readNotificationCreateRequest.getEndTimestamp());"},{"lineNumber":35,"author":{"gitId":"-"},"content":""},{"lineNumber":36,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":37,"author":{"gitId":"hhdqirui"},"content":"            if (!isAccountMigrated(userInfo.getId())) {"},{"lineNumber":38,"author":{"gitId":"hhdqirui"},"content":"                List\u003cString\u003e readNotifications \u003d"},{"lineNumber":39,"author":{"gitId":"hhdqirui"},"content":"                        logic.updateReadNotifications(userInfo.getId(), notificationId.toString(), endTime);"},{"lineNumber":40,"author":{"gitId":"hhdqirui"},"content":"                ReadNotificationsData output \u003d new ReadNotificationsData(readNotifications);"},{"lineNumber":41,"author":{"gitId":"hhdqirui"},"content":"                return new JsonResult(output);"},{"lineNumber":42,"author":{"gitId":"hhdqirui"},"content":"            }"},{"lineNumber":43,"author":{"gitId":"hhdqirui"},"content":"            List\u003cUUID\u003e readNotifications \u003d"},{"lineNumber":44,"author":{"gitId":"hhdqirui"},"content":"                    sqlLogic.updateReadNotifications(userInfo.getId(), notificationId, endTime);"},{"lineNumber":45,"author":{"gitId":"hhdqirui"},"content":"            ReadNotificationsData output \u003d new ReadNotificationsData("},{"lineNumber":46,"author":{"gitId":"hhdqirui"},"content":"                    readNotifications.stream().map(UUID::toString).collect(Collectors.toList()));"},{"lineNumber":47,"author":{"gitId":"-"},"content":"            return new JsonResult(output);"},{"lineNumber":48,"author":{"gitId":"-"},"content":"        } catch (EntityDoesNotExistException e) {"},{"lineNumber":49,"author":{"gitId":"-"},"content":"            throw new EntityNotFoundException(e);"},{"lineNumber":50,"author":{"gitId":"-"},"content":"        } catch (InvalidParametersException e) {"},{"lineNumber":51,"author":{"gitId":"-"},"content":"            throw new InvalidHttpRequestBodyException(e);"},{"lineNumber":52,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":53,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":54,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"hhdqirui":13,"-":41}},{"path":"src/main/java/teammates/ui/webapi/ResetAccountAction.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.InstructorAttributes;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.StudentAttributes;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":7,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":8,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Student;"},{"lineNumber":9,"author":{"gitId":"-"},"content":""},{"lineNumber":10,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":11,"author":{"gitId":"-"},"content":" * Action: resets an account ID."},{"lineNumber":12,"author":{"gitId":"-"},"content":" */"},{"lineNumber":13,"author":{"gitId":"domlimm"},"content":"public class ResetAccountAction extends AdminOnlyAction {"},{"lineNumber":14,"author":{"gitId":"-"},"content":""},{"lineNumber":15,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":16,"author":{"gitId":"-"},"content":"    public JsonResult execute() {"},{"lineNumber":17,"author":{"gitId":"-"},"content":"        String studentEmail \u003d getRequestParamValue(Const.ParamsNames.STUDENT_EMAIL);"},{"lineNumber":18,"author":{"gitId":"-"},"content":"        String instructorEmail \u003d getRequestParamValue(Const.ParamsNames.INSTRUCTOR_EMAIL);"},{"lineNumber":19,"author":{"gitId":"-"},"content":""},{"lineNumber":20,"author":{"gitId":"-"},"content":"        if (studentEmail \u003d\u003d null \u0026\u0026 instructorEmail \u003d\u003d null) {"},{"lineNumber":21,"author":{"gitId":"-"},"content":"            throw new InvalidHttpParameterException(\"Either student email or instructor email has to be specified.\");"},{"lineNumber":22,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":23,"author":{"gitId":"-"},"content":""},{"lineNumber":24,"author":{"gitId":"-"},"content":"        String courseId \u003d getNonNullRequestParamValue(Const.ParamsNames.COURSE_ID);"},{"lineNumber":25,"author":{"gitId":"-"},"content":"        String wrongGoogleId \u003d null;"},{"lineNumber":26,"author":{"gitId":"-"},"content":""},{"lineNumber":27,"author":{"gitId":"domlimm"},"content":"        if (isCourseMigrated(courseId)) {"},{"lineNumber":28,"author":{"gitId":"domlimm"},"content":"            if (studentEmail !\u003d null) {"},{"lineNumber":29,"author":{"gitId":"domlimm"},"content":"                Student existingStudent \u003d sqlLogic.getStudentForEmail(courseId, studentEmail);"},{"lineNumber":30,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":31,"author":{"gitId":"domlimm"},"content":"                if (existingStudent \u003d\u003d null) {"},{"lineNumber":32,"author":{"gitId":"domlimm"},"content":"                    throw new EntityNotFoundException(\"Student does not exist.\");"},{"lineNumber":33,"author":{"gitId":"domlimm"},"content":"                }"},{"lineNumber":34,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":35,"author":{"gitId":"domlimm"},"content":"                wrongGoogleId \u003d existingStudent.getGoogleId();"},{"lineNumber":36,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":37,"author":{"gitId":"domlimm"},"content":"                try {"},{"lineNumber":38,"author":{"gitId":"domlimm"},"content":"                    if (isAccountMigrated(wrongGoogleId)) {"},{"lineNumber":39,"author":{"gitId":"domlimm"},"content":"                        sqlLogic.resetStudentGoogleId(studentEmail, courseId, wrongGoogleId);"},{"lineNumber":40,"author":{"gitId":"domlimm"},"content":"                    } else {"},{"lineNumber":41,"author":{"gitId":"domlimm"},"content":"                        logic.resetStudentGoogleId(studentEmail, courseId);"},{"lineNumber":42,"author":{"gitId":"domlimm"},"content":"                    }"},{"lineNumber":43,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":44,"author":{"gitId":"domlimm"},"content":"                    taskQueuer.scheduleCourseRegistrationInviteToStudent(courseId, studentEmail, true);"},{"lineNumber":45,"author":{"gitId":"domlimm"},"content":"                } catch (EntityDoesNotExistException e) {"},{"lineNumber":46,"author":{"gitId":"domlimm"},"content":"                    throw new EntityNotFoundException(e);"},{"lineNumber":47,"author":{"gitId":"domlimm"},"content":"                }"},{"lineNumber":48,"author":{"gitId":"domlimm"},"content":"            } else if (instructorEmail !\u003d null) {"},{"lineNumber":49,"author":{"gitId":"domlimm"},"content":"                Instructor existingInstructor \u003d sqlLogic.getInstructorForEmail(courseId, instructorEmail);"},{"lineNumber":50,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":51,"author":{"gitId":"domlimm"},"content":"                if (existingInstructor \u003d\u003d null) {"},{"lineNumber":52,"author":{"gitId":"domlimm"},"content":"                    throw new EntityNotFoundException(\"Instructor does not exist.\");"},{"lineNumber":53,"author":{"gitId":"domlimm"},"content":"                }"},{"lineNumber":54,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":55,"author":{"gitId":"domlimm"},"content":"                wrongGoogleId \u003d existingInstructor.getGoogleId();"},{"lineNumber":56,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":57,"author":{"gitId":"domlimm"},"content":"                try {"},{"lineNumber":58,"author":{"gitId":"domlimm"},"content":"                    if (isAccountMigrated(wrongGoogleId)) {"},{"lineNumber":59,"author":{"gitId":"domlimm"},"content":"                        sqlLogic.resetInstructorGoogleId(instructorEmail, courseId, wrongGoogleId);"},{"lineNumber":60,"author":{"gitId":"domlimm"},"content":"                    } else {"},{"lineNumber":61,"author":{"gitId":"domlimm"},"content":"                        logic.resetInstructorGoogleId(instructorEmail, courseId);"},{"lineNumber":62,"author":{"gitId":"domlimm"},"content":"                    }"},{"lineNumber":63,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":64,"author":{"gitId":"domlimm"},"content":"                    taskQueuer.scheduleCourseRegistrationInviteToInstructor(null, instructorEmail, courseId, true);"},{"lineNumber":65,"author":{"gitId":"domlimm"},"content":"                } catch (EntityDoesNotExistException e) {"},{"lineNumber":66,"author":{"gitId":"domlimm"},"content":"                    throw new EntityNotFoundException(e);"},{"lineNumber":67,"author":{"gitId":"domlimm"},"content":"                }"},{"lineNumber":68,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":69,"author":{"gitId":"domlimm"},"content":"        } else {"},{"lineNumber":70,"author":{"gitId":"-"},"content":"            if (studentEmail !\u003d null) {"},{"lineNumber":71,"author":{"gitId":"-"},"content":"                StudentAttributes existingStudent \u003d logic.getStudentForEmail(courseId, studentEmail);"},{"lineNumber":72,"author":{"gitId":"-"},"content":"                if (existingStudent \u003d\u003d null) {"},{"lineNumber":73,"author":{"gitId":"-"},"content":"                    throw new EntityNotFoundException(\"Student does not exist.\");"},{"lineNumber":74,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":75,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":76,"author":{"gitId":"-"},"content":"                wrongGoogleId \u003d existingStudent.getGoogleId();"},{"lineNumber":77,"author":{"gitId":"-"},"content":""},{"lineNumber":78,"author":{"gitId":"-"},"content":"                try {"},{"lineNumber":79,"author":{"gitId":"domlimm"},"content":"                    if (isAccountMigrated(wrongGoogleId)) {"},{"lineNumber":80,"author":{"gitId":"domlimm"},"content":"                        sqlLogic.resetStudentGoogleId(studentEmail, courseId, wrongGoogleId);"},{"lineNumber":81,"author":{"gitId":"domlimm"},"content":"                    } else {"},{"lineNumber":82,"author":{"gitId":"-"},"content":"                        logic.resetStudentGoogleId(studentEmail, courseId);"},{"lineNumber":83,"author":{"gitId":"domlimm"},"content":"                    }"},{"lineNumber":84,"author":{"gitId":"-"},"content":""},{"lineNumber":85,"author":{"gitId":"-"},"content":"                    taskQueuer.scheduleCourseRegistrationInviteToStudent(courseId, studentEmail, true);"},{"lineNumber":86,"author":{"gitId":"-"},"content":"                } catch (EntityDoesNotExistException e) {"},{"lineNumber":87,"author":{"gitId":"-"},"content":"                    throw new EntityNotFoundException(e);"},{"lineNumber":88,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":89,"author":{"gitId":"-"},"content":"            } else if (instructorEmail !\u003d null) {"},{"lineNumber":90,"author":{"gitId":"-"},"content":"                InstructorAttributes existingInstructor \u003d logic.getInstructorForEmail(courseId, instructorEmail);"},{"lineNumber":91,"author":{"gitId":"-"},"content":"                if (existingInstructor \u003d\u003d null) {"},{"lineNumber":92,"author":{"gitId":"-"},"content":"                    throw new EntityNotFoundException(\"Instructor does not exist.\");"},{"lineNumber":93,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":94,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":95,"author":{"gitId":"-"},"content":"                wrongGoogleId \u003d existingInstructor.getGoogleId();"},{"lineNumber":96,"author":{"gitId":"-"},"content":""},{"lineNumber":97,"author":{"gitId":"-"},"content":"                try {"},{"lineNumber":98,"author":{"gitId":"domlimm"},"content":"                    if (isAccountMigrated(wrongGoogleId)) {"},{"lineNumber":99,"author":{"gitId":"domlimm"},"content":"                        sqlLogic.resetInstructorGoogleId(instructorEmail, courseId, wrongGoogleId);"},{"lineNumber":100,"author":{"gitId":"domlimm"},"content":"                    } else {"},{"lineNumber":101,"author":{"gitId":"-"},"content":"                        logic.resetInstructorGoogleId(instructorEmail, courseId);"},{"lineNumber":102,"author":{"gitId":"domlimm"},"content":"                    }"},{"lineNumber":103,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":104,"author":{"gitId":"-"},"content":"                    taskQueuer.scheduleCourseRegistrationInviteToInstructor(null, instructorEmail, courseId, true);"},{"lineNumber":105,"author":{"gitId":"-"},"content":"                } catch (EntityDoesNotExistException e) {"},{"lineNumber":106,"author":{"gitId":"-"},"content":"                    throw new EntityNotFoundException(e);"},{"lineNumber":107,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":108,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":109,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":110,"author":{"gitId":"-"},"content":""},{"lineNumber":111,"author":{"gitId":"-"},"content":"        if (wrongGoogleId !\u003d null"},{"lineNumber":112,"author":{"gitId":"domlimm"},"content":"                \u0026\u0026 !isAccountMigrated(wrongGoogleId)"},{"lineNumber":113,"author":{"gitId":"-"},"content":"                \u0026\u0026 logic.getStudentsForGoogleId(wrongGoogleId).isEmpty()"},{"lineNumber":114,"author":{"gitId":"-"},"content":"                \u0026\u0026 logic.getInstructorsForGoogleId(wrongGoogleId).isEmpty()) {"},{"lineNumber":115,"author":{"gitId":"-"},"content":"            logic.deleteAccountCascade(wrongGoogleId);"},{"lineNumber":116,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":117,"author":{"gitId":"-"},"content":""},{"lineNumber":118,"author":{"gitId":"-"},"content":"        return new JsonResult(\"Account is successfully reset.\");"},{"lineNumber":119,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":120,"author":{"gitId":"-"},"content":""},{"lineNumber":121,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"domlimm":57,"-":64}},{"path":"src/main/java/teammates/ui/webapi/ResetAccountRequestAction.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import org.apache.http.HttpStatus;"},{"lineNumber":4,"author":{"gitId":"-"},"content":""},{"lineNumber":5,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.util.EmailWrapper;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.common.util.Logger;"},{"lineNumber":10,"author":{"gitId":"kevin9foong"},"content":"import teammates.storage.sqlentity.AccountRequest;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import teammates.ui.output.JoinLinkData;"},{"lineNumber":12,"author":{"gitId":"-"},"content":""},{"lineNumber":13,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":14,"author":{"gitId":"-"},"content":" * Action: resets an account request."},{"lineNumber":15,"author":{"gitId":"-"},"content":" */"},{"lineNumber":16,"author":{"gitId":"-"},"content":"class ResetAccountRequestAction extends AdminOnlyAction {"},{"lineNumber":17,"author":{"gitId":"-"},"content":""},{"lineNumber":18,"author":{"gitId":"-"},"content":"    private static final Logger log \u003d Logger.getLogger();"},{"lineNumber":19,"author":{"gitId":"-"},"content":""},{"lineNumber":20,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":21,"author":{"gitId":"-"},"content":"    public JsonResult execute() throws InvalidOperationException {"},{"lineNumber":22,"author":{"gitId":"-"},"content":"        String instructorEmail \u003d getNonNullRequestParamValue(Const.ParamsNames.INSTRUCTOR_EMAIL);"},{"lineNumber":23,"author":{"gitId":"-"},"content":"        String institute \u003d getNonNullRequestParamValue(Const.ParamsNames.INSTRUCTOR_INSTITUTION);"},{"lineNumber":24,"author":{"gitId":"-"},"content":""},{"lineNumber":25,"author":{"gitId":"kevin9foong"},"content":"        AccountRequest accountRequest \u003d sqlLogic.getAccountRequest(instructorEmail, institute);"},{"lineNumber":26,"author":{"gitId":"-"},"content":""},{"lineNumber":27,"author":{"gitId":"-"},"content":"        if (accountRequest \u003d\u003d null) {"},{"lineNumber":28,"author":{"gitId":"-"},"content":"            throw new EntityNotFoundException(\"Account request for instructor with email: \" + instructorEmail"},{"lineNumber":29,"author":{"gitId":"-"},"content":"                    + \" and institute: \" + institute + \" does not exist.\");"},{"lineNumber":30,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":31,"author":{"gitId":"-"},"content":"        if (accountRequest.getRegisteredAt() \u003d\u003d null) {"},{"lineNumber":32,"author":{"gitId":"-"},"content":"            throw new InvalidOperationException(\"Unable to reset account request as instructor is still unregistered.\");"},{"lineNumber":33,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":34,"author":{"gitId":"-"},"content":""},{"lineNumber":35,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":36,"author":{"gitId":"kevin9foong"},"content":"            accountRequest \u003d sqlLogic.resetAccountRequest(instructorEmail, institute);"},{"lineNumber":37,"author":{"gitId":"kevin9foong"},"content":"        } catch (InvalidParametersException | EntityDoesNotExistException ue) {"},{"lineNumber":38,"author":{"gitId":"kevin9foong"},"content":"            // InvalidParametersException and EntityDoesNotExistException should not be thrown as"},{"lineNumber":39,"author":{"gitId":"kevin9foong"},"content":"            // validity of params has been verified when fetching entity."},{"lineNumber":40,"author":{"gitId":"kevin9foong"},"content":"            log.severe(\"Unexpected error\", ue);"},{"lineNumber":41,"author":{"gitId":"kevin9foong"},"content":"            return new JsonResult(ue.getMessage(), HttpStatus.SC_INTERNAL_SERVER_ERROR);"},{"lineNumber":42,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":43,"author":{"gitId":"-"},"content":""},{"lineNumber":44,"author":{"gitId":"-"},"content":"        String joinLink \u003d accountRequest.getRegistrationUrl();"},{"lineNumber":45,"author":{"gitId":"-"},"content":"        EmailWrapper email \u003d emailGenerator.generateNewInstructorAccountJoinEmail("},{"lineNumber":46,"author":{"gitId":"-"},"content":"                accountRequest.getEmail(), accountRequest.getName(), joinLink);"},{"lineNumber":47,"author":{"gitId":"-"},"content":"        emailSender.sendEmail(email);"},{"lineNumber":48,"author":{"gitId":"-"},"content":""},{"lineNumber":49,"author":{"gitId":"-"},"content":"        JoinLinkData output \u003d new JoinLinkData(joinLink);"},{"lineNumber":50,"author":{"gitId":"-"},"content":"        return new JsonResult(output);"},{"lineNumber":51,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":52,"author":{"gitId":"-"},"content":""},{"lineNumber":53,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"-":45,"kevin9foong":8}},{"path":"src/main/java/teammates/ui/webapi/RestoreCourseAction.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.datatransfer.attributes.CourseAttributes;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":6,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.Course;"},{"lineNumber":7,"author":{"gitId":"-"},"content":""},{"lineNumber":8,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":9,"author":{"gitId":"-"},"content":" * Action: Restores a course from Recycle Bin."},{"lineNumber":10,"author":{"gitId":"-"},"content":" */"},{"lineNumber":11,"author":{"gitId":"EuniceSim142"},"content":"public class RestoreCourseAction extends Action {"},{"lineNumber":12,"author":{"gitId":"-"},"content":""},{"lineNumber":13,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":14,"author":{"gitId":"-"},"content":"    AuthType getMinAuthLevel() {"},{"lineNumber":15,"author":{"gitId":"-"},"content":"        return AuthType.LOGGED_IN;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":17,"author":{"gitId":"-"},"content":""},{"lineNumber":18,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":19,"author":{"gitId":"-"},"content":"    void checkSpecificAccessControl() throws UnauthorizedAccessException {"},{"lineNumber":20,"author":{"gitId":"-"},"content":"        if (!userInfo.isInstructor) {"},{"lineNumber":21,"author":{"gitId":"-"},"content":"            throw new UnauthorizedAccessException(\"Instructor privilege is required to access this resource.\");"},{"lineNumber":22,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":23,"author":{"gitId":"-"},"content":"        String idOfCourseToRestore \u003d getNonNullRequestParamValue(Const.ParamsNames.COURSE_ID);"},{"lineNumber":24,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":25,"author":{"gitId":"EuniceSim142"},"content":"        if (!isCourseMigrated(idOfCourseToRestore)) {"},{"lineNumber":26,"author":{"gitId":"EuniceSim142"},"content":"            CourseAttributes courseAttributes \u003d logic.getCourse(idOfCourseToRestore);"},{"lineNumber":27,"author":{"gitId":"-"},"content":"            gateKeeper.verifyAccessible(logic.getInstructorForGoogleId(idOfCourseToRestore, userInfo.id),"},{"lineNumber":28,"author":{"gitId":"EuniceSim142"},"content":"                    courseAttributes,"},{"lineNumber":29,"author":{"gitId":"-"},"content":"                    Const.InstructorPermissions.CAN_MODIFY_COURSE);"},{"lineNumber":30,"author":{"gitId":"EuniceSim142"},"content":"            return;"},{"lineNumber":31,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":32,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":33,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d sqlLogic.getCourse(idOfCourseToRestore);"},{"lineNumber":34,"author":{"gitId":"EuniceSim142"},"content":"        gateKeeper.verifyAccessible(sqlLogic.getInstructorByGoogleId(idOfCourseToRestore, userInfo.id),"},{"lineNumber":35,"author":{"gitId":"EuniceSim142"},"content":"                course, Const.InstructorPermissions.CAN_MODIFY_COURSE);"},{"lineNumber":36,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":37,"author":{"gitId":"-"},"content":""},{"lineNumber":38,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":39,"author":{"gitId":"-"},"content":"    public JsonResult execute() {"},{"lineNumber":40,"author":{"gitId":"-"},"content":""},{"lineNumber":41,"author":{"gitId":"-"},"content":"        String idOfCourseToRestore \u003d getNonNullRequestParamValue(Const.ParamsNames.COURSE_ID);"},{"lineNumber":42,"author":{"gitId":"-"},"content":"        String statusMessage;"},{"lineNumber":43,"author":{"gitId":"-"},"content":""},{"lineNumber":44,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":45,"author":{"gitId":"EuniceSim142"},"content":"            if (isCourseMigrated(idOfCourseToRestore)) {"},{"lineNumber":46,"author":{"gitId":"EuniceSim142"},"content":"                sqlLogic.restoreCourseFromRecycleBin(idOfCourseToRestore);"},{"lineNumber":47,"author":{"gitId":"EuniceSim142"},"content":"            } else {"},{"lineNumber":48,"author":{"gitId":"-"},"content":"                logic.restoreCourseFromRecycleBin(idOfCourseToRestore);"},{"lineNumber":49,"author":{"gitId":"EuniceSim142"},"content":"            }"},{"lineNumber":50,"author":{"gitId":"-"},"content":""},{"lineNumber":51,"author":{"gitId":"-"},"content":"            statusMessage \u003d \"The course \" + idOfCourseToRestore + \" has been restored.\";"},{"lineNumber":52,"author":{"gitId":"-"},"content":"        } catch (EntityDoesNotExistException e) {"},{"lineNumber":53,"author":{"gitId":"-"},"content":"            throw new EntityNotFoundException(e);"},{"lineNumber":54,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":55,"author":{"gitId":"-"},"content":""},{"lineNumber":56,"author":{"gitId":"-"},"content":"        return new JsonResult(statusMessage);"},{"lineNumber":57,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":58,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"EuniceSim142":17,"-":41}},{"path":"src/main/java/teammates/ui/webapi/UpdateCourseAction.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.CourseAttributes;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.InstructorAttributes;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.util.FieldValidator;"},{"lineNumber":9,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.Course;"},{"lineNumber":10,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import teammates.ui.output.CourseData;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import teammates.ui.request.CourseUpdateRequest;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import teammates.ui.request.InvalidHttpRequestBodyException;"},{"lineNumber":14,"author":{"gitId":"-"},"content":""},{"lineNumber":15,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":16,"author":{"gitId":"-"},"content":" * Updates a course."},{"lineNumber":17,"author":{"gitId":"-"},"content":" */"},{"lineNumber":18,"author":{"gitId":"EuniceSim142"},"content":"public class UpdateCourseAction extends Action {"},{"lineNumber":19,"author":{"gitId":"-"},"content":""},{"lineNumber":20,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":21,"author":{"gitId":"-"},"content":"    AuthType getMinAuthLevel() {"},{"lineNumber":22,"author":{"gitId":"-"},"content":"        return AuthType.LOGGED_IN;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":24,"author":{"gitId":"-"},"content":""},{"lineNumber":25,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":26,"author":{"gitId":"-"},"content":"    void checkSpecificAccessControl() throws UnauthorizedAccessException {"},{"lineNumber":27,"author":{"gitId":"-"},"content":"        if (!userInfo.isInstructor) {"},{"lineNumber":28,"author":{"gitId":"-"},"content":"            throw new UnauthorizedAccessException(\"Instructor privilege is required to access this resource.\");"},{"lineNumber":29,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":30,"author":{"gitId":"-"},"content":""},{"lineNumber":31,"author":{"gitId":"-"},"content":"        String courseId \u003d getNonNullRequestParamValue(Const.ParamsNames.COURSE_ID);"},{"lineNumber":32,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":33,"author":{"gitId":"EuniceSim142"},"content":"        if (!isCourseMigrated(courseId)) {"},{"lineNumber":34,"author":{"gitId":"EuniceSim142"},"content":"            InstructorAttributes instructorAttributes \u003d logic.getInstructorForGoogleId(courseId, userInfo.id);"},{"lineNumber":35,"author":{"gitId":"EuniceSim142"},"content":"            CourseAttributes courseAttributes \u003d logic.getCourse(courseId);"},{"lineNumber":36,"author":{"gitId":"EuniceSim142"},"content":"            gateKeeper.verifyAccessible(instructorAttributes, courseAttributes,"},{"lineNumber":37,"author":{"gitId":"EuniceSim142"},"content":"                    Const.InstructorPermissions.CAN_MODIFY_COURSE);"},{"lineNumber":38,"author":{"gitId":"EuniceSim142"},"content":"            return;"},{"lineNumber":39,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":40,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":41,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d sqlLogic.getCourse(courseId);"},{"lineNumber":42,"author":{"gitId":"EuniceSim142"},"content":"        Instructor instructor \u003d sqlLogic.getInstructorByGoogleId(courseId, userInfo.id);"},{"lineNumber":43,"author":{"gitId":"-"},"content":"        gateKeeper.verifyAccessible(instructor, course, Const.InstructorPermissions.CAN_MODIFY_COURSE);"},{"lineNumber":44,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":45,"author":{"gitId":"-"},"content":""},{"lineNumber":46,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":47,"author":{"gitId":"-"},"content":"    public JsonResult execute() throws InvalidHttpRequestBodyException {"},{"lineNumber":48,"author":{"gitId":"-"},"content":"        CourseUpdateRequest courseUpdateRequest \u003d getAndValidateRequestBody(CourseUpdateRequest.class);"},{"lineNumber":49,"author":{"gitId":"-"},"content":"        String courseTimeZone \u003d courseUpdateRequest.getTimeZone();"},{"lineNumber":50,"author":{"gitId":"-"},"content":""},{"lineNumber":51,"author":{"gitId":"-"},"content":"        String timeZoneErrorMessage \u003d FieldValidator.getInvalidityInfoForTimeZone(courseTimeZone);"},{"lineNumber":52,"author":{"gitId":"-"},"content":"        if (!timeZoneErrorMessage.isEmpty()) {"},{"lineNumber":53,"author":{"gitId":"-"},"content":"            throw new InvalidHttpRequestBodyException(timeZoneErrorMessage);"},{"lineNumber":54,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":55,"author":{"gitId":"-"},"content":""},{"lineNumber":56,"author":{"gitId":"-"},"content":"        String courseId \u003d getNonNullRequestParamValue(Const.ParamsNames.COURSE_ID);"},{"lineNumber":57,"author":{"gitId":"-"},"content":"        String courseName \u003d courseUpdateRequest.getCourseName();"},{"lineNumber":58,"author":{"gitId":"-"},"content":""},{"lineNumber":59,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":60,"author":{"gitId":"EuniceSim142"},"content":"            if (!isCourseMigrated(courseId)) {"},{"lineNumber":61,"author":{"gitId":"EuniceSim142"},"content":"                return updateWithDatastore(courseId, courseName, courseTimeZone);"},{"lineNumber":62,"author":{"gitId":"EuniceSim142"},"content":"            }"},{"lineNumber":63,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":64,"author":{"gitId":"EuniceSim142"},"content":"            Course updatedCourse \u003d sqlLogic.updateCourse(courseId, courseName, courseTimeZone);"},{"lineNumber":65,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":66,"author":{"gitId":"EuniceSim142"},"content":"            return new JsonResult(new CourseData(updatedCourse));"},{"lineNumber":67,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":68,"author":{"gitId":"-"},"content":"        } catch (InvalidParametersException ipe) {"},{"lineNumber":69,"author":{"gitId":"-"},"content":"            throw new InvalidHttpRequestBodyException(ipe);"},{"lineNumber":70,"author":{"gitId":"-"},"content":"        } catch (EntityDoesNotExistException edee) {"},{"lineNumber":71,"author":{"gitId":"-"},"content":"            throw new EntityNotFoundException(edee);"},{"lineNumber":72,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":73,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":74,"author":{"gitId":"-"},"content":""},{"lineNumber":75,"author":{"gitId":"EuniceSim142"},"content":"    private JsonResult updateWithDatastore(String courseId, String courseName, String courseTimeZone)"},{"lineNumber":76,"author":{"gitId":"EuniceSim142"},"content":"            throws InvalidParametersException, EntityDoesNotExistException {"},{"lineNumber":77,"author":{"gitId":"EuniceSim142"},"content":"        CourseAttributes updatedCourseAttributes \u003d logic.updateCourseCascade("},{"lineNumber":78,"author":{"gitId":"EuniceSim142"},"content":"                CourseAttributes.updateOptionsBuilder(courseId)"},{"lineNumber":79,"author":{"gitId":"EuniceSim142"},"content":"                    .withName(courseName)"},{"lineNumber":80,"author":{"gitId":"EuniceSim142"},"content":"                    .withTimezone(courseTimeZone)"},{"lineNumber":81,"author":{"gitId":"EuniceSim142"},"content":"                    .build());"},{"lineNumber":82,"author":{"gitId":"EuniceSim142"},"content":"        return new JsonResult(new CourseData(updatedCourseAttributes));"},{"lineNumber":83,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":84,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"EuniceSim142":31,"-":53}},{"path":"src/main/java/teammates/ui/webapi/UpdateNotificationAction.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.time.Instant;"},{"lineNumber":4,"author":{"gitId":"hhdqirui"},"content":"import java.util.UUID;"},{"lineNumber":5,"author":{"gitId":"-"},"content":""},{"lineNumber":6,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":9,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.Notification;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import teammates.ui.output.NotificationData;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import teammates.ui.request.InvalidHttpRequestBodyException;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import teammates.ui.request.NotificationUpdateRequest;"},{"lineNumber":13,"author":{"gitId":"-"},"content":""},{"lineNumber":14,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":15,"author":{"gitId":"-"},"content":" * Action: Updates a new notification banner."},{"lineNumber":16,"author":{"gitId":"-"},"content":" */"},{"lineNumber":17,"author":{"gitId":"-"},"content":"public class UpdateNotificationAction extends AdminOnlyAction {"},{"lineNumber":18,"author":{"gitId":"-"},"content":""},{"lineNumber":19,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":20,"author":{"gitId":"-"},"content":"    public JsonResult execute() throws InvalidHttpRequestBodyException {"},{"lineNumber":21,"author":{"gitId":"hhdqirui"},"content":"        UUID notificationId \u003d getUuidRequestParamValue(Const.ParamsNames.NOTIFICATION_ID);"},{"lineNumber":22,"author":{"gitId":"-"},"content":"        NotificationUpdateRequest notificationRequest \u003d getAndValidateRequestBody(NotificationUpdateRequest.class);"},{"lineNumber":23,"author":{"gitId":"-"},"content":""},{"lineNumber":24,"author":{"gitId":"-"},"content":"        Instant startTime \u003d Instant.ofEpochMilli(notificationRequest.getStartTimestamp());"},{"lineNumber":25,"author":{"gitId":"-"},"content":"        Instant endTime \u003d Instant.ofEpochMilli(notificationRequest.getEndTimestamp());"},{"lineNumber":26,"author":{"gitId":"-"},"content":""},{"lineNumber":27,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":28,"author":{"gitId":"hhdqirui"},"content":"            Notification updateNotification \u003d sqlLogic.updateNotification(notificationId, startTime, endTime,"},{"lineNumber":29,"author":{"gitId":"hhdqirui"},"content":"                    notificationRequest.getStyle(), notificationRequest.getTargetUser(), notificationRequest.getTitle(),"},{"lineNumber":30,"author":{"gitId":"hhdqirui"},"content":"                    notificationRequest.getMessage());"},{"lineNumber":31,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":32,"author":{"gitId":"hhdqirui"},"content":"            return new JsonResult(new NotificationData(updateNotification));"},{"lineNumber":33,"author":{"gitId":"-"},"content":"        } catch (InvalidParametersException e) {"},{"lineNumber":34,"author":{"gitId":"-"},"content":"            throw new InvalidHttpRequestBodyException(e);"},{"lineNumber":35,"author":{"gitId":"-"},"content":"        } catch (EntityDoesNotExistException ednee) {"},{"lineNumber":36,"author":{"gitId":"-"},"content":"            throw new EntityNotFoundException(ednee);"},{"lineNumber":37,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":38,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":39,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"hhdqirui":8,"-":31}},{"path":"src/test/java/teammates/architecture/ArchitectureTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.architecture;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import static com.tngtech.archunit.lang.syntax.ArchRuleDefinition.noClasses;"},{"lineNumber":4,"author":{"gitId":"-"},"content":""},{"lineNumber":5,"author":{"gitId":"-"},"content":"import org.testng.annotations.Test;"},{"lineNumber":6,"author":{"gitId":"-"},"content":""},{"lineNumber":7,"author":{"gitId":"-"},"content":"import com.tngtech.archunit.base.DescribedPredicate;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import com.tngtech.archunit.core.domain.JavaClass;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import com.tngtech.archunit.core.domain.JavaClasses;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import com.tngtech.archunit.core.importer.ClassFileImporter;"},{"lineNumber":11,"author":{"gitId":"-"},"content":""},{"lineNumber":12,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":13,"author":{"gitId":"-"},"content":" * Checks for the system\u0027s architectural integrity."},{"lineNumber":14,"author":{"gitId":"-"},"content":" */"},{"lineNumber":15,"author":{"gitId":"-"},"content":"public class ArchitectureTest {"},{"lineNumber":16,"author":{"gitId":"-"},"content":""},{"lineNumber":17,"author":{"gitId":"-"},"content":"    private static final JavaClasses ALL_CLASSES \u003d forClasses(\"teammates\");"},{"lineNumber":18,"author":{"gitId":"-"},"content":""},{"lineNumber":19,"author":{"gitId":"-"},"content":"    private static final String COMMON_PACKAGE \u003d \"teammates.common\";"},{"lineNumber":20,"author":{"gitId":"-"},"content":""},{"lineNumber":21,"author":{"gitId":"-"},"content":"    private static final String STORAGE_PACKAGE \u003d \"teammates.storage\";"},{"lineNumber":22,"author":{"gitId":"-"},"content":"    private static final String STORAGE_API_PACKAGE \u003d STORAGE_PACKAGE + \".api\";"},{"lineNumber":23,"author":{"gitId":"-"},"content":"    private static final String STORAGE_ENTITY_PACKAGE \u003d STORAGE_PACKAGE + \".entity\";"},{"lineNumber":24,"author":{"gitId":"-"},"content":"    private static final String STORAGE_SQL_ENTITY_PACKAGE \u003d STORAGE_PACKAGE + \".sqlentity\";"},{"lineNumber":25,"author":{"gitId":"-"},"content":"    private static final String STORAGE_SEARCH_PACKAGE \u003d STORAGE_PACKAGE + \".search\";"},{"lineNumber":26,"author":{"gitId":"-"},"content":""},{"lineNumber":27,"author":{"gitId":"-"},"content":"    private static final String LOGIC_PACKAGE \u003d \"teammates.logic\";"},{"lineNumber":28,"author":{"gitId":"-"},"content":""},{"lineNumber":29,"author":{"gitId":"-"},"content":"    private static final String LOGIC_CORE_PACKAGE \u003d LOGIC_PACKAGE + \".core\";"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    private static final String LOGIC_API_PACKAGE \u003d LOGIC_PACKAGE + \".api\";"},{"lineNumber":31,"author":{"gitId":"-"},"content":"    private static final String LOGIC_EXTERNAL_PACKAGE \u003d LOGIC_PACKAGE + \".external\";"},{"lineNumber":32,"author":{"gitId":"-"},"content":""},{"lineNumber":33,"author":{"gitId":"-"},"content":"    private static final String UI_PACKAGE \u003d \"teammates.ui\";"},{"lineNumber":34,"author":{"gitId":"-"},"content":"    private static final String UI_WEBAPI_PACKAGE \u003d UI_PACKAGE + \".webapi\";"},{"lineNumber":35,"author":{"gitId":"-"},"content":"    private static final String UI_SERVLETS_PACKAGE \u003d UI_PACKAGE + \".servlets\";"},{"lineNumber":36,"author":{"gitId":"-"},"content":"    private static final String UI_OUTPUT_PACKAGE \u003d UI_PACKAGE + \".output\";"},{"lineNumber":37,"author":{"gitId":"-"},"content":"    private static final String UI_REQUEST_PACKAGE \u003d UI_PACKAGE + \".request\";"},{"lineNumber":38,"author":{"gitId":"-"},"content":""},{"lineNumber":39,"author":{"gitId":"-"},"content":"    private static final String MAIN_PACKAGE \u003d \"teammates.main\";"},{"lineNumber":40,"author":{"gitId":"-"},"content":""},{"lineNumber":41,"author":{"gitId":"-"},"content":"    private static final String TEST_DRIVER_PACKAGE \u003d \"teammates.test\";"},{"lineNumber":42,"author":{"gitId":"-"},"content":""},{"lineNumber":43,"author":{"gitId":"-"},"content":"    private static final String E2E_PACKAGE \u003d \"teammates.e2e\";"},{"lineNumber":44,"author":{"gitId":"-"},"content":""},{"lineNumber":45,"author":{"gitId":"-"},"content":"    private static final String E2E_CASES_PACKAGE \u003d E2E_PACKAGE + \".cases\";"},{"lineNumber":46,"author":{"gitId":"-"},"content":"    private static final String E2E_PAGEOBJECTS_PACKAGE \u003d E2E_PACKAGE + \".pageobjects\";"},{"lineNumber":47,"author":{"gitId":"-"},"content":"    private static final String E2E_UTIL_PACKAGE \u003d E2E_PACKAGE + \".util\";"},{"lineNumber":48,"author":{"gitId":"-"},"content":""},{"lineNumber":49,"author":{"gitId":"-"},"content":"    private static final String LNP_PACKAGE \u003d \"teammates.lnp\";"},{"lineNumber":50,"author":{"gitId":"-"},"content":""},{"lineNumber":51,"author":{"gitId":"-"},"content":"    private static final String LNP_CASES_PACKAGE \u003d LNP_PACKAGE + \".cases\";"},{"lineNumber":52,"author":{"gitId":"-"},"content":"    private static final String LNP_UTIL_PACKAGE \u003d LNP_PACKAGE + \".util\";"},{"lineNumber":53,"author":{"gitId":"-"},"content":""},{"lineNumber":54,"author":{"gitId":"-"},"content":"    private static final String CLIENT_PACKAGE \u003d \"teammates.client\";"},{"lineNumber":55,"author":{"gitId":"-"},"content":"    private static final String CLIENT_CONNECTOR_PACKAGE \u003d CLIENT_PACKAGE + \".connector\";"},{"lineNumber":56,"author":{"gitId":"-"},"content":"    private static final String CLIENT_SCRIPTS_PACKAGE \u003d CLIENT_PACKAGE + \".scripts\";"},{"lineNumber":57,"author":{"gitId":"-"},"content":"    private static final String CLIENT_UTIL_PACKAGE \u003d CLIENT_PACKAGE + \".util\";"},{"lineNumber":58,"author":{"gitId":"-"},"content":""},{"lineNumber":59,"author":{"gitId":"-"},"content":"    private static final String TEST_FILE_SUFFIX \u003d \"Test\";"},{"lineNumber":60,"author":{"gitId":"-"},"content":""},{"lineNumber":61,"author":{"gitId":"-"},"content":"    private static String includeSubpackages(String pack) {"},{"lineNumber":62,"author":{"gitId":"-"},"content":"        return pack + \"..\";"},{"lineNumber":63,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":64,"author":{"gitId":"-"},"content":""},{"lineNumber":65,"author":{"gitId":"-"},"content":"    private static JavaClasses forClasses(String... packageNames) {"},{"lineNumber":66,"author":{"gitId":"-"},"content":"        return new ClassFileImporter().importPackages(packageNames);"},{"lineNumber":67,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":68,"author":{"gitId":"-"},"content":""},{"lineNumber":69,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":70,"author":{"gitId":"-"},"content":"    public void testArchitecture_uiShouldNotTouchStorage() {"},{"lineNumber":71,"author":{"gitId":"-"},"content":"        noClasses().that().resideInAPackage(includeSubpackages(UI_PACKAGE))"},{"lineNumber":72,"author":{"gitId":"-"},"content":"                .should().accessClassesThat(new DescribedPredicate\u003c\u003e(\"\") {"},{"lineNumber":73,"author":{"gitId":"-"},"content":"                    @Override"},{"lineNumber":74,"author":{"gitId":"-"},"content":"                    public boolean apply(JavaClass input) {"},{"lineNumber":75,"author":{"gitId":"-"},"content":"                        return input.getPackageName().startsWith(STORAGE_PACKAGE)"},{"lineNumber":76,"author":{"gitId":"hhdqirui"},"content":"                                \u0026\u0026 !input.getPackageName().startsWith(STORAGE_SQL_ENTITY_PACKAGE);"},{"lineNumber":77,"author":{"gitId":"-"},"content":"                    }"},{"lineNumber":78,"author":{"gitId":"-"},"content":"                })"},{"lineNumber":79,"author":{"gitId":"-"},"content":"                .check(forClasses(UI_PACKAGE));"},{"lineNumber":80,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":81,"author":{"gitId":"-"},"content":""},{"lineNumber":82,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":83,"author":{"gitId":"-"},"content":"    public void testArchitecture_mainShouldNotTouchProductionCodeExceptCommon() {"},{"lineNumber":84,"author":{"gitId":"-"},"content":"        noClasses().that().resideInAPackage(MAIN_PACKAGE)"},{"lineNumber":85,"author":{"gitId":"-"},"content":"                .should().accessClassesThat().resideInAPackage(includeSubpackages(STORAGE_PACKAGE))"},{"lineNumber":86,"author":{"gitId":"-"},"content":"                .orShould().accessClassesThat().resideInAPackage(includeSubpackages(LOGIC_PACKAGE))"},{"lineNumber":87,"author":{"gitId":"-"},"content":"                .orShould().accessClassesThat(new DescribedPredicate\u003c\u003e(\"\") {"},{"lineNumber":88,"author":{"gitId":"-"},"content":"                    @Override"},{"lineNumber":89,"author":{"gitId":"-"},"content":"                    public boolean apply(JavaClass input) {"},{"lineNumber":90,"author":{"gitId":"-"},"content":"                        return input.getPackageName().startsWith(UI_PACKAGE)"},{"lineNumber":91,"author":{"gitId":"-"},"content":"                                \u0026\u0026 !input.getSimpleName().endsWith(\"Servlet\");"},{"lineNumber":92,"author":{"gitId":"-"},"content":"                    }"},{"lineNumber":93,"author":{"gitId":"-"},"content":"                }).check(forClasses(MAIN_PACKAGE));"},{"lineNumber":94,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":95,"author":{"gitId":"-"},"content":""},{"lineNumber":96,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":97,"author":{"gitId":"-"},"content":"    public void testArchitecture_logicShouldNotTouchUi() {"},{"lineNumber":98,"author":{"gitId":"-"},"content":"        noClasses().that().resideInAPackage(includeSubpackages(LOGIC_PACKAGE))"},{"lineNumber":99,"author":{"gitId":"-"},"content":"                .and().doNotHaveSimpleName(\"TaskQueuer\")"},{"lineNumber":100,"author":{"gitId":"-"},"content":"                .should().accessClassesThat().resideInAPackage(includeSubpackages(UI_PACKAGE))"},{"lineNumber":101,"author":{"gitId":"-"},"content":"                .check(forClasses(LOGIC_PACKAGE, UI_PACKAGE));"},{"lineNumber":102,"author":{"gitId":"-"},"content":""},{"lineNumber":103,"author":{"gitId":"-"},"content":"        noClasses().that().resideInAPackage(includeSubpackages(LOGIC_PACKAGE))"},{"lineNumber":104,"author":{"gitId":"-"},"content":"                .and().haveSimpleName(\"TaskQueuer\")"},{"lineNumber":105,"author":{"gitId":"-"},"content":"                .should().accessClassesThat().resideInAPackage(includeSubpackages(UI_WEBAPI_PACKAGE))"},{"lineNumber":106,"author":{"gitId":"-"},"content":"                .orShould().accessClassesThat().resideInAPackage(includeSubpackages(UI_OUTPUT_PACKAGE))"},{"lineNumber":107,"author":{"gitId":"-"},"content":"                .check(forClasses(LOGIC_PACKAGE, UI_PACKAGE));"},{"lineNumber":108,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":109,"author":{"gitId":"-"},"content":""},{"lineNumber":110,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":111,"author":{"gitId":"-"},"content":"    public void testArchitecture_storageShouldNotTouchLogic() {"},{"lineNumber":112,"author":{"gitId":"-"},"content":"        noClasses().that().resideInAPackage(includeSubpackages(STORAGE_PACKAGE))"},{"lineNumber":113,"author":{"gitId":"-"},"content":"                .should().accessClassesThat().resideInAPackage(includeSubpackages(LOGIC_PACKAGE))"},{"lineNumber":114,"author":{"gitId":"-"},"content":"                .check(forClasses(STORAGE_PACKAGE, LOGIC_PACKAGE));"},{"lineNumber":115,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":116,"author":{"gitId":"-"},"content":""},{"lineNumber":117,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":118,"author":{"gitId":"-"},"content":"    public void testArchitecture_storageShouldNotTouchUi() {"},{"lineNumber":119,"author":{"gitId":"-"},"content":"        noClasses().that().resideInAPackage(includeSubpackages(STORAGE_PACKAGE))"},{"lineNumber":120,"author":{"gitId":"-"},"content":"                .should().accessClassesThat().resideInAPackage(includeSubpackages(UI_PACKAGE))"},{"lineNumber":121,"author":{"gitId":"-"},"content":"                .check(forClasses(STORAGE_PACKAGE, UI_PACKAGE));"},{"lineNumber":122,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":123,"author":{"gitId":"-"},"content":""},{"lineNumber":124,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":125,"author":{"gitId":"-"},"content":"    public void testArchitecture_commonShouldNotTouchLogic() {"},{"lineNumber":126,"author":{"gitId":"-"},"content":"        noClasses().that().resideInAPackage(includeSubpackages(COMMON_PACKAGE))"},{"lineNumber":127,"author":{"gitId":"-"},"content":"                .should().accessClassesThat().resideInAPackage(includeSubpackages(LOGIC_PACKAGE))"},{"lineNumber":128,"author":{"gitId":"-"},"content":"                .check(forClasses(COMMON_PACKAGE, LOGIC_PACKAGE));"},{"lineNumber":129,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":130,"author":{"gitId":"-"},"content":""},{"lineNumber":131,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":132,"author":{"gitId":"-"},"content":"    public void testArchitecture_commonShouldNotTouchStorage() {"},{"lineNumber":133,"author":{"gitId":"-"},"content":"        noClasses().that().resideInAPackage(includeSubpackages(COMMON_PACKAGE))"},{"lineNumber":134,"author":{"gitId":"-"},"content":"                .should().accessClassesThat().resideInAPackage(includeSubpackages(STORAGE_API_PACKAGE))"},{"lineNumber":135,"author":{"gitId":"-"},"content":"                .orShould().accessClassesThat().resideInAPackage(includeSubpackages(STORAGE_SEARCH_PACKAGE))"},{"lineNumber":136,"author":{"gitId":"-"},"content":"                .check(forClasses(COMMON_PACKAGE, STORAGE_PACKAGE));"},{"lineNumber":137,"author":{"gitId":"-"},"content":""},{"lineNumber":138,"author":{"gitId":"-"},"content":"        noClasses().that().resideInAPackage(includeSubpackages(COMMON_PACKAGE))"},{"lineNumber":139,"author":{"gitId":"-"},"content":"                .and().resideOutsideOfPackage(includeSubpackages(COMMON_PACKAGE + \".datatransfer.attributes\"))"},{"lineNumber":140,"author":{"gitId":"-"},"content":"                .should().accessClassesThat().resideInAPackage(includeSubpackages(STORAGE_ENTITY_PACKAGE))"},{"lineNumber":141,"author":{"gitId":"-"},"content":"                .check(forClasses(COMMON_PACKAGE, STORAGE_PACKAGE));"},{"lineNumber":142,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":143,"author":{"gitId":"-"},"content":""},{"lineNumber":144,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":145,"author":{"gitId":"-"},"content":"    public void testArchitecture_commonShouldNotTouchUi() {"},{"lineNumber":146,"author":{"gitId":"-"},"content":"        noClasses().that().resideInAPackage(includeSubpackages(COMMON_PACKAGE))"},{"lineNumber":147,"author":{"gitId":"-"},"content":"                .should().accessClassesThat().resideInAPackage(includeSubpackages(UI_PACKAGE))"},{"lineNumber":148,"author":{"gitId":"-"},"content":"                .check(forClasses(COMMON_PACKAGE, UI_PACKAGE));"},{"lineNumber":149,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":150,"author":{"gitId":"-"},"content":""},{"lineNumber":151,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":152,"author":{"gitId":"-"},"content":"    public void testArchitecture_uiShouldNotTouchLogicExceptForApi() {"},{"lineNumber":153,"author":{"gitId":"-"},"content":"        noClasses().that().resideInAPackage(includeSubpackages(UI_PACKAGE))"},{"lineNumber":154,"author":{"gitId":"-"},"content":"                .and().resideOutsideOfPackage(includeSubpackages(UI_WEBAPI_PACKAGE))"},{"lineNumber":155,"author":{"gitId":"-"},"content":"                .should().accessClassesThat().resideInAPackage(includeSubpackages(LOGIC_API_PACKAGE))"},{"lineNumber":156,"author":{"gitId":"-"},"content":"                .check(forClasses(UI_PACKAGE, LOGIC_PACKAGE));"},{"lineNumber":157,"author":{"gitId":"-"},"content":""},{"lineNumber":158,"author":{"gitId":"-"},"content":"        noClasses().that().resideInAPackage(includeSubpackages(UI_PACKAGE))"},{"lineNumber":159,"author":{"gitId":"-"},"content":"                .should().accessClassesThat().resideInAPackage(includeSubpackages(LOGIC_CORE_PACKAGE))"},{"lineNumber":160,"author":{"gitId":"-"},"content":"                .check(forClasses(UI_PACKAGE, LOGIC_PACKAGE));"},{"lineNumber":161,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":162,"author":{"gitId":"-"},"content":""},{"lineNumber":163,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":164,"author":{"gitId":"-"},"content":"    public void testArchitecture_ui_onlyWebApiCanTouchOutput() {"},{"lineNumber":165,"author":{"gitId":"-"},"content":"        noClasses().that().resideInAPackage(includeSubpackages(UI_PACKAGE))"},{"lineNumber":166,"author":{"gitId":"-"},"content":"                .and().resideOutsideOfPackage(includeSubpackages(UI_WEBAPI_PACKAGE))"},{"lineNumber":167,"author":{"gitId":"-"},"content":"                .and().resideOutsideOfPackage(includeSubpackages(UI_REQUEST_PACKAGE))"},{"lineNumber":168,"author":{"gitId":"-"},"content":"                .and().resideOutsideOfPackage(includeSubpackages(UI_OUTPUT_PACKAGE))"},{"lineNumber":169,"author":{"gitId":"-"},"content":"                .should().accessClassesThat().resideInAPackage(includeSubpackages(UI_OUTPUT_PACKAGE))"},{"lineNumber":170,"author":{"gitId":"-"},"content":"                .check(forClasses(UI_PACKAGE));"},{"lineNumber":171,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":172,"author":{"gitId":"-"},"content":""},{"lineNumber":173,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":174,"author":{"gitId":"-"},"content":"    public void testArchitecture_ui_onlyWebApiCanTouchRequest() {"},{"lineNumber":175,"author":{"gitId":"-"},"content":"        noClasses().that().resideInAPackage(includeSubpackages(UI_PACKAGE))"},{"lineNumber":176,"author":{"gitId":"-"},"content":"                .and().resideOutsideOfPackage(includeSubpackages(UI_WEBAPI_PACKAGE))"},{"lineNumber":177,"author":{"gitId":"-"},"content":"                .and().resideOutsideOfPackage(includeSubpackages(UI_REQUEST_PACKAGE))"},{"lineNumber":178,"author":{"gitId":"-"},"content":"                .should().accessClassesThat().resideInAPackage(includeSubpackages(UI_REQUEST_PACKAGE))"},{"lineNumber":179,"author":{"gitId":"-"},"content":"                .check(forClasses(UI_PACKAGE));"},{"lineNumber":180,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":181,"author":{"gitId":"-"},"content":""},{"lineNumber":182,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":183,"author":{"gitId":"-"},"content":"    public void testArchitecture_ui_apiRequestCanOnlyTouchRequestAndOutput() {"},{"lineNumber":184,"author":{"gitId":"-"},"content":"        noClasses().that().resideInAPackage(includeSubpackages(UI_REQUEST_PACKAGE))"},{"lineNumber":185,"author":{"gitId":"-"},"content":"                .should().accessClassesThat().resideInAPackage(includeSubpackages(UI_WEBAPI_PACKAGE))"},{"lineNumber":186,"author":{"gitId":"-"},"content":"                .check(forClasses(UI_PACKAGE));"},{"lineNumber":187,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":188,"author":{"gitId":"-"},"content":""},{"lineNumber":189,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":190,"author":{"gitId":"-"},"content":"    public void testArchitecture_ui_apiOutputCanOnlyTouchOutput() {"},{"lineNumber":191,"author":{"gitId":"-"},"content":"        noClasses().that().resideInAPackage(includeSubpackages(UI_OUTPUT_PACKAGE))"},{"lineNumber":192,"author":{"gitId":"-"},"content":"                .should().accessClassesThat().resideInAPackage(includeSubpackages(UI_WEBAPI_PACKAGE))"},{"lineNumber":193,"author":{"gitId":"-"},"content":"                .orShould().accessClassesThat().resideInAPackage(includeSubpackages(UI_REQUEST_PACKAGE))"},{"lineNumber":194,"author":{"gitId":"-"},"content":"                .check(forClasses(UI_PACKAGE));"},{"lineNumber":195,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":196,"author":{"gitId":"-"},"content":""},{"lineNumber":197,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":198,"author":{"gitId":"-"},"content":"    public void testArchitecture_ui_controllerShouldBeSelfContained() {"},{"lineNumber":199,"author":{"gitId":"-"},"content":"        noClasses().that().resideInAPackage(includeSubpackages(UI_PACKAGE))"},{"lineNumber":200,"author":{"gitId":"-"},"content":"                .and().resideOutsideOfPackage(includeSubpackages(UI_WEBAPI_PACKAGE))"},{"lineNumber":201,"author":{"gitId":"-"},"content":"                .and().resideOutsideOfPackage(includeSubpackages(UI_SERVLETS_PACKAGE))"},{"lineNumber":202,"author":{"gitId":"-"},"content":"                .should().accessClassesThat().resideInAPackage(includeSubpackages(UI_WEBAPI_PACKAGE))"},{"lineNumber":203,"author":{"gitId":"-"},"content":"                .check(forClasses(UI_PACKAGE));"},{"lineNumber":204,"author":{"gitId":"-"},"content":""},{"lineNumber":205,"author":{"gitId":"-"},"content":"        noClasses().that().resideInAPackage(includeSubpackages(UI_PACKAGE))"},{"lineNumber":206,"author":{"gitId":"-"},"content":"                .and().resideOutsideOfPackage(includeSubpackages(UI_SERVLETS_PACKAGE))"},{"lineNumber":207,"author":{"gitId":"-"},"content":"                .should().accessClassesThat().resideInAPackage(includeSubpackages(UI_SERVLETS_PACKAGE))"},{"lineNumber":208,"author":{"gitId":"-"},"content":"                .check(forClasses(UI_PACKAGE));"},{"lineNumber":209,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":210,"author":{"gitId":"-"},"content":""},{"lineNumber":211,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":212,"author":{"gitId":"-"},"content":"    public void testArchitecture_logic_logicCanOnlyAccessStorageApi() {"},{"lineNumber":213,"author":{"gitId":"-"},"content":"        noClasses().that().resideInAPackage(includeSubpackages(LOGIC_PACKAGE))"},{"lineNumber":214,"author":{"gitId":"-"},"content":"                .and().resideOutsideOfPackage(includeSubpackages(LOGIC_CORE_PACKAGE))"},{"lineNumber":215,"author":{"gitId":"-"},"content":"                .should().accessClassesThat().resideInAPackage(includeSubpackages(STORAGE_PACKAGE))"},{"lineNumber":216,"author":{"gitId":"-"},"content":"                .check(forClasses(LOGIC_PACKAGE, STORAGE_PACKAGE));"},{"lineNumber":217,"author":{"gitId":"-"},"content":""},{"lineNumber":218,"author":{"gitId":"-"},"content":"        noClasses().that().resideInAPackage(includeSubpackages(LOGIC_CORE_PACKAGE))"},{"lineNumber":219,"author":{"gitId":"-"},"content":"                .should().accessClassesThat().resideInAPackage(includeSubpackages(STORAGE_ENTITY_PACKAGE))"},{"lineNumber":220,"author":{"gitId":"-"},"content":"                .orShould().accessClassesThat().resideInAPackage(includeSubpackages(STORAGE_SEARCH_PACKAGE))"},{"lineNumber":221,"author":{"gitId":"-"},"content":"                .check(forClasses(LOGIC_PACKAGE, STORAGE_PACKAGE));"},{"lineNumber":222,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":223,"author":{"gitId":"-"},"content":""},{"lineNumber":224,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":225,"author":{"gitId":"-"},"content":"    public void testArchitecture_logic_coreLogicCanOnlyAccessItsCorrespondingDb() {"},{"lineNumber":226,"author":{"gitId":"-"},"content":"        for (JavaClass coreLogicClass : forClasses(LOGIC_CORE_PACKAGE)) {"},{"lineNumber":227,"author":{"gitId":"-"},"content":"            String logicClassName \u003d coreLogicClass.getSimpleName();"},{"lineNumber":228,"author":{"gitId":"-"},"content":"            if (\"DataBundleLogic\".equals(logicClassName)) {"},{"lineNumber":229,"author":{"gitId":"-"},"content":"                continue;"},{"lineNumber":230,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":231,"author":{"gitId":"-"},"content":"            if (logicClassName.endsWith(TEST_FILE_SUFFIX)) {"},{"lineNumber":232,"author":{"gitId":"-"},"content":"                continue;"},{"lineNumber":233,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":234,"author":{"gitId":"-"},"content":"            String dbClassName \u003d logicClassName.replace(\"Logic\", \"Db\");"},{"lineNumber":235,"author":{"gitId":"-"},"content":""},{"lineNumber":236,"author":{"gitId":"-"},"content":"            noClasses()"},{"lineNumber":237,"author":{"gitId":"-"},"content":"                    .that().resideInAPackage(includeSubpackages(LOGIC_CORE_PACKAGE))"},{"lineNumber":238,"author":{"gitId":"-"},"content":"                    .and().doNotHaveSimpleName(logicClassName)"},{"lineNumber":239,"author":{"gitId":"-"},"content":"                    .and().doNotHaveSimpleName(logicClassName + TEST_FILE_SUFFIX)"},{"lineNumber":240,"author":{"gitId":"-"},"content":"                    .and().doNotHaveSimpleName(\"DataBundleLogic\")"},{"lineNumber":241,"author":{"gitId":"-"},"content":"                    .should()"},{"lineNumber":242,"author":{"gitId":"-"},"content":"                    .accessClassesThat(new DescribedPredicate\u003c\u003e(\"\") {"},{"lineNumber":243,"author":{"gitId":"-"},"content":"                        @Override"},{"lineNumber":244,"author":{"gitId":"-"},"content":"                        public boolean apply(JavaClass input) {"},{"lineNumber":245,"author":{"gitId":"-"},"content":"                            return input.getPackageName().startsWith(STORAGE_API_PACKAGE)"},{"lineNumber":246,"author":{"gitId":"-"},"content":"                                    \u0026\u0026 input.getSimpleName().equals(dbClassName);"},{"lineNumber":247,"author":{"gitId":"-"},"content":"                        }"},{"lineNumber":248,"author":{"gitId":"-"},"content":"                    })"},{"lineNumber":249,"author":{"gitId":"-"},"content":"                    .check(forClasses(LOGIC_CORE_PACKAGE, STORAGE_API_PACKAGE));"},{"lineNumber":250,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":251,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":252,"author":{"gitId":"-"},"content":""},{"lineNumber":253,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":254,"author":{"gitId":"-"},"content":"    public void testArchitecture_logic_coreLogicShouldNotTouchApiLogic() {"},{"lineNumber":255,"author":{"gitId":"-"},"content":"        noClasses().that().resideInAPackage(includeSubpackages(LOGIC_CORE_PACKAGE))"},{"lineNumber":256,"author":{"gitId":"-"},"content":"                .should().accessClassesThat().resideInAPackage(includeSubpackages(LOGIC_API_PACKAGE))"},{"lineNumber":257,"author":{"gitId":"-"},"content":"                .check(forClasses(LOGIC_PACKAGE));"},{"lineNumber":258,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":259,"author":{"gitId":"-"},"content":""},{"lineNumber":260,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":261,"author":{"gitId":"-"},"content":"    public void testArchitecture_logic_coreLogicShouldNotTouchExternalLogic() {"},{"lineNumber":262,"author":{"gitId":"-"},"content":"        noClasses().that().resideInAPackage(includeSubpackages(LOGIC_CORE_PACKAGE))"},{"lineNumber":263,"author":{"gitId":"-"},"content":"                .should().accessClassesThat().resideInAPackage(includeSubpackages(LOGIC_EXTERNAL_PACKAGE))"},{"lineNumber":264,"author":{"gitId":"-"},"content":"                .check(forClasses(LOGIC_PACKAGE));"},{"lineNumber":265,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":266,"author":{"gitId":"-"},"content":""},{"lineNumber":267,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":268,"author":{"gitId":"-"},"content":"    public void testArchitecture_logic_externalLogicShouldNotTouchCoreLogic() {"},{"lineNumber":269,"author":{"gitId":"-"},"content":"        noClasses().that().resideInAPackage(includeSubpackages(LOGIC_EXTERNAL_PACKAGE))"},{"lineNumber":270,"author":{"gitId":"-"},"content":"                .should().accessClassesThat().resideInAPackage(includeSubpackages(LOGIC_CORE_PACKAGE))"},{"lineNumber":271,"author":{"gitId":"-"},"content":"                .check(forClasses(LOGIC_PACKAGE));"},{"lineNumber":272,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":273,"author":{"gitId":"-"},"content":""},{"lineNumber":274,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":275,"author":{"gitId":"-"},"content":"    public void testArchitecture_storage_storageSearchShouldNotTouchStorageEntity() {"},{"lineNumber":276,"author":{"gitId":"-"},"content":"        noClasses().that().resideInAPackage(includeSubpackages(STORAGE_SEARCH_PACKAGE))"},{"lineNumber":277,"author":{"gitId":"-"},"content":"                .should().accessClassesThat().resideInAPackage(includeSubpackages(STORAGE_ENTITY_PACKAGE))"},{"lineNumber":278,"author":{"gitId":"-"},"content":"                .check(forClasses(STORAGE_PACKAGE));"},{"lineNumber":279,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":280,"author":{"gitId":"-"},"content":""},{"lineNumber":281,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":282,"author":{"gitId":"-"},"content":"    public void testArchitecture_storage_storageEntityShouldNotTouchOtherStoragePackages() {"},{"lineNumber":283,"author":{"gitId":"-"},"content":"        noClasses().that().resideInAPackage(includeSubpackages(STORAGE_ENTITY_PACKAGE))"},{"lineNumber":284,"author":{"gitId":"-"},"content":"                .should().accessClassesThat(new DescribedPredicate\u003c\u003e(\"\") {"},{"lineNumber":285,"author":{"gitId":"-"},"content":"                    @Override"},{"lineNumber":286,"author":{"gitId":"-"},"content":"                    public boolean apply(JavaClass input) {"},{"lineNumber":287,"author":{"gitId":"-"},"content":"                        return input.getPackageName().startsWith(STORAGE_PACKAGE)"},{"lineNumber":288,"author":{"gitId":"-"},"content":"                                \u0026\u0026 !STORAGE_ENTITY_PACKAGE.equals(input.getPackageName());"},{"lineNumber":289,"author":{"gitId":"-"},"content":"                    }"},{"lineNumber":290,"author":{"gitId":"-"},"content":"                }).check(forClasses(STORAGE_PACKAGE));"},{"lineNumber":291,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":292,"author":{"gitId":"-"},"content":""},{"lineNumber":293,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":294,"author":{"gitId":"-"},"content":"    public void testArchitecture_testClasses_testCasesShouldBeIndependent() {"},{"lineNumber":295,"author":{"gitId":"-"},"content":"        noClasses().that().haveSimpleNameEndingWith(TEST_FILE_SUFFIX)"},{"lineNumber":296,"author":{"gitId":"-"},"content":"                .should().accessClassesThat(new DescribedPredicate\u003c\u003e(\"\") {"},{"lineNumber":297,"author":{"gitId":"-"},"content":"                    @Override"},{"lineNumber":298,"author":{"gitId":"-"},"content":"                    public boolean apply(JavaClass input) {"},{"lineNumber":299,"author":{"gitId":"-"},"content":"                        return input.getSimpleName().endsWith(TEST_FILE_SUFFIX)"},{"lineNumber":300,"author":{"gitId":"-"},"content":"                                \u0026\u0026 !input.getSimpleName().startsWith(\"Base\");"},{"lineNumber":301,"author":{"gitId":"-"},"content":"                    }"},{"lineNumber":302,"author":{"gitId":"-"},"content":"                }).check(ALL_CLASSES);"},{"lineNumber":303,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":304,"author":{"gitId":"-"},"content":""},{"lineNumber":305,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":306,"author":{"gitId":"-"},"content":"    public void testArchitecture_testClasses_driverShouldNotHaveAnyDependency() {"},{"lineNumber":307,"author":{"gitId":"-"},"content":"        noClasses().that().resideInAPackage(includeSubpackages(TEST_DRIVER_PACKAGE))"},{"lineNumber":308,"author":{"gitId":"-"},"content":"                .should().accessClassesThat().haveSimpleNameEndingWith(TEST_FILE_SUFFIX)"},{"lineNumber":309,"author":{"gitId":"-"},"content":"                .check(forClasses(TEST_DRIVER_PACKAGE));"},{"lineNumber":310,"author":{"gitId":"-"},"content":""},{"lineNumber":311,"author":{"gitId":"-"},"content":"        noClasses().that().resideInAPackage(includeSubpackages(TEST_DRIVER_PACKAGE))"},{"lineNumber":312,"author":{"gitId":"-"},"content":"                .should().accessClassesThat(new DescribedPredicate\u003c\u003e(\"\") {"},{"lineNumber":313,"author":{"gitId":"-"},"content":"                    @Override"},{"lineNumber":314,"author":{"gitId":"-"},"content":"                    public boolean apply(JavaClass input) {"},{"lineNumber":315,"author":{"gitId":"-"},"content":"                        return input.getPackageName().startsWith(LOGIC_CORE_PACKAGE)"},{"lineNumber":316,"author":{"gitId":"-"},"content":"                                \u0026\u0026 !\"LogicStarter\".equals(input.getSimpleName());"},{"lineNumber":317,"author":{"gitId":"-"},"content":"                    }"},{"lineNumber":318,"author":{"gitId":"-"},"content":"                })"},{"lineNumber":319,"author":{"gitId":"-"},"content":"                .orShould().accessClassesThat(new DescribedPredicate\u003c\u003e(\"\") {"},{"lineNumber":320,"author":{"gitId":"-"},"content":"                    @Override"},{"lineNumber":321,"author":{"gitId":"-"},"content":"                    public boolean apply(JavaClass input) {"},{"lineNumber":322,"author":{"gitId":"-"},"content":"                        return input.getPackageName().startsWith(UI_WEBAPI_PACKAGE)"},{"lineNumber":323,"author":{"gitId":"-"},"content":"                                \u0026\u0026 !\"Action\".equals(input.getSimpleName())"},{"lineNumber":324,"author":{"gitId":"-"},"content":"                                \u0026\u0026 !\"ActionFactory\".equals(input.getSimpleName());"},{"lineNumber":325,"author":{"gitId":"-"},"content":"                    }"},{"lineNumber":326,"author":{"gitId":"-"},"content":"                })"},{"lineNumber":327,"author":{"gitId":"-"},"content":"                .check(forClasses(TEST_DRIVER_PACKAGE));"},{"lineNumber":328,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":329,"author":{"gitId":"-"},"content":""},{"lineNumber":330,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":331,"author":{"gitId":"-"},"content":"    public void testArchitecture_e2e_e2eShouldBeSelfContained() {"},{"lineNumber":332,"author":{"gitId":"-"},"content":"        noClasses().that().resideOutsideOfPackage(includeSubpackages(E2E_PACKAGE))"},{"lineNumber":333,"author":{"gitId":"-"},"content":"                .should().accessClassesThat().resideInAPackage(includeSubpackages(E2E_PACKAGE))"},{"lineNumber":334,"author":{"gitId":"-"},"content":"                .check(ALL_CLASSES);"},{"lineNumber":335,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":336,"author":{"gitId":"-"},"content":""},{"lineNumber":337,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":338,"author":{"gitId":"-"},"content":"    public void testArchitecture_e2e_e2eShouldNotTouchProductionCodeExceptCommon() {"},{"lineNumber":339,"author":{"gitId":"-"},"content":"        noClasses().that().resideInAPackage(includeSubpackages(E2E_PACKAGE))"},{"lineNumber":340,"author":{"gitId":"-"},"content":"                .should().accessClassesThat().resideInAPackage(includeSubpackages(STORAGE_PACKAGE))"},{"lineNumber":341,"author":{"gitId":"-"},"content":"                .orShould().accessClassesThat().resideInAPackage(includeSubpackages(LOGIC_PACKAGE))"},{"lineNumber":342,"author":{"gitId":"-"},"content":"                .orShould().accessClassesThat().resideInAPackage(includeSubpackages(UI_PACKAGE))"},{"lineNumber":343,"author":{"gitId":"-"},"content":"                .check(forClasses(E2E_PACKAGE));"},{"lineNumber":344,"author":{"gitId":"-"},"content":""},{"lineNumber":345,"author":{"gitId":"-"},"content":"        noClasses().that().resideInAPackage(includeSubpackages(E2E_PACKAGE))"},{"lineNumber":346,"author":{"gitId":"-"},"content":"                .should().accessClassesThat().haveSimpleName(\"Config\")"},{"lineNumber":347,"author":{"gitId":"-"},"content":"                .check(forClasses(E2E_PACKAGE));"},{"lineNumber":348,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":349,"author":{"gitId":"-"},"content":""},{"lineNumber":350,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":351,"author":{"gitId":"-"},"content":"    public void testArchitecture_e2e_e2eTestCasesShouldBeIndependentOfEachOther() {"},{"lineNumber":352,"author":{"gitId":"-"},"content":"        noClasses().that(new DescribedPredicate\u003c\u003e(\"\") {"},{"lineNumber":353,"author":{"gitId":"-"},"content":"            @Override"},{"lineNumber":354,"author":{"gitId":"-"},"content":"            public boolean apply(JavaClass input) {"},{"lineNumber":355,"author":{"gitId":"-"},"content":"                return input.getPackageName().startsWith(E2E_CASES_PACKAGE) \u0026\u0026 !input.isInnerClass();"},{"lineNumber":356,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":357,"author":{"gitId":"-"},"content":"        }).should().accessClassesThat(new DescribedPredicate\u003c\u003e(\"\") {"},{"lineNumber":358,"author":{"gitId":"-"},"content":"            @Override"},{"lineNumber":359,"author":{"gitId":"-"},"content":"            public boolean apply(JavaClass input) {"},{"lineNumber":360,"author":{"gitId":"-"},"content":"                return input.getPackageName().startsWith(E2E_CASES_PACKAGE)"},{"lineNumber":361,"author":{"gitId":"-"},"content":"                        \u0026\u0026 !input.getSimpleName().startsWith(\"Base\")"},{"lineNumber":362,"author":{"gitId":"-"},"content":"                        \u0026\u0026 !input.isInnerClass();"},{"lineNumber":363,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":364,"author":{"gitId":"-"},"content":"        }).check(forClasses(E2E_CASES_PACKAGE));"},{"lineNumber":365,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":366,"author":{"gitId":"-"},"content":""},{"lineNumber":367,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":368,"author":{"gitId":"-"},"content":"    public void testArchitecture_e2e_onlyE2ETestsCanAccessPageObjects() {"},{"lineNumber":369,"author":{"gitId":"-"},"content":"        noClasses().that().resideInAPackage(includeSubpackages(E2E_PACKAGE))"},{"lineNumber":370,"author":{"gitId":"-"},"content":"                .and().resideOutsideOfPackage(includeSubpackages(E2E_PAGEOBJECTS_PACKAGE))"},{"lineNumber":371,"author":{"gitId":"-"},"content":"                .and().resideOutsideOfPackage(includeSubpackages(E2E_CASES_PACKAGE))"},{"lineNumber":372,"author":{"gitId":"-"},"content":"                .should().accessClassesThat().resideInAPackage(includeSubpackages(E2E_PAGEOBJECTS_PACKAGE))"},{"lineNumber":373,"author":{"gitId":"-"},"content":"                .check(forClasses(E2E_PACKAGE));"},{"lineNumber":374,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":375,"author":{"gitId":"-"},"content":""},{"lineNumber":376,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":377,"author":{"gitId":"-"},"content":"    public void testArchitecture_e2e_utilShouldNotHaveAnyDependency() {"},{"lineNumber":378,"author":{"gitId":"-"},"content":"        noClasses().that().resideInAPackage(includeSubpackages(E2E_UTIL_PACKAGE))"},{"lineNumber":379,"author":{"gitId":"-"},"content":"                .should().accessClassesThat(new DescribedPredicate\u003c\u003e(\"\") {"},{"lineNumber":380,"author":{"gitId":"-"},"content":"                    @Override"},{"lineNumber":381,"author":{"gitId":"-"},"content":"                    public boolean apply(JavaClass input) {"},{"lineNumber":382,"author":{"gitId":"-"},"content":"                        return input.getPackageName().startsWith(E2E_PACKAGE)"},{"lineNumber":383,"author":{"gitId":"-"},"content":"                                \u0026\u0026 !E2E_UTIL_PACKAGE.equals(input.getPackageName());"},{"lineNumber":384,"author":{"gitId":"-"},"content":"                    }"},{"lineNumber":385,"author":{"gitId":"-"},"content":"                }).check(forClasses(E2E_PACKAGE));"},{"lineNumber":386,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":387,"author":{"gitId":"-"},"content":""},{"lineNumber":388,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":389,"author":{"gitId":"-"},"content":"    public void testArchitecture_lnp_lnpShouldBeSelfContained() {"},{"lineNumber":390,"author":{"gitId":"-"},"content":"        noClasses().that().resideOutsideOfPackage(includeSubpackages(LNP_PACKAGE))"},{"lineNumber":391,"author":{"gitId":"-"},"content":"                .should().accessClassesThat().resideInAPackage(includeSubpackages(LNP_PACKAGE))"},{"lineNumber":392,"author":{"gitId":"-"},"content":"                .check(ALL_CLASSES);"},{"lineNumber":393,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":394,"author":{"gitId":"-"},"content":""},{"lineNumber":395,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":396,"author":{"gitId":"-"},"content":"    public void testArchitecture_lnp_lnpShouldNotTouchProductionCodeExceptCommonAndRequests() {"},{"lineNumber":397,"author":{"gitId":"-"},"content":"        noClasses().that().resideInAPackage(includeSubpackages(LNP_PACKAGE))"},{"lineNumber":398,"author":{"gitId":"-"},"content":"                .should().accessClassesThat().resideInAPackage(includeSubpackages(STORAGE_PACKAGE))"},{"lineNumber":399,"author":{"gitId":"-"},"content":"                .orShould().accessClassesThat().resideInAPackage(includeSubpackages(LOGIC_PACKAGE))"},{"lineNumber":400,"author":{"gitId":"-"},"content":"                .orShould().accessClassesThat(new DescribedPredicate\u003c\u003e(\"\") {"},{"lineNumber":401,"author":{"gitId":"-"},"content":"                    @Override"},{"lineNumber":402,"author":{"gitId":"-"},"content":"                    public boolean apply(JavaClass input) {"},{"lineNumber":403,"author":{"gitId":"-"},"content":"                        return input.getPackageName().startsWith(UI_PACKAGE)"},{"lineNumber":404,"author":{"gitId":"-"},"content":"                                \u0026\u0026 !UI_OUTPUT_PACKAGE.equals(input.getPackageName())"},{"lineNumber":405,"author":{"gitId":"-"},"content":"                                \u0026\u0026 !UI_REQUEST_PACKAGE.equals(input.getPackageName());"},{"lineNumber":406,"author":{"gitId":"-"},"content":"                    }"},{"lineNumber":407,"author":{"gitId":"-"},"content":"                }).check(ALL_CLASSES);"},{"lineNumber":408,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":409,"author":{"gitId":"-"},"content":""},{"lineNumber":410,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":411,"author":{"gitId":"-"},"content":"    public void testArchitecture_lnp_lnpTestCasesShouldBeIndependentOfEachOther() {"},{"lineNumber":412,"author":{"gitId":"-"},"content":"        noClasses().that(new DescribedPredicate\u003c\u003e(\"\") {"},{"lineNumber":413,"author":{"gitId":"-"},"content":"            @Override"},{"lineNumber":414,"author":{"gitId":"-"},"content":"            public boolean apply(JavaClass input) {"},{"lineNumber":415,"author":{"gitId":"-"},"content":"                return input.getPackageName().startsWith(LNP_CASES_PACKAGE) \u0026\u0026 !input.isInnerClass();"},{"lineNumber":416,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":417,"author":{"gitId":"-"},"content":"        }).should().accessClassesThat(new DescribedPredicate\u003c\u003e(\"\") {"},{"lineNumber":418,"author":{"gitId":"-"},"content":"            @Override"},{"lineNumber":419,"author":{"gitId":"-"},"content":"            public boolean apply(JavaClass input) {"},{"lineNumber":420,"author":{"gitId":"-"},"content":"                return input.getPackageName().startsWith(LNP_CASES_PACKAGE)"},{"lineNumber":421,"author":{"gitId":"-"},"content":"                        \u0026\u0026 !input.getSimpleName().startsWith(\"Base\")"},{"lineNumber":422,"author":{"gitId":"-"},"content":"                        \u0026\u0026 !input.isInnerClass();"},{"lineNumber":423,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":424,"author":{"gitId":"-"},"content":"        }).check(forClasses(LNP_CASES_PACKAGE));"},{"lineNumber":425,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":426,"author":{"gitId":"-"},"content":""},{"lineNumber":427,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":428,"author":{"gitId":"-"},"content":"    public void testArchitecture_lnp_lnpShouldNotHaveAnyDependency() {"},{"lineNumber":429,"author":{"gitId":"-"},"content":"        noClasses().that().resideInAPackage(includeSubpackages(LNP_UTIL_PACKAGE))"},{"lineNumber":430,"author":{"gitId":"-"},"content":"                .should().accessClassesThat(new DescribedPredicate\u003c\u003e(\"\") {"},{"lineNumber":431,"author":{"gitId":"-"},"content":"                    @Override"},{"lineNumber":432,"author":{"gitId":"-"},"content":"                    public boolean apply(JavaClass input) {"},{"lineNumber":433,"author":{"gitId":"-"},"content":"                        return input.getPackageName().startsWith(LNP_PACKAGE)"},{"lineNumber":434,"author":{"gitId":"-"},"content":"                                \u0026\u0026 !LNP_UTIL_PACKAGE.equals(input.getPackageName());"},{"lineNumber":435,"author":{"gitId":"-"},"content":"                    }"},{"lineNumber":436,"author":{"gitId":"-"},"content":"                }).check(forClasses(LNP_PACKAGE));"},{"lineNumber":437,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":438,"author":{"gitId":"-"},"content":""},{"lineNumber":439,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":440,"author":{"gitId":"-"},"content":"    public void testArchitecture_client_clientShouldBeSelfContained() {"},{"lineNumber":441,"author":{"gitId":"-"},"content":"        noClasses().that().resideOutsideOfPackage(includeSubpackages(CLIENT_PACKAGE))"},{"lineNumber":442,"author":{"gitId":"-"},"content":"                .should().accessClassesThat().resideInAPackage(includeSubpackages(CLIENT_PACKAGE))"},{"lineNumber":443,"author":{"gitId":"-"},"content":"                .check(ALL_CLASSES);"},{"lineNumber":444,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":445,"author":{"gitId":"-"},"content":""},{"lineNumber":446,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":447,"author":{"gitId":"-"},"content":"    public void testArchitecture_client_clientShouldNotTouchUiComponent() {"},{"lineNumber":448,"author":{"gitId":"-"},"content":"        noClasses().that().resideInAPackage(includeSubpackages(CLIENT_PACKAGE))"},{"lineNumber":449,"author":{"gitId":"-"},"content":"                .should().accessClassesThat().resideInAPackage(includeSubpackages(UI_PACKAGE))"},{"lineNumber":450,"author":{"gitId":"-"},"content":"                .check(forClasses(CLIENT_PACKAGE, UI_PACKAGE));"},{"lineNumber":451,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":452,"author":{"gitId":"-"},"content":""},{"lineNumber":453,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":454,"author":{"gitId":"-"},"content":"    public void testArchitecture_client_connectorShouldNotTouchScripts() {"},{"lineNumber":455,"author":{"gitId":"-"},"content":"        noClasses().that().resideInAPackage(includeSubpackages(CLIENT_CONNECTOR_PACKAGE))"},{"lineNumber":456,"author":{"gitId":"-"},"content":"                .should().accessClassesThat().resideInAPackage(includeSubpackages(CLIENT_SCRIPTS_PACKAGE))"},{"lineNumber":457,"author":{"gitId":"-"},"content":"                .check(forClasses(CLIENT_PACKAGE));"},{"lineNumber":458,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":459,"author":{"gitId":"-"},"content":""},{"lineNumber":460,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":461,"author":{"gitId":"-"},"content":"    public void testArchitecture_client_utilShouldNotHaveAnyDependency() {"},{"lineNumber":462,"author":{"gitId":"-"},"content":"        noClasses().that().resideInAPackage(includeSubpackages(CLIENT_UTIL_PACKAGE))"},{"lineNumber":463,"author":{"gitId":"-"},"content":"                .should().accessClassesThat(new DescribedPredicate\u003c\u003e(\"\") {"},{"lineNumber":464,"author":{"gitId":"-"},"content":"                    @Override"},{"lineNumber":465,"author":{"gitId":"-"},"content":"                    public boolean apply(JavaClass input) {"},{"lineNumber":466,"author":{"gitId":"-"},"content":"                        return input.getPackageName().startsWith(CLIENT_PACKAGE)"},{"lineNumber":467,"author":{"gitId":"-"},"content":"                                \u0026\u0026 !CLIENT_UTIL_PACKAGE.equals(input.getPackageName());"},{"lineNumber":468,"author":{"gitId":"-"},"content":"                    }"},{"lineNumber":469,"author":{"gitId":"-"},"content":"                }).check(forClasses(CLIENT_PACKAGE));"},{"lineNumber":470,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":471,"author":{"gitId":"-"},"content":""},{"lineNumber":472,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":473,"author":{"gitId":"-"},"content":"    public void testArchitecture_externalApi_loggingApiCanOnlyBeAccessedByLogger() {"},{"lineNumber":474,"author":{"gitId":"-"},"content":"        noClasses().that().doNotHaveSimpleName(\"Logger\")"},{"lineNumber":475,"author":{"gitId":"-"},"content":"                .and().doNotHaveSimpleName(\"StdOutConsoleHandler\")"},{"lineNumber":476,"author":{"gitId":"-"},"content":"                .should().accessClassesThat().resideInAPackage(\"java.util.logging..\")"},{"lineNumber":477,"author":{"gitId":"-"},"content":"                .check(ALL_CLASSES);"},{"lineNumber":478,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":479,"author":{"gitId":"-"},"content":""},{"lineNumber":480,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":481,"author":{"gitId":"-"},"content":"    public void testArchitecture_externalApi_solrApiCanOnlyBeAccessedBySearchManagerClasses() {"},{"lineNumber":482,"author":{"gitId":"-"},"content":"        noClasses().that().doNotHaveSimpleName(\"SearchManager\")"},{"lineNumber":483,"author":{"gitId":"-"},"content":"                .and().doNotHaveSimpleName(\"AccountRequestSearchManager\")"},{"lineNumber":484,"author":{"gitId":"-"},"content":"                .and().doNotHaveSimpleName(\"InstructorSearchManager\")"},{"lineNumber":485,"author":{"gitId":"-"},"content":"                .and().doNotHaveSimpleName(\"StudentSearchManager\")"},{"lineNumber":486,"author":{"gitId":"-"},"content":"                .should().accessClassesThat().resideInAPackage(\"org.apache.solr..\")"},{"lineNumber":487,"author":{"gitId":"-"},"content":"                .check(ALL_CLASSES);"},{"lineNumber":488,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":489,"author":{"gitId":"-"},"content":""},{"lineNumber":490,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":491,"author":{"gitId":"-"},"content":"    public void testArchitecture_externalApi_cloudTasksApiCanOnlyBeAccessedByCloudTasksService() {"},{"lineNumber":492,"author":{"gitId":"-"},"content":"        noClasses().that().doNotHaveSimpleName(\"GoogleCloudTasksService\")"},{"lineNumber":493,"author":{"gitId":"-"},"content":"                .should().accessClassesThat().resideInAPackage(\"com.google.cloud.tasks.v2..\")"},{"lineNumber":494,"author":{"gitId":"-"},"content":"                .check(ALL_CLASSES);"},{"lineNumber":495,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":496,"author":{"gitId":"-"},"content":""},{"lineNumber":497,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":498,"author":{"gitId":"-"},"content":"    public void testArchitecture_externalApi_cloudLoggingApiCanOnlyBeAccessedByCloudLoggingService() {"},{"lineNumber":499,"author":{"gitId":"-"},"content":"        noClasses().that().doNotHaveSimpleName(\"GoogleCloudLoggingService\")"},{"lineNumber":500,"author":{"gitId":"-"},"content":"                .should().accessClassesThat().resideInAPackage(\"com.google.cloud.logging..\")"},{"lineNumber":501,"author":{"gitId":"-"},"content":"                .check(ALL_CLASSES);"},{"lineNumber":502,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":503,"author":{"gitId":"-"},"content":""},{"lineNumber":504,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":505,"author":{"gitId":"-"},"content":"    public void testArchitecture_externalApi_objectifyApiCanOnlyBeAccessedBySomePackages() {"},{"lineNumber":506,"author":{"gitId":"-"},"content":"        noClasses().that().resideOutsideOfPackage(includeSubpackages(STORAGE_API_PACKAGE))"},{"lineNumber":507,"author":{"gitId":"-"},"content":"                .and().resideOutsideOfPackage(includeSubpackages(STORAGE_ENTITY_PACKAGE))"},{"lineNumber":508,"author":{"gitId":"-"},"content":"                .and().resideOutsideOfPackage(includeSubpackages(CLIENT_CONNECTOR_PACKAGE))"},{"lineNumber":509,"author":{"gitId":"-"},"content":"                .and().resideOutsideOfPackage(includeSubpackages(CLIENT_SCRIPTS_PACKAGE))"},{"lineNumber":510,"author":{"gitId":"-"},"content":"                .and().doNotHaveSimpleName(\"BaseTestCaseWithSqlDatabaseAccess\")"},{"lineNumber":511,"author":{"gitId":"-"},"content":"                .and().doNotHaveSimpleName(\"BaseTestCaseWithLocalDatabaseAccess\")"},{"lineNumber":512,"author":{"gitId":"-"},"content":"                .should().accessClassesThat().resideInAPackage(\"com.googlecode.objectify..\")"},{"lineNumber":513,"author":{"gitId":"-"},"content":"                .check(ALL_CLASSES);"},{"lineNumber":514,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":515,"author":{"gitId":"-"},"content":""},{"lineNumber":516,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":517,"author":{"gitId":"-"},"content":"    public void testArchitecture_externalApi_servletApiCanOnlyBeAccessedBySomePackages() {"},{"lineNumber":518,"author":{"gitId":"-"},"content":"        noClasses().that().doNotHaveSimpleName(\"HttpRequestHelper\")"},{"lineNumber":519,"author":{"gitId":"-"},"content":"                .and().doNotHaveSimpleName(\"OfyHelper\")"},{"lineNumber":520,"author":{"gitId":"-"},"content":"                .and().doNotHaveSimpleName(\"MockFilterChain\")"},{"lineNumber":521,"author":{"gitId":"-"},"content":"                .and().doNotHaveSimpleName(\"MockHttpServletRequest\")"},{"lineNumber":522,"author":{"gitId":"-"},"content":"                .and().doNotHaveSimpleName(\"MockHttpServletResponse\")"},{"lineNumber":523,"author":{"gitId":"-"},"content":"                .and().doNotHaveSimpleName(\"MockPart\")"},{"lineNumber":524,"author":{"gitId":"-"},"content":"                .and().resideOutsideOfPackage(includeSubpackages(UI_WEBAPI_PACKAGE))"},{"lineNumber":525,"author":{"gitId":"-"},"content":"                .should().accessClassesThat().haveFullyQualifiedName(\"javax.servlet..\")"},{"lineNumber":526,"author":{"gitId":"-"},"content":"                .check(ALL_CLASSES);"},{"lineNumber":527,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":528,"author":{"gitId":"-"},"content":""},{"lineNumber":529,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":530,"author":{"gitId":"-"},"content":"    public void testArchitecture_externalApi_jettyApiCanOnlyBeAccessedBySomePackages() {"},{"lineNumber":531,"author":{"gitId":"-"},"content":"        noClasses().that().resideOutsideOfPackage(MAIN_PACKAGE)"},{"lineNumber":532,"author":{"gitId":"-"},"content":"                .should().accessClassesThat().haveFullyQualifiedName(\"org.eclipse.jetty..\")"},{"lineNumber":533,"author":{"gitId":"-"},"content":"                .check(ALL_CLASSES);"},{"lineNumber":534,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":535,"author":{"gitId":"-"},"content":""},{"lineNumber":536,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":537,"author":{"gitId":"-"},"content":"    public void testArchitecture_externalApi_assertionApiCanOnlyBeAccessedBySomePackages() {"},{"lineNumber":538,"author":{"gitId":"-"},"content":"        noClasses().that().resideOutsideOfPackage(includeSubpackages(E2E_PAGEOBJECTS_PACKAGE))"},{"lineNumber":539,"author":{"gitId":"-"},"content":"                .and().doNotHaveSimpleName(\"BaseTestCase\")"},{"lineNumber":540,"author":{"gitId":"-"},"content":"                .and().doNotHaveSimpleName(\"AssertHelper\")"},{"lineNumber":541,"author":{"gitId":"-"},"content":"                .and().doNotHaveSimpleName(\"EmailChecker\")"},{"lineNumber":542,"author":{"gitId":"-"},"content":"                .should().accessClassesThat().haveFullyQualifiedName(\"org.junit.Assert\")"},{"lineNumber":543,"author":{"gitId":"-"},"content":"                .check(ALL_CLASSES);"},{"lineNumber":544,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":545,"author":{"gitId":"-"},"content":""},{"lineNumber":546,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":547,"author":{"gitId":"-"},"content":"    public void testArchitecture_externalApi_seleniumApiCanOnlyBeAccessedByPageObjects() {"},{"lineNumber":548,"author":{"gitId":"-"},"content":"        noClasses().that().resideOutsideOfPackage(E2E_PAGEOBJECTS_PACKAGE)"},{"lineNumber":549,"author":{"gitId":"-"},"content":"                .should().accessClassesThat().resideInAPackage(\"org.openqa.selenium..\")"},{"lineNumber":550,"author":{"gitId":"-"},"content":"                .check(ALL_CLASSES);"},{"lineNumber":551,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":552,"author":{"gitId":"-"},"content":""},{"lineNumber":553,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"hhdqirui":1,"-":552}},{"path":"src/test/java/teammates/logic/core/FeedbackResponsesLogicTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.logic.core;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.util.ArrayList;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.util.Arrays;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.util.Collections;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import java.util.Comparator;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import java.util.HashMap;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import java.util.HashSet;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import java.util.Map;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import java.util.Set;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import java.util.stream.Collectors;"},{"lineNumber":13,"author":{"gitId":"-"},"content":""},{"lineNumber":14,"author":{"gitId":"-"},"content":"import org.testng.annotations.BeforeMethod;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import org.testng.annotations.Test;"},{"lineNumber":16,"author":{"gitId":"-"},"content":""},{"lineNumber":17,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.AttributesDeletionQuery;"},{"lineNumber":18,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.CourseRoster;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.DataBundle;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.FeedbackParticipantType;"},{"lineNumber":21,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.FeedbackResultFetchType;"},{"lineNumber":22,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.SessionResultsBundle;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackResponseAttributes;"},{"lineNumber":25,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackResponseCommentAttributes;"},{"lineNumber":26,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackSessionAttributes;"},{"lineNumber":27,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.InstructorAttributes;"},{"lineNumber":28,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.StudentAttributes;"},{"lineNumber":29,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackQuestionType;"},{"lineNumber":30,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackRankRecipientsResponseDetails;"},{"lineNumber":31,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackResponseDetails;"},{"lineNumber":32,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackTextResponseDetails;"},{"lineNumber":33,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":34,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":35,"author":{"gitId":"-"},"content":"import teammates.test.AssertHelper;"},{"lineNumber":36,"author":{"gitId":"-"},"content":""},{"lineNumber":37,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":38,"author":{"gitId":"-"},"content":" * SUT: {@link FeedbackResponsesLogic}."},{"lineNumber":39,"author":{"gitId":"-"},"content":" */"},{"lineNumber":40,"author":{"gitId":"-"},"content":"public class FeedbackResponsesLogicTest extends BaseLogicTest {"},{"lineNumber":41,"author":{"gitId":"-"},"content":""},{"lineNumber":42,"author":{"gitId":"-"},"content":"    private final FeedbackSessionsLogic fsLogic \u003d FeedbackSessionsLogic.inst();"},{"lineNumber":43,"author":{"gitId":"-"},"content":"    private final FeedbackQuestionsLogic fqLogic \u003d FeedbackQuestionsLogic.inst();"},{"lineNumber":44,"author":{"gitId":"-"},"content":"    private final FeedbackResponsesLogic frLogic \u003d FeedbackResponsesLogic.inst();"},{"lineNumber":45,"author":{"gitId":"-"},"content":"    private final FeedbackResponseCommentsLogic frcLogic \u003d FeedbackResponseCommentsLogic.inst();"},{"lineNumber":46,"author":{"gitId":"-"},"content":"    private final InstructorsLogic instructorsLogic \u003d InstructorsLogic.inst();"},{"lineNumber":47,"author":{"gitId":"-"},"content":"    private final StudentsLogic studentsLogic \u003d StudentsLogic.inst();"},{"lineNumber":48,"author":{"gitId":"-"},"content":""},{"lineNumber":49,"author":{"gitId":"-"},"content":"    private DataBundle questionTypeBundle;"},{"lineNumber":50,"author":{"gitId":"-"},"content":"    private DataBundle responseVisibilityBundle;"},{"lineNumber":51,"author":{"gitId":"-"},"content":""},{"lineNumber":52,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":53,"author":{"gitId":"-"},"content":"    protected void prepareTestData() {"},{"lineNumber":54,"author":{"gitId":"-"},"content":"        // test data is refreshed before each test case"},{"lineNumber":55,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":56,"author":{"gitId":"-"},"content":""},{"lineNumber":57,"author":{"gitId":"-"},"content":"    @BeforeMethod"},{"lineNumber":58,"author":{"gitId":"-"},"content":"    public void refreshTestData() {"},{"lineNumber":59,"author":{"gitId":"-"},"content":"        dataBundle \u003d getTypicalDataBundle();"},{"lineNumber":60,"author":{"gitId":"-"},"content":"        questionTypeBundle \u003d loadDataBundle(\"/FeedbackSessionQuestionTypeTest.json\");"},{"lineNumber":61,"author":{"gitId":"-"},"content":"        responseVisibilityBundle \u003d loadDataBundle(\"/FeedbackResponseVisibilityTest.json\");"},{"lineNumber":62,"author":{"gitId":"-"},"content":""},{"lineNumber":63,"author":{"gitId":"-"},"content":"        removeAndRestoreTypicalDataBundle();"},{"lineNumber":64,"author":{"gitId":"-"},"content":"        // extra test data used on top of typical data bundle"},{"lineNumber":65,"author":{"gitId":"-"},"content":"        removeAndRestoreDataBundle(loadDataBundle(\"/SpecialCharacterTest.json\"));"},{"lineNumber":66,"author":{"gitId":"-"},"content":"        removeAndRestoreDataBundle(questionTypeBundle);"},{"lineNumber":67,"author":{"gitId":"-"},"content":"        removeAndRestoreDataBundle(responseVisibilityBundle);"},{"lineNumber":68,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":69,"author":{"gitId":"-"},"content":""},{"lineNumber":70,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":71,"author":{"gitId":"-"},"content":"    public void testAreThereResponsesForQuestion() {"},{"lineNumber":72,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes questionWithResponse;"},{"lineNumber":73,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes questionWithoutResponse;"},{"lineNumber":74,"author":{"gitId":"-"},"content":""},{"lineNumber":75,"author":{"gitId":"-"},"content":"        ______TS(\"Check that a question has some responses\");"},{"lineNumber":76,"author":{"gitId":"-"},"content":""},{"lineNumber":77,"author":{"gitId":"-"},"content":"        questionWithResponse \u003d getQuestionFromDatabase(\"qn1InSession1InCourse2\");"},{"lineNumber":78,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.areThereResponsesForQuestion(questionWithResponse.getId()));"},{"lineNumber":79,"author":{"gitId":"-"},"content":""},{"lineNumber":80,"author":{"gitId":"-"},"content":"        ______TS(\"Check that a question has no responses\");"},{"lineNumber":81,"author":{"gitId":"-"},"content":""},{"lineNumber":82,"author":{"gitId":"-"},"content":"        questionWithoutResponse \u003d getQuestionFromDatabase(\"qn2InSession1InCourse2\");"},{"lineNumber":83,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.areThereResponsesForQuestion(questionWithoutResponse.getId()));"},{"lineNumber":84,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":85,"author":{"gitId":"-"},"content":""},{"lineNumber":86,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":87,"author":{"gitId":"-"},"content":"    public void testUpdateFeedbackResponseCascade() throws Exception {"},{"lineNumber":88,"author":{"gitId":"-"},"content":""},{"lineNumber":89,"author":{"gitId":"-"},"content":"        ______TS(\"success: standard update\");"},{"lineNumber":90,"author":{"gitId":"-"},"content":""},{"lineNumber":91,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes responseToUpdate \u003d getResponseFromDatabase(\"response1ForQ2S1C1\");"},{"lineNumber":92,"author":{"gitId":"-"},"content":""},{"lineNumber":93,"author":{"gitId":"-"},"content":"        FeedbackResponseDetails frd \u003d new FeedbackTextResponseDetails(\"Updated Response\");"},{"lineNumber":94,"author":{"gitId":"-"},"content":""},{"lineNumber":95,"author":{"gitId":"-"},"content":"        frLogic.updateFeedbackResponseCascade("},{"lineNumber":96,"author":{"gitId":"-"},"content":"                FeedbackResponseAttributes.updateOptionsBuilder(responseToUpdate.getId())"},{"lineNumber":97,"author":{"gitId":"-"},"content":"                        .withResponseDetails(frd)"},{"lineNumber":98,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":99,"author":{"gitId":"-"},"content":""},{"lineNumber":100,"author":{"gitId":"-"},"content":"        responseToUpdate \u003d getResponseFromDatabase(\"response1ForQ2S1C1\");"},{"lineNumber":101,"author":{"gitId":"-"},"content":""},{"lineNumber":102,"author":{"gitId":"-"},"content":"        assertEquals(responseToUpdate.toString(),"},{"lineNumber":103,"author":{"gitId":"-"},"content":"                frLogic.getFeedbackResponse(responseToUpdate.getId()).toString());"},{"lineNumber":104,"author":{"gitId":"-"},"content":""},{"lineNumber":105,"author":{"gitId":"-"},"content":"        ______TS(\"failure: recipient one that is already exists\");"},{"lineNumber":106,"author":{"gitId":"-"},"content":""},{"lineNumber":107,"author":{"gitId":"-"},"content":"        responseToUpdate \u003d getResponseFromDatabase(\"response1ForQ2S1C1\");"},{"lineNumber":108,"author":{"gitId":"-"},"content":""},{"lineNumber":109,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes existingResponse \u003d"},{"lineNumber":110,"author":{"gitId":"-"},"content":"                FeedbackResponseAttributes.builder("},{"lineNumber":111,"author":{"gitId":"-"},"content":"                        responseToUpdate.getFeedbackQuestionId(), responseToUpdate.getGiver(), \"student3InCourse1@gmail.tmt\")"},{"lineNumber":112,"author":{"gitId":"-"},"content":"                .withFeedbackSessionName(responseToUpdate.getFeedbackSessionName())"},{"lineNumber":113,"author":{"gitId":"-"},"content":"                .withCourseId(responseToUpdate.getCourseId())"},{"lineNumber":114,"author":{"gitId":"-"},"content":"                .withGiverSection(responseToUpdate.getGiverSection())"},{"lineNumber":115,"author":{"gitId":"-"},"content":"                .withRecipientSection(responseToUpdate.getRecipientSection())"},{"lineNumber":116,"author":{"gitId":"-"},"content":"                .withResponseDetails(responseToUpdate.getResponseDetails())"},{"lineNumber":117,"author":{"gitId":"-"},"content":"                .build();"},{"lineNumber":118,"author":{"gitId":"-"},"content":""},{"lineNumber":119,"author":{"gitId":"-"},"content":"        frLogic.createFeedbackResponse(existingResponse);"},{"lineNumber":120,"author":{"gitId":"-"},"content":""},{"lineNumber":121,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes[] finalResponse \u003d new FeedbackResponseAttributes[] { responseToUpdate };"},{"lineNumber":122,"author":{"gitId":"-"},"content":"        EntityAlreadyExistsException eaee \u003d assertThrows(EntityAlreadyExistsException.class,"},{"lineNumber":123,"author":{"gitId":"-"},"content":"                () -\u003e frLogic.updateFeedbackResponseCascade("},{"lineNumber":124,"author":{"gitId":"-"},"content":"                        FeedbackResponseAttributes.updateOptionsBuilder(finalResponse[0].getId())"},{"lineNumber":125,"author":{"gitId":"-"},"content":"                                .withRecipient(\"student3InCourse1@gmail.tmt\")"},{"lineNumber":126,"author":{"gitId":"-"},"content":"                                .build()));"},{"lineNumber":127,"author":{"gitId":"-"},"content":"        AssertHelper.assertContains(\"Trying to create an entity that exists\", eaee.getMessage());"},{"lineNumber":128,"author":{"gitId":"-"},"content":""},{"lineNumber":129,"author":{"gitId":"-"},"content":"        ______TS(\"success: recipient changed to something else\");"},{"lineNumber":130,"author":{"gitId":"-"},"content":""},{"lineNumber":131,"author":{"gitId":"-"},"content":"        responseToUpdate.setRecipient(\"student5InCourse1@gmail.tmt\");"},{"lineNumber":132,"author":{"gitId":"-"},"content":""},{"lineNumber":133,"author":{"gitId":"-"},"content":"        frLogic.updateFeedbackResponseCascade("},{"lineNumber":134,"author":{"gitId":"-"},"content":"                FeedbackResponseAttributes.updateOptionsBuilder(responseToUpdate.getId())"},{"lineNumber":135,"author":{"gitId":"-"},"content":"                        .withRecipient(responseToUpdate.getRecipient())"},{"lineNumber":136,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":137,"author":{"gitId":"-"},"content":""},{"lineNumber":138,"author":{"gitId":"-"},"content":"        assertEquals(responseToUpdate.toString(),"},{"lineNumber":139,"author":{"gitId":"-"},"content":"                frLogic.getFeedbackResponse(responseToUpdate.getFeedbackQuestionId(), responseToUpdate.getGiver(),"},{"lineNumber":140,"author":{"gitId":"-"},"content":"                        responseToUpdate.getRecipient()).toString());"},{"lineNumber":141,"author":{"gitId":"-"},"content":"        assertNull(frLogic.getFeedbackResponse("},{"lineNumber":142,"author":{"gitId":"-"},"content":"                responseToUpdate.getFeedbackQuestionId(), responseToUpdate.getGiver(), \"student2InCourse1@gmail.tmt\"));"},{"lineNumber":143,"author":{"gitId":"-"},"content":""},{"lineNumber":144,"author":{"gitId":"-"},"content":"        ______TS(\"success: update giver, recipient, giverSection and recipientSection, \""},{"lineNumber":145,"author":{"gitId":"-"},"content":"                + \"should do cascade update to comments\");"},{"lineNumber":146,"author":{"gitId":"-"},"content":""},{"lineNumber":147,"author":{"gitId":"-"},"content":"        responseToUpdate \u003d getResponseFromDatabase(\"response1ForQ1S1C1\");"},{"lineNumber":148,"author":{"gitId":"-"},"content":"        assertFalse(frcLogic.getFeedbackResponseCommentForResponse(responseToUpdate.getId()).isEmpty());"},{"lineNumber":149,"author":{"gitId":"-"},"content":""},{"lineNumber":150,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes updatedResponse \u003d frLogic.updateFeedbackResponseCascade("},{"lineNumber":151,"author":{"gitId":"-"},"content":"                FeedbackResponseAttributes.updateOptionsBuilder(responseToUpdate.getId())"},{"lineNumber":152,"author":{"gitId":"-"},"content":"                        .withGiver(\"test@example.com\")"},{"lineNumber":153,"author":{"gitId":"-"},"content":"                        .withGiverSection(\"giverSection\")"},{"lineNumber":154,"author":{"gitId":"-"},"content":"                        .withRecipient(\"test@example.com\")"},{"lineNumber":155,"author":{"gitId":"-"},"content":"                        .withRecipientSection(\"recipientSection\")"},{"lineNumber":156,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":157,"author":{"gitId":"-"},"content":"        assertEquals(\"test@example.com\", updatedResponse.getGiver());"},{"lineNumber":158,"author":{"gitId":"-"},"content":"        assertEquals(\"giverSection\", updatedResponse.getGiverSection());"},{"lineNumber":159,"author":{"gitId":"-"},"content":"        assertEquals(\"test@example.com\", updatedResponse.getRecipient());"},{"lineNumber":160,"author":{"gitId":"-"},"content":"        assertEquals(\"recipientSection\", updatedResponse.getRecipientSection());"},{"lineNumber":161,"author":{"gitId":"-"},"content":"        assertTrue(frcLogic.getFeedbackResponseCommentForResponse(responseToUpdate.getId()).isEmpty());"},{"lineNumber":162,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseCommentAttributes\u003e associatedComments \u003d"},{"lineNumber":163,"author":{"gitId":"-"},"content":"                frcLogic.getFeedbackResponseCommentForResponse(updatedResponse.getId());"},{"lineNumber":164,"author":{"gitId":"-"},"content":"        assertFalse(associatedComments.isEmpty());"},{"lineNumber":165,"author":{"gitId":"-"},"content":"        assertTrue(associatedComments.stream()"},{"lineNumber":166,"author":{"gitId":"-"},"content":"                .allMatch(c -\u003e \"giverSection\".equals(c.getGiverSection())"},{"lineNumber":167,"author":{"gitId":"-"},"content":"                        \u0026\u0026 \"recipientSection\".equals(c.getReceiverSection())));"},{"lineNumber":168,"author":{"gitId":"-"},"content":""},{"lineNumber":169,"author":{"gitId":"-"},"content":"        ______TS(\"failure: invalid params\");"},{"lineNumber":170,"author":{"gitId":"-"},"content":""},{"lineNumber":171,"author":{"gitId":"-"},"content":"        // Cannot have invalid params as all possible invalid params"},{"lineNumber":172,"author":{"gitId":"-"},"content":"        // are copied over from an existing response."},{"lineNumber":173,"author":{"gitId":"-"},"content":""},{"lineNumber":174,"author":{"gitId":"-"},"content":"        ______TS(\"failure: no such response\");"},{"lineNumber":175,"author":{"gitId":"-"},"content":""},{"lineNumber":176,"author":{"gitId":"-"},"content":"        assertThrows(EntityDoesNotExistException.class,"},{"lineNumber":177,"author":{"gitId":"-"},"content":"                () -\u003e frLogic.updateFeedbackResponseCascade("},{"lineNumber":178,"author":{"gitId":"-"},"content":"                        FeedbackResponseAttributes.updateOptionsBuilder(\"non-existent\")"},{"lineNumber":179,"author":{"gitId":"-"},"content":"                                .withGiver(\"random\")"},{"lineNumber":180,"author":{"gitId":"-"},"content":"                                .build()));"},{"lineNumber":181,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":182,"author":{"gitId":"-"},"content":""},{"lineNumber":183,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":184,"author":{"gitId":"-"},"content":"    public void testUpdateFeedbackResponsesForChangingTeam_typicalData_shouldDoCascadeDeletion() throws Exception {"},{"lineNumber":185,"author":{"gitId":"-"},"content":""},{"lineNumber":186,"author":{"gitId":"-"},"content":"        StudentAttributes studentToUpdate \u003d dataBundle.students.get(\"student4InCourse1\");"},{"lineNumber":187,"author":{"gitId":"-"},"content":""},{"lineNumber":188,"author":{"gitId":"-"},"content":"        // Student 4 has 1 responses to him from team members,"},{"lineNumber":189,"author":{"gitId":"-"},"content":"        // 1 response from him a team member, and"},{"lineNumber":190,"author":{"gitId":"-"},"content":"        // 1 team response from him to another team."},{"lineNumber":191,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes teamQuestion \u003d getQuestionFromDatabase(\"team.members.feedback\");"},{"lineNumber":192,"author":{"gitId":"-"},"content":"        assertEquals(1, getFeedbackResponsesForReceiverForQuestion("},{"lineNumber":193,"author":{"gitId":"-"},"content":"                teamQuestion.getId(), studentToUpdate.getEmail()).size());"},{"lineNumber":194,"author":{"gitId":"-"},"content":"        assertEquals(1,"},{"lineNumber":195,"author":{"gitId":"-"},"content":"                frLogic.getFeedbackResponsesFromGiverForQuestion("},{"lineNumber":196,"author":{"gitId":"-"},"content":"                teamQuestion.getId(), studentToUpdate.getEmail()).size());"},{"lineNumber":197,"author":{"gitId":"-"},"content":""},{"lineNumber":198,"author":{"gitId":"-"},"content":"        teamQuestion \u003d getQuestionFromDatabase(\"team.feedback\");"},{"lineNumber":199,"author":{"gitId":"-"},"content":"        assertEquals(1,"},{"lineNumber":200,"author":{"gitId":"-"},"content":"                frLogic.getFeedbackResponsesFromGiverForQuestion("},{"lineNumber":201,"author":{"gitId":"-"},"content":"                teamQuestion.getId(), studentToUpdate.getTeam()).size());"},{"lineNumber":202,"author":{"gitId":"-"},"content":""},{"lineNumber":203,"author":{"gitId":"-"},"content":"        // Add one more non-team response"},{"lineNumber":204,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes responseToAdd \u003d"},{"lineNumber":205,"author":{"gitId":"-"},"content":"                FeedbackResponseAttributes.builder("},{"lineNumber":206,"author":{"gitId":"-"},"content":"                        getQuestionFromDatabase(\"qn1InSession1InCourse1\").getId(),"},{"lineNumber":207,"author":{"gitId":"-"},"content":"                        studentToUpdate.getEmail(), studentToUpdate.getEmail())"},{"lineNumber":208,"author":{"gitId":"-"},"content":"                .withFeedbackSessionName(\"First feedback session\")"},{"lineNumber":209,"author":{"gitId":"-"},"content":"                .withCourseId(\"idOfTypicalCourse1\")"},{"lineNumber":210,"author":{"gitId":"-"},"content":"                .withGiverSection(\"Section 1\")"},{"lineNumber":211,"author":{"gitId":"-"},"content":"                .withRecipientSection(\"Section 1\")"},{"lineNumber":212,"author":{"gitId":"-"},"content":"                .withResponseDetails(new FeedbackTextResponseDetails(\"New Response to self\"))"},{"lineNumber":213,"author":{"gitId":"-"},"content":"                .build();"},{"lineNumber":214,"author":{"gitId":"-"},"content":""},{"lineNumber":215,"author":{"gitId":"-"},"content":"        frLogic.createFeedbackResponse(responseToAdd);"},{"lineNumber":216,"author":{"gitId":"-"},"content":""},{"lineNumber":217,"author":{"gitId":"-"},"content":"        // All these responses should be gone after he changes teams"},{"lineNumber":218,"author":{"gitId":"-"},"content":""},{"lineNumber":219,"author":{"gitId":"-"},"content":"        frLogic.updateFeedbackResponsesForChangingTeam("},{"lineNumber":220,"author":{"gitId":"-"},"content":"                studentToUpdate.getCourse(), studentToUpdate.getEmail(), studentToUpdate.getTeam(), \"Team 1.2\");"},{"lineNumber":221,"author":{"gitId":"-"},"content":""},{"lineNumber":222,"author":{"gitId":"-"},"content":"        teamQuestion \u003d getQuestionFromDatabase(\"team.members.feedback\");"},{"lineNumber":223,"author":{"gitId":"-"},"content":"        assertEquals(0, getFeedbackResponsesForReceiverForQuestion("},{"lineNumber":224,"author":{"gitId":"-"},"content":"                teamQuestion.getId(), studentToUpdate.getEmail()).size());"},{"lineNumber":225,"author":{"gitId":"-"},"content":"        assertEquals(0,"},{"lineNumber":226,"author":{"gitId":"-"},"content":"                frLogic.getFeedbackResponsesFromGiverForQuestion("},{"lineNumber":227,"author":{"gitId":"-"},"content":"                teamQuestion.getId(), studentToUpdate.getEmail()).size());"},{"lineNumber":228,"author":{"gitId":"-"},"content":""},{"lineNumber":229,"author":{"gitId":"-"},"content":"        teamQuestion \u003d getQuestionFromDatabase(\"team.feedback\");"},{"lineNumber":230,"author":{"gitId":"-"},"content":"        assertEquals(0, getFeedbackResponsesForReceiverForQuestion("},{"lineNumber":231,"author":{"gitId":"-"},"content":"                teamQuestion.getId(), studentToUpdate.getEmail()).size());"},{"lineNumber":232,"author":{"gitId":"-"},"content":""},{"lineNumber":233,"author":{"gitId":"-"},"content":"        // Non-team response should remain"},{"lineNumber":234,"author":{"gitId":"-"},"content":""},{"lineNumber":235,"author":{"gitId":"-"},"content":"        assertEquals(1,"},{"lineNumber":236,"author":{"gitId":"-"},"content":"                frLogic.getFeedbackResponsesFromGiverForQuestion("},{"lineNumber":237,"author":{"gitId":"-"},"content":"                        getQuestionFromDatabase(\"qn1InSession1InCourse1\").getId(),"},{"lineNumber":238,"author":{"gitId":"-"},"content":"                        studentToUpdate.getEmail()).size());"},{"lineNumber":239,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":240,"author":{"gitId":"-"},"content":""},{"lineNumber":241,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":242,"author":{"gitId":"-"},"content":"     * Gets all responses for a recipient of a question."},{"lineNumber":243,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":244,"author":{"gitId":"-"},"content":"    private List\u003cFeedbackResponseAttributes\u003e getFeedbackResponsesForReceiverForQuestion("},{"lineNumber":245,"author":{"gitId":"-"},"content":"            String questionId, String receiver) {"},{"lineNumber":246,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e allResponses \u003d frLogic.getFeedbackResponsesForQuestion(questionId);"},{"lineNumber":247,"author":{"gitId":"-"},"content":"        return allResponses.stream()"},{"lineNumber":248,"author":{"gitId":"-"},"content":"                .filter(response -\u003e response.getRecipient().equals(receiver))"},{"lineNumber":249,"author":{"gitId":"-"},"content":"                .collect(Collectors.toList());"},{"lineNumber":250,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":251,"author":{"gitId":"-"},"content":""},{"lineNumber":252,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":253,"author":{"gitId":"-"},"content":"    public void testUpdateFeedbackResponsesForChangingTeam_deleteLastResponse_decreaseResponseRate() {"},{"lineNumber":254,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes responseShouldBeDeleted \u003d"},{"lineNumber":255,"author":{"gitId":"-"},"content":"                getResponseFromDatabase(questionTypeBundle, \"response1ForQ1ContribSession2Course2\");"},{"lineNumber":256,"author":{"gitId":"-"},"content":"        // make sure it\u0027s the last response by the student"},{"lineNumber":257,"author":{"gitId":"-"},"content":"        assertEquals(1, numResponsesFromGiverInSession(responseShouldBeDeleted.getGiver(),"},{"lineNumber":258,"author":{"gitId":"-"},"content":"                responseShouldBeDeleted.getFeedbackSessionName(),"},{"lineNumber":259,"author":{"gitId":"-"},"content":"                responseShouldBeDeleted.getCourseId()));"},{"lineNumber":260,"author":{"gitId":"-"},"content":"        StudentAttributes student \u003d questionTypeBundle.students.get(\"student2InCourse2\");"},{"lineNumber":261,"author":{"gitId":"-"},"content":"        // the response is given by the student"},{"lineNumber":262,"author":{"gitId":"-"},"content":"        assertEquals(student.getEmail(), responseShouldBeDeleted.getGiver());"},{"lineNumber":263,"author":{"gitId":"-"},"content":""},{"lineNumber":264,"author":{"gitId":"-"},"content":"        int originalResponseRate \u003d getResponseRate(responseShouldBeDeleted.getFeedbackSessionName(),"},{"lineNumber":265,"author":{"gitId":"-"},"content":"                responseShouldBeDeleted.getCourseId());"},{"lineNumber":266,"author":{"gitId":"-"},"content":""},{"lineNumber":267,"author":{"gitId":"-"},"content":"        frLogic.updateFeedbackResponsesForChangingTeam(student.getCourse(), student.getEmail(), student.getTeam(),"},{"lineNumber":268,"author":{"gitId":"-"},"content":"                student.getTeam() + \"tmp\");"},{"lineNumber":269,"author":{"gitId":"-"},"content":""},{"lineNumber":270,"author":{"gitId":"-"},"content":"        int responseRateAfterDeletion \u003d getResponseRate(responseShouldBeDeleted.getFeedbackSessionName(),"},{"lineNumber":271,"author":{"gitId":"-"},"content":"                responseShouldBeDeleted.getCourseId());"},{"lineNumber":272,"author":{"gitId":"-"},"content":"        assertEquals(originalResponseRate - 1, responseRateAfterDeletion);"},{"lineNumber":273,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":274,"author":{"gitId":"-"},"content":""},{"lineNumber":275,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":276,"author":{"gitId":"-"},"content":"    public void testUpdateFeedbackResponsesForChangingTeam_noResponseShouldBeDeleted_shouldReaminSameResponseRate() {"},{"lineNumber":277,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes responseShouldBeDeleted \u003d"},{"lineNumber":278,"author":{"gitId":"-"},"content":"                getResponseFromDatabase(questionTypeBundle, \"response1ForQ1RankSession\");"},{"lineNumber":279,"author":{"gitId":"-"},"content":"        // make sure it\u0027s not the last response by the student"},{"lineNumber":280,"author":{"gitId":"-"},"content":"        assertTrue(1 \u003c numResponsesFromGiverInSession(responseShouldBeDeleted.getGiver(),"},{"lineNumber":281,"author":{"gitId":"-"},"content":"                responseShouldBeDeleted.getFeedbackSessionName(),"},{"lineNumber":282,"author":{"gitId":"-"},"content":"                responseShouldBeDeleted.getCourseId()));"},{"lineNumber":283,"author":{"gitId":"-"},"content":"        StudentAttributes student \u003d questionTypeBundle.students.get(\"student1InCourse1\");"},{"lineNumber":284,"author":{"gitId":"-"},"content":"        // the response is given by the student"},{"lineNumber":285,"author":{"gitId":"-"},"content":"        assertEquals(student.getEmail(), responseShouldBeDeleted.getGiver());"},{"lineNumber":286,"author":{"gitId":"-"},"content":""},{"lineNumber":287,"author":{"gitId":"-"},"content":"        int originalResponseRate \u003d getResponseRate(responseShouldBeDeleted.getFeedbackSessionName(),"},{"lineNumber":288,"author":{"gitId":"-"},"content":"                responseShouldBeDeleted.getCourseId());"},{"lineNumber":289,"author":{"gitId":"-"},"content":""},{"lineNumber":290,"author":{"gitId":"-"},"content":"        frLogic.updateFeedbackResponsesForChangingTeam(student.getCourse(), student.getEmail(), student.getTeam(),"},{"lineNumber":291,"author":{"gitId":"-"},"content":"                student.getTeam() + \"tmp\");"},{"lineNumber":292,"author":{"gitId":"-"},"content":""},{"lineNumber":293,"author":{"gitId":"-"},"content":"        int responseRateAfterDeletion \u003d getResponseRate(responseShouldBeDeleted.getFeedbackSessionName(),"},{"lineNumber":294,"author":{"gitId":"-"},"content":"                responseShouldBeDeleted.getCourseId());"},{"lineNumber":295,"author":{"gitId":"-"},"content":"        assertEquals(originalResponseRate, responseRateAfterDeletion);"},{"lineNumber":296,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":297,"author":{"gitId":"-"},"content":""},{"lineNumber":298,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":299,"author":{"gitId":"-"},"content":"    public void testUpdateResponsesForDeletingStudent_rankRecipientQuestionResponse_newResponsesShouldBeConsistent()"},{"lineNumber":300,"author":{"gitId":"-"},"content":"            throws Exception {"},{"lineNumber":301,"author":{"gitId":"-"},"content":""},{"lineNumber":302,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes distinctRankQuestion \u003d"},{"lineNumber":303,"author":{"gitId":"-"},"content":"                getQuestionFromDatabase(questionTypeBundle, \"qn1InRANKSession\");"},{"lineNumber":304,"author":{"gitId":"-"},"content":"        String courseId \u003d distinctRankQuestion.getCourseId();"},{"lineNumber":305,"author":{"gitId":"-"},"content":"        List\u003cStudentAttributes\u003e studentsInCourse \u003d studentsLogic.getStudentsForCourse(courseId);"},{"lineNumber":306,"author":{"gitId":"-"},"content":"        Map\u003cString, List\u003cFeedbackResponseAttributes\u003e\u003e giverResponseMap \u003d new HashMap\u003c\u003e();"},{"lineNumber":307,"author":{"gitId":"-"},"content":""},{"lineNumber":308,"author":{"gitId":"-"},"content":"        for (StudentAttributes student : studentsInCourse) {"},{"lineNumber":309,"author":{"gitId":"-"},"content":"            giverResponseMap.put(student.getEmail(), frLogic.getFeedbackResponsesFromGiverForQuestion("},{"lineNumber":310,"author":{"gitId":"-"},"content":"                    distinctRankQuestion.getFeedbackQuestionId(), student.getEmail()));"},{"lineNumber":311,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":312,"author":{"gitId":"-"},"content":""},{"lineNumber":313,"author":{"gitId":"-"},"content":"        int numStudents;"},{"lineNumber":314,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e responsesFromStudent;"},{"lineNumber":315,"author":{"gitId":"-"},"content":"        while (!studentsInCourse.isEmpty()) {"},{"lineNumber":316,"author":{"gitId":"-"},"content":"            studentsLogic.deleteStudentCascade(courseId, studentsInCourse.get(0).getEmail());"},{"lineNumber":317,"author":{"gitId":"-"},"content":"            numStudents \u003d studentsLogic.getNumberOfStudentsForCourse(courseId);"},{"lineNumber":318,"author":{"gitId":"-"},"content":"            studentsInCourse \u003d studentsLogic.getStudentsForCourse(courseId);"},{"lineNumber":319,"author":{"gitId":"-"},"content":"            for (StudentAttributes student : studentsInCourse) {"},{"lineNumber":320,"author":{"gitId":"-"},"content":"                responsesFromStudent \u003d frLogic.getFeedbackResponsesFromGiverForQuestion("},{"lineNumber":321,"author":{"gitId":"-"},"content":"                        distinctRankQuestion.getId(), student.getEmail());"},{"lineNumber":322,"author":{"gitId":"-"},"content":"                assertTrue(areRankResponsesConsistent(responsesFromStudent, numStudents));"},{"lineNumber":323,"author":{"gitId":"-"},"content":"                assertTrue(areRankResponsesInSameOrder(giverResponseMap.get(student.getEmail()), responsesFromStudent));"},{"lineNumber":324,"author":{"gitId":"-"},"content":"                giverResponseMap.put(student.getEmail(), responsesFromStudent);"},{"lineNumber":325,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":326,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":327,"author":{"gitId":"-"},"content":""},{"lineNumber":328,"author":{"gitId":"-"},"content":"        refreshTestData();"},{"lineNumber":329,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes nonDistinctRankQuestion \u003d"},{"lineNumber":330,"author":{"gitId":"-"},"content":"                getQuestionFromDatabase(questionTypeBundle, \"qn2InRANKSession\");"},{"lineNumber":331,"author":{"gitId":"-"},"content":""},{"lineNumber":332,"author":{"gitId":"-"},"content":"        for (StudentAttributes student : studentsInCourse) {"},{"lineNumber":333,"author":{"gitId":"-"},"content":"            giverResponseMap.put(student.getEmail(), frLogic.getFeedbackResponsesFromGiverForQuestion("},{"lineNumber":334,"author":{"gitId":"-"},"content":"                    nonDistinctRankQuestion.getFeedbackQuestionId(), student.getEmail()));"},{"lineNumber":335,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":336,"author":{"gitId":"-"},"content":""},{"lineNumber":337,"author":{"gitId":"-"},"content":"        int numTeamMembers;"},{"lineNumber":338,"author":{"gitId":"-"},"content":"        while (!studentsInCourse.isEmpty()) {"},{"lineNumber":339,"author":{"gitId":"-"},"content":"            studentsLogic.deleteStudentCascade(courseId, studentsInCourse.get(0).getEmail());"},{"lineNumber":340,"author":{"gitId":"-"},"content":"            studentsInCourse \u003d studentsLogic.getStudentsForCourse(courseId);"},{"lineNumber":341,"author":{"gitId":"-"},"content":"            for (StudentAttributes student : studentsInCourse) {"},{"lineNumber":342,"author":{"gitId":"-"},"content":"                numTeamMembers \u003d studentsLogic.getStudentsForTeam(student.getTeam(), courseId).size();"},{"lineNumber":343,"author":{"gitId":"-"},"content":"                responsesFromStudent \u003d frLogic.getFeedbackResponsesFromGiverForQuestion("},{"lineNumber":344,"author":{"gitId":"-"},"content":"                        nonDistinctRankQuestion.getId(), student.getEmail());"},{"lineNumber":345,"author":{"gitId":"-"},"content":"                assertTrue(areRankResponsesConsistent(responsesFromStudent, numTeamMembers));"},{"lineNumber":346,"author":{"gitId":"-"},"content":"                assertTrue(areRankResponsesInSameOrder(giverResponseMap.get(student.getEmail()), responsesFromStudent));"},{"lineNumber":347,"author":{"gitId":"-"},"content":"                giverResponseMap.put(student.getEmail(), responsesFromStudent);"},{"lineNumber":348,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":349,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":350,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":351,"author":{"gitId":"-"},"content":""},{"lineNumber":352,"author":{"gitId":"-"},"content":"    private boolean areRankResponsesConsistent(List\u003cFeedbackResponseAttributes\u003e responses, int maxRank) {"},{"lineNumber":353,"author":{"gitId":"-"},"content":"        for (FeedbackResponseAttributes response : responses) {"},{"lineNumber":354,"author":{"gitId":"-"},"content":"            if (!response.getFeedbackQuestionType().equals(FeedbackQuestionType.RANK_RECIPIENTS)) {"},{"lineNumber":355,"author":{"gitId":"-"},"content":"                return false;"},{"lineNumber":356,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":357,"author":{"gitId":"-"},"content":"            FeedbackRankRecipientsResponseDetails responseDetails \u003d"},{"lineNumber":358,"author":{"gitId":"-"},"content":"                    (FeedbackRankRecipientsResponseDetails) response.getResponseDetails();"},{"lineNumber":359,"author":{"gitId":"-"},"content":"            if (responseDetails.getAnswer() \u003e maxRank) {"},{"lineNumber":360,"author":{"gitId":"-"},"content":"                return false;"},{"lineNumber":361,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":362,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":363,"author":{"gitId":"-"},"content":"        return true;"},{"lineNumber":364,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":365,"author":{"gitId":"-"},"content":""},{"lineNumber":366,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":367,"author":{"gitId":"-"},"content":"     * Checks whether two list of responses for \u0027rank recipient question\u0027 have the same order for each recipient."},{"lineNumber":368,"author":{"gitId":"-"},"content":"     * The recipients of the updated responses should be a subset of that of the original responses."},{"lineNumber":369,"author":{"gitId":"-"},"content":"     * @param responses the original response list"},{"lineNumber":370,"author":{"gitId":"-"},"content":"     * @param modifiedResponses the updated response list"},{"lineNumber":371,"author":{"gitId":"-"},"content":"     * @return true if the modified response list maintain the original order of the responses"},{"lineNumber":372,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":373,"author":{"gitId":"-"},"content":"    private boolean areRankResponsesInSameOrder(List\u003cFeedbackResponseAttributes\u003e responses,"},{"lineNumber":374,"author":{"gitId":"-"},"content":"                                                List\u003cFeedbackResponseAttributes\u003e modifiedResponses) {"},{"lineNumber":375,"author":{"gitId":"-"},"content":"        if (responses.isEmpty()) {"},{"lineNumber":376,"author":{"gitId":"-"},"content":"            return modifiedResponses.isEmpty();"},{"lineNumber":377,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":378,"author":{"gitId":"-"},"content":"        if (modifiedResponses.isEmpty()) {"},{"lineNumber":379,"author":{"gitId":"-"},"content":"            return true;"},{"lineNumber":380,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":381,"author":{"gitId":"-"},"content":""},{"lineNumber":382,"author":{"gitId":"-"},"content":"        // Expects responses to rank recipient questions."},{"lineNumber":383,"author":{"gitId":"-"},"content":"        for (FeedbackResponseAttributes r : responses) {"},{"lineNumber":384,"author":{"gitId":"-"},"content":"            assert r.getFeedbackQuestionType().equals(FeedbackQuestionType.RANK_RECIPIENTS);"},{"lineNumber":385,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":386,"author":{"gitId":"-"},"content":"        for (FeedbackResponseAttributes r : modifiedResponses) {"},{"lineNumber":387,"author":{"gitId":"-"},"content":"            assert r.getFeedbackQuestionType().equals(FeedbackQuestionType.RANK_RECIPIENTS);"},{"lineNumber":388,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":389,"author":{"gitId":"-"},"content":""},{"lineNumber":390,"author":{"gitId":"-"},"content":"        responses.sort(Comparator.comparing("},{"lineNumber":391,"author":{"gitId":"-"},"content":"                response -\u003e ((FeedbackRankRecipientsResponseDetails) response.getResponseDetails()).getAnswer()));"},{"lineNumber":392,"author":{"gitId":"-"},"content":"        modifiedResponses.sort(Comparator.comparing("},{"lineNumber":393,"author":{"gitId":"-"},"content":"                response -\u003e ((FeedbackRankRecipientsResponseDetails) response.getResponseDetails()).getAnswer()));"},{"lineNumber":394,"author":{"gitId":"-"},"content":""},{"lineNumber":395,"author":{"gitId":"-"},"content":"        int pointer1 \u003d 0;"},{"lineNumber":396,"author":{"gitId":"-"},"content":"        int pointer2 \u003d 0;"},{"lineNumber":397,"author":{"gitId":"-"},"content":"        String recipient1Email;"},{"lineNumber":398,"author":{"gitId":"-"},"content":"        String recipient2Email;"},{"lineNumber":399,"author":{"gitId":"-"},"content":"        while (pointer1 \u003c responses.size() \u0026\u0026 pointer2 \u003c modifiedResponses.size()) {"},{"lineNumber":400,"author":{"gitId":"-"},"content":"            recipient1Email \u003d responses.get(pointer1).getRecipient();"},{"lineNumber":401,"author":{"gitId":"-"},"content":"            recipient2Email \u003d responses.get(pointer2).getRecipient();"},{"lineNumber":402,"author":{"gitId":"-"},"content":"            if (recipient1Email.equals(recipient2Email)) {"},{"lineNumber":403,"author":{"gitId":"-"},"content":"                pointer1++;"},{"lineNumber":404,"author":{"gitId":"-"},"content":"                pointer2++;"},{"lineNumber":405,"author":{"gitId":"-"},"content":"            } else {"},{"lineNumber":406,"author":{"gitId":"-"},"content":"                pointer1++; // Skips one response from first list."},{"lineNumber":407,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":408,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":409,"author":{"gitId":"-"},"content":""},{"lineNumber":410,"author":{"gitId":"-"},"content":"        return pointer2 \u003d\u003d modifiedResponses.size();"},{"lineNumber":411,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":412,"author":{"gitId":"-"},"content":""},{"lineNumber":413,"author":{"gitId":"-"},"content":"    private int numResponsesFromGiverInSession(String studentEmail, String sessionName, String courseId) {"},{"lineNumber":414,"author":{"gitId":"-"},"content":"        int numResponses \u003d 0;"},{"lineNumber":415,"author":{"gitId":"-"},"content":"        for (FeedbackResponseAttributes response : questionTypeBundle.feedbackResponses.values()) {"},{"lineNumber":416,"author":{"gitId":"-"},"content":"            if (response.getGiver().equals(studentEmail) \u0026\u0026 response.getFeedbackSessionName().equals(sessionName)"},{"lineNumber":417,"author":{"gitId":"-"},"content":"                    \u0026\u0026 response.getCourseId().equals(courseId)) {"},{"lineNumber":418,"author":{"gitId":"-"},"content":"                numResponses++;"},{"lineNumber":419,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":420,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":421,"author":{"gitId":"-"},"content":"        return numResponses;"},{"lineNumber":422,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":423,"author":{"gitId":"-"},"content":""},{"lineNumber":424,"author":{"gitId":"-"},"content":"    private int getResponseRate(String sessionName, String courseId) {"},{"lineNumber":425,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes sessionFromDatabase \u003d fsLogic.getFeedbackSession(sessionName, courseId);"},{"lineNumber":426,"author":{"gitId":"-"},"content":"        return fsLogic.getActualTotalSubmission(sessionFromDatabase);"},{"lineNumber":427,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":428,"author":{"gitId":"-"},"content":""},{"lineNumber":429,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":430,"author":{"gitId":"-"},"content":"    public void testUpdateFeedbackResponsesForChangingEmail() throws Exception {"},{"lineNumber":431,"author":{"gitId":"-"},"content":"        ______TS(\"standard update email case\");"},{"lineNumber":432,"author":{"gitId":"-"},"content":""},{"lineNumber":433,"author":{"gitId":"-"},"content":"        // Student 1 currently has 11 responses to him and 2 from himself."},{"lineNumber":434,"author":{"gitId":"-"},"content":"        // Student 1 currently has 1 response comment for responses from instructor to him"},{"lineNumber":435,"author":{"gitId":"-"},"content":"        // and 1 response comment from responses from himself."},{"lineNumber":436,"author":{"gitId":"-"},"content":"        StudentAttributes studentToUpdate \u003d questionTypeBundle.students.get(\"student2InCourse1\");"},{"lineNumber":437,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e responsesForReceiver \u003d"},{"lineNumber":438,"author":{"gitId":"-"},"content":"                frLogic.getFeedbackResponsesForReceiverForCourse("},{"lineNumber":439,"author":{"gitId":"-"},"content":"                        studentToUpdate.getCourse(), studentToUpdate.getEmail());"},{"lineNumber":440,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e responsesFromGiver \u003d"},{"lineNumber":441,"author":{"gitId":"-"},"content":"                frLogic.getFeedbackResponsesFromGiverForCourse("},{"lineNumber":442,"author":{"gitId":"-"},"content":"                        studentToUpdate.getCourse(), studentToUpdate.getEmail());"},{"lineNumber":443,"author":{"gitId":"-"},"content":"        Set\u003cString\u003e responseIdsToAndFromStudent \u003d new HashSet\u003c\u003e();"},{"lineNumber":444,"author":{"gitId":"-"},"content":"        responseIdsToAndFromStudent.addAll("},{"lineNumber":445,"author":{"gitId":"-"},"content":"                responsesForReceiver.stream().map(FeedbackResponseAttributes::getId).collect(Collectors.toList()));"},{"lineNumber":446,"author":{"gitId":"-"},"content":"        responseIdsToAndFromStudent.addAll("},{"lineNumber":447,"author":{"gitId":"-"},"content":"                responsesFromGiver.stream().map(FeedbackResponseAttributes::getId).collect(Collectors.toList()));"},{"lineNumber":448,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseCommentAttributes\u003e responseCommentsForStudent \u003d"},{"lineNumber":449,"author":{"gitId":"-"},"content":"                getFeedbackResponseCommentsForResponsesFromDatabase(responseIdsToAndFromStudent);"},{"lineNumber":450,"author":{"gitId":"-"},"content":""},{"lineNumber":451,"author":{"gitId":"-"},"content":"        assertEquals(11, responsesForReceiver.size());"},{"lineNumber":452,"author":{"gitId":"-"},"content":"        assertEquals(8, responsesFromGiver.size());"},{"lineNumber":453,"author":{"gitId":"-"},"content":"        assertEquals(2, responseCommentsForStudent.size());"},{"lineNumber":454,"author":{"gitId":"-"},"content":"        // student\u0027s comment"},{"lineNumber":455,"author":{"gitId":"-"},"content":"        assertTrue(responseCommentsForStudent.stream().anyMatch(r -\u003e r.isCommentFromFeedbackParticipant()));"},{"lineNumber":456,"author":{"gitId":"-"},"content":"        // instructor comment"},{"lineNumber":457,"author":{"gitId":"-"},"content":"        assertTrue(responseCommentsForStudent.stream().anyMatch(r -\u003e !r.isCommentFromFeedbackParticipant()));"},{"lineNumber":458,"author":{"gitId":"-"},"content":""},{"lineNumber":459,"author":{"gitId":"-"},"content":"        frLogic.updateFeedbackResponsesForChangingEmail("},{"lineNumber":460,"author":{"gitId":"-"},"content":"                studentToUpdate.getCourse(), studentToUpdate.getEmail(), \"new@email.tmt\");"},{"lineNumber":461,"author":{"gitId":"-"},"content":""},{"lineNumber":462,"author":{"gitId":"-"},"content":"        responsesForReceiver \u003d frLogic.getFeedbackResponsesForReceiverForCourse("},{"lineNumber":463,"author":{"gitId":"-"},"content":"                studentToUpdate.getCourse(), studentToUpdate.getEmail());"},{"lineNumber":464,"author":{"gitId":"-"},"content":"        responsesFromGiver \u003d frLogic.getFeedbackResponsesFromGiverForCourse("},{"lineNumber":465,"author":{"gitId":"-"},"content":"                studentToUpdate.getCourse(), studentToUpdate.getEmail());"},{"lineNumber":466,"author":{"gitId":"-"},"content":"        responseIdsToAndFromStudent \u003d new HashSet\u003c\u003e();"},{"lineNumber":467,"author":{"gitId":"-"},"content":"        responseIdsToAndFromStudent.addAll("},{"lineNumber":468,"author":{"gitId":"-"},"content":"                responsesForReceiver.stream().map(FeedbackResponseAttributes::getId).collect(Collectors.toList()));"},{"lineNumber":469,"author":{"gitId":"-"},"content":"        responseIdsToAndFromStudent.addAll("},{"lineNumber":470,"author":{"gitId":"-"},"content":"                responsesFromGiver.stream().map(FeedbackResponseAttributes::getId).collect(Collectors.toList()));"},{"lineNumber":471,"author":{"gitId":"-"},"content":"        responseCommentsForStudent \u003d"},{"lineNumber":472,"author":{"gitId":"-"},"content":"                getFeedbackResponseCommentsForResponsesFromDatabase(responseIdsToAndFromStudent);"},{"lineNumber":473,"author":{"gitId":"-"},"content":""},{"lineNumber":474,"author":{"gitId":"-"},"content":"        assertEquals(0, responsesForReceiver.size());"},{"lineNumber":475,"author":{"gitId":"-"},"content":"        assertEquals(0, responsesFromGiver.size());"},{"lineNumber":476,"author":{"gitId":"-"},"content":"        assertEquals(0, responseCommentsForStudent.size());"},{"lineNumber":477,"author":{"gitId":"-"},"content":""},{"lineNumber":478,"author":{"gitId":"-"},"content":"        responsesForReceiver \u003d frLogic.getFeedbackResponsesForReceiverForCourse("},{"lineNumber":479,"author":{"gitId":"-"},"content":"                studentToUpdate.getCourse(), \"new@email.tmt\");"},{"lineNumber":480,"author":{"gitId":"-"},"content":"        responsesFromGiver \u003d frLogic.getFeedbackResponsesFromGiverForCourse("},{"lineNumber":481,"author":{"gitId":"-"},"content":"                studentToUpdate.getCourse(), \"new@email.tmt\");"},{"lineNumber":482,"author":{"gitId":"-"},"content":"        responseIdsToAndFromStudent \u003d new HashSet\u003c\u003e();"},{"lineNumber":483,"author":{"gitId":"-"},"content":"        responseIdsToAndFromStudent.addAll("},{"lineNumber":484,"author":{"gitId":"-"},"content":"                responsesForReceiver.stream().map(FeedbackResponseAttributes::getId).collect(Collectors.toList()));"},{"lineNumber":485,"author":{"gitId":"-"},"content":"        responseIdsToAndFromStudent.addAll("},{"lineNumber":486,"author":{"gitId":"-"},"content":"                responsesFromGiver.stream().map(FeedbackResponseAttributes::getId).collect(Collectors.toList()));"},{"lineNumber":487,"author":{"gitId":"-"},"content":"        responseCommentsForStudent \u003d"},{"lineNumber":488,"author":{"gitId":"-"},"content":"                getFeedbackResponseCommentsForResponsesFromDatabase(responseIdsToAndFromStudent);"},{"lineNumber":489,"author":{"gitId":"-"},"content":""},{"lineNumber":490,"author":{"gitId":"-"},"content":"        assertEquals(11, responsesForReceiver.size());"},{"lineNumber":491,"author":{"gitId":"-"},"content":"        assertEquals(8, responsesFromGiver.size());"},{"lineNumber":492,"author":{"gitId":"-"},"content":"        assertEquals(2, responseCommentsForStudent.size());"},{"lineNumber":493,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":494,"author":{"gitId":"-"},"content":""},{"lineNumber":495,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":496,"author":{"gitId":"-"},"content":"    public void testIsNameVisibleTo() {"},{"lineNumber":497,"author":{"gitId":"-"},"content":""},{"lineNumber":498,"author":{"gitId":"-"},"content":"        ______TS(\"testIsNameVisibleTo\");"},{"lineNumber":499,"author":{"gitId":"-"},"content":""},{"lineNumber":500,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor \u003d dataBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":501,"author":{"gitId":"-"},"content":"        StudentAttributes student \u003d dataBundle.students.get(\"student1InCourse1\");"},{"lineNumber":502,"author":{"gitId":"-"},"content":"        StudentAttributes student2 \u003d dataBundle.students.get(\"student2InCourse1\");"},{"lineNumber":503,"author":{"gitId":"-"},"content":"        StudentAttributes student3 \u003d dataBundle.students.get(\"student3InCourse1\");"},{"lineNumber":504,"author":{"gitId":"-"},"content":"        StudentAttributes student5 \u003d dataBundle.students.get(\"student5InCourse1\");"},{"lineNumber":505,"author":{"gitId":"-"},"content":""},{"lineNumber":506,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fq \u003d getQuestionFromDatabase(\"qn3InSession1InCourse1\");"},{"lineNumber":507,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr \u003d getResponseFromDatabase(\"response1ForQ3S1C1\");"},{"lineNumber":508,"author":{"gitId":"-"},"content":""},{"lineNumber":509,"author":{"gitId":"-"},"content":"        CourseRoster roster \u003d new CourseRoster("},{"lineNumber":510,"author":{"gitId":"-"},"content":"                studentsLogic.getStudentsForCourse(fq.getCourseId()),"},{"lineNumber":511,"author":{"gitId":"-"},"content":"                instructorsLogic.getInstructorsForCourse(fq.getCourseId()));"},{"lineNumber":512,"author":{"gitId":"-"},"content":""},{"lineNumber":513,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isNameVisibleToUser(fq, fr, instructor.getEmail(), true, true, roster));"},{"lineNumber":514,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isNameVisibleToUser(fq, fr, instructor.getEmail(), true, false, roster));"},{"lineNumber":515,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isNameVisibleToUser(fq, fr, student.getEmail(), false, false, roster));"},{"lineNumber":516,"author":{"gitId":"-"},"content":""},{"lineNumber":517,"author":{"gitId":"-"},"content":"        ______TS(\"test if visible to own team members\");"},{"lineNumber":518,"author":{"gitId":"-"},"content":""},{"lineNumber":519,"author":{"gitId":"-"},"content":"        fr.setGiver(student.getEmail());"},{"lineNumber":520,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isNameVisibleToUser(fq, fr, student.getEmail(), false, false, roster));"},{"lineNumber":521,"author":{"gitId":"-"},"content":""},{"lineNumber":522,"author":{"gitId":"-"},"content":"        ______TS(\"test if visible to receiver/reciever team members\");"},{"lineNumber":523,"author":{"gitId":"-"},"content":""},{"lineNumber":524,"author":{"gitId":"-"},"content":"        fq.setRecipientType(FeedbackParticipantType.TEAMS);"},{"lineNumber":525,"author":{"gitId":"-"},"content":"        fq.getShowRecipientNameTo().clear();"},{"lineNumber":526,"author":{"gitId":"-"},"content":"        fq.getShowRecipientNameTo().add(FeedbackParticipantType.RECEIVER);"},{"lineNumber":527,"author":{"gitId":"-"},"content":"        fr.setRecipient(student.getTeam());"},{"lineNumber":528,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isNameVisibleToUser(fq, fr, student.getEmail(), false, false, roster));"},{"lineNumber":529,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isNameVisibleToUser(fq, fr, student3.getEmail(), false, false, roster));"},{"lineNumber":530,"author":{"gitId":"-"},"content":""},{"lineNumber":531,"author":{"gitId":"-"},"content":"        fq.setRecipientType(FeedbackParticipantType.STUDENTS);"},{"lineNumber":532,"author":{"gitId":"-"},"content":"        fr.setRecipient(student.getEmail());"},{"lineNumber":533,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isNameVisibleToUser(fq, fr, student.getEmail(), false, false, roster));"},{"lineNumber":534,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isNameVisibleToUser(fq, fr, student2.getEmail(), false, false, roster));"},{"lineNumber":535,"author":{"gitId":"-"},"content":""},{"lineNumber":536,"author":{"gitId":"-"},"content":"        fq.setRecipientType(FeedbackParticipantType.TEAMS);"},{"lineNumber":537,"author":{"gitId":"-"},"content":"        fq.getShowRecipientNameTo().clear();"},{"lineNumber":538,"author":{"gitId":"-"},"content":"        fq.getShowRecipientNameTo().add(FeedbackParticipantType.RECEIVER_TEAM_MEMBERS);"},{"lineNumber":539,"author":{"gitId":"-"},"content":"        fr.setRecipient(student.getTeam());"},{"lineNumber":540,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isNameVisibleToUser(fq, fr, student.getEmail(), false, false, roster));"},{"lineNumber":541,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isNameVisibleToUser(fq, fr, student3.getEmail(), false, false, roster));"},{"lineNumber":542,"author":{"gitId":"-"},"content":""},{"lineNumber":543,"author":{"gitId":"-"},"content":"        fq.setRecipientType(FeedbackParticipantType.STUDENTS);"},{"lineNumber":544,"author":{"gitId":"-"},"content":"        fr.setRecipient(student.getEmail());"},{"lineNumber":545,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isNameVisibleToUser(fq, fr, student.getEmail(), false, false, roster));"},{"lineNumber":546,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isNameVisibleToUser(fq, fr, student3.getEmail(), false, false, roster));"},{"lineNumber":547,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isNameVisibleToUser(fq, fr, student5.getEmail(), false, false, roster));"},{"lineNumber":548,"author":{"gitId":"-"},"content":""},{"lineNumber":549,"author":{"gitId":"-"},"content":"        ______TS(\"test if visible to receiver/giver team members for team questions\");"},{"lineNumber":550,"author":{"gitId":"-"},"content":""},{"lineNumber":551,"author":{"gitId":"-"},"content":"        fq.setRecipientType(FeedbackParticipantType.TEAMS);"},{"lineNumber":552,"author":{"gitId":"-"},"content":"        fq.getShowRecipientNameTo().clear();"},{"lineNumber":553,"author":{"gitId":"-"},"content":"        fq.getShowRecipientNameTo().add(FeedbackParticipantType.RECEIVER_TEAM_MEMBERS);"},{"lineNumber":554,"author":{"gitId":"-"},"content":"        fq.setGiverType(FeedbackParticipantType.TEAMS);"},{"lineNumber":555,"author":{"gitId":"-"},"content":"        fq.getShowGiverNameTo().clear();"},{"lineNumber":556,"author":{"gitId":"-"},"content":"        fq.getShowGiverNameTo().add(FeedbackParticipantType.OWN_TEAM_MEMBERS_INCLUDING_SELF);"},{"lineNumber":557,"author":{"gitId":"-"},"content":""},{"lineNumber":558,"author":{"gitId":"-"},"content":"        fr.setRecipient(student5.getTeam());"},{"lineNumber":559,"author":{"gitId":"-"},"content":"        fr.setGiver(student.getTeam());"},{"lineNumber":560,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isNameVisibleToUser(fq, fr, student.getEmail(), false, false, roster));"},{"lineNumber":561,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isNameVisibleToUser(fq, fr, student3.getEmail(), false, false, roster));"},{"lineNumber":562,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isNameVisibleToUser(fq, fr, student5.getEmail(), false, false, roster));"},{"lineNumber":563,"author":{"gitId":"-"},"content":""},{"lineNumber":564,"author":{"gitId":"-"},"content":"        ______TS(\"test anonymous team recipients\");"},{"lineNumber":565,"author":{"gitId":"-"},"content":"        // Only members of the recipient team should be able to see the recipient name"},{"lineNumber":566,"author":{"gitId":"-"},"content":"        fq.setRecipientType(FeedbackParticipantType.TEAMS);"},{"lineNumber":567,"author":{"gitId":"-"},"content":"        fq.getShowRecipientNameTo().clear();"},{"lineNumber":568,"author":{"gitId":"-"},"content":"        fq.getShowRecipientNameTo().add(FeedbackParticipantType.RECEIVER);"},{"lineNumber":569,"author":{"gitId":"-"},"content":"        fq.getShowResponsesTo().add(FeedbackParticipantType.STUDENTS);"},{"lineNumber":570,"author":{"gitId":"-"},"content":"        fr.setRecipient(\"Team 1.1\");"},{"lineNumber":571,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isNameVisibleToUser(fq, fr, student5.getEmail(), false, false, roster));"},{"lineNumber":572,"author":{"gitId":"-"},"content":""},{"lineNumber":573,"author":{"gitId":"-"},"content":"        ______TS(\"null question\");"},{"lineNumber":574,"author":{"gitId":"-"},"content":""},{"lineNumber":575,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isNameVisibleToUser(null, fr, student.getEmail(), false, false, roster));"},{"lineNumber":576,"author":{"gitId":"-"},"content":""},{"lineNumber":577,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":578,"author":{"gitId":"-"},"content":""},{"lineNumber":579,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":580,"author":{"gitId":"-"},"content":"    public void testIsResponseVisibleForUser() {"},{"lineNumber":581,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor1 \u003d responseVisibilityBundle.instructors.get(\"FRV.instructor1OfCourse1\");"},{"lineNumber":582,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor2 \u003d responseVisibilityBundle.instructors.get(\"FRV.instructor2OfCourse1\");"},{"lineNumber":583,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor3 \u003d responseVisibilityBundle.instructors.get(\"FRV.instructor3OfCourse1\");"},{"lineNumber":584,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor4 \u003d responseVisibilityBundle.instructors.get(\"FRV.instructor4OfCourse1\");"},{"lineNumber":585,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor5 \u003d responseVisibilityBundle.instructors.get(\"FRV.instructor5OfCourse1\");"},{"lineNumber":586,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor6 \u003d responseVisibilityBundle.instructors.get(\"FRV.instructor6OfCourse1\");"},{"lineNumber":587,"author":{"gitId":"-"},"content":""},{"lineNumber":588,"author":{"gitId":"-"},"content":"        StudentAttributes student1 \u003d responseVisibilityBundle.students.get(\"FRV.student1InCourse1\");"},{"lineNumber":589,"author":{"gitId":"-"},"content":"        StudentAttributes student2 \u003d responseVisibilityBundle.students.get(\"FRV.student2InCourse1\");"},{"lineNumber":590,"author":{"gitId":"-"},"content":"        StudentAttributes student3 \u003d responseVisibilityBundle.students.get(\"FRV.student3InCourse1\");"},{"lineNumber":591,"author":{"gitId":"-"},"content":"        StudentAttributes student4 \u003d responseVisibilityBundle.students.get(\"FRV.student4InCourse1\");"},{"lineNumber":592,"author":{"gitId":"-"},"content":"        StudentAttributes student5 \u003d responseVisibilityBundle.students.get(\"FRV.student5InCourse1\");"},{"lineNumber":593,"author":{"gitId":"-"},"content":"        StudentAttributes student6 \u003d responseVisibilityBundle.students.get(\"FRV.student6InCourse1\");"},{"lineNumber":594,"author":{"gitId":"-"},"content":"        StudentAttributes student7 \u003d responseVisibilityBundle.students.get(\"FRV.student7InCourse1\");"},{"lineNumber":595,"author":{"gitId":"-"},"content":"        StudentAttributes student8 \u003d responseVisibilityBundle.students.get(\"FRV.student8InCourse1\");"},{"lineNumber":596,"author":{"gitId":"-"},"content":""},{"lineNumber":597,"author":{"gitId":"-"},"content":"        // stu -\u003e self : instructors"},{"lineNumber":598,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fq11 \u003d responseVisibilityBundle.feedbackQuestions.get(\"FRV.qn1InSession1InCourse1\");"},{"lineNumber":599,"author":{"gitId":"-"},"content":"        // stu -\u003e stu : instructors, receiver"},{"lineNumber":600,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fq12 \u003d responseVisibilityBundle.feedbackQuestions.get(\"FRV.qn2InSession1InCourse1\");"},{"lineNumber":601,"author":{"gitId":"-"},"content":"        // self -\u003e none : other students, instructors"},{"lineNumber":602,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fq13 \u003d responseVisibilityBundle.feedbackQuestions.get(\"FRV.qn3InSession1InCourse1\");"},{"lineNumber":603,"author":{"gitId":"-"},"content":"        // team -\u003e ins : instructors, other students"},{"lineNumber":604,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fq16 \u003d responseVisibilityBundle.feedbackQuestions.get(\"FRV.qn6InSession1InCourse1\");"},{"lineNumber":605,"author":{"gitId":"-"},"content":"        // stu -\u003e stu in same section : own team members, receiver team members"},{"lineNumber":606,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fq17 \u003d responseVisibilityBundle.feedbackQuestions.get(\"FRV.qn7InSession1InCourse1\");"},{"lineNumber":607,"author":{"gitId":"-"},"content":"        // ins -\u003e ins : -"},{"lineNumber":608,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fq18 \u003d responseVisibilityBundle.feedbackQuestions.get(\"FRV.qn8InSession1InCourse1\");"},{"lineNumber":609,"author":{"gitId":"-"},"content":"        // ins -\u003e ins team : instructors"},{"lineNumber":610,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fq19 \u003d responseVisibilityBundle.feedbackQuestions.get(\"FRV.qn9InSession1InCourse1\");"},{"lineNumber":611,"author":{"gitId":"-"},"content":"        // team -\u003e team : receiver"},{"lineNumber":612,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fq21 \u003d responseVisibilityBundle.feedbackQuestions.get(\"FRV.qn1InSession2InCourse1\");"},{"lineNumber":613,"author":{"gitId":"-"},"content":"        // stu -\u003e own team mem : receiver, own team members"},{"lineNumber":614,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fq22 \u003d responseVisibilityBundle.feedbackQuestions.get(\"FRV.qn2InSession2InCourse1\");"},{"lineNumber":615,"author":{"gitId":"-"},"content":"        // ins -\u003e stu : receiver, instructors, other students, receiver\u0027s team members"},{"lineNumber":616,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fq23 \u003d responseVisibilityBundle.feedbackQuestions.get(\"FRV.qn3InSession2InCourse1\");"},{"lineNumber":617,"author":{"gitId":"-"},"content":"        // stu -\u003e ins : receiver"},{"lineNumber":618,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fq24 \u003d responseVisibilityBundle.feedbackQuestions.get(\"FRV.qn4InSession2InCourse1\");"},{"lineNumber":619,"author":{"gitId":"-"},"content":"        // stu -\u003e own team : own team members, instructors"},{"lineNumber":620,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fq25 \u003d responseVisibilityBundle.feedbackQuestions.get(\"FRV.qn5InSession2InCourse1\");"},{"lineNumber":621,"author":{"gitId":"-"},"content":"        // stu -\u003e team : other students"},{"lineNumber":622,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fq26 \u003d responseVisibilityBundle.feedbackQuestions.get(\"FRV.qn6InSession2InCourse1\");"},{"lineNumber":623,"author":{"gitId":"-"},"content":"        // team -\u003e stu in same section : instructors"},{"lineNumber":624,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fq27 \u003d responseVisibilityBundle.feedbackQuestions.get(\"FRV.qn7InSession2InCourse1\");"},{"lineNumber":625,"author":{"gitId":"-"},"content":"        // team -\u003e team in same section : receiver"},{"lineNumber":626,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fq28 \u003d responseVisibilityBundle.feedbackQuestions.get(\"FRV.qn8InSession2InCourse1\");"},{"lineNumber":627,"author":{"gitId":"-"},"content":"        // stu -\u003e team in same section : instructors"},{"lineNumber":628,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fq29 \u003d responseVisibilityBundle.feedbackQuestions.get(\"FRV.qn9InSession2InCourse1\");"},{"lineNumber":629,"author":{"gitId":"hhdqirui"},"content":"        // stu -\u003e team excluding self : instructors, receiver"},{"lineNumber":630,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestionAttributes fq30 \u003d responseVisibilityBundle.feedbackQuestions.get(\"FRV.qn11InSession2InCourse1\");"},{"lineNumber":631,"author":{"gitId":"-"},"content":"        // ins -\u003e team : instructors"},{"lineNumber":632,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fq20 \u003d responseVisibilityBundle.feedbackQuestions.get(\"FRV.qn10InSession2InCourse1\");"},{"lineNumber":633,"author":{"gitId":"-"},"content":""},{"lineNumber":634,"author":{"gitId":"-"},"content":"        // stu1 -\u003e stu1 (self feedback)"},{"lineNumber":635,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr111 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response1ForQ1S1C1\");"},{"lineNumber":636,"author":{"gitId":"-"},"content":"        // stu5 -\u003e stu5 (self feedback)"},{"lineNumber":637,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr112 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response2ForQ1S1C1\");"},{"lineNumber":638,"author":{"gitId":"-"},"content":"        // stu2 -\u003e stu5"},{"lineNumber":639,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr121 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response1ForQ2S1C1\");"},{"lineNumber":640,"author":{"gitId":"-"},"content":"        // stu5 -\u003e stu2"},{"lineNumber":641,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr122 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response2ForQ2S1C1\");"},{"lineNumber":642,"author":{"gitId":"-"},"content":"        // stu3 -\u003e stu2"},{"lineNumber":643,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr123 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response3ForQ2S1C1\");"},{"lineNumber":644,"author":{"gitId":"-"},"content":"        // ins1 -\u003e General"},{"lineNumber":645,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr131 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response1ForQ3S1C1\");"},{"lineNumber":646,"author":{"gitId":"-"},"content":"        // team2 -\u003e ins2"},{"lineNumber":647,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr161 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response1ForQ6S1C1\");"},{"lineNumber":648,"author":{"gitId":"-"},"content":"        // team3 -\u003e ins2"},{"lineNumber":649,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr162 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response2ForQ6S1C1\");"},{"lineNumber":650,"author":{"gitId":"-"},"content":"        // stu1 -\u003e stu6"},{"lineNumber":651,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr171 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response1ForQ7S1C1\");"},{"lineNumber":652,"author":{"gitId":"-"},"content":"        // ins1 -\u003e ins2"},{"lineNumber":653,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr181 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response1ForQ8S1C1\");"},{"lineNumber":654,"author":{"gitId":"-"},"content":"        // ins2 -\u003e ins team"},{"lineNumber":655,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr191 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response1ForQ9S1C1\");"},{"lineNumber":656,"author":{"gitId":"-"},"content":"        // team1 -\u003e team2"},{"lineNumber":657,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr211 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response1ForQ1S2C1\");"},{"lineNumber":658,"author":{"gitId":"-"},"content":"        // stu4 -\u003e stu3"},{"lineNumber":659,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr221 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response1ForQ2S2C1\");"},{"lineNumber":660,"author":{"gitId":"-"},"content":"        // ins1 -\u003e stu3"},{"lineNumber":661,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr231 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response1ForQ3S2C1\");"},{"lineNumber":662,"author":{"gitId":"-"},"content":"        // ins6 -\u003e stu5"},{"lineNumber":663,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr232 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response2ForQ3S2C1\");"},{"lineNumber":664,"author":{"gitId":"-"},"content":"        // stu1 -\u003e ins1"},{"lineNumber":665,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr241 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response1ForQ4S2C1\");"},{"lineNumber":666,"author":{"gitId":"-"},"content":"        // stu1 -\u003e ins4"},{"lineNumber":667,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr242 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response2ForQ4S2C1\");"},{"lineNumber":668,"author":{"gitId":"-"},"content":"        // stu6 -\u003e team3 (own team)"},{"lineNumber":669,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr251 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response1ForQ5S2C1\");"},{"lineNumber":670,"author":{"gitId":"-"},"content":"        // stu5 -\u003e team2 (own team)"},{"lineNumber":671,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr252 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response2ForQ5S2C1\");"},{"lineNumber":672,"author":{"gitId":"-"},"content":"        // stu1 -\u003e team3"},{"lineNumber":673,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr261 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response1ForQ6S2C1\");"},{"lineNumber":674,"author":{"gitId":"-"},"content":"        // team1 -\u003e stu7"},{"lineNumber":675,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr271 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response1ForQ7S2C1\");"},{"lineNumber":676,"author":{"gitId":"-"},"content":"        // team3 -\u003e team1"},{"lineNumber":677,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr281 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response1ForQ8S2C1\");"},{"lineNumber":678,"author":{"gitId":"-"},"content":"        // stu8 -\u003e team1"},{"lineNumber":679,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr291 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response1ForQ9S2C1\");"},{"lineNumber":680,"author":{"gitId":"hhdqirui"},"content":"        // stu1 -\u003e team2"},{"lineNumber":681,"author":{"gitId":"hhdqirui"},"content":"        FeedbackResponseAttributes fr2111 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response1ForQ11S2C1\");"},{"lineNumber":682,"author":{"gitId":"hhdqirui"},"content":"        // stu6 -\u003e team1"},{"lineNumber":683,"author":{"gitId":"hhdqirui"},"content":"        FeedbackResponseAttributes fr2112 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response2ForQ11S2C1\");"},{"lineNumber":684,"author":{"gitId":"hhdqirui"},"content":"        // stu7 -\u003e team2"},{"lineNumber":685,"author":{"gitId":"hhdqirui"},"content":"        FeedbackResponseAttributes fr2113 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response3ForQ11S2C1\");"},{"lineNumber":686,"author":{"gitId":"-"},"content":"        // ins2 -\u003e team2"},{"lineNumber":687,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fr201 \u003d responseVisibilityBundle.feedbackResponses.get(\"FRV.response1ForQ10S2C1\");"},{"lineNumber":688,"author":{"gitId":"-"},"content":""},{"lineNumber":689,"author":{"gitId":"-"},"content":"        Set\u003cString\u003e studentsEmailInTeam1 \u003d new HashSet\u003c\u003e("},{"lineNumber":690,"author":{"gitId":"-"},"content":"                Arrays.asList(student1.getEmail(), student2.getEmail(), student3.getEmail(), student4.getEmail()));"},{"lineNumber":691,"author":{"gitId":"-"},"content":"        Set\u003cString\u003e studentsEmailInTeam2 \u003d new HashSet\u003c\u003e(Arrays.asList(student5.getEmail()));"},{"lineNumber":692,"author":{"gitId":"-"},"content":"        Set\u003cString\u003e studentsEmailInTeam3 \u003d new HashSet\u003c\u003e(Arrays.asList(student6.getEmail(), student7.getEmail()));"},{"lineNumber":693,"author":{"gitId":"-"},"content":"        Set\u003cString\u003e studentsEmailInTeam4 \u003d new HashSet\u003c\u003e(Arrays.asList(student8.getEmail()));"},{"lineNumber":694,"author":{"gitId":"-"},"content":"        Set\u003cString\u003e studentsEmailEmpty \u003d Collections.emptySet();"},{"lineNumber":695,"author":{"gitId":"-"},"content":""},{"lineNumber":696,"author":{"gitId":"-"},"content":"        ______TS(\"test if visible to giver\");"},{"lineNumber":697,"author":{"gitId":"-"},"content":""},{"lineNumber":698,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student1.getEmail(), false, student1, studentsEmailInTeam1,"},{"lineNumber":699,"author":{"gitId":"-"},"content":"                fr111, fq11, null));"},{"lineNumber":700,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor1.getEmail(), true, null, null,"},{"lineNumber":701,"author":{"gitId":"-"},"content":"                fr131, fq13, instructor1));"},{"lineNumber":702,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor1.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":703,"author":{"gitId":"-"},"content":"                fr181, fq18, instructor1));"},{"lineNumber":704,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor2.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":705,"author":{"gitId":"-"},"content":"                fr191, fq19, instructor2));"},{"lineNumber":706,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student2.getEmail(), false, student2, studentsEmailInTeam1,"},{"lineNumber":707,"author":{"gitId":"-"},"content":"                fr211, fq21, null));"},{"lineNumber":708,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student4.getEmail(), false, student4, studentsEmailInTeam1,"},{"lineNumber":709,"author":{"gitId":"-"},"content":"                fr221, fq22, null));"},{"lineNumber":710,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor1.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":711,"author":{"gitId":"-"},"content":"                fr231, fq23, instructor1));"},{"lineNumber":712,"author":{"gitId":"hhdqirui"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student1.getEmail(), false, student1, studentsEmailInTeam1,"},{"lineNumber":713,"author":{"gitId":"hhdqirui"},"content":"                fr2111, fq30, null));"},{"lineNumber":714,"author":{"gitId":"hhdqirui"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student6.getEmail(), false, student6, studentsEmailInTeam3,"},{"lineNumber":715,"author":{"gitId":"hhdqirui"},"content":"                fr2112, fq30, null));"},{"lineNumber":716,"author":{"gitId":"hhdqirui"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student7.getEmail(), false, student7, studentsEmailInTeam3,"},{"lineNumber":717,"author":{"gitId":"hhdqirui"},"content":"                fr2113, fq30, null));"},{"lineNumber":718,"author":{"gitId":"-"},"content":""},{"lineNumber":719,"author":{"gitId":"-"},"content":"        ______TS(\"test if visible to other students\");"},{"lineNumber":720,"author":{"gitId":"-"},"content":""},{"lineNumber":721,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student3.getEmail(), false, student3, studentsEmailInTeam1,"},{"lineNumber":722,"author":{"gitId":"-"},"content":"                fr131, fq13, null));"},{"lineNumber":723,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student5.getEmail(), false, student5, studentsEmailInTeam2,"},{"lineNumber":724,"author":{"gitId":"-"},"content":"                fr161, fq16, null));"},{"lineNumber":725,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student5.getEmail(), false, student5, studentsEmailInTeam2,"},{"lineNumber":726,"author":{"gitId":"-"},"content":"                fr211, fq21, null));"},{"lineNumber":727,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student7.getEmail(), false, student7, studentsEmailInTeam3,"},{"lineNumber":728,"author":{"gitId":"-"},"content":"                fr231, fq23, null));"},{"lineNumber":729,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student5.getEmail(), false, student5, studentsEmailInTeam2,"},{"lineNumber":730,"author":{"gitId":"-"},"content":"                fr261, fq26, null));"},{"lineNumber":731,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(student1.getEmail(), false, student1, studentsEmailInTeam1,"},{"lineNumber":732,"author":{"gitId":"-"},"content":"                fr112, fq11, null));"},{"lineNumber":733,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(student1.getEmail(), false, student1, studentsEmailInTeam1,"},{"lineNumber":734,"author":{"gitId":"-"},"content":"                fr121, fq12, null));"},{"lineNumber":735,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(student5.getEmail(), false, student5, studentsEmailInTeam2,"},{"lineNumber":736,"author":{"gitId":"-"},"content":"                fr171, fq17, null));"},{"lineNumber":737,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(student7.getEmail(), false, student7, studentsEmailInTeam3,"},{"lineNumber":738,"author":{"gitId":"-"},"content":"                fr291, fq29, null));"},{"lineNumber":739,"author":{"gitId":"-"},"content":""},{"lineNumber":740,"author":{"gitId":"-"},"content":"        ______TS(\"test if visible to receiver\");"},{"lineNumber":741,"author":{"gitId":"-"},"content":""},{"lineNumber":742,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student2.getEmail(), false, student2, studentsEmailInTeam1,"},{"lineNumber":743,"author":{"gitId":"-"},"content":"                fr122, fq12, null));"},{"lineNumber":744,"author":{"gitId":"-"},"content":"        // receiver\u0027s team members include receiver"},{"lineNumber":745,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student6.getEmail(), false, student6, studentsEmailInTeam3,"},{"lineNumber":746,"author":{"gitId":"-"},"content":"                fr171, fq17, null));"},{"lineNumber":747,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student5.getEmail(), false, student5, studentsEmailInTeam2,"},{"lineNumber":748,"author":{"gitId":"-"},"content":"                fr211, fq21, null));"},{"lineNumber":749,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student3.getEmail(), false, student3, studentsEmailInTeam1,"},{"lineNumber":750,"author":{"gitId":"-"},"content":"                fr221, fq22, null));"},{"lineNumber":751,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor1.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":752,"author":{"gitId":"-"},"content":"                fr241, fq24, instructor1));"},{"lineNumber":753,"author":{"gitId":"-"},"content":"        // other students include receiver"},{"lineNumber":754,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student6.getEmail(), false, student6, studentsEmailInTeam3,"},{"lineNumber":755,"author":{"gitId":"-"},"content":"                fr261, fq26, null));"},{"lineNumber":756,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student1.getEmail(), false, student1, studentsEmailInTeam1,"},{"lineNumber":757,"author":{"gitId":"-"},"content":"                fr281, fq28, null));"},{"lineNumber":758,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor2.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":759,"author":{"gitId":"-"},"content":"                fr181, fq18, instructor2));"},{"lineNumber":760,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(student7.getEmail(), false, student7, studentsEmailInTeam3,"},{"lineNumber":761,"author":{"gitId":"-"},"content":"                fr271, fq27, null));"},{"lineNumber":762,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(student8.getEmail(), false, student8, studentsEmailInTeam4,"},{"lineNumber":763,"author":{"gitId":"-"},"content":"                fr281, fq28, null));"},{"lineNumber":764,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(student5.getEmail(), false, student5, studentsEmailInTeam2,"},{"lineNumber":765,"author":{"gitId":"-"},"content":"                fr201, fq20, null));"},{"lineNumber":766,"author":{"gitId":"hhdqirui"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student6.getEmail(), false, student6, studentsEmailInTeam3,"},{"lineNumber":767,"author":{"gitId":"hhdqirui"},"content":"                fr2111, fq30, null));"},{"lineNumber":768,"author":{"gitId":"hhdqirui"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student7.getEmail(), false, student7, studentsEmailInTeam3,"},{"lineNumber":769,"author":{"gitId":"hhdqirui"},"content":"                fr2111, fq30, null));"},{"lineNumber":770,"author":{"gitId":"hhdqirui"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student1.getEmail(), false, student1, studentsEmailInTeam1,"},{"lineNumber":771,"author":{"gitId":"hhdqirui"},"content":"                fr2112, fq30, null));"},{"lineNumber":772,"author":{"gitId":"hhdqirui"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student2.getEmail(), false, student2, studentsEmailInTeam1,"},{"lineNumber":773,"author":{"gitId":"hhdqirui"},"content":"                fr2112, fq30, null));"},{"lineNumber":774,"author":{"gitId":"hhdqirui"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student3.getEmail(), false, student3, studentsEmailInTeam1,"},{"lineNumber":775,"author":{"gitId":"hhdqirui"},"content":"                fr2112, fq30, null));"},{"lineNumber":776,"author":{"gitId":"hhdqirui"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student4.getEmail(), false, student4, studentsEmailInTeam1,"},{"lineNumber":777,"author":{"gitId":"hhdqirui"},"content":"                fr2112, fq30, null));"},{"lineNumber":778,"author":{"gitId":"hhdqirui"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student4.getEmail(), false, student5, studentsEmailInTeam2,"},{"lineNumber":779,"author":{"gitId":"hhdqirui"},"content":"                fr2113, fq30, null));"},{"lineNumber":780,"author":{"gitId":"-"},"content":""},{"lineNumber":781,"author":{"gitId":"-"},"content":"        ______TS(\"test if visible to giver\u0027s team members\");"},{"lineNumber":782,"author":{"gitId":"-"},"content":""},{"lineNumber":783,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student2.getEmail(), false, student2, studentsEmailInTeam1,"},{"lineNumber":784,"author":{"gitId":"-"},"content":"                fr171, fq17, null));"},{"lineNumber":785,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student1.getEmail(), false, student1, studentsEmailInTeam1,"},{"lineNumber":786,"author":{"gitId":"-"},"content":"                fr221, fq22, null));"},{"lineNumber":787,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student7.getEmail(), false, student7, studentsEmailInTeam3,"},{"lineNumber":788,"author":{"gitId":"-"},"content":"                fr251, fq25, null));"},{"lineNumber":789,"author":{"gitId":"-"},"content":"        // other students include giver\u0027s team members"},{"lineNumber":790,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student3.getEmail(), false, student3, studentsEmailInTeam1,"},{"lineNumber":791,"author":{"gitId":"-"},"content":"                fr261, fq26, null));"},{"lineNumber":792,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(student3.getEmail(), false, student3, studentsEmailInTeam1,"},{"lineNumber":793,"author":{"gitId":"-"},"content":"                fr111, fq11, null));"},{"lineNumber":794,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(student4.getEmail(), false, student4, studentsEmailInTeam1,"},{"lineNumber":795,"author":{"gitId":"-"},"content":"                fr123, fq12, null));"},{"lineNumber":796,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(student2.getEmail(), false, student2, studentsEmailInTeam1,"},{"lineNumber":797,"author":{"gitId":"-"},"content":"                fr241, fq24, null));"},{"lineNumber":798,"author":{"gitId":"-"},"content":"        // invalid usage"},{"lineNumber":799,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(student8.getEmail(), false, student8, null,"},{"lineNumber":800,"author":{"gitId":"-"},"content":"                fr281, fq28, null));"},{"lineNumber":801,"author":{"gitId":"-"},"content":""},{"lineNumber":802,"author":{"gitId":"-"},"content":"        ______TS(\"test if visible to receiver\u0027s team members\");"},{"lineNumber":803,"author":{"gitId":"-"},"content":""},{"lineNumber":804,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student7.getEmail(), false, student7, studentsEmailInTeam3,"},{"lineNumber":805,"author":{"gitId":"-"},"content":"                fr171, fq17, null));"},{"lineNumber":806,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(student1.getEmail(), false, student1, studentsEmailInTeam1,"},{"lineNumber":807,"author":{"gitId":"-"},"content":"                fr231, fq23, null));"},{"lineNumber":808,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(student2.getEmail(), false, student2, studentsEmailInTeam1,"},{"lineNumber":809,"author":{"gitId":"-"},"content":"                fr111, fq11, null));"},{"lineNumber":810,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(student4.getEmail(), false, student4, studentsEmailInTeam1,"},{"lineNumber":811,"author":{"gitId":"-"},"content":"                fr122, fq12, null));"},{"lineNumber":812,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(student6.getEmail(), false, student6, studentsEmailInTeam3,"},{"lineNumber":813,"author":{"gitId":"-"},"content":"                fr271, fq27, null));"},{"lineNumber":814,"author":{"gitId":"-"},"content":""},{"lineNumber":815,"author":{"gitId":"-"},"content":"        ______TS(\"test if visible to instructors\");"},{"lineNumber":816,"author":{"gitId":"-"},"content":""},{"lineNumber":817,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor1.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":818,"author":{"gitId":"-"},"content":"                fr111, fq11, instructor1));"},{"lineNumber":819,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor2.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":820,"author":{"gitId":"-"},"content":"                fr123, fq12, instructor2));"},{"lineNumber":821,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor1.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":822,"author":{"gitId":"-"},"content":"                fr131, fq13, instructor1));"},{"lineNumber":823,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor2.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":824,"author":{"gitId":"-"},"content":"                fr161, fq16, instructor2));"},{"lineNumber":825,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor1.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":826,"author":{"gitId":"-"},"content":"                fr191, fq19, instructor1));"},{"lineNumber":827,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor2.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":828,"author":{"gitId":"-"},"content":"                fr231, fq23, instructor2));"},{"lineNumber":829,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor1.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":830,"author":{"gitId":"-"},"content":"                fr271, fq27, instructor1));"},{"lineNumber":831,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor1.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":832,"author":{"gitId":"-"},"content":"                fr171, fq17, instructor1));"},{"lineNumber":833,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor2.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":834,"author":{"gitId":"-"},"content":"                fr181, fq18, instructor2));"},{"lineNumber":835,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor2.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":836,"author":{"gitId":"-"},"content":"                fr211, fq21, instructor2));"},{"lineNumber":837,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor1.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":838,"author":{"gitId":"-"},"content":"                fr221, fq22, instructor1));"},{"lineNumber":839,"author":{"gitId":"-"},"content":""},{"lineNumber":840,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor3.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":841,"author":{"gitId":"-"},"content":"                fr123, fq12, instructor3));"},{"lineNumber":842,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor3.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":843,"author":{"gitId":"-"},"content":"                fr161, fq16, instructor3));"},{"lineNumber":844,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor3.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":845,"author":{"gitId":"-"},"content":"                fr191, fq19, instructor3));"},{"lineNumber":846,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor3.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":847,"author":{"gitId":"-"},"content":"                fr251, fq25, instructor3));"},{"lineNumber":848,"author":{"gitId":"-"},"content":""},{"lineNumber":849,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor4.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":850,"author":{"gitId":"-"},"content":"                fr112, fq11, instructor4));"},{"lineNumber":851,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor4.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":852,"author":{"gitId":"-"},"content":"                fr252, fq25, instructor4));"},{"lineNumber":853,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor4.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":854,"author":{"gitId":"-"},"content":"                fr121, fq12, instructor4));"},{"lineNumber":855,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor4.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":856,"author":{"gitId":"-"},"content":"                fr122, fq12, instructor4));"},{"lineNumber":857,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor4.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":858,"author":{"gitId":"-"},"content":"                fr211, fq21, instructor4));"},{"lineNumber":859,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor4.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":860,"author":{"gitId":"-"},"content":"                fr242, fq24, instructor4));"},{"lineNumber":861,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor4.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":862,"author":{"gitId":"-"},"content":"                fr271, fq27, instructor4));"},{"lineNumber":863,"author":{"gitId":"-"},"content":""},{"lineNumber":864,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor5.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":865,"author":{"gitId":"-"},"content":"                fr162, fq16, instructor5));"},{"lineNumber":866,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor5.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":867,"author":{"gitId":"-"},"content":"                fr191, fq19, instructor5));"},{"lineNumber":868,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor5.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":869,"author":{"gitId":"-"},"content":"                fr271, fq27, instructor5));"},{"lineNumber":870,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor5.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":871,"author":{"gitId":"-"},"content":"                fr121, fq12, instructor5));"},{"lineNumber":872,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor5.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":873,"author":{"gitId":"-"},"content":"                fr122, fq12, instructor5));"},{"lineNumber":874,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor5.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":875,"author":{"gitId":"-"},"content":"                fr161, fq16, instructor5));"},{"lineNumber":876,"author":{"gitId":"-"},"content":""},{"lineNumber":877,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor6.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":878,"author":{"gitId":"-"},"content":"                fr111, fq11, instructor6));"},{"lineNumber":879,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor6.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":880,"author":{"gitId":"-"},"content":"                fr123, fq12, instructor6));"},{"lineNumber":881,"author":{"gitId":"-"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor6.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":882,"author":{"gitId":"-"},"content":"                fr252, fq25, instructor6));"},{"lineNumber":883,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor6.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":884,"author":{"gitId":"-"},"content":"                fr112, fq11, instructor6));"},{"lineNumber":885,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor6.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":886,"author":{"gitId":"-"},"content":"                fr121, fq12, instructor6));"},{"lineNumber":887,"author":{"gitId":"-"},"content":"        // \"general\" involved is checked as a section"},{"lineNumber":888,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor6.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":889,"author":{"gitId":"-"},"content":"                fr131, fq13, instructor6));"},{"lineNumber":890,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor6.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":891,"author":{"gitId":"-"},"content":"                fr161, fq16, instructor6));"},{"lineNumber":892,"author":{"gitId":"-"},"content":"        // \"instructors\" involved is checked as a section"},{"lineNumber":893,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor6.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":894,"author":{"gitId":"-"},"content":"                fr162, fq16, instructor6));"},{"lineNumber":895,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor6.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":896,"author":{"gitId":"-"},"content":"                fr191, fq19, instructor6));"},{"lineNumber":897,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor6.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":898,"author":{"gitId":"-"},"content":"                fr232, fq23, instructor6));"},{"lineNumber":899,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":900,"author":{"gitId":"hhdqirui"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor1.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":901,"author":{"gitId":"hhdqirui"},"content":"                fr2111, fq30, instructor1));"},{"lineNumber":902,"author":{"gitId":"hhdqirui"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor2.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":903,"author":{"gitId":"hhdqirui"},"content":"                fr2111, fq30, instructor2));"},{"lineNumber":904,"author":{"gitId":"hhdqirui"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor3.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":905,"author":{"gitId":"hhdqirui"},"content":"                fr2111, fq30, instructor3));"},{"lineNumber":906,"author":{"gitId":"hhdqirui"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor4.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":907,"author":{"gitId":"hhdqirui"},"content":"                fr2111, fq30, instructor4));"},{"lineNumber":908,"author":{"gitId":"hhdqirui"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor5.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":909,"author":{"gitId":"hhdqirui"},"content":"                fr2111, fq30, instructor5));"},{"lineNumber":910,"author":{"gitId":"hhdqirui"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor6.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":911,"author":{"gitId":"hhdqirui"},"content":"                fr2111, fq30, instructor6));"},{"lineNumber":912,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":913,"author":{"gitId":"hhdqirui"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor1.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":914,"author":{"gitId":"hhdqirui"},"content":"                fr2112, fq30, instructor1));"},{"lineNumber":915,"author":{"gitId":"hhdqirui"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor2.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":916,"author":{"gitId":"hhdqirui"},"content":"                fr2112, fq30, instructor2));"},{"lineNumber":917,"author":{"gitId":"hhdqirui"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor3.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":918,"author":{"gitId":"hhdqirui"},"content":"                fr2112, fq30, instructor3));"},{"lineNumber":919,"author":{"gitId":"hhdqirui"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor4.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":920,"author":{"gitId":"hhdqirui"},"content":"                fr2112, fq30, instructor4));"},{"lineNumber":921,"author":{"gitId":"hhdqirui"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor5.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":922,"author":{"gitId":"hhdqirui"},"content":"                fr2112, fq30, instructor5));"},{"lineNumber":923,"author":{"gitId":"hhdqirui"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor6.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":924,"author":{"gitId":"hhdqirui"},"content":"                fr2112, fq30, instructor6));"},{"lineNumber":925,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":926,"author":{"gitId":"hhdqirui"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor1.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":927,"author":{"gitId":"hhdqirui"},"content":"                fr2113, fq30, instructor1));"},{"lineNumber":928,"author":{"gitId":"hhdqirui"},"content":"        assertTrue(frLogic.isResponseVisibleForUser(instructor2.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":929,"author":{"gitId":"hhdqirui"},"content":"                fr2113, fq30, instructor2));"},{"lineNumber":930,"author":{"gitId":"hhdqirui"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor3.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":931,"author":{"gitId":"hhdqirui"},"content":"                fr2113, fq30, instructor3));"},{"lineNumber":932,"author":{"gitId":"hhdqirui"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor4.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":933,"author":{"gitId":"hhdqirui"},"content":"                fr2113, fq30, instructor4));"},{"lineNumber":934,"author":{"gitId":"hhdqirui"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor5.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":935,"author":{"gitId":"hhdqirui"},"content":"                fr2113, fq30, instructor5));"},{"lineNumber":936,"author":{"gitId":"hhdqirui"},"content":"        assertFalse(frLogic.isResponseVisibleForUser(instructor6.getEmail(), true, null, studentsEmailEmpty,"},{"lineNumber":937,"author":{"gitId":"hhdqirui"},"content":"                fr2113, fq30, instructor6));"},{"lineNumber":938,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":939,"author":{"gitId":"-"},"content":""},{"lineNumber":940,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":941,"author":{"gitId":"-"},"content":"    public void testDeleteFeedbackResponsesInvolvedEntityOfCourseCascade_shouldDeleteRelatedResponses() {"},{"lineNumber":942,"author":{"gitId":"-"},"content":"        StudentAttributes studentToDelete \u003d dataBundle.students.get(\"student1InCourse1\");"},{"lineNumber":943,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes session1InCourse1 \u003d dataBundle.feedbackSessions.get(\"session1InCourse1\");"},{"lineNumber":944,"author":{"gitId":"-"},"content":""},{"lineNumber":945,"author":{"gitId":"-"},"content":"        // the responses also have some associated comments"},{"lineNumber":946,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e remainingResponses \u003d new ArrayList\u003c\u003e();"},{"lineNumber":947,"author":{"gitId":"-"},"content":"        remainingResponses.addAll("},{"lineNumber":948,"author":{"gitId":"-"},"content":"                frLogic.getFeedbackResponsesFromGiverForCourse(studentToDelete.getCourse(), studentToDelete.getEmail()));"},{"lineNumber":949,"author":{"gitId":"-"},"content":"        remainingResponses.addAll("},{"lineNumber":950,"author":{"gitId":"-"},"content":"                frLogic.getFeedbackResponsesForReceiverForCourse(studentToDelete.getCourse(), studentToDelete.getEmail()));"},{"lineNumber":951,"author":{"gitId":"-"},"content":"        assertFalse(remainingResponses.isEmpty());"},{"lineNumber":952,"author":{"gitId":"-"},"content":""},{"lineNumber":953,"author":{"gitId":"-"},"content":"        // the student has some responses"},{"lineNumber":954,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e responsesForStudent1 \u003d"},{"lineNumber":955,"author":{"gitId":"-"},"content":"                frLogic.getFeedbackResponsesFromGiverForCourse(studentToDelete.getCourse(), studentToDelete.getEmail());"},{"lineNumber":956,"author":{"gitId":"-"},"content":"        responsesForStudent1.addAll("},{"lineNumber":957,"author":{"gitId":"-"},"content":"                frLogic.getFeedbackResponsesForReceiverForCourse(studentToDelete.getCourse(), studentToDelete.getEmail()));"},{"lineNumber":958,"author":{"gitId":"-"},"content":"        assertFalse(responsesForStudent1.isEmpty());"},{"lineNumber":959,"author":{"gitId":"-"},"content":"        assertTrue("},{"lineNumber":960,"author":{"gitId":"-"},"content":"                frLogic.getGiverSetThatAnswerFeedbackSession(session1InCourse1.getCourseId(),"},{"lineNumber":961,"author":{"gitId":"-"},"content":"                        session1InCourse1.getFeedbackSessionName()).contains(studentToDelete.getEmail()));"},{"lineNumber":962,"author":{"gitId":"-"},"content":""},{"lineNumber":963,"author":{"gitId":"-"},"content":"        frLogic.deleteFeedbackResponsesInvolvedEntityOfCourseCascade("},{"lineNumber":964,"author":{"gitId":"-"},"content":"                studentToDelete.getCourse(), studentToDelete.getEmail());"},{"lineNumber":965,"author":{"gitId":"-"},"content":""},{"lineNumber":966,"author":{"gitId":"-"},"content":"        // responses should be deleted"},{"lineNumber":967,"author":{"gitId":"-"},"content":"        remainingResponses \u003d new ArrayList\u003c\u003e();"},{"lineNumber":968,"author":{"gitId":"-"},"content":"        remainingResponses.addAll("},{"lineNumber":969,"author":{"gitId":"-"},"content":"                frLogic.getFeedbackResponsesFromGiverForCourse(studentToDelete.getCourse(), studentToDelete.getEmail()));"},{"lineNumber":970,"author":{"gitId":"-"},"content":"        remainingResponses.addAll("},{"lineNumber":971,"author":{"gitId":"-"},"content":"                frLogic.getFeedbackResponsesForReceiverForCourse(studentToDelete.getCourse(), studentToDelete.getEmail()));"},{"lineNumber":972,"author":{"gitId":"-"},"content":"        assertEquals(0, remainingResponses.size());"},{"lineNumber":973,"author":{"gitId":"-"},"content":""},{"lineNumber":974,"author":{"gitId":"-"},"content":"        // comments should also be deleted"},{"lineNumber":975,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseCommentAttributes\u003e remainingComments \u003d new ArrayList\u003c\u003e();"},{"lineNumber":976,"author":{"gitId":"-"},"content":"        for (FeedbackResponseAttributes response : responsesForStudent1) {"},{"lineNumber":977,"author":{"gitId":"-"},"content":"            remainingComments.addAll(frcLogic.getFeedbackResponseCommentForResponse(response.getId()));"},{"lineNumber":978,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":979,"author":{"gitId":"-"},"content":"        assertEquals(0, remainingComments.size());"},{"lineNumber":980,"author":{"gitId":"-"},"content":""},{"lineNumber":981,"author":{"gitId":"-"},"content":"        // the student no longer has responses for the session"},{"lineNumber":982,"author":{"gitId":"-"},"content":"        assertFalse("},{"lineNumber":983,"author":{"gitId":"-"},"content":"                frLogic.getGiverSetThatAnswerFeedbackSession(session1InCourse1.getCourseId(),"},{"lineNumber":984,"author":{"gitId":"-"},"content":"                        session1InCourse1.getFeedbackSessionName()).contains(studentToDelete.getEmail()));"},{"lineNumber":985,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":986,"author":{"gitId":"-"},"content":""},{"lineNumber":987,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":988,"author":{"gitId":"-"},"content":"    public void testDeleteFeedbackResponseCascade() {"},{"lineNumber":989,"author":{"gitId":"-"},"content":"        ______TS(\"non-existent response\");"},{"lineNumber":990,"author":{"gitId":"-"},"content":""},{"lineNumber":991,"author":{"gitId":"-"},"content":"        // should pass silently"},{"lineNumber":992,"author":{"gitId":"-"},"content":"        frLogic.deleteFeedbackResponseCascade(\"not-exist\");"},{"lineNumber":993,"author":{"gitId":"-"},"content":""},{"lineNumber":994,"author":{"gitId":"-"},"content":"        ______TS(\"standard delete\");"},{"lineNumber":995,"author":{"gitId":"-"},"content":""},{"lineNumber":996,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fra \u003d getResponseFromDatabase(\"response1ForQ1S1C1\");"},{"lineNumber":997,"author":{"gitId":"-"},"content":"        assertNotNull(fra);"},{"lineNumber":998,"author":{"gitId":"-"},"content":"        // the response has comments"},{"lineNumber":999,"author":{"gitId":"-"},"content":"        assertFalse(frcLogic.getFeedbackResponseCommentForResponse(fra.getId()).isEmpty());"},{"lineNumber":1000,"author":{"gitId":"-"},"content":""},{"lineNumber":1001,"author":{"gitId":"-"},"content":"        frLogic.deleteFeedbackResponseCascade(fra.getId());"},{"lineNumber":1002,"author":{"gitId":"-"},"content":""},{"lineNumber":1003,"author":{"gitId":"-"},"content":"        assertNull(frLogic.getFeedbackResponse(fra.getId()));"},{"lineNumber":1004,"author":{"gitId":"-"},"content":"        // associated comments are deleted"},{"lineNumber":1005,"author":{"gitId":"-"},"content":"        assertTrue(frcLogic.getFeedbackResponseCommentForResponse(fra.getId()).isEmpty());"},{"lineNumber":1006,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1007,"author":{"gitId":"-"},"content":""},{"lineNumber":1008,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":1009,"author":{"gitId":"-"},"content":"    public void testDeleteFeedbackResponses_byCourseId() {"},{"lineNumber":1010,"author":{"gitId":"-"},"content":"        ______TS(\"standard delete\");"},{"lineNumber":1011,"author":{"gitId":"-"},"content":""},{"lineNumber":1012,"author":{"gitId":"-"},"content":"        // test that responses are deleted"},{"lineNumber":1013,"author":{"gitId":"-"},"content":"        String courseId \u003d \"idOfTypicalCourse1\";"},{"lineNumber":1014,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.getFeedbackResponsesForSession(\"First feedback session\", courseId).isEmpty());"},{"lineNumber":1015,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.getFeedbackResponsesForSession(\"Grace Period Session\", courseId).isEmpty());"},{"lineNumber":1016,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.getFeedbackResponsesForSession(\"Closed Session\", courseId).isEmpty());"},{"lineNumber":1017,"author":{"gitId":"-"},"content":""},{"lineNumber":1018,"author":{"gitId":"-"},"content":"        frLogic.deleteFeedbackResponses("},{"lineNumber":1019,"author":{"gitId":"-"},"content":"                AttributesDeletionQuery.builder()"},{"lineNumber":1020,"author":{"gitId":"-"},"content":"                        .withCourseId(courseId)"},{"lineNumber":1021,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":1022,"author":{"gitId":"-"},"content":""},{"lineNumber":1023,"author":{"gitId":"-"},"content":"        assertEquals(0, frLogic.getFeedbackResponsesForSession(\"First feedback session\", courseId).size());"},{"lineNumber":1024,"author":{"gitId":"-"},"content":"        assertEquals(0, frLogic.getFeedbackResponsesForSession(\"Grace Period Session\", courseId).size());"},{"lineNumber":1025,"author":{"gitId":"-"},"content":"        assertEquals(0, frLogic.getFeedbackResponsesForSession(\"Closed Session\", courseId).size());"},{"lineNumber":1026,"author":{"gitId":"-"},"content":""},{"lineNumber":1027,"author":{"gitId":"-"},"content":"        // test that responses from other courses are unaffected"},{"lineNumber":1028,"author":{"gitId":"-"},"content":"        String otherCourse \u003d \"idOfTypicalCourse2\";"},{"lineNumber":1029,"author":{"gitId":"-"},"content":"        assertFalse(frLogic.getFeedbackResponsesForSession(\"Instructor feedback session\", otherCourse).isEmpty());"},{"lineNumber":1030,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1031,"author":{"gitId":"-"},"content":""},{"lineNumber":1032,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":1033,"author":{"gitId":"-"},"content":"    public void testDeleteFeedbackResponsesForQuestionCascade_studentsQuestion_shouldUpdateRespondents() {"},{"lineNumber":1034,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fra \u003d getResponseFromDatabase(\"response1ForQ1S1C1\");"},{"lineNumber":1035,"author":{"gitId":"-"},"content":""},{"lineNumber":1036,"author":{"gitId":"-"},"content":"        // this is the only response the student has given for the session"},{"lineNumber":1037,"author":{"gitId":"-"},"content":"        assertEquals(1, frLogic.getFeedbackResponsesFromGiverForCourse(fra.getCourseId(), fra.getGiver()).stream()"},{"lineNumber":1038,"author":{"gitId":"-"},"content":"                .filter(response -\u003e response.getFeedbackSessionName().equals(fra.getFeedbackSessionName()))"},{"lineNumber":1039,"author":{"gitId":"-"},"content":"                .count());"},{"lineNumber":1040,"author":{"gitId":"-"},"content":"        // the student has answers for the session"},{"lineNumber":1041,"author":{"gitId":"-"},"content":"        assertTrue("},{"lineNumber":1042,"author":{"gitId":"-"},"content":"                frLogic.getGiverSetThatAnswerFeedbackSession(fra.getCourseId(),"},{"lineNumber":1043,"author":{"gitId":"-"},"content":"                        fra.getFeedbackSessionName()).contains(fra.getGiver()));"},{"lineNumber":1044,"author":{"gitId":"-"},"content":""},{"lineNumber":1045,"author":{"gitId":"-"},"content":"        frLogic.deleteFeedbackResponsesForQuestionCascade(fra.getFeedbackQuestionId());"},{"lineNumber":1046,"author":{"gitId":"-"},"content":""},{"lineNumber":1047,"author":{"gitId":"-"},"content":"        // there is no student X as respondents"},{"lineNumber":1048,"author":{"gitId":"-"},"content":"        assertFalse("},{"lineNumber":1049,"author":{"gitId":"-"},"content":"                frLogic.getGiverSetThatAnswerFeedbackSession(fra.getCourseId(),"},{"lineNumber":1050,"author":{"gitId":"-"},"content":"                        fra.getFeedbackSessionName()).contains(fra.getGiver()));"},{"lineNumber":1051,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1052,"author":{"gitId":"-"},"content":""},{"lineNumber":1053,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":1054,"author":{"gitId":"-"},"content":"    public void testDeleteFeedbackResponsesForQuestionCascade_instructorsQuestion_shouldUpdateRespondents() {"},{"lineNumber":1055,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fra \u003d getResponseFromDatabase(\"response1ForQ3S1C1\");"},{"lineNumber":1056,"author":{"gitId":"-"},"content":""},{"lineNumber":1057,"author":{"gitId":"-"},"content":"        // this is the only response the instructor has given for the session"},{"lineNumber":1058,"author":{"gitId":"-"},"content":"        assertEquals(1, frLogic.getFeedbackResponsesFromGiverForCourse(fra.getCourseId(), fra.getGiver()).stream()"},{"lineNumber":1059,"author":{"gitId":"-"},"content":"                .filter(response -\u003e response.getFeedbackSessionName().equals(fra.getFeedbackSessionName()))"},{"lineNumber":1060,"author":{"gitId":"-"},"content":"                .count());"},{"lineNumber":1061,"author":{"gitId":"-"},"content":"        // the instructor has answers for the session"},{"lineNumber":1062,"author":{"gitId":"-"},"content":"        assertTrue("},{"lineNumber":1063,"author":{"gitId":"-"},"content":"                frLogic.getGiverSetThatAnswerFeedbackSession(fra.getCourseId(),"},{"lineNumber":1064,"author":{"gitId":"-"},"content":"                        fra.getFeedbackSessionName()).contains(fra.getGiver()));"},{"lineNumber":1065,"author":{"gitId":"-"},"content":""},{"lineNumber":1066,"author":{"gitId":"-"},"content":"        frLogic.deleteFeedbackResponsesForQuestionCascade(fra.getFeedbackQuestionId());"},{"lineNumber":1067,"author":{"gitId":"-"},"content":""},{"lineNumber":1068,"author":{"gitId":"-"},"content":"        // there is not instructor X in instructor respondents"},{"lineNumber":1069,"author":{"gitId":"-"},"content":"        assertFalse("},{"lineNumber":1070,"author":{"gitId":"-"},"content":"                frLogic.getGiverSetThatAnswerFeedbackSession(fra.getCourseId(),"},{"lineNumber":1071,"author":{"gitId":"-"},"content":"                        fra.getFeedbackSessionName()).contains(fra.getGiver()));"},{"lineNumber":1072,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1073,"author":{"gitId":"-"},"content":""},{"lineNumber":1074,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":1075,"author":{"gitId":"-"},"content":"    public void testDeleteFeedbackResponsesInvolvedEntityOfCourseCascade_giverIsStudent_shouldUpdateRespondents() {"},{"lineNumber":1076,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fra \u003d getResponseFromDatabase(\"response3ForQ2S1C1\");"},{"lineNumber":1077,"author":{"gitId":"-"},"content":"        StudentAttributes student2InCourse1 \u003d dataBundle.students.get(\"student2InCourse1\");"},{"lineNumber":1078,"author":{"gitId":"-"},"content":"        // giver is student"},{"lineNumber":1079,"author":{"gitId":"-"},"content":"        assertEquals(FeedbackParticipantType.STUDENTS,"},{"lineNumber":1080,"author":{"gitId":"-"},"content":"                fqLogic.getFeedbackQuestion(fra.getFeedbackQuestionId()).getGiverType());"},{"lineNumber":1081,"author":{"gitId":"-"},"content":"        // student is the recipient"},{"lineNumber":1082,"author":{"gitId":"-"},"content":"        assertEquals(fra.getRecipient(), student2InCourse1.getEmail());"},{"lineNumber":1083,"author":{"gitId":"-"},"content":""},{"lineNumber":1084,"author":{"gitId":"-"},"content":"        // this is the only response the giver has given for the session"},{"lineNumber":1085,"author":{"gitId":"-"},"content":"        assertEquals(1, frLogic.getFeedbackResponsesFromGiverForCourse(fra.getCourseId(), fra.getGiver()).stream()"},{"lineNumber":1086,"author":{"gitId":"-"},"content":"                .filter(response -\u003e response.getFeedbackSessionName().equals(fra.getFeedbackSessionName()))"},{"lineNumber":1087,"author":{"gitId":"-"},"content":"                .count());"},{"lineNumber":1088,"author":{"gitId":"-"},"content":"        // the student has answers for the session"},{"lineNumber":1089,"author":{"gitId":"-"},"content":"        assertTrue("},{"lineNumber":1090,"author":{"gitId":"-"},"content":"                frLogic.getGiverSetThatAnswerFeedbackSession(fra.getCourseId(),"},{"lineNumber":1091,"author":{"gitId":"-"},"content":"                        fra.getFeedbackSessionName()).contains(fra.getGiver()));"},{"lineNumber":1092,"author":{"gitId":"-"},"content":""},{"lineNumber":1093,"author":{"gitId":"-"},"content":"        // after the giver is removed from the course"},{"lineNumber":1094,"author":{"gitId":"-"},"content":"        frLogic.deleteFeedbackResponsesInvolvedEntityOfCourseCascade("},{"lineNumber":1095,"author":{"gitId":"-"},"content":"                student2InCourse1.getCourse(), student2InCourse1.getEmail());"},{"lineNumber":1096,"author":{"gitId":"-"},"content":""},{"lineNumber":1097,"author":{"gitId":"-"},"content":"        // there is no student X as respondents"},{"lineNumber":1098,"author":{"gitId":"-"},"content":"        assertFalse("},{"lineNumber":1099,"author":{"gitId":"-"},"content":"                frLogic.getGiverSetThatAnswerFeedbackSession(fra.getCourseId(),"},{"lineNumber":1100,"author":{"gitId":"-"},"content":"                        fra.getFeedbackSessionName()).contains(fra.getGiver()));"},{"lineNumber":1101,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1102,"author":{"gitId":"-"},"content":""},{"lineNumber":1103,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":1104,"author":{"gitId":"-"},"content":"    public void testDeleteFeedbackResponsesInvolvedEntityOfCourseCascade_giverIsInstructor_shouldUpdateRespondents() {"},{"lineNumber":1105,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fra \u003d getResponseFromDatabase(\"response1ForQ1S2C2\");"},{"lineNumber":1106,"author":{"gitId":"-"},"content":"        StudentAttributes student1InCourse2 \u003d dataBundle.students.get(\"student1InCourse2\");"},{"lineNumber":1107,"author":{"gitId":"-"},"content":"        // giver is instructor"},{"lineNumber":1108,"author":{"gitId":"-"},"content":"        assertEquals(FeedbackParticipantType.SELF,"},{"lineNumber":1109,"author":{"gitId":"-"},"content":"                fqLogic.getFeedbackQuestion(fra.getFeedbackQuestionId()).getGiverType());"},{"lineNumber":1110,"author":{"gitId":"-"},"content":"        // student is the recipient"},{"lineNumber":1111,"author":{"gitId":"-"},"content":"        assertEquals(fra.getRecipient(), student1InCourse2.getEmail());"},{"lineNumber":1112,"author":{"gitId":"-"},"content":""},{"lineNumber":1113,"author":{"gitId":"-"},"content":"        // this is the only response the instructor has given for the session"},{"lineNumber":1114,"author":{"gitId":"-"},"content":"        assertEquals(1, frLogic.getFeedbackResponsesFromGiverForCourse(fra.getCourseId(), fra.getGiver()).stream()"},{"lineNumber":1115,"author":{"gitId":"-"},"content":"                .filter(response -\u003e response.getFeedbackSessionName().equals(fra.getFeedbackSessionName()))"},{"lineNumber":1116,"author":{"gitId":"-"},"content":"                .count());"},{"lineNumber":1117,"author":{"gitId":"-"},"content":"        // the instructor has answers for the session"},{"lineNumber":1118,"author":{"gitId":"-"},"content":"        assertTrue("},{"lineNumber":1119,"author":{"gitId":"-"},"content":"                frLogic.getGiverSetThatAnswerFeedbackSession(fra.getCourseId(),"},{"lineNumber":1120,"author":{"gitId":"-"},"content":"                        fra.getFeedbackSessionName()).contains(fra.getGiver()));"},{"lineNumber":1121,"author":{"gitId":"-"},"content":""},{"lineNumber":1122,"author":{"gitId":"-"},"content":"        // after the giver is removed from the course"},{"lineNumber":1123,"author":{"gitId":"-"},"content":"        frLogic.deleteFeedbackResponsesInvolvedEntityOfCourseCascade("},{"lineNumber":1124,"author":{"gitId":"-"},"content":"                student1InCourse2.getCourse(), student1InCourse2.getEmail());"},{"lineNumber":1125,"author":{"gitId":"-"},"content":""},{"lineNumber":1126,"author":{"gitId":"-"},"content":"        // there is no instructor X as respondents"},{"lineNumber":1127,"author":{"gitId":"-"},"content":"        assertFalse("},{"lineNumber":1128,"author":{"gitId":"-"},"content":"                frLogic.getGiverSetThatAnswerFeedbackSession(fra.getCourseId(),"},{"lineNumber":1129,"author":{"gitId":"-"},"content":"                        fra.getFeedbackSessionName()).contains(fra.getGiver()));"},{"lineNumber":1130,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1131,"author":{"gitId":"-"},"content":""},{"lineNumber":1132,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":1133,"author":{"gitId":"-"},"content":"    public void testDeleteFeedbackResponsesInvolvedEntityOfCourseCascade_shouldDeleteRelevantResponsesAsRecipient()"},{"lineNumber":1134,"author":{"gitId":"-"},"content":"            throws Exception {"},{"lineNumber":1135,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor1OfCourse1 \u003d dataBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":1136,"author":{"gitId":"-"},"content":""},{"lineNumber":1137,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fra1ReceivedByTeam \u003d getResponseFromDatabase(\"response1ForQ1S2C1\");"},{"lineNumber":1138,"author":{"gitId":"-"},"content":"        frcLogic.createFeedbackResponseComment("},{"lineNumber":1139,"author":{"gitId":"-"},"content":"                FeedbackResponseCommentAttributes"},{"lineNumber":1140,"author":{"gitId":"-"},"content":"                        .builder()"},{"lineNumber":1141,"author":{"gitId":"-"},"content":"                        .withCourseId(fra1ReceivedByTeam.getCourseId())"},{"lineNumber":1142,"author":{"gitId":"-"},"content":"                        .withFeedbackSessionName(fra1ReceivedByTeam.getFeedbackSessionName())"},{"lineNumber":1143,"author":{"gitId":"-"},"content":"                        .withCommentGiver(instructor1OfCourse1.getEmail())"},{"lineNumber":1144,"author":{"gitId":"-"},"content":"                        .withCommentText(\"Comment 1\")"},{"lineNumber":1145,"author":{"gitId":"-"},"content":"                        .withFeedbackQuestionId(fra1ReceivedByTeam.getFeedbackQuestionId())"},{"lineNumber":1146,"author":{"gitId":"-"},"content":"                        .withFeedbackResponseId(fra1ReceivedByTeam.getId())"},{"lineNumber":1147,"author":{"gitId":"-"},"content":"                        .withGiverSection(fra1ReceivedByTeam.getGiverSection())"},{"lineNumber":1148,"author":{"gitId":"-"},"content":"                        .withReceiverSection(fra1ReceivedByTeam.getRecipientSection())"},{"lineNumber":1149,"author":{"gitId":"-"},"content":"                        .withCommentFromFeedbackParticipant(false)"},{"lineNumber":1150,"author":{"gitId":"-"},"content":"                        .withCommentGiverType(FeedbackParticipantType.INSTRUCTORS)"},{"lineNumber":1151,"author":{"gitId":"-"},"content":"                        .withVisibilityFollowingFeedbackQuestion(false)"},{"lineNumber":1152,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":1153,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fra2ReceivedByTeam \u003d getResponseFromDatabase(\"response1GracePeriodFeedback\");"},{"lineNumber":1154,"author":{"gitId":"-"},"content":"        frcLogic.createFeedbackResponseComment("},{"lineNumber":1155,"author":{"gitId":"-"},"content":"                FeedbackResponseCommentAttributes"},{"lineNumber":1156,"author":{"gitId":"-"},"content":"                        .builder()"},{"lineNumber":1157,"author":{"gitId":"-"},"content":"                        .withCourseId(fra2ReceivedByTeam.getCourseId())"},{"lineNumber":1158,"author":{"gitId":"-"},"content":"                        .withFeedbackSessionName(fra2ReceivedByTeam.getFeedbackSessionName())"},{"lineNumber":1159,"author":{"gitId":"-"},"content":"                        .withCommentGiver(instructor1OfCourse1.getEmail())"},{"lineNumber":1160,"author":{"gitId":"-"},"content":"                        .withCommentText(\"Comment 2\")"},{"lineNumber":1161,"author":{"gitId":"-"},"content":"                        .withFeedbackQuestionId(fra2ReceivedByTeam.getFeedbackQuestionId())"},{"lineNumber":1162,"author":{"gitId":"-"},"content":"                        .withFeedbackResponseId(fra2ReceivedByTeam.getId())"},{"lineNumber":1163,"author":{"gitId":"-"},"content":"                        .withGiverSection(fra2ReceivedByTeam.getGiverSection())"},{"lineNumber":1164,"author":{"gitId":"-"},"content":"                        .withReceiverSection(fra2ReceivedByTeam.getRecipientSection())"},{"lineNumber":1165,"author":{"gitId":"-"},"content":"                        .withCommentFromFeedbackParticipant(false)"},{"lineNumber":1166,"author":{"gitId":"-"},"content":"                        .withCommentGiverType(FeedbackParticipantType.INSTRUCTORS)"},{"lineNumber":1167,"author":{"gitId":"-"},"content":"                        .withVisibilityFollowingFeedbackQuestion(false)"},{"lineNumber":1168,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":1169,"author":{"gitId":"-"},"content":""},{"lineNumber":1170,"author":{"gitId":"-"},"content":"        String teamName \u003d \"Team 1.2\";"},{"lineNumber":1171,"author":{"gitId":"-"},"content":"        assertEquals(teamName, fra1ReceivedByTeam.getRecipient());"},{"lineNumber":1172,"author":{"gitId":"-"},"content":"        assertEquals(teamName, fra2ReceivedByTeam.getRecipient());"},{"lineNumber":1173,"author":{"gitId":"-"},"content":""},{"lineNumber":1174,"author":{"gitId":"-"},"content":"        // both responses got some comments"},{"lineNumber":1175,"author":{"gitId":"-"},"content":"        assertFalse(frcLogic.getFeedbackResponseCommentForResponse(fra1ReceivedByTeam.getId()).isEmpty());"},{"lineNumber":1176,"author":{"gitId":"-"},"content":"        assertFalse(frcLogic.getFeedbackResponseCommentForResponse(fra2ReceivedByTeam.getId()).isEmpty());"},{"lineNumber":1177,"author":{"gitId":"-"},"content":""},{"lineNumber":1178,"author":{"gitId":"-"},"content":"        frLogic.deleteFeedbackResponsesInvolvedEntityOfCourseCascade(fra1ReceivedByTeam.getCourseId(), teamName);"},{"lineNumber":1179,"author":{"gitId":"-"},"content":""},{"lineNumber":1180,"author":{"gitId":"-"},"content":"        // responses received by the team should be deleted"},{"lineNumber":1181,"author":{"gitId":"-"},"content":"        assertNull(frLogic.getFeedbackResponse(fra1ReceivedByTeam.getId()));"},{"lineNumber":1182,"author":{"gitId":"-"},"content":"        assertNull(frLogic.getFeedbackResponse(fra2ReceivedByTeam.getId()));"},{"lineNumber":1183,"author":{"gitId":"-"},"content":""},{"lineNumber":1184,"author":{"gitId":"-"},"content":"        // their associated comments should be deleted"},{"lineNumber":1185,"author":{"gitId":"-"},"content":"        assertTrue(frcLogic.getFeedbackResponseCommentForResponse(fra1ReceivedByTeam.getId()).isEmpty());"},{"lineNumber":1186,"author":{"gitId":"-"},"content":"        assertTrue(frcLogic.getFeedbackResponseCommentForResponse(fra2ReceivedByTeam.getId()).isEmpty());"},{"lineNumber":1187,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1188,"author":{"gitId":"-"},"content":""},{"lineNumber":1189,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":1190,"author":{"gitId":"-"},"content":"    public void testDeleteFeedbackResponsesInvolvedEntityOfCourseCascade_shouldDeleteRelevantResponsesAsGiver()"},{"lineNumber":1191,"author":{"gitId":"-"},"content":"            throws Exception {"},{"lineNumber":1192,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor1OfCourse1 \u003d dataBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":1193,"author":{"gitId":"-"},"content":"        StudentAttributes student4InCourse1 \u003d dataBundle.students.get(\"student4InCourse1\");"},{"lineNumber":1194,"author":{"gitId":"-"},"content":""},{"lineNumber":1195,"author":{"gitId":"-"},"content":"        // the following two responses are given by student4InCourse1 as a representative of his team"},{"lineNumber":1196,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fra1GivenByTeam \u003d getResponseFromDatabase(\"response1ForQ1S2C1\");"},{"lineNumber":1197,"author":{"gitId":"-"},"content":"        // update the response\u0027s giver to the team name"},{"lineNumber":1198,"author":{"gitId":"-"},"content":"        fra1GivenByTeam \u003d frLogic.updateFeedbackResponseCascade("},{"lineNumber":1199,"author":{"gitId":"-"},"content":"                FeedbackResponseAttributes.updateOptionsBuilder(fra1GivenByTeam.getId())"},{"lineNumber":1200,"author":{"gitId":"-"},"content":"                        .withGiver(student4InCourse1.getTeam())"},{"lineNumber":1201,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":1202,"author":{"gitId":"-"},"content":"        frcLogic.createFeedbackResponseComment("},{"lineNumber":1203,"author":{"gitId":"-"},"content":"                FeedbackResponseCommentAttributes"},{"lineNumber":1204,"author":{"gitId":"-"},"content":"                        .builder()"},{"lineNumber":1205,"author":{"gitId":"-"},"content":"                        .withCourseId(fra1GivenByTeam.getCourseId())"},{"lineNumber":1206,"author":{"gitId":"-"},"content":"                        .withFeedbackSessionName(fra1GivenByTeam.getFeedbackSessionName())"},{"lineNumber":1207,"author":{"gitId":"-"},"content":"                        .withCommentGiver(instructor1OfCourse1.getEmail())"},{"lineNumber":1208,"author":{"gitId":"-"},"content":"                        .withCommentText(\"Comment 1\")"},{"lineNumber":1209,"author":{"gitId":"-"},"content":"                        .withFeedbackQuestionId(fra1GivenByTeam.getFeedbackQuestionId())"},{"lineNumber":1210,"author":{"gitId":"-"},"content":"                        .withFeedbackResponseId(fra1GivenByTeam.getId())"},{"lineNumber":1211,"author":{"gitId":"-"},"content":"                        .withGiverSection(fra1GivenByTeam.getGiverSection())"},{"lineNumber":1212,"author":{"gitId":"-"},"content":"                        .withReceiverSection(fra1GivenByTeam.getRecipientSection())"},{"lineNumber":1213,"author":{"gitId":"-"},"content":"                        .withCommentFromFeedbackParticipant(false)"},{"lineNumber":1214,"author":{"gitId":"-"},"content":"                        .withCommentGiverType(FeedbackParticipantType.INSTRUCTORS)"},{"lineNumber":1215,"author":{"gitId":"-"},"content":"                        .withVisibilityFollowingFeedbackQuestion(false)"},{"lineNumber":1216,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":1217,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes fra2GivenByTeam \u003d getResponseFromDatabase(\"response1GracePeriodFeedback\");"},{"lineNumber":1218,"author":{"gitId":"-"},"content":"        // update the response\u0027s giver to the team name"},{"lineNumber":1219,"author":{"gitId":"-"},"content":"        fra2GivenByTeam \u003d frLogic.updateFeedbackResponseCascade("},{"lineNumber":1220,"author":{"gitId":"-"},"content":"                FeedbackResponseAttributes.updateOptionsBuilder(fra2GivenByTeam.getId())"},{"lineNumber":1221,"author":{"gitId":"-"},"content":"                        .withGiver(student4InCourse1.getTeam())"},{"lineNumber":1222,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":1223,"author":{"gitId":"-"},"content":"        frcLogic.createFeedbackResponseComment("},{"lineNumber":1224,"author":{"gitId":"-"},"content":"                FeedbackResponseCommentAttributes"},{"lineNumber":1225,"author":{"gitId":"-"},"content":"                        .builder()"},{"lineNumber":1226,"author":{"gitId":"-"},"content":"                        .withCourseId(fra2GivenByTeam.getCourseId())"},{"lineNumber":1227,"author":{"gitId":"-"},"content":"                        .withFeedbackSessionName(fra2GivenByTeam.getFeedbackSessionName())"},{"lineNumber":1228,"author":{"gitId":"-"},"content":"                        .withCommentGiver(instructor1OfCourse1.getEmail())"},{"lineNumber":1229,"author":{"gitId":"-"},"content":"                        .withCommentText(\"Comment 2\")"},{"lineNumber":1230,"author":{"gitId":"-"},"content":"                        .withFeedbackQuestionId(fra2GivenByTeam.getFeedbackQuestionId())"},{"lineNumber":1231,"author":{"gitId":"-"},"content":"                        .withFeedbackResponseId(fra2GivenByTeam.getId())"},{"lineNumber":1232,"author":{"gitId":"-"},"content":"                        .withGiverSection(fra2GivenByTeam.getGiverSection())"},{"lineNumber":1233,"author":{"gitId":"-"},"content":"                        .withReceiverSection(fra2GivenByTeam.getRecipientSection())"},{"lineNumber":1234,"author":{"gitId":"-"},"content":"                        .withCommentFromFeedbackParticipant(false)"},{"lineNumber":1235,"author":{"gitId":"-"},"content":"                        .withCommentGiverType(FeedbackParticipantType.INSTRUCTORS)"},{"lineNumber":1236,"author":{"gitId":"-"},"content":"                        .withVisibilityFollowingFeedbackQuestion(false)"},{"lineNumber":1237,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":1238,"author":{"gitId":"-"},"content":""},{"lineNumber":1239,"author":{"gitId":"-"},"content":"        String teamName \u003d student4InCourse1.getTeam();"},{"lineNumber":1240,"author":{"gitId":"-"},"content":"        assertEquals(teamName, fra1GivenByTeam.getGiver());"},{"lineNumber":1241,"author":{"gitId":"-"},"content":"        assertEquals(teamName, fra2GivenByTeam.getGiver());"},{"lineNumber":1242,"author":{"gitId":"-"},"content":""},{"lineNumber":1243,"author":{"gitId":"-"},"content":"        // both responses got some comments"},{"lineNumber":1244,"author":{"gitId":"-"},"content":"        assertFalse(frcLogic.getFeedbackResponseCommentForResponse(fra1GivenByTeam.getId()).isEmpty());"},{"lineNumber":1245,"author":{"gitId":"-"},"content":"        assertFalse(frcLogic.getFeedbackResponseCommentForResponse(fra2GivenByTeam.getId()).isEmpty());"},{"lineNumber":1246,"author":{"gitId":"-"},"content":""},{"lineNumber":1247,"author":{"gitId":"-"},"content":"        frLogic.deleteFeedbackResponsesInvolvedEntityOfCourseCascade(fra1GivenByTeam.getCourseId(), teamName);"},{"lineNumber":1248,"author":{"gitId":"-"},"content":""},{"lineNumber":1249,"author":{"gitId":"-"},"content":"        // responses received by the team should be deleted"},{"lineNumber":1250,"author":{"gitId":"-"},"content":"        assertNull(frLogic.getFeedbackResponse(fra1GivenByTeam.getId()));"},{"lineNumber":1251,"author":{"gitId":"-"},"content":"        assertNull(frLogic.getFeedbackResponse(fra2GivenByTeam.getId()));"},{"lineNumber":1252,"author":{"gitId":"-"},"content":""},{"lineNumber":1253,"author":{"gitId":"-"},"content":"        // their associated comments should be deleted"},{"lineNumber":1254,"author":{"gitId":"-"},"content":"        assertTrue(frcLogic.getFeedbackResponseCommentForResponse(fra1GivenByTeam.getId()).isEmpty());"},{"lineNumber":1255,"author":{"gitId":"-"},"content":"        assertTrue(frcLogic.getFeedbackResponseCommentForResponse(fra2GivenByTeam.getId()).isEmpty());"},{"lineNumber":1256,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1257,"author":{"gitId":"-"},"content":""},{"lineNumber":1258,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":1259,"author":{"gitId":"-"},"content":"    public void testGetSessionResultsForUser_studentSpecificQuestion_shouldHaveCorrectResponsesFiltered() {"},{"lineNumber":1260,"author":{"gitId":"-"},"content":"        // extra test data used on top of typical data bundle"},{"lineNumber":1261,"author":{"gitId":"-"},"content":"        removeAndRestoreDataBundle(loadDataBundle(\"/SpecialCharacterTest.json\"));"},{"lineNumber":1262,"author":{"gitId":"-"},"content":""},{"lineNumber":1263,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes question \u003d fqLogic.getFeedbackQuestion("},{"lineNumber":1264,"author":{"gitId":"-"},"content":"                \"First Session\", \"FQLogicPCT.CS2104\", 1);"},{"lineNumber":1265,"author":{"gitId":"-"},"content":""},{"lineNumber":1266,"author":{"gitId":"-"},"content":"        // Alice will see 3 responses"},{"lineNumber":1267,"author":{"gitId":"-"},"content":"        SessionResultsBundle bundle \u003d frLogic.getSessionResultsForUser("},{"lineNumber":1268,"author":{"gitId":"-"},"content":"                \"First Session\", \"FQLogicPCT.CS2104\", \"FQLogicPCT.alice.b@gmail.tmt\","},{"lineNumber":1269,"author":{"gitId":"-"},"content":"                false, question.getId());"},{"lineNumber":1270,"author":{"gitId":"-"},"content":"        assertEquals(1, bundle.getQuestionResponseMap().size());"},{"lineNumber":1271,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e responseForQuestion \u003d"},{"lineNumber":1272,"author":{"gitId":"-"},"content":"                bundle.getQuestionResponseMap().entrySet().iterator().next().getValue();"},{"lineNumber":1273,"author":{"gitId":"-"},"content":"        assertEquals(3, responseForQuestion.size());"},{"lineNumber":1274,"author":{"gitId":"-"},"content":""},{"lineNumber":1275,"author":{"gitId":"-"},"content":"        // Benny will see 3 responses"},{"lineNumber":1276,"author":{"gitId":"-"},"content":"        bundle \u003d frLogic.getSessionResultsForUser("},{"lineNumber":1277,"author":{"gitId":"-"},"content":"                \"First Session\", \"FQLogicPCT.CS2104\", \"FQLogicPCT.benny.c@gmail.tmt\","},{"lineNumber":1278,"author":{"gitId":"-"},"content":"                false, question.getId());"},{"lineNumber":1279,"author":{"gitId":"-"},"content":"        assertEquals(1, bundle.getQuestionResponseMap().size());"},{"lineNumber":1280,"author":{"gitId":"-"},"content":"        responseForQuestion \u003d bundle.getQuestionResponseMap().entrySet().iterator().next().getValue();"},{"lineNumber":1281,"author":{"gitId":"-"},"content":"        assertEquals(3, responseForQuestion.size());"},{"lineNumber":1282,"author":{"gitId":"-"},"content":""},{"lineNumber":1283,"author":{"gitId":"-"},"content":"        // Charlie will see 2 responses"},{"lineNumber":1284,"author":{"gitId":"-"},"content":"        bundle \u003d frLogic.getSessionResultsForUser("},{"lineNumber":1285,"author":{"gitId":"-"},"content":"                \"First Session\", \"FQLogicPCT.CS2104\", \"FQLogicPCT.charlie.d@gmail.tmt\","},{"lineNumber":1286,"author":{"gitId":"-"},"content":"                false, question.getId());"},{"lineNumber":1287,"author":{"gitId":"-"},"content":"        assertEquals(1, bundle.getQuestionResponseMap().size());"},{"lineNumber":1288,"author":{"gitId":"-"},"content":"        responseForQuestion \u003d bundle.getQuestionResponseMap().entrySet().iterator().next().getValue();"},{"lineNumber":1289,"author":{"gitId":"-"},"content":"        assertEquals(2, responseForQuestion.size());"},{"lineNumber":1290,"author":{"gitId":"-"},"content":""},{"lineNumber":1291,"author":{"gitId":"-"},"content":"        // Danny will see 2 responses"},{"lineNumber":1292,"author":{"gitId":"-"},"content":"        bundle \u003d frLogic.getSessionResultsForUser("},{"lineNumber":1293,"author":{"gitId":"-"},"content":"                \"First Session\", \"FQLogicPCT.CS2104\", \"FQLogicPCT.danny.e@gmail.tmt\","},{"lineNumber":1294,"author":{"gitId":"-"},"content":"                false, question.getId());"},{"lineNumber":1295,"author":{"gitId":"-"},"content":"        assertEquals(1, bundle.getQuestionResponseMap().size());"},{"lineNumber":1296,"author":{"gitId":"-"},"content":"        responseForQuestion \u003d bundle.getQuestionResponseMap().entrySet().iterator().next().getValue();"},{"lineNumber":1297,"author":{"gitId":"-"},"content":"        assertEquals(2, responseForQuestion.size());"},{"lineNumber":1298,"author":{"gitId":"-"},"content":""},{"lineNumber":1299,"author":{"gitId":"-"},"content":"        // Emily will see 1 response"},{"lineNumber":1300,"author":{"gitId":"-"},"content":"        bundle \u003d frLogic.getSessionResultsForUser("},{"lineNumber":1301,"author":{"gitId":"-"},"content":"                \"First Session\", \"FQLogicPCT.CS2104\", \"FQLogicPCT.emily.f@gmail.tmt\","},{"lineNumber":1302,"author":{"gitId":"-"},"content":"                false, question.getId());"},{"lineNumber":1303,"author":{"gitId":"-"},"content":"        assertEquals(1, bundle.getQuestionResponseMap().size());"},{"lineNumber":1304,"author":{"gitId":"-"},"content":"        responseForQuestion \u003d bundle.getQuestionResponseMap().entrySet().iterator().next().getValue();"},{"lineNumber":1305,"author":{"gitId":"-"},"content":"        assertEquals(1, responseForQuestion.size());"},{"lineNumber":1306,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1307,"author":{"gitId":"-"},"content":""},{"lineNumber":1308,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":1309,"author":{"gitId":"-"},"content":"    public void testGetSessionResultsForUser_studentAllQuestions_shouldGenerateCorrectBundle() {"},{"lineNumber":1310,"author":{"gitId":"-"},"content":"        DataBundle responseBundle \u003d loadDataBundle(\"/FeedbackSessionResultsTest.json\");"},{"lineNumber":1311,"author":{"gitId":"-"},"content":"        removeAndRestoreDataBundle(responseBundle);"},{"lineNumber":1312,"author":{"gitId":"-"},"content":""},{"lineNumber":1313,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes session \u003d responseBundle.feedbackSessions.get(\"standard.session\");"},{"lineNumber":1314,"author":{"gitId":"-"},"content":""},{"lineNumber":1315,"author":{"gitId":"-"},"content":"        // Test result bundle for student1"},{"lineNumber":1316,"author":{"gitId":"-"},"content":"        StudentAttributes student \u003d responseBundle.students.get(\"student1InCourse1\");"},{"lineNumber":1317,"author":{"gitId":"-"},"content":"        SessionResultsBundle bundle \u003d frLogic.getSessionResultsForUser("},{"lineNumber":1318,"author":{"gitId":"-"},"content":"                session.getFeedbackSessionName(), session.getCourseId(), student.getEmail(),"},{"lineNumber":1319,"author":{"gitId":"-"},"content":"                false, null);"},{"lineNumber":1320,"author":{"gitId":"-"},"content":""},{"lineNumber":1321,"author":{"gitId":"-"},"content":"        // Student can see responses: q1r1, q2r1,3, q3r1, qr4r2-3, q5r1, q7r1-2, q8r1-2"},{"lineNumber":1322,"author":{"gitId":"-"},"content":"        // We don\u0027t check the actual IDs as this is also implicitly tested"},{"lineNumber":1323,"author":{"gitId":"-"},"content":"        // later when checking the visibility table."},{"lineNumber":1324,"author":{"gitId":"-"},"content":"        int totalResponse \u003d 0;"},{"lineNumber":1325,"author":{"gitId":"-"},"content":"        for (Map.Entry\u003cString, List\u003cFeedbackResponseAttributes\u003e\u003e entry"},{"lineNumber":1326,"author":{"gitId":"-"},"content":"                : bundle.getQuestionResponseMap().entrySet()) {"},{"lineNumber":1327,"author":{"gitId":"-"},"content":"            totalResponse +\u003d entry.getValue().size();"},{"lineNumber":1328,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1329,"author":{"gitId":"-"},"content":"        int totalMissingResponse \u003d 0;"},{"lineNumber":1330,"author":{"gitId":"-"},"content":"        for (Map.Entry\u003cString, List\u003cFeedbackResponseAttributes\u003e\u003e entry"},{"lineNumber":1331,"author":{"gitId":"-"},"content":"                : bundle.getQuestionMissingResponseMap().entrySet()) {"},{"lineNumber":1332,"author":{"gitId":"-"},"content":"            totalMissingResponse +\u003d entry.getValue().size();"},{"lineNumber":1333,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1334,"author":{"gitId":"-"},"content":"        assertEquals(11, totalResponse);"},{"lineNumber":1335,"author":{"gitId":"-"},"content":"        // student should not see missing responses"},{"lineNumber":1336,"author":{"gitId":"-"},"content":"        assertEquals(0, totalMissingResponse);"},{"lineNumber":1337,"author":{"gitId":"-"},"content":"        // student cannot see q6 because there is no viewable response"},{"lineNumber":1338,"author":{"gitId":"-"},"content":"        assertEquals(7, bundle.getQuestionsMap().size());"},{"lineNumber":1339,"author":{"gitId":"-"},"content":"        assertEquals(7, bundle.getQuestionResponseMap().size());"},{"lineNumber":1340,"author":{"gitId":"-"},"content":"        assertEquals(7, bundle.getQuestionMissingResponseMap().size());"},{"lineNumber":1341,"author":{"gitId":"-"},"content":""},{"lineNumber":1342,"author":{"gitId":"-"},"content":"        // Test the generated response visibilityTable for userNames."},{"lineNumber":1343,"author":{"gitId":"-"},"content":"        Map\u003cString, Boolean\u003e responseGiverVisibilityTable \u003d bundle.getResponseGiverVisibilityTable();"},{"lineNumber":1344,"author":{"gitId":"-"},"content":"        assertTrue(responseGiverVisibilityTable.get(getResponseId(\"qn1.resp1\", responseBundle)));"},{"lineNumber":1345,"author":{"gitId":"-"},"content":"        assertTrue(responseGiverVisibilityTable.get(getResponseId(\"qn2.resp1\", responseBundle)));"},{"lineNumber":1346,"author":{"gitId":"-"},"content":"        assertTrue(responseGiverVisibilityTable.get(getResponseId(\"qn2.resp3\", responseBundle)));"},{"lineNumber":1347,"author":{"gitId":"-"},"content":"        assertTrue(responseGiverVisibilityTable.get(getResponseId(\"qn3.resp1\", responseBundle)));"},{"lineNumber":1348,"author":{"gitId":"-"},"content":"        assertTrue(responseGiverVisibilityTable.get(getResponseId(\"qn4.resp2\", responseBundle)));"},{"lineNumber":1349,"author":{"gitId":"-"},"content":"        assertFalse(responseGiverVisibilityTable.get(getResponseId(\"qn4.resp3\", responseBundle)));"},{"lineNumber":1350,"author":{"gitId":"-"},"content":"        assertTrue(responseGiverVisibilityTable.get(getResponseId(\"qn5.resp1\", responseBundle)));"},{"lineNumber":1351,"author":{"gitId":"-"},"content":"        assertTrue(responseGiverVisibilityTable.get(getResponseId(\"qn7.resp1\", responseBundle)));"},{"lineNumber":1352,"author":{"gitId":"-"},"content":"        assertTrue(responseGiverVisibilityTable.get(getResponseId(\"qn7.resp2\", responseBundle)));"},{"lineNumber":1353,"author":{"gitId":"-"},"content":"        assertTrue(responseGiverVisibilityTable.get(getResponseId(\"qn8.resp1\", responseBundle)));"},{"lineNumber":1354,"author":{"gitId":"-"},"content":"        assertTrue(responseGiverVisibilityTable.get(getResponseId(\"qn8.resp2\", responseBundle)));"},{"lineNumber":1355,"author":{"gitId":"-"},"content":"        assertEquals(totalResponse, responseGiverVisibilityTable.size());"},{"lineNumber":1356,"author":{"gitId":"-"},"content":""},{"lineNumber":1357,"author":{"gitId":"-"},"content":"        Map\u003cString, Boolean\u003e responseRecipientVisibilityTable \u003d bundle.getResponseRecipientVisibilityTable();"},{"lineNumber":1358,"author":{"gitId":"-"},"content":"        assertTrue(responseRecipientVisibilityTable.get(getResponseId(\"qn1.resp1\", responseBundle)));"},{"lineNumber":1359,"author":{"gitId":"-"},"content":"        assertTrue(responseRecipientVisibilityTable.get(getResponseId(\"qn2.resp1\", responseBundle)));"},{"lineNumber":1360,"author":{"gitId":"-"},"content":"        assertTrue(responseRecipientVisibilityTable.get(getResponseId(\"qn2.resp3\", responseBundle)));"},{"lineNumber":1361,"author":{"gitId":"-"},"content":"        assertTrue(responseRecipientVisibilityTable.get(getResponseId(\"qn3.resp1\", responseBundle)));"},{"lineNumber":1362,"author":{"gitId":"-"},"content":"        assertTrue(responseRecipientVisibilityTable.get(getResponseId(\"qn4.resp2\", responseBundle)));"},{"lineNumber":1363,"author":{"gitId":"-"},"content":"        assertTrue(responseRecipientVisibilityTable.get(getResponseId(\"qn4.resp3\", responseBundle)));"},{"lineNumber":1364,"author":{"gitId":"-"},"content":"        assertFalse(responseRecipientVisibilityTable.get(getResponseId(\"qn5.resp1\", responseBundle)));"},{"lineNumber":1365,"author":{"gitId":"-"},"content":"        assertTrue(responseRecipientVisibilityTable.get(getResponseId(\"qn7.resp1\", responseBundle)));"},{"lineNumber":1366,"author":{"gitId":"-"},"content":"        assertTrue(responseRecipientVisibilityTable.get(getResponseId(\"qn7.resp2\", responseBundle)));"},{"lineNumber":1367,"author":{"gitId":"-"},"content":"        assertTrue(responseRecipientVisibilityTable.get(getResponseId(\"qn8.resp1\", responseBundle)));"},{"lineNumber":1368,"author":{"gitId":"-"},"content":"        assertTrue(responseRecipientVisibilityTable.get(getResponseId(\"qn8.resp2\", responseBundle)));"},{"lineNumber":1369,"author":{"gitId":"-"},"content":"        assertEquals(totalResponse, responseRecipientVisibilityTable.size());"},{"lineNumber":1370,"author":{"gitId":"-"},"content":""},{"lineNumber":1371,"author":{"gitId":"-"},"content":"        // no entry in comment visibility table"},{"lineNumber":1372,"author":{"gitId":"-"},"content":"        Map\u003cLong, Boolean\u003e commentGiverVisibilityTable \u003d bundle.getCommentGiverVisibilityTable();"},{"lineNumber":1373,"author":{"gitId":"-"},"content":"        assertEquals(0, commentGiverVisibilityTable.size());"},{"lineNumber":1374,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1375,"author":{"gitId":"-"},"content":""},{"lineNumber":1376,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":1377,"author":{"gitId":"-"},"content":"    public void testGetSessionResultsForUser_instructor_shouldGenerateCorrectBundle() {"},{"lineNumber":1378,"author":{"gitId":"-"},"content":"        DataBundle responseBundle \u003d loadDataBundle(\"/FeedbackSessionResultsTest.json\");"},{"lineNumber":1379,"author":{"gitId":"-"},"content":"        removeAndRestoreDataBundle(responseBundle);"},{"lineNumber":1380,"author":{"gitId":"-"},"content":""},{"lineNumber":1381,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes session \u003d responseBundle.feedbackSessions.get(\"standard.session\");"},{"lineNumber":1382,"author":{"gitId":"-"},"content":""},{"lineNumber":1383,"author":{"gitId":"-"},"content":"        // Test result bundle for instructor1"},{"lineNumber":1384,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor \u003d responseBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":1385,"author":{"gitId":"-"},"content":"        SessionResultsBundle bundle \u003d frLogic.getSessionResultsForUser("},{"lineNumber":1386,"author":{"gitId":"-"},"content":"                session.getFeedbackSessionName(), session.getCourseId(), instructor.getEmail(),"},{"lineNumber":1387,"author":{"gitId":"-"},"content":"                true, null);"},{"lineNumber":1388,"author":{"gitId":"-"},"content":""},{"lineNumber":1389,"author":{"gitId":"-"},"content":"        // Instructor can see responses: q3r1, q6r1"},{"lineNumber":1390,"author":{"gitId":"-"},"content":"        // We don\u0027t check the actual IDs as this is also implicitly tested"},{"lineNumber":1391,"author":{"gitId":"-"},"content":"        // later when checking the visibility table."},{"lineNumber":1392,"author":{"gitId":"-"},"content":"        int totalResponse \u003d 0;"},{"lineNumber":1393,"author":{"gitId":"-"},"content":"        for (Map.Entry\u003cString, List\u003cFeedbackResponseAttributes\u003e\u003e entry"},{"lineNumber":1394,"author":{"gitId":"-"},"content":"                : bundle.getQuestionResponseMap().entrySet()) {"},{"lineNumber":1395,"author":{"gitId":"-"},"content":"            totalResponse +\u003d entry.getValue().size();"},{"lineNumber":1396,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1397,"author":{"gitId":"-"},"content":"        int totalMissingResponse \u003d 0;"},{"lineNumber":1398,"author":{"gitId":"-"},"content":"        for (Map.Entry\u003cString, List\u003cFeedbackResponseAttributes\u003e\u003e entry"},{"lineNumber":1399,"author":{"gitId":"-"},"content":"                : bundle.getQuestionMissingResponseMap().entrySet()) {"},{"lineNumber":1400,"author":{"gitId":"-"},"content":"            totalMissingResponse +\u003d entry.getValue().size();"},{"lineNumber":1401,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1402,"author":{"gitId":"-"},"content":"        assertEquals(2, totalResponse);"},{"lineNumber":1403,"author":{"gitId":"-"},"content":"        // instructor should not see missing responses"},{"lineNumber":1404,"author":{"gitId":"-"},"content":"        assertEquals(0, totalMissingResponse);"},{"lineNumber":1405,"author":{"gitId":"-"},"content":""},{"lineNumber":1406,"author":{"gitId":"-"},"content":"        assertEquals(2, bundle.getQuestionsMap().size());"},{"lineNumber":1407,"author":{"gitId":"-"},"content":"        assertEquals(2, bundle.getQuestionResponseMap().size());"},{"lineNumber":1408,"author":{"gitId":"-"},"content":"        assertEquals(2, bundle.getQuestionMissingResponseMap().size());"},{"lineNumber":1409,"author":{"gitId":"-"},"content":""},{"lineNumber":1410,"author":{"gitId":"-"},"content":"        // Test the generated response visibilityTable for userNames."},{"lineNumber":1411,"author":{"gitId":"-"},"content":"        Map\u003cString, Boolean\u003e responseGiverVisibilityTable \u003d bundle.getResponseGiverVisibilityTable();"},{"lineNumber":1412,"author":{"gitId":"-"},"content":"        assertTrue(responseGiverVisibilityTable.get(getResponseId(\"qn3.resp1\", responseBundle)));"},{"lineNumber":1413,"author":{"gitId":"-"},"content":"        assertTrue(responseGiverVisibilityTable.get(getResponseId(\"qn6.resp1\", responseBundle)));"},{"lineNumber":1414,"author":{"gitId":"-"},"content":"        assertEquals(totalResponse, responseGiverVisibilityTable.size());"},{"lineNumber":1415,"author":{"gitId":"-"},"content":""},{"lineNumber":1416,"author":{"gitId":"-"},"content":"        Map\u003cString, Boolean\u003e responseRecipientVisibilityTable \u003d bundle.getResponseRecipientVisibilityTable();"},{"lineNumber":1417,"author":{"gitId":"-"},"content":"        assertFalse(responseRecipientVisibilityTable.get(getResponseId(\"qn3.resp1\", responseBundle)));"},{"lineNumber":1418,"author":{"gitId":"-"},"content":"        assertTrue(responseRecipientVisibilityTable.get(getResponseId(\"qn6.resp1\", responseBundle)));"},{"lineNumber":1419,"author":{"gitId":"-"},"content":"        assertEquals(totalResponse, responseRecipientVisibilityTable.size());"},{"lineNumber":1420,"author":{"gitId":"-"},"content":""},{"lineNumber":1421,"author":{"gitId":"-"},"content":"        // no entry in comment visibility table"},{"lineNumber":1422,"author":{"gitId":"-"},"content":"        Map\u003cLong, Boolean\u003e commentGiverVisibilityTable \u003d bundle.getCommentGiverVisibilityTable();"},{"lineNumber":1423,"author":{"gitId":"-"},"content":"        assertEquals(0, commentGiverVisibilityTable.size());"},{"lineNumber":1424,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1425,"author":{"gitId":"-"},"content":""},{"lineNumber":1426,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":1427,"author":{"gitId":"-"},"content":"    public void testGetSessionResultsForCourse_specificQuestion_shouldHaveCorrectResponsesFiltered() {"},{"lineNumber":1428,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fq \u003d getQuestionFromDatabase(\"qn3InSession1InCourse1\");"},{"lineNumber":1429,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor \u003d dataBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":1430,"author":{"gitId":"-"},"content":""},{"lineNumber":1431,"author":{"gitId":"-"},"content":"        // no section specified"},{"lineNumber":1432,"author":{"gitId":"-"},"content":"        SessionResultsBundle bundle \u003d frLogic.getSessionResultsForCourse("},{"lineNumber":1433,"author":{"gitId":"-"},"content":"                fq.getFeedbackSessionName(), fq.getCourseId(), instructor.getEmail(),"},{"lineNumber":1434,"author":{"gitId":"-"},"content":"                fq.getId(), null, FeedbackResultFetchType.BOTH);"},{"lineNumber":1435,"author":{"gitId":"-"},"content":"        assertEquals(1, bundle.getQuestionResponseMap().size());"},{"lineNumber":1436,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e responseForQuestion \u003d"},{"lineNumber":1437,"author":{"gitId":"-"},"content":"                bundle.getQuestionResponseMap().entrySet().iterator().next().getValue();"},{"lineNumber":1438,"author":{"gitId":"-"},"content":"        assertEquals(1, responseForQuestion.size());"},{"lineNumber":1439,"author":{"gitId":"-"},"content":""},{"lineNumber":1440,"author":{"gitId":"-"},"content":"        // section specified"},{"lineNumber":1441,"author":{"gitId":"-"},"content":"        fq \u003d getQuestionFromDatabase(\"qn2InSession1InCourse1\");"},{"lineNumber":1442,"author":{"gitId":"-"},"content":"        bundle \u003d frLogic.getSessionResultsForCourse("},{"lineNumber":1443,"author":{"gitId":"-"},"content":"                fq.getFeedbackSessionName(), fq.getCourseId(), instructor.getEmail(),"},{"lineNumber":1444,"author":{"gitId":"-"},"content":"                fq.getId(), \"Section 1\", FeedbackResultFetchType.BOTH);"},{"lineNumber":1445,"author":{"gitId":"-"},"content":"        assertEquals(1, bundle.getQuestionResponseMap().size());"},{"lineNumber":1446,"author":{"gitId":"-"},"content":"        responseForQuestion \u003d bundle.getQuestionResponseMap().entrySet().iterator().next().getValue();"},{"lineNumber":1447,"author":{"gitId":"-"},"content":"        assertEquals(3, responseForQuestion.size());"},{"lineNumber":1448,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1449,"author":{"gitId":"-"},"content":""},{"lineNumber":1450,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":1451,"author":{"gitId":"-"},"content":"    public void testGetSessionResultsForCourse_allQuestions_shouldGenerateCorrectBundle() {"},{"lineNumber":1452,"author":{"gitId":"-"},"content":"        DataBundle responseBundle \u003d loadDataBundle(\"/FeedbackSessionResultsTest.json\");"},{"lineNumber":1453,"author":{"gitId":"-"},"content":"        removeAndRestoreDataBundle(responseBundle);"},{"lineNumber":1454,"author":{"gitId":"-"},"content":""},{"lineNumber":1455,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes session \u003d responseBundle.feedbackSessions.get(\"standard.session\");"},{"lineNumber":1456,"author":{"gitId":"-"},"content":""},{"lineNumber":1457,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor \u003d responseBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":1458,"author":{"gitId":"-"},"content":"        SessionResultsBundle bundle \u003d frLogic.getSessionResultsForCourse("},{"lineNumber":1459,"author":{"gitId":"-"},"content":"                session.getFeedbackSessionName(), session.getCourseId(), instructor.getEmail(),"},{"lineNumber":1460,"author":{"gitId":"-"},"content":"                null, null, FeedbackResultFetchType.BOTH);"},{"lineNumber":1461,"author":{"gitId":"-"},"content":""},{"lineNumber":1462,"author":{"gitId":"-"},"content":"        // Instructor can see responses: q2r1-3, q3r1-2, q4r1-3, q5r1, q6r1"},{"lineNumber":1463,"author":{"gitId":"-"},"content":"        int totalResponse \u003d 0;"},{"lineNumber":1464,"author":{"gitId":"-"},"content":"        for (Map.Entry\u003cString, List\u003cFeedbackResponseAttributes\u003e\u003e entry"},{"lineNumber":1465,"author":{"gitId":"-"},"content":"                : bundle.getQuestionResponseMap().entrySet()) {"},{"lineNumber":1466,"author":{"gitId":"-"},"content":"            totalResponse +\u003d entry.getValue().size();"},{"lineNumber":1467,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1468,"author":{"gitId":"-"},"content":"        int totalMissingResponse \u003d 0;"},{"lineNumber":1469,"author":{"gitId":"-"},"content":"        for (Map.Entry\u003cString, List\u003cFeedbackResponseAttributes\u003e\u003e entry"},{"lineNumber":1470,"author":{"gitId":"-"},"content":"                : bundle.getQuestionMissingResponseMap().entrySet()) {"},{"lineNumber":1471,"author":{"gitId":"-"},"content":"            totalMissingResponse +\u003d entry.getValue().size();"},{"lineNumber":1472,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1473,"author":{"gitId":"-"},"content":"        assertEquals(10, totalResponse);"},{"lineNumber":1474,"author":{"gitId":"-"},"content":"        assertEquals(4, totalMissingResponse);"},{"lineNumber":1475,"author":{"gitId":"-"},"content":"        // Instructor should still see all questions"},{"lineNumber":1476,"author":{"gitId":"-"},"content":"        assertEquals(8, bundle.getQuestionsMap().size());"},{"lineNumber":1477,"author":{"gitId":"-"},"content":"        assertEquals(8, bundle.getQuestionResponseMap().size());"},{"lineNumber":1478,"author":{"gitId":"-"},"content":"        assertEquals(8, bundle.getQuestionMissingResponseMap().size());"},{"lineNumber":1479,"author":{"gitId":"-"},"content":""},{"lineNumber":1480,"author":{"gitId":"-"},"content":"        // Test the generated response visibilityTable for userNames."},{"lineNumber":1481,"author":{"gitId":"-"},"content":"        Map\u003cString, Boolean\u003e responseGiverVisibilityTable \u003d bundle.getResponseGiverVisibilityTable();"},{"lineNumber":1482,"author":{"gitId":"-"},"content":"        assertFalse(responseGiverVisibilityTable.get(getResponseId(\"qn2.resp1\", responseBundle)));"},{"lineNumber":1483,"author":{"gitId":"-"},"content":"        assertFalse(responseGiverVisibilityTable.get(getResponseId(\"qn2.resp2\", responseBundle)));"},{"lineNumber":1484,"author":{"gitId":"-"},"content":"        assertFalse(responseGiverVisibilityTable.get(getResponseId(\"qn2.resp3\", responseBundle)));"},{"lineNumber":1485,"author":{"gitId":"-"},"content":"        assertTrue(responseGiverVisibilityTable.get(getResponseId(\"qn3.resp1\", responseBundle)));"},{"lineNumber":1486,"author":{"gitId":"-"},"content":"        assertFalse(responseGiverVisibilityTable.get(getResponseId(\"qn3.resp2\", responseBundle)));"},{"lineNumber":1487,"author":{"gitId":"-"},"content":"        assertTrue(responseGiverVisibilityTable.get(getResponseId(\"qn4.resp1\", responseBundle)));"},{"lineNumber":1488,"author":{"gitId":"-"},"content":"        assertTrue(responseGiverVisibilityTable.get(getResponseId(\"qn4.resp2\", responseBundle)));"},{"lineNumber":1489,"author":{"gitId":"-"},"content":"        assertTrue(responseGiverVisibilityTable.get(getResponseId(\"qn4.resp3\", responseBundle)));"},{"lineNumber":1490,"author":{"gitId":"-"},"content":"        assertFalse(responseGiverVisibilityTable.get(getResponseId(\"qn5.resp1\", responseBundle)));"},{"lineNumber":1491,"author":{"gitId":"-"},"content":"        assertTrue(responseGiverVisibilityTable.get(getResponseId(\"qn6.resp1\", responseBundle)));"},{"lineNumber":1492,"author":{"gitId":"-"},"content":"        assertEquals(totalResponse + totalMissingResponse, responseGiverVisibilityTable.size());"},{"lineNumber":1493,"author":{"gitId":"-"},"content":""},{"lineNumber":1494,"author":{"gitId":"-"},"content":"        Map\u003cString, Boolean\u003e responseRecipientVisibilityTable \u003d bundle.getResponseRecipientVisibilityTable();"},{"lineNumber":1495,"author":{"gitId":"-"},"content":"        assertFalse(responseRecipientVisibilityTable.get(getResponseId(\"qn2.resp1\", responseBundle)));"},{"lineNumber":1496,"author":{"gitId":"-"},"content":"        assertFalse(responseRecipientVisibilityTable.get(getResponseId(\"qn2.resp2\", responseBundle)));"},{"lineNumber":1497,"author":{"gitId":"-"},"content":"        assertFalse(responseRecipientVisibilityTable.get(getResponseId(\"qn2.resp3\", responseBundle)));"},{"lineNumber":1498,"author":{"gitId":"-"},"content":"        assertFalse(responseRecipientVisibilityTable.get(getResponseId(\"qn3.resp1\", responseBundle)));"},{"lineNumber":1499,"author":{"gitId":"-"},"content":"        assertFalse(responseRecipientVisibilityTable.get(getResponseId(\"qn3.resp2\", responseBundle)));"},{"lineNumber":1500,"author":{"gitId":"-"},"content":"        assertTrue(responseRecipientVisibilityTable.get(getResponseId(\"qn4.resp1\", responseBundle)));"},{"lineNumber":1501,"author":{"gitId":"-"},"content":"        assertTrue(responseRecipientVisibilityTable.get(getResponseId(\"qn4.resp2\", responseBundle)));"},{"lineNumber":1502,"author":{"gitId":"-"},"content":"        assertTrue(responseRecipientVisibilityTable.get(getResponseId(\"qn4.resp3\", responseBundle)));"},{"lineNumber":1503,"author":{"gitId":"-"},"content":"        assertTrue(responseRecipientVisibilityTable.get(getResponseId(\"qn5.resp1\", responseBundle)));"},{"lineNumber":1504,"author":{"gitId":"-"},"content":"        assertTrue(responseRecipientVisibilityTable.get(getResponseId(\"qn6.resp1\", responseBundle)));"},{"lineNumber":1505,"author":{"gitId":"-"},"content":"        assertEquals(totalResponse + totalMissingResponse, responseRecipientVisibilityTable.size());"},{"lineNumber":1506,"author":{"gitId":"-"},"content":""},{"lineNumber":1507,"author":{"gitId":"-"},"content":"        // no entry in comment visibility table"},{"lineNumber":1508,"author":{"gitId":"-"},"content":"        Map\u003cLong, Boolean\u003e commentGiverVisibilityTable \u003d bundle.getCommentGiverVisibilityTable();"},{"lineNumber":1509,"author":{"gitId":"-"},"content":"        assertEquals(0, commentGiverVisibilityTable.size());"},{"lineNumber":1510,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1511,"author":{"gitId":"-"},"content":""},{"lineNumber":1512,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":1513,"author":{"gitId":"-"},"content":"    public void testGetSessionResultsForCourse_allQuestionsSpecificSection_shouldGenerateCorrectBundle() {"},{"lineNumber":1514,"author":{"gitId":"-"},"content":"        DataBundle responseBundle \u003d loadDataBundle(\"/FeedbackSessionResultsTest.json\");"},{"lineNumber":1515,"author":{"gitId":"-"},"content":"        removeAndRestoreDataBundle(responseBundle);"},{"lineNumber":1516,"author":{"gitId":"-"},"content":""},{"lineNumber":1517,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes session \u003d responseBundle.feedbackSessions.get(\"standard.session\");"},{"lineNumber":1518,"author":{"gitId":"-"},"content":""},{"lineNumber":1519,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor \u003d responseBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":1520,"author":{"gitId":"-"},"content":"        SessionResultsBundle bundle \u003d frLogic.getSessionResultsForCourse("},{"lineNumber":1521,"author":{"gitId":"-"},"content":"                session.getFeedbackSessionName(), session.getCourseId(), instructor.getEmail(),"},{"lineNumber":1522,"author":{"gitId":"-"},"content":"                null, \"Section A\", FeedbackResultFetchType.BOTH);"},{"lineNumber":1523,"author":{"gitId":"-"},"content":""},{"lineNumber":1524,"author":{"gitId":"-"},"content":"        // Instructor can see responses: q2r1-3, q3r1-2, q4r1-3, q5r1, q6r1"},{"lineNumber":1525,"author":{"gitId":"-"},"content":"        // after filtering by section, the number of responses seen by instructor will differ."},{"lineNumber":1526,"author":{"gitId":"-"},"content":"        // Responses viewed by instructor after filtering: q2r1-3, q3r1, q4r2-3, q5r1"},{"lineNumber":1527,"author":{"gitId":"-"},"content":"        int totalResponse \u003d 0;"},{"lineNumber":1528,"author":{"gitId":"-"},"content":"        for (Map.Entry\u003cString, List\u003cFeedbackResponseAttributes\u003e\u003e entry"},{"lineNumber":1529,"author":{"gitId":"-"},"content":"                : bundle.getQuestionResponseMap().entrySet()) {"},{"lineNumber":1530,"author":{"gitId":"-"},"content":"            totalResponse +\u003d entry.getValue().size();"},{"lineNumber":1531,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1532,"author":{"gitId":"-"},"content":"        int totalMissingResponse \u003d 0;"},{"lineNumber":1533,"author":{"gitId":"-"},"content":"        for (Map.Entry\u003cString, List\u003cFeedbackResponseAttributes\u003e\u003e entry"},{"lineNumber":1534,"author":{"gitId":"-"},"content":"                : bundle.getQuestionMissingResponseMap().entrySet()) {"},{"lineNumber":1535,"author":{"gitId":"-"},"content":"            totalMissingResponse +\u003d entry.getValue().size();"},{"lineNumber":1536,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1537,"author":{"gitId":"-"},"content":"        assertEquals(7, totalResponse);"},{"lineNumber":1538,"author":{"gitId":"-"},"content":"        assertEquals(0, totalMissingResponse);"},{"lineNumber":1539,"author":{"gitId":"-"},"content":"        // Instructor should still see all questions"},{"lineNumber":1540,"author":{"gitId":"-"},"content":"        assertEquals(8, bundle.getQuestionsMap().size());"},{"lineNumber":1541,"author":{"gitId":"-"},"content":"        assertEquals(8, bundle.getQuestionResponseMap().size());"},{"lineNumber":1542,"author":{"gitId":"-"},"content":"        assertEquals(8, bundle.getQuestionMissingResponseMap().size());"},{"lineNumber":1543,"author":{"gitId":"-"},"content":""},{"lineNumber":1544,"author":{"gitId":"-"},"content":"        // Test the generated response visibilityTable for userNames."},{"lineNumber":1545,"author":{"gitId":"-"},"content":"        Map\u003cString, Boolean\u003e responseGiverVisibilityTable \u003d bundle.getResponseGiverVisibilityTable();"},{"lineNumber":1546,"author":{"gitId":"-"},"content":"        assertTrue(responseGiverVisibilityTable.get(getResponseId(\"qn3.resp1\", responseBundle)));"},{"lineNumber":1547,"author":{"gitId":"-"},"content":"        assertTrue(responseGiverVisibilityTable.get(getResponseId(\"qn4.resp3\", responseBundle)));"},{"lineNumber":1548,"author":{"gitId":"-"},"content":"        assertFalse(responseGiverVisibilityTable.get(getResponseId(\"qn2.resp3\", responseBundle)));"},{"lineNumber":1549,"author":{"gitId":"-"},"content":"        assertFalse(responseGiverVisibilityTable.get(getResponseId(\"qn2.resp1\", responseBundle)));"},{"lineNumber":1550,"author":{"gitId":"-"},"content":"        assertEquals(totalResponse + totalMissingResponse, responseGiverVisibilityTable.size());"},{"lineNumber":1551,"author":{"gitId":"-"},"content":""},{"lineNumber":1552,"author":{"gitId":"-"},"content":"        Map\u003cString, Boolean\u003e responseRecipientVisibilityTable \u003d bundle.getResponseRecipientVisibilityTable();"},{"lineNumber":1553,"author":{"gitId":"-"},"content":"        assertFalse(responseRecipientVisibilityTable.get(getResponseId(\"qn3.resp1\", responseBundle)));"},{"lineNumber":1554,"author":{"gitId":"-"},"content":"        assertTrue(responseRecipientVisibilityTable.get(getResponseId(\"qn4.resp3\", responseBundle)));"},{"lineNumber":1555,"author":{"gitId":"-"},"content":"        assertFalse(responseRecipientVisibilityTable.get(getResponseId(\"qn2.resp3\", responseBundle)));"},{"lineNumber":1556,"author":{"gitId":"-"},"content":"        assertFalse(responseRecipientVisibilityTable.get(getResponseId(\"qn2.resp1\", responseBundle)));"},{"lineNumber":1557,"author":{"gitId":"-"},"content":"        assertEquals(totalResponse + totalMissingResponse, responseGiverVisibilityTable.size());"},{"lineNumber":1558,"author":{"gitId":"-"},"content":"        assertEquals(totalResponse + totalMissingResponse, responseRecipientVisibilityTable.size());"},{"lineNumber":1559,"author":{"gitId":"-"},"content":""},{"lineNumber":1560,"author":{"gitId":"-"},"content":"        // no entry in comment visibility table"},{"lineNumber":1561,"author":{"gitId":"-"},"content":"        Map\u003cLong, Boolean\u003e commentGiverVisibilityTable \u003d bundle.getCommentGiverVisibilityTable();"},{"lineNumber":1562,"author":{"gitId":"-"},"content":"        assertEquals(0, commentGiverVisibilityTable.size());"},{"lineNumber":1563,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1564,"author":{"gitId":"-"},"content":""},{"lineNumber":1565,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":1566,"author":{"gitId":"-"},"content":"    public void testGetSessionResultsForCourse_responseFetchByGiverOrReceiverOnly_shouldGenerateCorrectBundle() {"},{"lineNumber":1567,"author":{"gitId":"-"},"content":"        var responseBundle \u003d loadDataBundle(\"/FeedbackSessionResultsTest.json\");"},{"lineNumber":1568,"author":{"gitId":"-"},"content":"        removeAndRestoreDataBundle(responseBundle);"},{"lineNumber":1569,"author":{"gitId":"-"},"content":""},{"lineNumber":1570,"author":{"gitId":"-"},"content":"        var session \u003d responseBundle.feedbackSessions.get(\"standard.session\");"},{"lineNumber":1571,"author":{"gitId":"-"},"content":""},{"lineNumber":1572,"author":{"gitId":"-"},"content":"        var instructor \u003d responseBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":1573,"author":{"gitId":"-"},"content":"        var sectionToTest \u003d \"Section A\";"},{"lineNumber":1574,"author":{"gitId":"-"},"content":"        Map\u003cString, List\u003cFeedbackResponseAttributes\u003e\u003e questionResponseMapByGiver \u003d frLogic.getSessionResultsForCourse("},{"lineNumber":1575,"author":{"gitId":"-"},"content":"                session.getFeedbackSessionName(), session.getCourseId(), instructor.getEmail(),"},{"lineNumber":1576,"author":{"gitId":"-"},"content":"                null, sectionToTest, FeedbackResultFetchType.GIVER)"},{"lineNumber":1577,"author":{"gitId":"-"},"content":"                .getQuestionResponseMap();"},{"lineNumber":1578,"author":{"gitId":"-"},"content":"        questionResponseMapByGiver.forEach((key, responses) -\u003e {"},{"lineNumber":1579,"author":{"gitId":"-"},"content":"            responses.forEach(resp -\u003e {"},{"lineNumber":1580,"author":{"gitId":"-"},"content":"                assertEquals(sectionToTest, resp.getGiverSection());"},{"lineNumber":1581,"author":{"gitId":"-"},"content":"            });"},{"lineNumber":1582,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":1583,"author":{"gitId":"-"},"content":""},{"lineNumber":1584,"author":{"gitId":"-"},"content":"        Map\u003cString, List\u003cFeedbackResponseAttributes\u003e\u003e questionResponseMapByReceiver \u003d"},{"lineNumber":1585,"author":{"gitId":"-"},"content":"                frLogic.getSessionResultsForCourse("},{"lineNumber":1586,"author":{"gitId":"-"},"content":"                session.getFeedbackSessionName(), session.getCourseId(), instructor.getEmail(),"},{"lineNumber":1587,"author":{"gitId":"-"},"content":"                null, sectionToTest, FeedbackResultFetchType.RECEIVER)"},{"lineNumber":1588,"author":{"gitId":"-"},"content":"                .getQuestionResponseMap();"},{"lineNumber":1589,"author":{"gitId":"-"},"content":"        questionResponseMapByReceiver.forEach((key, responses) -\u003e {"},{"lineNumber":1590,"author":{"gitId":"-"},"content":"            responses.forEach(resp -\u003e {"},{"lineNumber":1591,"author":{"gitId":"-"},"content":"                assertEquals(sectionToTest, resp.getRecipientSection());"},{"lineNumber":1592,"author":{"gitId":"-"},"content":"            });"},{"lineNumber":1593,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":1594,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1595,"author":{"gitId":"-"},"content":""},{"lineNumber":1596,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":1597,"author":{"gitId":"-"},"content":"    public void testGetSessionResultsForCourse_splitResponseFetchByGiverAndReceiver_shouldGenerateCorrectBundle() {"},{"lineNumber":1598,"author":{"gitId":"-"},"content":"        var responseBundle \u003d loadDataBundle(\"/FeedbackSessionResultsTest.json\");"},{"lineNumber":1599,"author":{"gitId":"-"},"content":"        removeAndRestoreDataBundle(responseBundle);"},{"lineNumber":1600,"author":{"gitId":"-"},"content":""},{"lineNumber":1601,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes session \u003d responseBundle.feedbackSessions.get(\"standard.session\");"},{"lineNumber":1602,"author":{"gitId":"-"},"content":""},{"lineNumber":1603,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor \u003d responseBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":1604,"author":{"gitId":"-"},"content":"        Map\u003cString, List\u003cFeedbackResponseAttributes\u003e\u003e questionResponseMapFromMultiFetch \u003d"},{"lineNumber":1605,"author":{"gitId":"-"},"content":"                frLogic.getSessionResultsForCourse("},{"lineNumber":1606,"author":{"gitId":"-"},"content":"                        session.getFeedbackSessionName(), session.getCourseId(), instructor.getEmail(),"},{"lineNumber":1607,"author":{"gitId":"-"},"content":"                        null, \"Section A\", FeedbackResultFetchType.GIVER).getQuestionResponseMap();"},{"lineNumber":1608,"author":{"gitId":"-"},"content":"        frLogic.getSessionResultsForCourse("},{"lineNumber":1609,"author":{"gitId":"-"},"content":"                session.getFeedbackSessionName(), session.getCourseId(), instructor.getEmail(),"},{"lineNumber":1610,"author":{"gitId":"-"},"content":"                null, \"Section A\", FeedbackResultFetchType.RECEIVER)"},{"lineNumber":1611,"author":{"gitId":"-"},"content":"                .getQuestionResponseMap()"},{"lineNumber":1612,"author":{"gitId":"-"},"content":"                .forEach(questionResponseMapFromMultiFetch::putIfAbsent);"},{"lineNumber":1613,"author":{"gitId":"-"},"content":""},{"lineNumber":1614,"author":{"gitId":"-"},"content":"        // Equal to session result fetch by both type"},{"lineNumber":1615,"author":{"gitId":"-"},"content":"        Map\u003cString, List\u003cFeedbackResponseAttributes\u003e\u003e questionResponseMapFromFetchBoth \u003d"},{"lineNumber":1616,"author":{"gitId":"-"},"content":"                frLogic.getSessionResultsForCourse("},{"lineNumber":1617,"author":{"gitId":"-"},"content":"                        session.getFeedbackSessionName(), session.getCourseId(), instructor.getEmail(),"},{"lineNumber":1618,"author":{"gitId":"-"},"content":"                        null, \"Section A\", FeedbackResultFetchType.BOTH).getQuestionResponseMap();"},{"lineNumber":1619,"author":{"gitId":"-"},"content":""},{"lineNumber":1620,"author":{"gitId":"-"},"content":"        for (var entry : questionResponseMapFromFetchBoth.entrySet()) {"},{"lineNumber":1621,"author":{"gitId":"-"},"content":"            List\u003cFeedbackResponseAttributes\u003e respFromFetchBoth \u003d entry.getValue();"},{"lineNumber":1622,"author":{"gitId":"-"},"content":"            List\u003cFeedbackResponseAttributes\u003e respFromMultiFetch \u003d questionResponseMapFromMultiFetch.get(entry.getKey());"},{"lineNumber":1623,"author":{"gitId":"-"},"content":"            assertEquals(respFromFetchBoth.size(), respFromMultiFetch.size());"},{"lineNumber":1624,"author":{"gitId":"-"},"content":"            assertTrue(new HashSet\u003c\u003e(respFromMultiFetch).equals(new HashSet\u003c\u003e(respFromFetchBoth)));"},{"lineNumber":1625,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1626,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1627,"author":{"gitId":"-"},"content":""},{"lineNumber":1628,"author":{"gitId":"-"},"content":""},{"lineNumber":1629,"author":{"gitId":"-"},"content":"    // TODO: check for cases where a person is both a student and an instructor"},{"lineNumber":1630,"author":{"gitId":"-"},"content":""},{"lineNumber":1631,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":1632,"author":{"gitId":"-"},"content":"    public void testGetSessionResultsForUser_orphanResponseInDB_shouldStillHandleCorrectly() throws Exception {"},{"lineNumber":1633,"author":{"gitId":"-"},"content":"        dataBundle \u003d getTypicalDataBundle();"},{"lineNumber":1634,"author":{"gitId":"-"},"content":"        removeAndRestoreDataBundle(dataBundle);"},{"lineNumber":1635,"author":{"gitId":"-"},"content":""},{"lineNumber":1636,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes fq \u003d getQuestionFromDatabase(\"qn2InSession1InCourse1\");"},{"lineNumber":1637,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes existingResponse \u003d getResponseFromDatabase(dataBundle, \"response1ForQ2S1C1\");"},{"lineNumber":1638,"author":{"gitId":"-"},"content":"        // create a \"null\" response to simulate trying to get a null student\u0027s response"},{"lineNumber":1639,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes newResponse \u003d"},{"lineNumber":1640,"author":{"gitId":"-"},"content":"                FeedbackResponseAttributes.builder("},{"lineNumber":1641,"author":{"gitId":"-"},"content":"                        existingResponse.getFeedbackQuestionId(), existingResponse.getGiver(), \"nullRecipient@gmail.tmt\")"},{"lineNumber":1642,"author":{"gitId":"-"},"content":"                        .withFeedbackSessionName(existingResponse.getFeedbackSessionName())"},{"lineNumber":1643,"author":{"gitId":"-"},"content":"                        .withCourseId(\"nullCourse\")"},{"lineNumber":1644,"author":{"gitId":"-"},"content":"                        .withGiverSection(\"Section 1\")"},{"lineNumber":1645,"author":{"gitId":"-"},"content":"                        .withRecipientSection(\"Section 1\")"},{"lineNumber":1646,"author":{"gitId":"-"},"content":"                        .withResponseDetails(existingResponse.getResponseDetailsCopy())"},{"lineNumber":1647,"author":{"gitId":"-"},"content":"                        .build();"},{"lineNumber":1648,"author":{"gitId":"-"},"content":"        frLogic.createFeedbackResponse(newResponse);"},{"lineNumber":1649,"author":{"gitId":"-"},"content":"        StudentAttributes student \u003d dataBundle.students.get(\"student2InCourse1\");"},{"lineNumber":1650,"author":{"gitId":"-"},"content":""},{"lineNumber":1651,"author":{"gitId":"-"},"content":"        SessionResultsBundle bundle \u003d frLogic.getSessionResultsForUser("},{"lineNumber":1652,"author":{"gitId":"-"},"content":"                fq.getFeedbackSessionName(), fq.getCourseId(), student.getEmail(),"},{"lineNumber":1653,"author":{"gitId":"-"},"content":"                false, fq.getId());"},{"lineNumber":1654,"author":{"gitId":"-"},"content":"        assertEquals(1, bundle.getQuestionResponseMap().size());"},{"lineNumber":1655,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseAttributes\u003e responseForQuestion \u003d"},{"lineNumber":1656,"author":{"gitId":"-"},"content":"                bundle.getQuestionResponseMap().entrySet().iterator().next().getValue();"},{"lineNumber":1657,"author":{"gitId":"-"},"content":"        assertEquals(4, responseForQuestion.size());"},{"lineNumber":1658,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1659,"author":{"gitId":"-"},"content":""},{"lineNumber":1660,"author":{"gitId":"-"},"content":"    private FeedbackQuestionAttributes getQuestionFromDatabase(DataBundle dataBundle, String jsonId) {"},{"lineNumber":1661,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes questionToGet \u003d dataBundle.feedbackQuestions.get(jsonId);"},{"lineNumber":1662,"author":{"gitId":"-"},"content":"        questionToGet \u003d fqLogic.getFeedbackQuestion(questionToGet.getFeedbackSessionName(),"},{"lineNumber":1663,"author":{"gitId":"-"},"content":"                questionToGet.getCourseId(),"},{"lineNumber":1664,"author":{"gitId":"-"},"content":"                questionToGet.getQuestionNumber());"},{"lineNumber":1665,"author":{"gitId":"-"},"content":""},{"lineNumber":1666,"author":{"gitId":"-"},"content":"        return questionToGet;"},{"lineNumber":1667,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1668,"author":{"gitId":"-"},"content":""},{"lineNumber":1669,"author":{"gitId":"-"},"content":"    private FeedbackQuestionAttributes getQuestionFromDatabase(String jsonId) {"},{"lineNumber":1670,"author":{"gitId":"-"},"content":"        return getQuestionFromDatabase(dataBundle, jsonId);"},{"lineNumber":1671,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1672,"author":{"gitId":"-"},"content":""},{"lineNumber":1673,"author":{"gitId":"-"},"content":"    private FeedbackResponseAttributes getResponseFromDatabase(DataBundle dataBundle, String jsonId) {"},{"lineNumber":1674,"author":{"gitId":"-"},"content":"        FeedbackResponseAttributes response \u003d dataBundle.feedbackResponses.get(jsonId);"},{"lineNumber":1675,"author":{"gitId":"-"},"content":""},{"lineNumber":1676,"author":{"gitId":"-"},"content":"        String qnId;"},{"lineNumber":1677,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":1678,"author":{"gitId":"-"},"content":"            int qnNumber \u003d Integer.parseInt(response.getFeedbackQuestionId());"},{"lineNumber":1679,"author":{"gitId":"-"},"content":"            qnId \u003d fqLogic.getFeedbackQuestion(response.getFeedbackSessionName(), response.getCourseId(), qnNumber).getId();"},{"lineNumber":1680,"author":{"gitId":"-"},"content":"        } catch (NumberFormatException e) {"},{"lineNumber":1681,"author":{"gitId":"-"},"content":"            qnId \u003d response.getFeedbackQuestionId();"},{"lineNumber":1682,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1683,"author":{"gitId":"-"},"content":""},{"lineNumber":1684,"author":{"gitId":"-"},"content":"        return frLogic.getFeedbackResponse("},{"lineNumber":1685,"author":{"gitId":"-"},"content":"                qnId, response.getGiver(), response.getRecipient());"},{"lineNumber":1686,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1687,"author":{"gitId":"-"},"content":""},{"lineNumber":1688,"author":{"gitId":"-"},"content":"    private FeedbackResponseAttributes getResponseFromDatabase(String jsonId) {"},{"lineNumber":1689,"author":{"gitId":"-"},"content":"        return getResponseFromDatabase(dataBundle, jsonId);"},{"lineNumber":1690,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1691,"author":{"gitId":"-"},"content":""},{"lineNumber":1692,"author":{"gitId":"-"},"content":"    private String getResponseId(String jsonId, DataBundle bundle) {"},{"lineNumber":1693,"author":{"gitId":"-"},"content":"        return getResponseFromDatabase(bundle, jsonId).getId();"},{"lineNumber":1694,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1695,"author":{"gitId":"-"},"content":""},{"lineNumber":1696,"author":{"gitId":"-"},"content":"    private List\u003cFeedbackResponseCommentAttributes\u003e getFeedbackResponseCommentsForResponsesFromDatabase("},{"lineNumber":1697,"author":{"gitId":"-"},"content":"            Set\u003cString\u003e responseIds) {"},{"lineNumber":1698,"author":{"gitId":"-"},"content":"        List\u003cFeedbackResponseCommentAttributes\u003e responseComments \u003d new ArrayList\u003c\u003e();"},{"lineNumber":1699,"author":{"gitId":"-"},"content":"        for (String id : responseIds) {"},{"lineNumber":1700,"author":{"gitId":"-"},"content":"            List\u003cFeedbackResponseCommentAttributes\u003e responseCommentsForResponse \u003d"},{"lineNumber":1701,"author":{"gitId":"-"},"content":"                    frcLogic.getFeedbackResponseCommentForResponse(id);"},{"lineNumber":1702,"author":{"gitId":"-"},"content":"            responseComments.addAll(responseCommentsForResponse);"},{"lineNumber":1703,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":1704,"author":{"gitId":"-"},"content":"        return responseComments;"},{"lineNumber":1705,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":1706,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"hhdqirui":67,"-":1639}},{"path":"src/test/java/teammates/sqllogic/core/AccountsLogicTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"hhdqirui"},"content":"package teammates.sqllogic.core;"},{"lineNumber":2,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":3,"author":{"gitId":"hhdqirui"},"content":"import static org.mockito.Mockito.mock;"},{"lineNumber":4,"author":{"gitId":"hhdqirui"},"content":"import static org.mockito.Mockito.times;"},{"lineNumber":5,"author":{"gitId":"hhdqirui"},"content":"import static org.mockito.Mockito.verify;"},{"lineNumber":6,"author":{"gitId":"hhdqirui"},"content":"import static org.mockito.Mockito.when;"},{"lineNumber":7,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":8,"author":{"gitId":"hhdqirui"},"content":"import java.time.Instant;"},{"lineNumber":9,"author":{"gitId":"hhdqirui"},"content":"import java.util.ArrayList;"},{"lineNumber":10,"author":{"gitId":"hhdqirui"},"content":"import java.util.List;"},{"lineNumber":11,"author":{"gitId":"hhdqirui"},"content":"import java.util.UUID;"},{"lineNumber":12,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":13,"author":{"gitId":"hhdqirui"},"content":"import org.testng.annotations.BeforeMethod;"},{"lineNumber":14,"author":{"gitId":"hhdqirui"},"content":"import org.testng.annotations.Test;"},{"lineNumber":15,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":16,"author":{"gitId":"domlimm"},"content":"import teammates.common.datatransfer.InstructorPermissionRole;"},{"lineNumber":17,"author":{"gitId":"domlimm"},"content":"import teammates.common.datatransfer.InstructorPrivileges;"},{"lineNumber":18,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.NotificationStyle;"},{"lineNumber":19,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.NotificationTargetUser;"},{"lineNumber":20,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":21,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":22,"author":{"gitId":"domlimm"},"content":"import teammates.common.util.Const;"},{"lineNumber":23,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlapi.AccountsDb;"},{"lineNumber":24,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.Account;"},{"lineNumber":25,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Course;"},{"lineNumber":26,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":27,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.Notification;"},{"lineNumber":28,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.ReadNotification;"},{"lineNumber":29,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Student;"},{"lineNumber":30,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.User;"},{"lineNumber":31,"author":{"gitId":"hhdqirui"},"content":"import teammates.test.BaseTestCase;"},{"lineNumber":32,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":33,"author":{"gitId":"hhdqirui"},"content":"/**"},{"lineNumber":34,"author":{"gitId":"hhdqirui"},"content":" * SUT: {@link AccountsLogic}."},{"lineNumber":35,"author":{"gitId":"hhdqirui"},"content":" */"},{"lineNumber":36,"author":{"gitId":"hhdqirui"},"content":"public class AccountsLogicTest extends BaseTestCase {"},{"lineNumber":37,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":38,"author":{"gitId":"hhdqirui"},"content":"    private AccountsLogic accountsLogic \u003d AccountsLogic.inst();"},{"lineNumber":39,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":40,"author":{"gitId":"hhdqirui"},"content":"    private AccountsDb accountsDb;"},{"lineNumber":41,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":42,"author":{"gitId":"hhdqirui"},"content":"    private NotificationsLogic notificationsLogic;"},{"lineNumber":43,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":44,"author":{"gitId":"domlimm"},"content":"    private UsersLogic usersLogic;"},{"lineNumber":45,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":46,"author":{"gitId":"domlimm"},"content":"    private Course course;"},{"lineNumber":47,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":48,"author":{"gitId":"hhdqirui"},"content":"    @BeforeMethod"},{"lineNumber":49,"author":{"gitId":"hhdqirui"},"content":"    public void setUpMethod() {"},{"lineNumber":50,"author":{"gitId":"hhdqirui"},"content":"        accountsDb \u003d mock(AccountsDb.class);"},{"lineNumber":51,"author":{"gitId":"hhdqirui"},"content":"        notificationsLogic \u003d mock(NotificationsLogic.class);"},{"lineNumber":52,"author":{"gitId":"domlimm"},"content":"        usersLogic \u003d mock(UsersLogic.class);"},{"lineNumber":53,"author":{"gitId":"domlimm"},"content":"        accountsLogic.initLogicDependencies(accountsDb, notificationsLogic, usersLogic);"},{"lineNumber":54,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":55,"author":{"gitId":"domlimm"},"content":"        course \u003d new Course(\"course-id\", \"course-name\", Const.DEFAULT_TIME_ZONE, \"institute\");"},{"lineNumber":56,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":57,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":58,"author":{"gitId":"domlimm"},"content":"    @Test"},{"lineNumber":59,"author":{"gitId":"domlimm"},"content":"    public void testDeleteAccount_accountExists_success() {"},{"lineNumber":60,"author":{"gitId":"domlimm"},"content":"        Account account \u003d generateTypicalAccount();"},{"lineNumber":61,"author":{"gitId":"domlimm"},"content":"        String googleId \u003d account.getGoogleId();"},{"lineNumber":62,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":63,"author":{"gitId":"domlimm"},"content":"        when(accountsLogic.getAccountForGoogleId(googleId)).thenReturn(account);"},{"lineNumber":64,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":65,"author":{"gitId":"domlimm"},"content":"        accountsLogic.deleteAccount(googleId);"},{"lineNumber":66,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":67,"author":{"gitId":"domlimm"},"content":"        verify(accountsDb, times(1)).deleteAccount(account);"},{"lineNumber":68,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":69,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":70,"author":{"gitId":"domlimm"},"content":"    @Test"},{"lineNumber":71,"author":{"gitId":"domlimm"},"content":"    public void testDeleteAccountCascade_googleIdExists_success() {"},{"lineNumber":72,"author":{"gitId":"domlimm"},"content":"        Account account \u003d generateTypicalAccount();"},{"lineNumber":73,"author":{"gitId":"domlimm"},"content":"        String googleId \u003d account.getGoogleId();"},{"lineNumber":74,"author":{"gitId":"domlimm"},"content":"        List\u003cUser\u003e users \u003d new ArrayList\u003c\u003e();"},{"lineNumber":75,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":76,"author":{"gitId":"domlimm"},"content":"        for (int i \u003d 0; i \u003c 2; ++i) {"},{"lineNumber":77,"author":{"gitId":"domlimm"},"content":"            users.add(getTypicalInstructor());"},{"lineNumber":78,"author":{"gitId":"domlimm"},"content":"            users.add(getTypicalStudent());"},{"lineNumber":79,"author":{"gitId":"domlimm"},"content":"        }"},{"lineNumber":80,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":81,"author":{"gitId":"domlimm"},"content":"        when(usersLogic.getAllUsersByGoogleId(googleId)).thenReturn(users);"},{"lineNumber":82,"author":{"gitId":"domlimm"},"content":"        when(accountsLogic.getAccountForGoogleId(googleId)).thenReturn(account);"},{"lineNumber":83,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":84,"author":{"gitId":"domlimm"},"content":"        accountsLogic.deleteAccountCascade(googleId);"},{"lineNumber":85,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":86,"author":{"gitId":"domlimm"},"content":"        for (User user : users) {"},{"lineNumber":87,"author":{"gitId":"domlimm"},"content":"            verify(usersLogic, times(1)).deleteUser(user);"},{"lineNumber":88,"author":{"gitId":"domlimm"},"content":"        }"},{"lineNumber":89,"author":{"gitId":"domlimm"},"content":"        verify(accountsDb, times(1)).deleteAccount(account);"},{"lineNumber":90,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":91,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":92,"author":{"gitId":"hhdqirui"},"content":"    @Test"},{"lineNumber":93,"author":{"gitId":"hhdqirui"},"content":"    public void testUpdateReadNotifications_shouldReturnCorrectReadNotificationId_success()"},{"lineNumber":94,"author":{"gitId":"hhdqirui"},"content":"            throws InvalidParametersException, EntityDoesNotExistException {"},{"lineNumber":95,"author":{"gitId":"hhdqirui"},"content":"        Account account \u003d generateTypicalAccount();"},{"lineNumber":96,"author":{"gitId":"hhdqirui"},"content":"        Notification notification \u003d generateTypicalNotification();"},{"lineNumber":97,"author":{"gitId":"hhdqirui"},"content":"        String googleId \u003d account.getGoogleId();"},{"lineNumber":98,"author":{"gitId":"hhdqirui"},"content":"        UUID notificationId \u003d notification.getId();"},{"lineNumber":99,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":100,"author":{"gitId":"hhdqirui"},"content":"        when(accountsDb.getAccountByGoogleId(googleId)).thenReturn(account);"},{"lineNumber":101,"author":{"gitId":"hhdqirui"},"content":"        when(notificationsLogic.getNotification(notificationId)).thenReturn(notification);"},{"lineNumber":102,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":103,"author":{"gitId":"domlimm"},"content":"        List\u003cUUID\u003e readNotificationIds \u003d accountsLogic.updateReadNotifications(googleId, notificationId,"},{"lineNumber":104,"author":{"gitId":"domlimm"},"content":"                notification.getEndTime());"},{"lineNumber":105,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":106,"author":{"gitId":"hhdqirui"},"content":"        verify(accountsDb, times(1)).getAccountByGoogleId(googleId);"},{"lineNumber":107,"author":{"gitId":"hhdqirui"},"content":"        verify(notificationsLogic, times(1)).getNotification(notificationId);"},{"lineNumber":108,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":109,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(1, readNotificationIds.size());"},{"lineNumber":110,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(notificationId, readNotificationIds.get(0));"},{"lineNumber":111,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":112,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":113,"author":{"gitId":"hhdqirui"},"content":"    @Test"},{"lineNumber":114,"author":{"gitId":"hhdqirui"},"content":"    public void testUpdateReadNotifications_shouldAddReadNotificationToAccount_success()"},{"lineNumber":115,"author":{"gitId":"hhdqirui"},"content":"            throws InvalidParametersException, EntityDoesNotExistException {"},{"lineNumber":116,"author":{"gitId":"hhdqirui"},"content":"        Account account \u003d generateTypicalAccount();"},{"lineNumber":117,"author":{"gitId":"hhdqirui"},"content":"        Notification notification \u003d generateTypicalNotification();"},{"lineNumber":118,"author":{"gitId":"hhdqirui"},"content":"        String googleId \u003d account.getGoogleId();"},{"lineNumber":119,"author":{"gitId":"hhdqirui"},"content":"        UUID notificationId \u003d notification.getId();"},{"lineNumber":120,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":121,"author":{"gitId":"hhdqirui"},"content":"        when(accountsDb.getAccountByGoogleId(googleId)).thenReturn(account);"},{"lineNumber":122,"author":{"gitId":"hhdqirui"},"content":"        when(notificationsLogic.getNotification(notificationId)).thenReturn(notification);"},{"lineNumber":123,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":124,"author":{"gitId":"hhdqirui"},"content":"        accountsLogic.updateReadNotifications(googleId, notificationId, notification.getEndTime());"},{"lineNumber":125,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":126,"author":{"gitId":"hhdqirui"},"content":"        verify(accountsDb, times(1)).getAccountByGoogleId(googleId);"},{"lineNumber":127,"author":{"gitId":"hhdqirui"},"content":"        verify(notificationsLogic, times(1)).getNotification(notificationId);"},{"lineNumber":128,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":129,"author":{"gitId":"hhdqirui"},"content":"        List\u003cReadNotification\u003e accountReadNotifications \u003d account.getReadNotifications();"},{"lineNumber":130,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(1, accountReadNotifications.size());"},{"lineNumber":131,"author":{"gitId":"hhdqirui"},"content":"        ReadNotification readNotification \u003d accountReadNotifications.get(0);"},{"lineNumber":132,"author":{"gitId":"hhdqirui"},"content":"        assertSame(account, readNotification.getAccount());"},{"lineNumber":133,"author":{"gitId":"hhdqirui"},"content":"        assertSame(notification, readNotification.getNotification());"},{"lineNumber":134,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":135,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":136,"author":{"gitId":"hhdqirui"},"content":"    @Test"},{"lineNumber":137,"author":{"gitId":"hhdqirui"},"content":"    public void testUpdateReadNotifications_accountDoesNotExist_throwEntityDoesNotExistException() {"},{"lineNumber":138,"author":{"gitId":"hhdqirui"},"content":"        Account account \u003d generateTypicalAccount();"},{"lineNumber":139,"author":{"gitId":"hhdqirui"},"content":"        Notification notification \u003d generateTypicalNotification();"},{"lineNumber":140,"author":{"gitId":"hhdqirui"},"content":"        String googleId \u003d account.getGoogleId();"},{"lineNumber":141,"author":{"gitId":"hhdqirui"},"content":"        UUID notificationId \u003d notification.getId();"},{"lineNumber":142,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":143,"author":{"gitId":"hhdqirui"},"content":"        when(accountsDb.getAccountByGoogleId(googleId)).thenReturn(null);"},{"lineNumber":144,"author":{"gitId":"hhdqirui"},"content":"        when(notificationsLogic.getNotification(notificationId)).thenReturn(notification);"},{"lineNumber":145,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":146,"author":{"gitId":"hhdqirui"},"content":"        EntityDoesNotExistException ex \u003d assertThrows(EntityDoesNotExistException.class,"},{"lineNumber":147,"author":{"gitId":"hhdqirui"},"content":"                () -\u003e accountsLogic.updateReadNotifications(googleId, notificationId, notification.getEndTime()));"},{"lineNumber":148,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(\"Trying to update the read notifications of a non-existent account.\", ex.getMessage());"},{"lineNumber":149,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":150,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":151,"author":{"gitId":"hhdqirui"},"content":"    @Test"},{"lineNumber":152,"author":{"gitId":"hhdqirui"},"content":"    public void testUpdateReadNotifications_notificationDoesNotExist_throwEntityDoesNotExistException() {"},{"lineNumber":153,"author":{"gitId":"hhdqirui"},"content":"        Account account \u003d generateTypicalAccount();"},{"lineNumber":154,"author":{"gitId":"hhdqirui"},"content":"        Notification notification \u003d generateTypicalNotification();"},{"lineNumber":155,"author":{"gitId":"hhdqirui"},"content":"        String googleId \u003d account.getGoogleId();"},{"lineNumber":156,"author":{"gitId":"hhdqirui"},"content":"        UUID notificationId \u003d notification.getId();"},{"lineNumber":157,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":158,"author":{"gitId":"hhdqirui"},"content":"        when(accountsDb.getAccountByGoogleId(googleId)).thenReturn(account);"},{"lineNumber":159,"author":{"gitId":"hhdqirui"},"content":"        when(notificationsLogic.getNotification(notificationId)).thenReturn(null);"},{"lineNumber":160,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":161,"author":{"gitId":"hhdqirui"},"content":"        EntityDoesNotExistException ex \u003d assertThrows(EntityDoesNotExistException.class,"},{"lineNumber":162,"author":{"gitId":"hhdqirui"},"content":"                () -\u003e accountsLogic.updateReadNotifications(googleId, notificationId, notification.getEndTime()));"},{"lineNumber":163,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(\"Trying to mark as read a notification that does not exist.\", ex.getMessage());"},{"lineNumber":164,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":165,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":166,"author":{"gitId":"hhdqirui"},"content":"    @Test"},{"lineNumber":167,"author":{"gitId":"hhdqirui"},"content":"    public void testUpdateReadNotifications_markExpiredNotificationAsRead_throwInvalidParametersException() {"},{"lineNumber":168,"author":{"gitId":"hhdqirui"},"content":"        Account account \u003d generateTypicalAccount();"},{"lineNumber":169,"author":{"gitId":"hhdqirui"},"content":"        Notification notification \u003d generateTypicalNotification();"},{"lineNumber":170,"author":{"gitId":"hhdqirui"},"content":"        notification.setEndTime(Instant.parse(\"2012-01-01T00:00:00Z\"));"},{"lineNumber":171,"author":{"gitId":"hhdqirui"},"content":"        String googleId \u003d account.getGoogleId();"},{"lineNumber":172,"author":{"gitId":"hhdqirui"},"content":"        UUID notificationId \u003d notification.getId();"},{"lineNumber":173,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":174,"author":{"gitId":"hhdqirui"},"content":"        when(accountsDb.getAccountByGoogleId(googleId)).thenReturn(account);"},{"lineNumber":175,"author":{"gitId":"hhdqirui"},"content":"        when(notificationsLogic.getNotification(notificationId)).thenReturn(notification);"},{"lineNumber":176,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":177,"author":{"gitId":"hhdqirui"},"content":"        InvalidParametersException ex \u003d assertThrows(InvalidParametersException.class,"},{"lineNumber":178,"author":{"gitId":"hhdqirui"},"content":"                () -\u003e accountsLogic.updateReadNotifications(googleId, notificationId, notification.getEndTime()));"},{"lineNumber":179,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(\"Trying to mark an expired notification as read.\", ex.getMessage());"},{"lineNumber":180,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":181,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":182,"author":{"gitId":"hhdqirui"},"content":"    @Test"},{"lineNumber":183,"author":{"gitId":"hhdqirui"},"content":"    public void testGetReadNotificationsId_doesNotHaveReadNotifications_success() {"},{"lineNumber":184,"author":{"gitId":"hhdqirui"},"content":"        Account account \u003d generateTypicalAccount();"},{"lineNumber":185,"author":{"gitId":"hhdqirui"},"content":"        String googleId \u003d account.getGoogleId();"},{"lineNumber":186,"author":{"gitId":"hhdqirui"},"content":"        when(accountsDb.getAccountByGoogleId(googleId)).thenReturn(account);"},{"lineNumber":187,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":188,"author":{"gitId":"hhdqirui"},"content":"        List\u003cUUID\u003e readNotifications \u003d accountsLogic.getReadNotificationsId(googleId);"},{"lineNumber":189,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":190,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(0, readNotifications.size());"},{"lineNumber":191,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":192,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":193,"author":{"gitId":"hhdqirui"},"content":"    @Test"},{"lineNumber":194,"author":{"gitId":"hhdqirui"},"content":"    public void testGetReadNotificationsId_hasReadNotifications_success() {"},{"lineNumber":195,"author":{"gitId":"hhdqirui"},"content":"        Account account \u003d generateTypicalAccount();"},{"lineNumber":196,"author":{"gitId":"hhdqirui"},"content":"        List\u003cReadNotification\u003e readNotifications \u003d new ArrayList\u003c\u003e();"},{"lineNumber":197,"author":{"gitId":"hhdqirui"},"content":"        for (int i \u003d 0; i \u003c 10; i++) {"},{"lineNumber":198,"author":{"gitId":"hhdqirui"},"content":"            Notification notification \u003d generateTypicalNotification();"},{"lineNumber":199,"author":{"gitId":"hhdqirui"},"content":"            ReadNotification readNotification \u003d new ReadNotification(account, notification);"},{"lineNumber":200,"author":{"gitId":"hhdqirui"},"content":"            readNotifications.add(readNotification);"},{"lineNumber":201,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":202,"author":{"gitId":"hhdqirui"},"content":"        account.setReadNotifications(readNotifications);"},{"lineNumber":203,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":204,"author":{"gitId":"hhdqirui"},"content":"        String googleId \u003d account.getGoogleId();"},{"lineNumber":205,"author":{"gitId":"hhdqirui"},"content":"        when(accountsDb.getAccountByGoogleId(googleId)).thenReturn(account);"},{"lineNumber":206,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":207,"author":{"gitId":"hhdqirui"},"content":"        List\u003cUUID\u003e actualReadNotifications \u003d accountsLogic.getReadNotificationsId(googleId);"},{"lineNumber":208,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":209,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(10, actualReadNotifications.size());"},{"lineNumber":210,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":211,"author":{"gitId":"hhdqirui"},"content":"        for (int i \u003d 0; i \u003c 10; i++) {"},{"lineNumber":212,"author":{"gitId":"hhdqirui"},"content":"            assertEquals(readNotifications.get(i).getNotification().getId(),"},{"lineNumber":213,"author":{"gitId":"hhdqirui"},"content":"                    actualReadNotifications.get(i));"},{"lineNumber":214,"author":{"gitId":"hhdqirui"},"content":"        }"},{"lineNumber":215,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":216,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":217,"author":{"gitId":"hhdqirui"},"content":"    private Account generateTypicalAccount() {"},{"lineNumber":218,"author":{"gitId":"hhdqirui"},"content":"        return new Account(\"test-googleId\", \"test-name\", \"test@test.com\");"},{"lineNumber":219,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":220,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":221,"author":{"gitId":"hhdqirui"},"content":"    private Notification generateTypicalNotification() {"},{"lineNumber":222,"author":{"gitId":"hhdqirui"},"content":"        return new Notification("},{"lineNumber":223,"author":{"gitId":"hhdqirui"},"content":"                Instant.parse(\"2011-01-01T00:00:00Z\"),"},{"lineNumber":224,"author":{"gitId":"hhdqirui"},"content":"                Instant.parse(\"2099-01-01T00:00:00Z\"),"},{"lineNumber":225,"author":{"gitId":"hhdqirui"},"content":"                NotificationStyle.DANGER,"},{"lineNumber":226,"author":{"gitId":"hhdqirui"},"content":"                NotificationTargetUser.GENERAL,"},{"lineNumber":227,"author":{"gitId":"hhdqirui"},"content":"                \"A deprecation note\","},{"lineNumber":228,"author":{"gitId":"hhdqirui"},"content":"                \"\u003cp\u003eDeprecation happens in three minutes\u003c/p\u003e\");"},{"lineNumber":229,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":230,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":231,"author":{"gitId":"domlimm"},"content":"    private Instructor getTypicalInstructor() {"},{"lineNumber":232,"author":{"gitId":"domlimm"},"content":"        InstructorPrivileges instructorPrivileges \u003d new InstructorPrivileges("},{"lineNumber":233,"author":{"gitId":"domlimm"},"content":"                Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_COOWNER);"},{"lineNumber":234,"author":{"gitId":"domlimm"},"content":"        InstructorPermissionRole role \u003d InstructorPermissionRole"},{"lineNumber":235,"author":{"gitId":"domlimm"},"content":"                .getEnum(Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_COOWNER);"},{"lineNumber":236,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":237,"author":{"gitId":"domlimm"},"content":"        return new Instructor(course, \"instructor-name\", \"valid-instructor@email.tmt\","},{"lineNumber":238,"author":{"gitId":"domlimm"},"content":"                true, Const.DEFAULT_DISPLAY_NAME_FOR_INSTRUCTOR, role, instructorPrivileges);"},{"lineNumber":239,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":240,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":241,"author":{"gitId":"domlimm"},"content":"    private Student getTypicalStudent() {"},{"lineNumber":242,"author":{"gitId":"domlimm"},"content":"        return new Student(course, \"student-name\", \"valid-student@email.tmt\", \"comments\");"},{"lineNumber":243,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":244,"author":{"gitId":"hhdqirui"},"content":"}"}],"authorContributionMap":{"domlimm":65,"hhdqirui":179}},{"path":"src/test/java/teammates/sqllogic/core/CoursesLogicTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"EuniceSim142"},"content":"package teammates.sqllogic.core;"},{"lineNumber":2,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":3,"author":{"gitId":"EuniceSim142"},"content":"import static org.mockito.Mockito.mock;"},{"lineNumber":4,"author":{"gitId":"EuniceSim142"},"content":"import static org.mockito.Mockito.times;"},{"lineNumber":5,"author":{"gitId":"EuniceSim142"},"content":"import static org.mockito.Mockito.verify;"},{"lineNumber":6,"author":{"gitId":"EuniceSim142"},"content":"import static org.mockito.Mockito.when;"},{"lineNumber":7,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":8,"author":{"gitId":"EuniceSim142"},"content":"import java.time.Instant;"},{"lineNumber":9,"author":{"gitId":"EuniceSim142"},"content":"import java.util.ArrayList;"},{"lineNumber":10,"author":{"gitId":"EuniceSim142"},"content":"import java.util.List;"},{"lineNumber":11,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":12,"author":{"gitId":"EuniceSim142"},"content":"import org.testng.annotations.BeforeMethod;"},{"lineNumber":13,"author":{"gitId":"EuniceSim142"},"content":"import org.testng.annotations.Test;"},{"lineNumber":14,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":15,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":16,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlapi.CoursesDb;"},{"lineNumber":17,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.Course;"},{"lineNumber":18,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.Section;"},{"lineNumber":19,"author":{"gitId":"EuniceSim142"},"content":"import teammates.test.BaseTestCase;"},{"lineNumber":20,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":21,"author":{"gitId":"EuniceSim142"},"content":"/**"},{"lineNumber":22,"author":{"gitId":"EuniceSim142"},"content":" * SUT: {@code CoursesLogic}."},{"lineNumber":23,"author":{"gitId":"EuniceSim142"},"content":" */"},{"lineNumber":24,"author":{"gitId":"EuniceSim142"},"content":"public class CoursesLogicTest extends BaseTestCase {"},{"lineNumber":25,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":26,"author":{"gitId":"EuniceSim142"},"content":"    private CoursesLogic coursesLogic \u003d CoursesLogic.inst();"},{"lineNumber":27,"author":{"gitId":"EuniceSim142"},"content":"    // private FeedbackSessionsLogic fsLogic;"},{"lineNumber":28,"author":{"gitId":"EuniceSim142"},"content":"    private CoursesDb coursesDb;"},{"lineNumber":29,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":30,"author":{"gitId":"EuniceSim142"},"content":"    @BeforeMethod"},{"lineNumber":31,"author":{"gitId":"EuniceSim142"},"content":"    public void setUp() {"},{"lineNumber":32,"author":{"gitId":"EuniceSim142"},"content":"        coursesDb \u003d mock(CoursesDb.class);"},{"lineNumber":33,"author":{"gitId":"EuniceSim142"},"content":"        FeedbackSessionsLogic fsLogic \u003d mock(FeedbackSessionsLogic.class);"},{"lineNumber":34,"author":{"gitId":"EuniceSim142"},"content":"        coursesLogic.initLogicDependencies(coursesDb, fsLogic);"},{"lineNumber":35,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":36,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":37,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":38,"author":{"gitId":"EuniceSim142"},"content":"    public void testMoveCourseToRecycleBin_shouldReturnBinnedCourse_success()"},{"lineNumber":39,"author":{"gitId":"EuniceSim142"},"content":"            throws EntityDoesNotExistException {"},{"lineNumber":40,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d generateTypicalCourse();"},{"lineNumber":41,"author":{"gitId":"EuniceSim142"},"content":"        String courseId \u003d course.getId();"},{"lineNumber":42,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":43,"author":{"gitId":"EuniceSim142"},"content":"        when(coursesDb.getCourse(courseId)).thenReturn(course);"},{"lineNumber":44,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":45,"author":{"gitId":"EuniceSim142"},"content":"        Course binnedCourse \u003d coursesLogic.moveCourseToRecycleBin(courseId);"},{"lineNumber":46,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":47,"author":{"gitId":"EuniceSim142"},"content":"        verify(coursesDb, times(1)).getCourse(courseId);"},{"lineNumber":48,"author":{"gitId":"EuniceSim142"},"content":"        assertNotNull(binnedCourse);"},{"lineNumber":49,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":50,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":51,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":52,"author":{"gitId":"EuniceSim142"},"content":"    public void testMoveCourseToRecycleBin_courseDoesNotExist_throwEntityDoesNotExistException() {"},{"lineNumber":53,"author":{"gitId":"EuniceSim142"},"content":"        String courseId \u003d generateTypicalCourse().getId();"},{"lineNumber":54,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":55,"author":{"gitId":"EuniceSim142"},"content":"        when(coursesDb.getCourse(courseId)).thenReturn(null);"},{"lineNumber":56,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":57,"author":{"gitId":"EuniceSim142"},"content":"        EntityDoesNotExistException ex \u003d assertThrows(EntityDoesNotExistException.class,"},{"lineNumber":58,"author":{"gitId":"EuniceSim142"},"content":"                () -\u003e coursesLogic.moveCourseToRecycleBin(courseId));"},{"lineNumber":59,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":60,"author":{"gitId":"EuniceSim142"},"content":"        assertEquals(\"Trying to move a non-existent course to recycling bin.\", ex.getMessage());"},{"lineNumber":61,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":62,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":63,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":64,"author":{"gitId":"EuniceSim142"},"content":"    public void testRestoreCourseFromRecycleBin_shouldSetDeletedAtToNull_success()"},{"lineNumber":65,"author":{"gitId":"EuniceSim142"},"content":"            throws EntityDoesNotExistException {"},{"lineNumber":66,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d generateTypicalCourse();"},{"lineNumber":67,"author":{"gitId":"EuniceSim142"},"content":"        String courseId \u003d course.getId();"},{"lineNumber":68,"author":{"gitId":"EuniceSim142"},"content":"        course.setDeletedAt(Instant.parse(\"2021-01-01T00:00:00Z\"));"},{"lineNumber":69,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":70,"author":{"gitId":"EuniceSim142"},"content":"        when(coursesDb.getCourse(courseId)).thenReturn(course);"},{"lineNumber":71,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":72,"author":{"gitId":"EuniceSim142"},"content":"        coursesLogic.restoreCourseFromRecycleBin(courseId);"},{"lineNumber":73,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":74,"author":{"gitId":"EuniceSim142"},"content":"        verify(coursesDb, times(1)).getCourse(courseId);"},{"lineNumber":75,"author":{"gitId":"EuniceSim142"},"content":"        assertNull(course.getDeletedAt());"},{"lineNumber":76,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":77,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":78,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":79,"author":{"gitId":"EuniceSim142"},"content":"    public void testRestoreCourseFromRecycleBin_courseDoesNotExist_throwEntityDoesNotExistException() {"},{"lineNumber":80,"author":{"gitId":"EuniceSim142"},"content":"        String courseId \u003d generateTypicalCourse().getId();"},{"lineNumber":81,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":82,"author":{"gitId":"EuniceSim142"},"content":"        when(coursesDb.getCourse(courseId)).thenReturn(null);"},{"lineNumber":83,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":84,"author":{"gitId":"EuniceSim142"},"content":"        EntityDoesNotExistException ex \u003d assertThrows(EntityDoesNotExistException.class,"},{"lineNumber":85,"author":{"gitId":"EuniceSim142"},"content":"                () -\u003e coursesLogic.restoreCourseFromRecycleBin(courseId));"},{"lineNumber":86,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":87,"author":{"gitId":"EuniceSim142"},"content":"        assertEquals(\"Trying to restore a non-existent course from recycling bin.\", ex.getMessage());"},{"lineNumber":88,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":89,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":90,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":91,"author":{"gitId":"EuniceSim142"},"content":"    public void testGetSectionNamesForCourse_shouldReturnListOfSectionNames_success() throws EntityDoesNotExistException {"},{"lineNumber":92,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d generateTypicalCourse();"},{"lineNumber":93,"author":{"gitId":"EuniceSim142"},"content":"        String courseId \u003d course.getId();"},{"lineNumber":94,"author":{"gitId":"EuniceSim142"},"content":"        course.setSections(generateTypicalSections());"},{"lineNumber":95,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":96,"author":{"gitId":"EuniceSim142"},"content":"        when(coursesDb.getCourse(courseId)).thenReturn(course);"},{"lineNumber":97,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":98,"author":{"gitId":"EuniceSim142"},"content":"        List\u003cString\u003e sectionNames \u003d coursesLogic.getSectionNamesForCourse(courseId);"},{"lineNumber":99,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":100,"author":{"gitId":"EuniceSim142"},"content":"        verify(coursesDb, times(1)).getCourse(courseId);"},{"lineNumber":101,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":102,"author":{"gitId":"EuniceSim142"},"content":"        List\u003cString\u003e expectedSectionNames \u003d List.of(\"test-sectionName1\", \"test-sectionName2\");"},{"lineNumber":103,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":104,"author":{"gitId":"EuniceSim142"},"content":"        assertEquals(sectionNames, expectedSectionNames);"},{"lineNumber":105,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":106,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":107,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":108,"author":{"gitId":"EuniceSim142"},"content":"    public void testGetSectionNamesForCourse_courseDoesNotExist_throwEntityDoesNotExistException()"},{"lineNumber":109,"author":{"gitId":"EuniceSim142"},"content":"            throws EntityDoesNotExistException {"},{"lineNumber":110,"author":{"gitId":"EuniceSim142"},"content":"        String courseId \u003d generateTypicalCourse().getId();"},{"lineNumber":111,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":112,"author":{"gitId":"EuniceSim142"},"content":"        when(coursesDb.getCourse(courseId)).thenReturn(null);"},{"lineNumber":113,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":114,"author":{"gitId":"EuniceSim142"},"content":"        EntityDoesNotExistException ex \u003d assertThrows(EntityDoesNotExistException.class,"},{"lineNumber":115,"author":{"gitId":"EuniceSim142"},"content":"                () -\u003e coursesLogic.getSectionNamesForCourse(courseId));"},{"lineNumber":116,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":117,"author":{"gitId":"EuniceSim142"},"content":"        assertEquals(\"Trying to get section names for a non-existent course.\", ex.getMessage());"},{"lineNumber":118,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":119,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":120,"author":{"gitId":"EuniceSim142"},"content":"    private Course generateTypicalCourse() {"},{"lineNumber":121,"author":{"gitId":"EuniceSim142"},"content":"        return new Course(\"test-courseId\", \"test-courseName\", \"test-courseTimeZone\", \"test-courseInstitute\");"},{"lineNumber":122,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":123,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":124,"author":{"gitId":"EuniceSim142"},"content":"    private List\u003cSection\u003e generateTypicalSections() {"},{"lineNumber":125,"author":{"gitId":"EuniceSim142"},"content":"        List\u003cSection\u003e sections \u003d new ArrayList\u003c\u003e();"},{"lineNumber":126,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":127,"author":{"gitId":"EuniceSim142"},"content":"        sections.add(new Section(generateTypicalCourse(), \"test-sectionName1\"));"},{"lineNumber":128,"author":{"gitId":"EuniceSim142"},"content":"        sections.add(new Section(generateTypicalCourse(), \"test-sectionName2\"));"},{"lineNumber":129,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":130,"author":{"gitId":"EuniceSim142"},"content":"        return sections;"},{"lineNumber":131,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":132,"author":{"gitId":"EuniceSim142"},"content":"}"}],"authorContributionMap":{"EuniceSim142":132}},{"path":"src/test/java/teammates/sqllogic/core/FeedbackQuestionsLogicTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"hhdqirui"},"content":"package teammates.sqllogic.core;"},{"lineNumber":2,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":3,"author":{"gitId":"hhdqirui"},"content":"import static org.mockito.Mockito.mock;"},{"lineNumber":4,"author":{"gitId":"hhdqirui"},"content":"import static org.mockito.Mockito.when;"},{"lineNumber":5,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":6,"author":{"gitId":"hhdqirui"},"content":"import java.util.List;"},{"lineNumber":7,"author":{"gitId":"hhdqirui"},"content":"import java.util.UUID;"},{"lineNumber":8,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":9,"author":{"gitId":"hhdqirui"},"content":"import org.testng.annotations.BeforeClass;"},{"lineNumber":10,"author":{"gitId":"hhdqirui"},"content":"import org.testng.annotations.BeforeMethod;"},{"lineNumber":11,"author":{"gitId":"hhdqirui"},"content":"import org.testng.annotations.Test;"},{"lineNumber":12,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":13,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.SqlDataBundle;"},{"lineNumber":14,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":15,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlapi.FeedbackQuestionsDb;"},{"lineNumber":16,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.FeedbackQuestion;"},{"lineNumber":17,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.FeedbackSession;"},{"lineNumber":18,"author":{"gitId":"hhdqirui"},"content":"import teammates.test.BaseTestCase;"},{"lineNumber":19,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":20,"author":{"gitId":"hhdqirui"},"content":"/**"},{"lineNumber":21,"author":{"gitId":"hhdqirui"},"content":" * SUT: {@link FeedbackQuestionsLogic}."},{"lineNumber":22,"author":{"gitId":"hhdqirui"},"content":" */"},{"lineNumber":23,"author":{"gitId":"hhdqirui"},"content":"public class FeedbackQuestionsLogicTest extends BaseTestCase {"},{"lineNumber":24,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":25,"author":{"gitId":"hhdqirui"},"content":"    private FeedbackQuestionsLogic fqLogic \u003d FeedbackQuestionsLogic.inst();"},{"lineNumber":26,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":27,"author":{"gitId":"hhdqirui"},"content":"    private FeedbackQuestionsDb fqDb;"},{"lineNumber":28,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":29,"author":{"gitId":"hhdqirui"},"content":"    private SqlDataBundle typicalDataBundle;"},{"lineNumber":30,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":31,"author":{"gitId":"hhdqirui"},"content":"    @BeforeClass"},{"lineNumber":32,"author":{"gitId":"hhdqirui"},"content":"    public void setUpClass() {"},{"lineNumber":33,"author":{"gitId":"hhdqirui"},"content":"        typicalDataBundle \u003d getTypicalSqlDataBundle();"},{"lineNumber":34,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":35,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":36,"author":{"gitId":"hhdqirui"},"content":"    @BeforeMethod"},{"lineNumber":37,"author":{"gitId":"hhdqirui"},"content":"    public void setUpMethod() {"},{"lineNumber":38,"author":{"gitId":"hhdqirui"},"content":"        fqDb \u003d mock(FeedbackQuestionsDb.class);"},{"lineNumber":39,"author":{"gitId":"cedricongjh"},"content":"        CoursesLogic coursesLogic \u003d mock(CoursesLogic.class);"},{"lineNumber":40,"author":{"gitId":"cedricongjh"},"content":"        UsersLogic usersLogic \u003d mock(UsersLogic.class);"},{"lineNumber":41,"author":{"gitId":"cedricongjh"},"content":"        fqLogic.initLogicDependencies(fqDb, coursesLogic, usersLogic);"},{"lineNumber":42,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":43,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":44,"author":{"gitId":"hhdqirui"},"content":"    @Test(enabled \u003d false)"},{"lineNumber":45,"author":{"gitId":"hhdqirui"},"content":"    public void testGetFeedbackQuestionsForSession_questionNumbersInOrder_success() {"},{"lineNumber":46,"author":{"gitId":"hhdqirui"},"content":"        FeedbackSession fs \u003d typicalDataBundle.feedbackSessions.get(\"session1InCourse1\");"},{"lineNumber":47,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion fq1 \u003d typicalDataBundle.feedbackQuestions.get(\"qn1InSession1InCourse1\");"},{"lineNumber":48,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion fq2 \u003d typicalDataBundle.feedbackQuestions.get(\"qn2InSession1InCourse1\");"},{"lineNumber":49,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion fq3 \u003d typicalDataBundle.feedbackQuestions.get(\"qn3InSession1InCourse1\");"},{"lineNumber":50,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion fq4 \u003d typicalDataBundle.feedbackQuestions.get(\"qn4InSession1InCourse1\");"},{"lineNumber":51,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion fq5 \u003d typicalDataBundle.feedbackQuestions.get(\"qn5InSession1InCourse1\");"},{"lineNumber":52,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":53,"author":{"gitId":"hhdqirui"},"content":"        List\u003cFeedbackQuestion\u003e questions \u003d List.of(fq1, fq2, fq3, fq4, fq5);"},{"lineNumber":54,"author":{"gitId":"hhdqirui"},"content":"        fs.setId(UUID.randomUUID());"},{"lineNumber":55,"author":{"gitId":"hhdqirui"},"content":"        when(fqDb.getFeedbackQuestionsForSession(fs.getId())).thenReturn(questions);"},{"lineNumber":56,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":57,"author":{"gitId":"hhdqirui"},"content":"        List\u003cFeedbackQuestion\u003e actualQuestions \u003d fqLogic.getFeedbackQuestionsForSession(fs);"},{"lineNumber":58,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":59,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(questions.size(), actualQuestions.size());"},{"lineNumber":60,"author":{"gitId":"hhdqirui"},"content":"        assertTrue(questions.containsAll(actualQuestions));"},{"lineNumber":61,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":62,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":63,"author":{"gitId":"hhdqirui"},"content":"    @Test(enabled \u003d false)"},{"lineNumber":64,"author":{"gitId":"hhdqirui"},"content":"    public void testGetFeedbackQuestionsForSession_questionNumbersOutOfOrder_success() {"},{"lineNumber":65,"author":{"gitId":"hhdqirui"},"content":"        FeedbackSession fs \u003d typicalDataBundle.feedbackSessions.get(\"session1InCourse1\");"},{"lineNumber":66,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion fq1 \u003d typicalDataBundle.feedbackQuestions.get(\"qn1InSession1InCourse1\");"},{"lineNumber":67,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion fq2 \u003d typicalDataBundle.feedbackQuestions.get(\"qn2InSession1InCourse1\");"},{"lineNumber":68,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion fq3 \u003d typicalDataBundle.feedbackQuestions.get(\"qn3InSession1InCourse1\");"},{"lineNumber":69,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion fq4 \u003d typicalDataBundle.feedbackQuestions.get(\"qn4InSession1InCourse1\");"},{"lineNumber":70,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion fq5 \u003d typicalDataBundle.feedbackQuestions.get(\"qn5InSession1InCourse1\");"},{"lineNumber":71,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":72,"author":{"gitId":"hhdqirui"},"content":"        List\u003cFeedbackQuestion\u003e questions \u003d List.of(fq2, fq4, fq3, fq1, fq5);"},{"lineNumber":73,"author":{"gitId":"hhdqirui"},"content":"        fs.setId(UUID.randomUUID());"},{"lineNumber":74,"author":{"gitId":"hhdqirui"},"content":"        when(fqDb.getFeedbackQuestionsForSession(fs.getId())).thenReturn(questions);"},{"lineNumber":75,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":76,"author":{"gitId":"hhdqirui"},"content":"        List\u003cFeedbackQuestion\u003e actualQuestions \u003d fqLogic.getFeedbackQuestionsForSession(fs);"},{"lineNumber":77,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":78,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(questions.size(), actualQuestions.size());"},{"lineNumber":79,"author":{"gitId":"hhdqirui"},"content":"        assertTrue(questions.containsAll(actualQuestions));"},{"lineNumber":80,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":81,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":82,"author":{"gitId":"hhdqirui"},"content":"    @Test(enabled \u003d false)"},{"lineNumber":83,"author":{"gitId":"hhdqirui"},"content":"    public void testCreateFeedbackQuestion_questionNumbersAreConsistent_canCreateFeedbackQuestion()"},{"lineNumber":84,"author":{"gitId":"hhdqirui"},"content":"            throws InvalidParametersException {"},{"lineNumber":85,"author":{"gitId":"hhdqirui"},"content":"        FeedbackSession fs \u003d typicalDataBundle.feedbackSessions.get(\"session1InCourse1\");"},{"lineNumber":86,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion fq1 \u003d typicalDataBundle.feedbackQuestions.get(\"qn1InSession1InCourse1\");"},{"lineNumber":87,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion fq2 \u003d typicalDataBundle.feedbackQuestions.get(\"qn2InSession1InCourse1\");"},{"lineNumber":88,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion fq3 \u003d typicalDataBundle.feedbackQuestions.get(\"qn3InSession1InCourse1\");"},{"lineNumber":89,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion fq4 \u003d typicalDataBundle.feedbackQuestions.get(\"qn4InSession1InCourse1\");"},{"lineNumber":90,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion fq5 \u003d typicalDataBundle.feedbackQuestions.get(\"qn5InSession1InCourse1\");"},{"lineNumber":91,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":92,"author":{"gitId":"hhdqirui"},"content":"        List\u003cFeedbackQuestion\u003e questionsBefore \u003d List.of(fq1, fq2, fq3, fq4);"},{"lineNumber":93,"author":{"gitId":"hhdqirui"},"content":"        fs.setId(UUID.randomUUID());"},{"lineNumber":94,"author":{"gitId":"hhdqirui"},"content":"        when(fqDb.getFeedbackQuestionsForSession(fs.getId())).thenReturn(questionsBefore);"},{"lineNumber":95,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":96,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion createdQuestion \u003d fqLogic.createFeedbackQuestion(fq5);"},{"lineNumber":97,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":98,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(fq5, createdQuestion);"},{"lineNumber":99,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":100,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":101,"author":{"gitId":"hhdqirui"},"content":"    @Test(enabled \u003d false)"},{"lineNumber":102,"author":{"gitId":"hhdqirui"},"content":"    public void testCreateFeedbackQuestion_questionNumbersAreInconsistent_canCreateFeedbackQuestion()"},{"lineNumber":103,"author":{"gitId":"hhdqirui"},"content":"            throws InvalidParametersException {"},{"lineNumber":104,"author":{"gitId":"hhdqirui"},"content":"        FeedbackSession fs \u003d typicalDataBundle.feedbackSessions.get(\"session1InCourse1\");"},{"lineNumber":105,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion fq1 \u003d typicalDataBundle.feedbackQuestions.get(\"qn1InSession1InCourse1\");"},{"lineNumber":106,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion fq2 \u003d typicalDataBundle.feedbackQuestions.get(\"qn2InSession1InCourse1\");"},{"lineNumber":107,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion fq3 \u003d typicalDataBundle.feedbackQuestions.get(\"qn3InSession1InCourse1\");"},{"lineNumber":108,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion fq4 \u003d typicalDataBundle.feedbackQuestions.get(\"qn4InSession1InCourse1\");"},{"lineNumber":109,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion fq5 \u003d typicalDataBundle.feedbackQuestions.get(\"qn5InSession1InCourse1\");"},{"lineNumber":110,"author":{"gitId":"hhdqirui"},"content":"        fq1.setQuestionNumber(2);"},{"lineNumber":111,"author":{"gitId":"hhdqirui"},"content":"        fq2.setQuestionNumber(3);"},{"lineNumber":112,"author":{"gitId":"hhdqirui"},"content":"        fq3.setQuestionNumber(4);"},{"lineNumber":113,"author":{"gitId":"hhdqirui"},"content":"        fq4.setQuestionNumber(5);"},{"lineNumber":114,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":115,"author":{"gitId":"hhdqirui"},"content":"        List\u003cFeedbackQuestion\u003e questionsBefore \u003d List.of(fq1, fq2, fq3, fq4);"},{"lineNumber":116,"author":{"gitId":"hhdqirui"},"content":"        fs.setId(UUID.randomUUID());"},{"lineNumber":117,"author":{"gitId":"hhdqirui"},"content":"        when(fqDb.getFeedbackQuestionsForSession(fs.getId())).thenReturn(questionsBefore);"},{"lineNumber":118,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":119,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion createdQuestion \u003d fqLogic.createFeedbackQuestion(fq5);"},{"lineNumber":120,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":121,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(fq5, createdQuestion);"},{"lineNumber":122,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":123,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":124,"author":{"gitId":"hhdqirui"},"content":"    @Test(enabled \u003d false)"},{"lineNumber":125,"author":{"gitId":"hhdqirui"},"content":"    public void testCreateFeedbackQuestion_oldQuestionNumberLargerThanNewQuestionNumber_adjustQuestionNumberCorrectly()"},{"lineNumber":126,"author":{"gitId":"hhdqirui"},"content":"            throws InvalidParametersException {"},{"lineNumber":127,"author":{"gitId":"hhdqirui"},"content":"        FeedbackSession fs \u003d typicalDataBundle.feedbackSessions.get(\"session1InCourse1\");"},{"lineNumber":128,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion fq1 \u003d typicalDataBundle.feedbackQuestions.get(\"qn1InSession1InCourse1\");"},{"lineNumber":129,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion fq2 \u003d typicalDataBundle.feedbackQuestions.get(\"qn2InSession1InCourse1\");"},{"lineNumber":130,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion fq3 \u003d typicalDataBundle.feedbackQuestions.get(\"qn3InSession1InCourse1\");"},{"lineNumber":131,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion fq4 \u003d typicalDataBundle.feedbackQuestions.get(\"qn4InSession1InCourse1\");"},{"lineNumber":132,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion fq5 \u003d typicalDataBundle.feedbackQuestions.get(\"qn5InSession1InCourse1\");"},{"lineNumber":133,"author":{"gitId":"hhdqirui"},"content":"        fq1.setQuestionNumber(2);"},{"lineNumber":134,"author":{"gitId":"hhdqirui"},"content":"        fq2.setQuestionNumber(3);"},{"lineNumber":135,"author":{"gitId":"hhdqirui"},"content":"        fq3.setQuestionNumber(4);"},{"lineNumber":136,"author":{"gitId":"hhdqirui"},"content":"        fq4.setQuestionNumber(5);"},{"lineNumber":137,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":138,"author":{"gitId":"hhdqirui"},"content":"        List\u003cFeedbackQuestion\u003e questionsBefore \u003d List.of(fq1, fq2, fq3, fq4);"},{"lineNumber":139,"author":{"gitId":"hhdqirui"},"content":"        fs.setId(UUID.randomUUID());"},{"lineNumber":140,"author":{"gitId":"hhdqirui"},"content":"        when(fqDb.getFeedbackQuestionsForSession(fs.getId())).thenReturn(questionsBefore);"},{"lineNumber":141,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":142,"author":{"gitId":"hhdqirui"},"content":"        fqLogic.createFeedbackQuestion(fq5);"},{"lineNumber":143,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":144,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(1, fq1.getQuestionNumber().intValue());"},{"lineNumber":145,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(2, fq2.getQuestionNumber().intValue());"},{"lineNumber":146,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(3, fq3.getQuestionNumber().intValue());"},{"lineNumber":147,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(4, fq4.getQuestionNumber().intValue());"},{"lineNumber":148,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":149,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":150,"author":{"gitId":"hhdqirui"},"content":"    @Test(enabled \u003d false)"},{"lineNumber":151,"author":{"gitId":"hhdqirui"},"content":"    public void testCreateFeedbackQuestion_oldQuestionNumberSmallerThanNewQuestionNumber_adjustQuestionNumberCorrectly()"},{"lineNumber":152,"author":{"gitId":"hhdqirui"},"content":"            throws InvalidParametersException {"},{"lineNumber":153,"author":{"gitId":"hhdqirui"},"content":"        FeedbackSession fs \u003d typicalDataBundle.feedbackSessions.get(\"session1InCourse1\");"},{"lineNumber":154,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion fq1 \u003d typicalDataBundle.feedbackQuestions.get(\"qn1InSession1InCourse1\");"},{"lineNumber":155,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion fq2 \u003d typicalDataBundle.feedbackQuestions.get(\"qn2InSession1InCourse1\");"},{"lineNumber":156,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion fq3 \u003d typicalDataBundle.feedbackQuestions.get(\"qn3InSession1InCourse1\");"},{"lineNumber":157,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion fq4 \u003d typicalDataBundle.feedbackQuestions.get(\"qn4InSession1InCourse1\");"},{"lineNumber":158,"author":{"gitId":"hhdqirui"},"content":"        FeedbackQuestion fq5 \u003d typicalDataBundle.feedbackQuestions.get(\"qn5InSession1InCourse1\");"},{"lineNumber":159,"author":{"gitId":"hhdqirui"},"content":"        fq1.setQuestionNumber(0);"},{"lineNumber":160,"author":{"gitId":"hhdqirui"},"content":"        fq2.setQuestionNumber(1);"},{"lineNumber":161,"author":{"gitId":"hhdqirui"},"content":"        fq3.setQuestionNumber(2);"},{"lineNumber":162,"author":{"gitId":"hhdqirui"},"content":"        fq4.setQuestionNumber(3);"},{"lineNumber":163,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":164,"author":{"gitId":"hhdqirui"},"content":"        List\u003cFeedbackQuestion\u003e questionsBefore \u003d List.of(fq1, fq2, fq3, fq4);"},{"lineNumber":165,"author":{"gitId":"hhdqirui"},"content":"        fs.setId(UUID.randomUUID());"},{"lineNumber":166,"author":{"gitId":"hhdqirui"},"content":"        when(fqDb.getFeedbackQuestionsForSession(fs.getId())).thenReturn(questionsBefore);"},{"lineNumber":167,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":168,"author":{"gitId":"hhdqirui"},"content":"        fqLogic.createFeedbackQuestion(fq5);"},{"lineNumber":169,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":170,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(1, fq1.getQuestionNumber().intValue());"},{"lineNumber":171,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(2, fq2.getQuestionNumber().intValue());"},{"lineNumber":172,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(3, fq3.getQuestionNumber().intValue());"},{"lineNumber":173,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(4, fq4.getQuestionNumber().intValue());"},{"lineNumber":174,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":175,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":176,"author":{"gitId":"cedricongjh"},"content":"    @Test(enabled \u003d false)"},{"lineNumber":177,"author":{"gitId":"cedricongjh"},"content":"    public void testGetFeedbackQuestionsForStudents() {"},{"lineNumber":178,"author":{"gitId":"cedricongjh"},"content":"        FeedbackSession fs \u003d typicalDataBundle.feedbackSessions.get(\"session1InCourse1\");"},{"lineNumber":179,"author":{"gitId":"cedricongjh"},"content":"        FeedbackQuestion fq1 \u003d typicalDataBundle.feedbackQuestions.get(\"qn1InSession1InCourse1\");"},{"lineNumber":180,"author":{"gitId":"cedricongjh"},"content":"        FeedbackQuestion fq2 \u003d typicalDataBundle.feedbackQuestions.get(\"qn2InSession1InCourse1\");"},{"lineNumber":181,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":182,"author":{"gitId":"cedricongjh"},"content":"        List\u003cFeedbackQuestion\u003e expectedQuestions \u003d List.of(fq1, fq2);"},{"lineNumber":183,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":184,"author":{"gitId":"cedricongjh"},"content":"        List\u003cFeedbackQuestion\u003e actualQuestions \u003d fqLogic.getFeedbackQuestionsForStudents(fs);"},{"lineNumber":185,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":186,"author":{"gitId":"cedricongjh"},"content":"        assertEquals(expectedQuestions.size(), actualQuestions.size());"},{"lineNumber":187,"author":{"gitId":"cedricongjh"},"content":"        assertTrue(actualQuestions.containsAll(actualQuestions));"},{"lineNumber":188,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":189,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":190,"author":{"gitId":"cedricongjh"},"content":"    @Test(enabled \u003d false)"},{"lineNumber":191,"author":{"gitId":"cedricongjh"},"content":"    public void testGetFeedbackQuestionsForInstructors() {"},{"lineNumber":192,"author":{"gitId":"cedricongjh"},"content":"        FeedbackSession fs \u003d typicalDataBundle.feedbackSessions.get(\"session1InCourse1\");"},{"lineNumber":193,"author":{"gitId":"cedricongjh"},"content":"        FeedbackQuestion fq3 \u003d typicalDataBundle.feedbackQuestions.get(\"qn3InSession1InCourse1\");"},{"lineNumber":194,"author":{"gitId":"cedricongjh"},"content":"        FeedbackQuestion fq4 \u003d typicalDataBundle.feedbackQuestions.get(\"qn4InSession1InCourse1\");"},{"lineNumber":195,"author":{"gitId":"cedricongjh"},"content":"        FeedbackQuestion fq5 \u003d typicalDataBundle.feedbackQuestions.get(\"qn5InSession1InCourse1\");"},{"lineNumber":196,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":197,"author":{"gitId":"cedricongjh"},"content":"        List\u003cFeedbackQuestion\u003e expectedQuestions \u003d List.of(fq3, fq4, fq5);"},{"lineNumber":198,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":199,"author":{"gitId":"cedricongjh"},"content":"        List\u003cFeedbackQuestion\u003e actualQuestions \u003d fqLogic.getFeedbackQuestionsForInstructors(fs, \"instr1@teammates.tmt\");"},{"lineNumber":200,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":201,"author":{"gitId":"cedricongjh"},"content":"        assertEquals(expectedQuestions.size(), actualQuestions.size());"},{"lineNumber":202,"author":{"gitId":"cedricongjh"},"content":"        assertTrue(actualQuestions.containsAll(actualQuestions));"},{"lineNumber":203,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":204,"author":{"gitId":"hhdqirui"},"content":"}"}],"authorContributionMap":{"cedricongjh":31,"hhdqirui":173}},{"path":"src/test/java/teammates/sqllogic/core/NotificationsLogicTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"hhdqirui"},"content":"package teammates.sqllogic.core;"},{"lineNumber":2,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":3,"author":{"gitId":"hhdqirui"},"content":"import static org.mockito.Mockito.mock;"},{"lineNumber":4,"author":{"gitId":"hhdqirui"},"content":"import static org.mockito.Mockito.times;"},{"lineNumber":5,"author":{"gitId":"hhdqirui"},"content":"import static org.mockito.Mockito.verify;"},{"lineNumber":6,"author":{"gitId":"hhdqirui"},"content":"import static org.mockito.Mockito.when;"},{"lineNumber":7,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":8,"author":{"gitId":"hhdqirui"},"content":"import java.time.Instant;"},{"lineNumber":9,"author":{"gitId":"hhdqirui"},"content":"import java.util.UUID;"},{"lineNumber":10,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":11,"author":{"gitId":"hhdqirui"},"content":"import org.testng.annotations.BeforeMethod;"},{"lineNumber":12,"author":{"gitId":"hhdqirui"},"content":"import org.testng.annotations.Test;"},{"lineNumber":13,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":14,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.NotificationStyle;"},{"lineNumber":15,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.NotificationTargetUser;"},{"lineNumber":16,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":17,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":18,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlapi.NotificationsDb;"},{"lineNumber":19,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.Notification;"},{"lineNumber":20,"author":{"gitId":"hhdqirui"},"content":"import teammates.test.BaseTestCase;"},{"lineNumber":21,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":22,"author":{"gitId":"hhdqirui"},"content":"/**"},{"lineNumber":23,"author":{"gitId":"hhdqirui"},"content":" * SUT: {@link NotificationsLogic}."},{"lineNumber":24,"author":{"gitId":"hhdqirui"},"content":" */"},{"lineNumber":25,"author":{"gitId":"hhdqirui"},"content":"public class NotificationsLogicTest extends BaseTestCase {"},{"lineNumber":26,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":27,"author":{"gitId":"hhdqirui"},"content":"    private NotificationsLogic notificationsLogic \u003d NotificationsLogic.inst();"},{"lineNumber":28,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":29,"author":{"gitId":"hhdqirui"},"content":"    private NotificationsDb notificationsDb;"},{"lineNumber":30,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":31,"author":{"gitId":"hhdqirui"},"content":"    @BeforeMethod"},{"lineNumber":32,"author":{"gitId":"hhdqirui"},"content":"    public void setUpMethod() {"},{"lineNumber":33,"author":{"gitId":"hhdqirui"},"content":"        notificationsDb \u003d mock(NotificationsDb.class);"},{"lineNumber":34,"author":{"gitId":"hhdqirui"},"content":"        notificationsLogic.initLogicDependencies(notificationsDb);"},{"lineNumber":35,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":36,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":37,"author":{"gitId":"hhdqirui"},"content":"    @Test"},{"lineNumber":38,"author":{"gitId":"hhdqirui"},"content":"    public void testUpdateNotification_entityAlreadyExists_success()"},{"lineNumber":39,"author":{"gitId":"hhdqirui"},"content":"            throws InvalidParametersException, EntityDoesNotExistException {"},{"lineNumber":40,"author":{"gitId":"hhdqirui"},"content":"        Notification notification \u003d getTypicalNotificationWithId();"},{"lineNumber":41,"author":{"gitId":"-"},"content":"        UUID notificationId \u003d notification.getId();"},{"lineNumber":42,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":43,"author":{"gitId":"hhdqirui"},"content":"        when(notificationsDb.getNotification(notificationId)).thenReturn(notification);"},{"lineNumber":44,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":45,"author":{"gitId":"hhdqirui"},"content":"        Instant newStartTime \u003d Instant.parse(\"2012-01-01T00:00:00Z\");"},{"lineNumber":46,"author":{"gitId":"hhdqirui"},"content":"        Instant newEndTime \u003d Instant.parse(\"2098-01-01T00:00:00Z\");"},{"lineNumber":47,"author":{"gitId":"hhdqirui"},"content":"        NotificationStyle newStyle \u003d NotificationStyle.DARK;"},{"lineNumber":48,"author":{"gitId":"hhdqirui"},"content":"        NotificationTargetUser newTargetUser \u003d NotificationTargetUser.INSTRUCTOR;"},{"lineNumber":49,"author":{"gitId":"hhdqirui"},"content":"        String newTitle \u003d \"An updated deprecation note\";"},{"lineNumber":50,"author":{"gitId":"hhdqirui"},"content":"        String newMessage \u003d \"\u003cp\u003eDeprecation happens in three seconds\u003c/p\u003e\";"},{"lineNumber":51,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":52,"author":{"gitId":"hhdqirui"},"content":"        Notification updatedNotification \u003d notificationsLogic.updateNotification(notificationId, newStartTime,"},{"lineNumber":53,"author":{"gitId":"hhdqirui"},"content":"                newEndTime, newStyle, newTargetUser, newTitle, newMessage);"},{"lineNumber":54,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":55,"author":{"gitId":"hhdqirui"},"content":"        verify(notificationsDb, times(1)).getNotification(notificationId);"},{"lineNumber":56,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":57,"author":{"gitId":"-"},"content":"        assertEquals(notificationId, updatedNotification.getId());"},{"lineNumber":58,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(newStartTime, updatedNotification.getStartTime());"},{"lineNumber":59,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(newEndTime, updatedNotification.getEndTime());"},{"lineNumber":60,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(newStyle, updatedNotification.getStyle());"},{"lineNumber":61,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(newTargetUser, updatedNotification.getTargetUser());"},{"lineNumber":62,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(newTitle, updatedNotification.getTitle());"},{"lineNumber":63,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(newMessage, updatedNotification.getMessage());"},{"lineNumber":64,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":65,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":66,"author":{"gitId":"hhdqirui"},"content":"    @Test"},{"lineNumber":67,"author":{"gitId":"hhdqirui"},"content":"    public void testUpdateNotification_invalidNonNullParameter_endTimeBeforeStartTime() {"},{"lineNumber":68,"author":{"gitId":"hhdqirui"},"content":"        Notification notification \u003d getTypicalNotificationWithId();"},{"lineNumber":69,"author":{"gitId":"-"},"content":"        UUID notificationId \u003d notification.getId();"},{"lineNumber":70,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":71,"author":{"gitId":"hhdqirui"},"content":"        when(notificationsDb.getNotification(notificationId)).thenReturn(notification);"},{"lineNumber":72,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":73,"author":{"gitId":"hhdqirui"},"content":"        InvalidParametersException ex \u003d assertThrows(InvalidParametersException.class,"},{"lineNumber":74,"author":{"gitId":"hhdqirui"},"content":"                () -\u003e notificationsLogic.updateNotification(notificationId, Instant.parse(\"2011-01-01T00:00:01Z\"),"},{"lineNumber":75,"author":{"gitId":"hhdqirui"},"content":"                Instant.parse(\"2011-01-01T00:00:00Z\"), NotificationStyle.DANGER, NotificationTargetUser.GENERAL,"},{"lineNumber":76,"author":{"gitId":"hhdqirui"},"content":"                \"A deprecation note\", \"\u003cp\u003eDeprecation happens in three minutes\u003c/p\u003e\"));"},{"lineNumber":77,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":78,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(\"The time when the notification will expire for this notification cannot be earlier than \""},{"lineNumber":79,"author":{"gitId":"hhdqirui"},"content":"                + \"the time when the notification will be visible.\", ex.getMessage());"},{"lineNumber":80,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":81,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":82,"author":{"gitId":"hhdqirui"},"content":"    @Test"},{"lineNumber":83,"author":{"gitId":"hhdqirui"},"content":"    public void testUpdateNotification_invalidNonNullParameter_emptyTitle() {"},{"lineNumber":84,"author":{"gitId":"hhdqirui"},"content":"        Notification notification \u003d getTypicalNotificationWithId();"},{"lineNumber":85,"author":{"gitId":"-"},"content":"        UUID notificationId \u003d notification.getId();"},{"lineNumber":86,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":87,"author":{"gitId":"hhdqirui"},"content":"        when(notificationsDb.getNotification(notificationId)).thenReturn(notification);"},{"lineNumber":88,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":89,"author":{"gitId":"hhdqirui"},"content":"        InvalidParametersException ex \u003d assertThrows(InvalidParametersException.class,"},{"lineNumber":90,"author":{"gitId":"hhdqirui"},"content":"                () -\u003e notificationsLogic.updateNotification(notificationId, Instant.parse(\"2011-01-01T00:00:00Z\"),"},{"lineNumber":91,"author":{"gitId":"hhdqirui"},"content":"                Instant.parse(\"2099-01-01T00:00:00Z\"), NotificationStyle.DANGER, NotificationTargetUser.GENERAL,"},{"lineNumber":92,"author":{"gitId":"hhdqirui"},"content":"                \"\", \"\u003cp\u003eDeprecation happens in three minutes\u003c/p\u003e\"));"},{"lineNumber":93,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":94,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(\"The field \u0027notification title\u0027 is empty.\", ex.getMessage());"},{"lineNumber":95,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":96,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":97,"author":{"gitId":"hhdqirui"},"content":"    @Test"},{"lineNumber":98,"author":{"gitId":"hhdqirui"},"content":"    public void testUpdateNotification_invalidNonNullParameter_emptyMessage() {"},{"lineNumber":99,"author":{"gitId":"hhdqirui"},"content":"        Notification notification \u003d getTypicalNotificationWithId();"},{"lineNumber":100,"author":{"gitId":"-"},"content":"        UUID notificationId \u003d notification.getId();"},{"lineNumber":101,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":102,"author":{"gitId":"hhdqirui"},"content":"        when(notificationsDb.getNotification(notificationId)).thenReturn(notification);"},{"lineNumber":103,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":104,"author":{"gitId":"hhdqirui"},"content":"        InvalidParametersException ex \u003d assertThrows(InvalidParametersException.class,"},{"lineNumber":105,"author":{"gitId":"hhdqirui"},"content":"                () -\u003e notificationsLogic.updateNotification(notificationId, Instant.parse(\"2011-01-01T00:00:00Z\"),"},{"lineNumber":106,"author":{"gitId":"hhdqirui"},"content":"                Instant.parse(\"2099-01-01T00:00:00Z\"), NotificationStyle.DANGER, NotificationTargetUser.GENERAL,"},{"lineNumber":107,"author":{"gitId":"hhdqirui"},"content":"                \"An updated deprecation note\", \"\"));"},{"lineNumber":108,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":109,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(\"The field \u0027notification message\u0027 is empty.\", ex.getMessage());"},{"lineNumber":110,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":111,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":112,"author":{"gitId":"hhdqirui"},"content":"    @Test"},{"lineNumber":113,"author":{"gitId":"hhdqirui"},"content":"    public void testUpdateNotification_entityDoesNotExist() {"},{"lineNumber":114,"author":{"gitId":"hhdqirui"},"content":"        Notification notification \u003d getTypicalNotificationWithId();"},{"lineNumber":115,"author":{"gitId":"-"},"content":"        UUID notificationId \u003d notification.getId();"},{"lineNumber":116,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":117,"author":{"gitId":"hhdqirui"},"content":"        when(notificationsDb.getNotification(notificationId)).thenReturn(notification);"},{"lineNumber":118,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":119,"author":{"gitId":"hhdqirui"},"content":"        UUID nonExistentId \u003d UUID.fromString(\"00000000-0000-1000-0000-000000000000\");"},{"lineNumber":120,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":121,"author":{"gitId":"hhdqirui"},"content":"        EntityDoesNotExistException ex \u003d assertThrows(EntityDoesNotExistException.class,"},{"lineNumber":122,"author":{"gitId":"hhdqirui"},"content":"                () -\u003e notificationsLogic.updateNotification(nonExistentId, Instant.parse(\"2012-01-01T00:00:00Z\"),"},{"lineNumber":123,"author":{"gitId":"hhdqirui"},"content":"                        Instant.parse(\"2098-01-01T00:00:00Z\"), NotificationStyle.DARK,"},{"lineNumber":124,"author":{"gitId":"hhdqirui"},"content":"                        NotificationTargetUser.INSTRUCTOR, \"An updated deprecation note\","},{"lineNumber":125,"author":{"gitId":"hhdqirui"},"content":"                        \"\u003cp\u003eDeprecation happens in three seconds\u003c/p\u003e\"));"},{"lineNumber":126,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":127,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(\"Trying to update non-existent Entity: \" + Notification.class, ex.getMessage());"},{"lineNumber":128,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":129,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":130,"author":{"gitId":"hhdqirui"},"content":"    private Notification getTypicalNotificationWithId() {"},{"lineNumber":131,"author":{"gitId":"hhdqirui"},"content":"        Notification notification \u003d new Notification("},{"lineNumber":132,"author":{"gitId":"hhdqirui"},"content":"                Instant.parse(\"2011-01-01T00:00:00Z\"),"},{"lineNumber":133,"author":{"gitId":"hhdqirui"},"content":"                Instant.parse(\"2099-01-01T00:00:00Z\"),"},{"lineNumber":134,"author":{"gitId":"hhdqirui"},"content":"                NotificationStyle.DANGER,"},{"lineNumber":135,"author":{"gitId":"hhdqirui"},"content":"                NotificationTargetUser.GENERAL,"},{"lineNumber":136,"author":{"gitId":"hhdqirui"},"content":"                \"A deprecation note\","},{"lineNumber":137,"author":{"gitId":"hhdqirui"},"content":"                \"\u003cp\u003eDeprecation happens in three minutes\u003c/p\u003e\");"},{"lineNumber":138,"author":{"gitId":"-"},"content":"        notification.setId(UUID.fromString(\"00000001-0000-1000-0000-000000000000\"));"},{"lineNumber":139,"author":{"gitId":"hhdqirui"},"content":"        return notification;"},{"lineNumber":140,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":141,"author":{"gitId":"hhdqirui"},"content":"}"}],"authorContributionMap":{"hhdqirui":134,"-":7}},{"path":"src/test/java/teammates/sqllogic/core/UsersLogicTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"domlimm"},"content":"package teammates.sqllogic.core;"},{"lineNumber":2,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":3,"author":{"gitId":"domlimm"},"content":"import static org.mockito.Mockito.mock;"},{"lineNumber":4,"author":{"gitId":"domlimm"},"content":"import static org.mockito.Mockito.times;"},{"lineNumber":5,"author":{"gitId":"domlimm"},"content":"import static org.mockito.Mockito.verify;"},{"lineNumber":6,"author":{"gitId":"domlimm"},"content":"import static org.mockito.Mockito.when;"},{"lineNumber":7,"author":{"gitId":"domlimm"},"content":"import static teammates.common.util.Const.ERROR_UPDATE_NON_EXISTENT;"},{"lineNumber":8,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":9,"author":{"gitId":"domlimm"},"content":"import java.util.Collections;"},{"lineNumber":10,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":11,"author":{"gitId":"domlimm"},"content":"import org.testng.annotations.BeforeMethod;"},{"lineNumber":12,"author":{"gitId":"domlimm"},"content":"import org.testng.annotations.Test;"},{"lineNumber":13,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":14,"author":{"gitId":"domlimm"},"content":"import teammates.common.datatransfer.InstructorPermissionRole;"},{"lineNumber":15,"author":{"gitId":"domlimm"},"content":"import teammates.common.datatransfer.InstructorPrivileges;"},{"lineNumber":16,"author":{"gitId":"domlimm"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":17,"author":{"gitId":"domlimm"},"content":"import teammates.common.util.Const;"},{"lineNumber":18,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlapi.UsersDb;"},{"lineNumber":19,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Account;"},{"lineNumber":20,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Course;"},{"lineNumber":21,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":22,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Student;"},{"lineNumber":23,"author":{"gitId":"domlimm"},"content":"import teammates.test.BaseTestCase;"},{"lineNumber":24,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":25,"author":{"gitId":"domlimm"},"content":"/**"},{"lineNumber":26,"author":{"gitId":"domlimm"},"content":" * SUT: {@link UsersLogic}."},{"lineNumber":27,"author":{"gitId":"domlimm"},"content":" */"},{"lineNumber":28,"author":{"gitId":"domlimm"},"content":"public class UsersLogicTest extends BaseTestCase {"},{"lineNumber":29,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":30,"author":{"gitId":"domlimm"},"content":"    private UsersLogic usersLogic \u003d UsersLogic.inst();"},{"lineNumber":31,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":32,"author":{"gitId":"domlimm"},"content":"    private AccountsLogic accountsLogic;"},{"lineNumber":33,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":34,"author":{"gitId":"domlimm"},"content":"    private UsersDb usersDb;"},{"lineNumber":35,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":36,"author":{"gitId":"domlimm"},"content":"    private Instructor instructor;"},{"lineNumber":37,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":38,"author":{"gitId":"domlimm"},"content":"    private Student student;"},{"lineNumber":39,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":40,"author":{"gitId":"domlimm"},"content":"    private Account account;"},{"lineNumber":41,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":42,"author":{"gitId":"domlimm"},"content":"    private Course course;"},{"lineNumber":43,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":44,"author":{"gitId":"domlimm"},"content":"    @BeforeMethod"},{"lineNumber":45,"author":{"gitId":"domlimm"},"content":"    public void setUpMethod() {"},{"lineNumber":46,"author":{"gitId":"domlimm"},"content":"        usersDb \u003d mock(UsersDb.class);"},{"lineNumber":47,"author":{"gitId":"domlimm"},"content":"        accountsLogic \u003d mock(AccountsLogic.class);"},{"lineNumber":48,"author":{"gitId":"domlimm"},"content":"        usersLogic.initLogicDependencies(usersDb, accountsLogic);"},{"lineNumber":49,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":50,"author":{"gitId":"domlimm"},"content":"        course \u003d new Course(\"course-id\", \"course-name\", Const.DEFAULT_TIME_ZONE, \"institute\");"},{"lineNumber":51,"author":{"gitId":"domlimm"},"content":"        instructor \u003d getTypicalInstructor();"},{"lineNumber":52,"author":{"gitId":"domlimm"},"content":"        student \u003d getTypicalStudent();"},{"lineNumber":53,"author":{"gitId":"domlimm"},"content":"        account \u003d generateTypicalAccount();"},{"lineNumber":54,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":55,"author":{"gitId":"domlimm"},"content":"        instructor.setAccount(account);"},{"lineNumber":56,"author":{"gitId":"domlimm"},"content":"        student.setAccount(account);"},{"lineNumber":57,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":58,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":59,"author":{"gitId":"domlimm"},"content":"    @Test"},{"lineNumber":60,"author":{"gitId":"domlimm"},"content":"    public void testResetInstructorGoogleId_instructorExistsWithEmptyUsersListFromGoogleId_success()"},{"lineNumber":61,"author":{"gitId":"domlimm"},"content":"            throws EntityDoesNotExistException {"},{"lineNumber":62,"author":{"gitId":"domlimm"},"content":"        String courseId \u003d instructor.getCourseId();"},{"lineNumber":63,"author":{"gitId":"domlimm"},"content":"        String email \u003d instructor.getEmail();"},{"lineNumber":64,"author":{"gitId":"domlimm"},"content":"        String googleId \u003d account.getGoogleId();"},{"lineNumber":65,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":66,"author":{"gitId":"domlimm"},"content":"        when(usersLogic.getInstructorForEmail(courseId, email)).thenReturn(instructor);"},{"lineNumber":67,"author":{"gitId":"domlimm"},"content":"        when(usersDb.getAllUsersByGoogleId(googleId)).thenReturn(Collections.emptyList());"},{"lineNumber":68,"author":{"gitId":"domlimm"},"content":"        when(accountsLogic.getAccountForGoogleId(googleId)).thenReturn(account);"},{"lineNumber":69,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":70,"author":{"gitId":"domlimm"},"content":"        usersLogic.resetInstructorGoogleId(email, courseId, googleId);"},{"lineNumber":71,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":72,"author":{"gitId":"domlimm"},"content":"        assertEquals(null, instructor.getAccount());"},{"lineNumber":73,"author":{"gitId":"domlimm"},"content":"        verify(accountsLogic, times(1)).deleteAccountCascade(googleId);"},{"lineNumber":74,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":75,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":76,"author":{"gitId":"domlimm"},"content":"    @Test"},{"lineNumber":77,"author":{"gitId":"domlimm"},"content":"    public void testResetInstructorGoogleId_instructorDoesNotExists_throwsEntityDoesNotExistException()"},{"lineNumber":78,"author":{"gitId":"domlimm"},"content":"            throws EntityDoesNotExistException {"},{"lineNumber":79,"author":{"gitId":"domlimm"},"content":"        String courseId \u003d instructor.getCourseId();"},{"lineNumber":80,"author":{"gitId":"domlimm"},"content":"        String email \u003d instructor.getEmail();"},{"lineNumber":81,"author":{"gitId":"domlimm"},"content":"        String googleId \u003d account.getGoogleId();"},{"lineNumber":82,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":83,"author":{"gitId":"domlimm"},"content":"        when(usersLogic.getInstructorForEmail(courseId, email)).thenReturn(null);"},{"lineNumber":84,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":85,"author":{"gitId":"domlimm"},"content":"        EntityDoesNotExistException exception \u003d assertThrows(EntityDoesNotExistException.class,"},{"lineNumber":86,"author":{"gitId":"domlimm"},"content":"                () -\u003e usersLogic.resetInstructorGoogleId(email, courseId, googleId));"},{"lineNumber":87,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":88,"author":{"gitId":"domlimm"},"content":"        assertEquals(ERROR_UPDATE_NON_EXISTENT"},{"lineNumber":89,"author":{"gitId":"domlimm"},"content":"                + \"Instructor [courseId\u003d\" + courseId + \", email\u003d\" + email + \"]\", exception.getMessage());"},{"lineNumber":90,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":91,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":92,"author":{"gitId":"domlimm"},"content":"    @Test"},{"lineNumber":93,"author":{"gitId":"domlimm"},"content":"    public void testResetStudentGoogleId_studentExistsWithEmptyUsersListFromGoogleId_success()"},{"lineNumber":94,"author":{"gitId":"domlimm"},"content":"            throws EntityDoesNotExistException {"},{"lineNumber":95,"author":{"gitId":"domlimm"},"content":"        String courseId \u003d student.getCourseId();"},{"lineNumber":96,"author":{"gitId":"domlimm"},"content":"        String email \u003d student.getEmail();"},{"lineNumber":97,"author":{"gitId":"domlimm"},"content":"        String googleId \u003d account.getGoogleId();"},{"lineNumber":98,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":99,"author":{"gitId":"domlimm"},"content":"        when(usersLogic.getStudentForEmail(courseId, email)).thenReturn(student);"},{"lineNumber":100,"author":{"gitId":"domlimm"},"content":"        when(usersDb.getAllUsersByGoogleId(googleId)).thenReturn(Collections.emptyList());"},{"lineNumber":101,"author":{"gitId":"domlimm"},"content":"        when(accountsLogic.getAccountForGoogleId(googleId)).thenReturn(account);"},{"lineNumber":102,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":103,"author":{"gitId":"domlimm"},"content":"        usersLogic.resetStudentGoogleId(email, courseId, googleId);"},{"lineNumber":104,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":105,"author":{"gitId":"domlimm"},"content":"        assertNull(student.getAccount());"},{"lineNumber":106,"author":{"gitId":"domlimm"},"content":"        verify(accountsLogic, times(1)).deleteAccountCascade(googleId);"},{"lineNumber":107,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":108,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":109,"author":{"gitId":"domlimm"},"content":"    @Test"},{"lineNumber":110,"author":{"gitId":"domlimm"},"content":"    public void testResetStudentGoogleId_entityDoesNotExists_throwsEntityDoesNotExistException()"},{"lineNumber":111,"author":{"gitId":"domlimm"},"content":"            throws EntityDoesNotExistException {"},{"lineNumber":112,"author":{"gitId":"domlimm"},"content":"        String courseId \u003d student.getCourseId();"},{"lineNumber":113,"author":{"gitId":"domlimm"},"content":"        String email \u003d student.getEmail();"},{"lineNumber":114,"author":{"gitId":"domlimm"},"content":"        String googleId \u003d account.getGoogleId();"},{"lineNumber":115,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":116,"author":{"gitId":"domlimm"},"content":"        when(usersLogic.getStudentForEmail(courseId, email)).thenReturn(null);"},{"lineNumber":117,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":118,"author":{"gitId":"domlimm"},"content":"        EntityDoesNotExistException exception \u003d assertThrows(EntityDoesNotExistException.class,"},{"lineNumber":119,"author":{"gitId":"domlimm"},"content":"                () -\u003e usersLogic.resetStudentGoogleId(email, courseId, googleId));"},{"lineNumber":120,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":121,"author":{"gitId":"domlimm"},"content":"        assertEquals(ERROR_UPDATE_NON_EXISTENT"},{"lineNumber":122,"author":{"gitId":"domlimm"},"content":"                + \"Student [courseId\u003d\" + courseId + \", email\u003d\" + email + \"]\", exception.getMessage());"},{"lineNumber":123,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":124,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":125,"author":{"gitId":"domlimm"},"content":"    private Instructor getTypicalInstructor() {"},{"lineNumber":126,"author":{"gitId":"domlimm"},"content":"        InstructorPrivileges instructorPrivileges \u003d new InstructorPrivileges("},{"lineNumber":127,"author":{"gitId":"domlimm"},"content":"                Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_COOWNER);"},{"lineNumber":128,"author":{"gitId":"domlimm"},"content":"        InstructorPermissionRole role \u003d InstructorPermissionRole"},{"lineNumber":129,"author":{"gitId":"domlimm"},"content":"                .getEnum(Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_COOWNER);"},{"lineNumber":130,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":131,"author":{"gitId":"domlimm"},"content":"        return new Instructor(course, \"instructor-name\", \"valid-instructor@email.tmt\","},{"lineNumber":132,"author":{"gitId":"domlimm"},"content":"                true, Const.DEFAULT_DISPLAY_NAME_FOR_INSTRUCTOR, role, instructorPrivileges);"},{"lineNumber":133,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":134,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":135,"author":{"gitId":"domlimm"},"content":"    private Student getTypicalStudent() {"},{"lineNumber":136,"author":{"gitId":"domlimm"},"content":"        return new Student(course, \"student-name\", \"valid-student@email.tmt\", \"comments\");"},{"lineNumber":137,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":138,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":139,"author":{"gitId":"domlimm"},"content":"    private Account generateTypicalAccount() {"},{"lineNumber":140,"author":{"gitId":"domlimm"},"content":"        return new Account(\"test-googleId\", \"test-name\", \"test@test.com\");"},{"lineNumber":141,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":142,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":143,"author":{"gitId":"domlimm"},"content":"}"}],"authorContributionMap":{"domlimm":143}},{"path":"src/test/java/teammates/sqllogic/core/package-info.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"hhdqirui"},"content":"/**"},{"lineNumber":2,"author":{"gitId":"hhdqirui"},"content":" * Contains test cases for {@link teammates.sqllogic.core} package."},{"lineNumber":3,"author":{"gitId":"hhdqirui"},"content":" */"},{"lineNumber":4,"author":{"gitId":"hhdqirui"},"content":"package teammates.sqllogic.core;"}],"authorContributionMap":{"hhdqirui":4}},{"path":"src/test/java/teammates/sqlui/webapi/BinCourseActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"EuniceSim142"},"content":"package teammates.sqlui.webapi;"},{"lineNumber":2,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":3,"author":{"gitId":"EuniceSim142"},"content":"import static org.mockito.Mockito.when;"},{"lineNumber":4,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":5,"author":{"gitId":"EuniceSim142"},"content":"import java.time.Instant;"},{"lineNumber":6,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":7,"author":{"gitId":"EuniceSim142"},"content":"import org.testng.annotations.Test;"},{"lineNumber":8,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":9,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.datatransfer.InstructorPrivileges;"},{"lineNumber":10,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":11,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.util.Const;"},{"lineNumber":12,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.util.JsonUtils;"},{"lineNumber":13,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.Course;"},{"lineNumber":14,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":15,"author":{"gitId":"EuniceSim142"},"content":"import teammates.ui.output.CourseData;"},{"lineNumber":16,"author":{"gitId":"EuniceSim142"},"content":"import teammates.ui.webapi.BinCourseAction;"},{"lineNumber":17,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":18,"author":{"gitId":"EuniceSim142"},"content":"/**"},{"lineNumber":19,"author":{"gitId":"EuniceSim142"},"content":" * SUT: {@link BinCourseAction}."},{"lineNumber":20,"author":{"gitId":"EuniceSim142"},"content":" */"},{"lineNumber":21,"author":{"gitId":"EuniceSim142"},"content":"public class BinCourseActionTest extends BaseActionTest\u003cBinCourseAction\u003e {"},{"lineNumber":22,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":23,"author":{"gitId":"EuniceSim142"},"content":"    String googleId \u003d \"user-googleId\";"},{"lineNumber":24,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":25,"author":{"gitId":"EuniceSim142"},"content":"    @Override"},{"lineNumber":26,"author":{"gitId":"EuniceSim142"},"content":"    protected String getActionUri() {"},{"lineNumber":27,"author":{"gitId":"EuniceSim142"},"content":"        return Const.ResourceURIs.BIN_COURSE;"},{"lineNumber":28,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":29,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":30,"author":{"gitId":"EuniceSim142"},"content":"    @Override"},{"lineNumber":31,"author":{"gitId":"EuniceSim142"},"content":"    protected String getRequestMethod() {"},{"lineNumber":32,"author":{"gitId":"EuniceSim142"},"content":"        return PUT;"},{"lineNumber":33,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":34,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":35,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":36,"author":{"gitId":"EuniceSim142"},"content":"    void testExecute_courseDoesNotExist_throwsEntityDoesNotExistException() throws EntityDoesNotExistException {"},{"lineNumber":37,"author":{"gitId":"EuniceSim142"},"content":"        String courseId \u003d \"invalid-course-id\";"},{"lineNumber":38,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":39,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.getCourse(courseId)).thenReturn(null);"},{"lineNumber":40,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.moveCourseToRecycleBin(courseId)).thenThrow(new EntityDoesNotExistException(\"\"));"},{"lineNumber":41,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":42,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":43,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.COURSE_ID, courseId,"},{"lineNumber":44,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":45,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":46,"author":{"gitId":"EuniceSim142"},"content":"        verifyEntityNotFound(params);"},{"lineNumber":47,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":48,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":49,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":50,"author":{"gitId":"EuniceSim142"},"content":"    void testExecute_courseExists_success() throws EntityDoesNotExistException {"},{"lineNumber":51,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d new Course(\"course-id\", \"name\", Const.DEFAULT_TIME_ZONE, \"institute\");"},{"lineNumber":52,"author":{"gitId":"EuniceSim142"},"content":"        course.setCreatedAt(Instant.parse(\"2021-01-01T00:00:00Z\"));"},{"lineNumber":53,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":54,"author":{"gitId":"EuniceSim142"},"content":"        Instant expectedDeletedAt \u003d Instant.parse(\"2022-01-01T00:00:00Z\");"},{"lineNumber":55,"author":{"gitId":"EuniceSim142"},"content":"        course.setDeletedAt(expectedDeletedAt);"},{"lineNumber":56,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":57,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.moveCourseToRecycleBin(course.getId())).thenReturn(course);"},{"lineNumber":58,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":59,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":60,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),"},{"lineNumber":61,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":62,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":63,"author":{"gitId":"EuniceSim142"},"content":"        BinCourseAction action \u003d getAction(params);"},{"lineNumber":64,"author":{"gitId":"EuniceSim142"},"content":"        CourseData actionOutput \u003d (CourseData) getJsonResult(action).getOutput();"},{"lineNumber":65,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":66,"author":{"gitId":"EuniceSim142"},"content":"        assertEquals(JsonUtils.toJson(new CourseData(course)), JsonUtils.toJson(actionOutput));"},{"lineNumber":67,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":68,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":69,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":70,"author":{"gitId":"EuniceSim142"},"content":"    void testSpecificAccessControl_instructorWithInvalidPermission_cannotAccess() {"},{"lineNumber":71,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d new Course(\"course-id\", \"name\", Const.DEFAULT_TIME_ZONE, \"institute\");"},{"lineNumber":72,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":73,"author":{"gitId":"EuniceSim142"},"content":"        Instructor instructor \u003d new Instructor(course, \"name\", \"instructoremail@tm.tmt\","},{"lineNumber":74,"author":{"gitId":"EuniceSim142"},"content":"                false, \"\", null, new InstructorPrivileges());"},{"lineNumber":75,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":76,"author":{"gitId":"EuniceSim142"},"content":"        loginAsInstructor(googleId);"},{"lineNumber":77,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.getCourse(course.getId())).thenReturn(course);"},{"lineNumber":78,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.getInstructorByGoogleId(course.getId(), googleId)).thenReturn(instructor);"},{"lineNumber":79,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":80,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":81,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),"},{"lineNumber":82,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":83,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":84,"author":{"gitId":"EuniceSim142"},"content":"        verifyCannotAccess(params);"},{"lineNumber":85,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":86,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":87,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":88,"author":{"gitId":"EuniceSim142"},"content":"    void testSpecificAccessControl_instructorWithPermission_canAccess() {"},{"lineNumber":89,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d new Course(\"course-id\", \"name\", Const.DEFAULT_TIME_ZONE, \"institute\");"},{"lineNumber":90,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":91,"author":{"gitId":"EuniceSim142"},"content":"        InstructorPrivileges instructorPrivileges \u003d new InstructorPrivileges();"},{"lineNumber":92,"author":{"gitId":"EuniceSim142"},"content":"        instructorPrivileges.updatePrivilege(Const.InstructorPermissions.CAN_MODIFY_COURSE, true);"},{"lineNumber":93,"author":{"gitId":"EuniceSim142"},"content":"        Instructor instructor \u003d new Instructor(course, \"name\", \"instructoremail@tm.tmt\","},{"lineNumber":94,"author":{"gitId":"EuniceSim142"},"content":"                false, \"\", null, instructorPrivileges);"},{"lineNumber":95,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":96,"author":{"gitId":"EuniceSim142"},"content":"        loginAsInstructor(googleId);"},{"lineNumber":97,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.getCourse(course.getId())).thenReturn(course);"},{"lineNumber":98,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.getInstructorByGoogleId(course.getId(), googleId)).thenReturn(instructor);"},{"lineNumber":99,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":100,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":101,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),"},{"lineNumber":102,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":103,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":104,"author":{"gitId":"EuniceSim142"},"content":"        verifyCanAccess(params);"},{"lineNumber":105,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":106,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":107,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":108,"author":{"gitId":"EuniceSim142"},"content":"    void testSpecificAccessControl_notInstructor_cannotAccess() {"},{"lineNumber":109,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":110,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.COURSE_ID, \"course-id\","},{"lineNumber":111,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":112,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":113,"author":{"gitId":"EuniceSim142"},"content":"        loginAsStudent(googleId);"},{"lineNumber":114,"author":{"gitId":"EuniceSim142"},"content":"        verifyCannotAccess(params);"},{"lineNumber":115,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":116,"author":{"gitId":"EuniceSim142"},"content":"        logoutUser();"},{"lineNumber":117,"author":{"gitId":"EuniceSim142"},"content":"        verifyCannotAccess(params);"},{"lineNumber":118,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":119,"author":{"gitId":"EuniceSim142"},"content":"}"}],"authorContributionMap":{"EuniceSim142":119}},{"path":"src/test/java/teammates/sqlui/webapi/CreateCourseActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"EuniceSim142"},"content":"package teammates.sqlui.webapi;"},{"lineNumber":2,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":3,"author":{"gitId":"EuniceSim142"},"content":"import static org.mockito.Mockito.mockStatic;"},{"lineNumber":4,"author":{"gitId":"EuniceSim142"},"content":"import static org.mockito.Mockito.when;"},{"lineNumber":5,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":6,"author":{"gitId":"EuniceSim142"},"content":"import java.time.Instant;"},{"lineNumber":7,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":8,"author":{"gitId":"EuniceSim142"},"content":"import org.mockito.Answers;"},{"lineNumber":9,"author":{"gitId":"EuniceSim142"},"content":"import org.mockito.MockedStatic;"},{"lineNumber":10,"author":{"gitId":"EuniceSim142"},"content":"import org.testng.annotations.AfterMethod;"},{"lineNumber":11,"author":{"gitId":"EuniceSim142"},"content":"import org.testng.annotations.BeforeMethod;"},{"lineNumber":12,"author":{"gitId":"EuniceSim142"},"content":"import org.testng.annotations.Test;"},{"lineNumber":13,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":14,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":15,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":16,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.util.Const;"},{"lineNumber":17,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.util.HibernateUtil;"},{"lineNumber":18,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.Course;"},{"lineNumber":19,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":20,"author":{"gitId":"EuniceSim142"},"content":"import teammates.ui.output.CourseData;"},{"lineNumber":21,"author":{"gitId":"EuniceSim142"},"content":"import teammates.ui.request.CourseCreateRequest;"},{"lineNumber":22,"author":{"gitId":"EuniceSim142"},"content":"import teammates.ui.webapi.CreateCourseAction;"},{"lineNumber":23,"author":{"gitId":"EuniceSim142"},"content":"import teammates.ui.webapi.JsonResult;"},{"lineNumber":24,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":25,"author":{"gitId":"EuniceSim142"},"content":"/**"},{"lineNumber":26,"author":{"gitId":"EuniceSim142"},"content":" * SUT: {@link CreateCourseAction}."},{"lineNumber":27,"author":{"gitId":"EuniceSim142"},"content":" */"},{"lineNumber":28,"author":{"gitId":"EuniceSim142"},"content":"public class CreateCourseActionTest extends BaseActionTest\u003cCreateCourseAction\u003e {"},{"lineNumber":29,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":30,"author":{"gitId":"EuniceSim142"},"content":"    String googleId \u003d \"user-googleId\";"},{"lineNumber":31,"author":{"gitId":"EuniceSim142"},"content":"    private MockedStatic\u003cHibernateUtil\u003e mockHibernateUtil;"},{"lineNumber":32,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":33,"author":{"gitId":"EuniceSim142"},"content":"    @Override"},{"lineNumber":34,"author":{"gitId":"EuniceSim142"},"content":"    protected String getActionUri() {"},{"lineNumber":35,"author":{"gitId":"EuniceSim142"},"content":"        return Const.ResourceURIs.COURSE;"},{"lineNumber":36,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":37,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":38,"author":{"gitId":"EuniceSim142"},"content":"    @Override"},{"lineNumber":39,"author":{"gitId":"EuniceSim142"},"content":"    protected String getRequestMethod() {"},{"lineNumber":40,"author":{"gitId":"EuniceSim142"},"content":"        return POST;"},{"lineNumber":41,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":42,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":43,"author":{"gitId":"EuniceSim142"},"content":"    @BeforeMethod"},{"lineNumber":44,"author":{"gitId":"EuniceSim142"},"content":"    public void setUpMethod() {"},{"lineNumber":45,"author":{"gitId":"EuniceSim142"},"content":"        mockHibernateUtil \u003d mockStatic(HibernateUtil.class);"},{"lineNumber":46,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":47,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":48,"author":{"gitId":"EuniceSim142"},"content":"    @AfterMethod"},{"lineNumber":49,"author":{"gitId":"EuniceSim142"},"content":"    public void teardownMethod() {"},{"lineNumber":50,"author":{"gitId":"EuniceSim142"},"content":"        mockHibernateUtil.close();"},{"lineNumber":51,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":52,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":53,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":54,"author":{"gitId":"EuniceSim142"},"content":"    void testExecute_courseDoesNotExist_success() throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":55,"author":{"gitId":"EuniceSim142"},"content":"        loginAsInstructor(googleId);"},{"lineNumber":56,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d new Course(\"course-id\", \"name\", Const.DEFAULT_TIME_ZONE, \"institute\");"},{"lineNumber":57,"author":{"gitId":"EuniceSim142"},"content":"        Instructor instructor \u003d new Instructor(course, \"name\", \"instructoremail@tm.tmt\", false, \"\", null, null);"},{"lineNumber":58,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":59,"author":{"gitId":"EuniceSim142"},"content":"        Course expectedCourse \u003d new Course(course.getId(), course.getName(), course.getTimeZone(), course.getInstitute());"},{"lineNumber":60,"author":{"gitId":"EuniceSim142"},"content":"        expectedCourse.setCreatedAt(Instant.parse(\"2022-01-01T00:00:00Z\"));"},{"lineNumber":61,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":62,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.createCourse(course)).thenReturn(expectedCourse);"},{"lineNumber":63,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.getInstructorByGoogleId(course.getId(), googleId)).thenReturn(instructor);"},{"lineNumber":64,"author":{"gitId":"EuniceSim142"},"content":"        mockHibernateUtil.when(HibernateUtil::flushSession).thenAnswer(Answers.RETURNS_DEFAULTS);"},{"lineNumber":65,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":66,"author":{"gitId":"EuniceSim142"},"content":"        CourseCreateRequest request \u003d new CourseCreateRequest();"},{"lineNumber":67,"author":{"gitId":"EuniceSim142"},"content":"        request.setCourseName(course.getName());"},{"lineNumber":68,"author":{"gitId":"EuniceSim142"},"content":"        request.setTimeZone(course.getTimeZone());"},{"lineNumber":69,"author":{"gitId":"EuniceSim142"},"content":"        request.setCourseId(course.getId());"},{"lineNumber":70,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":71,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":72,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.INSTRUCTOR_INSTITUTION, course.getInstitute(),"},{"lineNumber":73,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":74,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":75,"author":{"gitId":"EuniceSim142"},"content":"        CreateCourseAction action \u003d getAction(request, params);"},{"lineNumber":76,"author":{"gitId":"EuniceSim142"},"content":"        JsonResult result \u003d getJsonResult(action);"},{"lineNumber":77,"author":{"gitId":"EuniceSim142"},"content":"        CourseData actionOutput \u003d (CourseData) result.getOutput();"},{"lineNumber":78,"author":{"gitId":"EuniceSim142"},"content":"        verifySpecifiedTasksAdded(Const.TaskQueue.SEARCH_INDEXING_QUEUE_NAME, 1);"},{"lineNumber":79,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":80,"author":{"gitId":"EuniceSim142"},"content":"        assertEquals(course.getId(), actionOutput.getCourseId());"},{"lineNumber":81,"author":{"gitId":"EuniceSim142"},"content":"        assertEquals(course.getName(), actionOutput.getCourseName());"},{"lineNumber":82,"author":{"gitId":"EuniceSim142"},"content":"        assertEquals(course.getTimeZone(), actionOutput.getTimeZone());"},{"lineNumber":83,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":84,"author":{"gitId":"EuniceSim142"},"content":"        assertNull(course.getCreatedAt());"},{"lineNumber":85,"author":{"gitId":"EuniceSim142"},"content":"        assertNotNull(actionOutput.getCreationTimestamp());"},{"lineNumber":86,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":87,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":88,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":89,"author":{"gitId":"EuniceSim142"},"content":"    void testExecute_courseAlreadyExists_throwsInvalidOperationException()"},{"lineNumber":90,"author":{"gitId":"EuniceSim142"},"content":"            throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":91,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d new Course(\"existing-course-id\", \"name\", Const.DEFAULT_TIME_ZONE, \"institute\");"},{"lineNumber":92,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":93,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.createCourse(course)).thenThrow(new EntityAlreadyExistsException(\"\"));"},{"lineNumber":94,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":95,"author":{"gitId":"EuniceSim142"},"content":"        CourseCreateRequest request \u003d new CourseCreateRequest();"},{"lineNumber":96,"author":{"gitId":"EuniceSim142"},"content":"        request.setCourseName(course.getName());"},{"lineNumber":97,"author":{"gitId":"EuniceSim142"},"content":"        request.setTimeZone(course.getTimeZone());"},{"lineNumber":98,"author":{"gitId":"EuniceSim142"},"content":"        request.setCourseId(course.getId());"},{"lineNumber":99,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":100,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":101,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.INSTRUCTOR_INSTITUTION, course.getInstitute(),"},{"lineNumber":102,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":103,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":104,"author":{"gitId":"EuniceSim142"},"content":"        verifyInvalidOperation(request, params);"},{"lineNumber":105,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":106,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":107,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":108,"author":{"gitId":"EuniceSim142"},"content":"    void testExecute_invalidCourseName_throwsInvalidHttpRequestBodyException()"},{"lineNumber":109,"author":{"gitId":"EuniceSim142"},"content":"            throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":110,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d new Course(\"invalid-course-id\", \"name\", Const.DEFAULT_TIME_ZONE, \"institute\");"},{"lineNumber":111,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":112,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.createCourse(course)).thenThrow(new InvalidParametersException(\"\"));"},{"lineNumber":113,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":114,"author":{"gitId":"EuniceSim142"},"content":"        CourseCreateRequest request \u003d new CourseCreateRequest();"},{"lineNumber":115,"author":{"gitId":"EuniceSim142"},"content":"        request.setCourseName(course.getName());"},{"lineNumber":116,"author":{"gitId":"EuniceSim142"},"content":"        request.setTimeZone(course.getTimeZone());"},{"lineNumber":117,"author":{"gitId":"EuniceSim142"},"content":"        request.setCourseId(course.getId());"},{"lineNumber":118,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":119,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":120,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.INSTRUCTOR_INSTITUTION, course.getInstitute(),"},{"lineNumber":121,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":122,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":123,"author":{"gitId":"EuniceSim142"},"content":"        verifyHttpRequestBodyFailure(request, params);"},{"lineNumber":124,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":125,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":126,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":127,"author":{"gitId":"EuniceSim142"},"content":"    void testSpecificAccessControl_asInstructorAndCanCreateCourse_canAccess() {"},{"lineNumber":128,"author":{"gitId":"EuniceSim142"},"content":"        String institute \u003d \"institute\";"},{"lineNumber":129,"author":{"gitId":"EuniceSim142"},"content":"        loginAsInstructor(googleId);"},{"lineNumber":130,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.canInstructorCreateCourse(googleId, institute)).thenReturn(true);"},{"lineNumber":131,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":132,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":133,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.INSTRUCTOR_INSTITUTION, institute,"},{"lineNumber":134,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":135,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":136,"author":{"gitId":"EuniceSim142"},"content":"        verifyCanAccess(params);"},{"lineNumber":137,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":138,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":139,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":140,"author":{"gitId":"EuniceSim142"},"content":"    void testSpecificAccessControl_asInstructorAndCannotCreateCourse_cannotAccess() {"},{"lineNumber":141,"author":{"gitId":"EuniceSim142"},"content":"        String institute \u003d \"institute\";"},{"lineNumber":142,"author":{"gitId":"EuniceSim142"},"content":"        loginAsInstructor(googleId);"},{"lineNumber":143,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.canInstructorCreateCourse(googleId, institute)).thenReturn(false);"},{"lineNumber":144,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":145,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":146,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.INSTRUCTOR_INSTITUTION, institute,"},{"lineNumber":147,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":148,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":149,"author":{"gitId":"EuniceSim142"},"content":"        verifyCannotAccess(params);"},{"lineNumber":150,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":151,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":152,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":153,"author":{"gitId":"EuniceSim142"},"content":"    void testSpecificAccessControl_notInstructor_cannotAccess() {"},{"lineNumber":154,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":155,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.INSTRUCTOR_INSTITUTION, \"institute\","},{"lineNumber":156,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":157,"author":{"gitId":"EuniceSim142"},"content":"        loginAsStudent(googleId);"},{"lineNumber":158,"author":{"gitId":"EuniceSim142"},"content":"        verifyCannotAccess(params);"},{"lineNumber":159,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":160,"author":{"gitId":"EuniceSim142"},"content":"        logoutUser();"},{"lineNumber":161,"author":{"gitId":"EuniceSim142"},"content":"        verifyCannotAccess(params);"},{"lineNumber":162,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":163,"author":{"gitId":"EuniceSim142"},"content":"}"}],"authorContributionMap":{"EuniceSim142":163}},{"path":"src/test/java/teammates/sqlui/webapi/DeleteCourseActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"EuniceSim142"},"content":"package teammates.sqlui.webapi;"},{"lineNumber":2,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":3,"author":{"gitId":"EuniceSim142"},"content":"import static org.mockito.Mockito.when;"},{"lineNumber":4,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":5,"author":{"gitId":"EuniceSim142"},"content":"import org.testng.annotations.Test;"},{"lineNumber":6,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":7,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.datatransfer.InstructorPrivileges;"},{"lineNumber":8,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.util.Const;"},{"lineNumber":9,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.util.Const.InstructorPermissions;"},{"lineNumber":10,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.Course;"},{"lineNumber":11,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":12,"author":{"gitId":"EuniceSim142"},"content":"import teammates.ui.output.MessageOutput;"},{"lineNumber":13,"author":{"gitId":"EuniceSim142"},"content":"import teammates.ui.webapi.DeleteCourseAction;"},{"lineNumber":14,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":15,"author":{"gitId":"EuniceSim142"},"content":"/**"},{"lineNumber":16,"author":{"gitId":"EuniceSim142"},"content":" * SUT: {@link DeleteCourseAction}."},{"lineNumber":17,"author":{"gitId":"EuniceSim142"},"content":" */"},{"lineNumber":18,"author":{"gitId":"EuniceSim142"},"content":"public class DeleteCourseActionTest extends BaseActionTest\u003cDeleteCourseAction\u003e {"},{"lineNumber":19,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":20,"author":{"gitId":"EuniceSim142"},"content":"    String googleId \u003d \"user-googleId\";"},{"lineNumber":21,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":22,"author":{"gitId":"EuniceSim142"},"content":"    @Override"},{"lineNumber":23,"author":{"gitId":"EuniceSim142"},"content":"    protected String getActionUri() {"},{"lineNumber":24,"author":{"gitId":"EuniceSim142"},"content":"        return Const.ResourceURIs.COURSE;"},{"lineNumber":25,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":26,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":27,"author":{"gitId":"EuniceSim142"},"content":"    @Override"},{"lineNumber":28,"author":{"gitId":"EuniceSim142"},"content":"    protected String getRequestMethod() {"},{"lineNumber":29,"author":{"gitId":"EuniceSim142"},"content":"        return DELETE;"},{"lineNumber":30,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":31,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":32,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":33,"author":{"gitId":"EuniceSim142"},"content":"    void testExecute_courseDoesNotExist_failSilently() {"},{"lineNumber":34,"author":{"gitId":"EuniceSim142"},"content":"        String courseId \u003d \"course-id\";"},{"lineNumber":35,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":36,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.getCourse(courseId)).thenReturn(null);"},{"lineNumber":37,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":38,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":39,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.COURSE_ID, courseId,"},{"lineNumber":40,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":41,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":42,"author":{"gitId":"EuniceSim142"},"content":"        DeleteCourseAction action \u003d getAction(params);"},{"lineNumber":43,"author":{"gitId":"EuniceSim142"},"content":"        MessageOutput actionOutput \u003d (MessageOutput) getJsonResult(action).getOutput();"},{"lineNumber":44,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":45,"author":{"gitId":"EuniceSim142"},"content":"        assertEquals(\"OK\", actionOutput.getMessage());"},{"lineNumber":46,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":47,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":48,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":49,"author":{"gitId":"EuniceSim142"},"content":"    void testExecute_courseExists_success() {"},{"lineNumber":50,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d new Course(\"course-id\", \"name\", Const.DEFAULT_TIME_ZONE, \"institute\");"},{"lineNumber":51,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":52,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.getCourse(course.getId())).thenReturn(course);"},{"lineNumber":53,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":54,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":55,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),"},{"lineNumber":56,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":57,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":58,"author":{"gitId":"EuniceSim142"},"content":"        DeleteCourseAction action \u003d getAction(params);"},{"lineNumber":59,"author":{"gitId":"EuniceSim142"},"content":"        MessageOutput actionOutput \u003d (MessageOutput) getJsonResult(action).getOutput();"},{"lineNumber":60,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":61,"author":{"gitId":"EuniceSim142"},"content":"        assertEquals(\"OK\", actionOutput.getMessage());"},{"lineNumber":62,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":63,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":64,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":65,"author":{"gitId":"EuniceSim142"},"content":"    void testExecute_invalidCourseId_failSilently() {"},{"lineNumber":66,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.getCourse(\"invalid-course-id\")).thenReturn(null);"},{"lineNumber":67,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":68,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.COURSE_ID, \"invalid-course-id\","},{"lineNumber":69,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":70,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":71,"author":{"gitId":"EuniceSim142"},"content":"        DeleteCourseAction action \u003d getAction(params);"},{"lineNumber":72,"author":{"gitId":"EuniceSim142"},"content":"        MessageOutput actionOutput \u003d (MessageOutput) getJsonResult(action).getOutput();"},{"lineNumber":73,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":74,"author":{"gitId":"EuniceSim142"},"content":"        assertEquals(\"OK\", actionOutput.getMessage());"},{"lineNumber":75,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":76,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":77,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":78,"author":{"gitId":"EuniceSim142"},"content":"    void testExecute_missingCourseId_throwsInvalidHttpParameterException() {"},{"lineNumber":79,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":80,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.COURSE_ID, null,"},{"lineNumber":81,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":82,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":83,"author":{"gitId":"EuniceSim142"},"content":"        verifyHttpParameterFailure(params);"},{"lineNumber":84,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":85,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":86,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":87,"author":{"gitId":"EuniceSim142"},"content":"    void testSpecificAccessControl_instructorWithInvalidPermission_cannotAccess() {"},{"lineNumber":88,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d new Course(\"course-id\", \"name\", Const.DEFAULT_TIME_ZONE, \"institute\");"},{"lineNumber":89,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":90,"author":{"gitId":"EuniceSim142"},"content":"        Instructor instructor \u003d new Instructor(course, \"name\", \"instructoremail@tm.tmt\","},{"lineNumber":91,"author":{"gitId":"EuniceSim142"},"content":"                false, \"\", null, new InstructorPrivileges());"},{"lineNumber":92,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":93,"author":{"gitId":"EuniceSim142"},"content":"        loginAsInstructor(googleId);"},{"lineNumber":94,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.getCourse(course.getId())).thenReturn(course);"},{"lineNumber":95,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.getInstructorByGoogleId(course.getId(), googleId)).thenReturn(instructor);"},{"lineNumber":96,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":97,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":98,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),"},{"lineNumber":99,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":100,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":101,"author":{"gitId":"EuniceSim142"},"content":"        verifyCannotAccess(params);"},{"lineNumber":102,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":103,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":104,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":105,"author":{"gitId":"EuniceSim142"},"content":"    void testSpecificAccessControl_instructorWithPermission_canAccess() {"},{"lineNumber":106,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d new Course(\"course-id\", \"name\", Const.DEFAULT_TIME_ZONE, \"institute\");"},{"lineNumber":107,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":108,"author":{"gitId":"EuniceSim142"},"content":"        InstructorPrivileges instructorPrivileges \u003d new InstructorPrivileges();"},{"lineNumber":109,"author":{"gitId":"EuniceSim142"},"content":"        instructorPrivileges.updatePrivilege(InstructorPermissions.CAN_MODIFY_COURSE, true);"},{"lineNumber":110,"author":{"gitId":"EuniceSim142"},"content":"        Instructor instructor \u003d new Instructor(course, \"name\", \"instructoremail@tm.tmt\","},{"lineNumber":111,"author":{"gitId":"EuniceSim142"},"content":"                false, \"\", null, instructorPrivileges);"},{"lineNumber":112,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":113,"author":{"gitId":"EuniceSim142"},"content":"        loginAsInstructor(googleId);"},{"lineNumber":114,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.getCourse(course.getId())).thenReturn(course);"},{"lineNumber":115,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.getInstructorByGoogleId(course.getId(), googleId)).thenReturn(instructor);"},{"lineNumber":116,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":117,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":118,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),"},{"lineNumber":119,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":120,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":121,"author":{"gitId":"EuniceSim142"},"content":"        verifyCanAccess(params);"},{"lineNumber":122,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":123,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":124,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":125,"author":{"gitId":"EuniceSim142"},"content":"    void testSpecificAccessControl_notInstructor_cannotAccess() {"},{"lineNumber":126,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":127,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.COURSE_ID, \"course-id\","},{"lineNumber":128,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":129,"author":{"gitId":"EuniceSim142"},"content":"        loginAsStudent(googleId);"},{"lineNumber":130,"author":{"gitId":"EuniceSim142"},"content":"        verifyCannotAccess(params);"},{"lineNumber":131,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":132,"author":{"gitId":"EuniceSim142"},"content":"        logoutUser();"},{"lineNumber":133,"author":{"gitId":"EuniceSim142"},"content":"        verifyCannotAccess(params);"},{"lineNumber":134,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":135,"author":{"gitId":"EuniceSim142"},"content":"}"}],"authorContributionMap":{"EuniceSim142":135}},{"path":"src/test/java/teammates/sqlui/webapi/GetCourseActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"EuniceSim142"},"content":"package teammates.sqlui.webapi;"},{"lineNumber":2,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":3,"author":{"gitId":"EuniceSim142"},"content":"import static org.mockito.Mockito.when;"},{"lineNumber":4,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":5,"author":{"gitId":"EuniceSim142"},"content":"import java.time.Instant;"},{"lineNumber":6,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":7,"author":{"gitId":"EuniceSim142"},"content":"import org.testng.annotations.Test;"},{"lineNumber":8,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":9,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.util.Const;"},{"lineNumber":10,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.util.JsonUtils;"},{"lineNumber":11,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.Course;"},{"lineNumber":12,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":13,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.Student;"},{"lineNumber":14,"author":{"gitId":"EuniceSim142"},"content":"import teammates.ui.output.CourseData;"},{"lineNumber":15,"author":{"gitId":"EuniceSim142"},"content":"import teammates.ui.webapi.GetCourseAction;"},{"lineNumber":16,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":17,"author":{"gitId":"EuniceSim142"},"content":"/**"},{"lineNumber":18,"author":{"gitId":"EuniceSim142"},"content":" * SUT: {@link GetCourseAction}."},{"lineNumber":19,"author":{"gitId":"EuniceSim142"},"content":" */"},{"lineNumber":20,"author":{"gitId":"EuniceSim142"},"content":"public class GetCourseActionTest extends BaseActionTest\u003cGetCourseAction\u003e {"},{"lineNumber":21,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":22,"author":{"gitId":"EuniceSim142"},"content":"    String googleId \u003d \"user-googleId\";"},{"lineNumber":23,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":24,"author":{"gitId":"EuniceSim142"},"content":"    @Override"},{"lineNumber":25,"author":{"gitId":"EuniceSim142"},"content":"    protected String getActionUri() {"},{"lineNumber":26,"author":{"gitId":"EuniceSim142"},"content":"        return Const.ResourceURIs.COURSE;"},{"lineNumber":27,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":28,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":29,"author":{"gitId":"EuniceSim142"},"content":"    @Override"},{"lineNumber":30,"author":{"gitId":"EuniceSim142"},"content":"    protected String getRequestMethod() {"},{"lineNumber":31,"author":{"gitId":"EuniceSim142"},"content":"        return GET;"},{"lineNumber":32,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":33,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":34,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":35,"author":{"gitId":"EuniceSim142"},"content":"    void testSpecificAccessControl_courseDoesNotExist_cannotAccess() {"},{"lineNumber":36,"author":{"gitId":"EuniceSim142"},"content":"        loginAsInstructor(googleId);"},{"lineNumber":37,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.getCourse(\"course-id\")).thenReturn(null);"},{"lineNumber":38,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":39,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":40,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.COURSE_ID, \"course-id\","},{"lineNumber":41,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.ENTITY_TYPE, Const.EntityType.INSTRUCTOR,"},{"lineNumber":42,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":43,"author":{"gitId":"EuniceSim142"},"content":"        verifyCannotAccess(params);"},{"lineNumber":44,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":45,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":46,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":47,"author":{"gitId":"EuniceSim142"},"content":"    void testSpecificAccessControl_asInstructor_canAccess() {"},{"lineNumber":48,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d new Course(\"course-id\", \"name\", Const.DEFAULT_TIME_ZONE, \"institute\");"},{"lineNumber":49,"author":{"gitId":"EuniceSim142"},"content":"        Instructor instructor \u003d new Instructor(course, \"name\", \"instructoremail@tm.tmt\", false, \"\", null, null);"},{"lineNumber":50,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":51,"author":{"gitId":"EuniceSim142"},"content":"        loginAsInstructor(googleId);"},{"lineNumber":52,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.getCourse(course.getId())).thenReturn(course);"},{"lineNumber":53,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.getInstructorByGoogleId(course.getId(), googleId)).thenReturn(instructor);"},{"lineNumber":54,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":55,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":56,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),"},{"lineNumber":57,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.ENTITY_TYPE, Const.EntityType.INSTRUCTOR,"},{"lineNumber":58,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":59,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":60,"author":{"gitId":"EuniceSim142"},"content":"        verifyCanAccess(params);"},{"lineNumber":61,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":62,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":63,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":64,"author":{"gitId":"EuniceSim142"},"content":"    void testSpecificAccessControl_asUnregisteredInstructorWithRegKey_canAccess() {"},{"lineNumber":65,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d new Course(\"course-id\", \"name\", Const.DEFAULT_TIME_ZONE, \"institute\");"},{"lineNumber":66,"author":{"gitId":"EuniceSim142"},"content":"        Instructor instructor \u003d new Instructor(course, \"name\", \"instructoremail@tm.tmt\", false, \"\", null, null);"},{"lineNumber":67,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":68,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.getCourse(course.getId())).thenReturn(course);"},{"lineNumber":69,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.getInstructorByRegistrationKey(instructor.getRegKey())).thenReturn(instructor);"},{"lineNumber":70,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":71,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":72,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),"},{"lineNumber":73,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.REGKEY, instructor.getRegKey(),"},{"lineNumber":74,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.ENTITY_TYPE, Const.EntityType.INSTRUCTOR,"},{"lineNumber":75,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":76,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":77,"author":{"gitId":"EuniceSim142"},"content":"        verifyCanAccess(params);"},{"lineNumber":78,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":79,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":80,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":81,"author":{"gitId":"EuniceSim142"},"content":"    void testSpecificAccessControl_asStudent_canAccess() {"},{"lineNumber":82,"author":{"gitId":"EuniceSim142"},"content":"        loginAsStudent(googleId);"},{"lineNumber":83,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":84,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d new Course(\"course-id\", \"name\", Const.DEFAULT_TIME_ZONE, \"institute\");"},{"lineNumber":85,"author":{"gitId":"EuniceSim142"},"content":"        Student student \u003d new Student(course, \"name\", \"studen_email@tm.tmt\", \"student comments\");"},{"lineNumber":86,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":87,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.getCourse(course.getId())).thenReturn(course);"},{"lineNumber":88,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.getStudentByGoogleId(course.getId(), googleId)).thenReturn(student);"},{"lineNumber":89,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":90,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":91,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),"},{"lineNumber":92,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.ENTITY_TYPE, Const.EntityType.STUDENT,"},{"lineNumber":93,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":94,"author":{"gitId":"EuniceSim142"},"content":"        verifyCanAccess(params);"},{"lineNumber":95,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":96,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":97,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":98,"author":{"gitId":"EuniceSim142"},"content":"    void testSpecificAccessControl_notLoggedIn_cannotAccess() {"},{"lineNumber":99,"author":{"gitId":"EuniceSim142"},"content":"        logoutUser();"},{"lineNumber":100,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":101,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d new Course(\"course-id\", \"name\", Const.DEFAULT_TIME_ZONE, \"institute\");"},{"lineNumber":102,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":103,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),"},{"lineNumber":104,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.ENTITY_TYPE, Const.EntityType.INSTRUCTOR,"},{"lineNumber":105,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":106,"author":{"gitId":"EuniceSim142"},"content":"        verifyCannotAccess(params);"},{"lineNumber":107,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":108,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":109,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":110,"author":{"gitId":"EuniceSim142"},"content":"    void testExecute_invalidEntityType_cannotAccess() {"},{"lineNumber":111,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":112,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.COURSE_ID, \"course-id\","},{"lineNumber":113,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.ENTITY_TYPE, \"invalid-entity-type\","},{"lineNumber":114,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":115,"author":{"gitId":"EuniceSim142"},"content":"        verifyCannotAccess(params);"},{"lineNumber":116,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":117,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":118,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":119,"author":{"gitId":"EuniceSim142"},"content":"    void testExecute_noParameters_throwsInvalidHttpParameterException() {"},{"lineNumber":120,"author":{"gitId":"EuniceSim142"},"content":"        verifyHttpParameterFailure();"},{"lineNumber":121,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":122,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":123,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":124,"author":{"gitId":"EuniceSim142"},"content":"    void testExecute_notEnoughParameters_throwsInvalidHttpParameterException() {"},{"lineNumber":125,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":126,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.COURSE_ID, null,"},{"lineNumber":127,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":128,"author":{"gitId":"EuniceSim142"},"content":"        verifyHttpParameterFailure(params);"},{"lineNumber":129,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":130,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":131,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":132,"author":{"gitId":"EuniceSim142"},"content":"    void testExecute_invalidCourseId_throwsInvalidHttpParameterException() {"},{"lineNumber":133,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":134,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.COURSE_ID, null,"},{"lineNumber":135,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.ENTITY_TYPE, Const.EntityType.STUDENT,"},{"lineNumber":136,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":137,"author":{"gitId":"EuniceSim142"},"content":"        verifyHttpParameterFailure(params);"},{"lineNumber":138,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":139,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":140,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":141,"author":{"gitId":"EuniceSim142"},"content":"    void testExecute_courseDoesNotExist_throwsEntityNotFoundException() {"},{"lineNumber":142,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.getCourse(\"course-id\")).thenReturn(null);"},{"lineNumber":143,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":144,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":145,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.COURSE_ID, \"course-id\","},{"lineNumber":146,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.ENTITY_TYPE, Const.EntityType.INSTRUCTOR,"},{"lineNumber":147,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":148,"author":{"gitId":"EuniceSim142"},"content":"        verifyEntityNotFound(params);"},{"lineNumber":149,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":150,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":151,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":152,"author":{"gitId":"EuniceSim142"},"content":"    void testExecute_asInstructor_success() {"},{"lineNumber":153,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d new Course(\"course-id\", \"name\", Const.DEFAULT_TIME_ZONE, \"institute\");"},{"lineNumber":154,"author":{"gitId":"EuniceSim142"},"content":"        course.setCreatedAt(Instant.parse(\"2022-01-01T00:00:00Z\"));"},{"lineNumber":155,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":156,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.getCourse(course.getId())).thenReturn(course);"},{"lineNumber":157,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":158,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":159,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),"},{"lineNumber":160,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.ENTITY_TYPE, Const.EntityType.INSTRUCTOR,"},{"lineNumber":161,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":162,"author":{"gitId":"EuniceSim142"},"content":"        GetCourseAction getCourseAction \u003d getAction(params);"},{"lineNumber":163,"author":{"gitId":"EuniceSim142"},"content":"        CourseData actionOutput \u003d (CourseData) getJsonResult(getCourseAction).getOutput();"},{"lineNumber":164,"author":{"gitId":"EuniceSim142"},"content":"        assertEquals(JsonUtils.toJson(new CourseData(course)), JsonUtils.toJson(actionOutput));"},{"lineNumber":165,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":166,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":167,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":168,"author":{"gitId":"EuniceSim142"},"content":"    void testExecute_asStudentHideCreatedAtAndDeletedAt_success() {"},{"lineNumber":169,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d new Course(\"course-id\", \"name\", Const.DEFAULT_TIME_ZONE, \"institute\");"},{"lineNumber":170,"author":{"gitId":"EuniceSim142"},"content":"        course.setCreatedAt(Instant.parse(\"2022-01-01T00:00:00Z\"));"},{"lineNumber":171,"author":{"gitId":"EuniceSim142"},"content":"        course.setCreatedAt(Instant.parse(\"2023-01-01T00:00:00Z\"));"},{"lineNumber":172,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":173,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.getCourse(course.getId())).thenReturn(course);"},{"lineNumber":174,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":175,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":176,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),"},{"lineNumber":177,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.ENTITY_TYPE, Const.EntityType.STUDENT,"},{"lineNumber":178,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":179,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":180,"author":{"gitId":"EuniceSim142"},"content":"        GetCourseAction getCourseAction \u003d getAction(params);"},{"lineNumber":181,"author":{"gitId":"EuniceSim142"},"content":"        CourseData actionOutput \u003d (CourseData) getJsonResult(getCourseAction).getOutput();"},{"lineNumber":182,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":183,"author":{"gitId":"EuniceSim142"},"content":"        Course expectedCourse \u003d course;"},{"lineNumber":184,"author":{"gitId":"EuniceSim142"},"content":"        expectedCourse.setCreatedAt(Instant.ofEpochMilli(0));"},{"lineNumber":185,"author":{"gitId":"EuniceSim142"},"content":"        expectedCourse.setDeletedAt(Instant.ofEpochMilli(0));"},{"lineNumber":186,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":187,"author":{"gitId":"EuniceSim142"},"content":"        assertEquals(JsonUtils.toJson(new CourseData(expectedCourse)), JsonUtils.toJson(actionOutput));"},{"lineNumber":188,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":189,"author":{"gitId":"EuniceSim142"},"content":"}"}],"authorContributionMap":{"EuniceSim142":189}},{"path":"src/test/java/teammates/sqlui/webapi/GetCourseSectionNamesActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"EuniceSim142"},"content":"package teammates.sqlui.webapi;"},{"lineNumber":2,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":3,"author":{"gitId":"EuniceSim142"},"content":"import static org.mockito.Mockito.when;"},{"lineNumber":4,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":5,"author":{"gitId":"EuniceSim142"},"content":"import java.util.List;"},{"lineNumber":6,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":7,"author":{"gitId":"EuniceSim142"},"content":"import org.testng.annotations.Test;"},{"lineNumber":8,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":9,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.datatransfer.InstructorPrivileges;"},{"lineNumber":10,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":11,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.util.Const;"},{"lineNumber":12,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.util.JsonUtils;"},{"lineNumber":13,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.Course;"},{"lineNumber":14,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":15,"author":{"gitId":"EuniceSim142"},"content":"import teammates.ui.output.CourseSectionNamesData;"},{"lineNumber":16,"author":{"gitId":"EuniceSim142"},"content":"import teammates.ui.webapi.GetCourseSectionNamesAction;"},{"lineNumber":17,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":18,"author":{"gitId":"EuniceSim142"},"content":"/**"},{"lineNumber":19,"author":{"gitId":"EuniceSim142"},"content":" * SUT: {@link GetCourseSectionNamesAction}."},{"lineNumber":20,"author":{"gitId":"EuniceSim142"},"content":" */"},{"lineNumber":21,"author":{"gitId":"EuniceSim142"},"content":"public class GetCourseSectionNamesActionTest extends BaseActionTest\u003cGetCourseSectionNamesAction\u003e {"},{"lineNumber":22,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":23,"author":{"gitId":"EuniceSim142"},"content":"    String googleId \u003d \"user-googleId\";"},{"lineNumber":24,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":25,"author":{"gitId":"EuniceSim142"},"content":"    @Override"},{"lineNumber":26,"author":{"gitId":"EuniceSim142"},"content":"    protected String getActionUri() {"},{"lineNumber":27,"author":{"gitId":"EuniceSim142"},"content":"        return Const.ResourceURIs.COURSE_SECTIONS;"},{"lineNumber":28,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":29,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":30,"author":{"gitId":"EuniceSim142"},"content":"    @Override"},{"lineNumber":31,"author":{"gitId":"EuniceSim142"},"content":"    protected String getRequestMethod() {"},{"lineNumber":32,"author":{"gitId":"EuniceSim142"},"content":"        return GET;"},{"lineNumber":33,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":34,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":35,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":36,"author":{"gitId":"EuniceSim142"},"content":"    void testExecute_courseDoesNotExist_throwsEntityDoesNotExistException() throws EntityDoesNotExistException {"},{"lineNumber":37,"author":{"gitId":"EuniceSim142"},"content":"        String courseId \u003d \"invalid-course-id\";"},{"lineNumber":38,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":39,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.getSectionNamesForCourse(courseId)).thenThrow(new EntityDoesNotExistException(\"\"));"},{"lineNumber":40,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":41,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":42,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.COURSE_ID, courseId,"},{"lineNumber":43,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":44,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":45,"author":{"gitId":"EuniceSim142"},"content":"        verifyEntityNotFound(params);"},{"lineNumber":46,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":47,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":48,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":49,"author":{"gitId":"EuniceSim142"},"content":"    void testExecute_courseExists_success() throws EntityDoesNotExistException {"},{"lineNumber":50,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d new Course(\"course-id\", \"name\", Const.DEFAULT_TIME_ZONE, \"institute\");"},{"lineNumber":51,"author":{"gitId":"EuniceSim142"},"content":"        List\u003cString\u003e sectionNames \u003d List.of(\"section-name-1\", \"section-name-2\");"},{"lineNumber":52,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":53,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.getSectionNamesForCourse(course.getId())).thenReturn(sectionNames);"},{"lineNumber":54,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":55,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":56,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),"},{"lineNumber":57,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":58,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":59,"author":{"gitId":"EuniceSim142"},"content":"        GetCourseSectionNamesAction action \u003d getAction(params);"},{"lineNumber":60,"author":{"gitId":"EuniceSim142"},"content":"        CourseSectionNamesData actionOutput \u003d (CourseSectionNamesData) getJsonResult(action).getOutput();"},{"lineNumber":61,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":62,"author":{"gitId":"EuniceSim142"},"content":"        assertEquals(JsonUtils.toJson(new CourseSectionNamesData(sectionNames)), JsonUtils.toJson(actionOutput));"},{"lineNumber":63,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":64,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":65,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":66,"author":{"gitId":"EuniceSim142"},"content":"    void testSpecificAccessControl_instructor_canAccess() {"},{"lineNumber":67,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d new Course(\"course-id\", \"name\", Const.DEFAULT_TIME_ZONE, \"institute\");"},{"lineNumber":68,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":69,"author":{"gitId":"EuniceSim142"},"content":"        Instructor instructorOfCourse \u003d new Instructor(course, \"name\", \"instructoremail@tm.tmt\","},{"lineNumber":70,"author":{"gitId":"EuniceSim142"},"content":"                false, \"\", null, new InstructorPrivileges());"},{"lineNumber":71,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":72,"author":{"gitId":"EuniceSim142"},"content":"        loginAsInstructor(googleId);"},{"lineNumber":73,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.getCourse(course.getId())).thenReturn(course);"},{"lineNumber":74,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.getInstructorByGoogleId(course.getId(), googleId)).thenReturn(instructorOfCourse);"},{"lineNumber":75,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":76,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":77,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),"},{"lineNumber":78,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":79,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":80,"author":{"gitId":"EuniceSim142"},"content":"        verifyCanAccess(params);"},{"lineNumber":81,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":82,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":83,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":84,"author":{"gitId":"EuniceSim142"},"content":"    void testSpecificAccessControl_instructorOfAnotherCourse_cannotAccess() {"},{"lineNumber":85,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d new Course(\"course-id\", \"name\", Const.DEFAULT_TIME_ZONE, \"institute\");"},{"lineNumber":86,"author":{"gitId":"EuniceSim142"},"content":"        Course anotherCourse \u003d new Course(\"another-course-id\", \"name\", Const.DEFAULT_TIME_ZONE, \"institute\");"},{"lineNumber":87,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":88,"author":{"gitId":"EuniceSim142"},"content":"        Instructor instructorOfAnotherCourse \u003d new Instructor(anotherCourse, \"name\", \"instructoremail@tm.tmt\","},{"lineNumber":89,"author":{"gitId":"EuniceSim142"},"content":"                false, \"\", null, new InstructorPrivileges());"},{"lineNumber":90,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":91,"author":{"gitId":"EuniceSim142"},"content":"        loginAsInstructor(googleId);"},{"lineNumber":92,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.getCourse(course.getId())).thenReturn(course);"},{"lineNumber":93,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.getInstructorByGoogleId(course.getId(), googleId)).thenReturn(instructorOfAnotherCourse);"},{"lineNumber":94,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":95,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":96,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),"},{"lineNumber":97,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":98,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":99,"author":{"gitId":"EuniceSim142"},"content":"        verifyCannotAccess(params);"},{"lineNumber":100,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":101,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":102,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":103,"author":{"gitId":"EuniceSim142"},"content":"    void testSpecificAccessControl_invalidInstructor_cannotAccess() {"},{"lineNumber":104,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d new Course(\"course-id\", \"name\", Const.DEFAULT_TIME_ZONE, \"institute\");"},{"lineNumber":105,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":106,"author":{"gitId":"EuniceSim142"},"content":"        loginAsInstructor(googleId);"},{"lineNumber":107,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.getCourse(course.getId())).thenReturn(course);"},{"lineNumber":108,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.getInstructorByGoogleId(course.getId(), googleId)).thenReturn(null);"},{"lineNumber":109,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":110,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":111,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),"},{"lineNumber":112,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":113,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":114,"author":{"gitId":"EuniceSim142"},"content":"        verifyCannotAccess(params);"},{"lineNumber":115,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":116,"author":{"gitId":"EuniceSim142"},"content":"}"}],"authorContributionMap":{"EuniceSim142":116}},{"path":"src/test/java/teammates/sqlui/webapi/GetFeedbackQuestionsActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"cedricongjh"},"content":"package teammates.sqlui.webapi;"},{"lineNumber":2,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":3,"author":{"gitId":"cedricongjh"},"content":"import static org.mockito.Mockito.when;"},{"lineNumber":4,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":5,"author":{"gitId":"cedricongjh"},"content":"import java.time.Duration;"},{"lineNumber":6,"author":{"gitId":"cedricongjh"},"content":"import java.time.Instant;"},{"lineNumber":7,"author":{"gitId":"cedricongjh"},"content":"import java.util.List;"},{"lineNumber":8,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":9,"author":{"gitId":"cedricongjh"},"content":"import org.testng.annotations.BeforeMethod;"},{"lineNumber":10,"author":{"gitId":"cedricongjh"},"content":"import org.testng.annotations.Test;"},{"lineNumber":11,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":12,"author":{"gitId":"cedricongjh"},"content":"import teammates.common.datatransfer.FeedbackParticipantType;"},{"lineNumber":13,"author":{"gitId":"cedricongjh"},"content":"import teammates.common.datatransfer.questions.FeedbackTextQuestionDetails;"},{"lineNumber":14,"author":{"gitId":"cedricongjh"},"content":"import teammates.common.util.Const;"},{"lineNumber":15,"author":{"gitId":"cedricongjh"},"content":"import teammates.common.util.JsonUtils;"},{"lineNumber":16,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.Course;"},{"lineNumber":17,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.FeedbackQuestion;"},{"lineNumber":18,"author":{"gitId":"cedricongjh"},"content":"import teammates.storage.sqlentity.FeedbackSession;"},{"lineNumber":19,"author":{"gitId":"cedricongjh"},"content":"import teammates.ui.output.FeedbackQuestionsData;"},{"lineNumber":20,"author":{"gitId":"cedricongjh"},"content":"import teammates.ui.request.Intent;"},{"lineNumber":21,"author":{"gitId":"cedricongjh"},"content":"import teammates.ui.webapi.GetFeedbackQuestionsAction;"},{"lineNumber":22,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":23,"author":{"gitId":"cedricongjh"},"content":"/**"},{"lineNumber":24,"author":{"gitId":"cedricongjh"},"content":" * SUT: {@link GetFeedbackQuestionsAction}."},{"lineNumber":25,"author":{"gitId":"cedricongjh"},"content":" */"},{"lineNumber":26,"author":{"gitId":"cedricongjh"},"content":"public class GetFeedbackQuestionsActionTest extends BaseActionTest\u003cGetFeedbackQuestionsAction\u003e {"},{"lineNumber":27,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":28,"author":{"gitId":"cedricongjh"},"content":"    Course course;"},{"lineNumber":29,"author":{"gitId":"cedricongjh"},"content":"    FeedbackSession feedbackSession;"},{"lineNumber":30,"author":{"gitId":"cedricongjh"},"content":"    List\u003cFeedbackQuestion\u003e feedbackQuestions;"},{"lineNumber":31,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":32,"author":{"gitId":"cedricongjh"},"content":"    @Override"},{"lineNumber":33,"author":{"gitId":"cedricongjh"},"content":"    protected String getActionUri() {"},{"lineNumber":34,"author":{"gitId":"cedricongjh"},"content":"        return Const.ResourceURIs.QUESTIONS;"},{"lineNumber":35,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":36,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":37,"author":{"gitId":"cedricongjh"},"content":"    @Override"},{"lineNumber":38,"author":{"gitId":"cedricongjh"},"content":"    protected String getRequestMethod() {"},{"lineNumber":39,"author":{"gitId":"cedricongjh"},"content":"        return GET;"},{"lineNumber":40,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":41,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":42,"author":{"gitId":"cedricongjh"},"content":"    @BeforeMethod"},{"lineNumber":43,"author":{"gitId":"cedricongjh"},"content":"    void setUp() {"},{"lineNumber":44,"author":{"gitId":"cedricongjh"},"content":"        course \u003d new Course(\"course-id\", \"name\", Const.DEFAULT_TIME_ZONE, \"institute\");"},{"lineNumber":45,"author":{"gitId":"cedricongjh"},"content":"        feedbackSession \u003d generateSession1InCourse(course);"},{"lineNumber":46,"author":{"gitId":"cedricongjh"},"content":"        feedbackQuestions \u003d generateFeedbackQuestionsInSession(feedbackSession);"},{"lineNumber":47,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":48,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":49,"author":{"gitId":"cedricongjh"},"content":"    @Test"},{"lineNumber":50,"author":{"gitId":"cedricongjh"},"content":"    void testExecute_noParameters_throwsInvalidHttpParameterException() {"},{"lineNumber":51,"author":{"gitId":"cedricongjh"},"content":"        verifyHttpParameterFailure();"},{"lineNumber":52,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":53,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":54,"author":{"gitId":"cedricongjh"},"content":"    @Test"},{"lineNumber":55,"author":{"gitId":"cedricongjh"},"content":"    void testExecute_invalidCourseId_throwsInvalidHttpParameterException() {"},{"lineNumber":56,"author":{"gitId":"cedricongjh"},"content":"        String[] params \u003d {"},{"lineNumber":57,"author":{"gitId":"cedricongjh"},"content":"                Const.ParamsNames.COURSE_ID, null,"},{"lineNumber":58,"author":{"gitId":"cedricongjh"},"content":"                Const.ParamsNames.FEEDBACK_SESSION_NAME, feedbackSession.getName(),"},{"lineNumber":59,"author":{"gitId":"cedricongjh"},"content":"                Const.ParamsNames.INTENT, Intent.FULL_DETAIL.toString(),"},{"lineNumber":60,"author":{"gitId":"cedricongjh"},"content":"        };"},{"lineNumber":61,"author":{"gitId":"cedricongjh"},"content":"        verifyHttpParameterFailure(params);"},{"lineNumber":62,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":63,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":64,"author":{"gitId":"cedricongjh"},"content":"    @Test"},{"lineNumber":65,"author":{"gitId":"cedricongjh"},"content":"    void testExecute_invalidSessionName_throwsInvalidHttpParameterException() {"},{"lineNumber":66,"author":{"gitId":"cedricongjh"},"content":"        String[] params \u003d {"},{"lineNumber":67,"author":{"gitId":"cedricongjh"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),"},{"lineNumber":68,"author":{"gitId":"cedricongjh"},"content":"                Const.ParamsNames.FEEDBACK_SESSION_NAME, null,"},{"lineNumber":69,"author":{"gitId":"cedricongjh"},"content":"                Const.ParamsNames.INTENT, Intent.FULL_DETAIL.toString(),"},{"lineNumber":70,"author":{"gitId":"cedricongjh"},"content":"        };"},{"lineNumber":71,"author":{"gitId":"cedricongjh"},"content":"        verifyHttpParameterFailure(params);"},{"lineNumber":72,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":73,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":74,"author":{"gitId":"cedricongjh"},"content":"    @Test"},{"lineNumber":75,"author":{"gitId":"cedricongjh"},"content":"    void testExecute_success() {"},{"lineNumber":76,"author":{"gitId":"cedricongjh"},"content":"        when(mockLogic.getFeedbackSession(feedbackSession.getName(), course.getId())).thenReturn(feedbackSession);"},{"lineNumber":77,"author":{"gitId":"cedricongjh"},"content":"        when(mockLogic.getFeedbackQuestionsForSession(feedbackSession)).thenReturn(feedbackQuestions);"},{"lineNumber":78,"author":{"gitId":"cedricongjh"},"content":"        String[] params \u003d {"},{"lineNumber":79,"author":{"gitId":"cedricongjh"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),"},{"lineNumber":80,"author":{"gitId":"cedricongjh"},"content":"                Const.ParamsNames.FEEDBACK_SESSION_NAME, feedbackSession.getName(),"},{"lineNumber":81,"author":{"gitId":"cedricongjh"},"content":"                Const.ParamsNames.INTENT, Intent.FULL_DETAIL.toString(),"},{"lineNumber":82,"author":{"gitId":"cedricongjh"},"content":"        };"},{"lineNumber":83,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":84,"author":{"gitId":"cedricongjh"},"content":"        GetFeedbackQuestionsAction getFeedbackQuestionsAction \u003d getAction(params);"},{"lineNumber":85,"author":{"gitId":"cedricongjh"},"content":"        FeedbackQuestionsData actionOutput \u003d (FeedbackQuestionsData) getJsonResult(getFeedbackQuestionsAction).getOutput();"},{"lineNumber":86,"author":{"gitId":"cedricongjh"},"content":"        assertEquals(JsonUtils.toJson("},{"lineNumber":87,"author":{"gitId":"cedricongjh"},"content":"                                    FeedbackQuestionsData.makeFeedbackQuestionsData(feedbackQuestions)),"},{"lineNumber":88,"author":{"gitId":"cedricongjh"},"content":"                                    JsonUtils.toJson(actionOutput));"},{"lineNumber":89,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":90,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":91,"author":{"gitId":"cedricongjh"},"content":"    private FeedbackSession generateSession1InCourse(Course course) {"},{"lineNumber":92,"author":{"gitId":"cedricongjh"},"content":"        FeedbackSession fs \u003d new FeedbackSession(\"feedbacksession-1\", course,"},{"lineNumber":93,"author":{"gitId":"cedricongjh"},"content":"                \"instructor1@gmail.com\", \"generic instructions\","},{"lineNumber":94,"author":{"gitId":"cedricongjh"},"content":"                Instant.parse(\"2012-04-01T22:00:00Z\"), Instant.parse(\"2027-04-30T22:00:00Z\"),"},{"lineNumber":95,"author":{"gitId":"cedricongjh"},"content":"                Instant.parse(\"2012-03-28T22:00:00Z\"), Instant.parse(\"2027-05-01T22:00:00Z\"),"},{"lineNumber":96,"author":{"gitId":"cedricongjh"},"content":"                Duration.ofHours(10), true, true, true);"},{"lineNumber":97,"author":{"gitId":"cedricongjh"},"content":"        fs.setCreatedAt(Instant.parse(\"2023-01-01T00:00:00Z\"));"},{"lineNumber":98,"author":{"gitId":"cedricongjh"},"content":"        fs.setUpdatedAt(Instant.parse(\"2023-01-01T00:00:00Z\"));"},{"lineNumber":99,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":100,"author":{"gitId":"cedricongjh"},"content":"        return fs;"},{"lineNumber":101,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":102,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":103,"author":{"gitId":"cedricongjh"},"content":"    private List\u003cFeedbackQuestion\u003e generateFeedbackQuestionsInSession(FeedbackSession feedbackSession) {"},{"lineNumber":104,"author":{"gitId":"cedricongjh"},"content":"        List\u003cFeedbackParticipantType\u003e feedbackQuestionParticipantTypes \u003d"},{"lineNumber":105,"author":{"gitId":"cedricongjh"},"content":"                List.of(FeedbackParticipantType.INSTRUCTORS);"},{"lineNumber":106,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":107,"author":{"gitId":"cedricongjh"},"content":"        FeedbackTextQuestionDetails fq1Details \u003d"},{"lineNumber":108,"author":{"gitId":"cedricongjh"},"content":"                new FeedbackTextQuestionDetails(\"What is the best selling point of your product?\");"},{"lineNumber":109,"author":{"gitId":"cedricongjh"},"content":"        FeedbackQuestion fq1 \u003d FeedbackQuestion.makeQuestion("},{"lineNumber":110,"author":{"gitId":"cedricongjh"},"content":"                                    feedbackSession, 1, \"This is a text question.\","},{"lineNumber":111,"author":{"gitId":"cedricongjh"},"content":"                                    FeedbackParticipantType.STUDENTS, FeedbackParticipantType.SELF, 1,"},{"lineNumber":112,"author":{"gitId":"cedricongjh"},"content":"                                    feedbackQuestionParticipantTypes, feedbackQuestionParticipantTypes,"},{"lineNumber":113,"author":{"gitId":"cedricongjh"},"content":"                                    feedbackQuestionParticipantTypes, fq1Details);"},{"lineNumber":114,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":115,"author":{"gitId":"cedricongjh"},"content":"        FeedbackTextQuestionDetails fq2Details \u003d"},{"lineNumber":116,"author":{"gitId":"cedricongjh"},"content":"                new FeedbackTextQuestionDetails(\"Rate 1 other student\u0027s product\");"},{"lineNumber":117,"author":{"gitId":"cedricongjh"},"content":"        fq2Details.setRecommendedLength(0);"},{"lineNumber":118,"author":{"gitId":"cedricongjh"},"content":"        FeedbackQuestion fq2 \u003d FeedbackQuestion.makeQuestion("},{"lineNumber":119,"author":{"gitId":"cedricongjh"},"content":"                feedbackSession, 2, \"This is a text question.\","},{"lineNumber":120,"author":{"gitId":"cedricongjh"},"content":"                FeedbackParticipantType.STUDENTS, FeedbackParticipantType.STUDENTS_EXCLUDING_SELF, 1,"},{"lineNumber":121,"author":{"gitId":"cedricongjh"},"content":"                feedbackQuestionParticipantTypes, feedbackQuestionParticipantTypes, feedbackQuestionParticipantTypes,"},{"lineNumber":122,"author":{"gitId":"cedricongjh"},"content":"                fq2Details);"},{"lineNumber":123,"author":{"gitId":"cedricongjh"},"content":"        return List.of(fq1, fq2);"},{"lineNumber":124,"author":{"gitId":"cedricongjh"},"content":"    }"},{"lineNumber":125,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":126,"author":{"gitId":"cedricongjh"},"content":"}"}],"authorContributionMap":{"cedricongjh":126}},{"path":"src/test/java/teammates/sqlui/webapi/GetFeedbackSessionActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"kevin9foong"},"content":"package teammates.sqlui.webapi;"},{"lineNumber":2,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":3,"author":{"gitId":"kevin9foong"},"content":"import static org.mockito.Mockito.when;"},{"lineNumber":4,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":5,"author":{"gitId":"kevin9foong"},"content":"import java.time.Duration;"},{"lineNumber":6,"author":{"gitId":"kevin9foong"},"content":"import java.time.Instant;"},{"lineNumber":7,"author":{"gitId":"kevin9foong"},"content":"import java.util.ArrayList;"},{"lineNumber":8,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":9,"author":{"gitId":"kevin9foong"},"content":"import org.testng.annotations.BeforeMethod;"},{"lineNumber":10,"author":{"gitId":"kevin9foong"},"content":"import org.testng.annotations.Test;"},{"lineNumber":11,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":12,"author":{"gitId":"kevin9foong"},"content":"import teammates.common.util.Const;"},{"lineNumber":13,"author":{"gitId":"kevin9foong"},"content":"import teammates.common.util.TimeHelper;"},{"lineNumber":14,"author":{"gitId":"kevin9foong"},"content":"import teammates.storage.sqlentity.Account;"},{"lineNumber":15,"author":{"gitId":"kevin9foong"},"content":"import teammates.storage.sqlentity.Course;"},{"lineNumber":16,"author":{"gitId":"kevin9foong"},"content":"import teammates.storage.sqlentity.DeadlineExtension;"},{"lineNumber":17,"author":{"gitId":"kevin9foong"},"content":"import teammates.storage.sqlentity.FeedbackSession;"},{"lineNumber":18,"author":{"gitId":"kevin9foong"},"content":"import teammates.storage.sqlentity.Student;"},{"lineNumber":19,"author":{"gitId":"kevin9foong"},"content":"import teammates.ui.output.FeedbackSessionData;"},{"lineNumber":20,"author":{"gitId":"kevin9foong"},"content":"import teammates.ui.output.FeedbackSessionPublishStatus;"},{"lineNumber":21,"author":{"gitId":"kevin9foong"},"content":"import teammates.ui.output.FeedbackSessionSubmissionStatus;"},{"lineNumber":22,"author":{"gitId":"kevin9foong"},"content":"import teammates.ui.request.Intent;"},{"lineNumber":23,"author":{"gitId":"kevin9foong"},"content":"import teammates.ui.webapi.GetFeedbackSessionAction;"},{"lineNumber":24,"author":{"gitId":"kevin9foong"},"content":"import teammates.ui.webapi.JsonResult;"},{"lineNumber":25,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":26,"author":{"gitId":"kevin9foong"},"content":"/**"},{"lineNumber":27,"author":{"gitId":"kevin9foong"},"content":" * SUT: {@link GetFeedbackSessionAction}."},{"lineNumber":28,"author":{"gitId":"kevin9foong"},"content":" */"},{"lineNumber":29,"author":{"gitId":"kevin9foong"},"content":"public class GetFeedbackSessionActionTest extends BaseActionTest\u003cGetFeedbackSessionAction\u003e {"},{"lineNumber":30,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":31,"author":{"gitId":"kevin9foong"},"content":"    private Student student1;"},{"lineNumber":32,"author":{"gitId":"kevin9foong"},"content":"    private FeedbackSession feedbackSession1;"},{"lineNumber":33,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":34,"author":{"gitId":"kevin9foong"},"content":"    @Override"},{"lineNumber":35,"author":{"gitId":"kevin9foong"},"content":"    protected String getActionUri() {"},{"lineNumber":36,"author":{"gitId":"kevin9foong"},"content":"        return Const.ResourceURIs.SESSION;"},{"lineNumber":37,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":38,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":39,"author":{"gitId":"kevin9foong"},"content":"    @Override"},{"lineNumber":40,"author":{"gitId":"kevin9foong"},"content":"    protected String getRequestMethod() {"},{"lineNumber":41,"author":{"gitId":"kevin9foong"},"content":"        return GET;"},{"lineNumber":42,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":43,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":44,"author":{"gitId":"kevin9foong"},"content":"    @BeforeMethod"},{"lineNumber":45,"author":{"gitId":"kevin9foong"},"content":"    void setUp() {"},{"lineNumber":46,"author":{"gitId":"kevin9foong"},"content":"        Course course1 \u003d generateCourse1();"},{"lineNumber":47,"author":{"gitId":"kevin9foong"},"content":"        student1 \u003d generateStudent1InCourse(course1);"},{"lineNumber":48,"author":{"gitId":"kevin9foong"},"content":"        feedbackSession1 \u003d generateSession1InCourse(course1);"},{"lineNumber":49,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":50,"author":{"gitId":"kevin9foong"},"content":"        when(mockLogic.getFeedbackSession(feedbackSession1.getName(), course1.getId())).thenReturn(feedbackSession1);"},{"lineNumber":51,"author":{"gitId":"kevin9foong"},"content":"        when(mockLogic.getStudentByGoogleId(course1.getId(), student1.getAccount().getGoogleId())).thenReturn(student1);"},{"lineNumber":52,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":53,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":54,"author":{"gitId":"kevin9foong"},"content":"    @Test"},{"lineNumber":55,"author":{"gitId":"kevin9foong"},"content":"    protected void textExecute_studentSubmissionNoExtensionAndBeforeEndTime_statusOpen() {"},{"lineNumber":56,"author":{"gitId":"kevin9foong"},"content":"        loginAsStudent(student1.getAccount().getGoogleId());"},{"lineNumber":57,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":58,"author":{"gitId":"kevin9foong"},"content":"        String courseId \u003d feedbackSession1.getCourse().getId();"},{"lineNumber":59,"author":{"gitId":"kevin9foong"},"content":"        String feedbackSessionName \u003d feedbackSession1.getName();"},{"lineNumber":60,"author":{"gitId":"kevin9foong"},"content":"        String timeZone \u003d feedbackSession1.getCourse().getTimeZone();"},{"lineNumber":61,"author":{"gitId":"kevin9foong"},"content":"        String[] params \u003d new String[] {"},{"lineNumber":62,"author":{"gitId":"kevin9foong"},"content":"                Const.ParamsNames.COURSE_ID, courseId,"},{"lineNumber":63,"author":{"gitId":"kevin9foong"},"content":"                Const.ParamsNames.FEEDBACK_SESSION_NAME, feedbackSessionName,"},{"lineNumber":64,"author":{"gitId":"kevin9foong"},"content":"                Const.ParamsNames.INTENT, Intent.STUDENT_SUBMISSION.toString(),"},{"lineNumber":65,"author":{"gitId":"kevin9foong"},"content":"        };"},{"lineNumber":66,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":67,"author":{"gitId":"kevin9foong"},"content":"        ______TS(\"get submission by student with no extension; before end time\");"},{"lineNumber":68,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":69,"author":{"gitId":"kevin9foong"},"content":"        Instant newStartTime \u003d Instant.now();"},{"lineNumber":70,"author":{"gitId":"kevin9foong"},"content":"        Instant newEndTime \u003d newStartTime.plusSeconds(60 * 60);"},{"lineNumber":71,"author":{"gitId":"kevin9foong"},"content":"        Duration newGracePeriod \u003d Duration.ZERO;"},{"lineNumber":72,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":73,"author":{"gitId":"kevin9foong"},"content":"        feedbackSession1.setStartTime(newStartTime);"},{"lineNumber":74,"author":{"gitId":"kevin9foong"},"content":"        feedbackSession1.setEndTime(newEndTime);"},{"lineNumber":75,"author":{"gitId":"kevin9foong"},"content":"        feedbackSession1.setGracePeriod(newGracePeriod);"},{"lineNumber":76,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":77,"author":{"gitId":"kevin9foong"},"content":"        // mock no deadline extension"},{"lineNumber":78,"author":{"gitId":"kevin9foong"},"content":"        when(mockLogic.getDeadlineForUser(feedbackSession1, student1)).thenReturn(feedbackSession1.getEndTime());"},{"lineNumber":79,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":80,"author":{"gitId":"kevin9foong"},"content":"        GetFeedbackSessionAction a \u003d getAction(params);"},{"lineNumber":81,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":82,"author":{"gitId":"kevin9foong"},"content":"        JsonResult r \u003d getJsonResult(a);"},{"lineNumber":83,"author":{"gitId":"kevin9foong"},"content":"        FeedbackSessionData response \u003d (FeedbackSessionData) r.getOutput();"},{"lineNumber":84,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":85,"author":{"gitId":"kevin9foong"},"content":"        assertEquals(courseId, response.getCourseId());"},{"lineNumber":86,"author":{"gitId":"kevin9foong"},"content":"        assertEquals(feedbackSessionName, response.getFeedbackSessionName());"},{"lineNumber":87,"author":{"gitId":"kevin9foong"},"content":"        assertEquals(timeZone, response.getTimeZone());"},{"lineNumber":88,"author":{"gitId":"kevin9foong"},"content":"        assertEquals(feedbackSession1.getInstructions(), response.getInstructions());"},{"lineNumber":89,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":90,"author":{"gitId":"kevin9foong"},"content":"        assertEquals(TimeHelper.getMidnightAdjustedInstantBasedOnZone(feedbackSession1.getStartTime(),"},{"lineNumber":91,"author":{"gitId":"kevin9foong"},"content":"                        timeZone, true).toEpochMilli(),"},{"lineNumber":92,"author":{"gitId":"kevin9foong"},"content":"                response.getSubmissionStartTimestamp());"},{"lineNumber":93,"author":{"gitId":"kevin9foong"},"content":"        assertEquals(TimeHelper.getMidnightAdjustedInstantBasedOnZone(newEndTime, timeZone, true)"},{"lineNumber":94,"author":{"gitId":"kevin9foong"},"content":"                        .toEpochMilli(),"},{"lineNumber":95,"author":{"gitId":"kevin9foong"},"content":"                response.getSubmissionEndTimestamp());"},{"lineNumber":96,"author":{"gitId":"kevin9foong"},"content":"        assertEquals(TimeHelper.getMidnightAdjustedInstantBasedOnZone(newEndTime, timeZone, true)"},{"lineNumber":97,"author":{"gitId":"kevin9foong"},"content":"                        .toEpochMilli(),"},{"lineNumber":98,"author":{"gitId":"kevin9foong"},"content":"                response.getSubmissionEndWithExtensionTimestamp());"},{"lineNumber":99,"author":{"gitId":"kevin9foong"},"content":"        assertNull(response.getGracePeriod());"},{"lineNumber":100,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":101,"author":{"gitId":"kevin9foong"},"content":"        assertNull(response.getSessionVisibleSetting());"},{"lineNumber":102,"author":{"gitId":"kevin9foong"},"content":"        assertNull(response.getSessionVisibleFromTimestamp());"},{"lineNumber":103,"author":{"gitId":"kevin9foong"},"content":"        assertNull(response.getCustomSessionVisibleTimestamp());"},{"lineNumber":104,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":105,"author":{"gitId":"kevin9foong"},"content":"        assertNull(response.getResponseVisibleSetting());"},{"lineNumber":106,"author":{"gitId":"kevin9foong"},"content":"        assertNull(response.getResultVisibleFromTimestamp());"},{"lineNumber":107,"author":{"gitId":"kevin9foong"},"content":"        assertNull(response.getCustomResponseVisibleTimestamp());"},{"lineNumber":108,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":109,"author":{"gitId":"kevin9foong"},"content":"        assertEquals(FeedbackSessionSubmissionStatus.OPEN, response.getSubmissionStatus());"},{"lineNumber":110,"author":{"gitId":"kevin9foong"},"content":"        assertEquals(FeedbackSessionPublishStatus.NOT_PUBLISHED, response.getPublishStatus());"},{"lineNumber":111,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":112,"author":{"gitId":"kevin9foong"},"content":"        assertNull(response.getIsClosingEmailEnabled());"},{"lineNumber":113,"author":{"gitId":"kevin9foong"},"content":"        assertNull(response.getIsPublishedEmailEnabled());"},{"lineNumber":114,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":115,"author":{"gitId":"kevin9foong"},"content":"        assertEquals(0, response.getCreatedAtTimestamp());"},{"lineNumber":116,"author":{"gitId":"kevin9foong"},"content":"        assertNull(response.getDeletedAtTimestamp());"},{"lineNumber":117,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":118,"author":{"gitId":"kevin9foong"},"content":"        assertTrue(response.getStudentDeadlines().isEmpty());"},{"lineNumber":119,"author":{"gitId":"kevin9foong"},"content":"        assertTrue(response.getInstructorDeadlines().isEmpty());"},{"lineNumber":120,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":121,"author":{"gitId":"kevin9foong"},"content":"        logoutUser();"},{"lineNumber":122,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":123,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":124,"author":{"gitId":"kevin9foong"},"content":"    @Test"},{"lineNumber":125,"author":{"gitId":"kevin9foong"},"content":"    protected void textExecute_studentSubmissionNoExtensionAfterEndTimeWithinGracePeriod_statusGracePeriod() {"},{"lineNumber":126,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":127,"author":{"gitId":"kevin9foong"},"content":"        loginAsStudent(student1.getAccount().getGoogleId());"},{"lineNumber":128,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":129,"author":{"gitId":"kevin9foong"},"content":"        String courseId \u003d feedbackSession1.getCourse().getId();"},{"lineNumber":130,"author":{"gitId":"kevin9foong"},"content":"        String feedbackSessionName \u003d feedbackSession1.getName();"},{"lineNumber":131,"author":{"gitId":"kevin9foong"},"content":"        String timeZone \u003d feedbackSession1.getCourse().getTimeZone();"},{"lineNumber":132,"author":{"gitId":"kevin9foong"},"content":"        String[] params \u003d new String[] {"},{"lineNumber":133,"author":{"gitId":"kevin9foong"},"content":"                Const.ParamsNames.COURSE_ID, courseId,"},{"lineNumber":134,"author":{"gitId":"kevin9foong"},"content":"                Const.ParamsNames.FEEDBACK_SESSION_NAME, feedbackSessionName,"},{"lineNumber":135,"author":{"gitId":"kevin9foong"},"content":"                Const.ParamsNames.INTENT, Intent.STUDENT_SUBMISSION.toString(),"},{"lineNumber":136,"author":{"gitId":"kevin9foong"},"content":"        };"},{"lineNumber":137,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":138,"author":{"gitId":"kevin9foong"},"content":"        ______TS(\"get submission by student with no extension; after end time but within grace period\");"},{"lineNumber":139,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":140,"author":{"gitId":"kevin9foong"},"content":"        Instant newStartTime \u003d Instant.now().plusSeconds(-120);"},{"lineNumber":141,"author":{"gitId":"kevin9foong"},"content":"        Instant newEndTime \u003d newStartTime.plusSeconds(60);"},{"lineNumber":142,"author":{"gitId":"kevin9foong"},"content":"        Duration newGracePeriod \u003d Duration.ofDays(2);"},{"lineNumber":143,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":144,"author":{"gitId":"kevin9foong"},"content":"        feedbackSession1.setStartTime(newStartTime);"},{"lineNumber":145,"author":{"gitId":"kevin9foong"},"content":"        feedbackSession1.setEndTime(newEndTime);"},{"lineNumber":146,"author":{"gitId":"kevin9foong"},"content":"        feedbackSession1.setGracePeriod(newGracePeriod);"},{"lineNumber":147,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":148,"author":{"gitId":"kevin9foong"},"content":"        // mock no deadline extension"},{"lineNumber":149,"author":{"gitId":"kevin9foong"},"content":"        when(mockLogic.getDeadlineForUser(feedbackSession1, student1)).thenReturn(feedbackSession1.getEndTime());"},{"lineNumber":150,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":151,"author":{"gitId":"kevin9foong"},"content":"        GetFeedbackSessionAction a \u003d getAction(params);"},{"lineNumber":152,"author":{"gitId":"kevin9foong"},"content":"        JsonResult r \u003d getJsonResult(a);"},{"lineNumber":153,"author":{"gitId":"kevin9foong"},"content":"        FeedbackSessionData response \u003d (FeedbackSessionData) r.getOutput();"},{"lineNumber":154,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":155,"author":{"gitId":"kevin9foong"},"content":"        assertEquals(FeedbackSessionSubmissionStatus.GRACE_PERIOD, response.getSubmissionStatus());"},{"lineNumber":156,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":157,"author":{"gitId":"kevin9foong"},"content":"        assertTrue(response.getStudentDeadlines().isEmpty());"},{"lineNumber":158,"author":{"gitId":"kevin9foong"},"content":"        assertTrue(response.getInstructorDeadlines().isEmpty());"},{"lineNumber":159,"author":{"gitId":"kevin9foong"},"content":"        assertEquals(TimeHelper.getMidnightAdjustedInstantBasedOnZone(newEndTime, timeZone, true)"},{"lineNumber":160,"author":{"gitId":"kevin9foong"},"content":"                        .toEpochMilli(),"},{"lineNumber":161,"author":{"gitId":"kevin9foong"},"content":"                response.getSubmissionEndWithExtensionTimestamp());"},{"lineNumber":162,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":163,"author":{"gitId":"kevin9foong"},"content":"        logoutUser();"},{"lineNumber":164,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":165,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":166,"author":{"gitId":"kevin9foong"},"content":"    @Test"},{"lineNumber":167,"author":{"gitId":"kevin9foong"},"content":"    protected void textExecute_studentSubmissionNoExtensionAfterEndTimeBeyondGracePeriod_statusClosed() {"},{"lineNumber":168,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":169,"author":{"gitId":"kevin9foong"},"content":"        loginAsStudent(student1.getAccount().getGoogleId());"},{"lineNumber":170,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":171,"author":{"gitId":"kevin9foong"},"content":"        String courseId \u003d feedbackSession1.getCourse().getId();"},{"lineNumber":172,"author":{"gitId":"kevin9foong"},"content":"        String feedbackSessionName \u003d feedbackSession1.getName();"},{"lineNumber":173,"author":{"gitId":"kevin9foong"},"content":"        String timeZone \u003d feedbackSession1.getCourse().getTimeZone();"},{"lineNumber":174,"author":{"gitId":"kevin9foong"},"content":"        String[] params \u003d new String[] {"},{"lineNumber":175,"author":{"gitId":"kevin9foong"},"content":"                Const.ParamsNames.COURSE_ID, courseId,"},{"lineNumber":176,"author":{"gitId":"kevin9foong"},"content":"                Const.ParamsNames.FEEDBACK_SESSION_NAME, feedbackSessionName,"},{"lineNumber":177,"author":{"gitId":"kevin9foong"},"content":"                Const.ParamsNames.INTENT, Intent.STUDENT_SUBMISSION.toString(),"},{"lineNumber":178,"author":{"gitId":"kevin9foong"},"content":"        };"},{"lineNumber":179,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":180,"author":{"gitId":"kevin9foong"},"content":"        ______TS(\"get submission by student with no extension; after end time and beyond grace period\");"},{"lineNumber":181,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":182,"author":{"gitId":"kevin9foong"},"content":"        Instant newStartTime \u003d Instant.now().plusSeconds(-60);"},{"lineNumber":183,"author":{"gitId":"kevin9foong"},"content":"        Instant newEndTime \u003d newStartTime.plusSeconds(20);"},{"lineNumber":184,"author":{"gitId":"kevin9foong"},"content":"        Duration newGracePeriod \u003d Duration.ofSeconds(10);"},{"lineNumber":185,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":186,"author":{"gitId":"kevin9foong"},"content":"        feedbackSession1.setStartTime(newStartTime);"},{"lineNumber":187,"author":{"gitId":"kevin9foong"},"content":"        feedbackSession1.setEndTime(newEndTime);"},{"lineNumber":188,"author":{"gitId":"kevin9foong"},"content":"        feedbackSession1.setGracePeriod(newGracePeriod);"},{"lineNumber":189,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":190,"author":{"gitId":"kevin9foong"},"content":"        // mock no deadline extension"},{"lineNumber":191,"author":{"gitId":"kevin9foong"},"content":"        when(mockLogic.getDeadlineForUser(feedbackSession1, student1)).thenReturn(feedbackSession1.getEndTime());"},{"lineNumber":192,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":193,"author":{"gitId":"kevin9foong"},"content":"        GetFeedbackSessionAction a \u003d getAction(params);"},{"lineNumber":194,"author":{"gitId":"kevin9foong"},"content":"        JsonResult r \u003d getJsonResult(a);"},{"lineNumber":195,"author":{"gitId":"kevin9foong"},"content":"        FeedbackSessionData response \u003d (FeedbackSessionData) r.getOutput();"},{"lineNumber":196,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":197,"author":{"gitId":"kevin9foong"},"content":"        assertEquals(FeedbackSessionSubmissionStatus.CLOSED, response.getSubmissionStatus());"},{"lineNumber":198,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":199,"author":{"gitId":"kevin9foong"},"content":"        assertTrue(response.getStudentDeadlines().isEmpty());"},{"lineNumber":200,"author":{"gitId":"kevin9foong"},"content":"        assertTrue(response.getInstructorDeadlines().isEmpty());"},{"lineNumber":201,"author":{"gitId":"kevin9foong"},"content":"        assertEquals(TimeHelper.getMidnightAdjustedInstantBasedOnZone(newEndTime, timeZone, true)"},{"lineNumber":202,"author":{"gitId":"kevin9foong"},"content":"                        .toEpochMilli(),"},{"lineNumber":203,"author":{"gitId":"kevin9foong"},"content":"                response.getSubmissionEndWithExtensionTimestamp());"},{"lineNumber":204,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":205,"author":{"gitId":"kevin9foong"},"content":"        logoutUser();"},{"lineNumber":206,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":207,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":208,"author":{"gitId":"kevin9foong"},"content":"    @Test"},{"lineNumber":209,"author":{"gitId":"kevin9foong"},"content":"    protected void textExecute_studentSubmissionWithExtensionBeforeEndTime_statusOpen() {"},{"lineNumber":210,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":211,"author":{"gitId":"kevin9foong"},"content":"        loginAsStudent(student1.getAccount().getGoogleId());"},{"lineNumber":212,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":213,"author":{"gitId":"kevin9foong"},"content":"        String courseId \u003d feedbackSession1.getCourse().getId();"},{"lineNumber":214,"author":{"gitId":"kevin9foong"},"content":"        String feedbackSessionName \u003d feedbackSession1.getName();"},{"lineNumber":215,"author":{"gitId":"kevin9foong"},"content":"        String timeZone \u003d feedbackSession1.getCourse().getTimeZone();"},{"lineNumber":216,"author":{"gitId":"kevin9foong"},"content":"        String[] params \u003d new String[] {"},{"lineNumber":217,"author":{"gitId":"kevin9foong"},"content":"                Const.ParamsNames.COURSE_ID, courseId,"},{"lineNumber":218,"author":{"gitId":"kevin9foong"},"content":"                Const.ParamsNames.FEEDBACK_SESSION_NAME, feedbackSessionName,"},{"lineNumber":219,"author":{"gitId":"kevin9foong"},"content":"                Const.ParamsNames.INTENT, Intent.STUDENT_SUBMISSION.toString(),"},{"lineNumber":220,"author":{"gitId":"kevin9foong"},"content":"        };"},{"lineNumber":221,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":222,"author":{"gitId":"kevin9foong"},"content":"        ______TS(\"get submission by student with extension; before end time\");"},{"lineNumber":223,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":224,"author":{"gitId":"kevin9foong"},"content":"        Instant newStartTime \u003d Instant.now();"},{"lineNumber":225,"author":{"gitId":"kevin9foong"},"content":"        Instant newEndTime \u003d newStartTime.plusSeconds(60 * 60);"},{"lineNumber":226,"author":{"gitId":"kevin9foong"},"content":"        Duration newGracePeriod \u003d Duration.ZERO;"},{"lineNumber":227,"author":{"gitId":"kevin9foong"},"content":"        Instant extendedEndTime \u003d newStartTime.plusSeconds(60 * 60 * 21);"},{"lineNumber":228,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":229,"author":{"gitId":"kevin9foong"},"content":"        feedbackSession1.setStartTime(newStartTime);"},{"lineNumber":230,"author":{"gitId":"kevin9foong"},"content":"        feedbackSession1.setEndTime(newEndTime);"},{"lineNumber":231,"author":{"gitId":"kevin9foong"},"content":"        feedbackSession1.setGracePeriod(newGracePeriod);"},{"lineNumber":232,"author":{"gitId":"kevin9foong"},"content":"        feedbackSession1.setDeadlineExtensions(new ArrayList\u003c\u003e());"},{"lineNumber":233,"author":{"gitId":"kevin9foong"},"content":"        feedbackSession1.getDeadlineExtensions().add(new DeadlineExtension(student1, feedbackSession1, extendedEndTime));"},{"lineNumber":234,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":235,"author":{"gitId":"kevin9foong"},"content":"        // mock deadline extension exists for student1"},{"lineNumber":236,"author":{"gitId":"kevin9foong"},"content":"        when(mockLogic.getDeadlineForUser(feedbackSession1, student1)).thenReturn(extendedEndTime);"},{"lineNumber":237,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":238,"author":{"gitId":"kevin9foong"},"content":"        GetFeedbackSessionAction a \u003d getAction(params);"},{"lineNumber":239,"author":{"gitId":"kevin9foong"},"content":"        JsonResult r \u003d getJsonResult(a);"},{"lineNumber":240,"author":{"gitId":"kevin9foong"},"content":"        FeedbackSessionData response \u003d (FeedbackSessionData) r.getOutput();"},{"lineNumber":241,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":242,"author":{"gitId":"kevin9foong"},"content":"        assertEquals(FeedbackSessionSubmissionStatus.OPEN, response.getSubmissionStatus());"},{"lineNumber":243,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":244,"author":{"gitId":"kevin9foong"},"content":"        assertTrue(response.getStudentDeadlines().containsKey(student1.getEmail()));"},{"lineNumber":245,"author":{"gitId":"kevin9foong"},"content":"        assertEquals(1, response.getStudentDeadlines().size());"},{"lineNumber":246,"author":{"gitId":"kevin9foong"},"content":"        assertTrue(response.getInstructorDeadlines().isEmpty());"},{"lineNumber":247,"author":{"gitId":"kevin9foong"},"content":"        assertEquals(TimeHelper.getMidnightAdjustedInstantBasedOnZone(extendedEndTime, timeZone, true)"},{"lineNumber":248,"author":{"gitId":"kevin9foong"},"content":"                        .toEpochMilli(),"},{"lineNumber":249,"author":{"gitId":"kevin9foong"},"content":"                response.getSubmissionEndWithExtensionTimestamp());"},{"lineNumber":250,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":251,"author":{"gitId":"kevin9foong"},"content":"        logoutUser();"},{"lineNumber":252,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":253,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":254,"author":{"gitId":"kevin9foong"},"content":"    @Test"},{"lineNumber":255,"author":{"gitId":"kevin9foong"},"content":"    protected void textExecute_studentSubmissionWithExtensionAfterEndTimeBeforeExtendedDeadline_statusOpen() {"},{"lineNumber":256,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":257,"author":{"gitId":"kevin9foong"},"content":"        loginAsStudent(student1.getAccount().getGoogleId());"},{"lineNumber":258,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":259,"author":{"gitId":"kevin9foong"},"content":"        String courseId \u003d feedbackSession1.getCourse().getId();"},{"lineNumber":260,"author":{"gitId":"kevin9foong"},"content":"        String feedbackSessionName \u003d feedbackSession1.getName();"},{"lineNumber":261,"author":{"gitId":"kevin9foong"},"content":"        String timeZone \u003d feedbackSession1.getCourse().getTimeZone();"},{"lineNumber":262,"author":{"gitId":"kevin9foong"},"content":"        String[] params \u003d new String[] {"},{"lineNumber":263,"author":{"gitId":"kevin9foong"},"content":"                Const.ParamsNames.COURSE_ID, courseId,"},{"lineNumber":264,"author":{"gitId":"kevin9foong"},"content":"                Const.ParamsNames.FEEDBACK_SESSION_NAME, feedbackSessionName,"},{"lineNumber":265,"author":{"gitId":"kevin9foong"},"content":"                Const.ParamsNames.INTENT, Intent.STUDENT_SUBMISSION.toString(),"},{"lineNumber":266,"author":{"gitId":"kevin9foong"},"content":"        };"},{"lineNumber":267,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":268,"author":{"gitId":"kevin9foong"},"content":"        ______TS(\"get submission by student with extension; after end time but before extended deadline\");"},{"lineNumber":269,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":270,"author":{"gitId":"kevin9foong"},"content":"        Instant newStartTime \u003d Instant.now().plusSeconds(-60);"},{"lineNumber":271,"author":{"gitId":"kevin9foong"},"content":"        Instant newEndTime \u003d newStartTime.plusSeconds(20);"},{"lineNumber":272,"author":{"gitId":"kevin9foong"},"content":"        Duration newGracePeriod \u003d Duration.ZERO;"},{"lineNumber":273,"author":{"gitId":"kevin9foong"},"content":"        Instant extendedEndTime \u003d Instant.now().plusSeconds(60 * 60);"},{"lineNumber":274,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":275,"author":{"gitId":"kevin9foong"},"content":"        feedbackSession1.setStartTime(newStartTime);"},{"lineNumber":276,"author":{"gitId":"kevin9foong"},"content":"        feedbackSession1.setEndTime(newEndTime);"},{"lineNumber":277,"author":{"gitId":"kevin9foong"},"content":"        feedbackSession1.setGracePeriod(newGracePeriod);"},{"lineNumber":278,"author":{"gitId":"kevin9foong"},"content":"        feedbackSession1.setDeadlineExtensions(new ArrayList\u003c\u003e());"},{"lineNumber":279,"author":{"gitId":"kevin9foong"},"content":"        feedbackSession1.getDeadlineExtensions().add(new DeadlineExtension(student1, feedbackSession1, extendedEndTime));"},{"lineNumber":280,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":281,"author":{"gitId":"kevin9foong"},"content":"        // mock deadline extension exists for student1"},{"lineNumber":282,"author":{"gitId":"kevin9foong"},"content":"        when(mockLogic.getDeadlineForUser(feedbackSession1, student1)).thenReturn(extendedEndTime);"},{"lineNumber":283,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":284,"author":{"gitId":"kevin9foong"},"content":"        GetFeedbackSessionAction a \u003d getAction(params);"},{"lineNumber":285,"author":{"gitId":"kevin9foong"},"content":"        JsonResult r \u003d getJsonResult(a);"},{"lineNumber":286,"author":{"gitId":"kevin9foong"},"content":"        FeedbackSessionData response \u003d (FeedbackSessionData) r.getOutput();"},{"lineNumber":287,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":288,"author":{"gitId":"kevin9foong"},"content":"        assertEquals(FeedbackSessionSubmissionStatus.OPEN, response.getSubmissionStatus());"},{"lineNumber":289,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":290,"author":{"gitId":"kevin9foong"},"content":"        assertTrue(response.getStudentDeadlines().containsKey(student1.getEmail()));"},{"lineNumber":291,"author":{"gitId":"kevin9foong"},"content":"        assertEquals(1, response.getStudentDeadlines().size());"},{"lineNumber":292,"author":{"gitId":"kevin9foong"},"content":"        assertTrue(response.getInstructorDeadlines().isEmpty());"},{"lineNumber":293,"author":{"gitId":"kevin9foong"},"content":"        assertEquals(TimeHelper.getMidnightAdjustedInstantBasedOnZone(extendedEndTime, timeZone, true)"},{"lineNumber":294,"author":{"gitId":"kevin9foong"},"content":"                        .toEpochMilli(),"},{"lineNumber":295,"author":{"gitId":"kevin9foong"},"content":"                response.getSubmissionEndWithExtensionTimestamp());"},{"lineNumber":296,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":297,"author":{"gitId":"kevin9foong"},"content":"        logoutUser();"},{"lineNumber":298,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":299,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":300,"author":{"gitId":"kevin9foong"},"content":"    @Test"},{"lineNumber":301,"author":{"gitId":"kevin9foong"},"content":"    protected void textExecute_studentSubmissionWithExtensionAfterExtendedDeadlineWithinGracePeriod_statusGracePeriod() {"},{"lineNumber":302,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":303,"author":{"gitId":"kevin9foong"},"content":"        loginAsStudent(student1.getAccount().getGoogleId());"},{"lineNumber":304,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":305,"author":{"gitId":"kevin9foong"},"content":"        String courseId \u003d feedbackSession1.getCourse().getId();"},{"lineNumber":306,"author":{"gitId":"kevin9foong"},"content":"        String feedbackSessionName \u003d feedbackSession1.getName();"},{"lineNumber":307,"author":{"gitId":"kevin9foong"},"content":"        String timeZone \u003d feedbackSession1.getCourse().getTimeZone();"},{"lineNumber":308,"author":{"gitId":"kevin9foong"},"content":"        String[] params \u003d new String[] {"},{"lineNumber":309,"author":{"gitId":"kevin9foong"},"content":"                Const.ParamsNames.COURSE_ID, courseId,"},{"lineNumber":310,"author":{"gitId":"kevin9foong"},"content":"                Const.ParamsNames.FEEDBACK_SESSION_NAME, feedbackSessionName,"},{"lineNumber":311,"author":{"gitId":"kevin9foong"},"content":"                Const.ParamsNames.INTENT, Intent.STUDENT_SUBMISSION.toString(),"},{"lineNumber":312,"author":{"gitId":"kevin9foong"},"content":"        };"},{"lineNumber":313,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":314,"author":{"gitId":"kevin9foong"},"content":"        ______TS(\"get submission by student with extension; after extended deadline but within grace period\");"},{"lineNumber":315,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":316,"author":{"gitId":"kevin9foong"},"content":"        Instant newStartTime \u003d Instant.now().plusSeconds(-120);"},{"lineNumber":317,"author":{"gitId":"kevin9foong"},"content":"        Instant newEndTime \u003d newStartTime.plusSeconds(20);"},{"lineNumber":318,"author":{"gitId":"kevin9foong"},"content":"        Instant extendedEndTime \u003d newEndTime.plusSeconds(20);"},{"lineNumber":319,"author":{"gitId":"kevin9foong"},"content":"        Duration newGracePeriod \u003d Duration.ofDays(1);"},{"lineNumber":320,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":321,"author":{"gitId":"kevin9foong"},"content":"        feedbackSession1.setStartTime(newStartTime);"},{"lineNumber":322,"author":{"gitId":"kevin9foong"},"content":"        feedbackSession1.setEndTime(newEndTime);"},{"lineNumber":323,"author":{"gitId":"kevin9foong"},"content":"        feedbackSession1.setGracePeriod(newGracePeriod);"},{"lineNumber":324,"author":{"gitId":"kevin9foong"},"content":"        feedbackSession1.setDeadlineExtensions(new ArrayList\u003c\u003e());"},{"lineNumber":325,"author":{"gitId":"kevin9foong"},"content":"        feedbackSession1.getDeadlineExtensions().add(new DeadlineExtension(student1, feedbackSession1, extendedEndTime));"},{"lineNumber":326,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":327,"author":{"gitId":"kevin9foong"},"content":"        // mock deadline extension exists for student1"},{"lineNumber":328,"author":{"gitId":"kevin9foong"},"content":"        when(mockLogic.getDeadlineForUser(feedbackSession1, student1)).thenReturn(extendedEndTime);"},{"lineNumber":329,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":330,"author":{"gitId":"kevin9foong"},"content":"        GetFeedbackSessionAction a \u003d getAction(params);"},{"lineNumber":331,"author":{"gitId":"kevin9foong"},"content":"        JsonResult r \u003d getJsonResult(a);"},{"lineNumber":332,"author":{"gitId":"kevin9foong"},"content":"        FeedbackSessionData response \u003d (FeedbackSessionData) r.getOutput();"},{"lineNumber":333,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":334,"author":{"gitId":"kevin9foong"},"content":"        assertEquals(FeedbackSessionSubmissionStatus.GRACE_PERIOD, response.getSubmissionStatus());"},{"lineNumber":335,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":336,"author":{"gitId":"kevin9foong"},"content":"        assertTrue(response.getStudentDeadlines().containsKey(student1.getEmail()));"},{"lineNumber":337,"author":{"gitId":"kevin9foong"},"content":"        assertEquals(1, response.getStudentDeadlines().size());"},{"lineNumber":338,"author":{"gitId":"kevin9foong"},"content":"        assertTrue(response.getInstructorDeadlines().isEmpty());"},{"lineNumber":339,"author":{"gitId":"kevin9foong"},"content":"        assertEquals(TimeHelper.getMidnightAdjustedInstantBasedOnZone(extendedEndTime, timeZone, true)"},{"lineNumber":340,"author":{"gitId":"kevin9foong"},"content":"                        .toEpochMilli(),"},{"lineNumber":341,"author":{"gitId":"kevin9foong"},"content":"                response.getSubmissionEndWithExtensionTimestamp());"},{"lineNumber":342,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":343,"author":{"gitId":"kevin9foong"},"content":"        logoutUser();"},{"lineNumber":344,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":345,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":346,"author":{"gitId":"kevin9foong"},"content":"    @Test"},{"lineNumber":347,"author":{"gitId":"kevin9foong"},"content":"    protected void textExecute_studentSubmissionWithExtensionAfterExtendedDeadlineBeyondGracePeriod_statusClosed() {"},{"lineNumber":348,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":349,"author":{"gitId":"kevin9foong"},"content":"        loginAsStudent(student1.getAccount().getGoogleId());"},{"lineNumber":350,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":351,"author":{"gitId":"kevin9foong"},"content":"        String courseId \u003d feedbackSession1.getCourse().getId();"},{"lineNumber":352,"author":{"gitId":"kevin9foong"},"content":"        String feedbackSessionName \u003d feedbackSession1.getName();"},{"lineNumber":353,"author":{"gitId":"kevin9foong"},"content":"        String timeZone \u003d feedbackSession1.getCourse().getTimeZone();"},{"lineNumber":354,"author":{"gitId":"kevin9foong"},"content":"        String[] params \u003d new String[] {"},{"lineNumber":355,"author":{"gitId":"kevin9foong"},"content":"                Const.ParamsNames.COURSE_ID, courseId,"},{"lineNumber":356,"author":{"gitId":"kevin9foong"},"content":"                Const.ParamsNames.FEEDBACK_SESSION_NAME, feedbackSessionName,"},{"lineNumber":357,"author":{"gitId":"kevin9foong"},"content":"                Const.ParamsNames.INTENT, Intent.STUDENT_SUBMISSION.toString(),"},{"lineNumber":358,"author":{"gitId":"kevin9foong"},"content":"        };"},{"lineNumber":359,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":360,"author":{"gitId":"kevin9foong"},"content":"        ______TS(\"get submission by student with extension; after extended deadline and beyond grace period\");"},{"lineNumber":361,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":362,"author":{"gitId":"kevin9foong"},"content":"        Instant newStartTime \u003d Instant.now().plusSeconds(-60 * 60 * 24);"},{"lineNumber":363,"author":{"gitId":"kevin9foong"},"content":"        Instant newEndTime \u003d newStartTime.plusSeconds(10);"},{"lineNumber":364,"author":{"gitId":"kevin9foong"},"content":"        Instant extendedEndTime \u003d newEndTime.plusSeconds(10);"},{"lineNumber":365,"author":{"gitId":"kevin9foong"},"content":"        Duration newGracePeriod \u003d Duration.ofSeconds(10);"},{"lineNumber":366,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":367,"author":{"gitId":"kevin9foong"},"content":"        feedbackSession1.setStartTime(newStartTime);"},{"lineNumber":368,"author":{"gitId":"kevin9foong"},"content":"        feedbackSession1.setEndTime(newEndTime);"},{"lineNumber":369,"author":{"gitId":"kevin9foong"},"content":"        feedbackSession1.setGracePeriod(newGracePeriod);"},{"lineNumber":370,"author":{"gitId":"kevin9foong"},"content":"        feedbackSession1.setDeadlineExtensions(new ArrayList\u003c\u003e());"},{"lineNumber":371,"author":{"gitId":"kevin9foong"},"content":"        feedbackSession1.getDeadlineExtensions().add(new DeadlineExtension(student1, feedbackSession1, extendedEndTime));"},{"lineNumber":372,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":373,"author":{"gitId":"kevin9foong"},"content":"        // mock deadline extension exists for student1"},{"lineNumber":374,"author":{"gitId":"kevin9foong"},"content":"        when(mockLogic.getDeadlineForUser(feedbackSession1, student1)).thenReturn(extendedEndTime);"},{"lineNumber":375,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":376,"author":{"gitId":"kevin9foong"},"content":"        GetFeedbackSessionAction a \u003d getAction(params);"},{"lineNumber":377,"author":{"gitId":"kevin9foong"},"content":"        JsonResult r \u003d getJsonResult(a);"},{"lineNumber":378,"author":{"gitId":"kevin9foong"},"content":"        FeedbackSessionData response \u003d (FeedbackSessionData) r.getOutput();"},{"lineNumber":379,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":380,"author":{"gitId":"kevin9foong"},"content":"        assertEquals(FeedbackSessionSubmissionStatus.CLOSED, response.getSubmissionStatus());"},{"lineNumber":381,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":382,"author":{"gitId":"kevin9foong"},"content":"        assertTrue(response.getStudentDeadlines().containsKey(student1.getEmail()));"},{"lineNumber":383,"author":{"gitId":"kevin9foong"},"content":"        assertEquals(1, response.getStudentDeadlines().size());"},{"lineNumber":384,"author":{"gitId":"kevin9foong"},"content":"        assertTrue(response.getInstructorDeadlines().isEmpty());"},{"lineNumber":385,"author":{"gitId":"kevin9foong"},"content":"        assertEquals(TimeHelper.getMidnightAdjustedInstantBasedOnZone(extendedEndTime, timeZone, true)"},{"lineNumber":386,"author":{"gitId":"kevin9foong"},"content":"                        .toEpochMilli(),"},{"lineNumber":387,"author":{"gitId":"kevin9foong"},"content":"                response.getSubmissionEndWithExtensionTimestamp());"},{"lineNumber":388,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":389,"author":{"gitId":"kevin9foong"},"content":"        logoutUser();"},{"lineNumber":390,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":391,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":392,"author":{"gitId":"kevin9foong"},"content":"    private Course generateCourse1() {"},{"lineNumber":393,"author":{"gitId":"kevin9foong"},"content":"        Course c \u003d new Course(\"course-1\", \"Typical Course 1\","},{"lineNumber":394,"author":{"gitId":"kevin9foong"},"content":"                \"Africa/Johannesburg\", \"TEAMMATES Test Institute 0\");"},{"lineNumber":395,"author":{"gitId":"kevin9foong"},"content":"        c.setCreatedAt(Instant.parse(\"2023-01-01T00:00:00Z\"));"},{"lineNumber":396,"author":{"gitId":"kevin9foong"},"content":"        c.setUpdatedAt(Instant.parse(\"2023-01-01T00:00:00Z\"));"},{"lineNumber":397,"author":{"gitId":"kevin9foong"},"content":"        return c;"},{"lineNumber":398,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":399,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":400,"author":{"gitId":"kevin9foong"},"content":"    private Student generateStudent1InCourse(Course courseStudentIsIn) {"},{"lineNumber":401,"author":{"gitId":"kevin9foong"},"content":"        String email \u003d \"student1@gmail.com\";"},{"lineNumber":402,"author":{"gitId":"kevin9foong"},"content":"        String name \u003d \"student-1\";"},{"lineNumber":403,"author":{"gitId":"kevin9foong"},"content":"        String googleId \u003d \"student-1\";"},{"lineNumber":404,"author":{"gitId":"kevin9foong"},"content":"        Student s \u003d new Student(courseStudentIsIn, name, email, \"comment for student-1\");"},{"lineNumber":405,"author":{"gitId":"kevin9foong"},"content":"        s.setAccount(new Account(googleId, name, email));"},{"lineNumber":406,"author":{"gitId":"kevin9foong"},"content":"        return s;"},{"lineNumber":407,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":408,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":409,"author":{"gitId":"kevin9foong"},"content":"    private FeedbackSession generateSession1InCourse(Course course) {"},{"lineNumber":410,"author":{"gitId":"kevin9foong"},"content":"        FeedbackSession fs \u003d new FeedbackSession(\"feedbacksession-1\", course,"},{"lineNumber":411,"author":{"gitId":"kevin9foong"},"content":"                \"instructor1@gmail.com\", \"generic instructions\","},{"lineNumber":412,"author":{"gitId":"kevin9foong"},"content":"                Instant.parse(\"2012-04-01T22:00:00Z\"), Instant.parse(\"2027-04-30T22:00:00Z\"),"},{"lineNumber":413,"author":{"gitId":"kevin9foong"},"content":"                Instant.parse(\"2012-03-28T22:00:00Z\"), Instant.parse(\"2027-05-01T22:00:00Z\"),"},{"lineNumber":414,"author":{"gitId":"kevin9foong"},"content":"                Duration.ofHours(10), true, true, true);"},{"lineNumber":415,"author":{"gitId":"kevin9foong"},"content":"        fs.setCreatedAt(Instant.parse(\"2023-01-01T00:00:00Z\"));"},{"lineNumber":416,"author":{"gitId":"kevin9foong"},"content":"        fs.setUpdatedAt(Instant.parse(\"2023-01-01T00:00:00Z\"));"},{"lineNumber":417,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":418,"author":{"gitId":"kevin9foong"},"content":"        return fs;"},{"lineNumber":419,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":420,"author":{"gitId":"kevin9foong"},"content":"}"}],"authorContributionMap":{"kevin9foong":420}},{"path":"src/test/java/teammates/sqlui/webapi/RestoreCourseActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"EuniceSim142"},"content":"package teammates.sqlui.webapi;"},{"lineNumber":2,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":3,"author":{"gitId":"EuniceSim142"},"content":"import static org.mockito.Mockito.doThrow;"},{"lineNumber":4,"author":{"gitId":"EuniceSim142"},"content":"import static org.mockito.Mockito.when;"},{"lineNumber":5,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":6,"author":{"gitId":"EuniceSim142"},"content":"import org.testng.annotations.Test;"},{"lineNumber":7,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":8,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.datatransfer.InstructorPrivileges;"},{"lineNumber":9,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":10,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.util.Const;"},{"lineNumber":11,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.util.Const.InstructorPermissions;"},{"lineNumber":12,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.Course;"},{"lineNumber":13,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":14,"author":{"gitId":"EuniceSim142"},"content":"import teammates.ui.output.MessageOutput;"},{"lineNumber":15,"author":{"gitId":"EuniceSim142"},"content":"import teammates.ui.webapi.RestoreCourseAction;"},{"lineNumber":16,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":17,"author":{"gitId":"EuniceSim142"},"content":"/**"},{"lineNumber":18,"author":{"gitId":"EuniceSim142"},"content":" * SUT: {@link RestoreCourseAction}."},{"lineNumber":19,"author":{"gitId":"EuniceSim142"},"content":" */"},{"lineNumber":20,"author":{"gitId":"EuniceSim142"},"content":"public class RestoreCourseActionTest extends BaseActionTest\u003cRestoreCourseAction\u003e {"},{"lineNumber":21,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":22,"author":{"gitId":"EuniceSim142"},"content":"    String googleId \u003d \"user-googleId\";"},{"lineNumber":23,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":24,"author":{"gitId":"EuniceSim142"},"content":"    @Override"},{"lineNumber":25,"author":{"gitId":"EuniceSim142"},"content":"    protected String getActionUri() {"},{"lineNumber":26,"author":{"gitId":"EuniceSim142"},"content":"        return Const.ResourceURIs.BIN_COURSE;"},{"lineNumber":27,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":28,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":29,"author":{"gitId":"EuniceSim142"},"content":"    @Override"},{"lineNumber":30,"author":{"gitId":"EuniceSim142"},"content":"    protected String getRequestMethod() {"},{"lineNumber":31,"author":{"gitId":"EuniceSim142"},"content":"        return DELETE;"},{"lineNumber":32,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":33,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":34,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":35,"author":{"gitId":"EuniceSim142"},"content":"    void testExecute_courseDoesNotExist_throwsEntityDoesNotExistException() throws EntityDoesNotExistException {"},{"lineNumber":36,"author":{"gitId":"EuniceSim142"},"content":"        String courseId \u003d \"invalid-course-id\";"},{"lineNumber":37,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":38,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.getCourse(courseId)).thenReturn(null);"},{"lineNumber":39,"author":{"gitId":"EuniceSim142"},"content":"        doThrow(new EntityDoesNotExistException(\"\")).when(mockLogic).restoreCourseFromRecycleBin(courseId);"},{"lineNumber":40,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":41,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":42,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.COURSE_ID, courseId,"},{"lineNumber":43,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":44,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":45,"author":{"gitId":"EuniceSim142"},"content":"        verifyEntityNotFound(params);"},{"lineNumber":46,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":47,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":48,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":49,"author":{"gitId":"EuniceSim142"},"content":"    void testExecute_courseExists_success() throws EntityDoesNotExistException {"},{"lineNumber":50,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d new Course(\"course-id\", \"name\", Const.DEFAULT_TIME_ZONE, \"institute\");"},{"lineNumber":51,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":52,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.getCourse(course.getId())).thenReturn(course);"},{"lineNumber":53,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":54,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":55,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),"},{"lineNumber":56,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":57,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":58,"author":{"gitId":"EuniceSim142"},"content":"        RestoreCourseAction action \u003d getAction(params);"},{"lineNumber":59,"author":{"gitId":"EuniceSim142"},"content":"        MessageOutput actionOutput \u003d (MessageOutput) getJsonResult(action).getOutput();"},{"lineNumber":60,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":61,"author":{"gitId":"EuniceSim142"},"content":"        assertEquals(\"The course \" + course.getId() + \" has been restored.\", actionOutput.getMessage());"},{"lineNumber":62,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":63,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":64,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":65,"author":{"gitId":"EuniceSim142"},"content":"    void testSpecificAccessControl_instructorWithInvalidPermission_cannotAccess() {"},{"lineNumber":66,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d new Course(\"course-id\", \"name\", Const.DEFAULT_TIME_ZONE, \"institute\");"},{"lineNumber":67,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":68,"author":{"gitId":"EuniceSim142"},"content":"        Instructor instructor \u003d new Instructor(course, \"name\", \"instructoremail@tm.tmt\","},{"lineNumber":69,"author":{"gitId":"EuniceSim142"},"content":"                false, \"\", null, new InstructorPrivileges());"},{"lineNumber":70,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":71,"author":{"gitId":"EuniceSim142"},"content":"        loginAsInstructor(googleId);"},{"lineNumber":72,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.getCourse(course.getId())).thenReturn(course);"},{"lineNumber":73,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.getInstructorByGoogleId(course.getId(), googleId)).thenReturn(instructor);"},{"lineNumber":74,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":75,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":76,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),"},{"lineNumber":77,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":78,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":79,"author":{"gitId":"EuniceSim142"},"content":"        verifyCannotAccess(params);"},{"lineNumber":80,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":81,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":82,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":83,"author":{"gitId":"EuniceSim142"},"content":"    void testSpecificAccessControl_instructorWithPermission_canAccess() {"},{"lineNumber":84,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d new Course(\"course-id\", \"name\", Const.DEFAULT_TIME_ZONE, \"institute\");"},{"lineNumber":85,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":86,"author":{"gitId":"EuniceSim142"},"content":"        InstructorPrivileges instructorPrivileges \u003d new InstructorPrivileges();"},{"lineNumber":87,"author":{"gitId":"EuniceSim142"},"content":"        instructorPrivileges.updatePrivilege(InstructorPermissions.CAN_MODIFY_COURSE, true);"},{"lineNumber":88,"author":{"gitId":"EuniceSim142"},"content":"        Instructor instructor \u003d new Instructor(course, \"name\", \"instructoremail@tm.tmt\","},{"lineNumber":89,"author":{"gitId":"EuniceSim142"},"content":"                false, \"\", null, instructorPrivileges);"},{"lineNumber":90,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":91,"author":{"gitId":"EuniceSim142"},"content":"        loginAsInstructor(googleId);"},{"lineNumber":92,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.getCourse(course.getId())).thenReturn(course);"},{"lineNumber":93,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.getInstructorByGoogleId(course.getId(), googleId)).thenReturn(instructor);"},{"lineNumber":94,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":95,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":96,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),"},{"lineNumber":97,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":98,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":99,"author":{"gitId":"EuniceSim142"},"content":"        verifyCanAccess(params);"},{"lineNumber":100,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":101,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":102,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":103,"author":{"gitId":"EuniceSim142"},"content":"    void testSpecificAccessControl_notInstructor_cannotAccess() {"},{"lineNumber":104,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":105,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.COURSE_ID, \"course-id\","},{"lineNumber":106,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":107,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":108,"author":{"gitId":"EuniceSim142"},"content":"        loginAsStudent(googleId);"},{"lineNumber":109,"author":{"gitId":"EuniceSim142"},"content":"        verifyCannotAccess(params);"},{"lineNumber":110,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":111,"author":{"gitId":"EuniceSim142"},"content":"        logoutUser();"},{"lineNumber":112,"author":{"gitId":"EuniceSim142"},"content":"        verifyCannotAccess(params);"},{"lineNumber":113,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":114,"author":{"gitId":"EuniceSim142"},"content":"}"}],"authorContributionMap":{"EuniceSim142":114}},{"path":"src/test/java/teammates/sqlui/webapi/UpdateCourseActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"EuniceSim142"},"content":"package teammates.sqlui.webapi;"},{"lineNumber":2,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":3,"author":{"gitId":"EuniceSim142"},"content":"import static org.mockito.Mockito.when;"},{"lineNumber":4,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":5,"author":{"gitId":"EuniceSim142"},"content":"import java.time.Instant;"},{"lineNumber":6,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":7,"author":{"gitId":"EuniceSim142"},"content":"import org.testng.annotations.Test;"},{"lineNumber":8,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":9,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.datatransfer.InstructorPrivileges;"},{"lineNumber":10,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":11,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":12,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.util.Const;"},{"lineNumber":13,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.util.JsonUtils;"},{"lineNumber":14,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.Course;"},{"lineNumber":15,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":16,"author":{"gitId":"EuniceSim142"},"content":"import teammates.ui.output.CourseData;"},{"lineNumber":17,"author":{"gitId":"EuniceSim142"},"content":"import teammates.ui.request.CourseUpdateRequest;"},{"lineNumber":18,"author":{"gitId":"EuniceSim142"},"content":"import teammates.ui.webapi.UpdateCourseAction;"},{"lineNumber":19,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":20,"author":{"gitId":"EuniceSim142"},"content":"/**"},{"lineNumber":21,"author":{"gitId":"EuniceSim142"},"content":" * SUT: {@link UpdateCourseAction}."},{"lineNumber":22,"author":{"gitId":"EuniceSim142"},"content":" */"},{"lineNumber":23,"author":{"gitId":"EuniceSim142"},"content":"public class UpdateCourseActionTest extends BaseActionTest\u003cUpdateCourseAction\u003e {"},{"lineNumber":24,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":25,"author":{"gitId":"EuniceSim142"},"content":"    String googleId \u003d \"user-googleId\";"},{"lineNumber":26,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":27,"author":{"gitId":"EuniceSim142"},"content":"    @Override"},{"lineNumber":28,"author":{"gitId":"EuniceSim142"},"content":"    protected String getActionUri() {"},{"lineNumber":29,"author":{"gitId":"EuniceSim142"},"content":"        return Const.ResourceURIs.COURSE;"},{"lineNumber":30,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":31,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":32,"author":{"gitId":"EuniceSim142"},"content":"    @Override"},{"lineNumber":33,"author":{"gitId":"EuniceSim142"},"content":"    protected String getRequestMethod() {"},{"lineNumber":34,"author":{"gitId":"EuniceSim142"},"content":"        return PUT;"},{"lineNumber":35,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":36,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":37,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":38,"author":{"gitId":"EuniceSim142"},"content":"    void testExecute_courseDoesNotExist_throwsEntityDoesNotExistException()"},{"lineNumber":39,"author":{"gitId":"EuniceSim142"},"content":"            throws EntityDoesNotExistException, InvalidParametersException {"},{"lineNumber":40,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d new Course(\"invalid-course-id\", \"name\", Const.DEFAULT_TIME_ZONE, \"institute\");"},{"lineNumber":41,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":42,"author":{"gitId":"EuniceSim142"},"content":"        String expectedCourseName \u003d \"new-name\";"},{"lineNumber":43,"author":{"gitId":"EuniceSim142"},"content":"        String expectedTimeZone \u003d \"GMT\";"},{"lineNumber":44,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":45,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.updateCourse(course.getId(), expectedCourseName, expectedTimeZone))"},{"lineNumber":46,"author":{"gitId":"EuniceSim142"},"content":"                .thenThrow(new EntityDoesNotExistException(\"\"));"},{"lineNumber":47,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":48,"author":{"gitId":"EuniceSim142"},"content":"        CourseUpdateRequest request \u003d new CourseUpdateRequest();"},{"lineNumber":49,"author":{"gitId":"EuniceSim142"},"content":"        request.setCourseName(expectedCourseName);"},{"lineNumber":50,"author":{"gitId":"EuniceSim142"},"content":"        request.setTimeZone(expectedTimeZone);"},{"lineNumber":51,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":52,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":53,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),"},{"lineNumber":54,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":55,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":56,"author":{"gitId":"EuniceSim142"},"content":"        verifyEntityNotFound(request, params);"},{"lineNumber":57,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":58,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":59,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":60,"author":{"gitId":"EuniceSim142"},"content":"    void testExecute_courseExists_success() throws EntityDoesNotExistException, InvalidParametersException {"},{"lineNumber":61,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d new Course(\"course-id\", \"name\", Const.DEFAULT_TIME_ZONE, \"institute\");"},{"lineNumber":62,"author":{"gitId":"EuniceSim142"},"content":"        course.setCreatedAt(Instant.parse(\"2022-01-01T00:00:00Z\"));"},{"lineNumber":63,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":64,"author":{"gitId":"EuniceSim142"},"content":"        String expectedCourseName \u003d \"new-name\";"},{"lineNumber":65,"author":{"gitId":"EuniceSim142"},"content":"        String expectedTimeZone \u003d \"GMT\";"},{"lineNumber":66,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":67,"author":{"gitId":"EuniceSim142"},"content":"        Course expectedCourse \u003d new Course(course.getId(), expectedCourseName, expectedTimeZone, course.getInstitute());"},{"lineNumber":68,"author":{"gitId":"EuniceSim142"},"content":"        expectedCourse.setCreatedAt(course.getCreatedAt());"},{"lineNumber":69,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":70,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.updateCourse(course.getId(), expectedCourseName, expectedTimeZone)).thenReturn(expectedCourse);"},{"lineNumber":71,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":72,"author":{"gitId":"EuniceSim142"},"content":"        CourseUpdateRequest request \u003d new CourseUpdateRequest();"},{"lineNumber":73,"author":{"gitId":"EuniceSim142"},"content":"        request.setCourseName(expectedCourseName);"},{"lineNumber":74,"author":{"gitId":"EuniceSim142"},"content":"        request.setTimeZone(expectedTimeZone);"},{"lineNumber":75,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":76,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":77,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),"},{"lineNumber":78,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":79,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":80,"author":{"gitId":"EuniceSim142"},"content":"        UpdateCourseAction action \u003d getAction(request, params);"},{"lineNumber":81,"author":{"gitId":"EuniceSim142"},"content":"        CourseData actionOutput \u003d (CourseData) getJsonResult(action).getOutput();"},{"lineNumber":82,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":83,"author":{"gitId":"EuniceSim142"},"content":"        assertEquals(JsonUtils.toJson(new CourseData(expectedCourse)), JsonUtils.toJson(actionOutput));"},{"lineNumber":84,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":85,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":86,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":87,"author":{"gitId":"EuniceSim142"},"content":"    void testExecute_invalidCourseName_throwsInvalidHttpRequestBodyException()"},{"lineNumber":88,"author":{"gitId":"EuniceSim142"},"content":"            throws EntityDoesNotExistException, InvalidParametersException {"},{"lineNumber":89,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d new Course(\"course-id\", \"name\", Const.DEFAULT_TIME_ZONE, \"institute\");"},{"lineNumber":90,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":91,"author":{"gitId":"EuniceSim142"},"content":"        String expectedCourseName \u003d \"\"; // invalid"},{"lineNumber":92,"author":{"gitId":"EuniceSim142"},"content":"        String expectedTimeZone \u003d \"GMT\";"},{"lineNumber":93,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":94,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.updateCourse(course.getId(), expectedCourseName, expectedTimeZone))"},{"lineNumber":95,"author":{"gitId":"EuniceSim142"},"content":"                .thenThrow(new InvalidParametersException(\"\"));"},{"lineNumber":96,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":97,"author":{"gitId":"EuniceSim142"},"content":"        CourseUpdateRequest request \u003d new CourseUpdateRequest();"},{"lineNumber":98,"author":{"gitId":"EuniceSim142"},"content":"        request.setCourseName(expectedCourseName);"},{"lineNumber":99,"author":{"gitId":"EuniceSim142"},"content":"        request.setTimeZone(expectedTimeZone);"},{"lineNumber":100,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":101,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":102,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),"},{"lineNumber":103,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":104,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":105,"author":{"gitId":"EuniceSim142"},"content":"        verifyHttpRequestBodyFailure(request, params);"},{"lineNumber":106,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":107,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":108,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":109,"author":{"gitId":"EuniceSim142"},"content":"    void testSpecificAccessControl_instructorWithInvalidPermission_cannotAccess() {"},{"lineNumber":110,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d new Course(\"course-id\", \"name\", Const.DEFAULT_TIME_ZONE, \"institute\");"},{"lineNumber":111,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":112,"author":{"gitId":"EuniceSim142"},"content":"        Instructor instructor \u003d new Instructor(course, \"name\", \"instructoremail@tm.tmt\","},{"lineNumber":113,"author":{"gitId":"EuniceSim142"},"content":"                false, \"\", null, new InstructorPrivileges());"},{"lineNumber":114,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":115,"author":{"gitId":"EuniceSim142"},"content":"        loginAsInstructor(googleId);"},{"lineNumber":116,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.getCourse(course.getId())).thenReturn(course);"},{"lineNumber":117,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.getInstructorByGoogleId(course.getId(), googleId)).thenReturn(instructor);"},{"lineNumber":118,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":119,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":120,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),"},{"lineNumber":121,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":122,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":123,"author":{"gitId":"EuniceSim142"},"content":"        verifyCannotAccess(params);"},{"lineNumber":124,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":125,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":126,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":127,"author":{"gitId":"EuniceSim142"},"content":"    void testSpecificAccessControl_instructorWithPermission_canAccess() {"},{"lineNumber":128,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d new Course(\"course-id\", \"name\", Const.DEFAULT_TIME_ZONE, \"institute\");"},{"lineNumber":129,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":130,"author":{"gitId":"EuniceSim142"},"content":"        InstructorPrivileges instructorPrivileges \u003d new InstructorPrivileges();"},{"lineNumber":131,"author":{"gitId":"EuniceSim142"},"content":"        instructorPrivileges.updatePrivilege(Const.InstructorPermissions.CAN_MODIFY_COURSE, true);"},{"lineNumber":132,"author":{"gitId":"EuniceSim142"},"content":"        Instructor instructor \u003d new Instructor(course, \"name\", \"instructoremail@tm.tmt\","},{"lineNumber":133,"author":{"gitId":"EuniceSim142"},"content":"                false, \"\", null, instructorPrivileges);"},{"lineNumber":134,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":135,"author":{"gitId":"EuniceSim142"},"content":"        loginAsInstructor(googleId);"},{"lineNumber":136,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.getCourse(course.getId())).thenReturn(course);"},{"lineNumber":137,"author":{"gitId":"EuniceSim142"},"content":"        when(mockLogic.getInstructorByGoogleId(course.getId(), googleId)).thenReturn(instructor);"},{"lineNumber":138,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":139,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":140,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.COURSE_ID, course.getId(),"},{"lineNumber":141,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":142,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":143,"author":{"gitId":"EuniceSim142"},"content":"        verifyCanAccess(params);"},{"lineNumber":144,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":145,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":146,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":147,"author":{"gitId":"EuniceSim142"},"content":"    void testSpecificAccessControl_notInstructor_cannotAccess() {"},{"lineNumber":148,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":149,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.COURSE_ID, \"course-id\","},{"lineNumber":150,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":151,"author":{"gitId":"EuniceSim142"},"content":"        loginAsStudent(googleId);"},{"lineNumber":152,"author":{"gitId":"EuniceSim142"},"content":"        verifyCannotAccess(params);"},{"lineNumber":153,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":154,"author":{"gitId":"EuniceSim142"},"content":"        logoutUser();"},{"lineNumber":155,"author":{"gitId":"EuniceSim142"},"content":"        verifyCannotAccess(params);"},{"lineNumber":156,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":157,"author":{"gitId":"EuniceSim142"},"content":"}"}],"authorContributionMap":{"EuniceSim142":157}},{"path":"src/test/java/teammates/storage/sqlapi/AccountRequestsDbTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"kevin9foong"},"content":"package teammates.storage.sqlapi;"},{"lineNumber":2,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":3,"author":{"gitId":"kevin9foong"},"content":"import static org.mockito.ArgumentMatchers.anyString;"},{"lineNumber":4,"author":{"gitId":"kevin9foong"},"content":"import static org.mockito.Mockito.doReturn;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import static org.mockito.Mockito.mockStatic;"},{"lineNumber":6,"author":{"gitId":"kevin9foong"},"content":"import static org.mockito.Mockito.never;"},{"lineNumber":7,"author":{"gitId":"kevin9foong"},"content":"import static org.mockito.Mockito.spy;"},{"lineNumber":8,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":9,"author":{"gitId":"-"},"content":"import org.mockito.MockedStatic;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import org.testng.annotations.AfterMethod;"},{"lineNumber":11,"author":{"gitId":"kevin9foong"},"content":"import org.testng.annotations.BeforeMethod;"},{"lineNumber":12,"author":{"gitId":"kevin9foong"},"content":"import org.testng.annotations.Test;"},{"lineNumber":13,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":14,"author":{"gitId":"kevin9foong"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":15,"author":{"gitId":"kevin9foong"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":16,"author":{"gitId":"kevin9foong"},"content":"import teammates.common.util.HibernateUtil;"},{"lineNumber":17,"author":{"gitId":"kevin9foong"},"content":"import teammates.storage.sqlentity.AccountRequest;"},{"lineNumber":18,"author":{"gitId":"kevin9foong"},"content":"import teammates.test.BaseTestCase;"},{"lineNumber":19,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":20,"author":{"gitId":"kevin9foong"},"content":"/**"},{"lineNumber":21,"author":{"gitId":"kevin9foong"},"content":" * SUT: {@code AccountRequestDb}."},{"lineNumber":22,"author":{"gitId":"kevin9foong"},"content":" */"},{"lineNumber":23,"author":{"gitId":"kevin9foong"},"content":"public class AccountRequestsDbTest extends BaseTestCase {"},{"lineNumber":24,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":25,"author":{"gitId":"kevin9foong"},"content":"    private AccountRequestsDb accountRequestDb;"},{"lineNumber":26,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":27,"author":{"gitId":"-"},"content":"    private MockedStatic\u003cHibernateUtil\u003e mockHibernateUtil;"},{"lineNumber":28,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":29,"author":{"gitId":"kevin9foong"},"content":"    @BeforeMethod"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    public void setUpMethod() {"},{"lineNumber":31,"author":{"gitId":"-"},"content":"        mockHibernateUtil \u003d mockStatic(HibernateUtil.class);"},{"lineNumber":32,"author":{"gitId":"kevin9foong"},"content":"        accountRequestDb \u003d spy(AccountRequestsDb.class);"},{"lineNumber":33,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":34,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":35,"author":{"gitId":"-"},"content":"    @AfterMethod"},{"lineNumber":36,"author":{"gitId":"-"},"content":"    public void teardownMethod() {"},{"lineNumber":37,"author":{"gitId":"-"},"content":"        mockHibernateUtil.close();"},{"lineNumber":38,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":39,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":40,"author":{"gitId":"kevin9foong"},"content":"    @Test"},{"lineNumber":41,"author":{"gitId":"kevin9foong"},"content":"    public void createAccountRequestDoesNotExist() throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":42,"author":{"gitId":"kevin9foong"},"content":"        AccountRequest accountRequest \u003d new AccountRequest(\"test@gmail.com\", \"name\", \"institute\");"},{"lineNumber":43,"author":{"gitId":"kevin9foong"},"content":"        doReturn(null).when(accountRequestDb).getAccountRequest(anyString(), anyString());"},{"lineNumber":44,"author":{"gitId":"-"},"content":""},{"lineNumber":45,"author":{"gitId":"kevin9foong"},"content":"        accountRequestDb.createAccountRequest(accountRequest);"},{"lineNumber":46,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":47,"author":{"gitId":"-"},"content":"        mockHibernateUtil.verify(() -\u003e HibernateUtil.persist(accountRequest));"},{"lineNumber":48,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":49,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":50,"author":{"gitId":"kevin9foong"},"content":"    @Test"},{"lineNumber":51,"author":{"gitId":"kevin9foong"},"content":"    public void createAccountRequestAlreadyExists() {"},{"lineNumber":52,"author":{"gitId":"kevin9foong"},"content":"        AccountRequest accountRequest \u003d new AccountRequest(\"test@gmail.com\", \"name\", \"institute\");"},{"lineNumber":53,"author":{"gitId":"kevin9foong"},"content":"        doReturn(new AccountRequest(\"test@gmail.com\", \"name\", \"institute\"))"},{"lineNumber":54,"author":{"gitId":"kevin9foong"},"content":"                .when(accountRequestDb).getAccountRequest(anyString(), anyString());"},{"lineNumber":55,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":56,"author":{"gitId":"kevin9foong"},"content":"        EntityAlreadyExistsException ex \u003d assertThrows(EntityAlreadyExistsException.class,"},{"lineNumber":57,"author":{"gitId":"kevin9foong"},"content":"                () -\u003e accountRequestDb.createAccountRequest(accountRequest));"},{"lineNumber":58,"author":{"gitId":"-"},"content":""},{"lineNumber":59,"author":{"gitId":"kevin9foong"},"content":"        assertEquals(ex.getMessage(), \"Trying to create an entity that exists: \" + accountRequest.toString());"},{"lineNumber":60,"author":{"gitId":"-"},"content":"        mockHibernateUtil.verify(() -\u003e HibernateUtil.persist(accountRequest), never());"},{"lineNumber":61,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":62,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":63,"author":{"gitId":"kevin9foong"},"content":"    @Test"},{"lineNumber":64,"author":{"gitId":"kevin9foong"},"content":"    public void deleteAccountRequest() {"},{"lineNumber":65,"author":{"gitId":"kevin9foong"},"content":"        AccountRequest accountRequest \u003d new AccountRequest(\"test@gmail.com\", \"name\", \"institute\");"},{"lineNumber":66,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":67,"author":{"gitId":"-"},"content":"        accountRequestDb.deleteAccountRequest(accountRequest);"},{"lineNumber":68,"author":{"gitId":"kevin9foong"},"content":""},{"lineNumber":69,"author":{"gitId":"-"},"content":"        mockHibernateUtil.verify(() -\u003e HibernateUtil.remove(accountRequest));"},{"lineNumber":70,"author":{"gitId":"kevin9foong"},"content":"    }"},{"lineNumber":71,"author":{"gitId":"kevin9foong"},"content":"}"}],"authorContributionMap":{"kevin9foong":55,"-":16}},{"path":"src/test/java/teammates/storage/sqlapi/AccountsDbTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.storage.sqlapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import static org.mockito.Mockito.mockStatic;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import static org.mockito.Mockito.never;"},{"lineNumber":5,"author":{"gitId":"-"},"content":""},{"lineNumber":6,"author":{"gitId":"domlimm"},"content":"import java.util.UUID;"},{"lineNumber":7,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":8,"author":{"gitId":"-"},"content":"import org.mockito.MockedStatic;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import org.testng.annotations.AfterMethod;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import org.testng.annotations.BeforeMethod;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import org.testng.annotations.Test;"},{"lineNumber":12,"author":{"gitId":"-"},"content":""},{"lineNumber":13,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"import teammates.common.util.HibernateUtil;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Account;"},{"lineNumber":18,"author":{"gitId":"-"},"content":"import teammates.test.BaseTestCase;"},{"lineNumber":19,"author":{"gitId":"-"},"content":""},{"lineNumber":20,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":21,"author":{"gitId":"-"},"content":" * SUT: {@code AccountsDb}."},{"lineNumber":22,"author":{"gitId":"-"},"content":" */"},{"lineNumber":23,"author":{"gitId":"-"},"content":"public class AccountsDbTest extends BaseTestCase {"},{"lineNumber":24,"author":{"gitId":"-"},"content":""},{"lineNumber":25,"author":{"gitId":"-"},"content":"    private AccountsDb accountsDb \u003d AccountsDb.inst();"},{"lineNumber":26,"author":{"gitId":"-"},"content":""},{"lineNumber":27,"author":{"gitId":"-"},"content":"    private MockedStatic\u003cHibernateUtil\u003e mockHibernateUtil;"},{"lineNumber":28,"author":{"gitId":"-"},"content":""},{"lineNumber":29,"author":{"gitId":"-"},"content":"    @BeforeMethod"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    public void setUpMethod() {"},{"lineNumber":31,"author":{"gitId":"-"},"content":"        mockHibernateUtil \u003d mockStatic(HibernateUtil.class);"},{"lineNumber":32,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":33,"author":{"gitId":"-"},"content":""},{"lineNumber":34,"author":{"gitId":"-"},"content":"    @AfterMethod"},{"lineNumber":35,"author":{"gitId":"-"},"content":"    public void teardownMethod() {"},{"lineNumber":36,"author":{"gitId":"-"},"content":"        mockHibernateUtil.close();"},{"lineNumber":37,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":38,"author":{"gitId":"-"},"content":""},{"lineNumber":39,"author":{"gitId":"domlimm"},"content":"    @Test"},{"lineNumber":40,"author":{"gitId":"domlimm"},"content":"    public void testGetAccount_accountExists_success() {"},{"lineNumber":41,"author":{"gitId":"domlimm"},"content":"        Account account \u003d getTypicalAccount();"},{"lineNumber":42,"author":{"gitId":"domlimm"},"content":"        UUID id \u003d account.getId();"},{"lineNumber":43,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":44,"author":{"gitId":"domlimm"},"content":"        mockHibernateUtil.when(() -\u003e HibernateUtil.get(Account.class, id)).thenReturn(account);"},{"lineNumber":45,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":46,"author":{"gitId":"domlimm"},"content":"        Account actualAccount \u003d accountsDb.getAccount(id);"},{"lineNumber":47,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":48,"author":{"gitId":"domlimm"},"content":"        mockHibernateUtil.verify(() -\u003e HibernateUtil.get(Account.class, id));"},{"lineNumber":49,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":50,"author":{"gitId":"domlimm"},"content":"        assertEquals(account, actualAccount);"},{"lineNumber":51,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":52,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":53,"author":{"gitId":"domlimm"},"content":"    @Test"},{"lineNumber":54,"author":{"gitId":"domlimm"},"content":"    public void testGetAccountByGoogleId_accountExists_success() {"},{"lineNumber":55,"author":{"gitId":"domlimm"},"content":"        Account account \u003d getTypicalAccount();"},{"lineNumber":56,"author":{"gitId":"domlimm"},"content":"        String googleId \u003d account.getGoogleId();"},{"lineNumber":57,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":58,"author":{"gitId":"domlimm"},"content":"        mockHibernateUtil"},{"lineNumber":59,"author":{"gitId":"domlimm"},"content":"                .when(() -\u003e HibernateUtil.getBySimpleNaturalId(Account.class, googleId))"},{"lineNumber":60,"author":{"gitId":"domlimm"},"content":"                .thenReturn(account);"},{"lineNumber":61,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":62,"author":{"gitId":"domlimm"},"content":"        Account actualAccount \u003d accountsDb.getAccountByGoogleId(googleId);"},{"lineNumber":63,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":64,"author":{"gitId":"domlimm"},"content":"        mockHibernateUtil.verify(() -\u003e"},{"lineNumber":65,"author":{"gitId":"domlimm"},"content":"                HibernateUtil.getBySimpleNaturalId(Account.class, googleId));"},{"lineNumber":66,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":67,"author":{"gitId":"domlimm"},"content":"        assertEquals(account, actualAccount);"},{"lineNumber":68,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":69,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":70,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":71,"author":{"gitId":"-"},"content":"    public void testCreateAccount_accountDoesNotExist_success()"},{"lineNumber":72,"author":{"gitId":"-"},"content":"            throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":73,"author":{"gitId":"-"},"content":"        Account account \u003d new Account(\"google-id\", \"name\", \"email@teammates.com\");"},{"lineNumber":74,"author":{"gitId":"-"},"content":""},{"lineNumber":75,"author":{"gitId":"-"},"content":"        accountsDb.createAccount(account);"},{"lineNumber":76,"author":{"gitId":"-"},"content":""},{"lineNumber":77,"author":{"gitId":"-"},"content":"        mockHibernateUtil.verify(() -\u003e HibernateUtil.persist(account));"},{"lineNumber":78,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":79,"author":{"gitId":"-"},"content":""},{"lineNumber":80,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":81,"author":{"gitId":"-"},"content":"    public void testCreateAccount_accountAlreadyExists_throwsEntityAlreadyExistsException() {"},{"lineNumber":82,"author":{"gitId":"-"},"content":"        Account existingAccount \u003d getTypicalAccount();"},{"lineNumber":83,"author":{"gitId":"-"},"content":"        mockHibernateUtil.when(() -\u003e HibernateUtil.getBySimpleNaturalId(Account.class, \"google-id\"))"},{"lineNumber":84,"author":{"gitId":"-"},"content":"                .thenReturn(existingAccount);"},{"lineNumber":85,"author":{"gitId":"-"},"content":"        Account account \u003d new Account(\"google-id\", \"different name\", \"email@teammates.com\");"},{"lineNumber":86,"author":{"gitId":"-"},"content":""},{"lineNumber":87,"author":{"gitId":"-"},"content":"        EntityAlreadyExistsException ex \u003d assertThrows(EntityAlreadyExistsException.class,"},{"lineNumber":88,"author":{"gitId":"-"},"content":"                () -\u003e accountsDb.createAccount(account));"},{"lineNumber":89,"author":{"gitId":"-"},"content":""},{"lineNumber":90,"author":{"gitId":"-"},"content":"        assertEquals(\"Trying to create an entity that exists: \" + account.toString(), ex.getMessage());"},{"lineNumber":91,"author":{"gitId":"-"},"content":"        mockHibernateUtil.verify(() -\u003e HibernateUtil.persist(account), never());"},{"lineNumber":92,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":93,"author":{"gitId":"-"},"content":""},{"lineNumber":94,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":95,"author":{"gitId":"-"},"content":"    public void testCreateAccount_invalidEmail_throwsInvalidParametersException() {"},{"lineNumber":96,"author":{"gitId":"-"},"content":"        Account account \u003d new Account(\"google-id\", \"name\", \"invalid\");"},{"lineNumber":97,"author":{"gitId":"-"},"content":""},{"lineNumber":98,"author":{"gitId":"-"},"content":"        InvalidParametersException ex \u003d assertThrows(InvalidParametersException.class,"},{"lineNumber":99,"author":{"gitId":"-"},"content":"                () -\u003e accountsDb.createAccount(account));"},{"lineNumber":100,"author":{"gitId":"-"},"content":""},{"lineNumber":101,"author":{"gitId":"-"},"content":"        assertEquals("},{"lineNumber":102,"author":{"gitId":"-"},"content":"                \"\\\"invalid\\\" is not acceptable to TEAMMATES as a/an email because it is not in the correct format. \""},{"lineNumber":103,"author":{"gitId":"-"},"content":"                        + \"An email address contains some text followed by one \u0027@\u0027 sign followed by some more text, \""},{"lineNumber":104,"author":{"gitId":"-"},"content":"                        + \"and should end with a top level domain address like .com. \""},{"lineNumber":105,"author":{"gitId":"-"},"content":"                        + \"It cannot be longer than 254 characters, \""},{"lineNumber":106,"author":{"gitId":"-"},"content":"                        + \"cannot be empty and cannot contain spaces.\","},{"lineNumber":107,"author":{"gitId":"-"},"content":"                ex.getMessage());"},{"lineNumber":108,"author":{"gitId":"-"},"content":"        mockHibernateUtil.verify(() -\u003e HibernateUtil.persist(account), never());"},{"lineNumber":109,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":110,"author":{"gitId":"-"},"content":""},{"lineNumber":111,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":112,"author":{"gitId":"-"},"content":"    public void testUpdateAccount_accountAlreadyExists_success()"},{"lineNumber":113,"author":{"gitId":"-"},"content":"            throws InvalidParametersException, EntityDoesNotExistException {"},{"lineNumber":114,"author":{"gitId":"-"},"content":"        Account account \u003d getTypicalAccount();"},{"lineNumber":115,"author":{"gitId":"-"},"content":"        mockHibernateUtil.when(() -\u003e HibernateUtil.get(Account.class, account.getId()))"},{"lineNumber":116,"author":{"gitId":"-"},"content":"                .thenReturn(account);"},{"lineNumber":117,"author":{"gitId":"-"},"content":"        account.setName(\"new name\");"},{"lineNumber":118,"author":{"gitId":"-"},"content":""},{"lineNumber":119,"author":{"gitId":"-"},"content":"        accountsDb.updateAccount(account);"},{"lineNumber":120,"author":{"gitId":"-"},"content":""},{"lineNumber":121,"author":{"gitId":"-"},"content":"        mockHibernateUtil.verify(() -\u003e HibernateUtil.merge(account));"},{"lineNumber":122,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":123,"author":{"gitId":"-"},"content":""},{"lineNumber":124,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":125,"author":{"gitId":"-"},"content":"    public void testUpdateAccount_accountDoesNotExist_throwsEntityDoesNotExistException()"},{"lineNumber":126,"author":{"gitId":"-"},"content":"            throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":127,"author":{"gitId":"-"},"content":"        Account account \u003d getTypicalAccount();"},{"lineNumber":128,"author":{"gitId":"-"},"content":""},{"lineNumber":129,"author":{"gitId":"-"},"content":"        EntityDoesNotExistException ex \u003d assertThrows(EntityDoesNotExistException.class,"},{"lineNumber":130,"author":{"gitId":"-"},"content":"                () -\u003e accountsDb.updateAccount(account));"},{"lineNumber":131,"author":{"gitId":"-"},"content":""},{"lineNumber":132,"author":{"gitId":"-"},"content":"        assertEquals(\"Trying to update non-existent Entity: \" + account.toString(), ex.getMessage());"},{"lineNumber":133,"author":{"gitId":"-"},"content":"        mockHibernateUtil.verify(() -\u003e HibernateUtil.persist(account), never());"},{"lineNumber":134,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":135,"author":{"gitId":"-"},"content":""},{"lineNumber":136,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":137,"author":{"gitId":"-"},"content":"    public void testUpdateAccount_invalidEmail_throwsInvalidParametersException() {"},{"lineNumber":138,"author":{"gitId":"-"},"content":"        Account account \u003d getTypicalAccount();"},{"lineNumber":139,"author":{"gitId":"-"},"content":"        account.setEmail(\"invalid\");"},{"lineNumber":140,"author":{"gitId":"-"},"content":""},{"lineNumber":141,"author":{"gitId":"-"},"content":"        InvalidParametersException ex \u003d assertThrows(InvalidParametersException.class,"},{"lineNumber":142,"author":{"gitId":"-"},"content":"                () -\u003e accountsDb.updateAccount(account));"},{"lineNumber":143,"author":{"gitId":"-"},"content":""},{"lineNumber":144,"author":{"gitId":"-"},"content":"        assertEquals("},{"lineNumber":145,"author":{"gitId":"-"},"content":"                \"\\\"invalid\\\" is not acceptable to TEAMMATES as a/an email because it is not in the correct format. \""},{"lineNumber":146,"author":{"gitId":"-"},"content":"                        + \"An email address contains some text followed by one \u0027@\u0027 sign followed by some more text, \""},{"lineNumber":147,"author":{"gitId":"-"},"content":"                        + \"and should end with a top level domain address like .com. \""},{"lineNumber":148,"author":{"gitId":"-"},"content":"                        + \"It cannot be longer than 254 characters, \""},{"lineNumber":149,"author":{"gitId":"-"},"content":"                        + \"cannot be empty and cannot contain spaces.\","},{"lineNumber":150,"author":{"gitId":"-"},"content":"                ex.getMessage());"},{"lineNumber":151,"author":{"gitId":"-"},"content":"        mockHibernateUtil.verify(() -\u003e HibernateUtil.persist(account), never());"},{"lineNumber":152,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":153,"author":{"gitId":"-"},"content":""},{"lineNumber":154,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":155,"author":{"gitId":"-"},"content":"    public void testDeleteAccount_success() {"},{"lineNumber":156,"author":{"gitId":"-"},"content":"        Account account \u003d new Account(\"google-id\", \"name\", \"email@teammates.com\");"},{"lineNumber":157,"author":{"gitId":"-"},"content":""},{"lineNumber":158,"author":{"gitId":"-"},"content":"        accountsDb.deleteAccount(account);"},{"lineNumber":159,"author":{"gitId":"-"},"content":""},{"lineNumber":160,"author":{"gitId":"-"},"content":"        mockHibernateUtil.verify(() -\u003e HibernateUtil.remove(account));"},{"lineNumber":161,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":162,"author":{"gitId":"-"},"content":""},{"lineNumber":163,"author":{"gitId":"-"},"content":"    private Account getTypicalAccount() {"},{"lineNumber":164,"author":{"gitId":"-"},"content":"        return new Account(\"google-id\", \"name\", \"email@teammates.com\");"},{"lineNumber":165,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":166,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"domlimm":33,"-":133}},{"path":"src/test/java/teammates/storage/sqlapi/CoursesDbTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.storage.sqlapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import static org.mockito.Mockito.mockStatic;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import static org.mockito.Mockito.never;"},{"lineNumber":5,"author":{"gitId":"EuniceSim142"},"content":"import static org.mockito.Mockito.times;"},{"lineNumber":6,"author":{"gitId":"-"},"content":""},{"lineNumber":7,"author":{"gitId":"-"},"content":"import org.mockito.MockedStatic;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import org.testng.annotations.AfterMethod;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import org.testng.annotations.BeforeMethod;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import org.testng.annotations.Test;"},{"lineNumber":11,"author":{"gitId":"-"},"content":""},{"lineNumber":12,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import teammates.common.util.HibernateUtil;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import teammates.storage.sqlentity.Course;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"import teammates.test.BaseTestCase;"},{"lineNumber":17,"author":{"gitId":"-"},"content":""},{"lineNumber":18,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":19,"author":{"gitId":"-"},"content":" * SUT: {@code CoursesDb}."},{"lineNumber":20,"author":{"gitId":"-"},"content":" */"},{"lineNumber":21,"author":{"gitId":"-"},"content":"public class CoursesDbTest extends BaseTestCase {"},{"lineNumber":22,"author":{"gitId":"-"},"content":""},{"lineNumber":23,"author":{"gitId":"-"},"content":"    private CoursesDb coursesDb \u003d CoursesDb.inst();"},{"lineNumber":24,"author":{"gitId":"-"},"content":""},{"lineNumber":25,"author":{"gitId":"-"},"content":"    private MockedStatic\u003cHibernateUtil\u003e mockHibernateUtil;"},{"lineNumber":26,"author":{"gitId":"-"},"content":""},{"lineNumber":27,"author":{"gitId":"-"},"content":"    @BeforeMethod"},{"lineNumber":28,"author":{"gitId":"-"},"content":"    public void setUpMethod() {"},{"lineNumber":29,"author":{"gitId":"-"},"content":"        mockHibernateUtil \u003d mockStatic(HibernateUtil.class);"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":31,"author":{"gitId":"-"},"content":""},{"lineNumber":32,"author":{"gitId":"-"},"content":"    @AfterMethod"},{"lineNumber":33,"author":{"gitId":"-"},"content":"    public void teardownMethod() {"},{"lineNumber":34,"author":{"gitId":"-"},"content":"        mockHibernateUtil.close();"},{"lineNumber":35,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":36,"author":{"gitId":"-"},"content":""},{"lineNumber":37,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":38,"author":{"gitId":"-"},"content":"    public void testCreateCourse_courseDoesNotExist_success()"},{"lineNumber":39,"author":{"gitId":"-"},"content":"            throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":40,"author":{"gitId":"-"},"content":"        Course c \u003d new Course(\"course-id\", \"course-name\", null, \"institute\");"},{"lineNumber":41,"author":{"gitId":"-"},"content":""},{"lineNumber":42,"author":{"gitId":"-"},"content":"        coursesDb.createCourse(c);"},{"lineNumber":43,"author":{"gitId":"-"},"content":""},{"lineNumber":44,"author":{"gitId":"-"},"content":"        mockHibernateUtil.verify(() -\u003e HibernateUtil.persist(c));"},{"lineNumber":45,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":46,"author":{"gitId":"-"},"content":""},{"lineNumber":47,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":48,"author":{"gitId":"-"},"content":"    public void testCreateCourse_courseAlreadyExists_throwsEntityAlreadyExistsException() {"},{"lineNumber":49,"author":{"gitId":"-"},"content":"        Course c \u003d new Course(\"course-id\", \"course-name\", null, \"institute\");"},{"lineNumber":50,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":51,"author":{"gitId":"-"},"content":"        mockHibernateUtil.when(() -\u003e HibernateUtil.get(Course.class, \"course-id\")).thenReturn(c);"},{"lineNumber":52,"author":{"gitId":"-"},"content":""},{"lineNumber":53,"author":{"gitId":"-"},"content":"        EntityAlreadyExistsException ex \u003d assertThrows(EntityAlreadyExistsException.class,"},{"lineNumber":54,"author":{"gitId":"-"},"content":"                () -\u003e coursesDb.createCourse(c));"},{"lineNumber":55,"author":{"gitId":"-"},"content":""},{"lineNumber":56,"author":{"gitId":"-"},"content":"        assertEquals(\"Trying to create an entity that exists: \" + c.toString(), ex.getMessage());"},{"lineNumber":57,"author":{"gitId":"-"},"content":"        mockHibernateUtil.verify(() -\u003e HibernateUtil.persist(c), never());"},{"lineNumber":58,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":59,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":60,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":61,"author":{"gitId":"EuniceSim142"},"content":"    public void testGetCourse_courseAlreadyExists_success() {"},{"lineNumber":62,"author":{"gitId":"EuniceSim142"},"content":"        Course c \u003d new Course(\"course-id\", \"course-name\", null, \"institute\");"},{"lineNumber":63,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":64,"author":{"gitId":"EuniceSim142"},"content":"        mockHibernateUtil.when(() -\u003e HibernateUtil.get(Course.class, \"course-id\")).thenReturn(c);"},{"lineNumber":65,"author":{"gitId":"EuniceSim142"},"content":"        Course courseFetched \u003d coursesDb.getCourse(\"course-id\");"},{"lineNumber":66,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":67,"author":{"gitId":"EuniceSim142"},"content":"        mockHibernateUtil.verify(() -\u003e HibernateUtil.get(Course.class, \"course-id\"), times(1));"},{"lineNumber":68,"author":{"gitId":"EuniceSim142"},"content":"        assertEquals(c, courseFetched);"},{"lineNumber":69,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":70,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":71,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":72,"author":{"gitId":"EuniceSim142"},"content":"    public void testGetCourse_courseDoesNotExist_returnsNull() {"},{"lineNumber":73,"author":{"gitId":"EuniceSim142"},"content":"        mockHibernateUtil.when(() -\u003e HibernateUtil.get(Course.class, \"course-id-not-in-db\")).thenReturn(null);"},{"lineNumber":74,"author":{"gitId":"EuniceSim142"},"content":"        Course courseFetched \u003d coursesDb.getCourse(\"course-id-not-in-db\");"},{"lineNumber":75,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":76,"author":{"gitId":"EuniceSim142"},"content":"        mockHibernateUtil.verify(() -\u003e HibernateUtil.get(Course.class, \"course-id-not-in-db\"), times(1));"},{"lineNumber":77,"author":{"gitId":"EuniceSim142"},"content":"        assertNull(courseFetched);"},{"lineNumber":78,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":79,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":80,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":81,"author":{"gitId":"EuniceSim142"},"content":"    public void testDeleteCourse_courseExists_success() {"},{"lineNumber":82,"author":{"gitId":"EuniceSim142"},"content":"        Course c \u003d new Course(\"course-id\", \"new-course-name\", null, \"institute\");"},{"lineNumber":83,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":84,"author":{"gitId":"EuniceSim142"},"content":"        coursesDb.deleteCourse(c);"},{"lineNumber":85,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":86,"author":{"gitId":"EuniceSim142"},"content":"        mockHibernateUtil.verify(() -\u003e HibernateUtil.remove(c));"},{"lineNumber":87,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":88,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"EuniceSim142":31,"-":57}},{"path":"src/test/java/teammates/storage/sqlapi/NotificationsDbTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"hhdqirui"},"content":"package teammates.storage.sqlapi;"},{"lineNumber":2,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":3,"author":{"gitId":"hhdqirui"},"content":"import static org.mockito.ArgumentMatchers.any;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import static org.mockito.Mockito.mockStatic;"},{"lineNumber":5,"author":{"gitId":"hhdqirui"},"content":"import static org.mockito.Mockito.never;"},{"lineNumber":6,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":7,"author":{"gitId":"hhdqirui"},"content":"import java.time.Instant;"},{"lineNumber":8,"author":{"gitId":"hhdqirui"},"content":"import java.util.UUID;"},{"lineNumber":9,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":10,"author":{"gitId":"-"},"content":"import org.mockito.MockedStatic;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import org.testng.annotations.AfterMethod;"},{"lineNumber":12,"author":{"gitId":"hhdqirui"},"content":"import org.testng.annotations.BeforeMethod;"},{"lineNumber":13,"author":{"gitId":"hhdqirui"},"content":"import org.testng.annotations.Test;"},{"lineNumber":14,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":15,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.NotificationStyle;"},{"lineNumber":16,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.datatransfer.NotificationTargetUser;"},{"lineNumber":17,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":18,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":19,"author":{"gitId":"hhdqirui"},"content":"import teammates.common.util.HibernateUtil;"},{"lineNumber":20,"author":{"gitId":"hhdqirui"},"content":"import teammates.storage.sqlentity.Notification;"},{"lineNumber":21,"author":{"gitId":"hhdqirui"},"content":"import teammates.test.BaseTestCase;"},{"lineNumber":22,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":23,"author":{"gitId":"hhdqirui"},"content":"/**"},{"lineNumber":24,"author":{"gitId":"hhdqirui"},"content":" * SUT: {@code NotificationsDb}."},{"lineNumber":25,"author":{"gitId":"hhdqirui"},"content":" */"},{"lineNumber":26,"author":{"gitId":"hhdqirui"},"content":"public class NotificationsDbTest extends BaseTestCase {"},{"lineNumber":27,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":28,"author":{"gitId":"hhdqirui"},"content":"    private NotificationsDb notificationsDb \u003d NotificationsDb.inst();"},{"lineNumber":29,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":30,"author":{"gitId":"-"},"content":"    private MockedStatic\u003cHibernateUtil\u003e mockHibernateUtil;"},{"lineNumber":31,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":32,"author":{"gitId":"hhdqirui"},"content":"    @BeforeMethod"},{"lineNumber":33,"author":{"gitId":"-"},"content":"    public void setUpMethod() {"},{"lineNumber":34,"author":{"gitId":"-"},"content":"        mockHibernateUtil \u003d mockStatic(HibernateUtil.class);"},{"lineNumber":35,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":36,"author":{"gitId":"-"},"content":""},{"lineNumber":37,"author":{"gitId":"-"},"content":"    @AfterMethod"},{"lineNumber":38,"author":{"gitId":"-"},"content":"    public void teardownMethod() {"},{"lineNumber":39,"author":{"gitId":"-"},"content":"        mockHibernateUtil.close();"},{"lineNumber":40,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":41,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":42,"author":{"gitId":"hhdqirui"},"content":"    @Test"},{"lineNumber":43,"author":{"gitId":"-"},"content":"    public void testCreateNotification_notificationDoesNotExist_success()"},{"lineNumber":44,"author":{"gitId":"-"},"content":"            throws EntityAlreadyExistsException, InvalidParametersException {"},{"lineNumber":45,"author":{"gitId":"-"},"content":"        Notification newNotification \u003d new Notification(Instant.parse(\"2011-01-01T00:00:00Z\"),"},{"lineNumber":46,"author":{"gitId":"-"},"content":"                Instant.parse(\"2099-01-01T00:00:00Z\"), NotificationStyle.DANGER, NotificationTargetUser.GENERAL,"},{"lineNumber":47,"author":{"gitId":"-"},"content":"                \"A deprecation note\", \"\u003cp\u003eDeprecation happens in three minutes\u003c/p\u003e\");"},{"lineNumber":48,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":49,"author":{"gitId":"hhdqirui"},"content":"        notificationsDb.createNotification(newNotification);"},{"lineNumber":50,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":51,"author":{"gitId":"-"},"content":"        mockHibernateUtil.verify(() -\u003e HibernateUtil.persist(newNotification));"},{"lineNumber":52,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":53,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":54,"author":{"gitId":"hhdqirui"},"content":"    @Test"},{"lineNumber":55,"author":{"gitId":"-"},"content":"    public void testCreateNotification_endTimeIsBeforeStartTime_throwsInvalidParametersException() {"},{"lineNumber":56,"author":{"gitId":"-"},"content":"        Notification invalidNotification \u003d new Notification(Instant.parse(\"2011-02-01T00:00:00Z\"),"},{"lineNumber":57,"author":{"gitId":"-"},"content":"                Instant.parse(\"2011-01-01T00:00:00Z\"), NotificationStyle.DANGER, NotificationTargetUser.GENERAL,"},{"lineNumber":58,"author":{"gitId":"-"},"content":"                \"A deprecation note\", \"\u003cp\u003eDeprecation happens in three minutes\u003c/p\u003e\");"},{"lineNumber":59,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":60,"author":{"gitId":"hhdqirui"},"content":"        assertThrows(InvalidParametersException.class, () -\u003e notificationsDb.createNotification(invalidNotification));"},{"lineNumber":61,"author":{"gitId":"-"},"content":"        mockHibernateUtil.verify(() -\u003e HibernateUtil.persist(invalidNotification), never());"},{"lineNumber":62,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":63,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":64,"author":{"gitId":"hhdqirui"},"content":"    @Test"},{"lineNumber":65,"author":{"gitId":"-"},"content":"    public void testCreateNotification_emptyTitle_throwsInvalidParametersException() {"},{"lineNumber":66,"author":{"gitId":"-"},"content":"        Notification invalidNotification \u003d new Notification(Instant.parse(\"2011-01-01T00:00:00Z\"),"},{"lineNumber":67,"author":{"gitId":"-"},"content":"                Instant.parse(\"2099-01-01T00:00:00Z\"), NotificationStyle.DANGER, NotificationTargetUser.GENERAL,"},{"lineNumber":68,"author":{"gitId":"-"},"content":"                \"\", \"\u003cp\u003eDeprecation happens in three minutes\u003c/p\u003e\");"},{"lineNumber":69,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":70,"author":{"gitId":"hhdqirui"},"content":"        assertThrows(InvalidParametersException.class, () -\u003e notificationsDb.createNotification(invalidNotification));"},{"lineNumber":71,"author":{"gitId":"-"},"content":"        mockHibernateUtil.verify(() -\u003e HibernateUtil.persist(invalidNotification), never());"},{"lineNumber":72,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":73,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":74,"author":{"gitId":"hhdqirui"},"content":"    @Test"},{"lineNumber":75,"author":{"gitId":"-"},"content":"    public void testCreateNotification_emptyMessage_throwsInvalidParametersException() {"},{"lineNumber":76,"author":{"gitId":"-"},"content":"        Notification invalidNotification \u003d new Notification(Instant.parse(\"2011-01-01T00:00:00Z\"),"},{"lineNumber":77,"author":{"gitId":"-"},"content":"                Instant.parse(\"2099-01-01T00:00:00Z\"), NotificationStyle.DANGER, NotificationTargetUser.GENERAL,"},{"lineNumber":78,"author":{"gitId":"-"},"content":"                \"A deprecation note\", \"\");"},{"lineNumber":79,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":80,"author":{"gitId":"hhdqirui"},"content":"        assertThrows(InvalidParametersException.class, () -\u003e notificationsDb.createNotification(invalidNotification));"},{"lineNumber":81,"author":{"gitId":"-"},"content":"        mockHibernateUtil.verify(() -\u003e HibernateUtil.persist(invalidNotification), never());"},{"lineNumber":82,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":83,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":84,"author":{"gitId":"hhdqirui"},"content":"    @Test"},{"lineNumber":85,"author":{"gitId":"hhdqirui"},"content":"    public void testGetNotification_success() {"},{"lineNumber":86,"author":{"gitId":"hhdqirui"},"content":"        Notification notification \u003d generateTypicalNotificationWithId();"},{"lineNumber":87,"author":{"gitId":"-"},"content":"        mockHibernateUtil.when(() -\u003e"},{"lineNumber":88,"author":{"gitId":"-"},"content":"                HibernateUtil.get(Notification.class, notification.getId())).thenReturn(notification);"},{"lineNumber":89,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":90,"author":{"gitId":"-"},"content":"        Notification actualNotification \u003d notificationsDb.getNotification(notification.getId());"},{"lineNumber":91,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":92,"author":{"gitId":"-"},"content":"        mockHibernateUtil.verify(() -\u003e HibernateUtil.get(Notification.class, notification.getId()));"},{"lineNumber":93,"author":{"gitId":"hhdqirui"},"content":"        assertEquals(notification, actualNotification);"},{"lineNumber":94,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":95,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":96,"author":{"gitId":"hhdqirui"},"content":"    @Test"},{"lineNumber":97,"author":{"gitId":"hhdqirui"},"content":"    public void testGetNotification_entityDoesNotExist() {"},{"lineNumber":98,"author":{"gitId":"hhdqirui"},"content":"        UUID nonExistentId \u003d UUID.fromString(\"00000000-0000-1000-0000-000000000000\");"},{"lineNumber":99,"author":{"gitId":"-"},"content":"        mockHibernateUtil.when(() -\u003e HibernateUtil.get(Notification.class, nonExistentId)).thenReturn(null);"},{"lineNumber":100,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":101,"author":{"gitId":"hhdqirui"},"content":"        Notification actualNotification \u003d notificationsDb.getNotification(nonExistentId);"},{"lineNumber":102,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":103,"author":{"gitId":"hhdqirui"},"content":"        mockHibernateUtil.verify(() -\u003e HibernateUtil.get(Notification.class, nonExistentId));"},{"lineNumber":104,"author":{"gitId":"hhdqirui"},"content":"        assertNull(actualNotification);"},{"lineNumber":105,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":106,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":107,"author":{"gitId":"hhdqirui"},"content":"    @Test"},{"lineNumber":108,"author":{"gitId":"hhdqirui"},"content":"    public void testDeleteNotification_entityExists_success() {"},{"lineNumber":109,"author":{"gitId":"hhdqirui"},"content":"        Notification notification \u003d generateTypicalNotificationWithId();"},{"lineNumber":110,"author":{"gitId":"hhdqirui"},"content":"        notificationsDb.deleteNotification(notification);"},{"lineNumber":111,"author":{"gitId":"hhdqirui"},"content":"        mockHibernateUtil.verify(() -\u003e HibernateUtil.remove(notification));"},{"lineNumber":112,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":113,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":114,"author":{"gitId":"hhdqirui"},"content":"    @Test"},{"lineNumber":115,"author":{"gitId":"hhdqirui"},"content":"    public void testDeleteNotification_entityDoesNotExists_success() {"},{"lineNumber":116,"author":{"gitId":"hhdqirui"},"content":"        notificationsDb.deleteNotification(null);"},{"lineNumber":117,"author":{"gitId":"hhdqirui"},"content":"        mockHibernateUtil.verify(() -\u003e HibernateUtil.remove(any()), never());"},{"lineNumber":118,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":119,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":120,"author":{"gitId":"hhdqirui"},"content":"    private Notification generateTypicalNotificationWithId() {"},{"lineNumber":121,"author":{"gitId":"hhdqirui"},"content":"        Notification notification \u003d new Notification(Instant.parse(\"2011-01-01T00:00:00Z\"),"},{"lineNumber":122,"author":{"gitId":"hhdqirui"},"content":"                Instant.parse(\"2099-01-01T00:00:00Z\"), NotificationStyle.DANGER, NotificationTargetUser.GENERAL,"},{"lineNumber":123,"author":{"gitId":"hhdqirui"},"content":"                \"A deprecation note\", \"\u003cp\u003eDeprecation happens in three minutes\u003c/p\u003e\");"},{"lineNumber":124,"author":{"gitId":"-"},"content":"        notification.setId(UUID.randomUUID());"},{"lineNumber":125,"author":{"gitId":"hhdqirui"},"content":"        return notification;"},{"lineNumber":126,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":127,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":128,"author":{"gitId":"hhdqirui"},"content":"}"}],"authorContributionMap":{"hhdqirui":90,"-":38}},{"path":"src/test/java/teammates/storage/sqlapi/UsersDbTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"domlimm"},"content":"package teammates.storage.sqlapi;"},{"lineNumber":2,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":3,"author":{"gitId":"domlimm"},"content":"import static org.mockito.ArgumentMatchers.any;"},{"lineNumber":4,"author":{"gitId":"domlimm"},"content":"import static org.mockito.Mockito.mock;"},{"lineNumber":5,"author":{"gitId":"domlimm"},"content":"import static org.mockito.Mockito.mockStatic;"},{"lineNumber":6,"author":{"gitId":"domlimm"},"content":"import static org.mockito.Mockito.never;"},{"lineNumber":7,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":8,"author":{"gitId":"domlimm"},"content":"import org.mockito.MockedStatic;"},{"lineNumber":9,"author":{"gitId":"domlimm"},"content":"import org.testng.annotations.AfterMethod;"},{"lineNumber":10,"author":{"gitId":"domlimm"},"content":"import org.testng.annotations.BeforeMethod;"},{"lineNumber":11,"author":{"gitId":"domlimm"},"content":"import org.testng.annotations.Test;"},{"lineNumber":12,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":13,"author":{"gitId":"domlimm"},"content":"import teammates.common.datatransfer.InstructorPermissionRole;"},{"lineNumber":14,"author":{"gitId":"domlimm"},"content":"import teammates.common.datatransfer.InstructorPrivileges;"},{"lineNumber":15,"author":{"gitId":"domlimm"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":16,"author":{"gitId":"domlimm"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":17,"author":{"gitId":"domlimm"},"content":"import teammates.common.util.Const;"},{"lineNumber":18,"author":{"gitId":"domlimm"},"content":"import teammates.common.util.HibernateUtil;"},{"lineNumber":19,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Course;"},{"lineNumber":20,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":21,"author":{"gitId":"domlimm"},"content":"import teammates.storage.sqlentity.Student;"},{"lineNumber":22,"author":{"gitId":"domlimm"},"content":"import teammates.test.BaseTestCase;"},{"lineNumber":23,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":24,"author":{"gitId":"domlimm"},"content":"/**"},{"lineNumber":25,"author":{"gitId":"domlimm"},"content":" * SUT: {@code UsersDb}."},{"lineNumber":26,"author":{"gitId":"domlimm"},"content":" */"},{"lineNumber":27,"author":{"gitId":"domlimm"},"content":"public class UsersDbTest extends BaseTestCase {"},{"lineNumber":28,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":29,"author":{"gitId":"domlimm"},"content":"    private UsersDb usersDb \u003d UsersDb.inst();"},{"lineNumber":30,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":31,"author":{"gitId":"domlimm"},"content":"    private MockedStatic\u003cHibernateUtil\u003e mockHibernateUtil;"},{"lineNumber":32,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":33,"author":{"gitId":"domlimm"},"content":"    @BeforeMethod"},{"lineNumber":34,"author":{"gitId":"domlimm"},"content":"    public void setUp() {"},{"lineNumber":35,"author":{"gitId":"domlimm"},"content":"        mockHibernateUtil \u003d mockStatic(HibernateUtil.class);"},{"lineNumber":36,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":37,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":38,"author":{"gitId":"domlimm"},"content":"    @AfterMethod"},{"lineNumber":39,"author":{"gitId":"domlimm"},"content":"    public void teardown() {"},{"lineNumber":40,"author":{"gitId":"domlimm"},"content":"        mockHibernateUtil.close();"},{"lineNumber":41,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":42,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":43,"author":{"gitId":"domlimm"},"content":"    private Instructor getTypicalInstructor() {"},{"lineNumber":44,"author":{"gitId":"domlimm"},"content":"        Course course \u003d new Course(\"course-id\", \"course-name\", Const.DEFAULT_TIME_ZONE, \"institute\");"},{"lineNumber":45,"author":{"gitId":"domlimm"},"content":"        InstructorPrivileges instructorPrivileges \u003d"},{"lineNumber":46,"author":{"gitId":"domlimm"},"content":"                new InstructorPrivileges(Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_COOWNER);"},{"lineNumber":47,"author":{"gitId":"domlimm"},"content":"        InstructorPermissionRole role \u003d InstructorPermissionRole"},{"lineNumber":48,"author":{"gitId":"domlimm"},"content":"                .getEnum(Const.InstructorPermissionRoleNames.INSTRUCTOR_PERMISSION_ROLE_COOWNER);"},{"lineNumber":49,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":50,"author":{"gitId":"domlimm"},"content":"        return new Instructor(course, \"instructor-name\", \"valid@teammates.tmt\","},{"lineNumber":51,"author":{"gitId":"domlimm"},"content":"                false, Const.DEFAULT_DISPLAY_NAME_FOR_INSTRUCTOR, role, instructorPrivileges);"},{"lineNumber":52,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":53,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":54,"author":{"gitId":"domlimm"},"content":"    private Student getTypicalStudent() {"},{"lineNumber":55,"author":{"gitId":"domlimm"},"content":"        Course course \u003d new Course(\"course-id\", \"course-name\", Const.DEFAULT_TIME_ZONE, \"institute\");"},{"lineNumber":56,"author":{"gitId":"domlimm"},"content":"        return new Student(course, \"student-name\", \"valid@teammates.tmt\", \"comments\");"},{"lineNumber":57,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":58,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":59,"author":{"gitId":"domlimm"},"content":"    @Test"},{"lineNumber":60,"author":{"gitId":"domlimm"},"content":"    public void testCreateInstructor_validInstructorDoesNotExist_success()"},{"lineNumber":61,"author":{"gitId":"domlimm"},"content":"            throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":62,"author":{"gitId":"domlimm"},"content":"        Instructor newInstructor \u003d getTypicalInstructor();"},{"lineNumber":63,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":64,"author":{"gitId":"domlimm"},"content":"        usersDb.createInstructor(newInstructor);"},{"lineNumber":65,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":66,"author":{"gitId":"domlimm"},"content":"        mockHibernateUtil.verify(() -\u003e HibernateUtil.persist(newInstructor));"},{"lineNumber":67,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":68,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":69,"author":{"gitId":"domlimm"},"content":"    @Test"},{"lineNumber":70,"author":{"gitId":"domlimm"},"content":"    public void testCreateStudent_studentDoesNotExist_success()"},{"lineNumber":71,"author":{"gitId":"domlimm"},"content":"            throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":72,"author":{"gitId":"domlimm"},"content":"        Student newStudent \u003d getTypicalStudent();"},{"lineNumber":73,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":74,"author":{"gitId":"domlimm"},"content":"        usersDb.createStudent(newStudent);"},{"lineNumber":75,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":76,"author":{"gitId":"domlimm"},"content":"        mockHibernateUtil.verify(() -\u003e HibernateUtil.persist(newStudent));"},{"lineNumber":77,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":78,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":79,"author":{"gitId":"domlimm"},"content":"    @Test"},{"lineNumber":80,"author":{"gitId":"domlimm"},"content":"    public void testCreateStudent_studentWithInvalidEmail_throwsInvalidParametersException() {"},{"lineNumber":81,"author":{"gitId":"domlimm"},"content":"        Student newStudent \u003d getTypicalStudent();"},{"lineNumber":82,"author":{"gitId":"domlimm"},"content":"        newStudent.setEmail(\"invalid-email\");"},{"lineNumber":83,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":84,"author":{"gitId":"domlimm"},"content":"        assertThrows(InvalidParametersException.class, () -\u003e usersDb.createStudent(newStudent));"},{"lineNumber":85,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":86,"author":{"gitId":"domlimm"},"content":"        mockHibernateUtil.verify(() -\u003e HibernateUtil.persist(newStudent), never());"},{"lineNumber":87,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":88,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":89,"author":{"gitId":"domlimm"},"content":"    @Test"},{"lineNumber":90,"author":{"gitId":"domlimm"},"content":"    public void testGetInstructor_instructorIdPresent_success() {"},{"lineNumber":91,"author":{"gitId":"domlimm"},"content":"        Instructor instructor \u003d getTypicalInstructor();"},{"lineNumber":92,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":93,"author":{"gitId":"domlimm"},"content":"        mockHibernateUtil"},{"lineNumber":94,"author":{"gitId":"domlimm"},"content":"                .when(() -\u003e HibernateUtil.get(Instructor.class, instructor.getId()))"},{"lineNumber":95,"author":{"gitId":"domlimm"},"content":"                .thenReturn(instructor);"},{"lineNumber":96,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":97,"author":{"gitId":"domlimm"},"content":"        Instructor actualInstructor \u003d usersDb.getInstructor(instructor.getId());"},{"lineNumber":98,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":99,"author":{"gitId":"domlimm"},"content":"        assertEquals(instructor, actualInstructor);"},{"lineNumber":100,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":101,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":102,"author":{"gitId":"domlimm"},"content":"    @Test"},{"lineNumber":103,"author":{"gitId":"domlimm"},"content":"    public void testGetStudent_studentIdPresent_success() {"},{"lineNumber":104,"author":{"gitId":"domlimm"},"content":"        Student student \u003d getTypicalStudent();"},{"lineNumber":105,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":106,"author":{"gitId":"domlimm"},"content":"        mockHibernateUtil"},{"lineNumber":107,"author":{"gitId":"domlimm"},"content":"                .when(() -\u003e HibernateUtil.get(Student.class, student.getId()))"},{"lineNumber":108,"author":{"gitId":"domlimm"},"content":"                .thenReturn(student);"},{"lineNumber":109,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":110,"author":{"gitId":"domlimm"},"content":"        Student actualStudent \u003d usersDb.getStudent(student.getId());"},{"lineNumber":111,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":112,"author":{"gitId":"domlimm"},"content":"        assertEquals(student, actualStudent);"},{"lineNumber":113,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":114,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":115,"author":{"gitId":"domlimm"},"content":"    @Test"},{"lineNumber":116,"author":{"gitId":"domlimm"},"content":"    public void testDeleteUser_userNotNull_success() {"},{"lineNumber":117,"author":{"gitId":"domlimm"},"content":"        Student student \u003d mock(Student.class);"},{"lineNumber":118,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":119,"author":{"gitId":"domlimm"},"content":"        usersDb.deleteUser(student);"},{"lineNumber":120,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":121,"author":{"gitId":"domlimm"},"content":"        mockHibernateUtil.verify(() -\u003e HibernateUtil.remove(student));"},{"lineNumber":122,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":123,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":124,"author":{"gitId":"domlimm"},"content":"    @Test"},{"lineNumber":125,"author":{"gitId":"domlimm"},"content":"    public void testDeleteUser_userNull_shouldFailSilently() {"},{"lineNumber":126,"author":{"gitId":"domlimm"},"content":"        usersDb.deleteUser(null);"},{"lineNumber":127,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":128,"author":{"gitId":"domlimm"},"content":"        mockHibernateUtil.verify(() -\u003e HibernateUtil.remove(any()), never());"},{"lineNumber":129,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":130,"author":{"gitId":"domlimm"},"content":"}"}],"authorContributionMap":{"domlimm":130}},{"path":"src/test/java/teammates/test/BaseTestCase.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.test;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.io.IOException;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.lang.reflect.Method;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.util.HashMap;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import java.util.Map;"},{"lineNumber":7,"author":{"gitId":"-"},"content":""},{"lineNumber":8,"author":{"gitId":"-"},"content":"import org.junit.Assert;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import org.testng.annotations.AfterClass;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import org.testng.annotations.BeforeClass;"},{"lineNumber":11,"author":{"gitId":"-"},"content":""},{"lineNumber":12,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.DataBundle;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.SqlDataBundle;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import teammates.common.util.FieldValidator;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import teammates.common.util.JsonUtils;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"import teammates.sqllogic.core.DataBundleLogic;"},{"lineNumber":17,"author":{"gitId":"-"},"content":""},{"lineNumber":18,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":19,"author":{"gitId":"-"},"content":" * Base class for all test cases."},{"lineNumber":20,"author":{"gitId":"-"},"content":" */"},{"lineNumber":21,"author":{"gitId":"-"},"content":"public class BaseTestCase {"},{"lineNumber":22,"author":{"gitId":"-"},"content":""},{"lineNumber":23,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":24,"author":{"gitId":"-"},"content":"     * Test Segment divider. Used to divide a test case into logical sections."},{"lineNumber":25,"author":{"gitId":"-"},"content":"     * The weird name is for easy spotting."},{"lineNumber":26,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":27,"author":{"gitId":"-"},"content":"     * @param description"},{"lineNumber":28,"author":{"gitId":"-"},"content":"     *            of the logical section. This will be printed."},{"lineNumber":29,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    // CHECKSTYLE.OFF:AbbreviationAsWordInName|MethodName the weird name is for easy spotting."},{"lineNumber":31,"author":{"gitId":"-"},"content":"    public static void ______TS(String description) {"},{"lineNumber":32,"author":{"gitId":"-"},"content":"        print(\" * \" + description);"},{"lineNumber":33,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":34,"author":{"gitId":"-"},"content":"    // CHECKSTYLE.ON:AbbreviationAsWordInName|MethodName"},{"lineNumber":35,"author":{"gitId":"-"},"content":""},{"lineNumber":36,"author":{"gitId":"-"},"content":"    @BeforeClass"},{"lineNumber":37,"author":{"gitId":"-"},"content":"    public void printTestClassHeader() {"},{"lineNumber":38,"author":{"gitId":"-"},"content":"        print(\"[\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\""},{"lineNumber":39,"author":{"gitId":"-"},"content":"                + getClass().getCanonicalName()"},{"lineNumber":40,"author":{"gitId":"-"},"content":"                + \"\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d]\");"},{"lineNumber":41,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":42,"author":{"gitId":"-"},"content":""},{"lineNumber":43,"author":{"gitId":"-"},"content":"    @AfterClass"},{"lineNumber":44,"author":{"gitId":"-"},"content":"    public void printTestClassFooter() {"},{"lineNumber":45,"author":{"gitId":"-"},"content":"        print(getClass().getCanonicalName() + \" completed\");"},{"lineNumber":46,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":47,"author":{"gitId":"-"},"content":""},{"lineNumber":48,"author":{"gitId":"-"},"content":"    protected static void print(String message) {"},{"lineNumber":49,"author":{"gitId":"-"},"content":"        System.out.println(message);"},{"lineNumber":50,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":51,"author":{"gitId":"-"},"content":""},{"lineNumber":52,"author":{"gitId":"-"},"content":"    protected String getTestDataFolder() {"},{"lineNumber":53,"author":{"gitId":"-"},"content":"        return TestProperties.TEST_DATA_FOLDER;"},{"lineNumber":54,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":55,"author":{"gitId":"-"},"content":""},{"lineNumber":56,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":57,"author":{"gitId":"-"},"content":"     * Creates a DataBundle as specified in typicalDataBundle.json."},{"lineNumber":58,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":59,"author":{"gitId":"-"},"content":"    protected DataBundle getTypicalDataBundle() {"},{"lineNumber":60,"author":{"gitId":"-"},"content":"        return loadDataBundle(\"/typicalDataBundle.json\");"},{"lineNumber":61,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":62,"author":{"gitId":"-"},"content":""},{"lineNumber":63,"author":{"gitId":"-"},"content":"    protected DataBundle loadDataBundle(String jsonFileName) {"},{"lineNumber":64,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":65,"author":{"gitId":"-"},"content":"            String pathToJsonFile \u003d getTestDataFolder() + jsonFileName;"},{"lineNumber":66,"author":{"gitId":"-"},"content":"            String jsonString \u003d FileHelper.readFile(pathToJsonFile);"},{"lineNumber":67,"author":{"gitId":"-"},"content":"            return JsonUtils.fromJson(jsonString, DataBundle.class);"},{"lineNumber":68,"author":{"gitId":"-"},"content":"        } catch (IOException e) {"},{"lineNumber":69,"author":{"gitId":"-"},"content":"            throw new RuntimeException(e);"},{"lineNumber":70,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":71,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":72,"author":{"gitId":"-"},"content":""},{"lineNumber":73,"author":{"gitId":"-"},"content":"    protected SqlDataBundle getTypicalSqlDataBundle() {"},{"lineNumber":74,"author":{"gitId":"-"},"content":"        return loadSqlDataBundle(\"/typicalDataBundle.json\");"},{"lineNumber":75,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":76,"author":{"gitId":"-"},"content":""},{"lineNumber":77,"author":{"gitId":"-"},"content":"    protected SqlDataBundle loadSqlDataBundle(String jsonFileName) {"},{"lineNumber":78,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":79,"author":{"gitId":"-"},"content":"            // TODO: rename to loadDataBundle after migration"},{"lineNumber":80,"author":{"gitId":"-"},"content":"            String pathToJsonFile \u003d getTestDataFolder() + jsonFileName;"},{"lineNumber":81,"author":{"gitId":"-"},"content":"            String jsonString \u003d FileHelper.readFile(pathToJsonFile);"},{"lineNumber":82,"author":{"gitId":"-"},"content":"            return DataBundleLogic.deserializeDataBundle(jsonString);"},{"lineNumber":83,"author":{"gitId":"-"},"content":"        } catch (IOException e) {"},{"lineNumber":84,"author":{"gitId":"-"},"content":"            throw new RuntimeException(e);"},{"lineNumber":85,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":86,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":87,"author":{"gitId":"-"},"content":""},{"lineNumber":88,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":89,"author":{"gitId":"-"},"content":"     * Populates the feedback question and response IDs within the data bundle."},{"lineNumber":90,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":91,"author":{"gitId":"-"},"content":"     * \u003cp\u003eFor tests where simulated database is used, the backend will assign the question and response IDs"},{"lineNumber":92,"author":{"gitId":"-"},"content":"     * when the entities are persisted into the database, and modify the relation IDs accordingly."},{"lineNumber":93,"author":{"gitId":"-"},"content":"     * However, for tests that do not use simulated database (e.g. pure data structure tests),"},{"lineNumber":94,"author":{"gitId":"-"},"content":"     * the assignment of IDs have to be simulated."},{"lineNumber":95,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":96,"author":{"gitId":"-"},"content":"    protected void populateQuestionAndResponseIds(DataBundle dataBundle) {"},{"lineNumber":97,"author":{"gitId":"-"},"content":"        Map\u003cString, Map\u003cInteger, String\u003e\u003e sessionToQuestionNumberToId \u003d new HashMap\u003c\u003e();"},{"lineNumber":98,"author":{"gitId":"-"},"content":""},{"lineNumber":99,"author":{"gitId":"-"},"content":"        dataBundle.feedbackQuestions.forEach((key, question) -\u003e {"},{"lineNumber":100,"author":{"gitId":"-"},"content":"            // Assign the same ID as the key as a later function requires a match between the key and the question ID"},{"lineNumber":101,"author":{"gitId":"-"},"content":"            question.setId(key);"},{"lineNumber":102,"author":{"gitId":"-"},"content":"            Map\u003cInteger, String\u003e questionNumberToId \u003d sessionToQuestionNumberToId.computeIfAbsent("},{"lineNumber":103,"author":{"gitId":"-"},"content":"                    question.getCourseId() + \"%\" + question.getFeedbackSessionName(), k -\u003e new HashMap\u003c\u003e());"},{"lineNumber":104,"author":{"gitId":"-"},"content":"            questionNumberToId.put(question.getQuestionNumber(), key);"},{"lineNumber":105,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":106,"author":{"gitId":"-"},"content":""},{"lineNumber":107,"author":{"gitId":"-"},"content":"        dataBundle.feedbackResponses.forEach((key, response) -\u003e {"},{"lineNumber":108,"author":{"gitId":"-"},"content":"            response.setId(key);"},{"lineNumber":109,"author":{"gitId":"-"},"content":"            String feedbackQuestionId \u003d sessionToQuestionNumberToId"},{"lineNumber":110,"author":{"gitId":"-"},"content":"                    .get(response.getCourseId() + \"%\" + response.getFeedbackSessionName())"},{"lineNumber":111,"author":{"gitId":"-"},"content":"                    .get(Integer.valueOf(response.getFeedbackQuestionId()));"},{"lineNumber":112,"author":{"gitId":"-"},"content":"            response.setFeedbackQuestionId(feedbackQuestionId);"},{"lineNumber":113,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":114,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":115,"author":{"gitId":"-"},"content":""},{"lineNumber":116,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":117,"author":{"gitId":"-"},"content":"     * Invokes the method named {@code methodName} as defined in the {@code definingClass}."},{"lineNumber":118,"author":{"gitId":"-"},"content":"     * @param definingClass     the class which defines the method"},{"lineNumber":119,"author":{"gitId":"-"},"content":"     * @param parameterTypes    the parameter types of the method,"},{"lineNumber":120,"author":{"gitId":"-"},"content":"     *                          which must be passed in the same order defined in the method"},{"lineNumber":121,"author":{"gitId":"-"},"content":"     * @param invokingObject    the object which invokes the method, can be {@code null} if the method is static"},{"lineNumber":122,"author":{"gitId":"-"},"content":"     * @param args              the arguments to be passed to the method invocation"},{"lineNumber":123,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":124,"author":{"gitId":"-"},"content":"    protected static Object invokeMethod(Class\u003c?\u003e definingClass, String methodName, Class\u003c?\u003e[] parameterTypes,"},{"lineNumber":125,"author":{"gitId":"-"},"content":"                                         Object invokingObject, Object[] args)"},{"lineNumber":126,"author":{"gitId":"-"},"content":"            throws ReflectiveOperationException {"},{"lineNumber":127,"author":{"gitId":"-"},"content":"        Method method \u003d definingClass.getDeclaredMethod(methodName, parameterTypes);"},{"lineNumber":128,"author":{"gitId":"-"},"content":"        method.setAccessible(true);"},{"lineNumber":129,"author":{"gitId":"-"},"content":"        return method.invoke(invokingObject, args);"},{"lineNumber":130,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":131,"author":{"gitId":"-"},"content":""},{"lineNumber":132,"author":{"gitId":"-"},"content":"    protected static String getPopulatedErrorMessage(String messageTemplate, String userInput,"},{"lineNumber":133,"author":{"gitId":"-"},"content":"                                                     String fieldName, String errorReason)"},{"lineNumber":134,"author":{"gitId":"-"},"content":"            throws ReflectiveOperationException {"},{"lineNumber":135,"author":{"gitId":"-"},"content":"        return getPopulatedErrorMessage(messageTemplate, userInput, fieldName, errorReason, 0);"},{"lineNumber":136,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":137,"author":{"gitId":"-"},"content":""},{"lineNumber":138,"author":{"gitId":"-"},"content":"    protected static String getPopulatedErrorMessage(String messageTemplate, String userInput,"},{"lineNumber":139,"author":{"gitId":"-"},"content":"                                                     String fieldName, String errorReason, int maxLength)"},{"lineNumber":140,"author":{"gitId":"-"},"content":"            throws ReflectiveOperationException {"},{"lineNumber":141,"author":{"gitId":"-"},"content":"        return (String) invokeMethod(FieldValidator.class, \"getPopulatedErrorMessage\","},{"lineNumber":142,"author":{"gitId":"-"},"content":"                                     new Class\u003c?\u003e[] { String.class, String.class, String.class, String.class, int.class },"},{"lineNumber":143,"author":{"gitId":"-"},"content":"                                     null, new Object[] { messageTemplate, userInput, fieldName, errorReason, maxLength });"},{"lineNumber":144,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":145,"author":{"gitId":"-"},"content":""},{"lineNumber":146,"author":{"gitId":"-"},"content":"    protected static String getPopulatedEmptyStringErrorMessage(String messageTemplate, String fieldName, int maxLength)"},{"lineNumber":147,"author":{"gitId":"-"},"content":"            throws ReflectiveOperationException {"},{"lineNumber":148,"author":{"gitId":"-"},"content":"        return (String) invokeMethod(FieldValidator.class, \"getPopulatedEmptyStringErrorMessage\","},{"lineNumber":149,"author":{"gitId":"-"},"content":"                new Class\u003c?\u003e[] { String.class, String.class, int.class },"},{"lineNumber":150,"author":{"gitId":"-"},"content":"                null, new Object[] { messageTemplate, fieldName, maxLength });"},{"lineNumber":151,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":152,"author":{"gitId":"-"},"content":""},{"lineNumber":153,"author":{"gitId":"-"},"content":"    /*"},{"lineNumber":154,"author":{"gitId":"-"},"content":"     * Here are some of the most common assertion methods provided by JUnit."},{"lineNumber":155,"author":{"gitId":"-"},"content":"     * They are copied here to prevent repetitive importing in test classes."},{"lineNumber":156,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":157,"author":{"gitId":"-"},"content":""},{"lineNumber":158,"author":{"gitId":"-"},"content":"    protected static void assertTrue(boolean condition) {"},{"lineNumber":159,"author":{"gitId":"-"},"content":"        Assert.assertTrue(condition);"},{"lineNumber":160,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":161,"author":{"gitId":"-"},"content":""},{"lineNumber":162,"author":{"gitId":"-"},"content":"    protected static void assertTrue(String message, boolean condition) {"},{"lineNumber":163,"author":{"gitId":"-"},"content":"        Assert.assertTrue(message, condition);"},{"lineNumber":164,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":165,"author":{"gitId":"-"},"content":""},{"lineNumber":166,"author":{"gitId":"-"},"content":"    protected static void assertFalse(boolean condition) {"},{"lineNumber":167,"author":{"gitId":"-"},"content":"        Assert.assertFalse(condition);"},{"lineNumber":168,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":169,"author":{"gitId":"-"},"content":""},{"lineNumber":170,"author":{"gitId":"-"},"content":"    protected static void assertFalse(String message, boolean condition) {"},{"lineNumber":171,"author":{"gitId":"-"},"content":"        Assert.assertFalse(message, condition);"},{"lineNumber":172,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":173,"author":{"gitId":"-"},"content":""},{"lineNumber":174,"author":{"gitId":"-"},"content":"    protected static void assertEquals(int expected, int actual) {"},{"lineNumber":175,"author":{"gitId":"-"},"content":"        Assert.assertEquals(expected, actual);"},{"lineNumber":176,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":177,"author":{"gitId":"-"},"content":""},{"lineNumber":178,"author":{"gitId":"-"},"content":"    protected static void assertEquals(String message, int expected, int actual) {"},{"lineNumber":179,"author":{"gitId":"-"},"content":"        Assert.assertEquals(message, expected, actual);"},{"lineNumber":180,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":181,"author":{"gitId":"-"},"content":""},{"lineNumber":182,"author":{"gitId":"-"},"content":"    protected static void assertEquals(long expected, long actual) {"},{"lineNumber":183,"author":{"gitId":"-"},"content":"        Assert.assertEquals(expected, actual);"},{"lineNumber":184,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":185,"author":{"gitId":"-"},"content":""},{"lineNumber":186,"author":{"gitId":"-"},"content":"    protected static void assertEquals(double expected, double actual, double delta) {"},{"lineNumber":187,"author":{"gitId":"-"},"content":"        Assert.assertEquals(expected, actual, delta);"},{"lineNumber":188,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":189,"author":{"gitId":"-"},"content":""},{"lineNumber":190,"author":{"gitId":"-"},"content":"    protected static void assertEquals(Object expected, Object actual) {"},{"lineNumber":191,"author":{"gitId":"-"},"content":"        Assert.assertEquals(expected, actual);"},{"lineNumber":192,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":193,"author":{"gitId":"-"},"content":""},{"lineNumber":194,"author":{"gitId":"-"},"content":"    protected static void assertEquals(String message, Object expected, Object actual) {"},{"lineNumber":195,"author":{"gitId":"-"},"content":"        Assert.assertEquals(message, expected, actual);"},{"lineNumber":196,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":197,"author":{"gitId":"-"},"content":""},{"lineNumber":198,"author":{"gitId":"-"},"content":"    protected static void assertArrayEquals(byte[] expected, byte[] actual) {"},{"lineNumber":199,"author":{"gitId":"-"},"content":"        Assert.assertArrayEquals(expected, actual);"},{"lineNumber":200,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":201,"author":{"gitId":"-"},"content":""},{"lineNumber":202,"author":{"gitId":"-"},"content":"    protected static void assertNotEquals(Object first, Object second) {"},{"lineNumber":203,"author":{"gitId":"-"},"content":"        Assert.assertNotEquals(first, second);"},{"lineNumber":204,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":205,"author":{"gitId":"-"},"content":""},{"lineNumber":206,"author":{"gitId":"-"},"content":"    protected static void assertSame(Object expected, Object actual) {"},{"lineNumber":207,"author":{"gitId":"-"},"content":"        Assert.assertSame(expected, actual);"},{"lineNumber":208,"author":{"gitId":"hhdqirui"},"content":"    }"},{"lineNumber":209,"author":{"gitId":"hhdqirui"},"content":""},{"lineNumber":210,"author":{"gitId":"-"},"content":"    protected static void assertNotSame(Object unexpected, Object actual) {"},{"lineNumber":211,"author":{"gitId":"-"},"content":"        Assert.assertNotSame(unexpected, actual);"},{"lineNumber":212,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":213,"author":{"gitId":"-"},"content":""},{"lineNumber":214,"author":{"gitId":"-"},"content":"    protected static void assertNull(Object object) {"},{"lineNumber":215,"author":{"gitId":"-"},"content":"        Assert.assertNull(object);"},{"lineNumber":216,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":217,"author":{"gitId":"-"},"content":""},{"lineNumber":218,"author":{"gitId":"-"},"content":"    protected static void assertNull(String message, Object object) {"},{"lineNumber":219,"author":{"gitId":"-"},"content":"        Assert.assertNull(message, object);"},{"lineNumber":220,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":221,"author":{"gitId":"-"},"content":""},{"lineNumber":222,"author":{"gitId":"-"},"content":"    protected static void assertNotNull(Object object) {"},{"lineNumber":223,"author":{"gitId":"-"},"content":"        Assert.assertNotNull(object);"},{"lineNumber":224,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":225,"author":{"gitId":"-"},"content":""},{"lineNumber":226,"author":{"gitId":"-"},"content":"    protected static void assertNotNull(String message, Object object) {"},{"lineNumber":227,"author":{"gitId":"-"},"content":"        Assert.assertNotNull(message, object);"},{"lineNumber":228,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":229,"author":{"gitId":"-"},"content":""},{"lineNumber":230,"author":{"gitId":"-"},"content":"    protected static void fail(String message) {"},{"lineNumber":231,"author":{"gitId":"-"},"content":"        Assert.fail(message);"},{"lineNumber":232,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":233,"author":{"gitId":"-"},"content":""},{"lineNumber":234,"author":{"gitId":"-"},"content":"    // This method is adapted from JUnit 5\u0027s assertThrows."},{"lineNumber":235,"author":{"gitId":"-"},"content":"    // Once we upgrade to JUnit 5, their built-in method shall be used instead."},{"lineNumber":236,"author":{"gitId":"-"},"content":"    @SuppressWarnings({"},{"lineNumber":237,"author":{"gitId":"-"},"content":"            \"unchecked\","},{"lineNumber":238,"author":{"gitId":"-"},"content":"            \"PMD.AvoidCatchingThrowable\", // As per reference method\u0027s specification"},{"lineNumber":239,"author":{"gitId":"-"},"content":"    })"},{"lineNumber":240,"author":{"gitId":"-"},"content":"    protected static \u003cT extends Throwable\u003e T assertThrows(Class\u003cT\u003e expectedType, Executable executable) {"},{"lineNumber":241,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":242,"author":{"gitId":"-"},"content":"            executable.execute();"},{"lineNumber":243,"author":{"gitId":"-"},"content":"        } catch (Throwable actualException) {"},{"lineNumber":244,"author":{"gitId":"-"},"content":"            if (expectedType.isInstance(actualException)) {"},{"lineNumber":245,"author":{"gitId":"-"},"content":"                return (T) actualException;"},{"lineNumber":246,"author":{"gitId":"-"},"content":"            } else {"},{"lineNumber":247,"author":{"gitId":"-"},"content":"                String message \u003d String.format(\"Expected %s to be thrown, but %s was instead thrown.\","},{"lineNumber":248,"author":{"gitId":"-"},"content":"                        getCanonicalName(expectedType), getCanonicalName(actualException.getClass()));"},{"lineNumber":249,"author":{"gitId":"-"},"content":"                throw new AssertionError(message, actualException);"},{"lineNumber":250,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":251,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":252,"author":{"gitId":"-"},"content":""},{"lineNumber":253,"author":{"gitId":"-"},"content":"        String message \u003d String.format(\"Expected %s to be thrown, but nothing was thrown.\", getCanonicalName(expectedType));"},{"lineNumber":254,"author":{"gitId":"-"},"content":"        throw new AssertionError(message);"},{"lineNumber":255,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":256,"author":{"gitId":"-"},"content":""},{"lineNumber":257,"author":{"gitId":"-"},"content":"    private static String getCanonicalName(Class\u003c?\u003e clazz) {"},{"lineNumber":258,"author":{"gitId":"-"},"content":"        String canonicalName \u003d clazz.getCanonicalName();"},{"lineNumber":259,"author":{"gitId":"-"},"content":"        return canonicalName \u003d\u003d null ? clazz.getName() : canonicalName;"},{"lineNumber":260,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":261,"author":{"gitId":"-"},"content":""},{"lineNumber":262,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":263,"author":{"gitId":"-"},"content":"     * {@code Executable} is a functional interface that can be used to"},{"lineNumber":264,"author":{"gitId":"-"},"content":"     * implement any generic block of code that potentially throws a"},{"lineNumber":265,"author":{"gitId":"-"},"content":"     * {@link Throwable}."},{"lineNumber":266,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":267,"author":{"gitId":"-"},"content":"     * \u003cp\u003eThe {@code Executable} interface is similar to {@link Runnable},"},{"lineNumber":268,"author":{"gitId":"-"},"content":"     * except that an {@code Executable} can throw any kind of exception."},{"lineNumber":269,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":270,"author":{"gitId":"-"},"content":"    // This interface is adapted from JUnit 5\u0027s Executable interface."},{"lineNumber":271,"author":{"gitId":"-"},"content":"    // Once we upgrade to JUnit 5, this interface shall no longer be necessary."},{"lineNumber":272,"author":{"gitId":"-"},"content":"    public interface Executable {"},{"lineNumber":273,"author":{"gitId":"-"},"content":""},{"lineNumber":274,"author":{"gitId":"-"},"content":"        /**"},{"lineNumber":275,"author":{"gitId":"-"},"content":"         * Executes a block of code, potentially throwing a {@link Throwable}."},{"lineNumber":276,"author":{"gitId":"-"},"content":"         */"},{"lineNumber":277,"author":{"gitId":"-"},"content":"        // CHECKSTYLE.OFF:IllegalThrows"},{"lineNumber":278,"author":{"gitId":"-"},"content":"        void execute() throws Throwable;"},{"lineNumber":279,"author":{"gitId":"-"},"content":"        // CHECKSTYLE.ON:IllegalThrows"},{"lineNumber":280,"author":{"gitId":"-"},"content":""},{"lineNumber":281,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":282,"author":{"gitId":"-"},"content":""},{"lineNumber":283,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"hhdqirui":2,"-":281}},{"path":"src/test/java/teammates/ui/webapi/BinCourseActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":4,"author":{"gitId":"-"},"content":""},{"lineNumber":5,"author":{"gitId":"EuniceSim142"},"content":"import org.testng.annotations.Ignore;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import org.testng.annotations.Test;"},{"lineNumber":7,"author":{"gitId":"-"},"content":""},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.CourseAttributes;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.InstructorAttributes;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import teammates.ui.output.CourseData;"},{"lineNumber":12,"author":{"gitId":"-"},"content":""},{"lineNumber":13,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":14,"author":{"gitId":"-"},"content":" * SUT: {@link BinCourseAction}."},{"lineNumber":15,"author":{"gitId":"-"},"content":" */"},{"lineNumber":16,"author":{"gitId":"EuniceSim142"},"content":"@Ignore"},{"lineNumber":17,"author":{"gitId":"-"},"content":"public class BinCourseActionTest extends BaseActionTest\u003cBinCourseAction\u003e {"},{"lineNumber":18,"author":{"gitId":"-"},"content":""},{"lineNumber":19,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":20,"author":{"gitId":"-"},"content":"    protected String getActionUri() {"},{"lineNumber":21,"author":{"gitId":"-"},"content":"        return Const.ResourceURIs.BIN_COURSE;"},{"lineNumber":22,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":23,"author":{"gitId":"-"},"content":""},{"lineNumber":24,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":25,"author":{"gitId":"-"},"content":"    protected String getRequestMethod() {"},{"lineNumber":26,"author":{"gitId":"-"},"content":"        return PUT;"},{"lineNumber":27,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":28,"author":{"gitId":"-"},"content":""},{"lineNumber":29,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":31,"author":{"gitId":"-"},"content":"    protected void testExecute() throws Exception {"},{"lineNumber":32,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor1OfCourse1 \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":33,"author":{"gitId":"-"},"content":"        String instructorId \u003d instructor1OfCourse1.getGoogleId();"},{"lineNumber":34,"author":{"gitId":"-"},"content":""},{"lineNumber":35,"author":{"gitId":"-"},"content":"        loginAsInstructor(instructorId);"},{"lineNumber":36,"author":{"gitId":"-"},"content":""},{"lineNumber":37,"author":{"gitId":"-"},"content":"        ______TS(\"Not enough parameters\");"},{"lineNumber":38,"author":{"gitId":"-"},"content":""},{"lineNumber":39,"author":{"gitId":"-"},"content":"        verifyHttpParameterFailure();"},{"lineNumber":40,"author":{"gitId":"-"},"content":""},{"lineNumber":41,"author":{"gitId":"-"},"content":"        ______TS(\"Typical case, 2 courses. Expect 1 to be binned and 1 to stay.\");"},{"lineNumber":42,"author":{"gitId":"-"},"content":""},{"lineNumber":43,"author":{"gitId":"-"},"content":"        String[] submissionParams \u003d new String[] {"},{"lineNumber":44,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, instructor1OfCourse1.getCourseId(),"},{"lineNumber":45,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":46,"author":{"gitId":"-"},"content":""},{"lineNumber":47,"author":{"gitId":"-"},"content":"        CourseAttributes courseToBeDeleted \u003d logic.getCourse(instructor1OfCourse1.getCourseId());"},{"lineNumber":48,"author":{"gitId":"-"},"content":""},{"lineNumber":49,"author":{"gitId":"-"},"content":"        logic.createCourseAndInstructor(instructorId,"},{"lineNumber":50,"author":{"gitId":"-"},"content":"                CourseAttributes.builder(\"icdct.tpa.id1\")"},{"lineNumber":51,"author":{"gitId":"-"},"content":"                        .withName(\"New course\")"},{"lineNumber":52,"author":{"gitId":"-"},"content":"                        .withTimezone(\"UTC\")"},{"lineNumber":53,"author":{"gitId":"-"},"content":"                        .withInstitute(\"Test institute\")"},{"lineNumber":54,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":55,"author":{"gitId":"-"},"content":""},{"lineNumber":56,"author":{"gitId":"-"},"content":"        BinCourseAction binCourseAction \u003d getAction(submissionParams);"},{"lineNumber":57,"author":{"gitId":"-"},"content":"        JsonResult result \u003d getJsonResult(binCourseAction);"},{"lineNumber":58,"author":{"gitId":"-"},"content":"        CourseData courseData \u003d (CourseData) result.getOutput();"},{"lineNumber":59,"author":{"gitId":"-"},"content":""},{"lineNumber":60,"author":{"gitId":"-"},"content":"        verifyCourseData(courseData, courseToBeDeleted.getId(), courseToBeDeleted.getName(),"},{"lineNumber":61,"author":{"gitId":"-"},"content":"                courseToBeDeleted.getTimeZone());"},{"lineNumber":62,"author":{"gitId":"-"},"content":""},{"lineNumber":63,"author":{"gitId":"-"},"content":"        List\u003cInstructorAttributes\u003e instructors \u003d logic.getInstructorsForGoogleId(instructorId, false);"},{"lineNumber":64,"author":{"gitId":"-"},"content":"        List\u003cCourseAttributes\u003e courseList \u003d logic.getCoursesForInstructor(instructors);"},{"lineNumber":65,"author":{"gitId":"-"},"content":"        assertEquals(1, courseList.size());"},{"lineNumber":66,"author":{"gitId":"-"},"content":"        assertEquals(\"icdct.tpa.id1\", courseList.get(0).getId());"},{"lineNumber":67,"author":{"gitId":"-"},"content":""},{"lineNumber":68,"author":{"gitId":"-"},"content":"        assertNotNull(logic.getCourse(instructor1OfCourse1.getCourseId()).getDeletedAt());"},{"lineNumber":69,"author":{"gitId":"-"},"content":""},{"lineNumber":70,"author":{"gitId":"-"},"content":"        ______TS(\"Masquerade mode, delete last course\");"},{"lineNumber":71,"author":{"gitId":"-"},"content":""},{"lineNumber":72,"author":{"gitId":"-"},"content":"        loginAsAdmin();"},{"lineNumber":73,"author":{"gitId":"-"},"content":""},{"lineNumber":74,"author":{"gitId":"-"},"content":"        submissionParams \u003d new String[] {"},{"lineNumber":75,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, \"icdct.tpa.id1\","},{"lineNumber":76,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":77,"author":{"gitId":"-"},"content":""},{"lineNumber":78,"author":{"gitId":"-"},"content":"        binCourseAction \u003d getAction(addUserIdToParams(instructorId, submissionParams));"},{"lineNumber":79,"author":{"gitId":"-"},"content":"        result \u003d getJsonResult(binCourseAction);"},{"lineNumber":80,"author":{"gitId":"-"},"content":""},{"lineNumber":81,"author":{"gitId":"-"},"content":"        courseData \u003d (CourseData) result.getOutput();"},{"lineNumber":82,"author":{"gitId":"-"},"content":""},{"lineNumber":83,"author":{"gitId":"-"},"content":"        verifyCourseData(courseData, \"icdct.tpa.id1\", \"New course\", \"UTC\");"},{"lineNumber":84,"author":{"gitId":"-"},"content":"        assertFalse(courseData.getDeletionTimestamp() \u003d\u003d 0);"},{"lineNumber":85,"author":{"gitId":"-"},"content":"        assertNotNull(logic.getCourse(\"icdct.tpa.id1\").getDeletedAt());"},{"lineNumber":86,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":87,"author":{"gitId":"-"},"content":""},{"lineNumber":88,"author":{"gitId":"EuniceSim142"},"content":"    @Test(enabled \u003d false)"},{"lineNumber":89,"author":{"gitId":"-"},"content":"    protected void testExecute_nonExistentCourse_shouldFail() {"},{"lineNumber":90,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor1OfCourse1 \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":91,"author":{"gitId":"-"},"content":"        String instructorId \u003d instructor1OfCourse1.getGoogleId();"},{"lineNumber":92,"author":{"gitId":"-"},"content":""},{"lineNumber":93,"author":{"gitId":"-"},"content":"        loginAsInstructor(instructorId);"},{"lineNumber":94,"author":{"gitId":"-"},"content":""},{"lineNumber":95,"author":{"gitId":"-"},"content":"        String[] submissionParams \u003d new String[] {"},{"lineNumber":96,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, \"fake-course\","},{"lineNumber":97,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":98,"author":{"gitId":"-"},"content":""},{"lineNumber":99,"author":{"gitId":"-"},"content":"        assertNull(logic.getCourse(\"fake-course\"));"},{"lineNumber":100,"author":{"gitId":"-"},"content":""},{"lineNumber":101,"author":{"gitId":"-"},"content":"        EntityNotFoundException e \u003d verifyEntityNotFound(submissionParams);"},{"lineNumber":102,"author":{"gitId":"-"},"content":"        assertEquals(\"Trying to update non-existent Entity: \", e.getMessage());"},{"lineNumber":103,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":104,"author":{"gitId":"-"},"content":""},{"lineNumber":105,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":106,"author":{"gitId":"-"},"content":"    protected void testExecute_courseAlreadyBin_shouldFail() throws Exception {"},{"lineNumber":107,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor1OfCourse1 \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":108,"author":{"gitId":"-"},"content":"        String instructorId \u003d instructor1OfCourse1.getGoogleId();"},{"lineNumber":109,"author":{"gitId":"-"},"content":""},{"lineNumber":110,"author":{"gitId":"-"},"content":"        loginAsInstructor(instructorId);"},{"lineNumber":111,"author":{"gitId":"-"},"content":""},{"lineNumber":112,"author":{"gitId":"-"},"content":"        String[] submissionParams \u003d new String[] {"},{"lineNumber":113,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, instructor1OfCourse1.getCourseId(),"},{"lineNumber":114,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":115,"author":{"gitId":"-"},"content":""},{"lineNumber":116,"author":{"gitId":"-"},"content":"        logic.moveCourseToRecycleBin(instructor1OfCourse1.getCourseId());"},{"lineNumber":117,"author":{"gitId":"-"},"content":"        CourseAttributes courseInformation \u003d logic.getCourse(instructor1OfCourse1.getCourseId());"},{"lineNumber":118,"author":{"gitId":"-"},"content":"        assertNotNull(courseInformation.getDeletedAt());"},{"lineNumber":119,"author":{"gitId":"-"},"content":""},{"lineNumber":120,"author":{"gitId":"-"},"content":"        BinCourseAction binCourseAction \u003d getAction(submissionParams);"},{"lineNumber":121,"author":{"gitId":"-"},"content":"        JsonResult result \u003d getJsonResult(binCourseAction);"},{"lineNumber":122,"author":{"gitId":"-"},"content":"        CourseData courseData \u003d (CourseData) result.getOutput();"},{"lineNumber":123,"author":{"gitId":"-"},"content":""},{"lineNumber":124,"author":{"gitId":"-"},"content":"        verifyCourseData(courseData, courseInformation.getId(), courseInformation.getName(),"},{"lineNumber":125,"author":{"gitId":"-"},"content":"                courseInformation.getTimeZone());"},{"lineNumber":126,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":127,"author":{"gitId":"-"},"content":""},{"lineNumber":128,"author":{"gitId":"-"},"content":"    private void verifyCourseData(CourseData data, String courseId, String courseName, String timeZone) {"},{"lineNumber":129,"author":{"gitId":"-"},"content":"        assertEquals(data.getCourseId(), courseId);"},{"lineNumber":130,"author":{"gitId":"-"},"content":"        assertEquals(data.getCourseName(), courseName);"},{"lineNumber":131,"author":{"gitId":"-"},"content":"        assertEquals(data.getTimeZone(), timeZone);"},{"lineNumber":132,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":133,"author":{"gitId":"-"},"content":""},{"lineNumber":134,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":135,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":136,"author":{"gitId":"-"},"content":"    protected void testAccessControl() throws Exception {"},{"lineNumber":137,"author":{"gitId":"-"},"content":"        String[] submissionParams \u003d new String[] {"},{"lineNumber":138,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, \"idOfTypicalCourse1\","},{"lineNumber":139,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":140,"author":{"gitId":"-"},"content":"        verifyOnlyInstructorsOfTheSameCourseWithCorrectCoursePrivilegeCanAccess("},{"lineNumber":141,"author":{"gitId":"-"},"content":"                Const.InstructorPermissions.CAN_MODIFY_COURSE, submissionParams);"},{"lineNumber":142,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":143,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"EuniceSim142":3,"-":140}},{"path":"src/test/java/teammates/ui/webapi/CreateAccountRequestActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import org.testng.annotations.Test;"},{"lineNumber":4,"author":{"gitId":"-"},"content":""},{"lineNumber":5,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.AccountRequestAttributes;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import teammates.common.util.EmailType;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.util.EmailWrapper;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.ui.output.JoinLinkData;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import teammates.ui.request.AccountCreateRequest;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import teammates.ui.request.InvalidHttpRequestBodyException;"},{"lineNumber":12,"author":{"gitId":"-"},"content":""},{"lineNumber":13,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":14,"author":{"gitId":"-"},"content":" * SUT: {@link CreateAccountRequestAction}."},{"lineNumber":15,"author":{"gitId":"-"},"content":" */"},{"lineNumber":16,"author":{"gitId":"-"},"content":"public class CreateAccountRequestActionTest extends BaseActionTest\u003cCreateAccountRequestAction\u003e {"},{"lineNumber":17,"author":{"gitId":"-"},"content":""},{"lineNumber":18,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":19,"author":{"gitId":"-"},"content":"    protected String getActionUri() {"},{"lineNumber":20,"author":{"gitId":"-"},"content":"        return Const.ResourceURIs.ACCOUNT_REQUEST;"},{"lineNumber":21,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":22,"author":{"gitId":"-"},"content":""},{"lineNumber":23,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":24,"author":{"gitId":"-"},"content":"    protected String getRequestMethod() {"},{"lineNumber":25,"author":{"gitId":"-"},"content":"        return POST;"},{"lineNumber":26,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":27,"author":{"gitId":"-"},"content":""},{"lineNumber":28,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":29,"author":{"gitId":"kevin9foong"},"content":"    @Test(enabled \u003d false)"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    protected void testExecute() {"},{"lineNumber":31,"author":{"gitId":"-"},"content":"        loginAsAdmin();"},{"lineNumber":32,"author":{"gitId":"-"},"content":"        String name \u003d \"JamesBond\";"},{"lineNumber":33,"author":{"gitId":"-"},"content":"        String email \u003d \"jamesbond89@gmail.tmt\";"},{"lineNumber":34,"author":{"gitId":"-"},"content":"        String institute \u003d \"TEAMMATES Test Institute 1\";"},{"lineNumber":35,"author":{"gitId":"-"},"content":""},{"lineNumber":36,"author":{"gitId":"-"},"content":"        ______TS(\"Null parameters\");"},{"lineNumber":37,"author":{"gitId":"-"},"content":""},{"lineNumber":38,"author":{"gitId":"-"},"content":"        InvalidHttpRequestBodyException ex \u003d verifyHttpRequestBodyFailure(buildCreateRequest(null, institute, email));"},{"lineNumber":39,"author":{"gitId":"-"},"content":"        assertEquals(\"name cannot be null\", ex.getMessage());"},{"lineNumber":40,"author":{"gitId":"-"},"content":""},{"lineNumber":41,"author":{"gitId":"-"},"content":"        ex \u003d verifyHttpRequestBodyFailure(buildCreateRequest(name, null, email));"},{"lineNumber":42,"author":{"gitId":"-"},"content":"        assertEquals(\"institute cannot be null\", ex.getMessage());"},{"lineNumber":43,"author":{"gitId":"-"},"content":""},{"lineNumber":44,"author":{"gitId":"-"},"content":"        ex \u003d verifyHttpRequestBodyFailure(buildCreateRequest(name, institute, null));"},{"lineNumber":45,"author":{"gitId":"-"},"content":""},{"lineNumber":46,"author":{"gitId":"-"},"content":"        assertEquals(\"email cannot be null\", ex.getMessage());"},{"lineNumber":47,"author":{"gitId":"-"},"content":""},{"lineNumber":48,"author":{"gitId":"-"},"content":"        verifyNoTasksAdded();"},{"lineNumber":49,"author":{"gitId":"-"},"content":""},{"lineNumber":50,"author":{"gitId":"-"},"content":"        ______TS(\"Normal case\");"},{"lineNumber":51,"author":{"gitId":"-"},"content":""},{"lineNumber":52,"author":{"gitId":"-"},"content":"        String nameWithSpaces \u003d \"   \" + name + \"   \";"},{"lineNumber":53,"author":{"gitId":"-"},"content":"        String emailWithSpaces \u003d \"   \" + email + \"   \";"},{"lineNumber":54,"author":{"gitId":"-"},"content":"        String instituteWithSpaces \u003d \"   \" + institute + \"   \";"},{"lineNumber":55,"author":{"gitId":"-"},"content":""},{"lineNumber":56,"author":{"gitId":"-"},"content":"        AccountCreateRequest req \u003d buildCreateRequest(nameWithSpaces, instituteWithSpaces, emailWithSpaces);"},{"lineNumber":57,"author":{"gitId":"-"},"content":"        CreateAccountRequestAction a \u003d getAction(req);"},{"lineNumber":58,"author":{"gitId":"-"},"content":"        JsonResult r \u003d getJsonResult(a);"},{"lineNumber":59,"author":{"gitId":"-"},"content":""},{"lineNumber":60,"author":{"gitId":"-"},"content":"        AccountRequestAttributes accountRequestAttributes \u003d logic.getAccountRequest(email, institute);"},{"lineNumber":61,"author":{"gitId":"-"},"content":""},{"lineNumber":62,"author":{"gitId":"-"},"content":"        assertEquals(name, accountRequestAttributes.getName());"},{"lineNumber":63,"author":{"gitId":"-"},"content":"        assertEquals(email, accountRequestAttributes.getEmail());"},{"lineNumber":64,"author":{"gitId":"-"},"content":"        assertEquals(institute, accountRequestAttributes.getInstitute());"},{"lineNumber":65,"author":{"gitId":"-"},"content":"        assertNotNull(accountRequestAttributes.getRegistrationKey());"},{"lineNumber":66,"author":{"gitId":"-"},"content":""},{"lineNumber":67,"author":{"gitId":"-"},"content":"        String joinLink \u003d accountRequestAttributes.getRegistrationUrl();"},{"lineNumber":68,"author":{"gitId":"-"},"content":"        JoinLinkData output \u003d (JoinLinkData) r.getOutput();"},{"lineNumber":69,"author":{"gitId":"-"},"content":"        assertEquals(joinLink, output.getJoinLink());"},{"lineNumber":70,"author":{"gitId":"-"},"content":""},{"lineNumber":71,"author":{"gitId":"-"},"content":"        verifyNumberOfEmailsSent(1);"},{"lineNumber":72,"author":{"gitId":"-"},"content":"        verifySpecifiedTasksAdded(Const.TaskQueue.SEARCH_INDEXING_QUEUE_NAME, 1);"},{"lineNumber":73,"author":{"gitId":"-"},"content":""},{"lineNumber":74,"author":{"gitId":"-"},"content":"        EmailWrapper emailSent \u003d mockEmailSender.getEmailsSent().get(0);"},{"lineNumber":75,"author":{"gitId":"-"},"content":"        assertEquals(String.format(EmailType.NEW_INSTRUCTOR_ACCOUNT.getSubject(), name),"},{"lineNumber":76,"author":{"gitId":"-"},"content":"                emailSent.getSubject());"},{"lineNumber":77,"author":{"gitId":"-"},"content":"        assertEquals(email, emailSent.getRecipient());"},{"lineNumber":78,"author":{"gitId":"-"},"content":"        assertTrue(emailSent.getContent().contains(joinLink));"},{"lineNumber":79,"author":{"gitId":"-"},"content":""},{"lineNumber":80,"author":{"gitId":"-"},"content":"        ______TS(\"Account request already exists: instructor unregistered, email sent again\");"},{"lineNumber":81,"author":{"gitId":"-"},"content":""},{"lineNumber":82,"author":{"gitId":"-"},"content":"        a \u003d getAction(req);"},{"lineNumber":83,"author":{"gitId":"-"},"content":"        r \u003d getJsonResult(a);"},{"lineNumber":84,"author":{"gitId":"-"},"content":"        output \u003d (JoinLinkData) r.getOutput();"},{"lineNumber":85,"author":{"gitId":"-"},"content":"        assertEquals(joinLink, output.getJoinLink());"},{"lineNumber":86,"author":{"gitId":"-"},"content":""},{"lineNumber":87,"author":{"gitId":"-"},"content":"        verifyNumberOfEmailsSent(1);"},{"lineNumber":88,"author":{"gitId":"-"},"content":"        verifyNoTasksAdded(); // Account request not added to search indexing queue"},{"lineNumber":89,"author":{"gitId":"-"},"content":""},{"lineNumber":90,"author":{"gitId":"-"},"content":"        emailSent \u003d mockEmailSender.getEmailsSent().get(0);"},{"lineNumber":91,"author":{"gitId":"-"},"content":"        assertEquals(String.format(EmailType.NEW_INSTRUCTOR_ACCOUNT.getSubject(), name),"},{"lineNumber":92,"author":{"gitId":"-"},"content":"                emailSent.getSubject());"},{"lineNumber":93,"author":{"gitId":"-"},"content":"        assertEquals(email, emailSent.getRecipient());"},{"lineNumber":94,"author":{"gitId":"-"},"content":"        assertTrue(emailSent.getContent().contains(joinLink));"},{"lineNumber":95,"author":{"gitId":"-"},"content":""},{"lineNumber":96,"author":{"gitId":"-"},"content":"        ______TS(\"Account request already exists: instructor registered, InvalidOperationException thrown\");"},{"lineNumber":97,"author":{"gitId":"-"},"content":""},{"lineNumber":98,"author":{"gitId":"-"},"content":"        accountRequestAttributes \u003d typicalBundle.accountRequests.get(\"instructor1OfCourse1\");"},{"lineNumber":99,"author":{"gitId":"-"},"content":""},{"lineNumber":100,"author":{"gitId":"-"},"content":"        req \u003d buildCreateRequest(accountRequestAttributes.getName(),"},{"lineNumber":101,"author":{"gitId":"-"},"content":"                accountRequestAttributes.getInstitute(), accountRequestAttributes.getEmail());"},{"lineNumber":102,"author":{"gitId":"-"},"content":""},{"lineNumber":103,"author":{"gitId":"-"},"content":"        InvalidOperationException ioe \u003d verifyInvalidOperation(req);"},{"lineNumber":104,"author":{"gitId":"-"},"content":"        assertEquals(\"Cannot create account request as instructor has already registered.\", ioe.getMessage());"},{"lineNumber":105,"author":{"gitId":"-"},"content":""},{"lineNumber":106,"author":{"gitId":"-"},"content":"        ______TS(\"Error: invalid parameter\");"},{"lineNumber":107,"author":{"gitId":"-"},"content":""},{"lineNumber":108,"author":{"gitId":"-"},"content":"        String invalidName \u003d \"James%20Bond99\";"},{"lineNumber":109,"author":{"gitId":"-"},"content":""},{"lineNumber":110,"author":{"gitId":"-"},"content":"        req \u003d buildCreateRequest(invalidName, institute, emailWithSpaces);"},{"lineNumber":111,"author":{"gitId":"-"},"content":""},{"lineNumber":112,"author":{"gitId":"-"},"content":"        ex \u003d verifyHttpRequestBodyFailure(req);"},{"lineNumber":113,"author":{"gitId":"-"},"content":"        assertEquals(\"\\\"\" + invalidName + \"\\\" is not acceptable to TEAMMATES as a/an person name because \""},{"lineNumber":114,"author":{"gitId":"-"},"content":"                + \"it contains invalid characters. A/An person name must start with an \""},{"lineNumber":115,"author":{"gitId":"-"},"content":"                + \"alphanumeric character, and cannot contain any vertical bar (|) or percent sign (%).\","},{"lineNumber":116,"author":{"gitId":"-"},"content":"                ex.getMessage());"},{"lineNumber":117,"author":{"gitId":"-"},"content":""},{"lineNumber":118,"author":{"gitId":"-"},"content":"        verifyNoEmailsSent();"},{"lineNumber":119,"author":{"gitId":"-"},"content":"        verifyNoTasksAdded();"},{"lineNumber":120,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":121,"author":{"gitId":"-"},"content":""},{"lineNumber":122,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":123,"author":{"gitId":"kevin9foong"},"content":"    @Test(enabled \u003d false)"},{"lineNumber":124,"author":{"gitId":"-"},"content":"    protected void testAccessControl() {"},{"lineNumber":125,"author":{"gitId":"-"},"content":"        verifyOnlyAdminCanAccess();"},{"lineNumber":126,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":127,"author":{"gitId":"-"},"content":""},{"lineNumber":128,"author":{"gitId":"-"},"content":"    private AccountCreateRequest buildCreateRequest(String name, String institution, String email) {"},{"lineNumber":129,"author":{"gitId":"-"},"content":"        AccountCreateRequest req \u003d new AccountCreateRequest();"},{"lineNumber":130,"author":{"gitId":"-"},"content":""},{"lineNumber":131,"author":{"gitId":"-"},"content":"        req.setInstructorName(name);"},{"lineNumber":132,"author":{"gitId":"-"},"content":"        req.setInstructorInstitution(institution);"},{"lineNumber":133,"author":{"gitId":"-"},"content":"        req.setInstructorEmail(email);"},{"lineNumber":134,"author":{"gitId":"-"},"content":""},{"lineNumber":135,"author":{"gitId":"-"},"content":"        return req;"},{"lineNumber":136,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":137,"author":{"gitId":"-"},"content":""},{"lineNumber":138,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"-":136,"kevin9foong":2}},{"path":"src/test/java/teammates/ui/webapi/CreateCourseActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"EuniceSim142"},"content":"import org.testng.annotations.Ignore;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import org.testng.annotations.Test;"},{"lineNumber":5,"author":{"gitId":"-"},"content":""},{"lineNumber":6,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.CourseAttributes;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.InstructorAttributes;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.StudentAttributes;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import teammates.ui.output.CourseData;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import teammates.ui.request.CourseCreateRequest;"},{"lineNumber":12,"author":{"gitId":"-"},"content":""},{"lineNumber":13,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":14,"author":{"gitId":"-"},"content":" * SUT: {@link CreateCourseAction}."},{"lineNumber":15,"author":{"gitId":"-"},"content":" */"},{"lineNumber":16,"author":{"gitId":"EuniceSim142"},"content":"@Ignore"},{"lineNumber":17,"author":{"gitId":"-"},"content":"public class CreateCourseActionTest extends BaseActionTest\u003cCreateCourseAction\u003e {"},{"lineNumber":18,"author":{"gitId":"-"},"content":""},{"lineNumber":19,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":20,"author":{"gitId":"-"},"content":"    protected String getActionUri() {"},{"lineNumber":21,"author":{"gitId":"-"},"content":"        return Const.ResourceURIs.COURSE;"},{"lineNumber":22,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":23,"author":{"gitId":"-"},"content":""},{"lineNumber":24,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":25,"author":{"gitId":"-"},"content":"    protected String getRequestMethod() {"},{"lineNumber":26,"author":{"gitId":"-"},"content":"        return POST;"},{"lineNumber":27,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":28,"author":{"gitId":"-"},"content":""},{"lineNumber":29,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    @Test(enabled \u003d false)"},{"lineNumber":31,"author":{"gitId":"-"},"content":"    public void testExecute() {"},{"lineNumber":32,"author":{"gitId":"-"},"content":""},{"lineNumber":33,"author":{"gitId":"-"},"content":"        ______TS(\"Not enough parameters\");"},{"lineNumber":34,"author":{"gitId":"-"},"content":""},{"lineNumber":35,"author":{"gitId":"-"},"content":"        String[] submissionParams \u003d {"},{"lineNumber":36,"author":{"gitId":"-"},"content":"                Const.ParamsNames.INSTRUCTOR_INSTITUTION, \"TEAMMATES Test Institute 1\","},{"lineNumber":37,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":38,"author":{"gitId":"-"},"content":""},{"lineNumber":39,"author":{"gitId":"-"},"content":"        CourseCreateRequest courseCreateRequest \u003d new CourseCreateRequest();"},{"lineNumber":40,"author":{"gitId":"-"},"content":"        courseCreateRequest.setCourseName(\"New Course\");"},{"lineNumber":41,"author":{"gitId":"-"},"content":"        courseCreateRequest.setTimeZone(\"UTC\");"},{"lineNumber":42,"author":{"gitId":"-"},"content":"        courseCreateRequest.setCourseId(\"new-course\");"},{"lineNumber":43,"author":{"gitId":"-"},"content":""},{"lineNumber":44,"author":{"gitId":"-"},"content":"        verifyHttpRequestBodyFailure(null, submissionParams);"},{"lineNumber":45,"author":{"gitId":"-"},"content":"        verifyHttpParameterFailure(courseCreateRequest);"},{"lineNumber":46,"author":{"gitId":"-"},"content":""},{"lineNumber":47,"author":{"gitId":"-"},"content":"        ______TS(\"Typical case with new course id\");"},{"lineNumber":48,"author":{"gitId":"-"},"content":""},{"lineNumber":49,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor1OfCourse1 \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":50,"author":{"gitId":"-"},"content":"        String instructorId \u003d instructor1OfCourse1.getGoogleId();"},{"lineNumber":51,"author":{"gitId":"-"},"content":"        String courseId \u003d instructor1OfCourse1.getCourseId();"},{"lineNumber":52,"author":{"gitId":"-"},"content":""},{"lineNumber":53,"author":{"gitId":"-"},"content":"        if (logic.getCourse(\"new-course\") !\u003d null) {"},{"lineNumber":54,"author":{"gitId":"-"},"content":"            logic.deleteCourseCascade(\"new-course\");"},{"lineNumber":55,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":56,"author":{"gitId":"-"},"content":""},{"lineNumber":57,"author":{"gitId":"-"},"content":"        loginAsInstructor(instructorId);"},{"lineNumber":58,"author":{"gitId":"-"},"content":"        CreateCourseAction action \u003d getAction(courseCreateRequest, submissionParams);"},{"lineNumber":59,"author":{"gitId":"-"},"content":""},{"lineNumber":60,"author":{"gitId":"-"},"content":"        JsonResult result \u003d getJsonResult(action);"},{"lineNumber":61,"author":{"gitId":"-"},"content":""},{"lineNumber":62,"author":{"gitId":"-"},"content":"        verifySpecifiedTasksAdded(Const.TaskQueue.SEARCH_INDEXING_QUEUE_NAME, 1);"},{"lineNumber":63,"author":{"gitId":"-"},"content":""},{"lineNumber":64,"author":{"gitId":"-"},"content":"        CourseData courseData \u003d (CourseData) result.getOutput();"},{"lineNumber":65,"author":{"gitId":"-"},"content":"        assertEquals(courseData.getCourseId(), \"new-course\");"},{"lineNumber":66,"author":{"gitId":"-"},"content":"        assertEquals(courseData.getCourseName(), \"New Course\");"},{"lineNumber":67,"author":{"gitId":"-"},"content":"        assertEquals(courseData.getTimeZone(), \"UTC\");"},{"lineNumber":68,"author":{"gitId":"-"},"content":"        assertEquals(courseData.getInstitute(), \"TEAMMATES Test Institute 1\");"},{"lineNumber":69,"author":{"gitId":"-"},"content":""},{"lineNumber":70,"author":{"gitId":"-"},"content":"        CourseAttributes createdCourse \u003d logic.getCourse(\"new-course\");"},{"lineNumber":71,"author":{"gitId":"-"},"content":"        assertNotNull(createdCourse);"},{"lineNumber":72,"author":{"gitId":"-"},"content":"        assertEquals(\"New Course\", createdCourse.getName());"},{"lineNumber":73,"author":{"gitId":"-"},"content":"        assertEquals(\"UTC\", createdCourse.getTimeZone());"},{"lineNumber":74,"author":{"gitId":"-"},"content":"        assertEquals(\"TEAMMATES Test Institute 1\", createdCourse.getInstitute());"},{"lineNumber":75,"author":{"gitId":"-"},"content":""},{"lineNumber":76,"author":{"gitId":"-"},"content":"        ______TS(\"Typical case with existing course id\");"},{"lineNumber":77,"author":{"gitId":"-"},"content":""},{"lineNumber":78,"author":{"gitId":"-"},"content":"        courseCreateRequest.setCourseName(\"Existing Course\");"},{"lineNumber":79,"author":{"gitId":"-"},"content":"        courseCreateRequest.setTimeZone(\"UTC\");"},{"lineNumber":80,"author":{"gitId":"-"},"content":"        courseCreateRequest.setCourseId(courseId);"},{"lineNumber":81,"author":{"gitId":"-"},"content":""},{"lineNumber":82,"author":{"gitId":"-"},"content":"        InvalidOperationException ioe \u003d verifyInvalidOperation(courseCreateRequest, submissionParams);"},{"lineNumber":83,"author":{"gitId":"-"},"content":"        assertEquals(\"The course ID idOfTypicalCourse1 has been used by another course, possibly by some other user. \""},{"lineNumber":84,"author":{"gitId":"-"},"content":"                + \"Please try again with a different course ID.\", ioe.getMessage());"},{"lineNumber":85,"author":{"gitId":"-"},"content":""},{"lineNumber":86,"author":{"gitId":"-"},"content":"        ______TS(\"Typical case missing course id\");"},{"lineNumber":87,"author":{"gitId":"-"},"content":""},{"lineNumber":88,"author":{"gitId":"-"},"content":"        courseCreateRequest.setCourseName(\"New Course\");"},{"lineNumber":89,"author":{"gitId":"-"},"content":"        courseCreateRequest.setTimeZone(\"UTC\");"},{"lineNumber":90,"author":{"gitId":"-"},"content":"        courseCreateRequest.setCourseId(\"\");"},{"lineNumber":91,"author":{"gitId":"-"},"content":""},{"lineNumber":92,"author":{"gitId":"-"},"content":"        verifyHttpRequestBodyFailure(courseCreateRequest, submissionParams);"},{"lineNumber":93,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":94,"author":{"gitId":"-"},"content":""},{"lineNumber":95,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":96,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":97,"author":{"gitId":"-"},"content":"    protected void testAccessControl() {"},{"lineNumber":98,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor1OfCourse1 \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":99,"author":{"gitId":"-"},"content":"        loginAsInstructor(instructor1OfCourse1.getGoogleId());"},{"lineNumber":100,"author":{"gitId":"-"},"content":""},{"lineNumber":101,"author":{"gitId":"-"},"content":"        ______TS(\"Cannot access with wrong/missing institute param\");"},{"lineNumber":102,"author":{"gitId":"-"},"content":""},{"lineNumber":103,"author":{"gitId":"-"},"content":"        verifyHttpParameterFailureAcl();"},{"lineNumber":104,"author":{"gitId":"-"},"content":""},{"lineNumber":105,"author":{"gitId":"-"},"content":"        String[] submissionParams \u003d new String[] {"},{"lineNumber":106,"author":{"gitId":"-"},"content":"                Const.ParamsNames.INSTRUCTOR_INSTITUTION, \"Unknown Institute\","},{"lineNumber":107,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":108,"author":{"gitId":"-"},"content":"        verifyCannotAccess(submissionParams);"},{"lineNumber":109,"author":{"gitId":"-"},"content":""},{"lineNumber":110,"author":{"gitId":"-"},"content":"        ______TS(\"Can access with correct institute param\");"},{"lineNumber":111,"author":{"gitId":"-"},"content":""},{"lineNumber":112,"author":{"gitId":"-"},"content":"        submissionParams \u003d new String[] {"},{"lineNumber":113,"author":{"gitId":"-"},"content":"                Const.ParamsNames.INSTRUCTOR_INSTITUTION, \"TEAMMATES Test Institute 1\","},{"lineNumber":114,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":115,"author":{"gitId":"-"},"content":"        verifyCanAccess(submissionParams);"},{"lineNumber":116,"author":{"gitId":"-"},"content":""},{"lineNumber":117,"author":{"gitId":"-"},"content":"        ______TS(\"Cannot access without instructor privilege\");"},{"lineNumber":118,"author":{"gitId":"-"},"content":""},{"lineNumber":119,"author":{"gitId":"-"},"content":"        StudentAttributes studentAttributes \u003d typicalBundle.students.get(\"student1InCourse1\");"},{"lineNumber":120,"author":{"gitId":"-"},"content":"        loginAsStudent(studentAttributes.getGoogleId());"},{"lineNumber":121,"author":{"gitId":"-"},"content":""},{"lineNumber":122,"author":{"gitId":"-"},"content":"        verifyCannotAccess(submissionParams);"},{"lineNumber":123,"author":{"gitId":"-"},"content":""},{"lineNumber":124,"author":{"gitId":"-"},"content":"        loginAsUnregistered(\"Unknown\");"},{"lineNumber":125,"author":{"gitId":"-"},"content":""},{"lineNumber":126,"author":{"gitId":"-"},"content":"        verifyCannotAccess(submissionParams);"},{"lineNumber":127,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":128,"author":{"gitId":"-"},"content":""},{"lineNumber":129,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"EuniceSim142":2,"-":127}},{"path":"src/test/java/teammates/ui/webapi/CreateFeedbackQuestionActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.util.ArrayList;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.util.Arrays;"},{"lineNumber":5,"author":{"gitId":"-"},"content":""},{"lineNumber":6,"author":{"gitId":"hhdqirui"},"content":"import org.testng.annotations.Ignore;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import org.testng.annotations.Test;"},{"lineNumber":8,"author":{"gitId":"-"},"content":""},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.FeedbackParticipantType;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackSessionAttributes;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.InstructorAttributes;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackContributionQuestionDetails;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackQuestionType;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackTextQuestionDetails;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"import teammates.ui.output.FeedbackQuestionData;"},{"lineNumber":18,"author":{"gitId":"-"},"content":"import teammates.ui.output.FeedbackVisibilityType;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"import teammates.ui.output.NumberOfEntitiesToGiveFeedbackToSetting;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"import teammates.ui.request.FeedbackQuestionCreateRequest;"},{"lineNumber":21,"author":{"gitId":"-"},"content":""},{"lineNumber":22,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":23,"author":{"gitId":"-"},"content":" * SUT: {@link CreateFeedbackQuestionAction}."},{"lineNumber":24,"author":{"gitId":"-"},"content":" */"},{"lineNumber":25,"author":{"gitId":"hhdqirui"},"content":"@Ignore"},{"lineNumber":26,"author":{"gitId":"-"},"content":"public class CreateFeedbackQuestionActionTest extends BaseActionTest\u003cCreateFeedbackQuestionAction\u003e {"},{"lineNumber":27,"author":{"gitId":"-"},"content":""},{"lineNumber":28,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":29,"author":{"gitId":"-"},"content":"    protected String getActionUri() {"},{"lineNumber":30,"author":{"gitId":"-"},"content":"        return Const.ResourceURIs.QUESTION;"},{"lineNumber":31,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":32,"author":{"gitId":"-"},"content":""},{"lineNumber":33,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":34,"author":{"gitId":"-"},"content":"    protected String getRequestMethod() {"},{"lineNumber":35,"author":{"gitId":"-"},"content":"        return POST;"},{"lineNumber":36,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":37,"author":{"gitId":"-"},"content":""},{"lineNumber":38,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":39,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":40,"author":{"gitId":"-"},"content":"    protected void testExecute() {"},{"lineNumber":41,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor1OfCourse1 \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":42,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes session \u003d typicalBundle.feedbackSessions.get(\"session1InCourse1\");"},{"lineNumber":43,"author":{"gitId":"-"},"content":""},{"lineNumber":44,"author":{"gitId":"-"},"content":"        loginAsInstructor(instructor1OfCourse1.getGoogleId());"},{"lineNumber":45,"author":{"gitId":"-"},"content":""},{"lineNumber":46,"author":{"gitId":"-"},"content":"        ______TS(\"Not enough parameters\");"},{"lineNumber":47,"author":{"gitId":"-"},"content":""},{"lineNumber":48,"author":{"gitId":"-"},"content":"        verifyHttpParameterFailure();"},{"lineNumber":49,"author":{"gitId":"-"},"content":"        verifyHttpParameterFailure(Const.ParamsNames.COURSE_ID, session.getCourseId());"},{"lineNumber":50,"author":{"gitId":"-"},"content":"        verifyHttpParameterFailure(Const.ParamsNames.FEEDBACK_SESSION_NAME, session.getFeedbackSessionName());"},{"lineNumber":51,"author":{"gitId":"-"},"content":""},{"lineNumber":52,"author":{"gitId":"-"},"content":"        String[] params \u003d {"},{"lineNumber":53,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, session.getCourseId(),"},{"lineNumber":54,"author":{"gitId":"-"},"content":"                Const.ParamsNames.FEEDBACK_SESSION_NAME, session.getFeedbackSessionName(),"},{"lineNumber":55,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":56,"author":{"gitId":"-"},"content":""},{"lineNumber":57,"author":{"gitId":"-"},"content":"        ______TS(\"null question type\");"},{"lineNumber":58,"author":{"gitId":"-"},"content":""},{"lineNumber":59,"author":{"gitId":"-"},"content":"        FeedbackQuestionCreateRequest createRequest \u003d getTypicalTextQuestionCreateRequest();"},{"lineNumber":60,"author":{"gitId":"-"},"content":"        createRequest.setQuestionType(null);"},{"lineNumber":61,"author":{"gitId":"-"},"content":"        verifyHttpRequestBodyFailure(createRequest, params);"},{"lineNumber":62,"author":{"gitId":"-"},"content":""},{"lineNumber":63,"author":{"gitId":"-"},"content":"        ______TS(\"Invalid questionNumber\");"},{"lineNumber":64,"author":{"gitId":"-"},"content":""},{"lineNumber":65,"author":{"gitId":"-"},"content":"        createRequest \u003d getTypicalTextQuestionCreateRequest();"},{"lineNumber":66,"author":{"gitId":"-"},"content":"        createRequest.setQuestionNumber(0);"},{"lineNumber":67,"author":{"gitId":"-"},"content":"        verifyHttpRequestBodyFailure(createRequest, params);"},{"lineNumber":68,"author":{"gitId":"-"},"content":""},{"lineNumber":69,"author":{"gitId":"-"},"content":"        ______TS(\"Failure: Invalid giverType\");"},{"lineNumber":70,"author":{"gitId":"-"},"content":""},{"lineNumber":71,"author":{"gitId":"-"},"content":"        createRequest \u003d getTypicalTextQuestionCreateRequest();"},{"lineNumber":72,"author":{"gitId":"-"},"content":"        createRequest.setGiverType(FeedbackParticipantType.NONE);"},{"lineNumber":73,"author":{"gitId":"-"},"content":"        verifyHttpRequestBodyFailure(createRequest, params);"},{"lineNumber":74,"author":{"gitId":"-"},"content":""},{"lineNumber":75,"author":{"gitId":"-"},"content":"        ______TS(\"Failure: empty question brief\");"},{"lineNumber":76,"author":{"gitId":"-"},"content":""},{"lineNumber":77,"author":{"gitId":"-"},"content":"        createRequest \u003d getTypicalTextQuestionCreateRequest();"},{"lineNumber":78,"author":{"gitId":"-"},"content":"        createRequest.setQuestionBrief(\"\");"},{"lineNumber":79,"author":{"gitId":"-"},"content":"        verifyHttpRequestBodyFailure(createRequest, params);"},{"lineNumber":80,"author":{"gitId":"-"},"content":""},{"lineNumber":81,"author":{"gitId":"-"},"content":"        ______TS(\"Typical case\");"},{"lineNumber":82,"author":{"gitId":"-"},"content":""},{"lineNumber":83,"author":{"gitId":"-"},"content":"        createRequest \u003d getTypicalTextQuestionCreateRequest();"},{"lineNumber":84,"author":{"gitId":"-"},"content":"        CreateFeedbackQuestionAction a \u003d getAction(createRequest, params);"},{"lineNumber":85,"author":{"gitId":"-"},"content":"        JsonResult r \u003d getJsonResult(a);"},{"lineNumber":86,"author":{"gitId":"-"},"content":""},{"lineNumber":87,"author":{"gitId":"-"},"content":"        FeedbackQuestionData questionResponse \u003d (FeedbackQuestionData) r.getOutput();"},{"lineNumber":88,"author":{"gitId":"-"},"content":""},{"lineNumber":89,"author":{"gitId":"-"},"content":"        assertEquals(\"this is the description\", questionResponse.getQuestionDescription());"},{"lineNumber":90,"author":{"gitId":"-"},"content":"        assertNotNull(questionResponse.getFeedbackQuestionId());"},{"lineNumber":91,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes questionAttributes \u003d"},{"lineNumber":92,"author":{"gitId":"-"},"content":"                logic.getFeedbackQuestion(session.getFeedbackSessionName(),"},{"lineNumber":93,"author":{"gitId":"-"},"content":"                        session.getCourseId(), createRequest.getQuestionNumber());"},{"lineNumber":94,"author":{"gitId":"-"},"content":"        // verify question is created"},{"lineNumber":95,"author":{"gitId":"-"},"content":"        assertEquals(\"this is the description\", questionAttributes.getQuestionDescription());"},{"lineNumber":96,"author":{"gitId":"-"},"content":""},{"lineNumber":97,"author":{"gitId":"-"},"content":"        ______TS(\"Custom number of entity to give feedback to\");"},{"lineNumber":98,"author":{"gitId":"-"},"content":""},{"lineNumber":99,"author":{"gitId":"-"},"content":"        createRequest \u003d getTypicalTextQuestionCreateRequest();"},{"lineNumber":100,"author":{"gitId":"-"},"content":"        createRequest.setNumberOfEntitiesToGiveFeedbackToSetting(NumberOfEntitiesToGiveFeedbackToSetting.CUSTOM);"},{"lineNumber":101,"author":{"gitId":"-"},"content":"        createRequest.setCustomNumberOfEntitiesToGiveFeedbackTo(100);"},{"lineNumber":102,"author":{"gitId":"-"},"content":"        createRequest.setGiverType(FeedbackParticipantType.STUDENTS);"},{"lineNumber":103,"author":{"gitId":"-"},"content":"        createRequest.setRecipientType(FeedbackParticipantType.STUDENTS);"},{"lineNumber":104,"author":{"gitId":"-"},"content":"        a \u003d getAction(createRequest, params);"},{"lineNumber":105,"author":{"gitId":"-"},"content":"        r \u003d getJsonResult(a);"},{"lineNumber":106,"author":{"gitId":"-"},"content":""},{"lineNumber":107,"author":{"gitId":"-"},"content":"        questionResponse \u003d (FeedbackQuestionData) r.getOutput();"},{"lineNumber":108,"author":{"gitId":"-"},"content":""},{"lineNumber":109,"author":{"gitId":"-"},"content":"        assertEquals(100, questionResponse.getCustomNumberOfEntitiesToGiveFeedbackTo().intValue());"},{"lineNumber":110,"author":{"gitId":"-"},"content":"        assertNotNull(questionResponse.getFeedbackQuestionId());"},{"lineNumber":111,"author":{"gitId":"-"},"content":"        questionAttributes \u003d"},{"lineNumber":112,"author":{"gitId":"-"},"content":"                logic.getFeedbackQuestion(session.getFeedbackSessionName(),"},{"lineNumber":113,"author":{"gitId":"-"},"content":"                        session.getCourseId(), createRequest.getQuestionNumber());"},{"lineNumber":114,"author":{"gitId":"-"},"content":"        // verify question is created"},{"lineNumber":115,"author":{"gitId":"-"},"content":"        assertEquals(100, questionAttributes.getNumberOfEntitiesToGiveFeedbackTo());"},{"lineNumber":116,"author":{"gitId":"-"},"content":""},{"lineNumber":117,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":118,"author":{"gitId":"-"},"content":""},{"lineNumber":119,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":120,"author":{"gitId":"-"},"content":"    protected void testExecute_masqueradeMode_shouldCreateQuestionSuccessfully() {"},{"lineNumber":121,"author":{"gitId":"-"},"content":"        loginAsAdmin();"},{"lineNumber":122,"author":{"gitId":"-"},"content":""},{"lineNumber":123,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor1OfCourse1 \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":124,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes session \u003d typicalBundle.feedbackSessions.get(\"session1InCourse1\");"},{"lineNumber":125,"author":{"gitId":"-"},"content":""},{"lineNumber":126,"author":{"gitId":"-"},"content":"        String[] params \u003d {"},{"lineNumber":127,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, session.getCourseId(),"},{"lineNumber":128,"author":{"gitId":"-"},"content":"                Const.ParamsNames.FEEDBACK_SESSION_NAME, session.getFeedbackSessionName(),"},{"lineNumber":129,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":130,"author":{"gitId":"-"},"content":"        params \u003d addUserIdToParams(instructor1OfCourse1.getGoogleId(), params);"},{"lineNumber":131,"author":{"gitId":"-"},"content":""},{"lineNumber":132,"author":{"gitId":"-"},"content":"        FeedbackQuestionCreateRequest createRequest \u003d getTypicalTextQuestionCreateRequest();"},{"lineNumber":133,"author":{"gitId":"-"},"content":"        CreateFeedbackQuestionAction a \u003d getAction(createRequest, params);"},{"lineNumber":134,"author":{"gitId":"-"},"content":"        JsonResult r \u003d getJsonResult(a);"},{"lineNumber":135,"author":{"gitId":"-"},"content":""},{"lineNumber":136,"author":{"gitId":"-"},"content":"        FeedbackQuestionData questionResponse \u003d (FeedbackQuestionData) r.getOutput();"},{"lineNumber":137,"author":{"gitId":"-"},"content":""},{"lineNumber":138,"author":{"gitId":"-"},"content":"        assertEquals(\"this is the description\", questionResponse.getQuestionDescription());"},{"lineNumber":139,"author":{"gitId":"-"},"content":"        assertNotNull(questionResponse.getFeedbackQuestionId());"},{"lineNumber":140,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes questionAttributes \u003d"},{"lineNumber":141,"author":{"gitId":"-"},"content":"                logic.getFeedbackQuestion(session.getFeedbackSessionName(),"},{"lineNumber":142,"author":{"gitId":"-"},"content":"                        session.getCourseId(), createRequest.getQuestionNumber());"},{"lineNumber":143,"author":{"gitId":"-"},"content":"        // verify question is created"},{"lineNumber":144,"author":{"gitId":"-"},"content":"        assertEquals(\"this is the description\", questionAttributes.getQuestionDescription());"},{"lineNumber":145,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":146,"author":{"gitId":"-"},"content":""},{"lineNumber":147,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":148,"author":{"gitId":"-"},"content":"    public void testExecute_contributionQuestion_shouldCreateQuestionSuccessfully() {"},{"lineNumber":149,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor1OfCourse1 \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":150,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes session \u003d typicalBundle.feedbackSessions.get(\"session1InCourse1\");"},{"lineNumber":151,"author":{"gitId":"-"},"content":""},{"lineNumber":152,"author":{"gitId":"-"},"content":"        loginAsInstructor(instructor1OfCourse1.getGoogleId());"},{"lineNumber":153,"author":{"gitId":"-"},"content":""},{"lineNumber":154,"author":{"gitId":"-"},"content":"        String[] params \u003d {"},{"lineNumber":155,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, session.getCourseId(),"},{"lineNumber":156,"author":{"gitId":"-"},"content":"                Const.ParamsNames.FEEDBACK_SESSION_NAME, session.getFeedbackSessionName(),"},{"lineNumber":157,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":158,"author":{"gitId":"-"},"content":""},{"lineNumber":159,"author":{"gitId":"-"},"content":"        ______TS(\"Failure: Invalid feedback path\");"},{"lineNumber":160,"author":{"gitId":"-"},"content":""},{"lineNumber":161,"author":{"gitId":"-"},"content":"        // contribution question cannot have students -\u003e students feedback path"},{"lineNumber":162,"author":{"gitId":"-"},"content":"        FeedbackQuestionCreateRequest createRequest \u003d getTypicalContributionQuestionCreateRequest();"},{"lineNumber":163,"author":{"gitId":"-"},"content":"        createRequest.setGiverType(FeedbackParticipantType.STUDENTS);"},{"lineNumber":164,"author":{"gitId":"-"},"content":"        createRequest.setRecipientType(FeedbackParticipantType.STUDENTS);"},{"lineNumber":165,"author":{"gitId":"-"},"content":"        verifyHttpRequestBodyFailure(createRequest, params);"},{"lineNumber":166,"author":{"gitId":"-"},"content":""},{"lineNumber":167,"author":{"gitId":"-"},"content":"        ______TS(\"Typical case\");"},{"lineNumber":168,"author":{"gitId":"-"},"content":""},{"lineNumber":169,"author":{"gitId":"-"},"content":"        createRequest \u003d getTypicalContributionQuestionCreateRequest();"},{"lineNumber":170,"author":{"gitId":"-"},"content":"        CreateFeedbackQuestionAction a \u003d getAction(createRequest, params);"},{"lineNumber":171,"author":{"gitId":"-"},"content":"        JsonResult r \u003d getJsonResult(a);"},{"lineNumber":172,"author":{"gitId":"-"},"content":""},{"lineNumber":173,"author":{"gitId":"-"},"content":"        FeedbackQuestionData questionResponse \u003d (FeedbackQuestionData) r.getOutput();"},{"lineNumber":174,"author":{"gitId":"-"},"content":"        assertEquals(FeedbackQuestionType.CONTRIB, questionResponse.getQuestionType());"},{"lineNumber":175,"author":{"gitId":"-"},"content":"        assertNotNull(questionResponse.getFeedbackQuestionId());"},{"lineNumber":176,"author":{"gitId":"-"},"content":"        FeedbackQuestionAttributes questionAttributes \u003d"},{"lineNumber":177,"author":{"gitId":"-"},"content":"                logic.getFeedbackQuestion(session.getFeedbackSessionName(),"},{"lineNumber":178,"author":{"gitId":"-"},"content":"                        session.getCourseId(), createRequest.getQuestionNumber());"},{"lineNumber":179,"author":{"gitId":"-"},"content":"        // verify question is created"},{"lineNumber":180,"author":{"gitId":"-"},"content":"        assertEquals(FeedbackQuestionType.CONTRIB, questionAttributes.getQuestionType());"},{"lineNumber":181,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":182,"author":{"gitId":"-"},"content":""},{"lineNumber":183,"author":{"gitId":"-"},"content":"    private FeedbackQuestionCreateRequest getTypicalTextQuestionCreateRequest() {"},{"lineNumber":184,"author":{"gitId":"-"},"content":"        FeedbackQuestionCreateRequest createRequest \u003d new FeedbackQuestionCreateRequest();"},{"lineNumber":185,"author":{"gitId":"-"},"content":"        createRequest.setQuestionNumber(2);"},{"lineNumber":186,"author":{"gitId":"-"},"content":"        createRequest.setQuestionBrief(\"this is the brief\");"},{"lineNumber":187,"author":{"gitId":"-"},"content":"        createRequest.setQuestionDescription(\"this is the description\");"},{"lineNumber":188,"author":{"gitId":"-"},"content":"        FeedbackTextQuestionDetails textQuestionDetails \u003d new FeedbackTextQuestionDetails();"},{"lineNumber":189,"author":{"gitId":"-"},"content":"        textQuestionDetails.setRecommendedLength(800);"},{"lineNumber":190,"author":{"gitId":"-"},"content":"        createRequest.setQuestionDetails(textQuestionDetails);"},{"lineNumber":191,"author":{"gitId":"-"},"content":"        createRequest.setQuestionType(FeedbackQuestionType.TEXT);"},{"lineNumber":192,"author":{"gitId":"-"},"content":"        createRequest.setGiverType(FeedbackParticipantType.STUDENTS);"},{"lineNumber":193,"author":{"gitId":"-"},"content":"        createRequest.setRecipientType(FeedbackParticipantType.INSTRUCTORS);"},{"lineNumber":194,"author":{"gitId":"-"},"content":"        createRequest.setNumberOfEntitiesToGiveFeedbackToSetting(NumberOfEntitiesToGiveFeedbackToSetting.UNLIMITED);"},{"lineNumber":195,"author":{"gitId":"-"},"content":""},{"lineNumber":196,"author":{"gitId":"-"},"content":"        createRequest.setShowResponsesTo(new ArrayList\u003c\u003e());"},{"lineNumber":197,"author":{"gitId":"-"},"content":"        createRequest.setShowGiverNameTo(new ArrayList\u003c\u003e());"},{"lineNumber":198,"author":{"gitId":"-"},"content":"        createRequest.setShowRecipientNameTo(new ArrayList\u003c\u003e());"},{"lineNumber":199,"author":{"gitId":"-"},"content":""},{"lineNumber":200,"author":{"gitId":"-"},"content":"        return createRequest;"},{"lineNumber":201,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":202,"author":{"gitId":"-"},"content":""},{"lineNumber":203,"author":{"gitId":"-"},"content":"    private FeedbackQuestionCreateRequest getTypicalContributionQuestionCreateRequest() {"},{"lineNumber":204,"author":{"gitId":"-"},"content":"        FeedbackQuestionCreateRequest createRequest \u003d new FeedbackQuestionCreateRequest();"},{"lineNumber":205,"author":{"gitId":"-"},"content":"        createRequest.setQuestionNumber(1);"},{"lineNumber":206,"author":{"gitId":"-"},"content":"        createRequest.setQuestionBrief(\"this is the brief for contribution question\");"},{"lineNumber":207,"author":{"gitId":"-"},"content":"        createRequest.setQuestionDescription(\"this is the description for contribution question\");"},{"lineNumber":208,"author":{"gitId":"-"},"content":"        FeedbackContributionQuestionDetails textQuestionDetails \u003d new FeedbackContributionQuestionDetails();"},{"lineNumber":209,"author":{"gitId":"-"},"content":"        createRequest.setQuestionDetails(textQuestionDetails);"},{"lineNumber":210,"author":{"gitId":"-"},"content":"        createRequest.setQuestionType(FeedbackQuestionType.CONTRIB);"},{"lineNumber":211,"author":{"gitId":"-"},"content":"        createRequest.setGiverType(FeedbackParticipantType.STUDENTS);"},{"lineNumber":212,"author":{"gitId":"-"},"content":"        createRequest.setRecipientType(FeedbackParticipantType.OWN_TEAM_MEMBERS_INCLUDING_SELF);"},{"lineNumber":213,"author":{"gitId":"-"},"content":"        createRequest.setNumberOfEntitiesToGiveFeedbackToSetting(NumberOfEntitiesToGiveFeedbackToSetting.UNLIMITED);"},{"lineNumber":214,"author":{"gitId":"-"},"content":""},{"lineNumber":215,"author":{"gitId":"-"},"content":"        createRequest.setShowResponsesTo(Arrays.asList(FeedbackVisibilityType.INSTRUCTORS));"},{"lineNumber":216,"author":{"gitId":"-"},"content":"        createRequest.setShowGiverNameTo(Arrays.asList(FeedbackVisibilityType.INSTRUCTORS));"},{"lineNumber":217,"author":{"gitId":"-"},"content":"        createRequest.setShowRecipientNameTo(Arrays.asList(FeedbackVisibilityType.INSTRUCTORS));"},{"lineNumber":218,"author":{"gitId":"-"},"content":""},{"lineNumber":219,"author":{"gitId":"-"},"content":"        return createRequest;"},{"lineNumber":220,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":221,"author":{"gitId":"-"},"content":""},{"lineNumber":222,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":223,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":224,"author":{"gitId":"-"},"content":"    protected void testAccessControl() throws Exception {"},{"lineNumber":225,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor1OfCourse1 \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":226,"author":{"gitId":"-"},"content":"        FeedbackSessionAttributes fs \u003d typicalBundle.feedbackSessions.get(\"session1InCourse1\");"},{"lineNumber":227,"author":{"gitId":"-"},"content":""},{"lineNumber":228,"author":{"gitId":"-"},"content":"        ______TS(\"non-existent feedback session\");"},{"lineNumber":229,"author":{"gitId":"-"},"content":""},{"lineNumber":230,"author":{"gitId":"-"},"content":"        String[] submissionParams \u003d new String[] {"},{"lineNumber":231,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, fs.getCourseId(),"},{"lineNumber":232,"author":{"gitId":"-"},"content":"                Const.ParamsNames.FEEDBACK_SESSION_NAME, \"abcRandomSession\","},{"lineNumber":233,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":234,"author":{"gitId":"-"},"content":""},{"lineNumber":235,"author":{"gitId":"-"},"content":"        loginAsInstructor(instructor1OfCourse1.getGoogleId());"},{"lineNumber":236,"author":{"gitId":"-"},"content":"        verifyEntityNotFoundAcl(submissionParams);"},{"lineNumber":237,"author":{"gitId":"-"},"content":""},{"lineNumber":238,"author":{"gitId":"-"},"content":"        ______TS(\"inaccessible without ModifySessionPrivilege\");"},{"lineNumber":239,"author":{"gitId":"-"},"content":""},{"lineNumber":240,"author":{"gitId":"-"},"content":"        submissionParams \u003d new String[] {"},{"lineNumber":241,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, fs.getCourseId(),"},{"lineNumber":242,"author":{"gitId":"-"},"content":"                Const.ParamsNames.FEEDBACK_SESSION_NAME, fs.getFeedbackSessionName(),"},{"lineNumber":243,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":244,"author":{"gitId":"-"},"content":""},{"lineNumber":245,"author":{"gitId":"-"},"content":"        verifyInaccessibleWithoutModifySessionPrivilege(submissionParams);"},{"lineNumber":246,"author":{"gitId":"-"},"content":""},{"lineNumber":247,"author":{"gitId":"-"},"content":"        ______TS(\"only instructors of the same course with correct privilege can access\");"},{"lineNumber":248,"author":{"gitId":"-"},"content":""},{"lineNumber":249,"author":{"gitId":"-"},"content":"        verifyOnlyInstructorsOfTheSameCourseWithCorrectCoursePrivilegeCanAccess("},{"lineNumber":250,"author":{"gitId":"-"},"content":"                Const.InstructorPermissions.CAN_MODIFY_SESSION, submissionParams);"},{"lineNumber":251,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":252,"author":{"gitId":"-"},"content":""},{"lineNumber":253,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"hhdqirui":2,"-":251}},{"path":"src/test/java/teammates/ui/webapi/DeleteAccountActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"domlimm"},"content":"import org.testng.annotations.Ignore;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import org.testng.annotations.Test;"},{"lineNumber":5,"author":{"gitId":"-"},"content":""},{"lineNumber":6,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.AccountAttributes;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.ui.output.MessageOutput;"},{"lineNumber":9,"author":{"gitId":"-"},"content":""},{"lineNumber":10,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":11,"author":{"gitId":"-"},"content":" * SUT: {@link DeleteAccountAction}."},{"lineNumber":12,"author":{"gitId":"-"},"content":" */"},{"lineNumber":13,"author":{"gitId":"domlimm"},"content":"@Ignore"},{"lineNumber":14,"author":{"gitId":"-"},"content":"public class DeleteAccountActionTest extends BaseActionTest\u003cDeleteAccountAction\u003e {"},{"lineNumber":15,"author":{"gitId":"-"},"content":""},{"lineNumber":16,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":17,"author":{"gitId":"-"},"content":"    protected String getActionUri() {"},{"lineNumber":18,"author":{"gitId":"-"},"content":"        return Const.ResourceURIs.ACCOUNT;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":20,"author":{"gitId":"-"},"content":""},{"lineNumber":21,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":22,"author":{"gitId":"-"},"content":"    protected String getRequestMethod() {"},{"lineNumber":23,"author":{"gitId":"-"},"content":"        return DELETE;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":25,"author":{"gitId":"-"},"content":""},{"lineNumber":26,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":27,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":28,"author":{"gitId":"-"},"content":"    protected void testExecute() {"},{"lineNumber":29,"author":{"gitId":"-"},"content":"        AccountAttributes acc \u003d typicalBundle.accounts.get(\"instructor1OfCourse1\");"},{"lineNumber":30,"author":{"gitId":"-"},"content":""},{"lineNumber":31,"author":{"gitId":"-"},"content":"        ______TS(\"Not enough parameters\");"},{"lineNumber":32,"author":{"gitId":"-"},"content":""},{"lineNumber":33,"author":{"gitId":"-"},"content":"        verifyHttpParameterFailure();"},{"lineNumber":34,"author":{"gitId":"-"},"content":""},{"lineNumber":35,"author":{"gitId":"-"},"content":"        ______TS(\"Typical case, delete an existing account\");"},{"lineNumber":36,"author":{"gitId":"-"},"content":""},{"lineNumber":37,"author":{"gitId":"-"},"content":"        String[] submissionParams \u003d new String[] {"},{"lineNumber":38,"author":{"gitId":"-"},"content":"                Const.ParamsNames.INSTRUCTOR_ID, acc.getGoogleId(),"},{"lineNumber":39,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":40,"author":{"gitId":"-"},"content":""},{"lineNumber":41,"author":{"gitId":"-"},"content":"        DeleteAccountAction action \u003d getAction(submissionParams);"},{"lineNumber":42,"author":{"gitId":"-"},"content":"        JsonResult result \u003d getJsonResult(action);"},{"lineNumber":43,"author":{"gitId":"-"},"content":""},{"lineNumber":44,"author":{"gitId":"-"},"content":"        MessageOutput msg \u003d (MessageOutput) result.getOutput();"},{"lineNumber":45,"author":{"gitId":"-"},"content":""},{"lineNumber":46,"author":{"gitId":"-"},"content":"        assertEquals(msg.getMessage(), \"Account is successfully deleted.\");"},{"lineNumber":47,"author":{"gitId":"-"},"content":""},{"lineNumber":48,"author":{"gitId":"-"},"content":"        assertNull(logic.getAccount(acc.getGoogleId()));"},{"lineNumber":49,"author":{"gitId":"-"},"content":""},{"lineNumber":50,"author":{"gitId":"-"},"content":"        ______TS(\"Typical case, delete non-existing account\");"},{"lineNumber":51,"author":{"gitId":"-"},"content":""},{"lineNumber":52,"author":{"gitId":"-"},"content":"        submissionParams \u003d new String[] {"},{"lineNumber":53,"author":{"gitId":"-"},"content":"                Const.ParamsNames.INSTRUCTOR_ID, \"non-existing-account\","},{"lineNumber":54,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":55,"author":{"gitId":"-"},"content":""},{"lineNumber":56,"author":{"gitId":"-"},"content":"        action \u003d getAction(submissionParams);"},{"lineNumber":57,"author":{"gitId":"-"},"content":"        result \u003d getJsonResult(action);"},{"lineNumber":58,"author":{"gitId":"-"},"content":"        msg \u003d (MessageOutput) result.getOutput();"},{"lineNumber":59,"author":{"gitId":"-"},"content":""},{"lineNumber":60,"author":{"gitId":"-"},"content":"        // should fail silently."},{"lineNumber":61,"author":{"gitId":"-"},"content":"        assertEquals(msg.getMessage(), \"Account is successfully deleted.\");"},{"lineNumber":62,"author":{"gitId":"-"},"content":""},{"lineNumber":63,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":64,"author":{"gitId":"-"},"content":""},{"lineNumber":65,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":66,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":67,"author":{"gitId":"-"},"content":"    protected void testAccessControl() {"},{"lineNumber":68,"author":{"gitId":"-"},"content":"        verifyOnlyAdminCanAccess();"},{"lineNumber":69,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":70,"author":{"gitId":"-"},"content":""},{"lineNumber":71,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"domlimm":2,"-":69}},{"path":"src/test/java/teammates/ui/webapi/DeleteAccountRequestActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import org.testng.annotations.Test;"},{"lineNumber":4,"author":{"gitId":"-"},"content":""},{"lineNumber":5,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.AccountRequestAttributes;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import teammates.ui.output.MessageOutput;"},{"lineNumber":8,"author":{"gitId":"-"},"content":""},{"lineNumber":9,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":10,"author":{"gitId":"-"},"content":" * SUT: {@link DeleteAccountRequestAction}."},{"lineNumber":11,"author":{"gitId":"-"},"content":" */"},{"lineNumber":12,"author":{"gitId":"-"},"content":"public class DeleteAccountRequestActionTest extends BaseActionTest\u003cDeleteAccountRequestAction\u003e {"},{"lineNumber":13,"author":{"gitId":"-"},"content":""},{"lineNumber":14,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":15,"author":{"gitId":"-"},"content":"    protected String getActionUri() {"},{"lineNumber":16,"author":{"gitId":"-"},"content":"        return Const.ResourceURIs.ACCOUNT_REQUEST;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":18,"author":{"gitId":"-"},"content":""},{"lineNumber":19,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":20,"author":{"gitId":"-"},"content":"    protected String getRequestMethod() {"},{"lineNumber":21,"author":{"gitId":"-"},"content":"        return DELETE;"},{"lineNumber":22,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":23,"author":{"gitId":"-"},"content":""},{"lineNumber":24,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":25,"author":{"gitId":"kevin9foong"},"content":"    @Test(enabled \u003d false)"},{"lineNumber":26,"author":{"gitId":"-"},"content":"    protected void testExecute() {"},{"lineNumber":27,"author":{"gitId":"-"},"content":"        AccountRequestAttributes registeredAccountRequest \u003d typicalBundle.accountRequests.get(\"instructor1OfCourse1\");"},{"lineNumber":28,"author":{"gitId":"-"},"content":"        AccountRequestAttributes unregisteredAccountRequest \u003d typicalBundle.accountRequests.get(\"unregisteredInstructor1\");"},{"lineNumber":29,"author":{"gitId":"-"},"content":""},{"lineNumber":30,"author":{"gitId":"-"},"content":"        ______TS(\"Not enough parameters\");"},{"lineNumber":31,"author":{"gitId":"-"},"content":""},{"lineNumber":32,"author":{"gitId":"-"},"content":"        verifyHttpParameterFailure();"},{"lineNumber":33,"author":{"gitId":"-"},"content":""},{"lineNumber":34,"author":{"gitId":"-"},"content":"        ______TS(\"Deleting an account request of a registered instructor should fail\");"},{"lineNumber":35,"author":{"gitId":"-"},"content":""},{"lineNumber":36,"author":{"gitId":"-"},"content":"        String[] submissionParams \u003d new String[] {"},{"lineNumber":37,"author":{"gitId":"-"},"content":"                Const.ParamsNames.INSTRUCTOR_EMAIL, registeredAccountRequest.getEmail(),"},{"lineNumber":38,"author":{"gitId":"-"},"content":"                Const.ParamsNames.INSTRUCTOR_INSTITUTION, registeredAccountRequest.getInstitute(),"},{"lineNumber":39,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":40,"author":{"gitId":"-"},"content":""},{"lineNumber":41,"author":{"gitId":"-"},"content":"        InvalidOperationException ex \u003d verifyInvalidOperation(submissionParams);"},{"lineNumber":42,"author":{"gitId":"-"},"content":"        assertEquals(\"Account request of a registered instructor cannot be deleted.\", ex.getMessage());"},{"lineNumber":43,"author":{"gitId":"-"},"content":"        assertNotNull(logic.getAccountRequest(registeredAccountRequest.getEmail(), registeredAccountRequest.getInstitute()));"},{"lineNumber":44,"author":{"gitId":"-"},"content":""},{"lineNumber":45,"author":{"gitId":"-"},"content":"        ______TS(\"Typical case, delete an existing account request\");"},{"lineNumber":46,"author":{"gitId":"-"},"content":""},{"lineNumber":47,"author":{"gitId":"-"},"content":"        submissionParams \u003d new String[] {"},{"lineNumber":48,"author":{"gitId":"-"},"content":"                Const.ParamsNames.INSTRUCTOR_EMAIL, unregisteredAccountRequest.getEmail(),"},{"lineNumber":49,"author":{"gitId":"-"},"content":"                Const.ParamsNames.INSTRUCTOR_INSTITUTION, unregisteredAccountRequest.getInstitute(),"},{"lineNumber":50,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":51,"author":{"gitId":"-"},"content":""},{"lineNumber":52,"author":{"gitId":"-"},"content":"        DeleteAccountRequestAction action \u003d getAction(submissionParams);"},{"lineNumber":53,"author":{"gitId":"-"},"content":"        JsonResult result \u003d getJsonResult(action);"},{"lineNumber":54,"author":{"gitId":"-"},"content":""},{"lineNumber":55,"author":{"gitId":"-"},"content":"        MessageOutput msg \u003d (MessageOutput) result.getOutput();"},{"lineNumber":56,"author":{"gitId":"-"},"content":""},{"lineNumber":57,"author":{"gitId":"-"},"content":"        assertEquals(\"Account request successfully deleted.\", msg.getMessage());"},{"lineNumber":58,"author":{"gitId":"-"},"content":"        assertNull(logic.getAccountRequest(unregisteredAccountRequest.getEmail(),"},{"lineNumber":59,"author":{"gitId":"-"},"content":"                unregisteredAccountRequest.getInstitute()));"},{"lineNumber":60,"author":{"gitId":"-"},"content":""},{"lineNumber":61,"author":{"gitId":"-"},"content":"        ______TS(\"Typical case, delete non-existing account request\");"},{"lineNumber":62,"author":{"gitId":"-"},"content":""},{"lineNumber":63,"author":{"gitId":"-"},"content":"        action \u003d getAction(submissionParams);"},{"lineNumber":64,"author":{"gitId":"-"},"content":"        result \u003d getJsonResult(action);"},{"lineNumber":65,"author":{"gitId":"-"},"content":"        msg \u003d (MessageOutput) result.getOutput();"},{"lineNumber":66,"author":{"gitId":"-"},"content":""},{"lineNumber":67,"author":{"gitId":"-"},"content":"        // should fail silently."},{"lineNumber":68,"author":{"gitId":"-"},"content":"        assertEquals(\"Account request successfully deleted.\", msg.getMessage());"},{"lineNumber":69,"author":{"gitId":"-"},"content":""},{"lineNumber":70,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":71,"author":{"gitId":"-"},"content":""},{"lineNumber":72,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":73,"author":{"gitId":"kevin9foong"},"content":"    @Test(enabled \u003d false)"},{"lineNumber":74,"author":{"gitId":"-"},"content":"    protected void testAccessControl() {"},{"lineNumber":75,"author":{"gitId":"-"},"content":"        verifyOnlyAdminCanAccess();"},{"lineNumber":76,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":77,"author":{"gitId":"-"},"content":""},{"lineNumber":78,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"-":76,"kevin9foong":2}},{"path":"src/test/java/teammates/ui/webapi/DeleteCourseActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"EuniceSim142"},"content":"import org.testng.annotations.Ignore;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import org.testng.annotations.Test;"},{"lineNumber":5,"author":{"gitId":"-"},"content":""},{"lineNumber":6,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.CourseAttributes;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.InstructorAttributes;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.ui.output.MessageOutput;"},{"lineNumber":10,"author":{"gitId":"-"},"content":""},{"lineNumber":11,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":12,"author":{"gitId":"-"},"content":" * SUT: {@link DeleteCourseAction}."},{"lineNumber":13,"author":{"gitId":"-"},"content":" */"},{"lineNumber":14,"author":{"gitId":"EuniceSim142"},"content":"@Ignore"},{"lineNumber":15,"author":{"gitId":"-"},"content":"public class DeleteCourseActionTest"},{"lineNumber":16,"author":{"gitId":"-"},"content":"        extends BaseActionTest\u003cDeleteCourseAction\u003e {"},{"lineNumber":17,"author":{"gitId":"-"},"content":""},{"lineNumber":18,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":19,"author":{"gitId":"-"},"content":"    protected String getActionUri() {"},{"lineNumber":20,"author":{"gitId":"-"},"content":"        return Const.ResourceURIs.COURSE;"},{"lineNumber":21,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":22,"author":{"gitId":"-"},"content":""},{"lineNumber":23,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":24,"author":{"gitId":"-"},"content":"    protected String getRequestMethod() {"},{"lineNumber":25,"author":{"gitId":"-"},"content":"        return DELETE;"},{"lineNumber":26,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":27,"author":{"gitId":"-"},"content":""},{"lineNumber":28,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":29,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    public void testExecute() throws Exception {"},{"lineNumber":31,"author":{"gitId":"-"},"content":""},{"lineNumber":32,"author":{"gitId":"-"},"content":"        ______TS(\"Not enough parameters\");"},{"lineNumber":33,"author":{"gitId":"-"},"content":""},{"lineNumber":34,"author":{"gitId":"-"},"content":"        verifyHttpParameterFailure();"},{"lineNumber":35,"author":{"gitId":"-"},"content":""},{"lineNumber":36,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor1OfCourse1 \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":37,"author":{"gitId":"-"},"content":"        String instructorId \u003d instructor1OfCourse1.getGoogleId();"},{"lineNumber":38,"author":{"gitId":"-"},"content":"        String courseId \u003d instructor1OfCourse1.getCourseId();"},{"lineNumber":39,"author":{"gitId":"-"},"content":""},{"lineNumber":40,"author":{"gitId":"-"},"content":"        ______TS(\"Typical case, delete a soft-deleted course in Recycle Bin\");"},{"lineNumber":41,"author":{"gitId":"-"},"content":""},{"lineNumber":42,"author":{"gitId":"-"},"content":"        String[] submissionParams \u003d new String[] {"},{"lineNumber":43,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, courseId,"},{"lineNumber":44,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":45,"author":{"gitId":"-"},"content":""},{"lineNumber":46,"author":{"gitId":"-"},"content":"        CourseAttributes courseToBeDeleted \u003d logic.getCourse(courseId);"},{"lineNumber":47,"author":{"gitId":"-"},"content":"        loginAsInstructor(instructorId);"},{"lineNumber":48,"author":{"gitId":"-"},"content":"        logic.moveCourseToRecycleBin(courseToBeDeleted.getId());"},{"lineNumber":49,"author":{"gitId":"-"},"content":"        CourseAttributes deletedCourse \u003d logic.getCourse(courseId);"},{"lineNumber":50,"author":{"gitId":"-"},"content":"        assertNotNull(deletedCourse);"},{"lineNumber":51,"author":{"gitId":"-"},"content":"        assertTrue(deletedCourse.isCourseDeleted());"},{"lineNumber":52,"author":{"gitId":"-"},"content":""},{"lineNumber":53,"author":{"gitId":"-"},"content":"        DeleteCourseAction deleteCourseAction \u003d getAction(submissionParams);"},{"lineNumber":54,"author":{"gitId":"-"},"content":"        JsonResult result \u003d getJsonResult(deleteCourseAction);"},{"lineNumber":55,"author":{"gitId":"-"},"content":"        MessageOutput messageOutput \u003d (MessageOutput) result.getOutput();"},{"lineNumber":56,"author":{"gitId":"-"},"content":""},{"lineNumber":57,"author":{"gitId":"-"},"content":"        assertEquals(\"OK\", messageOutput.getMessage());"},{"lineNumber":58,"author":{"gitId":"-"},"content":"        assertNull(logic.getCourse(instructor1OfCourse1.getCourseId()));"},{"lineNumber":59,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":60,"author":{"gitId":"-"},"content":""},{"lineNumber":61,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":62,"author":{"gitId":"-"},"content":"    public void testExecute_notInRecycleBin_shouldPass() {"},{"lineNumber":63,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor1OfCourse1 \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":64,"author":{"gitId":"-"},"content":"        String instructorId \u003d instructor1OfCourse1.getGoogleId();"},{"lineNumber":65,"author":{"gitId":"-"},"content":"        String courseId \u003d instructor1OfCourse1.getCourseId();"},{"lineNumber":66,"author":{"gitId":"-"},"content":""},{"lineNumber":67,"author":{"gitId":"-"},"content":"        ______TS(\"delete a course not in Recycle Bin\");"},{"lineNumber":68,"author":{"gitId":"-"},"content":""},{"lineNumber":69,"author":{"gitId":"-"},"content":"        String[] submissionParams \u003d new String[] {"},{"lineNumber":70,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, courseId,"},{"lineNumber":71,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":72,"author":{"gitId":"-"},"content":""},{"lineNumber":73,"author":{"gitId":"-"},"content":"        CourseAttributes courseToBeDeleted \u003d logic.getCourse(instructor1OfCourse1.getCourseId());"},{"lineNumber":74,"author":{"gitId":"-"},"content":"        assertNull(courseToBeDeleted.getDeletedAt());"},{"lineNumber":75,"author":{"gitId":"-"},"content":"        loginAsInstructor(instructorId);"},{"lineNumber":76,"author":{"gitId":"-"},"content":""},{"lineNumber":77,"author":{"gitId":"-"},"content":"        DeleteCourseAction deleteCourseAction \u003d getAction(submissionParams);"},{"lineNumber":78,"author":{"gitId":"-"},"content":"        JsonResult result \u003d getJsonResult(deleteCourseAction);"},{"lineNumber":79,"author":{"gitId":"-"},"content":"        MessageOutput messageOutput \u003d (MessageOutput) result.getOutput();"},{"lineNumber":80,"author":{"gitId":"-"},"content":""},{"lineNumber":81,"author":{"gitId":"-"},"content":"        assertEquals(\"OK\", messageOutput.getMessage());"},{"lineNumber":82,"author":{"gitId":"-"},"content":"        assertNull(logic.getCourse(instructor1OfCourse1.getCourseId()));"},{"lineNumber":83,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":84,"author":{"gitId":"-"},"content":""},{"lineNumber":85,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":86,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":87,"author":{"gitId":"-"},"content":"    protected void testAccessControl() throws Exception {"},{"lineNumber":88,"author":{"gitId":"-"},"content":"        String[] submissionParams \u003d new String[] {"},{"lineNumber":89,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, \"idOfTypicalCourse1\","},{"lineNumber":90,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":91,"author":{"gitId":"-"},"content":""},{"lineNumber":92,"author":{"gitId":"-"},"content":"        verifyOnlyInstructorsOfTheSameCourseWithCorrectCoursePrivilegeCanAccess("},{"lineNumber":93,"author":{"gitId":"-"},"content":"                Const.InstructorPermissions.CAN_MODIFY_COURSE, submissionParams);"},{"lineNumber":94,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":95,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"EuniceSim142":2,"-":93}},{"path":"src/test/java/teammates/ui/webapi/DeleteNotificationActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"hhdqirui"},"content":"import org.testng.annotations.Ignore;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import org.testng.annotations.Test;"},{"lineNumber":5,"author":{"gitId":"-"},"content":""},{"lineNumber":6,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.NotificationAttributes;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.ui.output.MessageOutput;"},{"lineNumber":9,"author":{"gitId":"-"},"content":""},{"lineNumber":10,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":11,"author":{"gitId":"-"},"content":" * SUT: {@link DeleteNotificationAction}."},{"lineNumber":12,"author":{"gitId":"-"},"content":" */"},{"lineNumber":13,"author":{"gitId":"hhdqirui"},"content":"@Ignore"},{"lineNumber":14,"author":{"gitId":"-"},"content":"public class DeleteNotificationActionTest extends BaseActionTest\u003cDeleteNotificationAction\u003e {"},{"lineNumber":15,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":16,"author":{"gitId":"-"},"content":"    String getActionUri() {"},{"lineNumber":17,"author":{"gitId":"-"},"content":"        return Const.ResourceURIs.NOTIFICATION;"},{"lineNumber":18,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":19,"author":{"gitId":"-"},"content":""},{"lineNumber":20,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":21,"author":{"gitId":"-"},"content":"    String getRequestMethod() {"},{"lineNumber":22,"author":{"gitId":"-"},"content":"        return DELETE;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":24,"author":{"gitId":"-"},"content":""},{"lineNumber":25,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":26,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":27,"author":{"gitId":"-"},"content":"    protected void testExecute() throws Exception {"},{"lineNumber":28,"author":{"gitId":"-"},"content":"        NotificationAttributes testNotificationAttribute \u003d typicalBundle.notifications.get(\"notification1\");"},{"lineNumber":29,"author":{"gitId":"-"},"content":""},{"lineNumber":30,"author":{"gitId":"-"},"content":"        loginAsAdmin();"},{"lineNumber":31,"author":{"gitId":"-"},"content":""},{"lineNumber":32,"author":{"gitId":"-"},"content":"        ______TS(\"Typical Case: Delete notification successfully\");"},{"lineNumber":33,"author":{"gitId":"-"},"content":"        String[] requestParams \u003d new String[] {"},{"lineNumber":34,"author":{"gitId":"-"},"content":"                Const.ParamsNames.NOTIFICATION_ID, testNotificationAttribute.getNotificationId(),"},{"lineNumber":35,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":36,"author":{"gitId":"-"},"content":""},{"lineNumber":37,"author":{"gitId":"-"},"content":"        DeleteNotificationAction action \u003d getAction(requestParams);"},{"lineNumber":38,"author":{"gitId":"-"},"content":"        JsonResult response \u003d getJsonResult(action);"},{"lineNumber":39,"author":{"gitId":"-"},"content":"        MessageOutput msg \u003d (MessageOutput) response.getOutput();"},{"lineNumber":40,"author":{"gitId":"-"},"content":"        assertEquals(\"Notification has been deleted.\", msg.getMessage());"},{"lineNumber":41,"author":{"gitId":"-"},"content":""},{"lineNumber":42,"author":{"gitId":"-"},"content":"        verifyAbsentInDatabase(testNotificationAttribute);"},{"lineNumber":43,"author":{"gitId":"-"},"content":""},{"lineNumber":44,"author":{"gitId":"-"},"content":"        ______TS(\"Deleting non-existent notification should fail silently\");"},{"lineNumber":45,"author":{"gitId":"-"},"content":"        String invalidNotificationId \u003d \"non-existent notification\";"},{"lineNumber":46,"author":{"gitId":"-"},"content":"        requestParams \u003d new String[] {"},{"lineNumber":47,"author":{"gitId":"-"},"content":"                Const.ParamsNames.NOTIFICATION_ID, invalidNotificationId,"},{"lineNumber":48,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":49,"author":{"gitId":"-"},"content":""},{"lineNumber":50,"author":{"gitId":"-"},"content":"        NotificationAttributes nonExistentNotification \u003d typicalBundle.notifications.get(\"notification1\");"},{"lineNumber":51,"author":{"gitId":"-"},"content":"        nonExistentNotification.setNotificationId(invalidNotificationId);"},{"lineNumber":52,"author":{"gitId":"-"},"content":""},{"lineNumber":53,"author":{"gitId":"-"},"content":"        verifyAbsentInDatabase(nonExistentNotification);"},{"lineNumber":54,"author":{"gitId":"-"},"content":""},{"lineNumber":55,"author":{"gitId":"-"},"content":"        action \u003d getAction(requestParams);"},{"lineNumber":56,"author":{"gitId":"-"},"content":"        response \u003d getJsonResult(action);"},{"lineNumber":57,"author":{"gitId":"-"},"content":"        msg \u003d (MessageOutput) response.getOutput();"},{"lineNumber":58,"author":{"gitId":"-"},"content":"        assertEquals(\"Notification has been deleted.\", msg.getMessage());"},{"lineNumber":59,"author":{"gitId":"-"},"content":""},{"lineNumber":60,"author":{"gitId":"-"},"content":"        ______TS(\"Notification ID cannot be null\");"},{"lineNumber":61,"author":{"gitId":"-"},"content":"        requestParams \u003d new String[] {"},{"lineNumber":62,"author":{"gitId":"-"},"content":"                Const.ParamsNames.NOTIFICATION_ID, null,"},{"lineNumber":63,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":64,"author":{"gitId":"-"},"content":""},{"lineNumber":65,"author":{"gitId":"-"},"content":"        verifyHttpParameterFailure(requestParams);"},{"lineNumber":66,"author":{"gitId":"-"},"content":""},{"lineNumber":67,"author":{"gitId":"-"},"content":"        ______TS(\"Not enough request parameters should throw an error\");"},{"lineNumber":68,"author":{"gitId":"-"},"content":"        verifyHttpParameterFailure();"},{"lineNumber":69,"author":{"gitId":"-"},"content":""},{"lineNumber":70,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":71,"author":{"gitId":"-"},"content":""},{"lineNumber":72,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":73,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":74,"author":{"gitId":"-"},"content":"    protected void testAccessControl() throws Exception {"},{"lineNumber":75,"author":{"gitId":"-"},"content":"        verifyOnlyAdminCanAccess();"},{"lineNumber":76,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":77,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"hhdqirui":2,"-":75}},{"path":"src/test/java/teammates/ui/webapi/GetAccountActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.util.stream.Collectors;"},{"lineNumber":4,"author":{"gitId":"-"},"content":""},{"lineNumber":5,"author":{"gitId":"domlimm"},"content":"import org.testng.annotations.Ignore;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import org.testng.annotations.Test;"},{"lineNumber":7,"author":{"gitId":"-"},"content":""},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.AccountAttributes;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import teammates.ui.output.AccountData;"},{"lineNumber":11,"author":{"gitId":"-"},"content":""},{"lineNumber":12,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":13,"author":{"gitId":"-"},"content":" * SUT: {@link GetAccountAction}."},{"lineNumber":14,"author":{"gitId":"-"},"content":" */"},{"lineNumber":15,"author":{"gitId":"domlimm"},"content":"@Ignore"},{"lineNumber":16,"author":{"gitId":"-"},"content":"public class GetAccountActionTest extends BaseActionTest\u003cGetAccountAction\u003e {"},{"lineNumber":17,"author":{"gitId":"-"},"content":""},{"lineNumber":18,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":19,"author":{"gitId":"-"},"content":"    protected String getActionUri() {"},{"lineNumber":20,"author":{"gitId":"-"},"content":"        return Const.ResourceURIs.ACCOUNT;"},{"lineNumber":21,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":22,"author":{"gitId":"-"},"content":""},{"lineNumber":23,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":24,"author":{"gitId":"-"},"content":"    protected String getRequestMethod() {"},{"lineNumber":25,"author":{"gitId":"-"},"content":"        return GET;"},{"lineNumber":26,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":27,"author":{"gitId":"-"},"content":""},{"lineNumber":28,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":29,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    protected void testExecute() {"},{"lineNumber":31,"author":{"gitId":"-"},"content":"        AccountAttributes instructor1OfCourse1 \u003d typicalBundle.accounts.get(\"instructor1OfCourse1\");"},{"lineNumber":32,"author":{"gitId":"-"},"content":""},{"lineNumber":33,"author":{"gitId":"-"},"content":"        loginAsAdmin();"},{"lineNumber":34,"author":{"gitId":"-"},"content":""},{"lineNumber":35,"author":{"gitId":"-"},"content":"        ______TS(\"Not enough parameters\");"},{"lineNumber":36,"author":{"gitId":"-"},"content":""},{"lineNumber":37,"author":{"gitId":"-"},"content":"        verifyHttpParameterFailure();"},{"lineNumber":38,"author":{"gitId":"-"},"content":""},{"lineNumber":39,"author":{"gitId":"-"},"content":"        ______TS(\"account not exist\");"},{"lineNumber":40,"author":{"gitId":"-"},"content":""},{"lineNumber":41,"author":{"gitId":"-"},"content":"        String[] nonExistParams \u003d {"},{"lineNumber":42,"author":{"gitId":"-"},"content":"                Const.ParamsNames.INSTRUCTOR_ID, \"non-exist-account\","},{"lineNumber":43,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":44,"author":{"gitId":"-"},"content":""},{"lineNumber":45,"author":{"gitId":"-"},"content":"        EntityNotFoundException enfe \u003d verifyEntityNotFound(nonExistParams);"},{"lineNumber":46,"author":{"gitId":"-"},"content":"        assertEquals(\"Account does not exist.\", enfe.getMessage());"},{"lineNumber":47,"author":{"gitId":"-"},"content":""},{"lineNumber":48,"author":{"gitId":"-"},"content":"        ______TS(\"typical success case\");"},{"lineNumber":49,"author":{"gitId":"-"},"content":""},{"lineNumber":50,"author":{"gitId":"-"},"content":"        String[] params \u003d {"},{"lineNumber":51,"author":{"gitId":"-"},"content":"                Const.ParamsNames.INSTRUCTOR_ID, instructor1OfCourse1.getGoogleId(),"},{"lineNumber":52,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":53,"author":{"gitId":"-"},"content":""},{"lineNumber":54,"author":{"gitId":"-"},"content":"        GetAccountAction a \u003d getAction(params);"},{"lineNumber":55,"author":{"gitId":"-"},"content":"        JsonResult r \u003d getJsonResult(a);"},{"lineNumber":56,"author":{"gitId":"-"},"content":""},{"lineNumber":57,"author":{"gitId":"-"},"content":"        AccountData response \u003d (AccountData) r.getOutput();"},{"lineNumber":58,"author":{"gitId":"-"},"content":""},{"lineNumber":59,"author":{"gitId":"-"},"content":"        assertEquals(response.getGoogleId(), instructor1OfCourse1.getGoogleId());"},{"lineNumber":60,"author":{"gitId":"-"},"content":"        assertEquals(response.getName(), instructor1OfCourse1.getName());"},{"lineNumber":61,"author":{"gitId":"-"},"content":"        assertEquals(response.getEmail(), instructor1OfCourse1.getEmail());"},{"lineNumber":62,"author":{"gitId":"-"},"content":"        assertEquals("},{"lineNumber":63,"author":{"gitId":"-"},"content":"                response.getReadNotifications(),"},{"lineNumber":64,"author":{"gitId":"-"},"content":"                instructor1OfCourse1.getReadNotifications()"},{"lineNumber":65,"author":{"gitId":"-"},"content":"                    .entrySet()"},{"lineNumber":66,"author":{"gitId":"-"},"content":"                    .stream()"},{"lineNumber":67,"author":{"gitId":"-"},"content":"                    .collect(Collectors.toMap("},{"lineNumber":68,"author":{"gitId":"-"},"content":"                        e -\u003e e.getKey(),"},{"lineNumber":69,"author":{"gitId":"-"},"content":"                        e -\u003e e.getValue().toEpochMilli()"},{"lineNumber":70,"author":{"gitId":"-"},"content":"                    ))"},{"lineNumber":71,"author":{"gitId":"-"},"content":"        );"},{"lineNumber":72,"author":{"gitId":"-"},"content":""},{"lineNumber":73,"author":{"gitId":"-"},"content":"        ______TS(\"Failure: invalid account not found\");"},{"lineNumber":74,"author":{"gitId":"-"},"content":""},{"lineNumber":75,"author":{"gitId":"-"},"content":"        String[] invalidParams \u003d {"},{"lineNumber":76,"author":{"gitId":"-"},"content":"                Const.ParamsNames.INSTRUCTOR_ID, \"invalid-google-id\","},{"lineNumber":77,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":78,"author":{"gitId":"-"},"content":""},{"lineNumber":79,"author":{"gitId":"-"},"content":"        enfe \u003d verifyEntityNotFound(invalidParams);"},{"lineNumber":80,"author":{"gitId":"-"},"content":"        assertEquals(\"Account does not exist.\", enfe.getMessage());"},{"lineNumber":81,"author":{"gitId":"-"},"content":""},{"lineNumber":82,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":83,"author":{"gitId":"-"},"content":""},{"lineNumber":84,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":85,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":86,"author":{"gitId":"-"},"content":"    protected void testAccessControl() {"},{"lineNumber":87,"author":{"gitId":"-"},"content":"        verifyOnlyAdminCanAccess();"},{"lineNumber":88,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":89,"author":{"gitId":"-"},"content":""},{"lineNumber":90,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"domlimm":2,"-":88}},{"path":"src/test/java/teammates/ui/webapi/GetAccountRequestActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import org.testng.annotations.Test;"},{"lineNumber":4,"author":{"gitId":"-"},"content":""},{"lineNumber":5,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.AccountRequestAttributes;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import teammates.ui.output.AccountRequestData;"},{"lineNumber":8,"author":{"gitId":"-"},"content":""},{"lineNumber":9,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":10,"author":{"gitId":"-"},"content":" * SUT: {@link GetAccountRequestAction}."},{"lineNumber":11,"author":{"gitId":"-"},"content":" */"},{"lineNumber":12,"author":{"gitId":"-"},"content":"public class GetAccountRequestActionTest extends BaseActionTest\u003cGetAccountRequestAction\u003e {"},{"lineNumber":13,"author":{"gitId":"-"},"content":""},{"lineNumber":14,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":15,"author":{"gitId":"-"},"content":"    protected String getActionUri() {"},{"lineNumber":16,"author":{"gitId":"-"},"content":"        return Const.ResourceURIs.ACCOUNT_REQUEST;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":18,"author":{"gitId":"-"},"content":""},{"lineNumber":19,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":20,"author":{"gitId":"-"},"content":"    protected String getRequestMethod() {"},{"lineNumber":21,"author":{"gitId":"-"},"content":"        return GET;"},{"lineNumber":22,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":23,"author":{"gitId":"-"},"content":""},{"lineNumber":24,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":25,"author":{"gitId":"kevin9foong"},"content":"    @Test(enabled \u003d false)"},{"lineNumber":26,"author":{"gitId":"-"},"content":"    protected void testExecute() {"},{"lineNumber":27,"author":{"gitId":"-"},"content":"        AccountRequestAttributes accountRequest \u003d"},{"lineNumber":28,"author":{"gitId":"-"},"content":"                logic.getAccountRequest(\"unregisteredinstructor1@gmail.tmt\", \"TEAMMATES Test Institute 1\");"},{"lineNumber":29,"author":{"gitId":"-"},"content":""},{"lineNumber":30,"author":{"gitId":"-"},"content":"        loginAsAdmin();"},{"lineNumber":31,"author":{"gitId":"-"},"content":""},{"lineNumber":32,"author":{"gitId":"-"},"content":"        ______TS(\"Not enough parameters\");"},{"lineNumber":33,"author":{"gitId":"-"},"content":""},{"lineNumber":34,"author":{"gitId":"-"},"content":"        verifyHttpParameterFailure();"},{"lineNumber":35,"author":{"gitId":"-"},"content":""},{"lineNumber":36,"author":{"gitId":"-"},"content":"        ______TS(\"account request does not exist\");"},{"lineNumber":37,"author":{"gitId":"-"},"content":""},{"lineNumber":38,"author":{"gitId":"-"},"content":"        String[] nonExistParams \u003d {"},{"lineNumber":39,"author":{"gitId":"-"},"content":"                Const.ParamsNames.INSTRUCTOR_EMAIL, \"non-existent@email\","},{"lineNumber":40,"author":{"gitId":"-"},"content":"                Const.ParamsNames.INSTRUCTOR_INSTITUTION, \"non existent institute\","},{"lineNumber":41,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":42,"author":{"gitId":"-"},"content":""},{"lineNumber":43,"author":{"gitId":"-"},"content":"        EntityNotFoundException enfe \u003d verifyEntityNotFound(nonExistParams);"},{"lineNumber":44,"author":{"gitId":"-"},"content":"        assertEquals(\"Account request for email: non-existent@email and institute: non existent institute not found.\","},{"lineNumber":45,"author":{"gitId":"-"},"content":"                enfe.getMessage());"},{"lineNumber":46,"author":{"gitId":"-"},"content":""},{"lineNumber":47,"author":{"gitId":"-"},"content":"        ______TS(\"typical success case\");"},{"lineNumber":48,"author":{"gitId":"-"},"content":""},{"lineNumber":49,"author":{"gitId":"-"},"content":"        String[] params \u003d new String[] {"},{"lineNumber":50,"author":{"gitId":"-"},"content":"                Const.ParamsNames.INSTRUCTOR_EMAIL, accountRequest.getEmail(),"},{"lineNumber":51,"author":{"gitId":"-"},"content":"                Const.ParamsNames.INSTRUCTOR_INSTITUTION, accountRequest.getInstitute(),"},{"lineNumber":52,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":53,"author":{"gitId":"-"},"content":""},{"lineNumber":54,"author":{"gitId":"-"},"content":"        GetAccountRequestAction a \u003d getAction(params);"},{"lineNumber":55,"author":{"gitId":"-"},"content":"        JsonResult r \u003d getJsonResult(a);"},{"lineNumber":56,"author":{"gitId":"-"},"content":""},{"lineNumber":57,"author":{"gitId":"-"},"content":"        AccountRequestData response \u003d (AccountRequestData) r.getOutput();"},{"lineNumber":58,"author":{"gitId":"-"},"content":""},{"lineNumber":59,"author":{"gitId":"-"},"content":"        assertEquals(response.getName(), accountRequest.getName());"},{"lineNumber":60,"author":{"gitId":"-"},"content":"        assertEquals(response.getEmail(), accountRequest.getEmail());"},{"lineNumber":61,"author":{"gitId":"-"},"content":"        assertEquals(response.getRegistrationKey(), accountRequest.getRegistrationKey());"},{"lineNumber":62,"author":{"gitId":"-"},"content":"        assertEquals(response.getInstitute(), accountRequest.getInstitute());"},{"lineNumber":63,"author":{"gitId":"-"},"content":"        assertNull(accountRequest.getRegisteredAt());"},{"lineNumber":64,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":65,"author":{"gitId":"-"},"content":""},{"lineNumber":66,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":67,"author":{"gitId":"kevin9foong"},"content":"    @Test(enabled \u003d false)"},{"lineNumber":68,"author":{"gitId":"-"},"content":"    protected void testAccessControl() {"},{"lineNumber":69,"author":{"gitId":"-"},"content":"        verifyOnlyAdminCanAccess();"},{"lineNumber":70,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":71,"author":{"gitId":"-"},"content":""},{"lineNumber":72,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"-":70,"kevin9foong":2}},{"path":"src/test/java/teammates/ui/webapi/GetAccountsActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.util.Arrays;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.util.Collections;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.util.Comparator;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":7,"author":{"gitId":"-"},"content":""},{"lineNumber":8,"author":{"gitId":"domlimm"},"content":"import org.testng.annotations.Ignore;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import org.testng.annotations.Test;"},{"lineNumber":10,"author":{"gitId":"-"},"content":""},{"lineNumber":11,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.DataBundle;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.AccountAttributes;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import teammates.ui.output.AccountData;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import teammates.ui.output.AccountsData;"},{"lineNumber":16,"author":{"gitId":"-"},"content":""},{"lineNumber":17,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":18,"author":{"gitId":"-"},"content":" * SUT: {@link GetAccountsAction}."},{"lineNumber":19,"author":{"gitId":"-"},"content":" */"},{"lineNumber":20,"author":{"gitId":"domlimm"},"content":"@Ignore"},{"lineNumber":21,"author":{"gitId":"-"},"content":"public class GetAccountsActionTest extends BaseActionTest\u003cGetAccountsAction\u003e {"},{"lineNumber":22,"author":{"gitId":"-"},"content":""},{"lineNumber":23,"author":{"gitId":"-"},"content":"    private static final String EMAIL \u003d \"valid@gmail.tmt\";"},{"lineNumber":24,"author":{"gitId":"-"},"content":""},{"lineNumber":25,"author":{"gitId":"-"},"content":"    private DataBundle testData;"},{"lineNumber":26,"author":{"gitId":"-"},"content":""},{"lineNumber":27,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":28,"author":{"gitId":"-"},"content":"    protected String getActionUri() {"},{"lineNumber":29,"author":{"gitId":"-"},"content":"        return Const.ResourceURIs.ACCOUNTS;"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":31,"author":{"gitId":"-"},"content":""},{"lineNumber":32,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":33,"author":{"gitId":"-"},"content":"    protected String getRequestMethod() {"},{"lineNumber":34,"author":{"gitId":"-"},"content":"        return GET;"},{"lineNumber":35,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":36,"author":{"gitId":"-"},"content":""},{"lineNumber":37,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":38,"author":{"gitId":"-"},"content":"    public void prepareTestData() {"},{"lineNumber":39,"author":{"gitId":"-"},"content":"        testData \u003d getTypicalDataBundle();"},{"lineNumber":40,"author":{"gitId":"-"},"content":"        testData.accounts.get(\"instructor1OfCourse2\").setEmail(EMAIL);"},{"lineNumber":41,"author":{"gitId":"-"},"content":"        testData.accounts.get(\"instructor2OfCourse1\").setEmail(EMAIL);"},{"lineNumber":42,"author":{"gitId":"-"},"content":"        testData.accounts.get(\"student1InCourse1\").setEmail(EMAIL);"},{"lineNumber":43,"author":{"gitId":"-"},"content":"        removeAndRestoreDataBundle(testData);"},{"lineNumber":44,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":45,"author":{"gitId":"-"},"content":""},{"lineNumber":46,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":47,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":48,"author":{"gitId":"-"},"content":"    protected void testExecute() {"},{"lineNumber":49,"author":{"gitId":"-"},"content":"        loginAsAdmin();"},{"lineNumber":50,"author":{"gitId":"-"},"content":""},{"lineNumber":51,"author":{"gitId":"-"},"content":"        ______TS(\"Not enough parameters\");"},{"lineNumber":52,"author":{"gitId":"-"},"content":""},{"lineNumber":53,"author":{"gitId":"-"},"content":"        verifyHttpParameterFailure();"},{"lineNumber":54,"author":{"gitId":"-"},"content":""},{"lineNumber":55,"author":{"gitId":"-"},"content":"        ______TS(\"typical success case: no accounts with email\");"},{"lineNumber":56,"author":{"gitId":"-"},"content":""},{"lineNumber":57,"author":{"gitId":"-"},"content":"        String[] params \u003d {"},{"lineNumber":58,"author":{"gitId":"-"},"content":"                Const.ParamsNames.USER_EMAIL, \"non-exist@gmail.tmt\","},{"lineNumber":59,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":60,"author":{"gitId":"-"},"content":""},{"lineNumber":61,"author":{"gitId":"-"},"content":"        GetAccountsAction a \u003d getAction(params);"},{"lineNumber":62,"author":{"gitId":"-"},"content":"        JsonResult r \u003d getJsonResult(a);"},{"lineNumber":63,"author":{"gitId":"-"},"content":""},{"lineNumber":64,"author":{"gitId":"-"},"content":"        AccountsData response \u003d (AccountsData) r.getOutput();"},{"lineNumber":65,"author":{"gitId":"-"},"content":"        assertEquals(Collections.emptyList(), response.getAccounts());"},{"lineNumber":66,"author":{"gitId":"-"},"content":""},{"lineNumber":67,"author":{"gitId":"-"},"content":"        ______TS(\"typical success case: one account with email\");"},{"lineNumber":68,"author":{"gitId":"-"},"content":""},{"lineNumber":69,"author":{"gitId":"-"},"content":"        AccountAttributes account \u003d testData.accounts.get(\"instructor1OfCourse1\");"},{"lineNumber":70,"author":{"gitId":"-"},"content":""},{"lineNumber":71,"author":{"gitId":"-"},"content":"        params \u003d new String[] {"},{"lineNumber":72,"author":{"gitId":"-"},"content":"                Const.ParamsNames.USER_EMAIL, account.getEmail(),"},{"lineNumber":73,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":74,"author":{"gitId":"-"},"content":""},{"lineNumber":75,"author":{"gitId":"-"},"content":"        a \u003d getAction(params);"},{"lineNumber":76,"author":{"gitId":"-"},"content":"        r \u003d getJsonResult(a);"},{"lineNumber":77,"author":{"gitId":"-"},"content":""},{"lineNumber":78,"author":{"gitId":"-"},"content":"        response \u003d (AccountsData) r.getOutput();"},{"lineNumber":79,"author":{"gitId":"-"},"content":"        assertEqualAccounts(Arrays.asList(account), response.getAccounts());"},{"lineNumber":80,"author":{"gitId":"-"},"content":""},{"lineNumber":81,"author":{"gitId":"-"},"content":"        ______TS(\"typical success case: multiple accounts with email\");"},{"lineNumber":82,"author":{"gitId":"-"},"content":"        AccountAttributes firstAccount \u003d testData.accounts.get(\"instructor1OfCourse2\");"},{"lineNumber":83,"author":{"gitId":"-"},"content":"        AccountAttributes secondAccount \u003d testData.accounts.get(\"instructor2OfCourse1\");"},{"lineNumber":84,"author":{"gitId":"-"},"content":"        AccountAttributes thirdAccount \u003d testData.accounts.get(\"student1InCourse1\");"},{"lineNumber":85,"author":{"gitId":"-"},"content":""},{"lineNumber":86,"author":{"gitId":"-"},"content":"        params \u003d new String[] {"},{"lineNumber":87,"author":{"gitId":"-"},"content":"                Const.ParamsNames.USER_EMAIL, EMAIL,"},{"lineNumber":88,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":89,"author":{"gitId":"-"},"content":""},{"lineNumber":90,"author":{"gitId":"-"},"content":"        a \u003d getAction(params);"},{"lineNumber":91,"author":{"gitId":"-"},"content":"        r \u003d getJsonResult(a);"},{"lineNumber":92,"author":{"gitId":"-"},"content":""},{"lineNumber":93,"author":{"gitId":"-"},"content":"        response \u003d (AccountsData) r.getOutput();"},{"lineNumber":94,"author":{"gitId":"-"},"content":"        assertEqualAccounts(Arrays.asList(firstAccount, secondAccount, thirdAccount), response.getAccounts());"},{"lineNumber":95,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":96,"author":{"gitId":"-"},"content":""},{"lineNumber":97,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":98,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":99,"author":{"gitId":"-"},"content":"    protected void testAccessControl() {"},{"lineNumber":100,"author":{"gitId":"-"},"content":"        verifyOnlyAdminCanAccess();"},{"lineNumber":101,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":102,"author":{"gitId":"-"},"content":""},{"lineNumber":103,"author":{"gitId":"-"},"content":"    private void assertEqualAccounts(List\u003cAccountAttributes\u003e accounts, List\u003cAccountData\u003e accountDataList) {"},{"lineNumber":104,"author":{"gitId":"-"},"content":"        accounts.sort(Comparator.comparing(AccountAttributes::getGoogleId));"},{"lineNumber":105,"author":{"gitId":"-"},"content":"        accountDataList.sort(Comparator.comparing(AccountData::getGoogleId));"},{"lineNumber":106,"author":{"gitId":"-"},"content":"        for (int i \u003d 0; i \u003c accounts.size(); i++) {"},{"lineNumber":107,"author":{"gitId":"-"},"content":"            AccountAttributes accountAttributes \u003d accounts.get(i);"},{"lineNumber":108,"author":{"gitId":"-"},"content":"            AccountData accountData \u003d accountDataList.get(i);"},{"lineNumber":109,"author":{"gitId":"-"},"content":"            assertEquals(accountAttributes.getGoogleId(), accountData.getGoogleId());"},{"lineNumber":110,"author":{"gitId":"-"},"content":"            assertEquals(accountAttributes.getName(), accountData.getName());"},{"lineNumber":111,"author":{"gitId":"-"},"content":"            assertEquals(accountAttributes.getEmail(), accountData.getEmail());"},{"lineNumber":112,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":113,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":114,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"domlimm":2,"-":112}},{"path":"src/test/java/teammates/ui/webapi/GetCourseActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"EuniceSim142"},"content":"import static org.mockito.Mockito.mock;"},{"lineNumber":4,"author":{"gitId":"EuniceSim142"},"content":"import static org.mockito.Mockito.times;"},{"lineNumber":5,"author":{"gitId":"EuniceSim142"},"content":"import static org.mockito.Mockito.verify;"},{"lineNumber":6,"author":{"gitId":"EuniceSim142"},"content":"import static org.mockito.Mockito.when;"},{"lineNumber":7,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":8,"author":{"gitId":"EuniceSim142"},"content":"import java.time.Instant;"},{"lineNumber":9,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":10,"author":{"gitId":"EuniceSim142"},"content":"import org.testng.annotations.Ignore;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import org.testng.annotations.Test;"},{"lineNumber":12,"author":{"gitId":"-"},"content":""},{"lineNumber":13,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.datatransfer.InstructorPermissionRole;"},{"lineNumber":14,"author":{"gitId":"EuniceSim142"},"content":"import teammates.common.datatransfer.InstructorPrivileges;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.CourseAttributes;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.InstructorAttributes;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.StudentAttributes;"},{"lineNumber":18,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":19,"author":{"gitId":"EuniceSim142"},"content":"import teammates.logic.api.EmailSender;"},{"lineNumber":20,"author":{"gitId":"EuniceSim142"},"content":"import teammates.logic.api.LogsProcessor;"},{"lineNumber":21,"author":{"gitId":"EuniceSim142"},"content":"import teammates.logic.api.RecaptchaVerifier;"},{"lineNumber":22,"author":{"gitId":"EuniceSim142"},"content":"import teammates.logic.api.TaskQueuer;"},{"lineNumber":23,"author":{"gitId":"EuniceSim142"},"content":"import teammates.logic.api.UserProvision;"},{"lineNumber":24,"author":{"gitId":"EuniceSim142"},"content":"import teammates.sqllogic.api.Logic;"},{"lineNumber":25,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.Course;"},{"lineNumber":26,"author":{"gitId":"EuniceSim142"},"content":"import teammates.storage.sqlentity.Instructor;"},{"lineNumber":27,"author":{"gitId":"EuniceSim142"},"content":"import teammates.test.MockHttpServletRequest;"},{"lineNumber":28,"author":{"gitId":"-"},"content":"import teammates.ui.output.CourseData;"},{"lineNumber":29,"author":{"gitId":"-"},"content":""},{"lineNumber":30,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":31,"author":{"gitId":"-"},"content":" * SUT: {@link GetCourseAction}."},{"lineNumber":32,"author":{"gitId":"-"},"content":" */"},{"lineNumber":33,"author":{"gitId":"EuniceSim142"},"content":"@Ignore"},{"lineNumber":34,"author":{"gitId":"-"},"content":"public class GetCourseActionTest extends BaseActionTest\u003cGetCourseAction\u003e {"},{"lineNumber":35,"author":{"gitId":"-"},"content":""},{"lineNumber":36,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":37,"author":{"gitId":"-"},"content":"    protected String getActionUri() {"},{"lineNumber":38,"author":{"gitId":"-"},"content":"        return Const.ResourceURIs.COURSE;"},{"lineNumber":39,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":40,"author":{"gitId":"-"},"content":""},{"lineNumber":41,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":42,"author":{"gitId":"-"},"content":"    protected String getRequestMethod() {"},{"lineNumber":43,"author":{"gitId":"-"},"content":"        return GET;"},{"lineNumber":44,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":45,"author":{"gitId":"-"},"content":""},{"lineNumber":46,"author":{"gitId":"EuniceSim142"},"content":"    @Test"},{"lineNumber":47,"author":{"gitId":"EuniceSim142"},"content":"    public void testExecute_success() {"},{"lineNumber":48,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d generateTypicalCourse();"},{"lineNumber":49,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":50,"author":{"gitId":"EuniceSim142"},"content":"        GetCourseAction action \u003d generateGetCourseAction();"},{"lineNumber":51,"author":{"gitId":"EuniceSim142"},"content":"        when(action.logic.getCourse(course.getId())).thenReturn(null);"},{"lineNumber":52,"author":{"gitId":"EuniceSim142"},"content":"        when(action.sqlLogic.getCourse(course.getId())).thenReturn(course);"},{"lineNumber":53,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":54,"author":{"gitId":"EuniceSim142"},"content":"        JsonResult response \u003d action.execute();"},{"lineNumber":55,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":56,"author":{"gitId":"EuniceSim142"},"content":"        verify(action.logic, times(1)).getCourse(course.getId());"},{"lineNumber":57,"author":{"gitId":"EuniceSim142"},"content":"        verify(action.sqlLogic, times(1)).getCourse(course.getId());"},{"lineNumber":58,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":59,"author":{"gitId":"EuniceSim142"},"content":"        CourseData courseData \u003d (CourseData) response.getOutput();"},{"lineNumber":60,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":61,"author":{"gitId":"EuniceSim142"},"content":"        assertEquals(course.getId(), courseData.getCourseId());"},{"lineNumber":62,"author":{"gitId":"EuniceSim142"},"content":"        assertEquals(course.getName(), courseData.getCourseName());"},{"lineNumber":63,"author":{"gitId":"EuniceSim142"},"content":"        assertEquals(course.getTimeZone(), courseData.getTimeZone());"},{"lineNumber":64,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":65,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":66,"author":{"gitId":"EuniceSim142"},"content":"    private Course generateTypicalCourse() {"},{"lineNumber":67,"author":{"gitId":"EuniceSim142"},"content":"        Course c \u003d new Course(\"test-courseId\", \"test-courseName\", \"test-courseTimeZone\", \"test-courseInstitute\");"},{"lineNumber":68,"author":{"gitId":"EuniceSim142"},"content":"        c.setCreatedAt(Instant.parse(\"2023-01-01T00:00:00Z\"));"},{"lineNumber":69,"author":{"gitId":"EuniceSim142"},"content":"        c.setUpdatedAt(Instant.parse(\"2023-01-01T00:00:00Z\"));"},{"lineNumber":70,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":71,"author":{"gitId":"EuniceSim142"},"content":"        return c;"},{"lineNumber":72,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":73,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":74,"author":{"gitId":"EuniceSim142"},"content":"    private Instructor generateTypicalCoOwnerInstructor() {"},{"lineNumber":75,"author":{"gitId":"EuniceSim142"},"content":"        Course course \u003d generateTypicalCourse();"},{"lineNumber":76,"author":{"gitId":"EuniceSim142"},"content":"        InstructorPermissionRole instructorPermissionRole \u003d InstructorPermissionRole.INSTRUCTOR_PERMISSION_ROLE_COOWNER;"},{"lineNumber":77,"author":{"gitId":"EuniceSim142"},"content":"        InstructorPrivileges instructorPrivileges \u003d new InstructorPrivileges(instructorPermissionRole.getRoleName());"},{"lineNumber":78,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":79,"author":{"gitId":"EuniceSim142"},"content":"        return new Instructor("},{"lineNumber":80,"author":{"gitId":"EuniceSim142"},"content":"                course, \"test-instructorName\", \"test@test.com\", true,"},{"lineNumber":81,"author":{"gitId":"EuniceSim142"},"content":"                \"test-instructorDisplayName\", instructorPermissionRole, instructorPrivileges);"},{"lineNumber":82,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":83,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":84,"author":{"gitId":"EuniceSim142"},"content":"    private GetCourseAction generateGetCourseAction() {"},{"lineNumber":85,"author":{"gitId":"EuniceSim142"},"content":"        // Create mock classes"},{"lineNumber":86,"author":{"gitId":"EuniceSim142"},"content":"        TaskQueuer mockTaskQueuer \u003d mock(TaskQueuer.class);"},{"lineNumber":87,"author":{"gitId":"EuniceSim142"},"content":"        EmailSender mockEmailSender \u003d mock(EmailSender.class);"},{"lineNumber":88,"author":{"gitId":"EuniceSim142"},"content":"        LogsProcessor mockLogsProcessor \u003d mock(LogsProcessor.class);"},{"lineNumber":89,"author":{"gitId":"EuniceSim142"},"content":"        RecaptchaVerifier mockRecaptchaVerifier \u003d mock(RecaptchaVerifier.class);"},{"lineNumber":90,"author":{"gitId":"EuniceSim142"},"content":"        UserProvision mockUserProvision \u003d mock(UserProvision.class);"},{"lineNumber":91,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":92,"author":{"gitId":"EuniceSim142"},"content":"        Logic sqlLogic \u003d mock(Logic.class);"},{"lineNumber":93,"author":{"gitId":"EuniceSim142"},"content":"        teammates.logic.api.Logic logic \u003d mock(teammates.logic.api.Logic.class);"},{"lineNumber":94,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":95,"author":{"gitId":"EuniceSim142"},"content":"        MockHttpServletRequest req \u003d new MockHttpServletRequest(getRequestMethod(), getActionUri());"},{"lineNumber":96,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":97,"author":{"gitId":"EuniceSim142"},"content":"        String[] params \u003d {"},{"lineNumber":98,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.COURSE_ID, generateTypicalCoOwnerInstructor().getCourseId(),"},{"lineNumber":99,"author":{"gitId":"EuniceSim142"},"content":"                Const.ParamsNames.ENTITY_TYPE, Const.EntityType.INSTRUCTOR,"},{"lineNumber":100,"author":{"gitId":"EuniceSim142"},"content":"        };"},{"lineNumber":101,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":102,"author":{"gitId":"EuniceSim142"},"content":"        for (int i \u003d 0; i \u003c params.length; i \u003d i + 2) {"},{"lineNumber":103,"author":{"gitId":"EuniceSim142"},"content":"            req.addParam(params[i], params[i + 1]);"},{"lineNumber":104,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":105,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":106,"author":{"gitId":"EuniceSim142"},"content":"        try {"},{"lineNumber":107,"author":{"gitId":"EuniceSim142"},"content":"            GetCourseAction action \u003d (GetCourseAction.class).getDeclaredConstructor().newInstance();"},{"lineNumber":108,"author":{"gitId":"EuniceSim142"},"content":"            action.req \u003d req;"},{"lineNumber":109,"author":{"gitId":"EuniceSim142"},"content":"            action.setTaskQueuer(mockTaskQueuer);"},{"lineNumber":110,"author":{"gitId":"EuniceSim142"},"content":"            action.setEmailSender(mockEmailSender);"},{"lineNumber":111,"author":{"gitId":"EuniceSim142"},"content":"            action.setLogsProcessor(mockLogsProcessor);"},{"lineNumber":112,"author":{"gitId":"EuniceSim142"},"content":"            action.setUserProvision(mockUserProvision);"},{"lineNumber":113,"author":{"gitId":"EuniceSim142"},"content":"            action.setRecaptchaVerifier(mockRecaptchaVerifier);"},{"lineNumber":114,"author":{"gitId":"EuniceSim142"},"content":"            action.sqlLogic \u003d sqlLogic;"},{"lineNumber":115,"author":{"gitId":"EuniceSim142"},"content":"            action.logic \u003d logic;"},{"lineNumber":116,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":117,"author":{"gitId":"EuniceSim142"},"content":"            return action;"},{"lineNumber":118,"author":{"gitId":"EuniceSim142"},"content":"        } catch (Exception e) {"},{"lineNumber":119,"author":{"gitId":"EuniceSim142"},"content":"            throw new RuntimeException(e);"},{"lineNumber":120,"author":{"gitId":"EuniceSim142"},"content":"        }"},{"lineNumber":121,"author":{"gitId":"EuniceSim142"},"content":"    }"},{"lineNumber":122,"author":{"gitId":"EuniceSim142"},"content":""},{"lineNumber":123,"author":{"gitId":"EuniceSim142"},"content":"    // OLD TESTS:"},{"lineNumber":124,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":125,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":126,"author":{"gitId":"-"},"content":"    protected void testExecute() {"},{"lineNumber":127,"author":{"gitId":"-"},"content":"        //See test cases below"},{"lineNumber":128,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":129,"author":{"gitId":"-"},"content":""},{"lineNumber":130,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":131,"author":{"gitId":"-"},"content":"    protected void testExecute_typicalUsage_shouldPass() {"},{"lineNumber":132,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor1OfCourse1 \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":133,"author":{"gitId":"-"},"content":"        CourseAttributes expectedCourse \u003d logic.getCourse(instructor1OfCourse1.getCourseId());"},{"lineNumber":134,"author":{"gitId":"-"},"content":""},{"lineNumber":135,"author":{"gitId":"-"},"content":"        loginAsInstructor(instructor1OfCourse1.getGoogleId());"},{"lineNumber":136,"author":{"gitId":"-"},"content":""},{"lineNumber":137,"author":{"gitId":"-"},"content":"        ______TS(\"typical success case for instructor\");"},{"lineNumber":138,"author":{"gitId":"-"},"content":""},{"lineNumber":139,"author":{"gitId":"-"},"content":"        String[] params \u003d {"},{"lineNumber":140,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, instructor1OfCourse1.getCourseId(),"},{"lineNumber":141,"author":{"gitId":"-"},"content":"                Const.ParamsNames.ENTITY_TYPE, Const.EntityType.INSTRUCTOR,"},{"lineNumber":142,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":143,"author":{"gitId":"-"},"content":"        GetCourseAction getCourseAction \u003d getAction(params);"},{"lineNumber":144,"author":{"gitId":"-"},"content":"        JsonResult response \u003d getJsonResult(getCourseAction);"},{"lineNumber":145,"author":{"gitId":"-"},"content":""},{"lineNumber":146,"author":{"gitId":"-"},"content":"        CourseData courseData \u003d (CourseData) response.getOutput();"},{"lineNumber":147,"author":{"gitId":"-"},"content":""},{"lineNumber":148,"author":{"gitId":"-"},"content":"        assertEquals(expectedCourse.getId(), courseData.getCourseId());"},{"lineNumber":149,"author":{"gitId":"-"},"content":"        assertEquals(expectedCourse.getName(), courseData.getCourseName());"},{"lineNumber":150,"author":{"gitId":"-"},"content":"        assertEquals(expectedCourse.getTimeZone(), courseData.getTimeZone());"},{"lineNumber":151,"author":{"gitId":"-"},"content":""},{"lineNumber":152,"author":{"gitId":"-"},"content":"        StudentAttributes student1OfCourse1 \u003d typicalBundle.students.get(\"student1InCourse1\");"},{"lineNumber":153,"author":{"gitId":"-"},"content":"        expectedCourse \u003d logic.getCourse(student1OfCourse1.getCourse());"},{"lineNumber":154,"author":{"gitId":"-"},"content":"        loginAsStudent(student1OfCourse1.getGoogleId());"},{"lineNumber":155,"author":{"gitId":"-"},"content":""},{"lineNumber":156,"author":{"gitId":"-"},"content":"        ______TS(\"typical success case for student\");"},{"lineNumber":157,"author":{"gitId":"-"},"content":""},{"lineNumber":158,"author":{"gitId":"-"},"content":"        params \u003d new String[] {"},{"lineNumber":159,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, student1OfCourse1.getCourse(),"},{"lineNumber":160,"author":{"gitId":"-"},"content":"                Const.ParamsNames.ENTITY_TYPE, Const.EntityType.STUDENT,"},{"lineNumber":161,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":162,"author":{"gitId":"-"},"content":"        getCourseAction \u003d getAction(params);"},{"lineNumber":163,"author":{"gitId":"-"},"content":"        response \u003d getJsonResult(getCourseAction);"},{"lineNumber":164,"author":{"gitId":"-"},"content":""},{"lineNumber":165,"author":{"gitId":"-"},"content":"        courseData \u003d (CourseData) response.getOutput();"},{"lineNumber":166,"author":{"gitId":"-"},"content":""},{"lineNumber":167,"author":{"gitId":"-"},"content":"        assertEquals(expectedCourse.getId(), courseData.getCourseId());"},{"lineNumber":168,"author":{"gitId":"-"},"content":"        assertEquals(expectedCourse.getName(), courseData.getCourseName());"},{"lineNumber":169,"author":{"gitId":"-"},"content":"        assertEquals(expectedCourse.getTimeZone(), courseData.getTimeZone());"},{"lineNumber":170,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":171,"author":{"gitId":"-"},"content":""},{"lineNumber":172,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":173,"author":{"gitId":"-"},"content":"    protected void testExecute_notEnoughParameters_shouldFail() {"},{"lineNumber":174,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor1OfCourse1 \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":175,"author":{"gitId":"-"},"content":"        loginAsInstructor(instructor1OfCourse1.getGoogleId());"},{"lineNumber":176,"author":{"gitId":"-"},"content":""},{"lineNumber":177,"author":{"gitId":"-"},"content":"        ______TS(\"Not enough parameters\");"},{"lineNumber":178,"author":{"gitId":"-"},"content":""},{"lineNumber":179,"author":{"gitId":"-"},"content":"        verifyHttpParameterFailure();"},{"lineNumber":180,"author":{"gitId":"-"},"content":""},{"lineNumber":181,"author":{"gitId":"-"},"content":"        StudentAttributes student1OfCourse1 \u003d typicalBundle.students.get(\"student1InCourse1\");"},{"lineNumber":182,"author":{"gitId":"-"},"content":"        loginAsStudent(student1OfCourse1.getGoogleId());"},{"lineNumber":183,"author":{"gitId":"-"},"content":""},{"lineNumber":184,"author":{"gitId":"-"},"content":"        verifyHttpParameterFailure();"},{"lineNumber":185,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":186,"author":{"gitId":"-"},"content":""},{"lineNumber":187,"author":{"gitId":"EuniceSim142"},"content":"    @Test (enabled \u003d false)"},{"lineNumber":188,"author":{"gitId":"-"},"content":"    protected void testExecute_nonExistentCourse_shouldFail() {"},{"lineNumber":189,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor1OfCourse1 \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":190,"author":{"gitId":"-"},"content":"        loginAsInstructor(instructor1OfCourse1.getGoogleId());"},{"lineNumber":191,"author":{"gitId":"-"},"content":""},{"lineNumber":192,"author":{"gitId":"-"},"content":"        testNonExistentCourse();"},{"lineNumber":193,"author":{"gitId":"-"},"content":""},{"lineNumber":194,"author":{"gitId":"-"},"content":"        StudentAttributes student1OfCourse1 \u003d typicalBundle.students.get(\"student1InCourse1\");"},{"lineNumber":195,"author":{"gitId":"-"},"content":"        loginAsStudent(student1OfCourse1.getGoogleId());"},{"lineNumber":196,"author":{"gitId":"-"},"content":""},{"lineNumber":197,"author":{"gitId":"-"},"content":"        testNonExistentCourse();"},{"lineNumber":198,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":199,"author":{"gitId":"-"},"content":""},{"lineNumber":200,"author":{"gitId":"-"},"content":"    private void testNonExistentCourse() {"},{"lineNumber":201,"author":{"gitId":"-"},"content":"        String[] params \u003d {"},{"lineNumber":202,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, \"fake-course\","},{"lineNumber":203,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":204,"author":{"gitId":"-"},"content":""},{"lineNumber":205,"author":{"gitId":"-"},"content":"        assertNull(logic.getCourse(\"fake-course\"));"},{"lineNumber":206,"author":{"gitId":"-"},"content":""},{"lineNumber":207,"author":{"gitId":"-"},"content":"        EntityNotFoundException enfe \u003d verifyEntityNotFound(params);"},{"lineNumber":208,"author":{"gitId":"-"},"content":"        assertEquals(\"No course with id: fake-course\", enfe.getMessage());"},{"lineNumber":209,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":210,"author":{"gitId":"-"},"content":""},{"lineNumber":211,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":212,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":213,"author":{"gitId":"-"},"content":"    protected void testAccessControl() {"},{"lineNumber":214,"author":{"gitId":"-"},"content":"        //see test cases below"},{"lineNumber":215,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":216,"author":{"gitId":"-"},"content":""},{"lineNumber":217,"author":{"gitId":"EuniceSim142"},"content":"    @Test (enabled \u003d false)"},{"lineNumber":218,"author":{"gitId":"-"},"content":"    protected void testAccessControl_invalidParameterValues_shouldFail() {"},{"lineNumber":219,"author":{"gitId":"-"},"content":"        ______TS(\"non-existent course\");"},{"lineNumber":220,"author":{"gitId":"-"},"content":""},{"lineNumber":221,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor1OfCourse1 \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":222,"author":{"gitId":"-"},"content":"        loginAsInstructor(instructor1OfCourse1.getGoogleId());"},{"lineNumber":223,"author":{"gitId":"-"},"content":""},{"lineNumber":224,"author":{"gitId":"-"},"content":"        String[] submissionParams \u003d new String[] {"},{"lineNumber":225,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, \"not-exist\","},{"lineNumber":226,"author":{"gitId":"-"},"content":"                Const.ParamsNames.ENTITY_TYPE, Const.EntityType.INSTRUCTOR,"},{"lineNumber":227,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":228,"author":{"gitId":"-"},"content":""},{"lineNumber":229,"author":{"gitId":"-"},"content":"        assertNull(logic.getCourse(\"not-exist\"));"},{"lineNumber":230,"author":{"gitId":"-"},"content":""},{"lineNumber":231,"author":{"gitId":"-"},"content":"        verifyCannotAccess(submissionParams);"},{"lineNumber":232,"author":{"gitId":"-"},"content":""},{"lineNumber":233,"author":{"gitId":"-"},"content":"        ______TS(\"non-existent entitytype\");"},{"lineNumber":234,"author":{"gitId":"-"},"content":""},{"lineNumber":235,"author":{"gitId":"-"},"content":"        submissionParams \u003d new String[] {"},{"lineNumber":236,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, instructor1OfCourse1.getCourseId(),"},{"lineNumber":237,"author":{"gitId":"-"},"content":"                Const.ParamsNames.ENTITY_TYPE, \"no-entity\","},{"lineNumber":238,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":239,"author":{"gitId":"-"},"content":""},{"lineNumber":240,"author":{"gitId":"-"},"content":"        verifyCannotAccess(submissionParams);"},{"lineNumber":241,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":242,"author":{"gitId":"-"},"content":""},{"lineNumber":243,"author":{"gitId":"EuniceSim142"},"content":"    @Test(enabled \u003d false)"},{"lineNumber":244,"author":{"gitId":"-"},"content":"    protected void testAccessControl_testInstructorAccess_shouldPass() {"},{"lineNumber":245,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor1OfCourse1 \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":246,"author":{"gitId":"-"},"content":""},{"lineNumber":247,"author":{"gitId":"-"},"content":"        String[] submissionParams \u003d new String[] {"},{"lineNumber":248,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, instructor1OfCourse1.getCourseId(),"},{"lineNumber":249,"author":{"gitId":"-"},"content":"                Const.ParamsNames.ENTITY_TYPE, Const.EntityType.INSTRUCTOR,"},{"lineNumber":250,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":251,"author":{"gitId":"-"},"content":""},{"lineNumber":252,"author":{"gitId":"-"},"content":"        verifyOnlyInstructorsOfTheSameCourseCanAccess(submissionParams);"},{"lineNumber":253,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":254,"author":{"gitId":"-"},"content":""},{"lineNumber":255,"author":{"gitId":"EuniceSim142"},"content":"    @Test(enabled \u003d false)"},{"lineNumber":256,"author":{"gitId":"-"},"content":"    protected void testAccessControl_testStudentAccess_shouldPass() {"},{"lineNumber":257,"author":{"gitId":"-"},"content":"        StudentAttributes student1InCourse1 \u003d typicalBundle.students.get(\"student1InCourse1\");"},{"lineNumber":258,"author":{"gitId":"-"},"content":""},{"lineNumber":259,"author":{"gitId":"-"},"content":"        String[] submissionParams \u003d new String[] {"},{"lineNumber":260,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, student1InCourse1.getCourse(),"},{"lineNumber":261,"author":{"gitId":"-"},"content":"                Const.ParamsNames.ENTITY_TYPE, Const.EntityType.STUDENT,"},{"lineNumber":262,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":263,"author":{"gitId":"-"},"content":""},{"lineNumber":264,"author":{"gitId":"-"},"content":"        verifyAccessibleForStudentsOfTheSameCourse(submissionParams);"},{"lineNumber":265,"author":{"gitId":"-"},"content":"        verifyAccessibleForAdmin(submissionParams);"},{"lineNumber":266,"author":{"gitId":"-"},"content":"        verifyInaccessibleWithoutLogin(submissionParams);"},{"lineNumber":267,"author":{"gitId":"-"},"content":"        verifyInaccessibleForUnregisteredUsers(submissionParams);"},{"lineNumber":268,"author":{"gitId":"-"},"content":"        verifyInaccessibleForInstructors(submissionParams);"},{"lineNumber":269,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":270,"author":{"gitId":"-"},"content":""},{"lineNumber":271,"author":{"gitId":"EuniceSim142"},"content":"    @Test(enabled \u003d false)"},{"lineNumber":272,"author":{"gitId":"-"},"content":"    protected void testAccessControl_loggedInEntityBothInstructorAndStudent_shouldBeAccessible() throws Exception {"},{"lineNumber":273,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor1OfCourse1 \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":274,"author":{"gitId":"-"},"content":"        CourseAttributes typicalCourse2 \u003d typicalBundle.courses.get(\"typicalCourse2\");"},{"lineNumber":275,"author":{"gitId":"-"},"content":""},{"lineNumber":276,"author":{"gitId":"-"},"content":"        StudentAttributes student1InCourse2 \u003d typicalBundle.students.get(\"student1InCourse2\");"},{"lineNumber":277,"author":{"gitId":"-"},"content":"        logic.updateStudentCascade("},{"lineNumber":278,"author":{"gitId":"-"},"content":"                StudentAttributes.updateOptionsBuilder(student1InCourse2.getCourse(), student1InCourse2.getEmail())"},{"lineNumber":279,"author":{"gitId":"-"},"content":"                        .withGoogleId(instructor1OfCourse1.getGoogleId())"},{"lineNumber":280,"author":{"gitId":"-"},"content":"                        .build());"},{"lineNumber":281,"author":{"gitId":"-"},"content":""},{"lineNumber":282,"author":{"gitId":"-"},"content":"        loginAsStudentInstructor(instructor1OfCourse1.getGoogleId());"},{"lineNumber":283,"author":{"gitId":"-"},"content":""},{"lineNumber":284,"author":{"gitId":"-"},"content":"        ______TS(\"StudentInstructor can access course with only instructor privileges\");"},{"lineNumber":285,"author":{"gitId":"-"},"content":""},{"lineNumber":286,"author":{"gitId":"-"},"content":"        String[] params \u003d new String[] {"},{"lineNumber":287,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, instructor1OfCourse1.getCourseId(),"},{"lineNumber":288,"author":{"gitId":"-"},"content":"                Const.ParamsNames.ENTITY_TYPE, Const.EntityType.INSTRUCTOR,"},{"lineNumber":289,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":290,"author":{"gitId":"-"},"content":""},{"lineNumber":291,"author":{"gitId":"-"},"content":"        verifyCanAccess(params);"},{"lineNumber":292,"author":{"gitId":"-"},"content":""},{"lineNumber":293,"author":{"gitId":"-"},"content":"        ______TS(\"StudentInstructor can access course with only student privileges\");"},{"lineNumber":294,"author":{"gitId":"-"},"content":""},{"lineNumber":295,"author":{"gitId":"-"},"content":"        params \u003d new String[] {"},{"lineNumber":296,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, typicalCourse2.getId(),"},{"lineNumber":297,"author":{"gitId":"-"},"content":"                Const.ParamsNames.ENTITY_TYPE, Const.EntityType.STUDENT,"},{"lineNumber":298,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":299,"author":{"gitId":"-"},"content":""},{"lineNumber":300,"author":{"gitId":"-"},"content":"        verifyCanAccess(params);"},{"lineNumber":301,"author":{"gitId":"-"},"content":""},{"lineNumber":302,"author":{"gitId":"-"},"content":"        ______TS(\"StudentInstructor cannot access student identity\u0027s course with instructor privileges\");"},{"lineNumber":303,"author":{"gitId":"-"},"content":""},{"lineNumber":304,"author":{"gitId":"-"},"content":"        params \u003d new String[] {"},{"lineNumber":305,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, typicalCourse2.getId(),"},{"lineNumber":306,"author":{"gitId":"-"},"content":"                Const.ParamsNames.ENTITY_TYPE, Const.EntityType.INSTRUCTOR,"},{"lineNumber":307,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":308,"author":{"gitId":"-"},"content":""},{"lineNumber":309,"author":{"gitId":"-"},"content":"        verifyCannotAccess(params);"},{"lineNumber":310,"author":{"gitId":"-"},"content":""},{"lineNumber":311,"author":{"gitId":"-"},"content":"        ______TS(\"StudentInstructor cannot access instructor identity\u0027s course with student privileges\");"},{"lineNumber":312,"author":{"gitId":"-"},"content":""},{"lineNumber":313,"author":{"gitId":"-"},"content":"        params \u003d new String[] {"},{"lineNumber":314,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, instructor1OfCourse1.getCourseId(),"},{"lineNumber":315,"author":{"gitId":"-"},"content":"                Const.ParamsNames.ENTITY_TYPE, Const.EntityType.STUDENT,"},{"lineNumber":316,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":317,"author":{"gitId":"-"},"content":""},{"lineNumber":318,"author":{"gitId":"-"},"content":"        verifyCannotAccess(params);"},{"lineNumber":319,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":320,"author":{"gitId":"-"},"content":""},{"lineNumber":321,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"EuniceSim142":103,"-":218}},{"path":"src/test/java/teammates/ui/webapi/GetCourseSectionNamesActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":4,"author":{"gitId":"-"},"content":""},{"lineNumber":5,"author":{"gitId":"EuniceSim142"},"content":"import org.testng.annotations.Ignore;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import org.testng.annotations.Test;"},{"lineNumber":7,"author":{"gitId":"-"},"content":""},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.InstructorAttributes;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import teammates.ui.output.CourseSectionNamesData;"},{"lineNumber":11,"author":{"gitId":"-"},"content":""},{"lineNumber":12,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":13,"author":{"gitId":"-"},"content":" * SUT: {@link GetCourseSectionNamesAction}."},{"lineNumber":14,"author":{"gitId":"-"},"content":" */"},{"lineNumber":15,"author":{"gitId":"EuniceSim142"},"content":"@Ignore"},{"lineNumber":16,"author":{"gitId":"-"},"content":"public class GetCourseSectionNamesActionTest extends BaseActionTest\u003cGetCourseSectionNamesAction\u003e {"},{"lineNumber":17,"author":{"gitId":"-"},"content":""},{"lineNumber":18,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":19,"author":{"gitId":"-"},"content":"    protected String getActionUri() {"},{"lineNumber":20,"author":{"gitId":"-"},"content":"        return Const.ResourceURIs.COURSE_SECTIONS;"},{"lineNumber":21,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":22,"author":{"gitId":"-"},"content":""},{"lineNumber":23,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":24,"author":{"gitId":"-"},"content":"    protected String getRequestMethod() {"},{"lineNumber":25,"author":{"gitId":"-"},"content":"        return GET;"},{"lineNumber":26,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":27,"author":{"gitId":"-"},"content":""},{"lineNumber":28,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":29,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    protected void testExecute() {"},{"lineNumber":31,"author":{"gitId":"-"},"content":"        // See test cases below"},{"lineNumber":32,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":33,"author":{"gitId":"-"},"content":""},{"lineNumber":34,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":35,"author":{"gitId":"-"},"content":"    protected void testExecute_typicalUsage_shouldPass() throws Exception {"},{"lineNumber":36,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor1OfCourse1 \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":37,"author":{"gitId":"-"},"content":"        List\u003cString\u003e expectedSectionNames \u003d logic.getSectionNamesForCourse(instructor1OfCourse1.getCourseId());"},{"lineNumber":38,"author":{"gitId":"-"},"content":""},{"lineNumber":39,"author":{"gitId":"-"},"content":"        loginAsInstructor(instructor1OfCourse1.getGoogleId());"},{"lineNumber":40,"author":{"gitId":"-"},"content":""},{"lineNumber":41,"author":{"gitId":"-"},"content":"        ______TS(\"typical success case for instructor\");"},{"lineNumber":42,"author":{"gitId":"-"},"content":""},{"lineNumber":43,"author":{"gitId":"-"},"content":"        String[] params \u003d {"},{"lineNumber":44,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, instructor1OfCourse1.getCourseId(),"},{"lineNumber":45,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":46,"author":{"gitId":"-"},"content":"        GetCourseSectionNamesAction getCourseSectionNamesAction \u003d getAction(params);"},{"lineNumber":47,"author":{"gitId":"-"},"content":"        JsonResult response \u003d getJsonResult(getCourseSectionNamesAction);"},{"lineNumber":48,"author":{"gitId":"-"},"content":""},{"lineNumber":49,"author":{"gitId":"-"},"content":"        CourseSectionNamesData courseSectionNamesData \u003d (CourseSectionNamesData) response.getOutput();"},{"lineNumber":50,"author":{"gitId":"-"},"content":"        assertEquals(expectedSectionNames, courseSectionNamesData.getSectionNames());"},{"lineNumber":51,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":52,"author":{"gitId":"-"},"content":""},{"lineNumber":53,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":54,"author":{"gitId":"-"},"content":"    protected void testExecute_nonExistCourse_shouldFail() {"},{"lineNumber":55,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor1OfCourse1 \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":56,"author":{"gitId":"-"},"content":"        loginAsInstructor(instructor1OfCourse1.getGoogleId());"},{"lineNumber":57,"author":{"gitId":"-"},"content":""},{"lineNumber":58,"author":{"gitId":"-"},"content":"        ______TS(\"failed case for non-existent course\");"},{"lineNumber":59,"author":{"gitId":"-"},"content":""},{"lineNumber":60,"author":{"gitId":"-"},"content":"        String[] params \u003d {"},{"lineNumber":61,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, \"dummy-course\","},{"lineNumber":62,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":63,"author":{"gitId":"-"},"content":""},{"lineNumber":64,"author":{"gitId":"-"},"content":"        verifyEntityNotFound(params);"},{"lineNumber":65,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":66,"author":{"gitId":"-"},"content":""},{"lineNumber":67,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":68,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":69,"author":{"gitId":"-"},"content":"    protected void testAccessControl() {"},{"lineNumber":70,"author":{"gitId":"-"},"content":"        // See test cases below"},{"lineNumber":71,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":72,"author":{"gitId":"-"},"content":""},{"lineNumber":73,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":74,"author":{"gitId":"-"},"content":"    protected void testAccessControl_testInvalidAccess_shouldPass() {"},{"lineNumber":75,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":76,"author":{"gitId":"-"},"content":""},{"lineNumber":77,"author":{"gitId":"-"},"content":"        String[] instructorLoginParams \u003d new String[] {"},{"lineNumber":78,"author":{"gitId":"-"},"content":"                Const.ParamsNames.ENTITY_TYPE, Const.EntityType.INSTRUCTOR,"},{"lineNumber":79,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":80,"author":{"gitId":"-"},"content":""},{"lineNumber":81,"author":{"gitId":"-"},"content":"        ______TS(\"Without login, cannot access\");"},{"lineNumber":82,"author":{"gitId":"-"},"content":""},{"lineNumber":83,"author":{"gitId":"-"},"content":"        verifyInaccessibleWithoutLogin(instructorLoginParams);"},{"lineNumber":84,"author":{"gitId":"-"},"content":""},{"lineNumber":85,"author":{"gitId":"-"},"content":"        String[] instructorParams \u003d new String[] {"},{"lineNumber":86,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, instructor.getCourseId(),"},{"lineNumber":87,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":88,"author":{"gitId":"-"},"content":""},{"lineNumber":89,"author":{"gitId":"-"},"content":"        ______TS(\"Without registration, cannot access\");"},{"lineNumber":90,"author":{"gitId":"-"},"content":""},{"lineNumber":91,"author":{"gitId":"-"},"content":"        verifyInaccessibleForUnregisteredUsers(instructorParams);"},{"lineNumber":92,"author":{"gitId":"-"},"content":""},{"lineNumber":93,"author":{"gitId":"-"},"content":"        ______TS(\"Login as instructor, then can access\");"},{"lineNumber":94,"author":{"gitId":"-"},"content":"        loginAsInstructor(instructor.getGoogleId());"},{"lineNumber":95,"author":{"gitId":"-"},"content":"        verifyCanAccess(instructorParams);"},{"lineNumber":96,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":97,"author":{"gitId":"-"},"content":""},{"lineNumber":98,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":99,"author":{"gitId":"-"},"content":"    protected void testAccessControl_testInstructorAccess_shouldPass() {"},{"lineNumber":100,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor1OfCourse1 \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":101,"author":{"gitId":"-"},"content":""},{"lineNumber":102,"author":{"gitId":"-"},"content":"        String[] submissionParams \u003d new String[] {"},{"lineNumber":103,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, instructor1OfCourse1.getCourseId(),"},{"lineNumber":104,"author":{"gitId":"-"},"content":"                Const.ParamsNames.ENTITY_TYPE, Const.EntityType.INSTRUCTOR,"},{"lineNumber":105,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":106,"author":{"gitId":"-"},"content":""},{"lineNumber":107,"author":{"gitId":"-"},"content":"        verifyOnlyInstructorsOfTheSameCourseCanAccess(submissionParams);"},{"lineNumber":108,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":109,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"EuniceSim142":2,"-":107}},{"path":"src/test/java/teammates/ui/webapi/GetInstructorsActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":4,"author":{"gitId":"-"},"content":""},{"lineNumber":5,"author":{"gitId":"domlimm"},"content":"import org.testng.annotations.Ignore;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import org.testng.annotations.Test;"},{"lineNumber":7,"author":{"gitId":"-"},"content":""},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.InstructorPermissionRole;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.InstructorAttributes;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.StudentAttributes;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import teammates.ui.output.InstructorData;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import teammates.ui.output.InstructorsData;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import teammates.ui.output.JoinState;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import teammates.ui.request.Intent;"},{"lineNumber":16,"author":{"gitId":"-"},"content":""},{"lineNumber":17,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":18,"author":{"gitId":"-"},"content":" * SUT: {@link GetInstructorsAction}."},{"lineNumber":19,"author":{"gitId":"-"},"content":" */"},{"lineNumber":20,"author":{"gitId":"domlimm"},"content":"@Ignore"},{"lineNumber":21,"author":{"gitId":"-"},"content":"public class GetInstructorsActionTest extends BaseActionTest\u003cGetInstructorsAction\u003e {"},{"lineNumber":22,"author":{"gitId":"-"},"content":""},{"lineNumber":23,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":24,"author":{"gitId":"-"},"content":"    protected String getActionUri() {"},{"lineNumber":25,"author":{"gitId":"-"},"content":"        return Const.ResourceURIs.INSTRUCTORS;"},{"lineNumber":26,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":27,"author":{"gitId":"-"},"content":""},{"lineNumber":28,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":29,"author":{"gitId":"-"},"content":"    protected String getRequestMethod() {"},{"lineNumber":30,"author":{"gitId":"-"},"content":"        return GET;"},{"lineNumber":31,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":32,"author":{"gitId":"-"},"content":""},{"lineNumber":33,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":34,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":35,"author":{"gitId":"-"},"content":"    protected void testExecute() {"},{"lineNumber":36,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":37,"author":{"gitId":"-"},"content":"        loginAsInstructor(instructor.getGoogleId());"},{"lineNumber":38,"author":{"gitId":"-"},"content":""},{"lineNumber":39,"author":{"gitId":"-"},"content":"        ______TS(\"Invalid parameters\");"},{"lineNumber":40,"author":{"gitId":"-"},"content":"        // no parameters"},{"lineNumber":41,"author":{"gitId":"-"},"content":"        verifyHttpParameterFailure();"},{"lineNumber":42,"author":{"gitId":"-"},"content":""},{"lineNumber":43,"author":{"gitId":"-"},"content":"        ______TS(\"unknown intent\");"},{"lineNumber":44,"author":{"gitId":"-"},"content":"        String[] submissionParams \u003d new String[] {"},{"lineNumber":45,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, instructor.getCourseId(),"},{"lineNumber":46,"author":{"gitId":"-"},"content":"                Const.ParamsNames.INTENT, \"Unknown\","},{"lineNumber":47,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":48,"author":{"gitId":"-"},"content":""},{"lineNumber":49,"author":{"gitId":"-"},"content":"        verifyHttpParameterFailure(submissionParams);"},{"lineNumber":50,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":51,"author":{"gitId":"-"},"content":""},{"lineNumber":52,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":53,"author":{"gitId":"-"},"content":"    public void testExecute_withoutIntent_shouldReturnPartialData() {"},{"lineNumber":54,"author":{"gitId":"-"},"content":"        StudentAttributes studentAttributes \u003d typicalBundle.students.get(\"student1InCourse1\");"},{"lineNumber":55,"author":{"gitId":"-"},"content":"        loginAsStudent(studentAttributes.getGoogleId());"},{"lineNumber":56,"author":{"gitId":"-"},"content":""},{"lineNumber":57,"author":{"gitId":"-"},"content":"        String[] submissionParams \u003d new String[] {"},{"lineNumber":58,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, studentAttributes.getCourse(),"},{"lineNumber":59,"author":{"gitId":"-"},"content":"                Const.ParamsNames.TEAM_NAME, studentAttributes.getTeam(),"},{"lineNumber":60,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":61,"author":{"gitId":"-"},"content":"        GetInstructorsAction action \u003d getAction(submissionParams);"},{"lineNumber":62,"author":{"gitId":"-"},"content":"        JsonResult jsonResult \u003d getJsonResult(action);"},{"lineNumber":63,"author":{"gitId":"-"},"content":""},{"lineNumber":64,"author":{"gitId":"-"},"content":"        InstructorsData output \u003d (InstructorsData) jsonResult.getOutput();"},{"lineNumber":65,"author":{"gitId":"-"},"content":"        List\u003cInstructorData\u003e instructors \u003d output.getInstructors();"},{"lineNumber":66,"author":{"gitId":"-"},"content":""},{"lineNumber":67,"author":{"gitId":"-"},"content":"        // the #instructors is 5"},{"lineNumber":68,"author":{"gitId":"-"},"content":"        assertEquals(5, logic.getInstructorsForCourse(studentAttributes.getCourse()).size());"},{"lineNumber":69,"author":{"gitId":"-"},"content":"        // with information hiding, it is 4 instead"},{"lineNumber":70,"author":{"gitId":"-"},"content":"        assertEquals(4, instructors.size());"},{"lineNumber":71,"author":{"gitId":"-"},"content":"        InstructorData typicalInstructor \u003d instructors.get(0);"},{"lineNumber":72,"author":{"gitId":"-"},"content":"        assertEquals(\"idOfTypicalCourse1\", typicalInstructor.getCourseId());"},{"lineNumber":73,"author":{"gitId":"-"},"content":"        assertEquals(\"instructorNotYetJoinedCourse1@email.tmt\", typicalInstructor.getEmail());"},{"lineNumber":74,"author":{"gitId":"-"},"content":"        assertEquals(\"Instructor Not Yet Joined Course 1\", typicalInstructor.getName());"},{"lineNumber":75,"author":{"gitId":"-"},"content":"        assertEquals(\"Instructor\", typicalInstructor.getDisplayedToStudentsAs());"},{"lineNumber":76,"author":{"gitId":"-"},"content":"        assertNull(typicalInstructor.getRole());"},{"lineNumber":77,"author":{"gitId":"-"},"content":"        assertNull(typicalInstructor.getIsDisplayedToStudents());"},{"lineNumber":78,"author":{"gitId":"-"},"content":"        assertNull(typicalInstructor.getGoogleId());"},{"lineNumber":79,"author":{"gitId":"-"},"content":"        assertNull(typicalInstructor.getJoinState()); // information is hidden"},{"lineNumber":80,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":81,"author":{"gitId":"-"},"content":""},{"lineNumber":82,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":83,"author":{"gitId":"-"},"content":"    public void testExecute_withFullDetailIntent_shouldReturnDataWithFullDetail() {"},{"lineNumber":84,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":85,"author":{"gitId":"-"},"content":"        loginAsInstructor(instructor.getGoogleId());"},{"lineNumber":86,"author":{"gitId":"-"},"content":""},{"lineNumber":87,"author":{"gitId":"-"},"content":"        String[] submissionParams \u003d new String[] {"},{"lineNumber":88,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, instructor.getCourseId(),"},{"lineNumber":89,"author":{"gitId":"-"},"content":"                Const.ParamsNames.INTENT, Intent.FULL_DETAIL.toString(),"},{"lineNumber":90,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":91,"author":{"gitId":"-"},"content":""},{"lineNumber":92,"author":{"gitId":"-"},"content":"        GetInstructorsAction action \u003d getAction(submissionParams);"},{"lineNumber":93,"author":{"gitId":"-"},"content":"        JsonResult jsonResult \u003d getJsonResult(action);"},{"lineNumber":94,"author":{"gitId":"-"},"content":""},{"lineNumber":95,"author":{"gitId":"-"},"content":"        InstructorsData output \u003d (InstructorsData) jsonResult.getOutput();"},{"lineNumber":96,"author":{"gitId":"-"},"content":"        List\u003cInstructorData\u003e instructors \u003d output.getInstructors();"},{"lineNumber":97,"author":{"gitId":"-"},"content":""},{"lineNumber":98,"author":{"gitId":"-"},"content":"        // the #instructors is 5"},{"lineNumber":99,"author":{"gitId":"-"},"content":"        assertEquals(5, logic.getInstructorsForCourse(instructor.getCourseId()).size());"},{"lineNumber":100,"author":{"gitId":"-"},"content":"        // without information hiding, it is still 5"},{"lineNumber":101,"author":{"gitId":"-"},"content":"        assertEquals(5, instructors.size());"},{"lineNumber":102,"author":{"gitId":"-"},"content":"        InstructorData typicalInstructor \u003d instructors.get(0);"},{"lineNumber":103,"author":{"gitId":"-"},"content":"        assertEquals(\"idOfHelperOfCourse1\", typicalInstructor.getGoogleId());"},{"lineNumber":104,"author":{"gitId":"-"},"content":"        assertEquals(\"idOfTypicalCourse1\", typicalInstructor.getCourseId());"},{"lineNumber":105,"author":{"gitId":"-"},"content":"        assertEquals(\"helper@course1.tmt\", typicalInstructor.getEmail());"},{"lineNumber":106,"author":{"gitId":"-"},"content":"        assertEquals(\"Helper Course1\", typicalInstructor.getName());"},{"lineNumber":107,"author":{"gitId":"-"},"content":"        assertEquals(\"Helper\", typicalInstructor.getDisplayedToStudentsAs());"},{"lineNumber":108,"author":{"gitId":"-"},"content":"        assertEquals(InstructorPermissionRole.INSTRUCTOR_PERMISSION_ROLE_CUSTOM, typicalInstructor.getRole());"},{"lineNumber":109,"author":{"gitId":"-"},"content":"        assertFalse(typicalInstructor.getIsDisplayedToStudents());"},{"lineNumber":110,"author":{"gitId":"-"},"content":"        assertEquals(JoinState.JOINED, typicalInstructor.getJoinState());"},{"lineNumber":111,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":112,"author":{"gitId":"-"},"content":""},{"lineNumber":113,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":114,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":115,"author":{"gitId":"-"},"content":"    protected void testAccessControl() {"},{"lineNumber":116,"author":{"gitId":"-"},"content":"        ______TS(\"course not exist\");"},{"lineNumber":117,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":118,"author":{"gitId":"-"},"content":"        loginAsInstructor(instructor.getGoogleId());"},{"lineNumber":119,"author":{"gitId":"-"},"content":"        String[] submissionParams \u003d new String[] {"},{"lineNumber":120,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, \"randomId\","},{"lineNumber":121,"author":{"gitId":"-"},"content":"                Const.ParamsNames.INTENT, Intent.FULL_DETAIL.toString(),"},{"lineNumber":122,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":123,"author":{"gitId":"-"},"content":"        verifyEntityNotFoundAcl(submissionParams);"},{"lineNumber":124,"author":{"gitId":"-"},"content":""},{"lineNumber":125,"author":{"gitId":"-"},"content":"        StudentAttributes studentAttributes \u003d typicalBundle.students.get(\"student1InCourse1\");"},{"lineNumber":126,"author":{"gitId":"-"},"content":"        loginAsStudent(studentAttributes.getGoogleId());"},{"lineNumber":127,"author":{"gitId":"-"},"content":"        submissionParams \u003d new String[] {"},{"lineNumber":128,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, \"randomId\","},{"lineNumber":129,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":130,"author":{"gitId":"-"},"content":"        verifyEntityNotFoundAcl(submissionParams);"},{"lineNumber":131,"author":{"gitId":"-"},"content":""},{"lineNumber":132,"author":{"gitId":"-"},"content":"        ______TS(\"unknown login entity\");"},{"lineNumber":133,"author":{"gitId":"-"},"content":"        loginAsUnregistered(\"unregistered\");"},{"lineNumber":134,"author":{"gitId":"-"},"content":"        String[] params \u003d new String[] {"},{"lineNumber":135,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, instructor.getCourseId(),"},{"lineNumber":136,"author":{"gitId":"-"},"content":"                Const.ParamsNames.INTENT, Intent.FULL_DETAIL.toString(),"},{"lineNumber":137,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":138,"author":{"gitId":"-"},"content":"        verifyCannotAccess(params);"},{"lineNumber":139,"author":{"gitId":"-"},"content":""},{"lineNumber":140,"author":{"gitId":"-"},"content":"        params \u003d new String[] {"},{"lineNumber":141,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, instructor.getCourseId(),"},{"lineNumber":142,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":143,"author":{"gitId":"-"},"content":"        verifyCannotAccess(params);"},{"lineNumber":144,"author":{"gitId":"-"},"content":""},{"lineNumber":145,"author":{"gitId":"-"},"content":"        ______TS(\"unknown intent\");"},{"lineNumber":146,"author":{"gitId":"-"},"content":"        loginAsInstructor(instructor.getGoogleId());"},{"lineNumber":147,"author":{"gitId":"-"},"content":"        params \u003d new String[] {"},{"lineNumber":148,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, instructor.getCourseId(),"},{"lineNumber":149,"author":{"gitId":"-"},"content":"                Const.ParamsNames.INTENT, \"Unknown\","},{"lineNumber":150,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":151,"author":{"gitId":"-"},"content":"        verifyHttpParameterFailureAcl(params);"},{"lineNumber":152,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":153,"author":{"gitId":"-"},"content":""},{"lineNumber":154,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":155,"author":{"gitId":"-"},"content":"    public void testAccessControl_withFullDetailIntent_shouldDoAuthenticationOfInstructor() {"},{"lineNumber":156,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor1OfCourse1 \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":157,"author":{"gitId":"-"},"content":""},{"lineNumber":158,"author":{"gitId":"-"},"content":"        String[] submissionParams \u003d new String[] {"},{"lineNumber":159,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, instructor1OfCourse1.getCourseId(),"},{"lineNumber":160,"author":{"gitId":"-"},"content":"                Const.ParamsNames.INTENT, Intent.FULL_DETAIL.toString(),"},{"lineNumber":161,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":162,"author":{"gitId":"-"},"content":"        verifyOnlyInstructorsOfTheSameCourseCanAccess(submissionParams);"},{"lineNumber":163,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":164,"author":{"gitId":"-"},"content":""},{"lineNumber":165,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":166,"author":{"gitId":"-"},"content":"    public void testAccessControl_withoutIntent_shouldDoAuthenticationOfStudent() {"},{"lineNumber":167,"author":{"gitId":"-"},"content":"        StudentAttributes studentAttributes \u003d typicalBundle.students.get(\"student1InCourse1\");"},{"lineNumber":168,"author":{"gitId":"-"},"content":"        loginAsStudent(studentAttributes.getGoogleId());"},{"lineNumber":169,"author":{"gitId":"-"},"content":""},{"lineNumber":170,"author":{"gitId":"-"},"content":"        // try to access instructors in his own course"},{"lineNumber":171,"author":{"gitId":"-"},"content":"        String[] submissionParams \u003d new String[] {"},{"lineNumber":172,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, studentAttributes.getCourse(),"},{"lineNumber":173,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":174,"author":{"gitId":"-"},"content":"        verifyCanAccess(submissionParams);"},{"lineNumber":175,"author":{"gitId":"-"},"content":""},{"lineNumber":176,"author":{"gitId":"-"},"content":"        // try to access instructors in other course"},{"lineNumber":177,"author":{"gitId":"-"},"content":"        StudentAttributes otherStudent \u003d typicalBundle.students.get(\"student1InCourse2\");"},{"lineNumber":178,"author":{"gitId":"-"},"content":"        assertNotEquals(otherStudent.getCourse(), studentAttributes.getCourse());"},{"lineNumber":179,"author":{"gitId":"-"},"content":"        submissionParams \u003d new String[] {"},{"lineNumber":180,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, otherStudent.getCourse(),"},{"lineNumber":181,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":182,"author":{"gitId":"-"},"content":"        verifyCannotAccess(submissionParams);"},{"lineNumber":183,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":184,"author":{"gitId":"-"},"content":""},{"lineNumber":185,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"domlimm":2,"-":183}},{"path":"src/test/java/teammates/ui/webapi/GetNotificationActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import org.testng.annotations.BeforeMethod;"},{"lineNumber":4,"author":{"gitId":"hhdqirui"},"content":"import org.testng.annotations.Ignore;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import org.testng.annotations.Test;"},{"lineNumber":6,"author":{"gitId":"-"},"content":""},{"lineNumber":7,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.NotificationAttributes;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.ui.output.NotificationData;"},{"lineNumber":10,"author":{"gitId":"-"},"content":""},{"lineNumber":11,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":12,"author":{"gitId":"-"},"content":" * SUT: {@link GetNotificationAction}."},{"lineNumber":13,"author":{"gitId":"-"},"content":" */"},{"lineNumber":14,"author":{"gitId":"hhdqirui"},"content":"@Ignore"},{"lineNumber":15,"author":{"gitId":"-"},"content":"public class GetNotificationActionTest extends BaseActionTest\u003cGetNotificationAction\u003e {"},{"lineNumber":16,"author":{"gitId":"-"},"content":""},{"lineNumber":17,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":18,"author":{"gitId":"-"},"content":"    String getActionUri() {"},{"lineNumber":19,"author":{"gitId":"-"},"content":"        return Const.ResourceURIs.NOTIFICATION;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":21,"author":{"gitId":"-"},"content":""},{"lineNumber":22,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":23,"author":{"gitId":"-"},"content":"    String getRequestMethod() {"},{"lineNumber":24,"author":{"gitId":"-"},"content":"        return GET;"},{"lineNumber":25,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":26,"author":{"gitId":"-"},"content":""},{"lineNumber":27,"author":{"gitId":"-"},"content":"    @BeforeMethod"},{"lineNumber":28,"author":{"gitId":"-"},"content":"    public void baseClassSetup() {"},{"lineNumber":29,"author":{"gitId":"-"},"content":"        loginAsAdmin();"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":31,"author":{"gitId":"-"},"content":""},{"lineNumber":32,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":33,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":34,"author":{"gitId":"-"},"content":"    protected void testAccessControl() {"},{"lineNumber":35,"author":{"gitId":"-"},"content":"        verifyOnlyAdminCanAccess();"},{"lineNumber":36,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":37,"author":{"gitId":"-"},"content":""},{"lineNumber":38,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":39,"author":{"gitId":"-"},"content":"    protected void testExecute() {"},{"lineNumber":40,"author":{"gitId":"-"},"content":"        // See independent test cases"},{"lineNumber":41,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":42,"author":{"gitId":"-"},"content":""},{"lineNumber":43,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":44,"author":{"gitId":"-"},"content":"    protected void testExecute_withValidNotificationId_shouldReturnData() {"},{"lineNumber":45,"author":{"gitId":"-"},"content":"        ______TS(\"Success: Get existing notification\");"},{"lineNumber":46,"author":{"gitId":"-"},"content":"        NotificationAttributes notification \u003d typicalBundle.notifications.get(\"notification1\");"},{"lineNumber":47,"author":{"gitId":"-"},"content":"        NotificationData expected \u003d new NotificationData(notification);"},{"lineNumber":48,"author":{"gitId":"-"},"content":""},{"lineNumber":49,"author":{"gitId":"-"},"content":"        String[] requestParams \u003d new String[] {"},{"lineNumber":50,"author":{"gitId":"-"},"content":"                Const.ParamsNames.NOTIFICATION_ID, \"notification1\","},{"lineNumber":51,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":52,"author":{"gitId":"-"},"content":""},{"lineNumber":53,"author":{"gitId":"-"},"content":"        GetNotificationAction action \u003d getAction(requestParams);"},{"lineNumber":54,"author":{"gitId":"-"},"content":"        JsonResult jsonResult \u003d getJsonResult(action);"},{"lineNumber":55,"author":{"gitId":"-"},"content":""},{"lineNumber":56,"author":{"gitId":"-"},"content":"        NotificationData output \u003d (NotificationData) jsonResult.getOutput();"},{"lineNumber":57,"author":{"gitId":"-"},"content":"        verifyNotificationEquals(expected, output);"},{"lineNumber":58,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":59,"author":{"gitId":"-"},"content":""},{"lineNumber":60,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":61,"author":{"gitId":"-"},"content":"    protected void testExecute_withInvalidNotificationId_shouldThrowError() {"},{"lineNumber":62,"author":{"gitId":"-"},"content":"        ______TS(\"Failure: Notification does not exist\");"},{"lineNumber":63,"author":{"gitId":"-"},"content":""},{"lineNumber":64,"author":{"gitId":"-"},"content":"        GetNotificationAction action \u003d getAction(Const.ParamsNames.NOTIFICATION_ID, \"invalid-notif\");"},{"lineNumber":65,"author":{"gitId":"-"},"content":"        EntityNotFoundException enfe \u003d assertThrows(EntityNotFoundException.class, action::execute);"},{"lineNumber":66,"author":{"gitId":"-"},"content":"        assertEquals(\"Notification does not exist.\", enfe.getMessage());"},{"lineNumber":67,"author":{"gitId":"-"},"content":""},{"lineNumber":68,"author":{"gitId":"-"},"content":"        ______TS(\"Failure: Notification id is null\");"},{"lineNumber":69,"author":{"gitId":"-"},"content":"        GetNotificationAction action2 \u003d getAction(Const.ParamsNames.NOTIFICATION_ID, null, new String[] {});"},{"lineNumber":70,"author":{"gitId":"-"},"content":"        InvalidHttpParameterException ihpe \u003d assertThrows(InvalidHttpParameterException.class, action2::execute);"},{"lineNumber":71,"author":{"gitId":"-"},"content":"        assertEquals(\"The [notificationid] HTTP parameter is null.\", ihpe.getMessage());"},{"lineNumber":72,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":73,"author":{"gitId":"-"},"content":""},{"lineNumber":74,"author":{"gitId":"-"},"content":"    private void verifyNotificationEquals(NotificationData expected, NotificationData actual) {"},{"lineNumber":75,"author":{"gitId":"-"},"content":"        assertEquals(expected.getNotificationId(), actual.getNotificationId());"},{"lineNumber":76,"author":{"gitId":"-"},"content":"        assertEquals(expected.getStyle(), actual.getStyle());"},{"lineNumber":77,"author":{"gitId":"-"},"content":"        assertEquals(expected.getTargetUser(), actual.getTargetUser());"},{"lineNumber":78,"author":{"gitId":"-"},"content":"        assertEquals(expected.getTitle(), actual.getTitle());"},{"lineNumber":79,"author":{"gitId":"-"},"content":"        assertEquals(expected.getMessage(), actual.getMessage());"},{"lineNumber":80,"author":{"gitId":"-"},"content":"        assertEquals(expected.getStartTimestamp(), actual.getStartTimestamp());"},{"lineNumber":81,"author":{"gitId":"-"},"content":"        assertEquals(expected.getEndTimestamp(), actual.getEndTimestamp());"},{"lineNumber":82,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":83,"author":{"gitId":"-"},"content":""},{"lineNumber":84,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"hhdqirui":2,"-":82}},{"path":"src/test/java/teammates/ui/webapi/GetNotificationsActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.util.Set;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.util.stream.Collectors;"},{"lineNumber":6,"author":{"gitId":"-"},"content":""},{"lineNumber":7,"author":{"gitId":"hhdqirui"},"content":"import org.testng.annotations.Ignore;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import org.testng.annotations.Test;"},{"lineNumber":9,"author":{"gitId":"-"},"content":""},{"lineNumber":10,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.NotificationTargetUser;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.InstructorAttributes;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.NotificationAttributes;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.StudentAttributes;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import teammates.ui.output.NotificationData;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"import teammates.ui.output.NotificationsData;"},{"lineNumber":17,"author":{"gitId":"-"},"content":""},{"lineNumber":18,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":19,"author":{"gitId":"-"},"content":" * SUT: {@link GetNotificationsAction}."},{"lineNumber":20,"author":{"gitId":"-"},"content":" */"},{"lineNumber":21,"author":{"gitId":"hhdqirui"},"content":"@Ignore"},{"lineNumber":22,"author":{"gitId":"-"},"content":"public class GetNotificationsActionTest extends BaseActionTest\u003cGetNotificationsAction\u003e {"},{"lineNumber":23,"author":{"gitId":"-"},"content":""},{"lineNumber":24,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":25,"author":{"gitId":"-"},"content":"    String getActionUri() {"},{"lineNumber":26,"author":{"gitId":"-"},"content":"        return Const.ResourceURIs.NOTIFICATIONS;"},{"lineNumber":27,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":28,"author":{"gitId":"-"},"content":""},{"lineNumber":29,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    String getRequestMethod() {"},{"lineNumber":31,"author":{"gitId":"-"},"content":"        return GET;"},{"lineNumber":32,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":33,"author":{"gitId":"-"},"content":""},{"lineNumber":34,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":35,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":36,"author":{"gitId":"-"},"content":"    protected void testExecute() {"},{"lineNumber":37,"author":{"gitId":"-"},"content":"        // See independent test cases"},{"lineNumber":38,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":39,"author":{"gitId":"-"},"content":""},{"lineNumber":40,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":41,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":42,"author":{"gitId":"-"},"content":"    protected void testAccessControl() {"},{"lineNumber":43,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":44,"author":{"gitId":"-"},"content":"        loginAsInstructor(instructor.getGoogleId());"},{"lineNumber":45,"author":{"gitId":"-"},"content":"        ______TS(\"student notification not accessible to instructor\");"},{"lineNumber":46,"author":{"gitId":"-"},"content":"        String[] requestParams \u003d new String[] {"},{"lineNumber":47,"author":{"gitId":"-"},"content":"                Const.ParamsNames.NOTIFICATION_TARGET_USER, NotificationTargetUser.STUDENT.toString(),"},{"lineNumber":48,"author":{"gitId":"-"},"content":"                Const.ParamsNames.NOTIFICATION_IS_FETCHING_ALL, String.valueOf(true),"},{"lineNumber":49,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":50,"author":{"gitId":"-"},"content":"        verifyCannotAccess(requestParams);"},{"lineNumber":51,"author":{"gitId":"-"},"content":""},{"lineNumber":52,"author":{"gitId":"-"},"content":"        ______TS(\"accessible to instructor\");"},{"lineNumber":53,"author":{"gitId":"-"},"content":"        requestParams \u003d new String[] {"},{"lineNumber":54,"author":{"gitId":"-"},"content":"                Const.ParamsNames.NOTIFICATION_TARGET_USER, NotificationTargetUser.INSTRUCTOR.toString(),"},{"lineNumber":55,"author":{"gitId":"-"},"content":"                Const.ParamsNames.NOTIFICATION_IS_FETCHING_ALL, String.valueOf(true),"},{"lineNumber":56,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":57,"author":{"gitId":"-"},"content":"        verifyCanAccess(requestParams);"},{"lineNumber":58,"author":{"gitId":"-"},"content":""},{"lineNumber":59,"author":{"gitId":"-"},"content":"        ______TS(\"instructor notification not accessible to student\");"},{"lineNumber":60,"author":{"gitId":"-"},"content":"        StudentAttributes studentAttributes \u003d typicalBundle.students.get(\"student1InCourse1\");"},{"lineNumber":61,"author":{"gitId":"-"},"content":"        loginAsStudent(studentAttributes.getGoogleId());"},{"lineNumber":62,"author":{"gitId":"-"},"content":"        requestParams \u003d new String[] {"},{"lineNumber":63,"author":{"gitId":"-"},"content":"                Const.ParamsNames.NOTIFICATION_TARGET_USER, NotificationTargetUser.INSTRUCTOR.toString(),"},{"lineNumber":64,"author":{"gitId":"-"},"content":"                Const.ParamsNames.NOTIFICATION_IS_FETCHING_ALL, String.valueOf(true),"},{"lineNumber":65,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":66,"author":{"gitId":"-"},"content":"        verifyCannotAccess(requestParams);"},{"lineNumber":67,"author":{"gitId":"-"},"content":""},{"lineNumber":68,"author":{"gitId":"-"},"content":"        ______TS(\"accessible to student\");"},{"lineNumber":69,"author":{"gitId":"-"},"content":"        requestParams \u003d new String[] {"},{"lineNumber":70,"author":{"gitId":"-"},"content":"                Const.ParamsNames.NOTIFICATION_TARGET_USER, NotificationTargetUser.STUDENT.toString(),"},{"lineNumber":71,"author":{"gitId":"-"},"content":"                Const.ParamsNames.NOTIFICATION_IS_FETCHING_ALL, String.valueOf(true),"},{"lineNumber":72,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":73,"author":{"gitId":"-"},"content":"        verifyCanAccess(requestParams);"},{"lineNumber":74,"author":{"gitId":"-"},"content":""},{"lineNumber":75,"author":{"gitId":"-"},"content":"        ______TS(\"unknown target user\");"},{"lineNumber":76,"author":{"gitId":"-"},"content":"        loginAsInstructor(instructor.getGoogleId());"},{"lineNumber":77,"author":{"gitId":"-"},"content":"        requestParams \u003d new String[] {"},{"lineNumber":78,"author":{"gitId":"-"},"content":"                Const.ParamsNames.NOTIFICATION_TARGET_USER, \"unknown\","},{"lineNumber":79,"author":{"gitId":"-"},"content":"                Const.ParamsNames.NOTIFICATION_IS_FETCHING_ALL, String.valueOf(true),"},{"lineNumber":80,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":81,"author":{"gitId":"-"},"content":"        verifyHttpParameterFailureAcl(requestParams);"},{"lineNumber":82,"author":{"gitId":"-"},"content":""},{"lineNumber":83,"author":{"gitId":"-"},"content":"        ______TS(\"accessible to admin\");"},{"lineNumber":84,"author":{"gitId":"-"},"content":"        loginAsAdmin();"},{"lineNumber":85,"author":{"gitId":"-"},"content":"        requestParams \u003d new String[] {"},{"lineNumber":86,"author":{"gitId":"-"},"content":"                Const.ParamsNames.NOTIFICATION_TARGET_USER, null,"},{"lineNumber":87,"author":{"gitId":"-"},"content":"                Const.ParamsNames.NOTIFICATION_IS_FETCHING_ALL, String.valueOf(true),"},{"lineNumber":88,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":89,"author":{"gitId":"-"},"content":"        verifyCanAccess(requestParams);"},{"lineNumber":90,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":91,"author":{"gitId":"-"},"content":""},{"lineNumber":92,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":93,"author":{"gitId":"-"},"content":"    public void testExecute_withValidUserTypeForNonAdmin_shouldReturnData() {"},{"lineNumber":94,"author":{"gitId":"-"},"content":"        ______TS(\"Request to fetch notification\");"},{"lineNumber":95,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":96,"author":{"gitId":"-"},"content":"        loginAsInstructor(instructor.getGoogleId());"},{"lineNumber":97,"author":{"gitId":"-"},"content":"        NotificationAttributes notification \u003d typicalBundle.notifications.get(\"notification5\");"},{"lineNumber":98,"author":{"gitId":"-"},"content":"        int expectedNumberOfNotifications \u003d"},{"lineNumber":99,"author":{"gitId":"-"},"content":"                logic.getActiveNotificationsByTargetUser(notification.getTargetUser()).size();"},{"lineNumber":100,"author":{"gitId":"-"},"content":""},{"lineNumber":101,"author":{"gitId":"-"},"content":"        String[] requestParams \u003d new String[] {"},{"lineNumber":102,"author":{"gitId":"-"},"content":"                Const.ParamsNames.NOTIFICATION_TARGET_USER, NotificationTargetUser.INSTRUCTOR.toString(),"},{"lineNumber":103,"author":{"gitId":"-"},"content":"                Const.ParamsNames.NOTIFICATION_IS_FETCHING_ALL, String.valueOf(true),"},{"lineNumber":104,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":105,"author":{"gitId":"-"},"content":""},{"lineNumber":106,"author":{"gitId":"-"},"content":"        GetNotificationsAction action \u003d getAction(requestParams);"},{"lineNumber":107,"author":{"gitId":"-"},"content":"        JsonResult jsonResult \u003d getJsonResult(action);"},{"lineNumber":108,"author":{"gitId":"-"},"content":""},{"lineNumber":109,"author":{"gitId":"-"},"content":"        NotificationsData output \u003d (NotificationsData) jsonResult.getOutput();"},{"lineNumber":110,"author":{"gitId":"-"},"content":"        List\u003cNotificationData\u003e notifications \u003d output.getNotifications();"},{"lineNumber":111,"author":{"gitId":"-"},"content":""},{"lineNumber":112,"author":{"gitId":"-"},"content":"        // should fetch correct number of notifications"},{"lineNumber":113,"author":{"gitId":"-"},"content":"        assertEquals(expectedNumberOfNotifications, notifications.size());"},{"lineNumber":114,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":115,"author":{"gitId":"-"},"content":""},{"lineNumber":116,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":117,"author":{"gitId":"-"},"content":"    public void testExecute_withoutUserTypeForAdmin_shouldReturnAllNotifications() {"},{"lineNumber":118,"author":{"gitId":"-"},"content":"        ______TS(\"Admin request to fetch notification\");"},{"lineNumber":119,"author":{"gitId":"-"},"content":"        int expectedNumberOfNotifications \u003d typicalBundle.notifications.size();"},{"lineNumber":120,"author":{"gitId":"-"},"content":"        loginAsAdmin();"},{"lineNumber":121,"author":{"gitId":"-"},"content":"        NotificationAttributes notification \u003d typicalBundle.notifications.get(\"notStartedNotification2\");"},{"lineNumber":122,"author":{"gitId":"-"},"content":""},{"lineNumber":123,"author":{"gitId":"-"},"content":"        String[] requestParams \u003d new String[] {"},{"lineNumber":124,"author":{"gitId":"-"},"content":"                Const.ParamsNames.NOTIFICATION_TARGET_USER, null,"},{"lineNumber":125,"author":{"gitId":"-"},"content":"                Const.ParamsNames.NOTIFICATION_IS_FETCHING_ALL, String.valueOf(true),"},{"lineNumber":126,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":127,"author":{"gitId":"-"},"content":""},{"lineNumber":128,"author":{"gitId":"-"},"content":"        GetNotificationsAction action \u003d getAction(requestParams);"},{"lineNumber":129,"author":{"gitId":"-"},"content":"        JsonResult jsonResult \u003d getJsonResult(action);"},{"lineNumber":130,"author":{"gitId":"-"},"content":""},{"lineNumber":131,"author":{"gitId":"-"},"content":"        NotificationsData output \u003d (NotificationsData) jsonResult.getOutput();"},{"lineNumber":132,"author":{"gitId":"-"},"content":"        List\u003cNotificationData\u003e notifications \u003d output.getNotifications();"},{"lineNumber":133,"author":{"gitId":"-"},"content":""},{"lineNumber":134,"author":{"gitId":"-"},"content":"        assertEquals(expectedNumberOfNotifications,"},{"lineNumber":135,"author":{"gitId":"-"},"content":"                logic.getAllNotifications().size());"},{"lineNumber":136,"author":{"gitId":"-"},"content":"        assertEquals(expectedNumberOfNotifications, notifications.size());"},{"lineNumber":137,"author":{"gitId":"-"},"content":""},{"lineNumber":138,"author":{"gitId":"-"},"content":"        NotificationData expected \u003d new NotificationData(notification);"},{"lineNumber":139,"author":{"gitId":"-"},"content":"        NotificationData firstNotification \u003d notifications.get(0);"},{"lineNumber":140,"author":{"gitId":"-"},"content":"        verifyNotificationEquals(expected, firstNotification);"},{"lineNumber":141,"author":{"gitId":"-"},"content":""},{"lineNumber":142,"author":{"gitId":"-"},"content":"        // notification\u0027s shown attribute should not be updated"},{"lineNumber":143,"author":{"gitId":"-"},"content":"        List\u003cNotificationAttributes\u003e notificationAttributes \u003d"},{"lineNumber":144,"author":{"gitId":"-"},"content":"                logic.getActiveNotificationsByTargetUser(notification.getTargetUser());"},{"lineNumber":145,"author":{"gitId":"-"},"content":"        notificationAttributes.forEach(n -\u003e assertFalse(n.isShown()));"},{"lineNumber":146,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":147,"author":{"gitId":"-"},"content":""},{"lineNumber":148,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":149,"author":{"gitId":"-"},"content":"    public void testExecute_withoutUserTypeForNonAdmin_shouldFail() {"},{"lineNumber":150,"author":{"gitId":"-"},"content":"        ______TS(\"Request without user type for non admin\");"},{"lineNumber":151,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":152,"author":{"gitId":"-"},"content":"        loginAsInstructor(instructor.getGoogleId());"},{"lineNumber":153,"author":{"gitId":"-"},"content":"        GetNotificationsAction action \u003d getAction(Const.ParamsNames.NOTIFICATION_IS_FETCHING_ALL, String.valueOf(true));"},{"lineNumber":154,"author":{"gitId":"-"},"content":"        assertThrows(AssertionError.class, action::execute);"},{"lineNumber":155,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":156,"author":{"gitId":"-"},"content":""},{"lineNumber":157,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":158,"author":{"gitId":"-"},"content":"    public void testExecute_invalidUserType_shouldFail() {"},{"lineNumber":159,"author":{"gitId":"-"},"content":"        ______TS(\"Request without invalid user type\");"},{"lineNumber":160,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":161,"author":{"gitId":"-"},"content":"        loginAsInstructor(instructor.getGoogleId());"},{"lineNumber":162,"author":{"gitId":"-"},"content":""},{"lineNumber":163,"author":{"gitId":"-"},"content":"        // when usertype is GENERAL"},{"lineNumber":164,"author":{"gitId":"-"},"content":"        verifyHttpParameterFailure(Const.ParamsNames.NOTIFICATION_TARGET_USER,"},{"lineNumber":165,"author":{"gitId":"-"},"content":"                NotificationTargetUser.GENERAL.toString(),"},{"lineNumber":166,"author":{"gitId":"-"},"content":"                Const.ParamsNames.NOTIFICATION_IS_FETCHING_ALL,"},{"lineNumber":167,"author":{"gitId":"-"},"content":"                String.valueOf(true));"},{"lineNumber":168,"author":{"gitId":"-"},"content":""},{"lineNumber":169,"author":{"gitId":"-"},"content":"        // when usertype is a random string"},{"lineNumber":170,"author":{"gitId":"-"},"content":"        verifyHttpParameterFailure(Const.ParamsNames.NOTIFICATION_TARGET_USER,"},{"lineNumber":171,"author":{"gitId":"-"},"content":"                \"invalid string\","},{"lineNumber":172,"author":{"gitId":"-"},"content":"                Const.ParamsNames.NOTIFICATION_IS_FETCHING_ALL,"},{"lineNumber":173,"author":{"gitId":"-"},"content":"                String.valueOf(true));"},{"lineNumber":174,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":175,"author":{"gitId":"-"},"content":""},{"lineNumber":176,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":177,"author":{"gitId":"-"},"content":"    public void testExecute_withFalseIsFetchingAll_shouldUpdateShownAndReturnUnreadNotifications() {"},{"lineNumber":178,"author":{"gitId":"-"},"content":"        ______TS(\"Request to fetch unread notification only\");"},{"lineNumber":179,"author":{"gitId":"-"},"content":""},{"lineNumber":180,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":181,"author":{"gitId":"-"},"content":"        loginAsInstructor(instructor.getGoogleId());"},{"lineNumber":182,"author":{"gitId":"-"},"content":"        Set\u003cString\u003e readNotificationsId \u003d typicalBundle.accounts.get(\"instructor1OfCourse1\").getReadNotifications().keySet();"},{"lineNumber":183,"author":{"gitId":"-"},"content":""},{"lineNumber":184,"author":{"gitId":"-"},"content":"        String[] requestParams \u003d new String[] {"},{"lineNumber":185,"author":{"gitId":"-"},"content":"                Const.ParamsNames.NOTIFICATION_TARGET_USER, NotificationTargetUser.INSTRUCTOR.toString(),"},{"lineNumber":186,"author":{"gitId":"-"},"content":"                Const.ParamsNames.NOTIFICATION_IS_FETCHING_ALL, String.valueOf(false),"},{"lineNumber":187,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":188,"author":{"gitId":"-"},"content":""},{"lineNumber":189,"author":{"gitId":"-"},"content":"        GetNotificationsAction action \u003d getAction(requestParams);"},{"lineNumber":190,"author":{"gitId":"-"},"content":"        JsonResult jsonResult \u003d getJsonResult(action);"},{"lineNumber":191,"author":{"gitId":"-"},"content":""},{"lineNumber":192,"author":{"gitId":"-"},"content":"        NotificationsData output \u003d (NotificationsData) jsonResult.getOutput();"},{"lineNumber":193,"author":{"gitId":"-"},"content":"        List\u003cNotificationData\u003e notifications \u003d output.getNotifications();"},{"lineNumber":194,"author":{"gitId":"-"},"content":"        verifyDoesNotContainNotifications(notifications, readNotificationsId);"},{"lineNumber":195,"author":{"gitId":"-"},"content":""},{"lineNumber":196,"author":{"gitId":"-"},"content":"        // should update notification has shown attribute"},{"lineNumber":197,"author":{"gitId":"-"},"content":"        List\u003cNotificationAttributes\u003e notificationAttributes \u003d"},{"lineNumber":198,"author":{"gitId":"-"},"content":"                logic.getActiveNotificationsByTargetUser(NotificationTargetUser.INSTRUCTOR);"},{"lineNumber":199,"author":{"gitId":"-"},"content":"        notificationAttributes \u003d notificationAttributes.stream()"},{"lineNumber":200,"author":{"gitId":"-"},"content":"                .filter(n -\u003e !readNotificationsId.contains(n.getNotificationId()))"},{"lineNumber":201,"author":{"gitId":"-"},"content":"                .collect(Collectors.toList());"},{"lineNumber":202,"author":{"gitId":"-"},"content":"        notificationAttributes.forEach(n -\u003e assertTrue(n.isShown()));"},{"lineNumber":203,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":204,"author":{"gitId":"-"},"content":""},{"lineNumber":205,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":206,"author":{"gitId":"-"},"content":"    public void testExecute_withoutIsFetchingAll_shouldUpdateShownAndReturnUnreadNotifications() {"},{"lineNumber":207,"author":{"gitId":"-"},"content":"        ______TS(\"Request without isfetchingall is equivalent to a false isfetchingall\");"},{"lineNumber":208,"author":{"gitId":"-"},"content":""},{"lineNumber":209,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":210,"author":{"gitId":"-"},"content":"        loginAsInstructor(instructor.getGoogleId());"},{"lineNumber":211,"author":{"gitId":"-"},"content":"        Set\u003cString\u003e readNotificationsId \u003d typicalBundle.accounts.get(\"instructor1OfCourse1\").getReadNotifications().keySet();"},{"lineNumber":212,"author":{"gitId":"-"},"content":""},{"lineNumber":213,"author":{"gitId":"-"},"content":"        String[] requestParams \u003d new String[] {"},{"lineNumber":214,"author":{"gitId":"-"},"content":"                Const.ParamsNames.NOTIFICATION_TARGET_USER, NotificationTargetUser.INSTRUCTOR.toString(),"},{"lineNumber":215,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":216,"author":{"gitId":"-"},"content":""},{"lineNumber":217,"author":{"gitId":"-"},"content":"        GetNotificationsAction action \u003d getAction(requestParams);"},{"lineNumber":218,"author":{"gitId":"-"},"content":"        JsonResult jsonResult \u003d getJsonResult(action);"},{"lineNumber":219,"author":{"gitId":"-"},"content":""},{"lineNumber":220,"author":{"gitId":"-"},"content":"        NotificationsData output \u003d (NotificationsData) jsonResult.getOutput();"},{"lineNumber":221,"author":{"gitId":"-"},"content":"        List\u003cNotificationData\u003e notifications \u003d output.getNotifications();"},{"lineNumber":222,"author":{"gitId":"-"},"content":"        verifyDoesNotContainNotifications(notifications, readNotificationsId);"},{"lineNumber":223,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":224,"author":{"gitId":"-"},"content":""},{"lineNumber":225,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":226,"author":{"gitId":"-"},"content":"    public void testExecute_withInvalidIsFetchingAll_shouldFail() {"},{"lineNumber":227,"author":{"gitId":"-"},"content":"        ______TS(\"Request with invalid isfetchingall\");"},{"lineNumber":228,"author":{"gitId":"-"},"content":""},{"lineNumber":229,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":230,"author":{"gitId":"-"},"content":"        loginAsInstructor(instructor.getGoogleId());"},{"lineNumber":231,"author":{"gitId":"-"},"content":""},{"lineNumber":232,"author":{"gitId":"-"},"content":"        String[] requestParams \u003d new String[] {"},{"lineNumber":233,"author":{"gitId":"-"},"content":"                Const.ParamsNames.NOTIFICATION_TARGET_USER, NotificationTargetUser.INSTRUCTOR.toString(),"},{"lineNumber":234,"author":{"gitId":"-"},"content":"                Const.ParamsNames.NOTIFICATION_IS_FETCHING_ALL, \"random-value\","},{"lineNumber":235,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":236,"author":{"gitId":"-"},"content":""},{"lineNumber":237,"author":{"gitId":"-"},"content":"        GetNotificationsAction action \u003d getAction(requestParams);"},{"lineNumber":238,"author":{"gitId":"-"},"content":"        assertThrows(InvalidHttpParameterException.class, action::execute);"},{"lineNumber":239,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":240,"author":{"gitId":"-"},"content":""},{"lineNumber":241,"author":{"gitId":"-"},"content":"    private void verifyNotificationEquals(NotificationData expected, NotificationData actual) {"},{"lineNumber":242,"author":{"gitId":"-"},"content":"        assertEquals(expected.getNotificationId(), actual.getNotificationId());"},{"lineNumber":243,"author":{"gitId":"-"},"content":"        assertEquals(expected.getStyle(), actual.getStyle());"},{"lineNumber":244,"author":{"gitId":"-"},"content":"        assertEquals(expected.getTargetUser(), actual.getTargetUser());"},{"lineNumber":245,"author":{"gitId":"-"},"content":"        assertEquals(expected.getTitle(), actual.getTitle());"},{"lineNumber":246,"author":{"gitId":"-"},"content":"        assertEquals(expected.getMessage(), actual.getMessage());"},{"lineNumber":247,"author":{"gitId":"-"},"content":"        assertEquals(expected.getStartTimestamp(), actual.getStartTimestamp());"},{"lineNumber":248,"author":{"gitId":"-"},"content":"        assertEquals(expected.getEndTimestamp(), actual.getEndTimestamp());"},{"lineNumber":249,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":250,"author":{"gitId":"-"},"content":""},{"lineNumber":251,"author":{"gitId":"-"},"content":"    private void verifyDoesNotContainNotifications(List\u003cNotificationData\u003e notifications, Set\u003cString\u003e readIds) {"},{"lineNumber":252,"author":{"gitId":"-"},"content":"        for (NotificationData n : notifications) {"},{"lineNumber":253,"author":{"gitId":"-"},"content":"            assertFalse(readIds.contains(n.getNotificationId()));"},{"lineNumber":254,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":255,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":256,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"hhdqirui":2,"-":254}},{"path":"src/test/java/teammates/ui/webapi/GetReadNotificationsActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":4,"author":{"gitId":"-"},"content":""},{"lineNumber":5,"author":{"gitId":"hhdqirui"},"content":"import org.testng.annotations.Ignore;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import org.testng.annotations.Test;"},{"lineNumber":7,"author":{"gitId":"-"},"content":""},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.InstructorAttributes;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import teammates.ui.output.ReadNotificationsData;"},{"lineNumber":11,"author":{"gitId":"-"},"content":""},{"lineNumber":12,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":13,"author":{"gitId":"-"},"content":" * SUT: {@link GetReadNotificationsAction}."},{"lineNumber":14,"author":{"gitId":"-"},"content":" */"},{"lineNumber":15,"author":{"gitId":"hhdqirui"},"content":"@Ignore"},{"lineNumber":16,"author":{"gitId":"-"},"content":"public class GetReadNotificationsActionTest extends BaseActionTest\u003cGetReadNotificationsAction\u003e {"},{"lineNumber":17,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":18,"author":{"gitId":"-"},"content":"    String getActionUri() {"},{"lineNumber":19,"author":{"gitId":"-"},"content":"        return Const.ResourceURIs.NOTIFICATION_READ;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":21,"author":{"gitId":"-"},"content":""},{"lineNumber":22,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":23,"author":{"gitId":"-"},"content":"    String getRequestMethod() {"},{"lineNumber":24,"author":{"gitId":"-"},"content":"        return GET;"},{"lineNumber":25,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":26,"author":{"gitId":"-"},"content":""},{"lineNumber":27,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":28,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":29,"author":{"gitId":"-"},"content":"    protected void testExecute() {"},{"lineNumber":30,"author":{"gitId":"-"},"content":"        ______TS(\"Typical success case: User request to fetch read notifications\");"},{"lineNumber":31,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":32,"author":{"gitId":"-"},"content":"        loginAsInstructor(instructor.getGoogleId());"},{"lineNumber":33,"author":{"gitId":"-"},"content":"        GetReadNotificationsAction action \u003d getAction();"},{"lineNumber":34,"author":{"gitId":"-"},"content":"        JsonResult jsonResult \u003d getJsonResult(action);"},{"lineNumber":35,"author":{"gitId":"-"},"content":""},{"lineNumber":36,"author":{"gitId":"-"},"content":"        ReadNotificationsData output \u003d (ReadNotificationsData) jsonResult.getOutput();"},{"lineNumber":37,"author":{"gitId":"-"},"content":""},{"lineNumber":38,"author":{"gitId":"-"},"content":"        List\u003cString\u003e readNotificationsData \u003d output.getReadNotifications();"},{"lineNumber":39,"author":{"gitId":"-"},"content":""},{"lineNumber":40,"author":{"gitId":"-"},"content":"        assertTrue(readNotificationsData.contains(\"notification1\"));"},{"lineNumber":41,"author":{"gitId":"-"},"content":"        assertTrue(readNotificationsData.contains(\"notification3\"));"},{"lineNumber":42,"author":{"gitId":"-"},"content":"        assertEquals(2, readNotificationsData.size());"},{"lineNumber":43,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":44,"author":{"gitId":"-"},"content":""},{"lineNumber":45,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":46,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":47,"author":{"gitId":"-"},"content":"    protected void testAccessControl() {"},{"lineNumber":48,"author":{"gitId":"-"},"content":"        verifyAnyLoggedInUserCanAccess();"},{"lineNumber":49,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":50,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"hhdqirui":2,"-":48}},{"path":"src/test/java/teammates/ui/webapi/GetStudentActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"domlimm"},"content":"import org.testng.annotations.Ignore;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import org.testng.annotations.Test;"},{"lineNumber":5,"author":{"gitId":"-"},"content":""},{"lineNumber":6,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.InstructorAttributes;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.StudentAttributes;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.ui.output.JoinState;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import teammates.ui.output.StudentData;"},{"lineNumber":11,"author":{"gitId":"-"},"content":""},{"lineNumber":12,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":13,"author":{"gitId":"-"},"content":" * SUT: {@link GetStudentAction}."},{"lineNumber":14,"author":{"gitId":"-"},"content":" */"},{"lineNumber":15,"author":{"gitId":"domlimm"},"content":"@Ignore"},{"lineNumber":16,"author":{"gitId":"-"},"content":"public class GetStudentActionTest extends BaseActionTest\u003cGetStudentAction\u003e {"},{"lineNumber":17,"author":{"gitId":"-"},"content":""},{"lineNumber":18,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":19,"author":{"gitId":"-"},"content":"    protected String getActionUri() {"},{"lineNumber":20,"author":{"gitId":"-"},"content":"        return Const.ResourceURIs.STUDENT;"},{"lineNumber":21,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":22,"author":{"gitId":"-"},"content":""},{"lineNumber":23,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":24,"author":{"gitId":"-"},"content":"    protected String getRequestMethod() {"},{"lineNumber":25,"author":{"gitId":"-"},"content":"        return GET;"},{"lineNumber":26,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":27,"author":{"gitId":"-"},"content":""},{"lineNumber":28,"author":{"gitId":"-"},"content":"    private void assertStudentDataMatches(StudentData studentData, StudentAttributes student,"},{"lineNumber":29,"author":{"gitId":"-"},"content":"                                          boolean isRequestFromInstructor) {"},{"lineNumber":30,"author":{"gitId":"-"},"content":"        assertNull(studentData.getGoogleId());"},{"lineNumber":31,"author":{"gitId":"-"},"content":"        assertNull(studentData.getKey());"},{"lineNumber":32,"author":{"gitId":"-"},"content":"        assertEquals(student.getEmail(), studentData.getEmail());"},{"lineNumber":33,"author":{"gitId":"-"},"content":"        assertEquals(student.getCourse(), studentData.getCourseId());"},{"lineNumber":34,"author":{"gitId":"-"},"content":"        assertEquals(student.getName(), studentData.getName());"},{"lineNumber":35,"author":{"gitId":"-"},"content":""},{"lineNumber":36,"author":{"gitId":"-"},"content":"        assertEquals(student.getTeam(), studentData.getTeamName());"},{"lineNumber":37,"author":{"gitId":"-"},"content":"        assertEquals(student.getSection(), studentData.getSectionName());"},{"lineNumber":38,"author":{"gitId":"-"},"content":""},{"lineNumber":39,"author":{"gitId":"-"},"content":"        if (isRequestFromInstructor) {"},{"lineNumber":40,"author":{"gitId":"-"},"content":"            assertEquals(student.getComments(), studentData.getComments());"},{"lineNumber":41,"author":{"gitId":"-"},"content":""},{"lineNumber":42,"author":{"gitId":"-"},"content":"            if (student.isRegistered()) {"},{"lineNumber":43,"author":{"gitId":"-"},"content":"                assertTrue(studentData.getJoinState().equals(JoinState.JOINED));"},{"lineNumber":44,"author":{"gitId":"-"},"content":"            } else {"},{"lineNumber":45,"author":{"gitId":"-"},"content":"                assertTrue(studentData.getJoinState().equals(JoinState.NOT_JOINED));"},{"lineNumber":46,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":47,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":48,"author":{"gitId":"-"},"content":"            assertNull(studentData.getComments());"},{"lineNumber":49,"author":{"gitId":"-"},"content":"            assertNull(studentData.getJoinState());"},{"lineNumber":50,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":51,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":52,"author":{"gitId":"-"},"content":""},{"lineNumber":53,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":54,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":55,"author":{"gitId":"-"},"content":"    protected void testExecute() {"},{"lineNumber":56,"author":{"gitId":"-"},"content":""},{"lineNumber":57,"author":{"gitId":"-"},"content":"        ______TS(\"Failure Case: No Course ID in params\");"},{"lineNumber":58,"author":{"gitId":"-"},"content":""},{"lineNumber":59,"author":{"gitId":"-"},"content":"        verifyHttpParameterFailure();"},{"lineNumber":60,"author":{"gitId":"-"},"content":""},{"lineNumber":61,"author":{"gitId":"-"},"content":"        ______TS(\"Failure Case: Unregistered Student with no RegKey\");"},{"lineNumber":62,"author":{"gitId":"-"},"content":""},{"lineNumber":63,"author":{"gitId":"-"},"content":"        logoutUser();"},{"lineNumber":64,"author":{"gitId":"-"},"content":""},{"lineNumber":65,"author":{"gitId":"-"},"content":"        StudentAttributes unregStudent \u003d"},{"lineNumber":66,"author":{"gitId":"-"},"content":"                logic.getStudentForEmail(\"idOfTypicalCourse1\", \"student1InCourse1@gmail.tmt\");"},{"lineNumber":67,"author":{"gitId":"-"},"content":""},{"lineNumber":68,"author":{"gitId":"-"},"content":"        String[] submissionParams \u003d new String[] {"},{"lineNumber":69,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, unregStudent.getCourse(),"},{"lineNumber":70,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":71,"author":{"gitId":"-"},"content":""},{"lineNumber":72,"author":{"gitId":"-"},"content":"        EntityNotFoundException enfe \u003d verifyEntityNotFound(submissionParams);"},{"lineNumber":73,"author":{"gitId":"-"},"content":"        assertEquals(GetStudentAction.STUDENT_NOT_FOUND, enfe.getMessage());"},{"lineNumber":74,"author":{"gitId":"-"},"content":""},{"lineNumber":75,"author":{"gitId":"-"},"content":"        ______TS(\"Failure Case: Unregistered Student with random RegKey\");"},{"lineNumber":76,"author":{"gitId":"-"},"content":""},{"lineNumber":77,"author":{"gitId":"-"},"content":"        String[] submissionParamsRandomRegKey \u003d new String[] {"},{"lineNumber":78,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, unregStudent.getCourse(),"},{"lineNumber":79,"author":{"gitId":"-"},"content":"                Const.ParamsNames.REGKEY, \"RANDOM_KEY\","},{"lineNumber":80,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":81,"author":{"gitId":"-"},"content":""},{"lineNumber":82,"author":{"gitId":"-"},"content":"        enfe \u003d verifyEntityNotFound(submissionParamsRandomRegKey);"},{"lineNumber":83,"author":{"gitId":"-"},"content":"        assertEquals(GetStudentAction.STUDENT_NOT_FOUND, enfe.getMessage());"},{"lineNumber":84,"author":{"gitId":"-"},"content":""},{"lineNumber":85,"author":{"gitId":"-"},"content":"        ______TS(\"Success Case: Unregistered Student\");"},{"lineNumber":86,"author":{"gitId":"-"},"content":""},{"lineNumber":87,"author":{"gitId":"-"},"content":"        submissionParams \u003d new String[] {"},{"lineNumber":88,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, unregStudent.getCourse(),"},{"lineNumber":89,"author":{"gitId":"-"},"content":"                Const.ParamsNames.REGKEY, unregStudent.getKey(),"},{"lineNumber":90,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":91,"author":{"gitId":"-"},"content":""},{"lineNumber":92,"author":{"gitId":"-"},"content":"        GetStudentAction action \u003d getAction(submissionParams);"},{"lineNumber":93,"author":{"gitId":"-"},"content":"        JsonResult result \u003d getJsonResult(action);"},{"lineNumber":94,"author":{"gitId":"-"},"content":"        StudentData outputData \u003d (StudentData) result.getOutput();"},{"lineNumber":95,"author":{"gitId":"-"},"content":""},{"lineNumber":96,"author":{"gitId":"-"},"content":"        assertStudentDataMatches(outputData, unregStudent, false);"},{"lineNumber":97,"author":{"gitId":"-"},"content":""},{"lineNumber":98,"author":{"gitId":"-"},"content":"        ______TS(\"Failure Case: Student - Logged In with no params\");"},{"lineNumber":99,"author":{"gitId":"-"},"content":""},{"lineNumber":100,"author":{"gitId":"-"},"content":"        StudentAttributes student1InCourse1 \u003d typicalBundle.students.get(\"student1InCourse1\");"},{"lineNumber":101,"author":{"gitId":"-"},"content":"        logoutUser();"},{"lineNumber":102,"author":{"gitId":"-"},"content":"        loginAsStudent(student1InCourse1.getGoogleId());"},{"lineNumber":103,"author":{"gitId":"-"},"content":""},{"lineNumber":104,"author":{"gitId":"-"},"content":"        verifyHttpParameterFailure();"},{"lineNumber":105,"author":{"gitId":"-"},"content":""},{"lineNumber":106,"author":{"gitId":"-"},"content":"        ______TS(\"Failure Case: Student - Random Course Given\");"},{"lineNumber":107,"author":{"gitId":"-"},"content":""},{"lineNumber":108,"author":{"gitId":"-"},"content":"        submissionParams \u003d new String[] {"},{"lineNumber":109,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, \"RANDOM_COURSE\","},{"lineNumber":110,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":111,"author":{"gitId":"-"},"content":""},{"lineNumber":112,"author":{"gitId":"-"},"content":"        enfe \u003d verifyEntityNotFound(submissionParams);"},{"lineNumber":113,"author":{"gitId":"-"},"content":"        assertEquals(GetStudentAction.STUDENT_NOT_FOUND, enfe.getMessage());"},{"lineNumber":114,"author":{"gitId":"-"},"content":""},{"lineNumber":115,"author":{"gitId":"-"},"content":"        ______TS(\"Success Case: Student - Logged In\");"},{"lineNumber":116,"author":{"gitId":"-"},"content":""},{"lineNumber":117,"author":{"gitId":"-"},"content":"        submissionParams \u003d new String[] {"},{"lineNumber":118,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, student1InCourse1.getCourse(),"},{"lineNumber":119,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":120,"author":{"gitId":"-"},"content":""},{"lineNumber":121,"author":{"gitId":"-"},"content":"        action \u003d getAction(submissionParams);"},{"lineNumber":122,"author":{"gitId":"-"},"content":"        result \u003d getJsonResult(action);"},{"lineNumber":123,"author":{"gitId":"-"},"content":"        outputData \u003d (StudentData) result.getOutput();"},{"lineNumber":124,"author":{"gitId":"-"},"content":""},{"lineNumber":125,"author":{"gitId":"-"},"content":"        assertStudentDataMatches(outputData, student1InCourse1, false);"},{"lineNumber":126,"author":{"gitId":"-"},"content":""},{"lineNumber":127,"author":{"gitId":"-"},"content":"        ______TS(\"Failure Case: Instructor - Incomplete Params\");"},{"lineNumber":128,"author":{"gitId":"-"},"content":""},{"lineNumber":129,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor1OfCourse1 \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":130,"author":{"gitId":"-"},"content":"        logoutUser();"},{"lineNumber":131,"author":{"gitId":"-"},"content":"        loginAsInstructor(instructor1OfCourse1.getGoogleId());"},{"lineNumber":132,"author":{"gitId":"-"},"content":""},{"lineNumber":133,"author":{"gitId":"-"},"content":"        verifyHttpParameterFailure();"},{"lineNumber":134,"author":{"gitId":"-"},"content":""},{"lineNumber":135,"author":{"gitId":"-"},"content":"        submissionParams \u003d new String[] {"},{"lineNumber":136,"author":{"gitId":"-"},"content":"                Const.ParamsNames.STUDENT_EMAIL, student1InCourse1.getCourse(),"},{"lineNumber":137,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":138,"author":{"gitId":"-"},"content":""},{"lineNumber":139,"author":{"gitId":"-"},"content":"        verifyHttpParameterFailure(submissionParams);"},{"lineNumber":140,"author":{"gitId":"-"},"content":""},{"lineNumber":141,"author":{"gitId":"-"},"content":"        ______TS(\"Success Case: Instructor\");"},{"lineNumber":142,"author":{"gitId":"-"},"content":""},{"lineNumber":143,"author":{"gitId":"-"},"content":"        submissionParams \u003d new String[] {"},{"lineNumber":144,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, student1InCourse1.getCourse(),"},{"lineNumber":145,"author":{"gitId":"-"},"content":"                Const.ParamsNames.STUDENT_EMAIL, student1InCourse1.getEmail(),"},{"lineNumber":146,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":147,"author":{"gitId":"-"},"content":""},{"lineNumber":148,"author":{"gitId":"-"},"content":"        action \u003d getAction(submissionParams);"},{"lineNumber":149,"author":{"gitId":"-"},"content":"        result \u003d getJsonResult(action);"},{"lineNumber":150,"author":{"gitId":"-"},"content":"        outputData \u003d (StudentData) result.getOutput();"},{"lineNumber":151,"author":{"gitId":"-"},"content":""},{"lineNumber":152,"author":{"gitId":"-"},"content":"        assertStudentDataMatches(outputData, student1InCourse1, true);"},{"lineNumber":153,"author":{"gitId":"-"},"content":""},{"lineNumber":154,"author":{"gitId":"-"},"content":"        ______TS(\"Failure Case: Instructor - Random Student Email Given\");"},{"lineNumber":155,"author":{"gitId":"-"},"content":""},{"lineNumber":156,"author":{"gitId":"-"},"content":"        submissionParams \u003d new String[] {"},{"lineNumber":157,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, student1InCourse1.getCourse(),"},{"lineNumber":158,"author":{"gitId":"-"},"content":"                Const.ParamsNames.STUDENT_EMAIL, \"RANDOM_EMAIL\","},{"lineNumber":159,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":160,"author":{"gitId":"-"},"content":""},{"lineNumber":161,"author":{"gitId":"-"},"content":"        enfe \u003d verifyEntityNotFound(submissionParams);"},{"lineNumber":162,"author":{"gitId":"-"},"content":"        assertEquals(GetStudentAction.STUDENT_NOT_FOUND, enfe.getMessage());"},{"lineNumber":163,"author":{"gitId":"-"},"content":""},{"lineNumber":164,"author":{"gitId":"-"},"content":"        ______TS(\"Failure Case: Instructor - Random Course Given\");"},{"lineNumber":165,"author":{"gitId":"-"},"content":""},{"lineNumber":166,"author":{"gitId":"-"},"content":"        submissionParams \u003d new String[] {"},{"lineNumber":167,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, \"RANDOM_COURSE\","},{"lineNumber":168,"author":{"gitId":"-"},"content":"                Const.ParamsNames.STUDENT_EMAIL, student1InCourse1.getEmail(),"},{"lineNumber":169,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":170,"author":{"gitId":"-"},"content":""},{"lineNumber":171,"author":{"gitId":"-"},"content":"        enfe \u003d verifyEntityNotFound(submissionParams);"},{"lineNumber":172,"author":{"gitId":"-"},"content":"        assertEquals(GetStudentAction.STUDENT_NOT_FOUND, enfe.getMessage());"},{"lineNumber":173,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":174,"author":{"gitId":"-"},"content":""},{"lineNumber":175,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":176,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":177,"author":{"gitId":"-"},"content":"    protected void testAccessControl() throws Exception {"},{"lineNumber":178,"author":{"gitId":"-"},"content":""},{"lineNumber":179,"author":{"gitId":"-"},"content":"        StudentAttributes student1InCourse1 \u003d typicalBundle.students.get(\"student1InCourse1\");"},{"lineNumber":180,"author":{"gitId":"-"},"content":"        StudentAttributes student2InCourse2 \u003d typicalBundle.students.get(\"student2InCourse2\");"},{"lineNumber":181,"author":{"gitId":"-"},"content":""},{"lineNumber":182,"author":{"gitId":"-"},"content":"        ______TS(\"Student - must be in the course\");"},{"lineNumber":183,"author":{"gitId":"-"},"content":""},{"lineNumber":184,"author":{"gitId":"-"},"content":"        String[] submissionParams \u003d new String[] {"},{"lineNumber":185,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, student1InCourse1.getCourse(),"},{"lineNumber":186,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":187,"author":{"gitId":"-"},"content":""},{"lineNumber":188,"author":{"gitId":"-"},"content":"        verifyAccessibleForStudentsOfTheSameCourse(submissionParams);"},{"lineNumber":189,"author":{"gitId":"-"},"content":""},{"lineNumber":190,"author":{"gitId":"-"},"content":"        submissionParams \u003d new String[] {"},{"lineNumber":191,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, student2InCourse2.getCourse(),"},{"lineNumber":192,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":193,"author":{"gitId":"-"},"content":""},{"lineNumber":194,"author":{"gitId":"-"},"content":"        verifyInaccessibleForStudents(submissionParams);"},{"lineNumber":195,"author":{"gitId":"-"},"content":""},{"lineNumber":196,"author":{"gitId":"-"},"content":"        ______TS(\"Student - cannot access another student\u0027s details\");"},{"lineNumber":197,"author":{"gitId":"-"},"content":""},{"lineNumber":198,"author":{"gitId":"-"},"content":"        submissionParams \u003d new String[] {"},{"lineNumber":199,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, student2InCourse2.getCourse(),"},{"lineNumber":200,"author":{"gitId":"-"},"content":"                Const.ParamsNames.STUDENT_EMAIL, student2InCourse2.getEmail(),"},{"lineNumber":201,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":202,"author":{"gitId":"-"},"content":""},{"lineNumber":203,"author":{"gitId":"-"},"content":"        verifyInaccessibleForStudents(submissionParams);"},{"lineNumber":204,"author":{"gitId":"-"},"content":""},{"lineNumber":205,"author":{"gitId":"-"},"content":"        ______TS(\"Student - cannot access a non-existent email\");"},{"lineNumber":206,"author":{"gitId":"-"},"content":""},{"lineNumber":207,"author":{"gitId":"-"},"content":"        submissionParams \u003d new String[] {"},{"lineNumber":208,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, student2InCourse2.getCourse(),"},{"lineNumber":209,"author":{"gitId":"-"},"content":"                Const.ParamsNames.STUDENT_EMAIL, \"TEST_EMAIL\","},{"lineNumber":210,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":211,"author":{"gitId":"-"},"content":""},{"lineNumber":212,"author":{"gitId":"-"},"content":"        verifyInaccessibleForStudents(submissionParams);"},{"lineNumber":213,"author":{"gitId":"-"},"content":""},{"lineNumber":214,"author":{"gitId":"-"},"content":"        ______TS(\"Instructor - must be in same course as student\");"},{"lineNumber":215,"author":{"gitId":"-"},"content":""},{"lineNumber":216,"author":{"gitId":"-"},"content":"        submissionParams \u003d new String[] {"},{"lineNumber":217,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, student1InCourse1.getCourse(),"},{"lineNumber":218,"author":{"gitId":"-"},"content":"                Const.ParamsNames.STUDENT_EMAIL, student1InCourse1.getEmail(),"},{"lineNumber":219,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":220,"author":{"gitId":"-"},"content":"        verifyInaccessibleForInstructorsOfOtherCourses(submissionParams);"},{"lineNumber":221,"author":{"gitId":"-"},"content":""},{"lineNumber":222,"author":{"gitId":"-"},"content":"        InstructorAttributes helperOfCourse1 \u003d typicalBundle.instructors.get(\"helperOfCourse1\");"},{"lineNumber":223,"author":{"gitId":"-"},"content":"        loginAsInstructor(helperOfCourse1.getGoogleId());"},{"lineNumber":224,"author":{"gitId":"-"},"content":"        verifyCannotAccess(submissionParams);"},{"lineNumber":225,"author":{"gitId":"-"},"content":""},{"lineNumber":226,"author":{"gitId":"-"},"content":"        grantInstructorWithSectionPrivilege(helperOfCourse1,"},{"lineNumber":227,"author":{"gitId":"-"},"content":"                Const.InstructorPermissions.CAN_VIEW_STUDENT_IN_SECTIONS,"},{"lineNumber":228,"author":{"gitId":"-"},"content":"                new String[] {\"Section 1\"});"},{"lineNumber":229,"author":{"gitId":"-"},"content":"        verifyCanAccess(submissionParams);"},{"lineNumber":230,"author":{"gitId":"-"},"content":""},{"lineNumber":231,"author":{"gitId":"-"},"content":"        ______TS(\"Instructor - must provide student email\");"},{"lineNumber":232,"author":{"gitId":"-"},"content":""},{"lineNumber":233,"author":{"gitId":"-"},"content":"        submissionParams \u003d new String[] {"},{"lineNumber":234,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, student1InCourse1.getCourse(),"},{"lineNumber":235,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":236,"author":{"gitId":"-"},"content":""},{"lineNumber":237,"author":{"gitId":"-"},"content":"        verifyInaccessibleForInstructors(submissionParams);"},{"lineNumber":238,"author":{"gitId":"-"},"content":""},{"lineNumber":239,"author":{"gitId":"-"},"content":"        ______TS(\"Unregistered Student - can access with key\");"},{"lineNumber":240,"author":{"gitId":"-"},"content":""},{"lineNumber":241,"author":{"gitId":"-"},"content":"        StudentAttributes unregStudent \u003d"},{"lineNumber":242,"author":{"gitId":"-"},"content":"                logic.getStudentForEmail(\"idOfTypicalCourse1\", \"student1InCourse1@gmail.tmt\");"},{"lineNumber":243,"author":{"gitId":"-"},"content":""},{"lineNumber":244,"author":{"gitId":"-"},"content":"        submissionParams \u003d new String[] {"},{"lineNumber":245,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, unregStudent.getCourse(),"},{"lineNumber":246,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":247,"author":{"gitId":"-"},"content":""},{"lineNumber":248,"author":{"gitId":"-"},"content":"        verifyInaccessibleForUnregisteredUsers(submissionParams);"},{"lineNumber":249,"author":{"gitId":"-"},"content":""},{"lineNumber":250,"author":{"gitId":"-"},"content":"        submissionParams \u003d new String[] {"},{"lineNumber":251,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, unregStudent.getCourse(),"},{"lineNumber":252,"author":{"gitId":"-"},"content":"                Const.ParamsNames.REGKEY, \"RANDOM_KEY\","},{"lineNumber":253,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":254,"author":{"gitId":"-"},"content":""},{"lineNumber":255,"author":{"gitId":"-"},"content":"        verifyInaccessibleForUnregisteredUsers(submissionParams);"},{"lineNumber":256,"author":{"gitId":"-"},"content":""},{"lineNumber":257,"author":{"gitId":"-"},"content":"        submissionParams \u003d new String[] {"},{"lineNumber":258,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, unregStudent.getCourse(),"},{"lineNumber":259,"author":{"gitId":"-"},"content":"                Const.ParamsNames.REGKEY, unregStudent.getKey(),"},{"lineNumber":260,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":261,"author":{"gitId":"-"},"content":""},{"lineNumber":262,"author":{"gitId":"-"},"content":"        verifyAccessibleForUnregisteredUsers(submissionParams);"},{"lineNumber":263,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":264,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"domlimm":2,"-":262}},{"path":"src/test/java/teammates/ui/webapi/GetStudentsActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":4,"author":{"gitId":"-"},"content":""},{"lineNumber":5,"author":{"gitId":"domlimm"},"content":"import org.testng.annotations.Ignore;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import org.testng.annotations.Test;"},{"lineNumber":7,"author":{"gitId":"-"},"content":""},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.InstructorAttributes;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.StudentAttributes;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import teammates.ui.output.JoinState;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import teammates.ui.output.StudentData;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import teammates.ui.output.StudentsData;"},{"lineNumber":14,"author":{"gitId":"-"},"content":""},{"lineNumber":15,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":16,"author":{"gitId":"-"},"content":" * SUT: {@link GetStudentsAction}."},{"lineNumber":17,"author":{"gitId":"-"},"content":" */"},{"lineNumber":18,"author":{"gitId":"domlimm"},"content":"@Ignore"},{"lineNumber":19,"author":{"gitId":"-"},"content":"public class GetStudentsActionTest extends BaseActionTest\u003cGetStudentsAction\u003e {"},{"lineNumber":20,"author":{"gitId":"-"},"content":""},{"lineNumber":21,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":22,"author":{"gitId":"-"},"content":"    protected String getActionUri() {"},{"lineNumber":23,"author":{"gitId":"-"},"content":"        return Const.ResourceURIs.STUDENTS;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":25,"author":{"gitId":"-"},"content":""},{"lineNumber":26,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":27,"author":{"gitId":"-"},"content":"    protected String getRequestMethod() {"},{"lineNumber":28,"author":{"gitId":"-"},"content":"        return GET;"},{"lineNumber":29,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":30,"author":{"gitId":"-"},"content":""},{"lineNumber":31,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":32,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":33,"author":{"gitId":"-"},"content":"    protected void testExecute() {"},{"lineNumber":34,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":35,"author":{"gitId":"-"},"content":"        loginAsInstructor(instructor.getGoogleId());"},{"lineNumber":36,"author":{"gitId":"-"},"content":""},{"lineNumber":37,"author":{"gitId":"-"},"content":"        ______TS(\"Invalid parameters\");"},{"lineNumber":38,"author":{"gitId":"-"},"content":"        // no parameters"},{"lineNumber":39,"author":{"gitId":"-"},"content":"        verifyHttpParameterFailure();"},{"lineNumber":40,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":41,"author":{"gitId":"-"},"content":""},{"lineNumber":42,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":43,"author":{"gitId":"-"},"content":"    public void testExecute_withOnlyCourseId_shouldReturnAllStudentsOfTheCourse() {"},{"lineNumber":44,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":45,"author":{"gitId":"-"},"content":"        loginAsInstructor(instructor.getGoogleId());"},{"lineNumber":46,"author":{"gitId":"-"},"content":""},{"lineNumber":47,"author":{"gitId":"-"},"content":"        String[] submissionParams \u003d new String[] {"},{"lineNumber":48,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, instructor.getCourseId(),"},{"lineNumber":49,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":50,"author":{"gitId":"-"},"content":"        GetStudentsAction action \u003d getAction(submissionParams);"},{"lineNumber":51,"author":{"gitId":"-"},"content":"        JsonResult jsonResult \u003d getJsonResult(action);"},{"lineNumber":52,"author":{"gitId":"-"},"content":""},{"lineNumber":53,"author":{"gitId":"-"},"content":"        StudentsData output \u003d (StudentsData) jsonResult.getOutput();"},{"lineNumber":54,"author":{"gitId":"-"},"content":"        List\u003cStudentData\u003e students \u003d output.getStudents();"},{"lineNumber":55,"author":{"gitId":"-"},"content":""},{"lineNumber":56,"author":{"gitId":"-"},"content":"        assertEquals(5, students.size());"},{"lineNumber":57,"author":{"gitId":"-"},"content":"        StudentData typicalStudent \u003d students.get(0);"},{"lineNumber":58,"author":{"gitId":"-"},"content":"        assertNull(typicalStudent.getGoogleId());"},{"lineNumber":59,"author":{"gitId":"-"},"content":"        assertNull(typicalStudent.getKey());"},{"lineNumber":60,"author":{"gitId":"-"},"content":"        assertEquals(\"idOfTypicalCourse1\", typicalStudent.getCourseId());"},{"lineNumber":61,"author":{"gitId":"-"},"content":"        assertEquals(\"student1InCourse1@gmail.tmt\", typicalStudent.getEmail());"},{"lineNumber":62,"author":{"gitId":"-"},"content":"        assertEquals(\"student1 In Course1\u003c/td\u003e\u003c/div\u003e\u0027\\\"\", typicalStudent.getName());"},{"lineNumber":63,"author":{"gitId":"-"},"content":"        assertEquals(JoinState.JOINED, typicalStudent.getJoinState());"},{"lineNumber":64,"author":{"gitId":"-"},"content":"        assertEquals(\"comment for student1InCourse1\u003c/td\u003e\u003c/div\u003e\u0027\\\"\", typicalStudent.getComments());"},{"lineNumber":65,"author":{"gitId":"-"},"content":"        assertEquals(\"Team 1.1\u003c/td\u003e\u003c/div\u003e\u0027\\\"\", typicalStudent.getTeamName());"},{"lineNumber":66,"author":{"gitId":"-"},"content":"        assertEquals(\"Section 1\", typicalStudent.getSectionName());"},{"lineNumber":67,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":68,"author":{"gitId":"-"},"content":""},{"lineNumber":69,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":70,"author":{"gitId":"-"},"content":"    public void testExecute_withCourseIdAndTeamName_shouldReturnAllStudentsOfTheTeam() {"},{"lineNumber":71,"author":{"gitId":"-"},"content":"        StudentAttributes studentAttributes \u003d typicalBundle.students.get(\"student1InCourse1\");"},{"lineNumber":72,"author":{"gitId":"-"},"content":"        loginAsStudent(studentAttributes.getGoogleId());"},{"lineNumber":73,"author":{"gitId":"-"},"content":""},{"lineNumber":74,"author":{"gitId":"-"},"content":"        String[] submissionParams \u003d new String[] {"},{"lineNumber":75,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, studentAttributes.getCourse(),"},{"lineNumber":76,"author":{"gitId":"-"},"content":"                Const.ParamsNames.TEAM_NAME, studentAttributes.getTeam(),"},{"lineNumber":77,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":78,"author":{"gitId":"-"},"content":"        GetStudentsAction action \u003d getAction(submissionParams);"},{"lineNumber":79,"author":{"gitId":"-"},"content":"        JsonResult jsonResult \u003d getJsonResult(action);"},{"lineNumber":80,"author":{"gitId":"-"},"content":""},{"lineNumber":81,"author":{"gitId":"-"},"content":"        StudentsData output \u003d (StudentsData) jsonResult.getOutput();"},{"lineNumber":82,"author":{"gitId":"-"},"content":"        List\u003cStudentData\u003e students \u003d output.getStudents();"},{"lineNumber":83,"author":{"gitId":"-"},"content":""},{"lineNumber":84,"author":{"gitId":"-"},"content":"        assertEquals(4, students.size());"},{"lineNumber":85,"author":{"gitId":"-"},"content":"        StudentData typicalStudent \u003d students.get(0);"},{"lineNumber":86,"author":{"gitId":"-"},"content":"        assertNull(typicalStudent.getGoogleId());"},{"lineNumber":87,"author":{"gitId":"-"},"content":"        assertNull(typicalStudent.getKey());"},{"lineNumber":88,"author":{"gitId":"-"},"content":"        assertEquals(\"idOfTypicalCourse1\", typicalStudent.getCourseId());"},{"lineNumber":89,"author":{"gitId":"-"},"content":"        assertEquals(\"student1InCourse1@gmail.tmt\", typicalStudent.getEmail());"},{"lineNumber":90,"author":{"gitId":"-"},"content":"        assertEquals(\"student1 In Course1\u003c/td\u003e\u003c/div\u003e\u0027\\\"\", typicalStudent.getName());"},{"lineNumber":91,"author":{"gitId":"-"},"content":"        assertNull(typicalStudent.getJoinState()); // information is hidden"},{"lineNumber":92,"author":{"gitId":"-"},"content":"        assertNull(typicalStudent.getComments()); // information is hidden"},{"lineNumber":93,"author":{"gitId":"-"},"content":"        assertEquals(\"Team 1.1\u003c/td\u003e\u003c/div\u003e\u0027\\\"\", typicalStudent.getTeamName());"},{"lineNumber":94,"author":{"gitId":"-"},"content":"        assertEquals(\"Section 1\", typicalStudent.getSectionName());"},{"lineNumber":95,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":96,"author":{"gitId":"-"},"content":""},{"lineNumber":97,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":98,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":99,"author":{"gitId":"-"},"content":"    protected void testAccessControl() {"},{"lineNumber":100,"author":{"gitId":"-"},"content":"        ______TS(\"unknown courseId for (instructor access)\");"},{"lineNumber":101,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor1OfCourse1 \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":102,"author":{"gitId":"-"},"content":""},{"lineNumber":103,"author":{"gitId":"-"},"content":"        loginAsInstructor(instructor1OfCourse1.getGoogleId());"},{"lineNumber":104,"author":{"gitId":"-"},"content":"        String[] submissionParams \u003d new String[] {"},{"lineNumber":105,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, \"randomId\","},{"lineNumber":106,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":107,"author":{"gitId":"-"},"content":"        verifyCannotAccess(submissionParams);"},{"lineNumber":108,"author":{"gitId":"-"},"content":""},{"lineNumber":109,"author":{"gitId":"-"},"content":"        ______TS(\"no view students privileges (instructor access)\");"},{"lineNumber":110,"author":{"gitId":"-"},"content":"        InstructorAttributes helperOfCourse1 \u003d typicalBundle.instructors.get(\"helperOfCourse1\");"},{"lineNumber":111,"author":{"gitId":"-"},"content":""},{"lineNumber":112,"author":{"gitId":"-"},"content":"        // ensure the reason for not being able to access is not due to being from a different course"},{"lineNumber":113,"author":{"gitId":"-"},"content":"        assertEquals(\"idOfTypicalCourse1\", typicalBundle.courses.get(\"typicalCourse1\").getId());"},{"lineNumber":114,"author":{"gitId":"-"},"content":"        assertEquals(\"idOfTypicalCourse1\", helperOfCourse1.getCourseId());"},{"lineNumber":115,"author":{"gitId":"-"},"content":""},{"lineNumber":116,"author":{"gitId":"-"},"content":"        loginAsInstructor(helperOfCourse1.getGoogleId());"},{"lineNumber":117,"author":{"gitId":"-"},"content":"        submissionParams \u003d new String[] {"},{"lineNumber":118,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, \"idOfTypicalCourse1\","},{"lineNumber":119,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":120,"author":{"gitId":"-"},"content":"        verifyCannotAccess(submissionParams);"},{"lineNumber":121,"author":{"gitId":"-"},"content":""},{"lineNumber":122,"author":{"gitId":"-"},"content":"        ______TS(\"unknown courseId and/or teamName (student access)\");"},{"lineNumber":123,"author":{"gitId":"-"},"content":"        StudentAttributes studentAttributes \u003d typicalBundle.students.get(\"student1InCourse1\");"},{"lineNumber":124,"author":{"gitId":"-"},"content":""},{"lineNumber":125,"author":{"gitId":"-"},"content":"        loginAsStudent(studentAttributes.getGoogleId());"},{"lineNumber":126,"author":{"gitId":"-"},"content":"        submissionParams \u003d new String[] {"},{"lineNumber":127,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, \"randomId\","},{"lineNumber":128,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":129,"author":{"gitId":"-"},"content":"        verifyCannotAccess(submissionParams);"},{"lineNumber":130,"author":{"gitId":"-"},"content":""},{"lineNumber":131,"author":{"gitId":"-"},"content":"        submissionParams \u003d new String[] {"},{"lineNumber":132,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, studentAttributes.getCourse(),"},{"lineNumber":133,"author":{"gitId":"-"},"content":"                Const.ParamsNames.TEAM_NAME, \"randomTeamName\","},{"lineNumber":134,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":135,"author":{"gitId":"-"},"content":"        verifyCannotAccess(submissionParams);"},{"lineNumber":136,"author":{"gitId":"-"},"content":""},{"lineNumber":137,"author":{"gitId":"-"},"content":"        submissionParams \u003d new String[] {"},{"lineNumber":138,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, \"randomId\","},{"lineNumber":139,"author":{"gitId":"-"},"content":"                Const.ParamsNames.TEAM_NAME, \"randomTeamName\","},{"lineNumber":140,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":141,"author":{"gitId":"-"},"content":"        verifyCannotAccess(submissionParams);"},{"lineNumber":142,"author":{"gitId":"-"},"content":""},{"lineNumber":143,"author":{"gitId":"-"},"content":"        ______TS(\"unknown login entity\");"},{"lineNumber":144,"author":{"gitId":"-"},"content":"        loginAsUnregistered(\"unregistered\");"},{"lineNumber":145,"author":{"gitId":"-"},"content":"        String[] params \u003d new String[] {"},{"lineNumber":146,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, instructor1OfCourse1.getCourseId(),"},{"lineNumber":147,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":148,"author":{"gitId":"-"},"content":"        verifyCannotAccess(params);"},{"lineNumber":149,"author":{"gitId":"-"},"content":""},{"lineNumber":150,"author":{"gitId":"-"},"content":"        params \u003d new String[] {"},{"lineNumber":151,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, studentAttributes.getCourse(),"},{"lineNumber":152,"author":{"gitId":"-"},"content":"                Const.ParamsNames.TEAM_NAME, studentAttributes.getTeam(),"},{"lineNumber":153,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":154,"author":{"gitId":"-"},"content":"        verifyCannotAccess(params);"},{"lineNumber":155,"author":{"gitId":"-"},"content":""},{"lineNumber":156,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":157,"author":{"gitId":"-"},"content":""},{"lineNumber":158,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":159,"author":{"gitId":"-"},"content":"    public void testAccessControl_withOnlyCourseId_shouldDoAuthenticationOfInstructor() {"},{"lineNumber":160,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor1OfCourse1 \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":161,"author":{"gitId":"-"},"content":""},{"lineNumber":162,"author":{"gitId":"-"},"content":"        String[] submissionParams \u003d new String[] {"},{"lineNumber":163,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, instructor1OfCourse1.getCourseId(),"},{"lineNumber":164,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":165,"author":{"gitId":"-"},"content":"        verifyOnlyInstructorsOfTheSameCourseCanAccess(submissionParams);"},{"lineNumber":166,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":167,"author":{"gitId":"-"},"content":""},{"lineNumber":168,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":169,"author":{"gitId":"-"},"content":"    public void testAccessControl_withCourseIdAndTeamName_shouldDoAuthenticationOfStudent() {"},{"lineNumber":170,"author":{"gitId":"-"},"content":"        StudentAttributes studentAttributes \u003d typicalBundle.students.get(\"student1InCourse1\");"},{"lineNumber":171,"author":{"gitId":"-"},"content":"        loginAsStudent(studentAttributes.getGoogleId());"},{"lineNumber":172,"author":{"gitId":"-"},"content":""},{"lineNumber":173,"author":{"gitId":"-"},"content":"        ______TS(\"Acccess students\u0027 own team should pass\");"},{"lineNumber":174,"author":{"gitId":"-"},"content":"        String[] submissionParams \u003d new String[] {"},{"lineNumber":175,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, studentAttributes.getCourse(),"},{"lineNumber":176,"author":{"gitId":"-"},"content":"                Const.ParamsNames.TEAM_NAME, studentAttributes.getTeam(),"},{"lineNumber":177,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":178,"author":{"gitId":"-"},"content":"        verifyCanAccess(submissionParams);"},{"lineNumber":179,"author":{"gitId":"-"},"content":""},{"lineNumber":180,"author":{"gitId":"-"},"content":"        ______TS(\"Acccess other team should fail\");"},{"lineNumber":181,"author":{"gitId":"-"},"content":"        StudentAttributes otherStudent \u003d typicalBundle.students.get(\"student5InCourse1\");"},{"lineNumber":182,"author":{"gitId":"-"},"content":"        assertEquals(otherStudent.getCourse(), studentAttributes.getCourse());"},{"lineNumber":183,"author":{"gitId":"-"},"content":"        assertNotEquals(otherStudent.getTeam(), studentAttributes.getTeam());"},{"lineNumber":184,"author":{"gitId":"-"},"content":"        submissionParams \u003d new String[] {"},{"lineNumber":185,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, studentAttributes.getCourse(),"},{"lineNumber":186,"author":{"gitId":"-"},"content":"                Const.ParamsNames.TEAM_NAME, otherStudent.getTeam(),"},{"lineNumber":187,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":188,"author":{"gitId":"-"},"content":"        verifyCannotAccess(submissionParams);"},{"lineNumber":189,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":190,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"domlimm":2,"-":188}},{"path":"src/test/java/teammates/ui/webapi/MarkNotificationAsReadActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":4,"author":{"gitId":"-"},"content":""},{"lineNumber":5,"author":{"gitId":"hhdqirui"},"content":"import org.testng.annotations.Ignore;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import org.testng.annotations.Test;"},{"lineNumber":7,"author":{"gitId":"-"},"content":""},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.InstructorAttributes;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.NotificationAttributes;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import teammates.ui.output.ReadNotificationsData;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import teammates.ui.request.MarkNotificationAsReadRequest;"},{"lineNumber":13,"author":{"gitId":"-"},"content":""},{"lineNumber":14,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":15,"author":{"gitId":"-"},"content":" * SUT: {@link MarkNotificationAsReadAction}."},{"lineNumber":16,"author":{"gitId":"-"},"content":" */"},{"lineNumber":17,"author":{"gitId":"hhdqirui"},"content":"@Ignore"},{"lineNumber":18,"author":{"gitId":"-"},"content":"public class MarkNotificationAsReadActionTest extends BaseActionTest\u003cMarkNotificationAsReadAction\u003e {"},{"lineNumber":19,"author":{"gitId":"-"},"content":""},{"lineNumber":20,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":21,"author":{"gitId":"-"},"content":"    String getActionUri() {"},{"lineNumber":22,"author":{"gitId":"-"},"content":"        return Const.ResourceURIs.NOTIFICATION_READ;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":24,"author":{"gitId":"-"},"content":""},{"lineNumber":25,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":26,"author":{"gitId":"-"},"content":"    String getRequestMethod() {"},{"lineNumber":27,"author":{"gitId":"-"},"content":"        return POST;"},{"lineNumber":28,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":29,"author":{"gitId":"-"},"content":""},{"lineNumber":30,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":31,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":32,"author":{"gitId":"-"},"content":"    protected void testExecute() throws Exception {"},{"lineNumber":33,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor1OfCourse1 \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":34,"author":{"gitId":"-"},"content":"        String instructorId \u003d instructor1OfCourse1.getGoogleId();"},{"lineNumber":35,"author":{"gitId":"-"},"content":"        NotificationAttributes notification \u003d typicalBundle.notifications.get(\"notification5\");"},{"lineNumber":36,"author":{"gitId":"-"},"content":"        loginAsInstructor(instructorId);"},{"lineNumber":37,"author":{"gitId":"-"},"content":""},{"lineNumber":38,"author":{"gitId":"-"},"content":"        ______TS(\"Typical success case: mark a notification as read\");"},{"lineNumber":39,"author":{"gitId":"-"},"content":"        MarkNotificationAsReadRequest reqBody \u003d new MarkNotificationAsReadRequest("},{"lineNumber":40,"author":{"gitId":"-"},"content":"                notification.getNotificationId(), notification.getEndTime().toEpochMilli());"},{"lineNumber":41,"author":{"gitId":"-"},"content":"        MarkNotificationAsReadAction action \u003d getAction(reqBody);"},{"lineNumber":42,"author":{"gitId":"-"},"content":"        JsonResult actionOutput \u003d getJsonResult(action);"},{"lineNumber":43,"author":{"gitId":"-"},"content":"        ReadNotificationsData response \u003d (ReadNotificationsData) actionOutput.getOutput();"},{"lineNumber":44,"author":{"gitId":"-"},"content":"        List\u003cString\u003e readNotifications \u003d response.getReadNotifications();"},{"lineNumber":45,"author":{"gitId":"-"},"content":"        assertTrue(readNotifications.contains(notification.getNotificationId()));"},{"lineNumber":46,"author":{"gitId":"-"},"content":""},{"lineNumber":47,"author":{"gitId":"-"},"content":"        ______TS(\"Invalid case: mark non-existent notification as read\");"},{"lineNumber":48,"author":{"gitId":"-"},"content":"        reqBody \u003d new MarkNotificationAsReadRequest(\"invalid id\", notification.getEndTime().toEpochMilli());"},{"lineNumber":49,"author":{"gitId":"-"},"content":"        verifyEntityNotFound(reqBody);"},{"lineNumber":50,"author":{"gitId":"-"},"content":""},{"lineNumber":51,"author":{"gitId":"-"},"content":"        ______TS(\"Invalid case: notification end time is zero\");"},{"lineNumber":52,"author":{"gitId":"-"},"content":"        reqBody \u003d new MarkNotificationAsReadRequest(notification.getNotificationId(), 0L);"},{"lineNumber":53,"author":{"gitId":"-"},"content":"        verifyHttpRequestBodyFailure(reqBody);"},{"lineNumber":54,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":55,"author":{"gitId":"-"},"content":""},{"lineNumber":56,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":57,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":58,"author":{"gitId":"-"},"content":"    protected void testAccessControl() throws Exception {"},{"lineNumber":59,"author":{"gitId":"-"},"content":"        verifyAnyLoggedInUserCanAccess();"},{"lineNumber":60,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":61,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"hhdqirui":2,"-":59}},{"path":"src/test/java/teammates/ui/webapi/ResetAccountActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"domlimm"},"content":"import org.testng.annotations.Ignore;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import org.testng.annotations.Test;"},{"lineNumber":5,"author":{"gitId":"-"},"content":""},{"lineNumber":6,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.InstructorAttributes;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.StudentAttributes;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.ui.output.MessageOutput;"},{"lineNumber":10,"author":{"gitId":"-"},"content":""},{"lineNumber":11,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":12,"author":{"gitId":"-"},"content":" * SUT: {@link ResetAccountAction}."},{"lineNumber":13,"author":{"gitId":"-"},"content":" */"},{"lineNumber":14,"author":{"gitId":"domlimm"},"content":"@Ignore"},{"lineNumber":15,"author":{"gitId":"-"},"content":"public class ResetAccountActionTest extends BaseActionTest\u003cResetAccountAction\u003e {"},{"lineNumber":16,"author":{"gitId":"-"},"content":""},{"lineNumber":17,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":18,"author":{"gitId":"-"},"content":"    protected String getActionUri() {"},{"lineNumber":19,"author":{"gitId":"-"},"content":"        return Const.ResourceURIs.ACCOUNT_RESET;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":21,"author":{"gitId":"-"},"content":""},{"lineNumber":22,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":23,"author":{"gitId":"-"},"content":"    protected String getRequestMethod() {"},{"lineNumber":24,"author":{"gitId":"-"},"content":"        return PUT;"},{"lineNumber":25,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":26,"author":{"gitId":"-"},"content":""},{"lineNumber":27,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":28,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":29,"author":{"gitId":"-"},"content":"    protected void testExecute() {"},{"lineNumber":30,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor1OfCourse1 \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":31,"author":{"gitId":"-"},"content":"        StudentAttributes student1OfCourse1 \u003d typicalBundle.students.get(\"student1InCourse1\");"},{"lineNumber":32,"author":{"gitId":"-"},"content":"        loginAsAdmin();"},{"lineNumber":33,"author":{"gitId":"-"},"content":""},{"lineNumber":34,"author":{"gitId":"-"},"content":"        ______TS(\"Failure case: no parameters supplied\");"},{"lineNumber":35,"author":{"gitId":"-"},"content":""},{"lineNumber":36,"author":{"gitId":"-"},"content":"        InvalidHttpParameterException ihpe \u003d verifyHttpParameterFailure();"},{"lineNumber":37,"author":{"gitId":"-"},"content":"        assertEquals(\"Either student email or instructor email has to be specified.\", ihpe.getMessage());"},{"lineNumber":38,"author":{"gitId":"-"},"content":""},{"lineNumber":39,"author":{"gitId":"-"},"content":"        ______TS(\"Failure case: no course id supplied\");"},{"lineNumber":40,"author":{"gitId":"-"},"content":""},{"lineNumber":41,"author":{"gitId":"-"},"content":"        String[] paramsInsufficient \u003d {"},{"lineNumber":42,"author":{"gitId":"-"},"content":"                Const.ParamsNames.INSTRUCTOR_EMAIL, instructor1OfCourse1.getEmail(),"},{"lineNumber":43,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":44,"author":{"gitId":"-"},"content":""},{"lineNumber":45,"author":{"gitId":"-"},"content":"        verifyHttpParameterFailure(paramsInsufficient);"},{"lineNumber":46,"author":{"gitId":"-"},"content":""},{"lineNumber":47,"author":{"gitId":"-"},"content":"        ______TS(\"Failure case: Instructor not exist\");"},{"lineNumber":48,"author":{"gitId":"-"},"content":"        String[] invalidInstructorParams \u003d {"},{"lineNumber":49,"author":{"gitId":"-"},"content":"                Const.ParamsNames.INSTRUCTOR_EMAIL, \"non-exist-instructor@test.com\","},{"lineNumber":50,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, instructor1OfCourse1.getCourseId(),"},{"lineNumber":51,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":52,"author":{"gitId":"-"},"content":""},{"lineNumber":53,"author":{"gitId":"-"},"content":"        EntityNotFoundException enfe \u003d verifyEntityNotFound(invalidInstructorParams);"},{"lineNumber":54,"author":{"gitId":"-"},"content":"        assertEquals(\"Instructor does not exist.\", enfe.getMessage());"},{"lineNumber":55,"author":{"gitId":"-"},"content":""},{"lineNumber":56,"author":{"gitId":"-"},"content":"        ______TS(\"Failure case: Student not exist\");"},{"lineNumber":57,"author":{"gitId":"-"},"content":"        String[] invalidStudentParams \u003d {"},{"lineNumber":58,"author":{"gitId":"-"},"content":"                Const.ParamsNames.STUDENT_EMAIL, \"non-exist-student@test.com\","},{"lineNumber":59,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, instructor1OfCourse1.getCourseId(),"},{"lineNumber":60,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":61,"author":{"gitId":"-"},"content":""},{"lineNumber":62,"author":{"gitId":"-"},"content":"        enfe \u003d verifyEntityNotFound(invalidStudentParams);"},{"lineNumber":63,"author":{"gitId":"-"},"content":"        assertEquals(\"Student does not exist.\", enfe.getMessage());"},{"lineNumber":64,"author":{"gitId":"-"},"content":""},{"lineNumber":65,"author":{"gitId":"-"},"content":"        ______TS(\"Failure case: Course not exist\");"},{"lineNumber":66,"author":{"gitId":"-"},"content":"        String[] invalidCourseParams \u003d {"},{"lineNumber":67,"author":{"gitId":"-"},"content":"                Const.ParamsNames.STUDENT_EMAIL, instructor1OfCourse1.getEmail(),"},{"lineNumber":68,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, \"non exist course id\","},{"lineNumber":69,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":70,"author":{"gitId":"-"},"content":""},{"lineNumber":71,"author":{"gitId":"-"},"content":"        enfe \u003d verifyEntityNotFound(invalidCourseParams);"},{"lineNumber":72,"author":{"gitId":"-"},"content":"        assertEquals(\"Student does not exist.\", enfe.getMessage());"},{"lineNumber":73,"author":{"gitId":"-"},"content":""},{"lineNumber":74,"author":{"gitId":"-"},"content":"        ______TS(\"typical success case: reset instructor account\");"},{"lineNumber":75,"author":{"gitId":"-"},"content":""},{"lineNumber":76,"author":{"gitId":"-"},"content":"        String[] paramsInstructor \u003d {"},{"lineNumber":77,"author":{"gitId":"-"},"content":"                Const.ParamsNames.INSTRUCTOR_EMAIL, instructor1OfCourse1.getEmail(),"},{"lineNumber":78,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, instructor1OfCourse1.getCourseId(),"},{"lineNumber":79,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":80,"author":{"gitId":"-"},"content":""},{"lineNumber":81,"author":{"gitId":"-"},"content":"        ResetAccountAction a \u003d getAction(paramsInstructor);"},{"lineNumber":82,"author":{"gitId":"-"},"content":"        JsonResult r \u003d getJsonResult(a);"},{"lineNumber":83,"author":{"gitId":"-"},"content":""},{"lineNumber":84,"author":{"gitId":"-"},"content":"        MessageOutput response \u003d (MessageOutput) r.getOutput();"},{"lineNumber":85,"author":{"gitId":"-"},"content":""},{"lineNumber":86,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor \u003d logic.getInstructorForEmail(instructor1OfCourse1.getCourseId(),"},{"lineNumber":87,"author":{"gitId":"-"},"content":"                instructor1OfCourse1.getEmail());"},{"lineNumber":88,"author":{"gitId":"-"},"content":""},{"lineNumber":89,"author":{"gitId":"-"},"content":"        assertEquals(response.getMessage(), \"Account is successfully reset.\");"},{"lineNumber":90,"author":{"gitId":"-"},"content":"        assertNotNull(instructor);"},{"lineNumber":91,"author":{"gitId":"-"},"content":"        assertNull(instructor.getGoogleId());"},{"lineNumber":92,"author":{"gitId":"-"},"content":"        assertNull(logic.getInstructorForGoogleId(instructor1OfCourse1.getCourseId(), instructor1OfCourse1.getGoogleId()));"},{"lineNumber":93,"author":{"gitId":"-"},"content":""},{"lineNumber":94,"author":{"gitId":"-"},"content":"        ______TS(\"typical success case: reset student account\");"},{"lineNumber":95,"author":{"gitId":"-"},"content":""},{"lineNumber":96,"author":{"gitId":"-"},"content":"        String[] paramsStudent \u003d {"},{"lineNumber":97,"author":{"gitId":"-"},"content":"                Const.ParamsNames.STUDENT_EMAIL, student1OfCourse1.getEmail(),"},{"lineNumber":98,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, student1OfCourse1.getCourse(),"},{"lineNumber":99,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":100,"author":{"gitId":"-"},"content":""},{"lineNumber":101,"author":{"gitId":"-"},"content":"        a \u003d getAction(paramsStudent);"},{"lineNumber":102,"author":{"gitId":"-"},"content":"        r \u003d getJsonResult(a);"},{"lineNumber":103,"author":{"gitId":"-"},"content":""},{"lineNumber":104,"author":{"gitId":"-"},"content":"        response \u003d (MessageOutput) r.getOutput();"},{"lineNumber":105,"author":{"gitId":"-"},"content":""},{"lineNumber":106,"author":{"gitId":"-"},"content":"        assertEquals(response.getMessage(), \"Account is successfully reset.\");"},{"lineNumber":107,"author":{"gitId":"-"},"content":"        StudentAttributes student \u003d logic.getStudentForEmail(student1OfCourse1.getCourse(), student1OfCourse1.getEmail());"},{"lineNumber":108,"author":{"gitId":"-"},"content":"        assertNotNull(student);"},{"lineNumber":109,"author":{"gitId":"-"},"content":"        assertEquals(\"\", student.getGoogleId());"},{"lineNumber":110,"author":{"gitId":"-"},"content":"        assertNull(logic.getStudentForGoogleId(student1OfCourse1.getCourse(), student1OfCourse1.getGoogleId()));"},{"lineNumber":111,"author":{"gitId":"-"},"content":""},{"lineNumber":112,"author":{"gitId":"-"},"content":"        ______TS(\"typical success case: reset student account which has been already reset: failed silently\");"},{"lineNumber":113,"author":{"gitId":"-"},"content":""},{"lineNumber":114,"author":{"gitId":"-"},"content":"        a \u003d getAction(paramsStudent);"},{"lineNumber":115,"author":{"gitId":"-"},"content":"        r \u003d getJsonResult(a);"},{"lineNumber":116,"author":{"gitId":"-"},"content":""},{"lineNumber":117,"author":{"gitId":"-"},"content":"        response \u003d (MessageOutput) r.getOutput();"},{"lineNumber":118,"author":{"gitId":"-"},"content":""},{"lineNumber":119,"author":{"gitId":"-"},"content":"        assertEquals(response.getMessage(), \"Account is successfully reset.\");"},{"lineNumber":120,"author":{"gitId":"-"},"content":"        student \u003d logic.getStudentForEmail(student1OfCourse1.getCourse(), student1OfCourse1.getEmail());"},{"lineNumber":121,"author":{"gitId":"-"},"content":"        assertNotNull(student);"},{"lineNumber":122,"author":{"gitId":"-"},"content":"        assertEquals(\"\", student.getGoogleId());"},{"lineNumber":123,"author":{"gitId":"-"},"content":"        assertNull(logic.getStudentForGoogleId(student1OfCourse1.getCourse(), student1OfCourse1.getGoogleId()));"},{"lineNumber":124,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":125,"author":{"gitId":"-"},"content":""},{"lineNumber":126,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":127,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":128,"author":{"gitId":"-"},"content":"    protected void testAccessControl() {"},{"lineNumber":129,"author":{"gitId":"-"},"content":"        verifyOnlyAdminCanAccess();"},{"lineNumber":130,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":131,"author":{"gitId":"-"},"content":""},{"lineNumber":132,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"domlimm":2,"-":130}},{"path":"src/test/java/teammates/ui/webapi/ResetAccountRequestActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import org.testng.annotations.Test;"},{"lineNumber":4,"author":{"gitId":"-"},"content":""},{"lineNumber":5,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.AccountRequestAttributes;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import teammates.common.util.EmailType;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.util.EmailWrapper;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.ui.output.JoinLinkData;"},{"lineNumber":10,"author":{"gitId":"-"},"content":""},{"lineNumber":11,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":12,"author":{"gitId":"-"},"content":" * SUT: {@link ResetAccountRequestAction}."},{"lineNumber":13,"author":{"gitId":"-"},"content":" */"},{"lineNumber":14,"author":{"gitId":"-"},"content":"public class ResetAccountRequestActionTest extends BaseActionTest\u003cResetAccountRequestAction\u003e {"},{"lineNumber":15,"author":{"gitId":"-"},"content":""},{"lineNumber":16,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":17,"author":{"gitId":"-"},"content":"    protected String getActionUri() {"},{"lineNumber":18,"author":{"gitId":"-"},"content":"        return Const.ResourceURIs.ACCOUNT_REQUEST_RESET;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":20,"author":{"gitId":"-"},"content":""},{"lineNumber":21,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":22,"author":{"gitId":"-"},"content":"    protected String getRequestMethod() {"},{"lineNumber":23,"author":{"gitId":"-"},"content":"        return PUT;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":25,"author":{"gitId":"-"},"content":""},{"lineNumber":26,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":27,"author":{"gitId":"kevin9foong"},"content":"    @Test(enabled \u003d false)"},{"lineNumber":28,"author":{"gitId":"-"},"content":"    protected void testExecute() {"},{"lineNumber":29,"author":{"gitId":"-"},"content":"        AccountRequestAttributes accountRequest \u003d typicalBundle.accountRequests.get(\"instructor1OfCourse1\");"},{"lineNumber":30,"author":{"gitId":"-"},"content":"        AccountRequestAttributes unregisteredAccountRequest \u003d typicalBundle.accountRequests.get(\"unregisteredInstructor1\");"},{"lineNumber":31,"author":{"gitId":"-"},"content":"        loginAsAdmin();"},{"lineNumber":32,"author":{"gitId":"-"},"content":""},{"lineNumber":33,"author":{"gitId":"-"},"content":"        ______TS(\"Failure case: not enough parameters\");"},{"lineNumber":34,"author":{"gitId":"-"},"content":""},{"lineNumber":35,"author":{"gitId":"-"},"content":"        verifyHttpParameterFailure();"},{"lineNumber":36,"author":{"gitId":"-"},"content":""},{"lineNumber":37,"author":{"gitId":"-"},"content":"        String[] params \u003d {"},{"lineNumber":38,"author":{"gitId":"-"},"content":"                // Const.ParamsNames.INSTRUCTOR_EMAIL,"},{"lineNumber":39,"author":{"gitId":"-"},"content":"                Const.ParamsNames.INSTRUCTOR_INSTITUTION, accountRequest.getInstitute(),"},{"lineNumber":40,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":41,"author":{"gitId":"-"},"content":""},{"lineNumber":42,"author":{"gitId":"-"},"content":"        verifyHttpParameterFailure(params);"},{"lineNumber":43,"author":{"gitId":"-"},"content":""},{"lineNumber":44,"author":{"gitId":"-"},"content":"        params \u003d new String[] {"},{"lineNumber":45,"author":{"gitId":"-"},"content":"                Const.ParamsNames.INSTRUCTOR_EMAIL, accountRequest.getEmail(),"},{"lineNumber":46,"author":{"gitId":"-"},"content":"                // Const.ParamNames.INSTRUCTOR_INSTITUTION,"},{"lineNumber":47,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":48,"author":{"gitId":"-"},"content":""},{"lineNumber":49,"author":{"gitId":"-"},"content":"        verifyHttpParameterFailure(params);"},{"lineNumber":50,"author":{"gitId":"-"},"content":""},{"lineNumber":51,"author":{"gitId":"-"},"content":"        ______TS(\"Failure case: account request not found\");"},{"lineNumber":52,"author":{"gitId":"-"},"content":""},{"lineNumber":53,"author":{"gitId":"-"},"content":"        params \u003d new String[] {"},{"lineNumber":54,"author":{"gitId":"-"},"content":"                Const.ParamsNames.INSTRUCTOR_EMAIL, \"not-found@gmail.tmt\","},{"lineNumber":55,"author":{"gitId":"-"},"content":"                Const.ParamsNames.INSTRUCTOR_INSTITUTION, \"not-found-institute\","},{"lineNumber":56,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":57,"author":{"gitId":"-"},"content":""},{"lineNumber":58,"author":{"gitId":"-"},"content":"        EntityNotFoundException enfe \u003d verifyEntityNotFound(params);"},{"lineNumber":59,"author":{"gitId":"-"},"content":"        assertEquals(\"Account request for instructor with email: not-found@gmail.tmt and institute: \""},{"lineNumber":60,"author":{"gitId":"-"},"content":"                + \"not-found-institute does not exist.\", enfe.getMessage());"},{"lineNumber":61,"author":{"gitId":"-"},"content":""},{"lineNumber":62,"author":{"gitId":"-"},"content":"        ______TS(\"Failure case: instructor is unregistered\");"},{"lineNumber":63,"author":{"gitId":"-"},"content":""},{"lineNumber":64,"author":{"gitId":"-"},"content":"        params \u003d new String[] {"},{"lineNumber":65,"author":{"gitId":"-"},"content":"                Const.ParamsNames.INSTRUCTOR_EMAIL, unregisteredAccountRequest.getEmail(),"},{"lineNumber":66,"author":{"gitId":"-"},"content":"                Const.ParamsNames.INSTRUCTOR_INSTITUTION, unregisteredAccountRequest.getInstitute(),"},{"lineNumber":67,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":68,"author":{"gitId":"-"},"content":""},{"lineNumber":69,"author":{"gitId":"-"},"content":"        InvalidOperationException ioe \u003d verifyInvalidOperation(params);"},{"lineNumber":70,"author":{"gitId":"-"},"content":"        assertEquals(\"Unable to reset account request as instructor is still unregistered.\", ioe.getMessage());"},{"lineNumber":71,"author":{"gitId":"-"},"content":""},{"lineNumber":72,"author":{"gitId":"-"},"content":"        ______TS(\"typical success case\");"},{"lineNumber":73,"author":{"gitId":"-"},"content":""},{"lineNumber":74,"author":{"gitId":"-"},"content":"        params \u003d new String[] {"},{"lineNumber":75,"author":{"gitId":"-"},"content":"                Const.ParamsNames.INSTRUCTOR_EMAIL, accountRequest.getEmail(),"},{"lineNumber":76,"author":{"gitId":"-"},"content":"                Const.ParamsNames.INSTRUCTOR_INSTITUTION, accountRequest.getInstitute(),"},{"lineNumber":77,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":78,"author":{"gitId":"-"},"content":""},{"lineNumber":79,"author":{"gitId":"-"},"content":"        ResetAccountRequestAction a \u003d getAction(params);"},{"lineNumber":80,"author":{"gitId":"-"},"content":"        JsonResult r \u003d getJsonResult(a);"},{"lineNumber":81,"author":{"gitId":"-"},"content":""},{"lineNumber":82,"author":{"gitId":"-"},"content":"        accountRequest \u003d logic.getAccountRequest(accountRequest.getEmail(), accountRequest.getInstitute());"},{"lineNumber":83,"author":{"gitId":"-"},"content":"        JoinLinkData response \u003d (JoinLinkData) r.getOutput();"},{"lineNumber":84,"author":{"gitId":"-"},"content":"        assertEquals(accountRequest.getRegistrationUrl(), response.getJoinLink());"},{"lineNumber":85,"author":{"gitId":"-"},"content":""},{"lineNumber":86,"author":{"gitId":"-"},"content":"        AccountRequestAttributes updatedAccountRequest \u003d"},{"lineNumber":87,"author":{"gitId":"-"},"content":"                logic.getAccountRequest(accountRequest.getEmail(), accountRequest.getInstitute());"},{"lineNumber":88,"author":{"gitId":"-"},"content":"        assertNull(updatedAccountRequest.getRegisteredAt());"},{"lineNumber":89,"author":{"gitId":"-"},"content":""},{"lineNumber":90,"author":{"gitId":"-"},"content":"        verifyNumberOfEmailsSent(1);"},{"lineNumber":91,"author":{"gitId":"-"},"content":""},{"lineNumber":92,"author":{"gitId":"-"},"content":"        EmailWrapper emailSent \u003d mockEmailSender.getEmailsSent().get(0);"},{"lineNumber":93,"author":{"gitId":"-"},"content":"        assertEquals(String.format(EmailType.NEW_INSTRUCTOR_ACCOUNT.getSubject(), accountRequest.getName()),"},{"lineNumber":94,"author":{"gitId":"-"},"content":"                emailSent.getSubject());"},{"lineNumber":95,"author":{"gitId":"-"},"content":"        assertEquals(accountRequest.getEmail(), emailSent.getRecipient());"},{"lineNumber":96,"author":{"gitId":"-"},"content":"        assertTrue(emailSent.getContent().contains(accountRequest.getRegistrationUrl()));"},{"lineNumber":97,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":98,"author":{"gitId":"-"},"content":""},{"lineNumber":99,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":100,"author":{"gitId":"kevin9foong"},"content":"    @Test(enabled \u003d false)"},{"lineNumber":101,"author":{"gitId":"-"},"content":"    protected void testAccessControl() {"},{"lineNumber":102,"author":{"gitId":"-"},"content":"        verifyOnlyAdminCanAccess();"},{"lineNumber":103,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":104,"author":{"gitId":"-"},"content":""},{"lineNumber":105,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"-":103,"kevin9foong":2}},{"path":"src/test/java/teammates/ui/webapi/RestoreCourseActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"EuniceSim142"},"content":"import org.testng.annotations.Ignore;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import org.testng.annotations.Test;"},{"lineNumber":5,"author":{"gitId":"-"},"content":""},{"lineNumber":6,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.CourseAttributes;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.InstructorAttributes;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.ui.output.MessageOutput;"},{"lineNumber":10,"author":{"gitId":"-"},"content":""},{"lineNumber":11,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":12,"author":{"gitId":"-"},"content":" * SUT: {@link RestoreCourseAction}."},{"lineNumber":13,"author":{"gitId":"-"},"content":" */"},{"lineNumber":14,"author":{"gitId":"EuniceSim142"},"content":"@Ignore"},{"lineNumber":15,"author":{"gitId":"-"},"content":"public class RestoreCourseActionTest"},{"lineNumber":16,"author":{"gitId":"-"},"content":"        extends BaseActionTest\u003cRestoreCourseAction\u003e {"},{"lineNumber":17,"author":{"gitId":"-"},"content":""},{"lineNumber":18,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":19,"author":{"gitId":"-"},"content":"    protected String getActionUri() {"},{"lineNumber":20,"author":{"gitId":"-"},"content":"        return Const.ResourceURIs.BIN_COURSE;"},{"lineNumber":21,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":22,"author":{"gitId":"-"},"content":""},{"lineNumber":23,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":24,"author":{"gitId":"-"},"content":"    protected String getRequestMethod() {"},{"lineNumber":25,"author":{"gitId":"-"},"content":"        return DELETE;"},{"lineNumber":26,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":27,"author":{"gitId":"-"},"content":""},{"lineNumber":28,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":29,"author":{"gitId":"EuniceSim142"},"content":"    @Test (enabled \u003d false)"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    public void testExecute() throws Exception {"},{"lineNumber":31,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor1OfCourse1 \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":32,"author":{"gitId":"-"},"content":"        String instructorId \u003d instructor1OfCourse1.getGoogleId();"},{"lineNumber":33,"author":{"gitId":"-"},"content":"        String courseId \u003d instructor1OfCourse1.getCourseId();"},{"lineNumber":34,"author":{"gitId":"-"},"content":""},{"lineNumber":35,"author":{"gitId":"-"},"content":"        loginAsInstructor(instructorId);"},{"lineNumber":36,"author":{"gitId":"-"},"content":""},{"lineNumber":37,"author":{"gitId":"-"},"content":"        ______TS(\"Not in recycle bin but valid course\");"},{"lineNumber":38,"author":{"gitId":"-"},"content":""},{"lineNumber":39,"author":{"gitId":"-"},"content":"        String[] submissionParams \u003d new String[] {"},{"lineNumber":40,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, courseId,"},{"lineNumber":41,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":42,"author":{"gitId":"-"},"content":""},{"lineNumber":43,"author":{"gitId":"-"},"content":"        RestoreCourseAction action \u003d getAction(submissionParams);"},{"lineNumber":44,"author":{"gitId":"-"},"content":"        JsonResult result \u003d getJsonResult(action);"},{"lineNumber":45,"author":{"gitId":"-"},"content":"        MessageOutput message \u003d (MessageOutput) result.getOutput();"},{"lineNumber":46,"author":{"gitId":"-"},"content":""},{"lineNumber":47,"author":{"gitId":"-"},"content":"        assertEquals(\"The course \" + courseId + \" has been restored.\", message.getMessage());"},{"lineNumber":48,"author":{"gitId":"-"},"content":"        assertNull(logic.getCourse(instructor1OfCourse1.getCourseId()).getDeletedAt());"},{"lineNumber":49,"author":{"gitId":"-"},"content":""},{"lineNumber":50,"author":{"gitId":"-"},"content":"        ______TS(\"Typical case, restore a deleted course from Recycle Bin\");"},{"lineNumber":51,"author":{"gitId":"-"},"content":""},{"lineNumber":52,"author":{"gitId":"-"},"content":"        submissionParams \u003d new String[] {"},{"lineNumber":53,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, courseId,"},{"lineNumber":54,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":55,"author":{"gitId":"-"},"content":""},{"lineNumber":56,"author":{"gitId":"-"},"content":"        logic.moveCourseToRecycleBin(courseId);"},{"lineNumber":57,"author":{"gitId":"-"},"content":"        CourseAttributes deletedCourse \u003d logic.getCourse(courseId);"},{"lineNumber":58,"author":{"gitId":"-"},"content":"        assertNotNull(deletedCourse);"},{"lineNumber":59,"author":{"gitId":"-"},"content":"        assertTrue(deletedCourse.isCourseDeleted());"},{"lineNumber":60,"author":{"gitId":"-"},"content":""},{"lineNumber":61,"author":{"gitId":"-"},"content":"        action \u003d getAction(submissionParams);"},{"lineNumber":62,"author":{"gitId":"-"},"content":"        result \u003d getJsonResult(action);"},{"lineNumber":63,"author":{"gitId":"-"},"content":"        message \u003d (MessageOutput) result.getOutput();"},{"lineNumber":64,"author":{"gitId":"-"},"content":""},{"lineNumber":65,"author":{"gitId":"-"},"content":"        assertEquals(\"The course \" + courseId + \" has been restored.\", message.getMessage());"},{"lineNumber":66,"author":{"gitId":"-"},"content":"        assertNull(logic.getCourse(instructor1OfCourse1.getCourseId()).getDeletedAt());"},{"lineNumber":67,"author":{"gitId":"-"},"content":""},{"lineNumber":68,"author":{"gitId":"-"},"content":"        ______TS(\"Not enough parameters\");"},{"lineNumber":69,"author":{"gitId":"-"},"content":""},{"lineNumber":70,"author":{"gitId":"-"},"content":"        verifyHttpParameterFailure();"},{"lineNumber":71,"author":{"gitId":"-"},"content":""},{"lineNumber":72,"author":{"gitId":"-"},"content":"        ______TS(\"Non-Existent Course\");"},{"lineNumber":73,"author":{"gitId":"-"},"content":""},{"lineNumber":74,"author":{"gitId":"-"},"content":"        String[] nonExistentCourse \u003d new String[] {"},{"lineNumber":75,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, \"123C\","},{"lineNumber":76,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":77,"author":{"gitId":"-"},"content":"        verifyEntityNotFound(nonExistentCourse);"},{"lineNumber":78,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":79,"author":{"gitId":"-"},"content":""},{"lineNumber":80,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":81,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":82,"author":{"gitId":"-"},"content":"    protected void testAccessControl() throws Exception {"},{"lineNumber":83,"author":{"gitId":"-"},"content":"        String[] submissionParams \u003d new String[] {"},{"lineNumber":84,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, \"idOfTypicalCourse1\","},{"lineNumber":85,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":86,"author":{"gitId":"-"},"content":""},{"lineNumber":87,"author":{"gitId":"-"},"content":"        verifyOnlyInstructorsOfTheSameCourseWithCorrectCoursePrivilegeCanAccess("},{"lineNumber":88,"author":{"gitId":"-"},"content":"                Const.InstructorPermissions.CAN_MODIFY_COURSE, submissionParams);"},{"lineNumber":89,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":90,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"EuniceSim142":3,"-":87}},{"path":"src/test/java/teammates/ui/webapi/UpdateCourseActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":4,"author":{"gitId":"-"},"content":""},{"lineNumber":5,"author":{"gitId":"EuniceSim142"},"content":"import org.testng.annotations.Ignore;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import org.testng.annotations.Test;"},{"lineNumber":7,"author":{"gitId":"-"},"content":""},{"lineNumber":8,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackSessionAttributes;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.InstructorAttributes;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import teammates.common.util.FieldValidator;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import teammates.ui.output.CourseData;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import teammates.ui.request.CourseUpdateRequest;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import teammates.ui.request.InvalidHttpRequestBodyException;"},{"lineNumber":15,"author":{"gitId":"-"},"content":""},{"lineNumber":16,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":17,"author":{"gitId":"-"},"content":" * SUT: {@link UpdateCourseAction}."},{"lineNumber":18,"author":{"gitId":"-"},"content":" */"},{"lineNumber":19,"author":{"gitId":"EuniceSim142"},"content":"@Ignore"},{"lineNumber":20,"author":{"gitId":"-"},"content":"public class UpdateCourseActionTest extends BaseActionTest\u003cUpdateCourseAction\u003e {"},{"lineNumber":21,"author":{"gitId":"-"},"content":""},{"lineNumber":22,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":23,"author":{"gitId":"-"},"content":"    protected String getActionUri() {"},{"lineNumber":24,"author":{"gitId":"-"},"content":"        return Const.ResourceURIs.COURSE;"},{"lineNumber":25,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":26,"author":{"gitId":"-"},"content":""},{"lineNumber":27,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":28,"author":{"gitId":"-"},"content":"    protected String getRequestMethod() {"},{"lineNumber":29,"author":{"gitId":"-"},"content":"        return PUT;"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":31,"author":{"gitId":"-"},"content":""},{"lineNumber":32,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":33,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":34,"author":{"gitId":"-"},"content":"    public void testExecute() throws Exception {"},{"lineNumber":35,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":36,"author":{"gitId":"-"},"content":"        String instructorId \u003d instructor.getGoogleId();"},{"lineNumber":37,"author":{"gitId":"-"},"content":"        String courseId \u003d instructor.getCourseId();"},{"lineNumber":38,"author":{"gitId":"-"},"content":"        String courseName \u003d logic.getCourse(courseId).getName();"},{"lineNumber":39,"author":{"gitId":"-"},"content":"        String courseTimeZone \u003d \"UTC\";"},{"lineNumber":40,"author":{"gitId":"-"},"content":"        String[] submissionParams;"},{"lineNumber":41,"author":{"gitId":"-"},"content":""},{"lineNumber":42,"author":{"gitId":"-"},"content":"        loginAsInstructor(instructorId);"},{"lineNumber":43,"author":{"gitId":"-"},"content":""},{"lineNumber":44,"author":{"gitId":"-"},"content":"        ______TS(\"Not enough parameters\");"},{"lineNumber":45,"author":{"gitId":"-"},"content":""},{"lineNumber":46,"author":{"gitId":"-"},"content":"        submissionParams \u003d new String[] {"},{"lineNumber":47,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, courseId,"},{"lineNumber":48,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":49,"author":{"gitId":"-"},"content":""},{"lineNumber":50,"author":{"gitId":"-"},"content":"        CourseUpdateRequest courseUpdateRequest \u003d new CourseUpdateRequest();"},{"lineNumber":51,"author":{"gitId":"-"},"content":"        courseUpdateRequest.setCourseName(courseName);"},{"lineNumber":52,"author":{"gitId":"-"},"content":"        courseUpdateRequest.setTimeZone(courseTimeZone);"},{"lineNumber":53,"author":{"gitId":"-"},"content":""},{"lineNumber":54,"author":{"gitId":"-"},"content":"        verifyHttpRequestBodyFailure(null);"},{"lineNumber":55,"author":{"gitId":"-"},"content":"        verifyHttpParameterFailure(courseUpdateRequest);"},{"lineNumber":56,"author":{"gitId":"-"},"content":""},{"lineNumber":57,"author":{"gitId":"-"},"content":"        ______TS(\"Typical case: edit course name with same name\");"},{"lineNumber":58,"author":{"gitId":"-"},"content":""},{"lineNumber":59,"author":{"gitId":"-"},"content":"        // verify time zone will be changed"},{"lineNumber":60,"author":{"gitId":"-"},"content":"        String oldCourseTimeZone \u003d typicalBundle.courses.get(\"typicalCourse1\").getTimeZone();"},{"lineNumber":61,"author":{"gitId":"-"},"content":"        assertNotEquals(courseTimeZone, oldCourseTimeZone);"},{"lineNumber":62,"author":{"gitId":"-"},"content":"        verifySessionsInCourseHaveTimeZone(courseId, oldCourseTimeZone);"},{"lineNumber":63,"author":{"gitId":"-"},"content":""},{"lineNumber":64,"author":{"gitId":"-"},"content":"        UpdateCourseAction updateCourseAction \u003d getAction(courseUpdateRequest, submissionParams);"},{"lineNumber":65,"author":{"gitId":"-"},"content":"        JsonResult result \u003d getJsonResult(updateCourseAction);"},{"lineNumber":66,"author":{"gitId":"-"},"content":""},{"lineNumber":67,"author":{"gitId":"-"},"content":"        CourseData courseData \u003d (CourseData) result.getOutput();"},{"lineNumber":68,"author":{"gitId":"-"},"content":"        verifyCourseData(courseData, courseId, courseName, courseTimeZone);"},{"lineNumber":69,"author":{"gitId":"-"},"content":""},{"lineNumber":70,"author":{"gitId":"-"},"content":"        verifySessionsInCourseHaveTimeZone(courseId, courseTimeZone);"},{"lineNumber":71,"author":{"gitId":"-"},"content":""},{"lineNumber":72,"author":{"gitId":"-"},"content":"        ______TS(\"Typical case: edit course name with valid characters\");"},{"lineNumber":73,"author":{"gitId":"-"},"content":""},{"lineNumber":74,"author":{"gitId":"-"},"content":"        String courseNameWithValidCharacters \u003d courseName + \" valid\";"},{"lineNumber":75,"author":{"gitId":"-"},"content":""},{"lineNumber":76,"author":{"gitId":"-"},"content":"        courseUpdateRequest.setCourseName(courseNameWithValidCharacters);"},{"lineNumber":77,"author":{"gitId":"-"},"content":"        courseUpdateRequest.setTimeZone(courseTimeZone);"},{"lineNumber":78,"author":{"gitId":"-"},"content":""},{"lineNumber":79,"author":{"gitId":"-"},"content":"        updateCourseAction \u003d getAction(courseUpdateRequest, submissionParams);"},{"lineNumber":80,"author":{"gitId":"-"},"content":"        result \u003d getJsonResult(updateCourseAction);"},{"lineNumber":81,"author":{"gitId":"-"},"content":""},{"lineNumber":82,"author":{"gitId":"-"},"content":"        courseData \u003d (CourseData) result.getOutput();"},{"lineNumber":83,"author":{"gitId":"-"},"content":"        verifyCourseData(courseData, courseId, courseNameWithValidCharacters, courseTimeZone);"},{"lineNumber":84,"author":{"gitId":"-"},"content":""},{"lineNumber":85,"author":{"gitId":"-"},"content":"        verifySessionsInCourseHaveTimeZone(courseId, courseTimeZone);"},{"lineNumber":86,"author":{"gitId":"-"},"content":"        assertEquals(logic.getCourse(courseId).getName(), courseNameWithValidCharacters);"},{"lineNumber":87,"author":{"gitId":"-"},"content":""},{"lineNumber":88,"author":{"gitId":"-"},"content":"        ______TS(\"Failure case: edit course name with empty string\");"},{"lineNumber":89,"author":{"gitId":"-"},"content":""},{"lineNumber":90,"author":{"gitId":"-"},"content":"        courseName \u003d \"\";"},{"lineNumber":91,"author":{"gitId":"-"},"content":"        courseUpdateRequest.setCourseName(courseName);"},{"lineNumber":92,"author":{"gitId":"-"},"content":"        courseUpdateRequest.setTimeZone(courseTimeZone);"},{"lineNumber":93,"author":{"gitId":"-"},"content":""},{"lineNumber":94,"author":{"gitId":"-"},"content":"        InvalidHttpRequestBodyException ihrbe \u003d verifyHttpRequestBodyFailure(courseUpdateRequest, submissionParams);"},{"lineNumber":95,"author":{"gitId":"-"},"content":"        String statusMessage \u003d getPopulatedEmptyStringErrorMessage("},{"lineNumber":96,"author":{"gitId":"-"},"content":"                FieldValidator.SIZE_CAPPED_NON_EMPTY_STRING_ERROR_MESSAGE_EMPTY_STRING,"},{"lineNumber":97,"author":{"gitId":"-"},"content":"                FieldValidator.COURSE_NAME_FIELD_NAME, FieldValidator.COURSE_NAME_MAX_LENGTH);"},{"lineNumber":98,"author":{"gitId":"-"},"content":"        assertEquals(statusMessage, ihrbe.getMessage());"},{"lineNumber":99,"author":{"gitId":"-"},"content":"        assertNotEquals(logic.getCourse(courseId).getName(), courseName);"},{"lineNumber":100,"author":{"gitId":"-"},"content":""},{"lineNumber":101,"author":{"gitId":"-"},"content":"        ______TS(\"Failure case: edit course name with non-alphanumeric start character\");"},{"lineNumber":102,"author":{"gitId":"-"},"content":""},{"lineNumber":103,"author":{"gitId":"-"},"content":"        courseName \u003d \"@#$@#$\";"},{"lineNumber":104,"author":{"gitId":"-"},"content":"        courseUpdateRequest.setCourseName(courseName);"},{"lineNumber":105,"author":{"gitId":"-"},"content":"        courseUpdateRequest.setTimeZone(courseTimeZone);"},{"lineNumber":106,"author":{"gitId":"-"},"content":""},{"lineNumber":107,"author":{"gitId":"-"},"content":"        ihrbe \u003d verifyHttpRequestBodyFailure(courseUpdateRequest, submissionParams);"},{"lineNumber":108,"author":{"gitId":"-"},"content":"        statusMessage \u003d getPopulatedErrorMessage(FieldValidator.INVALID_NAME_ERROR_MESSAGE,"},{"lineNumber":109,"author":{"gitId":"-"},"content":"                courseName, FieldValidator.COURSE_NAME_FIELD_NAME,"},{"lineNumber":110,"author":{"gitId":"-"},"content":"                FieldValidator.REASON_START_WITH_NON_ALPHANUMERIC_CHAR);"},{"lineNumber":111,"author":{"gitId":"-"},"content":"        assertEquals(statusMessage, ihrbe.getMessage());"},{"lineNumber":112,"author":{"gitId":"-"},"content":"        assertNotEquals(logic.getCourse(courseId).getName(), courseName);"},{"lineNumber":113,"author":{"gitId":"-"},"content":""},{"lineNumber":114,"author":{"gitId":"-"},"content":"        ______TS(\"Failure case: edit course name with name containing | and %\");"},{"lineNumber":115,"author":{"gitId":"-"},"content":""},{"lineNumber":116,"author":{"gitId":"-"},"content":"        courseName \u003d \"normal|name%\";"},{"lineNumber":117,"author":{"gitId":"-"},"content":"        courseUpdateRequest.setCourseName(courseName);"},{"lineNumber":118,"author":{"gitId":"-"},"content":"        courseUpdateRequest.setTimeZone(courseTimeZone);"},{"lineNumber":119,"author":{"gitId":"-"},"content":""},{"lineNumber":120,"author":{"gitId":"-"},"content":"        ihrbe \u003d verifyHttpRequestBodyFailure(courseUpdateRequest, submissionParams);"},{"lineNumber":121,"author":{"gitId":"-"},"content":"        statusMessage \u003d getPopulatedErrorMessage(FieldValidator.INVALID_NAME_ERROR_MESSAGE,"},{"lineNumber":122,"author":{"gitId":"-"},"content":"                courseName, FieldValidator.COURSE_NAME_FIELD_NAME,"},{"lineNumber":123,"author":{"gitId":"-"},"content":"                FieldValidator.REASON_CONTAINS_INVALID_CHAR);"},{"lineNumber":124,"author":{"gitId":"-"},"content":"        assertEquals(statusMessage, ihrbe.getMessage());"},{"lineNumber":125,"author":{"gitId":"-"},"content":"        assertNotEquals(logic.getCourse(courseId).getName(), courseName);"},{"lineNumber":126,"author":{"gitId":"-"},"content":""},{"lineNumber":127,"author":{"gitId":"-"},"content":"        ______TS(\"Failure case: invalid time zone\");"},{"lineNumber":128,"author":{"gitId":"-"},"content":""},{"lineNumber":129,"author":{"gitId":"-"},"content":"        // verify time zone did not change"},{"lineNumber":130,"author":{"gitId":"-"},"content":"        oldCourseTimeZone \u003d courseTimeZone;"},{"lineNumber":131,"author":{"gitId":"-"},"content":""},{"lineNumber":132,"author":{"gitId":"-"},"content":"        courseName \u003d logic.getCourse(courseId).getName();"},{"lineNumber":133,"author":{"gitId":"-"},"content":"        courseTimeZone \u003d \"InvalidTimeZone\";"},{"lineNumber":134,"author":{"gitId":"-"},"content":"        courseUpdateRequest.setCourseName(courseName);"},{"lineNumber":135,"author":{"gitId":"-"},"content":"        courseUpdateRequest.setTimeZone(courseTimeZone);"},{"lineNumber":136,"author":{"gitId":"-"},"content":""},{"lineNumber":137,"author":{"gitId":"-"},"content":"        assertNotEquals(courseTimeZone, oldCourseTimeZone);"},{"lineNumber":138,"author":{"gitId":"-"},"content":"        verifySessionsInCourseHaveTimeZone(courseId, oldCourseTimeZone);"},{"lineNumber":139,"author":{"gitId":"-"},"content":""},{"lineNumber":140,"author":{"gitId":"-"},"content":"        ihrbe \u003d verifyHttpRequestBodyFailure(courseUpdateRequest, submissionParams);"},{"lineNumber":141,"author":{"gitId":"-"},"content":"        statusMessage \u003d getPopulatedErrorMessage(FieldValidator.TIME_ZONE_ERROR_MESSAGE,"},{"lineNumber":142,"author":{"gitId":"-"},"content":"                courseTimeZone, FieldValidator.TIME_ZONE_FIELD_NAME,"},{"lineNumber":143,"author":{"gitId":"-"},"content":"                FieldValidator.REASON_UNAVAILABLE_AS_CHOICE);"},{"lineNumber":144,"author":{"gitId":"-"},"content":"        assertEquals(statusMessage, ihrbe.getMessage());"},{"lineNumber":145,"author":{"gitId":"-"},"content":"        verifySessionsInCourseHaveTimeZone(courseId, oldCourseTimeZone);"},{"lineNumber":146,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":147,"author":{"gitId":"-"},"content":""},{"lineNumber":148,"author":{"gitId":"-"},"content":"    private void verifySessionsInCourseHaveTimeZone(String courseId, String courseTimeZone) {"},{"lineNumber":149,"author":{"gitId":"-"},"content":"        List\u003cFeedbackSessionAttributes\u003e sessions \u003d logic.getFeedbackSessionsForCourse(courseId);"},{"lineNumber":150,"author":{"gitId":"-"},"content":"        for (FeedbackSessionAttributes session : sessions) {"},{"lineNumber":151,"author":{"gitId":"-"},"content":"            assertEquals(courseTimeZone, session.getTimeZone());"},{"lineNumber":152,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":153,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":154,"author":{"gitId":"-"},"content":""},{"lineNumber":155,"author":{"gitId":"-"},"content":"    private void verifyCourseData(CourseData data, String courseId, String courseName, String timeZone) {"},{"lineNumber":156,"author":{"gitId":"-"},"content":"        assertEquals(data.getCourseId(), courseId);"},{"lineNumber":157,"author":{"gitId":"-"},"content":"        assertEquals(data.getCourseName(), courseName);"},{"lineNumber":158,"author":{"gitId":"-"},"content":"        assertEquals(data.getTimeZone(), timeZone);"},{"lineNumber":159,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":160,"author":{"gitId":"-"},"content":""},{"lineNumber":161,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":162,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":163,"author":{"gitId":"-"},"content":"    protected void testAccessControl() throws Exception {"},{"lineNumber":164,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor \u003d typicalBundle.instructors.get(\"instructor1OfCourse1\");"},{"lineNumber":165,"author":{"gitId":"-"},"content":"        String courseId \u003d instructor.getCourseId();"},{"lineNumber":166,"author":{"gitId":"-"},"content":"        String[] submissionParams \u003d new String[] {"},{"lineNumber":167,"author":{"gitId":"-"},"content":"                Const.ParamsNames.COURSE_ID, courseId,"},{"lineNumber":168,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":169,"author":{"gitId":"-"},"content":""},{"lineNumber":170,"author":{"gitId":"-"},"content":"        verifyOnlyInstructorsOfTheSameCourseWithCorrectCoursePrivilegeCanAccess("},{"lineNumber":171,"author":{"gitId":"-"},"content":"                Const.InstructorPermissions.CAN_MODIFY_COURSE, submissionParams);"},{"lineNumber":172,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":173,"author":{"gitId":"-"},"content":""},{"lineNumber":174,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"EuniceSim142":2,"-":172}},{"path":"src/test/java/teammates/ui/webapi/UpdateNotificationActionTest.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.ui.webapi;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.time.Instant;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.time.temporal.ChronoUnit;"},{"lineNumber":5,"author":{"gitId":"-"},"content":""},{"lineNumber":6,"author":{"gitId":"hhdqirui"},"content":"import org.testng.annotations.Ignore;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import org.testng.annotations.Test;"},{"lineNumber":8,"author":{"gitId":"-"},"content":""},{"lineNumber":9,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.NotificationStyle;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.NotificationTargetUser;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.NotificationAttributes;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import teammates.ui.output.NotificationData;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import teammates.ui.request.InvalidHttpRequestBodyException;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import teammates.ui.request.NotificationUpdateRequest;"},{"lineNumber":16,"author":{"gitId":"-"},"content":""},{"lineNumber":17,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":18,"author":{"gitId":"-"},"content":" * SUT: {@link UpdateNotificationAction}."},{"lineNumber":19,"author":{"gitId":"-"},"content":" */"},{"lineNumber":20,"author":{"gitId":"hhdqirui"},"content":"@Ignore"},{"lineNumber":21,"author":{"gitId":"-"},"content":"public class UpdateNotificationActionTest extends BaseActionTest\u003cUpdateNotificationAction\u003e {"},{"lineNumber":22,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":23,"author":{"gitId":"-"},"content":"    String getActionUri() {"},{"lineNumber":24,"author":{"gitId":"-"},"content":"        return Const.ResourceURIs.NOTIFICATION;"},{"lineNumber":25,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":26,"author":{"gitId":"-"},"content":""},{"lineNumber":27,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":28,"author":{"gitId":"-"},"content":"    String getRequestMethod() {"},{"lineNumber":29,"author":{"gitId":"-"},"content":"        return PUT;"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":31,"author":{"gitId":"-"},"content":""},{"lineNumber":32,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":33,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":34,"author":{"gitId":"-"},"content":"    protected void testExecute() throws Exception {"},{"lineNumber":35,"author":{"gitId":"-"},"content":"        NotificationAttributes testNotificationAttribute \u003d typicalBundle.notifications.get(\"notification1\");"},{"lineNumber":36,"author":{"gitId":"-"},"content":""},{"lineNumber":37,"author":{"gitId":"-"},"content":"        String[] requestParams \u003d new String[] {"},{"lineNumber":38,"author":{"gitId":"-"},"content":"                Const.ParamsNames.NOTIFICATION_ID, testNotificationAttribute.getNotificationId(),"},{"lineNumber":39,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":40,"author":{"gitId":"-"},"content":"        NotificationUpdateRequest req \u003d getTypicalUpdateRequest();"},{"lineNumber":41,"author":{"gitId":"-"},"content":"        NotificationStyle style \u003d req.getStyle();"},{"lineNumber":42,"author":{"gitId":"-"},"content":"        NotificationTargetUser targetUser \u003d req.getTargetUser();"},{"lineNumber":43,"author":{"gitId":"-"},"content":"        String title \u003d req.getTitle();"},{"lineNumber":44,"author":{"gitId":"-"},"content":"        String message \u003d req.getMessage();"},{"lineNumber":45,"author":{"gitId":"-"},"content":"        String invalidTitle \u003d \"\";"},{"lineNumber":46,"author":{"gitId":"-"},"content":"        String invalidNotificationId \u003d \"InvalidNotificationId\";"},{"lineNumber":47,"author":{"gitId":"-"},"content":""},{"lineNumber":48,"author":{"gitId":"-"},"content":"        loginAsAdmin();"},{"lineNumber":49,"author":{"gitId":"-"},"content":""},{"lineNumber":50,"author":{"gitId":"-"},"content":"        ______TS(\"Typical Case: Update notification successfully\");"},{"lineNumber":51,"author":{"gitId":"-"},"content":"        req \u003d getTypicalUpdateRequest();"},{"lineNumber":52,"author":{"gitId":"-"},"content":"        UpdateNotificationAction action \u003d getAction(req, requestParams);"},{"lineNumber":53,"author":{"gitId":"-"},"content":"        NotificationData res \u003d (NotificationData) action.execute().getOutput();"},{"lineNumber":54,"author":{"gitId":"-"},"content":""},{"lineNumber":55,"author":{"gitId":"-"},"content":"        NotificationAttributes updatedNotification \u003d logic.getNotification(res.getNotificationId());"},{"lineNumber":56,"author":{"gitId":"-"},"content":""},{"lineNumber":57,"author":{"gitId":"-"},"content":"        // Verify that correctly updated in the DB"},{"lineNumber":58,"author":{"gitId":"-"},"content":"        assertEquals(req.getStartTimestamp(), updatedNotification.getStartTime().toEpochMilli());"},{"lineNumber":59,"author":{"gitId":"-"},"content":"        assertEquals(req.getEndTimestamp(), updatedNotification.getEndTime().toEpochMilli());"},{"lineNumber":60,"author":{"gitId":"-"},"content":"        assertEquals(style, updatedNotification.getStyle());"},{"lineNumber":61,"author":{"gitId":"-"},"content":"        assertEquals(targetUser, updatedNotification.getTargetUser());"},{"lineNumber":62,"author":{"gitId":"-"},"content":"        assertEquals(title, updatedNotification.getTitle());"},{"lineNumber":63,"author":{"gitId":"-"},"content":"        assertEquals(message, updatedNotification.getMessage());"},{"lineNumber":64,"author":{"gitId":"-"},"content":""},{"lineNumber":65,"author":{"gitId":"-"},"content":"        ______TS(\"Parameters cannot be null\");"},{"lineNumber":66,"author":{"gitId":"-"},"content":"        req \u003d getTypicalUpdateRequest();"},{"lineNumber":67,"author":{"gitId":"-"},"content":"        req.setStyle(null);"},{"lineNumber":68,"author":{"gitId":"-"},"content":"        InvalidHttpRequestBodyException ex \u003d verifyHttpRequestBodyFailure(req, requestParams);"},{"lineNumber":69,"author":{"gitId":"-"},"content":"        assertEquals(\"Notification style cannot be null\", ex.getMessage());"},{"lineNumber":70,"author":{"gitId":"-"},"content":""},{"lineNumber":71,"author":{"gitId":"-"},"content":"        req \u003d getTypicalUpdateRequest();"},{"lineNumber":72,"author":{"gitId":"-"},"content":"        req.setTargetUser(null);"},{"lineNumber":73,"author":{"gitId":"-"},"content":"        ex \u003d verifyHttpRequestBodyFailure(req, requestParams);"},{"lineNumber":74,"author":{"gitId":"-"},"content":"        assertEquals(\"Notification target user cannot be null\", ex.getMessage());"},{"lineNumber":75,"author":{"gitId":"-"},"content":""},{"lineNumber":76,"author":{"gitId":"-"},"content":"        req \u003d getTypicalUpdateRequest();"},{"lineNumber":77,"author":{"gitId":"-"},"content":"        req.setTitle(null);"},{"lineNumber":78,"author":{"gitId":"-"},"content":"        ex \u003d verifyHttpRequestBodyFailure(req, requestParams);"},{"lineNumber":79,"author":{"gitId":"-"},"content":"        assertEquals(\"Notification title cannot be null\", ex.getMessage());"},{"lineNumber":80,"author":{"gitId":"-"},"content":""},{"lineNumber":81,"author":{"gitId":"-"},"content":"        req \u003d getTypicalUpdateRequest();"},{"lineNumber":82,"author":{"gitId":"-"},"content":"        req.setMessage(null);"},{"lineNumber":83,"author":{"gitId":"-"},"content":"        ex \u003d verifyHttpRequestBodyFailure(req, requestParams);"},{"lineNumber":84,"author":{"gitId":"-"},"content":"        assertEquals(\"Notification message cannot be null\", ex.getMessage());"},{"lineNumber":85,"author":{"gitId":"-"},"content":""},{"lineNumber":86,"author":{"gitId":"-"},"content":"        ______TS(\"Timestamps should be greater than 0\");"},{"lineNumber":87,"author":{"gitId":"-"},"content":"        req \u003d getTypicalUpdateRequest();"},{"lineNumber":88,"author":{"gitId":"-"},"content":"        req.setStartTimestamp(-1);"},{"lineNumber":89,"author":{"gitId":"-"},"content":"        ex \u003d verifyHttpRequestBodyFailure(req, requestParams);"},{"lineNumber":90,"author":{"gitId":"-"},"content":"        assertEquals(\"Start timestamp should be greater than zero\", ex.getMessage());"},{"lineNumber":91,"author":{"gitId":"-"},"content":""},{"lineNumber":92,"author":{"gitId":"-"},"content":"        req \u003d getTypicalUpdateRequest();"},{"lineNumber":93,"author":{"gitId":"-"},"content":"        req.setEndTimestamp(-1);"},{"lineNumber":94,"author":{"gitId":"-"},"content":"        ex \u003d verifyHttpRequestBodyFailure(req, requestParams);"},{"lineNumber":95,"author":{"gitId":"-"},"content":"        assertEquals(\"End timestamp should be greater than zero\", ex.getMessage());"},{"lineNumber":96,"author":{"gitId":"-"},"content":""},{"lineNumber":97,"author":{"gitId":"-"},"content":"        ______TS(\"Start timestamp should not be after end timestamp\");"},{"lineNumber":98,"author":{"gitId":"-"},"content":"        req \u003d getTypicalUpdateRequest();"},{"lineNumber":99,"author":{"gitId":"-"},"content":"        req.setEndTimestamp(req.getStartTimestamp() - 100);"},{"lineNumber":100,"author":{"gitId":"-"},"content":"        ex \u003d verifyHttpRequestBodyFailure(req, requestParams);"},{"lineNumber":101,"author":{"gitId":"-"},"content":"        assertEquals(\"The time when the notification will expire for this notification \""},{"lineNumber":102,"author":{"gitId":"-"},"content":"                + \"cannot be earlier than the time when the notification will be visible.\","},{"lineNumber":103,"author":{"gitId":"-"},"content":"                ex.getMessage());"},{"lineNumber":104,"author":{"gitId":"-"},"content":""},{"lineNumber":105,"author":{"gitId":"-"},"content":"        ______TS(\"Invalid parameter should throw an error\");"},{"lineNumber":106,"author":{"gitId":"-"},"content":"        req \u003d getTypicalUpdateRequest();"},{"lineNumber":107,"author":{"gitId":"-"},"content":"        req.setTitle(invalidTitle);"},{"lineNumber":108,"author":{"gitId":"-"},"content":"        verifyHttpRequestBodyFailure(req, requestParams);"},{"lineNumber":109,"author":{"gitId":"-"},"content":""},{"lineNumber":110,"author":{"gitId":"-"},"content":"        ______TS(\"Non-existent notification should throw an error\");"},{"lineNumber":111,"author":{"gitId":"-"},"content":"        requestParams \u003d new String[] {"},{"lineNumber":112,"author":{"gitId":"-"},"content":"                Const.ParamsNames.NOTIFICATION_ID, invalidNotificationId,"},{"lineNumber":113,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":114,"author":{"gitId":"-"},"content":"        req \u003d getTypicalUpdateRequest();"},{"lineNumber":115,"author":{"gitId":"-"},"content":"        verifyEntityNotFound(req, requestParams);"},{"lineNumber":116,"author":{"gitId":"-"},"content":""},{"lineNumber":117,"author":{"gitId":"-"},"content":"        ______TS(\"Not enough request parameters should throw an error\");"},{"lineNumber":118,"author":{"gitId":"-"},"content":"        req \u003d getTypicalUpdateRequest();"},{"lineNumber":119,"author":{"gitId":"-"},"content":"        verifyHttpParameterFailure(req);"},{"lineNumber":120,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":121,"author":{"gitId":"-"},"content":""},{"lineNumber":122,"author":{"gitId":"-"},"content":"    @Test"},{"lineNumber":123,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":124,"author":{"gitId":"-"},"content":"    protected void testAccessControl() throws Exception {"},{"lineNumber":125,"author":{"gitId":"-"},"content":"        verifyOnlyAdminCanAccess();"},{"lineNumber":126,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":127,"author":{"gitId":"-"},"content":""},{"lineNumber":128,"author":{"gitId":"-"},"content":"    private NotificationUpdateRequest getTypicalUpdateRequest() {"},{"lineNumber":129,"author":{"gitId":"-"},"content":"        NotificationUpdateRequest req \u003d new NotificationUpdateRequest();"},{"lineNumber":130,"author":{"gitId":"-"},"content":""},{"lineNumber":131,"author":{"gitId":"-"},"content":"        req.setStartTimestamp(Instant.now().toEpochMilli());"},{"lineNumber":132,"author":{"gitId":"-"},"content":"        req.setEndTimestamp(Instant.now().plus(5, ChronoUnit.DAYS).toEpochMilli());"},{"lineNumber":133,"author":{"gitId":"-"},"content":"        req.setStyle(NotificationStyle.INFO);"},{"lineNumber":134,"author":{"gitId":"-"},"content":"        req.setTargetUser(NotificationTargetUser.GENERAL);"},{"lineNumber":135,"author":{"gitId":"-"},"content":"        req.setTitle(\"New notification title\");"},{"lineNumber":136,"author":{"gitId":"-"},"content":"        req.setMessage(\"New notification message\");"},{"lineNumber":137,"author":{"gitId":"-"},"content":""},{"lineNumber":138,"author":{"gitId":"-"},"content":"        return req;"},{"lineNumber":139,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":140,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"hhdqirui":2,"-":138}},{"path":"src/web/app/components/progress-bar/progress-bar.component.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { Component, OnInit } from \u0027@angular/core\u0027;"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import { ProgressBarService } from \u0027../../../services/progress-bar.service\u0027;"},{"lineNumber":3,"author":{"gitId":"-"},"content":""},{"lineNumber":4,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":5,"author":{"gitId":"-"},"content":" * Progress bar used to show download progress."},{"lineNumber":6,"author":{"gitId":"-"},"content":" */"},{"lineNumber":7,"author":{"gitId":"-"},"content":"@Component({"},{"lineNumber":8,"author":{"gitId":"-"},"content":"  selector: \u0027tm-progress-bar\u0027,"},{"lineNumber":9,"author":{"gitId":"-"},"content":"  templateUrl: \u0027./progress-bar.component.html\u0027,"},{"lineNumber":10,"author":{"gitId":"-"},"content":"})"},{"lineNumber":11,"author":{"gitId":"-"},"content":"export class ProgressBarComponent implements OnInit {"},{"lineNumber":12,"author":{"gitId":"-"},"content":""},{"lineNumber":13,"author":{"gitId":"domlimm"},"content":"  progressPercentage: number \u003d 10;"},{"lineNumber":14,"author":{"gitId":"-"},"content":""},{"lineNumber":15,"author":{"gitId":"-"},"content":"  constructor(private progressBarService: ProgressBarService) { }"},{"lineNumber":16,"author":{"gitId":"-"},"content":""},{"lineNumber":17,"author":{"gitId":"-"},"content":"  ngOnInit(): void {"},{"lineNumber":18,"author":{"gitId":"-"},"content":"    this.getProgress();"},{"lineNumber":19,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":20,"author":{"gitId":"-"},"content":""},{"lineNumber":21,"author":{"gitId":"-"},"content":"  getProgress(): void {"},{"lineNumber":22,"author":{"gitId":"-"},"content":"    this.progressBarService.progressPercentage.subscribe((progressPercentage: number) \u003d\u003e {"},{"lineNumber":23,"author":{"gitId":"-"},"content":"      this.progressPercentage \u003d progressPercentage;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":25,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":26,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"domlimm":1,"-":25}},{"path":"src/web/app/components/question-edit-form/question-edit-form.component.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { Component, EventEmitter, Input, Output } from \u0027@angular/core\u0027;"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import { NgbModalRef } from \u0027@ng-bootstrap/ng-bootstrap\u0027;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"import { CommonVisibilitySetting, FeedbackQuestionsService } from \u0027../../../services/feedback-questions.service\u0027;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import { SimpleModalService } from \u0027../../../services/simple-modal.service\u0027;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import { VisibilityStateMachine } from \u0027../../../services/visibility-state-machine\u0027;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":7,"author":{"gitId":"-"},"content":"  FeedbackParticipantType,"},{"lineNumber":8,"author":{"gitId":"-"},"content":"  FeedbackQuestionType,"},{"lineNumber":9,"author":{"gitId":"-"},"content":"  FeedbackTextQuestionDetails,"},{"lineNumber":10,"author":{"gitId":"-"},"content":"  FeedbackVisibilityType,"},{"lineNumber":11,"author":{"gitId":"-"},"content":"  NumberOfEntitiesToGiveFeedbackToSetting,"},{"lineNumber":12,"author":{"gitId":"-"},"content":"} from \u0027../../../types/api-output\u0027;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import { VisibilityControl } from \u0027../../../types/visibility-control\u0027;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import { SimpleModalType } from \u0027../simple-modal/simple-modal-type\u0027;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import { collapseAnim } from \u0027../teammates-common/collapse-anim\u0027;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"import { QuestionEditFormMode, QuestionEditFormModel } from \u0027./question-edit-form-model\u0027;"},{"lineNumber":17,"author":{"gitId":"-"},"content":""},{"lineNumber":18,"author":{"gitId":"-"},"content":"const FEEDBACK_PATH_PROPERTIES: Set\u003cstring\u003e \u003d new Set\u003cstring\u003e(["},{"lineNumber":19,"author":{"gitId":"-"},"content":"  \u0027giverType\u0027,"},{"lineNumber":20,"author":{"gitId":"-"},"content":"  \u0027recipientType\u0027,"},{"lineNumber":21,"author":{"gitId":"-"},"content":"  \u0027isUsingOtherFeedbackPath\u0027,"},{"lineNumber":22,"author":{"gitId":"-"},"content":"  \u0027numberOfEntitiesToGiveFeedbackToSetting\u0027,"},{"lineNumber":23,"author":{"gitId":"-"},"content":"  \u0027customNumberOfEntitiesToGiveFeedbackTo\u0027,"},{"lineNumber":24,"author":{"gitId":"-"},"content":"]);"},{"lineNumber":25,"author":{"gitId":"-"},"content":"const VISIBILITY_PROPERTIES: Set\u003cstring\u003e \u003d new Set\u003cstring\u003e(["},{"lineNumber":26,"author":{"gitId":"-"},"content":"  \u0027isUsingOtherVisibilitySetting\u0027,"},{"lineNumber":27,"author":{"gitId":"-"},"content":"  \u0027showResponsesTo\u0027,"},{"lineNumber":28,"author":{"gitId":"-"},"content":"  \u0027showGiverNameTo\u0027,"},{"lineNumber":29,"author":{"gitId":"-"},"content":"  \u0027showRecipientNameTo\u0027,"},{"lineNumber":30,"author":{"gitId":"-"},"content":"  \u0027commonVisibilitySettingName\u0027,"},{"lineNumber":31,"author":{"gitId":"-"},"content":"]);"},{"lineNumber":32,"author":{"gitId":"-"},"content":"const QUESTION_DETAIL_PROPERTIES: Set\u003cstring\u003e \u003d new Set\u003cstring\u003e(["},{"lineNumber":33,"author":{"gitId":"-"},"content":"  \u0027questionBrief\u0027,"},{"lineNumber":34,"author":{"gitId":"-"},"content":"  \u0027questionDescription\u0027,"},{"lineNumber":35,"author":{"gitId":"-"},"content":"  \u0027questionDetails\u0027,"},{"lineNumber":36,"author":{"gitId":"-"},"content":"  \u0027questionNumber\u0027,"},{"lineNumber":37,"author":{"gitId":"-"},"content":"]);"},{"lineNumber":38,"author":{"gitId":"-"},"content":""},{"lineNumber":39,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":40,"author":{"gitId":"-"},"content":" * The question edit form component."},{"lineNumber":41,"author":{"gitId":"-"},"content":" */"},{"lineNumber":42,"author":{"gitId":"-"},"content":"@Component({"},{"lineNumber":43,"author":{"gitId":"-"},"content":"  selector: \u0027tm-question-edit-form\u0027,"},{"lineNumber":44,"author":{"gitId":"-"},"content":"  templateUrl: \u0027./question-edit-form.component.html\u0027,"},{"lineNumber":45,"author":{"gitId":"-"},"content":"  styleUrls: [\u0027./question-edit-form.component.scss\u0027],"},{"lineNumber":46,"author":{"gitId":"-"},"content":"  animations: [collapseAnim],"},{"lineNumber":47,"author":{"gitId":"-"},"content":"})"},{"lineNumber":48,"author":{"gitId":"-"},"content":"export class QuestionEditFormComponent {"},{"lineNumber":49,"author":{"gitId":"-"},"content":""},{"lineNumber":50,"author":{"gitId":"-"},"content":"  // enum"},{"lineNumber":51,"author":{"gitId":"-"},"content":"  FeedbackQuestionType: typeof FeedbackQuestionType \u003d FeedbackQuestionType;"},{"lineNumber":52,"author":{"gitId":"-"},"content":"  QuestionEditFormMode: typeof QuestionEditFormMode \u003d QuestionEditFormMode;"},{"lineNumber":53,"author":{"gitId":"-"},"content":"  FeedbackParticipantType: typeof FeedbackParticipantType \u003d FeedbackParticipantType;"},{"lineNumber":54,"author":{"gitId":"-"},"content":"  NumberOfEntitiesToGiveFeedbackToSetting: typeof NumberOfEntitiesToGiveFeedbackToSetting \u003d"},{"lineNumber":55,"author":{"gitId":"-"},"content":"      NumberOfEntitiesToGiveFeedbackToSetting;"},{"lineNumber":56,"author":{"gitId":"-"},"content":"  VisibilityControl: typeof VisibilityControl \u003d VisibilityControl;"},{"lineNumber":57,"author":{"gitId":"-"},"content":"  FeedbackVisibilityType: typeof FeedbackVisibilityType \u003d FeedbackVisibilityType;"},{"lineNumber":58,"author":{"gitId":"-"},"content":""},{"lineNumber":59,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":60,"author":{"gitId":"-"},"content":"  set formModel(model: QuestionEditFormModel) {"},{"lineNumber":61,"author":{"gitId":"-"},"content":"    this.model \u003d model;"},{"lineNumber":62,"author":{"gitId":"-"},"content":""},{"lineNumber":63,"author":{"gitId":"-"},"content":"    this.commonFeedbackPaths \u003d this.feedbackQuestionsService.getCommonFeedbackPaths(model.questionType);"},{"lineNumber":64,"author":{"gitId":"-"},"content":"    this.allowedFeedbackPaths \u003d this.feedbackQuestionsService.getAllowedFeedbackPaths(model.questionType);"},{"lineNumber":65,"author":{"gitId":"-"},"content":"    this.visibilityStateMachine \u003d"},{"lineNumber":66,"author":{"gitId":"-"},"content":"        this.feedbackQuestionsService.getNewVisibilityStateMachine(model.giverType, model.recipientType);"},{"lineNumber":67,"author":{"gitId":"-"},"content":"    this.commonFeedbackVisibilitySettings \u003d"},{"lineNumber":68,"author":{"gitId":"-"},"content":"        this.feedbackQuestionsService.getCommonFeedbackVisibilitySettings("},{"lineNumber":69,"author":{"gitId":"-"},"content":"            this.visibilityStateMachine, model.questionType);"},{"lineNumber":70,"author":{"gitId":"-"},"content":""},{"lineNumber":71,"author":{"gitId":"-"},"content":"    const visibilitySetting: { [TKey in VisibilityControl]: FeedbackVisibilityType[] } \u003d {"},{"lineNumber":72,"author":{"gitId":"-"},"content":"      SHOW_RESPONSE: model.showResponsesTo,"},{"lineNumber":73,"author":{"gitId":"-"},"content":"      SHOW_GIVER_NAME: model.showGiverNameTo,"},{"lineNumber":74,"author":{"gitId":"-"},"content":"      SHOW_RECIPIENT_NAME: model.showRecipientNameTo,"},{"lineNumber":75,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":76,"author":{"gitId":"-"},"content":"    this.visibilityStateMachine.applyVisibilitySettings(visibilitySetting);"},{"lineNumber":77,"author":{"gitId":"-"},"content":""},{"lineNumber":78,"author":{"gitId":"-"},"content":"    if (!model.isUsingOtherFeedbackPath) {"},{"lineNumber":79,"author":{"gitId":"-"},"content":"      // find if the feedback path is in the common feedback paths"},{"lineNumber":80,"author":{"gitId":"-"},"content":"      this.model.isUsingOtherFeedbackPath \u003d true;"},{"lineNumber":81,"author":{"gitId":"-"},"content":"      if (this.commonFeedbackPaths.has(model.giverType)"},{"lineNumber":82,"author":{"gitId":"-"},"content":"          // eslint-disable-next-line @typescript-eslint/no-non-null-assertion"},{"lineNumber":83,"author":{"gitId":"-"},"content":"          \u0026\u0026 this.commonFeedbackPaths.get(model.giverType)!.includes(model.recipientType)) {"},{"lineNumber":84,"author":{"gitId":"-"},"content":"        this.model.isUsingOtherFeedbackPath \u003d false;"},{"lineNumber":85,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":86,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":87,"author":{"gitId":"-"},"content":"    if (!model.commonVisibilitySettingName \u0026\u0026 !model.isUsingOtherVisibilitySetting) {"},{"lineNumber":88,"author":{"gitId":"-"},"content":"      // find if the visibility settings is in the common visibility settings"},{"lineNumber":89,"author":{"gitId":"-"},"content":"      this.model.isUsingOtherVisibilitySetting \u003d true;"},{"lineNumber":90,"author":{"gitId":"-"},"content":"      for (const commonVisibilityOption of this.commonFeedbackVisibilitySettings) {"},{"lineNumber":91,"author":{"gitId":"-"},"content":"        if (this.isSameSet(visibilitySetting.SHOW_RESPONSE, commonVisibilityOption.visibilitySettings.SHOW_RESPONSE)"},{"lineNumber":92,"author":{"gitId":"-"},"content":"            \u0026\u0026 this.isSameSet(visibilitySetting.SHOW_GIVER_NAME,"},{"lineNumber":93,"author":{"gitId":"-"},"content":"                commonVisibilityOption.visibilitySettings.SHOW_GIVER_NAME)"},{"lineNumber":94,"author":{"gitId":"-"},"content":"            \u0026\u0026 this.isSameSet(visibilitySetting.SHOW_RECIPIENT_NAME,"},{"lineNumber":95,"author":{"gitId":"-"},"content":"                commonVisibilityOption.visibilitySettings.SHOW_RECIPIENT_NAME)) {"},{"lineNumber":96,"author":{"gitId":"-"},"content":"          this.model.commonVisibilitySettingName \u003d commonVisibilityOption.name;"},{"lineNumber":97,"author":{"gitId":"-"},"content":"          this.model.isUsingOtherVisibilitySetting \u003d false;"},{"lineNumber":98,"author":{"gitId":"-"},"content":"          break;"},{"lineNumber":99,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":100,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":101,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":102,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":103,"author":{"gitId":"-"},"content":""},{"lineNumber":104,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":105,"author":{"gitId":"-"},"content":"   * Returns whether setting the custom feedback visibility is allowed."},{"lineNumber":106,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":107,"author":{"gitId":"-"},"content":"  get isCustomFeedbackVisibilitySettingAllowed(): boolean {"},{"lineNumber":108,"author":{"gitId":"-"},"content":"    return this.feedbackQuestionsService.isCustomFeedbackVisibilitySettingAllowed(this.model.questionType);"},{"lineNumber":109,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":110,"author":{"gitId":"-"},"content":""},{"lineNumber":111,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":112,"author":{"gitId":"-"},"content":"  numOfQuestions: number \u003d 0;"},{"lineNumber":113,"author":{"gitId":"-"},"content":""},{"lineNumber":114,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":115,"author":{"gitId":"-"},"content":"  formMode: QuestionEditFormMode \u003d QuestionEditFormMode.EDIT;"},{"lineNumber":116,"author":{"gitId":"-"},"content":""},{"lineNumber":117,"author":{"gitId":"-"},"content":"  // if true, the question edit form is used for displaying of the question edit form only"},{"lineNumber":118,"author":{"gitId":"-"},"content":"  // no editing function will be available; the edit button will be hidden"},{"lineNumber":119,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":120,"author":{"gitId":"-"},"content":"  isDisplayOnly: boolean \u003d false;"},{"lineNumber":121,"author":{"gitId":"-"},"content":""},{"lineNumber":122,"author":{"gitId":"cedricongjh"},"content":"  @Input()"},{"lineNumber":123,"author":{"gitId":"cedricongjh"},"content":"  isQuestionPublished: boolean \u003d false;"},{"lineNumber":124,"author":{"gitId":"cedricongjh"},"content":""},{"lineNumber":125,"author":{"gitId":"-"},"content":"  model: QuestionEditFormModel \u003d {"},{"lineNumber":126,"author":{"gitId":"-"},"content":"    feedbackQuestionId: \u0027\u0027,"},{"lineNumber":127,"author":{"gitId":"-"},"content":""},{"lineNumber":128,"author":{"gitId":"-"},"content":"    questionNumber: 0,"},{"lineNumber":129,"author":{"gitId":"-"},"content":"    questionBrief: \u0027\u0027,"},{"lineNumber":130,"author":{"gitId":"-"},"content":"    questionDescription: \u0027\u0027,"},{"lineNumber":131,"author":{"gitId":"-"},"content":""},{"lineNumber":132,"author":{"gitId":"-"},"content":"    isQuestionHasResponses: false,"},{"lineNumber":133,"author":{"gitId":"-"},"content":""},{"lineNumber":134,"author":{"gitId":"-"},"content":"    questionType: FeedbackQuestionType.TEXT,"},{"lineNumber":135,"author":{"gitId":"-"},"content":"    questionDetails: {"},{"lineNumber":136,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.TEXT,"},{"lineNumber":137,"author":{"gitId":"-"},"content":"      questionText: \u0027\u0027,"},{"lineNumber":138,"author":{"gitId":"-"},"content":"    } as FeedbackTextQuestionDetails,"},{"lineNumber":139,"author":{"gitId":"-"},"content":""},{"lineNumber":140,"author":{"gitId":"-"},"content":"    giverType: FeedbackParticipantType.STUDENTS,"},{"lineNumber":141,"author":{"gitId":"-"},"content":"    recipientType: FeedbackParticipantType.STUDENTS_EXCLUDING_SELF,"},{"lineNumber":142,"author":{"gitId":"-"},"content":""},{"lineNumber":143,"author":{"gitId":"-"},"content":"    numberOfEntitiesToGiveFeedbackToSetting: NumberOfEntitiesToGiveFeedbackToSetting.UNLIMITED,"},{"lineNumber":144,"author":{"gitId":"-"},"content":"    customNumberOfEntitiesToGiveFeedbackTo: 1,"},{"lineNumber":145,"author":{"gitId":"-"},"content":""},{"lineNumber":146,"author":{"gitId":"-"},"content":"    showResponsesTo: [],"},{"lineNumber":147,"author":{"gitId":"-"},"content":"    showGiverNameTo: [],"},{"lineNumber":148,"author":{"gitId":"-"},"content":"    showRecipientNameTo: [],"},{"lineNumber":149,"author":{"gitId":"-"},"content":""},{"lineNumber":150,"author":{"gitId":"-"},"content":"    commonVisibilitySettingName: \u0027\u0027,"},{"lineNumber":151,"author":{"gitId":"-"},"content":""},{"lineNumber":152,"author":{"gitId":"-"},"content":"    isUsingOtherFeedbackPath: false,"},{"lineNumber":153,"author":{"gitId":"-"},"content":"    isUsingOtherVisibilitySetting: false,"},{"lineNumber":154,"author":{"gitId":"-"},"content":"    isDeleting: false,"},{"lineNumber":155,"author":{"gitId":"-"},"content":"    isDuplicating: false,"},{"lineNumber":156,"author":{"gitId":"-"},"content":"    isEditable: false,"},{"lineNumber":157,"author":{"gitId":"-"},"content":"    isSaving: false,"},{"lineNumber":158,"author":{"gitId":"-"},"content":"    isCollapsed: false,"},{"lineNumber":159,"author":{"gitId":"-"},"content":"    isVisibilityChanged: false,"},{"lineNumber":160,"author":{"gitId":"-"},"content":"    isFeedbackPathChanged: false,"},{"lineNumber":161,"author":{"gitId":"-"},"content":"    isQuestionDetailsChanged: false,"},{"lineNumber":162,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":163,"author":{"gitId":"-"},"content":""},{"lineNumber":164,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":165,"author":{"gitId":"-"},"content":"  formModelChange: EventEmitter\u003cQuestionEditFormModel\u003e \u003d new EventEmitter();"},{"lineNumber":166,"author":{"gitId":"-"},"content":""},{"lineNumber":167,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":168,"author":{"gitId":"-"},"content":"  saveExistingQuestionEvent: EventEmitter\u003cvoid\u003e \u003d new EventEmitter();"},{"lineNumber":169,"author":{"gitId":"-"},"content":""},{"lineNumber":170,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":171,"author":{"gitId":"-"},"content":"  deleteCurrentQuestionEvent: EventEmitter\u003cvoid\u003e \u003d new EventEmitter();"},{"lineNumber":172,"author":{"gitId":"-"},"content":""},{"lineNumber":173,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":174,"author":{"gitId":"-"},"content":"  duplicateCurrentQuestionEvent: EventEmitter\u003cvoid\u003e \u003d new EventEmitter();"},{"lineNumber":175,"author":{"gitId":"-"},"content":""},{"lineNumber":176,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":177,"author":{"gitId":"-"},"content":"  discardExistingQuestionChangesEvent: EventEmitter\u003cvoid\u003e \u003d new EventEmitter();"},{"lineNumber":178,"author":{"gitId":"-"},"content":""},{"lineNumber":179,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":180,"author":{"gitId":"-"},"content":"  discardNewQuestionEvent: EventEmitter\u003cvoid\u003e \u003d new EventEmitter();"},{"lineNumber":181,"author":{"gitId":"-"},"content":""},{"lineNumber":182,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":183,"author":{"gitId":"-"},"content":"  createNewQuestionEvent: EventEmitter\u003cvoid\u003e \u003d new EventEmitter();"},{"lineNumber":184,"author":{"gitId":"-"},"content":""},{"lineNumber":185,"author":{"gitId":"-"},"content":"  commonFeedbackPaths: Map\u003cFeedbackParticipantType, FeedbackParticipantType[]\u003e \u003d new Map();"},{"lineNumber":186,"author":{"gitId":"-"},"content":""},{"lineNumber":187,"author":{"gitId":"-"},"content":"  allowedFeedbackPaths: Map\u003cFeedbackParticipantType, FeedbackParticipantType[]\u003e \u003d new Map();"},{"lineNumber":188,"author":{"gitId":"-"},"content":""},{"lineNumber":189,"author":{"gitId":"-"},"content":"  commonFeedbackVisibilitySettings: CommonVisibilitySetting[] \u003d [];"},{"lineNumber":190,"author":{"gitId":"-"},"content":""},{"lineNumber":191,"author":{"gitId":"-"},"content":"  visibilityStateMachine: VisibilityStateMachine;"},{"lineNumber":192,"author":{"gitId":"-"},"content":""},{"lineNumber":193,"author":{"gitId":"-"},"content":"  constructor(private feedbackQuestionsService: FeedbackQuestionsService,"},{"lineNumber":194,"author":{"gitId":"-"},"content":"              private simpleModalService: SimpleModalService) {"},{"lineNumber":195,"author":{"gitId":"-"},"content":"    this.visibilityStateMachine \u003d"},{"lineNumber":196,"author":{"gitId":"-"},"content":"        this.feedbackQuestionsService.getNewVisibilityStateMachine("},{"lineNumber":197,"author":{"gitId":"-"},"content":"            this.model.giverType, this.model.recipientType);"},{"lineNumber":198,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":199,"author":{"gitId":"-"},"content":""},{"lineNumber":200,"author":{"gitId":"-"},"content":"  private isSameSet(setA: FeedbackVisibilityType[], setB: FeedbackVisibilityType[]): boolean {"},{"lineNumber":201,"author":{"gitId":"-"},"content":"    return setA.length \u003d\u003d\u003d setB.length \u0026\u0026 setA.every((ele: FeedbackVisibilityType) \u003d\u003e setB.includes(ele));"},{"lineNumber":202,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":203,"author":{"gitId":"-"},"content":""},{"lineNumber":204,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":205,"author":{"gitId":"-"},"content":"   * Triggers the change of the model for the form."},{"lineNumber":206,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":207,"author":{"gitId":"-"},"content":"  triggerModelChange(field: keyof QuestionEditFormModel,"},{"lineNumber":208,"author":{"gitId":"-"},"content":"                     data: QuestionEditFormModel[keyof QuestionEditFormModel]): void {"},{"lineNumber":209,"author":{"gitId":"-"},"content":"    this.formModelChange.emit({"},{"lineNumber":210,"author":{"gitId":"-"},"content":"      ...this.model,"},{"lineNumber":211,"author":{"gitId":"-"},"content":"      [field]: data,"},{"lineNumber":212,"author":{"gitId":"-"},"content":"      ...(!this.model.isVisibilityChanged \u0026\u0026 VISIBILITY_PROPERTIES.has(field)"},{"lineNumber":213,"author":{"gitId":"-"},"content":"        \u0026\u0026 { isVisibilityChanged: true }),"},{"lineNumber":214,"author":{"gitId":"-"},"content":"      ...(!this.model.isFeedbackPathChanged \u0026\u0026 FEEDBACK_PATH_PROPERTIES.has(field)"},{"lineNumber":215,"author":{"gitId":"-"},"content":"        \u0026\u0026 { isFeedbackPathChanged: true }),"},{"lineNumber":216,"author":{"gitId":"-"},"content":"      ...(!this.model.isQuestionDetailsChanged \u0026\u0026 QUESTION_DETAIL_PROPERTIES.has(field)"},{"lineNumber":217,"author":{"gitId":"-"},"content":"        \u0026\u0026 { isQuestionDetailsChanged: true }),"},{"lineNumber":218,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":219,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":220,"author":{"gitId":"-"},"content":""},{"lineNumber":221,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":222,"author":{"gitId":"-"},"content":"   * Triggers the change of the model for the form."},{"lineNumber":223,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":224,"author":{"gitId":"-"},"content":"  triggerModelChangeBatch(obj: Partial\u003cQuestionEditFormModel\u003e): void {"},{"lineNumber":225,"author":{"gitId":"-"},"content":"    this.formModelChange.emit({"},{"lineNumber":226,"author":{"gitId":"-"},"content":"      ...this.model,"},{"lineNumber":227,"author":{"gitId":"-"},"content":"      ...obj,"},{"lineNumber":228,"author":{"gitId":"-"},"content":"      ...(!this.model.isVisibilityChanged"},{"lineNumber":229,"author":{"gitId":"-"},"content":"          \u0026\u0026 Object.keys(obj).some((key: string) \u003d\u003e VISIBILITY_PROPERTIES.has(key))"},{"lineNumber":230,"author":{"gitId":"-"},"content":"          \u0026\u0026 { isVisibilityChanged: true }),"},{"lineNumber":231,"author":{"gitId":"-"},"content":"      ...(!this.model.isFeedbackPathChanged"},{"lineNumber":232,"author":{"gitId":"-"},"content":"          \u0026\u0026 Object.keys(obj).some((key: string) \u003d\u003e FEEDBACK_PATH_PROPERTIES.has(key))"},{"lineNumber":233,"author":{"gitId":"-"},"content":"          \u0026\u0026 { isFeedbackPathChanged: true }),"},{"lineNumber":234,"author":{"gitId":"-"},"content":"      ...(!this.model.isQuestionDetailsChanged"},{"lineNumber":235,"author":{"gitId":"-"},"content":"          \u0026\u0026 Object.keys(obj).some((key: string) \u003d\u003e QUESTION_DETAIL_PROPERTIES.has(key))"},{"lineNumber":236,"author":{"gitId":"-"},"content":"          \u0026\u0026 { isQuestionDetailsChanged: true }),"},{"lineNumber":237,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":238,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":239,"author":{"gitId":"-"},"content":""},{"lineNumber":240,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":241,"author":{"gitId":"-"},"content":"   * Helper methods to create a range."},{"lineNumber":242,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":243,"author":{"gitId":"-"},"content":"  range(num: number): number[] {"},{"lineNumber":244,"author":{"gitId":"-"},"content":"    const ranges: number[] \u003d [];"},{"lineNumber":245,"author":{"gitId":"-"},"content":"    for (let i: number \u003d 0; i \u003c num; i +\u003d 1) {"},{"lineNumber":246,"author":{"gitId":"-"},"content":"      ranges.push(i);"},{"lineNumber":247,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":248,"author":{"gitId":"-"},"content":"    return ranges;"},{"lineNumber":249,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":250,"author":{"gitId":"-"},"content":""},{"lineNumber":251,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":252,"author":{"gitId":"-"},"content":"   * Handle event to discard changes users made."},{"lineNumber":253,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":254,"author":{"gitId":"-"},"content":"  discardChangesHandler(isNewQuestion: boolean): void {"},{"lineNumber":255,"author":{"gitId":"-"},"content":"    if (!this.model.isVisibilityChanged"},{"lineNumber":256,"author":{"gitId":"-"},"content":"      \u0026\u0026 !this.model.isFeedbackPathChanged"},{"lineNumber":257,"author":{"gitId":"-"},"content":"      \u0026\u0026 !this.model.isQuestionDetailsChanged) {"},{"lineNumber":258,"author":{"gitId":"-"},"content":"      this.discardChanges();"},{"lineNumber":259,"author":{"gitId":"-"},"content":"      return;"},{"lineNumber":260,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":261,"author":{"gitId":"-"},"content":"    const modalRef: NgbModalRef \u003d this.simpleModalService.openConfirmationModal("},{"lineNumber":262,"author":{"gitId":"-"},"content":"        `Discard unsaved ${isNewQuestion ? \u0027question\u0027 : \u0027edits\u0027}?`, SimpleModalType.WARNING,"},{"lineNumber":263,"author":{"gitId":"-"},"content":"        \u0027Warning: Any unsaved changes will be lost\u0027,"},{"lineNumber":264,"author":{"gitId":"-"},"content":"        { cancelMessage: \u0027No, go back to editing\u0027 });"},{"lineNumber":265,"author":{"gitId":"-"},"content":"    modalRef.result.then(() \u003d\u003e {"},{"lineNumber":266,"author":{"gitId":"-"},"content":"      this.discardChanges();"},{"lineNumber":267,"author":{"gitId":"-"},"content":"    }, () \u003d\u003e {});"},{"lineNumber":268,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":269,"author":{"gitId":"-"},"content":""},{"lineNumber":270,"author":{"gitId":"-"},"content":"  private discardChanges(): void {"},{"lineNumber":271,"author":{"gitId":"-"},"content":"    if (this.formMode \u003d\u003d\u003d QuestionEditFormMode.EDIT) {"},{"lineNumber":272,"author":{"gitId":"-"},"content":"      this.discardExistingQuestionChangesEvent.emit();"},{"lineNumber":273,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":274,"author":{"gitId":"-"},"content":"    if (this.formMode \u003d\u003d\u003d QuestionEditFormMode.ADD) {"},{"lineNumber":275,"author":{"gitId":"-"},"content":"      this.discardNewQuestionEvent.emit();"},{"lineNumber":276,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":277,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":278,"author":{"gitId":"-"},"content":""},{"lineNumber":279,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":280,"author":{"gitId":"-"},"content":"   * Saves the question."},{"lineNumber":281,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":282,"author":{"gitId":"-"},"content":"  saveQuestionHandler(): void {"},{"lineNumber":283,"author":{"gitId":"-"},"content":"    if (this.formMode \u003d\u003d\u003d QuestionEditFormMode.EDIT) {"},{"lineNumber":284,"author":{"gitId":"-"},"content":"      const doChangesNeedWarning: boolean \u003d this.model.isQuestionDetailsChanged"},{"lineNumber":285,"author":{"gitId":"-"},"content":"        || this.model.isVisibilityChanged"},{"lineNumber":286,"author":{"gitId":"-"},"content":"        || this.model.isFeedbackPathChanged;"},{"lineNumber":287,"author":{"gitId":"cedricongjh"},"content":"      if (!this.isQuestionPublished \u0026\u0026 (!this.model.isQuestionHasResponses || !doChangesNeedWarning)) {"},{"lineNumber":288,"author":{"gitId":"-"},"content":"        this.saveExistingQuestionEvent.emit();"},{"lineNumber":289,"author":{"gitId":"-"},"content":"      } else if (this.model.isFeedbackPathChanged) {"},{"lineNumber":290,"author":{"gitId":"-"},"content":"        // warn user that editing feedback path will delete all messages"},{"lineNumber":291,"author":{"gitId":"-"},"content":"        const modalContent: string \u003d `"},{"lineNumber":292,"author":{"gitId":"-"},"content":"            \u003cp\u003eYou seem to have changed the feedback path settings of this question. Please note that changing the"},{"lineNumber":293,"author":{"gitId":"-"},"content":"            feedback path will cause \u003cb\u003eall existing responses to be deleted.\u003c/b\u003e Proceed?\u003c/p\u003e"},{"lineNumber":294,"author":{"gitId":"-"},"content":"        `;"},{"lineNumber":295,"author":{"gitId":"-"},"content":"        const modalRef: NgbModalRef \u003d this.simpleModalService.openConfirmationModal("},{"lineNumber":296,"author":{"gitId":"-"},"content":"            \u0027Save the question?\u0027, SimpleModalType.DANGER, modalContent);"},{"lineNumber":297,"author":{"gitId":"-"},"content":"        modalRef.result.then(() \u003d\u003e {"},{"lineNumber":298,"author":{"gitId":"-"},"content":"          this.saveExistingQuestionEvent.emit();"},{"lineNumber":299,"author":{"gitId":"-"},"content":"        }, () \u003d\u003e {});"},{"lineNumber":300,"author":{"gitId":"-"},"content":"      } else if (this.model.isQuestionDetailsChanged) {"},{"lineNumber":301,"author":{"gitId":"-"},"content":"        // alert user that editing question may result in deletion of responses"},{"lineNumber":302,"author":{"gitId":"-"},"content":"        const modalContent: string \u003d `"},{"lineNumber":303,"author":{"gitId":"-"},"content":"            \u003cp\u003eEditing question settings in a way that potentially affects the validity of existing responses \u003cb\u003e may"},{"lineNumber":304,"author":{"gitId":"-"},"content":"            cause all the existing responses for this question to be deleted.\u003c/b\u003e Proceed?\u003c/p\u003e"},{"lineNumber":305,"author":{"gitId":"-"},"content":"        `;"},{"lineNumber":306,"author":{"gitId":"-"},"content":"        const modalRef: NgbModalRef \u003d this.simpleModalService.openConfirmationModal("},{"lineNumber":307,"author":{"gitId":"-"},"content":"            \u0027Save the question?\u0027, SimpleModalType.DANGER, modalContent);"},{"lineNumber":308,"author":{"gitId":"-"},"content":"        modalRef.result.then(() \u003d\u003e {"},{"lineNumber":309,"author":{"gitId":"-"},"content":"          this.saveExistingQuestionEvent.emit();"},{"lineNumber":310,"author":{"gitId":"-"},"content":"        }, () \u003d\u003e {});"},{"lineNumber":311,"author":{"gitId":"-"},"content":"      } else if (this.model.isVisibilityChanged) {"},{"lineNumber":312,"author":{"gitId":"-"},"content":"        // alert user that editing visibility options will not delete responses"},{"lineNumber":313,"author":{"gitId":"-"},"content":"        const modalContent: string \u003d `"},{"lineNumber":314,"author":{"gitId":"-"},"content":"            \u003cp\u003eYou seem to have changed the visibility settings of this question. Please note that \u003cb\u003ethe existing"},{"lineNumber":315,"author":{"gitId":"-"},"content":"            responses will remain but their visibility will be changed as per the new visibility settings.\u003c/b\u003e"},{"lineNumber":316,"author":{"gitId":"-"},"content":"            Proceed?\u003c/p\u003e"},{"lineNumber":317,"author":{"gitId":"-"},"content":"        `;"},{"lineNumber":318,"author":{"gitId":"-"},"content":"        const modalRef: NgbModalRef \u003d this.simpleModalService.openConfirmationModal("},{"lineNumber":319,"author":{"gitId":"-"},"content":"            \u0027Save the question?\u0027, SimpleModalType.WARNING, modalContent);"},{"lineNumber":320,"author":{"gitId":"-"},"content":"        modalRef.result.then(() \u003d\u003e {"},{"lineNumber":321,"author":{"gitId":"-"},"content":"          this.saveExistingQuestionEvent.emit();"},{"lineNumber":322,"author":{"gitId":"-"},"content":"        }, () \u003d\u003e {});"},{"lineNumber":323,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":324,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":325,"author":{"gitId":"-"},"content":"    if (this.formMode \u003d\u003d\u003d QuestionEditFormMode.ADD) {"},{"lineNumber":326,"author":{"gitId":"-"},"content":"      this.createNewQuestionEvent.emit();"},{"lineNumber":327,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":328,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":329,"author":{"gitId":"-"},"content":""},{"lineNumber":330,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":331,"author":{"gitId":"-"},"content":"   * Handles event for duplicating the current question."},{"lineNumber":332,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":333,"author":{"gitId":"-"},"content":"  duplicateCurrentQuestionHandler(): void {"},{"lineNumber":334,"author":{"gitId":"-"},"content":"    this.duplicateCurrentQuestionEvent.emit();"},{"lineNumber":335,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":336,"author":{"gitId":"-"},"content":""},{"lineNumber":337,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":338,"author":{"gitId":"-"},"content":"   * Handles event for deleting the current question."},{"lineNumber":339,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":340,"author":{"gitId":"-"},"content":"  deleteCurrentQuestionHandler(): void {"},{"lineNumber":341,"author":{"gitId":"-"},"content":"    this.deleteCurrentQuestionEvent.emit();"},{"lineNumber":342,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":343,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"cedricongjh":4,"-":339}},{"path":"src/web/app/components/question-submission-form/question-submission-form.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003cdiv id\u003d\"question-submission-form\" class\u003d\"card\"\u003e"},{"lineNumber":2,"author":{"gitId":"domlimm"},"content":"  \u003cdiv class\u003d\"card-header bg-primary text-white question-header\""},{"lineNumber":3,"author":{"gitId":"domlimm"},"content":"    [ngClass]\u003d\"isSaved ? \u0027bg-success\u0027 : \u0027bg-primary\u0027\"\u003e"},{"lineNumber":4,"author":{"gitId":"-"},"content":"    \u003ci class\u003d\"fas fa-check me-2\" *ngIf\u003d\"isSaved\"\u003e\u003c/i\u003e"},{"lineNumber":5,"author":{"gitId":"-"},"content":"    \u003cspan id\u003d\"question-details\"\u003e\u003cb\u003eQuestion {{ model.questionNumber }}: \u003c/b\u003e{{ model.questionBrief }}\u003c/span\u003e"},{"lineNumber":6,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":7,"author":{"gitId":"-"},"content":""},{"lineNumber":8,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"card-body\" *tmIsLoading\u003d\"model.isLoading\"\u003e"},{"lineNumber":9,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"card mb-3\" *ngIf\u003d\"model.questionDescription\"\u003e"},{"lineNumber":10,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"card-header\"\u003e"},{"lineNumber":11,"author":{"gitId":"-"},"content":"        \u003cb\u003eMore details\u003c/b\u003e"},{"lineNumber":12,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":13,"author":{"gitId":"-"},"content":"      \u003cdiv id\u003d\"question-description\" class\u003d\"card-body\" [innerHTML]\u003d\"model.questionDescription | safeHtml\"\u003e\u003c/div\u003e"},{"lineNumber":14,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":15,"author":{"gitId":"-"},"content":""},{"lineNumber":16,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"card-body visibility-card\"\u003e"},{"lineNumber":17,"author":{"gitId":"-"},"content":"      \u003cp class\u003d\"text-secondary\"\u003eOnly the following persons can see your responses: \u003c/p\u003e"},{"lineNumber":18,"author":{"gitId":"-"},"content":"      \u003cul id\u003d\"visibility-list\" class\u003d\"text-secondary\"\u003e"},{"lineNumber":19,"author":{"gitId":"-"},"content":"        \u003cli *ngIf\u003d\"model.recipientType \u003d\u003d\u003d FeedbackParticipantType.SELF\"\u003eYou can see your own feedback in the results page later on.\u003c/li\u003e"},{"lineNumber":20,"author":{"gitId":"-"},"content":"        \u003cng-container *ngFor\u003d\"let visibilityType of FeedbackVisibilityType | enumToArray\"\u003e"},{"lineNumber":21,"author":{"gitId":"-"},"content":"          \u003cli *ngIf\u003d\"visibilityStateMachine.isVisibilityTypeApplicable(visibilityType) \u0026\u0026 visibilityStateMachine.hasAnyVisibilityControl(visibilityType)\"\u003e"},{"lineNumber":22,"author":{"gitId":"-"},"content":"            {{ visibilityType | visibilityEntityName:model.recipientType:model.numberOfEntitiesToGiveFeedbackToSetting:model.customNumberOfEntitiesToGiveFeedbackTo }} {{ visibilityStateMachine.getVisibilityControlUnderVisibilityType(visibilityType) | visibilityCapability }}"},{"lineNumber":23,"author":{"gitId":"-"},"content":"          \u003c/li\u003e"},{"lineNumber":24,"author":{"gitId":"-"},"content":"        \u003c/ng-container\u003e"},{"lineNumber":25,"author":{"gitId":"-"},"content":"        \u003cli *ngIf\u003d\"!visibilityStateMachine.hasAnyVisibilityControlForAll()\"\u003eNo-one can see your responses\u003c/li\u003e"},{"lineNumber":26,"author":{"gitId":"-"},"content":"      \u003c/ul\u003e"},{"lineNumber":27,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":28,"author":{"gitId":"-"},"content":""},{"lineNumber":29,"author":{"gitId":"-"},"content":"    \u003ctm-contribution-question-instruction *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.CONTRIB\""},{"lineNumber":30,"author":{"gitId":"-"},"content":"                                          [questionDetails]\u003d\"model.questionDetails\" [numOfRecipients]\u003d\"model.recipientSubmissionForms.length\"\u003e\u003c/tm-contribution-question-instruction\u003e"},{"lineNumber":31,"author":{"gitId":"-"},"content":"    \u003ctm-text-question-instruction *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.TEXT\"\u003e\u003c/tm-text-question-instruction\u003e"},{"lineNumber":32,"author":{"gitId":"-"},"content":"    \u003ctm-num-scale-question-instruction *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.NUMSCALE\"\u003e\u003c/tm-num-scale-question-instruction\u003e"},{"lineNumber":33,"author":{"gitId":"-"},"content":"    \u003ctm-text-question-constraint *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.TEXT\"\u003e\u003c/tm-text-question-constraint\u003e"},{"lineNumber":34,"author":{"gitId":"-"},"content":"    \u003ctm-num-scale-question-constraint *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.NUMSCALE\"\u003e\u003c/tm-num-scale-question-constraint\u003e"},{"lineNumber":35,"author":{"gitId":"-"},"content":"    \u003ctm-rank-options-question-instruction *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.RANK_OPTIONS\" [questionDetails]\u003d\"model.questionDetails\"\u003e\u003c/tm-rank-options-question-instruction\u003e"},{"lineNumber":36,"author":{"gitId":"-"},"content":"    \u003ctm-msq-question-constraint *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.MSQ\" [questionDetails]\u003d\"model.questionDetails\"\u003e\u003c/tm-msq-question-constraint\u003e"},{"lineNumber":37,"author":{"gitId":"-"},"content":"    \u003ctm-rank-recipients-question-instruction *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.RANK_RECIPIENTS\" [questionDetails]\u003d\"model.questionDetails\"\u003e\u003c/tm-rank-recipients-question-instruction\u003e"},{"lineNumber":38,"author":{"gitId":"-"},"content":"    \u003ctm-constsum-options-question-instruction *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.CONSTSUM_OPTIONS\" [questionDetails]\u003d\"model.questionDetails\"\u003e\u003c/tm-constsum-options-question-instruction\u003e"},{"lineNumber":39,"author":{"gitId":"-"},"content":"    \u003ctm-constsum-recipients-question-instruction *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.CONSTSUM_RECIPIENTS\""},{"lineNumber":40,"author":{"gitId":"-"},"content":"                                                 [questionDetails]\u003d\"model.questionDetails\" [numOfRecipients]\u003d\"model.recipientSubmissionForms.length\"\u003e\u003c/tm-constsum-recipients-question-instruction\u003e"},{"lineNumber":41,"author":{"gitId":"-"},"content":""},{"lineNumber":42,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"form-row margin-top-30px margin-bottom-0px\"\u003e"},{"lineNumber":43,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"col-2\"\u003e"},{"lineNumber":44,"author":{"gitId":"-"},"content":"        \u003cp *ngIf\u003d\"model.recipientType !\u003d\u003d FeedbackParticipantType.NONE \u0026\u0026 model.recipientType !\u003d\u003d FeedbackParticipantType.SELF\" \u003e"},{"lineNumber":45,"author":{"gitId":"-"},"content":"          \u003cspan class\u003d\"ngb-tooltip-class font-bold\" ngbTooltip\u003d\"The party being evaluated or given feedback to\"\u003eEvaluee/Recipient\u003c/span\u003e"},{"lineNumber":46,"author":{"gitId":"-"},"content":"        \u003c/p\u003e"},{"lineNumber":47,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":48,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"form-check\" *ngIf\u003d\"hasSectionTeam\"\u003e"},{"lineNumber":49,"author":{"gitId":"-"},"content":"          \u003cinput type\u003d\"checkbox\" id\u003d\"showSectionTeam\" name\u003d\"showSectionTeam\" value\u003d\"sectionTeam\" (change)\u003d\"toggleSectionTeam($event)\"\u003e"},{"lineNumber":50,"author":{"gitId":"-"},"content":"          \u003clabel class\u003d\"form-check-label ms-1\" for\u003d\"showSectionTeam\"\u003eShow Section/Team\u003c/label\u003e"},{"lineNumber":51,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":52,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":53,"author":{"gitId":"-"},"content":""},{"lineNumber":54,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"alert alert-primary\" role\u003d\"alert\" *ngIf\u003d\"model.giverType \u003d\u003d\u003d FeedbackParticipantType.TEAMS\"\u003e"},{"lineNumber":55,"author":{"gitId":"-"},"content":"      Please note that you are submitting this response on behalf of your team."},{"lineNumber":56,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":57,"author":{"gitId":"-"},"content":""},{"lineNumber":58,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"row\"\u003e"},{"lineNumber":59,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"evaluee-col col-12\"\u003e"},{"lineNumber":60,"author":{"gitId":"-"},"content":"        \u003cdiv class\u003d\"row\" *ngFor\u003d\"let recipientSubmissionFormModel of model.recipientSubmissionForms; let i \u003d index; trackBy: trackRecipientSubmissionFormByFn\"\u003e"},{"lineNumber":61,"author":{"gitId":"-"},"content":"          \u003cdiv class\u003d\"col-md-5 col-xs-12 margin-top-20px\" *ngIf\u003d\"model.recipientType !\u003d\u003d FeedbackParticipantType.SELF \u0026\u0026 model.recipientType !\u003d\u003d FeedbackParticipantType.NONE\"\u003e"},{"lineNumber":62,"author":{"gitId":"-"},"content":"            \u003cdiv id\u003d\"recipient-name-{{ i }}\" *ngIf\u003d\"formMode \u003d\u003d\u003d QuestionSubmissionFormMode.FIXED_RECIPIENT\"\u003e"},{"lineNumber":63,"author":{"gitId":"-"},"content":"              \u003cb\u003e{{ getRecipientName(recipientSubmissionFormModel.recipientIdentifier) }} \u003c/b\u003e \u003cspan\u003e({{ model.recipientType | recipientTypeName:model.giverType }})\u003c/span\u003e"},{"lineNumber":64,"author":{"gitId":"-"},"content":"            \u003c/div\u003e"},{"lineNumber":65,"author":{"gitId":"-"},"content":"            \u003cdiv class\u003d\"row evaluee-select align-items-center\" *ngIf\u003d\"formMode \u003d\u003d\u003d QuestionSubmissionFormMode.FLEXIBLE_RECIPIENT\"\u003e"},{"lineNumber":66,"author":{"gitId":"-"},"content":"              \u003cselect id\u003d\"recipient-dropdown\" class\u003d\"form-control form-select fw-bold col\" [ngModel]\u003d\"recipientSubmissionFormModel.recipientIdentifier\""},{"lineNumber":67,"author":{"gitId":"-"},"content":"                      (ngModelChange)\u003d\"triggerRecipientSubmissionFormChange(i, \u0027recipientIdentifier\u0027, $event)\""},{"lineNumber":68,"author":{"gitId":"-"},"content":"                      [disabled]\u003d\"isFormsDisabled\"\u003e"},{"lineNumber":69,"author":{"gitId":"-"},"content":"                \u003coption value\u003d\"\"\u003e\u003c/option\u003e"},{"lineNumber":70,"author":{"gitId":"-"},"content":"                \u003cng-container *ngFor\u003d\"let recipient of model.recipientList\"\u003e"},{"lineNumber":71,"author":{"gitId":"-"},"content":"                  \u003coption *ngIf\u003d\"!isRecipientSelected(recipient) || recipientSubmissionFormModel.recipientIdentifier \u003d\u003d\u003d recipient.recipientIdentifier\" [ngValue]\u003d\"recipient.recipientIdentifier\"\u003e{{ getSelectionOptionLabel(recipient) }}\u003c/option\u003e"},{"lineNumber":72,"author":{"gitId":"-"},"content":"                \u003c/ng-container\u003e"},{"lineNumber":73,"author":{"gitId":"-"},"content":"              \u003c/select\u003e"},{"lineNumber":74,"author":{"gitId":"-"},"content":"              \u003cdiv class\u003d\"col-auto text-start\"\u003e"},{"lineNumber":75,"author":{"gitId":"-"},"content":"                ({{ model.recipientType | recipientTypeName: model.giverType }})"},{"lineNumber":76,"author":{"gitId":"-"},"content":"              \u003c/div\u003e"},{"lineNumber":77,"author":{"gitId":"-"},"content":"            \u003c/div\u003e"},{"lineNumber":78,"author":{"gitId":"-"},"content":"          \u003c/div\u003e"},{"lineNumber":79,"author":{"gitId":"-"},"content":"          \u003cdiv class\u003d\"margin-top-20px\" [ngClass]\u003d\"isMCQDropDownEnabled ? \u0027col-12\u0027 : \u0027col\u0027\"\u003e"},{"lineNumber":80,"author":{"gitId":"-"},"content":"            \u003ctm-contribution-question-edit-answer-form *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.CONTRIB\" [questionDetails]\u003d\"model.questionDetails\""},{"lineNumber":81,"author":{"gitId":"-"},"content":"                                                      [responseDetails]\u003d\"recipientSubmissionFormModel.responseDetails\""},{"lineNumber":82,"author":{"gitId":"-"},"content":"                                                      [shouldShowHelpLink]\u003d\"i \u003d\u003d\u003d 0\""},{"lineNumber":83,"author":{"gitId":"-"},"content":"                                                      (responseDetailsChange)\u003d\"triggerRecipientSubmissionFormChange(i, \u0027responseDetails\u0027, $event)\""},{"lineNumber":84,"author":{"gitId":"-"},"content":"                                                      [isDisabled]\u003d\"isFormsDisabled\""},{"lineNumber":85,"author":{"gitId":"-"},"content":"            \u003e\u003c/tm-contribution-question-edit-answer-form\u003e"},{"lineNumber":86,"author":{"gitId":"-"},"content":"            \u003ctm-text-question-edit-answer-form *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.TEXT\" [questionDetails]\u003d\"model.questionDetails\""},{"lineNumber":87,"author":{"gitId":"-"},"content":"                                              [responseDetails]\u003d\"recipientSubmissionFormModel.responseDetails\""},{"lineNumber":88,"author":{"gitId":"-"},"content":"                                              (responseDetailsChange)\u003d\"triggerRecipientSubmissionFormChange(i, \u0027responseDetails\u0027, $event)\""},{"lineNumber":89,"author":{"gitId":"-"},"content":"                                              [isDisabled]\u003d\"isFormsDisabled\""},{"lineNumber":90,"author":{"gitId":"-"},"content":"            \u003e\u003c/tm-text-question-edit-answer-form\u003e"},{"lineNumber":91,"author":{"gitId":"-"},"content":"            \u003ctm-rank-options-question-edit-answer-form *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.RANK_OPTIONS\" [questionDetails]\u003d\"model.questionDetails\""},{"lineNumber":92,"author":{"gitId":"-"},"content":"                                                       [responseDetails]\u003d\"recipientSubmissionFormModel.responseDetails\""},{"lineNumber":93,"author":{"gitId":"-"},"content":"                                                       (responseDetailsChange)\u003d\"triggerRecipientSubmissionFormChange(i, \u0027responseDetails\u0027, $event)\""},{"lineNumber":94,"author":{"gitId":"-"},"content":"                                                       [isDisabled]\u003d\"isFormsDisabled\"\u003e\u003c/tm-rank-options-question-edit-answer-form\u003e"},{"lineNumber":95,"author":{"gitId":"-"},"content":"            \u003ctm-rank-recipients-question-edit-answer-form *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.RANK_RECIPIENTS\" [questionDetails]\u003d\"model.questionDetails\""},{"lineNumber":96,"author":{"gitId":"-"},"content":"                                                          [responseDetails]\u003d\"recipientSubmissionFormModel.responseDetails\""},{"lineNumber":97,"author":{"gitId":"-"},"content":"                                                          (responseDetailsChange)\u003d\"triggerRecipientSubmissionFormChange(i, \u0027responseDetails\u0027, $event)\""},{"lineNumber":98,"author":{"gitId":"-"},"content":"                                                          [isDisabled]\u003d\"isFormsDisabled\" [numOfRecipients]\u003d\"model.recipientSubmissionForms.length\"\u003e\u003c/tm-rank-recipients-question-edit-answer-form\u003e"},{"lineNumber":99,"author":{"gitId":"-"},"content":"            \u003ctm-num-scale-question-edit-answer-form *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.NUMSCALE\" [questionDetails]\u003d\"model.questionDetails\""},{"lineNumber":100,"author":{"gitId":"-"},"content":"                                                    [responseDetails]\u003d\"recipientSubmissionFormModel.responseDetails\""},{"lineNumber":101,"author":{"gitId":"-"},"content":"                                                    (responseDetailsChange)\u003d\"triggerRecipientSubmissionFormChange(i, \u0027responseDetails\u0027, $event)\""},{"lineNumber":102,"author":{"gitId":"-"},"content":"                                                    [isDisabled]\u003d\"isFormsDisabled\""},{"lineNumber":103,"author":{"gitId":"-"},"content":"            \u003e\u003c/tm-num-scale-question-edit-answer-form\u003e"},{"lineNumber":104,"author":{"gitId":"-"},"content":"            \u003ctm-mcq-question-edit-answer-form *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.MCQ\" [questionDetails]\u003d\"model.questionDetails\""},{"lineNumber":105,"author":{"gitId":"-"},"content":"                                                    [responseDetails]\u003d\"recipientSubmissionFormModel.responseDetails\""},{"lineNumber":106,"author":{"gitId":"-"},"content":"                                                    (responseDetailsChange)\u003d\"triggerRecipientSubmissionFormChange(i, \u0027responseDetails\u0027, $event)\""},{"lineNumber":107,"author":{"gitId":"-"},"content":"                                                    [isDisabled]\u003d\"isFormsDisabled\""},{"lineNumber":108,"author":{"gitId":"-"},"content":"                                                    [id]\u003d\"model.feedbackQuestionId + recipientSubmissionFormModel.recipientIdentifier\""},{"lineNumber":109,"author":{"gitId":"-"},"content":"                                                    (cssRefresh)\u003drefreshCssForDropdownMCQ($event)"},{"lineNumber":110,"author":{"gitId":"-"},"content":"            \u003e\u003c/tm-mcq-question-edit-answer-form\u003e"},{"lineNumber":111,"author":{"gitId":"-"},"content":"            \u003ctm-msq-question-edit-answer-form *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.MSQ\" [questionDetails]\u003d\"model.questionDetails\""},{"lineNumber":112,"author":{"gitId":"-"},"content":"                                              [responseDetails]\u003d\"recipientSubmissionFormModel.responseDetails\""},{"lineNumber":113,"author":{"gitId":"-"},"content":"                                              (responseDetailsChange)\u003d\"triggerRecipientSubmissionFormChange(i, \u0027responseDetails\u0027, $event)\""},{"lineNumber":114,"author":{"gitId":"-"},"content":"                                              [isDisabled]\u003d\"isFormsDisabled\""},{"lineNumber":115,"author":{"gitId":"-"},"content":"            \u003e\u003c/tm-msq-question-edit-answer-form\u003e"},{"lineNumber":116,"author":{"gitId":"-"},"content":"            \u003ctm-rubric-question-edit-answer-form *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.RUBRIC\" [questionDetails]\u003d\"model.questionDetails\""},{"lineNumber":117,"author":{"gitId":"-"},"content":"                                                 [responseDetails]\u003d\"recipientSubmissionFormModel.responseDetails\""},{"lineNumber":118,"author":{"gitId":"-"},"content":"                                                 (responseDetailsChange)\u003d\"triggerRecipientSubmissionFormChange(i, \u0027responseDetails\u0027, $event)\""},{"lineNumber":119,"author":{"gitId":"-"},"content":"                                                 [isDisabled]\u003d\"isFormsDisabled\""},{"lineNumber":120,"author":{"gitId":"-"},"content":"                                                 [id]\u003d\"model.feedbackQuestionId + recipientSubmissionFormModel.recipientIdentifier\"\u003e\u003c/tm-rubric-question-edit-answer-form\u003e"},{"lineNumber":121,"author":{"gitId":"-"},"content":"            \u003ctm-constsum-options-question-edit-answer-form *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.CONSTSUM_OPTIONS\" [questionDetails]\u003d\"model.questionDetails\""},{"lineNumber":122,"author":{"gitId":"-"},"content":"                                                           [responseDetails]\u003d\"recipientSubmissionFormModel.responseDetails\""},{"lineNumber":123,"author":{"gitId":"-"},"content":"                                                           (responseDetailsChange)\u003d\"triggerRecipientSubmissionFormChange(i, \u0027responseDetails\u0027, $event)\""},{"lineNumber":124,"author":{"gitId":"-"},"content":"                                                           [isDisabled]\u003d\"isFormsDisabled\"\u003e"},{"lineNumber":125,"author":{"gitId":"-"},"content":"            \u003c/tm-constsum-options-question-edit-answer-form\u003e"},{"lineNumber":126,"author":{"gitId":"-"},"content":"            \u003ctm-constsum-recipients-question-edit-answer-form *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.CONSTSUM_RECIPIENTS\" [questionDetails]\u003d\"model.questionDetails\""},{"lineNumber":127,"author":{"gitId":"-"},"content":"                                                           [responseDetails]\u003d\"recipientSubmissionFormModel.responseDetails\""},{"lineNumber":128,"author":{"gitId":"-"},"content":"                                                           (responseDetailsChange)\u003d\"triggerRecipientSubmissionFormChange(i, \u0027responseDetails\u0027, $event)\""},{"lineNumber":129,"author":{"gitId":"-"},"content":"                                                           [isDisabled]\u003d\"isFormsDisabled\"\u003e\u003c/tm-constsum-recipients-question-edit-answer-form\u003e"},{"lineNumber":130,"author":{"gitId":"-"},"content":"          \u003c/div\u003e"},{"lineNumber":131,"author":{"gitId":"-"},"content":""},{"lineNumber":132,"author":{"gitId":"-"},"content":"          \u003cdiv id\u003d\"comment-section\" *ngIf\u003d\"allowedToHaveParticipantComment\" class\u003d\"col-12 margin-bottom-20px margin-top-10px indent\"\u003e"},{"lineNumber":133,"author":{"gitId":"-"},"content":"            \u003cdiv *ngIf\u003d\"recipientSubmissionFormModel.commentByGiver \u0026\u0026 recipientSubmissionFormModel.commentByGiver.originalComment else newComment\"\u003e"},{"lineNumber":134,"author":{"gitId":"-"},"content":"              \u003ctm-comment-row [mode]\u003d\"CommentRowMode.EDIT\" [isVisibilityOptionEnabled]\u003d\"false\""},{"lineNumber":135,"author":{"gitId":"-"},"content":"                              [model]\u003d\"recipientSubmissionFormModel.commentByGiver\""},{"lineNumber":136,"author":{"gitId":"-"},"content":"                              (modelChange)\u003d\"triggerRecipientSubmissionFormChange(i, \u0027commentByGiver\u0027, $event)\""},{"lineNumber":137,"author":{"gitId":"-"},"content":"                              [isFeedbackParticipantComment]\u003d\"true\""},{"lineNumber":138,"author":{"gitId":"-"},"content":"                              [questionShowResponsesTo]\u003d\"model.showResponsesTo\""},{"lineNumber":139,"author":{"gitId":"-"},"content":"                              [shouldHideSavingButton]\u003d\"true\""},{"lineNumber":140,"author":{"gitId":"-"},"content":"                              (deleteCommentEvent)\u003d\"triggerDeleteCommentEvent(i)\""},{"lineNumber":141,"author":{"gitId":"-"},"content":"                              (closeEditingEvent)\u003d\"discardEditedParticipantComment(i)\""},{"lineNumber":142,"author":{"gitId":"-"},"content":"                              [isDisabled]\u003d\"isFormsDisabled || isFeedbackResponseDetailsEmpty(recipientSubmissionFormModel.responseDetails)\"\u003e\u003c/tm-comment-row\u003e"},{"lineNumber":143,"author":{"gitId":"-"},"content":"              \u003cdiv class\u003d\"alert alert-warning margin-top-10px\" role\u003d\"alert\" *ngIf\u003d\"isFeedbackResponseDetailsEmpty(recipientSubmissionFormModel.responseDetails)\"\u003e"},{"lineNumber":144,"author":{"gitId":"-"},"content":"                You must provide a valid response in order to give a comment or your comment will not be saved!"},{"lineNumber":145,"author":{"gitId":"-"},"content":"              \u003c/div\u003e"},{"lineNumber":146,"author":{"gitId":"-"},"content":"            \u003c/div\u003e"},{"lineNumber":147,"author":{"gitId":"-"},"content":"            \u003cng-template #newComment\u003e"},{"lineNumber":148,"author":{"gitId":"-"},"content":"              \u003cdiv style\u003d\"display: inline-block;\" [ngbTooltip]\u003d\"isFeedbackResponseDetailsEmpty(recipientSubmissionFormModel.responseDetails) ? \u0027Give a valid response in order to comment\u0027 : \u0027\u0027\"\u003e"},{"lineNumber":149,"author":{"gitId":"-"},"content":"                \u003cbutton id\u003d\"btn-add-comment\" *ngIf\u003d\"!recipientSubmissionFormModel.commentByGiver\" class\u003d\"btn btn-light btn-sm\""},{"lineNumber":150,"author":{"gitId":"-"},"content":"                        (click)\u003d\"addNewParticipantCommentToResponse(i)\""},{"lineNumber":151,"author":{"gitId":"-"},"content":"                        [disabled]\u003d\"isFormsDisabled || isFeedbackResponseDetailsEmpty(recipientSubmissionFormModel.responseDetails)\"\u003e"},{"lineNumber":152,"author":{"gitId":"-"},"content":"                  \u003ci class\u003d\"fas fa-comment\"\u003e\u003c/i\u003e [Optional] Comment on your response"},{"lineNumber":153,"author":{"gitId":"-"},"content":"                \u003c/button\u003e"},{"lineNumber":154,"author":{"gitId":"-"},"content":"              \u003c/div\u003e"},{"lineNumber":155,"author":{"gitId":"-"},"content":"              \u003cdiv *ngIf\u003d\"recipientSubmissionFormModel.commentByGiver\"\u003e"},{"lineNumber":156,"author":{"gitId":"-"},"content":"                \u003ctm-comment-row [mode]\u003d\"CommentRowMode.ADD\" [isVisibilityOptionEnabled]\u003d\"false\""},{"lineNumber":157,"author":{"gitId":"-"},"content":"                                [isFeedbackParticipantComment]\u003d\"true\""},{"lineNumber":158,"author":{"gitId":"-"},"content":"                                [questionShowResponsesTo]\u003d\"model.showResponsesTo\""},{"lineNumber":159,"author":{"gitId":"-"},"content":"                                [shouldHideSavingButton]\u003d\"true\""},{"lineNumber":160,"author":{"gitId":"-"},"content":"                                [model]\u003d\"recipientSubmissionFormModel.commentByGiver\""},{"lineNumber":161,"author":{"gitId":"-"},"content":"                                (modelChange)\u003d\"triggerRecipientSubmissionFormChange(i, \u0027commentByGiver\u0027, $event)\""},{"lineNumber":162,"author":{"gitId":"-"},"content":"                                (closeEditingEvent)\u003d\"cancelAddingNewParticipantComment(i)\""},{"lineNumber":163,"author":{"gitId":"-"},"content":"                                [isDisabled]\u003d\"isFormsDisabled || isFeedbackResponseDetailsEmpty(recipientSubmissionFormModel.responseDetails)\"\u003e\u003c/tm-comment-row\u003e"},{"lineNumber":164,"author":{"gitId":"-"},"content":"                \u003cdiv class\u003d\"alert alert-warning margin-top-10px\" role\u003d\"alert\" *ngIf\u003d\"isFeedbackResponseDetailsEmpty(recipientSubmissionFormModel.responseDetails)\"\u003e"},{"lineNumber":165,"author":{"gitId":"-"},"content":"                  You must provide a valid response in order to give a comment or your comment will not be saved!"},{"lineNumber":166,"author":{"gitId":"-"},"content":"                \u003c/div\u003e"},{"lineNumber":167,"author":{"gitId":"-"},"content":"              \u003c/div\u003e"},{"lineNumber":168,"author":{"gitId":"-"},"content":"            \u003c/ng-template\u003e"},{"lineNumber":169,"author":{"gitId":"-"},"content":"          \u003c/div\u003e"},{"lineNumber":170,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":171,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":172,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":173,"author":{"gitId":"-"},"content":""},{"lineNumber":174,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"col-12 constraint-margins\"\u003e"},{"lineNumber":175,"author":{"gitId":"-"},"content":"      \u003ctm-contribution-question-constraint *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.CONTRIB\""},{"lineNumber":176,"author":{"gitId":"-"},"content":"                                           [recipientSubmissionForms]\u003d\"model.recipientSubmissionForms\""},{"lineNumber":177,"author":{"gitId":"-"},"content":"                                           [questionDetails]\u003d\"model.questionDetails\""},{"lineNumber":178,"author":{"gitId":"-"},"content":"                                           (isValidEvent)\u003d\"updateValidity($event)\""},{"lineNumber":179,"author":{"gitId":"-"},"content":"      \u003e\u003c/tm-contribution-question-constraint\u003e"},{"lineNumber":180,"author":{"gitId":"-"},"content":"      \u003ctm-rank-recipients-question-constraint *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.RANK_RECIPIENTS\""},{"lineNumber":181,"author":{"gitId":"-"},"content":"                                              [recipientSubmissionForms]\u003d\"model.recipientSubmissionForms\""},{"lineNumber":182,"author":{"gitId":"-"},"content":"                                              [questionDetails]\u003d\"model.questionDetails\""},{"lineNumber":183,"author":{"gitId":"-"},"content":"                                              (isValidEvent)\u003d\"updateValidity($event)\""},{"lineNumber":184,"author":{"gitId":"-"},"content":"      \u003e\u003c/tm-rank-recipients-question-constraint\u003e"},{"lineNumber":185,"author":{"gitId":"-"},"content":"      \u003ctm-constsum-recipients-question-constraint *ngIf\u003d\"model.questionType \u003d\u003d\u003d FeedbackQuestionType.CONSTSUM_RECIPIENTS\""},{"lineNumber":186,"author":{"gitId":"-"},"content":"                                                  [recipientSubmissionForms]\u003d\"model.recipientSubmissionForms\""},{"lineNumber":187,"author":{"gitId":"-"},"content":"                                                  [questionDetails]\u003d\"model.questionDetails\""},{"lineNumber":188,"author":{"gitId":"-"},"content":"                                                  (isValidEvent)\u003d\"updateValidity($event)\""},{"lineNumber":189,"author":{"gitId":"-"},"content":"      \u003e\u003c/tm-constsum-recipients-question-constraint\u003e"},{"lineNumber":190,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":191,"author":{"gitId":"-"},"content":""},{"lineNumber":192,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"alert alert-warning\" role\u003d\"alert\" *ngIf\u003d\"!model.recipientList.length \u0026\u0026 model.isLoaded\"\u003e"},{"lineNumber":193,"author":{"gitId":"-"},"content":"      \u003cspan *ngIf\u003d\"model.recipientType \u003d\u003d\u003d FeedbackParticipantType.OWN_TEAM_MEMBERS\"\u003eThis question is for team members and you don\u0027t have any team members. Therefore, you will not be able to answer this question.\u003c/span\u003e"},{"lineNumber":194,"author":{"gitId":"-"},"content":"      \u003cspan *ngIf\u003d\"model.recipientType \u003d\u003d\u003d FeedbackParticipantType.TEAMS_EXCLUDING_SELF\"\u003eThis question is for other teams in this course and this course doesn\u0027t have any other team. Therefore, you will not be able to answer this question.\u003c/span\u003e"},{"lineNumber":195,"author":{"gitId":"-"},"content":"      \u003cspan *ngIf\u003d\"model.recipientType \u003d\u003d\u003d FeedbackParticipantType.STUDENTS_EXCLUDING_SELF\"\u003eThis question is for other students in this course and this course doesn\u0027t have any other student. Therefore, you will not be able to answer this question.\u003c/span\u003e"},{"lineNumber":196,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":197,"author":{"gitId":"-"},"content":""},{"lineNumber":198,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"row\" *ngIf\u003d\"model.recipientList.length \u003e 0\"\u003e"},{"lineNumber":199,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"col-12 text-center\"\u003e"},{"lineNumber":200,"author":{"gitId":"-"},"content":"        \u003cbutton id\u003d\"btn-submit-qn-{{ model.questionNumber }}\" type\u003d\"submit\" class\u003d\"btn btn-success\""},{"lineNumber":201,"author":{"gitId":"-"},"content":"                ngbTooltip\u003d\"You can save your responses for this question at any time and come back later to continue.\""},{"lineNumber":202,"author":{"gitId":"-"},"content":"                (click)\u003d\"saveFeedbackResponses()\" [disabled]\u003d\"isSavingResponses || isSubmissionDisabled\"\u003e"},{"lineNumber":203,"author":{"gitId":"-"},"content":"          \u003ctm-ajax-loading *ngIf\u003d\"isSavingResponses\"\u003e\u003c/tm-ajax-loading\u003e"},{"lineNumber":204,"author":{"gitId":"-"},"content":"          \u003cspan\u003e{{ isQuestionCountOne ? \"Submit Response\" : \"Submit Response for Question \" + model.questionNumber }}\u003c/span\u003e"},{"lineNumber":205,"author":{"gitId":"-"},"content":"        \u003c/button\u003e"},{"lineNumber":206,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":207,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":208,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":209,"author":{"gitId":"-"},"content":"\u003c/div\u003e"}],"authorContributionMap":{"domlimm":2,"-":207}},{"path":"src/web/app/components/question-submission-form/question-submission-form.component.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { Component, DoCheck, EventEmitter, Input, Output } from \u0027@angular/core\u0027;"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import { FeedbackQuestionsService } from \u0027../../../services/feedback-questions.service\u0027;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"import { FeedbackResponsesService } from \u0027../../../services/feedback-responses.service\u0027;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import { VisibilityStateMachine } from \u0027../../../services/visibility-state-machine\u0027;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":6,"author":{"gitId":"-"},"content":"  FeedbackParticipantType,"},{"lineNumber":7,"author":{"gitId":"-"},"content":"  FeedbackQuestionType, FeedbackResponseDetails, FeedbackTextQuestionDetails,"},{"lineNumber":8,"author":{"gitId":"-"},"content":"  FeedbackVisibilityType,"},{"lineNumber":9,"author":{"gitId":"-"},"content":"  NumberOfEntitiesToGiveFeedbackToSetting,"},{"lineNumber":10,"author":{"gitId":"-"},"content":"} from \u0027../../../types/api-output\u0027;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import { VisibilityControl } from \u0027../../../types/visibility-control\u0027;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import { CommentRowModel } from \u0027../comment-box/comment-row/comment-row.component\u0027;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import { CommentRowMode } from \u0027../comment-box/comment-row/comment-row.mode\u0027;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":15,"author":{"gitId":"-"},"content":"  FeedbackRecipientLabelType,"},{"lineNumber":16,"author":{"gitId":"-"},"content":"  FeedbackResponseRecipient,"},{"lineNumber":17,"author":{"gitId":"-"},"content":"  FeedbackResponseRecipientSubmissionFormModel,"},{"lineNumber":18,"author":{"gitId":"-"},"content":"  QuestionSubmissionFormMode,"},{"lineNumber":19,"author":{"gitId":"-"},"content":"  QuestionSubmissionFormModel,"},{"lineNumber":20,"author":{"gitId":"-"},"content":"} from \u0027./question-submission-form-model\u0027;"},{"lineNumber":21,"author":{"gitId":"-"},"content":""},{"lineNumber":22,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":23,"author":{"gitId":"-"},"content":" * The question submission form for a question."},{"lineNumber":24,"author":{"gitId":"-"},"content":" */"},{"lineNumber":25,"author":{"gitId":"-"},"content":"@Component({"},{"lineNumber":26,"author":{"gitId":"-"},"content":"  selector: \u0027tm-question-submission-form\u0027,"},{"lineNumber":27,"author":{"gitId":"-"},"content":"  templateUrl: \u0027./question-submission-form.component.html\u0027,"},{"lineNumber":28,"author":{"gitId":"-"},"content":"  styleUrls: [\u0027./question-submission-form.component.scss\u0027],"},{"lineNumber":29,"author":{"gitId":"-"},"content":"})"},{"lineNumber":30,"author":{"gitId":"-"},"content":"export class QuestionSubmissionFormComponent implements DoCheck {"},{"lineNumber":31,"author":{"gitId":"-"},"content":""},{"lineNumber":32,"author":{"gitId":"-"},"content":"  // enum"},{"lineNumber":33,"author":{"gitId":"-"},"content":"  QuestionSubmissionFormMode: typeof QuestionSubmissionFormMode \u003d QuestionSubmissionFormMode;"},{"lineNumber":34,"author":{"gitId":"-"},"content":"  FeedbackQuestionType: typeof FeedbackQuestionType \u003d FeedbackQuestionType;"},{"lineNumber":35,"author":{"gitId":"-"},"content":"  FeedbackParticipantType: typeof FeedbackParticipantType \u003d FeedbackParticipantType;"},{"lineNumber":36,"author":{"gitId":"-"},"content":"  FeedbackVisibilityType: typeof FeedbackVisibilityType \u003d FeedbackVisibilityType;"},{"lineNumber":37,"author":{"gitId":"-"},"content":"  CommentRowMode: typeof CommentRowMode \u003d CommentRowMode;"},{"lineNumber":38,"author":{"gitId":"-"},"content":""},{"lineNumber":39,"author":{"gitId":"-"},"content":"  isMCQDropDownEnabled: boolean \u003d false;"},{"lineNumber":40,"author":{"gitId":"domlimm"},"content":"  isSaved: boolean \u003d false;"},{"lineNumber":41,"author":{"gitId":"domlimm"},"content":"  hasResponseChanged: boolean \u003d false;"},{"lineNumber":42,"author":{"gitId":"-"},"content":""},{"lineNumber":43,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":44,"author":{"gitId":"-"},"content":"  formMode: QuestionSubmissionFormMode \u003d QuestionSubmissionFormMode.FIXED_RECIPIENT;"},{"lineNumber":45,"author":{"gitId":"-"},"content":""},{"lineNumber":46,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":47,"author":{"gitId":"-"},"content":"  isFormsDisabled: boolean \u003d false;"},{"lineNumber":48,"author":{"gitId":"-"},"content":""},{"lineNumber":49,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":50,"author":{"gitId":"-"},"content":"  isSubmissionDisabled: boolean \u003d false;"},{"lineNumber":51,"author":{"gitId":"-"},"content":""},{"lineNumber":52,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":53,"author":{"gitId":"-"},"content":"  isSavingResponses: boolean \u003d false;"},{"lineNumber":54,"author":{"gitId":"-"},"content":""},{"lineNumber":55,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":56,"author":{"gitId":"-"},"content":"  set formModel(model: QuestionSubmissionFormModel) {"},{"lineNumber":57,"author":{"gitId":"-"},"content":"    this.model \u003d model;"},{"lineNumber":58,"author":{"gitId":"-"},"content":"    this.visibilityStateMachine \u003d"},{"lineNumber":59,"author":{"gitId":"-"},"content":"        this.feedbackQuestionsService.getNewVisibilityStateMachine(model.giverType, model.recipientType);"},{"lineNumber":60,"author":{"gitId":"-"},"content":"    const visibilitySetting: { [TKey in VisibilityControl]: FeedbackVisibilityType[] } \u003d {"},{"lineNumber":61,"author":{"gitId":"-"},"content":"      SHOW_RESPONSE: model.showResponsesTo,"},{"lineNumber":62,"author":{"gitId":"-"},"content":"      SHOW_GIVER_NAME: model.showGiverNameTo,"},{"lineNumber":63,"author":{"gitId":"-"},"content":"      SHOW_RECIPIENT_NAME: model.showRecipientNameTo,"},{"lineNumber":64,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":65,"author":{"gitId":"-"},"content":"    this.visibilityStateMachine.applyVisibilitySettings(visibilitySetting);"},{"lineNumber":66,"author":{"gitId":"-"},"content":"    this.allowedToHaveParticipantComment \u003d"},{"lineNumber":67,"author":{"gitId":"-"},"content":"        this.feedbackQuestionsService.isAllowedToHaveParticipantComment(this.model.questionType);"},{"lineNumber":68,"author":{"gitId":"-"},"content":"    this.recipientLabelType \u003d this.getSelectionLabelType(model.recipientType);"},{"lineNumber":69,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":70,"author":{"gitId":"-"},"content":""},{"lineNumber":71,"author":{"gitId":"-"},"content":"  @Input()"},{"lineNumber":72,"author":{"gitId":"-"},"content":"  isQuestionCountOne: boolean \u003d false;"},{"lineNumber":73,"author":{"gitId":"-"},"content":""},{"lineNumber":74,"author":{"gitId":"domlimm"},"content":"  @Input()"},{"lineNumber":75,"author":{"gitId":"domlimm"},"content":"  isSubmitAllClicked: boolean \u003d false;"},{"lineNumber":76,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":77,"author":{"gitId":"domlimm"},"content":"  @Output()"},{"lineNumber":78,"author":{"gitId":"domlimm"},"content":"  isSubmitAllClickedChange: EventEmitter\u003cboolean\u003e \u003d new EventEmitter\u003cboolean\u003e();"},{"lineNumber":79,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":80,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":81,"author":{"gitId":"-"},"content":"  formModelChange: EventEmitter\u003cQuestionSubmissionFormModel\u003e \u003d new EventEmitter();"},{"lineNumber":82,"author":{"gitId":"-"},"content":""},{"lineNumber":83,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":84,"author":{"gitId":"-"},"content":"  responsesSave: EventEmitter\u003cQuestionSubmissionFormModel\u003e \u003d new EventEmitter();"},{"lineNumber":85,"author":{"gitId":"-"},"content":""},{"lineNumber":86,"author":{"gitId":"-"},"content":"  model: QuestionSubmissionFormModel \u003d {"},{"lineNumber":87,"author":{"gitId":"-"},"content":"    isLoading: false,"},{"lineNumber":88,"author":{"gitId":"-"},"content":"    isLoaded: false,"},{"lineNumber":89,"author":{"gitId":"-"},"content":"    feedbackQuestionId: \u0027\u0027,"},{"lineNumber":90,"author":{"gitId":"-"},"content":""},{"lineNumber":91,"author":{"gitId":"-"},"content":"    questionNumber: 0,"},{"lineNumber":92,"author":{"gitId":"-"},"content":"    questionBrief: \u0027\u0027,"},{"lineNumber":93,"author":{"gitId":"-"},"content":"    questionDescription: \u0027\u0027,"},{"lineNumber":94,"author":{"gitId":"-"},"content":""},{"lineNumber":95,"author":{"gitId":"-"},"content":"    giverType: FeedbackParticipantType.STUDENTS,"},{"lineNumber":96,"author":{"gitId":"-"},"content":"    recipientType: FeedbackParticipantType.STUDENTS,"},{"lineNumber":97,"author":{"gitId":"-"},"content":"    recipientList: [],"},{"lineNumber":98,"author":{"gitId":"-"},"content":"    recipientSubmissionForms: [],"},{"lineNumber":99,"author":{"gitId":"-"},"content":""},{"lineNumber":100,"author":{"gitId":"-"},"content":"    questionType: FeedbackQuestionType.TEXT,"},{"lineNumber":101,"author":{"gitId":"-"},"content":"    questionDetails: {"},{"lineNumber":102,"author":{"gitId":"-"},"content":"      questionText: \u0027\u0027,"},{"lineNumber":103,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.TEXT,"},{"lineNumber":104,"author":{"gitId":"-"},"content":"    } as FeedbackTextQuestionDetails,"},{"lineNumber":105,"author":{"gitId":"-"},"content":""},{"lineNumber":106,"author":{"gitId":"-"},"content":"    numberOfEntitiesToGiveFeedbackToSetting: NumberOfEntitiesToGiveFeedbackToSetting.UNLIMITED,"},{"lineNumber":107,"author":{"gitId":"-"},"content":"    customNumberOfEntitiesToGiveFeedbackTo: 0,"},{"lineNumber":108,"author":{"gitId":"-"},"content":""},{"lineNumber":109,"author":{"gitId":"-"},"content":"    showGiverNameTo: [],"},{"lineNumber":110,"author":{"gitId":"-"},"content":"    showRecipientNameTo: [],"},{"lineNumber":111,"author":{"gitId":"-"},"content":"    showResponsesTo: [],"},{"lineNumber":112,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":113,"author":{"gitId":"-"},"content":""},{"lineNumber":114,"author":{"gitId":"-"},"content":"  recipientLabelType: FeedbackRecipientLabelType \u003d FeedbackRecipientLabelType.INCLUDE_NAME;"},{"lineNumber":115,"author":{"gitId":"-"},"content":"  isSectionTeamShown: boolean \u003d false;"},{"lineNumber":116,"author":{"gitId":"-"},"content":""},{"lineNumber":117,"author":{"gitId":"-"},"content":"  @Output()"},{"lineNumber":118,"author":{"gitId":"-"},"content":"  deleteCommentEvent: EventEmitter\u003cnumber\u003e \u003d new EventEmitter();"},{"lineNumber":119,"author":{"gitId":"-"},"content":""},{"lineNumber":120,"author":{"gitId":"-"},"content":"  visibilityStateMachine: VisibilityStateMachine;"},{"lineNumber":121,"author":{"gitId":"-"},"content":"  allowedToHaveParticipantComment: boolean \u003d false;"},{"lineNumber":122,"author":{"gitId":"-"},"content":"  isEveryRecipientSorted: boolean \u003d false;"},{"lineNumber":123,"author":{"gitId":"-"},"content":""},{"lineNumber":124,"author":{"gitId":"-"},"content":"  constructor(private feedbackQuestionsService: FeedbackQuestionsService,"},{"lineNumber":125,"author":{"gitId":"-"},"content":"              private feedbackResponseService: FeedbackResponsesService) {"},{"lineNumber":126,"author":{"gitId":"-"},"content":"    this.visibilityStateMachine \u003d"},{"lineNumber":127,"author":{"gitId":"-"},"content":"        this.feedbackQuestionsService.getNewVisibilityStateMachine("},{"lineNumber":128,"author":{"gitId":"-"},"content":"            this.model.giverType, this.model.recipientType);"},{"lineNumber":129,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":130,"author":{"gitId":"-"},"content":""},{"lineNumber":131,"author":{"gitId":"-"},"content":"  get hasSectionTeam(): boolean {"},{"lineNumber":132,"author":{"gitId":"-"},"content":"    if (this.formMode \u003d\u003d\u003d QuestionSubmissionFormMode.FLEXIBLE_RECIPIENT) {"},{"lineNumber":133,"author":{"gitId":"-"},"content":"      switch (this.recipientLabelType) {"},{"lineNumber":134,"author":{"gitId":"-"},"content":"        case FeedbackRecipientLabelType.INCLUDE_SECTION:"},{"lineNumber":135,"author":{"gitId":"-"},"content":"        case FeedbackRecipientLabelType.INCLUDE_TEAM:"},{"lineNumber":136,"author":{"gitId":"-"},"content":"          return true;"},{"lineNumber":137,"author":{"gitId":"-"},"content":"        default:"},{"lineNumber":138,"author":{"gitId":"-"},"content":"          return false;"},{"lineNumber":139,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":140,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":141,"author":{"gitId":"-"},"content":"    return false;"},{"lineNumber":142,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":143,"author":{"gitId":"-"},"content":""},{"lineNumber":144,"author":{"gitId":"-"},"content":"  ngDoCheck(): void {"},{"lineNumber":145,"author":{"gitId":"-"},"content":"    if (this.model.isLoaded \u0026\u0026 !this.isEveryRecipientSorted) {"},{"lineNumber":146,"author":{"gitId":"-"},"content":"      this.sortRecipientsByName();"},{"lineNumber":147,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":148,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":149,"author":{"gitId":"domlimm"},"content":"    if (this.model.recipientSubmissionForms.some("},{"lineNumber":150,"author":{"gitId":"domlimm"},"content":"      (response) \u003d\u003e response.responseId.length \u003e 0) \u0026\u0026 !this.isSaved) {"},{"lineNumber":151,"author":{"gitId":"domlimm"},"content":"      this.isSaved \u003d true;"},{"lineNumber":152,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":153,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":154,"author":{"gitId":"domlimm"},"content":"    if (this.hasResponseChanged) {"},{"lineNumber":155,"author":{"gitId":"domlimm"},"content":"      this.isSaved \u003d false;"},{"lineNumber":156,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":157,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":158,"author":{"gitId":"domlimm"},"content":"    if (this.isSubmitAllClicked) {"},{"lineNumber":159,"author":{"gitId":"domlimm"},"content":"      if (this.model.recipientSubmissionForms.some((response) \u003d\u003e response.responseId.length \u003e 0)) {"},{"lineNumber":160,"author":{"gitId":"domlimm"},"content":"        this.isSaved \u003d true;"},{"lineNumber":161,"author":{"gitId":"domlimm"},"content":"      } else if (this.model.recipientSubmissionForms.every((form) \u003d\u003e form.responseId.length \u003d\u003d\u003d 0)) {"},{"lineNumber":162,"author":{"gitId":"domlimm"},"content":"        this.isSaved \u003d false;"},{"lineNumber":163,"author":{"gitId":"domlimm"},"content":"      }"},{"lineNumber":164,"author":{"gitId":"domlimm"},"content":"    }"},{"lineNumber":165,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":166,"author":{"gitId":"-"},"content":""},{"lineNumber":167,"author":{"gitId":"-"},"content":"  private compareByName(firstRecipient: FeedbackResponseRecipient,"},{"lineNumber":168,"author":{"gitId":"-"},"content":"     secondRecipient: FeedbackResponseRecipient): number {"},{"lineNumber":169,"author":{"gitId":"-"},"content":"    return firstRecipient.recipientName.localeCompare(secondRecipient.recipientName);"},{"lineNumber":170,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":171,"author":{"gitId":"-"},"content":""},{"lineNumber":172,"author":{"gitId":"-"},"content":"  private compareBySection(firstRecipient: FeedbackResponseRecipient,"},{"lineNumber":173,"author":{"gitId":"-"},"content":"     secondRecipient: FeedbackResponseRecipient): number {"},{"lineNumber":174,"author":{"gitId":"-"},"content":""},{"lineNumber":175,"author":{"gitId":"-"},"content":"    if (firstRecipient.recipientSection \u0026\u0026 secondRecipient.recipientSection) {"},{"lineNumber":176,"author":{"gitId":"-"},"content":"      return firstRecipient.recipientSection.localeCompare(secondRecipient.recipientSection);"},{"lineNumber":177,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":178,"author":{"gitId":"-"},"content":""},{"lineNumber":179,"author":{"gitId":"-"},"content":"    if (firstRecipient.recipientSection) {"},{"lineNumber":180,"author":{"gitId":"-"},"content":"      return -1;"},{"lineNumber":181,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":182,"author":{"gitId":"-"},"content":""},{"lineNumber":183,"author":{"gitId":"-"},"content":"    if (secondRecipient.recipientSection) {"},{"lineNumber":184,"author":{"gitId":"-"},"content":"      return 1;"},{"lineNumber":185,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":186,"author":{"gitId":"-"},"content":""},{"lineNumber":187,"author":{"gitId":"-"},"content":"    return 0;"},{"lineNumber":188,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":189,"author":{"gitId":"-"},"content":""},{"lineNumber":190,"author":{"gitId":"-"},"content":"  private compareByTeam(firstRecipient: FeedbackResponseRecipient,"},{"lineNumber":191,"author":{"gitId":"-"},"content":"     secondRecipient: FeedbackResponseRecipient): number {"},{"lineNumber":192,"author":{"gitId":"-"},"content":""},{"lineNumber":193,"author":{"gitId":"-"},"content":"    if (firstRecipient.recipientTeam \u0026\u0026 secondRecipient.recipientTeam) {"},{"lineNumber":194,"author":{"gitId":"-"},"content":"      return firstRecipient.recipientTeam.localeCompare(secondRecipient.recipientTeam);"},{"lineNumber":195,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":196,"author":{"gitId":"-"},"content":""},{"lineNumber":197,"author":{"gitId":"-"},"content":"    if (firstRecipient.recipientTeam) {"},{"lineNumber":198,"author":{"gitId":"-"},"content":"      return -1;"},{"lineNumber":199,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":200,"author":{"gitId":"-"},"content":""},{"lineNumber":201,"author":{"gitId":"-"},"content":"    if (secondRecipient.recipientTeam) {"},{"lineNumber":202,"author":{"gitId":"-"},"content":"      return 1;"},{"lineNumber":203,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":204,"author":{"gitId":"-"},"content":""},{"lineNumber":205,"author":{"gitId":"-"},"content":"    return 0;"},{"lineNumber":206,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":207,"author":{"gitId":"-"},"content":""},{"lineNumber":208,"author":{"gitId":"-"},"content":"  private updateSubmissionFormIndexes(): void {"},{"lineNumber":209,"author":{"gitId":"-"},"content":"    const indexes: Map\u003cString, number\u003e \u003d new Map();"},{"lineNumber":210,"author":{"gitId":"-"},"content":"    this.model.recipientList.forEach((recipient: FeedbackResponseRecipient, index: number) \u003d\u003e {"},{"lineNumber":211,"author":{"gitId":"-"},"content":"      indexes.set(recipient.recipientIdentifier, index + 1);"},{"lineNumber":212,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":213,"author":{"gitId":"-"},"content":""},{"lineNumber":214,"author":{"gitId":"-"},"content":"    this.model.recipientSubmissionForms.sort((firstRecipient: FeedbackResponseRecipientSubmissionFormModel,"},{"lineNumber":215,"author":{"gitId":"-"},"content":"      secondRecipient: FeedbackResponseRecipientSubmissionFormModel) \u003d\u003e {"},{"lineNumber":216,"author":{"gitId":"-"},"content":"      const firstRecipientIndex: number \u003d indexes.get(firstRecipient.recipientIdentifier) || Number.MAX_SAFE_INTEGER;"},{"lineNumber":217,"author":{"gitId":"-"},"content":"      const secondRecipientIndex: number \u003d indexes.get(secondRecipient.recipientIdentifier) || Number.MAX_SAFE_INTEGER;"},{"lineNumber":218,"author":{"gitId":"-"},"content":""},{"lineNumber":219,"author":{"gitId":"-"},"content":"      return firstRecipientIndex - secondRecipientIndex;"},{"lineNumber":220,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":221,"author":{"gitId":"-"},"content":"    this.isEveryRecipientSorted \u003d true;"},{"lineNumber":222,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":223,"author":{"gitId":"-"},"content":""},{"lineNumber":224,"author":{"gitId":"-"},"content":"  sortRecipientsByName(): void {"},{"lineNumber":225,"author":{"gitId":"-"},"content":"    this.model.recipientList.sort(this.compareByName);"},{"lineNumber":226,"author":{"gitId":"-"},"content":"    this.updateSubmissionFormIndexes();"},{"lineNumber":227,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":228,"author":{"gitId":"-"},"content":""},{"lineNumber":229,"author":{"gitId":"-"},"content":"  private sortRecipientsBySectionTeam(): void {"},{"lineNumber":230,"author":{"gitId":"-"},"content":"    if (this.recipientLabelType \u003d\u003d\u003d FeedbackRecipientLabelType.INCLUDE_SECTION) {"},{"lineNumber":231,"author":{"gitId":"-"},"content":"      this.model.recipientList.sort((firstRecipient, secondRecipient) \u003d\u003e {"},{"lineNumber":232,"author":{"gitId":"-"},"content":"        return this.compareBySection(firstRecipient, secondRecipient)"},{"lineNumber":233,"author":{"gitId":"-"},"content":"          || this.compareByTeam(firstRecipient, secondRecipient);"},{"lineNumber":234,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":235,"author":{"gitId":"-"},"content":""},{"lineNumber":236,"author":{"gitId":"-"},"content":"    } else if (this.recipientLabelType \u003d\u003d\u003d FeedbackRecipientLabelType.INCLUDE_TEAM) {"},{"lineNumber":237,"author":{"gitId":"-"},"content":"      this.model.recipientList.sort(this.compareByTeam);"},{"lineNumber":238,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":239,"author":{"gitId":"-"},"content":"    this.updateSubmissionFormIndexes();"},{"lineNumber":240,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":241,"author":{"gitId":"-"},"content":""},{"lineNumber":242,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":243,"author":{"gitId":"-"},"content":"   * Tracks submission form for each recipient by the index in the array."},{"lineNumber":244,"author":{"gitId":"-"},"content":"   *"},{"lineNumber":245,"author":{"gitId":"-"},"content":"   * @see https://angular.io/api/common/NgForOf#properties"},{"lineNumber":246,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":247,"author":{"gitId":"-"},"content":"  trackRecipientSubmissionFormByFn(index: number): any {"},{"lineNumber":248,"author":{"gitId":"-"},"content":"    return index;"},{"lineNumber":249,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":250,"author":{"gitId":"-"},"content":""},{"lineNumber":251,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":252,"author":{"gitId":"-"},"content":"   * Gets recipient name in {@code FIXED_RECIPIENT} mode."},{"lineNumber":253,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":254,"author":{"gitId":"-"},"content":"  getRecipientName(recipientIdentifier: string): string {"},{"lineNumber":255,"author":{"gitId":"-"},"content":"    const recipient: FeedbackResponseRecipient | undefined \u003d"},{"lineNumber":256,"author":{"gitId":"-"},"content":"        this.model.recipientList.find("},{"lineNumber":257,"author":{"gitId":"-"},"content":"            (r: FeedbackResponseRecipient) \u003d\u003e r.recipientIdentifier \u003d\u003d\u003d recipientIdentifier);"},{"lineNumber":258,"author":{"gitId":"-"},"content":"    return recipient ? recipient.recipientName : \u0027Unknown\u0027;"},{"lineNumber":259,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":260,"author":{"gitId":"-"},"content":""},{"lineNumber":261,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":262,"author":{"gitId":"-"},"content":"   * Checks whether the recipient is already selected in {@code FLEXIBLE_RECIPIENT} mode."},{"lineNumber":263,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":264,"author":{"gitId":"-"},"content":"  isRecipientSelected(recipient: FeedbackResponseRecipient): boolean {"},{"lineNumber":265,"author":{"gitId":"-"},"content":"    return this.model.recipientSubmissionForms.some("},{"lineNumber":266,"author":{"gitId":"-"},"content":"        (recipientSubmissionFormModel: FeedbackResponseRecipientSubmissionFormModel) \u003d\u003e"},{"lineNumber":267,"author":{"gitId":"-"},"content":"            recipientSubmissionFormModel.recipientIdentifier \u003d\u003d\u003d recipient.recipientIdentifier);"},{"lineNumber":268,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":269,"author":{"gitId":"-"},"content":""},{"lineNumber":270,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":271,"author":{"gitId":"-"},"content":"   * Triggers the change of the recipient submission form."},{"lineNumber":272,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":273,"author":{"gitId":"-"},"content":"  triggerRecipientSubmissionFormChange(index: number, field: string, data: any): void {"},{"lineNumber":274,"author":{"gitId":"domlimm"},"content":"    this.hasResponseChanged \u003d true;"},{"lineNumber":275,"author":{"gitId":"domlimm"},"content":"    this.isSubmitAllClickedChange.emit(false);"},{"lineNumber":276,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":277,"author":{"gitId":"-"},"content":"    const recipientSubmissionForms: FeedbackResponseRecipientSubmissionFormModel[] \u003d"},{"lineNumber":278,"author":{"gitId":"-"},"content":"        this.model.recipientSubmissionForms.slice();"},{"lineNumber":279,"author":{"gitId":"-"},"content":"    recipientSubmissionForms[index] \u003d {"},{"lineNumber":280,"author":{"gitId":"-"},"content":"      ...recipientSubmissionForms[index],"},{"lineNumber":281,"author":{"gitId":"-"},"content":"      [field]: data,"},{"lineNumber":282,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":283,"author":{"gitId":"-"},"content":""},{"lineNumber":284,"author":{"gitId":"-"},"content":"    this.formModelChange.emit({"},{"lineNumber":285,"author":{"gitId":"-"},"content":"      ...this.model,"},{"lineNumber":286,"author":{"gitId":"-"},"content":"      recipientSubmissionForms,"},{"lineNumber":287,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":288,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":289,"author":{"gitId":"-"},"content":""},{"lineNumber":290,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":291,"author":{"gitId":"-"},"content":"   * Triggers deletion of a participant comment associated with the response."},{"lineNumber":292,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":293,"author":{"gitId":"-"},"content":"  triggerDeleteCommentEvent(index: number): void {"},{"lineNumber":294,"author":{"gitId":"-"},"content":"    this.deleteCommentEvent.emit(index);"},{"lineNumber":295,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":296,"author":{"gitId":"-"},"content":""},{"lineNumber":297,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":298,"author":{"gitId":"-"},"content":"   * Add new participant comment to response with index."},{"lineNumber":299,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":300,"author":{"gitId":"-"},"content":"  addNewParticipantCommentToResponse(index: number): void {"},{"lineNumber":301,"author":{"gitId":"-"},"content":"    this.triggerRecipientSubmissionFormChange(index, \u0027commentByGiver\u0027, {"},{"lineNumber":302,"author":{"gitId":"-"},"content":"      commentEditFormModel: {"},{"lineNumber":303,"author":{"gitId":"-"},"content":"        commentText: \u0027\u0027,"},{"lineNumber":304,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":305,"author":{"gitId":"-"},"content":""},{"lineNumber":306,"author":{"gitId":"-"},"content":"      isEditing: true,"},{"lineNumber":307,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":308,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":309,"author":{"gitId":"-"},"content":""},{"lineNumber":310,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":311,"author":{"gitId":"-"},"content":"   * Cancel adding new participant comment."},{"lineNumber":312,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":313,"author":{"gitId":"-"},"content":"  cancelAddingNewParticipantComment(index: number): void {"},{"lineNumber":314,"author":{"gitId":"-"},"content":"    this.triggerRecipientSubmissionFormChange(index, \u0027commentByGiver\u0027, null);"},{"lineNumber":315,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":316,"author":{"gitId":"-"},"content":""},{"lineNumber":317,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":318,"author":{"gitId":"-"},"content":"   * Discards the current editing and restore the original comment."},{"lineNumber":319,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":320,"author":{"gitId":"-"},"content":"  discardEditedParticipantComment(index: number): void {"},{"lineNumber":321,"author":{"gitId":"-"},"content":"    const commentModel: CommentRowModel | undefined \u003d this.model.recipientSubmissionForms[index].commentByGiver;"},{"lineNumber":322,"author":{"gitId":"-"},"content":"    if (!commentModel || !commentModel.originalComment) {"},{"lineNumber":323,"author":{"gitId":"-"},"content":"      return;"},{"lineNumber":324,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":325,"author":{"gitId":"-"},"content":"    this.triggerRecipientSubmissionFormChange(index, \u0027commentByGiver\u0027,"},{"lineNumber":326,"author":{"gitId":"-"},"content":"        {"},{"lineNumber":327,"author":{"gitId":"-"},"content":"          ...commentModel,"},{"lineNumber":328,"author":{"gitId":"-"},"content":"          commentEditFormModel: {"},{"lineNumber":329,"author":{"gitId":"-"},"content":"            commentText: commentModel.originalComment.commentText,"},{"lineNumber":330,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":331,"author":{"gitId":"-"},"content":"          isEditing: false,"},{"lineNumber":332,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":333,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":334,"author":{"gitId":"-"},"content":""},{"lineNumber":335,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":336,"author":{"gitId":"-"},"content":"   * Checks whether the response is empty or not."},{"lineNumber":337,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":338,"author":{"gitId":"-"},"content":"  isFeedbackResponseDetailsEmpty(responseDetails: FeedbackResponseDetails): boolean {"},{"lineNumber":339,"author":{"gitId":"-"},"content":"    return this.feedbackResponseService.isFeedbackResponseDetailsEmpty("},{"lineNumber":340,"author":{"gitId":"-"},"content":"        this.model.questionType, responseDetails);"},{"lineNumber":341,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":342,"author":{"gitId":"-"},"content":""},{"lineNumber":343,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":344,"author":{"gitId":"-"},"content":"   * Updates validity of all responses in a question."},{"lineNumber":345,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":346,"author":{"gitId":"-"},"content":"  updateValidity(isValid: boolean): void {"},{"lineNumber":347,"author":{"gitId":"-"},"content":"    if (this.model.recipientSubmissionForms.length \u003d\u003d\u003d 0) { return; }"},{"lineNumber":348,"author":{"gitId":"-"},"content":"    const recipientSubmissionForms: FeedbackResponseRecipientSubmissionFormModel[] \u003d"},{"lineNumber":349,"author":{"gitId":"-"},"content":"        this.model.recipientSubmissionForms.slice().map("},{"lineNumber":350,"author":{"gitId":"-"},"content":"            (model: FeedbackResponseRecipientSubmissionFormModel) \u003d\u003e ({ ...model, isValid }));"},{"lineNumber":351,"author":{"gitId":"-"},"content":"    this.formModelChange.emit({"},{"lineNumber":352,"author":{"gitId":"-"},"content":"      ...this.model,"},{"lineNumber":353,"author":{"gitId":"-"},"content":"      recipientSubmissionForms,"},{"lineNumber":354,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":355,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":356,"author":{"gitId":"-"},"content":""},{"lineNumber":357,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":358,"author":{"gitId":"-"},"content":"   * Triggers saving of responses for the specific question."},{"lineNumber":359,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":360,"author":{"gitId":"-"},"content":"  saveFeedbackResponses(): void {"},{"lineNumber":361,"author":{"gitId":"domlimm"},"content":"    this.isSaved \u003d true;"},{"lineNumber":362,"author":{"gitId":"domlimm"},"content":"    this.hasResponseChanged \u003d false;"},{"lineNumber":363,"author":{"gitId":"-"},"content":"    this.responsesSave.emit(this.model);"},{"lineNumber":364,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":365,"author":{"gitId":"-"},"content":""},{"lineNumber":366,"author":{"gitId":"-"},"content":"  getSelectionLabelType(recipientType: FeedbackParticipantType): FeedbackRecipientLabelType {"},{"lineNumber":367,"author":{"gitId":"-"},"content":"    switch (recipientType) {"},{"lineNumber":368,"author":{"gitId":"-"},"content":"      case FeedbackParticipantType.STUDENTS:"},{"lineNumber":369,"author":{"gitId":"-"},"content":"      case FeedbackParticipantType.STUDENTS_EXCLUDING_SELF:"},{"lineNumber":370,"author":{"gitId":"-"},"content":"        return FeedbackRecipientLabelType.INCLUDE_SECTION;"},{"lineNumber":371,"author":{"gitId":"-"},"content":"      case FeedbackParticipantType.STUDENTS_IN_SAME_SECTION:"},{"lineNumber":372,"author":{"gitId":"-"},"content":"        return FeedbackRecipientLabelType.INCLUDE_TEAM;"},{"lineNumber":373,"author":{"gitId":"-"},"content":"      default:"},{"lineNumber":374,"author":{"gitId":"-"},"content":"        return FeedbackRecipientLabelType.INCLUDE_NAME;"},{"lineNumber":375,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":376,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":377,"author":{"gitId":"-"},"content":""},{"lineNumber":378,"author":{"gitId":"-"},"content":"  getSelectionOptionLabel(recipient: FeedbackResponseRecipient): string {"},{"lineNumber":379,"author":{"gitId":"-"},"content":"    if (!this.isSectionTeamShown) {"},{"lineNumber":380,"author":{"gitId":"-"},"content":"      return recipient.recipientName;"},{"lineNumber":381,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":382,"author":{"gitId":"-"},"content":""},{"lineNumber":383,"author":{"gitId":"-"},"content":"    if (recipient.recipientSection \u0026\u0026 recipient.recipientTeam) {"},{"lineNumber":384,"author":{"gitId":"-"},"content":"      return `${recipient.recipientSection} / ${recipient.recipientTeam} | ${recipient.recipientName}`;"},{"lineNumber":385,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":386,"author":{"gitId":"-"},"content":""},{"lineNumber":387,"author":{"gitId":"-"},"content":"    if (recipient.recipientSection) {"},{"lineNumber":388,"author":{"gitId":"-"},"content":"      return `${recipient.recipientSection} | ${recipient.recipientName}`;"},{"lineNumber":389,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":390,"author":{"gitId":"-"},"content":""},{"lineNumber":391,"author":{"gitId":"-"},"content":"    if (recipient.recipientTeam) {"},{"lineNumber":392,"author":{"gitId":"-"},"content":"      return `${recipient.recipientTeam} | ${recipient.recipientName}`;"},{"lineNumber":393,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":394,"author":{"gitId":"-"},"content":""},{"lineNumber":395,"author":{"gitId":"-"},"content":"    return recipient.recipientName;"},{"lineNumber":396,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":397,"author":{"gitId":"-"},"content":""},{"lineNumber":398,"author":{"gitId":"-"},"content":"  toggleSectionTeam(event: Event): void {"},{"lineNumber":399,"author":{"gitId":"-"},"content":"    const checkbox : HTMLInputElement \u003d event.target as HTMLInputElement;"},{"lineNumber":400,"author":{"gitId":"-"},"content":"    if (checkbox.checked) {"},{"lineNumber":401,"author":{"gitId":"-"},"content":"      this.isSectionTeamShown \u003d true;"},{"lineNumber":402,"author":{"gitId":"-"},"content":"      this.sortRecipientsBySectionTeam();"},{"lineNumber":403,"author":{"gitId":"-"},"content":"    } else {"},{"lineNumber":404,"author":{"gitId":"-"},"content":"      this.isSectionTeamShown \u003d false;"},{"lineNumber":405,"author":{"gitId":"-"},"content":"      this.sortRecipientsByName();"},{"lineNumber":406,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":407,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":408,"author":{"gitId":"-"},"content":""},{"lineNumber":409,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":410,"author":{"gitId":"-"},"content":"   * Triggers adding a col-12 if MCQ Dropdown is enabled."},{"lineNumber":411,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":412,"author":{"gitId":"-"},"content":"  refreshCssForDropdownMCQ(add: boolean): void {"},{"lineNumber":413,"author":{"gitId":"-"},"content":"    this.isMCQDropDownEnabled \u003d add;"},{"lineNumber":414,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":415,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"domlimm":30,"-":385}},{"path":"src/web/app/pages-instructor/instructor-session-edit-page/instructor-session-edit-page.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003ctm-loading-retry [shouldShowRetry]\u003d\"hasLoadingFeedbackSessionFailed\" [message]\u003d\"\u0027Failed to load feedback session\u0027\" (retryEvent)\u003d\"loadFeedbackSession()\"\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  \u003ctm-session-edit-form *tmIsLoading\u003d\"isLoadingFeedbackSession\" [formMode]\u003d\"SessionEditFormMode.EDIT\" [(model)]\u003d\"sessionEditFormModel\" (editExistingSessionEvent)\u003d\"editExistingSessionHandler()\" (cancelEditingSessionEvent)\u003d\"cancelEditingSessionHandler()\""},{"lineNumber":3,"author":{"gitId":"-"},"content":"                      (deleteExistingSessionEvent)\u003d\"deleteExistingSessionHandler()\" (copyCurrentSessionEvent)\u003d\"copyCurrentSession()\"\u003e\u003c/tm-session-edit-form\u003e"},{"lineNumber":4,"author":{"gitId":"-"},"content":"\u003c/tm-loading-retry\u003e"},{"lineNumber":5,"author":{"gitId":"-"},"content":""},{"lineNumber":6,"author":{"gitId":"-"},"content":"\u003ctm-loading-retry [shouldShowRetry]\u003d\"hasLoadingFeedbackQuestionsFailed\" [message]\u003d\"\u0027Failed to load feedback questions\u0027\" (retryEvent)\u003d\"loadFeedbackQuestions()\"\u003e"},{"lineNumber":7,"author":{"gitId":"-"},"content":"  \u003cdiv *ngIf\u003d\"!isLoadingFeedbackQuestions \u0026\u0026 questionEditFormModels.length\" class\u003d\"offset-md-10 margin-vertical-20px\"\u003e"},{"lineNumber":8,"author":{"gitId":"-"},"content":"    \u003cbutton id\u003d\"btn-collapse-expand\" class\u003d\"btn expand-btn btn-light margin-top-30px\" (click)\u003d\"isAllCollapsed ? expandAll() : collapseAll()\"\u003e"},{"lineNumber":9,"author":{"gitId":"-"},"content":"      {{isAllCollapsed ? \"Expand\" : \"Collapse\" }} All"},{"lineNumber":10,"author":{"gitId":"-"},"content":"    \u003c/button\u003e"},{"lineNumber":11,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":12,"author":{"gitId":"-"},"content":""},{"lineNumber":13,"author":{"gitId":"-"},"content":"  \u003cdiv *tmIsLoading\u003d\"isLoadingFeedbackQuestions\"\u003e"},{"lineNumber":14,"author":{"gitId":"-"},"content":"    \u003cdiv *ngFor\u003d\"let questionEditFormModel of questionEditFormModels; let i \u003d index; trackBy: trackQuestionEditFormByFn\"\u003e"},{"lineNumber":15,"author":{"gitId":"-"},"content":"      \u003ctm-question-edit-form [formMode]\u003d\"QuestionEditFormMode.EDIT\""},{"lineNumber":16,"author":{"gitId":"-"},"content":"                             [numOfQuestions]\u003d\"questionEditFormModels.length\""},{"lineNumber":17,"author":{"gitId":"-"},"content":"                             (saveExistingQuestionEvent)\u003d\"saveExistingQuestionHandler(i)\""},{"lineNumber":18,"author":{"gitId":"-"},"content":"                             (discardExistingQuestionChangesEvent)\u003d\"discardExistingQuestionHandler(i)\""},{"lineNumber":19,"author":{"gitId":"-"},"content":"                             (duplicateCurrentQuestionEvent)\u003d\"duplicateCurrentQuestionHandler(i)\""},{"lineNumber":20,"author":{"gitId":"-"},"content":"                             (deleteCurrentQuestionEvent)\u003d\"deleteExistingQuestionHandler(i)\""},{"lineNumber":21,"author":{"gitId":"cedricongjh"},"content":"                             [(formModel)]\u003d\"questionEditFormModels[i]\""},{"lineNumber":22,"author":{"gitId":"cedricongjh"},"content":"                             [isQuestionPublished]\u003d\"sessionEditFormModel.publishStatus \u003d\u003d\u003d FeedbackSessionPublishStatus.PUBLISHED\"\u003e\u003c/tm-question-edit-form\u003e"},{"lineNumber":23,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":24,"author":{"gitId":"-"},"content":"    \u003ca class\u003d\"d-block text-end cursor-pointer\" (click)\u003d\"scrollToTopOfPage()\"\u003e"},{"lineNumber":25,"author":{"gitId":"-"},"content":"      Back to Top \u003ci class\u003d\"fas fa-arrow-up\"\u003e\u003c/i\u003e"},{"lineNumber":26,"author":{"gitId":"-"},"content":"    \u003c/a\u003e"},{"lineNumber":27,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":28,"author":{"gitId":"-"},"content":"  \u003cdiv *tmIsLoading\u003d\"isAddingFromTemplate\"\u003e\u003c/div\u003e"},{"lineNumber":29,"author":{"gitId":"-"},"content":"  \u003cbr/\u003e"},{"lineNumber":30,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"card\" *ngIf\u003d\"!isLoadingFeedbackQuestions \u0026\u0026 !isAddingQuestionPanelExpanded\"\u003e"},{"lineNumber":31,"author":{"gitId":"-"},"content":"    \u003ctm-adding-question-panel (templateQuestionModalEvent)\u003d\"templateQuestionModalHandler()\""},{"lineNumber":32,"author":{"gitId":"-"},"content":"                              (populateAndShowNewQuestionFormEvent)\u003d\"populateAndShowNewQuestionForm($event)\""},{"lineNumber":33,"author":{"gitId":"-"},"content":"                              (copyQuestionsFromOtherSessionsEvent)\u003d\"copyQuestionsFromOtherSessionsHandler()\""},{"lineNumber":34,"author":{"gitId":"-"},"content":"                              [isCopyingQuestion]\u003d\"isCopyingQuestion\"\u003e\u003c/tm-adding-question-panel\u003e"},{"lineNumber":35,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":36,"author":{"gitId":"-"},"content":"  \u003ctm-question-edit-form *ngIf\u003d\"isAddingQuestionPanelExpanded\""},{"lineNumber":37,"author":{"gitId":"-"},"content":"                         [formMode]\u003d\"QuestionEditFormMode.ADD\""},{"lineNumber":38,"author":{"gitId":"-"},"content":"                         [numOfQuestions]\u003d\"questionEditFormModels.length + 1\""},{"lineNumber":39,"author":{"gitId":"-"},"content":"                         (discardNewQuestionEvent)\u003d\"isAddingQuestionPanelExpanded \u003d false\""},{"lineNumber":40,"author":{"gitId":"-"},"content":"                         (createNewQuestionEvent)\u003d\"createNewQuestionHandler()\""},{"lineNumber":41,"author":{"gitId":"-"},"content":"                         [(formModel)]\u003d\"newQuestionEditFormModel\""},{"lineNumber":42,"author":{"gitId":"-"},"content":"  \u003e\u003c/tm-question-edit-form\u003e"},{"lineNumber":43,"author":{"gitId":"-"},"content":"  \u003cbr/\u003e"},{"lineNumber":44,"author":{"gitId":"-"},"content":"  \u003cdiv *ngIf\u003d\"!isLoadingFeedbackQuestions\" class\u003d\"card\"\u003e"},{"lineNumber":45,"author":{"gitId":"-"},"content":"    \u003ctm-preview-session-panel [courseId]\u003d\"courseId\" [feedbackSessionName]\u003d\"feedbackSessionName\""},{"lineNumber":46,"author":{"gitId":"-"},"content":"                              [emailOfStudentToPreview]\u003d\"emailOfStudentToPreview\" [studentsOfCourse]\u003d\"studentsOfCourse\""},{"lineNumber":47,"author":{"gitId":"-"},"content":"                              [instructorsCanBePreviewedAs]\u003d\"instructorsOfCourse\" [emailOfInstructorToPreview]\u003d\"emailOfInstructorToPreview\""},{"lineNumber":48,"author":{"gitId":"-"},"content":"    \u003e\u003c/tm-preview-session-panel\u003e"},{"lineNumber":49,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":50,"author":{"gitId":"-"},"content":"\u003c/tm-loading-retry\u003e"},{"lineNumber":51,"author":{"gitId":"-"},"content":""},{"lineNumber":52,"author":{"gitId":"-"},"content":"\u003cng-template #modifiedTimestampsModal\u003e"},{"lineNumber":53,"author":{"gitId":"-"},"content":"  \u003cp\u003e"},{"lineNumber":54,"author":{"gitId":"-"},"content":"    The feedback session has been copied to all courses. However, changes are made to some session timings as the"},{"lineNumber":55,"author":{"gitId":"-"},"content":"    existing timings are no longer valid in these courses: {{ this.coursesOfModifiedSession.join(\u0027, \u0027) }}."},{"lineNumber":56,"author":{"gitId":"-"},"content":"    The changes are as follows:"},{"lineNumber":57,"author":{"gitId":"-"},"content":"  \u003c/p\u003e"},{"lineNumber":58,"author":{"gitId":"-"},"content":"  \u003ctable class\u003d\"table table-bordered\"\u003e"},{"lineNumber":59,"author":{"gitId":"-"},"content":"    \u003cthead\u003e"},{"lineNumber":60,"author":{"gitId":"-"},"content":"    \u003ctr\u003e"},{"lineNumber":61,"author":{"gitId":"-"},"content":"      \u003cth\u003eSession Name\u003c/th\u003e"},{"lineNumber":62,"author":{"gitId":"-"},"content":"      \u003cth\u003eTimings\u003c/th\u003e"},{"lineNumber":63,"author":{"gitId":"-"},"content":"      \u003cth\u003eExisting\u003c/th\u003e"},{"lineNumber":64,"author":{"gitId":"-"},"content":"      \u003cth\u003eModified\u003c/th\u003e"},{"lineNumber":65,"author":{"gitId":"-"},"content":"    \u003c/tr\u003e"},{"lineNumber":66,"author":{"gitId":"-"},"content":"    \u003c/thead\u003e"},{"lineNumber":67,"author":{"gitId":"-"},"content":"    \u003ctbody\u003e"},{"lineNumber":68,"author":{"gitId":"-"},"content":"    \u003cng-container *ngFor\u003d\"let session of this.modifiedSession | keyvalue\"\u003e"},{"lineNumber":69,"author":{"gitId":"-"},"content":"      \u003ctr [ngClass]\u003d\"{\u0027text-color-lightgray\u0027 : session.value.oldTimestamp.submissionStartTimestamp \u003d\u003d\u003d session.value.newTimestamp.submissionStartTimestamp}\"\u003e"},{"lineNumber":70,"author":{"gitId":"-"},"content":"        \u003ctd rowspan\u003d\"4\"\u003e{{ session.key }}\u003c/td\u003e"},{"lineNumber":71,"author":{"gitId":"-"},"content":"        \u003ctd\u003eSubmission opening time\u003c/td\u003e"},{"lineNumber":72,"author":{"gitId":"-"},"content":"        \u003ctd\u003e{{ session.value.oldTimestamp.submissionStartTimestamp }}\u003c/td\u003e"},{"lineNumber":73,"author":{"gitId":"-"},"content":"        \u003ctd\u003e{{ session.value.newTimestamp.submissionStartTimestamp }}\u003c/td\u003e"},{"lineNumber":74,"author":{"gitId":"-"},"content":"      \u003c/tr\u003e"},{"lineNumber":75,"author":{"gitId":"-"},"content":"      \u003ctr [ngClass]\u003d\"{\u0027text-color-lightgray\u0027 : session.value.oldTimestamp.submissionEndTimestamp \u003d\u003d\u003d session.value.newTimestamp.submissionEndTimestamp}\"\u003e"},{"lineNumber":76,"author":{"gitId":"-"},"content":"        \u003ctd\u003eSubmission closing time\u003c/td\u003e"},{"lineNumber":77,"author":{"gitId":"-"},"content":"        \u003ctd\u003e{{ session.value.oldTimestamp.submissionEndTimestamp }}\u003c/td\u003e"},{"lineNumber":78,"author":{"gitId":"-"},"content":"        \u003ctd\u003e{{ session.value.newTimestamp.submissionEndTimestamp }}\u003c/td\u003e"},{"lineNumber":79,"author":{"gitId":"-"},"content":"      \u003c/tr\u003e"},{"lineNumber":80,"author":{"gitId":"-"},"content":"      \u003ctr [ngClass]\u003d\"{\u0027text-color-lightgray\u0027 : session.value.oldTimestamp.sessionVisibleTimestamp \u003d\u003d\u003d session.value.newTimestamp.sessionVisibleTimestamp}\"\u003e"},{"lineNumber":81,"author":{"gitId":"-"},"content":"        \u003ctd\u003eSession visible time\u003c/td\u003e"},{"lineNumber":82,"author":{"gitId":"-"},"content":"        \u003ctd\u003e{{ session.value.oldTimestamp.sessionVisibleTimestamp }}\u003c/td\u003e"},{"lineNumber":83,"author":{"gitId":"-"},"content":"        \u003ctd\u003e{{ session.value.newTimestamp.sessionVisibleTimestamp }}\u003c/td\u003e"},{"lineNumber":84,"author":{"gitId":"-"},"content":"      \u003c/tr\u003e"},{"lineNumber":85,"author":{"gitId":"-"},"content":"      \u003ctr [ngClass]\u003d\"{\u0027text-color-lightgray\u0027 : session.value.oldTimestamp.responseVisibleTimestamp \u003d\u003d\u003d session.value.newTimestamp.responseVisibleTimestamp}\"\u003e"},{"lineNumber":86,"author":{"gitId":"-"},"content":"        \u003ctd\u003eResponse visible time\u003c/td\u003e"},{"lineNumber":87,"author":{"gitId":"-"},"content":"        \u003ctd\u003e{{ session.value.oldTimestamp.responseVisibleTimestamp }}\u003c/td\u003e"},{"lineNumber":88,"author":{"gitId":"-"},"content":"        \u003ctd\u003e{{ session.value.newTimestamp.responseVisibleTimestamp }}\u003c/td\u003e"},{"lineNumber":89,"author":{"gitId":"-"},"content":"      \u003c/tr\u003e"},{"lineNumber":90,"author":{"gitId":"-"},"content":"    \u003c/ng-container\u003e"},{"lineNumber":91,"author":{"gitId":"-"},"content":"    \u003c/tbody\u003e"},{"lineNumber":92,"author":{"gitId":"-"},"content":"  \u003c/table\u003e"},{"lineNumber":93,"author":{"gitId":"-"},"content":"  \u003cbr\u003e"},{"lineNumber":94,"author":{"gitId":"-"},"content":"  \u003cp\u003e"},{"lineNumber":95,"author":{"gitId":"-"},"content":"    Please modify the timings as necessary."},{"lineNumber":96,"author":{"gitId":"-"},"content":"  \u003c/p\u003e"},{"lineNumber":97,"author":{"gitId":"-"},"content":"\u003c/ng-template\u003e"}],"authorContributionMap":{"cedricongjh":2,"-":95}},{"path":"src/web/app/pages-instructor/instructor-session-edit-page/instructor-session-edit-page.component.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { ChangeDetectorRef, Component, OnInit, TemplateRef, ViewChild } from \u0027@angular/core\u0027;"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import { ActivatedRoute } from \u0027@angular/router\u0027;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"import { NgbModal, NgbModalRef } from \u0027@ng-bootstrap/ng-bootstrap\u0027;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import { forkJoin, Observable, of } from \u0027rxjs\u0027;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import { concatMap, finalize } from \u0027rxjs/operators\u0027;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import { CourseService } from \u0027../../../services/course.service\u0027;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import { DateTimeService } from \u0027../../../services/datetime.service\u0027;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import { DeadlineExtensionHelper } from \u0027../../../services/deadline-extension-helper\u0027;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":10,"author":{"gitId":"-"},"content":"  CommonVisibilitySetting,"},{"lineNumber":11,"author":{"gitId":"-"},"content":"  FeedbackQuestionsService,"},{"lineNumber":12,"author":{"gitId":"-"},"content":"  NewQuestionModel,"},{"lineNumber":13,"author":{"gitId":"-"},"content":"} from \u0027../../../services/feedback-questions.service\u0027;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import { FeedbackSessionActionsService } from \u0027../../../services/feedback-session-actions.service\u0027;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import { FeedbackSessionsService } from \u0027../../../services/feedback-sessions.service\u0027;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"import { InstructorService } from \u0027../../../services/instructor.service\u0027;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"import { NavigationService } from \u0027../../../services/navigation.service\u0027;"},{"lineNumber":18,"author":{"gitId":"-"},"content":"import { ProgressBarService } from \u0027../../../services/progress-bar.service\u0027;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"import { SimpleModalService } from \u0027../../../services/simple-modal.service\u0027;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"import { StatusMessageService } from \u0027../../../services/status-message.service\u0027;"},{"lineNumber":21,"author":{"gitId":"-"},"content":"import { StudentService } from \u0027../../../services/student.service\u0027;"},{"lineNumber":22,"author":{"gitId":"-"},"content":"import { TableComparatorService } from \u0027../../../services/table-comparator.service\u0027;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"import { TimezoneService } from \u0027../../../services/timezone.service\u0027;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"import { VisibilityStateMachine } from \u0027../../../services/visibility-state-machine\u0027;"},{"lineNumber":25,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":26,"author":{"gitId":"-"},"content":"  Course,"},{"lineNumber":27,"author":{"gitId":"-"},"content":"  Courses,"},{"lineNumber":28,"author":{"gitId":"-"},"content":"  FeedbackParticipantType,"},{"lineNumber":29,"author":{"gitId":"-"},"content":"  FeedbackQuestion,"},{"lineNumber":30,"author":{"gitId":"-"},"content":"  FeedbackQuestions,"},{"lineNumber":31,"author":{"gitId":"-"},"content":"  FeedbackQuestionType,"},{"lineNumber":32,"author":{"gitId":"-"},"content":"  FeedbackSession,"},{"lineNumber":33,"author":{"gitId":"-"},"content":"  FeedbackSessionPublishStatus,"},{"lineNumber":34,"author":{"gitId":"-"},"content":"  FeedbackSessions,"},{"lineNumber":35,"author":{"gitId":"-"},"content":"  FeedbackSessionSubmissionStatus,"},{"lineNumber":36,"author":{"gitId":"-"},"content":"  FeedbackTextQuestionDetails, FeedbackVisibilityType,"},{"lineNumber":37,"author":{"gitId":"-"},"content":"  HasResponses,"},{"lineNumber":38,"author":{"gitId":"-"},"content":"  Instructor,"},{"lineNumber":39,"author":{"gitId":"-"},"content":"  Instructors,"},{"lineNumber":40,"author":{"gitId":"-"},"content":"  NumberOfEntitiesToGiveFeedbackToSetting,"},{"lineNumber":41,"author":{"gitId":"-"},"content":"  ResponseVisibleSetting,"},{"lineNumber":42,"author":{"gitId":"-"},"content":"  SessionVisibleSetting,"},{"lineNumber":43,"author":{"gitId":"-"},"content":"  Student,"},{"lineNumber":44,"author":{"gitId":"-"},"content":"  Students,"},{"lineNumber":45,"author":{"gitId":"-"},"content":"} from \u0027../../../types/api-output\u0027;"},{"lineNumber":46,"author":{"gitId":"-"},"content":"import { Intent } from \u0027../../../types/api-request\u0027;"},{"lineNumber":47,"author":{"gitId":"-"},"content":"import { DateFormat, TimeFormat, getDefaultDateFormat, getLatestTimeFormat } from \u0027../../../types/datetime-const\u0027;"},{"lineNumber":48,"author":{"gitId":"-"},"content":"import { SortBy, SortOrder } from \u0027../../../types/sort-properties\u0027;"},{"lineNumber":49,"author":{"gitId":"-"},"content":"import { VisibilityControl } from \u0027../../../types/visibility-control\u0027;"},{"lineNumber":50,"author":{"gitId":"-"},"content":"import { CopySessionModalResult } from \u0027../../components/copy-session-modal/copy-session-modal-model\u0027;"},{"lineNumber":51,"author":{"gitId":"-"},"content":"import { CopySessionModalComponent } from \u0027../../components/copy-session-modal/copy-session-modal.component\u0027;"},{"lineNumber":52,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":53,"author":{"gitId":"-"},"content":"  ExtensionConfirmModalComponent,"},{"lineNumber":54,"author":{"gitId":"-"},"content":"  ExtensionModalType,"},{"lineNumber":55,"author":{"gitId":"-"},"content":"} from \u0027../../components/extension-confirm-modal/extension-confirm-modal.component\u0027;"},{"lineNumber":56,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":57,"author":{"gitId":"-"},"content":"  QuestionEditFormMode,"},{"lineNumber":58,"author":{"gitId":"-"},"content":"  QuestionEditFormModel,"},{"lineNumber":59,"author":{"gitId":"-"},"content":"} from \u0027../../components/question-edit-form/question-edit-form-model\u0027;"},{"lineNumber":60,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":61,"author":{"gitId":"-"},"content":"  SessionEditFormMode,"},{"lineNumber":62,"author":{"gitId":"-"},"content":"  SessionEditFormModel,"},{"lineNumber":63,"author":{"gitId":"-"},"content":"} from \u0027../../components/session-edit-form/session-edit-form-model\u0027;"},{"lineNumber":64,"author":{"gitId":"-"},"content":"import { SimpleModalType } from \u0027../../components/simple-modal/simple-modal-type\u0027;"},{"lineNumber":65,"author":{"gitId":"-"},"content":"import { ErrorMessageOutput } from \u0027../../error-message-output\u0027;"},{"lineNumber":66,"author":{"gitId":"-"},"content":"import { InstructorSessionBasePageComponent } from \u0027../instructor-session-base-page.component\u0027;"},{"lineNumber":67,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":68,"author":{"gitId":"-"},"content":"  InstructorExtensionTableColumnModel,"},{"lineNumber":69,"author":{"gitId":"-"},"content":"  StudentExtensionTableColumnModel,"},{"lineNumber":70,"author":{"gitId":"-"},"content":"} from \u0027../instructor-session-individual-extension-page/extension-table-column-model\u0027;"},{"lineNumber":71,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":72,"author":{"gitId":"-"},"content":"  FeedbackSessionTabModel,"},{"lineNumber":73,"author":{"gitId":"-"},"content":"} from \u0027./copy-questions-from-other-sessions-modal/copy-questions-from-other-sessions-modal-model\u0027;"},{"lineNumber":74,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":75,"author":{"gitId":"-"},"content":"  CopyQuestionsFromOtherSessionsModalComponent,"},{"lineNumber":76,"author":{"gitId":"-"},"content":"} from \u0027./copy-questions-from-other-sessions-modal/copy-questions-from-other-sessions-modal.component\u0027;"},{"lineNumber":77,"author":{"gitId":"-"},"content":"import { TemplateQuestionModalComponent } from \u0027./template-question-modal/template-question-modal.component\u0027;"},{"lineNumber":78,"author":{"gitId":"-"},"content":""},{"lineNumber":79,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":80,"author":{"gitId":"-"},"content":" * Instructor feedback session edit page."},{"lineNumber":81,"author":{"gitId":"-"},"content":" */"},{"lineNumber":82,"author":{"gitId":"-"},"content":"@Component({"},{"lineNumber":83,"author":{"gitId":"-"},"content":"  selector: \u0027tm-instructor-session-edit-page\u0027,"},{"lineNumber":84,"author":{"gitId":"-"},"content":"  templateUrl: \u0027./instructor-session-edit-page.component.html\u0027,"},{"lineNumber":85,"author":{"gitId":"-"},"content":"  styleUrls: [\u0027./instructor-session-edit-page.component.scss\u0027],"},{"lineNumber":86,"author":{"gitId":"-"},"content":"})"},{"lineNumber":87,"author":{"gitId":"-"},"content":"export class InstructorSessionEditPageComponent extends InstructorSessionBasePageComponent implements OnInit {"},{"lineNumber":88,"author":{"gitId":"-"},"content":""},{"lineNumber":89,"author":{"gitId":"-"},"content":"  // enum"},{"lineNumber":90,"author":{"gitId":"-"},"content":"  SessionEditFormMode: typeof SessionEditFormMode \u003d SessionEditFormMode;"},{"lineNumber":91,"author":{"gitId":"-"},"content":"  QuestionEditFormMode: typeof QuestionEditFormMode \u003d QuestionEditFormMode;"},{"lineNumber":92,"author":{"gitId":"-"},"content":"  FeedbackQuestionType: typeof FeedbackQuestionType \u003d FeedbackQuestionType;"},{"lineNumber":93,"author":{"gitId":"cedricongjh"},"content":"  FeedbackSessionPublishStatus: typeof FeedbackSessionPublishStatus \u003d FeedbackSessionPublishStatus;"},{"lineNumber":94,"author":{"gitId":"-"},"content":""},{"lineNumber":95,"author":{"gitId":"-"},"content":"  // url param"},{"lineNumber":96,"author":{"gitId":"-"},"content":"  courseId: string \u003d \u0027\u0027;"},{"lineNumber":97,"author":{"gitId":"-"},"content":"  feedbackSessionName: string \u003d \u0027\u0027;"},{"lineNumber":98,"author":{"gitId":"-"},"content":"  isEditingMode: boolean \u003d false;"},{"lineNumber":99,"author":{"gitId":"-"},"content":""},{"lineNumber":100,"author":{"gitId":"-"},"content":"  courseName: string \u003d \u0027\u0027;"},{"lineNumber":101,"author":{"gitId":"-"},"content":""},{"lineNumber":102,"author":{"gitId":"-"},"content":"  // models"},{"lineNumber":103,"author":{"gitId":"-"},"content":"  sessionEditFormModel: SessionEditFormModel \u003d {"},{"lineNumber":104,"author":{"gitId":"-"},"content":"    courseId: \u0027\u0027,"},{"lineNumber":105,"author":{"gitId":"-"},"content":"    timeZone: \u0027UTC\u0027,"},{"lineNumber":106,"author":{"gitId":"-"},"content":"    courseName: \u0027\u0027,"},{"lineNumber":107,"author":{"gitId":"-"},"content":"    feedbackSessionName: \u0027\u0027,"},{"lineNumber":108,"author":{"gitId":"-"},"content":"    instructions: \u0027\u0027,"},{"lineNumber":109,"author":{"gitId":"-"},"content":""},{"lineNumber":110,"author":{"gitId":"-"},"content":"    submissionStartTime: getLatestTimeFormat(),"},{"lineNumber":111,"author":{"gitId":"-"},"content":"    submissionStartDate: getDefaultDateFormat(),"},{"lineNumber":112,"author":{"gitId":"-"},"content":"    submissionEndTime: getLatestTimeFormat(),"},{"lineNumber":113,"author":{"gitId":"-"},"content":"    submissionEndDate: getDefaultDateFormat(),"},{"lineNumber":114,"author":{"gitId":"-"},"content":"    gracePeriod: 0,"},{"lineNumber":115,"author":{"gitId":"-"},"content":""},{"lineNumber":116,"author":{"gitId":"-"},"content":"    sessionVisibleSetting: SessionVisibleSetting.AT_OPEN,"},{"lineNumber":117,"author":{"gitId":"-"},"content":"    customSessionVisibleTime: getLatestTimeFormat(),"},{"lineNumber":118,"author":{"gitId":"-"},"content":"    customSessionVisibleDate: getDefaultDateFormat(),"},{"lineNumber":119,"author":{"gitId":"-"},"content":""},{"lineNumber":120,"author":{"gitId":"-"},"content":"    responseVisibleSetting: ResponseVisibleSetting.CUSTOM,"},{"lineNumber":121,"author":{"gitId":"-"},"content":"    customResponseVisibleTime: getLatestTimeFormat(),"},{"lineNumber":122,"author":{"gitId":"-"},"content":"    customResponseVisibleDate: getDefaultDateFormat(),"},{"lineNumber":123,"author":{"gitId":"-"},"content":""},{"lineNumber":124,"author":{"gitId":"-"},"content":"    submissionStatus: FeedbackSessionSubmissionStatus.OPEN,"},{"lineNumber":125,"author":{"gitId":"-"},"content":"    publishStatus: FeedbackSessionPublishStatus.NOT_PUBLISHED,"},{"lineNumber":126,"author":{"gitId":"-"},"content":""},{"lineNumber":127,"author":{"gitId":"-"},"content":"    isClosingEmailEnabled: true,"},{"lineNumber":128,"author":{"gitId":"-"},"content":"    isPublishedEmailEnabled: true,"},{"lineNumber":129,"author":{"gitId":"-"},"content":""},{"lineNumber":130,"author":{"gitId":"-"},"content":"    templateSessionName: \u0027\u0027,"},{"lineNumber":131,"author":{"gitId":"-"},"content":""},{"lineNumber":132,"author":{"gitId":"-"},"content":"    isSaving: false,"},{"lineNumber":133,"author":{"gitId":"-"},"content":"    isEditable: false,"},{"lineNumber":134,"author":{"gitId":"-"},"content":"    isDeleting: false,"},{"lineNumber":135,"author":{"gitId":"-"},"content":"    isCopying: false,"},{"lineNumber":136,"author":{"gitId":"-"},"content":"    hasVisibleSettingsPanelExpanded: false,"},{"lineNumber":137,"author":{"gitId":"-"},"content":"    hasEmailSettingsPanelExpanded: false,"},{"lineNumber":138,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":139,"author":{"gitId":"-"},"content":"  studentDeadlines: Record\u003cstring, number\u003e \u003d {};"},{"lineNumber":140,"author":{"gitId":"-"},"content":"  instructorDeadlines: Record\u003cstring, number\u003e \u003d {};"},{"lineNumber":141,"author":{"gitId":"-"},"content":""},{"lineNumber":142,"author":{"gitId":"-"},"content":"  // to get the original session model on discard changes"},{"lineNumber":143,"author":{"gitId":"-"},"content":"  feedbackSessionModelBeforeEditing: SessionEditFormModel \u003d JSON.parse(JSON.stringify(this.sessionEditFormModel));"},{"lineNumber":144,"author":{"gitId":"-"},"content":""},{"lineNumber":145,"author":{"gitId":"-"},"content":"  // to get the original question model"},{"lineNumber":146,"author":{"gitId":"-"},"content":"  feedbackQuestionModels: Map\u003cstring, FeedbackQuestion\u003e \u003d new Map();"},{"lineNumber":147,"author":{"gitId":"-"},"content":""},{"lineNumber":148,"author":{"gitId":"-"},"content":"  questionEditFormModels: QuestionEditFormModel[] \u003d [];"},{"lineNumber":149,"author":{"gitId":"-"},"content":""},{"lineNumber":150,"author":{"gitId":"-"},"content":"  newQuestionEditFormModel: QuestionEditFormModel \u003d {"},{"lineNumber":151,"author":{"gitId":"-"},"content":"    feedbackQuestionId: \u0027\u0027,"},{"lineNumber":152,"author":{"gitId":"-"},"content":"    questionNumber: 0,"},{"lineNumber":153,"author":{"gitId":"-"},"content":"    questionBrief: \u0027\u0027,"},{"lineNumber":154,"author":{"gitId":"-"},"content":"    questionDescription: \u0027\u0027,"},{"lineNumber":155,"author":{"gitId":"-"},"content":""},{"lineNumber":156,"author":{"gitId":"-"},"content":"    isQuestionHasResponses: false,"},{"lineNumber":157,"author":{"gitId":"-"},"content":""},{"lineNumber":158,"author":{"gitId":"-"},"content":"    questionType: FeedbackQuestionType.TEXT,"},{"lineNumber":159,"author":{"gitId":"-"},"content":"    questionDetails: {"},{"lineNumber":160,"author":{"gitId":"-"},"content":"      questionType: FeedbackQuestionType.TEXT,"},{"lineNumber":161,"author":{"gitId":"-"},"content":"      questionText: \u0027\u0027,"},{"lineNumber":162,"author":{"gitId":"-"},"content":"    } as FeedbackTextQuestionDetails,"},{"lineNumber":163,"author":{"gitId":"-"},"content":""},{"lineNumber":164,"author":{"gitId":"-"},"content":"    giverType: FeedbackParticipantType.STUDENTS,"},{"lineNumber":165,"author":{"gitId":"-"},"content":"    recipientType: FeedbackParticipantType.STUDENTS_EXCLUDING_SELF,"},{"lineNumber":166,"author":{"gitId":"-"},"content":""},{"lineNumber":167,"author":{"gitId":"-"},"content":"    numberOfEntitiesToGiveFeedbackToSetting: NumberOfEntitiesToGiveFeedbackToSetting.UNLIMITED,"},{"lineNumber":168,"author":{"gitId":"-"},"content":"    customNumberOfEntitiesToGiveFeedbackTo: 1,"},{"lineNumber":169,"author":{"gitId":"-"},"content":""},{"lineNumber":170,"author":{"gitId":"-"},"content":"    showResponsesTo: [],"},{"lineNumber":171,"author":{"gitId":"-"},"content":"    showGiverNameTo: [],"},{"lineNumber":172,"author":{"gitId":"-"},"content":"    showRecipientNameTo: [],"},{"lineNumber":173,"author":{"gitId":"-"},"content":""},{"lineNumber":174,"author":{"gitId":"-"},"content":"    isDeleting: false,"},{"lineNumber":175,"author":{"gitId":"-"},"content":"    isDuplicating: false,"},{"lineNumber":176,"author":{"gitId":"-"},"content":"    isEditable: true,"},{"lineNumber":177,"author":{"gitId":"-"},"content":"    isSaving: false,"},{"lineNumber":178,"author":{"gitId":"-"},"content":"    isCollapsed: false,"},{"lineNumber":179,"author":{"gitId":"-"},"content":"    isVisibilityChanged: false,"},{"lineNumber":180,"author":{"gitId":"-"},"content":"    isFeedbackPathChanged: false,"},{"lineNumber":181,"author":{"gitId":"-"},"content":"    isQuestionDetailsChanged: false,"},{"lineNumber":182,"author":{"gitId":"-"},"content":"  };"},{"lineNumber":183,"author":{"gitId":"-"},"content":""},{"lineNumber":184,"author":{"gitId":"-"},"content":"  isAddingFromTemplate: boolean \u003d false;"},{"lineNumber":185,"author":{"gitId":"-"},"content":"  isAddingQuestionPanelExpanded: boolean \u003d false;"},{"lineNumber":186,"author":{"gitId":"-"},"content":"  isLoadingFeedbackSession: boolean \u003d false;"},{"lineNumber":187,"author":{"gitId":"-"},"content":"  hasLoadingFeedbackSessionFailed: boolean \u003d false;"},{"lineNumber":188,"author":{"gitId":"-"},"content":"  isLoadingFeedbackQuestions: boolean \u003d false;"},{"lineNumber":189,"author":{"gitId":"-"},"content":"  hasLoadingFeedbackQuestionsFailed: boolean \u003d false;"},{"lineNumber":190,"author":{"gitId":"-"},"content":"  isCopyingQuestion: boolean \u003d false;"},{"lineNumber":191,"author":{"gitId":"-"},"content":""},{"lineNumber":192,"author":{"gitId":"-"},"content":"  // all students of the course"},{"lineNumber":193,"author":{"gitId":"-"},"content":"  studentsOfCourse: Student[] \u003d [];"},{"lineNumber":194,"author":{"gitId":"-"},"content":"  emailOfStudentToPreview: string \u003d \u0027\u0027;"},{"lineNumber":195,"author":{"gitId":"-"},"content":"  // all instructors of the course"},{"lineNumber":196,"author":{"gitId":"-"},"content":"  instructorsOfCourse: Instructor[] \u003d [];"},{"lineNumber":197,"author":{"gitId":"-"},"content":"  emailOfInstructorToPreview: string \u003d \u0027\u0027;"},{"lineNumber":198,"author":{"gitId":"-"},"content":""},{"lineNumber":199,"author":{"gitId":"-"},"content":"  get isAllCollapsed(): boolean {"},{"lineNumber":200,"author":{"gitId":"-"},"content":"    return this.questionEditFormModels.some((model: QuestionEditFormModel) \u003d\u003e {"},{"lineNumber":201,"author":{"gitId":"-"},"content":"      return model.isCollapsed;"},{"lineNumber":202,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":203,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":204,"author":{"gitId":"-"},"content":""},{"lineNumber":205,"author":{"gitId":"-"},"content":"  @ViewChild(\u0027modifiedTimestampsModal\u0027) modifiedTimestampsModal!: TemplateRef\u003cany\u003e;"},{"lineNumber":206,"author":{"gitId":"-"},"content":""},{"lineNumber":207,"author":{"gitId":"-"},"content":"  constructor(instructorService: InstructorService,"},{"lineNumber":208,"author":{"gitId":"-"},"content":"              statusMessageService: StatusMessageService,"},{"lineNumber":209,"author":{"gitId":"-"},"content":"              navigationService: NavigationService,"},{"lineNumber":210,"author":{"gitId":"-"},"content":"              feedbackSessionsService: FeedbackSessionsService,"},{"lineNumber":211,"author":{"gitId":"-"},"content":"              feedbackQuestionsService: FeedbackQuestionsService,"},{"lineNumber":212,"author":{"gitId":"-"},"content":"              tableComparatorService: TableComparatorService,"},{"lineNumber":213,"author":{"gitId":"-"},"content":"              ngbModal: NgbModal,"},{"lineNumber":214,"author":{"gitId":"-"},"content":"              simpleModalService: SimpleModalService,"},{"lineNumber":215,"author":{"gitId":"-"},"content":"              progressBarService: ProgressBarService,"},{"lineNumber":216,"author":{"gitId":"-"},"content":"              feedbackSessionActionsService: FeedbackSessionActionsService,"},{"lineNumber":217,"author":{"gitId":"-"},"content":"              timezoneService: TimezoneService,"},{"lineNumber":218,"author":{"gitId":"-"},"content":"              private datetimeService: DateTimeService,"},{"lineNumber":219,"author":{"gitId":"-"},"content":"              private studentService: StudentService,"},{"lineNumber":220,"author":{"gitId":"-"},"content":"              private courseService: CourseService,"},{"lineNumber":221,"author":{"gitId":"-"},"content":"              private route: ActivatedRoute,"},{"lineNumber":222,"author":{"gitId":"-"},"content":"              private changeDetectorRef: ChangeDetectorRef) {"},{"lineNumber":223,"author":{"gitId":"-"},"content":"    super(instructorService, statusMessageService, navigationService,"},{"lineNumber":224,"author":{"gitId":"-"},"content":"        feedbackSessionsService, feedbackQuestionsService, tableComparatorService,"},{"lineNumber":225,"author":{"gitId":"-"},"content":"        ngbModal, simpleModalService, progressBarService, feedbackSessionActionsService, timezoneService);"},{"lineNumber":226,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":227,"author":{"gitId":"-"},"content":""},{"lineNumber":228,"author":{"gitId":"-"},"content":"  ngOnInit(): void {"},{"lineNumber":229,"author":{"gitId":"-"},"content":"    this.route.queryParams.subscribe((queryParams: any) \u003d\u003e {"},{"lineNumber":230,"author":{"gitId":"-"},"content":"      this.courseId \u003d queryParams.courseid;"},{"lineNumber":231,"author":{"gitId":"-"},"content":"      this.feedbackSessionName \u003d queryParams.fsname;"},{"lineNumber":232,"author":{"gitId":"-"},"content":"      this.isEditingMode \u003d queryParams.editingMode \u003d\u003d\u003d \u0027true\u0027;"},{"lineNumber":233,"author":{"gitId":"-"},"content":""},{"lineNumber":234,"author":{"gitId":"-"},"content":"      this.loadFeedbackSession();"},{"lineNumber":235,"author":{"gitId":"-"},"content":"      this.loadFeedbackQuestions();"},{"lineNumber":236,"author":{"gitId":"-"},"content":"      this.getAllStudentsOfCourse();"},{"lineNumber":237,"author":{"gitId":"-"},"content":"      this.getAllInstructors();"},{"lineNumber":238,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":239,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":240,"author":{"gitId":"-"},"content":""},{"lineNumber":241,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":242,"author":{"gitId":"-"},"content":"   * Loads a feedback session."},{"lineNumber":243,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":244,"author":{"gitId":"-"},"content":"  loadFeedbackSession(): void {"},{"lineNumber":245,"author":{"gitId":"-"},"content":"    this.hasLoadingFeedbackSessionFailed \u003d false;"},{"lineNumber":246,"author":{"gitId":"-"},"content":"    this.isLoadingFeedbackSession \u003d true;"},{"lineNumber":247,"author":{"gitId":"-"},"content":"    // load the course of the feedback session first"},{"lineNumber":248,"author":{"gitId":"-"},"content":"    this.courseService.getCourseAsInstructor(this.courseId).subscribe({"},{"lineNumber":249,"author":{"gitId":"-"},"content":"      next: (course: Course) \u003d\u003e {"},{"lineNumber":250,"author":{"gitId":"-"},"content":"        this.courseName \u003d course.courseName;"},{"lineNumber":251,"author":{"gitId":"-"},"content":""},{"lineNumber":252,"author":{"gitId":"-"},"content":"        this.feedbackSessionsService.getFeedbackSession({"},{"lineNumber":253,"author":{"gitId":"-"},"content":"          courseId: this.courseId,"},{"lineNumber":254,"author":{"gitId":"-"},"content":"          feedbackSessionName: this.feedbackSessionName,"},{"lineNumber":255,"author":{"gitId":"-"},"content":"          intent: Intent.FULL_DETAIL,"},{"lineNumber":256,"author":{"gitId":"-"},"content":"        }).pipe(finalize(() \u003d\u003e {"},{"lineNumber":257,"author":{"gitId":"-"},"content":"          this.isLoadingFeedbackSession \u003d false;"},{"lineNumber":258,"author":{"gitId":"-"},"content":"        }))"},{"lineNumber":259,"author":{"gitId":"-"},"content":"            .subscribe({"},{"lineNumber":260,"author":{"gitId":"-"},"content":"              next: (feedbackSession: FeedbackSession) \u003d\u003e {"},{"lineNumber":261,"author":{"gitId":"-"},"content":"                this.sessionEditFormModel \u003d this.getSessionEditFormModel(feedbackSession, this.isEditingMode);"},{"lineNumber":262,"author":{"gitId":"-"},"content":"                this.feedbackSessionModelBeforeEditing \u003d this.getSessionEditFormModel(feedbackSession);"},{"lineNumber":263,"author":{"gitId":"-"},"content":"              },"},{"lineNumber":264,"author":{"gitId":"-"},"content":"              error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":265,"author":{"gitId":"-"},"content":"                this.hasLoadingFeedbackSessionFailed \u003d true;"},{"lineNumber":266,"author":{"gitId":"-"},"content":"                this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":267,"author":{"gitId":"-"},"content":"              },"},{"lineNumber":268,"author":{"gitId":"-"},"content":"            });"},{"lineNumber":269,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":270,"author":{"gitId":"-"},"content":"      error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":271,"author":{"gitId":"-"},"content":"        this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":272,"author":{"gitId":"-"},"content":"        this.isLoadingFeedbackSession \u003d false;"},{"lineNumber":273,"author":{"gitId":"-"},"content":"        this.hasLoadingFeedbackSessionFailed \u003d true;"},{"lineNumber":274,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":275,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":276,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":277,"author":{"gitId":"-"},"content":""},{"lineNumber":278,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":279,"author":{"gitId":"-"},"content":"   * Copies the feedback session."},{"lineNumber":280,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":281,"author":{"gitId":"-"},"content":"  copyCurrentSession(): Promise\u003cvoid\u003e {"},{"lineNumber":282,"author":{"gitId":"-"},"content":"    // load course candidates first"},{"lineNumber":283,"author":{"gitId":"-"},"content":"    return new Promise\u003cvoid\u003e((_resolve: any, reject: any) \u003d\u003e {"},{"lineNumber":284,"author":{"gitId":"-"},"content":"      this.courseService.getInstructorCoursesThatAreActive()"},{"lineNumber":285,"author":{"gitId":"-"},"content":"      .pipe(finalize(() \u003d\u003e {"},{"lineNumber":286,"author":{"gitId":"-"},"content":"        this.sessionEditFormModel.isCopying \u003d false;"},{"lineNumber":287,"author":{"gitId":"-"},"content":"      }))"},{"lineNumber":288,"author":{"gitId":"-"},"content":"      .subscribe((courses: Courses) \u003d\u003e {"},{"lineNumber":289,"author":{"gitId":"-"},"content":"        this.failedToCopySessions \u003d {};"},{"lineNumber":290,"author":{"gitId":"-"},"content":"        this.coursesOfModifiedSession \u003d [];"},{"lineNumber":291,"author":{"gitId":"-"},"content":"        this.modifiedSession \u003d {};"},{"lineNumber":292,"author":{"gitId":"-"},"content":"        const modalRef: NgbModalRef \u003d this.ngbModal.open(CopySessionModalComponent);"},{"lineNumber":293,"author":{"gitId":"-"},"content":"        modalRef.componentInstance.newFeedbackSessionName \u003d this.feedbackSessionName;"},{"lineNumber":294,"author":{"gitId":"-"},"content":"        modalRef.componentInstance.courseCandidates \u003d courses.courses;"},{"lineNumber":295,"author":{"gitId":"-"},"content":"        modalRef.componentInstance.sessionToCopyCourseId \u003d this.courseId;"},{"lineNumber":296,"author":{"gitId":"-"},"content":""},{"lineNumber":297,"author":{"gitId":"-"},"content":"        modalRef.result.then((result: CopySessionModalResult) \u003d\u003e {"},{"lineNumber":298,"author":{"gitId":"-"},"content":"          const requestList: Observable\u003cFeedbackSession\u003e[] \u003d this.createSessionCopyRequestsFromModal("},{"lineNumber":299,"author":{"gitId":"-"},"content":"              result, this.courseId, this.feedbackSessionName);"},{"lineNumber":300,"author":{"gitId":"-"},"content":"          this.sessionEditFormModel.isCopying \u003d true;"},{"lineNumber":301,"author":{"gitId":"-"},"content":"          if (requestList.length \u003d\u003d\u003d 1) {"},{"lineNumber":302,"author":{"gitId":"-"},"content":"            this.copySingleSession(requestList[0].pipe(finalize(() \u003d\u003e {"},{"lineNumber":303,"author":{"gitId":"-"},"content":"              this.sessionEditFormModel.isCopying \u003d false;"},{"lineNumber":304,"author":{"gitId":"-"},"content":"            })), this.modifiedTimestampsModal);"},{"lineNumber":305,"author":{"gitId":"-"},"content":"          }"},{"lineNumber":306,"author":{"gitId":"-"},"content":"          if (requestList.length \u003e 1) {"},{"lineNumber":307,"author":{"gitId":"-"},"content":"            forkJoin(requestList)"},{"lineNumber":308,"author":{"gitId":"-"},"content":"            .pipe(finalize(() \u003d\u003e {"},{"lineNumber":309,"author":{"gitId":"-"},"content":"              this.sessionEditFormModel.isCopying \u003d false;"},{"lineNumber":310,"author":{"gitId":"-"},"content":"            }))"},{"lineNumber":311,"author":{"gitId":"-"},"content":"            .subscribe(() \u003d\u003e {"},{"lineNumber":312,"author":{"gitId":"-"},"content":"              this.showCopyStatusMessage(this.modifiedTimestampsModal);"},{"lineNumber":313,"author":{"gitId":"-"},"content":"            });"},{"lineNumber":314,"author":{"gitId":"-"},"content":"          }"},{"lineNumber":315,"author":{"gitId":"-"},"content":"        }, (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":316,"author":{"gitId":"-"},"content":"          reject(resp);"},{"lineNumber":317,"author":{"gitId":"-"},"content":"          this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":318,"author":{"gitId":"-"},"content":"        })"},{"lineNumber":319,"author":{"gitId":"-"},"content":"        .catch(() \u003d\u003e {"},{"lineNumber":320,"author":{"gitId":"-"},"content":"          this.sessionEditFormModel.isCopying \u003d false;"},{"lineNumber":321,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":322,"author":{"gitId":"-"},"content":"      });"},{"lineNumber":323,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":324,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":325,"author":{"gitId":"-"},"content":""},{"lineNumber":326,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":327,"author":{"gitId":"-"},"content":"   * Gets the {@code sessionEditFormModel} with {@link FeedbackSession} entity."},{"lineNumber":328,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":329,"author":{"gitId":"-"},"content":"  getSessionEditFormModel(feedbackSession: FeedbackSession, isEditable: boolean \u003d false): SessionEditFormModel {"},{"lineNumber":330,"author":{"gitId":"-"},"content":"    const submissionStart: { date: DateFormat, time: TimeFormat } \u003d"},{"lineNumber":331,"author":{"gitId":"-"},"content":"        this.datetimeService.getDateTimeAtTimezone(feedbackSession.submissionStartTimestamp,"},{"lineNumber":332,"author":{"gitId":"-"},"content":"          feedbackSession.timeZone, true);"},{"lineNumber":333,"author":{"gitId":"-"},"content":""},{"lineNumber":334,"author":{"gitId":"-"},"content":"    const submissionEnd: { date: DateFormat, time: TimeFormat } \u003d"},{"lineNumber":335,"author":{"gitId":"-"},"content":"        this.datetimeService.getDateTimeAtTimezone(feedbackSession.submissionEndTimestamp,"},{"lineNumber":336,"author":{"gitId":"-"},"content":"          feedbackSession.timeZone, true);"},{"lineNumber":337,"author":{"gitId":"-"},"content":""},{"lineNumber":338,"author":{"gitId":"-"},"content":"    const model: SessionEditFormModel \u003d {"},{"lineNumber":339,"author":{"gitId":"-"},"content":"      isEditable,"},{"lineNumber":340,"author":{"gitId":"-"},"content":"      courseId: feedbackSession.courseId,"},{"lineNumber":341,"author":{"gitId":"-"},"content":"      timeZone: feedbackSession.timeZone,"},{"lineNumber":342,"author":{"gitId":"-"},"content":"      courseName: this.courseName,"},{"lineNumber":343,"author":{"gitId":"-"},"content":"      feedbackSessionName: feedbackSession.feedbackSessionName,"},{"lineNumber":344,"author":{"gitId":"-"},"content":"      instructions: feedbackSession.instructions,"},{"lineNumber":345,"author":{"gitId":"-"},"content":""},{"lineNumber":346,"author":{"gitId":"-"},"content":"      submissionStartTime: submissionStart.time,"},{"lineNumber":347,"author":{"gitId":"-"},"content":"      submissionStartDate: submissionStart.date,"},{"lineNumber":348,"author":{"gitId":"-"},"content":"      submissionEndTime: submissionEnd.time,"},{"lineNumber":349,"author":{"gitId":"-"},"content":"      submissionEndDate: submissionEnd.date,"},{"lineNumber":350,"author":{"gitId":"-"},"content":"      gracePeriod: feedbackSession.gracePeriod,"},{"lineNumber":351,"author":{"gitId":"-"},"content":""},{"lineNumber":352,"author":{"gitId":"-"},"content":"      sessionVisibleSetting: feedbackSession.sessionVisibleSetting,"},{"lineNumber":353,"author":{"gitId":"-"},"content":"      customSessionVisibleTime: getLatestTimeFormat(),"},{"lineNumber":354,"author":{"gitId":"-"},"content":"      customSessionVisibleDate: getDefaultDateFormat(),"},{"lineNumber":355,"author":{"gitId":"-"},"content":""},{"lineNumber":356,"author":{"gitId":"-"},"content":"      responseVisibleSetting: feedbackSession.responseVisibleSetting,"},{"lineNumber":357,"author":{"gitId":"-"},"content":"      customResponseVisibleTime: getLatestTimeFormat(),"},{"lineNumber":358,"author":{"gitId":"-"},"content":"      customResponseVisibleDate: getDefaultDateFormat(),"},{"lineNumber":359,"author":{"gitId":"-"},"content":""},{"lineNumber":360,"author":{"gitId":"-"},"content":"      submissionStatus: feedbackSession.submissionStatus,"},{"lineNumber":361,"author":{"gitId":"-"},"content":"      publishStatus: feedbackSession.publishStatus,"},{"lineNumber":362,"author":{"gitId":"-"},"content":""},{"lineNumber":363,"author":{"gitId":"-"},"content":"      templateSessionName: \u0027\u0027,"},{"lineNumber":364,"author":{"gitId":"-"},"content":""},{"lineNumber":365,"author":{"gitId":"-"},"content":"      isClosingEmailEnabled: feedbackSession.isClosingEmailEnabled,"},{"lineNumber":366,"author":{"gitId":"-"},"content":"      isPublishedEmailEnabled: feedbackSession.isPublishedEmailEnabled,"},{"lineNumber":367,"author":{"gitId":"-"},"content":""},{"lineNumber":368,"author":{"gitId":"-"},"content":"      isSaving: false,"},{"lineNumber":369,"author":{"gitId":"-"},"content":"      isDeleting: false,"},{"lineNumber":370,"author":{"gitId":"-"},"content":"      isCopying: false,"},{"lineNumber":371,"author":{"gitId":"-"},"content":"      hasVisibleSettingsPanelExpanded: feedbackSession.sessionVisibleSetting !\u003d\u003d SessionVisibleSetting.AT_OPEN"},{"lineNumber":372,"author":{"gitId":"-"},"content":"          || feedbackSession.responseVisibleSetting !\u003d\u003d ResponseVisibleSetting.LATER,"},{"lineNumber":373,"author":{"gitId":"-"},"content":"      hasEmailSettingsPanelExpanded: !feedbackSession.isClosingEmailEnabled || !feedbackSession.isPublishedEmailEnabled,"},{"lineNumber":374,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":375,"author":{"gitId":"-"},"content":""},{"lineNumber":376,"author":{"gitId":"-"},"content":"    this.studentDeadlines \u003d feedbackSession.studentDeadlines;"},{"lineNumber":377,"author":{"gitId":"-"},"content":"    this.instructorDeadlines \u003d feedbackSession.instructorDeadlines;"},{"lineNumber":378,"author":{"gitId":"-"},"content":""},{"lineNumber":379,"author":{"gitId":"-"},"content":"    if (feedbackSession.customSessionVisibleTimestamp) {"},{"lineNumber":380,"author":{"gitId":"-"},"content":"      const customSessionVisible: { date: DateFormat, time: TimeFormat } \u003d"},{"lineNumber":381,"author":{"gitId":"-"},"content":"          this.datetimeService.getDateTimeAtTimezone(feedbackSession.customSessionVisibleTimestamp,"},{"lineNumber":382,"author":{"gitId":"-"},"content":"              feedbackSession.timeZone, true);"},{"lineNumber":383,"author":{"gitId":"-"},"content":"      model.customSessionVisibleTime \u003d customSessionVisible.time;"},{"lineNumber":384,"author":{"gitId":"-"},"content":"      model.customSessionVisibleDate \u003d customSessionVisible.date;"},{"lineNumber":385,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":386,"author":{"gitId":"-"},"content":""},{"lineNumber":387,"author":{"gitId":"-"},"content":"    if (feedbackSession.customResponseVisibleTimestamp) {"},{"lineNumber":388,"author":{"gitId":"-"},"content":"      const customResponseVisible: { date: DateFormat, time: TimeFormat } \u003d"},{"lineNumber":389,"author":{"gitId":"-"},"content":"          this.datetimeService.getDateTimeAtTimezone(feedbackSession.customResponseVisibleTimestamp,"},{"lineNumber":390,"author":{"gitId":"-"},"content":"              feedbackSession.timeZone, true);"},{"lineNumber":391,"author":{"gitId":"-"},"content":"      model.customResponseVisibleTime \u003d customResponseVisible.time;"},{"lineNumber":392,"author":{"gitId":"-"},"content":"      model.customResponseVisibleDate \u003d customResponseVisible.date;"},{"lineNumber":393,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":394,"author":{"gitId":"-"},"content":""},{"lineNumber":395,"author":{"gitId":"-"},"content":"    return model;"},{"lineNumber":396,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":397,"author":{"gitId":"-"},"content":""},{"lineNumber":398,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":399,"author":{"gitId":"-"},"content":"   * Handles editing existing session event."},{"lineNumber":400,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":401,"author":{"gitId":"-"},"content":"  editExistingSessionHandler(): void {"},{"lineNumber":402,"author":{"gitId":"-"},"content":"    this.feedbackSessionModelBeforeEditing \u003d JSON.parse(JSON.stringify(this.sessionEditFormModel));"},{"lineNumber":403,"author":{"gitId":"-"},"content":""},{"lineNumber":404,"author":{"gitId":"-"},"content":"    const submissionStartTime: number \u003d this.timezoneService.resolveLocalDateTime("},{"lineNumber":405,"author":{"gitId":"-"},"content":"        this.sessionEditFormModel.submissionStartDate, this.sessionEditFormModel.submissionStartTime,"},{"lineNumber":406,"author":{"gitId":"-"},"content":"        this.sessionEditFormModel.timeZone, true);"},{"lineNumber":407,"author":{"gitId":"-"},"content":"    const submissionEndTime: number \u003d this.timezoneService.resolveLocalDateTime("},{"lineNumber":408,"author":{"gitId":"-"},"content":"        this.sessionEditFormModel.submissionEndDate, this.sessionEditFormModel.submissionEndTime,"},{"lineNumber":409,"author":{"gitId":"-"},"content":"        this.sessionEditFormModel.timeZone, true);"},{"lineNumber":410,"author":{"gitId":"-"},"content":"    let sessionVisibleTime: number \u003d 0;"},{"lineNumber":411,"author":{"gitId":"-"},"content":"    if (this.sessionEditFormModel.sessionVisibleSetting \u003d\u003d\u003d SessionVisibleSetting.CUSTOM) {"},{"lineNumber":412,"author":{"gitId":"-"},"content":"      sessionVisibleTime \u003d this.timezoneService.resolveLocalDateTime("},{"lineNumber":413,"author":{"gitId":"-"},"content":"          this.sessionEditFormModel.customSessionVisibleDate, this.sessionEditFormModel.customSessionVisibleTime,"},{"lineNumber":414,"author":{"gitId":"-"},"content":"          this.sessionEditFormModel.timeZone, true);"},{"lineNumber":415,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":416,"author":{"gitId":"-"},"content":"    let responseVisibleTime: number \u003d 0;"},{"lineNumber":417,"author":{"gitId":"-"},"content":"    if (this.sessionEditFormModel.responseVisibleSetting \u003d\u003d\u003d ResponseVisibleSetting.CUSTOM) {"},{"lineNumber":418,"author":{"gitId":"-"},"content":"      responseVisibleTime \u003d this.timezoneService.resolveLocalDateTime("},{"lineNumber":419,"author":{"gitId":"-"},"content":"          this.sessionEditFormModel.customResponseVisibleDate, this.sessionEditFormModel.customResponseVisibleTime,"},{"lineNumber":420,"author":{"gitId":"-"},"content":"          this.sessionEditFormModel.timeZone, true);"},{"lineNumber":421,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":422,"author":{"gitId":"-"},"content":""},{"lineNumber":423,"author":{"gitId":"-"},"content":"    this.deleteDeadlineExtensionsHandler(submissionEndTime).subscribe((isUpdateSession) \u003d\u003e {"},{"lineNumber":424,"author":{"gitId":"-"},"content":"      if (isUpdateSession) {"},{"lineNumber":425,"author":{"gitId":"-"},"content":"        this.updateFeedbackSession(submissionStartTime, submissionEndTime, sessionVisibleTime, responseVisibleTime);"},{"lineNumber":426,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":427,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":428,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":429,"author":{"gitId":"-"},"content":""},{"lineNumber":430,"author":{"gitId":"-"},"content":"  updateFeedbackSession(submissionStartTime: number, submissionEndTime: number, sessionVisibleTime: number,"},{"lineNumber":431,"author":{"gitId":"-"},"content":"    responseVisibleTime: number): void {"},{"lineNumber":432,"author":{"gitId":"-"},"content":"    this.sessionEditFormModel.isSaving \u003d true;"},{"lineNumber":433,"author":{"gitId":"-"},"content":"    this.sessionEditFormModel.isEditable \u003d false;"},{"lineNumber":434,"author":{"gitId":"-"},"content":"    this.feedbackSessionsService.updateFeedbackSession(this.courseId, this.feedbackSessionName, {"},{"lineNumber":435,"author":{"gitId":"-"},"content":"      instructions: this.sessionEditFormModel.instructions,"},{"lineNumber":436,"author":{"gitId":"-"},"content":""},{"lineNumber":437,"author":{"gitId":"-"},"content":"      submissionStartTimestamp: submissionStartTime,"},{"lineNumber":438,"author":{"gitId":"-"},"content":"      submissionEndTimestamp: submissionEndTime,"},{"lineNumber":439,"author":{"gitId":"-"},"content":"      gracePeriod: this.sessionEditFormModel.gracePeriod,"},{"lineNumber":440,"author":{"gitId":"-"},"content":""},{"lineNumber":441,"author":{"gitId":"-"},"content":"      sessionVisibleSetting: this.sessionEditFormModel.sessionVisibleSetting,"},{"lineNumber":442,"author":{"gitId":"-"},"content":"      customSessionVisibleTimestamp: sessionVisibleTime,"},{"lineNumber":443,"author":{"gitId":"-"},"content":""},{"lineNumber":444,"author":{"gitId":"-"},"content":"      responseVisibleSetting: this.sessionEditFormModel.responseVisibleSetting,"},{"lineNumber":445,"author":{"gitId":"-"},"content":"      customResponseVisibleTimestamp: responseVisibleTime,"},{"lineNumber":446,"author":{"gitId":"-"},"content":""},{"lineNumber":447,"author":{"gitId":"-"},"content":"      isClosingEmailEnabled: this.sessionEditFormModel.isClosingEmailEnabled,"},{"lineNumber":448,"author":{"gitId":"-"},"content":"      isPublishedEmailEnabled: this.sessionEditFormModel.isPublishedEmailEnabled,"},{"lineNumber":449,"author":{"gitId":"-"},"content":""},{"lineNumber":450,"author":{"gitId":"-"},"content":"      studentDeadlines: this.studentDeadlines,"},{"lineNumber":451,"author":{"gitId":"-"},"content":"      instructorDeadlines: this.instructorDeadlines,"},{"lineNumber":452,"author":{"gitId":"-"},"content":"    }).pipe(finalize(() \u003d\u003e {"},{"lineNumber":453,"author":{"gitId":"-"},"content":"      this.sessionEditFormModel.isSaving \u003d false;"},{"lineNumber":454,"author":{"gitId":"-"},"content":"    })).subscribe({"},{"lineNumber":455,"author":{"gitId":"-"},"content":"      next: (feedbackSession: FeedbackSession) \u003d\u003e {"},{"lineNumber":456,"author":{"gitId":"-"},"content":"        this.sessionEditFormModel \u003d this.getSessionEditFormModel(feedbackSession);"},{"lineNumber":457,"author":{"gitId":"-"},"content":""},{"lineNumber":458,"author":{"gitId":"-"},"content":"        this.statusMessageService.showSuccessToast(\u0027The feedback session has been updated.\u0027);"},{"lineNumber":459,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":460,"author":{"gitId":"-"},"content":"      error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":461,"author":{"gitId":"-"},"content":"        this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":462,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":463,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":464,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":465,"author":{"gitId":"-"},"content":""},{"lineNumber":466,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":467,"author":{"gitId":"-"},"content":"   * Prompts the user to delete individual extensions that are before or equal to the new session end time."},{"lineNumber":468,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":469,"author":{"gitId":"-"},"content":"  deleteDeadlineExtensionsHandler(submissionEndTimestamp: number): Observable\u003cboolean\u003e {"},{"lineNumber":470,"author":{"gitId":"-"},"content":"    const [studentDeadlinesToDelete, instructorDeadlinesToDelete] \u003d this"},{"lineNumber":471,"author":{"gitId":"-"},"content":"      .getIndividualDeadlinesToDelete(submissionEndTimestamp);"},{"lineNumber":472,"author":{"gitId":"-"},"content":""},{"lineNumber":473,"author":{"gitId":"-"},"content":"    const isAllDeadlinesAfterUpdatedEndTime \u003d Object.values(studentDeadlinesToDelete).length \u003d\u003d\u003d 0"},{"lineNumber":474,"author":{"gitId":"-"},"content":"      \u0026\u0026 Object.values(instructorDeadlinesToDelete).length \u003d\u003d\u003d 0;"},{"lineNumber":475,"author":{"gitId":"-"},"content":""},{"lineNumber":476,"author":{"gitId":"-"},"content":"    if (isAllDeadlinesAfterUpdatedEndTime) {"},{"lineNumber":477,"author":{"gitId":"-"},"content":"      return of(true); // no need to prompt for deletion"},{"lineNumber":478,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":479,"author":{"gitId":"-"},"content":""},{"lineNumber":480,"author":{"gitId":"-"},"content":"    const [affectedStudentModels, affectedInstructorModels] \u003d this"},{"lineNumber":481,"author":{"gitId":"-"},"content":"      .getAffectedIndividualModels(submissionEndTimestamp, studentDeadlinesToDelete, instructorDeadlinesToDelete);"},{"lineNumber":482,"author":{"gitId":"-"},"content":""},{"lineNumber":483,"author":{"gitId":"-"},"content":"    const modalRef: NgbModalRef \u003d this.ngbModal.open(ExtensionConfirmModalComponent);"},{"lineNumber":484,"author":{"gitId":"-"},"content":"    modalRef.componentInstance.modalType \u003d ExtensionModalType.SESSION_DELETE;"},{"lineNumber":485,"author":{"gitId":"-"},"content":"    modalRef.componentInstance.selectedStudents \u003d affectedStudentModels;"},{"lineNumber":486,"author":{"gitId":"-"},"content":"    modalRef.componentInstance.selectedInstructors \u003d affectedInstructorModels;"},{"lineNumber":487,"author":{"gitId":"-"},"content":"    modalRef.componentInstance.extensionTimestamp \u003d submissionEndTimestamp;"},{"lineNumber":488,"author":{"gitId":"-"},"content":"    modalRef.componentInstance.feedbackSessionTimeZone \u003d this.sessionEditFormModel.timeZone;"},{"lineNumber":489,"author":{"gitId":"-"},"content":""},{"lineNumber":490,"author":{"gitId":"-"},"content":"    return new Observable((subscribeIsUserAccept) \u003d\u003e {"},{"lineNumber":491,"author":{"gitId":"-"},"content":"      modalRef.componentInstance.confirmExtensionCallbackEvent.subscribe(() \u003d\u003e {"},{"lineNumber":492,"author":{"gitId":"-"},"content":"        this.removeDeadlines(affectedStudentModels, affectedInstructorModels);"},{"lineNumber":493,"author":{"gitId":"-"},"content":"        modalRef.componentInstance.isSubmitting \u003d false;"},{"lineNumber":494,"author":{"gitId":"-"},"content":"        modalRef.close();"},{"lineNumber":495,"author":{"gitId":"-"},"content":"        subscribeIsUserAccept.next(true);"},{"lineNumber":496,"author":{"gitId":"-"},"content":"      }, () \u003d\u003e {"},{"lineNumber":497,"author":{"gitId":"-"},"content":"        subscribeIsUserAccept.next(false);"},{"lineNumber":498,"author":{"gitId":"-"},"content":"      });"},{"lineNumber":499,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":500,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":501,"author":{"gitId":"-"},"content":""},{"lineNumber":502,"author":{"gitId":"-"},"content":"  private getIndividualDeadlinesToDelete(submissionEndTimestamp: number): ["},{"lineNumber":503,"author":{"gitId":"-"},"content":"    Record\u003cstring, number\u003e, Record\u003cstring, number\u003e,"},{"lineNumber":504,"author":{"gitId":"-"},"content":"  ] {"},{"lineNumber":505,"author":{"gitId":"-"},"content":"    const studentDeadlinesToDelete \u003d DeadlineExtensionHelper.getDeadlinesBeforeOrEqualToEndTime("},{"lineNumber":506,"author":{"gitId":"-"},"content":"      this.studentDeadlines, submissionEndTimestamp);"},{"lineNumber":507,"author":{"gitId":"-"},"content":"    const instructorDeadlinesToDelete \u003d DeadlineExtensionHelper.getDeadlinesBeforeOrEqualToEndTime("},{"lineNumber":508,"author":{"gitId":"-"},"content":"      this.instructorDeadlines, submissionEndTimestamp);"},{"lineNumber":509,"author":{"gitId":"-"},"content":"    return [studentDeadlinesToDelete, instructorDeadlinesToDelete];"},{"lineNumber":510,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":511,"author":{"gitId":"-"},"content":""},{"lineNumber":512,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":513,"author":{"gitId":"-"},"content":"   * Get models for individuals whose deadline extensions are before or equal to the new session end time."},{"lineNumber":514,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":515,"author":{"gitId":"-"},"content":"  private getAffectedIndividualModels("},{"lineNumber":516,"author":{"gitId":"-"},"content":"    submissionEndTimestamp: number,"},{"lineNumber":517,"author":{"gitId":"-"},"content":"    affectedStudentDeadlines: Record\u003cstring, number\u003e,"},{"lineNumber":518,"author":{"gitId":"-"},"content":"    affectedInstructorDeadlines: Record\u003cstring, number\u003e,"},{"lineNumber":519,"author":{"gitId":"-"},"content":"  ): [StudentExtensionTableColumnModel[], InstructorExtensionTableColumnModel[]] {"},{"lineNumber":520,"author":{"gitId":"-"},"content":"    const affectedStudents \u003d this.studentsOfCourse.filter((student) \u003d\u003e affectedStudentDeadlines[student.email]);"},{"lineNumber":521,"author":{"gitId":"-"},"content":"    const affectedInstructors \u003d this.instructorsOfCourse"},{"lineNumber":522,"author":{"gitId":"-"},"content":"      .filter((instructor) \u003d\u003e affectedInstructorDeadlines[instructor.email]);"},{"lineNumber":523,"author":{"gitId":"-"},"content":""},{"lineNumber":524,"author":{"gitId":"-"},"content":"    const affectedStudentModels \u003d DeadlineExtensionHelper.mapStudentsToStudentModels("},{"lineNumber":525,"author":{"gitId":"-"},"content":"      affectedStudents, affectedStudentDeadlines, submissionEndTimestamp,"},{"lineNumber":526,"author":{"gitId":"-"},"content":"    );"},{"lineNumber":527,"author":{"gitId":"-"},"content":"    const affectedInstructorModels \u003d DeadlineExtensionHelper.mapInstructorsToInstructorModels("},{"lineNumber":528,"author":{"gitId":"-"},"content":"      affectedInstructors, affectedInstructorDeadlines, submissionEndTimestamp,"},{"lineNumber":529,"author":{"gitId":"-"},"content":"    );"},{"lineNumber":530,"author":{"gitId":"-"},"content":"    return [affectedStudentModels, affectedInstructorModels];"},{"lineNumber":531,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":532,"author":{"gitId":"-"},"content":""},{"lineNumber":533,"author":{"gitId":"-"},"content":"  private removeDeadlines(students: StudentExtensionTableColumnModel[],"},{"lineNumber":534,"author":{"gitId":"-"},"content":"    instructors: InstructorExtensionTableColumnModel[],"},{"lineNumber":535,"author":{"gitId":"-"},"content":"  ): void {"},{"lineNumber":536,"author":{"gitId":"-"},"content":"    this.studentDeadlines \u003d DeadlineExtensionHelper"},{"lineNumber":537,"author":{"gitId":"-"},"content":"      .getUpdatedDeadlinesForDeletion(students, this.studentDeadlines);"},{"lineNumber":538,"author":{"gitId":"-"},"content":"    this.instructorDeadlines \u003d DeadlineExtensionHelper"},{"lineNumber":539,"author":{"gitId":"-"},"content":"      .getUpdatedDeadlinesForDeletion(instructors, this.instructorDeadlines);"},{"lineNumber":540,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":541,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":542,"author":{"gitId":"-"},"content":"   * Handles canceling existing session event without saving changes."},{"lineNumber":543,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":544,"author":{"gitId":"-"},"content":"  cancelEditingSessionHandler(): void {"},{"lineNumber":545,"author":{"gitId":"-"},"content":"    this.sessionEditFormModel \u003d JSON.parse(JSON.stringify(this.feedbackSessionModelBeforeEditing));"},{"lineNumber":546,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":547,"author":{"gitId":"-"},"content":""},{"lineNumber":548,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":549,"author":{"gitId":"-"},"content":"   * Handles deleting current feedback session."},{"lineNumber":550,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":551,"author":{"gitId":"-"},"content":"  deleteExistingSessionHandler(): void {"},{"lineNumber":552,"author":{"gitId":"-"},"content":"    this.sessionEditFormModel.isDeleting \u003d true;"},{"lineNumber":553,"author":{"gitId":"-"},"content":"    this.feedbackSessionsService.moveSessionToRecycleBin(this.courseId, this.feedbackSessionName)"},{"lineNumber":554,"author":{"gitId":"-"},"content":"      .pipe(finalize(() \u003d\u003e {"},{"lineNumber":555,"author":{"gitId":"-"},"content":"        this.sessionEditFormModel.isDeleting \u003d false;"},{"lineNumber":556,"author":{"gitId":"-"},"content":"      }))"},{"lineNumber":557,"author":{"gitId":"-"},"content":"      .subscribe({"},{"lineNumber":558,"author":{"gitId":"-"},"content":"        next: () \u003d\u003e {"},{"lineNumber":559,"author":{"gitId":"-"},"content":"          this.navigationService.navigateWithSuccessMessage(\u0027/web/instructor/sessions\u0027,"},{"lineNumber":560,"author":{"gitId":"-"},"content":"              \u0027The feedback session has been deleted. You can restore it from the deleted sessions table below.\u0027);"},{"lineNumber":561,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":562,"author":{"gitId":"-"},"content":"        error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":563,"author":{"gitId":"-"},"content":"          this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":564,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":565,"author":{"gitId":"-"},"content":"      });"},{"lineNumber":566,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":567,"author":{"gitId":"-"},"content":""},{"lineNumber":568,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":569,"author":{"gitId":"-"},"content":"   * Loads feedback questions."},{"lineNumber":570,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":571,"author":{"gitId":"-"},"content":"  loadFeedbackQuestions(): void {"},{"lineNumber":572,"author":{"gitId":"-"},"content":"    this.questionEditFormModels \u003d [];"},{"lineNumber":573,"author":{"gitId":"-"},"content":"    this.hasLoadingFeedbackQuestionsFailed \u003d false;"},{"lineNumber":574,"author":{"gitId":"-"},"content":"    this.isLoadingFeedbackQuestions \u003d true;"},{"lineNumber":575,"author":{"gitId":"-"},"content":"    this.feedbackQuestionsService.getFeedbackQuestions({"},{"lineNumber":576,"author":{"gitId":"-"},"content":"      courseId: this.courseId,"},{"lineNumber":577,"author":{"gitId":"-"},"content":"      feedbackSessionName: this.feedbackSessionName,"},{"lineNumber":578,"author":{"gitId":"-"},"content":"      intent: Intent.FULL_DETAIL,"},{"lineNumber":579,"author":{"gitId":"-"},"content":"    })"},{"lineNumber":580,"author":{"gitId":"-"},"content":"        .pipe(finalize(() \u003d\u003e {"},{"lineNumber":581,"author":{"gitId":"-"},"content":"          this.isLoadingFeedbackQuestions \u003d false;"},{"lineNumber":582,"author":{"gitId":"-"},"content":"        }))"},{"lineNumber":583,"author":{"gitId":"-"},"content":"        .subscribe({"},{"lineNumber":584,"author":{"gitId":"-"},"content":"          next: (response: FeedbackQuestions) \u003d\u003e {"},{"lineNumber":585,"author":{"gitId":"-"},"content":"            response.questions.forEach((feedbackQuestion: FeedbackQuestion) \u003d\u003e {"},{"lineNumber":586,"author":{"gitId":"-"},"content":"              const addedQuestionEditFormModel: QuestionEditFormModel \u003d this.getQuestionEditFormModel(feedbackQuestion);"},{"lineNumber":587,"author":{"gitId":"-"},"content":"              this.questionEditFormModels.push(addedQuestionEditFormModel);"},{"lineNumber":588,"author":{"gitId":"-"},"content":"              this.loadResponseStatusForQuestion(addedQuestionEditFormModel);"},{"lineNumber":589,"author":{"gitId":"-"},"content":"              this.feedbackQuestionModels.set(feedbackQuestion.feedbackQuestionId, feedbackQuestion);"},{"lineNumber":590,"author":{"gitId":"-"},"content":"            });"},{"lineNumber":591,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":592,"author":{"gitId":"-"},"content":"          error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":593,"author":{"gitId":"-"},"content":"            this.hasLoadingFeedbackQuestionsFailed \u003d true;"},{"lineNumber":594,"author":{"gitId":"-"},"content":"            this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":595,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":596,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":597,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":598,"author":{"gitId":"-"},"content":""},{"lineNumber":599,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":600,"author":{"gitId":"-"},"content":"   * Tracks the question edit form by feedback question id."},{"lineNumber":601,"author":{"gitId":"-"},"content":"   *"},{"lineNumber":602,"author":{"gitId":"-"},"content":"   * @see https://angular.io/api/common/NgForOf#properties"},{"lineNumber":603,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":604,"author":{"gitId":"-"},"content":"  trackQuestionEditFormByFn(_: any, item: QuestionEditFormModel): any {"},{"lineNumber":605,"author":{"gitId":"-"},"content":"    return item.feedbackQuestionId;"},{"lineNumber":606,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":607,"author":{"gitId":"-"},"content":""},{"lineNumber":608,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":609,"author":{"gitId":"-"},"content":"   * Converts feedback question to the question edit form model."},{"lineNumber":610,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":611,"author":{"gitId":"-"},"content":"  private getQuestionEditFormModel(feedbackQuestion: FeedbackQuestion): QuestionEditFormModel {"},{"lineNumber":612,"author":{"gitId":"-"},"content":"    return {"},{"lineNumber":613,"author":{"gitId":"-"},"content":"      feedbackQuestionId: feedbackQuestion.feedbackQuestionId,"},{"lineNumber":614,"author":{"gitId":"-"},"content":""},{"lineNumber":615,"author":{"gitId":"-"},"content":"      questionNumber: feedbackQuestion.questionNumber,"},{"lineNumber":616,"author":{"gitId":"-"},"content":"      questionBrief: feedbackQuestion.questionBrief,"},{"lineNumber":617,"author":{"gitId":"-"},"content":"      questionDescription: feedbackQuestion.questionDescription,"},{"lineNumber":618,"author":{"gitId":"-"},"content":""},{"lineNumber":619,"author":{"gitId":"-"},"content":"      isQuestionHasResponses: false,"},{"lineNumber":620,"author":{"gitId":"-"},"content":""},{"lineNumber":621,"author":{"gitId":"-"},"content":"      questionType: feedbackQuestion.questionType,"},{"lineNumber":622,"author":{"gitId":"-"},"content":"      questionDetails: this.deepCopy(feedbackQuestion.questionDetails),"},{"lineNumber":623,"author":{"gitId":"-"},"content":""},{"lineNumber":624,"author":{"gitId":"-"},"content":"      giverType: feedbackQuestion.giverType,"},{"lineNumber":625,"author":{"gitId":"-"},"content":"      recipientType: feedbackQuestion.recipientType,"},{"lineNumber":626,"author":{"gitId":"-"},"content":""},{"lineNumber":627,"author":{"gitId":"-"},"content":"      numberOfEntitiesToGiveFeedbackToSetting: feedbackQuestion.numberOfEntitiesToGiveFeedbackToSetting,"},{"lineNumber":628,"author":{"gitId":"-"},"content":"      customNumberOfEntitiesToGiveFeedbackTo: feedbackQuestion.customNumberOfEntitiesToGiveFeedbackTo"},{"lineNumber":629,"author":{"gitId":"-"},"content":"          ? feedbackQuestion.customNumberOfEntitiesToGiveFeedbackTo : 1,"},{"lineNumber":630,"author":{"gitId":"-"},"content":""},{"lineNumber":631,"author":{"gitId":"-"},"content":"      showResponsesTo: feedbackQuestion.showResponsesTo,"},{"lineNumber":632,"author":{"gitId":"-"},"content":"      showGiverNameTo: feedbackQuestion.showGiverNameTo,"},{"lineNumber":633,"author":{"gitId":"-"},"content":"      showRecipientNameTo: feedbackQuestion.showRecipientNameTo,"},{"lineNumber":634,"author":{"gitId":"-"},"content":""},{"lineNumber":635,"author":{"gitId":"-"},"content":"      isDeleting: false,"},{"lineNumber":636,"author":{"gitId":"-"},"content":"      isDuplicating: false,"},{"lineNumber":637,"author":{"gitId":"-"},"content":"      isEditable: false,"},{"lineNumber":638,"author":{"gitId":"-"},"content":"      isSaving: false,"},{"lineNumber":639,"author":{"gitId":"-"},"content":"      isCollapsed: false,"},{"lineNumber":640,"author":{"gitId":"-"},"content":""},{"lineNumber":641,"author":{"gitId":"-"},"content":"      isVisibilityChanged: false,"},{"lineNumber":642,"author":{"gitId":"-"},"content":"      isFeedbackPathChanged: false,"},{"lineNumber":643,"author":{"gitId":"-"},"content":"      isQuestionDetailsChanged: false,"},{"lineNumber":644,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":645,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":646,"author":{"gitId":"-"},"content":""},{"lineNumber":647,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":648,"author":{"gitId":"-"},"content":"   * Loads the isQuestionHasResponses value for a question edit for model."},{"lineNumber":649,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":650,"author":{"gitId":"-"},"content":"  private loadResponseStatusForQuestion(model: QuestionEditFormModel): void {"},{"lineNumber":651,"author":{"gitId":"-"},"content":"    this.feedbackSessionsService.hasResponsesForQuestion(model.feedbackQuestionId)"},{"lineNumber":652,"author":{"gitId":"-"},"content":"        .subscribe({"},{"lineNumber":653,"author":{"gitId":"-"},"content":"          next: (resp: HasResponses) \u003d\u003e {"},{"lineNumber":654,"author":{"gitId":"-"},"content":"            model.isQuestionHasResponses \u003d resp.hasResponses;"},{"lineNumber":655,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":656,"author":{"gitId":"-"},"content":"          error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":657,"author":{"gitId":"-"},"content":"            this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":658,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":659,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":660,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":661,"author":{"gitId":"-"},"content":""},{"lineNumber":662,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":663,"author":{"gitId":"-"},"content":"   * Saves the existing question."},{"lineNumber":664,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":665,"author":{"gitId":"-"},"content":"  saveExistingQuestionHandler(index: number): void {"},{"lineNumber":666,"author":{"gitId":"-"},"content":"    const questionEditFormModel: QuestionEditFormModel \u003d this.questionEditFormModels[index];"},{"lineNumber":667,"author":{"gitId":"-"},"content":"    const originalQuestionNumber: number \u003d"},{"lineNumber":668,"author":{"gitId":"-"},"content":"        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion"},{"lineNumber":669,"author":{"gitId":"-"},"content":"        this.feedbackQuestionModels.get(questionEditFormModel.feedbackQuestionId)!.questionNumber;"},{"lineNumber":670,"author":{"gitId":"-"},"content":""},{"lineNumber":671,"author":{"gitId":"-"},"content":"    questionEditFormModel.isSaving \u003d true;"},{"lineNumber":672,"author":{"gitId":"-"},"content":"    this.feedbackQuestionsService.saveFeedbackQuestion(questionEditFormModel.feedbackQuestionId, {"},{"lineNumber":673,"author":{"gitId":"-"},"content":"      questionNumber: questionEditFormModel.questionNumber,"},{"lineNumber":674,"author":{"gitId":"-"},"content":"      questionBrief: questionEditFormModel.questionBrief,"},{"lineNumber":675,"author":{"gitId":"-"},"content":"      questionDescription: questionEditFormModel.questionDescription,"},{"lineNumber":676,"author":{"gitId":"-"},"content":""},{"lineNumber":677,"author":{"gitId":"-"},"content":"      questionDetails: questionEditFormModel.questionDetails,"},{"lineNumber":678,"author":{"gitId":"-"},"content":"      questionType: questionEditFormModel.questionType,"},{"lineNumber":679,"author":{"gitId":"-"},"content":""},{"lineNumber":680,"author":{"gitId":"-"},"content":"      giverType: questionEditFormModel.giverType,"},{"lineNumber":681,"author":{"gitId":"-"},"content":"      recipientType: questionEditFormModel.recipientType,"},{"lineNumber":682,"author":{"gitId":"-"},"content":""},{"lineNumber":683,"author":{"gitId":"-"},"content":"      numberOfEntitiesToGiveFeedbackToSetting: questionEditFormModel.numberOfEntitiesToGiveFeedbackToSetting,"},{"lineNumber":684,"author":{"gitId":"-"},"content":"      customNumberOfEntitiesToGiveFeedbackTo: questionEditFormModel.customNumberOfEntitiesToGiveFeedbackTo,"},{"lineNumber":685,"author":{"gitId":"-"},"content":""},{"lineNumber":686,"author":{"gitId":"-"},"content":"      showResponsesTo: questionEditFormModel.showResponsesTo,"},{"lineNumber":687,"author":{"gitId":"-"},"content":"      showGiverNameTo: questionEditFormModel.showGiverNameTo,"},{"lineNumber":688,"author":{"gitId":"-"},"content":"      showRecipientNameTo: questionEditFormModel.showRecipientNameTo,"},{"lineNumber":689,"author":{"gitId":"-"},"content":"    })"},{"lineNumber":690,"author":{"gitId":"-"},"content":"        .pipe("},{"lineNumber":691,"author":{"gitId":"-"},"content":"            finalize(() \u003d\u003e {"},{"lineNumber":692,"author":{"gitId":"-"},"content":"              questionEditFormModel.isSaving \u003d false;"},{"lineNumber":693,"author":{"gitId":"-"},"content":"            }),"},{"lineNumber":694,"author":{"gitId":"-"},"content":"        )"},{"lineNumber":695,"author":{"gitId":"-"},"content":"        .subscribe({"},{"lineNumber":696,"author":{"gitId":"-"},"content":"          next: (updatedQuestion: FeedbackQuestion) \u003d\u003e {"},{"lineNumber":697,"author":{"gitId":"-"},"content":"            this.questionEditFormModels[index] \u003d this.getQuestionEditFormModel(updatedQuestion);"},{"lineNumber":698,"author":{"gitId":"-"},"content":"            this.feedbackQuestionModels.set(updatedQuestion.feedbackQuestionId, updatedQuestion);"},{"lineNumber":699,"author":{"gitId":"-"},"content":"            this.loadResponseStatusForQuestion(this.questionEditFormModels[index]);"},{"lineNumber":700,"author":{"gitId":"-"},"content":""},{"lineNumber":701,"author":{"gitId":"-"},"content":"            // shift question if needed"},{"lineNumber":702,"author":{"gitId":"-"},"content":"            if (originalQuestionNumber !\u003d\u003d updatedQuestion.questionNumber) {"},{"lineNumber":703,"author":{"gitId":"-"},"content":"              // move question form"},{"lineNumber":704,"author":{"gitId":"-"},"content":"              this.moveQuestionForm("},{"lineNumber":705,"author":{"gitId":"-"},"content":"                  originalQuestionNumber - 1, updatedQuestion.questionNumber - 1);"},{"lineNumber":706,"author":{"gitId":"-"},"content":"              this.normalizeQuestionNumberInQuestionForms();"},{"lineNumber":707,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":708,"author":{"gitId":"-"},"content":""},{"lineNumber":709,"author":{"gitId":"-"},"content":"            this.statusMessageService.showSuccessToast(\u0027The changes to the question have been updated.\u0027);"},{"lineNumber":710,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":711,"author":{"gitId":"-"},"content":"          error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":712,"author":{"gitId":"-"},"content":"            this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":713,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":714,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":715,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":716,"author":{"gitId":"-"},"content":""},{"lineNumber":717,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":718,"author":{"gitId":"-"},"content":"   * Moves question edit form from the original position to the new position."},{"lineNumber":719,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":720,"author":{"gitId":"-"},"content":"  private moveQuestionForm(originalPosition: number, newPosition: number): void {"},{"lineNumber":721,"author":{"gitId":"-"},"content":"    this.questionEditFormModels.splice(newPosition, 0,"},{"lineNumber":722,"author":{"gitId":"-"},"content":"        this.questionEditFormModels.splice(originalPosition, 1)[0]);"},{"lineNumber":723,"author":{"gitId":"-"},"content":""},{"lineNumber":724,"author":{"gitId":"-"},"content":"    // all expanded questions that were moved upwards must be re-expanded to reload rich text editor"},{"lineNumber":725,"author":{"gitId":"-"},"content":"    const start: number \u003d Math.min(originalPosition, newPosition);"},{"lineNumber":726,"author":{"gitId":"-"},"content":"    const movedExpandedQuestions: QuestionEditFormModel[] \u003d this.questionEditFormModels"},{"lineNumber":727,"author":{"gitId":"-"},"content":"      .slice(start, newPosition + 1)"},{"lineNumber":728,"author":{"gitId":"-"},"content":"      .filter((model: QuestionEditFormModel) \u003d\u003e !model.isCollapsed);"},{"lineNumber":729,"author":{"gitId":"-"},"content":"    movedExpandedQuestions.forEach((model: QuestionEditFormModel) \u003d\u003e {"},{"lineNumber":730,"author":{"gitId":"-"},"content":"      model.isCollapsed \u003d true;"},{"lineNumber":731,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":732,"author":{"gitId":"-"},"content":"    this.changeDetectorRef.detectChanges();"},{"lineNumber":733,"author":{"gitId":"-"},"content":"    movedExpandedQuestions.forEach((model: QuestionEditFormModel) \u003d\u003e {"},{"lineNumber":734,"author":{"gitId":"-"},"content":"      model.isCollapsed \u003d false;"},{"lineNumber":735,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":736,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":737,"author":{"gitId":"-"},"content":""},{"lineNumber":738,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":739,"author":{"gitId":"-"},"content":"   * Normalizes question number in question forms by setting question number in sequence (i.e. 1, 2, 3, 4 ...)."},{"lineNumber":740,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":741,"author":{"gitId":"-"},"content":"  private normalizeQuestionNumberInQuestionForms(): void {"},{"lineNumber":742,"author":{"gitId":"-"},"content":"    for (let i: number \u003d 1; i \u003c\u003d this.questionEditFormModels.length; i +\u003d 1) {"},{"lineNumber":743,"author":{"gitId":"-"},"content":"      const questionEditFormModel: QuestionEditFormModel \u003d this.questionEditFormModels[i - 1];"},{"lineNumber":744,"author":{"gitId":"-"},"content":"      questionEditFormModel.questionNumber \u003d i;"},{"lineNumber":745,"author":{"gitId":"-"},"content":"      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion"},{"lineNumber":746,"author":{"gitId":"-"},"content":"      this.feedbackQuestionModels.get(questionEditFormModel.feedbackQuestionId)!.questionNumber \u003d i;"},{"lineNumber":747,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":748,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":749,"author":{"gitId":"-"},"content":""},{"lineNumber":750,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":751,"author":{"gitId":"-"},"content":"   * Discards the changes made to the existing question."},{"lineNumber":752,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":753,"author":{"gitId":"-"},"content":"  discardExistingQuestionHandler(index: number): void {"},{"lineNumber":754,"author":{"gitId":"-"},"content":"    const questionEditFormModel: QuestionEditFormModel \u003d this.questionEditFormModels[index];"},{"lineNumber":755,"author":{"gitId":"-"},"content":"    const feedbackQuestion: FeedbackQuestion \u003d"},{"lineNumber":756,"author":{"gitId":"-"},"content":"        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion"},{"lineNumber":757,"author":{"gitId":"-"},"content":"        this.feedbackQuestionModels.get(questionEditFormModel.feedbackQuestionId)!;"},{"lineNumber":758,"author":{"gitId":"-"},"content":"    this.questionEditFormModels[index] \u003d this.getQuestionEditFormModel(feedbackQuestion);"},{"lineNumber":759,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":760,"author":{"gitId":"-"},"content":""},{"lineNumber":761,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":762,"author":{"gitId":"-"},"content":"   * Duplicates the question."},{"lineNumber":763,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":764,"author":{"gitId":"-"},"content":"  duplicateCurrentQuestionHandler(index: number): void {"},{"lineNumber":765,"author":{"gitId":"-"},"content":"    const questionEditFormModel: QuestionEditFormModel \u003d this.questionEditFormModels[index];"},{"lineNumber":766,"author":{"gitId":"-"},"content":""},{"lineNumber":767,"author":{"gitId":"-"},"content":"    questionEditFormModel.isDuplicating \u003d true;"},{"lineNumber":768,"author":{"gitId":"-"},"content":"    this.feedbackQuestionsService.createFeedbackQuestion(this.courseId, this.feedbackSessionName, {"},{"lineNumber":769,"author":{"gitId":"-"},"content":"      questionNumber: this.questionEditFormModels.length + 1, // add the duplicated question at the end"},{"lineNumber":770,"author":{"gitId":"-"},"content":"      questionBrief: questionEditFormModel.questionBrief,"},{"lineNumber":771,"author":{"gitId":"-"},"content":"      questionDescription: questionEditFormModel.questionDescription,"},{"lineNumber":772,"author":{"gitId":"-"},"content":""},{"lineNumber":773,"author":{"gitId":"-"},"content":"      questionDetails: questionEditFormModel.questionDetails,"},{"lineNumber":774,"author":{"gitId":"-"},"content":"      questionType: questionEditFormModel.questionType,"},{"lineNumber":775,"author":{"gitId":"-"},"content":""},{"lineNumber":776,"author":{"gitId":"-"},"content":"      giverType: questionEditFormModel.giverType,"},{"lineNumber":777,"author":{"gitId":"-"},"content":"      recipientType: questionEditFormModel.recipientType,"},{"lineNumber":778,"author":{"gitId":"-"},"content":""},{"lineNumber":779,"author":{"gitId":"-"},"content":"      numberOfEntitiesToGiveFeedbackToSetting: questionEditFormModel.numberOfEntitiesToGiveFeedbackToSetting,"},{"lineNumber":780,"author":{"gitId":"-"},"content":"      customNumberOfEntitiesToGiveFeedbackTo: questionEditFormModel.customNumberOfEntitiesToGiveFeedbackTo,"},{"lineNumber":781,"author":{"gitId":"-"},"content":""},{"lineNumber":782,"author":{"gitId":"-"},"content":"      showResponsesTo: questionEditFormModel.showResponsesTo,"},{"lineNumber":783,"author":{"gitId":"-"},"content":"      showGiverNameTo: questionEditFormModel.showGiverNameTo,"},{"lineNumber":784,"author":{"gitId":"-"},"content":"      showRecipientNameTo: questionEditFormModel.showRecipientNameTo,"},{"lineNumber":785,"author":{"gitId":"-"},"content":"    })"},{"lineNumber":786,"author":{"gitId":"-"},"content":"        .pipe("},{"lineNumber":787,"author":{"gitId":"-"},"content":"            finalize(() \u003d\u003e {"},{"lineNumber":788,"author":{"gitId":"-"},"content":"              questionEditFormModel.isDuplicating \u003d false;"},{"lineNumber":789,"author":{"gitId":"-"},"content":"            }),"},{"lineNumber":790,"author":{"gitId":"-"},"content":"        )"},{"lineNumber":791,"author":{"gitId":"-"},"content":"        .subscribe({"},{"lineNumber":792,"author":{"gitId":"-"},"content":"          next: (newQuestion: FeedbackQuestion) \u003d\u003e {"},{"lineNumber":793,"author":{"gitId":"-"},"content":"            this.questionEditFormModels.push(this.getQuestionEditFormModel(newQuestion));"},{"lineNumber":794,"author":{"gitId":"-"},"content":"            this.feedbackQuestionModels.set(newQuestion.feedbackQuestionId, newQuestion);"},{"lineNumber":795,"author":{"gitId":"-"},"content":"            this.statusMessageService.showSuccessToast(\u0027The question has been duplicated below.\u0027);"},{"lineNumber":796,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":797,"author":{"gitId":"-"},"content":"          error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":798,"author":{"gitId":"-"},"content":"            this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":799,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":800,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":801,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":802,"author":{"gitId":"-"},"content":""},{"lineNumber":803,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":804,"author":{"gitId":"-"},"content":"   * Deletes the existing question."},{"lineNumber":805,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":806,"author":{"gitId":"-"},"content":"  deleteExistingQuestionHandler(index: number): void {"},{"lineNumber":807,"author":{"gitId":"-"},"content":"    const modalRef: NgbModalRef \u003d this.simpleModalService.openConfirmationModal("},{"lineNumber":808,"author":{"gitId":"-"},"content":"        \u0027Delete the question?\u0027, SimpleModalType.DANGER,"},{"lineNumber":809,"author":{"gitId":"-"},"content":"        \u0027Warning: Deleted question cannot be recovered. \u0027"},{"lineNumber":810,"author":{"gitId":"-"},"content":"        + \u0027\u003cb\u003eAll existing responses for this question to be deleted.\u003c/b\u003e\u0027);"},{"lineNumber":811,"author":{"gitId":"-"},"content":"    modalRef.result.then(() \u003d\u003e {"},{"lineNumber":812,"author":{"gitId":"-"},"content":"      const questionEditFormModel: QuestionEditFormModel \u003d this.questionEditFormModels[index];"},{"lineNumber":813,"author":{"gitId":"-"},"content":"      questionEditFormModel.isDeleting \u003d true;"},{"lineNumber":814,"author":{"gitId":"-"},"content":"      this.feedbackQuestionsService.deleteFeedbackQuestion(questionEditFormModel.feedbackQuestionId)"},{"lineNumber":815,"author":{"gitId":"-"},"content":"          .pipe(finalize(() \u003d\u003e {"},{"lineNumber":816,"author":{"gitId":"-"},"content":"            questionEditFormModel.isDeleting \u003d false;"},{"lineNumber":817,"author":{"gitId":"-"},"content":"          }))"},{"lineNumber":818,"author":{"gitId":"-"},"content":"          .subscribe({"},{"lineNumber":819,"author":{"gitId":"-"},"content":"            next: () \u003d\u003e {"},{"lineNumber":820,"author":{"gitId":"-"},"content":"              // remove form model"},{"lineNumber":821,"author":{"gitId":"-"},"content":"              this.feedbackQuestionModels.delete(questionEditFormModel.feedbackQuestionId);"},{"lineNumber":822,"author":{"gitId":"-"},"content":"              this.questionEditFormModels.splice(index, 1);"},{"lineNumber":823,"author":{"gitId":"-"},"content":"              this.normalizeQuestionNumberInQuestionForms();"},{"lineNumber":824,"author":{"gitId":"-"},"content":""},{"lineNumber":825,"author":{"gitId":"-"},"content":"              this.statusMessageService.showSuccessToast(\u0027The question has been deleted.\u0027);"},{"lineNumber":826,"author":{"gitId":"-"},"content":"            },"},{"lineNumber":827,"author":{"gitId":"-"},"content":"            error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":828,"author":{"gitId":"-"},"content":"              this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":829,"author":{"gitId":"-"},"content":"            },"},{"lineNumber":830,"author":{"gitId":"-"},"content":"          });"},{"lineNumber":831,"author":{"gitId":"-"},"content":"    }, () \u003d\u003e {});"},{"lineNumber":832,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":833,"author":{"gitId":"-"},"content":""},{"lineNumber":834,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":835,"author":{"gitId":"-"},"content":"   * Handles display of template question modal."},{"lineNumber":836,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":837,"author":{"gitId":"-"},"content":"  templateQuestionModalHandler(): void {"},{"lineNumber":838,"author":{"gitId":"-"},"content":"    const windowClass: string \u003d \u0027modal-large\u0027;"},{"lineNumber":839,"author":{"gitId":"-"},"content":"    this.ngbModal.open(TemplateQuestionModalComponent, { windowClass }).result.then((questions: FeedbackQuestion[]) \u003d\u003e {"},{"lineNumber":840,"author":{"gitId":"-"},"content":"      let questionNumber: number \u003d this.questionEditFormModels.length; // append the questions at the end"},{"lineNumber":841,"author":{"gitId":"-"},"content":"      this.isAddingFromTemplate \u003d true;"},{"lineNumber":842,"author":{"gitId":"-"},"content":"      of(...questions).pipe("},{"lineNumber":843,"author":{"gitId":"-"},"content":"          concatMap((question: FeedbackQuestion) \u003d\u003e {"},{"lineNumber":844,"author":{"gitId":"-"},"content":"            questionNumber +\u003d 1;"},{"lineNumber":845,"author":{"gitId":"-"},"content":"            return this.feedbackQuestionsService.createFeedbackQuestion(this.courseId, this.feedbackSessionName, {"},{"lineNumber":846,"author":{"gitId":"-"},"content":"              questionNumber,"},{"lineNumber":847,"author":{"gitId":"-"},"content":"              questionBrief: question.questionBrief,"},{"lineNumber":848,"author":{"gitId":"-"},"content":"              questionDescription: question.questionDescription,"},{"lineNumber":849,"author":{"gitId":"-"},"content":""},{"lineNumber":850,"author":{"gitId":"-"},"content":"              questionDetails: question.questionDetails,"},{"lineNumber":851,"author":{"gitId":"-"},"content":"              questionType: question.questionType,"},{"lineNumber":852,"author":{"gitId":"-"},"content":""},{"lineNumber":853,"author":{"gitId":"-"},"content":"              giverType: question.giverType,"},{"lineNumber":854,"author":{"gitId":"-"},"content":"              recipientType: question.recipientType,"},{"lineNumber":855,"author":{"gitId":"-"},"content":""},{"lineNumber":856,"author":{"gitId":"-"},"content":"              numberOfEntitiesToGiveFeedbackToSetting: question.numberOfEntitiesToGiveFeedbackToSetting,"},{"lineNumber":857,"author":{"gitId":"-"},"content":"              customNumberOfEntitiesToGiveFeedbackTo: question.customNumberOfEntitiesToGiveFeedbackTo,"},{"lineNumber":858,"author":{"gitId":"-"},"content":""},{"lineNumber":859,"author":{"gitId":"-"},"content":"              showResponsesTo: question.showResponsesTo,"},{"lineNumber":860,"author":{"gitId":"-"},"content":"              showGiverNameTo: question.showGiverNameTo,"},{"lineNumber":861,"author":{"gitId":"-"},"content":"              showRecipientNameTo: question.showRecipientNameTo,"},{"lineNumber":862,"author":{"gitId":"-"},"content":"            });"},{"lineNumber":863,"author":{"gitId":"-"},"content":"          }),"},{"lineNumber":864,"author":{"gitId":"-"},"content":"      ).pipe("},{"lineNumber":865,"author":{"gitId":"-"},"content":"        finalize(() \u003d\u003e {"},{"lineNumber":866,"author":{"gitId":"-"},"content":"          this.isAddingFromTemplate \u003d false;"},{"lineNumber":867,"author":{"gitId":"-"},"content":"        }),"},{"lineNumber":868,"author":{"gitId":"-"},"content":"      ).subscribe({"},{"lineNumber":869,"author":{"gitId":"-"},"content":"        next: (newQuestion: FeedbackQuestion) \u003d\u003e {"},{"lineNumber":870,"author":{"gitId":"-"},"content":"          this.questionEditFormModels.push(this.getQuestionEditFormModel(newQuestion));"},{"lineNumber":871,"author":{"gitId":"-"},"content":"          this.feedbackQuestionModels.set(newQuestion.feedbackQuestionId, newQuestion);"},{"lineNumber":872,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":873,"author":{"gitId":"-"},"content":"        error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":874,"author":{"gitId":"-"},"content":"          this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":875,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":876,"author":{"gitId":"-"},"content":"        complete: () \u003d\u003e {"},{"lineNumber":877,"author":{"gitId":"-"},"content":"          if (questions.length \u003d\u003d\u003d 1) {"},{"lineNumber":878,"author":{"gitId":"-"},"content":"            this.statusMessageService.showSuccessToast(\u0027The question has been added to this feedback session.\u0027);"},{"lineNumber":879,"author":{"gitId":"-"},"content":"          } else {"},{"lineNumber":880,"author":{"gitId":"-"},"content":"            this.statusMessageService.showSuccessToast(\u0027The questions have been added to this feedback session.\u0027);"},{"lineNumber":881,"author":{"gitId":"-"},"content":"          }"},{"lineNumber":882,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":883,"author":{"gitId":"-"},"content":"      });"},{"lineNumber":884,"author":{"gitId":"-"},"content":"    }, () \u003d\u003e {});"},{"lineNumber":885,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":886,"author":{"gitId":"-"},"content":""},{"lineNumber":887,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":888,"author":{"gitId":"-"},"content":"   * Populates and shows new question edit form."},{"lineNumber":889,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":890,"author":{"gitId":"-"},"content":"  populateAndShowNewQuestionForm(type: FeedbackQuestionType): void {"},{"lineNumber":891,"author":{"gitId":"-"},"content":"    this.isAddingQuestionPanelExpanded \u003d true;"},{"lineNumber":892,"author":{"gitId":"-"},"content":""},{"lineNumber":893,"author":{"gitId":"-"},"content":"    const newQuestionModel: NewQuestionModel \u003d"},{"lineNumber":894,"author":{"gitId":"-"},"content":"        this.feedbackQuestionsService.getNewQuestionModel(type);"},{"lineNumber":895,"author":{"gitId":"-"},"content":""},{"lineNumber":896,"author":{"gitId":"-"},"content":"    this.newQuestionEditFormModel \u003d {"},{"lineNumber":897,"author":{"gitId":"-"},"content":"      feedbackQuestionId: \u0027\u0027,"},{"lineNumber":898,"author":{"gitId":"-"},"content":"      questionNumber: this.questionEditFormModels.length + 1,"},{"lineNumber":899,"author":{"gitId":"-"},"content":"      questionBrief: newQuestionModel.questionBrief,"},{"lineNumber":900,"author":{"gitId":"-"},"content":"      questionDescription: newQuestionModel.questionDescription,"},{"lineNumber":901,"author":{"gitId":"-"},"content":""},{"lineNumber":902,"author":{"gitId":"-"},"content":"      isQuestionHasResponses: false,"},{"lineNumber":903,"author":{"gitId":"-"},"content":""},{"lineNumber":904,"author":{"gitId":"-"},"content":"      questionType: newQuestionModel.questionType,"},{"lineNumber":905,"author":{"gitId":"-"},"content":"      questionDetails: newQuestionModel.questionDetails,"},{"lineNumber":906,"author":{"gitId":"-"},"content":""},{"lineNumber":907,"author":{"gitId":"-"},"content":"      giverType: newQuestionModel.giverType,"},{"lineNumber":908,"author":{"gitId":"-"},"content":"      recipientType: newQuestionModel.recipientType,"},{"lineNumber":909,"author":{"gitId":"-"},"content":""},{"lineNumber":910,"author":{"gitId":"-"},"content":"      numberOfEntitiesToGiveFeedbackToSetting: newQuestionModel.numberOfEntitiesToGiveFeedbackToSetting,"},{"lineNumber":911,"author":{"gitId":"-"},"content":"      customNumberOfEntitiesToGiveFeedbackTo: newQuestionModel.customNumberOfEntitiesToGiveFeedbackTo"},{"lineNumber":912,"author":{"gitId":"-"},"content":"          ? newQuestionModel.customNumberOfEntitiesToGiveFeedbackTo : 1,"},{"lineNumber":913,"author":{"gitId":"-"},"content":""},{"lineNumber":914,"author":{"gitId":"-"},"content":"      showResponsesTo: newQuestionModel.showResponsesTo,"},{"lineNumber":915,"author":{"gitId":"-"},"content":"      showGiverNameTo: newQuestionModel.showGiverNameTo,"},{"lineNumber":916,"author":{"gitId":"-"},"content":"      showRecipientNameTo: newQuestionModel.showRecipientNameTo,"},{"lineNumber":917,"author":{"gitId":"-"},"content":""},{"lineNumber":918,"author":{"gitId":"-"},"content":"      isDeleting: false,"},{"lineNumber":919,"author":{"gitId":"-"},"content":"      isDuplicating: false,"},{"lineNumber":920,"author":{"gitId":"-"},"content":"      isEditable: true,"},{"lineNumber":921,"author":{"gitId":"-"},"content":"      isSaving: false,"},{"lineNumber":922,"author":{"gitId":"-"},"content":"      isCollapsed: false,"},{"lineNumber":923,"author":{"gitId":"-"},"content":""},{"lineNumber":924,"author":{"gitId":"-"},"content":"      isVisibilityChanged: false,"},{"lineNumber":925,"author":{"gitId":"-"},"content":"      isFeedbackPathChanged: false,"},{"lineNumber":926,"author":{"gitId":"-"},"content":"      isQuestionDetailsChanged: false,"},{"lineNumber":927,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":928,"author":{"gitId":"-"},"content":""},{"lineNumber":929,"author":{"gitId":"-"},"content":"    // inherit some settings from the last question"},{"lineNumber":930,"author":{"gitId":"-"},"content":"    if (this.questionEditFormModels.length \u003e 0) {"},{"lineNumber":931,"author":{"gitId":"-"},"content":"      const lastQuestionEditFormModel: QuestionEditFormModel \u003d"},{"lineNumber":932,"author":{"gitId":"-"},"content":"          this.questionEditFormModels[this.questionEditFormModels.length - 1];"},{"lineNumber":933,"author":{"gitId":"-"},"content":""},{"lineNumber":934,"author":{"gitId":"-"},"content":"      const newQuestionAllowedFeedbackPaths: Map\u003cFeedbackParticipantType, FeedbackParticipantType[]\u003e \u003d"},{"lineNumber":935,"author":{"gitId":"-"},"content":"          this.feedbackQuestionsService.getAllowedFeedbackPaths(type);"},{"lineNumber":936,"author":{"gitId":"-"},"content":"      // inherit feedback path if applicable"},{"lineNumber":937,"author":{"gitId":"-"},"content":"      if (newQuestionAllowedFeedbackPaths.has(lastQuestionEditFormModel.giverType)"},{"lineNumber":938,"author":{"gitId":"-"},"content":"          // eslint-disable-next-line @typescript-eslint/no-non-null-assertion"},{"lineNumber":939,"author":{"gitId":"-"},"content":"          \u0026\u0026 newQuestionAllowedFeedbackPaths.get(lastQuestionEditFormModel.giverType)!"},{"lineNumber":940,"author":{"gitId":"-"},"content":"              .indexOf(lastQuestionEditFormModel.recipientType) !\u003d\u003d -1) {"},{"lineNumber":941,"author":{"gitId":"-"},"content":"        this.newQuestionEditFormModel.giverType \u003d lastQuestionEditFormModel.giverType;"},{"lineNumber":942,"author":{"gitId":"-"},"content":"        this.newQuestionEditFormModel.recipientType \u003d lastQuestionEditFormModel.recipientType;"},{"lineNumber":943,"author":{"gitId":"-"},"content":"        this.newQuestionEditFormModel.numberOfEntitiesToGiveFeedbackToSetting \u003d"},{"lineNumber":944,"author":{"gitId":"-"},"content":"          lastQuestionEditFormModel.numberOfEntitiesToGiveFeedbackToSetting;"},{"lineNumber":945,"author":{"gitId":"-"},"content":"        this.newQuestionEditFormModel.customNumberOfEntitiesToGiveFeedbackTo \u003d"},{"lineNumber":946,"author":{"gitId":"-"},"content":"          lastQuestionEditFormModel.customNumberOfEntitiesToGiveFeedbackTo;"},{"lineNumber":947,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":948,"author":{"gitId":"-"},"content":""},{"lineNumber":949,"author":{"gitId":"-"},"content":"      const newQuestionVisibilityStateMachine: VisibilityStateMachine \u003d"},{"lineNumber":950,"author":{"gitId":"-"},"content":"          this.feedbackQuestionsService.getNewVisibilityStateMachine("},{"lineNumber":951,"author":{"gitId":"-"},"content":"              this.newQuestionEditFormModel.giverType, this.newQuestionEditFormModel.recipientType);"},{"lineNumber":952,"author":{"gitId":"-"},"content":"      // inherit visibility settings if applicable, the state machine will automatically filter out invalid choices"},{"lineNumber":953,"author":{"gitId":"-"},"content":"      newQuestionVisibilityStateMachine.applyVisibilitySettings({"},{"lineNumber":954,"author":{"gitId":"-"},"content":"        SHOW_RESPONSE: lastQuestionEditFormModel.showResponsesTo,"},{"lineNumber":955,"author":{"gitId":"-"},"content":"        SHOW_GIVER_NAME: lastQuestionEditFormModel.showGiverNameTo,"},{"lineNumber":956,"author":{"gitId":"-"},"content":"        SHOW_RECIPIENT_NAME: lastQuestionEditFormModel.showRecipientNameTo,"},{"lineNumber":957,"author":{"gitId":"-"},"content":"      });"},{"lineNumber":958,"author":{"gitId":"-"},"content":"      const newQuestionShowResponsesTo: FeedbackVisibilityType[] \u003d"},{"lineNumber":959,"author":{"gitId":"-"},"content":"          newQuestionVisibilityStateMachine.getVisibilityTypesUnderVisibilityControl(VisibilityControl.SHOW_RESPONSE);"},{"lineNumber":960,"author":{"gitId":"-"},"content":"      const newQuestionShowGiverNameTo: FeedbackVisibilityType[] \u003d"},{"lineNumber":961,"author":{"gitId":"-"},"content":"          newQuestionVisibilityStateMachine.getVisibilityTypesUnderVisibilityControl(VisibilityControl.SHOW_GIVER_NAME);"},{"lineNumber":962,"author":{"gitId":"-"},"content":"      const newQuestionShowRecipientNameTo: FeedbackVisibilityType[] \u003d"},{"lineNumber":963,"author":{"gitId":"-"},"content":"          newQuestionVisibilityStateMachine"},{"lineNumber":964,"author":{"gitId":"-"},"content":"              .getVisibilityTypesUnderVisibilityControl(VisibilityControl.SHOW_RECIPIENT_NAME);"},{"lineNumber":965,"author":{"gitId":"-"},"content":""},{"lineNumber":966,"author":{"gitId":"-"},"content":"      let isAllowedToUseInheritedVisibility: boolean \u003d false;"},{"lineNumber":967,"author":{"gitId":"-"},"content":"      if (this.feedbackQuestionsService"},{"lineNumber":968,"author":{"gitId":"-"},"content":"          .isCustomFeedbackVisibilitySettingAllowed(this.newQuestionEditFormModel.questionType)) {"},{"lineNumber":969,"author":{"gitId":"-"},"content":"        isAllowedToUseInheritedVisibility \u003d true;"},{"lineNumber":970,"author":{"gitId":"-"},"content":"      } else {"},{"lineNumber":971,"author":{"gitId":"-"},"content":"        const commonFeedbackVisibilitySettings: CommonVisibilitySetting[] \u003d"},{"lineNumber":972,"author":{"gitId":"-"},"content":"            this.feedbackQuestionsService.getCommonFeedbackVisibilitySettings("},{"lineNumber":973,"author":{"gitId":"-"},"content":"                newQuestionVisibilityStateMachine, this.newQuestionEditFormModel.questionType);"},{"lineNumber":974,"author":{"gitId":"-"},"content":"        // new question is only allowed to have common visibility settings"},{"lineNumber":975,"author":{"gitId":"-"},"content":"        // check whether the inherited settings fall into that or not"},{"lineNumber":976,"author":{"gitId":"-"},"content":"        for (const commonVisibilityOption of commonFeedbackVisibilitySettings) {"},{"lineNumber":977,"author":{"gitId":"-"},"content":"          if (this.isSameSet(newQuestionShowResponsesTo, commonVisibilityOption.visibilitySettings.SHOW_RESPONSE)"},{"lineNumber":978,"author":{"gitId":"-"},"content":"              \u0026\u0026 this.isSameSet(newQuestionShowGiverNameTo,"},{"lineNumber":979,"author":{"gitId":"-"},"content":"                  commonVisibilityOption.visibilitySettings.SHOW_GIVER_NAME)"},{"lineNumber":980,"author":{"gitId":"-"},"content":"              \u0026\u0026 this.isSameSet(newQuestionShowRecipientNameTo,"},{"lineNumber":981,"author":{"gitId":"-"},"content":"                  commonVisibilityOption.visibilitySettings.SHOW_RECIPIENT_NAME)) {"},{"lineNumber":982,"author":{"gitId":"-"},"content":"            isAllowedToUseInheritedVisibility \u003d true;"},{"lineNumber":983,"author":{"gitId":"-"},"content":"            break;"},{"lineNumber":984,"author":{"gitId":"-"},"content":"          }"},{"lineNumber":985,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":986,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":987,"author":{"gitId":"-"},"content":""},{"lineNumber":988,"author":{"gitId":"-"},"content":"      if (isAllowedToUseInheritedVisibility) {"},{"lineNumber":989,"author":{"gitId":"-"},"content":"        this.newQuestionEditFormModel.showResponsesTo \u003d newQuestionShowResponsesTo;"},{"lineNumber":990,"author":{"gitId":"-"},"content":"        this.newQuestionEditFormModel.showGiverNameTo \u003d newQuestionShowGiverNameTo;"},{"lineNumber":991,"author":{"gitId":"-"},"content":"        this.newQuestionEditFormModel.showRecipientNameTo \u003d newQuestionShowRecipientNameTo;"},{"lineNumber":992,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":993,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":994,"author":{"gitId":"-"},"content":""},{"lineNumber":995,"author":{"gitId":"-"},"content":"    this.scrollToNewEditForm();"},{"lineNumber":996,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":997,"author":{"gitId":"-"},"content":""},{"lineNumber":998,"author":{"gitId":"-"},"content":"  private isSameSet(setA: FeedbackVisibilityType[], setB: FeedbackVisibilityType[]): boolean {"},{"lineNumber":999,"author":{"gitId":"-"},"content":"    return setA.length \u003d\u003d\u003d setB.length \u0026\u0026 setA.every((ele: FeedbackVisibilityType) \u003d\u003e setB.includes(ele));"},{"lineNumber":1000,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":1001,"author":{"gitId":"-"},"content":""},{"lineNumber":1002,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":1003,"author":{"gitId":"-"},"content":"   * Creates a new question."},{"lineNumber":1004,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":1005,"author":{"gitId":"-"},"content":"  createNewQuestionHandler(): void {"},{"lineNumber":1006,"author":{"gitId":"-"},"content":"    this.newQuestionEditFormModel.isSaving \u003d true;"},{"lineNumber":1007,"author":{"gitId":"-"},"content":"    this.feedbackQuestionsService.createFeedbackQuestion(this.courseId, this.feedbackSessionName, {"},{"lineNumber":1008,"author":{"gitId":"-"},"content":"      questionNumber: this.newQuestionEditFormModel.questionNumber,"},{"lineNumber":1009,"author":{"gitId":"-"},"content":"      questionBrief: this.newQuestionEditFormModel.questionBrief,"},{"lineNumber":1010,"author":{"gitId":"-"},"content":"      questionDescription: this.newQuestionEditFormModel.questionDescription,"},{"lineNumber":1011,"author":{"gitId":"-"},"content":""},{"lineNumber":1012,"author":{"gitId":"-"},"content":"      questionDetails: this.newQuestionEditFormModel.questionDetails,"},{"lineNumber":1013,"author":{"gitId":"-"},"content":"      questionType: this.newQuestionEditFormModel.questionType,"},{"lineNumber":1014,"author":{"gitId":"-"},"content":""},{"lineNumber":1015,"author":{"gitId":"-"},"content":"      giverType: this.newQuestionEditFormModel.giverType,"},{"lineNumber":1016,"author":{"gitId":"-"},"content":"      recipientType: this.newQuestionEditFormModel.recipientType,"},{"lineNumber":1017,"author":{"gitId":"-"},"content":""},{"lineNumber":1018,"author":{"gitId":"-"},"content":"      numberOfEntitiesToGiveFeedbackToSetting: this.newQuestionEditFormModel.numberOfEntitiesToGiveFeedbackToSetting,"},{"lineNumber":1019,"author":{"gitId":"-"},"content":"      customNumberOfEntitiesToGiveFeedbackTo: this.newQuestionEditFormModel.customNumberOfEntitiesToGiveFeedbackTo,"},{"lineNumber":1020,"author":{"gitId":"-"},"content":""},{"lineNumber":1021,"author":{"gitId":"-"},"content":"      showResponsesTo: this.newQuestionEditFormModel.showResponsesTo,"},{"lineNumber":1022,"author":{"gitId":"-"},"content":"      showGiverNameTo: this.newQuestionEditFormModel.showGiverNameTo,"},{"lineNumber":1023,"author":{"gitId":"-"},"content":"      showRecipientNameTo: this.newQuestionEditFormModel.showRecipientNameTo,"},{"lineNumber":1024,"author":{"gitId":"-"},"content":"    })"},{"lineNumber":1025,"author":{"gitId":"-"},"content":"        .pipe("},{"lineNumber":1026,"author":{"gitId":"-"},"content":"            finalize(() \u003d\u003e {"},{"lineNumber":1027,"author":{"gitId":"-"},"content":"              this.newQuestionEditFormModel.isSaving \u003d false;"},{"lineNumber":1028,"author":{"gitId":"-"},"content":"            }),"},{"lineNumber":1029,"author":{"gitId":"-"},"content":"        )"},{"lineNumber":1030,"author":{"gitId":"-"},"content":"        .subscribe({"},{"lineNumber":1031,"author":{"gitId":"-"},"content":"          next: (newQuestion: FeedbackQuestion) \u003d\u003e {"},{"lineNumber":1032,"author":{"gitId":"-"},"content":"            this.questionEditFormModels.push(this.getQuestionEditFormModel(newQuestion));"},{"lineNumber":1033,"author":{"gitId":"-"},"content":"            this.feedbackQuestionModels.set(newQuestion.feedbackQuestionId, newQuestion);"},{"lineNumber":1034,"author":{"gitId":"-"},"content":""},{"lineNumber":1035,"author":{"gitId":"-"},"content":"            this.moveQuestionForm("},{"lineNumber":1036,"author":{"gitId":"-"},"content":"                this.questionEditFormModels.length - 1, newQuestion.questionNumber - 1);"},{"lineNumber":1037,"author":{"gitId":"-"},"content":"            this.normalizeQuestionNumberInQuestionForms();"},{"lineNumber":1038,"author":{"gitId":"-"},"content":"            this.isAddingQuestionPanelExpanded \u003d false;"},{"lineNumber":1039,"author":{"gitId":"-"},"content":""},{"lineNumber":1040,"author":{"gitId":"-"},"content":"            this.statusMessageService.showSuccessToast(\u0027The question has been added to this feedback session.\u0027);"},{"lineNumber":1041,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":1042,"author":{"gitId":"-"},"content":"          error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":1043,"author":{"gitId":"-"},"content":"            this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":1044,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":1045,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":1046,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":1047,"author":{"gitId":"-"},"content":""},{"lineNumber":1048,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":1049,"author":{"gitId":"-"},"content":"   * Handles \u0027Copy Question\u0027 click event."},{"lineNumber":1050,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":1051,"author":{"gitId":"-"},"content":"  copyQuestionsFromOtherSessionsHandler(): void {"},{"lineNumber":1052,"author":{"gitId":"-"},"content":"    this.isCopyingQuestion \u003d true;"},{"lineNumber":1053,"author":{"gitId":"-"},"content":"    const feedbackSessionTabModels: FeedbackSessionTabModel[] \u003d [];"},{"lineNumber":1054,"author":{"gitId":"-"},"content":""},{"lineNumber":1055,"author":{"gitId":"-"},"content":"    this.feedbackSessionsService.getFeedbackSessionsForInstructor().pipe("},{"lineNumber":1056,"author":{"gitId":"-"},"content":"      finalize(() \u003d\u003e {"},{"lineNumber":1057,"author":{"gitId":"-"},"content":"        this.isCopyingQuestion \u003d false;"},{"lineNumber":1058,"author":{"gitId":"-"},"content":"      }),"},{"lineNumber":1059,"author":{"gitId":"-"},"content":"    ).subscribe({"},{"lineNumber":1060,"author":{"gitId":"-"},"content":"      next: (response: FeedbackSessions) \u003d\u003e {"},{"lineNumber":1061,"author":{"gitId":"-"},"content":"        response.feedbackSessions.forEach((feedbackSession: FeedbackSession) \u003d\u003e {"},{"lineNumber":1062,"author":{"gitId":"-"},"content":"          const model: FeedbackSessionTabModel \u003d {"},{"lineNumber":1063,"author":{"gitId":"-"},"content":"            courseId: feedbackSession.courseId,"},{"lineNumber":1064,"author":{"gitId":"-"},"content":"            feedbackSessionName: feedbackSession.feedbackSessionName,"},{"lineNumber":1065,"author":{"gitId":"-"},"content":"            createdAtTimestamp: feedbackSession.createdAtTimestamp,"},{"lineNumber":1066,"author":{"gitId":"-"},"content":"            questionsTableRowModels: [],"},{"lineNumber":1067,"author":{"gitId":"-"},"content":"            isTabExpanded: false,"},{"lineNumber":1068,"author":{"gitId":"-"},"content":"            hasQuestionsLoaded: false,"},{"lineNumber":1069,"author":{"gitId":"-"},"content":"            hasLoadingFailed: false,"},{"lineNumber":1070,"author":{"gitId":"-"},"content":"            questionsTableRowModelsSortBy: SortBy.NONE,"},{"lineNumber":1071,"author":{"gitId":"-"},"content":"            questionsTableRowModelsSortOrder: SortOrder.ASC,"},{"lineNumber":1072,"author":{"gitId":"-"},"content":"          };"},{"lineNumber":1073,"author":{"gitId":"-"},"content":"          feedbackSessionTabModels.push(model);"},{"lineNumber":1074,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":1075,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":1076,"author":{"gitId":"-"},"content":"      error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":1077,"author":{"gitId":"-"},"content":"        this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":1078,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":1079,"author":{"gitId":"-"},"content":"      complete: () \u003d\u003e {"},{"lineNumber":1080,"author":{"gitId":"-"},"content":"        const ref: NgbModalRef \u003d this.ngbModal.open(CopyQuestionsFromOtherSessionsModalComponent);"},{"lineNumber":1081,"author":{"gitId":"-"},"content":"        ref.componentInstance.feedbackSessionTabModels \u003d feedbackSessionTabModels;"},{"lineNumber":1082,"author":{"gitId":"-"},"content":""},{"lineNumber":1083,"author":{"gitId":"-"},"content":"        ref.result.then((questionsToCopy: FeedbackQuestion[]) \u003d\u003e {"},{"lineNumber":1084,"author":{"gitId":"-"},"content":"          this.isCopyingQuestion \u003d true;"},{"lineNumber":1085,"author":{"gitId":"-"},"content":"          of(...questionsToCopy).pipe("},{"lineNumber":1086,"author":{"gitId":"-"},"content":"              concatMap((questionToCopy: FeedbackQuestion) \u003d\u003e {"},{"lineNumber":1087,"author":{"gitId":"-"},"content":"                return this.feedbackQuestionsService.createFeedbackQuestion(this.courseId, this.feedbackSessionName, {"},{"lineNumber":1088,"author":{"gitId":"-"},"content":"                  questionNumber: this.questionEditFormModels.length + 1, // add the copied question at the end"},{"lineNumber":1089,"author":{"gitId":"-"},"content":"                  questionBrief: questionToCopy.questionBrief,"},{"lineNumber":1090,"author":{"gitId":"-"},"content":"                  questionDescription: questionToCopy.questionDescription,"},{"lineNumber":1091,"author":{"gitId":"-"},"content":""},{"lineNumber":1092,"author":{"gitId":"-"},"content":"                  questionDetails: questionToCopy.questionDetails,"},{"lineNumber":1093,"author":{"gitId":"-"},"content":"                  questionType: questionToCopy.questionType,"},{"lineNumber":1094,"author":{"gitId":"-"},"content":""},{"lineNumber":1095,"author":{"gitId":"-"},"content":"                  giverType: questionToCopy.giverType,"},{"lineNumber":1096,"author":{"gitId":"-"},"content":"                  recipientType: questionToCopy.recipientType,"},{"lineNumber":1097,"author":{"gitId":"-"},"content":""},{"lineNumber":1098,"author":{"gitId":"-"},"content":"                  numberOfEntitiesToGiveFeedbackToSetting: questionToCopy.numberOfEntitiesToGiveFeedbackToSetting,"},{"lineNumber":1099,"author":{"gitId":"-"},"content":"                  customNumberOfEntitiesToGiveFeedbackTo: questionToCopy.customNumberOfEntitiesToGiveFeedbackTo,"},{"lineNumber":1100,"author":{"gitId":"-"},"content":""},{"lineNumber":1101,"author":{"gitId":"-"},"content":"                  showResponsesTo: questionToCopy.showResponsesTo,"},{"lineNumber":1102,"author":{"gitId":"-"},"content":"                  showGiverNameTo: questionToCopy.showGiverNameTo,"},{"lineNumber":1103,"author":{"gitId":"-"},"content":"                  showRecipientNameTo: questionToCopy.showRecipientNameTo,"},{"lineNumber":1104,"author":{"gitId":"-"},"content":"                });"},{"lineNumber":1105,"author":{"gitId":"-"},"content":"              }),"},{"lineNumber":1106,"author":{"gitId":"-"},"content":"              finalize(() \u003d\u003e {"},{"lineNumber":1107,"author":{"gitId":"-"},"content":"                this.isCopyingQuestion \u003d false;"},{"lineNumber":1108,"author":{"gitId":"-"},"content":"              }),"},{"lineNumber":1109,"author":{"gitId":"-"},"content":"          ).subscribe({"},{"lineNumber":1110,"author":{"gitId":"-"},"content":"            next: (newQuestion: FeedbackQuestion) \u003d\u003e {"},{"lineNumber":1111,"author":{"gitId":"-"},"content":"              this.questionEditFormModels.push(this.getQuestionEditFormModel(newQuestion));"},{"lineNumber":1112,"author":{"gitId":"-"},"content":"              this.feedbackQuestionModels.set(newQuestion.feedbackQuestionId, newQuestion);"},{"lineNumber":1113,"author":{"gitId":"-"},"content":"              this.statusMessageService.showSuccessToast("},{"lineNumber":1114,"author":{"gitId":"-"},"content":"                  \u0027The selected question(s) have been added to this feedback session.\u0027,"},{"lineNumber":1115,"author":{"gitId":"-"},"content":"              );"},{"lineNumber":1116,"author":{"gitId":"-"},"content":"            },"},{"lineNumber":1117,"author":{"gitId":"-"},"content":"            error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":1118,"author":{"gitId":"-"},"content":"              this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":1119,"author":{"gitId":"-"},"content":"            },"},{"lineNumber":1120,"author":{"gitId":"-"},"content":"          });"},{"lineNumber":1121,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":1122,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":1123,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":1124,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":1125,"author":{"gitId":"-"},"content":""},{"lineNumber":1126,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":1127,"author":{"gitId":"-"},"content":"   * Gets all students of a course."},{"lineNumber":1128,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":1129,"author":{"gitId":"-"},"content":"  getAllStudentsOfCourse(): void {"},{"lineNumber":1130,"author":{"gitId":"-"},"content":"    this.studentService.getStudentsFromCourse({ courseId: this.courseId })"},{"lineNumber":1131,"author":{"gitId":"-"},"content":"        .subscribe({"},{"lineNumber":1132,"author":{"gitId":"-"},"content":"          next: (students: Students) \u003d\u003e {"},{"lineNumber":1133,"author":{"gitId":"-"},"content":"            this.studentsOfCourse \u003d students.students;"},{"lineNumber":1134,"author":{"gitId":"-"},"content":""},{"lineNumber":1135,"author":{"gitId":"-"},"content":"            // sort the student list based on team name and student name"},{"lineNumber":1136,"author":{"gitId":"-"},"content":"            this.studentsOfCourse.sort((a: Student, b: Student): number \u003d\u003e {"},{"lineNumber":1137,"author":{"gitId":"-"},"content":"              const teamNameCompare: number \u003d a.teamName.localeCompare(b.teamName);"},{"lineNumber":1138,"author":{"gitId":"-"},"content":"              if (teamNameCompare \u003d\u003d\u003d 0) {"},{"lineNumber":1139,"author":{"gitId":"-"},"content":"                return a.name.localeCompare(b.name);"},{"lineNumber":1140,"author":{"gitId":"-"},"content":"              }"},{"lineNumber":1141,"author":{"gitId":"-"},"content":"              return teamNameCompare;"},{"lineNumber":1142,"author":{"gitId":"-"},"content":"            });"},{"lineNumber":1143,"author":{"gitId":"-"},"content":""},{"lineNumber":1144,"author":{"gitId":"-"},"content":"            // select the first student"},{"lineNumber":1145,"author":{"gitId":"-"},"content":"            if (this.studentsOfCourse.length \u003e\u003d 1) {"},{"lineNumber":1146,"author":{"gitId":"-"},"content":"              this.emailOfStudentToPreview \u003d this.studentsOfCourse[0].email;"},{"lineNumber":1147,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":1148,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":1149,"author":{"gitId":"-"},"content":"          error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":1150,"author":{"gitId":"-"},"content":"            this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":1151,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":1152,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":1153,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":1154,"author":{"gitId":"-"},"content":""},{"lineNumber":1155,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":1156,"author":{"gitId":"-"},"content":"   * Gets all instructors of a course."},{"lineNumber":1157,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":1158,"author":{"gitId":"-"},"content":"  getAllInstructors(): void {"},{"lineNumber":1159,"author":{"gitId":"-"},"content":"    this.instructorService.loadInstructors({"},{"lineNumber":1160,"author":{"gitId":"-"},"content":"      courseId: this.courseId,"},{"lineNumber":1161,"author":{"gitId":"-"},"content":"      intent: Intent.FULL_DETAIL,"},{"lineNumber":1162,"author":{"gitId":"-"},"content":"    })"},{"lineNumber":1163,"author":{"gitId":"-"},"content":"        .subscribe({"},{"lineNumber":1164,"author":{"gitId":"-"},"content":"          next: (instructors: Instructors) \u003d\u003e {"},{"lineNumber":1165,"author":{"gitId":"-"},"content":"            this.instructorsOfCourse \u003d instructors.instructors;"},{"lineNumber":1166,"author":{"gitId":"-"},"content":"            // TODO use privilege API to filter instructors who has INSTRUCTOR_PERMISSION_SUBMIT_SESSION_IN_SECTIONS"},{"lineNumber":1167,"author":{"gitId":"-"},"content":"            // in the feedback session"},{"lineNumber":1168,"author":{"gitId":"-"},"content":""},{"lineNumber":1169,"author":{"gitId":"-"},"content":"            // sort the instructor list based on name"},{"lineNumber":1170,"author":{"gitId":"-"},"content":"            this.instructorsOfCourse.sort((a: Instructor, b: Instructor): number \u003d\u003e {"},{"lineNumber":1171,"author":{"gitId":"-"},"content":"              return a.name.localeCompare(b.name);"},{"lineNumber":1172,"author":{"gitId":"-"},"content":"            });"},{"lineNumber":1173,"author":{"gitId":"-"},"content":""},{"lineNumber":1174,"author":{"gitId":"-"},"content":"            // select the first instructor"},{"lineNumber":1175,"author":{"gitId":"-"},"content":"            if (this.instructorsOfCourse.length \u003e\u003d 1) {"},{"lineNumber":1176,"author":{"gitId":"-"},"content":"              this.emailOfInstructorToPreview \u003d this.instructorsOfCourse[0].email;"},{"lineNumber":1177,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":1178,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":1179,"author":{"gitId":"-"},"content":"          error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":1180,"author":{"gitId":"-"},"content":"            this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":1181,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":1182,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":1183,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":1184,"author":{"gitId":"-"},"content":""},{"lineNumber":1185,"author":{"gitId":"-"},"content":"  expandAll(): void {"},{"lineNumber":1186,"author":{"gitId":"-"},"content":"    this.questionEditFormModels.forEach(((model: QuestionEditFormModel): void \u003d\u003e {"},{"lineNumber":1187,"author":{"gitId":"-"},"content":"      model.isCollapsed \u003d false;"},{"lineNumber":1188,"author":{"gitId":"-"},"content":"    }));"},{"lineNumber":1189,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":1190,"author":{"gitId":"-"},"content":""},{"lineNumber":1191,"author":{"gitId":"-"},"content":"  collapseAll(): void {"},{"lineNumber":1192,"author":{"gitId":"-"},"content":"    this.questionEditFormModels.forEach(((model: QuestionEditFormModel): void \u003d\u003e {"},{"lineNumber":1193,"author":{"gitId":"-"},"content":"      model.isCollapsed \u003d true;"},{"lineNumber":1194,"author":{"gitId":"-"},"content":"    }));"},{"lineNumber":1195,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":1196,"author":{"gitId":"-"},"content":""},{"lineNumber":1197,"author":{"gitId":"-"},"content":"  private deepCopy\u003cT\u003e(obj: T): T {"},{"lineNumber":1198,"author":{"gitId":"-"},"content":"    return JSON.parse(JSON.stringify(obj));"},{"lineNumber":1199,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":1200,"author":{"gitId":"-"},"content":""},{"lineNumber":1201,"author":{"gitId":"-"},"content":"  private scrollToNewEditForm(): void {"},{"lineNumber":1202,"author":{"gitId":"-"},"content":"    setTimeout(() \u003d\u003e {"},{"lineNumber":1203,"author":{"gitId":"-"},"content":"      const allEditForms: NodeListOf\u003cElement\u003e \u003d document.querySelectorAll(\u0027tm-question-edit-form\u0027);"},{"lineNumber":1204,"author":{"gitId":"-"},"content":"      const newEditForm: Element \u003d allEditForms[allEditForms.length - 1];"},{"lineNumber":1205,"author":{"gitId":"-"},"content":"      const yOffset: number \u003d -70; // Need offset because of the navBar"},{"lineNumber":1206,"author":{"gitId":"-"},"content":"      const y: number \u003d newEditForm.getBoundingClientRect().top + window.scrollY + yOffset;"},{"lineNumber":1207,"author":{"gitId":"-"},"content":"      window.scrollTo({ top: y, behavior: \u0027smooth\u0027 });"},{"lineNumber":1208,"author":{"gitId":"-"},"content":"    }, 0);"},{"lineNumber":1209,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":1210,"author":{"gitId":"-"},"content":""},{"lineNumber":1211,"author":{"gitId":"-"},"content":"  scrollToTopOfPage(): void {"},{"lineNumber":1212,"author":{"gitId":"-"},"content":"    window.scrollTo({ top: 0, behavior: \u0027smooth\u0027 });"},{"lineNumber":1213,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":1214,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"cedricongjh":1,"-":1213}},{"path":"src/web/app/pages-session/session-submission-page/session-submission-page.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"bg-light\" *ngIf\u003d\"moderatedPerson\"\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"col-12 text-center text-break\"\u003e"},{"lineNumber":3,"author":{"gitId":"-"},"content":"    \u003ch5\u003eYou are moderating responses for"},{"lineNumber":4,"author":{"gitId":"-"},"content":"      \u003cspan *ngIf\u003d\"intent \u003d\u003d\u003d Intent.STUDENT_SUBMISSION\"\u003estudent\u003c/span\u003e"},{"lineNumber":5,"author":{"gitId":"-"},"content":"      \u003cspan *ngIf\u003d\"intent \u003d\u003d\u003d Intent.INSTRUCTOR_SUBMISSION\"\u003einstructor\u003c/span\u003e"},{"lineNumber":6,"author":{"gitId":"-"},"content":"      {{ personName }} ({{ moderatedPerson }})"},{"lineNumber":7,"author":{"gitId":"-"},"content":"      \u003cbutton type\u003d\"button\" class\u003d\"btn btn-link\" *ngIf\u003d\"!isModerationHintExpanded\" (click)\u003d\"isModerationHintExpanded \u003d true\"\u003e[More]\u003c/button\u003e"},{"lineNumber":8,"author":{"gitId":"-"},"content":"      \u003cbutton type\u003d\"button\" class\u003d\"btn btn-link\" *ngIf\u003d\"isModerationHintExpanded\" (click)\u003d\"isModerationHintExpanded \u003d false\"\u003e[Less]\u003c/button\u003e"},{"lineNumber":9,"author":{"gitId":"-"},"content":"    \u003c/h5\u003e"},{"lineNumber":10,"author":{"gitId":"-"},"content":"    \u003cdiv *ngIf\u003d\"isModerationHintExpanded\" class\u003d\"text-start\"\u003e"},{"lineNumber":11,"author":{"gitId":"-"},"content":"      \u003cp\u003e"},{"lineNumber":12,"author":{"gitId":"-"},"content":"        The page below resembles the submission page as seen by the respondent {{ personName }} ({{ moderatedPerson }})."},{"lineNumber":13,"author":{"gitId":"-"},"content":"        You can use it to moderate responses submitted by the respondent or submit responses on behalf of the respondent."},{"lineNumber":14,"author":{"gitId":"-"},"content":"      \u003c/p\u003e"},{"lineNumber":15,"author":{"gitId":"-"},"content":"      \u003cp\u003e"},{"lineNumber":16,"author":{"gitId":"-"},"content":"        Note that due to visibility settings, questions that are not supposed to show responses to instructors (i.e you) are not shown in the page below."},{"lineNumber":17,"author":{"gitId":"-"},"content":"      \u003c/p\u003e"},{"lineNumber":18,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":19,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":20,"author":{"gitId":"-"},"content":"\u003c/div\u003e"},{"lineNumber":21,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"bg-light\" *ngIf\u003d\"previewAsPerson\"\u003e"},{"lineNumber":22,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"col-12 text-center text-break\"\u003e"},{"lineNumber":23,"author":{"gitId":"-"},"content":"    \u003ch4\u003ePreviewing Session as"},{"lineNumber":24,"author":{"gitId":"-"},"content":"      \u003cspan *ngIf\u003d\"intent \u003d\u003d\u003d Intent.STUDENT_SUBMISSION\"\u003estudent\u003c/span\u003e"},{"lineNumber":25,"author":{"gitId":"-"},"content":"      \u003cspan *ngIf\u003d\"intent \u003d\u003d\u003d Intent.INSTRUCTOR_SUBMISSION\"\u003einstructor\u003c/span\u003e"},{"lineNumber":26,"author":{"gitId":"-"},"content":"      {{ personName }} ({{ previewAsPerson }})"},{"lineNumber":27,"author":{"gitId":"-"},"content":"    \u003c/h4\u003e"},{"lineNumber":28,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":29,"author":{"gitId":"-"},"content":"\u003c/div\u003e"},{"lineNumber":30,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"row\" *ngIf\u003d\"regKey\"\u003e"},{"lineNumber":31,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"col-12\"\u003e"},{"lineNumber":32,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"alert alert-primary\" role\u003d\"alert\"\u003e"},{"lineNumber":33,"author":{"gitId":"-"},"content":"      \u003cdiv *ngIf\u003d\"loggedInUser\"\u003e"},{"lineNumber":34,"author":{"gitId":"-"},"content":"        You are submitting feedback as \u003cmark\u003e\u003cb\u003e{{ personName }}\u003c/b\u003e\u003c/mark\u003e. If you wish to link your Google account ({{ loggedInUser }}) with this user,"},{"lineNumber":35,"author":{"gitId":"-"},"content":"        \u003ca href\u003d\"#\" (click)\u003d\"joinCourseForUnregisteredEntity(); $event.preventDefault()\"\u003eclick here\u003c/a\u003e."},{"lineNumber":36,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":37,"author":{"gitId":"-"},"content":"      \u003cdiv *ngIf\u003d\"!loggedInUser\"\u003e"},{"lineNumber":38,"author":{"gitId":"-"},"content":"        You are submitting feedback as \u003cmark\u003e\u003cb\u003e{{ personName }}\u003c/b\u003e\u003c/mark\u003e. You may submit feedback for sessions that are currently open and view results without logging in."},{"lineNumber":39,"author":{"gitId":"-"},"content":"        To access other features you need to \u003ca href\u003d\"#\" (click)\u003d\"joinCourseForUnregisteredEntity(); $event.preventDefault()\"\u003elogin using a Google account\u003c/a\u003e (optional)."},{"lineNumber":40,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":41,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":42,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":43,"author":{"gitId":"-"},"content":"\u003c/div\u003e"},{"lineNumber":44,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"row mobile-invisible\" *ngIf\u003d\"feedbackSessionSubmissionStatus \u003d\u003d\u003d FeedbackSessionSubmissionStatus.OPEN\"\u003e"},{"lineNumber":45,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"col-12\"\u003e"},{"lineNumber":46,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"alert alert-primary\" role\u003d\"alert\"\u003e"},{"lineNumber":47,"author":{"gitId":"-"},"content":"      \u003ci class\u003d\"fas fa-exclamation-circle\"\u003e\u003c/i\u003e Notes:"},{"lineNumber":48,"author":{"gitId":"-"},"content":"      \u003cul\u003e"},{"lineNumber":49,"author":{"gitId":"-"},"content":"        \u003cli\u003e"},{"lineNumber":50,"author":{"gitId":"-"},"content":"          You can use the \u003cb\u003eSubmit Response for Question _\u003c/b\u003e buttons to submit one-response-at-a-time."},{"lineNumber":51,"author":{"gitId":"-"},"content":"          \u003cbr\u003eAlternatively, you can submit all responses in one go using the \u003cb\u003eSubmit Responses for All Questions\u003c/b\u003e button at the bottom of this page."},{"lineNumber":52,"author":{"gitId":"-"},"content":"        \u003c/li\u003e"},{"lineNumber":53,"author":{"gitId":"-"},"content":"        \u003cli\u003eYou may edit your submission any number of times before the closing time of this session.\u003c/li\u003e"},{"lineNumber":54,"author":{"gitId":"-"},"content":"      \u003c/ul\u003e"},{"lineNumber":55,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":56,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":57,"author":{"gitId":"-"},"content":"\u003c/div\u003e"},{"lineNumber":58,"author":{"gitId":"-"},"content":""},{"lineNumber":59,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"card card-plain\" *tmIsLoading\u003d\"isCourseLoading || isFeedbackSessionLoading\"\u003e"},{"lineNumber":60,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"card-body\"\u003e"},{"lineNumber":61,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"row text-center\"\u003e"},{"lineNumber":62,"author":{"gitId":"-"},"content":"      \u003clabel class\u003d\"col-md-2 text-md-end\"\u003eCourse ID:\u003c/label\u003e"},{"lineNumber":63,"author":{"gitId":"-"},"content":"      \u003cdiv id\u003d\"course-id\" class\u003d\"col-md-10 text-md-start\"\u003e{{ courseId }}\u003c/div\u003e"},{"lineNumber":64,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":65,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"row text-center\" *ngIf\u003d\"courseName\"\u003e"},{"lineNumber":66,"author":{"gitId":"-"},"content":"      \u003clabel class\u003d\"col-md-2 text-md-end\"\u003eCourse name:\u003c/label\u003e"},{"lineNumber":67,"author":{"gitId":"-"},"content":"      \u003cdiv id\u003d\"course-name\" class\u003d\"col-md-10 text-md-start\"\u003e{{ courseName }}\u003c/div\u003e"},{"lineNumber":68,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":69,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"row text-center\" *ngIf\u003d\"courseInstitute\"\u003e"},{"lineNumber":70,"author":{"gitId":"-"},"content":"      \u003clabel class\u003d\"col-md-2 text-md-end\"\u003eCourse institute:\u003c/label\u003e"},{"lineNumber":71,"author":{"gitId":"-"},"content":"      \u003cdiv id\u003d\"course-institute\" class\u003d\"col-md-10 text-md-start\"\u003e{{ courseInstitute }}\u003c/div\u003e"},{"lineNumber":72,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":73,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"row text-center\"\u003e"},{"lineNumber":74,"author":{"gitId":"-"},"content":"      \u003clabel class\u003d\"col-md-2 text-md-end\"\u003eSession:\u003c/label\u003e"},{"lineNumber":75,"author":{"gitId":"-"},"content":"      \u003cdiv id\u003d\"fs-name\" class\u003d\"col-md-10 text-md-start\"\u003e{{ feedbackSessionName }}\u003c/div\u003e"},{"lineNumber":76,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":77,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"row text-center\"\u003e"},{"lineNumber":78,"author":{"gitId":"-"},"content":"      \u003clabel class\u003d\"col-md-2 text-md-end\"\u003eOpening time:\u003c/label\u003e"},{"lineNumber":79,"author":{"gitId":"-"},"content":"      \u003cdiv id\u003d\"opening-time\" class\u003d\"col-md-10 text-md-start\"\u003e{{ formattedSessionOpeningTime }}\u003c/div\u003e"},{"lineNumber":80,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":81,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"row text-center\"\u003e"},{"lineNumber":82,"author":{"gitId":"-"},"content":"      \u003clabel class\u003d\"col-md-2 text-md-end\"\u003eClosing time:\u003c/label\u003e"},{"lineNumber":83,"author":{"gitId":"-"},"content":"      \u003cdiv id\u003d\"closing-time\" class\u003d\"col-md-10 text-md-start\"\u003e{{ formattedSessionClosingTime }}\u003c/div\u003e"},{"lineNumber":84,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":85,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"row text-center\"\u003e"},{"lineNumber":86,"author":{"gitId":"-"},"content":"      \u003clabel class\u003d\"col-md-2 text-md-end\"\u003eInstructions:\u003c/label\u003e"},{"lineNumber":87,"author":{"gitId":"-"},"content":"      \u003cdiv id\u003d\"instructions\" class\u003d\"col-md-10 text-md-start\" [innerHTML]\u003d\"feedbackSessionInstructions | safeHtml\"\u003e\u003c/div\u003e"},{"lineNumber":88,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":89,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":90,"author":{"gitId":"-"},"content":"\u003c/div\u003e"},{"lineNumber":91,"author":{"gitId":"-"},"content":""},{"lineNumber":92,"author":{"gitId":"-"},"content":"\u003ctm-loading-retry [shouldShowRetry]\u003d\"hasFeedbackSessionQuestionsLoadingFailed\" [message]\u003d\"\u0027Failed to load questions\u0027\" (retryEvent)\u003d\"retryLoadingFeedbackSessionQuestions()\"\u003e"},{"lineNumber":93,"author":{"gitId":"-"},"content":"  \u003cdiv *tmIsLoading\u003d\"isFeedbackSessionQuestionsLoading\"\u003e"},{"lineNumber":94,"author":{"gitId":"-"},"content":"    \u003ctm-question-submission-form *ngFor\u003d\"let questionSubmissionForm of questionSubmissionForms; let i \u003d index; trackBy: trackQuestionSubmissionFormByFn\""},{"lineNumber":95,"author":{"gitId":"-"},"content":"                                 [attr.id]\u003d\"questionSubmissionForm.feedbackQuestionId\""},{"lineNumber":96,"author":{"gitId":"-"},"content":"                                 inViewport (inViewportAction)\u003d\"loadRecipientsAndResponses($event, questionSubmissionForm)\""},{"lineNumber":97,"author":{"gitId":"-"},"content":"                                 [(formModel)]\u003d\"questionSubmissionForms[i]\" [formMode]\u003d\"getQuestionSubmissionFormMode(questionSubmissionForm)\""},{"lineNumber":98,"author":{"gitId":"-"},"content":"                                 [isSubmissionDisabled]\u003d\"isSubmissionFormsDisabled\" [isFormsDisabled]\u003d\"isSubmissionFormsDisabled \u0026\u0026 !this.previewAsPerson\""},{"lineNumber":99,"author":{"gitId":"-"},"content":"                                 [isSavingResponses]\u003d\"isSavingResponses\" (responsesSave)\u003d\"saveFeedbackResponses([$event])\""},{"lineNumber":100,"author":{"gitId":"-"},"content":"                                 (deleteCommentEvent)\u003d\"deleteParticipantComment(i, $event)\""},{"lineNumber":101,"author":{"gitId":"-"},"content":"                                 [isQuestionCountOne]\u003d\"isQuestionCountOne\""},{"lineNumber":102,"author":{"gitId":"domlimm"},"content":"                                 [(isSubmitAllClicked)]\u003d\"isSubmitAllClicked\""},{"lineNumber":103,"author":{"gitId":"-"},"content":"    \u003e\u003c/tm-question-submission-form\u003e"},{"lineNumber":104,"author":{"gitId":"-"},"content":""},{"lineNumber":105,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"row\" *ngIf\u003d\"questionsNeedingSubmission.length \u003d\u003d\u003d 0\"\u003e"},{"lineNumber":106,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"col-12 text-center\"\u003e"},{"lineNumber":107,"author":{"gitId":"-"},"content":"        \u003cdiv class\u003d\"alert alert-info\" role\u003d\"alert\"\u003e"},{"lineNumber":108,"author":{"gitId":"-"},"content":"          There are no questions for you to answer here!"},{"lineNumber":109,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":110,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":111,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":112,"author":{"gitId":"-"},"content":"    \u003c!-- Do not display if only one question can be answered, as a button to submit individual response exists --\u003e"},{"lineNumber":113,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"row\" *ngIf\u003d\"questionsNeedingSubmission.length \u003e 1\"\u003e"},{"lineNumber":114,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"col-12 text-center\"\u003e"},{"lineNumber":115,"author":{"gitId":"-"},"content":"        \u003cbutton id\u003d\"btn-submit\" type\u003d\"submit\" class\u003d\"btn btn-success\""},{"lineNumber":116,"author":{"gitId":"-"},"content":"                ngbTooltip\u003d\"You can save your responses at any time and come back later to continue.\""},{"lineNumber":117,"author":{"gitId":"-"},"content":"                (click)\u003d\"saveFeedbackResponses(questionSubmissionForms)\" [disabled]\u003d\"isSavingResponses || isSubmissionFormsDisabled\""},{"lineNumber":118,"author":{"gitId":"-"},"content":"        \u003e\u003ctm-ajax-loading *ngIf\u003d\"isSavingResponses\"\u003e\u003c/tm-ajax-loading\u003eSubmit Responses for All Questions\u003c/button\u003e"},{"lineNumber":119,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":120,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":121,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":122,"author":{"gitId":"-"},"content":"\u003c/tm-loading-retry\u003e"}],"authorContributionMap":{"domlimm":1,"-":121}},{"path":"src/web/app/pages-session/session-submission-page/session-submission-page.component.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { DOCUMENT } from \u0027@angular/common\u0027;"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import { AfterViewInit, Component, Inject, OnInit } from \u0027@angular/core\u0027;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"import { ActivatedRoute } from \u0027@angular/router\u0027;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import { NgbModal, NgbModalRef } from \u0027@ng-bootstrap/ng-bootstrap\u0027;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import { PageScrollService } from \u0027ngx-page-scroll-core\u0027;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import { forkJoin, Observable, of } from \u0027rxjs\u0027;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import { catchError, finalize, switchMap, tap } from \u0027rxjs/operators\u0027;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import { environment } from \u0027../../../environments/environment\u0027;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import { AuthService } from \u0027../../../services/auth.service\u0027;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import { CourseService } from \u0027../../../services/course.service\u0027;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import { DeadlineExtensionHelper } from \u0027../../../services/deadline-extension-helper\u0027;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import { FeedbackQuestionsService } from \u0027../../../services/feedback-questions.service\u0027;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import { FeedbackResponseCommentService } from \u0027../../../services/feedback-response-comment.service\u0027;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import { FeedbackResponsesResponse, FeedbackResponsesService } from \u0027../../../services/feedback-responses.service\u0027;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import { FeedbackSessionsService } from \u0027../../../services/feedback-sessions.service\u0027;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"import { InstructorService } from \u0027../../../services/instructor.service\u0027;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"import { LogService } from \u0027../../../services/log.service\u0027;"},{"lineNumber":18,"author":{"gitId":"-"},"content":"import { NavigationService } from \u0027../../../services/navigation.service\u0027;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"import { SimpleModalService } from \u0027../../../services/simple-modal.service\u0027;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"import { StatusMessageService } from \u0027../../../services/status-message.service\u0027;"},{"lineNumber":21,"author":{"gitId":"-"},"content":"import { StudentService } from \u0027../../../services/student.service\u0027;"},{"lineNumber":22,"author":{"gitId":"-"},"content":"import { TimezoneService } from \u0027../../../services/timezone.service\u0027;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":24,"author":{"gitId":"-"},"content":"  AuthInfo,"},{"lineNumber":25,"author":{"gitId":"-"},"content":"  Course,"},{"lineNumber":26,"author":{"gitId":"-"},"content":"  FeedbackParticipantType,"},{"lineNumber":27,"author":{"gitId":"-"},"content":"  FeedbackQuestion,"},{"lineNumber":28,"author":{"gitId":"-"},"content":"  FeedbackQuestionRecipient,"},{"lineNumber":29,"author":{"gitId":"-"},"content":"  FeedbackQuestionRecipients,"},{"lineNumber":30,"author":{"gitId":"-"},"content":"  FeedbackResponse,"},{"lineNumber":31,"author":{"gitId":"-"},"content":"  FeedbackResponseComment,"},{"lineNumber":32,"author":{"gitId":"-"},"content":"  FeedbackResponses,"},{"lineNumber":33,"author":{"gitId":"-"},"content":"  FeedbackSession,"},{"lineNumber":34,"author":{"gitId":"-"},"content":"  FeedbackSessionLogType,"},{"lineNumber":35,"author":{"gitId":"-"},"content":"  FeedbackSessionSubmissionStatus,"},{"lineNumber":36,"author":{"gitId":"-"},"content":"  Instructor,"},{"lineNumber":37,"author":{"gitId":"-"},"content":"  NumberOfEntitiesToGiveFeedbackToSetting,"},{"lineNumber":38,"author":{"gitId":"-"},"content":"  RegkeyValidity,"},{"lineNumber":39,"author":{"gitId":"-"},"content":"  Student,"},{"lineNumber":40,"author":{"gitId":"-"},"content":"} from \u0027../../../types/api-output\u0027;"},{"lineNumber":41,"author":{"gitId":"-"},"content":"import { FeedbackResponseRequest, Intent } from \u0027../../../types/api-request\u0027;"},{"lineNumber":42,"author":{"gitId":"-"},"content":"import { Milliseconds } from \u0027../../../types/datetime-const\u0027;"},{"lineNumber":43,"author":{"gitId":"-"},"content":"import { DEFAULT_NUMBER_OF_RETRY_ATTEMPTS } from \u0027../../../types/default-retry-attempts\u0027;"},{"lineNumber":44,"author":{"gitId":"-"},"content":"import { CommentRowModel } from \u0027../../components/comment-box/comment-row/comment-row.component\u0027;"},{"lineNumber":45,"author":{"gitId":"-"},"content":"import { ErrorReportComponent } from \u0027../../components/error-report/error-report.component\u0027;"},{"lineNumber":46,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":47,"author":{"gitId":"-"},"content":"  FeedbackResponseRecipient,"},{"lineNumber":48,"author":{"gitId":"-"},"content":"  FeedbackResponseRecipientSubmissionFormModel,"},{"lineNumber":49,"author":{"gitId":"-"},"content":"  QuestionSubmissionFormMode,"},{"lineNumber":50,"author":{"gitId":"-"},"content":"  QuestionSubmissionFormModel,"},{"lineNumber":51,"author":{"gitId":"-"},"content":"} from \u0027../../components/question-submission-form/question-submission-form-model\u0027;"},{"lineNumber":52,"author":{"gitId":"-"},"content":"import { SimpleModalType } from \u0027../../components/simple-modal/simple-modal-type\u0027;"},{"lineNumber":53,"author":{"gitId":"-"},"content":"import { ErrorMessageOutput } from \u0027../../error-message-output\u0027;"},{"lineNumber":54,"author":{"gitId":"-"},"content":"import { SavingCompleteModalComponent } from \u0027./saving-complete-modal/saving-complete-modal.component\u0027;"},{"lineNumber":55,"author":{"gitId":"-"},"content":""},{"lineNumber":56,"author":{"gitId":"-"},"content":"interface FeedbackQuestionsResponse {"},{"lineNumber":57,"author":{"gitId":"-"},"content":"  questions: FeedbackQuestion[];"},{"lineNumber":58,"author":{"gitId":"-"},"content":"}"},{"lineNumber":59,"author":{"gitId":"-"},"content":""},{"lineNumber":60,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":61,"author":{"gitId":"-"},"content":" * Feedback session submission page."},{"lineNumber":62,"author":{"gitId":"-"},"content":" */"},{"lineNumber":63,"author":{"gitId":"-"},"content":"@Component({"},{"lineNumber":64,"author":{"gitId":"-"},"content":"  selector: \u0027tm-session-submission-page\u0027,"},{"lineNumber":65,"author":{"gitId":"-"},"content":"  templateUrl: \u0027./session-submission-page.component.html\u0027,"},{"lineNumber":66,"author":{"gitId":"-"},"content":"  styleUrls: [\u0027./session-submission-page.component.scss\u0027],"},{"lineNumber":67,"author":{"gitId":"-"},"content":"})"},{"lineNumber":68,"author":{"gitId":"-"},"content":"export class SessionSubmissionPageComponent implements OnInit, AfterViewInit {"},{"lineNumber":69,"author":{"gitId":"-"},"content":""},{"lineNumber":70,"author":{"gitId":"-"},"content":"  // enum"},{"lineNumber":71,"author":{"gitId":"-"},"content":"  FeedbackSessionSubmissionStatus: typeof FeedbackSessionSubmissionStatus \u003d FeedbackSessionSubmissionStatus;"},{"lineNumber":72,"author":{"gitId":"-"},"content":"  Intent: typeof Intent \u003d Intent;"},{"lineNumber":73,"author":{"gitId":"-"},"content":""},{"lineNumber":74,"author":{"gitId":"-"},"content":"  courseId: string \u003d \u0027\u0027;"},{"lineNumber":75,"author":{"gitId":"-"},"content":"  feedbackSessionName: string \u003d \u0027\u0027;"},{"lineNumber":76,"author":{"gitId":"-"},"content":"  regKey: string \u003d \u0027\u0027;"},{"lineNumber":77,"author":{"gitId":"-"},"content":"  entityType: string \u003d \u0027student\u0027;"},{"lineNumber":78,"author":{"gitId":"-"},"content":"  loggedInUser: string \u003d \u0027\u0027;"},{"lineNumber":79,"author":{"gitId":"-"},"content":""},{"lineNumber":80,"author":{"gitId":"-"},"content":"  moderatedPerson: string \u003d \u0027\u0027;"},{"lineNumber":81,"author":{"gitId":"-"},"content":"  previewAsPerson: string \u003d \u0027\u0027;"},{"lineNumber":82,"author":{"gitId":"-"},"content":"  // the name of the person involved"},{"lineNumber":83,"author":{"gitId":"-"},"content":"  // (e.g. the student name for unregistered student, the name of instructor being moderated)"},{"lineNumber":84,"author":{"gitId":"-"},"content":"  personName: string \u003d \u0027\u0027;"},{"lineNumber":85,"author":{"gitId":"-"},"content":"  personEmail: string \u003d \u0027\u0027;"},{"lineNumber":86,"author":{"gitId":"-"},"content":""},{"lineNumber":87,"author":{"gitId":"-"},"content":"  courseName: string \u003d \u0027\u0027;"},{"lineNumber":88,"author":{"gitId":"-"},"content":"  courseInstitute: string \u003d \u0027\u0027;"},{"lineNumber":89,"author":{"gitId":"-"},"content":"  formattedSessionOpeningTime: string \u003d \u0027\u0027;"},{"lineNumber":90,"author":{"gitId":"-"},"content":"  formattedSessionClosingTime: string \u003d \u0027\u0027;"},{"lineNumber":91,"author":{"gitId":"-"},"content":"  feedbackSessionInstructions: string \u003d \u0027\u0027;"},{"lineNumber":92,"author":{"gitId":"-"},"content":"  feedbackSessionTimezone: string \u003d \u0027\u0027;"},{"lineNumber":93,"author":{"gitId":"-"},"content":"  feedbackSessionSubmissionStatus: FeedbackSessionSubmissionStatus \u003d FeedbackSessionSubmissionStatus.OPEN;"},{"lineNumber":94,"author":{"gitId":"-"},"content":""},{"lineNumber":95,"author":{"gitId":"-"},"content":"  intent: Intent \u003d Intent.STUDENT_SUBMISSION;"},{"lineNumber":96,"author":{"gitId":"-"},"content":""},{"lineNumber":97,"author":{"gitId":"-"},"content":"  questionSubmissionForms: QuestionSubmissionFormModel[] \u003d [];"},{"lineNumber":98,"author":{"gitId":"-"},"content":""},{"lineNumber":99,"author":{"gitId":"-"},"content":"  isSavingResponses: boolean \u003d false;"},{"lineNumber":100,"author":{"gitId":"-"},"content":"  isSubmissionFormsDisabled: boolean \u003d false;"},{"lineNumber":101,"author":{"gitId":"-"},"content":""},{"lineNumber":102,"author":{"gitId":"-"},"content":"  isModerationHintExpanded: boolean \u003d false;"},{"lineNumber":103,"author":{"gitId":"-"},"content":"  moderatedQuestionId: string \u003d \u0027\u0027;"},{"lineNumber":104,"author":{"gitId":"-"},"content":""},{"lineNumber":105,"author":{"gitId":"-"},"content":"  isCourseLoading: boolean \u003d true;"},{"lineNumber":106,"author":{"gitId":"-"},"content":"  isFeedbackSessionLoading: boolean \u003d true;"},{"lineNumber":107,"author":{"gitId":"-"},"content":"  isFeedbackSessionQuestionsLoading: boolean \u003d true;"},{"lineNumber":108,"author":{"gitId":"-"},"content":"  hasFeedbackSessionQuestionsLoadingFailed: boolean \u003d false;"},{"lineNumber":109,"author":{"gitId":"-"},"content":"  retryAttempts: number \u003d DEFAULT_NUMBER_OF_RETRY_ATTEMPTS;"},{"lineNumber":110,"author":{"gitId":"-"},"content":""},{"lineNumber":111,"author":{"gitId":"-"},"content":"  isQuestionCountOne: boolean \u003d false;"},{"lineNumber":112,"author":{"gitId":"domlimm"},"content":"  isSubmitAllClicked: boolean \u003d false;"},{"lineNumber":113,"author":{"gitId":"-"},"content":""},{"lineNumber":114,"author":{"gitId":"-"},"content":"  private backendUrl: string \u003d environment.backendUrl;"},{"lineNumber":115,"author":{"gitId":"-"},"content":""},{"lineNumber":116,"author":{"gitId":"-"},"content":"  constructor(private route: ActivatedRoute,"},{"lineNumber":117,"author":{"gitId":"-"},"content":"              private statusMessageService: StatusMessageService,"},{"lineNumber":118,"author":{"gitId":"-"},"content":"              private timezoneService: TimezoneService,"},{"lineNumber":119,"author":{"gitId":"-"},"content":"              private feedbackQuestionsService: FeedbackQuestionsService,"},{"lineNumber":120,"author":{"gitId":"-"},"content":"              private feedbackResponsesService: FeedbackResponsesService,"},{"lineNumber":121,"author":{"gitId":"-"},"content":"              private feedbackSessionsService: FeedbackSessionsService,"},{"lineNumber":122,"author":{"gitId":"-"},"content":"              private studentService: StudentService,"},{"lineNumber":123,"author":{"gitId":"-"},"content":"              private instructorService: InstructorService,"},{"lineNumber":124,"author":{"gitId":"-"},"content":"              private courseService: CourseService,"},{"lineNumber":125,"author":{"gitId":"-"},"content":"              private ngbModal: NgbModal,"},{"lineNumber":126,"author":{"gitId":"-"},"content":"              private simpleModalService: SimpleModalService,"},{"lineNumber":127,"author":{"gitId":"-"},"content":"              private pageScrollService: PageScrollService,"},{"lineNumber":128,"author":{"gitId":"-"},"content":"              private authService: AuthService,"},{"lineNumber":129,"author":{"gitId":"-"},"content":"              private navigationService: NavigationService,"},{"lineNumber":130,"author":{"gitId":"-"},"content":"              private commentService: FeedbackResponseCommentService,"},{"lineNumber":131,"author":{"gitId":"-"},"content":"              private logService: LogService,"},{"lineNumber":132,"author":{"gitId":"-"},"content":"              @Inject(DOCUMENT) private document: any) {"},{"lineNumber":133,"author":{"gitId":"-"},"content":"    this.timezoneService.getTzVersion(); // import timezone service to load timezone data"},{"lineNumber":134,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":135,"author":{"gitId":"-"},"content":""},{"lineNumber":136,"author":{"gitId":"-"},"content":"  ngOnInit(): void {"},{"lineNumber":137,"author":{"gitId":"-"},"content":"    this.route.data.pipe("},{"lineNumber":138,"author":{"gitId":"-"},"content":"        tap((data: any) \u003d\u003e {"},{"lineNumber":139,"author":{"gitId":"-"},"content":"          this.intent \u003d data.intent;"},{"lineNumber":140,"author":{"gitId":"-"},"content":"          this.entityType \u003d data.intent \u003d\u003d\u003d Intent.INSTRUCTOR_SUBMISSION ? \u0027instructor\u0027 : this.entityType;"},{"lineNumber":141,"author":{"gitId":"-"},"content":"        }),"},{"lineNumber":142,"author":{"gitId":"-"},"content":"        switchMap(() \u003d\u003e this.route.queryParams),"},{"lineNumber":143,"author":{"gitId":"-"},"content":"    ).subscribe((queryParams: any) \u003d\u003e {"},{"lineNumber":144,"author":{"gitId":"-"},"content":"      this.courseId \u003d queryParams.courseid;"},{"lineNumber":145,"author":{"gitId":"-"},"content":"      this.feedbackSessionName \u003d queryParams.fsname;"},{"lineNumber":146,"author":{"gitId":"-"},"content":"      this.regKey \u003d queryParams.key ? queryParams.key : \u0027\u0027;"},{"lineNumber":147,"author":{"gitId":"-"},"content":"      this.moderatedPerson \u003d queryParams.moderatedperson ? queryParams.moderatedperson : \u0027\u0027;"},{"lineNumber":148,"author":{"gitId":"-"},"content":"      this.previewAsPerson \u003d queryParams.previewas ? queryParams.previewas : \u0027\u0027;"},{"lineNumber":149,"author":{"gitId":"-"},"content":"      if (queryParams.entitytype \u003d\u003d\u003d \u0027instructor\u0027) {"},{"lineNumber":150,"author":{"gitId":"-"},"content":"        this.entityType \u003d \u0027instructor\u0027;"},{"lineNumber":151,"author":{"gitId":"-"},"content":"        this.intent \u003d Intent.INSTRUCTOR_SUBMISSION;"},{"lineNumber":152,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":153,"author":{"gitId":"-"},"content":"      this.moderatedQuestionId \u003d queryParams.moderatedquestionId ? queryParams.moderatedquestionId : \u0027\u0027;"},{"lineNumber":154,"author":{"gitId":"-"},"content":""},{"lineNumber":155,"author":{"gitId":"-"},"content":"      if (this.previewAsPerson) {"},{"lineNumber":156,"author":{"gitId":"-"},"content":"        // disable submission in the preview mode"},{"lineNumber":157,"author":{"gitId":"-"},"content":"        this.isSubmissionFormsDisabled \u003d true;"},{"lineNumber":158,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":159,"author":{"gitId":"-"},"content":""},{"lineNumber":160,"author":{"gitId":"-"},"content":"      const nextUrl: string \u003d `${window.location.pathname}${window.location.search.replace(/\u0026/g, \u0027%26\u0027)}`;"},{"lineNumber":161,"author":{"gitId":"-"},"content":"      this.authService.getAuthUser(undefined, nextUrl).subscribe({"},{"lineNumber":162,"author":{"gitId":"-"},"content":"        next: (auth: AuthInfo) \u003d\u003e {"},{"lineNumber":163,"author":{"gitId":"-"},"content":"          const isPreviewOrModeration: boolean \u003d !!(auth.user \u0026\u0026 (this.moderatedPerson || this.previewAsPerson));"},{"lineNumber":164,"author":{"gitId":"-"},"content":"          if (auth.user) {"},{"lineNumber":165,"author":{"gitId":"-"},"content":"            this.loggedInUser \u003d auth.user.id;"},{"lineNumber":166,"author":{"gitId":"-"},"content":"          }"},{"lineNumber":167,"author":{"gitId":"-"},"content":"          if (this.regKey \u0026\u0026 !isPreviewOrModeration) {"},{"lineNumber":168,"author":{"gitId":"-"},"content":"            this.authService.getAuthRegkeyValidity(this.regKey, this.intent).subscribe({"},{"lineNumber":169,"author":{"gitId":"-"},"content":"              next: (resp: RegkeyValidity) \u003d\u003e {"},{"lineNumber":170,"author":{"gitId":"-"},"content":"                if (resp.isAllowedAccess) {"},{"lineNumber":171,"author":{"gitId":"-"},"content":"                  if (resp.isUsed) {"},{"lineNumber":172,"author":{"gitId":"-"},"content":"                    // The logged in user matches the registration key; redirect to the logged in URL"},{"lineNumber":173,"author":{"gitId":"-"},"content":"                    this.navigationService.navigateByURLWithParamEncoding("},{"lineNumber":174,"author":{"gitId":"-"},"content":"                        `/web/${this.entityType}/sessions/submission`,"},{"lineNumber":175,"author":{"gitId":"-"},"content":"                        { courseid: this.courseId, fsname: this.feedbackSessionName });"},{"lineNumber":176,"author":{"gitId":"-"},"content":"                  } else {"},{"lineNumber":177,"author":{"gitId":"-"},"content":"                    // Valid, unused registration key; load information based on the key"},{"lineNumber":178,"author":{"gitId":"-"},"content":"                    this.loadCourseInfo();"},{"lineNumber":179,"author":{"gitId":"-"},"content":"                    this.loadPersonName();"},{"lineNumber":180,"author":{"gitId":"-"},"content":"                    this.loadFeedbackSession(false, auth);"},{"lineNumber":181,"author":{"gitId":"-"},"content":"                  }"},{"lineNumber":182,"author":{"gitId":"-"},"content":"                } else if (resp.isValid) {"},{"lineNumber":183,"author":{"gitId":"-"},"content":"                  // At this point, registration key must already be used, otherwise access would be granted"},{"lineNumber":184,"author":{"gitId":"-"},"content":"                  if (this.loggedInUser) {"},{"lineNumber":185,"author":{"gitId":"-"},"content":"                    // Registration key belongs to another user who is not the logged in user"},{"lineNumber":186,"author":{"gitId":"-"},"content":"                    this.navigationService.navigateWithErrorMessage(\u0027/web/front\u0027,"},{"lineNumber":187,"author":{"gitId":"-"},"content":"                        `You are trying to access TEAMMATES using the Google account ${this.loggedInUser}, which"},{"lineNumber":188,"author":{"gitId":"-"},"content":"                        is not linked to this TEAMMATES account. If you used a different Google account to"},{"lineNumber":189,"author":{"gitId":"-"},"content":"                        join/access TEAMMATES before, please use that Google account to access TEAMMATES. If you"},{"lineNumber":190,"author":{"gitId":"-"},"content":"                        cannot remember which Google account you used before, please email us at"},{"lineNumber":191,"author":{"gitId":"-"},"content":"                        ${environment.supportEmail} for help.`);"},{"lineNumber":192,"author":{"gitId":"-"},"content":"                  } else {"},{"lineNumber":193,"author":{"gitId":"-"},"content":"                    this.loadFeedbackSession(true, auth);"},{"lineNumber":194,"author":{"gitId":"-"},"content":"                  }"},{"lineNumber":195,"author":{"gitId":"-"},"content":"                } else {"},{"lineNumber":196,"author":{"gitId":"-"},"content":"                  // The registration key is invalid"},{"lineNumber":197,"author":{"gitId":"-"},"content":"                  this.navigationService.navigateWithErrorMessage(\u0027/web/front\u0027,"},{"lineNumber":198,"author":{"gitId":"-"},"content":"                      \u0027You are not authorized to view this page.\u0027);"},{"lineNumber":199,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":200,"author":{"gitId":"-"},"content":"              },"},{"lineNumber":201,"author":{"gitId":"-"},"content":"              error: () \u003d\u003e {"},{"lineNumber":202,"author":{"gitId":"-"},"content":"                this.navigationService.navigateWithErrorMessage(\u0027/web/front\u0027,"},{"lineNumber":203,"author":{"gitId":"-"},"content":"                    \u0027You are not authorized to view this page.\u0027);"},{"lineNumber":204,"author":{"gitId":"-"},"content":"              },"},{"lineNumber":205,"author":{"gitId":"-"},"content":"            });"},{"lineNumber":206,"author":{"gitId":"-"},"content":"          } else if (this.loggedInUser) {"},{"lineNumber":207,"author":{"gitId":"-"},"content":"            // Load information based on logged in user"},{"lineNumber":208,"author":{"gitId":"-"},"content":"            // This will also cover moderation/preview cases"},{"lineNumber":209,"author":{"gitId":"-"},"content":"            this.loadCourseInfo();"},{"lineNumber":210,"author":{"gitId":"-"},"content":"            this.loadPersonName();"},{"lineNumber":211,"author":{"gitId":"-"},"content":"            this.loadFeedbackSession(false, auth);"},{"lineNumber":212,"author":{"gitId":"-"},"content":"          } else {"},{"lineNumber":213,"author":{"gitId":"-"},"content":"            this.navigationService.navigateWithErrorMessage(\u0027/web/front\u0027,"},{"lineNumber":214,"author":{"gitId":"-"},"content":"                \u0027You are not authorized to view this page.\u0027);"},{"lineNumber":215,"author":{"gitId":"-"},"content":"          }"},{"lineNumber":216,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":217,"author":{"gitId":"-"},"content":"        error: () \u003d\u003e {"},{"lineNumber":218,"author":{"gitId":"-"},"content":"          this.navigationService.navigateWithErrorMessage(\u0027/web/front\u0027,"},{"lineNumber":219,"author":{"gitId":"-"},"content":"              \u0027You are not authorized to view this page.\u0027);"},{"lineNumber":220,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":221,"author":{"gitId":"-"},"content":"      });"},{"lineNumber":222,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":223,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":224,"author":{"gitId":"-"},"content":""},{"lineNumber":225,"author":{"gitId":"-"},"content":"  // Solution for checking partial element visibility adapted from"},{"lineNumber":226,"author":{"gitId":"-"},"content":"  // https://stackoverflow.com/questions/30943662/check-if-element-is-partially-in-viewport"},{"lineNumber":227,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":228,"author":{"gitId":"-"},"content":"   * Checks if a given element is in view."},{"lineNumber":229,"author":{"gitId":"-"},"content":"   *"},{"lineNumber":230,"author":{"gitId":"-"},"content":"   * @param e element to perform check for"},{"lineNumber":231,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":232,"author":{"gitId":"-"},"content":"  isInViewport(e: HTMLElement): boolean {"},{"lineNumber":233,"author":{"gitId":"-"},"content":"    const rect \u003d e.getBoundingClientRect();"},{"lineNumber":234,"author":{"gitId":"-"},"content":"    const windowHeight: number \u003d (window.innerHeight || document.documentElement.clientHeight);"},{"lineNumber":235,"author":{"gitId":"-"},"content":""},{"lineNumber":236,"author":{"gitId":"-"},"content":"    return !("},{"lineNumber":237,"author":{"gitId":"-"},"content":"      Math.floor(100 - (((rect.top \u003e\u003d 0 ? 0 : rect.top) / +-rect.height) * 100)) \u003c 1"},{"lineNumber":238,"author":{"gitId":"-"},"content":"      || Math.floor(100 - ((rect.bottom - windowHeight) / rect.height) * 100) \u003c 1"},{"lineNumber":239,"author":{"gitId":"-"},"content":"    );"},{"lineNumber":240,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":241,"author":{"gitId":"-"},"content":""},{"lineNumber":242,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":243,"author":{"gitId":"-"},"content":"   * Scrolls to the question based on its given question id."},{"lineNumber":244,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":245,"author":{"gitId":"-"},"content":"  scrollToQuestion(): void {"},{"lineNumber":246,"author":{"gitId":"-"},"content":"    const div: HTMLElement | null \u003d document.getElementById(this.moderatedQuestionId);"},{"lineNumber":247,"author":{"gitId":"-"},"content":""},{"lineNumber":248,"author":{"gitId":"-"},"content":"    // continue scrolling as long as the element to scroll to is yet to be found or not in view"},{"lineNumber":249,"author":{"gitId":"-"},"content":"    if (div \u003d\u003d null || !(this.isInViewport(div))) {"},{"lineNumber":250,"author":{"gitId":"-"},"content":"      setTimeout(() \u003d\u003e {"},{"lineNumber":251,"author":{"gitId":"-"},"content":"        this.pageScrollService.scroll({"},{"lineNumber":252,"author":{"gitId":"-"},"content":"          document: this.document,"},{"lineNumber":253,"author":{"gitId":"-"},"content":"          scrollTarget: `#${this.moderatedQuestionId}`,"},{"lineNumber":254,"author":{"gitId":"-"},"content":"          scrollOffset: 70,"},{"lineNumber":255,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":256,"author":{"gitId":"-"},"content":"        this.scrollToQuestion();"},{"lineNumber":257,"author":{"gitId":"-"},"content":"      }, 500);"},{"lineNumber":258,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":259,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":260,"author":{"gitId":"-"},"content":""},{"lineNumber":261,"author":{"gitId":"-"},"content":"  ngAfterViewInit(): void {"},{"lineNumber":262,"author":{"gitId":"-"},"content":"    if (!this.moderatedQuestionId) {"},{"lineNumber":263,"author":{"gitId":"-"},"content":"      return;"},{"lineNumber":264,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":265,"author":{"gitId":"-"},"content":"    this.scrollToQuestion();"},{"lineNumber":266,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":267,"author":{"gitId":"-"},"content":""},{"lineNumber":268,"author":{"gitId":"-"},"content":"  private loadCourseInfo(): void {"},{"lineNumber":269,"author":{"gitId":"-"},"content":"    this.isCourseLoading \u003d true;"},{"lineNumber":270,"author":{"gitId":"-"},"content":"    let request: Observable\u003cCourse\u003e;"},{"lineNumber":271,"author":{"gitId":"-"},"content":"    switch (this.intent) {"},{"lineNumber":272,"author":{"gitId":"-"},"content":"      case Intent.STUDENT_SUBMISSION:"},{"lineNumber":273,"author":{"gitId":"-"},"content":"        if (this.moderatedPerson || this.previewAsPerson) {"},{"lineNumber":274,"author":{"gitId":"-"},"content":"          request \u003d this.courseService.getCourseAsInstructor(this.courseId);"},{"lineNumber":275,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":276,"author":{"gitId":"-"},"content":"          request \u003d this.courseService.getCourseAsStudent(this.courseId, this.regKey);"},{"lineNumber":277,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":278,"author":{"gitId":"-"},"content":"        break;"},{"lineNumber":279,"author":{"gitId":"-"},"content":"      case Intent.INSTRUCTOR_SUBMISSION:"},{"lineNumber":280,"author":{"gitId":"-"},"content":"        request \u003d this.courseService.getCourseAsInstructor(this.courseId, this.regKey);"},{"lineNumber":281,"author":{"gitId":"-"},"content":"        break;"},{"lineNumber":282,"author":{"gitId":"-"},"content":"      default:"},{"lineNumber":283,"author":{"gitId":"-"},"content":"        this.isCourseLoading \u003d false;"},{"lineNumber":284,"author":{"gitId":"-"},"content":"        return;"},{"lineNumber":285,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":286,"author":{"gitId":"-"},"content":"    request.subscribe({"},{"lineNumber":287,"author":{"gitId":"-"},"content":"      next: (resp: Course) \u003d\u003e {"},{"lineNumber":288,"author":{"gitId":"-"},"content":"        this.courseName \u003d resp.courseName;"},{"lineNumber":289,"author":{"gitId":"-"},"content":"        this.courseInstitute \u003d resp.institute;"},{"lineNumber":290,"author":{"gitId":"-"},"content":"        this.isCourseLoading \u003d false;"},{"lineNumber":291,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":292,"author":{"gitId":"-"},"content":"      error: () \u003d\u003e {"},{"lineNumber":293,"author":{"gitId":"-"},"content":"        this.isCourseLoading \u003d false;"},{"lineNumber":294,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":295,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":296,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":297,"author":{"gitId":"-"},"content":""},{"lineNumber":298,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":299,"author":{"gitId":"-"},"content":"   * Loads the name of the person involved in the submission."},{"lineNumber":300,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":301,"author":{"gitId":"-"},"content":"  loadPersonName(): void {"},{"lineNumber":302,"author":{"gitId":"-"},"content":"    switch (this.intent) {"},{"lineNumber":303,"author":{"gitId":"-"},"content":"      case Intent.STUDENT_SUBMISSION:"},{"lineNumber":304,"author":{"gitId":"-"},"content":"        this.studentService.getStudent("},{"lineNumber":305,"author":{"gitId":"-"},"content":"            this.courseId,"},{"lineNumber":306,"author":{"gitId":"-"},"content":"            this.moderatedPerson || this.previewAsPerson,"},{"lineNumber":307,"author":{"gitId":"-"},"content":"            this.regKey,"},{"lineNumber":308,"author":{"gitId":"-"},"content":"        ).subscribe((student: Student) \u003d\u003e {"},{"lineNumber":309,"author":{"gitId":"-"},"content":"          this.personName \u003d student.name;"},{"lineNumber":310,"author":{"gitId":"-"},"content":"          this.personEmail \u003d student.email;"},{"lineNumber":311,"author":{"gitId":"-"},"content":""},{"lineNumber":312,"author":{"gitId":"-"},"content":"          this.logService.createFeedbackSessionLog({"},{"lineNumber":313,"author":{"gitId":"-"},"content":"            courseId: this.courseId,"},{"lineNumber":314,"author":{"gitId":"-"},"content":"            feedbackSessionName: this.feedbackSessionName,"},{"lineNumber":315,"author":{"gitId":"-"},"content":"            studentEmail: this.personEmail,"},{"lineNumber":316,"author":{"gitId":"-"},"content":"            logType: FeedbackSessionLogType.ACCESS,"},{"lineNumber":317,"author":{"gitId":"-"},"content":"          }).subscribe({"},{"lineNumber":318,"author":{"gitId":"-"},"content":"            next: () \u003d\u003e {},"},{"lineNumber":319,"author":{"gitId":"-"},"content":"            error: () \u003d\u003e {"},{"lineNumber":320,"author":{"gitId":"-"},"content":"              this.statusMessageService.showWarningToast(\u0027Failed to log feedback session access\u0027);"},{"lineNumber":321,"author":{"gitId":"-"},"content":"            },"},{"lineNumber":322,"author":{"gitId":"-"},"content":"          });"},{"lineNumber":323,"author":{"gitId":"-"},"content":""},{"lineNumber":324,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":325,"author":{"gitId":"-"},"content":"        break;"},{"lineNumber":326,"author":{"gitId":"-"},"content":"      case Intent.INSTRUCTOR_SUBMISSION:"},{"lineNumber":327,"author":{"gitId":"-"},"content":"        this.instructorService.getInstructor({"},{"lineNumber":328,"author":{"gitId":"-"},"content":"          courseId: this.courseId,"},{"lineNumber":329,"author":{"gitId":"-"},"content":"          feedbackSessionName: this.feedbackSessionName,"},{"lineNumber":330,"author":{"gitId":"-"},"content":"          intent: this.intent,"},{"lineNumber":331,"author":{"gitId":"-"},"content":"          key: this.regKey,"},{"lineNumber":332,"author":{"gitId":"-"},"content":"          moderatedPerson: this.moderatedPerson,"},{"lineNumber":333,"author":{"gitId":"-"},"content":"          previewAs: this.previewAsPerson,"},{"lineNumber":334,"author":{"gitId":"-"},"content":"        }).subscribe((instructor: Instructor) \u003d\u003e {"},{"lineNumber":335,"author":{"gitId":"-"},"content":"          this.personName \u003d instructor.name;"},{"lineNumber":336,"author":{"gitId":"-"},"content":"          this.personEmail \u003d instructor.email;"},{"lineNumber":337,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":338,"author":{"gitId":"-"},"content":"        break;"},{"lineNumber":339,"author":{"gitId":"-"},"content":"      default:"},{"lineNumber":340,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":341,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":342,"author":{"gitId":"-"},"content":""},{"lineNumber":343,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":344,"author":{"gitId":"-"},"content":"   * Redirects to join course link for unregistered student/instructor."},{"lineNumber":345,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":346,"author":{"gitId":"-"},"content":"  joinCourseForUnregisteredEntity(): void {"},{"lineNumber":347,"author":{"gitId":"-"},"content":"    this.navigationService.navigateByURL(\u0027/web/join\u0027, { entitytype: this.entityType, key: this.regKey });"},{"lineNumber":348,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":349,"author":{"gitId":"-"},"content":""},{"lineNumber":350,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":351,"author":{"gitId":"-"},"content":"   * Loads the feedback session information."},{"lineNumber":352,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":353,"author":{"gitId":"-"},"content":"  loadFeedbackSession(loginRequired: boolean, auth: AuthInfo): void {"},{"lineNumber":354,"author":{"gitId":"-"},"content":"    this.isFeedbackSessionLoading \u003d true;"},{"lineNumber":355,"author":{"gitId":"-"},"content":"    const TIME_FORMAT: string \u003d \u0027ddd, DD MMM, YYYY, hh:mm A zz\u0027;"},{"lineNumber":356,"author":{"gitId":"-"},"content":"    this.feedbackSessionsService.getFeedbackSession({"},{"lineNumber":357,"author":{"gitId":"-"},"content":"      courseId: this.courseId,"},{"lineNumber":358,"author":{"gitId":"-"},"content":"      feedbackSessionName: this.feedbackSessionName,"},{"lineNumber":359,"author":{"gitId":"-"},"content":"      intent: this.intent,"},{"lineNumber":360,"author":{"gitId":"-"},"content":"      key: this.regKey,"},{"lineNumber":361,"author":{"gitId":"-"},"content":"      moderatedPerson: this.moderatedPerson,"},{"lineNumber":362,"author":{"gitId":"-"},"content":"      previewAs: this.previewAsPerson,"},{"lineNumber":363,"author":{"gitId":"-"},"content":"    }).pipe(finalize(() \u003d\u003e {"},{"lineNumber":364,"author":{"gitId":"-"},"content":"      this.isFeedbackSessionLoading \u003d false;"},{"lineNumber":365,"author":{"gitId":"-"},"content":"    }))"},{"lineNumber":366,"author":{"gitId":"-"},"content":"      .subscribe({"},{"lineNumber":367,"author":{"gitId":"-"},"content":"        next: (feedbackSession: FeedbackSession) \u003d\u003e {"},{"lineNumber":368,"author":{"gitId":"-"},"content":"          this.feedbackSessionInstructions \u003d feedbackSession.instructions;"},{"lineNumber":369,"author":{"gitId":"-"},"content":"          this.formattedSessionOpeningTime \u003d this.timezoneService"},{"lineNumber":370,"author":{"gitId":"-"},"content":"              .formatToString(feedbackSession.submissionStartTimestamp, feedbackSession.timeZone, TIME_FORMAT);"},{"lineNumber":371,"author":{"gitId":"-"},"content":""},{"lineNumber":372,"author":{"gitId":"-"},"content":"          this.formattedSessionClosingTime \u003d this.getformattedSessionClosingTime(feedbackSession, TIME_FORMAT);"},{"lineNumber":373,"author":{"gitId":"-"},"content":""},{"lineNumber":374,"author":{"gitId":"-"},"content":"          this.feedbackSessionSubmissionStatus \u003d feedbackSession.submissionStatus;"},{"lineNumber":375,"author":{"gitId":"-"},"content":"          this.feedbackSessionTimezone \u003d feedbackSession.timeZone;"},{"lineNumber":376,"author":{"gitId":"-"},"content":""},{"lineNumber":377,"author":{"gitId":"-"},"content":"          // don\u0027t show alert modal in moderation"},{"lineNumber":378,"author":{"gitId":"-"},"content":"          if (!this.moderatedPerson) {"},{"lineNumber":379,"author":{"gitId":"-"},"content":"            let modalContent: string;"},{"lineNumber":380,"author":{"gitId":"-"},"content":"            switch (feedbackSession.submissionStatus) {"},{"lineNumber":381,"author":{"gitId":"-"},"content":"              case FeedbackSessionSubmissionStatus.VISIBLE_NOT_OPEN:"},{"lineNumber":382,"author":{"gitId":"-"},"content":"                this.isSubmissionFormsDisabled \u003d true;"},{"lineNumber":383,"author":{"gitId":"-"},"content":"                modalContent \u003d `\u003cp\u003e\u003cstrong\u003eThe feedback session is currently not open for submissions.\u003c/strong\u003e\u003c/p\u003e"},{"lineNumber":384,"author":{"gitId":"-"},"content":"                \u003cp\u003eYou can view the questions and any submitted responses"},{"lineNumber":385,"author":{"gitId":"-"},"content":"                for this feedback session but cannot submit new responses.\u003c/p\u003e`;"},{"lineNumber":386,"author":{"gitId":"-"},"content":"                this.simpleModalService.openInformationModal("},{"lineNumber":387,"author":{"gitId":"-"},"content":"                    \u0027Feedback Session Not Open\u0027, SimpleModalType.WARNING, modalContent);"},{"lineNumber":388,"author":{"gitId":"-"},"content":"                break;"},{"lineNumber":389,"author":{"gitId":"-"},"content":"              case FeedbackSessionSubmissionStatus.OPEN:"},{"lineNumber":390,"author":{"gitId":"-"},"content":"                if (this.isFeedbackEndingLessThanFifteenMinutes(feedbackSession)) {"},{"lineNumber":391,"author":{"gitId":"-"},"content":"                  modalContent \u003d \u0027Warning: you have less than 15 minutes before the submission deadline expires!\u0027;"},{"lineNumber":392,"author":{"gitId":"-"},"content":"                  this.simpleModalService.openInformationModal("},{"lineNumber":393,"author":{"gitId":"-"},"content":"                      \u0027Feedback Session Will Be Closing Soon!\u0027, SimpleModalType.WARNING, modalContent);"},{"lineNumber":394,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":395,"author":{"gitId":"-"},"content":"                break;"},{"lineNumber":396,"author":{"gitId":"-"},"content":"              case FeedbackSessionSubmissionStatus.CLOSED:"},{"lineNumber":397,"author":{"gitId":"-"},"content":"                this.isSubmissionFormsDisabled \u003d true;"},{"lineNumber":398,"author":{"gitId":"-"},"content":"                modalContent \u003d `\u003cp\u003e\u003cstrong\u003eFeedback Session is Closed\u003c/strong\u003e\u003c/p\u003e"},{"lineNumber":399,"author":{"gitId":"-"},"content":"                \u003cp\u003eYou can view the questions and any submitted responses"},{"lineNumber":400,"author":{"gitId":"-"},"content":"                for this feedback session but cannot submit new responses.\u003c/p\u003e`;"},{"lineNumber":401,"author":{"gitId":"-"},"content":"                this.simpleModalService.openInformationModal("},{"lineNumber":402,"author":{"gitId":"-"},"content":"                    \u0027Feedback Session Closed\u0027, SimpleModalType.WARNING, modalContent);"},{"lineNumber":403,"author":{"gitId":"-"},"content":"                break;"},{"lineNumber":404,"author":{"gitId":"-"},"content":"              case FeedbackSessionSubmissionStatus.GRACE_PERIOD:"},{"lineNumber":405,"author":{"gitId":"-"},"content":"              default:"},{"lineNumber":406,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":407,"author":{"gitId":"-"},"content":"          }"},{"lineNumber":408,"author":{"gitId":"-"},"content":""},{"lineNumber":409,"author":{"gitId":"-"},"content":"          this.loadFeedbackQuestions();"},{"lineNumber":410,"author":{"gitId":"-"},"content":""},{"lineNumber":411,"author":{"gitId":"-"},"content":"          // Display note on submission on mobile device"},{"lineNumber":412,"author":{"gitId":"-"},"content":"          const mobileDeviceWidth: number \u003d 768;"},{"lineNumber":413,"author":{"gitId":"-"},"content":"          if (this.feedbackSessionSubmissionStatus \u003d\u003d\u003d FeedbackSessionSubmissionStatus.OPEN"},{"lineNumber":414,"author":{"gitId":"-"},"content":"              \u0026\u0026 window.innerWidth \u003c mobileDeviceWidth) {"},{"lineNumber":415,"author":{"gitId":"-"},"content":"            const modalContent: string \u003d `Note that you can use the Submit button to save responses already entered,"},{"lineNumber":416,"author":{"gitId":"-"},"content":"              and continue to answer remaining questions after that."},{"lineNumber":417,"author":{"gitId":"-"},"content":"              You may also edit your submission any number of times before the closing time of this session.`;"},{"lineNumber":418,"author":{"gitId":"-"},"content":"            this.simpleModalService.openInformationModal("},{"lineNumber":419,"author":{"gitId":"-"},"content":"                \u0027Note On Submission\u0027, SimpleModalType.INFO, modalContent);"},{"lineNumber":420,"author":{"gitId":"-"},"content":"          }"},{"lineNumber":421,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":422,"author":{"gitId":"-"},"content":"        error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":423,"author":{"gitId":"-"},"content":"          if (resp.status \u003d\u003d\u003d 404) {"},{"lineNumber":424,"author":{"gitId":"-"},"content":"            const message \u003d \u0027The session does not exist \u0027"},{"lineNumber":425,"author":{"gitId":"-"},"content":"                + \u0027(most likely deleted by an instructor after the submission link was sent).\u0027;"},{"lineNumber":426,"author":{"gitId":"-"},"content":"            this.simpleModalService.openInformationModal(\u0027Feedback Session Does Not Exist!\u0027, SimpleModalType.DANGER,"},{"lineNumber":427,"author":{"gitId":"-"},"content":"                message,"},{"lineNumber":428,"author":{"gitId":"-"},"content":"                {"},{"lineNumber":429,"author":{"gitId":"-"},"content":"                  onClosed: () \u003d\u003e this.navigationService.navigateByURL("},{"lineNumber":430,"author":{"gitId":"-"},"content":"                      this.loggedInUser ? `/web/${this.entityType}/home` : \u0027/web/front/home\u0027),"},{"lineNumber":431,"author":{"gitId":"-"},"content":"                },"},{"lineNumber":432,"author":{"gitId":"-"},"content":"                { backdrop: \u0027static\u0027 });"},{"lineNumber":433,"author":{"gitId":"-"},"content":"          } else if (resp.status \u003d\u003d\u003d 403) {"},{"lineNumber":434,"author":{"gitId":"-"},"content":"            if (loginRequired \u0026\u0026 !auth.user) {"},{"lineNumber":435,"author":{"gitId":"-"},"content":"              // There is no logged in user for a valid, used registration key, redirect to login page"},{"lineNumber":436,"author":{"gitId":"-"},"content":"              if (this.entityType \u003d\u003d\u003d \u0027student\u0027) {"},{"lineNumber":437,"author":{"gitId":"-"},"content":"                window.location.href \u003d `${this.backendUrl}${auth.studentLoginUrl}`;"},{"lineNumber":438,"author":{"gitId":"-"},"content":"              } else if (this.entityType \u003d\u003d\u003d \u0027instructor\u0027) {"},{"lineNumber":439,"author":{"gitId":"-"},"content":"                window.location.href \u003d `${this.backendUrl}${auth.instructorLoginUrl}`;"},{"lineNumber":440,"author":{"gitId":"-"},"content":"              }"},{"lineNumber":441,"author":{"gitId":"-"},"content":"            } else {"},{"lineNumber":442,"author":{"gitId":"-"},"content":"              this.simpleModalService.openInformationModal(\u0027Not Authorised To Access!\u0027, SimpleModalType.DANGER,"},{"lineNumber":443,"author":{"gitId":"-"},"content":"                  resp.error.message,"},{"lineNumber":444,"author":{"gitId":"-"},"content":"                  {"},{"lineNumber":445,"author":{"gitId":"-"},"content":"                    onClosed: () \u003d\u003e this.navigationService.navigateByURL("},{"lineNumber":446,"author":{"gitId":"-"},"content":"                        this.loggedInUser ? `/web/${this.entityType}/home` : \u0027/web/front/home\u0027),"},{"lineNumber":447,"author":{"gitId":"-"},"content":"                  },"},{"lineNumber":448,"author":{"gitId":"-"},"content":"                  { backdrop: \u0027static\u0027 });"},{"lineNumber":449,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":450,"author":{"gitId":"-"},"content":"          } else {"},{"lineNumber":451,"author":{"gitId":"-"},"content":"            this.navigationService.navigateWithErrorMessage("},{"lineNumber":452,"author":{"gitId":"-"},"content":"                `/web/${this.entityType}/home`, resp.error.message);"},{"lineNumber":453,"author":{"gitId":"-"},"content":"          }"},{"lineNumber":454,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":455,"author":{"gitId":"-"},"content":"      });"},{"lineNumber":456,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":457,"author":{"gitId":"-"},"content":""},{"lineNumber":458,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":459,"author":{"gitId":"-"},"content":"   * Loads feedback questions to submit."},{"lineNumber":460,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":461,"author":{"gitId":"-"},"content":"  loadFeedbackQuestions(): void {"},{"lineNumber":462,"author":{"gitId":"-"},"content":"    this.isFeedbackSessionQuestionsLoading \u003d true;"},{"lineNumber":463,"author":{"gitId":"-"},"content":"    this.questionSubmissionForms \u003d [];"},{"lineNumber":464,"author":{"gitId":"-"},"content":"    this.feedbackQuestionsService.getFeedbackQuestions({"},{"lineNumber":465,"author":{"gitId":"-"},"content":"      courseId: this.courseId,"},{"lineNumber":466,"author":{"gitId":"-"},"content":"      feedbackSessionName: this.feedbackSessionName,"},{"lineNumber":467,"author":{"gitId":"-"},"content":"      intent: this.intent,"},{"lineNumber":468,"author":{"gitId":"-"},"content":"      key: this.regKey,"},{"lineNumber":469,"author":{"gitId":"-"},"content":"      moderatedPerson: this.moderatedPerson,"},{"lineNumber":470,"author":{"gitId":"-"},"content":"      previewAs: this.previewAsPerson,"},{"lineNumber":471,"author":{"gitId":"-"},"content":"    }).pipe(finalize(() \u003d\u003e {"},{"lineNumber":472,"author":{"gitId":"-"},"content":"      this.isFeedbackSessionQuestionsLoading \u003d false;"},{"lineNumber":473,"author":{"gitId":"-"},"content":"    }))"},{"lineNumber":474,"author":{"gitId":"-"},"content":"        .subscribe({"},{"lineNumber":475,"author":{"gitId":"-"},"content":"          next: (response: FeedbackQuestionsResponse) \u003d\u003e {"},{"lineNumber":476,"author":{"gitId":"-"},"content":"            response.questions.forEach((feedbackQuestion: FeedbackQuestion) \u003d\u003e {"},{"lineNumber":477,"author":{"gitId":"-"},"content":"              const model: QuestionSubmissionFormModel \u003d {"},{"lineNumber":478,"author":{"gitId":"-"},"content":"                isLoading: false,"},{"lineNumber":479,"author":{"gitId":"-"},"content":"                isLoaded: false,"},{"lineNumber":480,"author":{"gitId":"-"},"content":"                feedbackQuestionId: feedbackQuestion.feedbackQuestionId,"},{"lineNumber":481,"author":{"gitId":"-"},"content":""},{"lineNumber":482,"author":{"gitId":"-"},"content":"                questionNumber: feedbackQuestion.questionNumber,"},{"lineNumber":483,"author":{"gitId":"-"},"content":"                questionBrief: feedbackQuestion.questionBrief,"},{"lineNumber":484,"author":{"gitId":"-"},"content":"                questionDescription: feedbackQuestion.questionDescription,"},{"lineNumber":485,"author":{"gitId":"-"},"content":""},{"lineNumber":486,"author":{"gitId":"-"},"content":"                giverType: feedbackQuestion.giverType,"},{"lineNumber":487,"author":{"gitId":"-"},"content":"                recipientType: feedbackQuestion.recipientType,"},{"lineNumber":488,"author":{"gitId":"-"},"content":"                recipientList: [],"},{"lineNumber":489,"author":{"gitId":"-"},"content":"                recipientSubmissionForms: [],"},{"lineNumber":490,"author":{"gitId":"-"},"content":""},{"lineNumber":491,"author":{"gitId":"-"},"content":"                questionType: feedbackQuestion.questionType,"},{"lineNumber":492,"author":{"gitId":"-"},"content":"                questionDetails: feedbackQuestion.questionDetails,"},{"lineNumber":493,"author":{"gitId":"-"},"content":""},{"lineNumber":494,"author":{"gitId":"-"},"content":"                numberOfEntitiesToGiveFeedbackToSetting: feedbackQuestion.numberOfEntitiesToGiveFeedbackToSetting,"},{"lineNumber":495,"author":{"gitId":"-"},"content":"                customNumberOfEntitiesToGiveFeedbackTo: feedbackQuestion.customNumberOfEntitiesToGiveFeedbackTo"},{"lineNumber":496,"author":{"gitId":"-"},"content":"                    ? feedbackQuestion.customNumberOfEntitiesToGiveFeedbackTo : 0,"},{"lineNumber":497,"author":{"gitId":"-"},"content":""},{"lineNumber":498,"author":{"gitId":"-"},"content":"                showGiverNameTo: feedbackQuestion.showGiverNameTo,"},{"lineNumber":499,"author":{"gitId":"-"},"content":"                showRecipientNameTo: feedbackQuestion.showRecipientNameTo,"},{"lineNumber":500,"author":{"gitId":"-"},"content":"                showResponsesTo: feedbackQuestion.showResponsesTo,"},{"lineNumber":501,"author":{"gitId":"-"},"content":"              };"},{"lineNumber":502,"author":{"gitId":"-"},"content":"              this.questionSubmissionForms.push(model);"},{"lineNumber":503,"author":{"gitId":"-"},"content":"            });"},{"lineNumber":504,"author":{"gitId":"-"},"content":""},{"lineNumber":505,"author":{"gitId":"-"},"content":"            this.isQuestionCountOne \u003d this.questionSubmissionForms.length \u003d\u003d\u003d 1;"},{"lineNumber":506,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":507,"author":{"gitId":"-"},"content":"          error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":508,"author":{"gitId":"-"},"content":"            this.handleError(resp);"},{"lineNumber":509,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":510,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":511,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":512,"author":{"gitId":"-"},"content":""},{"lineNumber":513,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":514,"author":{"gitId":"-"},"content":"   * Tracks the question submission form by feedback question id."},{"lineNumber":515,"author":{"gitId":"-"},"content":"   *"},{"lineNumber":516,"author":{"gitId":"-"},"content":"   * @see https://angular.io/api/common/NgForOf#properties"},{"lineNumber":517,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":518,"author":{"gitId":"-"},"content":"  trackQuestionSubmissionFormByFn(_: any, item: QuestionSubmissionFormModel): any {"},{"lineNumber":519,"author":{"gitId":"-"},"content":"    return item.feedbackQuestionId;"},{"lineNumber":520,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":521,"author":{"gitId":"-"},"content":""},{"lineNumber":522,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":523,"author":{"gitId":"-"},"content":"   * Loads the feedback question recipients for the question."},{"lineNumber":524,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":525,"author":{"gitId":"-"},"content":"  loadFeedbackQuestionRecipientsForQuestion(model: QuestionSubmissionFormModel): void {"},{"lineNumber":526,"author":{"gitId":"-"},"content":"    this.feedbackQuestionsService.loadFeedbackQuestionRecipients({"},{"lineNumber":527,"author":{"gitId":"-"},"content":"      questionId: model.feedbackQuestionId,"},{"lineNumber":528,"author":{"gitId":"-"},"content":"      intent: this.intent,"},{"lineNumber":529,"author":{"gitId":"-"},"content":"      key: this.regKey,"},{"lineNumber":530,"author":{"gitId":"-"},"content":"      moderatedPerson: this.moderatedPerson,"},{"lineNumber":531,"author":{"gitId":"-"},"content":"      previewAs: this.previewAsPerson,"},{"lineNumber":532,"author":{"gitId":"-"},"content":"    }).subscribe({"},{"lineNumber":533,"author":{"gitId":"-"},"content":"      next: (response: FeedbackQuestionRecipients) \u003d\u003e {"},{"lineNumber":534,"author":{"gitId":"-"},"content":"        response.recipients.forEach((recipient: FeedbackQuestionRecipient) \u003d\u003e {"},{"lineNumber":535,"author":{"gitId":"-"},"content":"          model.recipientList.push({"},{"lineNumber":536,"author":{"gitId":"-"},"content":"            recipientIdentifier: recipient.identifier,"},{"lineNumber":537,"author":{"gitId":"-"},"content":"            recipientName: recipient.name,"},{"lineNumber":538,"author":{"gitId":"-"},"content":"            recipientSection: recipient.section,"},{"lineNumber":539,"author":{"gitId":"-"},"content":"            recipientTeam: recipient.team,"},{"lineNumber":540,"author":{"gitId":"-"},"content":"          });"},{"lineNumber":541,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":542,"author":{"gitId":"-"},"content":""},{"lineNumber":543,"author":{"gitId":"-"},"content":"        if (this.previewAsPerson) {"},{"lineNumber":544,"author":{"gitId":"-"},"content":"          // don\u0027t load responses in preview mode"},{"lineNumber":545,"author":{"gitId":"-"},"content":"          // generate a list of empty response box"},{"lineNumber":546,"author":{"gitId":"-"},"content":"          const formMode: QuestionSubmissionFormMode \u003d this.getQuestionSubmissionFormMode(model);"},{"lineNumber":547,"author":{"gitId":"-"},"content":"          model.recipientList.forEach((recipient: FeedbackResponseRecipient) \u003d\u003e {"},{"lineNumber":548,"author":{"gitId":"-"},"content":"            if (formMode \u003d\u003d\u003d QuestionSubmissionFormMode.FLEXIBLE_RECIPIENT"},{"lineNumber":549,"author":{"gitId":"-"},"content":"                \u0026\u0026 model.recipientSubmissionForms.length \u003e\u003d model.customNumberOfEntitiesToGiveFeedbackTo) {"},{"lineNumber":550,"author":{"gitId":"-"},"content":"              return;"},{"lineNumber":551,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":552,"author":{"gitId":"-"},"content":""},{"lineNumber":553,"author":{"gitId":"-"},"content":"            let recipientIdentifier: string \u003d \u0027\u0027;"},{"lineNumber":554,"author":{"gitId":"-"},"content":"            if (formMode !\u003d\u003d QuestionSubmissionFormMode.FLEXIBLE_RECIPIENT) {"},{"lineNumber":555,"author":{"gitId":"-"},"content":"              recipientIdentifier \u003d recipient.recipientIdentifier;"},{"lineNumber":556,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":557,"author":{"gitId":"-"},"content":""},{"lineNumber":558,"author":{"gitId":"-"},"content":"            model.recipientSubmissionForms.push({"},{"lineNumber":559,"author":{"gitId":"-"},"content":"              recipientIdentifier,"},{"lineNumber":560,"author":{"gitId":"-"},"content":"              responseDetails: this.feedbackResponsesService.getDefaultFeedbackResponseDetails(model.questionType),"},{"lineNumber":561,"author":{"gitId":"-"},"content":"              responseId: \u0027\u0027,"},{"lineNumber":562,"author":{"gitId":"-"},"content":"              isValid: true,"},{"lineNumber":563,"author":{"gitId":"-"},"content":"            });"},{"lineNumber":564,"author":{"gitId":"-"},"content":"          });"},{"lineNumber":565,"author":{"gitId":"-"},"content":"          model.isLoading \u003d false;"},{"lineNumber":566,"author":{"gitId":"-"},"content":"          model.isLoaded \u003d true;"},{"lineNumber":567,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":568,"author":{"gitId":"-"},"content":"          this.loadFeedbackResponses(model);"},{"lineNumber":569,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":570,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":571,"author":{"gitId":"-"},"content":"      error: (resp: ErrorMessageOutput) \u003d\u003e this.statusMessageService.showErrorToast(resp.error.message),"},{"lineNumber":572,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":573,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":574,"author":{"gitId":"-"},"content":""},{"lineNumber":575,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":576,"author":{"gitId":"-"},"content":"   * Gets the form mode of the question submission form."},{"lineNumber":577,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":578,"author":{"gitId":"-"},"content":"  getQuestionSubmissionFormMode(model: QuestionSubmissionFormModel): QuestionSubmissionFormMode {"},{"lineNumber":579,"author":{"gitId":"-"},"content":"    const isNumberOfEntitiesToGiveFeedbackToSettingLimited: boolean \u003d"},{"lineNumber":580,"author":{"gitId":"-"},"content":"        (model.recipientType \u003d\u003d\u003d FeedbackParticipantType.STUDENTS"},{"lineNumber":581,"author":{"gitId":"-"},"content":"            || model.recipientType \u003d\u003d\u003d FeedbackParticipantType.STUDENTS_EXCLUDING_SELF"},{"lineNumber":582,"author":{"gitId":"-"},"content":"            || model.recipientType \u003d\u003d\u003d FeedbackParticipantType.STUDENTS_IN_SAME_SECTION"},{"lineNumber":583,"author":{"gitId":"-"},"content":"            || model.recipientType \u003d\u003d\u003d FeedbackParticipantType.TEAMS"},{"lineNumber":584,"author":{"gitId":"-"},"content":"            || model.recipientType \u003d\u003d\u003d FeedbackParticipantType.TEAMS_EXCLUDING_SELF"},{"lineNumber":585,"author":{"gitId":"-"},"content":"            || model.recipientType \u003d\u003d\u003d FeedbackParticipantType.TEAMS_IN_SAME_SECTION"},{"lineNumber":586,"author":{"gitId":"-"},"content":"            || model.recipientType \u003d\u003d\u003d FeedbackParticipantType.INSTRUCTORS)"},{"lineNumber":587,"author":{"gitId":"-"},"content":"        \u0026\u0026 model.numberOfEntitiesToGiveFeedbackToSetting \u003d\u003d\u003d NumberOfEntitiesToGiveFeedbackToSetting.CUSTOM"},{"lineNumber":588,"author":{"gitId":"-"},"content":"        \u0026\u0026 model.recipientList.length \u003e model.customNumberOfEntitiesToGiveFeedbackTo;"},{"lineNumber":589,"author":{"gitId":"-"},"content":""},{"lineNumber":590,"author":{"gitId":"-"},"content":"    return isNumberOfEntitiesToGiveFeedbackToSettingLimited"},{"lineNumber":591,"author":{"gitId":"-"},"content":"        ? QuestionSubmissionFormMode.FLEXIBLE_RECIPIENT : QuestionSubmissionFormMode.FIXED_RECIPIENT;"},{"lineNumber":592,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":593,"author":{"gitId":"-"},"content":""},{"lineNumber":594,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":595,"author":{"gitId":"-"},"content":"   * Loads the responses of the feedback question to {@recipientSubmissionForms} in the model."},{"lineNumber":596,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":597,"author":{"gitId":"-"},"content":"  loadFeedbackResponses(model: QuestionSubmissionFormModel): void {"},{"lineNumber":598,"author":{"gitId":"-"},"content":"    this.feedbackResponsesService.getFeedbackResponse({"},{"lineNumber":599,"author":{"gitId":"-"},"content":"      questionId: model.feedbackQuestionId,"},{"lineNumber":600,"author":{"gitId":"-"},"content":"      intent: this.intent,"},{"lineNumber":601,"author":{"gitId":"-"},"content":"      key: this.regKey,"},{"lineNumber":602,"author":{"gitId":"-"},"content":"      moderatedPerson: this.moderatedPerson,"},{"lineNumber":603,"author":{"gitId":"-"},"content":"    }).pipe(finalize(() \u003d\u003e {"},{"lineNumber":604,"author":{"gitId":"-"},"content":"      model.isLoading \u003d false;"},{"lineNumber":605,"author":{"gitId":"-"},"content":"      model.isLoaded \u003d true;"},{"lineNumber":606,"author":{"gitId":"-"},"content":"    }))"},{"lineNumber":607,"author":{"gitId":"-"},"content":"      .subscribe({"},{"lineNumber":608,"author":{"gitId":"-"},"content":"        next: (existingResponses: FeedbackResponsesResponse) \u003d\u003e {"},{"lineNumber":609,"author":{"gitId":"-"},"content":"          if (this.getQuestionSubmissionFormMode(model) \u003d\u003d\u003d QuestionSubmissionFormMode.FIXED_RECIPIENT) {"},{"lineNumber":610,"author":{"gitId":"-"},"content":"            // need to generate a full list of submission forms"},{"lineNumber":611,"author":{"gitId":"-"},"content":"            model.recipientList.forEach((recipient: FeedbackResponseRecipient) \u003d\u003e {"},{"lineNumber":612,"author":{"gitId":"-"},"content":"              const matchedExistingResponse: FeedbackResponse | undefined \u003d"},{"lineNumber":613,"author":{"gitId":"-"},"content":"                  existingResponses.responses.find("},{"lineNumber":614,"author":{"gitId":"-"},"content":"                      (response: FeedbackResponse) \u003d\u003e response.recipientIdentifier \u003d\u003d\u003d recipient.recipientIdentifier);"},{"lineNumber":615,"author":{"gitId":"-"},"content":"              const submissionForm: FeedbackResponseRecipientSubmissionFormModel \u003d {"},{"lineNumber":616,"author":{"gitId":"-"},"content":"                recipientIdentifier: recipient.recipientIdentifier,"},{"lineNumber":617,"author":{"gitId":"-"},"content":"                responseDetails: matchedExistingResponse"},{"lineNumber":618,"author":{"gitId":"-"},"content":"                    ? matchedExistingResponse.responseDetails"},{"lineNumber":619,"author":{"gitId":"-"},"content":"                    : this.feedbackResponsesService.getDefaultFeedbackResponseDetails(model.questionType),"},{"lineNumber":620,"author":{"gitId":"-"},"content":"                responseId: matchedExistingResponse ? matchedExistingResponse.feedbackResponseId : \u0027\u0027,"},{"lineNumber":621,"author":{"gitId":"-"},"content":"                isValid: true,"},{"lineNumber":622,"author":{"gitId":"-"},"content":"              };"},{"lineNumber":623,"author":{"gitId":"-"},"content":"              if (matchedExistingResponse \u0026\u0026 matchedExistingResponse.giverComment) {"},{"lineNumber":624,"author":{"gitId":"-"},"content":"                submissionForm.commentByGiver \u003d this.getCommentModel("},{"lineNumber":625,"author":{"gitId":"-"},"content":"                    matchedExistingResponse.giverComment, recipient.recipientIdentifier);"},{"lineNumber":626,"author":{"gitId":"-"},"content":"              }"},{"lineNumber":627,"author":{"gitId":"-"},"content":"              model.recipientSubmissionForms.push(submissionForm);"},{"lineNumber":628,"author":{"gitId":"-"},"content":"            });"},{"lineNumber":629,"author":{"gitId":"-"},"content":"          }"},{"lineNumber":630,"author":{"gitId":"-"},"content":""},{"lineNumber":631,"author":{"gitId":"-"},"content":"          if (this.getQuestionSubmissionFormMode(model) \u003d\u003d\u003d QuestionSubmissionFormMode.FLEXIBLE_RECIPIENT) {"},{"lineNumber":632,"author":{"gitId":"-"},"content":"            // need to generate limited number of submission forms"},{"lineNumber":633,"author":{"gitId":"-"},"content":"            let numberOfRecipientSubmissionFormsNeeded: number \u003d"},{"lineNumber":634,"author":{"gitId":"-"},"content":"                model.customNumberOfEntitiesToGiveFeedbackTo - existingResponses.responses.length;"},{"lineNumber":635,"author":{"gitId":"-"},"content":""},{"lineNumber":636,"author":{"gitId":"-"},"content":"            existingResponses.responses.forEach((response: FeedbackResponse) \u003d\u003e {"},{"lineNumber":637,"author":{"gitId":"-"},"content":"              const submissionForm: FeedbackResponseRecipientSubmissionFormModel \u003d {"},{"lineNumber":638,"author":{"gitId":"-"},"content":"                recipientIdentifier: response.recipientIdentifier,"},{"lineNumber":639,"author":{"gitId":"-"},"content":"                responseDetails: response.responseDetails,"},{"lineNumber":640,"author":{"gitId":"-"},"content":"                responseId: response.feedbackResponseId,"},{"lineNumber":641,"author":{"gitId":"-"},"content":"                isValid: true,"},{"lineNumber":642,"author":{"gitId":"-"},"content":"              };"},{"lineNumber":643,"author":{"gitId":"-"},"content":"              if (response.giverComment) {"},{"lineNumber":644,"author":{"gitId":"-"},"content":"                submissionForm.commentByGiver \u003d this.getCommentModel("},{"lineNumber":645,"author":{"gitId":"-"},"content":"                    response.giverComment, response.recipientIdentifier);"},{"lineNumber":646,"author":{"gitId":"-"},"content":"              }"},{"lineNumber":647,"author":{"gitId":"-"},"content":"              model.recipientSubmissionForms.push(submissionForm);"},{"lineNumber":648,"author":{"gitId":"-"},"content":"            });"},{"lineNumber":649,"author":{"gitId":"-"},"content":""},{"lineNumber":650,"author":{"gitId":"-"},"content":"            // generate empty submission forms"},{"lineNumber":651,"author":{"gitId":"-"},"content":"            while (numberOfRecipientSubmissionFormsNeeded \u003e 0) {"},{"lineNumber":652,"author":{"gitId":"-"},"content":"              model.recipientSubmissionForms.push({"},{"lineNumber":653,"author":{"gitId":"-"},"content":"                recipientIdentifier: \u0027\u0027,"},{"lineNumber":654,"author":{"gitId":"-"},"content":"                responseDetails: this.feedbackResponsesService.getDefaultFeedbackResponseDetails(model.questionType),"},{"lineNumber":655,"author":{"gitId":"-"},"content":"                responseId: \u0027\u0027,"},{"lineNumber":656,"author":{"gitId":"-"},"content":"                isValid: true,"},{"lineNumber":657,"author":{"gitId":"-"},"content":"              });"},{"lineNumber":658,"author":{"gitId":"-"},"content":"              numberOfRecipientSubmissionFormsNeeded -\u003d 1;"},{"lineNumber":659,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":660,"author":{"gitId":"-"},"content":"          }"},{"lineNumber":661,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":662,"author":{"gitId":"-"},"content":"        error: (resp: ErrorMessageOutput) \u003d\u003e this.statusMessageService.showErrorToast(resp.error.message),"},{"lineNumber":663,"author":{"gitId":"-"},"content":"      });"},{"lineNumber":664,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":665,"author":{"gitId":"-"},"content":""},{"lineNumber":666,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":667,"author":{"gitId":"-"},"content":"   * Gets the comment model for a given comment."},{"lineNumber":668,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":669,"author":{"gitId":"-"},"content":"  getCommentModel(comment: FeedbackResponseComment, recipientIdentifier: string): CommentRowModel {"},{"lineNumber":670,"author":{"gitId":"-"},"content":"    return {"},{"lineNumber":671,"author":{"gitId":"-"},"content":"      originalComment: comment,"},{"lineNumber":672,"author":{"gitId":"-"},"content":"      originalRecipientIdentifier: recipientIdentifier,"},{"lineNumber":673,"author":{"gitId":"-"},"content":"      commentEditFormModel: {"},{"lineNumber":674,"author":{"gitId":"-"},"content":"        commentText: comment.commentText,"},{"lineNumber":675,"author":{"gitId":"-"},"content":"        // the participant comment shall not use custom visibilities"},{"lineNumber":676,"author":{"gitId":"-"},"content":"        isUsingCustomVisibilities: false,"},{"lineNumber":677,"author":{"gitId":"-"},"content":"        showCommentTo: [],"},{"lineNumber":678,"author":{"gitId":"-"},"content":"        showGiverNameTo: [],"},{"lineNumber":679,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":680,"author":{"gitId":"-"},"content":"      timezone: this.feedbackSessionTimezone,"},{"lineNumber":681,"author":{"gitId":"-"},"content":"      isEditing: false,"},{"lineNumber":682,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":683,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":684,"author":{"gitId":"-"},"content":""},{"lineNumber":685,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":686,"author":{"gitId":"-"},"content":"   * Checks whether there is any submission forms in the current page."},{"lineNumber":687,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":688,"author":{"gitId":"-"},"content":"  get questionsNeedingSubmission(): QuestionSubmissionFormModel[] {"},{"lineNumber":689,"author":{"gitId":"-"},"content":"    return this.questionSubmissionForms"},{"lineNumber":690,"author":{"gitId":"-"},"content":"        .filter((model: QuestionSubmissionFormModel) \u003d\u003e model.recipientSubmissionForms.length !\u003d\u003d 0);"},{"lineNumber":691,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":692,"author":{"gitId":"-"},"content":""},{"lineNumber":693,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":694,"author":{"gitId":"-"},"content":"   * Saves the feedback responses for the specific questions."},{"lineNumber":695,"author":{"gitId":"-"},"content":"   *"},{"lineNumber":696,"author":{"gitId":"-"},"content":"   * \u003cp\u003eAll empty feedback response will be deleted; For non-empty responses, update/create them if necessary."},{"lineNumber":697,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":698,"author":{"gitId":"-"},"content":"  saveFeedbackResponses(questionSubmissionForms: QuestionSubmissionFormModel[]): void {"},{"lineNumber":699,"author":{"gitId":"domlimm"},"content":"    this.isSubmitAllClicked \u003d true;"},{"lineNumber":700,"author":{"gitId":"domlimm"},"content":""},{"lineNumber":701,"author":{"gitId":"-"},"content":"    const notYetAnsweredQuestions: Set\u003cnumber\u003e \u003d new Set();"},{"lineNumber":702,"author":{"gitId":"-"},"content":"    const requestIds: Record\u003cstring, string\u003e \u003d {};"},{"lineNumber":703,"author":{"gitId":"-"},"content":"    const answers: Record\u003cstring, FeedbackResponse[]\u003e \u003d {};"},{"lineNumber":704,"author":{"gitId":"-"},"content":"    const failToSaveQuestions: Record\u003cnumber, string\u003e \u003d {}; // Map of question number to error message"},{"lineNumber":705,"author":{"gitId":"-"},"content":"    const savingRequests: Observable\u003cany\u003e[] \u003d [];"},{"lineNumber":706,"author":{"gitId":"-"},"content":""},{"lineNumber":707,"author":{"gitId":"-"},"content":"    this.logService.createFeedbackSessionLog({"},{"lineNumber":708,"author":{"gitId":"-"},"content":"      courseId: this.courseId,"},{"lineNumber":709,"author":{"gitId":"-"},"content":"      feedbackSessionName: this.feedbackSessionName,"},{"lineNumber":710,"author":{"gitId":"-"},"content":"      studentEmail: this.personEmail,"},{"lineNumber":711,"author":{"gitId":"-"},"content":"      logType: FeedbackSessionLogType.SUBMISSION,"},{"lineNumber":712,"author":{"gitId":"-"},"content":"    }).subscribe({"},{"lineNumber":713,"author":{"gitId":"-"},"content":"      next: () \u003d\u003e {},"},{"lineNumber":714,"author":{"gitId":"-"},"content":"      error: () \u003d\u003e {"},{"lineNumber":715,"author":{"gitId":"-"},"content":"        this.statusMessageService.showWarningToast(\u0027Failed to log feedback session submission\u0027);"},{"lineNumber":716,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":717,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":718,"author":{"gitId":"-"},"content":""},{"lineNumber":719,"author":{"gitId":"-"},"content":"    questionSubmissionForms.forEach((questionSubmissionFormModel: QuestionSubmissionFormModel) \u003d\u003e {"},{"lineNumber":720,"author":{"gitId":"-"},"content":"      let isQuestionFullyAnswered: boolean \u003d true;"},{"lineNumber":721,"author":{"gitId":"-"},"content":""},{"lineNumber":722,"author":{"gitId":"-"},"content":"      const responses: FeedbackResponseRequest[] \u003d [];"},{"lineNumber":723,"author":{"gitId":"-"},"content":""},{"lineNumber":724,"author":{"gitId":"-"},"content":"      questionSubmissionFormModel.recipientSubmissionForms"},{"lineNumber":725,"author":{"gitId":"-"},"content":"          .forEach((recipientSubmissionFormModel: FeedbackResponseRecipientSubmissionFormModel) \u003d\u003e {"},{"lineNumber":726,"author":{"gitId":"-"},"content":"            if (!recipientSubmissionFormModel.isValid) {"},{"lineNumber":727,"author":{"gitId":"-"},"content":"              failToSaveQuestions[questionSubmissionFormModel.questionNumber] \u003d"},{"lineNumber":728,"author":{"gitId":"-"},"content":"                  \u0027Invalid responses provided. Please check question constraints.\u0027;"},{"lineNumber":729,"author":{"gitId":"-"},"content":"              return;"},{"lineNumber":730,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":731,"author":{"gitId":"-"},"content":"            const isFeedbackResponseDetailsEmpty: boolean \u003d"},{"lineNumber":732,"author":{"gitId":"-"},"content":"                this.feedbackResponsesService.isFeedbackResponseDetailsEmpty("},{"lineNumber":733,"author":{"gitId":"-"},"content":"                    questionSubmissionFormModel.questionType, recipientSubmissionFormModel.responseDetails);"},{"lineNumber":734,"author":{"gitId":"-"},"content":"            isQuestionFullyAnswered \u003d isQuestionFullyAnswered \u0026\u0026 !isFeedbackResponseDetailsEmpty;"},{"lineNumber":735,"author":{"gitId":"-"},"content":""},{"lineNumber":736,"author":{"gitId":"-"},"content":"            if (!isFeedbackResponseDetailsEmpty) {"},{"lineNumber":737,"author":{"gitId":"-"},"content":"              responses.push({"},{"lineNumber":738,"author":{"gitId":"-"},"content":"                recipient: recipientSubmissionFormModel.recipientIdentifier,"},{"lineNumber":739,"author":{"gitId":"-"},"content":"                responseDetails: recipientSubmissionFormModel.responseDetails,"},{"lineNumber":740,"author":{"gitId":"-"},"content":"              });"},{"lineNumber":741,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":742,"author":{"gitId":"-"},"content":"          });"},{"lineNumber":743,"author":{"gitId":"-"},"content":""},{"lineNumber":744,"author":{"gitId":"-"},"content":"      if (!failToSaveQuestions[questionSubmissionFormModel.questionNumber]) {"},{"lineNumber":745,"author":{"gitId":"-"},"content":"        savingRequests.push("},{"lineNumber":746,"author":{"gitId":"-"},"content":"            this.feedbackResponsesService.submitFeedbackResponses(questionSubmissionFormModel.feedbackQuestionId, {"},{"lineNumber":747,"author":{"gitId":"-"},"content":"              responses,"},{"lineNumber":748,"author":{"gitId":"-"},"content":"            }, {"},{"lineNumber":749,"author":{"gitId":"-"},"content":"              intent: this.intent,"},{"lineNumber":750,"author":{"gitId":"-"},"content":"              key: this.regKey,"},{"lineNumber":751,"author":{"gitId":"-"},"content":"              moderatedperson: this.moderatedPerson,"},{"lineNumber":752,"author":{"gitId":"-"},"content":"            }).pipe("},{"lineNumber":753,"author":{"gitId":"-"},"content":"                tap((resp: FeedbackResponses) \u003d\u003e {"},{"lineNumber":754,"author":{"gitId":"-"},"content":"                  const responsesMap: Record\u003cstring, FeedbackResponse\u003e \u003d {};"},{"lineNumber":755,"author":{"gitId":"-"},"content":"                  resp.responses.forEach((response: FeedbackResponse) \u003d\u003e {"},{"lineNumber":756,"author":{"gitId":"-"},"content":"                    responsesMap[response.recipientIdentifier] \u003d response;"},{"lineNumber":757,"author":{"gitId":"-"},"content":"                    answers[questionSubmissionFormModel.feedbackQuestionId] \u003d"},{"lineNumber":758,"author":{"gitId":"-"},"content":"                        answers[questionSubmissionFormModel.feedbackQuestionId] || [];"},{"lineNumber":759,"author":{"gitId":"-"},"content":"                    answers[questionSubmissionFormModel.feedbackQuestionId].push(response);"},{"lineNumber":760,"author":{"gitId":"-"},"content":"                  });"},{"lineNumber":761,"author":{"gitId":"-"},"content":"                  requestIds[questionSubmissionFormModel.feedbackQuestionId] \u003d resp.requestId || \u0027\u0027;"},{"lineNumber":762,"author":{"gitId":"-"},"content":""},{"lineNumber":763,"author":{"gitId":"-"},"content":"                  questionSubmissionFormModel.recipientSubmissionForms"},{"lineNumber":764,"author":{"gitId":"-"},"content":"                      .forEach((recipientSubmissionFormModel: FeedbackResponseRecipientSubmissionFormModel) \u003d\u003e {"},{"lineNumber":765,"author":{"gitId":"-"},"content":"                        if (responsesMap[recipientSubmissionFormModel.recipientIdentifier]) {"},{"lineNumber":766,"author":{"gitId":"-"},"content":"                          const correspondingResp: FeedbackResponse \u003d"},{"lineNumber":767,"author":{"gitId":"-"},"content":"                              responsesMap[recipientSubmissionFormModel.recipientIdentifier];"},{"lineNumber":768,"author":{"gitId":"-"},"content":"                          recipientSubmissionFormModel.responseId \u003d correspondingResp.feedbackResponseId;"},{"lineNumber":769,"author":{"gitId":"-"},"content":"                          recipientSubmissionFormModel.responseDetails \u003d correspondingResp.responseDetails;"},{"lineNumber":770,"author":{"gitId":"-"},"content":"                          recipientSubmissionFormModel.recipientIdentifier \u003d correspondingResp.recipientIdentifier;"},{"lineNumber":771,"author":{"gitId":"-"},"content":"                        } else {"},{"lineNumber":772,"author":{"gitId":"-"},"content":"                          recipientSubmissionFormModel.responseId \u003d \u0027\u0027;"},{"lineNumber":773,"author":{"gitId":"-"},"content":"                          recipientSubmissionFormModel.commentByGiver \u003d undefined;"},{"lineNumber":774,"author":{"gitId":"-"},"content":"                        }"},{"lineNumber":775,"author":{"gitId":"-"},"content":"                      });"},{"lineNumber":776,"author":{"gitId":"-"},"content":"                }),"},{"lineNumber":777,"author":{"gitId":"-"},"content":"                switchMap(() \u003d\u003e"},{"lineNumber":778,"author":{"gitId":"-"},"content":"                    forkJoin(questionSubmissionFormModel.recipientSubmissionForms"},{"lineNumber":779,"author":{"gitId":"-"},"content":"                        .map((recipientSubmissionFormModel: FeedbackResponseRecipientSubmissionFormModel) \u003d\u003e"},{"lineNumber":780,"author":{"gitId":"-"},"content":"                            this.createCommentRequest(recipientSubmissionFormModel))),"},{"lineNumber":781,"author":{"gitId":"-"},"content":"                ),"},{"lineNumber":782,"author":{"gitId":"-"},"content":"                catchError((error: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":783,"author":{"gitId":"-"},"content":"                  failToSaveQuestions[questionSubmissionFormModel.questionNumber] \u003d error.error.message;"},{"lineNumber":784,"author":{"gitId":"-"},"content":"                  return of(error);"},{"lineNumber":785,"author":{"gitId":"-"},"content":"                }),"},{"lineNumber":786,"author":{"gitId":"-"},"content":"            ),"},{"lineNumber":787,"author":{"gitId":"-"},"content":"        );"},{"lineNumber":788,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":789,"author":{"gitId":"-"},"content":""},{"lineNumber":790,"author":{"gitId":"-"},"content":"      if (!isQuestionFullyAnswered) {"},{"lineNumber":791,"author":{"gitId":"-"},"content":"        notYetAnsweredQuestions.add(questionSubmissionFormModel.questionNumber);"},{"lineNumber":792,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":793,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":794,"author":{"gitId":"-"},"content":""},{"lineNumber":795,"author":{"gitId":"-"},"content":"    this.isSavingResponses \u003d true;"},{"lineNumber":796,"author":{"gitId":"-"},"content":"    forkJoin(savingRequests).pipe("},{"lineNumber":797,"author":{"gitId":"-"},"content":"        finalize(() \u003d\u003e {"},{"lineNumber":798,"author":{"gitId":"-"},"content":"          this.isSavingResponses \u003d false;"},{"lineNumber":799,"author":{"gitId":"-"},"content":""},{"lineNumber":800,"author":{"gitId":"-"},"content":"          const modalRef: NgbModalRef \u003d this.ngbModal.open(SavingCompleteModalComponent);"},{"lineNumber":801,"author":{"gitId":"-"},"content":"          modalRef.componentInstance.requestIds \u003d requestIds;"},{"lineNumber":802,"author":{"gitId":"-"},"content":"          modalRef.componentInstance.courseId \u003d this.courseId;"},{"lineNumber":803,"author":{"gitId":"-"},"content":"          modalRef.componentInstance.feedbackSessionName \u003d this.feedbackSessionName;"},{"lineNumber":804,"author":{"gitId":"-"},"content":"          modalRef.componentInstance.feedbackSessionTimezone \u003d this.feedbackSessionTimezone;"},{"lineNumber":805,"author":{"gitId":"-"},"content":"          modalRef.componentInstance.personEmail \u003d this.personEmail;"},{"lineNumber":806,"author":{"gitId":"-"},"content":"          modalRef.componentInstance.personName \u003d this.personName;"},{"lineNumber":807,"author":{"gitId":"-"},"content":"          modalRef.componentInstance.questions \u003d questionSubmissionForms;"},{"lineNumber":808,"author":{"gitId":"-"},"content":"          modalRef.componentInstance.answers \u003d answers;"},{"lineNumber":809,"author":{"gitId":"-"},"content":"          modalRef.componentInstance.notYetAnsweredQuestions \u003d Array.from(notYetAnsweredQuestions.values());"},{"lineNumber":810,"author":{"gitId":"-"},"content":"          modalRef.componentInstance.failToSaveQuestions \u003d failToSaveQuestions;"},{"lineNumber":811,"author":{"gitId":"-"},"content":"        }),"},{"lineNumber":812,"author":{"gitId":"-"},"content":"    ).subscribe();"},{"lineNumber":813,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":814,"author":{"gitId":"-"},"content":""},{"lineNumber":815,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":816,"author":{"gitId":"-"},"content":"   * Creates comment request."},{"lineNumber":817,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":818,"author":{"gitId":"-"},"content":"  createCommentRequest(recipientSubmissionFormModel: FeedbackResponseRecipientSubmissionFormModel): Observable\u003cany\u003e {"},{"lineNumber":819,"author":{"gitId":"-"},"content":"    if (!recipientSubmissionFormModel.responseId) {"},{"lineNumber":820,"author":{"gitId":"-"},"content":"      // responseId not set, cannot set comment"},{"lineNumber":821,"author":{"gitId":"-"},"content":"      return of({});"},{"lineNumber":822,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":823,"author":{"gitId":"-"},"content":"    if (!recipientSubmissionFormModel.commentByGiver) {"},{"lineNumber":824,"author":{"gitId":"-"},"content":"      // comment not given, do nothing"},{"lineNumber":825,"author":{"gitId":"-"},"content":"      return of({});"},{"lineNumber":826,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":827,"author":{"gitId":"-"},"content":""},{"lineNumber":828,"author":{"gitId":"-"},"content":"    const isSameRecipient \u003d recipientSubmissionFormModel.recipientIdentifier"},{"lineNumber":829,"author":{"gitId":"-"},"content":"        \u003d\u003d\u003d recipientSubmissionFormModel.commentByGiver.originalRecipientIdentifier;"},{"lineNumber":830,"author":{"gitId":"-"},"content":""},{"lineNumber":831,"author":{"gitId":"-"},"content":"    if (!recipientSubmissionFormModel.commentByGiver.originalComment || !isSameRecipient) {"},{"lineNumber":832,"author":{"gitId":"-"},"content":"      // comment is new or original comment deleted because recipient has changed"},{"lineNumber":833,"author":{"gitId":"-"},"content":""},{"lineNumber":834,"author":{"gitId":"-"},"content":"      if (recipientSubmissionFormModel.commentByGiver.commentEditFormModel.commentText \u003d\u003d\u003d \u0027\u0027) {"},{"lineNumber":835,"author":{"gitId":"-"},"content":"        // new comment is empty"},{"lineNumber":836,"author":{"gitId":"-"},"content":"        recipientSubmissionFormModel.commentByGiver \u003d undefined;"},{"lineNumber":837,"author":{"gitId":"-"},"content":"        return of({});"},{"lineNumber":838,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":839,"author":{"gitId":"-"},"content":""},{"lineNumber":840,"author":{"gitId":"-"},"content":"      // create new comment"},{"lineNumber":841,"author":{"gitId":"-"},"content":"      return this.commentService.createComment({"},{"lineNumber":842,"author":{"gitId":"-"},"content":"        commentText: recipientSubmissionFormModel.commentByGiver.commentEditFormModel.commentText,"},{"lineNumber":843,"author":{"gitId":"-"},"content":"        // we ignore the fields in comment edit model as participant comment"},{"lineNumber":844,"author":{"gitId":"-"},"content":"        // will follow visibilities from question by design"},{"lineNumber":845,"author":{"gitId":"-"},"content":"        showCommentTo: [],"},{"lineNumber":846,"author":{"gitId":"-"},"content":"        showGiverNameTo: [],"},{"lineNumber":847,"author":{"gitId":"-"},"content":"      }, recipientSubmissionFormModel.responseId, this.intent, {"},{"lineNumber":848,"author":{"gitId":"-"},"content":"        key: this.regKey,"},{"lineNumber":849,"author":{"gitId":"-"},"content":"        moderatedperson: this.moderatedPerson,"},{"lineNumber":850,"author":{"gitId":"-"},"content":"      }).pipe("},{"lineNumber":851,"author":{"gitId":"-"},"content":"          tap((comment: FeedbackResponseComment) \u003d\u003e {"},{"lineNumber":852,"author":{"gitId":"-"},"content":"            recipientSubmissionFormModel.commentByGiver \u003d this.getCommentModel("},{"lineNumber":853,"author":{"gitId":"-"},"content":"                comment, recipientSubmissionFormModel.recipientIdentifier);"},{"lineNumber":854,"author":{"gitId":"-"},"content":"          }),"},{"lineNumber":855,"author":{"gitId":"-"},"content":"      );"},{"lineNumber":856,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":857,"author":{"gitId":"-"},"content":""},{"lineNumber":858,"author":{"gitId":"-"},"content":"    // existing comment"},{"lineNumber":859,"author":{"gitId":"-"},"content":""},{"lineNumber":860,"author":{"gitId":"-"},"content":"    if (recipientSubmissionFormModel.commentByGiver.commentEditFormModel.commentText \u003d\u003d\u003d \u0027\u0027) {"},{"lineNumber":861,"author":{"gitId":"-"},"content":"      // comment is empty, create delete request"},{"lineNumber":862,"author":{"gitId":"-"},"content":"      return this.commentService.deleteComment("},{"lineNumber":863,"author":{"gitId":"-"},"content":"          recipientSubmissionFormModel.commentByGiver.originalComment.feedbackResponseCommentId, this.intent, {"},{"lineNumber":864,"author":{"gitId":"-"},"content":"            key: this.regKey,"},{"lineNumber":865,"author":{"gitId":"-"},"content":"            moderatedperson: this.moderatedPerson,"},{"lineNumber":866,"author":{"gitId":"-"},"content":"          })"},{"lineNumber":867,"author":{"gitId":"-"},"content":"          .pipe("},{"lineNumber":868,"author":{"gitId":"-"},"content":"              tap(() \u003d\u003e {"},{"lineNumber":869,"author":{"gitId":"-"},"content":"                recipientSubmissionFormModel.commentByGiver \u003d undefined;"},{"lineNumber":870,"author":{"gitId":"-"},"content":"              }));"},{"lineNumber":871,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":872,"author":{"gitId":"-"},"content":""},{"lineNumber":873,"author":{"gitId":"-"},"content":"    // update comment"},{"lineNumber":874,"author":{"gitId":"-"},"content":"    return this.commentService.updateComment({"},{"lineNumber":875,"author":{"gitId":"-"},"content":"      commentText: recipientSubmissionFormModel.commentByGiver.commentEditFormModel.commentText,"},{"lineNumber":876,"author":{"gitId":"-"},"content":"      // we ignore the fields in comment edit model as participant comment"},{"lineNumber":877,"author":{"gitId":"-"},"content":"      // will follow visibilities from question by design"},{"lineNumber":878,"author":{"gitId":"-"},"content":"      showCommentTo: [],"},{"lineNumber":879,"author":{"gitId":"-"},"content":"      showGiverNameTo: [],"},{"lineNumber":880,"author":{"gitId":"-"},"content":"    }, recipientSubmissionFormModel.commentByGiver.originalComment.feedbackResponseCommentId, this.intent, {"},{"lineNumber":881,"author":{"gitId":"-"},"content":"      key: this.regKey,"},{"lineNumber":882,"author":{"gitId":"-"},"content":"      moderatedperson: this.moderatedPerson,"},{"lineNumber":883,"author":{"gitId":"-"},"content":"    }).pipe("},{"lineNumber":884,"author":{"gitId":"-"},"content":"        tap((comment: FeedbackResponseComment) \u003d\u003e {"},{"lineNumber":885,"author":{"gitId":"-"},"content":"          recipientSubmissionFormModel.commentByGiver \u003d this.getCommentModel("},{"lineNumber":886,"author":{"gitId":"-"},"content":"              comment, recipientSubmissionFormModel.recipientIdentifier);"},{"lineNumber":887,"author":{"gitId":"-"},"content":"        }),"},{"lineNumber":888,"author":{"gitId":"-"},"content":"    );"},{"lineNumber":889,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":890,"author":{"gitId":"-"},"content":""},{"lineNumber":891,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":892,"author":{"gitId":"-"},"content":"   * Deletes a comment by participants."},{"lineNumber":893,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":894,"author":{"gitId":"-"},"content":"  deleteParticipantComment(questionIndex: number, responseIdx: number): void {"},{"lineNumber":895,"author":{"gitId":"-"},"content":"    const recipientSubmissionFormModel: FeedbackResponseRecipientSubmissionFormModel \u003d"},{"lineNumber":896,"author":{"gitId":"-"},"content":"        this.questionSubmissionForms[questionIndex].recipientSubmissionForms[responseIdx];"},{"lineNumber":897,"author":{"gitId":"-"},"content":""},{"lineNumber":898,"author":{"gitId":"-"},"content":"    if (!recipientSubmissionFormModel.commentByGiver || !recipientSubmissionFormModel.commentByGiver.originalComment) {"},{"lineNumber":899,"author":{"gitId":"-"},"content":"      return;"},{"lineNumber":900,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":901,"author":{"gitId":"-"},"content":""},{"lineNumber":902,"author":{"gitId":"-"},"content":"    this.commentService.deleteComment("},{"lineNumber":903,"author":{"gitId":"-"},"content":"        recipientSubmissionFormModel.commentByGiver.originalComment.feedbackResponseCommentId, this.intent, {"},{"lineNumber":904,"author":{"gitId":"-"},"content":"          key: this.regKey,"},{"lineNumber":905,"author":{"gitId":"-"},"content":"          moderatedperson: this.moderatedPerson,"},{"lineNumber":906,"author":{"gitId":"-"},"content":"        })"},{"lineNumber":907,"author":{"gitId":"-"},"content":"        .subscribe({"},{"lineNumber":908,"author":{"gitId":"-"},"content":"          next: () \u003d\u003e {"},{"lineNumber":909,"author":{"gitId":"-"},"content":"            recipientSubmissionFormModel.commentByGiver \u003d undefined;"},{"lineNumber":910,"author":{"gitId":"-"},"content":"            this.statusMessageService.showSuccessToast(\u0027Your comment has been deleted!\u0027);"},{"lineNumber":911,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":912,"author":{"gitId":"-"},"content":"          error: (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":913,"author":{"gitId":"-"},"content":"            this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":914,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":915,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":916,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":917,"author":{"gitId":"-"},"content":""},{"lineNumber":918,"author":{"gitId":"-"},"content":"  retryLoadingFeedbackSessionQuestions(): void {"},{"lineNumber":919,"author":{"gitId":"-"},"content":"    this.hasFeedbackSessionQuestionsLoadingFailed \u003d false;"},{"lineNumber":920,"author":{"gitId":"-"},"content":"    if (this.retryAttempts \u003e\u003d 0) {"},{"lineNumber":921,"author":{"gitId":"-"},"content":"      this.retryAttempts -\u003d 1;"},{"lineNumber":922,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":923,"author":{"gitId":"-"},"content":"    this.loadFeedbackQuestions();"},{"lineNumber":924,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":925,"author":{"gitId":"-"},"content":""},{"lineNumber":926,"author":{"gitId":"-"},"content":"  handleError(resp: ErrorMessageOutput): void {"},{"lineNumber":927,"author":{"gitId":"-"},"content":"    this.hasFeedbackSessionQuestionsLoadingFailed \u003d true;"},{"lineNumber":928,"author":{"gitId":"-"},"content":"    if (this.retryAttempts \u003c 0) {"},{"lineNumber":929,"author":{"gitId":"-"},"content":"      const report: NgbModalRef \u003d this.ngbModal.open(ErrorReportComponent);"},{"lineNumber":930,"author":{"gitId":"-"},"content":"      report.componentInstance.requestId \u003d resp.error.requestId;"},{"lineNumber":931,"author":{"gitId":"-"},"content":"      report.componentInstance.errorMessage \u003d resp.error.message;"},{"lineNumber":932,"author":{"gitId":"-"},"content":"    } else {"},{"lineNumber":933,"author":{"gitId":"-"},"content":"      this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":934,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":935,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":936,"author":{"gitId":"-"},"content":""},{"lineNumber":937,"author":{"gitId":"-"},"content":"  loadRecipientsAndResponses(event: any, questionSubmissionForm: QuestionSubmissionFormModel): void {"},{"lineNumber":938,"author":{"gitId":"-"},"content":"    if (event \u0026\u0026 event.visible \u0026\u0026 !questionSubmissionForm.isLoaded \u0026\u0026 !questionSubmissionForm.isLoading) {"},{"lineNumber":939,"author":{"gitId":"-"},"content":"      questionSubmissionForm.isLoading \u003d true;"},{"lineNumber":940,"author":{"gitId":"-"},"content":"      this.loadFeedbackQuestionRecipientsForQuestion(questionSubmissionForm);"},{"lineNumber":941,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":942,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":943,"author":{"gitId":"-"},"content":""},{"lineNumber":944,"author":{"gitId":"-"},"content":"  private getformattedSessionClosingTime(feedbackSession: FeedbackSession, TIME_FORMAT: string): string {"},{"lineNumber":945,"author":{"gitId":"-"},"content":"    const userSessionEndingTime \u003d DeadlineExtensionHelper.getUserFeedbackSessionEndingTimestamp(feedbackSession);"},{"lineNumber":946,"author":{"gitId":"-"},"content":"    let formattedString \u003d this.timezoneService.formatToString("},{"lineNumber":947,"author":{"gitId":"-"},"content":"      userSessionEndingTime, feedbackSession.timeZone, TIME_FORMAT);"},{"lineNumber":948,"author":{"gitId":"-"},"content":"    if (DeadlineExtensionHelper.hasUserExtension(feedbackSession)) {"},{"lineNumber":949,"author":{"gitId":"-"},"content":"      formattedString +\u003d \u0027 (Extension given)\u0027;"},{"lineNumber":950,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":951,"author":{"gitId":"-"},"content":"    return formattedString;"},{"lineNumber":952,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":953,"author":{"gitId":"-"},"content":""},{"lineNumber":954,"author":{"gitId":"-"},"content":"  private isFeedbackEndingLessThanFifteenMinutes(feedbackSession: FeedbackSession): boolean {"},{"lineNumber":955,"author":{"gitId":"-"},"content":"    const userSessionEndingTime \u003d DeadlineExtensionHelper.getOngoingUserFeedbackSessionEndingTimestamp(feedbackSession);"},{"lineNumber":956,"author":{"gitId":"-"},"content":"    return (userSessionEndingTime - Date.now()) \u003c Milliseconds.IN_FIFTEEN_MINUTES;"},{"lineNumber":957,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":958,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"domlimm":3,"-":955}}]
